BUG REPORT COMMENTS:
We’re ran into a problem with generated types in the Model in Eclipse
3.1.2 with APT. Let me describe the situation:

Project 1/
            Foo.java, which creates (via APT):
               FooGen.java

Project 2/
            Bar.java, which extends FooGen.java

Everything builds correctly from JDT’s perspective, but sometimes (about 1 in 3 on most machines), when APT is processing Bar.java in Project 2 after a full clean build has been started, it gets an inconsistent type hierarchy for it, and doesn’t see that Bar extends FooGen.

The reason for this is that after both projects caches were reset during a clean, a separate plugin (non-generic Eclipse) was requesting an AST from project 2. This would cause project 2's caches to get loaded. After that both projects were built. Type generation in project 1 causes its caches to be reset, but not project 2. Then when project 2 was built, it used its cache and failed to find the new generated types in project 2.

To work around this in 3.1.2, we added a call to J

