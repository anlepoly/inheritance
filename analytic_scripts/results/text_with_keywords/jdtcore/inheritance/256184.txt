BUG REPORT COMMENTS:
Build ID: M20080911-1700

Steps To Reproduce:
Passing an array type as a type parameter to the Types.getDeclaredType(DeclaredType typeDecl, TypeMirror... typeParameters) method throws IllegalArgumentException in a Java 6 annotation processor run from inside Eclipse.






More information:
This works perfectly fine in a Sun Java 6 compiler, however throws an IllegalArgumentException when run via Eclipse JDT Java 6 Annotation Processor support feature.

Sample code:

public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv)
{
  Types typeUtils = processingEnv.getTypeUtils();
  Elements elementUtils = processingEnv.getElementUtils();
  TypeElement stringDecl = elementUtils.getTypeElement(String.class.getName());
  DeclaredType stringType = typeUtils.getDeclaredType(stringDecl);
  ArrayType stringArrayType = typeUtils.getArrayType(stringType);
  TypeElement aosDecl = elementUtils.getTypeElement("java.util.Map");
    	
  DeclaredType decl = typeUtils.getDeclaredType(aosDecl, string

