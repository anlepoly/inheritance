BUG REPORT COMMENTS:
I had to make an additional change to the code. Here is what we used to call which ends up invoking MakeHandlersGo.setEnabled() which is noop:

  discoveryWizardCommand.setEnabled(evaluationContext);
  
I changed the code to do this:

  discoveryWizardCommand.isEnabled()
  
That triggers HandlerProxy.setEnabled() which then does the right thing. 

With the change to the extension declaration and the code the command enablement check now works as expected.

