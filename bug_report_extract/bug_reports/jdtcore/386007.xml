<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>386007</bug_id>
          
          <creation_ts>2012-07-26 03:13:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Need Junit suite for Java8 tests alone.</short_desc>
          <delta_ts>2012-10-22 06:10:13 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>380188</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2142030</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-26 03:13:24 -0400</bug_when>
    <thetext>BETA_JAVA8:

We need a smoke testsuite  for Java 8 work that will run only the Java8
tests. This is so we can quickly test our changes to make sure none of
the new functionality is broken as we are churning the code.

The new suite could be RunAllJava8Tests:

It should run:

LambdaExpressionSyntaxTest
ReferenceExpressionSyntaxTest
TypeAnnotationSyntaxTest
DefaultMethodsTest
NegativeLambdaExpressionsTest
NegativeTypeAnnotationTest
ComplianceDiagnoseTest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2142031</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-26 03:14:05 -0400</bug_when>
    <thetext>Jay, thanks for following up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2142104</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-07-26 06:15:51 -0400</bug_when>
    <thetext>Released the new test suite into BETA_JAVA8 branch:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=09073fd150a9048c7ec28089fbef1eb48747ccaa</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2142144</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-26 07:46:40 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; Released the new test suite into BETA_JAVA8 branch:
&gt; 
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=09073fd150a9048c7ec28089fbef1eb48747ccaa

Jay, please add copyright including the JCP disclaimer - TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2142300</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-07-26 12:06:56 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; Jay, please add copyright including the JCP disclaimer - TIA.

Added and released.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2174547</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-21 04:31:23 -0400</bug_when>
    <thetext>Jay, I recently created a bunch of new tests:


ASTConverterAST8Test.class,
ASTConverterTestAST8_2.class,
ASTConverterBugsTestJLS8.class,
ASTConverter15JLS8Test.class,

These suites run fine individually or as part of RunAllDomTests or as
a part of RunConverterTests or RunAllJDTCoreTests.

If I add them to RunAllJava8Tests - I see some failures. Could you look
into why ? TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2174683</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-22 06:10:13 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; If I add them to RunAllJava8Tests - I see some failures. Could you look
&gt; into why ? TIA.

The converter tests (tests that extend ConverterTestSetup) use couple of static fields to avoid configuration of test projects multiple times and clearing them for every test suite. I have added the code to do similar thing in RunAllJava8Tests. The test suite is working fine now.

I also noticed that RunAllJava8Tests has some issues with JUnit 4 - Some tests are marked as Unrooted tests, even though the tests themselves are run alright. For some reason, Junit 4 sees the converter tests with different root than the other tests. I could be wrong, but one possible explanation is that the converter tests have org.eclipse.jdt.core.tests.junit.extension.TestCase  in their hierarchy. I am leaving the tests as they are now as they are fine with Junit 3. But eventually when Junit 3 is deprecated and removed from the UI, we will have to revisit this.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>