<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>433747</bug_id>
          
          <creation_ts>2014-04-29 06:09:00 -0400</creation_ts>
          <short_desc>[compiler] TYPE Annotation allowed in package-info instead of only PACKAGE</short_desc>
          <delta_ts>2014-09-17 02:42:21 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3.2</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Reto Urfer">reto.urfer</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>alexandre.chatiron</cc>
    
    <cc>jarthana</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>1</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2394585</commentid>
    <comment_count>0</comment_count>
    <who name="Reto Urfer">reto.urfer</who>
    <bug_when>2014-04-29 06:09:41 -0400</bug_when>
    <thetext>The Eclipse Java Compiler allows to annotate the package in package-info.java with annotations of ElementType.TYPE. With Java7 this was working fine but alo there the Oracle Java Compiler raised an error.

With Java8 the implementation of class Class does no longer load the annotations of ElementType.TYPE for the package-info. Only annotations of ElementType.PACKAGe are found and also accepted from the Oracle Java Compiler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2395159</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-04-30 01:31:57 -0400</bug_when>
    <thetext>Sasi, please investigate - we need to first ascertain if there is indeed
a bug.

Reto, Please attach a test case if possible. This will avoid having to divine
your scenario even if straightforward</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2395192</commentid>
    <comment_count>2</comment_count>
      <attachid>242524</attachid>
    <who name="Reto Urfer">reto.urfer</who>
    <bug_when>2014-04-30 03:22:54 -0400</bug_when>
    <thetext>Created attachment 242524
test classes

with Oracle javac Compiler (7 &amp; 8) the package-info.java file can not be compiled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2396714</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-05-05 05:35:52 -0400</bug_when>
    <thetext>Here&apos;s a testcase in a single CU - put this in p\package-info.java :

@PackageAnnot(&quot;p&quot;)
package a;

import java.lang.annotation.ElementType;
import java.lang.annotation.Target;


@Target(ElementType.TYPE)
@interface PackageAnnot {
	String value();
}

This is an existing bug and was present at least as far back as 3.8.2. In recent versions, the bug can also be seen with TYPE_USE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2446784</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-02 20:03:32 -0400</bug_when>
    <thetext>I&apos;ll take this one Sasi if you don&apos;t mind.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2446850</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-03 02:44:18 -0400</bug_when>
    <thetext>Fix and test released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=b4d7aac503b9b2fa045054d16693c77d0e3e65f6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452864</commentid>
    <comment_count>6</comment_count>
    <who name="Sasikanth Bharadwaj">saammana</who>
    <bug_when>2014-09-17 02:15:56 -0400</bug_when>
    <thetext>Verified fixed for 4.5 M2 using I20140916-2000 build</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>242524</attachid>
            <date>2014-04-30 03:22:00 -0400</date>
            <delta_ts>2014-04-30 03:22:54 -0400</delta_ts>
            <desc>test classes</desc>
            <filename>test.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>1482</size>
            <attacher name="Reto Urfer">reto.urfer</attacher>
            
              <data encoding="base64">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
</data>

          </attachment>
      

    </bug>

</bugzilla>