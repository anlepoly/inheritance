<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>427163</bug_id>
          
          <creation_ts>2014-01-31 16:40:00 -0500</creation_ts>
          <short_desc>[1.8][null] bogus error &quot;Contradictory null specification&quot; on varags</short_desc>
          <delta_ts>2014-03-07 01:09:36 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>392099</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>noopur_gupta</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2357394</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-01-31 16:40:32 -0500</bug_when>
    <thetext>In a 1.8 project with null type annotations enabled, this snippet:

	void consume(@NonNull String @Nullable... strings) {
	}

triggers this error:

Contradictory null specification; only one of @NonNull and @Nullable can be specified at any location.

This is wrong, one annotation affects the array the other its contents.

Using same annotations, each one has the desired effect on null analysis. Apparently only the check for contradictions (partially) sees the first annotation as a declaration annotation (and thus affecting the entire type, i.e., the array).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2367306</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-02-23 10:33:16 -0500</bug_when>
    <thetext>Some of this was caused by unclear handover between the initial phase where the annotation is seen as an SE7 annotations and the conversion to SE8. Also several locations missed code to detect such contradictions on array type reference / allocations.

Tests &amp; fix released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=0f61b5a730cd24bb7ab05a282fa3a07ec8b534a5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2372793</commentid>
    <comment_count>2</comment_count>
    <who name="Noopur Gupta">noopur_gupta</who>
    <bug_when>2014-03-07 01:09:36 -0500</bug_when>
    <thetext>Verified as working for Eclipse + Java 8 RC2 using Kepler SR2 +   
Eclipse Java Development Tools Patch for Java 8 Support (BETA)
1.0.0.v20140306-1935</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>