<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>424718</bug_id>
          
          <creation_ts>2013-12-28 14:27:00 -0500</creation_ts>
          <short_desc>[1.8][compiler] API backward compatibility AST.TypeReference</short_desc>
          <delta_ts>2014-01-05 22:41:21 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andr  Pankraz">andre</reporter>
          <assigned_to name="shankha banerjee">shankhba</assigned_to>
          <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="60271"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2345083</commentid>
    <comment_count>0</comment_count>
    <who name="Andr  Pankraz">andre</who>
    <bug_when>2013-12-28 14:27:02 -0500</bug_when>
    <thetext>There where some API changes for JDK 8, e.g. additional intermal parameters for the language changes.

As an example for type annotations in
 org.eclipse.jdt.internal.compiler.ast.TypeReference

changed the signature of the method:
  public static final TypeReference baseTypeReference(int baseType, int dim)

to
  public static final TypeReference baseTypeReference(int baseType, int dim, Annotation [][] dimAnnotations)


This breaks for instance the popular compiler extension lombok:   http://code.google.com/p/projectlombok/issues/detail?id=597 

I suggest to add compatibility functions for this like e.g.:
public static final TypeReference baseTypeReference(int baseType, int dim) {
	// compatibility function
	return  baseTypeReference(baseType, dim, null);
}

This here is just an example. These kind of compatibility functions are very simple and help to prevent the breaking of potentially many external plugins and rise the acceptance for the new eclipse version. 

I know this is an internal package, but you should be well aware that many external plugins around compilers and and languages (quite a popular topic nowadays) directly use your nice compiler APIs, especially the AST.

I kindly request to add at least this function because lombok is very important and works fine with this additional method ;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2345553</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-01-02 21:31:06 -0500</bug_when>
    <thetext>Shankha, please take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2345579</commentid>
    <comment_count>2</comment_count>
      <attachid>238644</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-01-03 03:18:52 -0500</bug_when>
    <thetext>Created attachment 238644
Patch

Test results are all green.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2345580</commentid>
    <comment_count>3</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-01-03 03:23:26 -0500</bug_when>
    <thetext>I agree to the terms and conditions on http://www.eclipse.org/legal/CoO.php.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2345935</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-01-05 22:41:21 -0500</bug_when>
    <thetext>Fix released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=e1051acac48de2e59e4c3d2d0f46898b4067bf9a.

Thanks Shankha - I eliminated the change in CompletionParser as it is not
required strictly speaking.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>238644</attachid>
            <date>2014-01-03 03:18:00 -0500</date>
            <delta_ts>2014-01-03 03:18:52 -0500</delta_ts>
            <desc>Patch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>2004</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvZGVhc3Npc3Qvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvZGVhc3Npc3QvY29tcGxldGUvQ29tcGxldGlvblBhcnNlci5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29kZWFzc2lzdC9jb21wbGV0ZS9Db21wbGV0aW9uUGFyc2VyLmphdmEKaW5kZXggODFkYzY2ZC4u
MmYzZTlmNiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lzdC9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9jb21wbGV0ZS9Db21wbGV0aW9uUGFyc2Vy
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9jb21wbGV0ZS9Db21wbGV0aW9uUGFyc2VyLmphdmEKQEAg
LTEzODYsOCArMTM4Niw4IEBAIHByaXZhdGUgYm9vbGVhbiBjaGVja0NsYXNzTGl0ZXJhbEFjY2Vz
cygpIHsKIAkJaWYgKChsZW5ndGggPSB0aGlzLmlkZW50aWZpZXJMZW5ndGhTdGFja1t0aGlzLmlk
ZW50aWZpZXJMZW5ndGhQdHItMV0pIDwgMCkgewogCQkJLy8gYnVpbGQgdGhlIHByaW1pdGl2ZSB0
eXBlIG5vZGUKIAkJCWludCBkaW0gPSBpc0FmdGVyQXJyYXlUeXBlKCkgPyB0aGlzLmludFN0YWNr
W3RoaXMuaW50UHRyLS1dIDogMDsKLQkJCUFubm90YXRpb24gW11bXSBhbm5vdGF0aW9uc09uRGlt
ZW5zaW9ucyA9IGRpbSA9PSAwID8gbnVsbCA6IGdldEFubm90YXRpb25zT25EaW1lbnNpb25zKGRp
bSk7Ci0JCQlTaW5nbGVUeXBlUmVmZXJlbmNlIHR5cGVSZWYgPSAoU2luZ2xlVHlwZVJlZmVyZW5j
ZSlUeXBlUmVmZXJlbmNlLmJhc2VUeXBlUmVmZXJlbmNlKC1sZW5ndGgsIGRpbSwgYW5ub3RhdGlv
bnNPbkRpbWVuc2lvbnMpOworCQkJU2luZ2xlVHlwZVJlZmVyZW5jZSB0eXBlUmVmID0gZGltID09
IDAgPyAoU2luZ2xlVHlwZVJlZmVyZW5jZSlUeXBlUmVmZXJlbmNlLmJhc2VUeXBlUmVmZXJlbmNl
KC1sZW5ndGgsIGRpbSkgOgorCQkJCShTaW5nbGVUeXBlUmVmZXJlbmNlKVR5cGVSZWZlcmVuY2Uu
YmFzZVR5cGVSZWZlcmVuY2UoLWxlbmd0aCwgZGltLCBnZXRBbm5vdGF0aW9uc09uRGltZW5zaW9u
cyhkaW0pKTsKIAkJCXR5cGVSZWYuc291cmNlU3RhcnQgPSB0aGlzLmludFN0YWNrW3RoaXMuaW50
UHRyLS1dOwogCQkJaWYgKGRpbSA9PSAwKSB7CiAJCQkJdHlwZVJlZi5zb3VyY2VFbmQgPSB0aGlz
LmludFN0YWNrW3RoaXMuaW50UHRyLS1dOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9UeXBlUmVm
ZXJlbmNlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQppbmRleCBmNDk5NWI2
Li5hYzgzMjY3IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQpAQCAtMjk0LDYgKzI5NCwxMCBAQCBwdWJs
aWMgc3RhdGljIGZpbmFsIFR5cGVSZWZlcmVuY2UgYmFzZVR5cGVSZWZlcmVuY2UoaW50IGJhc2VU
eXBlLCBpbnQgZGltLCBBbm5vdAogCX0KIH0KIAorcHVibGljIHN0YXRpYyBmaW5hbCBUeXBlUmVm
ZXJlbmNlIGJhc2VUeXBlUmVmZXJlbmNlKGludCBiYXNlVHlwZSwgaW50IGRpbSkgeworCXJldHVy
biBiYXNlVHlwZVJlZmVyZW5jZShiYXNlVHlwZSwgZGltLCBudWxsKTsKK30KKwogLy8gSlNSMzA4
IHR5cGUgYW5ub3RhdGlvbnMuLi4KIHB1YmxpYyBBbm5vdGF0aW9uW11bXSBhbm5vdGF0aW9ucyA9
IG51bGw7CiAK
</data>
<flag name="review"
          id="60270"
          type_id="6"
          status="?"
          setter="shankhba"
    />
          </attachment>
      

    </bug>

</bugzilla>