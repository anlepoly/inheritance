<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>419827</bug_id>
          
          <creation_ts>2013-10-18 06:33:00 -0400</creation_ts>
          <short_desc>[1.8] Annotation with TYPE_USE as target is not allowed to use container with target TYPE</short_desc>
          <delta_ts>2014-04-29 02:23:47 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugs.eclipse.org/bugs/show_bug.cgi?id=421791</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jay Arthanareeswaran">jarthana</reporter>
          <assigned_to name="shankha banerjee">shankhba</assigned_to>
          <cc>jarthana</cc>
    
    <cc>jesper</cc>
    
    <cc>manpalat</cc>
    
    <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="60159"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2320121</commentid>
    <comment_count>0</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-10-18 06:33:00 -0400</bug_when>
    <thetext>The code:

@Target({ElementType.TYPE_USE})
@Repeatable(FooContainer.class)
@interface Foo {}
@Target({ElementType.TYPE, ElementType.TYPE_USE})
@interface FooContainer {
	Foo[] value();
}


Produces an error:
The container annotation type @FooContainer is allowed at targets where the repeatable annotation type @Foo is not: TYPE


The spec seems to mention something in the lines:

&quot;If Foo has an @Target meta-annotation, then in the judgment of the designers of the Java programming language, FooContainer must be declared with knowledge of the
Foo&apos;s applicability. Specifically, the kind of program element where FooContainer
may appear must be the same as, or a subset of, Foo&apos;s kinds.&quot;

But not very specific. This bug is to discuss this further and take it to the EG if required.

Also note that the following code is allowed after removing TYPE from @Target of FooContainer:

@FooContainer({@Foo, @Foo})
public class X {
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2320606</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-10-19 01:20:45 -0400</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #0)

&gt; The spec seems to mention something in the lines:

[...]

&gt; But not very specific. This bug is to discuss this further and take it to
&gt; the EG if required.

In other places, it is more specific and forbids this, but should it is a 
valid question.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2328586</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-11 01:56:43 -0500</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #1)

&gt; In other places, it is more specific and forbids this, but should it is a 
&gt; valid question.

I have asked in the EG list. Let us see what we hear</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2328614</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-11 04:05:08 -0500</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #1)
&gt; (In reply to Jayaprakash Arthanareeswaran from comment #0)
&gt; 
&gt; &gt; The spec seems to mention something in the lines:
&gt; 
&gt; [...]
&gt; 
&gt; &gt; But not very specific. This bug is to discuss this further and take it to
&gt; &gt; the EG if required.
&gt; 
&gt; In other places, it is more specific and forbids this, but should it is a 
&gt; valid question.

(In reply to Srikanth Sankaran from comment #2)
&gt; I have asked in the EG list. Let us see what we hear

Not quite, just after pushing the send button, I realized that FooContainer
by virtue of its TYPE target, can appear on annotation types, while @Foo
cannot. So there is no contradiction here. 

I&apos;ll withdraw this issue as requiring no follow up on the spec side.

Note however that 8b112 does not complain on this program, I believe 
it should, given that annotation type uses cannot be type annotated,
the short hand of annotating the declaration should also be invalid.

import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target({ElementType.TYPE_USE})
@interface Foo {}

@Foo
@interface Marker {
	
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2330125</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-14 06:20:50 -0500</bug_when>
    <thetext>Per discussion in the EG mailing list, I am reopening this. The spec is
being amended to allow this scenario.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2330527</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-14 20:07:53 -0500</bug_when>
    <thetext>Shankha, please follow up, TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2338486</commentid>
    <comment_count>6</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2013-12-06 00:39:55 -0500</bug_when>
    <thetext>This bug looks like a duplicate of Bug 421791.

The test case(Comment 5):
import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target({ElementType.TYPE_USE})
@interface Foo {}

@Foo
@interface Marker {
	
}
is similar to the test case Bug 421791, Comment 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2338487</commentid>
    <comment_count>7</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-12-06 00:45:11 -0500</bug_when>
    <thetext>(In reply to shankha banerjee from comment #6)
&gt; This bug looks like a duplicate of Bug 421791.

No, this is totally different.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2341503</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-12-13 06:28:18 -0500</bug_when>
    <thetext>Shankha, if you think this is fixed already by your other patch, please
include a regression test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2342088</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-12-16 01:07:34 -0500</bug_when>
    <thetext>Full test case:

import java.lang.annotation.ElementType;
import java.lang.annotation.Repeatable;
import java.lang.annotation.Target;

@Target({ElementType.TYPE_USE})
@Repeatable(FooContainer.class)
@interface Foo {}
@Target({ElementType.TYPE, ElementType.TYPE_USE})
@interface FooContainer {
	Foo[] value();
}

// --

This does not compile either with javac or with ECJ, it should.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2344244</commentid>
    <comment_count>10</comment_count>
      <attachid>238513</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2013-12-20 07:04:45 -0500</bug_when>
    <thetext>Created attachment 238513
Patch

Patch with the test case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2347354</commentid>
    <comment_count>11</comment_count>
      <attachid>238811</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-01-09 05:42:01 -0500</bug_when>
    <thetext>Created attachment 238811
Patch

Old patch was out of sync with new code. Patch updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2360506</commentid>
    <comment_count>12</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-08 00:31:33 -0500</bug_when>
    <thetext>Still does not compile with JDB 8b126. Moving to 4.4, Shankha, apologize for
postponing, I don&apos;t expect to find time to review this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2386044</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-04-08 05:13:28 -0400</bug_when>
    <thetext>Jesper, this patch makes changes to your original implementation. Do you
have time to review the changes ? (&lt; 10 lines of code change + tests) ? 

Shankha, could you verify the patch applies on HEAD ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2386055</commentid>
    <comment_count>14</comment_count>
      <attachid>238811</attachid>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2014-04-08 05:22:42 -0400</bug_when>
    <thetext>Comment on attachment 238811
Patch

This looks in line with the amended JLS and the right way to implement it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2386111</commentid>
    <comment_count>15</comment_count>
      <attachid>241718</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-04-08 06:58:03 -0400</bug_when>
    <thetext>Created attachment 241718
Patch

Patch in sync with HEAD.
All test results are green.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2388520</commentid>
    <comment_count>16</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-04-14 01:20:15 -0400</bug_when>
    <thetext>Fix has already been reviewed by Jesper, Jay thanks for releasing it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2388563</commentid>
    <comment_count>17</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-04-14 03:32:43 -0400</bug_when>
    <thetext>Released in master via:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=bedb30d00a2148fdfa85bacc657c182bc1a98001

Just one note: Moved the new test to NegativeTypeAnnotationTest</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2394398</commentid>
    <comment_count>18</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-04-29 02:23:47 -0400</bug_when>
    <thetext>Verified for Eclipse Luna 4.4 M7 Build id: I20140428-2000</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>238513</attachid>
            <date>2013-12-20 07:04:00 -0500</date>
            <delta_ts>2014-01-09 05:42:01 -0500</delta_ts>
            <desc>Patch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>3293</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFu
bm90YXRpb25UZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZVR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCmluZGV4IGRlMWQzODIuLjYzNzk0MDUgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFubm90YXRpb25U
ZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVUeXBl
QW5ub3RhdGlvblRlc3QuamF2YQpAQCAtNDMwNyw0ICs0MzA3LDQ4IEBAIHB1YmxpYyBjbGFzcyBO
ZWdhdGl2ZVR5cGVBbm5vdGF0aW9uVGVzdCBleHRlbmRzIEFic3RyYWN0UmVncmVzc2lvblRlc3Qg
ewogCQkJCSIiLA0KIAkJCQl0cnVlKTsNCiAJfQ0KKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5v
cmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE5ODI3LCAgWzEuOF0gQW5ub3RhdGlvbiB3aXRoIFRZ
UEVfVVNFIGFzIHRhcmdldCBpcyBub3QgYWxsb3dlZCB0byB1c2UgY29udGFpbmVyIHdpdGggdGFy
Z2V0IFRZUEUNCisJcHVibGljIHZvaWQgdGVzdDQxOTgyN2EoKSB7DQorCQlydW5OZWdhdGl2ZVRl
c3QoDQorCQkJCW5ldyBTdHJpbmdbXSB7DQorCQkJCQkJIlguamF2YSIsDQorCQkJCQkJImltcG9y
dCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIgKw0KKwkJCQkJCSJpbXBvcnQg
amF2YS5sYW5nLmFubm90YXRpb24uUmVwZWF0YWJsZTtcbiIgKw0KKwkJCQkJCSJpbXBvcnQgamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArDQorCQkJCQkJIlxuIiArDQorCQkJCQkJIkBU
YXJnZXQoe0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIgKw0KKwkJCQkJCSJAUmVwZWF0YWJsZShG
b29Db250YWluZXIuY2xhc3MpXG4iICsNCisJCQkJCQkiQGludGVyZmFjZSBGb28ge31cbiIgKw0K
KwkJCQkJCSJAVGFyZ2V0KHtFbGVtZW50VHlwZS5UWVBFLCBFbGVtZW50VHlwZS5UWVBFX1VTRX0p
XG4iICsNCisJCQkJCQkiQGludGVyZmFjZSBGb29Db250YWluZXIge1xuIiArDQorCQkJCQkJIglG
b29bXSB2YWx1ZSgpO1xuIiArDQorCQkJCQkJIn1cbiIgKw0KKwkJCQkJCSJwdWJsaWMgY2xhc3Mg
WHt9XG4iDQorCQkJCX0sDQorCQkJCSIiLA0KKwkJCQl0cnVlKTsNCisJfQ0KKwkvLyBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE5ODI3LCAgWzEuOF0gQW5u
b3RhdGlvbiB3aXRoIFRZUEVfVVNFIGFzIHRhcmdldCBpcyBub3QgYWxsb3dlZCB0byB1c2UgY29u
dGFpbmVyIHdpdGggdGFyZ2V0IFRZUEUNCisJLy8gQWx0aG91Z2ggdGhlIHRhcmdldCBvZiBGb29D
b250YWluZXIgaXMgZGlmZmVyZW50IGZyb20gdGhhdCBvZiBGb28sIEZvbyBjb250YWluZXIgY2Fu
bm90IGJlIHVzZWQgaW4gYW55IHBsYWNlIHdoZXJlDQorCS8vIEZvbyBjYW4ndCBiZSB1c2VkLg0K
KwlwdWJsaWMgdm9pZCB0ZXN0NDE5ODI3YigpIHsNCisJCXJ1bk5lZ2F0aXZlVGVzdCgNCisJCQkJ
bmV3IFN0cmluZ1tdIHsNCisJCQkJCQkiWC5qYXZhIiwNCisJCQkJCQkiaW1wb3J0IGphdmEubGFu
Zy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIiArDQorCQkJCQkJImltcG9ydCBqYXZhLmxhbmcu
YW5ub3RhdGlvbi5SZXBlYXRhYmxlO1xuIiArDQorCQkJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQ7XG4iICsNCisJCQkJCQkiXG4iICsNCisJCQkJCQkiQFRhcmdldCh7RWxl
bWVudFR5cGUuVFlQRV9VU0V9KVxuIiArDQorCQkJCQkJIkBSZXBlYXRhYmxlKEZvb0NvbnRhaW5l
ci5jbGFzcylcbiIgKw0KKwkJCQkJCSJAaW50ZXJmYWNlIEZvbyB7fVxuIiArDQorCQkJCQkJIkBU
YXJnZXQoe0VsZW1lbnRUeXBlLlRZUEV9KVxuIiArDQorCQkJCQkJIkBpbnRlcmZhY2UgRm9vQ29u
dGFpbmVyIHtcbiIgKw0KKwkJCQkJCSIJRm9vW10gdmFsdWUoKTtcbiIgKw0KKwkJCQkJCSJ9XG4i
ICsNCisJCQkJCQkicHVibGljIGNsYXNzIFh7fVxuIg0KKwkJCQl9LA0KKwkJCQkiIiwNCisJCQkJ
dHJ1ZSk7DQorCX0NCiB9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2FzdC9Bbm5vdGF0aW9uLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQpp
bmRleCBlNjk5Y2ViLi5hZDVmNmVhIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9j
b21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24u
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQpAQCAtNTA4LDYgKzUwOCwxMiBA
QCBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQW5ub3RhdGlvbiBleHRlbmRzIEV4cHJlc3Npb24gewog
CQkJCVN0cmluZ0J1ZmZlciB0YXJnZXRCdWZmZXIgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAJCQkJ
dm9pZCBjaGVjayhsb25nIHRhcmdldE1hc2ssIGNoYXJbXSB0YXJnZXROYW1lKSB7CiAJCQkJCWlm
ICgoY29udGFpbmVyQW5ub3RhdGlvblR5cGVUYXJnZXRzICYgdGFyZ2V0TWFzayAmIH50YXJnZXRz
KSAhPSAwKSB7CisJCQkJCQkvLyBpZiB0YXJnZXRNYXNrIGVxdWFscyBUYWdCaXRzLkFubm90YXRp
b25Gb3JUeXBlIGltcGxpZXMKKwkJCQkJCS8vIFRhZ0JpdHMuQW5ub3RhdGlvbkZvclR5cGUgaXMg
cGFydCBvZiBjb250YWluZXJBbm5vdGF0aW9uVHlwZVRhcmdldHMKKwkJCQkJCWlmICh0YXJnZXRN
YXNrID09IFRhZ0JpdHMuQW5ub3RhdGlvbkZvclR5cGUgJiYKKwkJCQkJCQkJKHRhcmdldHMgJiBU
YWdCaXRzLkFubm90YXRpb25Gb3JUeXBlVXNlKSAhPSAwKSB7CisJCQkJCQkJcmV0dXJuOworCQkJ
CQkJfQogCQkJCQkJYWRkKHRhcmdldE5hbWUpOwogCQkJCQl9CiAJCQkJfQo=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>238811</attachid>
            <date>2014-01-09 05:42:00 -0500</date>
            <delta_ts>2014-04-08 06:58:03 -0400</delta_ts>
            <desc>Patch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>3293</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFu
bm90YXRpb25UZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZVR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCmluZGV4IGRlMWQzODIuLjYzNzk0MDUgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFubm90YXRpb25U
ZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVUeXBl
QW5ub3RhdGlvblRlc3QuamF2YQpAQCAtNDMwNyw0ICs0MzA3LDQ4IEBAIHB1YmxpYyBjbGFzcyBO
ZWdhdGl2ZVR5cGVBbm5vdGF0aW9uVGVzdCBleHRlbmRzIEFic3RyYWN0UmVncmVzc2lvblRlc3Qg
ewogCQkJCSIiLA0KIAkJCQl0cnVlKTsNCiAJfQ0KKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5v
cmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE5ODI3LCAgWzEuOF0gQW5ub3RhdGlvbiB3aXRoIFRZ
UEVfVVNFIGFzIHRhcmdldCBpcyBub3QgYWxsb3dlZCB0byB1c2UgY29udGFpbmVyIHdpdGggdGFy
Z2V0IFRZUEUNCisJcHVibGljIHZvaWQgdGVzdDQxOTgyN2EoKSB7DQorCQlydW5OZWdhdGl2ZVRl
c3QoDQorCQkJCW5ldyBTdHJpbmdbXSB7DQorCQkJCQkJIlguamF2YSIsDQorCQkJCQkJImltcG9y
dCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIgKw0KKwkJCQkJCSJpbXBvcnQg
amF2YS5sYW5nLmFubm90YXRpb24uUmVwZWF0YWJsZTtcbiIgKw0KKwkJCQkJCSJpbXBvcnQgamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArDQorCQkJCQkJIlxuIiArDQorCQkJCQkJIkBU
YXJnZXQoe0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIgKw0KKwkJCQkJCSJAUmVwZWF0YWJsZShG
b29Db250YWluZXIuY2xhc3MpXG4iICsNCisJCQkJCQkiQGludGVyZmFjZSBGb28ge31cbiIgKw0K
KwkJCQkJCSJAVGFyZ2V0KHtFbGVtZW50VHlwZS5UWVBFLCBFbGVtZW50VHlwZS5UWVBFX1VTRX0p
XG4iICsNCisJCQkJCQkiQGludGVyZmFjZSBGb29Db250YWluZXIge1xuIiArDQorCQkJCQkJIglG
b29bXSB2YWx1ZSgpO1xuIiArDQorCQkJCQkJIn1cbiIgKw0KKwkJCQkJCSJwdWJsaWMgY2xhc3Mg
WHt9XG4iDQorCQkJCX0sDQorCQkJCSIiLA0KKwkJCQl0cnVlKTsNCisJfQ0KKwkvLyBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE5ODI3LCAgWzEuOF0gQW5u
b3RhdGlvbiB3aXRoIFRZUEVfVVNFIGFzIHRhcmdldCBpcyBub3QgYWxsb3dlZCB0byB1c2UgY29u
dGFpbmVyIHdpdGggdGFyZ2V0IFRZUEUNCisJLy8gQWx0aG91Z2ggdGhlIHRhcmdldCBvZiBGb29D
b250YWluZXIgaXMgZGlmZmVyZW50IGZyb20gdGhhdCBvZiBGb28sIEZvbyBjb250YWluZXIgY2Fu
bm90IGJlIHVzZWQgaW4gYW55IHBsYWNlIHdoZXJlDQorCS8vIEZvbyBjYW4ndCBiZSB1c2VkLg0K
KwlwdWJsaWMgdm9pZCB0ZXN0NDE5ODI3YigpIHsNCisJCXJ1bk5lZ2F0aXZlVGVzdCgNCisJCQkJ
bmV3IFN0cmluZ1tdIHsNCisJCQkJCQkiWC5qYXZhIiwNCisJCQkJCQkiaW1wb3J0IGphdmEubGFu
Zy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIiArDQorCQkJCQkJImltcG9ydCBqYXZhLmxhbmcu
YW5ub3RhdGlvbi5SZXBlYXRhYmxlO1xuIiArDQorCQkJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQ7XG4iICsNCisJCQkJCQkiXG4iICsNCisJCQkJCQkiQFRhcmdldCh7RWxl
bWVudFR5cGUuVFlQRV9VU0V9KVxuIiArDQorCQkJCQkJIkBSZXBlYXRhYmxlKEZvb0NvbnRhaW5l
ci5jbGFzcylcbiIgKw0KKwkJCQkJCSJAaW50ZXJmYWNlIEZvbyB7fVxuIiArDQorCQkJCQkJIkBU
YXJnZXQoe0VsZW1lbnRUeXBlLlRZUEV9KVxuIiArDQorCQkJCQkJIkBpbnRlcmZhY2UgRm9vQ29u
dGFpbmVyIHtcbiIgKw0KKwkJCQkJCSIJRm9vW10gdmFsdWUoKTtcbiIgKw0KKwkJCQkJCSJ9XG4i
ICsNCisJCQkJCQkicHVibGljIGNsYXNzIFh7fVxuIg0KKwkJCQl9LA0KKwkJCQkiIiwNCisJCQkJ
dHJ1ZSk7DQorCX0NCiB9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2FzdC9Bbm5vdGF0aW9uLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQpp
bmRleCBlNjk5Y2ViLi5hZDVmNmVhIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9j
b21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24u
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQpAQCAtNTA4LDYgKzUwOCwxMiBA
QCBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQW5ub3RhdGlvbiBleHRlbmRzIEV4cHJlc3Npb24gewog
CQkJCVN0cmluZ0J1ZmZlciB0YXJnZXRCdWZmZXIgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAJCQkJ
dm9pZCBjaGVjayhsb25nIHRhcmdldE1hc2ssIGNoYXJbXSB0YXJnZXROYW1lKSB7CiAJCQkJCWlm
ICgoY29udGFpbmVyQW5ub3RhdGlvblR5cGVUYXJnZXRzICYgdGFyZ2V0TWFzayAmIH50YXJnZXRz
KSAhPSAwKSB7CisJCQkJCQkvLyBpZiB0YXJnZXRNYXNrIGVxdWFscyBUYWdCaXRzLkFubm90YXRp
b25Gb3JUeXBlIGltcGxpZXMKKwkJCQkJCS8vIFRhZ0JpdHMuQW5ub3RhdGlvbkZvclR5cGUgaXMg
cGFydCBvZiBjb250YWluZXJBbm5vdGF0aW9uVHlwZVRhcmdldHMKKwkJCQkJCWlmICh0YXJnZXRN
YXNrID09IFRhZ0JpdHMuQW5ub3RhdGlvbkZvclR5cGUgJiYKKwkJCQkJCQkJKHRhcmdldHMgJiBU
YWdCaXRzLkFubm90YXRpb25Gb3JUeXBlVXNlKSAhPSAwKSB7CisJCQkJCQkJcmV0dXJuOworCQkJ
CQkJfQogCQkJCQkJYWRkKHRhcmdldE5hbWUpOwogCQkJCQl9CiAJCQkJfQo=
</data>
<flag name="review"
          id="62021"
          type_id="6"
          status="+"
          setter="jesper"
    />
          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>241718</attachid>
            <date>2014-04-08 06:58:00 -0400</date>
            <delta_ts>2014-04-08 06:58:03 -0400</delta_ts>
            <desc>Patch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>3169</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5ub3Rh
dGlvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5u
b3RhdGlvblRlc3QuamF2YQppbmRleCAyYWVkOGFjLi5jNTgxNjY4IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OdWxsVHlwZUFubm90YXRpb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbFR5cGVBbm5vdGF0aW9uVGVzdC5q
YXZhCkBAIC00OTAzLDQgKzQ5MDMsNDggQEAgcHVibGljIHZvaWQgdGVzdEJ1ZzQzMTI2OSgpIHsK
IAkJIlR5cGUgbWlzbWF0Y2g6IGNhbm5vdCBjb252ZXJ0IGZyb20gUUZpZWxkPFIsTG9uZz4gdG8g
UUZpZWxkPFIsU3RyaW5nPlxuIiArIAogCQkiLS0tLS0tLS0tLVxuIik7CiB9CisvLyBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE5ODI3LCAgWzEuOF0gQW5u
b3RhdGlvbiB3aXRoIFRZUEVfVVNFIGFzIHRhcmdldCBpcyBub3QgYWxsb3dlZCB0byB1c2UgY29u
dGFpbmVyIHdpdGggdGFyZ2V0IFRZUEUKK3B1YmxpYyB2b2lkIHRlc3Q0MTk4MjdhKCkgeworCXJ1
bk5lZ2F0aXZlVGVzdCgKKwkJCW5ldyBTdHJpbmdbXSB7CisJCQkJIlguamF2YSIsCisJCQkJImlt
cG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIgKworCQkJCSJpbXBvcnQg
amF2YS5sYW5nLmFubm90YXRpb24uUmVwZWF0YWJsZTtcbiIgKworCQkJCSJpbXBvcnQgamF2YS5s
YW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArCisJCQkJIlxuIiArCisJCQkJIkBUYXJnZXQoe0Vs
ZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIgKworCQkJCSJAUmVwZWF0YWJsZShGb29Db250YWluZXIu
Y2xhc3MpXG4iICsKKwkJCQkiQGludGVyZmFjZSBGb28ge31cbiIgKworCQkJCSJAVGFyZ2V0KHtF
bGVtZW50VHlwZS5UWVBFLCBFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iICsKKwkJCQkiQGludGVy
ZmFjZSBGb29Db250YWluZXIge1xuIiArCisJCQkJIglGb29bXSB2YWx1ZSgpO1xuIiArCisJCQkJ
In1cbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWHt9XG4iCisJCQl9LAorCQkJIiIsCisJCQl0cnVl
KTsKK30KKy8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00
MTk4MjcsICBbMS44XSBBbm5vdGF0aW9uIHdpdGggVFlQRV9VU0UgYXMgdGFyZ2V0IGlzIG5vdCBh
bGxvd2VkIHRvIHVzZSBjb250YWluZXIgd2l0aCB0YXJnZXQgVFlQRQorLy8gQWx0aG91Z2ggdGhl
IHRhcmdldCBvZiBGb29Db250YWluZXIgaXMgZGlmZmVyZW50IGZyb20gdGhhdCBvZiBGb28sIEZv
byBjb250YWluZXIgY2Fubm90IGJlIHVzZWQgaW4gYW55IHBsYWNlIHdoZXJlCisvLyBGb28gY2Fu
J3QgYmUgdXNlZC4KK3B1YmxpYyB2b2lkIHRlc3Q0MTk4MjdiKCkgeworCXJ1bk5lZ2F0aXZlVGVz
dCgKKwkJCW5ldyBTdHJpbmdbXSB7CisJCQkJIlguamF2YSIsCisJCQkJImltcG9ydCBqYXZhLmxh
bmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFu
bm90YXRpb24uUmVwZWF0YWJsZTtcbiIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0O1xuIiArCisJCQkJIlxuIiArCisJCQkJIkBUYXJnZXQoe0VsZW1lbnRUeXBlLlRZ
UEVfVVNFfSlcbiIgKworCQkJCSJAUmVwZWF0YWJsZShGb29Db250YWluZXIuY2xhc3MpXG4iICsK
KwkJCQkiQGludGVyZmFjZSBGb28ge31cbiIgKworCQkJCSJAVGFyZ2V0KHtFbGVtZW50VHlwZS5U
WVBFfSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIEZvb0NvbnRhaW5lciB7XG4iICsKKwkJCQkiCUZv
b1tdIHZhbHVlKCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYe31cbiIK
KwkJCX0sCisJCQkiIiwKKwkJCXRydWUpOworfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9B
bm5vdGF0aW9uLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQppbmRleCBiMjA4Nzdj
Li5iODY2ZmIxIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQorKysgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvYXN0L0Fubm90YXRpb24uamF2YQpAQCAtNTg5LDYgKzU4OSwxMiBAQCBwdWJsaWMgYWJz
dHJhY3QgY2xhc3MgQW5ub3RhdGlvbiBleHRlbmRzIEV4cHJlc3Npb24gewogCQkJCVN0cmluZ0J1
ZmZlciB0YXJnZXRCdWZmZXIgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAJCQkJdm9pZCBjaGVjayhs
b25nIHRhcmdldE1hc2ssIGNoYXJbXSB0YXJnZXROYW1lKSB7CiAJCQkJCWlmICgoY29udGFpbmVy
QW5ub3RhdGlvblR5cGVUYXJnZXRzICYgdGFyZ2V0TWFzayAmIH50YXJnZXRzKSAhPSAwKSB7CisJ
CQkJCQkgLy8gaWYgdGFyZ2V0TWFzayBlcXVhbHMgVGFnQml0cy5Bbm5vdGF0aW9uRm9yVHlwZSBp
bXBsaWVzCisJCQkJCQkgLy8gVGFnQml0cy5Bbm5vdGF0aW9uRm9yVHlwZSBpcyBwYXJ0IG9mIGNv
bnRhaW5lckFubm90YXRpb25UeXBlVGFyZ2V0cworCQkJCQkJaWYgKHRhcmdldE1hc2sgPT0gVGFn
Qml0cy5Bbm5vdGF0aW9uRm9yVHlwZSAmJgorCQkJCQkJCQkodGFyZ2V0cyAmIFRhZ0JpdHMuQW5u
b3RhdGlvbkZvclR5cGVVc2UpICE9IDApIHsKKwkJCQkJCQlyZXR1cm47CisJCQkJCQl9CiAJCQkJ
CQlhZGQodGFyZ2V0TmFtZSk7CiAJCQkJCX0KIAkJCQl9Cg==
</data>
<flag name="review"
          id="62025"
          type_id="6"
          status="?"
          setter="shankhba"
    />
          </attachment>
      

    </bug>

</bugzilla>