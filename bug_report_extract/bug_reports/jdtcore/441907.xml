<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>441907</bug_id>
          
          <creation_ts>2014-08-16 14:22:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Eclipse 4.4.x compiler generics bugs with streams and lambdas</short_desc>
          <delta_ts>2015-01-20 03:22:21 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugs.eclipse.org/bugs/show_bug.cgi?id=434483</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4.2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Garret Wilson">garret</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>garret</cc>
    
    <cc>jarthana</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2439653</commentid>
    <comment_count>0</comment_count>
    <who name="Garret Wilson">garret</who>
    <bug_when>2014-08-16 14:22:21 -0400</bug_when>
    <thetext>Eclipse 4.4.x has problems finding relevant methods passed as lambdas in streams if the methods have generic parameters. Here is a reproducible test case, which compiles fine with Oracle JDK 8:

import java.util.*;

public class EclipseJava8StreamLambdaGenerics {

  public static class FooBar&lt;V&gt; {
  }

  public interface FooBarred {
    public &lt;V&gt; boolean hasFooBar(final FooBar&lt;V&gt; fooBar);
  }

  public interface Widget extends FooBarred {
  }

  public static void test() {
    Set&lt;FooBar&lt;?&gt;&gt; foobars = new HashSet&lt;&gt;();
    Set&lt;Widget&gt; widgets = new HashSet&lt;&gt;();
    boolean anyWidgetHasFooBar = widgets.stream().anyMatch(
        widget -&gt; foobars.stream().anyMatch(widget::hasFooBar)
        );
  }

}

This bug appears in Eclipse 4.4 and Eclipse 4.4.1 M20140813-0800.

See also Bug 441905, Bug 434044, and Bug 431408, which may nor may not be related (but which make me think that our company&apos;s use of generics must be unusually intense if no one else picked up on these earlier).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2439713</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-08-17 09:18:26 -0400</bug_when>
    <thetext>From quick experiment this seems unrelated to bug 441905 (the changes tried in that bug have no influence on the result in this bug).

There is, however, a connection to bug 434483: with that WIP applied, this current bug goes down from two errors to one error.

When wrapping up that other bug, I&apos;ll have a quick look if that fix could succeed in fixing this bug, too (or if reporting the remaining error is correct)

(In reply to Garret Wilson from comment #0)
&gt; (but which make me think that our company&apos;s use of generics must be
&gt; unusually intense if no one else picked up on these earlier).

Ppl are finding different problems. Your code just appears to be using wildcards more than average, it seems.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2450098</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-10 21:03:59 -0400</bug_when>
    <thetext>I&apos;ll take a look - Given M2 is almost here, may have to move to M3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2450139</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-11 00:33:11 -0400</bug_when>
    <thetext>I released a junit (disabled) here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=947bd71416c76128b66fea4c9e237a4d84f9ed78.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2451472</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-14 23:24:23 -0400</bug_when>
    <thetext>Sorry, ran out of time for M2. Will look at this right in early M3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2451907</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-15 14:07:49 -0400</bug_when>
    <thetext>Fix and test released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=509692f4edb0ce705fd505934a81ec54e8a7a49f.

We were using the parameters from the descriptor for look up alright, but it
does not make sense to use them as is, they need to be treated as argument expressions which entails capture conversions which were missing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452347</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-09-16 08:25:16 -0400</bug_when>
    <thetext>Verified for 4.5 M2 using build I20140915-2000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2466201</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-10-16 04:32:06 -0400</bug_when>
    <thetext>Reopening for back porting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2477727</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-11-06 04:21:13 -0500</bug_when>
    <thetext>This has already been back ported for 4.4.2:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=R4_4_maintenance&amp;id=e53b9824e6fa472a59a835086ec90d9f07bd0e41</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2507668</commentid>
    <comment_count>9</comment_count>
    <who name="Sasikanth Bharadwaj">saammana</who>
    <bug_when>2015-01-20 03:22:21 -0500</bug_when>
    <thetext>Verified for 442 using build M-4.4.2RC1-201501141500</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>