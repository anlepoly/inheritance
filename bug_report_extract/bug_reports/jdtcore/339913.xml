<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>339913</bug_id>
          
          <creation_ts>2011-03-14 11:38:00 -0400</creation_ts>
          <short_desc>[compiler] Misleading error message for annotations inside a method body</short_desc>
          <delta_ts>2011-04-25 05:55:33 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.7 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Olivier Thomann">Olivier_Thomann</reporter>
          <assigned_to name="Olivier Thomann">Olivier_Thomann</assigned_to>
          <cc>satyam.kandula</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1898416</commentid>
    <comment_count>0</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-03-14 11:38:21 -0400</bug_when>
    <thetext>public class X {
	public static String foo() {
		@interface C {}
		return &quot;&quot;;
	}
}

Compiling this with HEAD leads to:
The member annotation C can only be defined inside a static context.

It has nothing to do with the static context. Only the error message is wrong. This is detected as an invalid local type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1898481</commentid>
    <comment_count>1</comment_count>
      <attachid>191148</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-03-14 12:48:56 -0400</bug_when>
    <thetext>Created attachment 191148
Proposed fix + updated regression test

This is now consistent with the message for member interfaces.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1898662</commentid>
    <comment_count>2</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-03-14 17:14:31 -0400</bug_when>
    <thetext>Released for 3.7M7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918312</commentid>
    <comment_count>3</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2011-04-25 05:55:33 -0400</bug_when>
    <thetext>Verified for 3.7M7 using build I20110421-1800</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>191148</attachid>
            <date>2011-03-14 12:48:00 -0400</date>
            <delta_ts>2011-03-14 12:48:56 -0400</delta_ts>
            <desc>Proposed fix + updated regression test</desc>
            <filename>patch_339913.txt</filename>
            <type>text/plain</type>
            <size>3729</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBjb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcHJvYmxl
bS9tZXNzYWdlcy5wcm9wZXJ0aWVzDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNs
aXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvcHJvYmxlbS9tZXNzYWdlcy5wcm9wZXJ0aWVzLHYNCnJldHJpZXZpbmcgcmV2
aXNpb24gMS4yNjIuMi4xMQ0KZGlmZiAtdSAtcjEuMjYyLjIuMTEgbWVzc2FnZXMucHJvcGVydGll
cw0KLS0tIGNvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wcm9ibGVt
L21lc3NhZ2VzLnByb3BlcnRpZXMJMTAgTWFyIDIwMTEgMDk6NTE6NDMgLTAwMDAJMS4yNjIuMi4x
MQ0KKysrIGNvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wcm9ibGVt
L21lc3NhZ2VzLnByb3BlcnRpZXMJMTQgTWFyIDIwMTEgMTY6NDc6MTcgLTAwMDANCkBAIC0zOCw4
ICszOCw4IEBADQogMjcgPSBDYW5ub3QgdXNlIGFuIGV4cHJlc3Npb24gb2YgdGhlIHR5cGUgezB9
IGFzIGEgdmFsaWQgZW5jbG9zaW5nIGluc3RhbmNlDQogMjggPSBObyBlbmNsb3NpbmcgaW5zdGFu
Y2Ugb2YgdHlwZSB7MH0gaXMgYXZhaWxhYmxlIGR1ZSB0byBzb21lIGludGVybWVkaWF0ZSBjb25z
dHJ1Y3RvciBpbnZvY2F0aW9uDQogMjkgPSBBbiBhbm9ueW1vdXMgY2xhc3MgY2Fubm90IHN1YmNs
YXNzIHRoZSBmaW5hbCBjbGFzcyB7MH0NCi0zMCA9IFRoZSBtZW1iZXIgYW5ub3RhdGlvbiB7MH0g
Y2FuIG9ubHkgYmUgZGVmaW5lZCBpbnNpZGUgYSBzdGF0aWMgY29udGV4dA0KLTMxID0gVGhlIG1l
bWJlciBlbnVtIHswfSBjYW5ub3QgYmUgbG9jYWwNCiszMCA9IFRoZSBtZW1iZXIgYW5ub3RhdGlv
biB7MH0gY2FuIG9ubHkgYmUgZGVmaW5lZCBpbnNpZGUgYSB0b3AtbGV2ZWwgY2xhc3Mgb3IgaW50
ZXJmYWNlDQorMzEgPSBUaGUgbWVtYmVyIGVudW0gezB9IGNhbiBvbmx5IGJlIGRlZmluZWQgaW5z
aWRlIGEgdG9wLWxldmVsIGNsYXNzIG9yIGludGVyZmFjZQ0KIDMyID0gVGhlIG1lbWJlciBlbnVt
IHswfSBtdXN0IGJlIGRlZmluZWQgaW5zaWRlIGEgc3RhdGljIG1lbWJlciB0eXBlDQogMzMgPSBU
aGUgdHlwZSB7MH0gaXMgaGlkaW5nIHRoZSB0eXBlIHsxfQ0KIA0KI1Agb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMuY29tcGlsZXINCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvY29tcGlsZXIvcmVncmVzc2lvbi9Bbm5vdGF0aW9uVGVzdC5qYXZhDQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpS
Q1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21w
aWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9B
bm5vdGF0aW9uVGVzdC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4yMTkuMi4xDQpkaWZm
IC11IC1yMS4yMTkuMi4xIEFubm90YXRpb25UZXN0LmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9Bbm5vdGF0aW9uVGVzdC5qYXZhCTEx
IEZlYiAyMDExIDE1OjE3OjE2IC0wMDAwCTEuMjE5LjIuMQ0KKysrIHNyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0Fubm90YXRpb25UZXN0LmphdmEJMTQg
TWFyIDIwMTEgMTY6NDc6MjAgLTAwMDANCkBAIC00NzQ3LDcgKzQ3NDcsNyBAQA0KICAgICAJCSIx
LiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMylcbiIgKw0KICAgICAJCSIJQGludGVyZmFjZSBC
YXIge1xuIiArDQogICAgIAkJIgkgICAgICAgICAgIF5eXlxuIiArDQotICAgIAkJIlRoZSBtZW1i
ZXIgYW5ub3RhdGlvbiBCYXIgY2FuIG9ubHkgYmUgZGVmaW5lZCBpbnNpZGUgYSBzdGF0aWMgY29u
dGV4dFxuIiArDQorICAgIAkJIlRoZSBtZW1iZXIgYW5ub3RhdGlvbiBCYXIgY2FuIG9ubHkgYmUg
ZGVmaW5lZCBpbnNpZGUgYSB0b3AtbGV2ZWwgY2xhc3Mgb3IgaW50ZXJmYWNlXG4iICsNCiAgICAg
CQkiLS0tLS0tLS0tLVxuIik7DQogICAgIH0NCiANCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvamR0
L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9FbnVtVGVzdC5qYXZhDQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5j
b21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lv
bi9FbnVtVGVzdC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xNTUNCmRpZmYgLXUgLXIx
LjE1NSBFbnVtVGVzdC5qYXZhDQotLS0gc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Nv
bXBpbGVyL3JlZ3Jlc3Npb24vRW51bVRlc3QuamF2YQk5IE5vdiAyMDEwIDE5OjU5OjIwIC0wMDAw
CTEuMTU1DQorKysgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jl
c3Npb24vRW51bVRlc3QuamF2YQkxNCBNYXIgMjAxMSAxNjo0NzoyMSAtMDAwMA0KQEAgLTEsNSAr
MSw1IEBADQogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAs
IDIwMTAgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuDQorICogQ29weXJpZ2h0IChjKSAyMDAw
LCAyMDExIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLg0KICAqIEFsbCByaWdodHMgcmVzZXJ2
ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMNCiAgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjANCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlz
IGF2YWlsYWJsZSBhdA0KQEAgLTI1MjQsNyArMjUyNCw3IEBADQogCQkiMS4gRVJST1IgaW4gWC5q
YXZhIChhdCBsaW5lIDMpXG4iICsNCiAJCSIJZW51bSBFIHt9XG4iICsNCiAJCSIJICAgICBeXG4i
ICsNCi0JCSJUaGUgbWVtYmVyIGVudW0gRSBjYW5ub3QgYmUgbG9jYWxcbiIgKw0KKwkJIlRoZSBt
ZW1iZXIgZW51bSBFIGNhbiBvbmx5IGJlIGRlZmluZWQgaW5zaWRlIGEgdG9wLWxldmVsIGNsYXNz
IG9yIGludGVyZmFjZVxuIiArDQogCQkiLS0tLS0tLS0tLVxuIik7DQogfQ0KIA0KQEAgLTI1NzAs
NyArMjU3MCw3IEBADQogCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDQpXG4iICsNCiAJ
CSIJZW51bSBFIHt9XG4iICsNCiAJCSIJICAgICBeXG4iICsNCi0JCSJUaGUgbWVtYmVyIGVudW0g
RSBjYW5ub3QgYmUgbG9jYWxcbiIgKw0KKwkJIlRoZSBtZW1iZXIgZW51bSBFIGNhbiBvbmx5IGJl
IGRlZmluZWQgaW5zaWRlIGEgdG9wLWxldmVsIGNsYXNzIG9yIGludGVyZmFjZVxuIiArDQogCQki
LS0tLS0tLS0tLVxuIik7DQogfQ0KIA0K
</data>

          </attachment>
      

    </bug>

</bugzilla>