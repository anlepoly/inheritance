<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>417017</bug_id>
          
          <creation_ts>2013-09-11 11:42:00 -0400</creation_ts>
          <short_desc>[1.8] Incorrect parameters in resolved method binding for LambdaExpression</short_desc>
          <delta_ts>2013-10-04 05:01:30 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>407985</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Noopur Gupta">noopur_gupta</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="59467"
          type_id="1"
          status="?"
          setter="manpalat"
          requestee="srikanth_sankaran"
    />
    <flag name="review"
          id="59528"
          type_id="1"
          status="+"
          setter="manpalat"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2305477</commentid>
    <comment_count>0</comment_count>
    <who name="Noopur Gupta">noopur_gupta</who>
    <bug_when>2013-09-11 11:42:48 -0400</bug_when>
    <thetext>---------------------------
package test.bugs;

@FunctionalInterface
interface FI {
	int foo1(int a);
}

class FI_1 {
	void fun(int a) {
		FI i1 = x1-&gt; x1;
		FI i2 = xxx-&gt; {
			i1.foo1(a);
			return xxx;
		};
	}
}
---------------------------
Steps:
1. To get the JLS8 AST, set org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.SHARED_AST_LEVEL to AST.JLS8.
2. Open the file with above example or edit it so that reconciler is called.
3. Run this code after the call to unit.reconcile(..) in org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy#reconcile(ICompilationUnit, boolean):

AbstractTypeDeclaration test= (AbstractTypeDeclaration) ast.types().get(1);
MethodDeclaration meth= (MethodDeclaration) test.bodyDeclarations().get(0);
VariableDeclarationFragment vdf= (VariableDeclarationFragment) ((VariableDeclarationStatement) meth.getBody().statements().get(1)).fragments().get(0);
LambdaExpression lambda= (LambdaExpression) vdf.getInitializer();
List&lt;VariableDeclaration&gt; parameters= lambda.parameters();
System.out.println(parameters.size());
ITypeBinding[] parameterTypes= lambda.resolveMethodBinding().getParameterTypes();
System.out.println(parameterTypes.length);
for (ITypeBinding paramType : parameterTypes) {
	System.out.println(paramType.getName());
}

4. You can see that the number of parameters obtained from resolved method binding for lambda expr (&apos;i2&apos; in the example) is 3 instead of 1, which is incorrect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2305665</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-09-12 01:06:04 -0400</bug_when>
    <thetext>Manoj, please follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2306917</commentid>
    <comment_count>2</comment_count>
      <attachid>235490</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-15 06:51:11 -0400</bug_when>
    <thetext>Created attachment 235490
Test case with modification as a patch

Test case as a patch with correction.

The behaviour is as expected for lambda. In the case of LambdaExpressions, the two additional parameterTypes are added for enclosing outer local variable accesses, namely i1 and foo, by the function  LambdaExpression.addSyntheticArgument(). 

Further note, if it helps: Assuming there are n parameters for lambda, and there are m (m &gt;= n) parameterTypes, the last n of those parameterTypes correspond to the parameters in actual source code, since all the outer local variable access bindings are added to the front of the list. 

Srikanth: Any further pointers/comments?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2306937</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-09-15 08:26:44 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #2)
&gt; Created attachment 235490 [details]
&gt; Test case with modification as a patch
&gt; 
&gt; Test case as a patch with correction.
&gt; 
&gt; The behaviour is as expected for lambda.

No. Please see the javadoc for org.eclipse.jdt.core.dom.IMethodBinding.getParameterTypes()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310551</commentid>
    <comment_count>4</comment_count>
      <attachid>235788</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-25 00:06:50 -0400</bug_when>
    <thetext>Created attachment 235788
Proposed Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2313701</commentid>
    <comment_count>5</comment_count>
      <attachid>236060</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-10-03 02:09:00 -0400</bug_when>
    <thetext>Created attachment 236060
Proposed Patch

Corrected a cce plus made the patch up-to-date with latest code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2313723</commentid>
    <comment_count>6</comment_count>
      <attachid>236064</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-10-03 04:31:54 -0400</bug_when>
    <thetext>Created attachment 236064
Proposed Patch

Added the test case which caused CCE at getParameterTypes() in the initial patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314165</commentid>
    <comment_count>7</comment_count>
      <attachid>236088</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-10-04 01:40:10 -0400</bug_when>
    <thetext>Created attachment 236088
Alternate patch

Here is an alternate patch that addresses some issues in original patch:

    - Tests: should not just assert on parameter count, also go ahead and
verify types.
    - We should not use synthetic methods in DBR in the first place. Instead
of working with what infrastructure exists, some times we can get cleaner
solution by adding more infrastructure. I added a getMethodBinding() call
on Lambda/ReferenceExpressions that returns the method binding void of all
synthetics (except where impossible).
   - Same problem exists for ReferenceExpressions also, instead of waiting
for it be discovered and reported, let us go ahead and fix it.
   - Method name (now defunct) getActualStart() is not a good choice of name
in MethodBinding class.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314167</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-10-04 01:41:29 -0400</bug_when>
    <thetext>Manoj, I ran only the ASTConverter18Tests. If you agree with the patch, please 
run all Java8 tests and release if green. Otherwise, let us discuss. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314213</commentid>
    <comment_count>9</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-10-04 05:00:56 -0400</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #8)
&gt; Manoj, I ran only the ASTConverter18Tests. If you agree with the patch,
&gt; please 
&gt; run all Java8 tests and release if green. Otherwise, let us discuss. Thanks.

Thanks Srikanth. Patch looks good. Committed (after deleting a few extra whitespaces) via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=f5937020c6b957eed03745f57cfee671f23dd9b8</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>235490</attachid>
            <date>2013-09-15 06:51:00 -0400</date>
            <delta_ts>2013-09-25 00:06:50 -0400</delta_ts>
            <desc>Test case with modification as a patch</desc>
            <filename>Bug-417017-18-Incorrect-parameters-in-resolved-metho.testcase.patch</filename>
            <type>text/plain</type>
            <size>2073</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDA2NTI2YzkuLjM0N2UxM2YgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMjY0OCw1ICsyNjQ4LDM3IEBACiAJCXR5cGVC
aW5kaW5nID0gdHlwZS5yZXNvbHZlQmluZGluZygpOwogCQlhc3NlcnRGYWxzZSgiQSBGdW5jdGlv
bmFsIGludGVyZmFjZSIsIHR5cGVCaW5kaW5nLmlzRnVuY3Rpb25hbEludGVyZmFjZSgpKTsKIAl9
CisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lk
PTM5OTc5MworCSAqIAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVi
bGljIHZvaWQgdGVzdDQxNzAxNygpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0aGlz
LndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDQxNzAx
Ny9YLmphdmEiLAorCQkJCXRydWUvKiByZXNvbHZlICovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0g
InBhY2thZ2UgdGVzdDQxNzAxNzsiCisJCQkJKyAiaW50ZXJmYWNlIEkge1xuIgorCQkJCSsgIglp
bnQgZm9vKGludCB4KTtcbiIKKwkJCQkrICJ9XG4iIAorCQkJCSsgInB1YmxpYyBjbGFzcyBYIHtc
biIKKwkJCQkrICIgdm9pZCBmdW4oaW50IGEpIHtcbiIKKwkJCQkrIiAgCUkgaTEgPSB4MS0+IHgx
O1xuIgorCQkJCSsiICAJSSBpMiA9IHh4eC0+IHtcbiIKKwkJCQkrIiAgCQlpMS5mb28oYSk7XG4i
CisJCQkJKyIgIAkJcmV0dXJuIHh4eDtcbiIKKwkJCQkrIiAgCX07XG4iCisJCQkJKyIgIH1cbiIK
KwkJCQkrIn1cbiI7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1
aWxkQVNUKGNvbnRlbnRzLCB0aGlzLndvcmtpbmdDb3B5KTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5
cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIDEpOworCQlN
ZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IHR5cGVkZWNsYXJhdGlvbi5nZXRN
ZXRob2RzKClbMF07CisJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCB2ZGY9IChWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQpICgoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgbWV0
aG9kRGVjbGFyYXRpb24uZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoMSkpLmZyYWdtZW50cygp
LmdldCgwKTsKKwkJTGFtYmRhRXhwcmVzc2lvbiBsYW1iZGE9IChMYW1iZGFFeHByZXNzaW9uKSB2
ZGYuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJTGlzdCBwYXJhbWV0ZXJzID0gbGFtYmRhLnBhcmFtZXRl
cnMoKTsKKwkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXJzIiwgcGFy
YW1ldGVycy5zaXplKCkgPT0gMSk7CisJCUlUeXBlQmluZGluZ1tdIHBhcmFtZXRlclR5cGVzPSBs
YW1iZGEucmVzb2x2ZU1ldGhvZEJpbmRpbmcoKS5nZXRQYXJhbWV0ZXJUeXBlcygpOworLy8JCWFz
c2VydFRydWUoIkluY29ycmVjdCBOdW1iZXIgb2YgcGFyYW1ldGVyIHR5cGUiLCBwYXJhbWV0ZXJU
eXBlcy5sZW5ndGggPT0gMSk7Ly8gV3JvbmcgLSBzZWUgdGhlIG5leHQgbGluZS4KKwkJYXNzZXJ0
VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXIgdHlwZSIsIHBhcmFtZXRlclR5cGVz
Lmxlbmd0aCA9PSAzKTsgLy8gUmlnaHQgLSAyIHN5bnRoZXRpYyAoT3V0ZXJMb2NhbFZhcmlhYmxl
KSArIDEgbm9ybWFsCisJfQogCiB9
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>235788</attachid>
            <date>2013-09-25 00:06:00 -0400</date>
            <delta_ts>2013-10-03 02:09:00 -0400</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-417017-18-Incorrect-parameters-in-resolv.patch</filename>
            <type>text/plain</type>
            <size>5351</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGE1Yzk0NzAuLmRjMTRkMGUgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMjY1Myw1ICsyNjUzLDM2IEBACiAJCXR5cGVC
aW5kaW5nID0gdHlwZS5yZXNvbHZlQmluZGluZygpOwogCQlhc3NlcnRGYWxzZSgiQSBGdW5jdGlv
bmFsIGludGVyZmFjZSIsIHR5cGVCaW5kaW5nLmlzRnVuY3Rpb25hbEludGVyZmFjZSgpKTsKIAl9
CisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lk
PTM5OTc5MworCSAqIAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVi
bGljIHZvaWQgdGVzdDQxNzAxNygpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0aGlz
LndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDQxNzAx
Ny9YLmphdmEiLAorCQkJCXRydWUvKiByZXNvbHZlICovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0g
InBhY2thZ2UgdGVzdDQxNzAxNzsiCisJCQkJKyAiaW50ZXJmYWNlIEkge1xuIgorCQkJCSsgIglp
bnQgZm9vKGludCB4KTtcbiIKKwkJCQkrICJ9XG4iIAorCQkJCSsgInB1YmxpYyBjbGFzcyBYIHtc
biIKKwkJCQkrICIgdm9pZCBmdW4oaW50IGEpIHtcbiIKKwkJCQkrIiAgCUkgaTEgPSB4MS0+IHgx
O1xuIgorCQkJCSsiICAJSSBpMiA9IHh4eC0+IHtcbiIKKwkJCQkrIiAgCQlpMS5mb28oYSk7XG4i
CisJCQkJKyIgIAkJcmV0dXJuIHh4eDtcbiIKKwkJCQkrIiAgCX07XG4iCisJCQkJKyIgIH1cbiIK
KwkJCQkrIn1cbiI7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1
aWxkQVNUKGNvbnRlbnRzLCB0aGlzLndvcmtpbmdDb3B5KTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5
cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIDEpOworCQlN
ZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IHR5cGVkZWNsYXJhdGlvbi5nZXRN
ZXRob2RzKClbMF07CisJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCB2ZGY9IChWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQpICgoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgbWV0
aG9kRGVjbGFyYXRpb24uZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoMSkpLmZyYWdtZW50cygp
LmdldCgwKTsKKwkJTGFtYmRhRXhwcmVzc2lvbiBsYW1iZGE9IChMYW1iZGFFeHByZXNzaW9uKSB2
ZGYuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJTGlzdCBwYXJhbWV0ZXJzID0gbGFtYmRhLnBhcmFtZXRl
cnMoKTsKKwkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXJzIiwgcGFy
YW1ldGVycy5zaXplKCkgPT0gMSk7CisJCUlUeXBlQmluZGluZ1tdIHBhcmFtZXRlclR5cGVzPSBs
YW1iZGEucmVzb2x2ZU1ldGhvZEJpbmRpbmcoKS5nZXRQYXJhbWV0ZXJUeXBlcygpOworCQlhc3Nl
cnRUcnVlKCJJbmNvcnJlY3QgTnVtYmVyIG9mIHBhcmFtZXRlciB0eXBlIiwgcGFyYW1ldGVyVHlw
ZXMubGVuZ3RoID09IDEpOworCX0KIAogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9NZXRob2RCaW5kaW5nLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01ldGhvZEJpbmRp
bmcuamF2YQppbmRleCA1MzQ5ODRkLi4wNWRmZmY3IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01ldGhvZEJpbmRpbmcuamF2YQor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01l
dGhvZEJpbmRpbmcuamF2YQpAQCAtMSwxMSArMSwxNSBAQAogLyoqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFu
eWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2Yg
dGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhp
cyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNsaXBz
ZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKgotICogQ29udHJpYnV0b3JzOgorICogVGhpcyBp
cyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVs
b3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1h
ZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5
LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRo
ZSBKQ1AuCisgKgorKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5p
dGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIApA
QCAtMTMsMTEgKzE3LDE0IEBACiAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JSmF2YUVs
ZW1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSmF2YUNvcmU7CitpbXBvcnQgb3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bcmd1bWVudDsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkxhbWJkYUV4cHJlc3Npb247CiBpbXBv
cnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5FeHRyYUNvbXBpbGVy
TW9kaWZpZXJzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29r
dXAuTG9va3VwRW52aXJvbm1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLmxvb2t1cC5QYXJhbWV0ZXJpemVkR2VuZXJpY01ldGhvZEJpbmRpbmc7CiBpbXBvcnQg
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5SYXdUeXBlQmluZGluZzsK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLlJlZmVyZW5j
ZUJpbmRpbmc7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1
cC5TeW50aGV0aWNNZXRob2RCaW5kaW5nOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5sb29rdXAuVHlwZUJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0Lmlu
dGVybmFsLmNvbXBpbGVyLmxvb2t1cC5UeXBlVmFyaWFibGVCaW5kaW5nOwogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5wcm9ibGVtLkFib3J0Q29tcGlsYXRpb247CkBA
IC0xMjMsNiArMTMwLDE2IEBACiAJCXJldHVybiB0aGlzLmFubm90YXRpb25zID0gQW5ub3RhdGlv
bkJpbmRpbmcuTm9Bbm5vdGF0aW9uczsKIAl9CiAKKwlwcml2YXRlIGludCBnZXRBY3R1YWxTdGFy
dChTeW50aGV0aWNNZXRob2RCaW5kaW5nIHNhbSwgaW50IGxlbmd0aCkgeworCQlpbnQgc3RhcnQg
PSAwOworCQlMYW1iZGFFeHByZXNzaW9uIGxhbWJkYSA9IHNhbS5sYW1iZGE7CisJCUFyZ3VtZW50
W10gYXJndW1lbnRzID0gbnVsbDsKKwkJaWYgKGxhbWJkYSAhPSBudWxsICYmIChhcmd1bWVudHMg
PSBsYW1iZGEuYXJndW1lbnRzKSAhPSBudWxsKSB7CisJCQlzdGFydCA9IGxlbmd0aCAtIGFyZ3Vt
ZW50cy5sZW5ndGg7CisJCX0KKwkJcmV0dXJuIHN0YXJ0OworCX0KKwogCS8qKgogCSAqIEBzZWUg
SU1ldGhvZEJpbmRpbmcjZ2V0RGVjbGFyaW5nQ2xhc3MoKQogCSAqLwpAQCAtMTc1LDE1ICsxOTIs
MTYgQEAKIAkJaWYgKGxlbmd0aCA9PSAwKSB7CiAJCQlyZXR1cm4gdGhpcy5wYXJhbWV0ZXJUeXBl
cyA9IE5PX1RZUEVfQklORElOR1M7CiAJCX0gZWxzZSB7Ci0JCQlJVHlwZUJpbmRpbmdbXSBwYXJh
bVR5cGVzID0gbmV3IElUeXBlQmluZGluZ1tsZW5ndGhdOwotCQkJZm9yIChpbnQgaSA9IDA7IGkg
PCBsZW5ndGg7IGkrKykgeworCQkJaW50IHN0YXJ0ID0gdGhpcy5iaW5kaW5nLmlzU3ludGhldGlj
KCkgPyBnZXRBY3R1YWxTdGFydCgoU3ludGhldGljTWV0aG9kQmluZGluZykgdGhpcy5iaW5kaW5n
LCBsZW5ndGgpIDogMDsKKwkJCUlUeXBlQmluZGluZ1tdIHBhcmFtVHlwZXMgPSBuZXcgSVR5cGVC
aW5kaW5nW2xlbmd0aCAtIHN0YXJ0XTsKKwkJCWZvciAoaW50IGkgPSBzdGFydDsgaSA8IGxlbmd0
aDsgaSsrKSB7CiAJCQkJZmluYWwgVHlwZUJpbmRpbmcgcGFyYW1ldGVyQmluZGluZyA9IHBhcmFt
ZXRlcnNbaV07CiAJCQkJaWYgKHBhcmFtZXRlckJpbmRpbmcgIT0gbnVsbCkgewogCQkJCQlJVHlw
ZUJpbmRpbmcgdHlwZUJpbmRpbmcgPSB0aGlzLnJlc29sdmVyLmdldFR5cGVCaW5kaW5nKHBhcmFt
ZXRlckJpbmRpbmcpOwogCQkJCQlpZiAodHlwZUJpbmRpbmcgPT0gbnVsbCkgewogCQkJCQkJcmV0
dXJuIHRoaXMucGFyYW1ldGVyVHlwZXMgPSBOT19UWVBFX0JJTkRJTkdTOwogCQkJCQl9Ci0JCQkJ
CXBhcmFtVHlwZXNbaV0gPSB0eXBlQmluZGluZzsKKwkJCQkJcGFyYW1UeXBlc1tpIC0gc3RhcnRd
ID0gdHlwZUJpbmRpbmc7CiAJCQkJfSBlbHNlIHsKIAkJCQkJLy8gbG9nIGVycm9yCiAJCQkJCVN0
cmluZ0J1ZmZlciBtZXNzYWdlID0gbmV3IFN0cmluZ0J1ZmZlcigiUmVwb3J0IG1ldGhvZCBiaW5k
aW5nIHdoZXJlIGEgcGFyYW1ldGVyIGlzIG51bGw6XG4iKTsgIC8vJE5PTi1OTFMtMSQ=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>236060</attachid>
            <date>2013-10-03 02:09:00 -0400</date>
            <delta_ts>2013-10-03 04:31:54 -0400</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-417017-18-Incorrect-parameters-in-resolv.patch</filename>
            <type>text/plain</type>
            <size>5551</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDgwNzg3NjYuLjQzYjc5ZTEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMjY0NSw2ICsyNjQ1LDM3IEBACiAJCXR5cGVC
aW5kaW5nID0gdHlwZS5yZXNvbHZlQmluZGluZygpOwogCQlhc3NlcnRGYWxzZSgiQSBGdW5jdGlv
bmFsIGludGVyZmFjZSIsIHR5cGVCaW5kaW5nLmlzRnVuY3Rpb25hbEludGVyZmFjZSgpKTsKIAl9
CisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lk
PTM5OTc5MworCSAqIAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVi
bGljIHZvaWQgdGVzdDQxNzAxNygpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0aGlz
LndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDQxNzAx
Ny9YLmphdmEiLAorCQkJCXRydWUvKiByZXNvbHZlICovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0g
InBhY2thZ2UgdGVzdDQxNzAxNzsiCisJCQkJKyAiaW50ZXJmYWNlIEkge1xuIgorCQkJCSsgIglp
bnQgZm9vKGludCB4KTtcbiIKKwkJCQkrICJ9XG4iIAorCQkJCSsgInB1YmxpYyBjbGFzcyBYIHtc
biIKKwkJCQkrICIgdm9pZCBmdW4oaW50IGEpIHtcbiIKKwkJCQkrIiAgCUkgaTEgPSB4MS0+IHgx
O1xuIgorCQkJCSsiICAJSSBpMiA9IHh4eC0+IHtcbiIKKwkJCQkrIiAgCQlpMS5mb28oYSk7XG4i
CisJCQkJKyIgIAkJcmV0dXJuIHh4eDtcbiIKKwkJCQkrIiAgCX07XG4iCisJCQkJKyIgIH1cbiIK
KwkJCQkrIn1cbiI7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1
aWxkQVNUKGNvbnRlbnRzLCB0aGlzLndvcmtpbmdDb3B5KTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5
cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIDEpOworCQlN
ZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IHR5cGVkZWNsYXJhdGlvbi5nZXRN
ZXRob2RzKClbMF07CisJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCB2ZGY9IChWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQpICgoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgbWV0
aG9kRGVjbGFyYXRpb24uZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoMSkpLmZyYWdtZW50cygp
LmdldCgwKTsKKwkJTGFtYmRhRXhwcmVzc2lvbiBsYW1iZGE9IChMYW1iZGFFeHByZXNzaW9uKSB2
ZGYuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJTGlzdCBwYXJhbWV0ZXJzID0gbGFtYmRhLnBhcmFtZXRl
cnMoKTsKKwkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXJzIiwgcGFy
YW1ldGVycy5zaXplKCkgPT0gMSk7CisJCUlUeXBlQmluZGluZ1tdIHBhcmFtZXRlclR5cGVzPSBs
YW1iZGEucmVzb2x2ZU1ldGhvZEJpbmRpbmcoKS5nZXRQYXJhbWV0ZXJUeXBlcygpOworCQlhc3Nl
cnRUcnVlKCJJbmNvcnJlY3QgTnVtYmVyIG9mIHBhcmFtZXRlciB0eXBlIiwgcGFyYW1ldGVyVHlw
ZXMubGVuZ3RoID09IDEpOworCX0KIAkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9z
aG93X2J1Zy5jZ2k/aWQ9NDEzOTQyCiAJLy8gYWxzbyByZWZlciBodHRwczovL2J1Z3MuZWNsaXBz
ZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDEzNTY5CiAJcHVibGljIHZvaWQgdGVzdEJ1ZzQx
Mzk0MigpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24gewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9NZXRob2RCaW5kaW5nLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01l
dGhvZEJpbmRpbmcuamF2YQppbmRleCA1MzQ5ODRkLi5kNDI5NGYyIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01ldGhvZEJpbmRp
bmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2Nv
cmUvZG9tL01ldGhvZEJpbmRpbmcuamF2YQpAQCAtMSwxMSArMSwxNSBAQAogLyoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24g
YW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24g
YW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhl
IGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUg
dGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21w
YW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0dHA6Ly93
d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKgotICogQ29udHJpYnV0b3JzOgor
ICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0
aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkg
YW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2Vz
CisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0
aW9uIG9mIHRoZSBKQ1AuCisgKgorKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0
aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKi8KIApAQCAtMTMsMTEgKzE3LDE0IEBACiAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29y
ZS5JSmF2YUVsZW1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSmF2YUNvcmU7Citp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bcmd1bWVudDsKK2lt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkxhbWJkYUV4cHJlc3Np
b247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5FeHRy
YUNvbXBpbGVyTW9kaWZpZXJzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5sb29rdXAuTG9va3VwRW52aXJvbm1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0Lmlu
dGVybmFsLmNvbXBpbGVyLmxvb2t1cC5QYXJhbWV0ZXJpemVkR2VuZXJpY01ldGhvZEJpbmRpbmc7
CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5SYXdUeXBl
QmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3Vw
LlJlZmVyZW5jZUJpbmRpbmc7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmxvb2t1cC5TeW50aGV0aWNNZXRob2RCaW5kaW5nOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpk
dC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuVHlwZUJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5UeXBlVmFyaWFibGVCaW5kaW5nOwogaW1w
b3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5wcm9ibGVtLkFib3J0Q29tcGls
YXRpb247CkBAIC0xMjMsNiArMTMwLDE2IEBACiAJCXJldHVybiB0aGlzLmFubm90YXRpb25zID0g
QW5ub3RhdGlvbkJpbmRpbmcuTm9Bbm5vdGF0aW9uczsKIAl9CiAKKwlwcml2YXRlIGludCBnZXRB
Y3R1YWxTdGFydChTeW50aGV0aWNNZXRob2RCaW5kaW5nIHNhbSwgaW50IGxlbmd0aCkgeworCQlp
bnQgc3RhcnQgPSAwOworCQlMYW1iZGFFeHByZXNzaW9uIGxhbWJkYSA9IHNhbS5sYW1iZGE7CisJ
CUFyZ3VtZW50W10gYXJndW1lbnRzID0gbnVsbDsKKwkJaWYgKGxhbWJkYSAhPSBudWxsICYmIChh
cmd1bWVudHMgPSBsYW1iZGEuYXJndW1lbnRzKSAhPSBudWxsKSB7CisJCQlzdGFydCA9IGxlbmd0
aCAtIGFyZ3VtZW50cy5sZW5ndGg7CisJCX0KKwkJcmV0dXJuIHN0YXJ0OworCX0KKwogCS8qKgog
CSAqIEBzZWUgSU1ldGhvZEJpbmRpbmcjZ2V0RGVjbGFyaW5nQ2xhc3MoKQogCSAqLwpAQCAtMTc1
LDE1ICsxOTIsMTYgQEAKIAkJaWYgKGxlbmd0aCA9PSAwKSB7CiAJCQlyZXR1cm4gdGhpcy5wYXJh
bWV0ZXJUeXBlcyA9IE5PX1RZUEVfQklORElOR1M7CiAJCX0gZWxzZSB7Ci0JCQlJVHlwZUJpbmRp
bmdbXSBwYXJhbVR5cGVzID0gbmV3IElUeXBlQmluZGluZ1tsZW5ndGhdOwotCQkJZm9yIChpbnQg
aSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeworCQkJaW50IHN0YXJ0ID0gdGhpcy5iaW5kaW5nIGlu
c3RhbmNlb2YgU3ludGhldGljTWV0aG9kQmluZGluZyA/IGdldEFjdHVhbFN0YXJ0KChTeW50aGV0
aWNNZXRob2RCaW5kaW5nKSB0aGlzLmJpbmRpbmcsIGxlbmd0aCkgOiAwOworCQkJSVR5cGVCaW5k
aW5nW10gcGFyYW1UeXBlcyA9IG5ldyBJVHlwZUJpbmRpbmdbbGVuZ3RoIC0gc3RhcnRdOworCQkJ
Zm9yIChpbnQgaSA9IHN0YXJ0OyBpIDwgbGVuZ3RoOyBpKyspIHsKIAkJCQlmaW5hbCBUeXBlQmlu
ZGluZyBwYXJhbWV0ZXJCaW5kaW5nID0gcGFyYW1ldGVyc1tpXTsKIAkJCQlpZiAocGFyYW1ldGVy
QmluZGluZyAhPSBudWxsKSB7CiAJCQkJCUlUeXBlQmluZGluZyB0eXBlQmluZGluZyA9IHRoaXMu
cmVzb2x2ZXIuZ2V0VHlwZUJpbmRpbmcocGFyYW1ldGVyQmluZGluZyk7CiAJCQkJCWlmICh0eXBl
QmluZGluZyA9PSBudWxsKSB7CiAJCQkJCQlyZXR1cm4gdGhpcy5wYXJhbWV0ZXJUeXBlcyA9IE5P
X1RZUEVfQklORElOR1M7CiAJCQkJCX0KLQkJCQkJcGFyYW1UeXBlc1tpXSA9IHR5cGVCaW5kaW5n
OworCQkJCQlwYXJhbVR5cGVzW2kgLSBzdGFydF0gPSB0eXBlQmluZGluZzsKIAkJCQl9IGVsc2Ug
ewogCQkJCQkvLyBsb2cgZXJyb3IKIAkJCQkJU3RyaW5nQnVmZmVyIG1lc3NhZ2UgPSBuZXcgU3Ry
aW5nQnVmZmVyKCJSZXBvcnQgbWV0aG9kIGJpbmRpbmcgd2hlcmUgYSBwYXJhbWV0ZXIgaXMgbnVs
bDpcbiIpOyAgLy8kTk9OLU5MUy0xJA==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>236064</attachid>
            <date>2013-10-03 04:31:00 -0400</date>
            <delta_ts>2013-10-03 04:31:54 -0400</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-417017-18-Incorrect-parameters-in-resolv.patch</filename>
            <type>text/plain</type>
            <size>6903</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDgwNzg3NjYuLmYwYzQyMGYgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMjY0NSw2ICsyNjQ1LDY4IEBACiAJCXR5cGVC
aW5kaW5nID0gdHlwZS5yZXNvbHZlQmluZGluZygpOwogCQlhc3NlcnRGYWxzZSgiQSBGdW5jdGlv
bmFsIGludGVyZmFjZSIsIHR5cGVCaW5kaW5nLmlzRnVuY3Rpb25hbEludGVyZmFjZSgpKTsKIAl9
CisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lk
PTQxNzAxNworCSAqIAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVi
bGljIHZvaWQgdGVzdDQxNzAxN2EoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhp
cy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3Q0MTcw
MTcvWC5qYXZhIiwKKwkJCQl0cnVlLyogcmVzb2x2ZSAqLyk7CisJCVN0cmluZyBjb250ZW50cyA9
ICJwYWNrYWdlIHRlc3Q0MTcwMTc7IgorCQkJCSsgImludGVyZmFjZSBJIHtcbiIKKwkJCQkrICIJ
aW50IGZvbyhpbnQgeCk7XG4iCisJCQkJKyAifVxuIiAKKwkJCQkrICJwdWJsaWMgY2xhc3MgWCB7
XG4iCisJCQkJKyAiIHZvaWQgZnVuKGludCBhKSB7XG4iCisJCQkJKyIgIAlJIGkxID0geDEtPiB4
MTtcbiIKKwkJCQkrIiAgCUkgaTIgPSB4eHgtPiB7XG4iCisJCQkJKyIgIAkJaTEuZm9vKGEpO1xu
IgorCQkJCSsiICAJCXJldHVybiB4eHg7XG4iCisJCQkJKyIgIAl9O1xuIgorCQkJCSsiICB9XG4i
CisJCQkJKyJ9XG4iOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBi
dWlsZEFTVChjb250ZW50cywgdGhpcy53b3JraW5nQ29weSk7CisJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LCAxKTsKKwkJ
TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRpb24gPSB0eXBlZGVjbGFyYXRpb24uZ2V0
TWV0aG9kcygpWzBdOworCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgdmRmPSAoVmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50KSAoKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1l
dGhvZERlY2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDEpKS5mcmFnbWVudHMo
KS5nZXQoMCk7CisJCUxhbWJkYUV4cHJlc3Npb24gbGFtYmRhPSAoTGFtYmRhRXhwcmVzc2lvbikg
dmRmLmdldEluaXRpYWxpemVyKCk7CisJCUxpc3QgcGFyYW1ldGVycyA9IGxhbWJkYS5wYXJhbWV0
ZXJzKCk7CisJCWFzc2VydFRydWUoIkluY29ycmVjdCBOdW1iZXIgb2YgcGFyYW1ldGVycyIsIHBh
cmFtZXRlcnMuc2l6ZSgpID09IDEpOworCQlJVHlwZUJpbmRpbmdbXSBwYXJhbWV0ZXJUeXBlcz0g
bGFtYmRhLnJlc29sdmVNZXRob2RCaW5kaW5nKCkuZ2V0UGFyYW1ldGVyVHlwZXMoKTsKKwkJYXNz
ZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXIgdHlwZSIsIHBhcmFtZXRlclR5
cGVzLmxlbmd0aCA9PSAxKTsKKwl9CisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQxNzAxNworCSAqIAorCSAqIEB0aHJvd3MgSmF2YU1vZGVs
RXhjZXB0aW9uCisJICovCisJcHVibGljIHZvaWQgdGVzdDQxNzAxN2IoKSB0aHJvd3MgSmF2YU1v
ZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29u
dmVydGVyMTgvc3JjL3Rlc3Q0MTcwMTcvWC5qYXZhIiwKKwkJCQl0cnVlLyogcmVzb2x2ZSAqLyk7
CisJCVN0cmluZyBjb250ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MTcwMTc7IiArCisJCQkJImludGVy
ZmFjZSBJMSB7XG4iICsKKwkJCQkiCWludCBmb28oaW50IGEpO1xuIiArCisJCQkJIn1cbiIgKwor
CQkJCSJcbiIgKworCQkJCSJpbnRlcmZhY2UgSTIge1xuIiArCisJCQkJIglwdWJsaWMgZGVmYXVs
dCBpbnQgZm9vKCkge1xuIiArCisJCQkJIgkJSTEgaTEgPSAoYSkgLT4ge1xuIiArCisJCQkJIgkJ
CXJldHVybiBhO1xuIiArCisJCQkJIgkJfTtcbiIgKworCQkJCSIJCS8vcmV0dXJuIDA7XG4iICsg
Ly8gRXJyb3Igb24gcHVycG9zZQorCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgOworCQlDb21waWxh
dGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBidWlsZEFTVChjb250ZW50cywgdGhpcy53
b3JraW5nQ29weSwgZmFsc2UpOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0g
KFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMSk7CisJCU1ldGhvZERlY2xhcmF0aW9u
IG1ldGhvZERlY2xhcmF0aW9uID0gdHlwZWRlY2xhcmF0aW9uLmdldE1ldGhvZHMoKVswXTsKKwkJ
VmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZkZj0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFn
bWVudCkgKChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsYXJhdGlvbi5n
ZXRCb2R5KCkuc3RhdGVtZW50cygpLmdldCgwKSkuZnJhZ21lbnRzKCkuZ2V0KDApOworCQlMYW1i
ZGFFeHByZXNzaW9uIGxhbWJkYT0gKExhbWJkYUV4cHJlc3Npb24pIHZkZi5nZXRJbml0aWFsaXpl
cigpOworCQlMaXN0IHBhcmFtZXRlcnMgPSBsYW1iZGEucGFyYW1ldGVycygpOworCQlhc3NlcnRU
cnVlKCJJbmNvcnJlY3QgTnVtYmVyIG9mIHBhcmFtZXRlcnMiLCBwYXJhbWV0ZXJzLnNpemUoKSA9
PSAxKTsKKwkJSVR5cGVCaW5kaW5nW10gcGFyYW1ldGVyVHlwZXM9IGxhbWJkYS5yZXNvbHZlTWV0
aG9kQmluZGluZygpLmdldFBhcmFtZXRlclR5cGVzKCk7CisJCWFzc2VydFRydWUoIkluY29ycmVj
dCBOdW1iZXIgb2YgcGFyYW1ldGVyIHR5cGUiLCBwYXJhbWV0ZXJUeXBlcy5sZW5ndGggPT0gMSk7
CisJfQogCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00
MTM5NDIKIAkvLyBhbHNvIHJlZmVyIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3df
YnVnLmNnaT9pZD00MTM1NjkKIAlwdWJsaWMgdm9pZCB0ZXN0QnVnNDEzOTQyKCkgdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbiB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9kQmluZGluZy5qYXZh
CmluZGV4IDUzNDk4NGQuLmQ0Mjk0ZjIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9kQmluZGluZy5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9kQmlu
ZGluZy5qYXZhCkBAIC0xLDExICsxLDE1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICog
Q29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICog
Q29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICog
QWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1h
dGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNs
aXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3Ry
aWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9s
ZWdhbC9lcGwtdjEwLmh0bWwKICAqCi0gKiBDb250cmlidXRvcnM6CisgKiBUaGlzIGlzIGFuIGlt
cGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVu
ZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFp
bGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBj
b2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4K
KyAqCisqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQ
SSBhbmQgaW1wbGVtZW50YXRpb24KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogCkBAIC0xMywx
MSArMTcsMTQgQEAKIAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklKYXZhRWxlbWVudDsK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhQ29yZTsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFyZ3VtZW50OworaW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuTGFtYmRhRXhwcmVzc2lvbjsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkV4dHJhQ29tcGlsZXJNb2RpZmll
cnM7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5Mb29r
dXBFbnZpcm9ubWVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIu
bG9va3VwLlBhcmFtZXRlcml6ZWRHZW5lcmljTWV0aG9kQmluZGluZzsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLlJhd1R5cGVCaW5kaW5nOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuUmVmZXJlbmNlQmluZGlu
ZzsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLlN5bnRo
ZXRpY01ldGhvZEJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmxvb2t1cC5UeXBlQmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIubG9va3VwLlR5cGVWYXJpYWJsZUJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLnByb2JsZW0uQWJvcnRDb21waWxhdGlvbjsKQEAgLTEyMyw2
ICsxMzAsMTYgQEAKIAkJcmV0dXJuIHRoaXMuYW5ub3RhdGlvbnMgPSBBbm5vdGF0aW9uQmluZGlu
Zy5Ob0Fubm90YXRpb25zOwogCX0KIAorCXByaXZhdGUgaW50IGdldEFjdHVhbFN0YXJ0KFN5bnRo
ZXRpY01ldGhvZEJpbmRpbmcgc2FtLCBpbnQgbGVuZ3RoKSB7CisJCWludCBzdGFydCA9IDA7CisJ
CUxhbWJkYUV4cHJlc3Npb24gbGFtYmRhID0gc2FtLmxhbWJkYTsKKwkJQXJndW1lbnRbXSBhcmd1
bWVudHMgPSBudWxsOworCQlpZiAobGFtYmRhICE9IG51bGwgJiYgKGFyZ3VtZW50cyA9IGxhbWJk
YS5hcmd1bWVudHMpICE9IG51bGwpIHsKKwkJCXN0YXJ0ID0gbGVuZ3RoIC0gYXJndW1lbnRzLmxl
bmd0aDsKKwkJfQorCQlyZXR1cm4gc3RhcnQ7CisJfQorCiAJLyoqCiAJICogQHNlZSBJTWV0aG9k
QmluZGluZyNnZXREZWNsYXJpbmdDbGFzcygpCiAJICovCkBAIC0xNzUsMTUgKzE5MiwxNiBAQAog
CQlpZiAobGVuZ3RoID09IDApIHsKIAkJCXJldHVybiB0aGlzLnBhcmFtZXRlclR5cGVzID0gTk9f
VFlQRV9CSU5ESU5HUzsKIAkJfSBlbHNlIHsKLQkJCUlUeXBlQmluZGluZ1tdIHBhcmFtVHlwZXMg
PSBuZXcgSVR5cGVCaW5kaW5nW2xlbmd0aF07Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0
aDsgaSsrKSB7CisJCQlpbnQgc3RhcnQgPSB0aGlzLmJpbmRpbmcgaW5zdGFuY2VvZiBTeW50aGV0
aWNNZXRob2RCaW5kaW5nID8gZ2V0QWN0dWFsU3RhcnQoKFN5bnRoZXRpY01ldGhvZEJpbmRpbmcp
IHRoaXMuYmluZGluZywgbGVuZ3RoKSA6IDA7CisJCQlJVHlwZUJpbmRpbmdbXSBwYXJhbVR5cGVz
ID0gbmV3IElUeXBlQmluZGluZ1tsZW5ndGggLSBzdGFydF07CisJCQlmb3IgKGludCBpID0gc3Rh
cnQ7IGkgPCBsZW5ndGg7IGkrKykgewogCQkJCWZpbmFsIFR5cGVCaW5kaW5nIHBhcmFtZXRlckJp
bmRpbmcgPSBwYXJhbWV0ZXJzW2ldOwogCQkJCWlmIChwYXJhbWV0ZXJCaW5kaW5nICE9IG51bGwp
IHsKIAkJCQkJSVR5cGVCaW5kaW5nIHR5cGVCaW5kaW5nID0gdGhpcy5yZXNvbHZlci5nZXRUeXBl
QmluZGluZyhwYXJhbWV0ZXJCaW5kaW5nKTsKIAkJCQkJaWYgKHR5cGVCaW5kaW5nID09IG51bGwp
IHsKIAkJCQkJCXJldHVybiB0aGlzLnBhcmFtZXRlclR5cGVzID0gTk9fVFlQRV9CSU5ESU5HUzsK
IAkJCQkJfQotCQkJCQlwYXJhbVR5cGVzW2ldID0gdHlwZUJpbmRpbmc7CisJCQkJCXBhcmFtVHlw
ZXNbaSAtIHN0YXJ0XSA9IHR5cGVCaW5kaW5nOwogCQkJCX0gZWxzZSB7CiAJCQkJCS8vIGxvZyBl
cnJvcgogCQkJCQlTdHJpbmdCdWZmZXIgbWVzc2FnZSA9IG5ldyBTdHJpbmdCdWZmZXIoIlJlcG9y
dCBtZXRob2QgYmluZGluZyB3aGVyZSBhIHBhcmFtZXRlciBpcyBudWxsOlxuIik7ICAvLyROT04t
TkxTLTEk
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>236088</attachid>
            <date>2013-10-04 01:40:00 -0400</date>
            <delta_ts>2013-10-04 01:40:10 -0400</delta_ts>
            <desc>Alternate patch</desc>
            <filename>lambdapa.patch</filename>
            <type>text/plain</type>
            <size>15810</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDgwNzg3NjYuLmE4ZWMxMGMgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMjY0NSw2ICsyNjQ1LDIwMCBAQAogCQl0eXBl
QmluZGluZyA9IHR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKIAkJYXNzZXJ0RmFsc2UoIkEgRnVuY3Rp
b25hbCBpbnRlcmZhY2UiLCB0eXBlQmluZGluZy5pc0Z1bmN0aW9uYWxJbnRlcmZhY2UoKSk7CiAJ
fQorCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9p
ZD00MTcwMTcKKwkgKiAKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1
YmxpYyB2b2lkIHRlc3Q0MTcwMTdhKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRo
aXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0NDE3
MDE3L1guamF2YSIsCisJCQkJdHJ1ZS8qIHJlc29sdmUgKi8pOworCQlTdHJpbmcgY29udGVudHMg
PSAicGFja2FnZSB0ZXN0NDE3MDE3OyIKKwkJCQkrICJpbnRlcmZhY2UgSSB7XG4iCisJCQkJKyAi
CWludCBmb28oaW50IHgpO1xuIgorCQkJCSsgIn1cbiIgCisJCQkJKyAicHVibGljIGNsYXNzIFgg
e1xuIgorCQkJCSsgIiB2b2lkIGZ1bihpbnQgYSkge1xuIgorCQkJCSsiICAJSSBpMSA9IHgxLT4g
eDE7XG4iCisJCQkJKyIgIAlJIGkyID0geHh4LT4ge1xuIgorCQkJCSsiICAJCWkxLmZvbyhhKTtc
biIKKwkJCQkrIiAgCQlyZXR1cm4geHh4O1xuIgorCQkJCSsiICAJfTtcbiIKKwkJCQkrIiAgfVxu
IgorCQkJCSsifVxuIjsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkg
YnVpbGRBU1QoY29udGVudHMsIHRoaXMud29ya2luZ0NvcHkpOworCQlUeXBlRGVjbGFyYXRpb24g
dHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMSk7CisJ
CU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2xhcmF0aW9uID0gdHlwZWRlY2xhcmF0aW9uLmdl
dE1ldGhvZHMoKVswXTsKKwkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZkZj0gKFZhcmlh
YmxlRGVjbGFyYXRpb25GcmFnbWVudCkgKChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBt
ZXRob2REZWNsYXJhdGlvbi5nZXRCb2R5KCkuc3RhdGVtZW50cygpLmdldCgxKSkuZnJhZ21lbnRz
KCkuZ2V0KDApOworCQlMYW1iZGFFeHByZXNzaW9uIGxhbWJkYT0gKExhbWJkYUV4cHJlc3Npb24p
IHZkZi5nZXRJbml0aWFsaXplcigpOworCQlMaXN0IHBhcmFtZXRlcnMgPSBsYW1iZGEucGFyYW1l
dGVycygpOworCQlhc3NlcnRUcnVlKCJJbmNvcnJlY3QgTnVtYmVyIG9mIHBhcmFtZXRlcnMiLCBw
YXJhbWV0ZXJzLnNpemUoKSA9PSAxKTsKKwkJSVR5cGVCaW5kaW5nW10gcGFyYW1ldGVyVHlwZXM9
IGxhbWJkYS5yZXNvbHZlTWV0aG9kQmluZGluZygpLmdldFBhcmFtZXRlclR5cGVzKCk7CisJCWFz
c2VydFRydWUoIkluY29ycmVjdCBOdW1iZXIgb2YgcGFyYW1ldGVyIHR5cGUiLCBwYXJhbWV0ZXJU
eXBlcy5sZW5ndGggPT0gMSk7CisJCWFzc2VydEVxdWFscygiSW5jb3JyZWN0IHBhcmFtZXRlciB0
eXBlIiwgImludCIsIHBhcmFtZXRlclR5cGVzWzBdLnRvU3RyaW5nKCkpOworCX0KKwkvKioKKwkg
KiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE3MDE3CisJ
ICogCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0
ZXN0NDE3MDE3YigpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0aGlzLndvcmtpbmdD
b3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDQxNzAxNy9YLmphdmEi
LAorCQkJCXRydWUvKiByZXNvbHZlICovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gInBhY2thZ2Ug
dGVzdDQxNzAxNzsiICsKKwkJCQkiaW50ZXJmYWNlIEkxIHtcbiIgKworCQkJCSIJaW50IGZvbyhp
bnQgYSk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJCQkJImludGVyZmFjZSBJMiB7
XG4iICsKKwkJCQkiCXB1YmxpYyBkZWZhdWx0IGludCBmb28oKSB7XG4iICsKKwkJCQkiCQlJMSBp
MSA9IChhKSAtPiB7XG4iICsKKwkJCQkiCQkJcmV0dXJuIGE7XG4iICsKKwkJCQkiCQl9O1xuIiAr
CisJCQkJIgkJLy9yZXR1cm4gMDtcbiIgKyAvLyBFcnJvciBvbiBwdXJwb3NlCisJCQkJIgl9XG4i
ICsKKwkJCQkifVxuIiA7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQp
IGJ1aWxkQVNUKGNvbnRlbnRzLCB0aGlzLndvcmtpbmdDb3B5LCBmYWxzZSk7CisJCVR5cGVEZWNs
YXJhdGlvbiB0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1
LCAxKTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRpb24gPSB0eXBlZGVjbGFy
YXRpb24uZ2V0TWV0aG9kcygpWzBdOworCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgdmRm
PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSAoKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0
ZW1lbnQpIG1ldGhvZERlY2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDApKS5m
cmFnbWVudHMoKS5nZXQoMCk7CisJCUxhbWJkYUV4cHJlc3Npb24gbGFtYmRhPSAoTGFtYmRhRXhw
cmVzc2lvbikgdmRmLmdldEluaXRpYWxpemVyKCk7CisJCUxpc3QgcGFyYW1ldGVycyA9IGxhbWJk
YS5wYXJhbWV0ZXJzKCk7CisJCWFzc2VydFRydWUoIkluY29ycmVjdCBOdW1iZXIgb2YgcGFyYW1l
dGVycyIsIHBhcmFtZXRlcnMuc2l6ZSgpID09IDEpOworCQlJVHlwZUJpbmRpbmdbXSBwYXJhbWV0
ZXJUeXBlcz0gbGFtYmRhLnJlc29sdmVNZXRob2RCaW5kaW5nKCkuZ2V0UGFyYW1ldGVyVHlwZXMo
KTsKKwkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXIgdHlwZSIsIHBh
cmFtZXRlclR5cGVzLmxlbmd0aCA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbmNvcnJlY3QgcGFy
YW1ldGVyIHR5cGUiLCAiaW50IiwgcGFyYW1ldGVyVHlwZXNbMF0udG9TdHJpbmcoKSk7CisJfQor
CS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00
MTcwMTcKKwkgKiAKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1Ymxp
YyB2b2lkIHRlc3Q0MTcwMTdjKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMu
d29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0NDE3MDE3
L1guamF2YSIsCisJCQkJdHJ1ZS8qIHJlc29sdmUgKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAi
cGFja2FnZSB0ZXN0NDE3MDE3OyIgKworCQkJCSJpbnRlcmZhY2UgSTEge1xuIiArCisJCQkJIglp
bnQgZm9vKGludCBhKTtcbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiaW50ZXJm
YWNlIEkyIHtcbiIgKworCQkJCSIJcHVibGljIGRlZmF1bHQgaW50IGZvbygpIHtcbiIgKworCQkJ
CSIJCUkxIGkxID0gKGZsb2F0IGEpIC0+IHtcbiIgKworCQkJCSIJCQlyZXR1cm4gYTtcbiIgKwor
CQkJCSIJCX07XG4iICsKKwkJCQkiCQkvL3JldHVybiAwO1xuIiArIC8vIEVycm9yIG9uIHB1cnBv
c2UKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iIDsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENv
bXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoY29udGVudHMsIHRoaXMud29ya2luZ0NvcHksIGZhbHNl
KTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24p
IGdldEFTVE5vZGUoY3UsIDEpOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlv
biA9IHR5cGVkZWNsYXJhdGlvbi5nZXRNZXRob2RzKClbMF07CisJCVZhcmlhYmxlRGVjbGFyYXRp
b25GcmFnbWVudCB2ZGY9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpICgoVmFyaWFibGVE
ZWNsYXJhdGlvblN0YXRlbWVudCkgbWV0aG9kRGVjbGFyYXRpb24uZ2V0Qm9keSgpLnN0YXRlbWVu
dHMoKS5nZXQoMCkpLmZyYWdtZW50cygpLmdldCgwKTsKKwkJTGFtYmRhRXhwcmVzc2lvbiBsYW1i
ZGE9IChMYW1iZGFFeHByZXNzaW9uKSB2ZGYuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbGFtYmRhLnBhcmFtZXRlcnMoKTsKKwkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51
bWJlciBvZiBwYXJhbWV0ZXJzIiwgcGFyYW1ldGVycy5zaXplKCkgPT0gMSk7CisJCUlUeXBlQmlu
ZGluZ1tdIHBhcmFtZXRlclR5cGVzPSBsYW1iZGEucmVzb2x2ZU1ldGhvZEJpbmRpbmcoKS5nZXRQ
YXJhbWV0ZXJUeXBlcygpOworCQlhc3NlcnRUcnVlKCJJbmNvcnJlY3QgTnVtYmVyIG9mIHBhcmFt
ZXRlciB0eXBlIiwgcGFyYW1ldGVyVHlwZXMubGVuZ3RoID09IDEpOworCQlhc3NlcnRFcXVhbHMo
IkluY29ycmVjdCBwYXJhbWV0ZXIgdHlwZSIsICJmbG9hdCIsIHBhcmFtZXRlclR5cGVzWzBdLnRv
U3RyaW5nKCkpOworCX0KKwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9z
aG93X2J1Zy5jZ2k/aWQ9NDE3MDE3CisJICogCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRp
b24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0NDE3MDE3ZCgpIHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24geworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIx
OC9zcmMvdGVzdDM5OTc5NC9YLmphdmEiLAorCQkJCXRydWUvKiByZXNvbHZlICovKTsKKwkJU3Ry
aW5nIGNvbnRlbnRzID0gInBhY2thZ2UgdGVzdDM5OTc5NDsiICsKKwkJCQkiaW50ZXJmYWNlIEkg
e1xuIiArCisJCQkJIgl2b2lkIGZvbyhYIHgpO1xuIiArCisJCQkJIn1cbiIgKworCQkJCSJwdWJs
aWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCXZvaWQgZm9vKFggeCkge1xuIiArCisJCQkJIgl9XG4i
ICsKKwkJCQkiCUkgaSA9IHRoaXM6OmZvbztcbiIgKworCQkJCSJ9XG4iOworCQkJCisJCUNvbXBp
bGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKGNvbnRlbnRzLCB0aGlz
LndvcmtpbmdDb3B5KTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVEZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIDEpOworCQlGaWVsZERlY2xhcmF0aW9uIGZpZWxk
ID0gdHlwZURlY2xhcmF0aW9uLmdldEZpZWxkcygpWzBdOworCQkKKwkJVmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50IGZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgZmll
bGQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQlFeHByZXNzaW9uIGV4cHJlc3Npb24gPSBmcmFnbWVu
dC5nZXRJbml0aWFsaXplcigpOworCQlFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlIG1ldGhvZFJl
ZmVyZW5jZSA9IChFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlKSBleHByZXNzaW9uOworCQlJTWV0
aG9kQmluZGluZyBtZXRob2RCaW5kaW5nID0gbWV0aG9kUmVmZXJlbmNlLnJlc29sdmVNZXRob2RC
aW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwobWV0aG9kQmluZGluZyk7CisJCUlUeXBlQmluZGlu
ZyBbXSBwYXJhbWV0ZXJUeXBlcyA9IG1ldGhvZEJpbmRpbmcuZ2V0UGFyYW1ldGVyVHlwZXMoKTsK
KwkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IE51bWJlciBvZiBwYXJhbWV0ZXIgdHlwZSIsIHBhcmFt
ZXRlclR5cGVzLmxlbmd0aCA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbmNvcnJlY3QgcGFyYW1l
dGVyIHR5cGUiLCAiWCIsIHBhcmFtZXRlclR5cGVzWzBdLmdldE5hbWUoKSk7CisJfQorCQorCS8q
KgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00MTcw
MTcKKwkgKiAKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2
b2lkIHRlc3Q0MTcwMTdlKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29y
a2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0Mzk5Nzk0L1gu
amF2YSIsCisJCQkJdHJ1ZS8qIHJlc29sdmUgKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAicGFj
a2FnZSB0ZXN0Mzk5Nzk0OyIgKworCQkJCSJpbnRlcmZhY2UgSSB7XG4iICsKKwkJCQkiCWludCBb
XSBmb28oaW50IHgpO1xuIiArCisJCQkJIn1cbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4i
ICsKKwkJCQkiCUkgaSA9IGludCBbXTo6bmV3O1xuIiArCisJCQkJIn1cbiI7CisJCQkKKwkJQ29t
cGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoY29udGVudHMsIHRo
aXMud29ya2luZ0NvcHkpOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZURlY2xhcmF0aW9uID0gKFR5
cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMSk7CisJCUZpZWxkRGVjbGFyYXRpb24gZmll
bGQgPSB0eXBlRGVjbGFyYXRpb24uZ2V0RmllbGRzKClbMF07CisJCQorCQlWYXJpYWJsZURlY2xh
cmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSBm
aWVsZC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCUV4cHJlc3Npb24gZXhwcmVzc2lvbiA9IGZyYWdt
ZW50LmdldEluaXRpYWxpemVyKCk7CisJCUNyZWF0aW9uUmVmZXJlbmNlIGNyZWF0aW9uUmVmZXJl
bmNlID0gKENyZWF0aW9uUmVmZXJlbmNlKSBleHByZXNzaW9uOworCQlJTWV0aG9kQmluZGluZyBt
ZXRob2RCaW5kaW5nID0gY3JlYXRpb25SZWZlcmVuY2UucmVzb2x2ZU1ldGhvZEJpbmRpbmcoKTsK
KwkJYXNzZXJ0Tm90TnVsbChtZXRob2RCaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBu
YW1lIiwgImxhbWJkYSQwIiwgbWV0aG9kQmluZGluZy5nZXROYW1lKCkpOworCQlJVHlwZUJpbmRp
bmcgW10gcGFyYW1ldGVyVHlwZXMgPSBtZXRob2RCaW5kaW5nLmdldFBhcmFtZXRlclR5cGVzKCk7
CisJCWFzc2VydFRydWUoIkluY29ycmVjdCBOdW1iZXIgb2YgcGFyYW1ldGVyIHR5cGUiLCBwYXJh
bWV0ZXJUeXBlcy5sZW5ndGggPT0gMSk7CisJCWFzc2VydEVxdWFscygiSW5jb3JyZWN0IHBhcmFt
ZXRlciB0eXBlIiwgImludCIsIHBhcmFtZXRlclR5cGVzWzBdLmdldE5hbWUoKSk7CisJfQorCQor
CS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00
MTcwMTcKKwkgKiAKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1Ymxp
YyB2b2lkIHRlc3Q0MTcwMTdmKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMu
d29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0Mzk5Nzk0
L1guamF2YSIsCisJCQkJdHJ1ZS8qIHJlc29sdmUgKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAi
cGFja2FnZSB0ZXN0Mzk5Nzk0OyIgKworCQkJCSJpbnRlcmZhY2UgSSB7XG4iICsKKwkJCQkiCXZv
aWQgZm9vKFggeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIg
KworCQkJCSIJcHJpdmF0ZSB2b2lkIGZvbyhYIHgpIHtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJ
IgljbGFzcyBZIHtcbiIgKworCQkJCSIJCUkgaSA9IFgudGhpczo6Zm9vO1xuIiArCisJCQkJIgl9
XG4iICsKKwkJCQkifVxuIjsKKwkJCQorCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRp
b25Vbml0KSBidWlsZEFTVChjb250ZW50cywgdGhpcy53b3JraW5nQ29weSk7CisJCVR5cGVEZWNs
YXJhdGlvbiB0eXBlRGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1
LCAxKTsKKwkJdHlwZURlY2xhcmF0aW9uID0gdHlwZURlY2xhcmF0aW9uLmdldFR5cGVzKClbMF07
CisJCUZpZWxkRGVjbGFyYXRpb24gZmllbGQgPSB0eXBlRGVjbGFyYXRpb24uZ2V0RmllbGRzKClb
MF07CisJCQorCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQgPSAoVmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50KSBmaWVsZC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCUV4cHJl
c3Npb24gZXhwcmVzc2lvbiA9IGZyYWdtZW50LmdldEluaXRpYWxpemVyKCk7CisJCUV4cHJlc3Np
b25NZXRob2RSZWZlcmVuY2UgcmVmZXJlbmNlID0gKEV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2Up
IGV4cHJlc3Npb247CisJCUlNZXRob2RCaW5kaW5nIG1ldGhvZEJpbmRpbmcgPSByZWZlcmVuY2Uu
cmVzb2x2ZU1ldGhvZEJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbChtZXRob2RCaW5kaW5nKTsK
KwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBuYW1lIiwgImZvbyIsIG1ldGhvZEJpbmRpbmcuZ2V0TmFt
ZSgpKTsKKwkJSVR5cGVCaW5kaW5nIFtdIHBhcmFtZXRlclR5cGVzID0gbWV0aG9kQmluZGluZy5n
ZXRQYXJhbWV0ZXJUeXBlcygpOworCQlhc3NlcnRUcnVlKCJJbmNvcnJlY3QgTnVtYmVyIG9mIHBh
cmFtZXRlciB0eXBlIiwgcGFyYW1ldGVyVHlwZXMubGVuZ3RoID09IDEpOworCQlhc3NlcnRFcXVh
bHMoIkluY29ycmVjdCBwYXJhbWV0ZXIgdHlwZSIsICJYIiwgcGFyYW1ldGVyVHlwZXNbMF0uZ2V0
TmFtZSgpKTsKKwl9CiAJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTQxMzk0MgogCS8vIGFsc28gcmVmZXIgaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1
Z3Mvc2hvd19idWcuY2dpP2lkPTQxMzU2OQogCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTM5NDIoKSB0
aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvRnVuY3Rp
b25hbEV4cHJlc3Npb24uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvRnVuY3Rpb25hbEV4cHJlc3Npb24uamF2
YQppbmRleCA0ZTY0NzUyLi5iMmU1ODlkIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Z1bmN0aW9u
YWxFeHByZXNzaW9uLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9GdW5jdGlvbmFsRXhwcmVzc2lvbi5q
YXZhCkBAIC0zOCw3ICszOCw4IEBACiAJCiAJVHlwZUJpbmRpbmcgZXhwZWN0ZWRUeXBlOwogCXB1
YmxpYyBNZXRob2RCaW5kaW5nIGRlc2NyaXB0b3I7Ci0JcHVibGljIE1ldGhvZEJpbmRpbmcgYmlu
ZGluZzsKKwlwdWJsaWMgTWV0aG9kQmluZGluZyBiaW5kaW5nOyAgICAgICAgICAgICAgICAgLy8g
Q29kZSBnZW5lcmF0aW9uIGJpbmRpbmcuIE1heSBpbmNsdWRlIHN5bnRoZXRpY3MuIFNlZSBnZXRN
ZXRob2RCaW5kaW5nKCkKKwlwcm90ZWN0ZWQgTWV0aG9kQmluZGluZyBhY3R1YWxNZXRob2RCaW5k
aW5nOyAgLy8gdm9pZCBvZiBzeW50aGV0aWNzLgogCWJvb2xlYW4gaWdub3JlRnVydGhlckludmVz
dGlnYXRpb247CiAJcHJvdGVjdGVkIEV4cHJlc3Npb25Db250ZXh0IGV4cHJlc3Npb25Db250ZXh0
ID0gVkFOSUxMQV9DT05URVhUOwogCXByb3RlY3RlZCBTaW1wbGVMb29rdXBUYWJsZSByZXN1bHRF
eHByZXNzaW9uczsKQEAgLTUxLDcgKzUyLDEwIEBACiAJcHVibGljIEZ1bmN0aW9uYWxFeHByZXNz
aW9uKENvbXBpbGF0aW9uUmVzdWx0IGNvbXBpbGF0aW9uUmVzdWx0KSB7CiAJCXRoaXMuY29tcGls
YXRpb25SZXN1bHQgPSBjb21waWxhdGlvblJlc3VsdDsKIAl9Ci0KKwkvLyBSZXR1cm4gdGhlIGFj
dHVhbCAobm9uLWNvZGUgZ2VuZXJhdGlvbikgbWV0aG9kIGJpbmRpbmcgdGhhdCBpcyB2b2lkIG9m
IHN5bnRoZXRpY3MuCisJcHVibGljIE1ldGhvZEJpbmRpbmcgZ2V0TWV0aG9kQmluZGluZygpIHsK
KwkJcmV0dXJuIG51bGw7CisJfQogCXB1YmxpYyB2b2lkIHNldEV4cGVjdGVkVHlwZShUeXBlQmlu
ZGluZyBleHBlY3RlZFR5cGUpIHsKIAkJdGhpcy5leHBlY3RlZFR5cGUgPSB0aGlzLmVsbGlwc2lz
QXJndW1lbnQgPyAoKEFycmF5QmluZGluZykgZXhwZWN0ZWRUeXBlKS5lbGVtZW50c1R5cGUoKSA6
IGV4cGVjdGVkVHlwZTsKIAl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0xhbWJkYUV4cHJlc3Np
b24uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9hc3QvTGFtYmRhRXhwcmVzc2lvbi5qYXZhCmluZGV4IGZjYmQxZDAu
LmZmZTlhZGQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvTGFtYmRhRXhwcmVzc2lvbi5qYXZhCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9hc3QvTGFtYmRhRXhwcmVzc2lvbi5qYXZhCkBAIC00OSw2ICs0OSw3IEBACiBp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5TY29wZTsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLlNvdXJjZVR5cGVC
aW5kaW5nOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAu
U3ludGhldGljQXJndW1lbnRCaW5kaW5nOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5sb29rdXAuU3ludGhldGljTWV0aG9kQmluZGluZzsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLlRhZ0JpdHM7CiBpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5UeXBlQmluZGluZzsKIGltcG9ydCBv
cmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLlR5cGVDb25zdGFudHM7CkBA
IC03ODMsNiArNzg0LDE3IEBACiAJCQkJcmV0dXJuIHRoaXMub3V0ZXJMb2NhbFZhcmlhYmxlc1tp
XTsKIAkJcmV0dXJuIG51bGw7CiAJfQorCisJLy8gUmV0dXJuIHRoZSBhY3R1YWwgbWV0aG9kIGJp
bmRpbmcgZGV2b2lkIG9mIHN5bnRoZXRpY3MuIAorCXB1YmxpYyBNZXRob2RCaW5kaW5nIGdldE1l
dGhvZEJpbmRpbmcoKSB7CisJCWlmICh0aGlzLmFjdHVhbE1ldGhvZEJpbmRpbmcgPT0gbnVsbCkg
eworCQkJdGhpcy5hY3R1YWxNZXRob2RCaW5kaW5nID0gbmV3IE1ldGhvZEJpbmRpbmcodGhpcy5i
aW5kaW5nLm1vZGlmaWVycywgdGhpcy5iaW5kaW5nLnNlbGVjdG9yLCB0aGlzLmJpbmRpbmcucmV0
dXJuVHlwZSwgCisJCQkJCXRoaXMuYmluZGluZyBpbnN0YW5jZW9mIFN5bnRoZXRpY01ldGhvZEJp
bmRpbmcgPyB0aGlzLmRlc2NyaXB0b3IucGFyYW1ldGVycyA6IHRoaXMuYmluZGluZy5wYXJhbWV0
ZXJzLCAgLy8gcmV0YWluIGFueSBmYXVsdHMgaW4gcGFyYW1ldGVyIGxpc3QuCisJCQkJCQkJdGhp
cy5iaW5kaW5nLnRocm93bkV4Y2VwdGlvbnMsIHRoaXMuYmluZGluZy5kZWNsYXJpbmdDbGFzcyk7
CisJCQl0aGlzLmFjdHVhbE1ldGhvZEJpbmRpbmcudGFnQml0cyA9IHRoaXMuYmluZGluZy50YWdC
aXRzOworCQl9CisJCXJldHVybiB0aGlzLmFjdHVhbE1ldGhvZEJpbmRpbmc7CisJfQogfQogY2xh
c3MgSW5jb25ncnVlbnRMYW1iZGFFeGNlcHRpb24gZXh0ZW5kcyBSdW50aW1lRXhjZXB0aW9uIHsK
IAlwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSA0MTQ1NzIzNTA5
MjE5ODM2MTE0TDsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUmVmZXJlbmNlRXhwcmVzc2lvbi5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2FzdC9SZWZlcmVuY2VFeHByZXNzaW9uLmphdmEKaW5kZXggNmRjOWU2Yi4u
YjgwZDFiOCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9SZWZlcmVuY2VFeHByZXNzaW9uLmphdmEK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2FzdC9SZWZlcmVuY2VFeHByZXNzaW9uLmphdmEKQEAgLTgxLDYgKzgxLDcg
QEAKIAl9CiAgCiAJcHVibGljIHZvaWQgZ2VuZXJhdGVDb2RlKEJsb2NrU2NvcGUgY3VycmVudFNj
b3BlLCBDb2RlU3RyZWFtIGNvZGVTdHJlYW0sIGJvb2xlYW4gdmFsdWVSZXF1aXJlZCkgeworCQl0
aGlzLmFjdHVhbE1ldGhvZEJpbmRpbmcgPSB0aGlzLmJpbmRpbmc7IC8vIGdyYWIgYmVmb3JlIHN5
bnRoZXRpY3MgY29tZSBpbnRvIHBsYXkuCiAJCVNvdXJjZVR5cGVCaW5kaW5nIHNvdXJjZVR5cGUg
PSBjdXJyZW50U2NvcGUuZW5jbG9zaW5nU291cmNlVHlwZSgpOwogCQlpZiAodGhpcy5yZWNlaXZl
clR5cGUuaXNBcnJheVR5cGUoKSkgewogCQkJaWYgKGlzQ29uc3RydWN0b3JSZWZlcmVuY2UoKSkg
ewpAQCAtNjM3LDQgKzYzOCwxMCBAQAogCQl0U2FtID0gdC5nZXRTaW5nbGVBYnN0cmFjdE1ldGhv
ZCh0aGlzLmVuY2xvc2luZ1Njb3BlKTsKIAkJcmV0dXJuIHJlc3VsdEV4cHJlc3Npb24udElzTW9y
ZVNwZWNpZmljKHRTYW0ucmV0dXJuVHlwZSwgc1NhbS5yZXR1cm5UeXBlKTsKIAl9CisKKwlwdWJs
aWMgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5NZXRob2RCaW5kaW5n
IGdldE1ldGhvZEJpbmRpbmcoKSB7CisJCWlmICh0aGlzLmFjdHVhbE1ldGhvZEJpbmRpbmcgPT0g
bnVsbCkgIC8vIGFycmF5IG5ldy9jbG9uZSwgbm8gcmVhbCBiaW5kaW5nLgorCQkJdGhpcy5hY3R1
YWxNZXRob2RCaW5kaW5nID0gdGhpcy5iaW5kaW5nOworCQlyZXR1cm4gdGhpcy5hY3R1YWxNZXRo
b2RCaW5kaW5nOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdSZXNvbHZlci5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9EZWZhdWx0Qmlu
ZGluZ1Jlc29sdmVyLmphdmEKaW5kZXggZTFlMzdlOC4uMDYyNzU4YyAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9EZWZhdWx0Qmlu
ZGluZ1Jlc29sdmVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xp
cHNlL2pkdC9jb3JlL2RvbS9EZWZhdWx0QmluZGluZ1Jlc29sdmVyLmphdmEKQEAgLTg4Myw3ICs4
ODMsNyBAQAogCQlPYmplY3Qgb2xkTm9kZSA9IHRoaXMubmV3QXN0VG9PbGRBc3QuZ2V0KGxhbWJk
YSk7CiAJCWlmIChvbGROb2RlIGluc3RhbmNlb2Ygb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLmFzdC5MYW1iZGFFeHByZXNzaW9uKSB7CiAJCQlvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0LkxhbWJkYUV4cHJlc3Npb24gbGFtYmRhRXhwcmVzc2lvbiA9IChvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkxhbWJkYUV4cHJlc3Npb24pIG9sZE5v
ZGU7Ci0JCQlJTWV0aG9kQmluZGluZyBtZXRob2RCaW5kaW5nID0gZ2V0TWV0aG9kQmluZGluZyhs
YW1iZGFFeHByZXNzaW9uLmJpbmRpbmcpOworCQkJSU1ldGhvZEJpbmRpbmcgbWV0aG9kQmluZGlu
ZyA9IGdldE1ldGhvZEJpbmRpbmcobGFtYmRhRXhwcmVzc2lvbi5nZXRNZXRob2RCaW5kaW5nKCkp
OwogCQkJaWYgKG1ldGhvZEJpbmRpbmcgPT0gbnVsbCkgewogCQkJCXJldHVybiBudWxsOwogCQkJ
fQpAQCAtOTM0LDcgKzkzNCw3IEBACiAJCU9iamVjdCBvbGROb2RlID0gdGhpcy5uZXdBc3RUb09s
ZEFzdC5nZXQobWV0aG9kUmVmZXJlbmNlKTsKIAkJaWYgKG9sZE5vZGUgaW5zdGFuY2VvZiBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlJlZmVyZW5jZUV4cHJlc3Npb24pIHsK
IAkJCW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUmVmZXJlbmNlRXhwcmVz
c2lvbiByZWZlcmVuY2VFeHByZXNzaW9uID0gKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5hc3QuUmVmZXJlbmNlRXhwcmVzc2lvbikgb2xkTm9kZTsKLQkJCUlNZXRob2RCaW5kaW5n
IG1ldGhvZEJpbmRpbmcgPSBnZXRNZXRob2RCaW5kaW5nKHJlZmVyZW5jZUV4cHJlc3Npb24uYmlu
ZGluZyk7CisJCQlJTWV0aG9kQmluZGluZyBtZXRob2RCaW5kaW5nID0gZ2V0TWV0aG9kQmluZGlu
ZyhyZWZlcmVuY2VFeHByZXNzaW9uLmdldE1ldGhvZEJpbmRpbmcoKSk7CiAJCQlpZiAobWV0aG9k
QmluZGluZyA9PSBudWxsKSB7CiAJCQkJcmV0dXJuIG51bGw7CiAJCQl9CkBAIC0xMTY2LDcgKzEx
NjYsNyBAQAogCQkJcmV0dXJuIG1ldGhvZC5nZXRSZXR1cm5UeXBlKCk7CiAJCX0gZWxzZSBpZiAo
bm9kZSBpbnN0YW5jZW9mIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUmVm
ZXJlbmNlRXhwcmVzc2lvbikgewogCQkJb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmFzdC5SZWZlcmVuY2VFeHByZXNzaW9uIHJlZmVyZW5jZUV4cHJlc3Npb24gPSAob3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5SZWZlcmVuY2VFeHByZXNzaW9uKSBub2RlOwot
CQkJSU1ldGhvZEJpbmRpbmcgbWV0aG9kID0gZ2V0TWV0aG9kQmluZGluZyhyZWZlcmVuY2VFeHBy
ZXNzaW9uLmJpbmRpbmcpOworCQkJSU1ldGhvZEJpbmRpbmcgbWV0aG9kID0gZ2V0TWV0aG9kQmlu
ZGluZyhyZWZlcmVuY2VFeHByZXNzaW9uLmdldE1ldGhvZEJpbmRpbmcoKSk7CiAJCQlpZiAobWV0
aG9kID09IG51bGwpIHJldHVybiBudWxsOwogCQkJcmV0dXJuIG1ldGhvZC5nZXRSZXR1cm5UeXBl
KCk7CiAJCX0KQEAgLTE0MzEsNyArMTQzMSw3IEBACiAJCQlyZXR1cm4gZ2V0TWV0aG9kQmluZGlu
ZyhtZW1iZXJWYWx1ZVBhaXIuYmluZGluZyk7CiAJCX0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9m
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUmVmZXJlbmNlRXhwcmVzc2lv
bikgewogCQkJb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5SZWZlcmVuY2VF
eHByZXNzaW9uIHJlZmVyZW5jZUV4cHJlc3Npb24gPSAob3JnLmVjbGlwc2UuamR0LmludGVybmFs
LmNvbXBpbGVyLmFzdC5SZWZlcmVuY2VFeHByZXNzaW9uKSBub2RlOwotCQkJcmV0dXJuIGdldE1l
dGhvZEJpbmRpbmcocmVmZXJlbmNlRXhwcmVzc2lvbi5iaW5kaW5nKTsKKwkJCXJldHVybiBnZXRN
ZXRob2RCaW5kaW5nKHJlZmVyZW5jZUV4cHJlc3Npb24uZ2V0TWV0aG9kQmluZGluZygpKTsKIAkJ
fQogCQlyZXR1cm4gbnVsbDsKIAl9
</data>

          </attachment>
      

    </bug>

</bugzilla>