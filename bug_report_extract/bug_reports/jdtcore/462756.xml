<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>462756</bug_id>
          
          <creation_ts>2015-03-21 08:33:00 -0400</creation_ts>
          <short_desc>IAE in ThreadJob.illegalPush (134)</short_desc>
          <delta_ts>2015-04-27 05:45:42 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.5</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="EPP Error Reports">error-reports-inbox</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>shankhba</cc>
    
    <cc>szymon.ptaszkiewicz</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2535409</commentid>
    <comment_count>0</comment_count>
    <who name="EPP Error Reports">error-reports-inbox</who>
    <bug_when>2015-03-21 08:33:27 -0400</bug_when>
    <thetext>The following incident was reported via the automated error reporting:


    code:                   2
    plugin:                 org.eclipse.equinox.preferences_3.5.200.v20140224-1527
    message:                HIDDEN
    fingerprint:            70e2bf12
    exception class:        java.lang.IllegalArgumentException
    exception message:      HIDDEN
    number of children:     0
    
    java.lang.IllegalArgumentException: HIDDEN
    at org.eclipse.core.runtime.Assert.isLegal(Assert.java:63)
    at org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:134)
    at org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:333)
    at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:63)
    at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:298)
    at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:118)
    at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:2251)
    at org.eclipse.core.internal.resources.Project.touch(Project.java:1427)
    at org.eclipse.jdt.internal.core.JavaModelManager$EclipsePreferencesListener.preferenceChange(JavaModelManager.java:1531)
    at org.eclipse.core.internal.preferences.EclipsePreferences$3.run(EclipsePreferences.java:896)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.preferences.EclipsePreferences.firePreferenceEvent(EclipsePreferences.java:899)
    at org.eclipse.core.internal.preferences.EclipsePreferences.put(EclipsePreferences.java:912)
    at org.eclipse.jdt.internal.core.JavaModelManager.storePreference(JavaModelManager.java:4888)
    at org.eclipse.jdt.internal.core.JavaModelManager.setOptions(JavaModelManager.java:4940)
    at org.eclipse.jdt.core.JavaCore.setOptions(JavaCore.java:5672)
    at org.eclipse.jdt.launching.JavaRuntime.updateCompliance(JavaRuntime.java:2817)
    at org.eclipse.jdt.launching.JavaRuntime.initializeVMs(JavaRuntime.java:2776)
    at org.eclipse.jdt.launching.JavaRuntime.getVMInstallTypes(JavaRuntime.java:537)
    at org.eclipse.jdt.internal.launching.JREPreferenceModifyListener.preApply(JREPreferenceModifyListener.java:128)
    at org.eclipse.core.internal.preferences.PreferencesService$4.run(PreferencesService.java:448)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.preferences.PreferencesService.firePreApplyEvent(PreferencesService.java:451)
    at org.eclipse.core.internal.preferences.PreferencesService.applyPreferences(PreferencesService.java:121)
    at org.eclipse.core.internal.resources.ProjectPreferences.read(ProjectPreferences.java:206)
    at org.eclipse.core.internal.resources.ProjectPreferences.updatePreferences(ProjectPreferences.java:274)
    at org.eclipse.core.internal.resources.File.updateMetadataFiles(File.java:415)
    at org.eclipse.core.internal.localstore.RefreshLocalVisitor.visit(RefreshLocalVisitor.java:297)
    at org.eclipse.core.internal.localstore.UnifiedTree.accept(UnifiedTree.java:109)
    at org.eclipse.core.internal.localstore.FileSystemResourceManager.refreshResource(FileSystemResourceManager.java:922)
    at org.eclipse.core.internal.localstore.FileSystemResourceManager.refresh(FileSystemResourceManager.java:906)
    at org.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1710)
    at org.eclipse.core.internal.refresh.RefreshJob.runInWorkspace(RefreshJob.java:169)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:39)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
   
  

General Information:

    reported-by:      ice
    anonymous-id:     a8d37249-4f86-42bc-8659-1eeb82823d5c
    eclipse-build-id: 4.5.0.I20141210-2000
    eclipse-product:  org.eclipse.epp.package.committers.product
    operating system: Windows8 6.2.0 (x86_64) - win32
    jre-version:      1.8.0_31-b13

The following plug-ins were present on the execution stack (*):
    1. org.eclipse.core.jobs_3.7.0.v20141128-1953
    2. org.eclipse.core.resources_3.9.100.v20141128-1217
    3. org.eclipse.core.runtime_3.10.0.v20140724-1132
    4. org.eclipse.jdt.core_3.11.0.v20141209-1931
    5. org.eclipse.jdt_3.11.0.v20141210-2000
    6. org.eclipse.jdt.launching_3.7.200.v20141110-1449

Please note that:
* Messages, stacktraces, and nested status objects may be shortened.
* Bug fields like status, resolution, and whiteboard are sent
  back to reporters.
* The list of present bundles and their respective versions was
  calculated by package naming heuristics. This may or may not reflect reality.

Other Resources:
* Report: https://dev.eclipse.org/recommenders/committers/confess/#/problems/54d63202e4b05aab71ce6027  
* Manual: https://dev.eclipse.org/recommenders/community/confess/#/guide


Thank you for your assistance.
Your friendly error-reports-inbox.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2535608</commentid>
    <comment_count>1</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-03-22 23:15:01 -0400</bug_when>
    <thetext>*** Bug 462758 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2535611</commentid>
    <comment_count>2</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-03-22 23:30:20 -0400</bug_when>
    <thetext>Moving to platform for comments</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2537298</commentid>
    <comment_count>3</comment_count>
    <who name="Szymon Ptaszkiewicz">szymon.ptaszkiewicz</who>
    <bug_when>2015-03-25 10:03:33 -0400</bug_when>
    <thetext>Resource.refreshLocal(..) acquires a rule and then JavaModelManager$EclipsePreferencesListener.preferenceChange(..) tries to touch a project which is not possible since touching requires a rule incompatible with previously acquired refresh rule. The general best practice is that you shouldn&apos;t try to acquire any rules or locks in listener&apos;s callback methods since you don&apos;t know when it will be called and so you can&apos;t make any assumptions about the context and state of executing thread.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2539084</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-03-30 03:44:47 -0400</bug_when>
    <thetext>We have run into this kind of problem before and the way it was handled was to do what we need (in this case, touch) in another thread. I think we have examples in DeltaProcessor.

I will take a look. Meanwhile, it will be nice to know what causes this and whether or not it is consistently reproducible, so I can extract a testcase if possible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2539272</commentid>
    <comment_count>5</comment_count>
      <attachid>251994</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-03-30 08:11:39 -0400</bug_when>
    <thetext>Created attachment 251994
Proposed fix

This should do. But it will still be nice to know the scenario that causes this. This is an old code and surprised that this has come up now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2539782</commentid>
    <comment_count>6</comment_count>
      <attachid>252020</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-03-31 02:55:17 -0400</bug_when>
    <thetext>Created attachment 252020
Updated patch with test

Patch updated with test.

The test case tests that the IAE is not thrown when the preference file changed (such as java compliance level) externally and subsequently refreshLocal() was called. It must be mentioned that in some cases (e.g. ClasspathTests.testBug396299()) the changes are not immediately visible.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2540474</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-04-01 01:13:58 -0400</bug_when>
    <thetext>Put the fix in master:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=1de4b4e3b8ec35df71e570f058c8d7726752e872</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2552085</commentid>
    <comment_count>8</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2015-04-27 05:45:42 -0400</bug_when>
    <thetext>Verified for 4.5M7 using I20150421-0800 build.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>251994</attachid>
            <date>2015-03-30 08:11:00 -0400</date>
            <delta_ts>2015-03-31 02:55:17 -0400</delta_ts>
            <desc>Proposed fix</desc>
            <filename>Bug-462756.patch</filename>
            <type>text/plain</type>
            <size>4240</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL0RlbHRhUHJvY2Vzc29yLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9t
b2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9EZWx0YVByb2Nlc3Nvci5qYXZhCmlu
ZGV4IGM3N2JlMjUuLjZlY2M4OTQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21v
ZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0RlbHRhUHJvY2Vzc29yLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvRGVsdGFQcm9jZXNzb3IuamF2YQpAQCAtMSw0ICsxLDQgQEAKIC8qKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBv
dGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTUgSUJNIENvcnBvcmF0aW9uIGFuZCBv
dGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2Nv
bXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKQEAgLTI5LDUgKzI5LDQgQEAKIGlt
cG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJlc291cmNlcy5JV29ya3NwYWNlOwogaW1wb3J0IG9yZy5l
Y2xpcHNlLmNvcmUucmVzb3VyY2VzLklXb3Jrc3BhY2VSb290OwotaW1wb3J0IG9yZy5lY2xpcHNl
LmNvcmUucmVzb3VyY2VzLklXb3Jrc3BhY2VSdW5uYWJsZTsKIGltcG9ydCBvcmcuZWNsaXBzZS5j
b3JlLnJlc291cmNlcy5SZXNvdXJjZXNQbHVnaW47CiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5y
ZXNvdXJjZXMuV29ya3NwYWNlSm9iOwpAQCAtODQxLDIxICs4NDAsNSBAQAogCQkJCQkJLy8JIHNv
IHRoYXQgdGhlcmUgaXMgbm8gY29uY3VycmVuY3kgd2l0aCB0aGUgSmF2YSBidWlsZGVyCiAJCQkJ
CQkvLyBzZWUgaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTk2
NTc1Ci0JCQkJCQlJV29ya3NwYWNlUnVubmFibGUgcnVubmFibGUgPSBuZXcgSVdvcmtzcGFjZVJ1
bm5hYmxlKCkgewotCQkJCQkJCXB1YmxpYyB2b2lkIHJ1bihJUHJvZ3Jlc3NNb25pdG9yIHByb2dy
ZXNzTW9uaXRvcikgdGhyb3dzIENvcmVFeGNlcHRpb24gewotCQkJCQkJCQlmb3IgKGludCBpID0g
MDsgaSA8IHByb2plY3RzVG9Ub3VjaC5sZW5ndGg7IGkrKykgewotCQkJCQkJCQkJSVByb2plY3Qg
cHJvamVjdCA9IHByb2plY3RzVG9Ub3VjaFtpXTsKLQotCQkJCQkJCQkJLy8gdG91Y2ggdG8gZm9y
Y2UgYSBidWlsZCBvZiB0aGlzIHByb2plY3QKLQkJCQkJCQkJCWlmIChKYXZhQnVpbGRlci5ERUJV
RykKLQkJCQkJCQkJCQlTeXN0ZW0ub3V0LnByaW50bG4oIlRvdWNoaW5nIHByb2plY3QgIiArIHBy
b2plY3QuZ2V0TmFtZSgpICsgIiBkdWUgdG8gZXh0ZXJuYWwgamFyIGZpbGUgY2hhbmdlIik7IC8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAotCQkJCQkJCQkJcHJvamVjdC50b3VjaChwcm9ncmVz
c01vbml0b3IpOwotCQkJCQkJCQl9Ci0JCQkJCQkJfQotCQkJCQkJfTsKLQkJCQkJCXRyeSB7Ci0J
CQkJCQkJUmVzb3VyY2VzUGx1Z2luLmdldFdvcmtzcGFjZSgpLnJ1bihydW5uYWJsZSwgbW9uaXRv
cik7Ci0JCQkJCQl9IGNhdGNoIChDb3JlRXhjZXB0aW9uIGUpIHsKLQkJCQkJCQl0aHJvdyBuZXcg
SmF2YU1vZGVsRXhjZXB0aW9uKGUpOwotCQkJCQkJfQorCQkJCQkJdGhpcy5tYW5hZ2VyLnRvdWNo
UHJvamVjdHMocHJvamVjdHNUb1RvdWNoLCBtb25pdG9yKTsKIAkJCQkJfQogCQkJCX0KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL0phdmFNb2RlbE1hbmFnZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVs
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0phdmFNb2RlbE1hbmFnZXIuamF2YQppbmRl
eCBkNzMwNmU3Li4yMzg3YTE4IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2Rl
bC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhTW9kZWxNYW5hZ2VyLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvSmF2YU1vZGVsTWFuYWdlci5qYXZhCkBAIC0xNTIzLDE3ICsxNTIzLDE0IEBACiAJCQkJCUph
dmFNb2RlbE1hbmFnZXIgbWFuYWdlciA9IEphdmFNb2RlbE1hbmFnZXIuZ2V0SmF2YU1vZGVsTWFu
YWdlcigpOwogCQkJCQlJSmF2YU1vZGVsIG1vZGVsID0gbWFuYWdlci5nZXRKYXZhTW9kZWwoKTsK
LQkJCQkJSUphdmFQcm9qZWN0W10gcHJvamVjdHM7CisJCQkJCUlKYXZhUHJvamVjdFtdIGpQcm9q
ZWN0czsKIAkJCQkJdHJ5IHsKLQkJCQkJCXByb2plY3RzID0gbW9kZWwuZ2V0SmF2YVByb2plY3Rz
KCk7Ci0JCQkJCQlmb3IgKGludCBpID0gMCwgcGwgPSBwcm9qZWN0cy5sZW5ndGg7IGkgPCBwbDsg
aSsrKSB7Ci0JCQkJCQkJSmF2YVByb2plY3QgamF2YVByb2plY3QgPSAoSmF2YVByb2plY3QpIHBy
b2plY3RzW2ldOworCQkJCQkJalByb2plY3RzID0gbW9kZWwuZ2V0SmF2YVByb2plY3RzKCk7CisJ
CQkJCQlJUHJvamVjdFtdIHByb2plY3RzID0gbmV3IElQcm9qZWN0W2pQcm9qZWN0cy5sZW5ndGhd
OworCQkJCQkJZm9yIChpbnQgaSA9IDAsIHBsID0galByb2plY3RzLmxlbmd0aDsgaSA8IHBsOyBp
KyspIHsKKwkJCQkJCQlKYXZhUHJvamVjdCBqYXZhUHJvamVjdCA9IChKYXZhUHJvamVjdCkgalBy
b2plY3RzW2ldOworCQkJCQkJCXByb2plY3RzW2ldID0gamF2YVByb2plY3QuZ2V0UHJvamVjdCgp
OwogCQkJCQkJCW1hbmFnZXIuZGVsdGFTdGF0ZS5hZGRDbGFzc3BhdGhWYWxpZGF0aW9uKGphdmFQ
cm9qZWN0KTsKLQkJCQkJCQl0cnkgewotCQkJCQkJCQkvLyBuZWVkIHRvIHRvdWNoIHRoZSBwcm9q
ZWN0IHRvIGZvcmNlIHZhbGlkYXRpb24gYnkgRGVsdGFQcm9jZXNzb3IKLQkJCQkJICAgICAgICAg
ICAgamF2YVByb2plY3QuZ2V0UHJvamVjdCgpLnRvdWNoKG51bGwpOwotCQkJCQkgICAgICAgIH0g
Y2F0Y2ggKENvcmVFeGNlcHRpb24gZSkgewotCQkJCQkgICAgICAgICAgICAvLyBza2lwCi0JCQkJ
CSAgICAgICAgfQogCQkJCQkJfQorCQkJCQkJbWFuYWdlci50b3VjaFByb2plY3RzKHByb2plY3Rz
LCBudWxsKTsKIAkJCQkJfSBjYXRjaCAoSmF2YU1vZGVsRXhjZXB0aW9uIGUpIHsKIAkJCQkJCS8v
IHNraXAKQEAgLTMwNjIsNCArMzA1OSwyNCBAQAogCX0KIAorCXZvaWQgdG91Y2hQcm9qZWN0cyhm
aW5hbCBJUHJvamVjdFtdIHByb2plY3RzVG9Ub3VjaCwgSVByb2dyZXNzTW9uaXRvciBtb25pdG9y
KSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKworCQlJV29ya3NwYWNlUnVubmFibGUgcnVu
bmFibGUgPSBuZXcgSVdvcmtzcGFjZVJ1bm5hYmxlKCkgeworCQkJcHVibGljIHZvaWQgcnVuKElQ
cm9ncmVzc01vbml0b3IgcHJvZ3Jlc3NNb25pdG9yKSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiB7CisJ
CQkJZm9yIChpbnQgaSA9IDA7IGkgPCBwcm9qZWN0c1RvVG91Y2gubGVuZ3RoOyBpKyspIHsKKwkJ
CQkJSVByb2plY3QgcHJvamVjdCA9IHByb2plY3RzVG9Ub3VjaFtpXS5nZXRQcm9qZWN0KCk7CisJ
CQkJCS8vIHRvdWNoIHRvIGZvcmNlIGEgYnVpbGQgb2YgdGhpcyBwcm9qZWN0CisJCQkJCWlmIChK
YXZhQnVpbGRlci5ERUJVRykKKwkJCQkJCVN5c3RlbS5vdXQucHJpbnRsbigiVG91Y2hpbmcgcHJv
amVjdCAiICsgcHJvamVjdC5nZXROYW1lKCkpOyAvLyROT04tTkxTLTEkCisJCQkJCXByb2plY3Qu
dG91Y2gocHJvZ3Jlc3NNb25pdG9yKTsKKwkJCQl9CisJCQl9CisJCX07CisJCXRyeSB7CisJCQlS
ZXNvdXJjZXNQbHVnaW4uZ2V0V29ya3NwYWNlKCkucnVuKHJ1bm5hYmxlLCBtb25pdG9yKTsKKwkJ
fSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7CisJCQl0aHJvdyBuZXcgSmF2YU1vZGVsRXhjZXB0
aW9uKGUpOworCQl9CisJfQorCiAJcHJpdmF0ZSBIYXNoU2V0IGdldENsYXNzcGF0aEJlaW5nUmVz
b2x2ZWQoKSB7CiAJICAgIEhhc2hTZXQgcmVzdWx0ID0gKEhhc2hTZXQpIHRoaXMuY2xhc3NwYXRo
c0JlaW5nUmVzb2x2ZWQuZ2V0KCk7Cg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>252020</attachid>
            <date>2015-03-31 02:55:00 -0400</date>
            <delta_ts>2015-03-31 02:55:17 -0400</delta_ts>
            <desc>Updated patch with test</desc>
            <filename>Bug-462756.patch</filename>
            <type>text/plain</type>
            <size>11163</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhUZXN0cy5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21v
ZGVsL0NsYXNzcGF0aFRlc3RzLmphdmEKaW5kZXggNWIxNzhkYy4uOTcwYzc0ZiAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL21vZGVsL0NsYXNzcGF0aFRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVsL0Ns
YXNzcGF0aFRlc3RzLmphdmEKQEAgLTcyMTQsNSArNzIxNCw1IEBACiAJCW1hcC5wdXQoSmF2YUNv
cmUuQ09NUElMRVJfQ09ERUdFTl9UQVJHRVRfUExBVEZPUk0sIEphdmFDb3JlLlZFUlNJT05fMV8x
KTsKIAkJcHJvajEuc2V0T3B0aW9ucyhtYXApOwotCisJCXdhaXRGb3JNYW51YWxSZWZyZXNoKCk7
CiAJCWFzc2VydE1hcmtlcnMoIlVuZXhwZWN0ZWQgbWFya2VycyIsCiAJCQkJIkluY29tcGF0aWJs
ZSAuY2xhc3MgZmlsZXMgdmVyc2lvbiBpbiByZXF1aXJlZCBiaW5hcmllcy4gUHJvamVjdCBcJ1Ax
XCcgaXMgdGFyZ2V0aW5nIGEgMS4xIHJ1bnRpbWUsIGJ1dCBpcyBjb21waWxlZCBhZ2FpbnN0IFwn
UDEvYWJjLmphclwnIHdoaWNoIHJlcXVpcmVzIGEgMS40IHJ1bnRpbWUiLCBwcm9qMSk7CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvbW9kZWwvSmF2YVByb2plY3RUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVs
L0phdmFQcm9qZWN0VGVzdHMuamF2YQppbmRleCBjYjExMTRkLi42OGJiZmI3IDEwMDY0NAotLS0g
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2Nv
cmUvdGVzdHMvbW9kZWwvSmF2YVByb2plY3RUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9K
YXZhUHJvamVjdFRlc3RzLmphdmEKQEAgLTEsNCArMSw0IEBACiAvKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE1IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21w
YW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCkBAIC0xMiw3ICsxMiwxMCBAQAogcGFj
a2FnZSBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbDsKIAoraW1wb3J0IGphdmEuaW8u
QnVmZmVyZWRXcml0ZXI7CiBpbXBvcnQgamF2YS5pby5GaWxlOwogaW1wb3J0IGphdmEuaW8uRmls
ZU91dHB1dFN0cmVhbTsKK2ltcG9ydCBqYXZhLmlvLkZpbGVXcml0ZXI7CiBpbXBvcnQgamF2YS5p
by5JT0V4Y2VwdGlvbjsKK2ltcG9ydCBqYXZhLnV0aWwuSGFzaHRhYmxlOwogaW1wb3J0IGphdmEu
dXRpbC56aXAuWmlwRW50cnk7CiBpbXBvcnQgamF2YS51dGlsLnppcC5aaXBPdXRwdXRTdHJlYW07
CkBAIC0yMSw4ICsyNCwxMSBAQAogaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0U3VpdGU7CiAK
K2ltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLmludGVybmFsLnJ1bnRpbWUuUnVudGltZUxvZzsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJlc291cmNlcy4qOwogaW1wb3J0IG9yZy5lY2xpcHNlLmNv
cmUucnVudGltZS5Db3JlRXhjZXB0aW9uOworaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGlt
ZS5JTG9nTGlzdGVuZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLklQYXRoOwog
aW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5JUHJvZ3Jlc3NNb25pdG9yOworaW1wb3J0
IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5JU3RhdHVzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmNv
cmUucnVudGltZS5QYXRoOwogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5wcmVmZXJl
bmNlcy5JRWNsaXBzZVByZWZlcmVuY2VzOwpAQCAtMjU4NywzICsyNTkzLDQ2IEBACiAJfQogfQor
LyoqCisgKiBUZXN0IHRoYXQgY29uZmxpY3RpbmcgcnVsZXMgYmV0d2VlbiByZWZyZXNoTG9jYWwg
YW5kIElQcm9qZWN0LnRvdWNoKCkgaW52b2tlZCBieQorICogSkRUIGRvbid0IGNhdXNlIGFuIElB
RS4KKyAqIAorICogQHNlZSAiaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTQ2Mjc1NiIKKyAqLworQFN1cHByZXNzV2FybmluZ3MoInJhd3R5cGVzIikKK3B1Ymxp
YyB2b2lkIHRlc3RCdWc0NjI3NTYoKSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiB7CisJSGFzaHRhYmxl
IGphdmFDb3JlT3B0aW9ucyA9IEphdmFDb3JlLmdldE9wdGlvbnMoKTsKKwl0cnkgeworCQlJSmF2
YVByb2plY3QgcHJvaiA9IHRoaXMuY3JlYXRlSmF2YVByb2plY3QoIlAiLCBuZXcgU3RyaW5nW10g
eyJzcmMifSwgbmV3IFN0cmluZ1tde30sICJiaW4iKTsKKwkJcHJvai5nZXRQcm9qZWN0KCkub3Bl
bihudWxsKTsKKwkJY3JlYXRlRm9sZGVyKCIvUC8uc2V0dGluZ3MiKTsKKwkJU3RyaW5nIGNvbnRl
bnQgPSAib3JnLmVjbGlwc2UuamR0LmNvcmUuY29tcGlsZXIuY29kZWdlbi50YXJnZXRQbGF0Zm9y
bT0xLjdcbiIgKworCQkJCSJvcmcuZWNsaXBzZS5qZHQuY29yZS5jb21waWxlci5jb21wbGlhbmNl
PTEuN1xuIiArCisJCQkJIm9yZy5lY2xpcHNlLmpkdC5jb3JlLmNvbXBpbGVyLnNvdXJjZT0xLjdc
biI7CisKKwkJSUZpbGUgZmlsZSA9IGdldEZpbGUoIi9QLy5zZXR0aW5ncy9vcmcuZWNsaXBzZS5q
ZHQuY29yZS5wcmVmcyIpOworCQl0cnkgKEJ1ZmZlcmVkV3JpdGVyIG91dHB1dCA9IG5ldyBCdWZm
ZXJlZFdyaXRlcihuZXcgRmlsZVdyaXRlcihmaWxlLmdldExvY2F0aW9uKCkudG9GaWxlKCkpKSkg
eworCQkJb3V0cHV0LndyaXRlKGNvbnRlbnQpOworCQkJb3V0cHV0LmZsdXNoKCk7CisJCX0gY2F0
Y2goRXhjZXB0aW9uIGUpIHsKKwkJfQorCQlmaW5hbCBTdHJpbmdCdWZmZXIgYnVmZmVyID0gbmV3
IFN0cmluZ0J1ZmZlcigpOworCQlSdW50aW1lTG9nLmFkZExvZ0xpc3RlbmVyKG5ldyBJTG9nTGlz
dGVuZXIoKSB7CisJCQlAT3ZlcnJpZGUKKwkJCXB1YmxpYyB2b2lkIGxvZ2dpbmcoSVN0YXR1cyBz
dGF0dXMsIFN0cmluZyBwbHVnaW4pIHsKKwkJCQlpZiAoc3RhdHVzLmdldFNldmVyaXR5KCkgPT0g
SVN0YXR1cy5FUlJPUiAmJiBzdGF0dXMudG9TdHJpbmcoKS5jb250YWlucygiamF2YS5sYW5nLkls
bGVnYWxBcmd1bWVudEV4Y2VwdGlvbiIpKSB7CisJCQkJCWJ1ZmZlci5hcHBlbmQoIlNob3VsZCBu
b3QgdGhyb3cgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIik7CisJCQkJfQorCQkJfQorCQl9KTsK
KwkJcHJvai5nZXRQcm9qZWN0KCkucmVmcmVzaExvY2FsKElSZXNvdXJjZS5ERVBUSF9JTkZJTklU
RSwgbnVsbCk7CisJCXdhaXRGb3JNYW51YWxSZWZyZXNoKCk7CisJCWlmIChidWZmZXIubGVuZ3Ro
KCkgPiAwKSB7CisJCQlmYWlsKGJ1ZmZlci50b1N0cmluZygpKTsKKwkJfQorCQlhc3NlcnRFcXVh
bHMoIkNvbXBsaWFuY2Ugc2hvdWxkIGJlIHVwZGF0ZWQiLCAiMS43IiwgcHJvai5nZXRPcHRpb24o
Im9yZy5lY2xpcHNlLmpkdC5jb3JlLmNvbXBpbGVyLmNvbXBsaWFuY2UiLCB0cnVlKSk7CisJfSBm
aW5hbGx5IHsKKwkJIHRoaXMuZGVsZXRlUHJvamVjdCgiUCIpOworCQkgSmF2YUNvcmUuc2V0T3B0
aW9ucyhqYXZhQ29yZU9wdGlvbnMpOworCX0KK30KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0RlbHRhUHJvY2Vz
c29yLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29yZS9EZWx0YVByb2Nlc3Nvci5qYXZhCmluZGV4IGM3N2JlMjUuLjlkOTEyYWQgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb3JlL0RlbHRhUHJvY2Vzc29yLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUv
bW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvRGVsdGFQcm9jZXNzb3IuamF2YQpA
QCAtMSw0ICsxLDQgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTUgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJl
c2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBh
cmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBM
aWNlbnNlIHYxLjAKQEAgLTMxLDUgKzMxLDQgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJl
c291cmNlcy5JV29ya3NwYWNlUnVubmFibGU7CiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5yZXNv
dXJjZXMuUmVzb3VyY2VzUGx1Z2luOwotaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucmVzb3VyY2Vz
LldvcmtzcGFjZUpvYjsKIGltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUuKjsKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuY29yZS4qOwpAQCAtNDIsNSArNDEsNCBAQAogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnNlYXJjaC5KYXZhV29ya3NwYWNlU2NvcGU7CiBpbXBv
cnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUuc2VhcmNoLmluZGV4aW5nLkluZGV4TWFu
YWdlcjsKLWltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29yZS51dGlsLk1lc3NhZ2Vz
OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwuVXRpbDsKIApAQCAt
ODE2LDI0ICs4MTQsNSBAQAogCQkJCWlmIChwcm9qZWN0c1RvVG91Y2gubGVuZ3RoID4gMCkgewog
CQkJCQlpZiAoYXN5bmNocm9ub3VzKXsKLQkJCQkJCVdvcmtzcGFjZUpvYiB0b3VjaEpvYiA9IG5l
dyBXb3Jrc3BhY2VKb2IoTWVzc2FnZXMudXBkYXRpbmdfZXh0ZXJuYWxfYXJjaGl2ZXNfam9iTmFt
ZSkgewotCQkJCQkJCQotCQkJCQkJCXB1YmxpYyBJU3RhdHVzIHJ1bkluV29ya3NwYWNlKElQcm9n
cmVzc01vbml0b3IgcHJvZ3Jlc3NNb25pdG9yKSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiB7Ci0JCQkJ
CQkJCXRyeSB7Ci0JCQkJCQkJCQlpZiAocHJvZ3Jlc3NNb25pdG9yICE9IG51bGwpCi0JCQkJCQkJ
CQkJcHJvZ3Jlc3NNb25pdG9yLmJlZ2luVGFzaygiIiwgcHJvamVjdHNUb1RvdWNoLmxlbmd0aCk7
IC8vJE5PTi1OTFMtMSQKLQkJCQkJCQkJCXRvdWNoUHJvamVjdHMocHJvamVjdHNUb1RvdWNoLCBw
cm9ncmVzc01vbml0b3IpOwotCQkJCQkJCQl9Ci0JCQkJCQkJCWZpbmFsbHkgewotCQkJCQkJCQkJ
aWYgKHByb2dyZXNzTW9uaXRvciAhPSBudWxsKQotCQkJCQkJCQkJCXByb2dyZXNzTW9uaXRvci5k
b25lKCk7Ci0JCQkJCQkJCX0KLQkJCQkJCQkJcmV0dXJuIFN0YXR1cy5PS19TVEFUVVM7Ci0JCQkJ
CQkJfQotCQkJCQkJCQotCQkJCQkJCXB1YmxpYyBib29sZWFuIGJlbG9uZ3NUbyhPYmplY3QgZmFt
aWx5KSB7Ci0JCQkJCQkJCXJldHVybiBSZXNvdXJjZXNQbHVnaW4uRkFNSUxZX01BTlVBTF9SRUZS
RVNIID09IGZhbWlseTsKLQkJCQkJCQl9Ci0JCQkJCQl9OwotCQkJCQkJdG91Y2hKb2Iuc2NoZWR1
bGUoKTsKKwkJCQkJCXRoaXMubWFuYWdlci50b3VjaFByb2plY3RzKHByb2plY3RzVG9Ub3VjaCwg
bW9uaXRvcik7CiAJCQkJCX0KIAkJCQkJZWxzZSB7CkBAIC04NzEsMTYgKzg1MCw0IEBACiAJCQl0
aGlzLmN1cnJlbnREZWx0YSA9IG51bGw7CiAJCQlpZiAobW9uaXRvciAhPSBudWxsKSBtb25pdG9y
LmRvbmUoKTsKLQkJfQotCX0KLQotCXByb3RlY3RlZCB2b2lkIHRvdWNoUHJvamVjdHMoZmluYWwg
SVByb2plY3RbXSBwcm9qZWN0c1RvVG91Y2gsIElQcm9ncmVzc01vbml0b3IgcHJvZ3Jlc3NNb25p
dG9yKQotCQkJdGhyb3dzIENvcmVFeGNlcHRpb24gewotCQlmb3IgKGludCBpID0gMDsgaSA8IHBy
b2plY3RzVG9Ub3VjaC5sZW5ndGg7IGkrKykgewotCQkJSVByb2dyZXNzTW9uaXRvciBtb25pdG9y
ID0gcHJvZ3Jlc3NNb25pdG9yID09IG51bGwgPyBudWxsOiBuZXcgU3ViUHJvZ3Jlc3NNb25pdG9y
KHByb2dyZXNzTW9uaXRvciwgMSk7Ci0JCQlJUHJvamVjdCBwcm9qZWN0ID0gcHJvamVjdHNUb1Rv
dWNoW2ldOwotCQkJLy8gdG91Y2ggdG8gZm9yY2UgYSBidWlsZCBvZiB0aGlzIHByb2plY3QKLQkJ
CWlmIChKYXZhQnVpbGRlci5ERUJVRykKLQkJCQlTeXN0ZW0ub3V0LnByaW50bG4oIlRvdWNoaW5n
IHByb2plY3QgIiArIHByb2plY3QuZ2V0TmFtZSgpICsgIiBkdWUgdG8gZXh0ZXJuYWwgamFyIGZp
bGUgY2hhbmdlIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAotCQkJcHJvamVjdC50b3Vj
aChtb25pdG9yKTsKIAkJfQogCX0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21v
ZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0phdmFNb2RlbE1hbmFnZXIuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3Jl
L0phdmFNb2RlbE1hbmFnZXIuamF2YQppbmRleCBkNzMwNmU3Li5kMDRlNGM4IDEwMDY0NAotLS0g
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29y
ZS9KYXZhTW9kZWxNYW5hZ2VyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvSmF2YU1vZGVsTWFuYWdlci5qYXZhCkBAIC0x
NTIzLDE3ICsxNTIzLDE0IEBACiAJCQkJCUphdmFNb2RlbE1hbmFnZXIgbWFuYWdlciA9IEphdmFN
b2RlbE1hbmFnZXIuZ2V0SmF2YU1vZGVsTWFuYWdlcigpOwogCQkJCQlJSmF2YU1vZGVsIG1vZGVs
ID0gbWFuYWdlci5nZXRKYXZhTW9kZWwoKTsKLQkJCQkJSUphdmFQcm9qZWN0W10gcHJvamVjdHM7
CisJCQkJCUlKYXZhUHJvamVjdFtdIGpQcm9qZWN0czsKIAkJCQkJdHJ5IHsKLQkJCQkJCXByb2pl
Y3RzID0gbW9kZWwuZ2V0SmF2YVByb2plY3RzKCk7Ci0JCQkJCQlmb3IgKGludCBpID0gMCwgcGwg
PSBwcm9qZWN0cy5sZW5ndGg7IGkgPCBwbDsgaSsrKSB7Ci0JCQkJCQkJSmF2YVByb2plY3QgamF2
YVByb2plY3QgPSAoSmF2YVByb2plY3QpIHByb2plY3RzW2ldOworCQkJCQkJalByb2plY3RzID0g
bW9kZWwuZ2V0SmF2YVByb2plY3RzKCk7CisJCQkJCQlJUHJvamVjdFtdIHByb2plY3RzID0gbmV3
IElQcm9qZWN0W2pQcm9qZWN0cy5sZW5ndGhdOworCQkJCQkJZm9yIChpbnQgaSA9IDAsIHBsID0g
alByb2plY3RzLmxlbmd0aDsgaSA8IHBsOyBpKyspIHsKKwkJCQkJCQlKYXZhUHJvamVjdCBqYXZh
UHJvamVjdCA9IChKYXZhUHJvamVjdCkgalByb2plY3RzW2ldOworCQkJCQkJCXByb2plY3RzW2ld
ID0gamF2YVByb2plY3QuZ2V0UHJvamVjdCgpOwogCQkJCQkJCW1hbmFnZXIuZGVsdGFTdGF0ZS5h
ZGRDbGFzc3BhdGhWYWxpZGF0aW9uKGphdmFQcm9qZWN0KTsKLQkJCQkJCQl0cnkgewotCQkJCQkJ
CQkvLyBuZWVkIHRvIHRvdWNoIHRoZSBwcm9qZWN0IHRvIGZvcmNlIHZhbGlkYXRpb24gYnkgRGVs
dGFQcm9jZXNzb3IKLQkJCQkJICAgICAgICAgICAgamF2YVByb2plY3QuZ2V0UHJvamVjdCgpLnRv
dWNoKG51bGwpOwotCQkJCQkgICAgICAgIH0gY2F0Y2ggKENvcmVFeGNlcHRpb24gZSkgewotCQkJ
CQkgICAgICAgICAgICAvLyBza2lwCi0JCQkJCSAgICAgICAgfQogCQkJCQkJfQorCQkJCQkJbWFu
YWdlci50b3VjaFByb2plY3RzKHByb2plY3RzLCBudWxsKTsKIAkJCQkJfSBjYXRjaCAoSmF2YU1v
ZGVsRXhjZXB0aW9uIGUpIHsKIAkJCQkJCS8vIHNraXAKQEAgLTMwNjIsNCArMzA1OSwzNCBAQAog
CX0KIAorCXZvaWQgdG91Y2hQcm9qZWN0cyhmaW5hbCBJUHJvamVjdFtdIHByb2plY3RzVG9Ub3Vj
aCwgSVByb2dyZXNzTW9uaXRvciBwcm9ncmVzc01vbml0b3IpIHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24geworCQlXb3Jrc3BhY2VKb2IgdG91Y2hKb2IgPSBuZXcgV29ya3NwYWNlSm9iKE1lc3Nh
Z2VzLnN5bmNocm9uaXppbmdfcHJvamVjdHNfam9iKSB7CisJCQlwdWJsaWMgSVN0YXR1cyBydW5J
bldvcmtzcGFjZShJUHJvZ3Jlc3NNb25pdG9yIG1vbml0b3IpIHRocm93cyBDb3JlRXhjZXB0aW9u
IHsKKwkJCQl0cnkgeworCQkJCQlpZiAobW9uaXRvciAhPSBudWxsKSB7CisJCQkJCQltb25pdG9y
LmJlZ2luVGFzaygiIiwgcHJvamVjdHNUb1RvdWNoLmxlbmd0aCk7IC8vJE5PTi1OTFMtMSQKKwkJ
CQkJfQorCQkJCQlmb3IgKElQcm9qZWN0IGlQcm9qZWN0IDogcHJvamVjdHNUb1RvdWNoKSB7CisJ
CQkJCQlJUHJvZ3Jlc3NNb25pdG9yIHN1Yk1vbml0b3IgPSBtb25pdG9yID09IG51bGwgPyBudWxs
OiBuZXcgU3ViUHJvZ3Jlc3NNb25pdG9yKG1vbml0b3IsIDEpOworCQkJCQkJaWYgKEphdmFCdWls
ZGVyLkRFQlVHKSB7CisJCQkJCQkJU3lzdGVtLm91dC5wcmludGxuKCJUb3VjaGluZyBwcm9qZWN0
ICIgKyBpUHJvamVjdC5nZXROYW1lKCkpOyAvLyROT04tTkxTLTEkCisJCQkJCQl9CisJCQkJCQlp
UHJvamVjdC50b3VjaChzdWJNb25pdG9yKTsKKwkJCQkJfQorCQkJCX0KKwkJCQlmaW5hbGx5IHsK
KwkJCQkJaWYgKG1vbml0b3IgIT0gbnVsbCkgeworCQkJCQkJbW9uaXRvci5kb25lKCk7CisJCQkJ
CX0KKwkJCQl9CisJCQkJcmV0dXJuIFN0YXR1cy5PS19TVEFUVVM7CisJCQl9CisJCQkKKwkJCXB1
YmxpYyBib29sZWFuIGJlbG9uZ3NUbyhPYmplY3QgZmFtaWx5KSB7CisJCQkJcmV0dXJuIFJlc291
cmNlc1BsdWdpbi5GQU1JTFlfTUFOVUFMX1JFRlJFU0ggPT0gZmFtaWx5OworCQkJfQorCQl9Owor
CQl0b3VjaEpvYi5zY2hlZHVsZSgpOworCX0KKwogCXByaXZhdGUgSGFzaFNldCBnZXRDbGFzc3Bh
dGhCZWluZ1Jlc29sdmVkKCkgewogCSAgICBIYXNoU2V0IHJlc3VsdCA9IChIYXNoU2V0KSB0aGlz
LmNsYXNzcGF0aHNCZWluZ1Jlc29sdmVkLmdldCgpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvdXRpbC9NZXNzYWdl
cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvcmUvdXRpbC9NZXNzYWdlcy5qYXZhCmluZGV4IDRlNTJhOWUuLmNlYjQwMmYgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL3V0aWwvTWVzc2FnZXMuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2Rl
bC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS91dGlsL01lc3NhZ2VzLmphdmEKQEAgLTEs
NCArMSw0IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAw
LCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAw
LCAyMDE1IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZl
ZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wCkBAIC0xOTMsNSArMTkzLDUgQEAKIAlwdWJsaWMgc3RhdGljIFN0cmluZyBzYXZlZFN0
YXRlX2pvYk5hbWU7CiAJcHVibGljIHN0YXRpYyBTdHJpbmcgcmVmcmVzaGluZ19leHRlcm5hbF9m
b2xkZXJzOwotCXB1YmxpYyBzdGF0aWMgU3RyaW5nIHVwZGF0aW5nX2V4dGVybmFsX2FyY2hpdmVz
X2pvYk5hbWU7CisJcHVibGljIHN0YXRpYyBTdHJpbmcgc3luY2hyb25pemluZ19wcm9qZWN0c19q
b2I7CiAJcHVibGljIHN0YXRpYyBTdHJpbmcgY29udmVudGlvbl91bml0X251bGxOYW1lOwogCXB1
YmxpYyBzdGF0aWMgU3RyaW5nIGNvbnZlbnRpb25fdW5pdF9ub3RKYXZhTmFtZTsKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b3JlL3V0aWwvbWVzc2FnZXMucHJvcGVydGllcyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVs
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL3V0aWwvbWVzc2FnZXMucHJvcGVydGllcwpp
bmRleCBkNTkwOGY4Li5iZjNjNjQ2IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9t
b2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS91dGlsL21lc3NhZ2VzLnByb3BlcnRp
ZXMKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvcmUvdXRpbC9tZXNzYWdlcy5wcm9wZXJ0aWVzCkBAIC0xOTIsNSArMTkyLDUgQEAKIHNh
dmVkU3RhdGVfam9iTmFtZSA9IFByb2Nlc3NpbmcgSmF2YSBjaGFuZ2VzIHNpbmNlIGxhc3QgYWN0
aXZhdGlvbgogcmVmcmVzaGluZ19leHRlcm5hbF9mb2xkZXJzID0gUmVmcmVzaGluZyBleHRlcm5h
bCBmb2xkZXJzCi11cGRhdGluZ19leHRlcm5hbF9hcmNoaXZlc19qb2JOYW1lID0gUmVmcmVzaGlu
ZyBleHRlcm5hbCBhcmNoaXZlcworc3luY2hyb25pemluZ19wcm9qZWN0c19qb2IgPSBTeW5jaHJv
bml6aW5nIHByb2plY3RzCiAKICMjIGphdmEgbW9kZWwgaW5pdGlhbGl6YXRpb24K
</data>

          </attachment>
      

    </bug>

</bugzilla>