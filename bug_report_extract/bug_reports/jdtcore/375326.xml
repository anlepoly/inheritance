<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>375326</bug_id>
          
          <creation_ts>2012-03-26 09:52:00 -0400</creation_ts>
          <short_desc>try-with-resources assignment in statement produces stack map exception</short_desc>
          <delta_ts>2012-04-30 13:37:28 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>To be verified for 3.7.2+</status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.6.2+J7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="David Damerell">david</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>satyam.kandula</cc>
          
          <votes>0</votes>

      

      

      <flag name="pmc_approved"
          id="49982"
          type_id="2"
          status="+"
          setter="daniel_megert"
    />
    <flag name="review"
          id="49314"
          type_id="1"
          status="+"
          setter="Olivier_Thomann"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2085751</commentid>
    <comment_count>0</comment_count>
    <who name="David Damerell">david</who>
    <bug_when>2012-03-26 09:52:10 -0400</bug_when>
    <thetext>Build Identifier: 20120322-1740

Performing an assignment in the resources section of a try-with-resources block triggers a stack map exception.

Example code:

public class EclispeTest1 {
	@Test
	public void testWithResourcesAssignment() throws Exception{
		HasAutoCloseable a;
		
		try(AutoCloseable b=(a=new HasAutoCloseable()).a){
			
		}
		
	}
	
	public class AutoCloseableA implements AutoCloseable{
		@Override
		public void close() {
			// TODO Auto-generated method stub
			
		}
	}
	
	public class HasAutoCloseable{
		AutoCloseable a=new AutoCloseableA();
	}
}

Triggers the following exception

java.lang.VerifyError: Stack map does not match the one at exception handler 49 in method EclispeTest1.testWithResourcesAssignment()V at offset 4
	at java.lang.Class.getDeclaredMethods0(Native Method)
	at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
	at java.lang.Class.getMethod0(Class.java:2685)
	at java.lang.Class.getMethod(Class.java:1620)
	at .........

Reproducible: Always</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085794</commentid>
    <comment_count>1</comment_count>
      <attachid>213183</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2012-03-26 10:44:49 -0400</bug_when>
    <thetext>Created attachment 213183
Proposed fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085795</commentid>
    <comment_count>2</comment_count>
      <attachid>213184</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2012-03-26 10:45:17 -0400</bug_when>
    <thetext>Created attachment 213184
Regression test</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085797</commentid>
    <comment_count>3</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2012-03-26 10:46:32 -0400</bug_when>
    <thetext>The problem comes from a wrong initialization range for the local &apos;a&apos;. All tests must be run with these two patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2086069</commentid>
    <comment_count>4</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-03-27 02:26:49 -0400</bug_when>
    <thetext>Marking the target</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2086107</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-27 05:31:32 -0400</bug_when>
    <thetext>Thanks for the patch Olivier, I&apos;ll take this forward for M7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087248</commentid>
    <comment_count>6</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2012-03-29 10:31:44 -0400</bug_when>
    <thetext>This is also a good candidate for a backport to 3.6.2+Java 7 and 3.7.2+.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087520</commentid>
    <comment_count>7</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-30 04:12:26 -0400</bug_when>
    <thetext>With the patch applied, I still get a verify error for this case:
// -----
public class X {
    public static void main(String [] args) throws Exception {
        HasAutoCloseable aLocal;
        try(AutoCloseable b=(aLocal=new HasAutoCloseable()).a){
        }
        catch (Throwable e) {
        	
        }
       System.out.println(aLocal.toString());
    }

    public static class AutoCloseableA implements AutoCloseable{
        @Override
        public void close() {
        }
    }

    public static class HasAutoCloseable{
        AutoCloseable a=new AutoCloseableA();
    }
}
//--------------

[i.e add a catch block for Throwable/Exception].

JDK7 rejects the program at the sysout call saying aLocal may
not have been initialized - Under investigation,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2088677</commentid>
    <comment_count>8</comment_count>
      <attachid>213483</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-03 05:34:46 -0400</bug_when>
    <thetext>Created attachment 213483
Proposed patch

Improved patch with several more tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2088679</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-03 05:36:24 -0400</bug_when>
    <thetext>Olivier, please look through this patch - I have removed a few copy() calls,
this needs close scrutiny. Let me know if you see something amiss.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089277</commentid>
    <comment_count>10</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-03 21:05:28 -0400</bug_when>
    <thetext>Fix and tests released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=30bcd436389796ede9b25cfba962b4a18b7675bd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089278</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-03 21:06:41 -0400</bug_when>
    <thetext>Satyam, please verify this fix, thanks. After your verification
and Olivier&apos;s review, we will backport this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089508</commentid>
    <comment_count>12</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2012-04-04 08:56:11 -0400</bug_when>
    <thetext>Looks good to me.
This should also be backported to 3.6.2 + Java 7 and 3.7.2+.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089934</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-04 22:25:35 -0400</bug_when>
    <thetext>(In reply to comment #12)
&gt; Looks good to me.
&gt; This should also be backported to 3.6.2 + Java 7 and 3.7.2+.

I agree. This fixes two related but distinct problems in local variable
ranges that result in verify errors.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089980</commentid>
    <comment_count>14</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-04-05 02:12:48 -0400</bug_when>
    <thetext>I did some verification and it is good. While trying to understand the code, the name preTryBodyFlowInfo mislead me for some time. tryInfo should have been a better name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2089984</commentid>
    <comment_count>15</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-05 02:22:04 -0400</bug_when>
    <thetext>(In reply to comment #14)
&gt; I did some verification and it is good. While trying to understand the code,
&gt; the name preTryBodyFlowInfo mislead me for some time. tryInfo should have been
&gt; a better name.

I avoided using tryInfo because that name is already in use further down 
below - but it now appears this same variable&apos;s definition can be &quot;pulled up&quot;
thereby eliminating the need for a need for a new variable.

I am running the tests now, if all is well, I can get rid of the new variable
resulting in the readability improvement Satyam alludes to. Thanks Satyam.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2090011</commentid>
    <comment_count>16</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-04-05 03:47:43 -0400</bug_when>
    <thetext>Review comments incorporated and released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=c4beaedd10d4a8f9b9c00524348c70568b6af6c6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2090174</commentid>
    <comment_count>17</comment_count>
      <attachid>213483</attachid>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2012-04-05 09:10:35 -0400</bug_when>
    <thetext>Comment on attachment 213483
Proposed patch

+1 for backporting this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2093102</commentid>
    <comment_count>18</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-04-13 03:21:12 -0400</bug_when>
    <thetext>Reopened to back port</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2093103</commentid>
    <comment_count>19</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-04-13 03:22:30 -0400</bug_when>
    <thetext>Released the patch on 3.7 Maintenance via commit 4b72a5119d4991cdcb9bab25a12364378bf514cd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2093204</commentid>
    <comment_count>20</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-04-13 08:02:24 -0400</bug_when>
    <thetext>Released the patch on 3.6.2+J7 via commit 30e1e08b39a385e23b3e9bbd84695d496e330188</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2100667</commentid>
    <comment_count>21</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-04-30 13:37:28 -0400</bug_when>
    <thetext>Verified for 3.8M7 using build I20120429-1800.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>213183</attachid>
            <date>2012-03-26 10:44:00 -0400</date>
            <delta_ts>2012-04-03 05:34:46 -0400</delta_ts>
            <desc>Proposed fix</desc>
            <filename>patch_375326.txt</filename>
            <type>text/plain</type>
            <size>1024</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9hc3QvVHJ5U3RhdGVtZW50LmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1Ry
eVN0YXRlbWVudC5qYXZhCmluZGV4IDM4ZGVlOGUuLmJkNGQ1MTQgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9hc3QvVHJ5U3RhdGVtZW50LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9UcnlTdGF0ZW1lbnQuamF2
YQpAQCAtNTQwLDYgKzU0MCwxMCBAQAogCQkJCQkvLyBpIGlzIG9mZiBieSBvbmUKIAkJCQkJY29k
ZVN0cmVhbS5yZW1vdmVOb3REZWZpbml0ZWx5QXNzaWduZWRWYXJpYWJsZXMoY3VycmVudFNjb3Bl
LCB0aGlzLnBvc3RSZXNvdXJjZXNJbml0U3RhdGVJbmRleGVzW2kgLSAxXSk7CiAJCQkJCWNvZGVT
dHJlYW0uYWRkRGVmaW5pdGVseUFzc2lnbmVkVmFyaWFibGVzKGN1cnJlbnRTY29wZSwgdGhpcy5w
b3N0UmVzb3VyY2VzSW5pdFN0YXRlSW5kZXhlc1tpIC0gMV0pOworCQkJCX0gZWxzZSB7CisJCQkJ
CS8vIEZvciB0aGUgZmlyc3QgcmVzb3VyY2UsIGl0cyBwcmVzZXQgc3RhdGUgaXMgdGhlIHByZVRy
eUluaXRTdGF0ZUluZGV4CisJCQkJCWNvZGVTdHJlYW0ucmVtb3ZlTm90RGVmaW5pdGVseUFzc2ln
bmVkVmFyaWFibGVzKGN1cnJlbnRTY29wZSwgdGhpcy5wcmVUcnlJbml0U3RhdGVJbmRleCk7CisJ
CQkJCWNvZGVTdHJlYW0uYWRkRGVmaW5pdGVseUFzc2lnbmVkVmFyaWFibGVzKGN1cnJlbnRTY29w
ZSwgdGhpcy5wcmVUcnlJbml0U3RhdGVJbmRleCk7CiAJCQkJfQogCiAJCQkJY29kZVN0cmVhbS5w
dXNoRXhjZXB0aW9uT25TdGFjayh0aGlzLnNjb3BlLmdldEphdmFMYW5nVGhyb3dhYmxlKCkpOw==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>213184</attachid>
            <date>2012-03-26 10:45:00 -0400</date>
            <delta_ts>2012-04-03 05:34:46 -0400</delta_ts>
            <desc>Regression test</desc>
            <filename>patch_375326_tests.txt</filename>
            <type>text/plain</type>
            <size>1748</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL1RyeVdpdGhSZXNvdXJj
ZXNTdGF0ZW1lbnRUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxl
ci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9UcnlX
aXRoUmVzb3VyY2VzU3RhdGVtZW50VGVzdC5qYXZhCmluZGV4IDI1MWMwZGEuLjYyZjI3MjIgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL1RyeVdpdGhSZXNvdXJjZXNT
dGF0ZW1lbnRUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vVHJ5
V2l0aFJlc291cmNlc1N0YXRlbWVudFRlc3QuamF2YQpAQCAtMzgxMyw2ICszODEzLDM0IEBACiAJ
CSJDbG9zZVxuIiArIAogCQkiRmluYWxseSIpOwogfQorLy9odHRwczovL2J1Z3MuZWNsaXBzZS5v
cmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzc1MzI2CitwdWJsaWMgdm9pZCB0ZXN0Mzc1MzI2KCkg
eworCXRoaXMucnVuQ29uZm9ybVRlc3QoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwK
KwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsgCisJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWlu
KFN0cmluZ1tdIGFyZ3MpIHRocm93cyBFeGNlcHRpb24ge1xuIiArIAorCQkJIgkJSGFzQXV0b0Ns
b3NlYWJsZSBhO1xuIiArIAorCQkJIgkJdHJ5KEF1dG9DbG9zZWFibGUgYj0oYT1uZXcgSGFzQXV0
b0Nsb3NlYWJsZSgpKS5hKSB7XG4iICsgCisJCQkiCQl9XG4iICsgCisJCQkiCQlTeXN0ZW0ub3V0
LnByaW50bG4oYSk7XG4iICsgCisJCQkiCX1cbiIgKworCQkJIglwdWJsaWMgc3RhdGljIGNsYXNz
IEF1dG9DbG9zZWFibGVBIGltcGxlbWVudHMgQXV0b0Nsb3NlYWJsZSB7XG4iICsgCisJCQkiCQlA
T3ZlcnJpZGVcbiIgKyAKKwkJCSIJCXB1YmxpYyB2b2lkIGNsb3NlKCkge1xuIiArIAorCQkJIgkJ
CS8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgbWV0aG9kIHN0dWJcbiIgKyAKKwkJCSIJCX1cbiIgKyAK
KwkJCSIJfVxuIiArIAorCQkJIglwdWJsaWMgc3RhdGljIGNsYXNzIEhhc0F1dG9DbG9zZWFibGUg
e1xuIiArIAorCQkJIgkJQXV0b0Nsb3NlYWJsZSBhID0gbmV3IEF1dG9DbG9zZWFibGVBKCk7XG4i
ICsgCisJCQkiCQlwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkge1xuIiArIAorCQkJIgkJCXJldHVy
biBcIlNVQ0NFU1NcIjtcbiIgKyAKKwkJCSIJCX1cbiIgKyAKKwkJCSIJfVxuIiArIAorCQkJIn0i
IAorCQl9LAorCQkiU1VDQ0VTUyIpOworfQogcHVibGljIHN0YXRpYyBDbGFzcyB0ZXN0Q2xhc3Mo
KSB7CiAJcmV0dXJuIFRyeVdpdGhSZXNvdXJjZXNTdGF0ZW1lbnRUZXN0LmNsYXNzOwogfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvdGVzdC5kYXQgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci90ZXN0LmRhdApuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwLi5lNjlkZTI5Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvdGVzdC5kYXQ=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>213483</attachid>
            <date>2012-04-03 05:34:00 -0400</date>
            <delta_ts>2012-04-05 09:10:35 -0400</delta_ts>
            <desc>Proposed patch</desc>
            <filename>patch.txt</filename>
            <type>text/plain</type>
            <size>14381</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL1RyeVdpdGhSZXNvdXJj
ZXNTdGF0ZW1lbnRUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxl
ci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9UcnlX
aXRoUmVzb3VyY2VzU3RhdGVtZW50VGVzdC5qYXZhCmluZGV4IDI1MWMwZGEuLmU2MDYxNTAgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL1RyeVdpdGhSZXNvdXJjZXNT
dGF0ZW1lbnRUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vVHJ5
V2l0aFJlc291cmNlc1N0YXRlbWVudFRlc3QuamF2YQpAQCAtMzgxMyw2ICszODEzLDI3MSBAQAog
CQkiQ2xvc2VcbiIgKyAKIAkJIkZpbmFsbHkiKTsKIH0KKy8vIGh0dHBzOi8vYnVncy5lY2xpcHNl
Lm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zNzUzMjYKK3B1YmxpYyB2b2lkIHRlc3QzNzUzMjYo
KSB7CisJdGhpcy5ydW5Db25mb3JtVGVzdCgKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEi
LAorCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKyAKKwkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1h
aW4oU3RyaW5nW10gYXJncykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4iICsgCisJCQkiCQlIYXNBdXRv
Q2xvc2VhYmxlIGE7XG4iICsgCisJCQkiCQl0cnkoQXV0b0Nsb3NlYWJsZSBiPShhPW5ldyBIYXNB
dXRvQ2xvc2VhYmxlKCkpLmEpIHtcbiIgKyAKKwkJCSIJCX1cbiIgKyAKKwkJCSIJCVN5c3RlbS5v
dXQucHJpbnRsbihhKTtcbiIgKyAKKwkJCSIJfVxuIiArCisJCQkiCXB1YmxpYyBzdGF0aWMgY2xh
c3MgQXV0b0Nsb3NlYWJsZUEgaW1wbGVtZW50cyBBdXRvQ2xvc2VhYmxlIHtcbiIgKyAKKwkJCSIJ
CUBPdmVycmlkZVxuIiArIAorCQkJIgkJcHVibGljIHZvaWQgY2xvc2UoKSB7XG4iICsgCisJCQki
CQkJLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBtZXRob2Qgc3R1YlxuIiArIAorCQkJIgkJfVxuIiAr
IAorCQkJIgl9XG4iICsgCisJCQkiCXB1YmxpYyBzdGF0aWMgY2xhc3MgSGFzQXV0b0Nsb3NlYWJs
ZSB7XG4iICsgCisJCQkiCQlBdXRvQ2xvc2VhYmxlIGEgPSBuZXcgQXV0b0Nsb3NlYWJsZUEoKTtc
biIgKyAKKwkJCSIJCXB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7XG4iICsgCisJCQkiCQkJcmV0
dXJuIFwiU1VDQ0VTU1wiO1xuIiArIAorCQkJIgkJfVxuIiArIAorCQkJIgl9XG4iICsgCisJCQki
fSIgCisJCX0sCisJCSJTVUNDRVNTIik7Cit9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcv
YnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzc1MzI2CitwdWJsaWMgdm9pZCB0ZXN0Mzc1MzI2YSgpIHsK
Kwl0aGlzLnJ1bk5lZ2F0aXZlVGVzdCgKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEiLAor
CQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFp
bihTdHJpbmcgW10gYXJncykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4iICsKKwkJCSIgICAgICAgIEhh
c0F1dG9DbG9zZWFibGUgYUxvY2FsO1xuIiArCisJCQkiICAgICAgICB0cnkoQXV0b0Nsb3NlYWJs
ZSBiPShuZXcgSGFzQXV0b0Nsb3NlYWJsZSgpKS5hKXtcbiIgKworCQkJIiAgICAgICAgCWFMb2Nh
bCA9IG5ldyBIYXNBdXRvQ2xvc2VhYmxlKCk7XG4iICsKKwkJCSIgICAgICAgIH1cbiIgKworCQkJ
IiAgICAgICAgY2F0Y2ggKFRocm93YWJsZSBlKSB7XG4iICsKKwkJCSIgICAgICAgIH1cbiIgKwor
CQkJIiAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oYUxvY2FsLnRvU3RyaW5nKCkpOyAgICAgICBc
biIgKworCQkJIiAgICB9IFxuIiArCisJCQkiICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXV0b0Ns
b3NlYWJsZUEgaW1wbGVtZW50cyBBdXRvQ2xvc2VhYmxle1xuIiArCisJCQkiICAgICAgICBAT3Zl
cnJpZGVcbiIgKworCQkJIiAgICAgICAgcHVibGljIHZvaWQgY2xvc2UoKSB7XG4iICsKKwkJCSIg
ICAgICAgIH1cbiIgKworCQkJIiAgICB9XG4iICsKKwkJCSIgICAgcHVibGljIHN0YXRpYyBjbGFz
cyBIYXNBdXRvQ2xvc2VhYmxle1xuIiArCisJCQkiICAgICAgICBBdXRvQ2xvc2VhYmxlIGE9bmV3
IEF1dG9DbG9zZWFibGVBKCk7IFxuIiArCisJCQkiICAgIH1cbiIgKworCQkJIn1cbiIKKwkJfSwK
KwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA5KVxu
IiArIAorCQkiCVN5c3RlbS5vdXQucHJpbnRsbihhTG9jYWwudG9TdHJpbmcoKSk7ICAgICAgIFxu
IiArIAorCQkiCSAgICAgICAgICAgICAgICAgICBeXl5eXl5cbiIgKyAKKwkJIlRoZSBsb2NhbCB2
YXJpYWJsZSBhTG9jYWwgbWF5IG5vdCBoYXZlIGJlZW4gaW5pdGlhbGl6ZWRcbiIgKyAKKwkJIi0t
LS0tLS0tLS1cbiIpOworfQorLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19i
dWcuY2dpP2lkPTM3NTMyNgorcHVibGljIHZvaWQgdGVzdDM3NTMyNmIoKSB7CisJdGhpcy5ydW5O
ZWdhdGl2ZVRlc3QoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJwdWJsaWMg
Y2xhc3MgWCB7XG4iICsKKwkJCSIgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtd
IGFyZ3MpIHRocm93cyBFeGNlcHRpb24ge1xuIiArCisJCQkiICAgICAgICBIYXNBdXRvQ2xvc2Vh
YmxlIGFMb2NhbDtcbiIgKworCQkJIiAgICAgICAgdHJ5KEF1dG9DbG9zZWFibGUgYj0oYUxvY2Fs
ID0gbmV3IEhhc0F1dG9DbG9zZWFibGUoKSkuYSl7XG4iICsKKwkJCSIgICAgICAgIAlcbiIgKwor
CQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgICAgICBjYXRjaCAoVGhyb3dhYmxlIGUpIHtcbiIg
KworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihhTG9j
YWwudG9TdHJpbmcoKSk7ICAgICAgIFxuIiArCisJCQkiICAgIH0gXG4iICsKKwkJCSIgICAgcHVi
bGljIHN0YXRpYyBjbGFzcyBBdXRvQ2xvc2VhYmxlQSBpbXBsZW1lbnRzIEF1dG9DbG9zZWFibGV7
XG4iICsKKwkJCSIgICAgICAgIEBPdmVycmlkZVxuIiArCisJCQkiICAgICAgICBwdWJsaWMgdm9p
ZCBjbG9zZSgpIHtcbiIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgIH1cbiIgKworCQkJ
IiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEhhc0F1dG9DbG9zZWFibGV7XG4iICsKKwkJCSIgICAg
ICAgIEF1dG9DbG9zZWFibGUgYT1uZXcgQXV0b0Nsb3NlYWJsZUEoKTsgXG4iICsKKwkJCSIgICAg
fVxuIiArCisJCQkifVxuIgorCQl9LAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1Ig
aW4gWC5qYXZhIChhdCBsaW5lIDkpXG4iICsgCisJCSIJU3lzdGVtLm91dC5wcmludGxuKGFMb2Nh
bC50b1N0cmluZygpKTsgICAgICAgXG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAgIF5eXl5e
XlxuIiArIAorCQkiVGhlIGxvY2FsIHZhcmlhYmxlIGFMb2NhbCBtYXkgbm90IGhhdmUgYmVlbiBp
bml0aWFsaXplZFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7Cit9CisvLyBodHRwczovL2J1Z3Mu
ZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzc1MzI2CitwdWJsaWMgdm9pZCB0ZXN0
Mzc1MzI2YygpIHsKKwl0aGlzLnJ1bkNvbmZvcm1UZXN0KAorCQluZXcgU3RyaW5nW10geworCQkJ
IlguamF2YSIsCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArIAorCQkJIglwdWJsaWMgc3RhdGlj
IHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiIgKyAKKwkJCSIJ
CUhhc0F1dG9DbG9zZWFibGUgYTtcbiIgKyAKKwkJCSIJCXRyeShBdXRvQ2xvc2VhYmxlIGI9KGE9
bmV3IEhhc0F1dG9DbG9zZWFibGUoKSkuYSkge1xuIiArIAorCQkJIiAgICAgICB9IGZpbmFsbHkg
e1xuIiArCisJCQkiICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmluYWxseVwiKTtc
biIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiCQlTeXN0ZW0ub3V0LnByaW50bG4oYSk7XG4i
ICsgCisJCQkiCX1cbiIgKworCQkJIglwdWJsaWMgc3RhdGljIGNsYXNzIEF1dG9DbG9zZWFibGVB
IGltcGxlbWVudHMgQXV0b0Nsb3NlYWJsZSB7XG4iICsgCisJCQkiCQlAT3ZlcnJpZGVcbiIgKyAK
KwkJCSIJCXB1YmxpYyB2b2lkIGNsb3NlKCkge1xuIiArIAorCQkJIgkJCS8vIFRPRE8gQXV0by1n
ZW5lcmF0ZWQgbWV0aG9kIHN0dWJcbiIgKyAKKwkJCSIJCX1cbiIgKyAKKwkJCSIJfVxuIiArIAor
CQkJIglwdWJsaWMgc3RhdGljIGNsYXNzIEhhc0F1dG9DbG9zZWFibGUge1xuIiArIAorCQkJIgkJ
QXV0b0Nsb3NlYWJsZSBhID0gbmV3IEF1dG9DbG9zZWFibGVBKCk7XG4iICsgCisJCQkiCQlwdWJs
aWMgU3RyaW5nIHRvU3RyaW5nKCkge1xuIiArIAorCQkJIgkJCXJldHVybiBcIlNVQ0NFU1NcIjtc
biIgKyAKKwkJCSIJCX1cbiIgKyAKKwkJCSIJfVxuIiArIAorCQkJIn0iIAorCQl9LAorCQkiRmlu
YWxseVxuIiArIAorCQkiU1VDQ0VTUyIpOworfQorLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM3NTMyNgorcHVibGljIHZvaWQgdGVzdDM3NTMyNmQoKSB7
CisJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwK
KwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIgICAgcHVibGljIHN0YXRpYyB2b2lkIG1h
aW4oU3RyaW5nIFtdIGFyZ3MpIHRocm93cyBFeGNlcHRpb24ge1xuIiArCisJCQkiICAgICAgICBI
YXNBdXRvQ2xvc2VhYmxlIGFMb2NhbDtcbiIgKworCQkJIiAgICAgICAgdHJ5KEF1dG9DbG9zZWFi
bGUgYj0obmV3IEhhc0F1dG9DbG9zZWFibGUoKSkuYSl7XG4iICsKKwkJCSIgICAgICAgIAlhTG9j
YWwgPSBuZXcgSGFzQXV0b0Nsb3NlYWJsZSgpO1xuIiArCisJCQkiICAgICAgICB9XG4iICsKKwkJ
CSIgICAgICAgIGNhdGNoIChUaHJvd2FibGUgZSkge1xuIiArCisJCQkiICAgICAgICB9IGZpbmFs
bHkge1xuIiArCisJCQkiICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmluYWxseVwi
KTtcbiIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgICAgIFN5c3RlbS5vdXQucHJpbnRs
bihhTG9jYWwudG9TdHJpbmcoKSk7ICAgICAgIFxuIiArCisJCQkiICAgIH0gXG4iICsKKwkJCSIg
ICAgcHVibGljIHN0YXRpYyBjbGFzcyBBdXRvQ2xvc2VhYmxlQSBpbXBsZW1lbnRzIEF1dG9DbG9z
ZWFibGV7XG4iICsKKwkJCSIgICAgICAgIEBPdmVycmlkZVxuIiArCisJCQkiICAgICAgICBwdWJs
aWMgdm9pZCBjbG9zZSgpIHtcbiIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgIH1cbiIg
KworCQkJIiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEhhc0F1dG9DbG9zZWFibGV7XG4iICsKKwkJ
CSIgICAgICAgIEF1dG9DbG9zZWFibGUgYT1uZXcgQXV0b0Nsb3NlYWJsZUEoKTsgXG4iICsKKwkJ
CSIgICAgfVxuIiArCisJCQkifVxuIgorCQl9LAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4g
RVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDExKVxuIiArIAorCQkiCVN5c3RlbS5vdXQucHJpbnRs
bihhTG9jYWwudG9TdHJpbmcoKSk7ICAgICAgIFxuIiArIAorCQkiCSAgICAgICAgICAgICAgICAg
ICBeXl5eXl5cbiIgKyAKKwkJIlRoZSBsb2NhbCB2YXJpYWJsZSBhTG9jYWwgbWF5IG5vdCBoYXZl
IGJlZW4gaW5pdGlhbGl6ZWRcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM3NTMyNgorcHVibGljIHZv
aWQgdGVzdDM3NTMyNmUoKSB7CisJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoCisJCW5ldyBTdHJpbmdb
XSB7CisJCQkiWC5qYXZhIiwKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIgICAgcHVi
bGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHRocm93cyBFeGNlcHRpb24ge1xu
IiArCisJCQkiICAgICAgICBIYXNBdXRvQ2xvc2VhYmxlIGFMb2NhbDtcbiIgKworCQkJIiAgICAg
ICAgdHJ5KEF1dG9DbG9zZWFibGUgYj0oYUxvY2FsID0gbmV3IEhhc0F1dG9DbG9zZWFibGUoKSku
YSl7XG4iICsKKwkJCSIgICAgICAgIAlcbiIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAg
ICAgICBjYXRjaCAoVGhyb3dhYmxlIGUpIHtcbiIgKworCQkJIiAgICAgICAgfSBmaW5hbGx5IHtc
biIgKworCQkJIiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbmFsbHlcIik7XG4i
ICsKKwkJCSIgICAgICAgIH1cbiIgKworCQkJIiAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oYUxv
Y2FsLnRvU3RyaW5nKCkpOyAgICAgICBcbiIgKworCQkJIiAgICB9IFxuIiArCisJCQkiICAgIHB1
YmxpYyBzdGF0aWMgY2xhc3MgQXV0b0Nsb3NlYWJsZUEgaW1wbGVtZW50cyBBdXRvQ2xvc2VhYmxl
e1xuIiArCisJCQkiICAgICAgICBAT3ZlcnJpZGVcbiIgKworCQkJIiAgICAgICAgcHVibGljIHZv
aWQgY2xvc2UoKSB7XG4iICsKKwkJCSIgICAgICAgIH1cbiIgKworCQkJIiAgICB9XG4iICsKKwkJ
CSIgICAgcHVibGljIHN0YXRpYyBjbGFzcyBIYXNBdXRvQ2xvc2VhYmxle1xuIiArCisJCQkiICAg
ICAgICBBdXRvQ2xvc2VhYmxlIGE9bmV3IEF1dG9DbG9zZWFibGVBKCk7IFxuIiArCisJCQkiICAg
IH1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9S
IGluIFguamF2YSAoYXQgbGluZSAxMSlcbiIgKyAKKwkJIglTeXN0ZW0ub3V0LnByaW50bG4oYUxv
Y2FsLnRvU3RyaW5nKCkpOyAgICAgICBcbiIgKyAKKwkJIgkgICAgICAgICAgICAgICAgICAgXl5e
Xl5eXG4iICsgCisJCSJUaGUgbG9jYWwgdmFyaWFibGUgYUxvY2FsIG1heSBub3QgaGF2ZSBiZWVu
IGluaXRpYWxpemVkXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKy8vIGh0dHBzOi8vYnVn
cy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zNzUzMjYKK3B1YmxpYyB2b2lkIHRl
c3QzNzUzMjZmKCkgeworCXRoaXMucnVuTmVnYXRpdmVUZXN0KAorCQluZXcgU3RyaW5nW10gewor
CQkJIlguamF2YSIsCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiICAgIHB1YmxpYyB2
b2lkIHRlc3RXaXRoUmVzb3VyY2VzQXNzaWdubWVudCgpIHRocm93cyBFeGNlcHRpb257XG4iICsK
KwkJCSIgICAgICAgIEhhc0F1dG9DbG9zZWFibGUgYTtcbiIgKworCQkJIiAgICAgICAgdHJ5KEF1
dG9DbG9zZWFibGUgYj0oYT1uZXcgSGFzQXV0b0Nsb3NlYWJsZSgpKS5hKXtcbiIgKworCQkJIiAg
ICAgICAgfSBmaW5hbGx5IHtcbiIgKworCQkJIiAgICAgICAgCVN5c3RlbS5vdXQucHJpbnRsbihh
KTtcbiIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgIH1cbiIgKworCQkJIiAgICBwdWJs
aWMgY2xhc3MgQXV0b0Nsb3NlYWJsZUEgaW1wbGVtZW50cyBBdXRvQ2xvc2VhYmxle1xuIiArCisJ
CQkiICAgICAgICBAT3ZlcnJpZGVcbiIgKworCQkJIiAgICAgICAgcHVibGljIHZvaWQgY2xvc2Uo
KSB7XG4iICsKKwkJCSIgICAgICAgIH1cbiIgKworCQkJIiAgICB9XG4iICsKKwkJCSIgICAgcHVi
bGljIGNsYXNzIEhhc0F1dG9DbG9zZWFibGV7XG4iICsKKwkJCSIgICAgICAgIEF1dG9DbG9zZWFi
bGUgYT1uZXcgQXV0b0Nsb3NlYWJsZUEoKTtcbiIgKworCQkJIiAgICB9XG4iICsKKwkJCSJ9XG4i
CisJCX0sCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxp
bmUgNilcbiIgKyAKKwkJIglTeXN0ZW0ub3V0LnByaW50bG4oYSk7XG4iICsgCisJCSIJICAgICAg
ICAgICAgICAgICAgIF5cbiIgKyAKKwkJIlRoZSBsb2NhbCB2YXJpYWJsZSBhIG1heSBub3QgaGF2
ZSBiZWVuIGluaXRpYWxpemVkXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKy8vIGh0dHBz
Oi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zNzUzMjYKK3B1YmxpYyB2
b2lkIHRlc3QzNzUzMjZnKCkgeworCXRoaXMucnVuTmVnYXRpdmVUZXN0KAorCQluZXcgU3RyaW5n
W10geworCQkJIlguamF2YSIsCisJCQkiY2xhc3MgQ2hlY2tlZEV4Y2VwdGlvbiBleHRlbmRzIFRo
cm93YWJsZSB7fVxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiICAgIHB1Ymxp
YyB2b2lkIHRlc3RXaXRoUmVzb3VyY2VzQXNzaWdubWVudCgpIHRocm93cyBFeGNlcHRpb257XG4i
ICsKKwkJCSIgICAgICAgIEhhc0F1dG9DbG9zZWFibGUgYTtcbiIgKworCQkJIiAgICAgICAgdHJ5
KEF1dG9DbG9zZWFibGUgYj0oYT1uZXcgSGFzQXV0b0Nsb3NlYWJsZSgpKS5hKXtcbiIgKworCQkJ
IiAgICAgICAgICAgIHRocm93IG5ldyBDaGVja2VkRXhjZXB0aW9uKCk7XG4iICsKKwkJCSIgICAg
ICAgIH0gY2F0Y2ggKENoZWNrZWRFeGNlcHRpb24gZSkge1xuIiArCisJCQkiICAgICAgICAgICAg
U3lzdGVtLm91dC5wcmludGxuKGEpO1xuIiArCisJCQkiICAgICAgICB9IGZpbmFsbHkge1xuIiAr
CisJCQkiICAgICAgICAJU3lzdGVtLm91dC5wcmludGxuKGEpO1xuIiArCisJCQkiICAgICAgICB9
XG4iICsKKwkJCSIgICAgfVxuIiArCisJCQkiICAgIHB1YmxpYyBjbGFzcyBBdXRvQ2xvc2VhYmxl
QSBpbXBsZW1lbnRzIEF1dG9DbG9zZWFibGV7XG4iICsKKwkJCSIgICAgICAgIEBPdmVycmlkZVxu
IiArCisJCQkiICAgICAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHtcbiIgKworCQkJIiAgICAgICAg
fVxuIiArCisJCQkiICAgIH1cbiIgKworCQkJIiAgICBwdWJsaWMgY2xhc3MgSGFzQXV0b0Nsb3Nl
YWJsZXtcbiIgKworCQkJIiAgICAgICAgQXV0b0Nsb3NlYWJsZSBhPW5ldyBBdXRvQ2xvc2VhYmxl
QSgpO1xuIiArCisJCQkiICAgIH1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJIi0tLS0tLS0tLS1c
biIgKyAKKwkJIjEuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDEpXG4iICsgCisJCSIJY2xh
c3MgQ2hlY2tlZEV4Y2VwdGlvbiBleHRlbmRzIFRocm93YWJsZSB7fVxuIiArIAorCQkiCSAgICAg
IF5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJIlRoZSBzZXJpYWxpemFibGUgY2xhc3MgQ2hlY2tl
ZEV4Y2VwdGlvbiBkb2VzIG5vdCBkZWNsYXJlIGEgc3RhdGljIGZpbmFsIHNlcmlhbFZlcnNpb25V
SUQgZmllbGQgb2YgdHlwZSBsb25nXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKKwkJIglTeXN0ZW0ub3V0LnByaW50bG4o
YSk7XG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAgIF5cbiIgKyAKKwkJIlRoZSBsb2NhbCB2
YXJpYWJsZSBhIG1heSBub3QgaGF2ZSBiZWVuIGluaXRpYWxpemVkXG4iICsgCisJCSItLS0tLS0t
LS0tXG4iICsgCisJCSIzLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMTApXG4iICsgCisJCSIJ
U3lzdGVtLm91dC5wcmludGxuKGEpO1xuIiArIAorCQkiCSAgICAgICAgICAgICAgICAgICBeXG4i
ICsgCisJCSJUaGUgbG9jYWwgdmFyaWFibGUgYSBtYXkgbm90IGhhdmUgYmVlbiBpbml0aWFsaXpl
ZFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7Cit9CiBwdWJsaWMgc3RhdGljIENsYXNzIHRlc3RD
bGFzcygpIHsKIAlyZXR1cm4gVHJ5V2l0aFJlc291cmNlc1N0YXRlbWVudFRlc3QuY2xhc3M7CiB9
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1RyeVN0YXRlbWVudC5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9U
cnlTdGF0ZW1lbnQuamF2YQppbmRleCAzOGRlZThlLi4xZjgzZTgyIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvYXN0L1RyeVN0YXRlbWVudC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBp
bGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvVHJ5U3RhdGVtZW50Lmph
dmEKQEAgLTEyNyw5ICsxMjcsMTAgQEAKIAkJLy8gb25seSB0cnkgYmxvY2tzIGluaXRpYWxpemUg
dGhhdCBtZW1iZXIgLSBtYXkgY29uc2lkZXIgY3JlYXRpbmcgYQogCQkvLyBzZXBhcmF0ZSBjbGFz
cyBpZiBuZWVkZWQKIAorCQlGbG93SW5mbyBwcmVUcnlCb2R5Rmxvd0luZm8gPSBmbG93SW5mby5j
b3B5KCk7CiAJCWZvciAoaW50IGkgPSAwOyBpIDwgcmVzb3VyY2VzTGVuZ3RoOyBpKyspIHsKLQkJ
CWZsb3dJbmZvID0gdGhpcy5yZXNvdXJjZXNbaV0uYW5hbHlzZUNvZGUoY3VycmVudFNjb3BlLCBo
YW5kbGluZ0NvbnRleHQsIGZsb3dJbmZvLmNvcHkoKSk7Ci0JCQl0aGlzLnBvc3RSZXNvdXJjZXNJ
bml0U3RhdGVJbmRleGVzW2ldID0gY3VycmVudFNjb3BlLm1ldGhvZFNjb3BlKCkucmVjb3JkSW5p
dGlhbGl6YXRpb25TdGF0ZXMoZmxvd0luZm8pOworCQkJcHJlVHJ5Qm9keUZsb3dJbmZvID0gdGhp
cy5yZXNvdXJjZXNbaV0uYW5hbHlzZUNvZGUoY3VycmVudFNjb3BlLCBoYW5kbGluZ0NvbnRleHQs
IHByZVRyeUJvZHlGbG93SW5mbyk7CisJCQl0aGlzLnBvc3RSZXNvdXJjZXNJbml0U3RhdGVJbmRl
eGVzW2ldID0gY3VycmVudFNjb3BlLm1ldGhvZFNjb3BlKCkucmVjb3JkSW5pdGlhbGl6YXRpb25T
dGF0ZXMocHJlVHJ5Qm9keUZsb3dJbmZvKTsKIAkJCUxvY2FsVmFyaWFibGVCaW5kaW5nIHJlc291
cmNlQmluZGluZyA9IHRoaXMucmVzb3VyY2VzW2ldLmJpbmRpbmc7CiAJCQlyZXNvdXJjZUJpbmRp
bmcudXNlRmxhZyA9IExvY2FsVmFyaWFibGVCaW5kaW5nLlVTRUQ7IC8vIElzIGltcGxpY2l0bHkg
dXNlZCBhbnl3YXlzLgogCQkJaWYgKHJlc291cmNlQmluZGluZy5jbG9zZVRyYWNrZXIgIT0gbnVs
bCkgewpAQCAtMTQ0LDE2ICsxNDUsMTYgQEAKIAkJCQlpZiAoY2xvc2VNZXRob2QgIT0gbnVsbCAm
JiBjbG9zZU1ldGhvZC5yZXR1cm5UeXBlLmlkID09IFR5cGVJZHMuVF92b2lkKSB7CiAJCQkJCVJl
ZmVyZW5jZUJpbmRpbmdbXSB0aHJvd25FeGNlcHRpb25zID0gY2xvc2VNZXRob2QudGhyb3duRXhj
ZXB0aW9uczsKIAkJCQkJZm9yIChpbnQgaiA9IDAsIGxlbmd0aCA9IHRocm93bkV4Y2VwdGlvbnMu
bGVuZ3RoOyBqIDwgbGVuZ3RoOyBqKyspIHsKLQkJCQkJCWhhbmRsaW5nQ29udGV4dC5jaGVja0V4
Y2VwdGlvbkhhbmRsZXJzKHRocm93bkV4Y2VwdGlvbnNbal0sIHRoaXMucmVzb3VyY2VzW2ldLCBm
bG93SW5mbywgY3VycmVudFNjb3BlLCB0cnVlKTsKKwkJCQkJCWhhbmRsaW5nQ29udGV4dC5jaGVj
a0V4Y2VwdGlvbkhhbmRsZXJzKHRocm93bkV4Y2VwdGlvbnNbal0sIHRoaXMucmVzb3VyY2VzW2ld
LCBwcmVUcnlCb2R5Rmxvd0luZm8sIGN1cnJlbnRTY29wZSwgdHJ1ZSk7CiAJCQkJCX0KIAkJCQl9
CiAJCQl9CiAJCX0KIAkJRmxvd0luZm8gdHJ5SW5mbzsKIAkJaWYgKHRoaXMudHJ5QmxvY2suaXNF
bXB0eUJsb2NrKCkpIHsKLQkJCXRyeUluZm8gPSBmbG93SW5mbzsKKwkJCXRyeUluZm8gPSBwcmVU
cnlCb2R5Rmxvd0luZm87CiAJCX0gZWxzZSB7Ci0JCQl0cnlJbmZvID0gdGhpcy50cnlCbG9jay5h
bmFseXNlQ29kZShjdXJyZW50U2NvcGUsIGhhbmRsaW5nQ29udGV4dCwgZmxvd0luZm8uY29weSgp
KTsKKwkJCXRyeUluZm8gPSB0aGlzLnRyeUJsb2NrLmFuYWx5c2VDb2RlKGN1cnJlbnRTY29wZSwg
aGFuZGxpbmdDb250ZXh0LCBwcmVUcnlCb2R5Rmxvd0luZm8pOwogCQkJaWYgKCh0cnlJbmZvLnRh
Z0JpdHMgJiBGbG93SW5mby5VTlJFQUNIQUJMRV9PUl9ERUFEKSAhPSAwKQogCQkJCXRoaXMuYml0
cyB8PSBBU1ROb2RlLklzVHJ5QmxvY2tFeGl0aW5nOwogCQl9CkBAIC0yNjksOSArMjcwLDEwIEBA
CiAJCS8vIG9ubHkgdHJ5IGJsb2NrcyBpbml0aWFsaXplIHRoYXQgbWVtYmVyIC0gbWF5IGNvbnNp
ZGVyIGNyZWF0aW5nIGEKIAkJLy8gc2VwYXJhdGUgY2xhc3MgaWYgbmVlZGVkCiAKKwkJRmxvd0lu
Zm8gcHJlVHJ5QmxvY2tGbG93SW5mbyA9IGZsb3dJbmZvLmNvcHkoKTsKIAkJZm9yIChpbnQgaSA9
IDA7IGkgPCByZXNvdXJjZXNMZW5ndGg7IGkrKykgewotCQkJZmxvd0luZm8gPSB0aGlzLnJlc291
cmNlc1tpXS5hbmFseXNlQ29kZShjdXJyZW50U2NvcGUsIGhhbmRsaW5nQ29udGV4dCwgZmxvd0lu
Zm8uY29weSgpKTsKLQkJCXRoaXMucG9zdFJlc291cmNlc0luaXRTdGF0ZUluZGV4ZXNbaV0gPSBj
dXJyZW50U2NvcGUubWV0aG9kU2NvcGUoKS5yZWNvcmRJbml0aWFsaXphdGlvblN0YXRlcyhmbG93
SW5mbyk7CisJCQlwcmVUcnlCbG9ja0Zsb3dJbmZvID0gdGhpcy5yZXNvdXJjZXNbaV0uYW5hbHlz
ZUNvZGUoY3VycmVudFNjb3BlLCBoYW5kbGluZ0NvbnRleHQsIHByZVRyeUJsb2NrRmxvd0luZm8p
OworCQkJdGhpcy5wb3N0UmVzb3VyY2VzSW5pdFN0YXRlSW5kZXhlc1tpXSA9IGN1cnJlbnRTY29w
ZS5tZXRob2RTY29wZSgpLnJlY29yZEluaXRpYWxpemF0aW9uU3RhdGVzKHByZVRyeUJsb2NrRmxv
d0luZm8pOwogCQkJTG9jYWxWYXJpYWJsZUJpbmRpbmcgcmVzb3VyY2VCaW5kaW5nID0gdGhpcy5y
ZXNvdXJjZXNbaV0uYmluZGluZzsKIAkJCXJlc291cmNlQmluZGluZy51c2VGbGFnID0gTG9jYWxW
YXJpYWJsZUJpbmRpbmcuVVNFRDsgLy8gSXMgaW1wbGljaXRseSB1c2VkIGFueXdheXMuCiAJCQlp
ZiAocmVzb3VyY2VCaW5kaW5nLmNsb3NlVHJhY2tlciAhPSBudWxsKSB7CkBAIC0yODYsMTYgKzI4
OCwxNiBAQAogCQkJCWlmIChjbG9zZU1ldGhvZCAhPSBudWxsICYmIGNsb3NlTWV0aG9kLnJldHVy
blR5cGUuaWQgPT0gVHlwZUlkcy5UX3ZvaWQpIHsKIAkJCQkJUmVmZXJlbmNlQmluZGluZ1tdIHRo
cm93bkV4Y2VwdGlvbnMgPSBjbG9zZU1ldGhvZC50aHJvd25FeGNlcHRpb25zOwogCQkJCQlmb3Ig
KGludCBqID0gMCwgbGVuZ3RoID0gdGhyb3duRXhjZXB0aW9ucy5sZW5ndGg7IGogPCBsZW5ndGg7
IGorKykgewotCQkJCQkJaGFuZGxpbmdDb250ZXh0LmNoZWNrRXhjZXB0aW9uSGFuZGxlcnModGhy
b3duRXhjZXB0aW9uc1tqXSwgdGhpcy5yZXNvdXJjZXNbaV0sIGZsb3dJbmZvLCBjdXJyZW50U2Nv
cGUsIHRydWUpOworCQkJCQkJaGFuZGxpbmdDb250ZXh0LmNoZWNrRXhjZXB0aW9uSGFuZGxlcnMo
dGhyb3duRXhjZXB0aW9uc1tqXSwgdGhpcy5yZXNvdXJjZXNbaV0sIHByZVRyeUJsb2NrRmxvd0lu
Zm8sIGN1cnJlbnRTY29wZSwgdHJ1ZSk7CiAJCQkJCX0KIAkJCQl9CiAJCQl9CiAJCX0KIAkJRmxv
d0luZm8gdHJ5SW5mbzsKIAkJaWYgKHRoaXMudHJ5QmxvY2suaXNFbXB0eUJsb2NrKCkpIHsKLQkJ
CXRyeUluZm8gPSBmbG93SW5mbzsKKwkJCXRyeUluZm8gPSBwcmVUcnlCbG9ja0Zsb3dJbmZvOwog
CQl9IGVsc2UgewotCQkJdHJ5SW5mbyA9IHRoaXMudHJ5QmxvY2suYW5hbHlzZUNvZGUoY3VycmVu
dFNjb3BlLCBoYW5kbGluZ0NvbnRleHQsIGZsb3dJbmZvLmNvcHkoKSk7CisJCQl0cnlJbmZvID0g
dGhpcy50cnlCbG9jay5hbmFseXNlQ29kZShjdXJyZW50U2NvcGUsIGhhbmRsaW5nQ29udGV4dCwg
cHJlVHJ5QmxvY2tGbG93SW5mbyk7CiAJCQlpZiAoKHRyeUluZm8udGFnQml0cyAmIEZsb3dJbmZv
LlVOUkVBQ0hBQkxFX09SX0RFQUQpICE9IDApCiAJCQkJdGhpcy5iaXRzIHw9IEFTVE5vZGUuSXNU
cnlCbG9ja0V4aXRpbmc7CiAJCX0KQEAgLTU0MCw2ICs1NDIsMTAgQEAKIAkJCQkJLy8gaSBpcyBv
ZmYgYnkgb25lCiAJCQkJCWNvZGVTdHJlYW0ucmVtb3ZlTm90RGVmaW5pdGVseUFzc2lnbmVkVmFy
aWFibGVzKGN1cnJlbnRTY29wZSwgdGhpcy5wb3N0UmVzb3VyY2VzSW5pdFN0YXRlSW5kZXhlc1tp
IC0gMV0pOwogCQkJCQljb2RlU3RyZWFtLmFkZERlZmluaXRlbHlBc3NpZ25lZFZhcmlhYmxlcyhj
dXJyZW50U2NvcGUsIHRoaXMucG9zdFJlc291cmNlc0luaXRTdGF0ZUluZGV4ZXNbaSAtIDFdKTsK
KwkJCQl9IGVsc2UgeworCQkJCQkvLyBGb3IgdGhlIGZpcnN0IHJlc291cmNlLCBpdHMgcHJlc2V0
IHN0YXRlIGlzIHRoZSBwcmVUcnlJbml0U3RhdGVJbmRleAorCQkJCQljb2RlU3RyZWFtLnJlbW92
ZU5vdERlZmluaXRlbHlBc3NpZ25lZFZhcmlhYmxlcyhjdXJyZW50U2NvcGUsIHRoaXMucHJlVHJ5
SW5pdFN0YXRlSW5kZXgpOworCQkJCQljb2RlU3RyZWFtLmFkZERlZmluaXRlbHlBc3NpZ25lZFZh
cmlhYmxlcyhjdXJyZW50U2NvcGUsIHRoaXMucHJlVHJ5SW5pdFN0YXRlSW5kZXgpOwogCQkJCX0K
IAogCQkJCWNvZGVTdHJlYW0ucHVzaEV4Y2VwdGlvbk9uU3RhY2sodGhpcy5zY29wZS5nZXRKYXZh
TGFuZ1Rocm93YWJsZSgpKTs=
</data>
<flag name="review"
          id="49989"
          type_id="6"
          status="+"
          setter="daniel_megert"
    />
          </attachment>
      

    </bug>

</bugzilla>