<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>436266</bug_id>
          
          <creation_ts>2014-05-30 19:15:00 -0400</creation_ts>
          <short_desc>Use RC3 (plus) version of JDT compiler to build RC4</short_desc>
          <delta_ts>2014-06-04 08:03:54 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>Platform</product>
          <component>Releng</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>routine releng</status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4 RC4</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="David Williams">david_williams</reporter>
          <assigned_to name="David Williams">david_williams</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2410692</commentid>
    <comment_count>0</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-05-30 19:15:36 -0400</bug_when>
    <thetext>I&apos;d like to update to RC3, initially (now), but once JDT believes they have &quot;final version&quot; I can update again to that compiler from an I-build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2410693</commentid>
    <comment_count>1</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-05-30 19:17:43 -0400</bug_when>
    <thetext>Jay, I&apos;m hoping to get &quot;RC3&quot; in tonight&apos;s build (5/30) but believe I heard you say you are expecting one or two more fixes? ... so once you get what you think is the final version, let me know and I can update again in a few days.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2410696</commentid>
    <comment_count>2</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-05-30 19:46:53 -0400</bug_when>
    <thetext>
This commit moves us up from RC2 to RC3 version of JDT compiler. 

http://git.eclipse.org/c/platform/eclipse.platform.releng.aggregator.git/commit/?id=562f1fcf0aae51d0921088caabbba08e3c80781e


I&apos;ll leave this bug open where we can discuss when to next update for JDT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2410731</commentid>
    <comment_count>3</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-05-31 03:29:16 -0400</bug_when>
    <thetext>Two bugs are currently under investigation for RC4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412049</commentid>
    <comment_count>4</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-06-03 09:39:05 -0400</bug_when>
    <thetext>David, we fixed the last two bugs and are not planning further fixes in JDT Core at the moment. Please update the compiler for our next build. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412140</commentid>
    <comment_count>5</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-03 11:36:05 -0400</bug_when>
    <thetext>(In reply to Dani Megert from comment #4)
&gt; David, we fixed the last two bugs and are not planning further fixes in JDT
&gt; Core at the moment. Please update the compiler for our next build. Thanks.

Ok, to be explicit then, your fixes were in the I20140602-2000 build, so 
org.eclipse.jdt.core_3.10.0.v20140602-1508.jar
it the expected final version to update to. 

Will do, for tonight&apos;s 8 PM build. 

Thanks,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412142</commentid>
    <comment_count>6</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-06-03 11:37:51 -0400</bug_when>
    <thetext>(In reply to David Williams from comment #5)
&gt; (In reply to Dani Megert from comment #4)
&gt; &gt; David, we fixed the last two bugs and are not planning further fixes in JDT
&gt; &gt; Core at the moment. Please update the compiler for our next build. Thanks.
&gt; 
&gt; Ok, to be explicit then, your fixes were in the I20140602-2000 build, so 
&gt; org.eclipse.jdt.core_3.10.0.v20140602-1508.jar
&gt; it the expected final version to update to. 

Sorry, my bad! The last fix only went in today.

Maybe we could do an additional build before 20:00? I heard Tom would also like a (test) build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412169</commentid>
    <comment_count>7</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-03 11:58:59 -0400</bug_when>
    <thetext>(In reply to Dani Megert from comment #6)
&gt; (In reply to David Williams from comment #5)
&gt; &gt; (In reply to Dani Megert from comment #4)
&gt; &gt; &gt; David, we fixed the last two bugs and are not planning further fixes in JDT
&gt; &gt; &gt; Core at the moment. Please update the compiler for our next build. Thanks.
&gt; &gt; 
&gt; &gt; Ok, to be explicit then, your fixes were in the I20140602-2000 build, so 
&gt; &gt; org.eclipse.jdt.core_3.10.0.v20140602-1508.jar
&gt; &gt; it the expected final version to update to. 
&gt; 
&gt; Sorry, my bad! The last fix only went in today.
&gt; 
&gt; Maybe we could do an additional build before 20:00? I heard Tom would also
&gt; like a (test) build.

Good thing I was explicit! :) 

And by test build, you mean literally one that&apos;s not unit tested, and stays on build machine, and then we&apos;d use that version to do final build with? Ok by me (though, I&apos;d lean toward doing and &quot;extra&quot; I-build ... just to make sure it goes through whole process .. if it was me ... but really should be &quot;the same output&quot;). 

I&apos;ve chatted with Tom, and sounds like &quot;test build&quot; will be fine for what he needs ... so I&apos;ll get that started in about 15/30 minutes. (Unless someone speaks up quick).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412172</commentid>
    <comment_count>8</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-03 12:01:52 -0400</bug_when>
    <thetext>Different topic (but while I&apos;m thinking of it) ... I have opened bug 436481 to track removing all the &quot;old&quot; JDT compilers from &quot;eclipse-staging&quot; repo. 

We should probably try to do that on Thursday ... but, I need to go through list still and be sure I know which to keep and which were truly temporary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412180</commentid>
    <comment_count>9</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-06-03 12:08:36 -0400</bug_when>
    <thetext>Technically, the last commit that went in won&apos;t impact the compiler - it was related to type hierarchy. I am not saying we don&apos;t need that commit, but if it&apos;s not too much of a hassle and if it makes sense of course, we can already upgrade to the compiler from last available I build for the test build. But then I don&apos;t know if we upgrade compiler only from milestones builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412195</commentid>
    <comment_count>10</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-03 12:23:28 -0400</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #9)
&gt; Technically, the last commit that went in won&apos;t impact the compiler - it was
&gt; related to type hierarchy. I am not saying we don&apos;t need that commit, but if
&gt; it&apos;s not too much of a hassle and if it makes sense of course, we can
&gt; already upgrade to the compiler from last available I build for the test
&gt; build. But then I don&apos;t know if we upgrade compiler only from milestones
&gt; builds.

Well, I&apos;ve already started the test build. I should be done about 2:30 or 3:00 eastern. [And, FYI, I&apos;ll need to be &quot;off-line a couple of hours around 3ish (Eastern) ... so timing may be awkward. 

I&apos;ll take the compiler from that test build to use as &quot;the final&quot; compiler ... and since test builds don&apos;t &quot;go in the I-build repo&quot; ... I hope the final compiler produces the same version of itself ... since the &quot;test build&quot; version will be what&apos;s in our maven repo we use to build with ... and one with same qualifier will be &quot;published&quot; to p2-repo. [If that sounds problematic ... then we should work out another solution ... such as cancel test build, and do extra, full I-build ... or touch once more after tonight&apos;s build? ... ]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412244</commentid>
    <comment_count>11</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-06-03 14:23:04 -0400</bug_when>
    <thetext>(In reply to David Williams from comment #10)
&gt; (In reply to Jayaprakash Arthanareeswaran from comment #9)
&gt; &gt; Technically, the last commit that went in won&apos;t impact the compiler - it was
&gt; &gt; related to type hierarchy. I am not saying we don&apos;t need that commit, but if
&gt; &gt; it&apos;s not too much of a hassle and if it makes sense of course, we can
&gt; &gt; already upgrade to the compiler from last available I build for the test
&gt; &gt; build. But then I don&apos;t know if we upgrade compiler only from milestones
&gt; &gt; builds.
&gt; 
&gt; Well, I&apos;ve already started the test build. I should be done about 2:30 or
&gt; 3:00 eastern. [And, FYI, I&apos;ll need to be &quot;off-line a couple of hours around
&gt; 3ish (Eastern) ... so timing may be awkward. 
&gt; 
&gt; I&apos;ll take the compiler from that test build to use as &quot;the final&quot; compiler
&gt; ... and since test builds don&apos;t &quot;go in the I-build repo&quot; ... I hope the
&gt; final compiler produces the same version of itself ... since the &quot;test
&gt; build&quot; version will be what&apos;s in our maven repo we use to build with ... and
&gt; one with same qualifier will be &quot;published&quot; to p2-repo. [If that sounds
&gt; problematic ... then we should work out another solution ... such as cancel
&gt; test build, and do extra, full I-build ... or touch once more after
&gt; tonight&apos;s build? ... ]

How about this: We use the compiler from the test build for tonight&apos;s build. If that works well, we use the one produced by tonight&apos;s I-build as final version. That way, we have something reproducible in case there will be troubles.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412265</commentid>
    <comment_count>12</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-03 15:13:39 -0400</bug_when>
    <thetext>(In reply to Dani Megert from comment #11)

The test build is done and available at 

http://build.eclipse.org/eclipse/builds/4I/siteDir/eclipse/downloads/drops4/I20140603-1210/

equinox:
http://build.eclipse.org/eclipse/builds/4I/siteDir/equinox/drops/I20140603-1210/

updateSite:
http://build.eclipse.org/eclipse/builds/4I/siteDir/updates/4.4-I-builds/I20140603-1210/

I&apos;ve deployed the compiler produced,  

org.eclipse.jdt.core_3.10.0.v20140603-1235.jar

to eclipse-staging and updated our parent pom to use that one for tonight&apos;s build: 

http://git.eclipse.org/c/platform/eclipse.platform.releng.aggregator.git/commit/?id=39ced0cbf68cabced91792a71f3923ef16690d32

&gt; How about this: We use the compiler from the test build for tonight&apos;s build.
&gt; If that works well, we use the one produced by tonight&apos;s I-build as final
&gt; version. That way, we have something reproducible in case there will be
&gt; troubles.

That&apos;s fine, but the one produced in tonight&apos;s build should have the same qualifier v20140603-1235 since that&apos;s based on &quot;last commit&quot; ... and as far as I know there&apos;s no easy way to &quot;replace&quot; the one in the maven eclipse-staging repo, with another with the same qualifier. (And, is sort of a &quot;bad practice&quot;, to do that.)

So, what I was thinking was we&apos;d do a binary compare of the one produced by tonight&apos;s build, with the one produced by test build, and if they are the same, I think we are done. If there&apos;s some difference ... then better, IMHO, would be to &apos;touch&apos; jdt.core, and produce one with a different qualifier with an extra I-build. 

Or, might be easier and more &quot;assured&quot; to go ahead and touch jdt.core now (before tonight&apos;s 8 PM build) just to make sure qualifier is different, for one that&apos;s been though &quot;full I-build with final compiler&quot; ... and then we&apos;d update eclipse-staging to use that one tomorrow (Wednesday, final build day).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412280</commentid>
    <comment_count>13</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-06-03 15:31:24 -0400</bug_when>
    <thetext>(In reply to David Williams from comment #12)
&gt; Or, might be easier and more &quot;assured&quot; to go ahead and touch jdt.core now
&gt; (before tonight&apos;s 8 PM build) just to make sure qualifier is different, for
&gt; one that&apos;s been though &quot;full I-build with final compiler&quot; ... and then we&apos;d
&gt; update eclipse-staging to use that one tomorrow (Wednesday, final build day).

I have already done this, so we have one less thing to worry about at this stage. The commit is here:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=f832f6102b6bc36b4b4c2a21267e930bf3014a28</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412284</commentid>
    <comment_count>14</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-06-03 15:36:25 -0400</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #13)
&gt; (In reply to David Williams from comment #12)
&gt; &gt; Or, might be easier and more &quot;assured&quot; to go ahead and touch jdt.core now
&gt; &gt; (before tonight&apos;s 8 PM build) just to make sure qualifier is different, for
&gt; &gt; one that&apos;s been though &quot;full I-build with final compiler&quot; ... and then we&apos;d
&gt; &gt; update eclipse-staging to use that one tomorrow (Wednesday, final build day).
&gt; 
&gt; I have already done this, so we have one less thing to worry about at this
&gt; stage. The commit is here:
&gt; 
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
&gt; ?id=f832f6102b6bc36b4b4c2a21267e930bf3014a28

Thanks Jay!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412461</commentid>
    <comment_count>15</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-06-04 03:56:45 -0400</bug_when>
    <thetext>The compiler (3.10.0.v20140603-1235) produced the same warnings and no comparator errors.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412492</commentid>
    <comment_count>16</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-04 04:57:43 -0400</bug_when>
    <thetext>(In reply to Dani Megert from comment #15)
&gt; The compiler (3.10.0.v20140603-1235) produced the same warnings and no
&gt; comparator errors.

I&apos;ve done a binary compare, and jdt.core 3.10.0.v20140603-1928 (the one from build I20140603-2300 appears the same as 3.10.0.v20140603-1235 (the one from the test build) ... (all except for &quot;signature times&quot;, embedded version numbers, etc.) ... So, assuming the unit tests all pass as expected, I assume the one from the normal I-build, 3.10.0.v20140603-1928, is the one to promote and used as our final, released Luna compiler. 

I&apos;ve update the the eclipse-staging repo, and the version we use in our parent-pom: 

http://git.eclipse.org/c/platform/eclipse.platform.releng.aggregator.git/commit/?id=8275136ec2a5de15cc1c48a9995d99a62e924a11

So, I&apos;ll marked as fixed, and would expect the JDT Team to mark as &quot;verified&quot; once they see Unit tests and do what ever else they do to confirm they are done for this release. (And, if not, for some reason, please reopen). 

Once that is confirmed, I&apos;ll update bug 436481 with list of compilers to keep, and compilers to remove and make general announcement to community, and if Thanh is able, plan to remove the old, unreleased ones on Thursday.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412562</commentid>
    <comment_count>17</comment_count>
    <who name="David Williams">david_williams</who>
    <bug_when>2014-06-04 07:54:42 -0400</bug_when>
    <thetext>It does appear there were several unit test failures that might be &quot;compiler related&quot; ... and will take some inspection? 

http://download.eclipse.org/eclipse/downloads/drops4/I20140603-2300/testResults.php</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2412566</commentid>
    <comment_count>18</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-06-04 08:03:54 -0400</bug_when>
    <thetext>(In reply to David Williams from comment #17)
&gt; It does appear there were several unit test failures that might be &quot;compiler
&gt; related&quot; ... and will take some inspection? 
&gt; 
&gt; http://download.eclipse.org/eclipse/downloads/drops4/I20140603-2300/
&gt; testResults.php

I raised bug 436563 to track that. Could be a result of fix for bug 436155, but Is see all tests passing locally.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>