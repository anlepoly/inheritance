<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>422259</bug_id>
          
          <creation_ts>2013-11-21 10:20:00 -0500</creation_ts>
          <short_desc>[1.8][dom ast] AST Formatter removes blanks around annotations</short_desc>
          <delta_ts>2013-11-24 03:22:00 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>417923</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Manoj Palat Away Until May 11 2015">manpalat</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>markus_keller</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="59967"
          type_id="1"
          status="+"
          setter="markus_keller"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2332982</commentid>
    <comment_count>0</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-21 10:20:10 -0500</bug_when>
    <thetext>int[] @Annot1 [] = new int[1] @Annot1 [2]; gets reduced to
int[]@Annot1[] = new int[1]@Annot1[2];</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2332987</commentid>
    <comment_count>1</comment_count>
      <attachid>237618</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-21 10:22:33 -0500</bug_when>
    <thetext>Created attachment 237618
Test case

Ref: bug 417923 comment 9 point 2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333385</commentid>
    <comment_count>2</comment_count>
      <attachid>237643</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-22 07:43:38 -0500</bug_when>
    <thetext>Created attachment 237643
Proposed Patch

Fix with additional test cases</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333427</commentid>
    <comment_count>3</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-11-22 09:31:50 -0500</bug_when>
    <thetext>Looks good, thanks!

CodeFormatterVisitor#formatLeadingDimensions(TypeReference, boolean) and CodeFormatterVisitor#formatDimensions(TypeReference, int, int, boolean)
are now always called with spaceBeforeAnnotation=true.

Both method bodies can just use true instead of spaceBeforeAnnotation, and then we can get rid of the parameters (e.g. via Change Method Signature &gt; Remove).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333734</commentid>
    <comment_count>4</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-24 03:22:00 -0500</bug_when>
    <thetext>(In reply to Markus Keller from comment #3)
&gt; Looks good, thanks!
&gt; 
&gt; CodeFormatterVisitor#formatLeadingDimensions(TypeReference, boolean) and
&gt; CodeFormatterVisitor#formatDimensions(TypeReference, int, int, boolean)
&gt; are now always called with spaceBeforeAnnotation=true.

Thanks Markus. Have incorporated this change and released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=a3e5b898cb4a20a395dd36117ef5b31b39ed2b46</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237618</attachid>
            <date>2013-11-21 10:22:00 -0500</date>
            <delta_ts>2013-11-22 07:43:38 -0500</delta_ts>
            <desc>Test case</desc>
            <filename>422259.testcase.patch</filename>
            <type>text/plain</type>
            <size>3537</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nU3RhdGVt
ZW50c1Rlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nU3Rh
dGVtZW50c1Rlc3QuamF2YQppbmRleCBmZTEzMTUwLi4zM2QyYWI4IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1N0YXRlbWVudHNUZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5q
YXZhCkBAIC02MTU1LDYgKzYxNTUsNzAgQEAKIAkJZWRpdC5hcHBseShkb2MpOwogCQlhc3NlcnRU
cnVlKCJJbmNvcnJlY3QgRm9ybWF0dGluZyIsIGRvYy5nZXQoKS5lcXVhbHMoZm9ybWF0dGVkU3Ry
aW5nKSk7CiAJfQorCXB1YmxpYyB2b2lkIHRlc3RCdWdBU1RGb3JtYXR0ZXJfc2luY2VfOCgpIHRo
cm93cyBFeGNlcHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZv
bGRlci5jcmVhdGVQYWNrYWdlRnJhZ21lbnQoInRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJp
bmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2Ug
dGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVs
ZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcu
YW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJ
YnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQlJQ29tcGlsYXRpb25Vbml0
IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlguamF2YSIsIGJ1Zi50b1N0cmluZygp
LCBmYWxzZSwgbnVsbCk7CisKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChj
dSk7CisJCUFTVCBhc3QgPSBhc3RSb290LmdldEFTVCgpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9
IEFTVFJld3JpdGUuY3JlYXRlKGFzdCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVEZWNsID0g
KFR5cGVEZWNsYXJhdGlvbikgYXN0Um9vdC50eXBlcygpLmdldCgwKTsKKwkJTWV0aG9kRGVjbGFy
YXRpb24gbWV0aG9kRGVjbD0gdHlwZURlY2wuZ2V0TWV0aG9kcygpWzBdOworCQlCbG9jayBibG9j
az0gbWV0aG9kRGVjbC5nZXRCb2R5KCk7CisKKwkJZm9yIChpbnQgaSA9IDA7IGkgPCAxOyArK2kp
IHsKKwkJCUFycmF5VHlwZSBhcnJheVR5cGUgPSBhc3QubmV3QXJyYXlUeXBlKGFzdC5uZXdQcmlt
aXRpdmVUeXBlKFByaW1pdGl2ZVR5cGUuSU5UKSwgMik7CisJCQlEaW1lbnNpb24gZGltID0gKERp
bWVuc2lvbikgYXJyYXlUeXBlLmRpbWVuc2lvbnMoKS5nZXQoMSk7CisJCQlNYXJrZXJBbm5vdGF0
aW9uIG1hcmtlckFubm90YXRpb24gPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFy
a2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QxIikpOwor
CQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCQkJQXJyYXlDcmVh
dGlvbiBjcmVhdGlvbiA9IGFzdC5uZXdBcnJheUNyZWF0aW9uKCk7CisJCQljcmVhdGlvbi5zZXRU
eXBlKGFycmF5VHlwZSk7CisJCQljcmVhdGlvbi5kaW1lbnNpb25zKCkuYWRkKGFzdC5uZXdOdW1i
ZXJMaXRlcmFsKCIxIikpOworCQkJY3JlYXRpb24uZGltZW5zaW9ucygpLmFkZChhc3QubmV3TnVt
YmVyTGl0ZXJhbCgiMiIpKTsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVu
dCA9IGFzdC5uZXdWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQoKTsKKwkJCWZyYWdtZW50LnNl
dE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoInZhciIpKTsKKwkJCWZyYWdtZW50LnNldEluaXRpYWxp
emVyKGNyZWF0aW9uKTsKKwkJCQorCQkJYXJyYXlUeXBlID0gYXN0Lm5ld0FycmF5VHlwZShhc3Qu
bmV3UHJpbWl0aXZlVHlwZShQcmltaXRpdmVUeXBlLklOVCksIDIpOworCQkJZGltID0gKERpbWVu
c2lvbikgYXJyYXlUeXBlLmRpbWVuc2lvbnMoKS5nZXQoMSk7CisJCQltYXJrZXJBbm5vdGF0aW9u
ID0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlw
ZU5hbWUoYXN0Lm5ld05hbWUoIkFubm90MSIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZCht
YXJrZXJBbm5vdGF0aW9uKTsKKwkJCQorCQkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCBz
dGF0ZW1lbnQgPSBhc3QubmV3VmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudChmcmFnbWVudCk7
CisJCQlzdGF0ZW1lbnQuc2V0VHlwZShhcnJheVR5cGUpOworCQkJCisJCQlMaXN0UmV3cml0ZSBs
aXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShibG9jaywgQmxvY2suU1RBVEVNRU5U
U19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRGaXJzdChzdGF0ZW1lbnQsIG51bGwp
OworCQkJCisJCX0KKworCQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdy
aXRlKTsKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2Ug
dGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVs
ZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICAJaW50W10gQEFubm90MSBbXSB2YXIgPSBuZXcgaW50WzFdIEBBbm5vdDEgWzJdO1xuIik7CisJ
CWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBl
bmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBF
X1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQli
dWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5
cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QyIHt9XG4i
KTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOworCX0KIAog
fQog
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237643</attachid>
            <date>2013-11-22 07:43:00 -0500</date>
            <delta_ts>2013-11-22 07:43:38 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-422259-18dom-ast-AST-Formatter-removes-b.patch</filename>
            <type>text/plain</type>
            <size>16073</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nRXhwcmVz
c2lvbnNUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3Jn
L2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ0V4
cHJlc3Npb25zVGVzdC5qYXZhCmluZGV4IDBlZTNlYTkuLmFjNjNlNDQgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nRXhwcmVzc2lvbnNUZXN0LmphdmEK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdFeHByZXNzaW9uc1Rl
c3QuamF2YQpAQCAtMjk3LDcgKzI5Nyw3IEBACiAJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7
XG4iKTsKIAkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CiAJCWJ1Zi5hcHBlbmQo
IiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKLQkJYnVmLmFwcGVuZCgiICAgICAgICBnb28o
bmV3IGphdmEubGFuZy5TdHJpbmcgQEFbMV1AQigwKVsyXUBDKHYgPSA5OSlbXSk7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgICAgICBnb28obmV3IGphdmEubGFuZy5TdHJpbmcgQEEgWzFdIEBCKDAp
IFsyXSBAQyh2ID0gOTkpIFtdKTtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CiAJCWJ1
Zi5hcHBlbmQoIn1cbiIpOwogCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJp
bmcoKSk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGlu
Z1N0YXRlbWVudHNUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3Jp
dGluZ1N0YXRlbWVudHNUZXN0LmphdmEKaW5kZXggZThkMGExNi4uYTdhYmRjNCAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBz
ZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nU3RhdGVtZW50
c1Rlc3QuamF2YQpAQCAtNDYsMTAgKzQ2LDEyIEBACiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNv
cmUuZG9tLkluZml4RXhwcmVzc2lvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20u
TGFiZWxlZFN0YXRlbWVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uTWFya2Vy
QW5ub3RhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uTWVtYmVyVmFsdWVQ
YWlyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRob2REZWNsYXJhdGlvbjsK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uTWV0aG9kSW52b2NhdGlvbjsKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uTW9kaWZpZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmNvcmUuZG9tLk5hbWU7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLk5vcm1h
bEFubm90YXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLlBhcmVudGhlc2l6
ZWRFeHByZXNzaW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5QcmVmaXhFeHBy
ZXNzaW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5QcmltaXRpdmVUeXBlOwpA
QCAtNjk3OSw0ICs2OTgxLDE3MSBAQAogCQlidWYuYXBwZW5kKCJ9XG4iKTsKIAkJYXNzZXJ0RXF1
YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOwogCX0KKworCXB1YmxpYyB2b2lkIHRl
c3RCdWdBU1RGb3JtYXR0ZXJfc2luY2VfOCgpIHRocm93cyBFeGNlcHRpb24geworCQlJUGFja2Fn
ZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJhZ21lbnQo
InRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5nQnVm
ZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
aW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBl
bmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQg
Zm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxu
Iik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtF
bGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBNYXJr
ZXIge31cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZh
bHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZh
Y2UgQW5ub3QxIHtcbiIpOworCQlidWYuYXBwZW5kKCIJaW50IHZhbHVlMSgpIGRlZmF1bHQgMTtc
biIpOworCQlidWYuYXBwZW5kKCIJaW50IHZhbHVlMigpO1xuIik7CisJCWJ1Zi5hcHBlbmQoIn1c
biIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7
RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5u
b3QyIHtcbiIpOworCQlidWYuYXBwZW5kKCIJQFN1cHByZXNzV2FybmluZ3MoXCJyYXd0eXBlc1wi
KVxuIik7CisJCWJ1Zi5hcHBlbmQoIglDbGFzcyB2YWx1ZSgpIGRlZmF1bHQgaW50W10uY2xhc3M7
XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sx
LmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBu
dWxsKTsKKworCQlDb21waWxhdGlvblVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUKGN1KTsKKwkJQVNU
IGFzdCA9IGFzdFJvb3QuZ2V0QVNUKCk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0
ZS5jcmVhdGUoYXN0KTsKKworCQlUeXBlRGVjbGFyYXRpb24gdHlwZURlY2wgPSAoVHlwZURlY2xh
cmF0aW9uKSBhc3RSb290LnR5cGVzKCkuZ2V0KDApOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRo
b2REZWNsPSB0eXBlRGVjbC5nZXRNZXRob2RzKClbMF07CisJCUJsb2NrIGJsb2NrPSBtZXRob2RE
ZWNsLmdldEJvZHkoKTsKKworCQl7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gYXN0Lm5ld0Fy
cmF5VHlwZShhc3QubmV3UHJpbWl0aXZlVHlwZShQcmltaXRpdmVUeXBlLklOVCksIDIpOworCQkJ
RGltZW5zaW9uIGRpbSA9IChEaW1lbnNpb24pIGFycmF5VHlwZS5kaW1lbnNpb25zKCkuZ2V0KDEp
OworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uID0gYXN0Lm5ld01hcmtlckFu
bm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBs
ZU5hbWUoIk1hcmtlciIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZChtYXJrZXJBbm5vdGF0
aW9uKTsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9IGFzdC5uZXdW
YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQoKTsKKwkJCWZyYWdtZW50LnNldE5hbWUoYXN0Lm5l
d1NpbXBsZU5hbWUoImkiKSk7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50IHN0YXRl
bWVudCA9IGFzdC5uZXdWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KGZyYWdtZW50KTsKKwkJ
CXN0YXRlbWVudC5zZXRUeXBlKGFycmF5VHlwZSk7CisJCQkKKwkJCUxpc3RSZXdyaXRlIGxpc3RS
ZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGJsb2NrLCBCbG9jay5TVEFURU1FTlRTX1BS
T1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEZpcnN0KHN0YXRlbWVudCwgbnVsbCk7CisJ
CQkKKwkJfQorCQl7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gYXN0Lm5ld0FycmF5VHlwZShh
c3QubmV3UHJpbWl0aXZlVHlwZShQcmltaXRpdmVUeXBlLklOVCksIDIpOworCQkJRGltZW5zaW9u
IGRpbSA9IChEaW1lbnNpb24pIGFycmF5VHlwZS5kaW1lbnNpb25zKCkuZ2V0KDEpOworCQkJTWFy
a2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uID0gYXN0Lm5ld01hcmtlckFubm90YXRpb24o
KTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIk1h
cmtlciIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZChtYXJrZXJBbm5vdGF0aW9uKTsKKwkJ
CUFycmF5Q3JlYXRpb24gY3JlYXRpb24gPSBhc3QubmV3QXJyYXlDcmVhdGlvbigpOworCQkJY3Jl
YXRpb24uc2V0VHlwZShhcnJheVR5cGUpOworCQkJY3JlYXRpb24uZGltZW5zaW9ucygpLmFkZChh
c3QubmV3TnVtYmVyTGl0ZXJhbCgiMSIpKTsKKwkJCWNyZWF0aW9uLmRpbWVuc2lvbnMoKS5hZGQo
YXN0Lm5ld051bWJlckxpdGVyYWwoIjIiKSk7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21l
bnQgZnJhZ21lbnQgPSBhc3QubmV3VmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KCk7CisJCQlm
cmFnbWVudC5zZXROYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJqIikpOworCQkJZnJhZ21lbnQuc2V0
SW5pdGlhbGl6ZXIoY3JlYXRpb24pOworCQkJCisJCQlhcnJheVR5cGUgPSBhc3QubmV3QXJyYXlU
eXBlKGFzdC5uZXdQcmltaXRpdmVUeXBlKFByaW1pdGl2ZVR5cGUuSU5UKSwgMik7CisJCQlkaW0g
PSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5zaW9ucygpLmdldCgxKTsKKwkJCW1hcmtlckFu
bm90YXRpb24gPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlv
bi5zZXRUeXBlTmFtZShhc3QubmV3TmFtZSgiTWFya2VyIikpOworCQkJZGltLmFubm90YXRpb25z
KCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCQkJCisJCQlWYXJpYWJsZURlY2xhcmF0aW9uU3Rh
dGVtZW50IHN0YXRlbWVudCA9IGFzdC5uZXdWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KGZy
YWdtZW50KTsKKwkJCXN0YXRlbWVudC5zZXRUeXBlKGFycmF5VHlwZSk7CisJCQkKKwkJCUxpc3RS
ZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGJsb2NrLCBCbG9jay5T
VEFURU1FTlRTX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydExhc3Qoc3RhdGVtZW50
LCBudWxsKTsKKwkJCQorCQl9CisJCXsKKwkJCUFycmF5VHlwZSBhcnJheVR5cGUgPSBhc3QubmV3
QXJyYXlUeXBlKGFzdC5uZXdQcmltaXRpdmVUeXBlKFByaW1pdGl2ZVR5cGUuSU5UKSwgMik7CisJ
CQlEaW1lbnNpb24gZGltID0gKERpbWVuc2lvbikgYXJyYXlUeXBlLmRpbWVuc2lvbnMoKS5nZXQo
MCk7CisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRpb24gPSBhc3QubmV3TWFya2Vy
QW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiTWFya2VyIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90
YXRpb24pOworCQkJCisJCQlOb3JtYWxBbm5vdGF0aW9uIG5vcm1hbEFubm90YXRpb24gPSBhc3Qu
bmV3Tm9ybWFsQW5ub3RhdGlvbigpOworCQkJbm9ybWFsQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShh
c3QubmV3U2ltcGxlTmFtZSgiQW5ub3QxIikpOworCQkJTWVtYmVyVmFsdWVQYWlyIG1lbWJlclZh
bHVlUGFpcj0gYXN0Lm5ld01lbWJlclZhbHVlUGFpcigpOworCQkJbWVtYmVyVmFsdWVQYWlyLnNl
dE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoInZhbHVlMSIpKTsKKwkJCW1lbWJlclZhbHVlUGFpci5z
ZXRWYWx1ZShhc3QubmV3TnVtYmVyTGl0ZXJhbCgiMSIpKTsKKwkJCW5vcm1hbEFubm90YXRpb24u
dmFsdWVzKCkuYWRkKG1lbWJlclZhbHVlUGFpcik7CisJCQltZW1iZXJWYWx1ZVBhaXI9IGFzdC5u
ZXdNZW1iZXJWYWx1ZVBhaXIoKTsKKwkJCW1lbWJlclZhbHVlUGFpci5zZXROYW1lKGFzdC5uZXdT
aW1wbGVOYW1lKCJ2YWx1ZTIiKSk7CisJCQltZW1iZXJWYWx1ZVBhaXIuc2V0VmFsdWUoYXN0Lm5l
d051bWJlckxpdGVyYWwoIjIiKSk7CisJCQlub3JtYWxBbm5vdGF0aW9uLnZhbHVlcygpLmFkZCht
ZW1iZXJWYWx1ZVBhaXIpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG5vcm1hbEFubm90YXRp
b24pOworCisJCQlTaW5nbGVNZW1iZXJBbm5vdGF0aW9uIHNpbmdsZU1lbWJlckFubm90YXRpb24g
PSBhc3QubmV3U2luZ2xlTWVtYmVyQW5ub3RhdGlvbigpOworCQkJc2luZ2xlTWVtYmVyQW5ub3Rh
dGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QyIikpOworCQkJQXJyYXlU
eXBlIHR5cGUgPSBhc3QubmV3QXJyYXlUeXBlKGFzdC5uZXdQcmltaXRpdmVUeXBlKFByaW1pdGl2
ZVR5cGUuRkxPQVQpLCAxKTsKKwkJCVR5cGVMaXRlcmFsIGxpdGVyYWwgPSBhc3QubmV3VHlwZUxp
dGVyYWwoKTsKKwkJCWxpdGVyYWwuc2V0VHlwZSh0eXBlKTsKKwkJCXNpbmdsZU1lbWJlckFubm90
YXRpb24uc2V0VmFsdWUobGl0ZXJhbCk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQoc2luZ2xl
TWVtYmVyQW5ub3RhdGlvbik7CisJCQkKKwkJCUFycmF5Q3JlYXRpb24gY3JlYXRpb24gPSBhc3Qu
bmV3QXJyYXlDcmVhdGlvbigpOworCQkJY3JlYXRpb24uc2V0VHlwZShhcnJheVR5cGUpOworCQkJ
Y3JlYXRpb24uZGltZW5zaW9ucygpLmFkZChhc3QubmV3TnVtYmVyTGl0ZXJhbCgiMSIpKTsKKwkJ
CWNyZWF0aW9uLmRpbWVuc2lvbnMoKS5hZGQoYXN0Lm5ld051bWJlckxpdGVyYWwoIjIiKSk7CisJ
CQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQgPSBhc3QubmV3VmFyaWFibGVE
ZWNsYXJhdGlvbkZyYWdtZW50KCk7CisJCQlmcmFnbWVudC5zZXROYW1lKGFzdC5uZXdTaW1wbGVO
YW1lKCJrIikpOworCQkJZnJhZ21lbnQuc2V0SW5pdGlhbGl6ZXIoY3JlYXRpb24pOworCQkJCisJ
CQlhcnJheVR5cGUgPSBhc3QubmV3QXJyYXlUeXBlKGFzdC5uZXdQcmltaXRpdmVUeXBlKFByaW1p
dGl2ZVR5cGUuSU5UKSwgMik7CisJCQlkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5z
aW9ucygpLmdldCgwKTsKKwkJCW1hcmtlckFubm90YXRpb24gPSBhc3QubmV3TWFya2VyQW5ub3Rh
dGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3TmFtZSgiTWFy
a2VyIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCQkJ
CisJCQlub3JtYWxBbm5vdGF0aW9uID0gYXN0Lm5ld05vcm1hbEFubm90YXRpb24oKTsKKwkJCW5v
cm1hbEFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MSIpKTsK
KwkJCW1lbWJlclZhbHVlUGFpcj0gYXN0Lm5ld01lbWJlclZhbHVlUGFpcigpOworCQkJbWVtYmVy
VmFsdWVQYWlyLnNldE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoInZhbHVlMSIpKTsKKwkJCW1lbWJl
clZhbHVlUGFpci5zZXRWYWx1ZShhc3QubmV3TnVtYmVyTGl0ZXJhbCgiMSIpKTsKKwkJCW5vcm1h
bEFubm90YXRpb24udmFsdWVzKCkuYWRkKG1lbWJlclZhbHVlUGFpcik7CisJCQltZW1iZXJWYWx1
ZVBhaXI9IGFzdC5uZXdNZW1iZXJWYWx1ZVBhaXIoKTsKKwkJCW1lbWJlclZhbHVlUGFpci5zZXRO
YW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJ2YWx1ZTIiKSk7CisJCQltZW1iZXJWYWx1ZVBhaXIuc2V0
VmFsdWUoYXN0Lm5ld051bWJlckxpdGVyYWwoIjIiKSk7CisJCQlub3JtYWxBbm5vdGF0aW9uLnZh
bHVlcygpLmFkZChtZW1iZXJWYWx1ZVBhaXIpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG5v
cm1hbEFubm90YXRpb24pOworCQkJCisJCQlzaW5nbGVNZW1iZXJBbm5vdGF0aW9uID0gYXN0Lm5l
d1NpbmdsZU1lbWJlckFubm90YXRpb24oKTsKKwkJCXNpbmdsZU1lbWJlckFubm90YXRpb24uc2V0
VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MiIpKTsKKwkJCXR5cGUgPSBhc3QubmV3
QXJyYXlUeXBlKGFzdC5uZXdQcmltaXRpdmVUeXBlKFByaW1pdGl2ZVR5cGUuRkxPQVQpLCAxKTsK
KwkJCWxpdGVyYWwgPSBhc3QubmV3VHlwZUxpdGVyYWwoKTsKKwkJCWxpdGVyYWwuc2V0VHlwZSh0
eXBlKTsKKwkJCXNpbmdsZU1lbWJlckFubm90YXRpb24uc2V0VmFsdWUobGl0ZXJhbCk7CisJCQlk
aW0uYW5ub3RhdGlvbnMoKS5hZGQoc2luZ2xlTWVtYmVyQW5ub3RhdGlvbik7CisJCQlWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50IHN0YXRlbWVudCA9IGFzdC5uZXdWYXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50KGZyYWdtZW50KTsKKwkJCXN0YXRlbWVudC5zZXRUeXBlKGFycmF5VHlwZSk7
CisJCQkKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRl
KGJsb2NrLCBCbG9jay5TVEFURU1FTlRTX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLmluc2Vy
dExhc3Qoc3RhdGVtZW50LCBudWxsKTsKKwkJCQorCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9IGV2
YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOwor
CQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJs
aWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgICAgIGludFtdIEBNYXJrZXIgW10gaTtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgICAgIGludFtdIEBNYXJrZXIgW10gaiA9IG5ldyBpbnRbMV0gQE1hcmtl
ciBbMl07XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgICAgICBpbnQgQE1hcmtlciBAQW5ub3QxKHZh
bHVlMSA9IDEsIHZhbHVlMiA9IDIpIEBBbm5vdDIoZmxvYXRbXS5jbGFzcykgW11bXSBrID0gbmV3
IGludCBATWFya2VyIEBBbm5vdDEodmFsdWUxID0gMSwgdmFsdWUyID0gMikgQEFubm90MihmbG9h
dFtdLmNsYXNzKSBbMV1bMl07XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYu
YXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdl
dCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50
ZXJmYWNlIE1hcmtlciB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlv
bi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVu
ZCgiQGludGVyZmFjZSBBbm5vdDEge1xuIik7CisJCWJ1Zi5hcHBlbmQoIglpbnQgdmFsdWUxKCkg
ZGVmYXVsdCAxO1xuIik7CisJCWJ1Zi5hcHBlbmQoIglpbnQgdmFsdWUyKCk7XG4iKTsKKwkJYnVm
LmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJn
ZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGlu
dGVyZmFjZSBBbm5vdDIge1xuIik7CisJCWJ1Zi5hcHBlbmQoIglAU3VwcHJlc3NXYXJuaW5ncyhc
InJhd3R5cGVzXCIpXG4iKTsKKwkJYnVmLmFwcGVuZCgiCUNsYXNzIHZhbHVlKCkgZGVmYXVsdCBp
bnRbXS5jbGFzcztcbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsKKwkJYXNzZXJ0RXF1YWxTdHJp
bmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOworCX0KIH0KXCBObyBuZXdsaW5lIGF0IGVuZCBv
ZiBmaWxlCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTUvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNS9YX291
dC5qYXZhCmluZGV4IDcwZmU1YTAuLmQyMzYyMDMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNS9YX291
dC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKU1IzMDgvdGVzdDAxNS9YX291dC5qYXZhCkBAIC00LDcgKzQsNyBAQAogCiBwdWJs
aWMgY2xhc3MgWCB7CiAJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewot
CQlJIGkgPSBATWFya2VyIGludCBATWFya2VyW106OjxTdHJpbmc+IGNsb25lOworCQlJIGkgPSBA
TWFya2VyIGludCBATWFya2VyIFtdOjo8U3RyaW5nPiBjbG9uZTsKIAkJWm9yayB6OwogCX0KIH0K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKU1IzMDgvdGVzdDAxNi9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE2L1hfb3V0LmphdmEK
aW5kZXggYzU4ZGE0YS4uM2I5OTQ2MCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE2L1hfb3V0LmphdmEK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpTUjMwOC90ZXN0MDE2L1hfb3V0LmphdmEKQEAgLTEsNyArMSw3IEBACiBwdWJsaWMgY2xhc3Mg
WCB7CiAJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewotCQlpbnQgaVtd
ID0gbmV3IEBNYXJrZXIgaW50IEBNYXJrZXJbNF07Ci0JCWludCBqW10gPSBuZXcgQE1hcmtlciBp
bnQgQE1hcmtlcltdIHsgMTAgfTsKKwkJaW50IGlbXSA9IG5ldyBATWFya2VyIGludCBATWFya2Vy
IFs0XTsKKwkJaW50IGpbXSA9IG5ldyBATWFya2VyIGludCBATWFya2VyIFtdIHsgMTAgfTsKIAkJ
Wm9yayB6OwogCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNy9YX291dC5qYXZhIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0
MDE3L1hfb3V0LmphdmEKaW5kZXggZDkxN2IwOS4uZjZhZDExYiAxMDA2NDQKLS0tIGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0
MDE3L1hfb3V0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29y
a3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE3L1hfb3V0LmphdmEKQEAgLTEsNyArMSw3IEBA
CiBwdWJsaWMgY2xhc3MgWCB7CiAJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJn
cykgewogCQlpbnQgaSA9IChATWFya2VyIGludCkgMDsKLQkJaW50IGpbXSA9IChATWFya2VyIGlu
dCBATWFya2VyW10pIG51bGw7CisJCWludCBqW10gPSAoQE1hcmtlciBpbnQgQE1hcmtlciBbXSkg
bnVsbDsKIAkJWm9yayB6OwogCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyNy9YX291dC5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDI3L1hfb3V0LmphdmEKaW5kZXggNzE4MTkwYS4uYTA1MjQ0MSAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDI3L1hfb3V0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI3L1hfb3V0LmphdmEKQEAgLTEs
NyArMSw3IEBACiBwdWJsaWMgY2xhc3MgWCB7CiAJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3Ry
aW5nW10gYXJncykgewotCQlYW10geCA9IG5ldyBATWFya2VyIFggQE1hcmtlcls1XTsKLQkJWFtd
IHgyID0gbmV3IEBNYXJrZXIgWCBATWFya2VyW10geyBudWxsIH07CisJCVhbXSB4ID0gbmV3IEBN
YXJrZXIgWCBATWFya2VyIFs1XTsKKwkJWFtdIHgyID0gbmV3IEBNYXJrZXIgWCBATWFya2VyIFtd
IHsgbnVsbCB9OwogCQlab3JrIHo7CiAJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDM3L1hfb3V0
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySlNSMzA4L3Rlc3QwMzcvWF9vdXQuamF2YQppbmRleCA3NzdhODVkLi44MGM2NmUwIDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySlNSMzA4L3Rlc3QwMzcvWF9vdXQuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzcvWF9vdXQuamF2YQpA
QCAtNCw4ICs0LDggQEAKIAogcHVibGljIGNsYXNzIFggewogCXB1YmxpYyBzdGF0aWMgdm9pZCBt
YWluKFN0cmluZ1tdIGFyZ3MpIHsKLQkJSSBpID0gQE1hcmtlciBZLkBNYXJrZXIgWiBATWFya2Vy
W11bXUBNYXJrZXJbXTo6Zm9vOwotCQlJIGkyID0gQFZhbHVlKCJKb2UiKSBZLkBWYWx1ZTIoQFZh
bHVlKCJKb2UiKSkgQE1hcmtlciBaIEBNYXJrZXJbXVtdQE1hcmtlcltdOjpmb287CisJCUkgaSA9
IEBNYXJrZXIgWS5ATWFya2VyIFogQE1hcmtlciBbXVtdIEBNYXJrZXIgW106OmZvbzsKKwkJSSBp
MiA9IEBWYWx1ZSgiSm9lIikgWS5AVmFsdWUyKEBWYWx1ZSgiSm9lIikpIEBNYXJrZXIgWiBATWFy
a2VyIFtdW10gQE1hcmtlciBbXTo6Zm9vOwogCQlJIGkzID0gQFZhbHVlKCJEdW8iKSBZLkBWYWx1
ZTIoQFZhbHVlKCJKb2UiKSkgQE1hcmtlciBaOjpmb287CiAJCWkuZm9vKDEwKTsKIAkJWm9yayB6
OwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0MDM5L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzkvWF9vdXQuamF2
YQppbmRleCAyN2E2MjlhLi5lZGRkMjIzIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzkvWF9vdXQuamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySlNSMzA4L3Rlc3QwMzkvWF9vdXQuamF2YQpAQCAtMSw2ICsxLDYgQEAKIHB1YmxpYyBjbGFz
cyBYIHsKIAlPYmplY3QgbyA9IChATWFya2VyIFgpIG51bGw7Ci0JT2JqZWN0IHAgPSAoQE1hcmtl
ciBYIEBNYXJrZXJbXSkgbnVsbDsKKwlPYmplY3QgcCA9IChATWFya2VyIFggQE1hcmtlciBbXSkg
bnVsbDsKIAlPYmplY3QgcSA9IChATWFya2VyIGphdmEuQE1hcmtlciB1dGlsLkBNYXJrZXIgTGlz
dDxATWFya2VyIFN0cmluZz5bXSkgbnVsbDsKLQlPYmplY3QgciA9IChATWFya2VyIGphdmEuQE1h
cmtlciB1dGlsLkBNYXJrZXIgTWFwPEBNYXJrZXIgU3RyaW5nLCBATWFya2VyIFN0cmluZz4uQE1h
cmtlciBFbnRyeSBATWFya2VyW10pIG51bGw7CisJT2JqZWN0IHIgPSAoQE1hcmtlciBqYXZhLkBN
YXJrZXIgdXRpbC5ATWFya2VyIE1hcDxATWFya2VyIFN0cmluZywgQE1hcmtlciBTdHJpbmc+LkBN
YXJrZXIgRW50cnkgQE1hcmtlciBbXSkgbnVsbDsKIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0Nv
ZGVGb3JtYXR0ZXJWaXNpdG9yLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5q
YXZhCmluZGV4IDc0MDQ1N2QuLjAwZDBhZjYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3Jt
YXR0ZXJWaXNpdG9yLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZvcm1hdHRlclZpc2l0b3IuamF2
YQpAQCAtNzIwLDcgKzcyMCw3IEBACiAJCQlmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKysp
IHsKIAkJCQlpbnQgZGltZW5zaW9uSW5kZXggPSBhbmNob3IgKyBpOwogCQkJCWlmIChhbm5vdGF0
aW9uc09uRGltZW5zaW9ucyAhPSBudWxsICYmIGFubm90YXRpb25zT25EaW1lbnNpb25zLmxlbmd0
aCA+IGRpbWVuc2lvbkluZGV4KSB7Ci0JCQkJCWJvb2xlYW4gaGFkQW5ub3RhdGlvbnMgPSBmb3Jt
YXRJbmxpbmVBbm5vdGF0aW9ucyhhbm5vdGF0aW9uc09uRGltZW5zaW9uc1tkaW1lbnNpb25JbmRl
eF0sIHNwYWNlQmVmb3JlQW5ub3RhdGlvbiAmJiBpID09IDApOworCQkJCQlib29sZWFuIGhhZEFu
bm90YXRpb25zID0gZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYW5ub3RhdGlvbnNPbkRpbWVuc2lv
bnNbZGltZW5zaW9uSW5kZXhdLCBzcGFjZUJlZm9yZUFubm90YXRpb24pOwogCQkJCQlpZiAoaGFk
QW5ub3RhdGlvbnMgJiYgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsK
IAkJCQl9CiAJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lTEJSQUNLRVQpOwpAQCAtMjgxNSw3ICsyODE1LDcgQEAKIAkJCWludCBkaW1lbnNpb25z
TGVuZ3RoID0gZGltZW5zaW9ucy5sZW5ndGg7CiAJCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVu
c2lvbnNMZW5ndGg7IGkrKykgewogCQkJCWlmIChhcnJheUFsbG9jYXRpb25FeHByZXNzaW9uLmFu
bm90YXRpb25zT25EaW1lbnNpb25zICE9IG51bGwpIHsKLQkJCQkJZm9ybWF0SW5saW5lQW5ub3Rh
dGlvbnMoYXJyYXlBbGxvY2F0aW9uRXhwcmVzc2lvbi5hbm5vdGF0aW9uc09uRGltZW5zaW9uc1tp
XSwgaSA9PSAwKTsKKwkJCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYXJyYXlBbGxvY2F0aW9u
RXhwcmVzc2lvbi5hbm5vdGF0aW9uc09uRGltZW5zaW9uc1tpXSwgdHJ1ZSk7CiAJCQkJfQogCQkJ
CWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0
X2luX2FycmF5X2FsbG9jYXRpb25fZXhwcmVzc2lvbikgewogCQkJCQl0aGlzLnNjcmliZS5zcGFj
ZSgpOwpAQCAtNTI5MCw3ICs1MjkwLDcgQEAKIAkJCQlpZiAoaSAhPSAwKSB0aGlzLnNjcmliZS5z
cGFjZSgpOwogCQkJCWFubm90YXRpb25zW2ldLnRyYXZlcnNlKHRoaXMsIChCbG9ja1Njb3BlKW51
bGwpOwogCQkJfQotCQkJaWYgKGxlbmd0aCA+IDAgJiYgIXRoaXMuaXNOZXh0VG9rZW5QdW5jdHVh
dGlvbigpKSB7CisJCQlpZiAobGVuZ3RoID4gMCAmJiAoIXRoaXMuaXNOZXh0VG9rZW5QdW5jdHVh
dGlvbigpIHx8IHRoaXMuaXNOZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNL
RVQpKSkgewogCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CiAJCQl9CiAJCQlyZXR1cm4gdHJ1ZTs=
</data>

          </attachment>
      

    </bug>

</bugzilla>