<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>353474</bug_id>
          
          <creation_ts>2011-07-31 16:17:00 -0400</creation_ts>
          <short_desc>type converters should include more annotations</short_desc>
          <delta_ts>2011-10-25 02:12:02 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.8 M3</target_milestone>
          
          <blocked>186342</blocked>
    
    <blocked>353472</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1972310</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-07-31 16:17:19 -0400</bug_when>
    <thetext>When converting a method the SourceTypeConverter converts annotations
of the method itself but skips any parameter annotations.
The BinaryTypeConverter does not convert any annotations of methods.

Are there any hidden reasons why this is so, or should we just add the
missing cases?

Given that the model already contains all this information it looks
strange that it is not converted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1972311</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-07-31 16:19:14 -0400</bug_when>
    <thetext>At least the source type version would be required by bug 353472.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1972313</commentid>
    <comment_count>2</comment_count>
      <attachid>200637</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-07-31 16:25:02 -0400</bug_when>
    <thetext>Created attachment 200637
proposed change to SourceTypeConverter

Here&apos;s a trivial change that would solve the issue for SourceTypeConverter.

A change for BinaryTypeConverter would be slightly more involved, if needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1972491</commentid>
    <comment_count>3</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-08-01 10:17:38 -0400</bug_when>
    <thetext>Jay, can you please take a look? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1983026</commentid>
    <comment_count>4</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-08-23 10:15:20 -0400</bug_when>
    <thetext>I think this needs to be updated. I don&apos;t think there is a particular reason for not doing it. If we do it, we should be consistent and do it for both converters.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1989657</commentid>
    <comment_count>5</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-09-06 17:02:51 -0400</bug_when>
    <thetext>I&apos;ve seen bogus warnings from the reconciler when the support for
null-annotations was installed. These warnings happened when a type
with annotations entered compilation via the SourceTypeConverter.
The patch from comment 2 indeed fixed the issue.

However, I couldn&apos;t easily think of a test to challenge the
BinaryTypeConverter in a similar way.
What tests do we have to specifically test the BinaryTypeConverter?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1989751</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-09-07 00:58:53 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; However, I couldn&apos;t easily think of a test to challenge the
&gt; BinaryTypeConverter in a similar way.
&gt; What tests do we have to specifically test the BinaryTypeConverter?

We have a bunch of tests in TypeResolveTests that were added for bug 334783.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2005979</commentid>
    <comment_count>7</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-06 11:59:13 -0400</bug_when>
    <thetext>I&apos;ll prepare a more complete patch as this essentially blocks bug 186342.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2006111</commentid>
    <comment_count>8</comment_count>
      <attachid>204708</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-06 15:00:59 -0400</bug_when>
    <thetext>Created attachment 204708
test &amp; fix

I spent time on trying to find suitable tests.

The SourceTypeConverter can be tested from ASTConverter15Test, e.g.
I included corresponding tests on this behalf.

However, for the BinaryTypeConverter I&apos;m now convinced this issue cannot
be triggered:
Only two clients ever create BinaryTypeConverters:
+ CompletionEngine.complete(IType ...)
+ SelectionEngine.selectType(char[],IType)
For neither scenario would we ever come close to asking for annotations
in a method signature.
I set a breakpoint to the constructor of BinaryTypeConverter and in all of
AllJavaModelTests only two groups of tests triggered this breakpoint:
SnippetCompletionTests (and _1_5) for complete and TypeResolveTests for
selectType. Also these tests give no hint at how we could ever be interested
in the missing annotations.

I don&apos;t think we should implement behavior that can never be triggered.
Besides, in the BinaryTypeConverter the implementation would be more
involved because we don&apos;t have the infra structure in place as we have in
SourceTypeConverter.

Jay, can we release the patch as is? I think this is the best we can do
here and bug 186342 will indeed benefit from this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2007115</commentid>
    <comment_count>9</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-08 16:55:24 -0400</bug_when>
    <thetext>I&apos;m going to release this, since it is needed for the scheduled review for 
bug 186342. Please reopen should you find reasons why BinaryTypeConverter
should also be updated (cf. comment 8).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2007116</commentid>
    <comment_count>10</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-08 16:59:49 -0400</bug_when>
    <thetext>Released as commit de0226254a405a86138be24d23fd7ea72c01b855 for 3.8 M3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2015907</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-10-25 02:12:02 -0400</bug_when>
    <thetext>(In reply to comment #8)

&gt; I don&apos;t think we should implement behavior that can never be triggered.

That is not unreasonable.

Patch looks good. Verified for 3.8 M3.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>200637</attachid>
            <date>2011-07-31 16:25:00 -0400</date>
            <delta_ts>2011-10-06 15:00:59 -0400</delta_ts>
            <desc>proposed change to SourceTypeConverter</desc>
            <filename>Bug_353474_v0.patch</filename>
            <type>text/plain</type>
            <size>1700</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpJ
bmRleDogbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3BhcnNlci9Tb3Vy
Y2VUeXBlQ29udmVydGVyLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBz
ZS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvcGFyc2VyL1NvdXJjZVR5cGVDb252ZXJ0ZXIuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNp
b24gMS43MQpkaWZmIC11IC1yMS43MSBTb3VyY2VUeXBlQ29udmVydGVyLmphdmEKLS0tIG1vZGVs
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wYXJzZXIvU291cmNlVHlwZUNvbnZl
cnRlci5qYXZhCTEgTm92IDIwMTAgMTQ6MTU6NDcgLTAwMDAJMS43MQorKysgbW9kZWwvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3BhcnNlci9Tb3VyY2VUeXBlQ29udmVydGVyLmph
dmEJMzEgSnVsIDIwMTEgMjA6MjE6MDcgLTAwMDAKQEAgLTI4LDYgKzI4LDcgQEAKIGltcG9ydCBv
cmcuZWNsaXBzZS5qZHQuY29yZS5JQW5ub3RhdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQu
Y29yZS5JSW1wb3J0RGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUph
dmFFbGVtZW50OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklMb2NhbFZhcmlhYmxlOwog
aW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklTb3VyY2VSYW5nZTsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmNvcmUuU2lnbmF0dXJlOwpAQCAtMzczLDYgKzM3NCw3IEBACiAJCWNoYXJbXVtdIGFyZ3VtZW50
TmFtZXMgPSBtZXRob2RJbmZvLmdldEFyZ3VtZW50TmFtZXMoKTsKIAkJaW50IGFyZ3VtZW50Q291
bnQgPSBhcmd1bWVudFR5cGVTaWduYXR1cmVzID09IG51bGwgPyAwIDogYXJndW1lbnRUeXBlU2ln
bmF0dXJlcy5sZW5ndGg7CiAJCWlmIChhcmd1bWVudENvdW50ID4gMCkgeworCQkJSUxvY2FsVmFy
aWFibGVbXSBwYXJhbWV0ZXJzID0gbWV0aG9kSGFuZGxlLmdldFBhcmFtZXRlcnMoKTsKIAkJCWxv
bmcgcG9zaXRpb24gPSAoKGxvbmcpIHN0YXJ0IDw8IDMyKSArIGVuZDsKIAkJCW1ldGhvZC5hcmd1
bWVudHMgPSBuZXcgQXJndW1lbnRbYXJndW1lbnRDb3VudF07CiAJCQlmb3IgKGludCBpID0gMDsg
aSA8IGFyZ3VtZW50Q291bnQ7IGkrKykgewpAQCAtMzg3LDYgKzM4OSwxMSBAQAogCQkJCQkJdHlw
ZVJlZmVyZW5jZSwKIAkJCQkJCUNsYXNzRmlsZUNvbnN0YW50cy5BY2NEZWZhdWx0KTsKIAkJCQkv
LyBkbyBub3QgY2FyZSB3aGV0aGVyIHdhcyBmaW5hbCBvciBub3QKKwkJCQkvLyBjb252ZXJ0IDEu
NSBzcGVjaWZpYyBjb25zdHJ1Y3RzIG9ubHkgaWYgY29tcGxpYW5jZSBpcyAxLjUgb3IgYWJvdmUK
KwkJCQlpZiAodGhpcy5oYXMxXzVDb21wbGlhbmNlKSB7CisJCQkJCS8qIGNvbnZlcnQgYW5ub3Rh
dGlvbnMgKi8KKwkJCQkJbWV0aG9kLmFyZ3VtZW50c1tpXS5hbm5vdGF0aW9ucyA9IGNvbnZlcnRB
bm5vdGF0aW9ucyhwYXJhbWV0ZXJzW2ldKTsKKwkJCQl9CiAJCQl9CiAJCX0KIAo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>204708</attachid>
            <date>2011-10-06 15:00:00 -0400</date>
            <delta_ts>2011-10-06 15:00:59 -0400</delta_ts>
            <desc>test &amp; fix</desc>
            <filename>Bug_353474.patch</filename>
            <type>text/plain</type>
            <size>9356</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMTVUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE1VGVzdC5qYXZhCmluZGV4IGM2ZjcwZTguLjJhZjJjODEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMTVUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxNVRlc3QuamF2YQpAQCAtNyw3ICs3LDkgQEAKICAqCiAgKiBDb250cmli
dXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVu
dGF0aW9uCi0gKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IgQnVnIDM0
MjY3MSAtIENsYXNzQ2FzdEV4Y2VwdGlvbjogb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmxvb2t1cC5Tb3VyY2VUeXBlQmluZGluZyBjYW5ub3QgYmUgY2FzdCB0byBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkFycmF5QmluZGluZworICogICAgIFN0ZXBo
YW4gSGVycm1hbm4gLSBDb250cmlidXRpb25zIGZvciAKKyAqICAgICAJCQkJCQkJQnVnIDM0MjY3
MSAtIENsYXNzQ2FzdEV4Y2VwdGlvbjogb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
Lmxvb2t1cC5Tb3VyY2VUeXBlQmluZGluZyBjYW5ub3QgYmUgY2FzdCB0byBvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkFycmF5QmluZGluZworICogICAgIAkJCQkJCQlC
dWcgMzUzNDc0IC0gdHlwZSBjb252ZXJ0ZXJzIHNob3VsZCBpbmNsdWRlIG1vcmUgYW5ub3RhdGlv
bnMKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5kb207CiAKQEAgLTUwLDcgKzUyLDcgQEAKIAlzdGF0aWMgewogLy8JCVRFU1RTX05V
TUJFUlMgPSBuZXcgaW50W10geyAzNTMgfTsKIC8vCQlURVNUU19SQU5HRSA9IG5ldyBpbnRbXSB7
IDMyNSwgLTEgfTsKLS8vCQlURVNUU19OQU1FUyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMjA0In07
CisvLwkJVEVTVFNfTkFNRVMgPSBuZXcgU3RyaW5nW10geyJ0ZXN0QnVnMzUzNDc0In07CiAJfQog
CXB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgpIHsKIAkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3Vp
dGUoQVNUQ29udmVydGVyMTVUZXN0LmNsYXNzKTsKQEAgLTExMzQ4LDUgKzExMzUwLDEwMCBAQAog
ICAgICAgICByaHNUeXBlID0gKChBc3NpZ25tZW50KSgoRXhwcmVzc2lvblN0YXRlbWVudCkoKFN0
YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoMSkpKS5nZXRFeHByZXNzaW9uKCkpLmdldFJpZ2h0SGFu
ZFNpZGUoKS5yZXNvbHZlVHlwZUJpbmRpbmcoKTsKICAgICAgICAgYXNzZXJ0RmFsc2UoIkFzc2ln
bmVtZW50IGNvbXBhdGlibGUiLCByaHNUeXBlLmlzQXNzaWdubWVudENvbXBhdGlibGUoYXNzaWdu
bWVudFR5cGUpKTsKIAl9CisJLy8gQnVnIDM1MzQ3NCAtIHR5cGUgY29udmVydGVycyBzaG91bGQg
aW5jbHVkZSBtb3JlIGFubm90YXRpb25zCisJcHVibGljIHZvaWQgdGVzdEJ1ZzM1MzQ3NCgpIHRo
cm93cyBDb3JlRXhjZXB0aW9uIHsKKwkJCisJCXRoaXMuY3JlYXRlRm9sZGVyKCIvQ29udmVydGVy
MTUvc3JjL3Rlc3RCdWczNTM0NzQvYW5ub3QiKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0JCisJCQki
cGFja2FnZSB0ZXN0QnVnMzUzNDc0LmFubm90O1xuIiArCisJCQkiaW1wb3J0IHN0YXRpYyBqYXZh
LmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS4qO1xuIiArIAorCQkJImltcG9ydCBqYXZhLmxh
bmcuYW5ub3RhdGlvbi4qO1xuIiArIAorCQkJIkBSZXRlbnRpb24oUmV0ZW50aW9uUG9saWN5LkNM
QVNTKVxuIiArIAorCQkJIkBUYXJnZXQoe01FVEhPRCxQQVJBTUVURVIsTE9DQUxfVkFSSUFCTEV9
KVxuIiArIAorCQkJInB1YmxpYyBAaW50ZXJmYWNlIE51bGxhYmxlIHtcbiIgKyAKKwkJCSJ9XG4i
OworCQlnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE1L3NyYy90ZXN0QnVnMzUzNDc0L2Fubm90
L051bGxhYmxlLmphdmEiLCBjb250ZW50cywgdHJ1ZS8qcmVzb2x2ZSovKTsKKworCQl0aGlzLmNy
ZWF0ZUZvbGRlcigiL0NvbnZlcnRlcjE1L3NyYy90ZXN0QnVnMzUzNDc0L3AxIik7CisJCWNvbnRl
bnRzID0JCisJCQkicGFja2FnZSB0ZXN0QnVnMzUzNDc0LnAxO1xuIiArCisJCQkiaW1wb3J0IHRl
c3RCdWczNTM0NzQuYW5ub3QuKjtcbiIgKworCQkJInB1YmxpYyBjbGFzcyBDMSB7XG4iICsKKwkJ
CSIJIHB1YmxpYyBATnVsbGFibGUgU3RyaW5nIGZvbyhATnVsbGFibGUgT2JqZWN0IGFyZykge1xu
IiArCisJCQkiCQlyZXR1cm4gXCJcIjtcbiIgKworCQkJIgkgfVxuIiArCisJCQkifVxuIjsKKwkJ
Z2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxNS9zcmMvdGVzdEJ1ZzM1MzQ3NC9wMS9DMS5qYXZh
IiwgY29udGVudHMsIHRydWUvKnJlc29sdmUqLyk7CisKKwkJdGhpcy53b3JraW5nQ29weSA9IGdl
dFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTUvc3JjL3Rlc3RCdWczNTM0NzQvcDEvQzIuamF2YSIs
IHRydWUvKnJlc29sdmUqLyk7CisJCWNvbnRlbnRzID0KKwkJCSJwYWNrYWdlIHRlc3RCdWczNTM0
NzQucDE7XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgQzIge1xuIiArCisJCQkiCSBwdWJsaWMgU3Ry
aW5nIGJhcihDMSBjMSkge1xuIiArCisJCQkiICAgICAgICByZXR1cm4gYzEuZm9vKG51bGwpO1xu
IiArCisJCQkiICAgIH1cbiIgKworCQkJIn1cbiI7CisJCUFTVE5vZGUgbm9kZSA9IGJ1aWxkQVNU
KAorCQkJCWNvbnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHksCisJCQkJdHJ1ZSk7CisJCWFz
c2VydE5vdE51bGwoIk5vIG5vZGUiLCBub2RlKTsKKwkJYXNzZXJ0RXF1YWxzKCJOb3QgYSBjb21w
aWxhdGlvbiB1bml0IiwgQVNUTm9kZS5DT01QSUxBVElPTl9VTklULCBub2RlLmdldE5vZGVUeXBl
KCkpOworCQlDb21waWxhdGlvblVuaXQgY29tcGlsYXRpb25Vbml0ID0gKENvbXBpbGF0aW9uVW5p
dCkgbm9kZTsKKwkJVHlwZURlY2xhcmF0aW9uIGMyID0gKFR5cGVEZWNsYXJhdGlvbikgY29tcGls
YXRpb25Vbml0LnR5cGVzKCkuZ2V0KDApOworCQlNZXRob2REZWNsYXJhdGlvbiBiYXIgPSAoTWV0
aG9kRGVjbGFyYXRpb24pIGMyLmJvZHlEZWNsYXJhdGlvbnMoKS5nZXQoMCk7CisJCVJldHVyblN0
YXRlbWVudCByZXR1cm5TdGF0ID0gKFJldHVyblN0YXRlbWVudCkgYmFyLmdldEJvZHkoKS5zdGF0
ZW1lbnRzKCkuZ2V0KDApOworCQlNZXRob2RJbnZvY2F0aW9uIGZvb0NhbGwgPSAoTWV0aG9kSW52
b2NhdGlvbikgcmV0dXJuU3RhdC5nZXRFeHByZXNzaW9uKCk7CisJCUlNZXRob2RCaW5kaW5nIHJl
c29sdmVkRm9vID0gZm9vQ2FsbC5yZXNvbHZlTWV0aG9kQmluZGluZygpOworCQlJQW5ub3RhdGlv
bkJpbmRpbmdbXSBwYXJhbWV0ZXJBbm5vdGF0aW9uczAgPSByZXNvbHZlZEZvby5nZXRQYXJhbWV0
ZXJBbm5vdGF0aW9ucygwKTsKKwkJYXNzZXJ0Tm90TnVsbCgiUGFyYW1ldGVyIGFubm90YXRpb24g
c2hvdWxkIG5vdCBiZSBudWxsIiwgcGFyYW1ldGVyQW5ub3RhdGlvbnMwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJTaG91bGQgaGF2ZSBleGFjdGx5IG9uZSBhbm5vdGF0aW9uIiwgMSwgcGFyYW1ldGVyQW5u
b3RhdGlvbnMwLmxlbmd0aCk7CisJCWFzc2VydEVxdWFscygiVW5leHBlY3RlZCBhbm5vdGF0aW9u
IG5hbWUiLCAiTnVsbGFibGUiLCBwYXJhbWV0ZXJBbm5vdGF0aW9uczBbMF0uZ2V0TmFtZSgpKTsK
KwkJCisJCUlBbm5vdGF0aW9uQmluZGluZ1tdIHJldHVybkFubm90YXRpb25zID0gcmVzb2x2ZWRG
b28uZ2V0QW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiUmV0dXJuIGFubm90YXRpb24g
c2hvdWxkIG5vdCBiZSBudWxsIiwgcmV0dXJuQW5ub3RhdGlvbnMpOworCQlhc3NlcnRFcXVhbHMo
IlNob3VsZCBoYXZlIGV4YWN0bHkgb25lIHJldHVybiBhbm5vdGF0aW9uIiwgMSwgcmV0dXJuQW5u
b3RhdGlvbnMubGVuZ3RoKTsKKwkJYXNzZXJ0RXF1YWxzKCJVbmV4cGVjdGVkIGFubm90YXRpb24g
bmFtZSIsICJOdWxsYWJsZSIsIHJldHVybkFubm90YXRpb25zWzBdLmdldE5hbWUoKSk7CisJCWRl
bGV0ZUZvbGRlcigiL0NvbnZlcnRlcjE1L3NyYy90ZXN0QnVnMzUzNDc0Iik7CisJfQorCS8vIEJ1
ZyAzNTM0NzQgLSB0eXBlIGNvbnZlcnRlcnMgc2hvdWxkIGluY2x1ZGUgbW9yZSBhbm5vdGF0aW9u
cworCS8vIHNlY29uZGFyeSB0eXBlIGNvbWVzIGZyb20gYmluYXJ5CisJcHVibGljIHZvaWQgdGVz
dEJ1ZzM1MzQ3NGEoKSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiB7CisJCVN0cmluZyBqYXJMb2NhdGlv
biA9IGdldFdvcmtzcGFjZVBhdGgoKSsiQ29udmVydGVyMTUvYmlucy9idWczNTM0NzQuamFyIjsK
KwkJSUphdmFQcm9qZWN0IGpwID0gY3JlYXRlSmF2YVByb2plY3QoIkJ1ZzM1MzQ2NGEiLCBuZXcg
U3RyaW5nW117InNyYyJ9LCBuZXcgU3RyaW5nW117IkNPTlZFUlRFUl9KQ0wxNV9MSUIiLCBqYXJM
b2NhdGlvbn0sICJiaW4iLCAiMS41Iik7CisJCXRyeSB7CisJCQl0aGlzLndvcmtpbmdDb3B5ID0g
Z2V0V29ya2luZ0NvcHkoIi9CdWczNTM0NjRhL3NyYy90ZXN0QnVnMzUzNDc0L3AxL0MyLmphdmEi
LCB0cnVlLypyZXNvbHZlKi8pOworCQkJU3RyaW5nIGNvbnRlbnRzID0KKwkJCQkicGFja2FnZSB0
ZXN0QnVnMzUzNDc0LnAxO1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBDMiB7XG4iICsKKwkJCQki
CSBwdWJsaWMgU3RyaW5nIGJhcihDMWEgYzEpIHtcbiIgKworCQkJCSIgICAgICAgIHJldHVybiBj
MS5mb28obnVsbCk7XG4iICsKKwkJCQkiICAgIH1cbiIgKworCQkJCSJ9XG4iOworCQkJQVNUTm9k
ZSBub2RlID0gYnVpbGRBU1QoCisJCQkJCWNvbnRlbnRzLAorCQkJCQl0aGlzLndvcmtpbmdDb3B5
LAorCQkJCQl0cnVlKTsKKwkJCWFzc2VydE5vdE51bGwoIk5vIG5vZGUiLCBub2RlKTsKKwkJCWFz
c2VydEVxdWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05f
VU5JVCwgbm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJCUNvbXBpbGF0aW9uVW5pdCBjb21waWxhdGlv
blVuaXQgPSAoQ29tcGlsYXRpb25Vbml0KSBub2RlOworCQkJVHlwZURlY2xhcmF0aW9uIGMyID0g
KFR5cGVEZWNsYXJhdGlvbikgY29tcGlsYXRpb25Vbml0LnR5cGVzKCkuZ2V0KDApOworCQkJTWV0
aG9kRGVjbGFyYXRpb24gYmFyID0gKE1ldGhvZERlY2xhcmF0aW9uKSBjMi5ib2R5RGVjbGFyYXRp
b25zKCkuZ2V0KDApOworCQkJUmV0dXJuU3RhdGVtZW50IHJldHVyblN0YXQgPSAoUmV0dXJuU3Rh
dGVtZW50KSBiYXIuZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoMCk7CisJCQlNZXRob2RJbnZv
Y2F0aW9uIGZvb0NhbGwgPSAoTWV0aG9kSW52b2NhdGlvbikgcmV0dXJuU3RhdC5nZXRFeHByZXNz
aW9uKCk7CisJCQlJTWV0aG9kQmluZGluZyByZXNvbHZlZEZvbyA9IGZvb0NhbGwucmVzb2x2ZU1l
dGhvZEJpbmRpbmcoKTsKKwkJCUlBbm5vdGF0aW9uQmluZGluZ1tdIHBhcmFtZXRlckFubm90YXRp
b25zMCA9IHJlc29sdmVkRm9vLmdldFBhcmFtZXRlckFubm90YXRpb25zKDApOworCQkJYXNzZXJ0
Tm90TnVsbCgiUGFyYW1ldGVyIGFubm90YXRpb24gc2hvdWxkIG5vdCBiZSBudWxsIiwgcGFyYW1l
dGVyQW5ub3RhdGlvbnMwKTsKKwkJCWFzc2VydEVxdWFscygiU2hvdWxkIGhhdmUgZXhhY3RseSBv
bmUgYW5ub3RhdGlvbiIsIDEsIHBhcmFtZXRlckFubm90YXRpb25zMC5sZW5ndGgpOworCQkJYXNz
ZXJ0RXF1YWxzKCJVbmV4cGVjdGVkIGFubm90YXRpb24gbmFtZSIsICJOdWxsYWJsZSIsIHBhcmFt
ZXRlckFubm90YXRpb25zMFswXS5nZXROYW1lKCkpOworCQkJCisJCQlJQW5ub3RhdGlvbkJpbmRp
bmdbXSByZXR1cm5Bbm5vdGF0aW9ucyA9IHJlc29sdmVkRm9vLmdldEFubm90YXRpb25zKCk7CisJ
CQlhc3NlcnROb3ROdWxsKCJSZXR1cm4gYW5ub3RhdGlvbiBzaG91bGQgbm90IGJlIG51bGwiLCBy
ZXR1cm5Bbm5vdGF0aW9ucyk7CisJCQlhc3NlcnRFcXVhbHMoIlNob3VsZCBoYXZlIGV4YWN0bHkg
b25lIHJldHVybiBhbm5vdGF0aW9uIiwgMSwgcmV0dXJuQW5ub3RhdGlvbnMubGVuZ3RoKTsKKwkJ
CWFzc2VydEVxdWFscygiVW5leHBlY3RlZCBhbm5vdGF0aW9uIG5hbWUiLCAiTnVsbGFibGUiLCBy
ZXR1cm5Bbm5vdGF0aW9uc1swXS5nZXROYW1lKCkpOworCQl9IGZpbmFsbHkgeworCQkJZGVsZXRl
UHJvamVjdChqcCk7CisJCX0KKwl9CiAKIH0KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvQ29u
dmVydGVyMTUvYmlucy9idWczNTM0NzQuamFyIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0NvbnZlcnRlcjE1L2JpbnMvYnVnMzUzNDc0LmphcgpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5mMjQ2NDBlCi0tLSAvZGV2L251bGwKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0NvbnZlcnRlcjE1L2JpbnMv
YnVnMzUzNDc0LmphcgpCaW5hcnkgZmlsZXMgZGlmZmVyCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcGFyc2Vy
L1NvdXJjZVR5cGVDb252ZXJ0ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wYXJzZXIvU291cmNlVHlwZUNvbnZlcnRl
ci5qYXZhCmluZGV4IGE1ZTRhZjMuLmZmYWU0MzMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wYXJzZXIvU291
cmNlVHlwZUNvbnZlcnRlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wYXJzZXIvU291cmNlVHlwZUNvbnZlcnRl
ci5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHly
aWdodCAoYykgMjAwMCwgMjAxMCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHly
aWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCBy
aWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlh
bHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2Ug
UHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRp
b24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTcsNyArNyw5IEBACiAgKgogICogQ29udHJpYnV0
b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRh
dGlvbgotICogICAgIFN0ZXBoYW4gSGVycm1hbm4gPHN0ZXBoYW5AY3MudHUtYmVybGluLmRlPiAt
IFR5cGVDb252ZXJ0ZXJzIGRvbid0IHNldCBlbmNsb3NpbmdUeXBlIC0gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTMyMDg0MQorICogICAgIFN0ZXBoYW4gSGVy
cm1hbm4gPHN0ZXBoYW5AY3MudHUtYmVybGluLmRlPiAtIENvbnRyaWJ1dGlvbnMgZm9yCisgKiAg
ICAgCQkJCQkJCQlCdWcgMzIwODQxIC0gVHlwZUNvbnZlcnRlcnMgZG9uJ3Qgc2V0IGVuY2xvc2lu
Z1R5cGUKKyAqICAgICAJCQkJCQkJCUJ1ZyAzNTM0NzQgLSB0eXBlIGNvbnZlcnRlcnMgc2hvdWxk
IGluY2x1ZGUgbW9yZSBhbm5vdGF0aW9ucwogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNr
YWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5wYXJzZXI7CiAKQEAgLTI4LDYg
KzMwLDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQW5ub3RhdGlvbjsKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JSW1wb3J0RGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmNvcmUuSUphdmFFbGVtZW50OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3Jl
LklMb2NhbFZhcmlhYmxlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklTb3VyY2VSYW5n
ZTsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRpb247CiBpbXBv
cnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuU2lnbmF0dXJlOwpAQCAtMzczLDYgKzM3Niw3IEBACiAJ
CWNoYXJbXVtdIGFyZ3VtZW50TmFtZXMgPSBtZXRob2RJbmZvLmdldEFyZ3VtZW50TmFtZXMoKTsK
IAkJaW50IGFyZ3VtZW50Q291bnQgPSBhcmd1bWVudFR5cGVTaWduYXR1cmVzID09IG51bGwgPyAw
IDogYXJndW1lbnRUeXBlU2lnbmF0dXJlcy5sZW5ndGg7CiAJCWlmIChhcmd1bWVudENvdW50ID4g
MCkgeworCQkJSUxvY2FsVmFyaWFibGVbXSBwYXJhbWV0ZXJzID0gbWV0aG9kSGFuZGxlLmdldFBh
cmFtZXRlcnMoKTsKIAkJCWxvbmcgcG9zaXRpb24gPSAoKGxvbmcpIHN0YXJ0IDw8IDMyKSArIGVu
ZDsKIAkJCW1ldGhvZC5hcmd1bWVudHMgPSBuZXcgQXJndW1lbnRbYXJndW1lbnRDb3VudF07CiAJ
CQlmb3IgKGludCBpID0gMDsgaSA8IGFyZ3VtZW50Q291bnQ7IGkrKykgewpAQCAtMzg3LDYgKzM5
MSwxMSBAQAogCQkJCQkJdHlwZVJlZmVyZW5jZSwKIAkJCQkJCUNsYXNzRmlsZUNvbnN0YW50cy5B
Y2NEZWZhdWx0KTsKIAkJCQkvLyBkbyBub3QgY2FyZSB3aGV0aGVyIHdhcyBmaW5hbCBvciBub3QK
KwkJCQkvLyBjb252ZXJ0IDEuNSBzcGVjaWZpYyBjb25zdHJ1Y3RzIG9ubHkgaWYgY29tcGxpYW5j
ZSBpcyAxLjUgb3IgYWJvdmUKKwkJCQlpZiAodGhpcy5oYXMxXzVDb21wbGlhbmNlKSB7CisJCQkJ
CS8qIGNvbnZlcnQgYW5ub3RhdGlvbnMgKi8KKwkJCQkJbWV0aG9kLmFyZ3VtZW50c1tpXS5hbm5v
dGF0aW9ucyA9IGNvbnZlcnRBbm5vdGF0aW9ucyhwYXJhbWV0ZXJzW2ldKTsKKwkJCQl9CiAJCQl9
CiAJCX0KIAo=
</data>

          </attachment>
      

    </bug>

</bugzilla>