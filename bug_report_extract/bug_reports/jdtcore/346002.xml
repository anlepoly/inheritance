<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>346002</bug_id>
          
          <creation_ts>2011-05-16 17:09:00 -0400</creation_ts>
          <short_desc>Import of User Library with invalid path hoses User Library Dialog -- can not fix</short_desc>
          <delta_ts>2011-05-23 00:28:04 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>Macintosh</rep_platform>
          <op_sys>Mac OS X - Carbon (unsup.)</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>3.7 RC2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel Mills">nat</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>markus_keller</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>satyam.kandula</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="42747"
          type_id="1"
          status="+"
          setter="satyam.kandula"
    />
    <flag name="review"
          id="42748"
          type_id="1"
          status="+"
          setter="markus_keller"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1931248</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel Mills">nat</who>
    <bug_when>2011-05-16 17:09:07 -0400</bug_when>
    <thetext>Build Identifier: M20110218-0911

A user library produced on a Windows machine, using external Jar file paths with C:\directory\file.jar was imported without first being fixed into an Eclipse on a MAC.  This causes the contructor for UserLibraryManager to fail in init when the UserLibrary attempts to createFromString (line 188) because the JavaCore.newLibraryEntry method on line 4095 throws an AssertionFaildException Path for IClasspathEntry must be absolute: C:/directory/file.jar.  I tried creating a plugin to allow me to call removeUserLibrary(strULName) but because I can&apos;t get the UserLibraryManager to construct the object I can&apos;t remove it from the list.  The UserLibrary dialog is hosed due to this error (e.g., you can&apos;t see even the working entries, just the error information).

I would recommend a few possible fixes.
a) don&apos;t import entries that cause the exception attempting to reference the UserLibrary (perhaps show a dialog for the entries not being imported so the user knows a problem occurred)
b) catch the exception thrown when initializing the User Library dialog and either show the errant entries in the UserLibraries dialog the way they are when the reference a valid path to a non-existant file so at least they could be edited or deleted, or show the error with a Remove invalid entry? OK/Cancel so the dialog can display the valid entries and the invalid ones are gone to be added manually with correct content by the user.

It appears there is an encoding in the user library file (e.g., &quot;WINDOWS-1252&quot;) -- if going to Linux or MAC OS, perhaps at least any leading X: could be removed during import so the exception isn&apos;t thrown and just a bad entry is displayed and able to be edited?



Reproducible: Always

Steps to Reproduce:
1.Create a userlibrary export file referencing a Windows OS style path:
&lt;?xml version=&quot;1.0&quot; encoding=&quot;WINDOWS-1252&quot; standalone=&quot;no&quot;?&gt;
&lt;eclipse-userlibraries version=&quot;2&quot;&gt;
    &lt;library name=&quot;MyLibTest&quot; systemlibrary=&quot;false&quot;&gt;
        &lt;archive path=&quot;C:/SQLLIB/java/sqlj.zip&quot;/&gt;
        &lt;archive path=&quot;C:/SQLLIB/java/Common.jar&quot;/&gt;
    &lt;/library&gt;
&lt;/eclipse-userlibraries&gt;
2. On a MAC, import this file into the Window / Preferences / Java / Build Path / User Libraries dialog.
3.Try to reopen the User Library dialog -- you will get the error and not be able to remove the MyLibTest user library from the system.  Nor can you add other user libraries.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1931315</commentid>
    <comment_count>1</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-05-16 20:14:00 -0400</bug_when>
    <thetext>Jay, please follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1931402</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-17 02:28:26 -0400</bug_when>
    <thetext>Reproduced with I20110424-0800.

Markus, do you think it&apos;s possible to address this while importing itself? If we want to handle it from the Core, then we might have to be content with an error log rather than display the error to the user.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1931404</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-17 02:32:29 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; Reproduced with I20110424-0800.
&gt; 
&gt; Markus, do you think it&apos;s possible to address this while importing itself? If
&gt; we want to handle it from the Core, then we might have to be content with an
&gt; error log rather than display the error to the user.

Having said that, I still think it&apos;s better if Core handles the exception to cover the scenarios where the exported file might have been altered outside eclipse.

Nathaniel,
Talking about the encoding, the way it works is: if the location selected for export is inside the workspace, the encoding is taken from the workspace or the project settings. Otherwise, UTF-8 is considered as the default encoding.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1931645</commentid>
    <comment_count>4</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-05-17 08:40:59 -0400</bug_when>
    <thetext>Jay, please prepare a patch. Depending on the risk assessment, it might qualify for RC2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1931964</commentid>
    <comment_count>5</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2011-05-17 11:07:13 -0400</bug_when>
    <thetext>I agree this should be fixed for RC2.

I quickly investigated why the Windows-style Path &quot;C:/SQLLIB/java/sqlj.zip&quot; came into the system at all. Looks like it&apos;s because UserLibraryPreferencePage$LoadSaveDialog.loadLibraries(File) line: 704
now uses &quot;Path.fromPortableString(..)&quot; (to fix bug 78309 and bug 96222).

I guess JDT Core should use a similar approach. Path.fromPortableString(..) resolves a &quot;C:/...&quot;=like path to an absolute path, so if everything works well afterwards, the AFE should not be thrown any more. It would be good to keep the import working even if one of the paths doesn&apos;t resolve to a file on disk. This way, it&apos;s much easier for the user to correct the situation after the import.

Note that you also have to increase the version number and keep migration code for the old path format. 


Nathaniel: To fix the situation in an older build, please quit Eclipse and then manually edit &quot;.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.jdt.core.prefs&quot; and remove the offending
&quot;org.eclipse.jdt.core.userLibrary.MyLibTest=...&quot; entry.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932026</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-17 11:42:50 -0400</bug_when>
    <thetext>I am working on a fix for RC2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932635</commentid>
    <comment_count>7</comment_count>
      <attachid>195942</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-18 05:32:49 -0400</bug_when>
    <thetext>Created attachment 195942
Propsed fix

There are two parts to this fix:

1. As suggested by Markus, to use portable path for user libraries with backward compatibility.
2. Handle exception to cover other scenarios where the path might be invalid. Here I considered two alternatives in case of an exception: 
  i) Remove the preference from the storage for the corrupt library and continue
  ii) Preserve the preference in the storage but do not consider the corresponding user library.

I have decided go with the first, just as has been done in the case of an IOException with the existing code.

The tests are passing on Mac and Windows XP and currently being run on Linux. I will update after the tests complete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932712</commentid>
    <comment_count>8</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2011-05-18 07:51:45 -0400</bug_when>
    <thetext>The changes are good in general. Minor comments. 
1. The test throws an exception while setting an invalid entry through preferences. As of now, this exception is not being handled through the patch and I think this is fine, as this invalid entry couldn&apos;t be given through the UI. 
2. Personally, I feel the following code in UserLibrary.java could be better laid
#######
IPath entryPath = version.equals(VERSION_ONE) ? Path.fromOSString(pathString) : Path.fromPortableString(pathString);

IPath sourceAttachPath = null;
IPath sourceAttachRootPath = null;
if (sourceAttachString != null)
    sourceAttachPath = version.equals(VERSION_ONE) ? Path.fromOSString(sourceAttachString) : Path.fromPortableString(sourceAttachString);
if (sourceAttachRootString != null)
    sourceAttachRootPath = version.equals(VERSION_ONE) ? Path.fromOSString(sourceAttachRootString) : Path.fromPortableString(sourceAttachRootString);
########
as 
#######
if (entryPath.equals(VERSION_ONE)) {
    entryPath = ... // from path
    if (sourceAttachString != null) sourceAttachPath = ...
    if (sourceAttachRootString != null) sourceAttachRootPath = ...
} else { // use portable strings
    entryPath = ... // from portable 
    ....
}
########</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932787</commentid>
    <comment_count>9</comment_count>
    <who name="Nathaniel Mills">nat</who>
    <bug_when>2011-05-18 09:00:37 -0400</bug_when>
    <thetext>Thank you all very much -- I appreciate the work around proposed by Marcus.  I don&apos;t know why grep wasn&apos;t finding this org.eclipse.jdt.core.prefs file (perhaps ignoring the . prefixed files as though they were hidden (I was searching on Windows with a cygwin based grep).  The fix worked perfectly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932823</commentid>
    <comment_count>10</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2011-05-18 09:39:10 -0400</bug_when>
    <thetext>Looks good and works fine, though I agree with Satyam that a single version test would be nicer to read.

Cosmetics: Missing space in &quot;catch(ClasspathEntry.AssertionFailedException e)&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932828</commentid>
    <comment_count>11</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2011-05-18 09:43:24 -0400</bug_when>
    <thetext>Unfortunately, you don&apos;t get an error flag right after importing, see bug 232815. But you get it when you visit the preference page the next time or when you try to build a project with a bad user lib on the build path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1932976</commentid>
    <comment_count>12</comment_count>
      <attachid>195987</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-18 11:09:27 -0400</bug_when>
    <thetext>Created attachment 195987
Updated patch

Patch incorporates comments from Satyam and Markus.
Will release it after running few more tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1933274</commentid>
    <comment_count>13</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-05-18 15:16:58 -0400</bug_when>
    <thetext>Makes sure all copyrights are accurate. This is not the case in this last patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1933280</commentid>
    <comment_count>14</comment_count>
      <attachid>196039</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-05-18 15:21:56 -0400</bug_when>
    <thetext>Created attachment 196039
Same patch with updated copyrights</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1933481</commentid>
    <comment_count>15</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-19 01:17:06 -0400</bug_when>
    <thetext>Thanks for the patch, Olivier.
Released in HEAD for 3.7 RC2. Tests pass in Linux and Mac too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1934541</commentid>
    <comment_count>16</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2011-05-20 05:12:37 -0400</bug_when>
    <thetext>Verified in I20110519-1138 on the Mac.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1935540</commentid>
    <comment_count>17</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-05-23 00:28:04 -0400</bug_when>
    <thetext>verified by Markus. Marking &apos;VERIFIED&apos;.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>195942</attachid>
            <date>2011-05-18 05:32:00 -0400</date>
            <delta_ts>2011-05-18 11:09:27 -0400</delta_ts>
            <desc>Propsed fix</desc>
            <filename>bug_346002.txt</filename>
            <type>text/plain</type>
            <size>9917</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBtb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeS5q
YXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeS5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xNA0KZGlmZiAtdSAtcjEuMTQgVXNlckxpYnJh
cnkuamF2YQ0KLS0tIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJy
YXJ5LmphdmEJMjcgSnVuIDIwMDggMTY6MDM6NTEgLTAwMDAJMS4xNA0KKysrIG1vZGVsL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJyYXJ5LmphdmEJMTggTWF5IDIwMTEgMDg6
NTg6MTggLTAwMDANCkBAIC0zOSw3ICszOSw4IEBADQogICovDQogcHVibGljIGNsYXNzIFVzZXJM
aWJyYXJ5IHsNCiANCi0JcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIENVUlJFTlRfVkVSU0lP
Tj0gIjEiOyAvLyROT04tTkxTLTEkDQorCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBWRVJT
SU9OX09ORSA9ICIxIjsgLy8kTk9OLU5MUy0xJA0KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJp
bmcgQ1VSUkVOVF9WRVJTSU9OPSAiMiI7IC8vJE5PTi1OTFMtMSQNCiANCiAJcHJpdmF0ZSBzdGF0
aWMgZmluYWwgU3RyaW5nIFRBR19WRVJTSU9OPSAidmVyc2lvbiI7IC8vJE5PTi1OTFMtMSQNCiAJ
cHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRBR19VU0VSTElCUkFSWT0gInVzZXJsaWJyYXJ5
IjsgLy8kTk9OLU5MUy0xJA0KQEAgLTExMiwxMyArMTEzLDEzIEBADQogCQkJQ2xhc3NwYXRoRW50
cnkgY3BFbnRyeSA9IChDbGFzc3BhdGhFbnRyeSkgZW50cmllc1tpXTsNCiANCiAJCQlIYXNoTWFw
IGFyY2hpdmUgPSBuZXcgSGFzaE1hcCgpOw0KLQkJCWFyY2hpdmUucHV0KFRBR19QQVRILCBjcEVu
dHJ5LmdldFBhdGgoKS50b1N0cmluZygpKTsNCisJCQlhcmNoaXZlLnB1dChUQUdfUEFUSCwgY3BF
bnRyeS5nZXRQYXRoKCkudG9Qb3J0YWJsZVN0cmluZygpKTsNCiAJCQlJUGF0aCBzb3VyY2VBdHRh
Y2g9IGNwRW50cnkuZ2V0U291cmNlQXR0YWNobWVudFBhdGgoKTsNCiAJCQlpZiAoc291cmNlQXR0
YWNoICE9IG51bGwpDQotCQkJCWFyY2hpdmUucHV0KFRBR19TT1VSQ0VBVFRBQ0hNRU5ULCBzb3Vy
Y2VBdHRhY2gpOw0KKwkJCQlhcmNoaXZlLnB1dChUQUdfU09VUkNFQVRUQUNITUVOVCwgc291cmNl
QXR0YWNoLnRvUG9ydGFibGVTdHJpbmcoKSk7DQogCQkJSVBhdGggc291cmNlQXR0YWNoUm9vdD0g
Y3BFbnRyeS5nZXRTb3VyY2VBdHRhY2htZW50Um9vdFBhdGgoKTsNCiAJCQlpZiAoc291cmNlQXR0
YWNoUm9vdCAhPSBudWxsKQ0KLQkJCQlhcmNoaXZlLnB1dChUQUdfU09VUkNFQVRUQUNITUVOVFJP
T1QsIHNvdXJjZUF0dGFjaFJvb3QpOw0KKwkJCQlhcmNoaXZlLnB1dChUQUdfU09VUkNFQVRUQUNI
TUVOVFJPT1QsIHNvdXJjZUF0dGFjaFJvb3QudG9Qb3J0YWJsZVN0cmluZygpKTsNCiANCiAJCQli
b29sZWFuIGhhc0V4dHJhQXR0cmlidXRlcyA9IGNwRW50cnkuZXh0cmFBdHRyaWJ1dGVzICE9IG51
bGwgJiYgY3BFbnRyeS5leHRyYUF0dHJpYnV0ZXMubGVuZ3RoICE9IDA7DQogCQkJYm9vbGVhbiBo
YXNSZXN0cmljdGlvbnMgPSBjcEVudHJ5LmdldEFjY2Vzc1J1bGVTZXQoKSAhPSBudWxsOyAvLyBh
Y2Nlc3MgcnVsZSBzZXQgaXMgbnVsbCBpZiBubyBhY2Nlc3MgcnVsZXMNCkBAIC0xNjEsOSArMTYy
LDcgQEANCiAJCWlmICghY3BFbGVtZW50LmdldE5vZGVOYW1lKCkuZXF1YWxzSWdub3JlQ2FzZShU
QUdfVVNFUkxJQlJBUlkpKSB7DQogCQkJdGhyb3cgbmV3IElPRXhjZXB0aW9uKE1lc3NhZ2VzLmZp
bGVfYmFkRm9ybWF0KTsNCiAJCX0NCi0JCS8vIFN0cmluZyB2ZXJzaW9uPSBjcEVsZW1lbnQuZ2V0
QXR0cmlidXRlKFRBR19WRVJTSU9OKTsNCi0JCS8vIGluIGNhc2Ugd2UgdXBkYXRlIHRoZSBmb3Jt
YXQ6IGFkZCBjb2RlIHRvIHJlYWQgb2xkZXIgdmVyc2lvbnMNCi0NCisJCVN0cmluZyB2ZXJzaW9u
PSBjcEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19WRVJTSU9OKTsNCiAJCWJvb2xlYW4gaXNTeXN0
ZW09IEJvb2xlYW4udmFsdWVPZihjcEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19TWVNURU1MSUJS
QVJZKSkuYm9vbGVhblZhbHVlKCk7DQogDQogCQlOb2RlTGlzdCBsaXN0PSBjcEVsZW1lbnQuZ2V0
Q2hpbGROb2RlcygpOw0KQEAgLTE3NiwxNiArMTc1LDI2IEBADQogCQkJaWYgKG5vZGUuZ2V0Tm9k
ZVR5cGUoKSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkgew0KIAkJCQlFbGVtZW50IGVsZW1lbnQ9IChF
bGVtZW50KSBub2RlOw0KIAkJCQlpZiAoZWxlbWVudC5nZXROb2RlTmFtZSgpLmVxdWFscyhUQUdf
QVJDSElWRSkpIHsNCi0JCQkJCVN0cmluZyBwYXRoID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoVEFH
X1BBVEgpOw0KLQkJCQkJSVBhdGggc291cmNlQXR0YWNoPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShU
QUdfU09VUkNFQVRUQUNITUVOVCkgPyBuZXcgUGF0aChlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdf
U09VUkNFQVRUQUNITUVOVCkpIDogbnVsbDsNCi0JCQkJCUlQYXRoIHNvdXJjZUF0dGFjaFJvb3Q9
IGVsZW1lbnQuaGFzQXR0cmlidXRlKFRBR19TT1VSQ0VBVFRBQ0hNRU5UUk9PVCkgPyBuZXcgUGF0
aChlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVFJPT1QpKSA6IG51bGw7
DQorCQkJCQlTdHJpbmcgcGF0aFN0cmluZyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19QQVRI
KTsNCisJCQkJCVN0cmluZyBzb3VyY2VBdHRhY2hTdHJpbmcgPSBlbGVtZW50Lmhhc0F0dHJpYnV0
ZShUQUdfU09VUkNFQVRUQUNITUVOVCkgPyBlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdfU09VUkNF
QVRUQUNITUVOVCkgOiBudWxsOw0KKwkJCQkJU3RyaW5nIHNvdXJjZUF0dGFjaFJvb3RTdHJpbmcg
PSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVFJPT1QpID8gZWxlbWVu
dC5nZXRBdHRyaWJ1dGUoVEFHX1NPVVJDRUFUVEFDSE1FTlRST09UKSA6IG51bGw7DQorCQkJCQlJ
UGF0aCBlbnRyeVBhdGggPSB2ZXJzaW9uLmVxdWFscyhWRVJTSU9OX09ORSkgPyBQYXRoLmZyb21P
U1N0cmluZyhwYXRoU3RyaW5nKSA6IFBhdGguZnJvbVBvcnRhYmxlU3RyaW5nKHBhdGhTdHJpbmcp
Ow0KKw0KKwkJCQkJSVBhdGggc291cmNlQXR0YWNoUGF0aCA9IG51bGw7DQorCQkJCQlJUGF0aCBz
b3VyY2VBdHRhY2hSb290UGF0aCA9IG51bGw7DQorCQkJCQlpZiAoc291cmNlQXR0YWNoU3RyaW5n
ICE9IG51bGwpDQorCQkJCQkJc291cmNlQXR0YWNoUGF0aCA9IHZlcnNpb24uZXF1YWxzKFZFUlNJ
T05fT05FKSA/IFBhdGguZnJvbU9TU3RyaW5nKHNvdXJjZUF0dGFjaFN0cmluZykgOiBQYXRoLmZy
b21Qb3J0YWJsZVN0cmluZyhzb3VyY2VBdHRhY2hTdHJpbmcpOw0KKwkJCQkJCQ0KKwkJCQkJaWYg
KHNvdXJjZUF0dGFjaFJvb3RTdHJpbmcgIT0gbnVsbCkNCisJCQkJCQlzb3VyY2VBdHRhY2hSb290
UGF0aCA9IHZlcnNpb24uZXF1YWxzKFZFUlNJT05fT05FKSA/IFBhdGguZnJvbU9TU3RyaW5nKHNv
dXJjZUF0dGFjaFJvb3RTdHJpbmcpIDogUGF0aC5mcm9tUG9ydGFibGVTdHJpbmcoc291cmNlQXR0
YWNoUm9vdFN0cmluZyk7DQorCQkJCQkNCiAJCQkJCU5vZGVMaXN0IGNoaWxkcmVuID0gZWxlbWVu
dC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOyAvLyROT04tTkxTLTEkDQogCQkJCQlib29sZWFu
W10gZm91bmRDaGlsZHJlbiA9IG5ldyBib29sZWFuW2NoaWxkcmVuLmdldExlbmd0aCgpXTsNCiAJ
CQkJCU5vZGVMaXN0IGF0dHJpYnV0ZUxpc3QgPSBDbGFzc3BhdGhFbnRyeS5nZXRDaGlsZEF0dHJp
YnV0ZXMoQ2xhc3NwYXRoRW50cnkuVEFHX0FUVFJJQlVURVMsIGNoaWxkcmVuLCBmb3VuZENoaWxk
cmVuKTsNCiAJCQkJCUlDbGFzc3BhdGhBdHRyaWJ1dGVbXSBleHRyYUF0dHJpYnV0ZXMgPSBDbGFz
c3BhdGhFbnRyeS5kZWNvZGVFeHRyYUF0dHJpYnV0ZXMoYXR0cmlidXRlTGlzdCk7DQogCQkJCQlh
dHRyaWJ1dGVMaXN0ID0gQ2xhc3NwYXRoRW50cnkuZ2V0Q2hpbGRBdHRyaWJ1dGVzKENsYXNzcGF0
aEVudHJ5LlRBR19BQ0NFU1NfUlVMRVMsIGNoaWxkcmVuLCBmb3VuZENoaWxkcmVuKTsNCiAJCQkJ
CUlBY2Nlc3NSdWxlW10gYWNjZXNzUnVsZXMgPSBDbGFzc3BhdGhFbnRyeS5kZWNvZGVBY2Nlc3NS
dWxlcyhhdHRyaWJ1dGVMaXN0KTsNCi0JCQkJCUlDbGFzc3BhdGhFbnRyeSBlbnRyeSA9IEphdmFD
b3JlLm5ld0xpYnJhcnlFbnRyeShuZXcgUGF0aChwYXRoKSwgc291cmNlQXR0YWNoLCBzb3VyY2VB
dHRhY2hSb290LCBhY2Nlc3NSdWxlcywgZXh0cmFBdHRyaWJ1dGVzLCBmYWxzZS8qbm90IGV4cG9y
dGVkKi8pOw0KKwkJCQkJSUNsYXNzcGF0aEVudHJ5IGVudHJ5ID0gSmF2YUNvcmUubmV3TGlicmFy
eUVudHJ5KGVudHJ5UGF0aCwgc291cmNlQXR0YWNoUGF0aCwgc291cmNlQXR0YWNoUm9vdFBhdGgs
IGFjY2Vzc1J1bGVzLCBleHRyYUF0dHJpYnV0ZXMsIGZhbHNlLypub3QgZXhwb3J0ZWQqLyk7DQog
CQkJCQlyZXMuYWRkKGVudHJ5KTsNCiAJCQkJfQ0KIAkJCX0NCkluZGV4OiBtb2RlbC9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeU1hbmFnZXIuamF2YQ0KPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KUkNTIGZpbGU6IC9jdnNyb290L2VjbGlwc2Uvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvVXNlckxpYnJhcnlNYW5hZ2VyLmphdmEsdg0K
cmV0cmlldmluZyByZXZpc2lvbiAxLjIwDQpkaWZmIC11IC1yMS4yMCBVc2VyTGlicmFyeU1hbmFn
ZXIuamF2YQ0KLS0tIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJy
YXJ5TWFuYWdlci5qYXZhCTggQXByIDIwMTAgMTA6MDU6NTIgLTAwMDAJMS4yMA0KKysrIG1vZGVs
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJyYXJ5TWFuYWdlci5qYXZhCTE4
IE1heSAyMDExIDA4OjU4OjE4IC0wMDAwDQpAQCAtODQsNiArODQsMTEgQEANCiAJCQkJCQlpbnN0
YW5jZVByZWZlcmVuY2VzLnJlbW92ZShwcm9wZXJ0eU5hbWUpOw0KIAkJCQkJCXByZWZlcmVuY2Vz
TmVlZEZsdXNoID0gdHJ1ZTsNCiAJCQkJCQljb250aW51ZTsNCisJCQkJCX0gY2F0Y2goQ2xhc3Nw
YXRoRW50cnkuQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIGUpIHsNCisJCQkJCQlVdGlsLmxvZyhl
LCAiRXhjZXB0aW9uIHdoaWxlIGluaXRpYWxpemluZyB1c2VyIGxpYnJhcnkgIiArIGxpYk5hbWUp
OyAvLyROT04tTkxTLTEkDQorCQkJCQkJaW5zdGFuY2VQcmVmZXJlbmNlcy5yZW1vdmUocHJvcGVy
dHlOYW1lKTsNCisJCQkJCQlwcmVmZXJlbmNlc05lZWRGbHVzaCA9IHRydWU7DQorCQkJCQkJY29u
dGludWU7DQogCQkJCQl9DQogCQkJCQl0aGlzLnVzZXJMaWJyYXJpZXMucHV0KGxpYk5hbWUsIGxp
YnJhcnkpOw0KIAkJCQl9DQojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbA0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFs
aXplclRlc3RzLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmphdmEsdg0KcmV0cmlldmluZyBy
ZXZpc2lvbiAxLjcyDQpkaWZmIC11IC1yMS43MiBDbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmph
dmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvQ2xhc3NwYXRoSW5p
dGlhbGl6ZXJUZXN0cy5qYXZhCTcgSmFuIDIwMTEgMjA6NDc6MDAgLTAwMDAJMS43Mg0KKysrIHNy
Yy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFsaXplclRl
c3RzLmphdmEJMTggTWF5IDIwMTEgMDg6NTg6MjIgLTAwMDANCkBAIC0xOSw5ICsxOSwxMSBAQA0K
IGltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUucHJlZmVyZW5jZXMuSUVjbGlwc2VQcmVm
ZXJlbmNlczsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLnByZWZlcmVuY2VzLklu
c3RhbmNlU2NvcGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLio7DQoraW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLkNsYXNzcGF0aEVudHJ5Ow0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29yZS5KYXZhTW9kZWxNYW5hZ2VyOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29yZS5KYXZhTW9kZWxTdGF0dXM7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLkphdmFQcm9qZWN0Ow0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29yZS5Vc2VyTGlicmFyeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvcmUuVXNlckxpYnJhcnlDbGFzc3BhdGhDb250YWluZXI7DQogDQogaW1wb3J0
IGp1bml0LmZyYW1ld29yay5UZXN0Ow0KQEAgLTE2MTAsNCArMTYxMiw0OSBAQA0KIAkJZGVsZXRl
UHJvamVjdCgicDYxODcyIik7DQogCX0NCiB9DQorLyoqDQorICogQHNlZSAiaHR0cHM6Ly9idWdz
LmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM0NjAwMiINCisgKiBAdGhyb3dzIEV4
Y2VwdGlvbg0KKyAqLw0KK3B1YmxpYyB2b2lkIHRlc3RCdWczNDYwMDIoKSB0aHJvd3MgRXhjZXB0
aW9uIHsNCisJQ2xhc3NwYXRoQ29udGFpbmVySW5pdGlhbGl6ZXIgaW5pdGlhbGl6ZXIgPSBKYXZh
Q29yZS5nZXRDbGFzc3BhdGhDb250YWluZXJJbml0aWFsaXplcihKYXZhQ29yZS5VU0VSX0xJQlJB
UllfQ09OVEFJTkVSX0lEKTsNCisJU3RyaW5nIGxpYnJhcnlOYW1lID0gIlRFU1QiOw0KKwlJUGF0
aCBjb250YWluZXJQYXRoID0gbmV3IFBhdGgoSmF2YUNvcmUuVVNFUl9MSUJSQVJZX0NPTlRBSU5F
Ul9JRCk7DQorCVVzZXJMaWJyYXJ5Q2xhc3NwYXRoQ29udGFpbmVyIGNvbnRhaW5lclN1Z2dlc3Rp
b24gPSBuZXcgVXNlckxpYnJhcnlDbGFzc3BhdGhDb250YWluZXIobGlicmFyeU5hbWUpOw0KKwlp
bml0aWFsaXplci5yZXF1ZXN0Q2xhc3NwYXRoQ29udGFpbmVyVXBkYXRlKGNvbnRhaW5lclBhdGgu
YXBwZW5kKGxpYnJhcnlOYW1lKSwgbnVsbCwgY29udGFpbmVyU3VnZ2VzdGlvbik7DQorDQorCVN0
cmluZyBsaWJQYXRoID0gIkM6L3Rlc3QvdGVzdC5qYXIiOw0KKw0KKwlJRWNsaXBzZVByZWZlcmVu
Y2VzIHByZWZlcmVuY2VzID0gSW5zdGFuY2VTY29wZS5JTlNUQU5DRS5nZXROb2RlKEphdmFDb3Jl
LlBMVUdJTl9JRCk7DQorCVN0cmluZyBwcm9wZXJ0eU5hbWUgPSBKYXZhTW9kZWxNYW5hZ2VyLkNQ
X1VTRVJMSUJSQVJZX1BSRUZFUkVOQ0VTX1BSRUZJWCsgIlRFU1QiOw0KKw0KKwlTdHJpbmdCdWZm
ZXIgcHJvcGVydHlWYWx1ZSA9IG5ldyBTdHJpbmdCdWZmZXIoDQorCQkJIjw/eG1sIHZlcnNpb249
XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxyXG48dXNlcmxpYnJhcnkgc3lzdGVtbGlicmFy
eT1cImZhbHNlXCIgdmVyc2lvbj1cIjJcIj5cclxuPGFyY2hpdmUiKTsNCisJcHJvcGVydHlWYWx1
ZS5hcHBlbmQoIiBwYXRoPVwiIiArIGxpYlBhdGggKyAiXCIvPlxyXG4iKTsNCisJcHJvcGVydHlW
YWx1ZS5hcHBlbmQoIjwvdXNlcmxpYnJhcnk+XHJcbiIpOw0KKwlwcmVmZXJlbmNlcy5wdXQocHJv
cGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkpOw0KKw0KKwlwcm9wZXJ0eU5hbWUg
PSBKYXZhTW9kZWxNYW5hZ2VyLkNQX1VTRVJMSUJSQVJZX1BSRUZFUkVOQ0VTX1BSRUZJWCArICJJ
TlZBTElEIjsNCisJcHJvcGVydHlWYWx1ZSA9IG5ldyBTdHJpbmdCdWZmZXIoDQorCQkJIjw/eG1s
IHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxyXG48dXNlcmxpYnJhcnkgc3lz
dGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjJcIj5cclxuPGFyY2hpdmUiKTsNCisJcHJv
cGVydHlWYWx1ZS5hcHBlbmQoIiBwYXRoPVwiXCIvPiIpOw0KKwlwcm9wZXJ0eVZhbHVlLmFwcGVu
ZCgiPC91c2VybGlicmFyeT5cclxuIik7DQorCXByZWZlcmVuY2VzLnB1dChwcm9wZXJ0eU5hbWUs
IHByb3BlcnR5VmFsdWUudG9TdHJpbmcoKSk7DQorCXByZWZlcmVuY2VzLmZsdXNoKCk7DQorDQor
CXRyeSB7DQorCQlzaW11bGF0ZUV4aXRSZXN0YXJ0KCk7DQorDQorCQlVc2VyTGlicmFyeSB1c2Vy
TGlicmFyeSA9IEphdmFNb2RlbE1hbmFnZXIuZ2V0VXNlckxpYnJhcnlNYW5hZ2VyKCkuZ2V0VXNl
ckxpYnJhcnkobGlicmFyeU5hbWUpOw0KKwkJYXNzZXJ0Tm90TnVsbCh1c2VyTGlicmFyeSk7DQor
CQlJUGF0aCBlbnRyeVBhdGggPSB1c2VyTGlicmFyeS5nZXRFbnRyaWVzKClbMF0uZ2V0UGF0aCgp
Ow0KKwkJYXNzZXJ0RXF1YWxzKCJQYXRoIHNob3VsZCBiZSBhYnNvbHV0ZSIsIHRydWUsIGVudHJ5
UGF0aC5pc0Fic29sdXRlKCkpOw0KKw0KKwkJdXNlckxpYnJhcnkgPSBKYXZhTW9kZWxNYW5hZ2Vy
LmdldFVzZXJMaWJyYXJ5TWFuYWdlcigpLmdldFVzZXJMaWJyYXJ5KCJJTlZBTElEIik7DQorCQlh
c3NlcnROdWxsKHVzZXJMaWJyYXJ5KTsNCisJfQ0KKwljYXRjaCAoQ2xhc3NwYXRoRW50cnkuQXNz
ZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIGUpIHsNCisJCWZhaWwoIlNob3VsZCBub3QgdGhyb3cgQXNz
ZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIik7DQorCX0NCit9DQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhUHJvamVjdFRlc3RzLmphdmENCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhUHJvamVjdFRl
c3RzLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjEwNg0KZGlmZiAtdSAtcjEuMTA2IEph
dmFQcm9qZWN0VGVzdHMuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9t
b2RlbC9KYXZhUHJvamVjdFRlc3RzLmphdmEJMjUgT2N0IDIwMTAgMTA6MzA6MDcgLTAwMDAJMS4x
MDYNCisrKyBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvSmF2YVByb2plY3RU
ZXN0cy5qYXZhCTE4IE1heSAyMDExIDA4OjU4OjIyIC0wMDAwDQpAQCAtMjMyMiw3ICsyMzIyLDcg
QEANCiAJYXNzZXJ0U291cmNlRXF1YWxzKA0KIAkJIkludmFsaWQgbGlicmFyeSBjb250ZW50cyIs
DQogCQkiPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG4iICsNCi0J
CSI8dXNlcmxpYnJhcnkgc3lzdGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjFcIj5cbiIg
Kw0KKwkJIjx1c2VybGlicmFyeSBzeXN0ZW1saWJyYXJ5PVwiZmFsc2VcIiB2ZXJzaW9uPVwiMlwi
PlxuIiArDQogCQkiCTxhcmNoaXZlIHBhdGg9XCIvdG1wL3Rlc3QuamFyXCI+XG4iICsNCiAJCSIJ
CTxhdHRyaWJ1dGVzPlxuIiArDQogCQkiCQkJPGF0dHJpYnV0ZSBuYW1lPVwiamF2YWRvY19sb2Nh
dGlvblwiIHZhbHVlPVwiaHR0cDovL3d3dy5zYW1wbGUtdXJsLm9yZy9kb2MvXCIvPlxuIiArDQo=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>195987</attachid>
            <date>2011-05-18 11:09:00 -0400</date>
            <delta_ts>2011-05-18 15:21:56 -0400</delta_ts>
            <desc>Updated patch</desc>
            <filename>bug_346002.txt</filename>
            <type>text/plain</type>
            <size>11081</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBtb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeS5q
YXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeS5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xNA0KZGlmZiAtdSAtcjEuMTQgVXNlckxpYnJh
cnkuamF2YQ0KLS0tIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJy
YXJ5LmphdmEJMjcgSnVuIDIwMDggMTY6MDM6NTEgLTAwMDAJMS4xNA0KKysrIG1vZGVsL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJyYXJ5LmphdmEJMTggTWF5IDIwMTEgMTQ6
MjI6NTEgLTAwMDANCkBAIC0zOSw3ICszOSw4IEBADQogICovDQogcHVibGljIGNsYXNzIFVzZXJM
aWJyYXJ5IHsNCiANCi0JcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIENVUlJFTlRfVkVSU0lP
Tj0gIjEiOyAvLyROT04tTkxTLTEkDQorCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBWRVJT
SU9OX09ORSA9ICIxIjsgLy8kTk9OLU5MUy0xJA0KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJp
bmcgQ1VSUkVOVF9WRVJTSU9OPSAiMiI7IC8vJE5PTi1OTFMtMSQNCiANCiAJcHJpdmF0ZSBzdGF0
aWMgZmluYWwgU3RyaW5nIFRBR19WRVJTSU9OPSAidmVyc2lvbiI7IC8vJE5PTi1OTFMtMSQNCiAJ
cHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRBR19VU0VSTElCUkFSWT0gInVzZXJsaWJyYXJ5
IjsgLy8kTk9OLU5MUy0xJA0KQEAgLTExMiwxMyArMTEzLDEzIEBADQogCQkJQ2xhc3NwYXRoRW50
cnkgY3BFbnRyeSA9IChDbGFzc3BhdGhFbnRyeSkgZW50cmllc1tpXTsNCiANCiAJCQlIYXNoTWFw
IGFyY2hpdmUgPSBuZXcgSGFzaE1hcCgpOw0KLQkJCWFyY2hpdmUucHV0KFRBR19QQVRILCBjcEVu
dHJ5LmdldFBhdGgoKS50b1N0cmluZygpKTsNCisJCQlhcmNoaXZlLnB1dChUQUdfUEFUSCwgY3BF
bnRyeS5nZXRQYXRoKCkudG9Qb3J0YWJsZVN0cmluZygpKTsNCiAJCQlJUGF0aCBzb3VyY2VBdHRh
Y2g9IGNwRW50cnkuZ2V0U291cmNlQXR0YWNobWVudFBhdGgoKTsNCiAJCQlpZiAoc291cmNlQXR0
YWNoICE9IG51bGwpDQotCQkJCWFyY2hpdmUucHV0KFRBR19TT1VSQ0VBVFRBQ0hNRU5ULCBzb3Vy
Y2VBdHRhY2gpOw0KKwkJCQlhcmNoaXZlLnB1dChUQUdfU09VUkNFQVRUQUNITUVOVCwgc291cmNl
QXR0YWNoLnRvUG9ydGFibGVTdHJpbmcoKSk7DQogCQkJSVBhdGggc291cmNlQXR0YWNoUm9vdD0g
Y3BFbnRyeS5nZXRTb3VyY2VBdHRhY2htZW50Um9vdFBhdGgoKTsNCiAJCQlpZiAoc291cmNlQXR0
YWNoUm9vdCAhPSBudWxsKQ0KLQkJCQlhcmNoaXZlLnB1dChUQUdfU09VUkNFQVRUQUNITUVOVFJP
T1QsIHNvdXJjZUF0dGFjaFJvb3QpOw0KKwkJCQlhcmNoaXZlLnB1dChUQUdfU09VUkNFQVRUQUNI
TUVOVFJPT1QsIHNvdXJjZUF0dGFjaFJvb3QudG9Qb3J0YWJsZVN0cmluZygpKTsNCiANCiAJCQli
b29sZWFuIGhhc0V4dHJhQXR0cmlidXRlcyA9IGNwRW50cnkuZXh0cmFBdHRyaWJ1dGVzICE9IG51
bGwgJiYgY3BFbnRyeS5leHRyYUF0dHJpYnV0ZXMubGVuZ3RoICE9IDA7DQogCQkJYm9vbGVhbiBo
YXNSZXN0cmljdGlvbnMgPSBjcEVudHJ5LmdldEFjY2Vzc1J1bGVTZXQoKSAhPSBudWxsOyAvLyBh
Y2Nlc3MgcnVsZSBzZXQgaXMgbnVsbCBpZiBubyBhY2Nlc3MgcnVsZXMNCkBAIC0xNjEsOSArMTYy
LDcgQEANCiAJCWlmICghY3BFbGVtZW50LmdldE5vZGVOYW1lKCkuZXF1YWxzSWdub3JlQ2FzZShU
QUdfVVNFUkxJQlJBUlkpKSB7DQogCQkJdGhyb3cgbmV3IElPRXhjZXB0aW9uKE1lc3NhZ2VzLmZp
bGVfYmFkRm9ybWF0KTsNCiAJCX0NCi0JCS8vIFN0cmluZyB2ZXJzaW9uPSBjcEVsZW1lbnQuZ2V0
QXR0cmlidXRlKFRBR19WRVJTSU9OKTsNCi0JCS8vIGluIGNhc2Ugd2UgdXBkYXRlIHRoZSBmb3Jt
YXQ6IGFkZCBjb2RlIHRvIHJlYWQgb2xkZXIgdmVyc2lvbnMNCi0NCisJCVN0cmluZyB2ZXJzaW9u
PSBjcEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19WRVJTSU9OKTsNCiAJCWJvb2xlYW4gaXNTeXN0
ZW09IEJvb2xlYW4udmFsdWVPZihjcEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19TWVNURU1MSUJS
QVJZKSkuYm9vbGVhblZhbHVlKCk7DQogDQogCQlOb2RlTGlzdCBsaXN0PSBjcEVsZW1lbnQuZ2V0
Q2hpbGROb2RlcygpOw0KQEAgLTE3NiwxNiArMTc1LDMwIEBADQogCQkJaWYgKG5vZGUuZ2V0Tm9k
ZVR5cGUoKSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkgew0KIAkJCQlFbGVtZW50IGVsZW1lbnQ9IChF
bGVtZW50KSBub2RlOw0KIAkJCQlpZiAoZWxlbWVudC5nZXROb2RlTmFtZSgpLmVxdWFscyhUQUdf
QVJDSElWRSkpIHsNCi0JCQkJCVN0cmluZyBwYXRoID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoVEFH
X1BBVEgpOw0KLQkJCQkJSVBhdGggc291cmNlQXR0YWNoPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShU
QUdfU09VUkNFQVRUQUNITUVOVCkgPyBuZXcgUGF0aChlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdf
U09VUkNFQVRUQUNITUVOVCkpIDogbnVsbDsNCi0JCQkJCUlQYXRoIHNvdXJjZUF0dGFjaFJvb3Q9
IGVsZW1lbnQuaGFzQXR0cmlidXRlKFRBR19TT1VSQ0VBVFRBQ0hNRU5UUk9PVCkgPyBuZXcgUGF0
aChlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVFJPT1QpKSA6IG51bGw7
DQorCQkJCQlTdHJpbmcgcGF0aFN0cmluZyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19QQVRI
KTsNCisJCQkJCVN0cmluZyBzb3VyY2VBdHRhY2hTdHJpbmcgPSBlbGVtZW50Lmhhc0F0dHJpYnV0
ZShUQUdfU09VUkNFQVRUQUNITUVOVCkgPyBlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdfU09VUkNF
QVRUQUNITUVOVCkgOiBudWxsOw0KKwkJCQkJU3RyaW5nIHNvdXJjZUF0dGFjaFJvb3RTdHJpbmcg
PSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVFJPT1QpID8gZWxlbWVu
dC5nZXRBdHRyaWJ1dGUoVEFHX1NPVVJDRUFUVEFDSE1FTlRST09UKSA6IG51bGw7DQorCQkJCQlJ
UGF0aCBlbnRyeVBhdGggPSBudWxsOyANCisJCQkJCUlQYXRoIHNvdXJjZUF0dGFjaFBhdGggPSBu
dWxsOw0KKwkJCQkJSVBhdGggc291cmNlQXR0YWNoUm9vdFBhdGggPSBudWxsOw0KKwkJCQkJaWYg
KHZlcnNpb24uZXF1YWxzKFZFUlNJT05fT05FKSkgew0KKwkJCQkJCWVudHJ5UGF0aCA9IFBhdGgu
ZnJvbU9TU3RyaW5nKHBhdGhTdHJpbmcpOw0KKwkJCQkJCWlmIChzb3VyY2VBdHRhY2hTdHJpbmcg
IT0gbnVsbCkgc291cmNlQXR0YWNoUGF0aCA9IFBhdGguZnJvbU9TU3RyaW5nKHNvdXJjZUF0dGFj
aFN0cmluZyk7DQorCQkJCQkJaWYgKHNvdXJjZUF0dGFjaFJvb3RTdHJpbmcgIT0gbnVsbCkgc291
cmNlQXR0YWNoUm9vdFBhdGggPSBQYXRoLmZyb21PU1N0cmluZyhzb3VyY2VBdHRhY2hSb290U3Ry
aW5nKTsNCisJCQkJCX0NCisJCQkJCWVsc2Ugew0KKwkJCQkJCWVudHJ5UGF0aCA9IFBhdGguZnJv
bVBvcnRhYmxlU3RyaW5nKHBhdGhTdHJpbmcpOw0KKwkJCQkJCWlmIChzb3VyY2VBdHRhY2hTdHJp
bmcgIT0gbnVsbCkgc291cmNlQXR0YWNoUGF0aCA9IFBhdGguZnJvbVBvcnRhYmxlU3RyaW5nKHNv
dXJjZUF0dGFjaFN0cmluZyk7DQorCQkJCQkJaWYgKHNvdXJjZUF0dGFjaFJvb3RTdHJpbmcgIT0g
bnVsbCkgc291cmNlQXR0YWNoUm9vdFBhdGggPSBQYXRoLmZyb21Qb3J0YWJsZVN0cmluZyhzb3Vy
Y2VBdHRhY2hSb290U3RyaW5nKTsNCisJCQkJCX0NCisNCiAJCQkJCU5vZGVMaXN0IGNoaWxkcmVu
ID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOyAvLyROT04tTkxTLTEkDQogCQkJ
CQlib29sZWFuW10gZm91bmRDaGlsZHJlbiA9IG5ldyBib29sZWFuW2NoaWxkcmVuLmdldExlbmd0
aCgpXTsNCiAJCQkJCU5vZGVMaXN0IGF0dHJpYnV0ZUxpc3QgPSBDbGFzc3BhdGhFbnRyeS5nZXRD
aGlsZEF0dHJpYnV0ZXMoQ2xhc3NwYXRoRW50cnkuVEFHX0FUVFJJQlVURVMsIGNoaWxkcmVuLCBm
b3VuZENoaWxkcmVuKTsNCiAJCQkJCUlDbGFzc3BhdGhBdHRyaWJ1dGVbXSBleHRyYUF0dHJpYnV0
ZXMgPSBDbGFzc3BhdGhFbnRyeS5kZWNvZGVFeHRyYUF0dHJpYnV0ZXMoYXR0cmlidXRlTGlzdCk7
DQogCQkJCQlhdHRyaWJ1dGVMaXN0ID0gQ2xhc3NwYXRoRW50cnkuZ2V0Q2hpbGRBdHRyaWJ1dGVz
KENsYXNzcGF0aEVudHJ5LlRBR19BQ0NFU1NfUlVMRVMsIGNoaWxkcmVuLCBmb3VuZENoaWxkcmVu
KTsNCiAJCQkJCUlBY2Nlc3NSdWxlW10gYWNjZXNzUnVsZXMgPSBDbGFzc3BhdGhFbnRyeS5kZWNv
ZGVBY2Nlc3NSdWxlcyhhdHRyaWJ1dGVMaXN0KTsNCi0JCQkJCUlDbGFzc3BhdGhFbnRyeSBlbnRy
eSA9IEphdmFDb3JlLm5ld0xpYnJhcnlFbnRyeShuZXcgUGF0aChwYXRoKSwgc291cmNlQXR0YWNo
LCBzb3VyY2VBdHRhY2hSb290LCBhY2Nlc3NSdWxlcywgZXh0cmFBdHRyaWJ1dGVzLCBmYWxzZS8q
bm90IGV4cG9ydGVkKi8pOw0KKwkJCQkJSUNsYXNzcGF0aEVudHJ5IGVudHJ5ID0gSmF2YUNvcmUu
bmV3TGlicmFyeUVudHJ5KGVudHJ5UGF0aCwgc291cmNlQXR0YWNoUGF0aCwgc291cmNlQXR0YWNo
Um9vdFBhdGgsIGFjY2Vzc1J1bGVzLCBleHRyYUF0dHJpYnV0ZXMsIGZhbHNlLypub3QgZXhwb3J0
ZWQqLyk7DQogCQkJCQlyZXMuYWRkKGVudHJ5KTsNCiAJCQkJfQ0KIAkJCX0NCkluZGV4OiBtb2Rl
bC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeU1hbmFnZXIuamF2YQ0K
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2VjbGlwc2Uvb3JnLmVjbGlwc2UuamR0LmNv
cmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvVXNlckxpYnJhcnlNYW5hZ2Vy
LmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjIwDQpkaWZmIC11IC1yMS4yMCBVc2VyTGli
cmFyeU1hbmFnZXIuamF2YQ0KLS0tIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3Jl
L1VzZXJMaWJyYXJ5TWFuYWdlci5qYXZhCTggQXByIDIwMTAgMTA6MDU6NTIgLTAwMDAJMS4yMA0K
KysrIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJyYXJ5TWFuYWdl
ci5qYXZhCTE4IE1heSAyMDExIDE0OjIyOjUxIC0wMDAwDQpAQCAtODQsNiArODQsMTEgQEANCiAJ
CQkJCQlpbnN0YW5jZVByZWZlcmVuY2VzLnJlbW92ZShwcm9wZXJ0eU5hbWUpOw0KIAkJCQkJCXBy
ZWZlcmVuY2VzTmVlZEZsdXNoID0gdHJ1ZTsNCiAJCQkJCQljb250aW51ZTsNCisJCQkJCX0gY2F0
Y2ggKENsYXNzcGF0aEVudHJ5LkFzc2VydGlvbkZhaWxlZEV4Y2VwdGlvbiBlKSB7DQorCQkJCQkJ
VXRpbC5sb2coZSwgIkV4Y2VwdGlvbiB3aGlsZSBpbml0aWFsaXppbmcgdXNlciBsaWJyYXJ5ICIg
KyBsaWJOYW1lKTsgLy8kTk9OLU5MUy0xJA0KKwkJCQkJCWluc3RhbmNlUHJlZmVyZW5jZXMucmVt
b3ZlKHByb3BlcnR5TmFtZSk7DQorCQkJCQkJcHJlZmVyZW5jZXNOZWVkRmx1c2ggPSB0cnVlOw0K
KwkJCQkJCWNvbnRpbnVlOw0KIAkJCQkJfQ0KIAkJCQkJdGhpcy51c2VyTGlicmFyaWVzLnB1dChs
aWJOYW1lLCBsaWJyYXJ5KTsNCiAJCQkJfQ0KQEAgLTE0OCw3ICsxNTMsMTAgQEANCiAJCQlVdGls
LmxvZyhlLCAiRXhjZXB0aW9uIHdoaWxlIGRlY29kaW5nIHVzZXIgbGlicmFyeSAnIisgbGliTmFt
ZSArIicuIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJA0KIAkJfSBjYXRjaCAoSmF2YU1v
ZGVsRXhjZXB0aW9uIGUpIHsNCiAJCQlVdGlsLmxvZyhlLCAiRXhjZXB0aW9uIHdoaWxlIHNldHRp
bmcgdXNlciBsaWJyYXJ5ICciKyBsaWJOYW1lICsiJy4iKTsgLy8kTk9OLU5MUy0xJCAvLyROT04t
TkxTLTIkDQorCQl9IGNhdGNoIChDbGFzc3BhdGhFbnRyeS5Bc3NlcnRpb25GYWlsZWRFeGNlcHRp
b24gYXNlKSB7DQorCQkJVXRpbC5sb2coYXNlLCAiRXhjZXB0aW9uIHdoaWxlIGRlY29kaW5nIHVz
ZXIgbGlicmFyeSAnIisgbGliTmFtZSArIicuIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JA0KIAkJfQ0KKwkJDQogCX0NCiANCiAJcHVibGljIHZvaWQgcmVtb3ZlVXNlckxpYnJhcnkoU3Ry
aW5nIGxpYk5hbWUpICB7DQojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbA0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFs
aXplclRlc3RzLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmphdmEsdg0KcmV0cmlldmluZyBy
ZXZpc2lvbiAxLjcyDQpkaWZmIC11IC1yMS43MiBDbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmph
dmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvQ2xhc3NwYXRoSW5p
dGlhbGl6ZXJUZXN0cy5qYXZhCTcgSmFuIDIwMTEgMjA6NDc6MDAgLTAwMDAJMS43Mg0KKysrIHNy
Yy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFsaXplclRl
c3RzLmphdmEJMTggTWF5IDIwMTEgMTQ6MjI6NTQgLTAwMDANCkBAIC0xOSw5ICsxOSwxMSBAQA0K
IGltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUucHJlZmVyZW5jZXMuSUVjbGlwc2VQcmVm
ZXJlbmNlczsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLnByZWZlcmVuY2VzLklu
c3RhbmNlU2NvcGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLio7DQoraW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLkNsYXNzcGF0aEVudHJ5Ow0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29yZS5KYXZhTW9kZWxNYW5hZ2VyOw0KIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29yZS5KYXZhTW9kZWxTdGF0dXM7DQogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLkphdmFQcm9qZWN0Ow0KK2ltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29yZS5Vc2VyTGlicmFyeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvcmUuVXNlckxpYnJhcnlDbGFzc3BhdGhDb250YWluZXI7DQogDQogaW1wb3J0
IGp1bml0LmZyYW1ld29yay5UZXN0Ow0KQEAgLTc3LDcgKzc5LDcgQEANCiAvLyBBbGwgc3BlY2lm
aWVkIHRlc3RzIHdoaWNoIGRvIG5vdCBiZWxvbmcgdG8gdGhlIGNsYXNzIGFyZSBza2lwcGVkLi4u
DQogc3RhdGljIHsNCiAJLy8gTmFtZXMgb2YgdGVzdHMgdG8gcnVuOiBjYW4gYmUgInRlc3RCdWdY
WFhYIiBvciAiQnVnWFhYWCIpDQotLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsgInRl
c3RDb250YWluZXJJbml0aWFsaXplcjEyIiB9Ow0KKy8vCQlURVNUU19OQU1FUyA9IG5ldyBTdHJp
bmdbXSB7ICJ0ZXN0QnVnMzQ2MDAyIiB9Ow0KIAkvLyBOdW1iZXJzIG9mIHRlc3RzIHRvIHJ1bjog
InRlc3Q8bnVtYmVyPiIgd2lsbCBiZSBydW4gZm9yIGVhY2ggbnVtYmVyIG9mIHRoaXMgYXJyYXkN
CiAvLwkJVEVTVFNfTlVNQkVSUyA9IG5ldyBpbnRbXSB7IDIsIDEyIH07DQogCS8vIFJhbmdlIG51
bWJlcnMgb2YgdGVzdHMgdG8gcnVuOiBhbGwgdGVzdHMgYmV0d2VlbiAidGVzdDxmaXJzdD4iIGFu
ZCAidGVzdDxsYXN0PiIgd2lsbCBiZSBydW4gZm9yIHsgZmlyc3QsIGxhc3QgfQ0KQEAgLTE2MTAs
NCArMTYxMiw0OSBAQA0KIAkJZGVsZXRlUHJvamVjdCgicDYxODcyIik7DQogCX0NCiB9DQorLyoq
DQorICogQHNlZSAiaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lk
PTM0NjAwMiINCisgKiBAdGhyb3dzIEV4Y2VwdGlvbg0KKyAqLw0KK3B1YmxpYyB2b2lkIHRlc3RC
dWczNDYwMDIoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCisJQ2xhc3NwYXRoQ29udGFpbmVySW5pdGlh
bGl6ZXIgaW5pdGlhbGl6ZXIgPSBKYXZhQ29yZS5nZXRDbGFzc3BhdGhDb250YWluZXJJbml0aWFs
aXplcihKYXZhQ29yZS5VU0VSX0xJQlJBUllfQ09OVEFJTkVSX0lEKTsNCisJU3RyaW5nIGxpYnJh
cnlOYW1lID0gIlRFU1QiOw0KKwlJUGF0aCBjb250YWluZXJQYXRoID0gbmV3IFBhdGgoSmF2YUNv
cmUuVVNFUl9MSUJSQVJZX0NPTlRBSU5FUl9JRCk7DQorCVVzZXJMaWJyYXJ5Q2xhc3NwYXRoQ29u
dGFpbmVyIGNvbnRhaW5lclN1Z2dlc3Rpb24gPSBuZXcgVXNlckxpYnJhcnlDbGFzc3BhdGhDb250
YWluZXIobGlicmFyeU5hbWUpOw0KKwlpbml0aWFsaXplci5yZXF1ZXN0Q2xhc3NwYXRoQ29udGFp
bmVyVXBkYXRlKGNvbnRhaW5lclBhdGguYXBwZW5kKGxpYnJhcnlOYW1lKSwgbnVsbCwgY29udGFp
bmVyU3VnZ2VzdGlvbik7DQorDQorCVN0cmluZyBsaWJQYXRoID0gIkM6L3Rlc3QvdGVzdC5qYXIi
Ow0KKw0KKwlJRWNsaXBzZVByZWZlcmVuY2VzIHByZWZlcmVuY2VzID0gSW5zdGFuY2VTY29wZS5J
TlNUQU5DRS5nZXROb2RlKEphdmFDb3JlLlBMVUdJTl9JRCk7DQorCVN0cmluZyBwcm9wZXJ0eU5h
bWUgPSBKYXZhTW9kZWxNYW5hZ2VyLkNQX1VTRVJMSUJSQVJZX1BSRUZFUkVOQ0VTX1BSRUZJWCsg
IlRFU1QiOw0KKw0KKwlTdHJpbmdCdWZmZXIgcHJvcGVydHlWYWx1ZSA9IG5ldyBTdHJpbmdCdWZm
ZXIoDQorCQkJIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxyXG48
dXNlcmxpYnJhcnkgc3lzdGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjJcIj5cclxuPGFy
Y2hpdmUiKTsNCisJcHJvcGVydHlWYWx1ZS5hcHBlbmQoIiBwYXRoPVwiIiArIGxpYlBhdGggKyAi
XCIvPlxyXG4iKTsNCisJcHJvcGVydHlWYWx1ZS5hcHBlbmQoIjwvdXNlcmxpYnJhcnk+XHJcbiIp
Ow0KKwlwcmVmZXJlbmNlcy5wdXQocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5n
KCkpOw0KKw0KKwlwcm9wZXJ0eU5hbWUgPSBKYXZhTW9kZWxNYW5hZ2VyLkNQX1VTRVJMSUJSQVJZ
X1BSRUZFUkVOQ0VTX1BSRUZJWCArICJJTlZBTElEIjsNCisJcHJvcGVydHlWYWx1ZSA9IG5ldyBT
dHJpbmdCdWZmZXIoDQorCQkJIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04
XCI/PlxyXG48dXNlcmxpYnJhcnkgc3lzdGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjJc
Ij5cclxuPGFyY2hpdmUiKTsNCisJcHJvcGVydHlWYWx1ZS5hcHBlbmQoIiBwYXRoPVwiXCIvPiIp
Ow0KKwlwcm9wZXJ0eVZhbHVlLmFwcGVuZCgiPC91c2VybGlicmFyeT5cclxuIik7DQorCXByZWZl
cmVuY2VzLnB1dChwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUudG9TdHJpbmcoKSk7DQorCXBy
ZWZlcmVuY2VzLmZsdXNoKCk7DQorDQorCXRyeSB7DQorCQlzaW11bGF0ZUV4aXRSZXN0YXJ0KCk7
DQorDQorCQlVc2VyTGlicmFyeSB1c2VyTGlicmFyeSA9IEphdmFNb2RlbE1hbmFnZXIuZ2V0VXNl
ckxpYnJhcnlNYW5hZ2VyKCkuZ2V0VXNlckxpYnJhcnkobGlicmFyeU5hbWUpOw0KKwkJYXNzZXJ0
Tm90TnVsbCh1c2VyTGlicmFyeSk7DQorCQlJUGF0aCBlbnRyeVBhdGggPSB1c2VyTGlicmFyeS5n
ZXRFbnRyaWVzKClbMF0uZ2V0UGF0aCgpOw0KKwkJYXNzZXJ0RXF1YWxzKCJQYXRoIHNob3VsZCBi
ZSBhYnNvbHV0ZSIsIHRydWUsIGVudHJ5UGF0aC5pc0Fic29sdXRlKCkpOw0KKw0KKwkJdXNlckxp
YnJhcnkgPSBKYXZhTW9kZWxNYW5hZ2VyLmdldFVzZXJMaWJyYXJ5TWFuYWdlcigpLmdldFVzZXJM
aWJyYXJ5KCJJTlZBTElEIik7DQorCQlhc3NlcnROdWxsKHVzZXJMaWJyYXJ5KTsNCisJfQ0KKwlj
YXRjaCAoQ2xhc3NwYXRoRW50cnkuQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIGUpIHsNCisJCWZh
aWwoIlNob3VsZCBub3QgdGhyb3cgQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIik7DQorCX0NCit9
DQogfQ0KSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhUHJv
amVjdFRlc3RzLmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9tb2RlbC9KYXZhUHJvamVjdFRlc3RzLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAx
LjEwNg0KZGlmZiAtdSAtcjEuMTA2IEphdmFQcm9qZWN0VGVzdHMuamF2YQ0KLS0tIHNyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhUHJvamVjdFRlc3RzLmphdmEJMjUgT2N0
IDIwMTAgMTA6MzA6MDcgLTAwMDAJMS4xMDYNCisrKyBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvbW9kZWwvSmF2YVByb2plY3RUZXN0cy5qYXZhCTE4IE1heSAyMDExIDE0OjIyOjU0IC0w
MDAwDQpAQCAtMjMyMiw3ICsyMzIyLDcgQEANCiAJYXNzZXJ0U291cmNlRXF1YWxzKA0KIAkJIklu
dmFsaWQgbGlicmFyeSBjb250ZW50cyIsDQogCQkiPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29k
aW5nPVwiVVRGLThcIj8+XG4iICsNCi0JCSI8dXNlcmxpYnJhcnkgc3lzdGVtbGlicmFyeT1cImZh
bHNlXCIgdmVyc2lvbj1cIjFcIj5cbiIgKw0KKwkJIjx1c2VybGlicmFyeSBzeXN0ZW1saWJyYXJ5
PVwiZmFsc2VcIiB2ZXJzaW9uPVwiMlwiPlxuIiArDQogCQkiCTxhcmNoaXZlIHBhdGg9XCIvdG1w
L3Rlc3QuamFyXCI+XG4iICsNCiAJCSIJCTxhdHRyaWJ1dGVzPlxuIiArDQogCQkiCQkJPGF0dHJp
YnV0ZSBuYW1lPVwiamF2YWRvY19sb2NhdGlvblwiIHZhbHVlPVwiaHR0cDovL3d3dy5zYW1wbGUt
dXJsLm9yZy9kb2MvXCIvPlxuIiArDQo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>196039</attachid>
            <date>2011-05-18 15:21:00 -0400</date>
            <delta_ts>2011-05-18 15:21:56 -0400</delta_ts>
            <desc>Same patch with updated copyrights</desc>
            <filename>patch_346002.txt</filename>
            <type>text/plain</type>
            <size>12350</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBtb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeS5q
YXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9Vc2VyTGlicmFyeS5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4xNA0KZGlmZiAtdSAtcjEuMTQgVXNlckxpYnJh
cnkuamF2YQ0KLS0tIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJy
YXJ5LmphdmEJMjcgSnVuIDIwMDggMTY6MDM6NTEgLTAwMDAJMS4xNA0KKysrIG1vZGVsL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJyYXJ5LmphdmEJMTggTWF5IDIwMTEgMTk6
MjE6MjIgLTAwMDANCkBAIC0xLDUgKzEsNSBAQA0KIC8qKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQot
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDA4IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLg0K
KyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4N
CiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlp
bmcgbWF0ZXJpYWxzDQogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0
aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQogICogd2hpY2ggYWNjb21wYW5pZXMgdGhp
cyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCkBAIC0zOSw3ICszOSw4IEBADQog
ICovDQogcHVibGljIGNsYXNzIFVzZXJMaWJyYXJ5IHsNCiANCi0JcHJpdmF0ZSBzdGF0aWMgZmlu
YWwgU3RyaW5nIENVUlJFTlRfVkVSU0lPTj0gIjEiOyAvLyROT04tTkxTLTEkDQorCXByaXZhdGUg
c3RhdGljIGZpbmFsIFN0cmluZyBWRVJTSU9OX09ORSA9ICIxIjsgLy8kTk9OLU5MUy0xJA0KKwlw
cml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ1VSUkVOVF9WRVJTSU9OPSAiMiI7IC8vJE5PTi1O
TFMtMSQNCiANCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRBR19WRVJTSU9OPSAidmVy
c2lvbiI7IC8vJE5PTi1OTFMtMSQNCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRBR19V
U0VSTElCUkFSWT0gInVzZXJsaWJyYXJ5IjsgLy8kTk9OLU5MUy0xJA0KQEAgLTExMiwxMyArMTEz
LDEzIEBADQogCQkJQ2xhc3NwYXRoRW50cnkgY3BFbnRyeSA9IChDbGFzc3BhdGhFbnRyeSkgZW50
cmllc1tpXTsNCiANCiAJCQlIYXNoTWFwIGFyY2hpdmUgPSBuZXcgSGFzaE1hcCgpOw0KLQkJCWFy
Y2hpdmUucHV0KFRBR19QQVRILCBjcEVudHJ5LmdldFBhdGgoKS50b1N0cmluZygpKTsNCisJCQlh
cmNoaXZlLnB1dChUQUdfUEFUSCwgY3BFbnRyeS5nZXRQYXRoKCkudG9Qb3J0YWJsZVN0cmluZygp
KTsNCiAJCQlJUGF0aCBzb3VyY2VBdHRhY2g9IGNwRW50cnkuZ2V0U291cmNlQXR0YWNobWVudFBh
dGgoKTsNCiAJCQlpZiAoc291cmNlQXR0YWNoICE9IG51bGwpDQotCQkJCWFyY2hpdmUucHV0KFRB
R19TT1VSQ0VBVFRBQ0hNRU5ULCBzb3VyY2VBdHRhY2gpOw0KKwkJCQlhcmNoaXZlLnB1dChUQUdf
U09VUkNFQVRUQUNITUVOVCwgc291cmNlQXR0YWNoLnRvUG9ydGFibGVTdHJpbmcoKSk7DQogCQkJ
SVBhdGggc291cmNlQXR0YWNoUm9vdD0gY3BFbnRyeS5nZXRTb3VyY2VBdHRhY2htZW50Um9vdFBh
dGgoKTsNCiAJCQlpZiAoc291cmNlQXR0YWNoUm9vdCAhPSBudWxsKQ0KLQkJCQlhcmNoaXZlLnB1
dChUQUdfU09VUkNFQVRUQUNITUVOVFJPT1QsIHNvdXJjZUF0dGFjaFJvb3QpOw0KKwkJCQlhcmNo
aXZlLnB1dChUQUdfU09VUkNFQVRUQUNITUVOVFJPT1QsIHNvdXJjZUF0dGFjaFJvb3QudG9Qb3J0
YWJsZVN0cmluZygpKTsNCiANCiAJCQlib29sZWFuIGhhc0V4dHJhQXR0cmlidXRlcyA9IGNwRW50
cnkuZXh0cmFBdHRyaWJ1dGVzICE9IG51bGwgJiYgY3BFbnRyeS5leHRyYUF0dHJpYnV0ZXMubGVu
Z3RoICE9IDA7DQogCQkJYm9vbGVhbiBoYXNSZXN0cmljdGlvbnMgPSBjcEVudHJ5LmdldEFjY2Vz
c1J1bGVTZXQoKSAhPSBudWxsOyAvLyBhY2Nlc3MgcnVsZSBzZXQgaXMgbnVsbCBpZiBubyBhY2Nl
c3MgcnVsZXMNCkBAIC0xNjEsOSArMTYyLDcgQEANCiAJCWlmICghY3BFbGVtZW50LmdldE5vZGVO
YW1lKCkuZXF1YWxzSWdub3JlQ2FzZShUQUdfVVNFUkxJQlJBUlkpKSB7DQogCQkJdGhyb3cgbmV3
IElPRXhjZXB0aW9uKE1lc3NhZ2VzLmZpbGVfYmFkRm9ybWF0KTsNCiAJCX0NCi0JCS8vIFN0cmlu
ZyB2ZXJzaW9uPSBjcEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19WRVJTSU9OKTsNCi0JCS8vIGlu
IGNhc2Ugd2UgdXBkYXRlIHRoZSBmb3JtYXQ6IGFkZCBjb2RlIHRvIHJlYWQgb2xkZXIgdmVyc2lv
bnMNCi0NCisJCVN0cmluZyB2ZXJzaW9uPSBjcEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRBR19WRVJT
SU9OKTsNCiAJCWJvb2xlYW4gaXNTeXN0ZW09IEJvb2xlYW4udmFsdWVPZihjcEVsZW1lbnQuZ2V0
QXR0cmlidXRlKFRBR19TWVNURU1MSUJSQVJZKSkuYm9vbGVhblZhbHVlKCk7DQogDQogCQlOb2Rl
TGlzdCBsaXN0PSBjcEVsZW1lbnQuZ2V0Q2hpbGROb2RlcygpOw0KQEAgLTE3NiwxNiArMTc1LDMw
IEBADQogCQkJaWYgKG5vZGUuZ2V0Tm9kZVR5cGUoKSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkgew0K
IAkJCQlFbGVtZW50IGVsZW1lbnQ9IChFbGVtZW50KSBub2RlOw0KIAkJCQlpZiAoZWxlbWVudC5n
ZXROb2RlTmFtZSgpLmVxdWFscyhUQUdfQVJDSElWRSkpIHsNCi0JCQkJCVN0cmluZyBwYXRoID0g
ZWxlbWVudC5nZXRBdHRyaWJ1dGUoVEFHX1BBVEgpOw0KLQkJCQkJSVBhdGggc291cmNlQXR0YWNo
PSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVCkgPyBuZXcgUGF0aChl
bGVtZW50LmdldEF0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVCkpIDogbnVsbDsNCi0JCQkJ
CUlQYXRoIHNvdXJjZUF0dGFjaFJvb3Q9IGVsZW1lbnQuaGFzQXR0cmlidXRlKFRBR19TT1VSQ0VB
VFRBQ0hNRU5UUk9PVCkgPyBuZXcgUGF0aChlbGVtZW50LmdldEF0dHJpYnV0ZShUQUdfU09VUkNF
QVRUQUNITUVOVFJPT1QpKSA6IG51bGw7DQorCQkJCQlTdHJpbmcgcGF0aFN0cmluZyA9IGVsZW1l
bnQuZ2V0QXR0cmlidXRlKFRBR19QQVRIKTsNCisJCQkJCVN0cmluZyBzb3VyY2VBdHRhY2hTdHJp
bmcgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVCkgPyBlbGVtZW50
LmdldEF0dHJpYnV0ZShUQUdfU09VUkNFQVRUQUNITUVOVCkgOiBudWxsOw0KKwkJCQkJU3RyaW5n
IHNvdXJjZUF0dGFjaFJvb3RTdHJpbmcgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZShUQUdfU09VUkNF
QVRUQUNITUVOVFJPT1QpID8gZWxlbWVudC5nZXRBdHRyaWJ1dGUoVEFHX1NPVVJDRUFUVEFDSE1F
TlRST09UKSA6IG51bGw7DQorCQkJCQlJUGF0aCBlbnRyeVBhdGggPSBudWxsOyANCisJCQkJCUlQ
YXRoIHNvdXJjZUF0dGFjaFBhdGggPSBudWxsOw0KKwkJCQkJSVBhdGggc291cmNlQXR0YWNoUm9v
dFBhdGggPSBudWxsOw0KKwkJCQkJaWYgKHZlcnNpb24uZXF1YWxzKFZFUlNJT05fT05FKSkgew0K
KwkJCQkJCWVudHJ5UGF0aCA9IFBhdGguZnJvbU9TU3RyaW5nKHBhdGhTdHJpbmcpOw0KKwkJCQkJ
CWlmIChzb3VyY2VBdHRhY2hTdHJpbmcgIT0gbnVsbCkgc291cmNlQXR0YWNoUGF0aCA9IFBhdGgu
ZnJvbU9TU3RyaW5nKHNvdXJjZUF0dGFjaFN0cmluZyk7DQorCQkJCQkJaWYgKHNvdXJjZUF0dGFj
aFJvb3RTdHJpbmcgIT0gbnVsbCkgc291cmNlQXR0YWNoUm9vdFBhdGggPSBQYXRoLmZyb21PU1N0
cmluZyhzb3VyY2VBdHRhY2hSb290U3RyaW5nKTsNCisJCQkJCX0NCisJCQkJCWVsc2Ugew0KKwkJ
CQkJCWVudHJ5UGF0aCA9IFBhdGguZnJvbVBvcnRhYmxlU3RyaW5nKHBhdGhTdHJpbmcpOw0KKwkJ
CQkJCWlmIChzb3VyY2VBdHRhY2hTdHJpbmcgIT0gbnVsbCkgc291cmNlQXR0YWNoUGF0aCA9IFBh
dGguZnJvbVBvcnRhYmxlU3RyaW5nKHNvdXJjZUF0dGFjaFN0cmluZyk7DQorCQkJCQkJaWYgKHNv
dXJjZUF0dGFjaFJvb3RTdHJpbmcgIT0gbnVsbCkgc291cmNlQXR0YWNoUm9vdFBhdGggPSBQYXRo
LmZyb21Qb3J0YWJsZVN0cmluZyhzb3VyY2VBdHRhY2hSb290U3RyaW5nKTsNCisJCQkJCX0NCisN
CiAJCQkJCU5vZGVMaXN0IGNoaWxkcmVuID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgi
KiIpOyAvLyROT04tTkxTLTEkDQogCQkJCQlib29sZWFuW10gZm91bmRDaGlsZHJlbiA9IG5ldyBi
b29sZWFuW2NoaWxkcmVuLmdldExlbmd0aCgpXTsNCiAJCQkJCU5vZGVMaXN0IGF0dHJpYnV0ZUxp
c3QgPSBDbGFzc3BhdGhFbnRyeS5nZXRDaGlsZEF0dHJpYnV0ZXMoQ2xhc3NwYXRoRW50cnkuVEFH
X0FUVFJJQlVURVMsIGNoaWxkcmVuLCBmb3VuZENoaWxkcmVuKTsNCiAJCQkJCUlDbGFzc3BhdGhB
dHRyaWJ1dGVbXSBleHRyYUF0dHJpYnV0ZXMgPSBDbGFzc3BhdGhFbnRyeS5kZWNvZGVFeHRyYUF0
dHJpYnV0ZXMoYXR0cmlidXRlTGlzdCk7DQogCQkJCQlhdHRyaWJ1dGVMaXN0ID0gQ2xhc3NwYXRo
RW50cnkuZ2V0Q2hpbGRBdHRyaWJ1dGVzKENsYXNzcGF0aEVudHJ5LlRBR19BQ0NFU1NfUlVMRVMs
IGNoaWxkcmVuLCBmb3VuZENoaWxkcmVuKTsNCiAJCQkJCUlBY2Nlc3NSdWxlW10gYWNjZXNzUnVs
ZXMgPSBDbGFzc3BhdGhFbnRyeS5kZWNvZGVBY2Nlc3NSdWxlcyhhdHRyaWJ1dGVMaXN0KTsNCi0J
CQkJCUlDbGFzc3BhdGhFbnRyeSBlbnRyeSA9IEphdmFDb3JlLm5ld0xpYnJhcnlFbnRyeShuZXcg
UGF0aChwYXRoKSwgc291cmNlQXR0YWNoLCBzb3VyY2VBdHRhY2hSb290LCBhY2Nlc3NSdWxlcywg
ZXh0cmFBdHRyaWJ1dGVzLCBmYWxzZS8qbm90IGV4cG9ydGVkKi8pOw0KKwkJCQkJSUNsYXNzcGF0
aEVudHJ5IGVudHJ5ID0gSmF2YUNvcmUubmV3TGlicmFyeUVudHJ5KGVudHJ5UGF0aCwgc291cmNl
QXR0YWNoUGF0aCwgc291cmNlQXR0YWNoUm9vdFBhdGgsIGFjY2Vzc1J1bGVzLCBleHRyYUF0dHJp
YnV0ZXMsIGZhbHNlLypub3QgZXhwb3J0ZWQqLyk7DQogCQkJCQlyZXMuYWRkKGVudHJ5KTsNCiAJ
CQkJfQ0KIAkJCX0NCkluZGV4OiBtb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9V
c2VyTGlicmFyeU1hbmFnZXIuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2Vj
bGlwc2Uvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvcmUvVXNlckxpYnJhcnlNYW5hZ2VyLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjIw
DQpkaWZmIC11IC1yMS4yMCBVc2VyTGlicmFyeU1hbmFnZXIuamF2YQ0KLS0tIG1vZGVsL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1VzZXJMaWJyYXJ5TWFuYWdlci5qYXZhCTggQXByIDIw
MTAgMTA6MDU6NTIgLTAwMDAJMS4yMA0KKysrIG1vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL1VzZXJMaWJyYXJ5TWFuYWdlci5qYXZhCTE4IE1heSAyMDExIDE5OjIxOjIyIC0wMDAw
DQpAQCAtMSw1ICsxLDUgQEANCiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLSAqIENvcHlyaWdo
dCAoYykgMjAwMCwgMjAxMCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4NCisgKiBDb3B5cmln
aHQgKGMpIDIwMDAsIDIwMTEgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuDQogICogQWxsIHJp
Z2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFs
cw0KICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2Ug
UHVibGljIExpY2Vuc2UgdjEuMA0KICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0
aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0DQpAQCAtODQsNiArODQsMTEgQEANCiAJCQkJCQlpbnN0
YW5jZVByZWZlcmVuY2VzLnJlbW92ZShwcm9wZXJ0eU5hbWUpOw0KIAkJCQkJCXByZWZlcmVuY2Vz
TmVlZEZsdXNoID0gdHJ1ZTsNCiAJCQkJCQljb250aW51ZTsNCisJCQkJCX0gY2F0Y2ggKENsYXNz
cGF0aEVudHJ5LkFzc2VydGlvbkZhaWxlZEV4Y2VwdGlvbiBlKSB7DQorCQkJCQkJVXRpbC5sb2co
ZSwgIkV4Y2VwdGlvbiB3aGlsZSBpbml0aWFsaXppbmcgdXNlciBsaWJyYXJ5ICIgKyBsaWJOYW1l
KTsgLy8kTk9OLU5MUy0xJA0KKwkJCQkJCWluc3RhbmNlUHJlZmVyZW5jZXMucmVtb3ZlKHByb3Bl
cnR5TmFtZSk7DQorCQkJCQkJcHJlZmVyZW5jZXNOZWVkRmx1c2ggPSB0cnVlOw0KKwkJCQkJCWNv
bnRpbnVlOw0KIAkJCQkJfQ0KIAkJCQkJdGhpcy51c2VyTGlicmFyaWVzLnB1dChsaWJOYW1lLCBs
aWJyYXJ5KTsNCiAJCQkJfQ0KQEAgLTE0OCw3ICsxNTMsMTAgQEANCiAJCQlVdGlsLmxvZyhlLCAi
RXhjZXB0aW9uIHdoaWxlIGRlY29kaW5nIHVzZXIgbGlicmFyeSAnIisgbGliTmFtZSArIicuIik7
IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJA0KIAkJfSBjYXRjaCAoSmF2YU1vZGVsRXhjZXB0
aW9uIGUpIHsNCiAJCQlVdGlsLmxvZyhlLCAiRXhjZXB0aW9uIHdoaWxlIHNldHRpbmcgdXNlciBs
aWJyYXJ5ICciKyBsaWJOYW1lICsiJy4iKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkDQor
CQl9IGNhdGNoIChDbGFzc3BhdGhFbnRyeS5Bc3NlcnRpb25GYWlsZWRFeGNlcHRpb24gYXNlKSB7
DQorCQkJVXRpbC5sb2coYXNlLCAiRXhjZXB0aW9uIHdoaWxlIGRlY29kaW5nIHVzZXIgbGlicmFy
eSAnIisgbGliTmFtZSArIicuIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJA0KIAkJfQ0K
KwkJDQogCX0NCiANCiAJcHVibGljIHZvaWQgcmVtb3ZlVXNlckxpYnJhcnkoU3RyaW5nIGxpYk5h
bWUpICB7DQojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbA0KSW5kZXg6IHNyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFsaXplclRlc3Rz
LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2Rl
bC9DbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAx
LjcyDQpkaWZmIC11IC1yMS43MiBDbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmphdmENCi0tLSBz
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvQ2xhc3NwYXRoSW5pdGlhbGl6ZXJU
ZXN0cy5qYXZhCTcgSmFuIDIwMTEgMjA6NDc6MDAgLTAwMDAJMS43Mg0KKysrIHNyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhJbml0aWFsaXplclRlc3RzLmphdmEJ
MTggTWF5IDIwMTEgMTk6MjE6MjMgLTAwMDANCkBAIC0xOSw5ICsxOSwxMSBAQA0KIGltcG9ydCBv
cmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUucHJlZmVyZW5jZXMuSUVjbGlwc2VQcmVmZXJlbmNlczsN
CiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLnByZWZlcmVuY2VzLkluc3RhbmNlU2Nv
cGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLio7DQoraW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb3JlLkNsYXNzcGF0aEVudHJ5Ow0KIGltcG9ydCBvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29yZS5KYXZhTW9kZWxNYW5hZ2VyOw0KIGltcG9ydCBvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29yZS5KYXZhTW9kZWxTdGF0dXM7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpk
dC5pbnRlcm5hbC5jb3JlLkphdmFQcm9qZWN0Ow0KK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29yZS5Vc2VyTGlicmFyeTsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFs
LmNvcmUuVXNlckxpYnJhcnlDbGFzc3BhdGhDb250YWluZXI7DQogDQogaW1wb3J0IGp1bml0LmZy
YW1ld29yay5UZXN0Ow0KQEAgLTc3LDcgKzc5LDcgQEANCiAvLyBBbGwgc3BlY2lmaWVkIHRlc3Rz
IHdoaWNoIGRvIG5vdCBiZWxvbmcgdG8gdGhlIGNsYXNzIGFyZSBza2lwcGVkLi4uDQogc3RhdGlj
IHsNCiAJLy8gTmFtZXMgb2YgdGVzdHMgdG8gcnVuOiBjYW4gYmUgInRlc3RCdWdYWFhYIiBvciAi
QnVnWFhYWCIpDQotLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsgInRlc3RDb250YWlu
ZXJJbml0aWFsaXplcjEyIiB9Ow0KKy8vCQlURVNUU19OQU1FUyA9IG5ldyBTdHJpbmdbXSB7ICJ0
ZXN0QnVnMzQ2MDAyIiB9Ow0KIAkvLyBOdW1iZXJzIG9mIHRlc3RzIHRvIHJ1bjogInRlc3Q8bnVt
YmVyPiIgd2lsbCBiZSBydW4gZm9yIGVhY2ggbnVtYmVyIG9mIHRoaXMgYXJyYXkNCiAvLwkJVEVT
VFNfTlVNQkVSUyA9IG5ldyBpbnRbXSB7IDIsIDEyIH07DQogCS8vIFJhbmdlIG51bWJlcnMgb2Yg
dGVzdHMgdG8gcnVuOiBhbGwgdGVzdHMgYmV0d2VlbiAidGVzdDxmaXJzdD4iIGFuZCAidGVzdDxs
YXN0PiIgd2lsbCBiZSBydW4gZm9yIHsgZmlyc3QsIGxhc3QgfQ0KQEAgLTE2MTAsNCArMTYxMiw0
OSBAQA0KIAkJZGVsZXRlUHJvamVjdCgicDYxODcyIik7DQogCX0NCiB9DQorLyoqDQorICogQHNl
ZSAiaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM0NjAwMiIN
CisgKiBAdGhyb3dzIEV4Y2VwdGlvbg0KKyAqLw0KK3B1YmxpYyB2b2lkIHRlc3RCdWczNDYwMDIo
KSB0aHJvd3MgRXhjZXB0aW9uIHsNCisJQ2xhc3NwYXRoQ29udGFpbmVySW5pdGlhbGl6ZXIgaW5p
dGlhbGl6ZXIgPSBKYXZhQ29yZS5nZXRDbGFzc3BhdGhDb250YWluZXJJbml0aWFsaXplcihKYXZh
Q29yZS5VU0VSX0xJQlJBUllfQ09OVEFJTkVSX0lEKTsNCisJU3RyaW5nIGxpYnJhcnlOYW1lID0g
IlRFU1QiOw0KKwlJUGF0aCBjb250YWluZXJQYXRoID0gbmV3IFBhdGgoSmF2YUNvcmUuVVNFUl9M
SUJSQVJZX0NPTlRBSU5FUl9JRCk7DQorCVVzZXJMaWJyYXJ5Q2xhc3NwYXRoQ29udGFpbmVyIGNv
bnRhaW5lclN1Z2dlc3Rpb24gPSBuZXcgVXNlckxpYnJhcnlDbGFzc3BhdGhDb250YWluZXIobGli
cmFyeU5hbWUpOw0KKwlpbml0aWFsaXplci5yZXF1ZXN0Q2xhc3NwYXRoQ29udGFpbmVyVXBkYXRl
KGNvbnRhaW5lclBhdGguYXBwZW5kKGxpYnJhcnlOYW1lKSwgbnVsbCwgY29udGFpbmVyU3VnZ2Vz
dGlvbik7DQorDQorCVN0cmluZyBsaWJQYXRoID0gIkM6L3Rlc3QvdGVzdC5qYXIiOw0KKw0KKwlJ
RWNsaXBzZVByZWZlcmVuY2VzIHByZWZlcmVuY2VzID0gSW5zdGFuY2VTY29wZS5JTlNUQU5DRS5n
ZXROb2RlKEphdmFDb3JlLlBMVUdJTl9JRCk7DQorCVN0cmluZyBwcm9wZXJ0eU5hbWUgPSBKYXZh
TW9kZWxNYW5hZ2VyLkNQX1VTRVJMSUJSQVJZX1BSRUZFUkVOQ0VTX1BSRUZJWCsgIlRFU1QiOw0K
Kw0KKwlTdHJpbmdCdWZmZXIgcHJvcGVydHlWYWx1ZSA9IG5ldyBTdHJpbmdCdWZmZXIoDQorCQkJ
Ijw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxyXG48dXNlcmxpYnJh
cnkgc3lzdGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjJcIj5cclxuPGFyY2hpdmUiKTsN
CisJcHJvcGVydHlWYWx1ZS5hcHBlbmQoIiBwYXRoPVwiIiArIGxpYlBhdGggKyAiXCIvPlxyXG4i
KTsNCisJcHJvcGVydHlWYWx1ZS5hcHBlbmQoIjwvdXNlcmxpYnJhcnk+XHJcbiIpOw0KKwlwcmVm
ZXJlbmNlcy5wdXQocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkpOw0KKw0K
Kwlwcm9wZXJ0eU5hbWUgPSBKYXZhTW9kZWxNYW5hZ2VyLkNQX1VTRVJMSUJSQVJZX1BSRUZFUkVO
Q0VTX1BSRUZJWCArICJJTlZBTElEIjsNCisJcHJvcGVydHlWYWx1ZSA9IG5ldyBTdHJpbmdCdWZm
ZXIoDQorCQkJIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxyXG48
dXNlcmxpYnJhcnkgc3lzdGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjJcIj5cclxuPGFy
Y2hpdmUiKTsNCisJcHJvcGVydHlWYWx1ZS5hcHBlbmQoIiBwYXRoPVwiXCIvPiIpOw0KKwlwcm9w
ZXJ0eVZhbHVlLmFwcGVuZCgiPC91c2VybGlicmFyeT5cclxuIik7DQorCXByZWZlcmVuY2VzLnB1
dChwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUudG9TdHJpbmcoKSk7DQorCXByZWZlcmVuY2Vz
LmZsdXNoKCk7DQorDQorCXRyeSB7DQorCQlzaW11bGF0ZUV4aXRSZXN0YXJ0KCk7DQorDQorCQlV
c2VyTGlicmFyeSB1c2VyTGlicmFyeSA9IEphdmFNb2RlbE1hbmFnZXIuZ2V0VXNlckxpYnJhcnlN
YW5hZ2VyKCkuZ2V0VXNlckxpYnJhcnkobGlicmFyeU5hbWUpOw0KKwkJYXNzZXJ0Tm90TnVsbCh1
c2VyTGlicmFyeSk7DQorCQlJUGF0aCBlbnRyeVBhdGggPSB1c2VyTGlicmFyeS5nZXRFbnRyaWVz
KClbMF0uZ2V0UGF0aCgpOw0KKwkJYXNzZXJ0RXF1YWxzKCJQYXRoIHNob3VsZCBiZSBhYnNvbHV0
ZSIsIHRydWUsIGVudHJ5UGF0aC5pc0Fic29sdXRlKCkpOw0KKw0KKwkJdXNlckxpYnJhcnkgPSBK
YXZhTW9kZWxNYW5hZ2VyLmdldFVzZXJMaWJyYXJ5TWFuYWdlcigpLmdldFVzZXJMaWJyYXJ5KCJJ
TlZBTElEIik7DQorCQlhc3NlcnROdWxsKHVzZXJMaWJyYXJ5KTsNCisJfQ0KKwljYXRjaCAoQ2xh
c3NwYXRoRW50cnkuQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIGUpIHsNCisJCWZhaWwoIlNob3Vs
ZCBub3QgdGhyb3cgQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uIik7DQorCX0NCit9DQogfQ0KSW5k
ZXg6IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhUHJvamVjdFRlc3Rz
LmphdmENCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2Rl
bC9KYXZhUHJvamVjdFRlc3RzLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjEwNg0KZGlm
ZiAtdSAtcjEuMTA2IEphdmFQcm9qZWN0VGVzdHMuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhUHJvamVjdFRlc3RzLmphdmEJMjUgT2N0IDIwMTAgMTA6
MzA6MDcgLTAwMDAJMS4xMDYNCisrKyBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvbW9k
ZWwvSmF2YVByb2plY3RUZXN0cy5qYXZhCTE4IE1heSAyMDExIDE5OjIxOjIzIC0wMDAwDQpAQCAt
MSw1ICsxLDUgQEANCiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLSAqIENvcHlyaWdodCAoYykg
MjAwMCwgMjAxMCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4NCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTEgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuDQogICogQWxsIHJpZ2h0cyBy
ZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscw0KICAq
IGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGlj
IExpY2Vuc2UgdjEuMA0KICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBh
bmQgaXMgYXZhaWxhYmxlIGF0DQpAQCAtMjMyMiw3ICsyMzIyLDcgQEANCiAJYXNzZXJ0U291cmNl
RXF1YWxzKA0KIAkJIkludmFsaWQgbGlicmFyeSBjb250ZW50cyIsDQogCQkiPD94bWwgdmVyc2lv
bj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG4iICsNCi0JCSI8dXNlcmxpYnJhcnkgc3lz
dGVtbGlicmFyeT1cImZhbHNlXCIgdmVyc2lvbj1cIjFcIj5cbiIgKw0KKwkJIjx1c2VybGlicmFy
eSBzeXN0ZW1saWJyYXJ5PVwiZmFsc2VcIiB2ZXJzaW9uPVwiMlwiPlxuIiArDQogCQkiCTxhcmNo
aXZlIHBhdGg9XCIvdG1wL3Rlc3QuamFyXCI+XG4iICsNCiAJCSIJCTxhdHRyaWJ1dGVzPlxuIiAr
DQogCQkiCQkJPGF0dHJpYnV0ZSBuYW1lPVwiamF2YWRvY19sb2NhdGlvblwiIHZhbHVlPVwiaHR0
cDovL3d3dy5zYW1wbGUtdXJsLm9yZy9kb2MvXCIvPlxuIiArDQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>