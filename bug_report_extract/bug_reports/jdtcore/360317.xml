<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>360317</bug_id>
          
          <creation_ts>2011-10-08 09:26:00 -0400</creation_ts>
          <short_desc>[compiler] report switch over enum in 1.4- mode</short_desc>
          <delta_ts>2011-10-24 04:25:47 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.8 M3</target_milestone>
          <dependson>360164</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2007040</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-08 09:26:53 -0400</bug_when>
    <thetext>The test case attached in bug 360164 comment 21 shows that if we allow 
resolving binary enum types even in 1.4- mode we would end up allowing 
switch over enum also below 1.5.

I believe the same was also true before bug 349326. Only with bug 349326
is the code currently rejected due to missing superclass Enum.

While it is technically possible to compile such code for a J2SE-1.4
this still looks wrong as we&apos;re accepting code that a 1.4 compiler could not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2010418</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-10-14 03:44:13 -0400</bug_when>
    <thetext>(In reply to comment #0)
&gt; The test case attached in bug 360164 comment 21 shows that if we allow 
&gt; resolving binary enum types even in 1.4- mode we would end up allowing 
&gt; switch over enum also below 1.5.
&gt; 
&gt; I believe the same was also true before bug 349326

Yes, Just to be sure, I confirmed it with 3.6.2

&gt; While it is technically possible to compile such code for a J2SE-1.4

What did you mean by that ? 

&gt; this still looks wrong as we&apos;re accepting code that a 1.4 compiler could not.

Yes, I&apos;ll post a patch shortly at bug 360164</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2012140</commentid>
    <comment_count>2</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-18 07:11:40 -0400</bug_when>
    <thetext>(In reply to comment #1)
&gt; Yes, I&apos;ll post a patch shortly at bug 360164

The new message reads:

  Cannot switch on a value of type enum for source level below 1.5

Nit-picking: &quot;enum&quot; is not a type.

For comparison message 881 reads:

  Only convertible int values or enum variables are permitted

(why &quot;variable&quot;?)

How about:
  Cannot switch on an enum value for source level below 1.5
or 
  Cannot switch on a value of an enum type for source level below 1.5
?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2012267</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-10-18 09:22:44 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; (In reply to comment #1)

&gt; How about:
&gt;   Cannot switch on an enum value for source level below 1.5
&gt; or 
&gt;   Cannot switch on a value of an enum type for source level below 1.5
&gt; ?

Reconciling the above with bug 360164 comment 36, let us settle on:

Cannot switch on an enum value for source level below 1.5.  Only 
convertible int values are permitted</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2012335</commentid>
    <comment_count>4</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-10-18 10:38:05 -0400</bug_when>
    <thetext>Released as commit 2d89f0516f5e5910bcd18015e8090ed0805dbb4e for 3.8 M3.
(combined patch with bug 360164).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2015175</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-10-24 04:25:47 -0400</bug_when>
    <thetext>Verified for 3.8 M3 using build id: N20111022-2000.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>