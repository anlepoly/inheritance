<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>385293</bug_id>
          
          <creation_ts>2012-07-17 08:18:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] compiler accepts normal modifiers on type arguments</short_desc>
          <delta_ts>2012-10-01 04:46:43 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>287648</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>jarthana</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2137842</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2012-07-17 08:18:38 -0400</bug_when>
    <thetext>Type references like
  T&lt;final X&gt;
  T&lt;@Marker static X&gt;
are silently accepted.

Parser.modifier is never read in this context.

Either the grammar should be changed not to allow normal modifiers in this position or we need to check and report any stored modifiers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2137849</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-17 08:26:36 -0400</bug_when>
    <thetext>This is a known problem, documented under todo.txt maintained by Olivier.
This todo.txt is a part of the remaining changes cached as a patch
&quot;Original implementation of code generation from 2010.&quot; in bug 383624 (https://bugs.eclipse.org/bugs/attachment.cgi?id=217920)

It is a good catch from the reviewer (thanks!) and it helps that we have a
bug for it rather than it sitting in some notes somewhere (I had been meaning
to raise a bug ...)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2137863</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-17 08:40:52 -0400</bug_when>
    <thetext>(In reply to comment #0)

&gt; Either the grammar should be changed not to allow normal modifiers in this
&gt; position or we need to check and report any stored modifiers.

The latter since these are introduced deliberately to avoid shift/reduce
conflicts that result from just introducing annotations in these places.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2138276</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-17 20:29:55 -0400</bug_when>
    <thetext>Jay, we need to check other places where the grammar is extra permissive
due to the use of modifiers too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2138963</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-19 08:35:28 -0400</bug_when>
    <thetext>(In reply to comment #0)
&gt; Type references like
&gt;   T&lt;final X&gt;
&gt;   T&lt;@Marker static X&gt;
&gt; are silently accepted.

When this is fixed, please verify we should see two errors in this:

class X&lt;T&gt; {
	 Object o = (Object) (public X&lt;final String&gt;) null; 
}

Today, we get one error from this: My suspicion is that once the
type parameter modifier is complained against and cleared, we
will NOT complain about the &quot;public&quot; where we do complain today.

The productions for CastExpressions do not stack the modifiers,
but retrieve them directly Parser.modifier and that does not look
right.

Consult the productions for ReferenceExpressions, which do stack
the modifiers properly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2144173</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-08-02 00:42:06 -0400</bug_when>
    <thetext>Jay, I&apos;ll take over this bug - I ma contemplating some approaches that
would dramatically simplify the grammar changes made for JSR308 that
would also address this problem if it works out.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2166024</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-01 04:46:43 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; Jay, I&apos;ll take over this bug - I ma contemplating some approaches that
&gt; would dramatically simplify the grammar changes made for JSR308 that
&gt; would also address this problem if it works out.

The redesign alluded to above is the subject matter of bug 390784 which
has been resolved. There is no further action required on this bug. The
snippets from this bug have been rolled into junits and released via 

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=d7c9dc580ed8a3dd6fc18ee646d5f4f1c40d11ec</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>