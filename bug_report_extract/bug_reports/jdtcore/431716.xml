<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>431716</bug_id>
          
          <creation_ts>2014-04-01 10:46:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] NPE when creating LambdaMethod element for lambda expressions with errors</short_desc>
          <delta_ts>2014-05-26 02:45:50 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 8</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4 RC2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Timo Kinnunen">timo.kinnunen</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>manju656</cc>
    
    <cc>manpalat</cc>
    
    <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="62465"
          type_id="1"
          status="+"
          setter="manpalat"
    />
    <flag name="review"
          id="62476"
          type_id="1"
          status="+"
          setter="stephan.herrmann"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2383017</commentid>
    <comment_count>0</comment_count>
    <who name="Timo Kinnunen">timo.kinnunen</who>
    <bug_when>2014-04-01 10:46:48 -0400</bug_when>
    <thetext>package npe_oejic_LambdaMethod_getTypeSignature_line_97;
With this code having compile errors, trying to inline method toLongFunction results in an NPE:

package npe_oejic_LambdaMethod_getTypeSignature_line_97;

import java.util.function.ToLongFunction;
import java.util.stream.Stream;

public interface Streamy&lt;T&gt; {
	public static &lt;T&gt; ToLongFunction&lt;? super T&gt; toLongFunction() {
		return null;
	}

	default void asIntStream(Stream&lt;T&gt; makerget) {
		makerget.mapToInt((long l) -&gt; (int) l);
		// trying to inline this method results causes NPE
		toLongFunction();
	}
}

Originally the asIntStream method was two separate methods in the same order, but for a shorter test case this wasn&apos;t a necessary thing to keep. I am using all warnings (almost), in case it makes a difference.

Tested with Eclipse SDK Version: Luna (4.4) Build id: I20140325-0830 and JDT Core plugin build from from HEAD in the last few days.

Here is the full stack trace:

java.lang.reflect.InvocationTargetException
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:423)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:331)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizard.internalPerformFinish(RefactoringWizard.java:637)
	at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.performFinish(UserInputWizardPage.java:153)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizard.performFinish(RefactoringWizard.java:710)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.okPressed(RefactoringWizardDialog2.java:455)
	at org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:466)
	at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:619)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:832)
	at org.eclipse.jface.window.Window.open(Window.java:808)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:187)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:202)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:122)
	at org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:38)
	at org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startInlineMethodRefactoring(RefactoringExecutionStarter.java:330)
	at org.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.tryInlineMethod(InlineMethodAction.java:148)
	at org.eclipse.jdt.ui.actions.InlineAction.run(InlineAction.java:124)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:279)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:519)
	at org.eclipse.jface.commands.ActionHandler.execute(ActionHandler.java:122)
	at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:90)
	at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
	at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:247)
	at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:229)
	at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:132)
	at org.eclipse.e4.core.commands.internal.HandlerServiceHandler.execute(HandlerServiceHandler.java:149)
	at org.eclipse.core.commands.Command.executeWithChecks(Command.java:499)
	at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
	at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:209)
	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.executeCommand(KeyBindingDispatcher.java:285)
	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.press(KeyBindingDispatcher.java:505)
	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.processKeyEvent(KeyBindingDispatcher.java:556)
	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.filterKeySequenceBindings(KeyBindingDispatcher.java:377)
	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.access$0(KeyBindingDispatcher.java:323)
	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher$KeyDownFilter.handleEvent(KeyBindingDispatcher.java:85)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1060)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1085)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1070)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1112)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1108)
	at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1529)
	at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:4722)
	at org.eclipse.swt.widgets.Canvas.WM_CHAR(Canvas.java:343)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:4610)
	at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:339)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:5020)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2549)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3759)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1116)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1000)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:147)
	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:630)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:574)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:379)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:233)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1462)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1438)
Caused by: java.lang.NullPointerException
	at org.eclipse.jdt.internal.core.LambdaMethod.getTypeSignature(LambdaMethod.java:95)
	at org.eclipse.jdt.internal.core.LambdaMethod.make(LambdaMethod.java:51)
	at org.eclipse.jdt.internal.core.LambdaExpression.&lt;init&gt;(LambdaExpression.java:45)
	at org.eclipse.jdt.internal.core.util.HandleFactory.createElement(HandleFactory.java:213)
	at org.eclipse.jdt.internal.core.util.HandleFactory.createLambdaTypeElement(HandleFactory.java:167)
	at org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.rememberAllTypes(HierarchyResolver.java:488)
	at org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve(HierarchyResolver.java:822)
	at org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildForProject(IndexBasedHierarchyBuilder.java:227)
	at org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildFromPotentialSubtypes(IndexBasedHierarchyBuilder.java:329)
	at org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build(IndexBasedHierarchyBuilder.java:132)
	at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute(TypeHierarchy.java:301)
	at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh(TypeHierarchy.java:1268)
	at org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation(CreateTypeHierarchyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:729)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:789)
	at org.eclipse.jdt.internal.core.SourceType.newTypeHierarchy(SourceType.java:829)
	at org.eclipse.jdt.internal.core.SourceType.newTypeHierarchy(SourceType.java:787)
	at org.eclipse.jdt.internal.corext.refactoring.code.InlineMethodRefactoring.checkOverridden(InlineMethodRefactoring.java:471)
	at org.eclipse.jdt.internal.corext.refactoring.code.InlineMethodRefactoring.checkFinalConditions(InlineMethodRefactoring.java:285)
	at org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:85)
	at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:121)
	at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:209)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2333)
	at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:122)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2383036</commentid>
    <comment_count>1</comment_count>
    <who name="Timo Kinnunen">timo.kinnunen</who>
    <bug_when>2014-04-01 11:01:48 -0400</bug_when>
    <thetext>For some reason that compile error can jump method boundaries and affect methods which don&apos;t have any compile errors, which makes it pretty annoying.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2383296</commentid>
    <comment_count>2</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-04-01 23:01:09 -0400</bug_when>
    <thetext>Thanks Srikanth for taking a look</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2388552</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-04-14 03:17:23 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #2)
&gt; Thanks Srikanth for taking a look

Please assign Model bugs to Jay, Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2389550</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-04-16 03:20:07 -0400</bug_when>
    <thetext>I can reproduce this. The problem can also be seen when trying to access the lambda parameter in the Java Element view. In this case, the LambdaExpression#descripter is a ProblemMethodBinding, which has null returnType. I will see what can be done here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2389632</commentid>
    <comment_count>5</comment_count>
      <attachid>242041</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-04-16 07:10:33 -0400</bug_when>
    <thetext>Created attachment 242041
Proposed fix

I think instead of tinkering and making do with incomplete information we have on LambdaExpression#descriptor, I think we should simply present the enclosing element (in this case method asIntStream) as the local variable&apos;s parent. This patch does that. Let&apos;s see how the tests go.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2390178</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-04-17 08:21:54 -0400</bug_when>
    <thetext>Tests ran fine. Couple of jdt.ui test suites I ran did fine too.

Srikanth, what do you think of the approach of ignoring the lambda elements?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2390181</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-04-17 08:26:16 -0400</bug_when>
    <thetext>Released in master via:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=bfaf9d23a02d05c466f9843a8f1857a7dba35c49

Srikanth, when you have a min, please glance over the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2394415</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-04-29 03:01:10 -0400</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #7)
&gt; Released in master via:
&gt; 
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
&gt; ?id=bfaf9d23a02d05c466f9843a8f1857a7dba35c49
&gt; 
&gt; Srikanth, when you have a min, please glance over the fix.

This change fits in well with the existing comment

// chain in lambda element only if resolved properly.

by performing additional validity checks.

Verified for 4.4 M7 using Version: Luna (4.4)
Build id: I20140427-2030</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2404616</commentid>
    <comment_count>9</comment_count>
    <who name="Manju Mathew">manju656</who>
    <bug_when>2014-05-21 01:01:15 -0400</bug_when>
    <thetext>Reopeing as this issue is not fully fixed. In the inline refactoring dialog from comment 0, choose &quot;All invocations&quot; and Click on &apos;Preview&quot; exception is thrown:

java.lang.reflect.InvocationTargetException
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:423)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:331)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:663)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:502)
	at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage(UserInputWizardPage.java:74)
	at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.getNextPage(UserInputWizardPage.java:114)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.nextOrPreviewPressed(RefactoringWizardDialog2.java:497)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.access$2(RefactoringWizardDialog2.java:494)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2$1.widgetSelected(RefactoringWizardDialog2.java:693)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:832)
	at org.eclipse.jface.window.Window.open(Window.java:808)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:187)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:202)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:122)
	at org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:38)
	at org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startInlineMethodRefactoring(RefactoringExecutionStarter.java:330)
	at org.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.tryInlineMethod(InlineMethodAction.java:148)
	at org.eclipse.jdt.ui.actions.InlineAction.run(InlineAction.java:124)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:279)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:519)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:595)
	at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:511)
	at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:420)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4353)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4172)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1152)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1033)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:148)
	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:636)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:579)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:135)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:379)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:233)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1465)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1438)
Caused by: java.lang.NullPointerException
	at org.eclipse.jdt.internal.core.LambdaFactory.getTypeSignature(LambdaFactory.java:95)
	at org.eclipse.jdt.internal.core.LambdaFactory.createLambdaMethod(LambdaFactory.java:47)
	at org.eclipse.jdt.internal.core.LambdaExpression.&lt;init&gt;(LambdaExpression.java:46)
	at org.eclipse.jdt.internal.core.LambdaFactory.createLambdaExpression(LambdaFactory.java:26)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.createHandle(MatchLocator.java:454)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2223)
	at org.eclipse.jdt.internal.core.search.matching.MemberDeclarationVisitor.visit(MemberDeclarationVisitor.java:212)
	at org.eclipse.jdt.internal.compiler.ast.LambdaExpression.traverse(LambdaExpression.java:641)
	at org.eclipse.jdt.internal.compiler.ast.MessageSend.traverse(MessageSend.java:1015)
	at org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:347)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2301)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2855)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2569)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.process(MatchLocator.java:1752)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1161)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1202)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1334)
	at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:122)
	at org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:232)
	at org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:516)
	at org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:584)
	at org.eclipse.jdt.internal.corext.refactoring.code.TargetProvider$MemberTypeTargetProvider.getAffectedCompilationUnits(TargetProvider.java:479)
	at org.eclipse.jdt.internal.corext.refactoring.code.InlineMethodRefactoring.checkFinalConditions(InlineMethodRefactoring.java:273)
	at org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:85)
	at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:121)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2333)
	at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:122)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2404622</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-05-21 01:27:07 -0400</bug_when>
    <thetext>Looks we need to do similar handling as done in the original fix in MemberDeclarationVisitor.visit(LambdaExpression, BlockScope) also.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2404625</commentid>
    <comment_count>11</comment_count>
      <attachid>243320</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-05-21 01:52:46 -0400</bug_when>
    <thetext>Created attachment 243320
Proposed fix

Fix for the failing refactor (search) test case.

Manoj, can you please help me with a test case for the scenario Manju decribed? Also, please review the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2404903</commentid>
    <comment_count>12</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-05-21 09:52:42 -0400</bug_when>
    <thetext>Stephan, this one needs to be reviewed too. TIA!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2404979</commentid>
    <comment_count>13</comment_count>
      <attachid>243350</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-05-21 11:02:36 -0400</bug_when>
    <thetext>Created attachment 243350
Test case to reproduce the issue

(In reply to Jayaprakash Arthanareeswaran from comment #11)
&gt; Manoj, can you please help me with a test case for the scenario Manju
&gt; decribed? Also, please review the fix.

Please find a self contained test case attached. and +1 for patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2405001</commentid>
    <comment_count>14</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-05-21 11:33:00 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #13)
&gt; Please find a self contained test case attached. and +1 for patch.

Thanks Manoj! I guess I will keep the patches separate so I can release the test via separate commit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2405550</commentid>
    <comment_count>15</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-05-22 08:11:41 -0400</bug_when>
    <thetext>Patches from comment 11 and comment 13 look good to me.

+1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2405583</commentid>
    <comment_count>16</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-05-22 08:41:22 -0400</bug_when>
    <thetext>Released for 4.4 RC2:

- fix (comment 11) via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=19d0603baf106b2ac20388a88e33fa0d323abeb9

- test (comment 13) via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=19bc31ed4604200ad8430ec5b0a01f0e68d6e5d4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2406871</commentid>
    <comment_count>17</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-05-26 01:27:58 -0400</bug_when>
    <thetext>Verified for Eclipse Luna 4.4 RC2 Build id: I20140525-2000.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>242041</attachid>
            <date>2014-04-16 07:10:00 -0400</date>
            <delta_ts>2014-04-16 07:10:33 -0400</delta_ts>
            <desc>Proposed fix</desc>
            <filename>Bug-431716.patch</filename>
            <type>text/plain</type>
            <size>3200</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbApkaWZmIC0tZ2l0IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2Rl
bC9KYXZhRWxlbWVudDhUZXN0cy5qYXZhIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9t
b2RlbC9KYXZhRWxlbWVudDhUZXN0cy5qYXZhCmluZGV4IGE4MWE2NmMuLjhkNjgxYmEgMTAwNjQ0
Ci0tLSBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvSmF2YUVsZW1lbnQ4VGVz
dHMuamF2YQorKysgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVsL0phdmFFbGVt
ZW50OFRlc3RzLmphdmEKQEAgLTUyNywzICs1MjcsMzcgQEAKIAkJfQogCX0KKwkvLyBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDMxNzE2CisJcHVibGljIHZv
aWQgdGVzdDQzMTcxNigpIHRocm93cyBDb3JlRXhjZXB0aW9uIHsKKwkJU3RyaW5nIHByb2plY3RO
YW1lID0gIkJ1ZzQzMTcxNiI7CisJCXRyeSB7CisJCQlJSmF2YVByb2plY3QgcHJvamVjdCA9IGNy
ZWF0ZUphdmFQcm9qZWN0KHByb2plY3ROYW1lLCBuZXcgU3RyaW5nW10geyJzcmMifSwgbmV3IFN0
cmluZ1tdIHsiSkNMMThfTElCIn0sICJiaW4iLCAiMS44Iik7CisJCQlwcm9qZWN0Lm9wZW4obnVs
bCk7CisJCQlTdHJpbmcgZmlsZUNvbnRlbnQgPSAKKwkJCQkJInB1YmxpYyBpbnRlcmZhY2UgWDxU
PiB7XG4iICsKKwkJCQkJIiAgICBkZWZhdWx0IHZvaWQgYXNJbnRTdHJlYW0oKSB7XG4iICsKKwkJ
CQkJIiAgICAJbWFwVG9JbnQoKGxvbmcgbCkgLT4gKGludCkgbCk7IiArCisJCQkJCSIgICAgfVxu
IiArCisJCQkJCSIJZGVmYXVsdCB2b2lkIG1hcFRvSW50KFRvSW50RnVuY3Rpb248PyBzdXBlciBU
PiBtYXBwZXIpIHt9XG4iICsKKwkJCQkJImludGVyZmFjZSBUb0ludEZ1bmN0aW9uPFQ+IHtcbiIg
KworCQkJCQkiCWludCBhcHBseUFzSW50KFQgdmFsdWUpO1xuIiArCisJCQkJCSJ9XG4iOworCQkJ
U3RyaW5nIGZpbGVOYW1lID0gIi8iICsgcHJvamVjdE5hbWUgKyAiL3NyYy9YLmphdmEiOworCQkJ
Y3JlYXRlRmlsZShmaWxlTmFtZSwgZmlsZUNvbnRlbnQpOworCQkJCisJCQlJQ29tcGlsYXRpb25V
bml0IHVuaXQgPSBnZXRDb21waWxhdGlvblVuaXQoZmlsZU5hbWUpOworCQkJaW50IHN0YXJ0ID0g
ZmlsZUNvbnRlbnQuaW5kZXhPZigibCkiKTsKKwkJCUlKYXZhRWxlbWVudFtdIGVsZW1lbnRzID0g
dW5pdC5jb2RlU2VsZWN0KHN0YXJ0LCAxKTsKKwkJCWFzc2VydEVxdWFscygiSW5jb3JyZWN0IGph
dmEgZWxlbWVudCIsIElKYXZhRWxlbWVudC5MT0NBTF9WQVJJQUJMRSwgZWxlbWVudHNbMF0uZ2V0
RWxlbWVudFR5cGUoKSk7CisJCQlTdHJpbmcgbWVtID0gZWxlbWVudHNbMF0uZ2V0SGFuZGxlSWRl
bnRpZmllcigpOworCQkJU3RyaW5nIGV4cGVjdGVkID0gIj1CdWc0MzE3MTYvc3JjPHtYLmphdmFb
WH5hc0ludFN0cmVhbUBsITcyITc3ITc3ITc3IUohMCF0cnVlIjsKKwkJCWFzc2VydEVxdWFscygi
SW5jb3JyZWN0IG1lbWVudG8iLCBleHBlY3RlZCwgbWVtKTsKKwkJCUlNZXRob2QgcGFyZW50ID0g
KElNZXRob2QpIGVsZW1lbnRzWzBdLmdldFBhcmVudCgpOworCQkJbWVtID0gcGFyZW50LmdldEhh
bmRsZUlkZW50aWZpZXIoKTsKKwkJCWV4cGVjdGVkID0gIj1CdWc0MzE3MTYvc3JjPHtYLmphdmFb
WH5hc0ludFN0cmVhbSI7CisJCQlhc3NlcnRFcXVhbHMoIkluY29ycmVjdCBtZW1lbnRvIiwgZXhw
ZWN0ZWQsIG1lbSk7CisJCX0KKwkJZmluYWxseSB7CisJCQlkZWxldGVQcm9qZWN0KHByb2plY3RO
YW1lKTsKKwkJfQorCX0KIH0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUKZGlmZiAtLWdpdCBtb2Rl
bC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS91dGlsL0hhbmRsZUZhY3RvcnkuamF2YSBt
b2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS91dGlsL0hhbmRsZUZhY3RvcnkuamF2
YQppbmRleCA2YmI2YzE3Li41ZjViODQ3IDEwMDY0NAotLS0gbW9kZWwvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvcmUvdXRpbC9IYW5kbGVGYWN0b3J5LmphdmEKKysrIG1vZGVsL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb3JlL3V0aWwvSGFuZGxlRmFjdG9yeS5qYXZhCkBAIC0zNyw0ICsz
Nyw1IEBACiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5D
bGFzc1Njb3BlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29r
dXAuTWV0aG9kU2NvcGU7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
Lmxvb2t1cC5Qcm9ibGVtTWV0aG9kQmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIubG9va3VwLlNjb3BlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb3JlLio7CkBAIC0yMTAsNSArMjExLDYgQEAKIAkJCQkJcGFyZW50RWxlbWVudCA9IGNy
ZWF0ZUVsZW1lbnQoc2NvcGUucGFyZW50LCBlbGVtZW50UG9zaXRpb24sIHVuaXQsIGV4aXN0aW5n
RWxlbWVudHMsIGtub3duU2NvcGVzKTsKIAkJCQkJTGFtYmRhRXhwcmVzc2lvbiBleHByZXNzaW9u
ID0gKExhbWJkYUV4cHJlc3Npb24pIHNjb3BlLm9yaWdpbmFsUmVmZXJlbmNlQ29udGV4dCgpOwot
CQkJCQlpZiAoZXhwcmVzc2lvbi5yZXNvbHZlZFR5cGUgIT0gbnVsbCAmJiBleHByZXNzaW9uLnJl
c29sdmVkVHlwZS5pc1ZhbGlkQmluZGluZygpKSB7IC8vIGNoYWluIGluIGxhbWJkYSBlbGVtZW50
IG9ubHkgaWYgcmVzb2x2ZWQgcHJvcGVybHkuCisJCQkJCWlmIChleHByZXNzaW9uLnJlc29sdmVk
VHlwZSAhPSBudWxsICYmIGV4cHJlc3Npb24ucmVzb2x2ZWRUeXBlLmlzVmFsaWRCaW5kaW5nKCkg
JiYgCisJCQkJCQkJIShleHByZXNzaW9uLmRlc2NyaXB0b3IgaW5zdGFuY2VvZiBQcm9ibGVtTWV0
aG9kQmluZGluZykpIHsgLy8gY2hhaW4gaW4gbGFtYmRhIGVsZW1lbnQgb25seSBpZiByZXNvbHZl
ZCBwcm9wZXJseS4KIAkJCQkJCW5ld0VsZW1lbnQgPSBuZXcgb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvcmUuTGFtYmRhRXhwcmVzc2lvbigoSmF2YUVsZW1lbnQpIHBhcmVudEVsZW1lbnQsIGV4
cHJlc3Npb24pLmdldE1ldGhvZCgpOwogCQkJCQkJa25vd25TY29wZXMucHV0KHNjb3BlLCBuZXdF
bGVtZW50KTs=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>243320</attachid>
            <date>2014-05-21 01:52:00 -0400</date>
            <delta_ts>2014-05-21 01:52:46 -0400</delta_ts>
            <desc>Proposed fix</desc>
            <filename>Bug-431716--Fix-for-the-failing-search-test-case.patch</filename>
            <type>text/plain</type>
            <size>1326</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpk
aWZmIC0tZ2l0IHNlYXJjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9zZWFyY2gvbWF0
Y2hpbmcvTWVtYmVyRGVjbGFyYXRpb25WaXNpdG9yLmphdmEgc2VhcmNoL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb3JlL3NlYXJjaC9tYXRjaGluZy9NZW1iZXJEZWNsYXJhdGlvblZpc2l0b3Iu
amF2YQppbmRleCBmNjNiZDNkLi4yM2NiOGFmIDEwMDY0NAotLS0gc2VhcmNoL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb3JlL3NlYXJjaC9tYXRjaGluZy9NZW1iZXJEZWNsYXJhdGlvblZpc2l0
b3IuamF2YQorKysgc2VhcmNoL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL3NlYXJjaC9t
YXRjaGluZy9NZW1iZXJEZWNsYXJhdGlvblZpc2l0b3IuamF2YQpAQCAtMTgsNCArMTgsNSBAQAog
aW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuKjsKIGltcG9ydCBv
cmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJsb2NrU2NvcGU7CitpbXBv
cnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5Qcm9ibGVtTWV0aG9k
QmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIudXRpbC5I
YXNodGFibGVPZkludFZhbHVlczsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29y
ZS5zZWFyY2gubWF0Y2hpbmcuTWF0Y2hMb2NhdG9yLldyYXBwZWRDb3JlRXhjZXB0aW9uOwpAQCAt
MjA5LDUgKzIxMCw2IEBACiAJSW50ZWdlciBsZXZlbCA9IChJbnRlZ2VyKSB0aGlzLm5vZGVTZXQu
bWF0Y2hpbmdOb2Rlcy5yZW1vdmVLZXkobGFtYmRhRXhwcmVzc2lvbik7CiAJdHJ5IHsKLQkJaWYg
KGxhbWJkYUV4cHJlc3Npb24ucmVzb2x2ZWRUeXBlICE9IG51bGwgJiYgbGFtYmRhRXhwcmVzc2lv
bi5yZXNvbHZlZFR5cGUuaXNWYWxpZEJpbmRpbmcoKSkKKwkJaWYgKGxhbWJkYUV4cHJlc3Npb24u
cmVzb2x2ZWRUeXBlICE9IG51bGwgJiYgbGFtYmRhRXhwcmVzc2lvbi5yZXNvbHZlZFR5cGUuaXNW
YWxpZEJpbmRpbmcoKSAmJgorCQkJCSEobGFtYmRhRXhwcmVzc2lvbi5kZXNjcmlwdG9yIGluc3Rh
bmNlb2YgUHJvYmxlbU1ldGhvZEJpbmRpbmcpKQogCQkJdGhpcy5sb2NhdG9yLnJlcG9ydE1hdGNo
aW5nKGxhbWJkYUV4cHJlc3Npb24sIHRoaXMuZW5jbG9zaW5nRWxlbWVudCwgbGV2ZWwgIT0gbnVs
bCA/IGxldmVsLmludFZhbHVlKCkgOiAtMSwgdGhpcy5ub2RlU2V0LCB0aGlzLnR5cGVJbkhpZXJh
cmNoeSk7CiAJCWVsc2Ug
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>243350</attachid>
            <date>2014-05-21 11:02:00 -0400</date>
            <delta_ts>2014-05-21 11:02:36 -0400</delta_ts>
            <desc>Test case to reproduce the issue</desc>
            <filename>Test-Case-for-Bug-431716.patch</filename>
            <type>text/plain</type>
            <size>2539</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhU2VhcmNoQnVnczhUZXN0cy5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKaW5kZXggYmRlMGRlOS4uOWI1ZmFi
ZSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKQEAgLTE3OSw2ICsxNzks
NyBAQAogCXN1aXRlLmFkZFRlc3QobmV3IEphdmFTZWFyY2hCdWdzOFRlc3RzKCJ0ZXN0QnVnNDI5
MDEyXzAwMTYiKSk7CiAJc3VpdGUuYWRkVGVzdChuZXcgSmF2YVNlYXJjaEJ1Z3M4VGVzdHMoInRl
c3RCdWc0MjkwMTJfMDAxNyIpKTsKIAlzdWl0ZS5hZGRUZXN0KG5ldyBKYXZhU2VhcmNoQnVnczhU
ZXN0cygidGVzdEJ1ZzQyOTAxMl8wMDE4IikpOworCXN1aXRlLmFkZFRlc3QobmV3IEphdmFTZWFy
Y2hCdWdzOFRlc3RzKCJ0ZXN0QnVnNDMxNzE2IikpOwogCXJldHVybiBzdWl0ZTsKIH0KIGNsYXNz
IFRlc3RDb2xsZWN0b3IgZXh0ZW5kcyBKYXZhU2VhcmNoUmVzdWx0Q29sbGVjdG9yIHsKQEAgLTQ0
MjcsNiArNDQyOCw0NyBAQAogCQkic3JjL3Rlc3QvVGVzdC5qYXZhIHZvaWQgdGVzdC5YLm1haW4o
U3RyaW5nW10pIFtnb29dIEVYQUNUX01BVENIIgogKTsKIH0KKy8vaHR0cHM6Ly9idWdzLmVjbGlw
c2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTMxNzE2LCBbMS44XVtjb21waWxlcl0gTlBFIHdo
ZW4gY3JlYXRpbmcgTGFtYmRhTWV0aG9kIGVsZW1lbnQgZm9yIGxhbWJkYSBleHByZXNzaW9ucyB3
aXRoIGVycm9ycyAKK3B1YmxpYyB2b2lkIHRlc3RCdWc0MzE3MTYoKSB0aHJvd3MgQ29yZUV4Y2Vw
dGlvbiB7CisJdGhpcy53b3JraW5nQ29waWVzID0gbmV3IElDb21waWxhdGlvblVuaXRbMV07CisJ
dGhpcy53b3JraW5nQ29waWVzWzBdID0gZ2V0V29ya2luZ0NvcHkoIi9KYXZhU2VhcmNoQnVncy9z
cmMvWC5qYXZhIiwKKwkJCSJpbnRlcmZhY2UgVG9Mb25nRnVuY3Rpb248VD4ge1xuIiArCisJCQki
ICAgIGxvbmcgYXBwbHlBc0xvbmcoVCB2YWx1ZSk7XG4iICsKKwkJCSJ9XG4iICsKKwkJCSJpbnRl
cmZhY2UgVG9JbnRGdW5jdGlvbjxUPiB7XG4iICsKKwkJCSIgICAgaW50IGFwcGx5QXNJbnQoVCB2
YWx1ZSk7XG4iICsKKwkJCSJ9XG4iICsKKwkJCSJpbnRlcmZhY2UgU3RyZWFtPFQ+ICB7XG4iICsK
KwkJCSIgICBpbnQgbWFwVG9JbnQoVG9JbnRGdW5jdGlvbjw/IHN1cGVyIFQ+IG1hcHBlcik7XG4i
ICsKKwkJCSJ9XG4iICsKKwkJCSJcbiIgKworCQkJInB1YmxpYyBpbnRlcmZhY2UgWDxUPiB7XG4i
ICsKKwkJCSJcbiIgKworCQkJIglwdWJsaWMgc3RhdGljIDxUPiBUb0xvbmdGdW5jdGlvbjw/IHN1
cGVyIFQ+IHRvTG9uZ0Z1bmN0aW9uKCkge1xuIiArCisJCQkiCQlyZXR1cm4gbnVsbDtcbiIgKwor
CQkJIgl9XG4iICsKKwkJCSIJZGVmYXVsdCB2b2lkIGFzSW50U3RyZWFtKFN0cmVhbTxUPiBtYWtl
cmdldCkge1xuIiArCisJCQkiCQltYWtlcmdldC5tYXBUb0ludCgobG9uZyBsKSAtPiAoaW50KSBs
KTtcbiIgKworCQkJIgkJLy8gdHJ5aW5nIHRvIGlubGluZSB0aGlzIG1ldGhvZCByZXN1bHRzIGNh
dXNlcyBOUEVcbiIgKworCQkJIgkJLyogaGVyZSAqL3RvTG9uZ0Z1bmN0aW9uKCk7XG4iICsKKwkJ
CSIJfVxuIiArCisJCQkifVxuIgorCSk7CisJCisJU3RyaW5nIHN0ciA9IHRoaXMud29ya2luZ0Nv
cGllc1swXS5nZXRTb3VyY2UoKTsKKwlTdHJpbmcgc2VsZWN0aW9uID0gIi8qIGhlcmUgKi90b0xv
bmdGdW5jdGlvbiI7CisJaW50IHN0YXJ0ID0gc3RyLmluZGV4T2Yoc2VsZWN0aW9uKTsKKwlpbnQg
bGVuZ3RoID0gc2VsZWN0aW9uLmxlbmd0aCgpOworCisJSUphdmFFbGVtZW50W10gZWxlbWVudHMg
PSB0aGlzLndvcmtpbmdDb3BpZXNbMF0uY29kZVNlbGVjdChzdGFydCwgbGVuZ3RoKTsKKwlNZXRo
b2RQYXR0ZXJuIHBhdHRlcm4gPSAoTWV0aG9kUGF0dGVybikgU2VhcmNoUGF0dGVybi5jcmVhdGVQ
YXR0ZXJuKGVsZW1lbnRzWzBdLCBSRUZFUkVOQ0VTLCBFWEFDVF9SVUxFIHwgRVJBU1VSRV9SVUxF
KTsKKworCW5ldyBTZWFyY2hFbmdpbmUodGhpcy53b3JraW5nQ29waWVzKS5zZWFyY2gocGF0dGVy
biwKKwkJCW5ldyBTZWFyY2hQYXJ0aWNpcGFudFtdIHtTZWFyY2hFbmdpbmUuZ2V0RGVmYXVsdFNl
YXJjaFBhcnRpY2lwYW50KCl9LAorCQkJZ2V0SmF2YVNlYXJjaFdvcmtpbmdDb3BpZXNTY29wZSgp
LAorCQkJdGhpcy5yZXN1bHRDb2xsZWN0b3IsCisJCQludWxsKTsKK30KIC8vIEFkZCBuZXcgdGVz
dHMgaW4gSmF2YVNlYXJjaEJ1Z3M4VGVzdHMKIH0KIA==
</data>

          </attachment>
      

    </bug>

</bugzilla>