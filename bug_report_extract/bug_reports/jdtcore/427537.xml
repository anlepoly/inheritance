<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>427537</bug_id>
          
          <creation_ts>2014-02-06 02:20:00 -0500</creation_ts>
          <short_desc>[1.8][search] CCE with search match location set to cast type and intersection casts</short_desc>
          <delta_ts>2014-02-21 01:34:12 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3.1</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="61543"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2359451</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-06 02:20:27 -0500</bug_when>
    <thetext>// --
import java.io.Serializable;
interface I {
	void foo();
}
public class X {
	public static void main(String[] args) {
		I i = (I &amp; Serializable) () -&gt; {};
	
	}
}

Search for I using Java search + type references + cast locations.

java.lang.ClassCastException: org.eclipse.jdt.internal.compiler.ast.IntersectionCastTypeReference incompatible with org.eclipse.jdt.internal.compiler.ast.QualifiedTypeReference
	at org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.match(TypeReferenceLocator.java:99)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.consumeCastExpressionLL1WithBounds(MatchLocatorParser.java:227)
	at org.eclipse.jdt.internal.compiler.parser.Parser.consumeRule(Parser.java:7015)
	at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:10965)
	at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:11314)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.parseBodies(MatchLocatorParser.java:834)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.parseBodies(MatchLocatorParser.java:808)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.getMethodBodies(MatchLocator.java:889)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.parseAndBuildBindings(MatchLocator.java:1671)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1091)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1196)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1328)
	at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:96)
	at org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:232)
	at org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:516)
	at org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:584)
	at org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run(JavaSearchQuery.java:144)
	at org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:91)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2359507</commentid>
    <comment_count>1</comment_count>
      <attachid>239690</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-02-06 04:44:10 -0500</bug_when>
    <thetext>Created attachment 239690
Proposed Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2359683</commentid>
    <comment_count>2</comment_count>
      <attachid>239703</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-02-06 10:49:01 -0500</bug_when>
    <thetext>Created attachment 239703
Proposed Patch

Updated Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2359764</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-06 13:08:33 -0500</bug_when>
    <thetext>I made the following changes and released the patch: 

    - The check if (node instanceof IntersectionCastTypeReference) {
      is unnecessary.
    - Eliminated the short circuiting of the loop. The right thing
to at this level is to expose the type references and let the down
stream pieces decide what they want to do with it.

Commit id: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=63969f0e42bcdfc0a055ac0f3d2f47fa48cf3e29

Thanks Manoj.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2366495</commentid>
    <comment_count>4</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-02-21 01:34:02 -0500</bug_when>
    <thetext>The test case crashes (mentioned in Comment 0) crashes with a older build and
successfully succeeds with Kepler SR2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2366496</commentid>
    <comment_count>5</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-02-21 01:34:12 -0500</bug_when>
    <thetext>Verified for Eclipse + Java 8 RC1 using Kepler SR2(RC4) +  
Eclipse Java Development Tools Patch for Java 8 Support (BETA)   
1.0.0.v20140220-2054.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>239690</attachid>
            <date>2014-02-06 04:44:00 -0500</date>
            <delta_ts>2014-02-06 10:49:01 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-427537-18search-CCE-with-search-match-lo.patch</filename>
            <type>text/plain</type>
            <size>4495</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhU2VhcmNoQnVnczhUZXN0cy5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKaW5kZXggZGYyMzZiOS4uODViZjU3
YSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKQEAgLTEsNSArMSw1IEBA
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBw
cm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAg
KiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBh
dApAQCAtOTcsNiArOTcsNyBAQAogCXN1aXRlLmFkZFRlc3QobmV3IEphdmFTZWFyY2hCdWdzOFRl
c3RzKCJ0ZXN0QnVnNDI0MTE5XzAwMSIpKTsKIAlzdWl0ZS5hZGRUZXN0KG5ldyBKYXZhU2VhcmNo
QnVnczhUZXN0cygidGVzdEJ1ZzQyNDExOV8wMDIiKSk7CiAJc3VpdGUuYWRkVGVzdChuZXcgSmF2
YVNlYXJjaEJ1Z3M4VGVzdHMoInRlc3RCdWc0MjQxMTlfMDAzIikpOworCXN1aXRlLmFkZFRlc3Qo
bmV3IEphdmFTZWFyY2hCdWdzOFRlc3RzKCJ0ZXN0QnVnNDI3NTM3YSIpKTsKIAlyZXR1cm4gc3Vp
dGU7CiB9CiBjbGFzcyBUZXN0Q29sbGVjdG9yIGV4dGVuZHMgSmF2YVNlYXJjaFJlc3VsdENvbGxl
Y3RvciB7CkBAIC0xNzE0LDUgKzE3MTUsMzkgQEAKIAkJZGVsZXRlUHJvamVjdCgiUDEiKTsKIAl9
CiB9CisvKioKKyAqIEBidWcgNDI3NTM3OiAgWzEuOF1bc2VhcmNoXSBDQ0Ugd2l0aCBzZWFyY2gg
bWF0Y2ggbG9jYXRpb24gc2V0IHRvIGNhc3QgdHlwZSBhbmQgaW50ZXJzZWN0aW9uIGNhc3RzCisg
KiBAdGVzdCBFbnN1cmVzIHRoYXQgdGhlIHNlYXJjaCBmb3IgdHlwZSB1c2UgYW5ub3RhdGlvbiBk
b2VzIG5vdCBjYXVzZSBDQ0UgYW5kIHJldHVybnMgY29ycmVjdCByZXN1bHRzIAorICogCQorICog
QHNlZSAiaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQyNzUz
NyIKKyAqLworcHVibGljIHZvaWQgdGVzdEJ1ZzQyNzUzN2EoKSB0aHJvd3MgQ29yZUV4Y2VwdGlv
biB7CisJdGhpcy53b3JraW5nQ29waWVzID0gbmV3IElDb21waWxhdGlvblVuaXRbMV07CisJdGhp
cy53b3JraW5nQ29waWVzWzBdID0gZ2V0V29ya2luZ0NvcHkoIi9KYXZhU2VhcmNoQnVncy9zcmMv
YjQyNzUzNy9YLmphdmEiLAorCQkJImludGVyZmFjZSBJIHtcbiIgKworCQkJIgl2b2lkIGZvbygp
O1xuIiArCisJCQkifVxuIiArCisJCQkiaW50ZXJmYWNlIEoge31cbiIgKworCQkJInB1YmxpYyBj
bGFzcyBYIHtcbiIgKworCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdz
KSB7XG4iICsKKwkJCSIJCUkgaSA9IChJICYgSikgKCkgLT4ge307XG4iICsKKwkJCSIJCWkuZm9v
KCk7XG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIiAKKwkpOworCVNlYXJjaFBhdHRlcm4gcGF0
dGVybiA9IFNlYXJjaFBhdHRlcm4uY3JlYXRlUGF0dGVybigKKwkJIkkiLAorCQlUWVBFLAorCQlD
QVNUX1RZUEVfUkVGRVJFTkNFLAorCQlFWEFDVF9SVUxFKTsKKwluZXcgU2VhcmNoRW5naW5lKHRo
aXMud29ya2luZ0NvcGllcykuc2VhcmNoKHBhdHRlcm4sCisJCQluZXcgU2VhcmNoUGFydGljaXBh
bnRbXSB7U2VhcmNoRW5naW5lLmdldERlZmF1bHRTZWFyY2hQYXJ0aWNpcGFudCgpfSwKKwkJCWdl
dEphdmFTZWFyY2hXb3JraW5nQ29waWVzU2NvcGUoKSwKKwkJCXRoaXMucmVzdWx0Q29sbGVjdG9y
LAorCQkJbnVsbCk7CisJYXNzZXJ0U2VhcmNoUmVzdWx0cygKKwkJInNyYy9iNDI3NTM3L1guamF2
YSB2b2lkIGI0Mjc1MzcuWC5tYWluKFN0cmluZ1tdKSBbSV0gRVhBQ1RfTUFUQ0giCisJKTsKK30K
IC8vIEFkZCBuZXcgdGVzdHMgaW4gSmF2YVNlYXJjaEJ1Z3M4VGVzdHMKIH0KXCBObyBuZXdsaW5l
IGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9zZWFyY2gv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvc2VhcmNoL21hdGNoaW5nL1R5cGVSZWZlcmVu
Y2VMb2NhdG9yLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9zZWFyY2gvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvcmUvc2VhcmNoL21hdGNoaW5nL1R5cGVSZWZlcmVuY2VMb2NhdG9yLmph
dmEKaW5kZXggYTk5ZTYxZC4uYjAxNWE0MCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvc2VhcmNoL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL3NlYXJjaC9tYXRjaGluZy9U
eXBlUmVmZXJlbmNlTG9jYXRvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL3NlYXJj
aC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9zZWFyY2gvbWF0Y2hpbmcvVHlwZVJlZmVy
ZW5jZUxvY2F0b3IuamF2YQpAQCAtMSwxMCArMSwxNCBAQAogLyoqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxNCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFu
eWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2Yg
dGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhp
cyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNsaXBz
ZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKgorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlv
biBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2
YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0
ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3Qg
Y29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKICAqIENv
bnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1w
bGVtZW50YXRpb24KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpAQCAtOTUsNiArOTksMTEgQEAK
IAlpZiAobm9kZSBpbnN0YW5jZW9mIFNpbmdsZVR5cGVSZWZlcmVuY2UpIHsKIAkJaWYgKG1hdGNo
ZXNOYW1lKHRoaXMucGF0dGVybi5zaW1wbGVOYW1lLCAoKFNpbmdsZVR5cGVSZWZlcmVuY2UpIG5v
ZGUpLnRva2VuKSkKIAkJCXJldHVybiBub2RlU2V0LmFkZE1hdGNoKG5vZGUsIHRoaXMucGF0dGVy
bi5tdXN0UmVzb2x2ZSA/IFBPU1NJQkxFX01BVENIIDogQUNDVVJBVEVfTUFUQ0gpOworCX0gZWxz
ZSBpZiAobm9kZSBpbnN0YW5jZW9mIEludGVyc2VjdGlvbkNhc3RUeXBlUmVmZXJlbmNlKSB7CisJ
CVR5cGVSZWZlcmVuY2VbXSB0eXBlUmVmZXJlbmNlcyA9ICgoSW50ZXJzZWN0aW9uQ2FzdFR5cGVS
ZWZlcmVuY2UpIG5vZGUpLnR5cGVSZWZlcmVuY2VzOworCQlmb3IgKGludCBpID0gMCwgbWF4ID0g
dHlwZVJlZmVyZW5jZXMubGVuZ3RoOyBpIDwgbWF4OyBpKyspCisJCQlpZiAobWF0Y2godHlwZVJl
ZmVyZW5jZXNbaV0sIG5vZGVTZXQpICE9IElNUE9TU0lCTEVfTUFUQ0gpCisJCQkJcmV0dXJuIG5v
ZGVTZXQuYWRkTWF0Y2gobm9kZSwgUE9TU0lCTEVfTUFUQ0gpOwogCX0gZWxzZSB7CiAJCWNoYXJb
XVtdIHRva2VucyA9ICgoUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgbm9kZSkudG9rZW5zOwogCQlm
b3IgKGludCBpID0gMCwgbWF4ID0gdG9rZW5zLmxlbmd0aDsgaSA8IG1heDsgaSsrKQ==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>239703</attachid>
            <date>2014-02-06 10:49:00 -0500</date>
            <delta_ts>2014-02-06 10:49:01 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-427537-18search-CCE-with-search-match-lo.patch</filename>
            <type>text/plain</type>
            <size>4374</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9KYXZhU2VhcmNoQnVnczhUZXN0cy5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKaW5kZXggZGYyMzZiOS4uMWIwMWE1
ZiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL21vZGVsL0phdmFTZWFyY2hCdWdzOFRlc3RzLmphdmEKQEAgLTEsNSArMSw1IEBA
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBw
cm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAg
KiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBh
dApAQCAtOTcsNiArOTcsNyBAQAogCXN1aXRlLmFkZFRlc3QobmV3IEphdmFTZWFyY2hCdWdzOFRl
c3RzKCJ0ZXN0QnVnNDI0MTE5XzAwMSIpKTsKIAlzdWl0ZS5hZGRUZXN0KG5ldyBKYXZhU2VhcmNo
QnVnczhUZXN0cygidGVzdEJ1ZzQyNDExOV8wMDIiKSk7CiAJc3VpdGUuYWRkVGVzdChuZXcgSmF2
YVNlYXJjaEJ1Z3M4VGVzdHMoInRlc3RCdWc0MjQxMTlfMDAzIikpOworCXN1aXRlLmFkZFRlc3Qo
bmV3IEphdmFTZWFyY2hCdWdzOFRlc3RzKCJ0ZXN0QnVnNDI3NTM3YSIpKTsKIAlyZXR1cm4gc3Vp
dGU7CiB9CiBjbGFzcyBUZXN0Q29sbGVjdG9yIGV4dGVuZHMgSmF2YVNlYXJjaFJlc3VsdENvbGxl
Y3RvciB7CkBAIC0xNzE0LDUgKzE3MTUsNDIgQEAKIAkJZGVsZXRlUHJvamVjdCgiUDEiKTsKIAl9
CiB9CisvKioKKyAqIEBidWcgNDI3NTM3OiAgWzEuOF1bc2VhcmNoXSBDQ0Ugd2l0aCBzZWFyY2gg
bWF0Y2ggbG9jYXRpb24gc2V0IHRvIGNhc3QgdHlwZSBhbmQgaW50ZXJzZWN0aW9uIGNhc3RzCisg
KiBAdGVzdCBFbnN1cmVzIHRoYXQgdGhlIHNlYXJjaCBmb3IgdHlwZSB1c2UgYW5ub3RhdGlvbiBk
b2VzIG5vdCBjYXVzZSBDQ0UgYW5kIHJldHVybnMgY29ycmVjdCByZXN1bHRzIAorICogCQorICog
QHNlZSAiaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQyNzUz
NyIKKyAqLworcHVibGljIHZvaWQgdGVzdEJ1ZzQyNzUzN2EoKSB0aHJvd3MgQ29yZUV4Y2VwdGlv
biB7CisJdGhpcy53b3JraW5nQ29waWVzID0gbmV3IElDb21waWxhdGlvblVuaXRbMV07CisJdGhp
cy53b3JraW5nQ29waWVzWzBdID0gZ2V0V29ya2luZ0NvcHkoIi9KYXZhU2VhcmNoQnVncy9zcmMv
YjQyNzUzNy9YLmphdmEiLAorCQkJImludGVyZmFjZSBJIHtcbiIgKworCQkJIgl2b2lkIGZvbygp
O1xuIiArCisJCQkifVxuIiArCisJCQkiaW50ZXJmYWNlIEoge31cbiIgKworCQkJInB1YmxpYyBj
bGFzcyBYIHtcbiIgKworCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdz
KSB7XG4iICsKKwkJCSIJCUkgaSA9IChJICYgSikgKCkgLT4ge307XG4iICsKKwkJCSIJCWkuZm9v
KCk7XG4iICsKKwkJCSIJCUkgaiA9IChKICYgSSkgKCkgLT4ge307XG4iICsKKwkJCSIJCWouZm9v
KCk7XG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIiAKKwkpOworCVNlYXJjaFBhdHRlcm4gcGF0
dGVybiA9IFNlYXJjaFBhdHRlcm4uY3JlYXRlUGF0dGVybigKKwkJIkkiLAorCQlUWVBFLAorCQlD
QVNUX1RZUEVfUkVGRVJFTkNFLAorCQlFWEFDVF9SVUxFKTsKKwluZXcgU2VhcmNoRW5naW5lKHRo
aXMud29ya2luZ0NvcGllcykuc2VhcmNoKHBhdHRlcm4sCisJCQluZXcgU2VhcmNoUGFydGljaXBh
bnRbXSB7U2VhcmNoRW5naW5lLmdldERlZmF1bHRTZWFyY2hQYXJ0aWNpcGFudCgpfSwKKwkJCWdl
dEphdmFTZWFyY2hXb3JraW5nQ29waWVzU2NvcGUoKSwKKwkJCXRoaXMucmVzdWx0Q29sbGVjdG9y
LAorCQkJbnVsbCk7CisJYXNzZXJ0U2VhcmNoUmVzdWx0cygKKwkJInNyYy9iNDI3NTM3L1guamF2
YSB2b2lkIGI0Mjc1MzcuWC5tYWluKFN0cmluZ1tdKSBbSV0gRVhBQ1RfTUFUQ0hcbiIgKworCQki
c3JjL2I0Mjc1MzcvWC5qYXZhIHZvaWQgYjQyNzUzNy5YLm1haW4oU3RyaW5nW10pIFtJXSBFWEFD
VF9NQVRDSCIKKwkpOworfQogLy8gQWRkIG5ldyB0ZXN0cyBpbiBKYXZhU2VhcmNoQnVnczhUZXN0
cwogfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL3NlYXJjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9zZWFyY2gvbWF0
Y2hpbmcvTWF0Y2hMb2NhdG9yUGFyc2VyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9zZWFy
Y2gvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvc2VhcmNoL21hdGNoaW5nL01hdGNoTG9j
YXRvclBhcnNlci5qYXZhCmluZGV4IGNiNTFhYTMuLmFjYjk2NDMgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL3NlYXJjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9zZWFy
Y2gvbWF0Y2hpbmcvTWF0Y2hMb2NhdG9yUGFyc2VyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvc2VhcmNoL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL3NlYXJjaC9tYXRjaGlu
Zy9NYXRjaExvY2F0b3JQYXJzZXIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFu
ZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFu
ZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBh
Y2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRl
cm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFu
aWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0yMjQsNyArMjI0
LDE2IEBACiAJc3VwZXIuY29uc3VtZUNhc3RFeHByZXNzaW9uTEwxV2l0aEJvdW5kcygpOwogCWlm
ICgodGhpcy5wYXR0ZXJuRmluZUdyYWluICYgSUphdmFTZWFyY2hDb25zdGFudHMuQ0FTVF9UWVBF
X1JFRkVSRU5DRSkgIT0gMCkgewogCQlDYXN0RXhwcmVzc2lvbiBjYXN0RXhwcmVzc2lvbiA9IChD
YXN0RXhwcmVzc2lvbikgdGhpcy5leHByZXNzaW9uU3RhY2tbdGhpcy5leHByZXNzaW9uUHRyXTsK
LQkJdGhpcy5wYXR0ZXJuTG9jYXRvci5tYXRjaChjYXN0RXhwcmVzc2lvbi50eXBlLCB0aGlzLm5v
ZGVTZXQpOworCQlUeXBlUmVmZXJlbmNlIG5vZGUgPSBjYXN0RXhwcmVzc2lvbi50eXBlOworCQlp
ZiAobm9kZSBpbnN0YW5jZW9mIEludGVyc2VjdGlvbkNhc3RUeXBlUmVmZXJlbmNlKSB7CisJCQlU
eXBlUmVmZXJlbmNlW10gdHlwZVJlZmVyZW5jZXMgPSAoKEludGVyc2VjdGlvbkNhc3RUeXBlUmVm
ZXJlbmNlKSBub2RlKS50eXBlUmVmZXJlbmNlczsKKwkJCWZvciAoaW50IGkgPSAwLCBtYXggPSB0
eXBlUmVmZXJlbmNlcy5sZW5ndGgsIG1hdGNoS2luZCA9IFBhdHRlcm5Mb2NhdG9yLklNUE9TU0lC
TEVfTUFUQ0g7CisJCQkJCWkgPCBtYXggJiYgbWF0Y2hLaW5kID09IFBhdHRlcm5Mb2NhdG9yLklN
UE9TU0lCTEVfTUFUQ0g7CisJCQkJCW1hdGNoS2luZCA9IHRoaXMucGF0dGVybkxvY2F0b3IubWF0
Y2godHlwZVJlZmVyZW5jZXNbaSsrXSwgdGhpcy5ub2RlU2V0KSkKKwkJCXsgLyogRW1wdHkgQmxv
Y2sgKi8gfQorCQl9IGVsc2UgeworCQkJdGhpcy5wYXR0ZXJuTG9jYXRvci5tYXRjaChjYXN0RXhw
cmVzc2lvbi50eXBlLCB0aGlzLm5vZGVTZXQpOworCQl9CiAJfQogfQogcHJvdGVjdGVkIHZvaWQg
Y29uc3VtZUNhc3RFeHByZXNzaW9uV2l0aEdlbmVyaWNzQXJyYXkoKSB7
</data>

          </attachment>
      

    </bug>

</bugzilla>