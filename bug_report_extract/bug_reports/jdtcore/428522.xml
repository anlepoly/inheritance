<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>428522</bug_id>
          
          <creation_ts>2014-02-19 05:34:00 -0500</creation_ts>
          <short_desc>[1.8] VerifyError when a non primitive type cast to primitive type</short_desc>
          <delta_ts>2014-02-24 18:55:36 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jay Arthanareeswaran">jarthana</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>manju656</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2365342</commentid>
    <comment_count>0</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-02-19 05:34:14 -0500</bug_when>
    <thetext>To reproduce, run the following code with &quot;Preserve unused local variables&quot; option turned off:

public class X {
    public static void main(String args[]) {
    	long l = (long) ((Object) 100L);
    }
}

This is a recent regression.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2365413</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-19 07:05:25 -0500</bug_when>
    <thetext>I&apos;ll add this test case there.

*** This bug has been marked as a duplicate of bug 428388 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2365581</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-19 11:58:52 -0500</bug_when>
    <thetext>Looking at the code change required for this fix, it is clear that this
couldn&apos;t have been a regression - Jay I think you ran into some code pattern
that you didn&apos;t test before.

This is also completely unconnected to https://bugs.eclipse.org/bugs/show_bug.cgi?id=428388, so reopening to fix on its own ticket.

Fix will be released shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2365594</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-19 12:19:48 -0500</bug_when>
    <thetext>Fix and tests released here:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=d57dbd547ab44a22cc430f18490a1ae370e64432

I had some trouble initially reproducing this in the IDE because I was fiddling
with workspace settings instead of project settings for preserve unused locals.

Problem is that we should use pop2 instruction to pop long and double values
and not pop instruction - this support was never there in CastExpression.generateCode and hence this couldn&apos;t have been a regression.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2367925</commentid>
    <comment_count>4</comment_count>
    <who name="Manju Mathew">manju656</who>
    <bug_when>2014-02-24 18:55:36 -0500</bug_when>
    <thetext>Verified using Kepler SR2 + Java 8 RC1 + Eclipse Java Development Tools Patch for Java 8 Support (BETA) 1.0.0.v20140223-2022.
The code snippet provided in comment 0 does not give any compiler error. Raised bug 428887 for the problem found during debug.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>