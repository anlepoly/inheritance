<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>400710</bug_id>
          
          <creation_ts>2013-02-13 11:13:00 -0500</creation_ts>
          <short_desc>[1.8][compiler] synthetic access to default method generates wrong code</short_desc>
          <delta_ts>2013-02-18 04:20:38 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>380501</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>jarthana</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2216258</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-02-13 11:13:43 -0500</bug_when>
    <thetext>The following code generates wrong code:

interface I {
    public void foo() default {
        System.out.println(&quot;default&quot;);
    }
}
public class C implements I {
    public static void main(String[] args) {
        C c = new C();
        c.foo();
    }
}

At runtime this produces:
Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: java.lang.Object.foo()V
	at C.foo(C.java:1)
	at C.main(C.java:9)

The reason is in the way a synthetic method (SuperMethodAccess) for foo is generated: it is assumed that the super method must be in accessMethod.declaringClass.superclass(), which leads to trying to invoke java.lang.Object.foo(), which obviously doesn&apos;t exist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2216261</commentid>
    <comment_count>1</comment_count>
      <attachid>227029</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-02-13 11:26:00 -0500</bug_when>
    <thetext>Created attachment 227029
tentative fix

This patch fixes the immediate issue but is not sufficiently tested.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217278</commentid>
    <comment_count>2</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-02-15 05:46:17 -0500</bug_when>
    <thetext>Jay, does my patch help for your test re static methods in interfaces?
Should I test and release this one first, or wait for you?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217646</commentid>
    <comment_count>3</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-02-16 05:04:45 -0500</bug_when>
    <thetext>If released the immediate patch via commit c22ae4e2acd996824ff94a2b0edaa0df69d9b3b1

Further cross-checking deferred to bug 391376.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217950</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-18 04:20:38 -0500</bug_when>
    <thetext>(In reply to comment #2)
&gt; Jay, does my patch help for your test re static methods in interfaces?
&gt; Should I test and release this one first, or wait for you?

Yes, Stephan. Thank you!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>227029</attachid>
            <date>2013-02-13 11:26:00 -0500</date>
            <delta_ts>2013-02-13 11:26:00 -0500</delta_ts>
            <desc>tentative fix</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>2432</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0RlZmF1bHRNZXRob2Rz
VGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vRGVmYXVsdE1ldGhvZHNU
ZXN0LmphdmEKaW5kZXggYTQxZmU4OC4uOWI1NGJiYyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Nv
bXBpbGVyL3JlZ3Jlc3Npb24vRGVmYXVsdE1ldGhvZHNUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3JlZ3Jlc3Npb24vRGVmYXVsdE1ldGhvZHNUZXN0LmphdmEKQEAgLTIxNyw3ICsy
MTcsMjkgQEAKIAkJCSJkZWZhdWx0IgogCQkJKTsKIAl9Ci0JCisKKwkvLyBjbGFzcyBpbXBsZW1l
bnRzIGludGVyZmFjZSB3aXRoIGRlZmF1bHQgbWV0aG9kLiAKKwkvLyAtIHdpdG5lc3MgZm9yIE5v
U3VjaE1ldGhvZEVycm9yIGluIHN5bnRoZXRpYyBtZXRob2QgKFN1cGVyTWV0aG9kQWNjZXNzKQor
CXB1YmxpYyB2b2lkIHRlc3RNb2RpZmllcnM1YSgpIHsKKwkJcnVuQ29uZm9ybVRlc3QoCisJCQlu
ZXcgU3RyaW5nW10geworCQkJCSJDLmphdmEiLAorCQkJCSJpbnRlcmZhY2UgSSB7XG4iICsKKwkJ
CQkiICAgIHB1YmxpYyB2b2lkIGZvbygpIGRlZmF1bHQge1xuIiArCisJCQkJIiAgICAgICAgU3lz
dGVtLm91dC5wcmludGxuKFwiZGVmYXVsdFwiKTtcbiIgKworCQkJCSIgICAgfVxuIiArCisJCQkJ
In1cbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgQyBpbXBsZW1lbnRzIEkge1xuIiArCisJCQkJIiAg
ICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCQkiICAg
ICAgICBDIGMgPSBuZXcgQygpO1xuIiArCisJCQkJIiAgICAgICAgYy5mb28oKTtcbiIgKworCQkJ
CSIgICAgfVxuIiArCisJCQkJIn1cbiIKKwkJCX0sCisJCQkiZGVmYXVsdCIKKwkJCSk7CisJfQor
CiAJLy8gY2xhc3MgaW1wbGVtZW50cyBpbnRlcmZhY2Ugd2l0aCBkZWZhdWx0IG1ldGhvZC4gCiAJ
Ly8gLSBubyBuZWVkIHRvIGltcGxlbWVudCB0aGlzIGludGVyZmFjZSBtZXRob2QgYXMgaXQgaXMg
bm90IGFic3RyYWN0LCBidXQgb3RoZXIgYWJzdHJhY3QgbWV0aG9kIGV4aXN0cwogCXB1YmxpYyB2
b2lkIHRlc3RNb2RpZmllcnM2KCkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
Y29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2NvZGVnZW4vQ29kZVN0
cmVhbS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2NvZGVnZW4vQ29kZVN0cmVhbS5qYXZhCmluZGV4IGNiMmE1ODYu
LjQ0MjBiYzkgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9jb2RlZ2VuL0NvZGVTdHJlYW0uamF2YQorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29tcGlsZXIvY29kZWdlbi9Db2RlU3RyZWFtLmphdmEKQEAgLTI1ODIsOCArMjU4MiwxMCBAQAog
CQkJCXx8IGFjY2Vzc01ldGhvZC5wdXJwb3NlID09IFN5bnRoZXRpY01ldGhvZEJpbmRpbmcuU3Vw
ZXJNZXRob2RBY2Nlc3MpewogCQkJLy8gdGFyZ2V0IG1ldGhvZCBkZWNsYXJpbmcgY2xhc3MgbWF5
IG5vdCBiZSBhY2Nlc3NpYmxlICgyNDc5NTMpOwogCQkJVHlwZUJpbmRpbmcgZGVjbGFyaW5nQ2xh
c3MgPSBhY2Nlc3NNZXRob2QucHVycG9zZSA9PSBTeW50aGV0aWNNZXRob2RCaW5kaW5nLlN1cGVy
TWV0aG9kQWNjZXNzIAotCQkJCQk/IGFjY2Vzc01ldGhvZC5kZWNsYXJpbmdDbGFzcy5zdXBlcmNs
YXNzKCkgCi0JCQkJCTogYWNjZXNzTWV0aG9kLmRlY2xhcmluZ0NsYXNzOwkJCQkKKwkJCQkJPyAo
dGFyZ2V0TWV0aG9kLmlzRGVmYXVsdE1ldGhvZCgpCisJCQkJCQkJPyB0YXJnZXRNZXRob2QuZGVj
bGFyaW5nQ2xhc3MKKwkJCQkJCQk6IGFjY2Vzc01ldGhvZC5kZWNsYXJpbmdDbGFzcy5zdXBlcmNs
YXNzKCkpCisJCQkJCTogYWNjZXNzTWV0aG9kLmRlY2xhcmluZ0NsYXNzOwogCQkJaW52b2tlKE9w
Y29kZXMuT1BDX2ludm9rZXNwZWNpYWwsIHRhcmdldE1ldGhvZCwgZGVjbGFyaW5nQ2xhc3MpOwog
CQl9IGVsc2UgewogCQkJaWYgKHRhcmdldE1ldGhvZC5kZWNsYXJpbmdDbGFzcy5pc0ludGVyZmFj
ZSgpKSB7IC8vIGludGVyZmFjZSBvciBhbm5vdGF0aW9uIHR5cGU=
</data>

          </attachment>
      

    </bug>

</bugzilla>