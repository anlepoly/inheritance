<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>442416</bug_id>
          
          <creation_ts>2014-08-22 15:26:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] $deserializeLambda$ missing cases for nested lambdas</short_desc>
          <delta_ts>2015-01-20 02:05:24 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.5</version>
          <rep_platform>Macintosh</rep_platform>
          <op_sys>Mac OS X</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4.2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Olivier Tardieu">tardieu</reporter>
          <assigned_to name="Andrew Clement">aclement</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>ronald.tetsuo</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="63523"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2442624</commentid>
    <comment_count>0</comment_count>
      <attachid>246267</attachid>
    <who name="Olivier Tardieu">tardieu</who>
    <bug_when>2014-08-22 15:26:12 -0400</bug_when>
    <thetext>Created attachment 246267
Code triggering the bug.

The synthetic $deserializeLambda$ method may be generated before the synthetic methods for nested lambdas. When this happens the $deserializeLambda$ only handles the lambdas that have already been encountered but is missing subsequent lambdas.

For example, with the attached source code, only two of the three lambdas are handled in $deserializeLambda$.

The code in org.eclipse.jdt.internal.compiler.ClassFile already hints at this issue with the todo:
// TODO [andy] do we need to do this after the loop to ensure it is done last?

The synthesis loop should be restructured to ensure the $deserializeLambda$ method is produced only after all the nested lambdas have been discovered.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2442630</commentid>
    <comment_count>1</comment_count>
      <attachid>246269</attachid>
    <who name="Olivier Tardieu">tardieu</who>
    <bug_when>2014-08-22 15:35:37 -0400</bug_when>
    <thetext>Created attachment 246269
Naive patch.

As suggested by the todo, refactoring the method synthesis loop to do the $deserializeLambda$ generation last appears to fix the issue.

This patch has not been tested beyond a few example programs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2442675</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-08-22 23:30:30 -0400</bug_when>
    <thetext>Andy, could you please take this to completion ? Olivier, Thanks for the
patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2442990</commentid>
    <comment_count>3</comment_count>
      <attachid>246311</attachid>
    <who name="Olivier Tardieu">tardieu</who>
    <bug_when>2014-08-25 08:22:29 -0400</bug_when>
    <thetext>Created attachment 246311
Tentative patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2443391</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-08-26 04:03:53 -0400</bug_when>
    <thetext>Olivier, could you please complete the CLA, please start here: https://www.eclipse.org/legal/CLA.php. and
https://wiki.eclipse.org/CLA/Implementation_Requirements

Essentially after you complete the
process you should see a green tick mark next to your name on bugzilla as you
see next to Andy&apos;s name on this bug.

You should also add a comment to those bugs for which you submit a patch that
reads: 

My contribution for this defect fix complies with http://www.eclipse.org/legal/CoO.php 

This is so that Andy can incorporate your changes into the change set for release.

TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2451134</commentid>
    <comment_count>5</comment_count>
    <who name="Olivier Tardieu">tardieu</who>
    <bug_when>2014-09-12 13:49:21 -0400</bug_when>
    <thetext>I have completed the CLA on 2017-09-12.

My contribution for this defect fix complies with http://www.eclipse.org/legal/CoO.php.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2451268</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-12 19:43:40 -0400</bug_when>
    <thetext>(In reply to Olivier Tardieu from comment #5)
&gt; I have completed the CLA on 2017-09-12.
&gt; 
&gt; My contribution for this defect fix complies with
&gt; http://www.eclipse.org/legal/CoO.php.

Thanks Olivier, Andy, it would be nice to get this into 4.5 M2 if your schedule
would allow - M2 builds for SDK components are happening the week of Sep 15th
with Sep 19th being the milestone release day. A day or preferably two days
before 19th would make it to the build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2451979</commentid>
    <comment_count>7</comment_count>
      <attachid>247089</attachid>
    <who name="Andrew Clement">aclement</who>
    <bug_when>2014-09-15 15:46:35 -0400</bug_when>
    <thetext>Created attachment 247089
Patch to add test case and fix

This is a patch that includes Oliviers patch for the fix and reworks the attached sample code into a real regression test in the suite.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452079</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-15 21:29:55 -0400</bug_when>
    <thetext>Fix and test released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=7c7c402d5a4c8c8b78dc4eff82da5ed7b6df2d98.

Thanks a lot Olivier and Andy.

Olivier, if you would like to continue to contribute fixes to JDT, please drop us
a note -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2453064</commentid>
    <comment_count>9</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-09-17 08:49:31 -0400</bug_when>
    <thetext>Verified Fixed for Eclipse Mars 4.5M2 Build id: I20140916-2000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2473892</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-10-30 02:10:36 -0400</bug_when>
    <thetext>+1 for back porting, reopening.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2477689</commentid>
    <comment_count>11</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-11-06 03:51:13 -0500</bug_when>
    <thetext>Released in R4_4_maintenance via commit(s):

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=R4_4_maintenance&amp;id=5ed827e615ae531c1d3125b2d583644cefa8fdd7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2507646</commentid>
    <comment_count>12</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-01-20 02:05:24 -0500</bug_when>
    <thetext>Verified for 4.4.2 RC1 with build M20150114-1500</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>246267</attachid>
            <date>2014-08-22 15:26:00 -0400</date>
            <delta_ts>2014-08-22 15:26:12 -0400</delta_ts>
            <desc>Code triggering the bug.</desc>
            <filename>Foo.java</filename>
            <type>application/octet-stream</type>
            <size>276</size>
            <attacher name="Olivier Tardieu">tardieu</attacher>
            
              <data encoding="base64">cHVibGljIGNsYXNzIEZvbyB7CglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdz
KSB7CgkJUnVubmFibGUgbGFtYmRhMCA9IChqYXZhLmlvLlNlcmlhbGl6YWJsZSAmIFJ1bm5hYmxl
KSAoKSAtPiB7CgkJCVJ1bm5hYmxlIGxhbWJkYTEgPSAoamF2YS5pby5TZXJpYWxpemFibGUgJiBS
dW5uYWJsZSkgKCkgLT4gewoJCQkJUnVubmFibGUgbGFtYmRhMiA9IChqYXZhLmlvLlNlcmlhbGl6
YWJsZSAmIFJ1bm5hYmxlKSAoKSAtPiB7CgkJCQl9OwoJCQl9OwoJCX07Cgl9Cn0K
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>246269</attachid>
            <date>2014-08-22 15:35:00 -0400</date>
            <delta_ts>2014-08-25 08:22:29 -0400</delta_ts>
            <desc>Naive patch.</desc>
            <filename>patch.txt</filename>
            <type>text/plain</type>
            <size>2427</size>
            <attacher name="Olivier Tardieu">tardieu</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm4KaW5kZXggNzRkZTJiZC4uN2MwNTA5OCAx
MDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUu
amF2YQpAQCAtOTM0LDE0ICs5MzQsMjYgQEAgcHVibGljIGNsYXNzIENsYXNzRmlsZSBpbXBsZW1l
bnRzIFR5cGVDb25zdGFudHMsIFR5cGVJZHMgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFN5bnRoZXRpY0ZhY3RvcnlNZXRob2Qoc3lu
dGhldGljTWV0aG9kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBicmVhazsgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjYXNlIFN5bnRoZXRpY01ldGhvZEJpbmRpbmcuRGVzZXJpYWxpemVMYW1i
ZGE6Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgLy8gVE9ETyBbYW5keV0gZG8gd2UgbmVlZCB0byBkbyB0aGlzIGFmdGVyIHRoZSBsb29wIHRv
IGVuc3VyZSBpdCBpcyBkb25lIGxhc3Q/Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3ludGhldGljRGVzZXJpYWxpemVMYW1iZGEoc3lu
dGhldGljTWV0aG9kLHRoaXMucmVmZXJlbmNlQmluZGluZy5zeW50aGV0aWNNZXRob2RzKCkpOyAK
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
cmVhazsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAvLyBkZWxheSBwcm9jZXNzaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVtaXR0ZWRTeW50aGV0aWNzQ291bnQgPSBjdXJyZW50U3ludGhl
dGljc0NvdW50OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9Cisg
ICAgICAgICAgICAgICBTeW50aGV0aWNNZXRob2RCaW5kaW5nW10gc3ludGhldGljTWV0aG9kcyA9
IHRoaXMucmVmZXJlbmNlQmluZGluZy5zeW50aGV0aWNNZXRob2RzKCk7CisgICAgICAgICAgICAg
ICBpbnQgY3VycmVudFN5bnRoZXRpY3NDb3VudCA9IHN5bnRoZXRpY01ldGhvZHMgPT0gbnVsbCA/
IDA6IHN5bnRoZXRpY01ldGhvZHMubGVuZ3RoOworICAgICAgICAgICAgICAgZW1pdHRlZFN5bnRo
ZXRpY3NDb3VudCA9IDA7CisgICAgICAgICAgICAgICBpZiAoZW1pdHRlZFN5bnRoZXRpY3NDb3Vu
dCAhPSBjdXJyZW50U3ludGhldGljc0NvdW50KSB7CisgICAgICAgICAgICAgICAgICAgICAgIGZv
ciAoaW50IGkgPSBlbWl0dGVkU3ludGhldGljc0NvdW50LCBtYXggPSBjdXJyZW50U3ludGhldGlj
c0NvdW50OyBpIDwgbWF4OyBpKyspIHsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBT
eW50aGV0aWNNZXRob2RCaW5kaW5nIHN5bnRoZXRpY01ldGhvZCA9IHN5bnRoZXRpY01ldGhvZHNb
aV07CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzeW50aGV0aWNNZXRo
b2QucHVycG9zZSkgeworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fz
ZSBTeW50aGV0aWNNZXRob2RCaW5kaW5nLkRlc2VyaWFsaXplTGFtYmRhOgorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTeW50aGV0aWNEZXNlcmlhbGl6
ZUxhbWJkYShzeW50aGV0aWNNZXRob2QsdGhpcy5yZWZlcmVuY2VCaW5kaW5nLnN5bnRoZXRpY01l
dGhvZHMoKSk7IAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBicmVhazsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CisgICAgICAgICAgICAg
ICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICAgICAgICAgZW1pdHRlZFN5bnRoZXRpY3NDb3Vu
dCA9IGN1cnJlbnRTeW50aGV0aWNzQ291bnQ7CisgICAgICAgICAgICAgICB9CiAgICAgICAgfQog
CiAgICAgICAgcHVibGljIHZvaWQgYWRkU3ludGhldGljQXJyYXlDb25zdHJ1Y3RvcihTeW50aGV0
aWNNZXRob2RCaW5kaW5nIG1ldGhvZEJpbmRpbmcpIHsK
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>246311</attachid>
            <date>2014-08-25 08:22:00 -0400</date>
            <delta_ts>2014-08-25 08:22:29 -0400</delta_ts>
            <desc>Tentative patch.</desc>
            <filename>patch.txt</filename>
            <type>text/plain</type>
            <size>1501</size>
            <attacher name="Olivier Tardieu">tardieu</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2
YQppbmRleCA3NGRlMmJkLi42NTI2NDhiIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvQ2xhc3NGaWxlLmph
dmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZhCkBAIC04NzQsNiArODc0LDcgQEAgcHVibGlj
IGNsYXNzIENsYXNzRmlsZSBpbXBsZW1lbnRzIFR5cGVDb25zdGFudHMsIFR5cGVJZHMgewogCQkK
IAkJLy8gYWRkIHN5bnRoZXRpYyBtZXRob2RzIGluZm9zCiAJCWludCBlbWl0dGVkU3ludGhldGlj
c0NvdW50ID0gMDsKKwkJU3ludGhldGljTWV0aG9kQmluZGluZyBkZXNlcmlhbGl6ZUxhbWJkYU1l
dGhvZCA9IG51bGw7CiAJCWJvb2xlYW4gY29udGludWVTY2FubmluZ1N5bnRoZXRpY3MgPSB0cnVl
OwogCQl3aGlsZSAoY29udGludWVTY2FubmluZ1N5bnRoZXRpY3MpIHsKIAkJCWNvbnRpbnVlU2Nh
bm5pbmdTeW50aGV0aWNzID0gZmFsc2U7CkBAIC05MzQsMTQgKzkzNSwxNiBAQCBwdWJsaWMgY2xh
c3MgQ2xhc3NGaWxlIGltcGxlbWVudHMgVHlwZUNvbnN0YW50cywgVHlwZUlkcyB7CiAJCQkJCQkJ
YWRkU3ludGhldGljRmFjdG9yeU1ldGhvZChzeW50aGV0aWNNZXRob2QpOwogCQkJCQkJCWJyZWFr
OwkKIAkJCQkJCWNhc2UgU3ludGhldGljTWV0aG9kQmluZGluZy5EZXNlcmlhbGl6ZUxhbWJkYToK
LQkJCQkJCQkvLyBUT0RPIFthbmR5XSBkbyB3ZSBuZWVkIHRvIGRvIHRoaXMgYWZ0ZXIgdGhlIGxv
b3AgdG8gZW5zdXJlIGl0IGlzIGRvbmUgbGFzdD8KLQkJCQkJCQlhZGRTeW50aGV0aWNEZXNlcmlh
bGl6ZUxhbWJkYShzeW50aGV0aWNNZXRob2QsdGhpcy5yZWZlcmVuY2VCaW5kaW5nLnN5bnRoZXRp
Y01ldGhvZHMoKSk7IAorCQkJCQkJCWRlc2VyaWFsaXplTGFtYmRhTWV0aG9kID0gc3ludGhldGlj
TWV0aG9kOyAvLyBkZWxheSBwcm9jZXNzaW5nCiAJCQkJCQkJYnJlYWs7CiAJCQkJCX0KIAkJCQl9
CiAJCQkJZW1pdHRlZFN5bnRoZXRpY3NDb3VudCA9IGN1cnJlbnRTeW50aGV0aWNzQ291bnQ7CiAJ
CQl9CiAJCX0KKwkJaWYgKGRlc2VyaWFsaXplTGFtYmRhTWV0aG9kICE9IG51bGwpIHsKKwkJCWFk
ZFN5bnRoZXRpY0Rlc2VyaWFsaXplTGFtYmRhKGRlc2VyaWFsaXplTGFtYmRhTWV0aG9kLHRoaXMu
cmVmZXJlbmNlQmluZGluZy5zeW50aGV0aWNNZXRob2RzKCkpOyAKKwkJfQogCX0KIAogCXB1Ymxp
YyB2b2lkIGFkZFN5bnRoZXRpY0FycmF5Q29uc3RydWN0b3IoU3ludGhldGljTWV0aG9kQmluZGlu
ZyBtZXRob2RCaW5kaW5nKSB7Cg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>247089</attachid>
            <date>2014-09-15 15:46:00 -0400</date>
            <delta_ts>2014-09-15 15:46:35 -0400</delta_ts>
            <desc>Patch to add test case and fix</desc>
            <filename>0001-Fixed-Bug-442416-1.8-missing-cases-for-nested-lambda.patch</filename>
            <type>text/plain</type>
            <size>6468</size>
            <attacher name="Andrew Clement">aclement</attacher>
            
              <data encoding="base64">RnJvbSBmN2RkMjI0OTc3YjAxNTQ3NDM4MDZiNTUyMTU1MjY1ZGVkNTZmMzliIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBBbmR5IENsZW1lbnQgPGFjbGVtZW50QGdvcGl2b3RhbC5jb20+
CkRhdGU6IE1vbiwgMTUgU2VwIDIwMTQgMTI6NDQ6NTggLTA3MDAKU3ViamVjdDogW1BBVENIXSBG
aXhlZCBCdWcgNDQyNDE2IC0gWzEuOF0gJCBtaXNzaW5nIGNhc2VzIGZvciBuZXN0ZWQgbGFtYmRh
cwoKLS0tCiAuLi4vcmVncmVzc2lvbi9TZXJpYWxpemFibGVMYW1iZGFUZXN0LmphdmEgICAgICAg
ICB8IDUzICsrKysrKysrKysrKysrKysrKysrKysKIC4uLi9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9DbGFzc0ZpbGUuamF2YSAgIHwgMTAgKysrLQogMiBmaWxlcyBjaGFuZ2VkLCA2MSBp
bnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21w
aWxlci9yZWdyZXNzaW9uL1NlcmlhbGl6YWJsZUxhbWJkYVRlc3QuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9j
b21waWxlci9yZWdyZXNzaW9uL1NlcmlhbGl6YWJsZUxhbWJkYVRlc3QuamF2YQppbmRleCA5NGYx
ZDYxLi4xNmMzNzcwIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21w
aWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9T
ZXJpYWxpemFibGVMYW1iZGFUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jl
c3Npb24vU2VyaWFsaXphYmxlTGFtYmRhVGVzdC5qYXZhCkBAIC05LDYgKzksOSBAQAogICogICAg
ICAgIEFuZHkgQ2xlbWVudCAoR29QaXZvdGFsLCBJbmMpIGFjbGVtZW50QGdvcGl2b3RhbC5jb20g
LSBDb250cmlidXRpb25zIGZvcgogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyA0MDUx
MDQgLSBbMS44XVtjb21waWxlcl1bY29kZWdlbl0gSW1wbGVtZW50IHN1cHBvcnQgZm9yIHNlcmlh
bGl6ZWFibGUgbGFtYmRhcwogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyA0Mzk4ODkg
LSBbMS44XVtjb21waWxlcl0gW2xhbWJkYV0gRGVzZXJpYWxpemluZyBsYW1iZGEgZmFpbHMgd2l0
aCBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb246ICJJbnZhbGlkIGxhbWJkYSBkZXNlcmlhbGl6YXRp
b24iCisgKiAgICAgICAgICAgICAgICAgICAgICAgICAgQnVnIDQ0MjQxNiAtICRkZXNlcmlhbGl6
ZUxhbWJkYSQgbWlzc2luZyBjYXNlcyBmb3IgbmVzdGVkIGxhbWJkYXMKKyAqICAgICAgICBPbGl2
aWVyIFRhcmRpZXUgdGFyZGlldUB1cy5pYm0uY29tIC0gQ29udHJpYnV0aW9ucyBmb3IKKyAqICAg
ICAgICAgICAgICAgICAgICAgICAgICBCdWcgNDQyNDE2IC0gJGRlc2VyaWFsaXplTGFtYmRhJCBt
aXNzaW5nIGNhc2VzIGZvciBuZXN0ZWQgbGFtYmRhcwogICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiov
CiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyLnJlZ3Jlc3Npb247
CiAKQEAgLTEzMTQsNiArMTMxNyw1NiBAQCBwdWJsaWMgY2xhc3MgU2VyaWFsaXphYmxlTGFtYmRh
VGVzdCBleHRlbmRzIEFic3RyYWN0UmVncmVzc2lvblRlc3QgewogCQkJCQludWxsLHRydWUsCiAJ
CQkJCW5ldyBTdHJpbmdbXXsiLURkdW1teSJ9KTsgLy8gTm90IHN1cmUsIHVubGVzcyB3ZSBmb3Jj
ZSB0aGUgVk0gdG8gbm90IGJlIHJldXNlZCBieSBwYXNzaW5nIGR1bW15IHZtIGFyZ3VtZW50LCB0
aGUgZ2VuZXJhdGVkIHByb2dyYW0gYWJvcnRzIG1pZHdheSB0aHJvdWdoIGl0cyBleGVjdXRpb24u
CiAJfQorCQorCXB1YmxpYyB2b2lkIHRlc3ROZXN0ZWRMYW1iZGFzXzQ0MjQxNigpIHRocm93cyBF
eGNlcHRpb24geworCQl0aGlzLnJ1bkNvbmZvcm1UZXN0KAorCQkJCW5ldyBTdHJpbmdbXXsKKwkJ
CQkJIkZvby5qYXZhIiwKKwkJCQkJImltcG9ydCBqYXZhLmlvLio7XG4iKworCQkJCQkicHVibGlj
IGNsYXNzIEZvbyB7XG4iKworCQkJCQkiICAgc3RhdGljIGJ5dGVbXSB0b1NlcihPYmplY3Qgbykg
e1xuIisKKwkJCQkJIiAgICAgICB0cnkge1xuIisKKwkJCQkJIgkJCWZpbmFsIEJ5dGVBcnJheU91
dHB1dFN0cmVhbSBidWZmZXIgPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7XG4iKworCQkJ
CQkiCQkJdHJ5IChPYmplY3RPdXRwdXRTdHJlYW0gb3V0ID0gbmV3IE9iamVjdE91dHB1dFN0cmVh
bShidWZmZXIpICkge1xuIisKKwkJCQkJIgkJCQlvdXQud3JpdGVPYmplY3Qobyk7XG4iKworCQkJ
CQkiCQkJfVxuIisKKwkJCQkJIgkJCXJldHVybiBidWZmZXIudG9CeXRlQXJyYXkoKTtcbiIrCisJ
CQkJCSIgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtlLnByaW50U3RhY2tUcmFjZSgpO3Jl
dHVybiBudWxsO31cbiIrCisJCQkJCSIgICB9XG4iKworCQkJCQkiICAgc3RhdGljIE9iamVjdCBm
cm9tU2VyKGJ5dGVbXSBicykge1xuIisKKwkJCQkJIiAgICAgICB0cnkge1xuIisKKwkJCQkJIgkJ
CXRyeSAoT2JqZWN0SW5wdXRTdHJlYW0gaW4gPSBuZXcgT2JqZWN0SW5wdXRTdHJlYW0oIG5ldyBC
eXRlQXJyYXlJbnB1dFN0cmVhbShicykpKSB7XG4iKworCQkJCQkiCQkJCWZpbmFsIE9iamVjdCBz
ID0gaW4ucmVhZE9iamVjdCgpO1xuIisKKwkJCQkJIgkJCQlyZXR1cm4gcztcbiIrCisJCQkJCSIJ
CQl9XG4iKworCQkJCQkiICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7ZS5wcmludFN0YWNr
VHJhY2UoKTtyZXR1cm4gbnVsbDt9XG4iKworCQkJCQkiICAgfVxuIisKKwkJCQkJIglwdWJsaWMg
c3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiIrCisJ
CQkJCSIgICAgICAgUnVubmFibGUgbmVzdGVkMSxuZXN0ZWQyO1xuIisKKwkJCQkJIgkJUnVubmFi
bGUgbGFtYmRhMCA9IChqYXZhLmlvLlNlcmlhbGl6YWJsZSAmIFJ1bm5hYmxlKSAoKSAtPiB7XG4i
KworCQkJCQkiCQkJUnVubmFibGUgbGFtYmRhMSA9IChqYXZhLmlvLlNlcmlhbGl6YWJsZSAmIFJ1
bm5hYmxlKSAoKSAtPiB7XG4iKworCQkJCQkiCQkJCVJ1bm5hYmxlIGxhbWJkYTIgPSAoamF2YS5p
by5TZXJpYWxpemFibGUgJiBSdW5uYWJsZSkgKCkgLT4ge1xuIisKKwkJCQkJIgkJCQkJU3lzdGVt
Lm91dC5wcmludGxuKFwiSGVsbG8sd29ybGQhXCIpO1xuIisKKwkJCQkJIgkJCQl9O1xuIisKKwkJ
CQkJIiAgICAgICAJCWJ5dGVbXSBicyA9IHRvU2VyKGxhbWJkYTIpO1xuIisKKwkJCQkJIgkJCQlS
dW5uYWJsZSByID0gKFJ1bm5hYmxlKWZyb21TZXIoYnMpO1xuIisKKwkJCQkJIiAgICAgICAJCXIu
cnVuKCk7XG4iKworCQkJCQkiCQkJfTtcbiIrCisJCQkJCSIgICAgICAgCWJ5dGVbXSBicyA9IHRv
U2VyKGxhbWJkYTEpO1xuIisKKwkJCQkJIgkJCVJ1bm5hYmxlIHIgPSAoUnVubmFibGUpZnJvbVNl
cihicyk7XG4iKworCQkJCQkiICAgICAgIAlyLnJ1bigpO1xuIisKKwkJCQkJIgkJfTtcbiIrCisJ
CQkJCSIgICAgICAgYnl0ZVtdIGJzID0gdG9TZXIobGFtYmRhMCk7XG4iKworCQkJCQkiCQlSdW5u
YWJsZSByID0gKFJ1bm5hYmxlKWZyb21TZXIoYnMpO1xuIisKKwkJCQkJIiAgICAgICByLnJ1bigp
O1xuIisKKwkJCQkJIgl9XG4iKworCQkJCQkifVxuIiwKKwkJCQl9LAorCQkJCSJIZWxsbyx3b3Js
ZCEiLAorCQkJCW51bGwsdHJ1ZSwKKwkJCQluZXcgU3RyaW5nW117Ii1EZHVtbXkifSk7IC8vIE5v
dCBzdXJlLCB1bmxlc3Mgd2UgZm9yY2UgdGhlIFZNIHRvIG5vdCBiZSByZXVzZWQgYnkgcGFzc2lu
ZyBkdW1teSB2bSBhcmd1bWVudCwgdGhlIGdlbmVyYXRlZCBwcm9ncmFtIGFib3J0cyBtaWR3YXkg
dGhyb3VnaCBpdHMgZXhlY3V0aW9uLgorCX0KKwkKIAkvLyAtLS0KIAkKIAlwcml2YXRlIHZvaWQg
Y2hlY2tFeHBlY3RlZChTdHJpbmcgZXhwZWN0ZWQsIFN0cmluZyBhY3R1YWwpIHsKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9DbGFzc0ZpbGUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2YQppbmRleCBh
ZmY2NDRiLi4zMmQ5ZjUxIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvQ2xhc3NGaWxlLmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL0NsYXNzRmlsZS5qYXZhCkBAIC0yMSw4ICsyMSwxMSBAQAogICogICAgICAgICAgICAg
ICAgICAgICAgICAgIEJ1ZyA0MTU0NzAgLSBbMS44XVtjb21waWxlcl0gVHlwZSBhbm5vdGF0aW9u
cyBvbiBjbGFzcyBkZWNsYXJhdGlvbiBnbyB2YW5pc2hpbmcKICAqICAgICAgICAgICAgICAgICAg
ICAgICAgICBCdWcgNDA1MTA0IC0gWzEuOF1bY29tcGlsZXJdW2NvZGVnZW5dIEltcGxlbWVudCBz
dXBwb3J0IGZvciBzZXJpYWxpemVhYmxlIGxhbWJkYXMKICAqICAgICAgICAgICAgICAgICAgICAg
ICAgICBCdWcgNDM0NTU2IC0gQnJva2VuIGNsYXNzIGZpbGUgZ2VuZXJhdGVkIGZvciBpbmNvcnJl
Y3QgYW5ub3RhdGlvbiB1c2FnZQorICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyA0NDI0
MTYgLSAkZGVzZXJpYWxpemVMYW1iZGEkIG1pc3NpbmcgY2FzZXMgZm9yIG5lc3RlZCBsYW1iZGFz
CiAgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IKICAqCQkJCQkJCUJ1
ZyA0Mzg0NTggLSBbMS44XVtudWxsXSBjbGVhbiB1cCBoYW5kbGluZyBvZiBudWxsIHR5cGUgYW5u
b3RhdGlvbnMgd3J0IHR5cGUgdmFyaWFibGVzCisgKiAgICAgT2xpdmllciBUYXJkaWV1IHRhcmRp
ZXVAdXMuaWJtLmNvbSAtIENvbnRyaWJ1dGlvbnMgZm9yCisgKgkJCQkJCQlCdWcgNDQyNDE2IC0g
JGRlc2VyaWFsaXplTGFtYmRhJCBtaXNzaW5nIGNhc2VzIGZvciBuZXN0ZWQgbGFtYmRhcwogICoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlcjsKIApAQCAtODc0LDYgKzg3Nyw3IEBAIHB1YmxpYyBjbGFzcyBDbGFzc0ZpbGUgaW1w
bGVtZW50cyBUeXBlQ29uc3RhbnRzLCBUeXBlSWRzIHsKIAkJCiAJCS8vIGFkZCBzeW50aGV0aWMg
bWV0aG9kcyBpbmZvcwogCQlpbnQgZW1pdHRlZFN5bnRoZXRpY3NDb3VudCA9IDA7CisJCVN5bnRo
ZXRpY01ldGhvZEJpbmRpbmcgZGVzZXJpYWxpemVMYW1iZGFNZXRob2QgPSBudWxsOwogCQlib29s
ZWFuIGNvbnRpbnVlU2Nhbm5pbmdTeW50aGV0aWNzID0gdHJ1ZTsKIAkJd2hpbGUgKGNvbnRpbnVl
U2Nhbm5pbmdTeW50aGV0aWNzKSB7CiAJCQljb250aW51ZVNjYW5uaW5nU3ludGhldGljcyA9IGZh
bHNlOwpAQCAtOTM0LDE0ICs5MzgsMTYgQEAgcHVibGljIGNsYXNzIENsYXNzRmlsZSBpbXBsZW1l
bnRzIFR5cGVDb25zdGFudHMsIFR5cGVJZHMgewogCQkJCQkJCWFkZFN5bnRoZXRpY0ZhY3RvcnlN
ZXRob2Qoc3ludGhldGljTWV0aG9kKTsKIAkJCQkJCQlicmVhazsJCiAJCQkJCQljYXNlIFN5bnRo
ZXRpY01ldGhvZEJpbmRpbmcuRGVzZXJpYWxpemVMYW1iZGE6Ci0JCQkJCQkJLy8gVE9ETyBbYW5k
eV0gZG8gd2UgbmVlZCB0byBkbyB0aGlzIGFmdGVyIHRoZSBsb29wIHRvIGVuc3VyZSBpdCBpcyBk
b25lIGxhc3Q/Ci0JCQkJCQkJYWRkU3ludGhldGljRGVzZXJpYWxpemVMYW1iZGEoc3ludGhldGlj
TWV0aG9kLHRoaXMucmVmZXJlbmNlQmluZGluZy5zeW50aGV0aWNNZXRob2RzKCkpOyAKKwkJCQkJ
CQlkZXNlcmlhbGl6ZUxhbWJkYU1ldGhvZCA9IHN5bnRoZXRpY01ldGhvZDsgLy8gZGVsYXkgcHJv
Y2Vzc2luZwogCQkJCQkJCWJyZWFrOwogCQkJCQl9CiAJCQkJfQogCQkJCWVtaXR0ZWRTeW50aGV0
aWNzQ291bnQgPSBjdXJyZW50U3ludGhldGljc0NvdW50OwogCQkJfQogCQl9CisJCWlmIChkZXNl
cmlhbGl6ZUxhbWJkYU1ldGhvZCAhPSBudWxsKSB7CisJCQlhZGRTeW50aGV0aWNEZXNlcmlhbGl6
ZUxhbWJkYShkZXNlcmlhbGl6ZUxhbWJkYU1ldGhvZCx0aGlzLnJlZmVyZW5jZUJpbmRpbmcuc3lu
dGhldGljTWV0aG9kcygpKTsgCisJCX0KIAl9CiAKIAlwdWJsaWMgdm9pZCBhZGRTeW50aGV0aWNB
cnJheUNvbnN0cnVjdG9yKFN5bnRoZXRpY01ldGhvZEJpbmRpbmcgbWV0aG9kQmluZGluZykgewot
LSAKMS44LjUuMiAoQXBwbGUgR2l0LTQ4KQoK
</data>

          </attachment>
      

    </bug>

</bugzilla>