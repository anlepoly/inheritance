<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>375248</bug_id>
          
          <creation_ts>2012-03-24 08:12:00 -0400</creation_ts>
          <short_desc>AIOOBE inside twr with finally block</short_desc>
          <delta_ts>2012-04-30 13:32:20 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>To be verified for 3.7.2+</status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>3.6.2+J7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Karl Weber">karl.weber99</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>daniel_megert</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>satyam.kandula</cc>
          
          <votes>0</votes>

      

      

      <flag name="pmc_approved"
          id="49379"
          type_id="2"
          status="+"
          setter="daniel_megert"
    />
    <flag name="review"
          id="49289"
          type_id="1"
          status="+"
          setter="satyam.kandula"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2085414</commentid>
    <comment_count>0</comment_count>
    <who name="Karl Weber">karl.weber99</who>
    <bug_when>2012-03-24 08:12:25 -0400</bug_when>
    <thetext>Build Identifier: Version: 4.2.0 Build id: I20120209-1230

You cannot compile the following class:

package de.gps.db.impl;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.nio.file.Path;
import java.nio.file.StandardCopyOption;

public class Test {

	public void executeImports() throws MalformedURLException {
		for (int i = 0; i &lt; 3; i++) {
			URL url = new URL(&quot;dummy&quot;); //$NON-NLS-1$
			if (url != null) {
				Path target = new File(&quot;dummy&quot;).toPath();
				try (InputStream is = url.openStream()) {
					java.nio.file.Files.copy(is, target,
							StandardCopyOption.REPLACE_EXISTING);
				} catch (IOException e) {
					 break;
				} finally {
					try {
						java.nio.file.Files.delete(target);
					} catch (IOException e1) {

					}
				}
			}
		}
	}
}

The cause of the error is the break statement in the catch clause. If you remove this statement, everything works fine. If the break-statement is present, the exception given below is thrown.

The jre is jdk1.7.2_02 from sun.

java.lang.ArrayIndexOutOfBoundsException: 2
	at org.eclipse.jdt.internal.compiler.codegen.ExceptionLabel.placeEnd(ExceptionLabel.java:41)
	at org.eclipse.jdt.internal.compiler.ast.TryStatement.generateSubRoutineInvocation(TryStatement.java:841)
	at org.eclipse.jdt.internal.compiler.ast.BranchStatement.generateCode(BranchStatement.java:48)
	at org.eclipse.jdt.internal.compiler.ast.Block.generateCode(Block.java:57)
	at org.eclipse.jdt.internal.compiler.ast.TryStatement.generateCode(TryStatement.java:663)
	at org.eclipse.jdt.internal.compiler.ast.Block.generateCode(Block.java:57)
	at org.eclipse.jdt.internal.compiler.ast.IfStatement.generateCode(IfStatement.java:189)
	at org.eclipse.jdt.internal.compiler.ast.Block.generateCode(Block.java:57)
	at org.eclipse.jdt.internal.compiler.ast.ForStatement.generateCode(ForStatement.java:303)
	at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode(AbstractMethodDeclaration.java:316)
	at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode(AbstractMethodDeclaration.java:261)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:547)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:616)
	at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode(CompilationUnitDeclaration.java:360)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:1205)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:684)
	at org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:1181)
	at org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:807)
	at org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$1.run(ASTProvider.java:544)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST(ASTProvider.java:537)
	at org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST(ASTProvider.java:480)
	at org.eclipse.jdt.ui.SharedASTProvider.getAST(SharedASTProvider.java:128)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:170)
	at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$3.run(SelectionListenerWithASTManager.java:155)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)


Reproducible: Always

Steps to Reproduce:
Use the class given and comment / uncomment the break-statement. You should see the error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085415</commentid>
    <comment_count>1</comment_count>
    <who name="Karl Weber">karl.weber99</who>
    <bug_when>2012-03-24 08:20:45 -0400</bug_when>
    <thetext>Obviously, the jdk is jdk1.7.0_02, not jdk1.7.2_02.

Furthermore, I would like to note, that javac compiles the Test class without error...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085436</commentid>
    <comment_count>2</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2012-03-24 11:26:17 -0400</bug_when>
    <thetext>Reduced test case:

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

public class X {
    public void foo() throws MalformedURLException {
        URL url = new URL(&quot;dummy&quot;); //$NON-NLS-1$
        try (InputStream is = url.openStream()) {
        } catch (IOException e) {
             return;
        } finally {
            try {
                java.nio.file.Files.delete(null);
            } catch (IOException e1) {
            }
        }
    }
}

It seems to be related to the return statement inside the catch block. In the original test case, the pb is related to the break statement in the catch block.
Both test cases should be added as regression tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085472</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-24 22:00:19 -0400</bug_when>
    <thetext>(In reply to comment #2)

&gt; It seems to be related to the return statement inside the catch block. In the
&gt; original test case, the pb is related to the break statement in the catch
&gt; block.
&gt; Both test cases should be added as regression tests.

Thanks Olivier.  Disabled regression tests released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=61acdac89cab049caf399067a6384e2df8085bdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085478</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-25 03:01:16 -0400</bug_when>
    <thetext>(In reply to comment #2)

&gt; It seems to be related to the return statement inside the catch block. In the
&gt; original test case, the pb is related to the break statement in the catch
&gt; block.
&gt; Both test cases should be added as regression tests.

Indeed. return, break and continue don&apos;t need special handling
from a resource closure stand point when they occur in a catch
block or finally block. (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=338402#c16) When the catch/finally blocks are entered, resources
have been properly closed already.

Fix is to recognize that resource exception handlers are not needed
past the try block - see analogous treatment for TryStatement.declaredExceptionLabels.

Patch will follow shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085481</commentid>
    <comment_count>5</comment_count>
      <attachid>213143</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-25 03:21:26 -0400</bug_when>
    <thetext>Created attachment 213143
Patch under test

Also has a few more junits.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085488</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-25 06:26:32 -0400</bug_when>
    <thetext>Fix and tests released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=90244a03b74762755d359afcfdbbdc7ca6e3137a.

Note to reviewer: Basically if a return, break or continue would
take the control out of the try block with resources, then the
resource closures would have be handled as a part of code generation
for the return, break or continue.

However, if the return, break or continue is outside of the try i.e
features in a catch block or finally block, the resources are
already closed (https://bugs.eclipse.org/bugs/show_bug.cgi?id=338402#c16)
and the code generation of return, break or continue should not
attempt to close them. It was trying to and that was the problem and
has since been fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085489</commentid>
    <comment_count>7</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-25 06:27:01 -0400</bug_when>
    <thetext>Satyam, please review, TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2085554</commentid>
    <comment_count>8</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-03-26 01:54:31 -0400</bug_when>
    <thetext>The changes look good to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087014</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-29 00:27:48 -0400</bug_when>
    <thetext>Dani, do you want this Java 7 fix for 3.6.2+Java7 and 3.7.2+ streams ?
The fix is very safe IMO.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087227</commentid>
    <comment_count>10</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2012-03-29 10:05:06 -0400</bug_when>
    <thetext>I verified the code and that the fix works.
+1 to backport.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087228</commentid>
    <comment_count>11</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2012-03-29 10:05:23 -0400</bug_when>
    <thetext>Reopening for backport.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087640</commentid>
    <comment_count>12</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-03-30 09:29:57 -0400</bug_when>
    <thetext>Released on 3.7 maintenance using commit 6c7abe90183484d585c334aa10f32c5f8581b4a1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2087725</commentid>
    <comment_count>13</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-03-30 11:55:08 -0400</bug_when>
    <thetext>Released on 3.6.2+J7 using commit c5c1cc11b405a60f0f2b3d63b95571e3500fa5dc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2100651</commentid>
    <comment_count>14</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-04-30 13:14:45 -0400</bug_when>
    <thetext>Verified for 3.8M7 using build I20120429-1800.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>213143</attachid>
            <date>2012-03-25 03:21:00 -0400</date>
            <delta_ts>2012-03-25 03:21:26 -0400</delta_ts>
            <desc>Patch under test</desc>
            <filename>patch.txt</filename>
            <type>text/plain</type>
            <size>6828</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL1RyeVdpdGhSZXNvdXJj
ZXNTdGF0ZW1lbnRUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxl
ci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9UcnlX
aXRoUmVzb3VyY2VzU3RhdGVtZW50VGVzdC5qYXZhCmluZGV4IGYwNTM2MmYuLjI1MWMwZGEgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL1RyeVdpdGhSZXNvdXJjZXNT
dGF0ZW1lbnRUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vVHJ5
V2l0aFJlc291cmNlc1N0YXRlbWVudFRlc3QuamF2YQpAQCAtMzYyNyw3ICszNjI3LDcgQEAKIAkJ
InRydWUiKTsKIH0KIC8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNn
aT9pZD0zNzUyNDggKEFJT09CIHdpdGggdHJ5IHdpdGggcmVzb3VyY2VzKQotcHVibGljIHZvaWQg
X3Rlc3QzNzUyNDgoKSB7CitwdWJsaWMgdm9pZCB0ZXN0Mzc1MjQ4KCkgewogCXRoaXMucnVuQ29u
Zm9ybVRlc3QoCiAJCW5ldyBTdHJpbmdbXSB7CiAJCQkiWC5qYXZhIiwKQEAgLTM2MzcsOSArMzYz
Nyw5IEBACiAJCQkiaW1wb3J0IGphdmEubmV0LlVSTDtcbiIgKwogCQkJIlxuIiArCiAJCQkicHVi
bGljIGNsYXNzIFgge1xuIiArCi0JCQkicHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10g
YXJncykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4iICsKLQkJCSIgIFN5c3RlbS5vdXQucHJpbnRsbihc
IkRvbmVcIik7XG4iICsKLQkJCSJ9XG4iICsKKwkJCSIgICAgcHVibGljIHN0YXRpYyB2b2lkIG1h
aW4oU3RyaW5nW10gYXJncykgdGhyb3dzIEV4Y2VwdGlvbiB7XG4iICsKKwkJCSIgICAgICBTeXN0
ZW0ub3V0LnByaW50bG4oXCJEb25lXCIpO1xuIiArCisJCQkiICAgIH1cbiIgKwogCQkJIiAgICBw
dWJsaWMgdm9pZCBmb28oKSB0aHJvd3MgTWFsZm9ybWVkVVJMRXhjZXB0aW9uIHtcbiIgKwogCQkJ
IiAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoXCJkdW1teVwiKTsgLy8kTk9OLU5MUy0xJFxuIiAr
CiAJCQkiICAgICAgICB0cnkgKElucHV0U3RyZWFtIGlzID0gdXJsLm9wZW5TdHJlYW0oKSkge1xu
IiArCkBAIC0zNjU3LDcgKzM2NTcsNyBAQAogCQkiRG9uZSIpOwogfQogLy8gaHR0cHM6Ly9idWdz
LmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM3NTI0OCAoQUlPT0Igd2l0aCB0cnkg
d2l0aCByZXNvdXJjZXMpCi1wdWJsaWMgdm9pZCBfdGVzdDM3NTI0OGIoKSB7CitwdWJsaWMgdm9p
ZCB0ZXN0Mzc1MjQ4YSgpIHsKIAl0aGlzLnJ1bkNvbmZvcm1UZXN0KAogCQluZXcgU3RyaW5nW10g
ewogCQkJIlguamF2YSIsCkBAIC0zNjk3LDYgKzM2OTcsMTIyIEBACiAJCX0sCiAJCSJEb25lIik7
CiB9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzc1
MjQ4IChBSU9PQiB3aXRoIHRyeSB3aXRoIHJlc291cmNlcykKK3B1YmxpYyB2b2lkIHRlc3QzNzUy
NDhiKCkgeworCXRoaXMucnVuQ29uZm9ybVRlc3QoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5q
YXZhIiwKKwkJCSJpbXBvcnQgamF2YS5pby5GaWxlO1xuIiArCisJCQkiaW1wb3J0IGphdmEuaW8u
SU9FeGNlcHRpb247XG4iICsKKwkJCSJpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTtcbiIgKwor
CQkJImltcG9ydCBqYXZhLm5ldC5NYWxmb3JtZWRVUkxFeGNlcHRpb247XG4iICsKKwkJCSJpbXBv
cnQgamF2YS5uZXQuVVJMO1xuIiArCisJCQkiaW1wb3J0IGphdmEubmlvLmZpbGUuUGF0aDtcbiIg
KworCQkJImltcG9ydCBqYXZhLm5pby5maWxlLlN0YW5kYXJkQ29weU9wdGlvbjtcbiIgKworCQkJ
IlxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiICAgIHB1YmxpYyBzdGF0aWMg
dm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBFeGNlcHRpb24ge1xuIiArCisJCQkiICAg
ICAgU3lzdGVtLm91dC5wcmludGxuKFwiRG9uZVwiKTtcbiIgKworCQkJIiAgICB9XG4iICsKKwkJ
CSIgICAgcHVibGljIHZvaWQgZXhlY3V0ZUltcG9ydHMoKSB0aHJvd3MgTWFsZm9ybWVkVVJMRXhj
ZXB0aW9uIHtcbiIgKworCQkJIiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAzOyBpKyspIHtc
biIgKworCQkJIiAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKFwiZHVtbXlcIik7IC8vJE5P
Ti1OTFMtMSRcbiIgKworCQkJIiAgICAgICAgICAgIGlmICh1cmwgIT0gbnVsbCkge1xuIiArCisJ
CQkiICAgICAgICAgICAgICAgIFBhdGggdGFyZ2V0ID0gbmV3IEZpbGUoXCJkdW1teVwiKS50b1Bh
dGgoKTtcbiIgKworCQkJIiAgICAgICAgICAgICAgICB0cnkgKElucHV0U3RyZWFtIGlzID0gdXJs
Lm9wZW5TdHJlYW0oKSkge1xuIiArCisJCQkiICAgICAgICAgICAgICAgICAgICBqYXZhLm5pby5m
aWxlLkZpbGVzLmNvcHkoaXMsIHRhcmdldCxcbiIgKworCQkJIiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBTdGFuZGFyZENvcHlPcHRpb24uUkVQTEFDRV9FWElTVElORyk7XG4iICsKKwkJCSIg
ICAgICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuIiArCisJCQkiICAgICAg
ICAgICAgICAgICAgICAgY29udGludWU7XG4iICsKKwkJCSIgICAgICAgICAgICAgICAgfSBmaW5h
bGx5IHtcbiIgKworCQkJIiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiIgKworCQkJIiAgICAg
ICAgICAgICAgICAgICAgICAgIGphdmEubmlvLmZpbGUuRmlsZXMuZGVsZXRlKHRhcmdldCk7XG4i
ICsKKwkJCSIgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUxKSB7XG4i
ICsKKwkJCSJcbiIgKworCQkJIiAgICAgICAgICAgICAgICAgICAgfVxuIiArCisJCQkiICAgICAg
ICAgICAgICAgIH1cbiIgKworCQkJIiAgICAgICAgICAgIH1cbiIgKworCQkJIiAgICAgICAgfVxu
IiArCisJCQkiICAgIH1cbiIgKworCQkJIn1cbiIsCisJCX0sCisJCSJEb25lIik7Cit9CisvLyBo
dHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzc1MjQ4IChBSU9P
QiB3aXRoIHRyeSB3aXRoIHJlc291cmNlcykKK3B1YmxpYyB2b2lkIHRlc3QzNzUyNDhjKCkgewor
CXRoaXMucnVuQ29uZm9ybVRlc3QoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJ
CSJpbXBvcnQgamF2YS5pby5GaWxlO1xuIiArCisJCQkiaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp
b247XG4iICsKKwkJCSJpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTtcbiIgKworCQkJImltcG9y
dCBqYXZhLm5ldC5NYWxmb3JtZWRVUkxFeGNlcHRpb247XG4iICsKKwkJCSJpbXBvcnQgamF2YS5u
ZXQuVVJMO1xuIiArCisJCQkiaW1wb3J0IGphdmEubmlvLmZpbGUuUGF0aDtcbiIgKworCQkJImlt
cG9ydCBqYXZhLm5pby5maWxlLlN0YW5kYXJkQ29weU9wdGlvbjtcbiIgKworCQkJIlxuIiArCisJ
CQkicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBBdXRvQ2xvc2VhYmxlIHtcbiIgKworCQkJIglw
dWJsaWMgdm9pZCBmb28oKSAge1xuIiArCisJCQkiICAgICAgICB0cnkgKFggeCA9IG5ldyBYKCkp
IHtcbiIgKworCQkJIgkgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlRyeVwiKTtcbiIgKworCQkJ
IgkgICAgIHRocm93IG5ldyBFeGNlcHRpb24oKTtcbiIgKworCQkJIiAgICAgICAgfSBjYXRjaCAo
RXhjZXB0aW9uIGUpIHtcbiIgKworCQkJIgkgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGNo
XCIpO1xuIisgCisJCQkiICAgICAgICAgICAgIHJldHVybjtcbiIgKworCQkJIiAgICAgICAgfSBm
aW5hbGx5IHtcbiIgKworCQkJIiAgICAgICAgCVN5c3RlbS5vdXQucHJpbnRsbihcIkZpbmFsbHlc
Iik7XG4iICsKKwkJCSIgICAgICAgIH1cbiIgKworCQkJIiAgICB9XG4iICsKKwkJCSIJcHVibGlj
IHZvaWQgY2xvc2UoKSB7XG4iICsKKwkJCSIJCVN5c3RlbS5vdXQucHJpbnRsbihcIkNsb3NlXCIp
O1xuIiArCisJCQkiCX1cbiIgKworCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdb
XSBhcmdzKSB7XG4iICsKKwkJCSIJCW5ldyBYKCkuZm9vKCk7XG4iICsKKwkJCSIJfVxuIiArCisJ
CQkifVxuIiAKKwkJfSwKKwkJIlRyeVxuIiArIAorCQkiQ2xvc2VcbiIgKyAKKwkJIkNhdGNoXG4i
ICsgCisJCSJGaW5hbGx5Iik7Cit9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9z
aG93X2J1Zy5jZ2k/aWQ9Mzc1MjQ4IChBSU9PQiB3aXRoIHRyeSB3aXRoIHJlc291cmNlcykKK3B1
YmxpYyB2b2lkIHRlc3QzNzUyNDhkKCkgeworCXRoaXMucnVuQ29uZm9ybVRlc3QoCisJCW5ldyBT
dHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgamF2YS5pby5GaWxlO1xuIiArCisJ
CQkiaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG4iICsKKwkJCSJpbXBvcnQgamF2YS5pby5J
bnB1dFN0cmVhbTtcbiIgKworCQkJImltcG9ydCBqYXZhLm5ldC5NYWxmb3JtZWRVUkxFeGNlcHRp
b247XG4iICsKKwkJCSJpbXBvcnQgamF2YS5uZXQuVVJMO1xuIiArCisJCQkiaW1wb3J0IGphdmEu
bmlvLmZpbGUuUGF0aDtcbiIgKworCQkJImltcG9ydCBqYXZhLm5pby5maWxlLlN0YW5kYXJkQ29w
eU9wdGlvbjtcbiIgKworCQkJIlxuIiArCisJCQkicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBB
dXRvQ2xvc2VhYmxlIHtcbiIgKworCQkJIglwdWJsaWMgdm9pZCBmb28oKSAge1xuIiArCisJCQki
ICAgICAgICB0cnkgKFggeCA9IG5ldyBYKCkpIHtcbiIgKworCQkJIgkgICAgIFN5c3RlbS5vdXQu
cHJpbnRsbihcIlRyeVwiKTtcbiIgKworCQkJIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp
IHtcbiIgKworCQkJIgkgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNhdGNoXCIpO1xuIisgCisJ
CQkiICAgICAgICAgICAgIHJldHVybjtcbiIgKworCQkJIiAgICAgICAgfSBmaW5hbGx5IHtcbiIg
KworCQkJIiAgICAgICAgCVN5c3RlbS5vdXQucHJpbnRsbihcIkZpbmFsbHlcIik7XG4iICsKKwkJ
CSIgICAgICAgICAgIHJldHVybjtcbiIgKworCQkJIiAgICAgICAgfVxuIiArCisJCQkiICAgIH1c
biIgKworCQkJIglwdWJsaWMgdm9pZCBjbG9zZSgpIHtcbiIgKworCQkJIgkJU3lzdGVtLm91dC5w
cmludGxuKFwiQ2xvc2VcIik7XG4iICsKKwkJCSIJfVxuIiArCisJCQkiCXB1YmxpYyBzdGF0aWMg
dm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiIgKworCQkJIgkJbmV3IFgoKS5mb28oKTtcbiIg
KworCQkJIgl9XG4iICsKKwkJCSJ9XG4iIAorCQl9LAorCQkiVHJ5XG4iICsgCisJCSJDbG9zZVxu
IiArIAorCQkiRmluYWxseSIpOworfQogcHVibGljIHN0YXRpYyBDbGFzcyB0ZXN0Q2xhc3MoKSB7
CiAJcmV0dXJuIFRyeVdpdGhSZXNvdXJjZXNTdGF0ZW1lbnRUZXN0LmNsYXNzOwogfQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2FzdC9UcnlTdGF0ZW1lbnQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvVHJ5U3RhdGVt
ZW50LmphdmEKaW5kZXggMDUzNDk3MC4uMzhkZWU4ZSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9U
cnlTdGF0ZW1lbnQuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1RyeVN0YXRlbWVudC5qYXZhCkBAIC01
ODYsNiArNTg2LDcgQEAKIAkJfQogCX0gZmluYWxseSB7CiAJCXRoaXMuZGVjbGFyZWRFeGNlcHRp
b25MYWJlbHMgPSBudWxsOworCQl0aGlzLnJlc291cmNlRXhjZXB0aW9uTGFiZWxzID0gbnVsbDsg
IC8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zNzUyNDgK
IAl9CiAJYm9vbGVhbiB0cnlCbG9ja0hhc1NvbWVDb2RlID0gY29kZVN0cmVhbS5wb3NpdGlvbiAh
PSBwYzsKIAkvLyBmbGFnIHRlbGxpbmcgaWYgc29tZSBieXRlY29kZXMgd2VyZSBpc3N1ZWQgaW5z
aWRlIHRoZSB0cnkgYmxvY2sKQEAgLTgzNSw3ICs4MzYsNyBAQAogcHVibGljIGJvb2xlYW4gZ2Vu
ZXJhdGVTdWJSb3V0aW5lSW52b2NhdGlvbihCbG9ja1Njb3BlIGN1cnJlbnRTY29wZSwgQ29kZVN0
cmVhbSBjb2RlU3RyZWFtLCBPYmplY3QgdGFyZ2V0TG9jYXRpb24sIGludCBzdGF0ZUluZGV4LCBM
b2NhbFZhcmlhYmxlQmluZGluZyBzZWNyZXRMb2NhbCkgewogCiAJaW50IHJlc291cmNlQ291bnQg
PSB0aGlzLnJlc291cmNlcy5sZW5ndGg7Ci0JaWYgKHJlc291cmNlQ291bnQgPiAwKSB7CisJaWYg
KHJlc291cmNlQ291bnQgPiAwICYmIHRoaXMucmVzb3VyY2VFeGNlcHRpb25MYWJlbHMgIT0gbnVs
bCkgeyAvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzc1
MjQ4CiAJCWZvciAoaW50IGkgPSByZXNvdXJjZUNvdW50OyBpID4gMDsgLS1pKSB7CiAJCQkvLyBE
aXNhcm0gdGhlIGhhbmRsZXJzIGFuZCB0YWtlIGNhcmUgb2YgcmVzb3VyY2UgY2xvc3VyZS4KIAkJ
CXRoaXMucmVzb3VyY2VFeGNlcHRpb25MYWJlbHNbaV0ucGxhY2VFbmQoKTsK
</data>

          </attachment>
      

    </bug>

</bugzilla>