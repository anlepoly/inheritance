<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>426520</bug_id>
          
          <creation_ts>2014-01-23 17:49:00 -0500</creation_ts>
          <short_desc>[1.8][formatter] inserts spaces into annotated qualified type</short_desc>
          <delta_ts>2014-02-03 00:47:48 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Markus Keller">markus_keller</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="61483"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2353896</commentid>
    <comment_count>0</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-01-23 17:49:32 -0500</bug_when>
    <thetext>package bug.formatter;

import java.lang.annotation.*;

@Target(ElementType.TYPE_USE)
@interface T {
}

public class C {
	java.util.concurrent.@T Callable c;
	java.util.@T Set&lt;java.lang.@T String&gt; s;
}

The formatter inserts bad spaces after the package components of an annotated qualified type (but it seems to be afraid of touching a parameterized type):

	java. util. concurrent.@T Callable c;
	java.util.@T Set&lt; java. lang.@T String&gt; s;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2357307</commentid>
    <comment_count>1</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-01-31 12:23:08 -0500</bug_when>
    <thetext>Please handle with priority.

This also shows up when creating new nodes using ASTRewrite, e.g. when you add this at the end of class C and then use the Quick Fix:

    class Callable {}
    void foo() {
        c2= c; // Create local variable
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2357673</commentid>
    <comment_count>2</comment_count>
      <attachid>239562</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-02-02 15:04:02 -0500</bug_when>
    <thetext>Created attachment 239562
Proposed Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2357702</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-02 20:34:59 -0500</bug_when>
    <thetext>Routine defect fixes can be reviewed by JDT/Core committers themselves,
Let us use Markus for API reviews, questions and &quot;non-routine&quot; reviews
whatever that could mean</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2357722</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-03 00:47:48 -0500</bug_when>
    <thetext>I hooked up the new suite into RunAllJava8Tests and RunOnlyJava8Tests,
added one more test and released it here:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=1c367f9da4b67ddc705e012aa9c952ee4bdfc663

Thanks Manoj.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>239562</attachid>
            <date>2014-02-02 15:04:00 -0500</date>
            <delta_ts>2014-02-02 15:04:02 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-426520-18formatter-inserts-spaces-into-a.patch</filename>
            <type>text/plain</type>
            <size>5234</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkZv
cm1hdHRlclRlc3RzLmphdmEKaW5kZXggNzA1MDA5YS4uNmNiNDMzNSAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL1J1bkZvcm1hdHRlclRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkZvcm1hdHRlclRlc3Rz
LmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJp
Z2h0IChjKSAyMDA1LCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJp
Z2h0IChjKSAyMDA1LCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJp
Z2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFs
cwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQ
dWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlv
biwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNTgsNiArNTgsNyBAQAogCQlpZiAodHlwZSA9PSBu
dWxsIHx8ICF0eXBlLmVxdWFscygiamF2YWRvYyIpKSB7CiAJCQlhbGxDbGFzc2VzLmFkZChGb3Jt
YXR0ZXJSZWdyZXNzaW9uVGVzdHMuY2xhc3MpOwogCQkJYWxsQ2xhc3Nlcy5hZGQoRm9ybWF0dGVy
QnVnc1Rlc3RzLmNsYXNzKTsKKwkJCWFsbENsYXNzZXMuYWRkKEZvcm1hdHRlckJ1Z3MxOFRlc3Rz
LmNsYXNzKTsKIAkJfQogCQlhbGxDbGFzc2VzLmFkZChDb21tZW50c1Rlc3RTdWl0ZS5jbGFzcyk7
CiAJCWFsbENsYXNzZXMuYWRkKEZvcm1hdHRlckpTUjMzNVRlc3RzLmNsYXNzKTsKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9mb3JtYXR0ZXIvRm9ybWF0dGVyQnVnczE4VGVzdHMuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9m
b3JtYXR0ZXIvRm9ybWF0dGVyQnVnczE4VGVzdHMuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwLi4zOWNkYjI4Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRl
ci9Gb3JtYXR0ZXJCdWdzMThUZXN0cy5qYXZhCkBAIC0wLDAgKzEsNjcgQEAKKy8qKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBv
dGhlcnMuCisgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2Nv
bXBhbnlpbmcgbWF0ZXJpYWxzCisgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKKyAqIHdoaWNoIGFjY29tcGFuaWVz
IHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CisgKiBodHRwOi8vd3d3LmVj
bGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAorICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50
YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhl
IEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBm
b3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMg
bm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgorICogCisg
KiBDb250cmlidXRvcnM6CisgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5k
IGltcGxlbWVudGF0aW9uCisgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KK3BhY2thZ2Ugb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyOworCitpbXBvcnQganVuaXQuZnJhbWV3b3Jr
LlRlc3Q7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSmF2YU1vZGVsRXhjZXB0aW9uOwor
CitwdWJsaWMgY2xhc3MgRm9ybWF0dGVyQnVnczE4VGVzdHMgZXh0ZW5kcyBGb3JtYXR0ZXJSZWdy
ZXNzaW9uVGVzdHMgeworCitwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7CisJcmV0dXJuIGJ1
aWxkTW9kZWxUZXN0U3VpdGUoRm9ybWF0dGVyQnVnczE4VGVzdHMuY2xhc3MpOworfQorCitwdWJs
aWMgRm9ybWF0dGVyQnVnczE4VGVzdHMoU3RyaW5nIG5hbWUpIHsKKwlzdXBlcihuYW1lKTsKK30K
KworLyoqCisgKiBDcmVhdGUgcHJvamVjdCBhbmQgc2V0IHRoZSBqYXIgcGxhY2Vob2xkZXIuCisg
Ki8KK3B1YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwlpZiAoSkFW
QV9QUk9KRUNUID09IG51bGwpIHsKKwkJSkFWQV9QUk9KRUNUID0gc2V0VXBKYXZhUHJvamVjdCgi
Rm9ybWF0dGVyQnVncyIsICIxLjgiKTsgLy8kTk9OLU5MUy0xJAorCX0KKwlzdXBlci5zZXRVcFN1
aXRlKCk7Cit9CisKKy8qKgorICogQGJ1ZyA0MjY1MjA6IFsxLjhdW2Zvcm1hdHRlcl0gaW5zZXJ0
cyBzcGFjZXMgaW50byBhbm5vdGF0ZWQgcXVhbGlmaWVkIHR5cGUKKyAqIEB0ZXN0IEVuc3VyZSB0
aGF0IGZvcm1hdHRpbmcgZG9lcyBub3QgY2hhbmdlIHRoZSBxdWFsaWZpZWQgdHlwZSBmb3JtYXR0
aW5nIGZvciBjIGFuZCBpdAorICogaXQgcmVtb3ZlcyB0aGUgc3BhY2VzIGZvciBzLiAKKyAqIEBz
ZWUgImh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00MjY1MjAi
CisgKi8KK3B1YmxpYyB2b2lkIHRlc3RCdWc0MjY1MjBhX3NpbmNlXzgoKSB0aHJvd3MgSmF2YU1v
ZGVsRXhjZXB0aW9uIHsKKwlTdHJpbmcgc291cmNlID0KKwkJImltcG9ydCBqYXZhLmxhbmcuYW5u
b3RhdGlvbi4qOyIgKworCQkiQFRhcmdldChFbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQki
QGludGVyZmFjZSBUIHt9XG4iICsKKwkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkiCUBTdXBw
cmVzc1dhcm5pbmdzKFwicmF3dHlwZXNcIilcbiIgKworCQkiCWphdmEudXRpbC5jb25jdXJyZW50
LkBUIENhbGxhYmxlIGM7XG4iICsKKwkJIglqYXZhLiAgdXRpbC4gIEBUIFNldDxqYXZhLmxhbmcu
QFQgU3RyaW5nPiBzO1xuIiArCisJCSJ9XG4iOworCWZvcm1hdFNvdXJjZShzb3VyY2UsCisJCQki
aW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLio7XG5cbiIgKworCQkJIkBUYXJnZXQoRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCSJAaW50ZXJmYWNlIFQge1xufVxuXG4iICsKKwkJCSJw
dWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJQFN1cHByZXNzV2FybmluZ3MoXCJyYXd0eXBlc1wi
KVxuIiArCisJCQkiCWphdmEudXRpbC5jb25jdXJyZW50LkBUIENhbGxhYmxlIGM7XG4iICsKKwkJ
CSIJamF2YS51dGlsLkBUIFNldDxqYXZhLmxhbmcuQFQgU3RyaW5nPiBzO1xuIiArCisJCQkifVxu
Iik7Cit9CisKK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1h
dHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9y
bWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZvcm1hdHRlclZp
c2l0b3IuamF2YQppbmRleCBiODAyMDFhLi4yMDQ2ZjBmIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9D
b2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zvcm1h
dHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3JtYXR0ZXJWaXNp
dG9yLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29w
eXJpZ2h0IChjKSAyMDAyLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29w
eXJpZ2h0IChjKSAyMDAyLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBz
ZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1
dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNTE0OSw3ICs1MTQ5LDcgQEAKIAkJCWlmIChp
ICE9IDApIHRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZURPVCwgZmFsc2UpOwogCQkJaWYgKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMg
IT0gbnVsbCkgewogCQkJCWZvcm1hdElubGluZUFubm90YXRpb25zKHF1YWxpZmllZFR5cGVSZWZl
cmVuY2UuYW5ub3RhdGlvbnNbaV0sIGZhbHNlKTsKLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRU
b2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyLCB0cnVlKTsKKwkJCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVy
LCBmYWxzZSk7CiAJCQl9IGVsc2UgewogCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRl
cm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIsIGZhbHNlKTsKIAkJCX0=
</data>

          </attachment>
      

    </bug>

</bugzilla>