<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>441338</bug_id>
          
          <creation_ts>2014-08-07 07:48:00 -0400</creation_ts>
          <short_desc>[1.8][null] better combine null type annotations on substitution of parameterized type</short_desc>
          <delta_ts>2014-09-17 06:00:29 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>441693</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>shankhba</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2436651</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-08-07 07:48:02 -0400</bug_when>
    <thetext>Function TypeBinding.unannotated(boolean) from 438458 is over-eager as can be shown by this test:

interface I2&lt;T,U extends List&lt;T&gt;&gt; {
        @NonNull U getU();
}
class Main {    
        static String test (I2&lt;@Nullable String, @Nullable ArrayList&lt;@Nullable String&gt;&gt; i2) {
                return i2.getU().get(0).toUpperCase(); 
        }
}


While &apos;@NonNull U&apos; overrides the &apos;@Nullable&apos; annotation on the ArrayList type argument for I2, the detail &apos;@Nullable String&apos; must be kept to produce the proper error against the final toUpperCase().
IOW, the return type of i2.getU() must be:
   @NonNull ArrayList&lt;@Nullable String&gt;
the inner @Nullable is currently dropped.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2436652</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-08-07 07:49:00 -0400</bug_when>
    <thetext>(In reply to Stephan Herrmann from comment #0)
&gt; Function TypeBinding.unannotated(boolean) from 438458 is over-eager as can
&gt; be shown by this test:

clickable ref: bug 438458</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2436653</commentid>
    <comment_count>2</comment_count>
      <attachid>245800</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-08-07 07:51:08 -0400</bug_when>
    <thetext>Created attachment 245800
patch under test

This is the change I&apos;m currently testing on top of all my changes pending for 4.4.1.

The additional changes in BoundSet simply enhance safety not to unnecessarily produce contradictory annotations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2436710</commentid>
    <comment_count>3</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-08-07 09:41:10 -0400</bug_when>
    <thetext>Modified patch passed all tests in R4_4_maintenance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2439168</commentid>
    <comment_count>4</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-08-14 12:42:52 -0400</bug_when>
    <thetext>Tests released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=dc74cb9ccf05bc2089bda4773412bb0387d8bf2f

Other than that this bug has been subsumed by bug 441693

*** This bug has been marked as a duplicate of bug 441693 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452587</commentid>
    <comment_count>5</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-09-16 11:50:31 -0400</bug_when>
    <thetext>Verified for Mars 4.5M2 using I20140915-2000 build.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>245800</attachid>
            <date>2014-08-07 07:51:00 -0400</date>
            <delta_ts>2014-08-07 07:51:08 -0400</delta_ts>
            <desc>patch under test</desc>
            <filename>Improving-unannotatedZ-impl--use.patch</filename>
            <type>text/plain</type>
            <size>10363</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5ub3Rh
dGlvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5u
b3RhdGlvblRlc3QuamF2YQppbmRleCA2NzYyNTlhLi41MjU4YWI0IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OdWxsVHlwZUFubm90YXRpb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbFR5cGVBbm5vdGF0aW9uVGVzdC5q
YXZhCkBAIC01NDI1LDYgKzU0MjUsMTMzIEBACiAJCSJOdWxsIHR5cGUgbWlzbWF0Y2ggKHR5cGUg
YW5ub3RhdGlvbnMpOiByZXF1aXJlZCBcJ0BOb25OdWxsIENvbGxlY3Rpb25cJyBidXQgdGhpcyBl
eHByZXNzaW9uIGhhcyB0eXBlIFwnQE51bGxhYmxlIENvbGxlY3Rpb25cJ1xuIiArIAogCQkiLS0t
LS0tLS0tLVxuIik7CiB9CisvLyB0b3AtbGV2ZWwgYW5ub3RhdGlvbiBpcyBvdmVycmlkZGVuIGF0
IHVzZS1zaXRlLCBkZXRhaWxzIHJlbWFpbiAtIHBhcmFtZXRlcml6ZWQgdHlwZQorcHVibGljIHZv
aWQgdGVzdFR5cGVWYXJpYWJsZTE5KCkgeworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQlu
ZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkiaW1wb3J0IGphdmEudXRpbC5BcnJheUxp
c3Q7XG4iICsgCisJCQkiaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuIiArIAorCQkJIlxuIiArIAor
CQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi5Ob25OdWxsO1xuIiArIAorCQkJ
ImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi5OdWxsYWJsZTtcbiIgKworCQkJImlu
dGVyZmFjZSBJPFQsVSBleHRlbmRzIExpc3Q8VD4+IHtcbiIgKworCQkJIglVIGdldDAoKTtcbiIg
KworCQkJIglATnVsbGFibGUgVSBnZXQxKCk7XG4iICsgCisJCQkiCUBOb25OdWxsIFUgZ2V0Migp
O1xuIiArIAorCQkJIn1cbiIgKyAKKwkJCSJjbGFzcyBYIHtcbiIgKyAKKwkJCSIJc3RhdGljIFN0
cmluZyB0ZXN0IChJPEBOdWxsYWJsZSBTdHJpbmcsIEBOb25OdWxsIEFycmF5TGlzdDxATnVsbGFi
bGUgU3RyaW5nPj4gaTEsXG4iICsKKwkJCSIJCQkJCQlJPEBOb25OdWxsIFN0cmluZywgQE51bGxh
YmxlIEFycmF5TGlzdDxATm9uTnVsbCBTdHJpbmc+PiBpMiwgaW50IHMpIHtcbiIgKworCQkJIgkJ
c3dpdGNoKHMpIHtcbiIgKworCQkJIgkJCWNhc2UgMCA6IHJldHVybiBpMS5nZXQwKCkuZ2V0KDAp
LnRvVXBwZXJDYXNlKCk7IC8vIHByb2JsZW0gYXQgZGV0YWlsXG4iICsgCisJCQkiCQkJY2FzZSAx
IDogcmV0dXJuIGkxLmdldDEoKS5nZXQoMCkudG9VcHBlckNhc2UoKTsgLy8gMiBwcm9ibGVtc1xu
IiArIAorCQkJIgkJCWNhc2UgMiA6IHJldHVybiBpMS5nZXQyKCkuZ2V0KDApLnRvVXBwZXJDYXNl
KCk7IC8vIHByb2JsZW0gYXQgZGV0YWlsXG4iICsgCisJCQkiCQkJY2FzZSAzIDogcmV0dXJuIGky
LmdldDAoKS5nZXQoMCkudG9VcHBlckNhc2UoKTsgLy8gcHJvYmxlbSBhdCB0b3BcbiIgKyAKKwkJ
CSIJCQljYXNlIDQgOiByZXR1cm4gaTIuZ2V0MSgpLmdldCgwKS50b1VwcGVyQ2FzZSgpOyAvLyBw
cm9ibGVtIGF0IHRvcFxuIiArIAorCQkJIgkJCWNhc2UgNSA6IHJldHVybiBpMi5nZXQyKCkuZ2V0
KDApLnRvVXBwZXJDYXNlKCk7IC8vIE9LXG4iICsKKwkJCSIJCQlkZWZhdWx0IDogcmV0dXJuIFwi
XCI7IiArCisJCQkiCQl9XG4iICsgCisJCQkiCX1cbiIgKyAKKwkJCSJ9XG4iCisJCX0sCisJCWdl
dENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1IgaW4g
WC5qYXZhIChhdCBsaW5lIDE1KVxuIiArIAorCQkiCWNhc2UgMCA6IHJldHVybiBpMS5nZXQwKCku
Z2V0KDApLnRvVXBwZXJDYXNlKCk7IC8vIHByb2JsZW0gYXQgZGV0YWlsXG4iICsgCisJCSIJICAg
ICAgICAgICAgICAgIF5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJIlBvdGVudGlhbCBudWxsIHBv
aW50ZXIgYWNjZXNzOiBUaGUgbWV0aG9kIGdldChpbnQpIG1heSByZXR1cm4gbnVsbFxuIiArIAor
CQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDE2KVxu
IiArIAorCQkiCWNhc2UgMSA6IHJldHVybiBpMS5nZXQxKCkuZ2V0KDApLnRvVXBwZXJDYXNlKCk7
IC8vIDIgcHJvYmxlbXNcbiIgKyAKKwkJIgkgICAgICAgICAgICAgICAgXl5eXl5eXl5eXG4iICsg
CisJCSJQb3RlbnRpYWwgbnVsbCBwb2ludGVyIGFjY2VzczogVGhlIG1ldGhvZCBnZXQxKCkgbWF5
IHJldHVybiBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIzLiBFUlJPUiBpbiBY
LmphdmEgKGF0IGxpbmUgMTYpXG4iICsgCisJCSIJY2FzZSAxIDogcmV0dXJuIGkxLmdldDEoKS5n
ZXQoMCkudG9VcHBlckNhc2UoKTsgLy8gMiBwcm9ibGVtc1xuIiArIAorCQkiCSAgICAgICAgICAg
ICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCSJQb3RlbnRpYWwgbnVsbCBwb2ludGVyIGFj
Y2VzczogVGhlIG1ldGhvZCBnZXQoaW50KSBtYXkgcmV0dXJuIG51bGxcbiIgKyAKKwkJIi0tLS0t
LS0tLS1cbiIgKyAKKwkJIjQuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKKwkJ
IgljYXNlIDIgOiByZXR1cm4gaTEuZ2V0MigpLmdldCgwKS50b1VwcGVyQ2FzZSgpOyAvLyBwcm9i
bGVtIGF0IGRldGFpbFxuIiArIAorCQkiCSAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCSJQb3RlbnRpYWwgbnVsbCBwb2ludGVyIGFjY2VzczogVGhlIG1ldGhvZCBnZXQo
aW50KSBtYXkgcmV0dXJuIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjUuIEVS
Uk9SIGluIFguamF2YSAoYXQgbGluZSAxOClcbiIgKyAKKwkJIgljYXNlIDMgOiByZXR1cm4gaTIu
Z2V0MCgpLmdldCgwKS50b1VwcGVyQ2FzZSgpOyAvLyBwcm9ibGVtIGF0IHRvcFxuIiArIAorCQki
CSAgICAgICAgICAgICAgICBeXl5eXl5eXl5cbiIgKyAKKwkJIlBvdGVudGlhbCBudWxsIHBvaW50
ZXIgYWNjZXNzOiBUaGUgbWV0aG9kIGdldDAoKSBtYXkgcmV0dXJuIG51bGxcbiIgKyAKKwkJIi0t
LS0tLS0tLS1cbiIgKyAKKwkJIjYuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxOSlcbiIgKyAK
KwkJIgljYXNlIDQgOiByZXR1cm4gaTIuZ2V0MSgpLmdldCgwKS50b1VwcGVyQ2FzZSgpOyAvLyBw
cm9ibGVtIGF0IHRvcFxuIiArIAorCQkiCSAgICAgICAgICAgICAgICBeXl5eXl5eXl5cbiIgKyAK
KwkJIlBvdGVudGlhbCBudWxsIHBvaW50ZXIgYWNjZXNzOiBUaGUgbWV0aG9kIGdldDEoKSBtYXkg
cmV0dXJuIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorLy8gdG9wLWxldmVsIGFu
bm90YXRpb24gaXMgb3ZlcnJpZGRlbiBhdCB1c2Utc2l0ZSwgYXJyYXkgd2l0aCBhbm90YXRpb25z
IG9uIGRpbWVuc2lvbnMKK3B1YmxpYyB2b2lkIHRlc3RUeXBlVmFyaWFibGUxOWEoKSB7CisJcnVu
TmVnYXRpdmVUZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJ
CSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uTm9uTnVsbDtcbiIgKyAKKwkJCSJp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uTnVsbGFibGU7XG4iICsKKwkJCSJpbnRl
cmZhY2UgSTE8VD4ge1xuIiArIAorCQkJIglUIEBOdWxsYWJsZVtdIGdldDAoKTtcbiIgKyAKKwkJ
CSIJQE51bGxhYmxlIFQgQE5vbk51bGxbXSBnZXQxKCk7XG4iICsgCisJCQkiCUBOdWxsYWJsZSBU
IEBOdWxsYWJsZVtdIGdldDIoKTtcbiIgKyAKKwkJCSJ9XG4iICsgCisJCQkiaW50ZXJmYWNlIEky
PFQ+IHtcbiIgKyAKKwkJCSIJVCBATm9uTnVsbFtdIGdldDAoKTtcbiIgKyAKKwkJCSIJQE5vbk51
bGwgVCBATm9uTnVsbFtdIGdldDEoKTtcbiIgKyAKKwkJCSIJQE5vbk51bGwgVCBATnVsbGFibGVb
XSBnZXQyKCk7XG4iICsgCisJCQkifVxuIiArIAorCQkJImNsYXNzIFgge1xuIiArIAorCQkJIglz
dGF0aWMgU3RyaW5nIHRlc3QgKEkxPEBOb25OdWxsIFN0cmluZz4gaTEsIEkyPEBOdWxsYWJsZSBT
dHJpbmc+IGkyLCBpbnQgcykge1xuIiArCisJCQkiCQlzd2l0Y2ggKHMpIHtcbiIgKyAKKwkJCSIJ
CQljYXNlIDA6IHJldHVybiBpMS5nZXQwKClbMF0udG9VcHBlckNhc2UoKTsgLy8gcHJvYmxlbSBv
biBhcnJheVxuIiArIAorCQkJIgkJCWNhc2UgMTogcmV0dXJuIGkxLmdldDEoKVswXS50b1VwcGVy
Q2FzZSgpOyAvLyBwcm9ibGVtIG9uIGVsZW1lbnRcbiIgKyAKKwkJCSIJCQljYXNlIDI6IHJldHVy
biBpMS5nZXQyKClbMF0udG9VcHBlckNhc2UoKTsgLy8gMiBwcm9ibGVtc1xuIiArCisJCQkiCQkJ
Y2FzZSAzOiByZXR1cm4gaTIuZ2V0MCgpWzBdLnRvVXBwZXJDYXNlKCk7IC8vIHByb2JsZW0gb24g
ZWxlbWVudFxuIiArIAorCQkJIgkJCWNhc2UgNDogcmV0dXJuIGkyLmdldDEoKVswXS50b1VwcGVy
Q2FzZSgpOyAvLyBPS1xuIiArIAorCQkJIgkJCWNhc2UgNTogcmV0dXJuIGkyLmdldDIoKVswXS50
b1VwcGVyQ2FzZSgpOyAvLyBwcm9ibGVtIG9uIGFycmF5XG4iICsKKwkJCSIJCQlkZWZhdWx0OiBy
ZXR1cm4gXCJcIjtcbiIgKworCQkJIgkJfVxuIiArIAorCQkJIgl9XG4iICsgCisJCQkifVxuIgor
CQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEu
IEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxNilcbiIgKyAKKwkJIgljYXNlIDA6IHJldHVybiBp
MS5nZXQwKClbMF0udG9VcHBlckNhc2UoKTsgLy8gcHJvYmxlbSBvbiBhcnJheVxuIiArIAorCQki
CSAgICAgICAgICAgICAgIF5eXl5eXl5eXlxuIiArIAorCQkiUG90ZW50aWFsIG51bGwgcG9pbnRl
ciBhY2Nlc3M6IFRoZSBtZXRob2QgZ2V0MCgpIG1heSByZXR1cm4gbnVsbFxuIiArIAorCQkiLS0t
LS0tLS0tLVxuIiArIAorCQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDE3KVxuIiArIAor
CQkiCWNhc2UgMTogcmV0dXJuIGkxLmdldDEoKVswXS50b1VwcGVyQ2FzZSgpOyAvLyBwcm9ibGVt
IG9uIGVsZW1lbnRcbiIgKyAKKwkJIgkgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5cbiIgKyAK
KwkJIlBvdGVudGlhbCBudWxsIHBvaW50ZXIgYWNjZXNzOiBhcnJheSBlbGVtZW50IG1heSBiZSBu
dWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIzLiBFUlJPUiBpbiBYLmphdmEgKGF0
IGxpbmUgMTgpXG4iICsgCisJCSIJY2FzZSAyOiByZXR1cm4gaTEuZ2V0MigpWzBdLnRvVXBwZXJD
YXNlKCk7IC8vIDIgcHJvYmxlbXNcbiIgKyAKKwkJIgkgICAgICAgICAgICAgICBeXl5eXl5eXl5c
biIgKyAKKwkJIlBvdGVudGlhbCBudWxsIHBvaW50ZXIgYWNjZXNzOiBUaGUgbWV0aG9kIGdldDIo
KSBtYXkgcmV0dXJuIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjQuIEVSUk9S
IGluIFguamF2YSAoYXQgbGluZSAxOClcbiIgKyAKKwkJIgljYXNlIDI6IHJldHVybiBpMS5nZXQy
KClbMF0udG9VcHBlckNhc2UoKTsgLy8gMiBwcm9ibGVtc1xuIiArIAorCQkiCSAgICAgICAgICAg
ICAgIF5eXl5eXl5eXl5eXlxuIiArIAorCQkiUG90ZW50aWFsIG51bGwgcG9pbnRlciBhY2Nlc3M6
IGFycmF5IGVsZW1lbnQgbWF5IGJlIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJ
IjUuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxOSlcbiIgKyAKKwkJIgljYXNlIDM6IHJldHVy
biBpMi5nZXQwKClbMF0udG9VcHBlckNhc2UoKTsgLy8gcHJvYmxlbSBvbiBlbGVtZW50XG4iICsg
CisJCSIJICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXG4iICsgCisJCSJQb3RlbnRpYWwgbnVs
bCBwb2ludGVyIGFjY2VzczogYXJyYXkgZWxlbWVudCBtYXkgYmUgbnVsbFxuIiArIAorCQkiLS0t
LS0tLS0tLVxuIiArIAorCQkiNi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDIxKVxuIiArIAor
CQkiCWNhc2UgNTogcmV0dXJuIGkyLmdldDIoKVswXS50b1VwcGVyQ2FzZSgpOyAvLyBwcm9ibGVt
IG9uIGFycmF5XG4iICsgCisJCSIJICAgICAgICAgICAgICAgXl5eXl5eXl5eXG4iICsgCisJCSJQ
b3RlbnRpYWwgbnVsbCBwb2ludGVyIGFjY2VzczogVGhlIG1ldGhvZCBnZXQyKCkgbWF5IHJldHVy
biBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KIHB1YmxpYyB2b2lkIHRlc3RCdWc0
MzQ2MDAoKSB7CiAJcnVuQ29uZm9ybVRlc3RXaXRoTGlicygKIAkJbmV3IFN0cmluZ1tdIHsKZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9sb29rdXAvQm91bmRTZXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQm91
bmRTZXQuamF2YQppbmRleCA2YjY4ZjhkLi4xNTFhYjE5IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9v
a3VwL0JvdW5kU2V0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Cb3VuZFNldC5qYXZhCkBAIC0y
NDIsNyArMjQyLDcgQEAKIAkJCQlpZiAoYW5ub3QgIT0gbnVsbCkgewogCQkJCQkvLyBvbmx5IGdl
dCBoZXJlIGlmIGV4YWN0bHkgb25lIG9mIEBOb25OdWxsIG9yIEBOdWxsYWJsZSB3YXMgaGludGVk
OyBub3cgYXBwbHkgdGhpcyBoaW50OgogCQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGJvdW5kVHlw
ZXMubGVuZ3RoOyBpKyspCi0JCQkJCQlib3VuZFR5cGVzW2ldID0gZW52aXJvbm1lbnQuY3JlYXRl
QW5ub3RhdGVkVHlwZShib3VuZFR5cGVzW2ldLCBhbm5vdCk7CisJCQkJCQlib3VuZFR5cGVzW2ld
ID0gZW52aXJvbm1lbnQuY3JlYXRlQW5ub3RhdGVkVHlwZShib3VuZFR5cGVzW2ldLnVuYW5ub3Rh
dGVkKHRydWUpLCBhbm5vdCk7CiAJCQkJfQogCQkJfQogCQl9CkBAIC0yNzAsNyArMjcwLDcgQEAK
IAkJCUFubm90YXRpb25CaW5kaW5nW10gYW5ub3QgPSBlbnZpcm9ubWVudC5udWxsQW5ub3RhdGlv
bnNGcm9tVGFnQml0cyhudWxsSGludHMpOwogCQkJaWYgKGFubm90ICE9IG51bGwpCiAJCQkJLy8g
b25seSBnZXQgaGVyZSBpZiBleGFjdGx5IG9uZSBvZiBATm9uTnVsbCBvciBATnVsbGFibGUgd2Fz
IGhpbnRlZDsgbm93IGFwcGx5IHRoaXMgaGludDoKLQkJCQlyZXR1cm4gZW52aXJvbm1lbnQuY3Jl
YXRlQW5ub3RhdGVkVHlwZSh0eXBlLCBhbm5vdCk7CisJCQkJcmV0dXJuIGVudmlyb25tZW50LmNy
ZWF0ZUFubm90YXRlZFR5cGUodHlwZS51bmFubm90YXRlZCh0cnVlKSwgYW5ub3QpOwogCQkJcmV0
dXJuIHR5cGU7CiAJCX0KIAkJcHVibGljIHZvaWQgc2V0SW5zdGFudGlhdGlvbihUeXBlQmluZGlu
ZyB0eXBlLCBJbmZlcmVuY2VWYXJpYWJsZSB2YXJpYWJsZSwgTG9va3VwRW52aXJvbm1lbnQgZW52
aXJvbm1lbnQpIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1ldGVyaXplZFR5cGVC
aW5kaW5nLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRUeXBlQmluZGluZy5qYXZh
CmluZGV4IDhhYTdiZTkuLmQxM2EyOGMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1l
dGVyaXplZFR5cGVCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVk
VHlwZUJpbmRpbmcuamF2YQpAQCAtODgzLDE3ICs4ODMsNyBAQAogCQlpZiAocmVtb3ZlT25seU51
bGxBbm5vdGF0aW9ucykgewogCQkJUmVmZXJlbmNlQmluZGluZyB1bmFubm90YXRlZEdlbmVyaWNU
eXBlID0gKFJlZmVyZW5jZUJpbmRpbmcpIHRoaXMuZW52aXJvbm1lbnQuZ2V0VW5hbm5vdGF0ZWRU
eXBlKHRoaXMudHlwZSk7CiAJCQlBbm5vdGF0aW9uQmluZGluZ1tdIG5ld0Fubm90YXRpb25zID0g
dGhpcy5lbnZpcm9ubWVudC5maWx0ZXJOdWxsVHlwZUFubm90YXRpb25zKHRoaXMudHlwZUFubm90
YXRpb25zKTsKLQkJCVR5cGVCaW5kaW5nW10gbmV3QXJndW1lbnRzID0gbnVsbDsKLQkJCWlmICh0
aGlzLmFyZ3VtZW50cyAhPSBudWxsKSB7Ci0JCQkJbmV3QXJndW1lbnRzID0gbmV3IFR5cGVCaW5k
aW5nW3RoaXMuYXJndW1lbnRzLmxlbmd0aF07Ci0JCQkJZm9yIChpbnQgaSA9IDA7IGkgPCB0aGlz
LmFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewotCQkJCQluZXdBcmd1bWVudHNbaV0gPSB0aGlzLmFy
Z3VtZW50c1tpXS51bmFubm90YXRlZChyZW1vdmVPbmx5TnVsbEFubm90YXRpb25zKTsKLQkJCQl9
Ci0JCQl9Ci0JCQlSZWZlcmVuY2VCaW5kaW5nIG5ld0VuY2xvc2luZyA9IG51bGw7Ci0JCQlpZiAo
dGhpcy5lbmNsb3NpbmdUeXBlICE9IG51bGwpCi0JCQkJbmV3RW5jbG9zaW5nID0gKFJlZmVyZW5j
ZUJpbmRpbmcpdGhpcy5lbmNsb3NpbmdUeXBlLnVuYW5ub3RhdGVkKHJlbW92ZU9ubHlOdWxsQW5u
b3RhdGlvbnMpOwotCQkJcmV0dXJuIHRoaXMuZW52aXJvbm1lbnQuY3JlYXRlUGFyYW1ldGVyaXpl
ZFR5cGUodW5hbm5vdGF0ZWRHZW5lcmljVHlwZSwgbmV3QXJndW1lbnRzLCBuZXdFbmNsb3Npbmcs
IG5ld0Fubm90YXRpb25zKTsKKwkJCXJldHVybiB0aGlzLmVudmlyb25tZW50LmNyZWF0ZVBhcmFt
ZXRlcml6ZWRUeXBlKHVuYW5ub3RhdGVkR2VuZXJpY1R5cGUsIHRoaXMuYXJndW1lbnRzCSwgdGhp
cy5lbmNsb3NpbmdUeXBlLCBuZXdBbm5vdGF0aW9ucyk7CiAJCX0KIAkJcmV0dXJuIHRoaXMuZW52
aXJvbm1lbnQuZ2V0VW5hbm5vdGF0ZWRUeXBlKHRoaXMpOwogCX0KZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9sb29rdXAvUmF3VHlwZUJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBp
bGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvUmF3VHlwZUJpbmRp
bmcuamF2YQppbmRleCAyNTliM2M0Li5iOTM3MTQxIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3Vw
L1Jhd1R5cGVCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9SYXdUeXBlQmluZGluZy5q
YXZhCkBAIC04OCwxMCArODgsNyBAQAogCQlpZiAocmVtb3ZlT25seU51bGxBbm5vdGF0aW9ucykg
ewogCQkJUmVmZXJlbmNlQmluZGluZyB1bmFubm90YXRlZEdlbmVyaWNUeXBlID0gKFJlZmVyZW5j
ZUJpbmRpbmcpIHRoaXMuZW52aXJvbm1lbnQuZ2V0VW5hbm5vdGF0ZWRUeXBlKHRoaXMuZ2VuZXJp
Y1R5cGUoKSk7CiAJCQlBbm5vdGF0aW9uQmluZGluZ1tdIG5ld0Fubm90YXRpb25zID0gdGhpcy5l
bnZpcm9ubWVudC5maWx0ZXJOdWxsVHlwZUFubm90YXRpb25zKHRoaXMudHlwZUFubm90YXRpb25z
KTsKLQkJCVJlZmVyZW5jZUJpbmRpbmcgbmV3RW5jbG9zaW5nID0gbnVsbDsKLQkJCWlmICh0aGlz
LmVuY2xvc2luZ1R5cGUoKSAhPSBudWxsKQotCQkJCW5ld0VuY2xvc2luZyA9IChSZWZlcmVuY2VC
aW5kaW5nKXRoaXMuZW5jbG9zaW5nVHlwZSgpLnVuYW5ub3RhdGVkKHJlbW92ZU9ubHlOdWxsQW5u
b3RhdGlvbnMpOwotCQkJcmV0dXJuIHRoaXMuZW52aXJvbm1lbnQuY3JlYXRlUmF3VHlwZSh1bmFu
bm90YXRlZEdlbmVyaWNUeXBlLCBuZXdFbmNsb3NpbmcsIG5ld0Fubm90YXRpb25zKTsKKwkJCXJl
dHVybiB0aGlzLmVudmlyb25tZW50LmNyZWF0ZVJhd1R5cGUodW5hbm5vdGF0ZWRHZW5lcmljVHlw
ZSwgdGhpcy5lbmNsb3NpbmdUeXBlKCksIG5ld0Fubm90YXRpb25zKTsKIAkJfQogCQlyZXR1cm4g
dGhpcy5lbnZpcm9ubWVudC5nZXRVbmFubm90YXRlZFR5cGUodGhpcyk7CiAJfQ==
</data>

          </attachment>
      

    </bug>

</bugzilla>