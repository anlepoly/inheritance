<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>433503</bug_id>
          
          <creation_ts>2014-04-25 06:36:00 -0400</creation_ts>
          <short_desc>Use OrderedTestSuite instead of listing all test methods again</short_desc>
          <delta_ts>2014-08-05 04:55:44 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>4.5 M1</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Markus Keller">markus_keller</reporter>
          <assigned_to name="Markus Keller">markus_keller</assigned_to>
          <cc>david_williams</cc>
    
    <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>saammana</cc>
    
    <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2392998</commentid>
    <comment_count>0</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-04-25 06:36:12 -0400</bug_when>
    <thetext>Some jdt.core tests use an error-prone method to guarantee test execution order. E.g. JavaSearchBugsTests and JavaSearchBugs8Tests list all test methods again in the suite() method implementation.

1. This hack should not be applied without an understanding why the tests fail when they are executed in random order.

2. Instead of listing all test methods again, you should at least use a utility like
    return new OrderedTestSuite(JavaSearchBugs8Tests.class);
or just
    return buildModelTestSuite(JavaSearchBugs8Tests.class, ALPHABETICAL_SORT)
without the &quot;if (TESTS_PREFIX != null || ...&quot; before.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2416779</commentid>
    <comment_count>1</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-06-13 11:37:49 -0400</bug_when>
    <thetext>(Both commits are in new &quot;marsTemp&quot; branches that will be merged into master before master is reopened.)

Added OrderedTestSuite#getBytecodeOrderedTestNames(Class) to allow integration in JDT Core testing infrastructure:
http://git.eclipse.org/c/platform/eclipse.platform.releng.git/commit/?id=ead2732d6361c6fe44ba8b9e041d70d59096a2ce


Replaced all &quot;TestSuite suite = new Suite(...); suite.addTest(new ...); ...&quot; sermons in JDT Core tests with

public static Test suite() {
	return buildModelTestSuite(xxxTests.class, BYTECODE_DECLARATION_ORDER);
}

At least some of these should not be necessary (tests should be runnable in any order), but that can be fixed one-by-one.

As an added benefit, you can now also launch with VM argument &quot;-Dordering=5&quot; to use bytecode ordering for ALL tests that use org.eclipse.jdt.core.tests.junit.extension.TestCase#buildTestsList(Class)

Fixed with http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=e50fba8828c054207eb4f1a56a83880c9a1ebbc8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2435535</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-08-05 04:55:44 -0400</bug_when>
    <thetext>Verified for 4.5 M1 with build I20140804-2000</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>