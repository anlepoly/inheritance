<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>395886</bug_id>
          
          <creation_ts>2012-12-06 00:24:00 -0500</creation_ts>
          <short_desc>[1.8][DOM/AST] Withdraw annotations property from Name nodes.</short_desc>
          <delta_ts>2013-10-27 16:51:59 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>287648</blocked>
    
    <blocked>391847</blocked>
    
    <blocked>397421</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="54809"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2191210</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-12-06 00:24:18 -0500</bug_when>
    <thetext>As part of the fix for bug 391890, ANNOTATIONS_PROPERTY was added to Name nodes.
These need to be removed since the specification has changed to disallow
constructs of the form:

    @Marker java.util.List

The proper way to annotate these is to say:

    java.util. @Marker List

Thus the presence of annotations before a certain segment of a qualified type
signals that what follows is a type and cannot be a name. Very similar to how
the presence of type parameters signals a type.

See also:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c4
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c7
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c33
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c34
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c37
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c39
https://bugs.eclipse.org/bugs/show_bug.cgi?id=391847#c46


When we converty a QualifiedTypeReference or its subtypes, we should
convert everything before the first type annotation seen as a SimpleType of
QualifiedName/SimpleName and convert everything further as types.

Compare how type parameters are handled in conversion of PQTR.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2191347</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2012-12-06 09:33:33 -0500</bug_when>
    <thetext>Out of curiosity:

(In reply to comment #0)
&gt; These need to be removed since the specification has changed to disallow
&gt; constructs of the form:
&gt; 
&gt;     @Marker java.util.List
&gt; 
&gt; The proper way to annotate these is to say:
&gt; 
&gt;     java.util. @Marker List

Has the compiler been updated for this spec change?
Which bug should I read/follow for that?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2191700</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-12-06 23:40:22 -0500</bug_when>
    <thetext>(In reply to comment #1)
&gt; Out of curiosity:
&gt; 
&gt; (In reply to comment #0)
&gt; &gt; These need to be removed since the specification has changed to disallow
&gt; &gt; constructs of the form:
&gt; &gt; 
&gt; &gt;     @Marker java.util.List
&gt; &gt; 
&gt; &gt; The proper way to annotate these is to say:
&gt; &gt; 
&gt; &gt;     java.util. @Marker List
&gt; 
&gt; Has the compiler been updated for this spec change?
&gt; Which bug should I read/follow for that?

Please see https://bugs.eclipse.org/bugs/show_bug.cgi?id=394356</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2197993</commentid>
    <comment_count>3</comment_count>
      <attachid>225127</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-02 01:41:27 -0500</bug_when>
    <thetext>Created attachment 225127
Proposed Patch - WIP

Non-ASTRewrite Part of the patch - WIP

TODO:
- create another dependent bug for ASTRewrite Part.
- Investigate if more test cases are required.
- Look for more optimized/reduced code additions in terms of tests and implementation.
- Eyeball patch for adherence to code conventions.

Note: 
test0012 of TypeAnnotationsConverterTest (RunDOMTests) is expected to fail until the fix of Bug 392132 is applied as this is a case of intersection of these two bugs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2198849</commentid>
    <comment_count>4</comment_count>
      <attachid>225202</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-04 03:43:29 -0500</bug_when>
    <thetext>Created attachment 225202
Proposed Fix

- ANNOTATIONS_PROPERTY has been kept for QualifiedName and SimpleName for the sole reason of not breaking the Rewrite part. A separate bug (bug 397421) has been filed for the ASTRewrite part which would take care of the same. Note that all the references of these from the non-ASTRewrite part has been removed in the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2199404</commentid>
    <comment_count>5</comment_count>
      <attachid>225266</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-07 00:48:25 -0500</bug_when>
    <thetext>Created attachment 225266
Proposed Patch

Additional to the code in previous patch, removed the ANNOTATIONS_PROPERTY and associated references in ASTRewrite files as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2200986</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-01-10 02:09:31 -0500</bug_when>
    <thetext>Name.java:

(1) The roll back is very partial and leaves many stale things:
(a) For example the javadoc still says: &quot;For JLS8, the Name may be preceded by optional type annotations. ...&quot; which is incorrect. 
(b) BASE_NAME_NODE_SIZE is not bumped down.

I think the right thing
to do is to restore from commit id bd6803034b95b7e0dd8c0cbcd0aead0a5c726f65

(2) Likewise in QualifiedName: (a) Incorrect statements about JLS8 exist
and QualifiedName has no child list properties anymore so the method
internalGetChildListProperty does not make sense.

The right thing to do is to restore from 34ffedac0864f9670be9b90418a519412edd8a4d

(3) Likewise for SimpleName: There are various stale things still left in.
The right thing to do is to restore from 699cc351076b7c5897a886d674772d111233f0a3

(4) ASTRewriteAnalyzer: org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteAnalyzer.visit(SimpleName)
still references ANNOTATIONS_PROPERTY.

(5) ASTRewriteFlattener: org.eclipse.jdt.internal.core.dom.rewrite.ASTRewriteFlattener.visit(SimpleName)
still references ANNOTATIONS_PROPERTY.

(6) ASTMatcher: org.eclipse.jdt.core.dom.ASTMatcher.match(QualifiedName, Object)
What is the difference between the different case arms of the switch ? 

(7) org.eclipse.jdt.core.dom.ASTMatcher.match(SimpleName, Object) still
references annotations()

(8) ASTConverter: The method org.eclipse.jdt.core.dom.ASTConverter.annotateName(Name, Annotation[]) is
completely redundant now since Names cannot be annotated anymore. All call
sites need to be inspected and removed/modified.

(9) I&apos;ll review the tests and ASTConverter changes deeper after these are
addressed and a fresh patch is posted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2201788</commentid>
    <comment_count>7</comment_count>
      <attachid>225506</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-11 09:53:11 -0500</bug_when>
    <thetext>Created attachment 225506
Proposed Patch

- Reworked as per listed commit diffs.
- References to bug number kept intentionally at a couple of places (only) at ASTCoverter and in test files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2204624</commentid>
    <comment_count>8</comment_count>
      <attachid>225804</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-18 03:56:51 -0500</bug_when>
    <thetext>Created attachment 225804
Proposed Patch

Made patch current to the latest source and addressed the comments so far.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2205303</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-01-21 00:50:27 -0500</bug_when>
    <thetext>First batch of changes released via: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=b7bb9d2950572af77f85c2c708c3816367817930</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2206839</commentid>
    <comment_count>10</comment_count>
      <attachid>226013</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-23 21:43:04 -0500</bug_when>
    <thetext>Created attachment 226013
Proposed Patch - part 2

Completes the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2206853</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-01-24 00:28:20 -0500</bug_when>
    <thetext>(1) DBR: the change in getTypeArguments() is not inline with the method
name at all. Fortunately, since this method is called at only one place
it can be readily renamed into getTypeCount() which is a better name even
earlier.

(2) ASTConverter18Test: Has lots of irrelevant changes. Please eliminate
them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2206864</commentid>
    <comment_count>12</comment_count>
      <attachid>226019</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-24 01:19:42 -0500</bug_when>
    <thetext>Created attachment 226019
Proposed Patch - Part 2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2206865</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-01-24 01:24:52 -0500</bug_when>
    <thetext>Fix and tests released via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=c0d8ddbb4b72e166c7dc81eb807bc47fd1beaa74

Thanks Manoj.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2323743</commentid>
    <comment_count>14</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-10-27 16:51:59 -0400</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #13)
&gt; Fix and tests released via
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
&gt; ?h=BETA_JAVA8&amp;id=c0d8ddbb4b72e166c7dc81eb807bc47fd1beaa74
&gt; 
&gt; Thanks Manoj.

The change in NaiveASTFlattener was wrong. SimpleType doesn&apos;t support QualifiedName as name in JLS8, and it shouldn&apos;t look like it would be supported. Reverted this change with http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=0d3451e9a7c942ed5f2531f8cbfba408096982ef</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225127</attachid>
            <date>2013-01-02 01:41:00 -0500</date>
            <delta_ts>2013-01-04 03:43:29 -0500</delta_ts>
            <desc>Proposed Patch - WIP</desc>
            <filename>Bug-395886--18DOM-AST-Withdraw-annotations-property-from-Name.patch.WIP</filename>
            <type>text/plain</type>
            <size>66540</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjA5MTE5MGUKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsOTczIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBz
ZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1
dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdh
bC9lcGwtdjEwLmh0bWwKKyAqCisgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVh
cmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21t
dW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5k
IGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxl
IHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KKyAqIAorICogQ29udHJpYnV0b3Jz
OgorICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlv
bgorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKiovCitwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLmRvbTsKKworCitpbXBvcnQgamF2YS51dGlsLkxpc3Q7CisKK2ltcG9ydCBqdW5pdC5m
cmFtZXdvcmsuVGVzdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29tcGlsYXRpb25V
bml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2VwdGlvbjsKK2lt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uKjsKKworcHVibGljIGNsYXNzIEFTVENvbnZl
cnRlcjE4VGVzdCBleHRlbmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25V
bml0IHdvcmtpbmdDb3B5OworCQorCXB1YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0aHJvd3MgRXhj
ZXB0aW9uIHsKKwkJc3VwZXIuc2V0VXBTdWl0ZSgpOworCQl0aGlzLmFzdCA9IEFTVC5uZXdBU1Qo
Z2V0SkxTMygpKTsKKwl9CisKKwlwdWJsaWMgQVNUQ29udmVydGVyMThUZXN0KFN0cmluZyBuYW1l
KSB7CisJCXN1cGVyKG5hbWUpOworCX0KKworCXN0YXRpYyB7CisvLwkJVEVTVFNfTlVNQkVSUyA9
IG5ldyBpbnRbXSB7IDM1MyB9OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMzI1LCAt
MSB9OworLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsidGVzdEJ1ZzM1MzQ3NCJ9Owor
CX0KKwlwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7CisJCXJldHVybiBidWlsZE1vZGVsVGVz
dFN1aXRlKEFTVENvbnZlcnRlcjE4VGVzdC5jbGFzcyk7CisJfQorCisJcHJvdGVjdGVkIHZvaWQg
dGVhckRvd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJc3VwZXIudGVhckRvd24oKTsKKwkJaWYg
KHRoaXMud29ya2luZ0NvcHkgIT0gbnVsbCkgeworCQkJdGhpcy53b3JraW5nQ29weS5kaXNjYXJk
V29ya2luZ0NvcHkoKTsKKwkJCXRoaXMud29ya2luZ0NvcHkgPSBudWxsOworCQl9CisJfQorCisJ
LyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5
NTg4NgorCSAqIHRlc3RzIGFubm90YXRpb25zIG9uIFFUUiBpbiBtdWx0aXBsZSBzY2VuYXJpb3Mg
b2Ygb2NjdXJyZW5jZS4KKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1
YmxpYyB2b2lkIHRlc3QwMDEoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53
b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDEvWC5q
YXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gCisJCQkJInBhY2th
Z2UgdGVzdDAwMTtcbiIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2
b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xuIiArCisJCQkJIgkJT3V0ZXIgb3V0ZXIgPSBuZXcg
T3V0ZXIoKTtcbiIgKwkJCisJCQkJIgkJT2JqZWN0IG15T2JqZWN0ID0gbmV3IE9iamVjdCgpO1xu
IisKKwkJCQkiCQlTdHJpbmcgbXlTdHJpbmc7XG4iKworCQkJCSIJCW15U3RyaW5nID0gKGphdmEu
bGFuZy5ATWFya2VyIFN0cmluZykgbXlPYmplY3Q7XG4iKworCQkJCSIJCU91dGVyLklubmVyIGZp
cnN0ID0gb3V0ZXIubmV3IElubmVyKCk7XG4iICsKKwkJCQkiCQlPdXRlci4gQE1hcmtlcjIgSW5u
ZXIgc2Vjb25kID0gb3V0ZXIubmV3IElubmVyKCkgO1xuIiArCisJCQkJIgkJT3V0ZXIuSW5uZXIu
IEBNYXJrZXIxIERlZXBlciBkZWVwZXIgPSBzZWNvbmQubmV3IERlZXBlcigpO1xuIiArCisJCQkJ
IgkJT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyIGRlZXBlcjIgPSAgc2Vjb25k
Lm5ldyBEZWVwZXIoKTtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFz
cyBPdXRlciB7XG4iICsKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iICsKKwkJCQkiCQlw
dWJsaWMgY2xhc3MgRGVlcGVyIHtcbiIgKworCQkJCSIJCX1cbiIgKworCQkJCSIJfVxuIiArCisJ
CQkJIn1cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlw
ZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlciB7fVxuIiArCisJCQkJIkBU
YXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJ
CQkJIkBpbnRlcmZhY2UgTWFya2VyMSB7fVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5h
bm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFy
a2VyMiB7fVxuIgkJCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25V
bml0KSBidWlsZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJ
TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRpb24gPSAoTWV0aG9kRGVjbGFyYXRpb24p
IGdldEFTVE5vZGUoY3UsIDAsIDApOworCQlMaXN0IHN0YXRlbWVudHMgPSBtZXRob2REZWNsYXJh
dGlvbi5nZXRCb2R5KCkuc3RhdGVtZW50cygpOworCQlpbnQgc0NvdW50ID0gMzsgCisKKwkJRXhw
cmVzc2lvblN0YXRlbWVudCBleHByZXNzaW9uU3RhdGVtZW50ID0gKEV4cHJlc3Npb25TdGF0ZW1l
bnQpIHN0YXRlbWVudHMuZ2V0KHNDb3VudCsrKTsKKwkJQXNzaWdubWVudCBhc3NpZ25tZW50ID0g
KEFzc2lnbm1lbnQpIGV4cHJlc3Npb25TdGF0ZW1lbnQuZ2V0RXhwcmVzc2lvbigpOworCQlhc3Nl
cnROb3ROdWxsKGFzc2lnbm1lbnQpOworCQlDYXN0RXhwcmVzc2lvbiBjYXN0RXhwcmVzc2lvbiA9
IChDYXN0RXhwcmVzc2lvbilhc3NpZ25tZW50LmdldFJpZ2h0SGFuZFNpZGUoKTsKKwkJYXNzZXJ0
Tm90TnVsbChjYXN0RXhwcmVzc2lvbik7CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSBjYXN0RXhwcmVzc2lvbi5nZXRUeXBlKCk7CisJCWFzc2VydE5vdE51
bGwocXVhbGlmaWVkVHlwZSk7CisJCWFzc2VydEVxdWFscygiamF2YS5sYW5nLkBNYXJrZXIgU3Ry
aW5nIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBlID0g
cXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBl
LmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUp
IHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiamF2YS5sYW5nIiwgc2ltcGxlVHlwZS50
b1N0cmluZygpKTsKKwkJTGlzdCBhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlv
bnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlciIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJU2ltcGxl
TmFtZSBzaW1wbGVOYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFs
cygiU3RyaW5nIiwgc2ltcGxlTmFtZS50b1N0cmluZygpKTsKKwkJCisJCVZhcmlhYmxlRGVjbGFy
YXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURl
Y2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCVR5cGUgdHlw
ZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVl
KHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOwor
CQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCQorCQl2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0KHNDb3Vu
dCsrKTsKKwkJdHlwZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOwor
CQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0g
KFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydE5vdE51bGwocXVhbGlmaWVkVHlwZSk7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjIgSW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3Ry
aW5nKCkpOwkJCisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigp
OworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVU
eXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIi
LCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllclR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFu
bm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgc2ltcGxlTmFtZS50b1N0cmlu
ZygpKTsKKworCQl2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFy
YXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0KHNDb3VudCsrKTsKKwkJdHlwZSA9IHZhcmlh
YmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNR
dWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7
CisJCWFzc2VydE5vdE51bGwocXVhbGlmaWVkVHlwZSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIu
SW5uZXIuQE1hcmtlcjEgRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsJCQorCQlx
dWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1
ZShxdWFsaWZpZXJUeXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVU
eXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyIiwgc2ltcGxl
VHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZXJUeXBlLmFubm90YXRp
b25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlhbm5vdGF0
aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9u
cy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCXNpbXBsZU5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5h
bWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBzaW1wbGVOYW1lLnRvU3RyaW5nKCkpOwor
CisJCXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0
YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmll
ZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNz
ZXJ0Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2Vy
MSBJbm5lci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOwkJCisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFu
bm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIHNpbXBsZU5hbWUudG9TdHJp
bmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwor
CQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZp
ZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJP
dXRlci5ATWFya2VyMSBJbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRp
b25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0
TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgc2ltcGxlTmFtZS50b1N0cmluZygpKTsK
KwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2Vy
dFRydWUocXVhbGlmaWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2lt
cGxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5
cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5hbm5vdGF0aW9u
cygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisKKwkvKioK
KwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2
CisJICogdGVzdHMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIHR5cGUgYW5ub3RhdGlvbnMgb24gYSBw
b3NzaWJsZSBKQVZBIDcgYW5kIDggcGxhY2UuCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRp
b24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAyKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlv
biB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3Ny
Yy90ZXN0MDAyL1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9
IAorCQkJCSJwYWNrYWdlIHRlc3QwMDI7XG4iICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5v
dGF0aW9uLlRhcmdldDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCXB1
YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiIgKworCQkJCSIJCUBNYXJr
ZXIgT3V0ZXIuSW5uZXIgZmlyc3RbXSA9IG5ldyBPdXRlci5Jbm5lclsxXTtcbiIgKworCQkJCSIJ
fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBPdXRlciB7XG4iICsKKwkJCQkiCXB1Ymxp
YyBjbGFzcyBJbm5lciB7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiQFRh
cmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJ
CQkiQGludGVyZmFjZSBNYXJrZXIge31cbiIgCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3Ug
PSAoQ29tcGlsYXRpb25Vbml0KSBidWlsZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndv
cmtpbmdDb3B5KTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRpb24gPSAoTWV0
aG9kRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIDAsIDApOworCQlMaXN0IHN0YXRlbWVudHMg
PSBtZXRob2REZWNsYXJhdGlvbi5nZXRCb2R5KCkuc3RhdGVtZW50cygpOworCQlpbnQgc0NvdW50
ID0gMDsgCisKKwkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMu
Z2V0KHNDb3VudCk7CisJCUxpc3QgbW9kaWZpZXJzID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudC5tb2RpZmllcnMoKTsKKwkJYXNzZXJ0VHJ1ZShtb2RpZmllcnMuc2l6ZSgpID09IDEpOwor
CQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbiltb2RpZmllcnMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlUeXBl
IHR5cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNp
bXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBl
LnRvU3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9u
cygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisKKwkvKioK
KwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2
CisJICogdGVzdHMgUVRSIHdpdGggYW5ub3RhdGlvbnMKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4
Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDMoKSB0aHJvd3MgSmF2YU1vZGVsRXhj
ZXB0aW9uIHsKKwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVy
MTgvc3JjL3Rlc3QwMDMvWC5qYXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRl
bnRzID0gCisJCQkJInBhY2thZ2UgdGVzdDAwMzsiICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5h
bm5vdGF0aW9uLlRhcmdldDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9u
ZTwvKnN0YXJ0Ki9ATWFya2VyMSBPdXRlcjxJbnRlZ2VyPi4gQE1hcmtlcjIgSW5uZXI8RG91Ymxl
PltdLyplbmQqLz4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImludGVyZmFjZSBPbmU8VD4g
e31cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXI8VD4ge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNz
IElubmVyPFM+IHt9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBN
YXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iIAorCQkJ
CTsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoCisJ
CQkJY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsMCk7CisJCUFy
cmF5VHlwZSB0eXBlID0gKEFycmF5VHlwZSkgKChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlZGVjbGFy
YXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKSkudHlwZUFyZ3VtZW50cygpLmdldCgw
KTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYW5ub3RhdGlvbiIsIHR5cGUpOworCQlJVHlwZUJpbmRp
bmcgYmluZGluZyA9IHR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8g
YmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1l
IiwgInRlc3QwMDMuT3V0ZXI8amF2YS5sYW5nLkludGVnZXI+LklubmVyPGphdmEubGFuZy5Eb3Vi
bGU+W10iLCBiaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCVR5cGUgY29tcG9uZW50VHlw
ZSA9IHR5cGUuZ2V0Q29tcG9uZW50VHlwZSgpOworCQliaW5kaW5nID0gY29tcG9uZW50VHlwZS5y
ZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7
CisJCWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMy5PdXRlcjxq
YXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLCBiaW5kaW5nLmdldFF1
YWxpZmllZE5hbWUoKSk7CisJCWFzc2VydFRydWUoIk5vdCBwYXJhbWV0ZXJpemVkIiwgY29tcG9u
ZW50VHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJh
bWV0ZXJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgY29tcG9uZW50VHlwZTsKKwkJVHlw
ZSB0eXBlMiA9IHBhcmFtZXRlcml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90
IHF1YWxpZmllZCIsIHR5cGUyLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJUXVhbGlmaWVkVHlwZSBx
dWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGUyOworCQliaW5kaW5nID0gcXVhbGlm
aWVkVHlwZS5yZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwg
YmluZGluZyk7CisJCWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAw
My5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLCBiaW5k
aW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCVR5cGUgcXVhbGlmaWVyID0gcXVhbGlmaWVkVHlw
ZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBxdWFs
aWZpZXIuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJYmluZGluZyA9IHF1YWxpZmllci5yZXNv
bHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7CisJ
CWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMy5PdXRlcjxqYXZh
LmxhbmcuSW50ZWdlcj4iLCBiaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCXBhcmFtZXRl
cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXI7CisJCXR5cGUyID0gcGFy
YW1ldGVyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKCJOb3Qgc2ltcGxlIHR5cGUi
LCB0eXBlMi5pc1NpbXBsZVR5cGUoKSk7CisJCWJpbmRpbmcgPSB0eXBlMi5yZXNvbHZlQmluZGlu
ZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7CisJCWFzc2VydEVx
dWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMy5PdXRlcjxqYXZhLmxhbmcuSW50
ZWdlcj4iLCBiaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJfQorCQorCS8qKgorCSAqIGh0
dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKKwkgKiB0
ZXN0cyBRVFIgd2l0aCBhbm5vdGF0aW9ucworCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9u
CisJICovCisJcHVibGljIHZvaWQgdGVzdDAwNCgpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24g
eworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMv
dGVzdDAwNC9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAK
KwkJCQkicGFja2FnZSB0ZXN0MDA0OyIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgT25lPCBPdXRl
ci5Jbm5lciA+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBZIGltcGxlbWVudHMg
T25lPCBPdXRlci4gQE1hcmtlcjEgSW5uZXIgPiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQki
Y2xhc3MgWiBpbXBsZW1lbnRzIE9uZTwgQE1hcmtlcjEgT3V0ZXIuSW5uZXIgPiB7XG4iICsgCisJ
CQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgVyBpbXBsZW1lbnRzIE9uZTwgQE1hcmtlcjEgT3V0ZXIu
IEBNYXJrZXIyIElubmVyID4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImludGVyZmFjZSBP
bmU8VD4ge31cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIge1xuIiArIAorCQkJCSIJcHVibGljIGNs
YXNzIElubmVyIHt9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBN
YXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iIAorCQkJ
CTsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoCisJ
CQkJY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWludCB0Q291bnQgPSAwOwor
CQkKKwkJLy8gY2FzZSAxIC0gbm8gYW5ub3RhdGlvbnMgT3V0ZXIuSW5uZXIKKwkJVHlwZURlY2xh
cmF0aW9uIHR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwg
dENvdW50KyspOworCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgw
KTsKKwkJTGlzdCB0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRz
KCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCVR5cGUgdHlw
ZSA9IChUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1w
bGVUeXBlKCkpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJCisJCS8vIGNhc2UgMiAtIFFUUiB3aXRoIG9uZSBhbm5vdGF0aW9uIE91dGVyLkBNYXJr
ZXIxIElubmVyCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVh
bHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQl0eXBlID0gKFR5cGUpdHlwZUFyZ3VtZW50
cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQlRdWFs
aWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlM
aXN0IGFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRU
cnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0g
KEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2Vy
MSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1Np
bXBsZVR5cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFs
aWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygp
KTsKKwkJCisJCS8vIGNhc2UgMyAtIFFUUiB3aXRoIG9uZSBhbm5vdGF0aW9uIGF0IHRoZSBiZWdp
bm5pbmcgQE1hcmtlcjEgT3V0ZXIuSW5uZXIKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNs
YXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAo
UGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCku
Z2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRz
KCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAo
VHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVk
VHlwZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5Jbm5lciIsIHR5cGUudG9T
dHJpbmcoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNz
ZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOwor
CQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1
ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1wbGVU
eXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFz
c2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlh
bm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5v
dGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3Rh
dGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0
cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNCAtIFFUUiB3aXRoIGFubm90YXRpb25zIGF0IGJvdGgg
dGhlIHR5cGVzIEBNYXJrZXIxIE91dGVyLkBNYXJrZXIyIElubmVyCisJCXR5cGVkZWNsYXJhdGlv
biA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0
cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRl
cmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkp
OworCQl0eXBlID0gKFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIuQE1h
cmtlcjIgSW5uZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxp
ZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBxdWFsaWZpZWRUeXBlLmdl
dE5hbWUoKS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90
YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5v
dGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxz
KCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUu
aXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5
cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5n
KCkpOworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0
VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlv
bikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3Rh
dGlvbi50b1N0cmluZygpKTsKKworCX0KKwkKKwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBz
ZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJICogdGVzdHMgUFFUUiB3aXRoIGFu
bm90YXRpb25zIHBhcnQKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1
YmxpYyB2b2lkIHRlc3QwMDUoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53
b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDUvWC5q
YXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gCisJCQkJInBhY2th
Z2UgdGVzdDAwNTsiICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtc
biIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9uZTxPdXRlci4gIElubmVyLkRl
ZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWDEgaW1wbGVt
ZW50cyBPbmU8T3V0ZXIuIEBNYXJrZXIxIElubmVyLkRlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJ
CQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWDIgaW1wbGVtZW50cyBPbmU8T3V0ZXIuIEBNYXJrZXIx
IElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJ
CQkiY2xhc3MgWDMgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIuIEBNYXJrZXIyIElubmVy
LiBEZWVwZXI8RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkgaW1w
bGVtZW50cyBPbmU8T3V0ZXIxLiBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIg
KyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBZMSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElu
bmVyPEludGVnZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4i
ICsgCisJCQkJImNsYXNzIFkyIGltcGxlbWVudHMgT25lPE91dGVyMS4gQE1hcmtlcjEgSW5uZXI8
SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJ
ImNsYXNzIFkzIGltcGxlbWVudHMgT25lPEBNYXJrZXIxIE91dGVyMS4gSW5uZXI8SW50ZWdlcj4u
IERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFk0
IGltcGxlbWVudHMgT25lPEBNYXJrZXIxIE91dGVyMS4gQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4u
IERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFog
aW1wbGVtZW50cyBPbmU8T3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlcjxEb3VibGU+PiB7XG4i
ICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWjEgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEg
T3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIg
KyAKKwkJCQkiY2xhc3MgWjIgaW1wbGVtZW50cyBPbmU8T3V0ZXIyPEludGVnZXI+LiBATWFya2Vy
MSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCQkJ
CQorCQkJCSJjbGFzcyBXIGltcGxlbWVudHMgT25lPE91dGVyMzxEb3VibGU+LiBATWFya2VyMSBA
TWFya2VyMiBJbm5lcjxJbnRlZ2VyLCBDaGFyYWN0ZXI+LiBEZWVwZXI8RG91YmxlPj4ge1xuIiAr
IAorCQkJCSJ9XG4iICsgCQkJCQorCQkJCSJpbnRlcmZhY2UgT25lPFQ+IHt9XG4iICsgCisJCQkJ
ImNsYXNzIE91dGVyIHtcbiIgKyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iICsKKwkJ
CQkiICAgICAgIHB1YmxpYyBjbGFzcyBEZWVwZXI8Uz4ge1xuIiArCisJCQkJIiAgICAgICB9XG4i
KworCQkJCSIgICB9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIxIHtcbiIg
KyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lcjxUPiB7XG4iICsKKwkJCQkiICAgICAgIHB1Ymxp
YyBjbGFzcyBEZWVwZXI8Uz4ge1xuIiArCisJCQkJIiAgICAgICB9XG4iKworCQkJCSIgICB9XG4i
ICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIyIDxUPiB7XG4iICsgCisJCQkJIglw
dWJsaWMgY2xhc3MgSW5uZXIge1xuIiArCisJCQkJIiAgICAgICBwdWJsaWMgY2xhc3MgRGVlcGVy
PFM+IHt9XG4iICsKKwkJCQkiICAgfVxuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIE91
dGVyMyA8VD4ge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVyPEssIFY+IHtcbiIgKwor
CQkJCSIgICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7fVxuIiArCisJCQkJIiAgIH1cbiIg
KyAKKwkJCQkifVxuIiArIAorCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVt
ZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlcjEge31cbiIgKwor
CQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlc
biIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlcjIge31cbiIgCisJCQkJOworCQlDb21waWxhdGlv
blVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBidWlsZEFTVCgKKwkJCQljb250ZW50cywKKwkJ
CQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJaW50IHRDb3VudCA9IDA7CisJCQorCQkvLyBjYXNlIDE6
IHZhbmlsbGEgY2FzZSB3aXRob3V0IGFubm90YXRpb25zIGFuZCB3aXRoIHNpbmdsZSB0eXBlQXJn
dW1lbnQgCisJCS8vIE91dGVyLklubmVyLkRlZXBlcjxEb3VibGU+CisJCVR5cGVEZWNsYXJhdGlv
biB0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3Vu
dCsrKTsKKwkJUGFyYW1ldGVyaXplZFR5cGUgcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJp
emVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJ
CUxpc3QgdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOwor
CQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRU
eXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIk91dGVyLklubmVyLkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0
cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50
cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQlUeXBlIHR5
cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91Ymxl
IiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgp
OworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlTaW1wbGVUeXBlIHNpbXBs
ZVR5cGUgPSAoU2ltcGxlVHlwZSl0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkRl
ZXBlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCU5hbWUgbmFtZSA9IHNpbXBsZVR5cGUu
Z2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlRdWFs
aWZpZWROYW1lIHF1YWxpZmllZE5hbWUgPSAoUXVhbGlmaWVkTmFtZSkgbmFtZTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlci5Jbm5lci5EZWVwZXIiLCBxdWFsaWZpZWROYW1lLnRvU3RyaW5nKCkpOwor
CQkKKwkJLy8gY2FzZSAyIC0gT25lIGFubm90YXRpb24gYWZ0ZXIgdGhlIGZpcnN0IGNsYXNzIAor
CQkvLyBPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlcklu
dGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50
cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERv
dWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0g
cGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3Vt
ZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBh
cmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRU
eXBlKCkpOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkg
dHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lci5EZWVwZXIiLCBxdWFs
aWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7
CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlMaXN0IGFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5
cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmll
ZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5
cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCBxdWFsaWZpZXJUeXBl
LnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllclR5cGUuYW5ub3RhdGlvbnMo
KTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCUFubm90YXRpb24g
YW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlm
aWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5n
KCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKXR5cGU7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQkKKwkJ
Ly8gY2FzZSAzIC0gSW5uZXIgdHlwZXMgYW5ub3RhdGVkIHdpdGggb3V0ZXIgbm90IGFubm90YXRl
ZCB3aXRoIGxhc3QgdHlwZSBhcmcgCisJCS8vIE91dGVyLiBATWFya2VyMSBJbm5lci5ATWFya2Vy
MiBEZWVwZXI8RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdl
dEFTVE5vZGUoY3UsdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6
ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJ
dHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3Nl
cnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyLkBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJp
emVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEp
OworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdl
dFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlm
aWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBN
YXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7
CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVw
ZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5v
dGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5u
b3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0g
IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgID0gKFF1YWxpZmllZFR5cGUp
IHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCBx
dWFsaWZpZXJUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllclR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJ
CWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmlu
ZygpKTsKKwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRy
dWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSl0eXBl
OworCQlhc3NlcnRFcXVhbHMoIk91dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsJCQorCQkK
KwkJLy8gY2FzZSA0IC0gb25lIGFubm90YXRpb24gb24gdGhlIG91dGVybW9zdCwgb25lIGluIG1p
ZGRsZSBhbmQgb25lIHR5cGVhcmcgaW4gaW5uZXJtb3N0CisgCQkvLyBATWFya2VyMSBPdXRlci4g
QE1hcmtlcjIgSW5uZXIuIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIuRGVlcGVyPERvdWJs
ZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50
cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFt
ZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBl
KCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIuRGVlcGVyIiwgcXVhbGlmaWVkVHlw
ZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3Nl
cnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFs
aWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlw
ZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVk
VHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVhbGlmaWVkVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lciIsIHF1YWxp
ZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5hbm5v
dGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5u
b3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVk
VHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkp
OworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKXR5cGU7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOwkJ
CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9u
LnRvU3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSA1IC0gd2l0aG91dCBhbm5vdGF0aW9ucywgYnV0
IHdpdGggdHlwZWFyZ3MgYXQgc2Vjb25kIGFuZCB0aGlyZCB0eXBlcworCQkvLyBPdXRlcjEuIElu
bmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVE
ZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9
IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMo
KS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVu
dHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyPERvdWJsZT4iLCBwYXJh
bWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVk
VHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkg
PT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVx
dWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5
cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlx
dWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0
ZXIxLklubmVyPEludGVnZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJ
CW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIi
LG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0
aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlm
aWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJCisJCWFzc2VydFRydWUo
cXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBl
ID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyMS5Jbm5lcjxJbnRlZ2VyPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5
cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJ
CW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShuYW1lLmlzUXVhbGlm
aWVkTmFtZSgpKTsKKwkJcXVhbGlmaWVkTmFtZSA9IChRdWFsaWZpZWROYW1lKSBuYW1lOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lciIsIHF1YWxpZmllZE5hbWUudG9TdHJpbmcoKSk7CisJ
CQorCQkvLyBjYXNlIDYgLSBBbm5vdCBpbiBiZXR3ZWVuIHR3byBQUVJUIHdpdGggb3V0ZXJtb3N0
IG5laXRoZXIgYW5ub3RhdGVkIG5vciBoYXZpbmcgdHlwZWFyZ3MKKwkJLy8gT3V0ZXIxLiBJbm5l
cjxJbnRlZ2VyPi4gQE1hcmtlcjEgRGVlcGVyPERvdWJsZT4gCisJCXR5cGVkZWNsYXJhdGlvbiA9
IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXpl
ZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFj
ZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBl
QXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJ
CXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+LkBNYXJrZXIxIERlZXBl
cjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50
cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVB
cmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0
KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUg
PSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlm
aWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5ATWFya2VyMSBEZWVwZXIiLCBxdWFs
aWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7
CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9u
cyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9u
cy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMu
Z2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygp
KTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJCisJ
CWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJh
bWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3Nl
cnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlw
ZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlh
c3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpIHR5cGU7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShu
YW1lLmlzUXVhbGlmaWVkTmFtZSgpKTsKKwkJcXVhbGlmaWVkTmFtZSA9IChRdWFsaWZpZWROYW1l
KSBuYW1lOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lciIsIHF1YWxpZmllZE5hbWUudG9T
dHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDcgLSBPdXRlcm1vc3Qgc3RpbGwgZW1wdHkgKG5vIGFu
bm90YXRpb25zLCBubyB0eXBlIGFyZ3MpLCBmb2xsb3dlZCBieSBhbm5vdGF0aW9uLCBhbmQgdGhl
biB0eXBlYXJncworCQkvLyBPdXRlcjEuIEBNYXJrZXIxIElubmVyPEludGVnZXI+LiBEZWVwZXI8
RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUo
Y3UsdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0
eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3Vt
ZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMo
MSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRl
cml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5A
TWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUu
dG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlw
ZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUi
LCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuQE1hcmtlcjEg
SW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFt
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFt
ZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25z
KCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJU
eXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkKKwkJYXNzZXJ0VHJ1ZShxdWFs
aWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAo
UGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIx
LkBNYXJrZXIxIElubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5
cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBlLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRy
dWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVk
VHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuQE1hcmtlcjEgSW5uZXIiLCBxdWFs
aWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFu
bm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVh
bHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmll
ZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlh
c3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmll
ZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7
CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUu
Z2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRF
cXVhbHMoIk91dGVyMSIsIG5hbWUudG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDggLSBTaW1p
bGFyIHRvIGFib3ZlLCBidXQgd2l0aCB0aGUgbWFqb3IgZGlmZmVyZW5jZSBvZiBhbm5vdGF0aW9u
IHNoaWZ0ZWQgdG8gb3V0ZXJtb3N0LgorCQkvLyBATWFya2VyMSBPdXRlcjEuIElubmVyPEludGVn
ZXI+LiBEZWVwZXI8RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9u
KWdldEFTVE5vZGUoY3UsdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRl
cml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBl
ID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVh
bHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91YmxlPiIsIHBhcmFt
ZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRU
eXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9
PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlw
ZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1
YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFy
a2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMo
IkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBl
LmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOwor
CQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkKKwkJYXNz
ZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRy
aXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50
b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBl
ID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIi
LCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEu
SW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxp
ZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkg
PT0gMCk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShu
YW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJp
bmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRU
cnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5
cGU7CisJCWFubm90YXRpb25zID0gdHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFu
bm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5v
dGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRv
U3RyaW5nKCkpOworCQluYW1lID0gc2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUo
bmFtZS5pc1NpbXBsZU5hbWUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxIiwgbmFtZS50b1N0
cmluZygpKTsKKwkJCQkKKwkJLy8gY2FzZSA5OiBzY2VuYXJpbyBvZiB0aGUgYWJvdmUgY2FzZSBw
bHVzIGFub3RoZXIgYW5ub3RhdGlvbiBhdCBtaWQtbGV2ZWwuCisJCS8vIEBNYXJrZXIxIE91dGVy
MS5ATWFya2VyMiBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4gCisJCXR5cGVkZWNsYXJh
dGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJh
bWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJ
bnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5
cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXpl
KCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVu
dHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5ATWFya2VyMiBJbm5l
cjxJbnRlZ2VyPi5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7
CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJ
YXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRy
dWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVk
VHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5u
ZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9
IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFtZS50
b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7
CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBl
ID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZp
ZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFy
YW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEg
T3V0ZXIxLkBNYXJrZXIyIElubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygp
OworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5
cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuQE1hcmtl
cjIgSW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1
YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDAp
OworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJ
bmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNTaW1w
bGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJ
dHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJYW5u
b3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMu
c2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdl
dCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7
CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShuYW1lLmlzU2lt
cGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEiLCBuYW1lLnRvU3RyaW5nKCkpOwor
CQkJCQorCQkvLyBjYXNlIDEwIC0gUFFSVCB3aXRoIHR3byB0eXBlIGFyZ3MgYnV0IHdpdGhvdXQg
YW5ub3RhdGlvbnMKKwkJLy8gT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlcjxEb3VibGU+IAor
CQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3Vu
dCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xh
cmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVB
cmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlw
ZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4u
SW5uZXIuRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlciIsIHF1
YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUo
KTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRp
b25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1
YWxpZmllcigpOwkJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBl
KCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LklubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0
cmluZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1
YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZp
ZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJh
bWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlw
ZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOwor
CQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIklu
dGVnZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRU
eXBlKCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJCisK
KwkJLy8gY2FzZSAxMSAtIGFubm90YXRpb24gYXQgb3V0ZXJtb3N0IGluIGFkZGl0aW9uIHRvIHNj
ZW5hcmlvIGluIGNhc2UgMTAuCisJCS8vIEBNYXJrZXIxIE91dGVyMjxJbnRlZ2VyPi5Jbm5lci5E
ZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRB
U1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXpl
ZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAo
UGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygi
QE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJp
emVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEp
OworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdl
dFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlm
aWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIx
IE91dGVyMjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkp
OworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVl
cGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1
YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQkKKwkJYXNzZXJ0
VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIx
IE91dGVyMjxJbnRlZ2VyPi5Jbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5h
bWUgID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBu
YW1lLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFs
aWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5
cGU7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBl
KSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50
b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3Nl
cnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gdHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQkJ
CQorCQkvLyBjYXNlIDEyIC0gTm8gYW5ub3RhdGlvbnMgYXQgb3V0ZXJtb3N0LCBidXQgb3V0ZXJt
b3N0IGhhcyB0eXBlQW5ub3RhdGlvbnMuCisJCS8vIE91dGVyMjxJbnRlZ2VyPi4gQE1hcmtlcjEg
SW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4gCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBl
ID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBl
cygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJh
bWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBE
ZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIg
RGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRy
dWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24p
IGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRp
b24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFs
aWZpZXIoKTsJCQkKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlwZSgp
KTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5ATWFya2VyMSBJbm5lciIsIHF1YWxpZmllZFR5
cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFz
c2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1
YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDAp
OworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJ
cXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRy
dWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRU
eXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRz
ID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFy
Z3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUg
PSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjIiLCB0
eXBlLnRvU3RyaW5nKCkpOwkJCisKKwkJLy8gY2FzZSAxMyAtIGEgbGlzdCBvZiBhbm5vdGF0aW9u
cyBhbmQgbXVsdGlwbGUgdHlwZUFyZ3VtZW50IGVsZW1lbnQgbGlzdHMuCisJCS8vIE91dGVyMzxE
b3VibGU+LiBATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLCBDaGFyYWN0ZXI+LiBEZWVw
ZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1RO
b2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5
cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBl
QXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVx
dWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFy
YW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0
ZXIzPERvdWJsZT4uQE1hcmtlcjEgQE1hcmtlcjIgSW5uZXI8SW50ZWdlcixDaGFyYWN0ZXI+LkRl
ZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3Vt
ZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5
cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMu
Z2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5
cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVh
bGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyMzxEb3VibGU+LkBNYXJrZXIxIEBNYXJrZXIyIElubmVyPElu
dGVnZXIsQ2hhcmFjdGVyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQlu
YW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixu
YW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlv
bnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmll
clR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQkKKwkJYXNzZXJ0VHJ1ZShx
dWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCXR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1l
bnRzLnNpemUoKSA9PSAyKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZUFyZ3VtZW50
cy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCWFzc2VydEVxdWFscygiQ2hhcmFjdGVyIiwgdHlwZUFy
Z3VtZW50cy5nZXQoMSkudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdl
dFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlm
aWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwg
cXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAyKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb25zLmdldCgwKS50
b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb25zLmdldCgx
KS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlm
aWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkp
OworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBl
OworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJ
CWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCWFzc2VydEVxdWFscygi
RG91YmxlIiwgdHlwZUFyZ3VtZW50cy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJh
bWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgp
KTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyMyIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJfQorfQpcIE5vIG5ld2xpbmUgYXQgZW5k
IG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9k
b20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCmluZGV4IGViMjU3
ZDIuLjQ0NThhNTMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQpAQCAt
MSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2Vy
dmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMg
YXZhaWxhYmxlIGF0CkBAIC0zMDg0LDcgKzMwODQsNiBAQAogCQkJCQkJaW50IHN0YXJ0ID0gdHlw
ZUFubm90YXRpb24uc291cmNlU3RhcnQ7CiAJCQkJCQlpbnQgZW5kID0gdHlwZUFubm90YXRpb24u
c291cmNlRW5kOwogCQkJCQkJYW5ub3RhdGlvbi5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0g
c3RhcnQgKyAxKTsKLQkJCQkJCW5hbWUuYW5ub3RhdGlvbnMuYWRkKGFubm90YXRpb24pOwogCQkJ
CQl9CiAJCQkJfQogCQl9CkBAIC0zMjU0LDYgKzMyNTMsNyBAQAogCQkJCVBhcmFtZXRlcml6ZWRR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlIHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
ID0gKFBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlOwog
CQkJCWNoYXJbXVtdIHRva2VucyA9IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LnRva2VuczsKIAkJCQlUeXBlUmVmZXJlbmNlW11bXSB0eXBlQXJndW1lbnRzID0gcGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50czsKKwkJCQlvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb25bXVtdIHR5cGVBbm5vdGF0aW9u
cyA9IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zOwogCQkJ
CWxvbmdbXSBwb3NpdGlvbnMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5z
b3VyY2VQb3NpdGlvbnM7CiAJCQkJc291cmNlU3RhcnQgPSAoaW50KShwb3NpdGlvbnNbMF0+Pj4z
Mik7CiAJCQkJc3dpdGNoKHRoaXMuYXN0LmFwaUxldmVsKSB7CkBAIC0zMjcxLDE1ICszMjcxLDMy
IEBACiAJCQkJCX0KIAkJCQkJYnJlYWs7CiAJCQkJCWRlZmF1bHQgOgorCQkJCQkJLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgogCQkJCQkJaWYg
KHR5cGVBcmd1bWVudHMgIT0gbnVsbCkgewotCQkJCQkJCWludCBudW1iZXJPZkVuY2xvc2luZ1R5
cGUgPSAwOwogCQkJCQkJCWludCBzdGFydGluZ0luZGV4ID0gMDsKIAkJCQkJCQlpbnQgZW5kaW5n
SW5kZXggPSAwOworCQkJCQkJCWludCBudW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAwOworCiAJCQkJ
CQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOyBpIDwgbWF4OyBp
KyspIHsKIAkJCQkJCQkJaWYgKHR5cGVBcmd1bWVudHNbaV0gIT0gbnVsbCkgewogCQkJCQkJCQkJ
bnVtYmVyT2ZFbmNsb3NpbmdUeXBlKys7CiAJCQkJCQkJCX0gZWxzZSBpZiAobnVtYmVyT2ZFbmNs
b3NpbmdUeXBlID09IDApIHsKIAkJCQkJCQkJCWVuZGluZ0luZGV4Kys7CisJCQkJCQkJCX0KKwkJ
CQkJCQl9CisJCQkJCQkJaWYgKHR5cGVBbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQkJCQkJCWlu
dCBhbm5vdF9lbmRpbmdJbmRleCA9IC0xOworCQkJCQkJCQludW1iZXJPZkVuY2xvc2luZ1R5cGUg
PSAwOworCQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFubm90YXRpb25zLmxlbmd0
aDsgaSA8IG1heDsgaSsrKSB7CisJCQkJCQkJCQlpZiAodHlwZUFubm90YXRpb25zW2ldICE9IG51
bGwpIHsKKwkJCQkJCQkJCQludW1iZXJPZkVuY2xvc2luZ1R5cGUrKzsKKwkJCQkJCQkJCX0gZWxz
ZSBpZiAobnVtYmVyT2ZFbmNsb3NpbmdUeXBlID09IDApIHsKKwkJCQkJCQkJCQlhbm5vdF9lbmRp
bmdJbmRleCsrOworCQkJCQkJCQkJfQorCQkJCQkJCQl9CQkJCQkKKwkJCQkJCQkJZW5kaW5nSW5k
ZXggPSAoYW5ub3RfZW5kaW5nSW5kZXggPCBlbmRpbmdJbmRleCkgPyBhbm5vdF9lbmRpbmdJbmRl
eCA6IGVuZGluZ0luZGV4OworCQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggPCAwKSB7CisJCQkJCQkJ
CQllbmRpbmdJbmRleCA9IDA7CiAJCQkJCQkJCX0KIAkJCQkJCQl9CiAJCQkJCQkJTmFtZSBuYW1l
ID0gbnVsbDsKQEAgLTMzMDMsMjkgKzMzMjAsMzUgQEAKIAkJCQkJCQlpbnQgc3RhcnQgPSAoaW50
KShwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF0+Pj4zMik7CiAJCQkJCQkJaW50IGVuZCA9IChpbnQp
IHBvc2l0aW9uc1tlbmRpbmdJbmRleF07CiAJCQkJCQkJc2ltcGxlVHlwZS5zZXRTb3VyY2VSYW5n
ZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggPT0gMCAm
JiB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlw
ZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSkgIT0gbnVsbCkgeworCQkJCQkJCWlmICh0eXBlUmVm
ZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9uc1tlbmRpbmdJbmRleF0pICE9IG51bGwpIHsKIAkJCQkJCQkJYW5ub3RhdGVU
eXBlKHNpbXBsZVR5cGUsIGFubm90YXRpb25zKTsKIAkJCQkJCQl9Ci0JCQkJCQkJUGFyYW1ldGVy
aXplZFR5cGUgcGFyYW1ldGVyaXplZFR5cGUgPSBuZXcgUGFyYW1ldGVyaXplZFR5cGUodGhpcy5h
c3QpOwotCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFR5cGUoc2ltcGxlVHlwZSk7Ci0JCQkJ
CQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7Ci0JCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBs
ZVR5cGUsIHR5cGVSZWZlcmVuY2UpOwotCQkJCQkJCQlyZWNvcmROb2RlcyhwYXJhbWV0ZXJpemVk
VHlwZSwgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJCQkJfQotCQkJCQkJCXN0YXJ0ID0gc2ltcGxlVHlw
ZS5nZXRTdGFydFBvc2l0aW9uKCk7Ci0JCQkJCQkJZW5kID0gc3RhcnQgKyBzaW1wbGVUeXBlLmdl
dExlbmd0aCgpIC0gMTsKLQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFyZ3VtZW50
c1tlbmRpbmdJbmRleF0ubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKLQkJCQkJCQkJZmluYWwgVHlw
ZSB0eXBlMiA9IGNvbnZlcnRUeXBlKHR5cGVBcmd1bWVudHNbZW5kaW5nSW5kZXhdW2ldKTsKLQkJ
CQkJCQkJcGFyYW1ldGVyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0eXBlMik7Ci0JCQkJ
CQkJCWVuZCA9IHR5cGUyLmdldFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdldExlbmd0aCgpIC0g
MTsKLQkJCQkJCQl9CiAJCQkJCQkJaW50IGluZGV4T2ZFbmNsb3NpbmdUeXBlID0gMTsKLQkJCQkJ
CQlwYXJhbWV0ZXJpemVkVHlwZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOwotCQkJCQkJ
CWVuZCA9IHJldHJpZXZlQ2xvc2luZ0FuZ2xlQnJhY2tldFBvc2l0aW9uKGVuZCArIDEpOwotCQkJ
CQkJCWxlbmd0aCA9IGVuZCArIDE7Ci0JCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0U291cmNl
UmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CisJCQkJCQkJVHlwZSBjdXJyZW50VHlwZSA9
IHNpbXBsZVR5cGU7CisJCQkJCQkJUXVhbGlmaWVkVHlwZSBxdWFsaWZpZWRUeXBlOworCQkJCQkJ
CWlmICh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XSAhPSBudWxsKSB7CisJCQkJCQkJCVBhcmFt
ZXRlcml6ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFtZXRlcml6ZWRUeXBlKHRo
aXMuYXN0KTsKKwkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0VHlwZShzaW1wbGVUeXBlKTsK
KwkJCQkJCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7CisJCQkJCQkJCQlyZWNvcmROb2Rl
cyhzaW1wbGVUeXBlLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCQkJCXJlY29yZE5vZGVzKHBhcmFt
ZXRlcml6ZWRUeXBlLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCQkJfQorCQkJCQkJCQlzdGFydCA9
IHNpbXBsZVR5cGUuZ2V0U3RhcnRQb3NpdGlvbigpOworCQkJCQkJCQllbmQgPSBzdGFydCArIHNp
bXBsZVR5cGUuZ2V0TGVuZ3RoKCkgLSAxOworCQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0g
dHlwZUFyZ3VtZW50c1tlbmRpbmdJbmRleF0ubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKKwkJCQkJ
CQkJCWZpbmFsIFR5cGUgdHlwZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW2VuZGluZ0lu
ZGV4XVtpXSk7CisJCQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS50eXBlQXJndW1lbnRzKCkuYWRk
KHR5cGUyKTsKKwkJCQkJCQkJCWVuZCA9IHR5cGUyLmdldFN0YXJ0UG9zaXRpb24oKSArIHR5cGUy
LmdldExlbmd0aCgpIC0gMTsKKwkJCQkJCQkJfQkJCQkJCQkJCisJCQkJCQkJCWluZGV4T2ZFbmNs
b3NpbmdUeXBlID0gMTsKKwkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuaW5kZXggPSBpbmRleE9m
RW5jbG9zaW5nVHlwZTsKKwkJCQkJCQkJZW5kID0gcmV0cmlldmVDbG9zaW5nQW5nbGVCcmFja2V0
UG9zaXRpb24oZW5kICsgMSk7CisJCQkJCQkJCWxlbmd0aCA9IGVuZCArIDE7CisJCQkJCQkJCXBh
cmFtZXRlcml6ZWRUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOwor
CQkJCQkJCQljdXJyZW50VHlwZSA9IHBhcmFtZXRlcml6ZWRUeXBlOworCQkJCQkJCX0KIAkJCQkJ
CQlzdGFydGluZ0luZGV4ID0gZW5kaW5nSW5kZXggKyAxOwotCQkJCQkJCVR5cGUgY3VycmVudFR5
cGUgPSBwYXJhbWV0ZXJpemVkVHlwZTsKKwogCQkJCQkJCXdoaWxlKHN0YXJ0aW5nSW5kZXggPCB0
eXBlQXJndW1lbnRzLmxlbmd0aCkgewogCQkJCQkJCQlTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBu
ZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CiAJCQkJCQkJCXNpbXBsZU5hbWUuaW50ZXJuYWxTZXRJ
ZGVudGlmaWVyKG5ldyBTdHJpbmcodG9rZW5zW3N0YXJ0aW5nSW5kZXhdKSk7CkBAIC0zMzM0LDcg
KzMzNTcsNyBAQAogCQkJCQkJCQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07
CiAJCQkJCQkJCXNpbXBsZU5hbWUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsg
MSk7CiAJCQkJCQkJCXJlY29yZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUp
OwotCQkJCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlw
ZSh0aGlzLmFzdCk7CisJCQkJCQkJCXF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0
aGlzLmFzdCk7CiAJCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0UXVhbGlmaWVyKGN1cnJlbnRUeXBl
KTsKIAkJCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOwogCQkJCQkJCQlp
ZiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5
cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbc3RhcnRpbmdJbmRleF0pICE9IG51bGwpIHsKQEAgLTMz
NzksMTYgKzM0MDIsOTkgQEAKIAkJCQkJCX0KIAkJCQl9CiAJCQl9IGVsc2UgaWYgKHR5cGVSZWZl
cmVuY2UgaW5zdGFuY2VvZiBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1
YWxpZmllZFR5cGVSZWZlcmVuY2UpIHsKLQkJCQljaGFyW11bXSBuYW1lID0gKChvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVS
ZWZlcmVuY2UpLmdldFR5cGVOYW1lKCk7Ci0JCQkJaW50IG5hbWVMZW5ndGggPSBuYW1lLmxlbmd0
aDsKLQkJCQlsb25nW10gcG9zaXRpb25zID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29t
cGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnNvdXJjZVBv
c2l0aW9uczsKLQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMyKTsKLQkJ
CQlsZW5ndGggPSAoaW50KShwb3NpdGlvbnNbbmFtZUxlbmd0aCAtIDFdICYgMHhGRkZGRkZGRikg
LSBzb3VyY2VTdGFydCArIDE7Ci0JCQkJZmluYWwgTmFtZSBxdWFsaWZpZWROYW1lID0gdGhpcy5z
ZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyhuYW1lLCBwb3NpdGlvbnMsIHR5cGVS
ZWZlcmVuY2UsIHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMpOwotCQkJCWZpbmFsIFNpbXBsZVR5
cGUgc2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKLQkJCQlzaW1wbGVUeXBl
LnNldE5hbWUocXVhbGlmaWVkTmFtZSk7Ci0JCQkJdHlwZSA9IHNpbXBsZVR5cGU7Ci0JCQkJdHlw
ZS5zZXRTb3VyY2VSYW5nZShzb3VyY2VTdGFydCwgbGVuZ3RoKTsKKwkJCQkvLyBodHRwczovL2J1
Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJCQkJaW50IGluZGV4
ID0gMDsKKwkJCQlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIHF1YWxpZmllZFR5cGVSZWZlcmVuY2Ug
PSAoUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSl0eXBlUmVmZXJlbmNlOworCQkJCWNoYXJbXVtdIHRv
a2VucyA9IHF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zOworCQkJCWludCBudW1iZXJPZkVu
Y2xvc2luZ1R5cGUgPSAwOworCQkJCWludCBzdGFydGluZ0luZGV4ID0gMDsKKwkJCQlpbnQgZW5k
aW5nSW5kZXggPSAwOworCQkJCWJvb2xlYW4gaGFzQW5ub3RhdGlvbnMgPSAodHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9ucyAhPSBudWxsKTsKKworCQkJCWlmIChoYXNBbm5vdGF0aW9ucykgeworCQkJ
CQkKKwkJCQkJZm9yICg7IChpbmRleCA8IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3Ro
KTsgKytpbmRleCkgeyAKKwkJCQkJCWlmICh0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2luZGV4
XSAhPSBudWxsKSAgeworCQkJCQkJICAJbnVtYmVyT2ZFbmNsb3NpbmdUeXBlKys7CisJCQkJCQl9
IGVsc2UgaWYgKG51bWJlck9mRW5jbG9zaW5nVHlwZSA9PSAwKSB7CisJCQkJCQkJZW5kaW5nSW5k
ZXgrKzsKKwkJCQkJCX0KKwkJCQkJfQorCQkJCX0KKwkJCQkKKwkJCQlpZiAoaGFzQW5ub3RhdGlv
bnMgJiYgKGVuZGluZ0luZGV4IDwgdHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucy5sZW5ndGgpKSB7
CisJCQkJCQorCQkJCQlsb25nW10gcG9zaXRpb25zID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnNv
dXJjZVBvc2l0aW9uczsKKwkJCQkJc291cmNlU3RhcnQgPSAoaW50KShwb3NpdGlvbnNbMF0+Pj4z
Mik7CisJCQkJCQorCQkJCQlOYW1lIG5hbWUgPSBudWxsOworCQkJCQlpZiAoZW5kaW5nSW5kZXgg
LSBzdGFydGluZ0luZGV4IDw9IDEpIHsKKwkJCQkJCWZpbmFsIFNpbXBsZU5hbWUgc2ltcGxlTmFt
ZSA9IG5ldyBTaW1wbGVOYW1lKHRoaXMuYXN0KTsKKwkJCQkJCXNpbXBsZU5hbWUuaW50ZXJuYWxT
ZXRJZGVudGlmaWVyKG5ldyBTdHJpbmcodG9rZW5zWzBdKSk7CisJCQkJCQlyZWNvcmRQZW5kaW5n
TmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsKKwkJCQkJCWludCBzdGFydCA9IChpbnQp
KHBvc2l0aW9uc1tzdGFydGluZ0luZGV4XT4+PjMyKTsKKwkJCQkJCWludCBlbmQgPSAoaW50KSBw
b3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CisJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdl
KHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJc2ltcGxlTmFtZS5pbmRleCA9IDE7CisJ
CQkJCQluYW1lID0gc2ltcGxlTmFtZTsKKwkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykg
eworCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJ
fQorCQkJCQl9IGVsc2UgeworCQkJCQkJbmFtZSA9IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVB
bmRTb3VyY2VSYW5nZXModG9rZW5zLCBwb3NpdGlvbnMsIGVuZGluZ0luZGV4IC0gMSwgdHlwZVJl
ZmVyZW5jZSk7CisJCQkJCX0KKwkJCQkJCisJCQkJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IG5l
dyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKKwkJCQkJc2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOwor
CQkJCQlpbnQgc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF0+Pj4zMik7CisJ
CQkJCWludCBlbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CisJCQkJCXNpbXBs
ZVR5cGUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CisJCQkJCWlmIChl
bmRpbmdJbmRleCA9PSAwICYmIHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAo
YW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7CisJ
CQkJCQlhbm5vdGF0ZVR5cGUoc2ltcGxlVHlwZSwgYW5ub3RhdGlvbnMpOworCQkJCQl9CisJCQkJ
CXNpbXBsZVR5cGUuc2V0RmxhZ3Moc2ltcGxlVHlwZS5nZXRGbGFncygpIHwgQVNUTm9kZS5NQUxG
T1JNRUQpOy8vVE9ETzogSXMgdGhpcyBzdG10IHJlcWQ/CisJCQkJCVR5cGUgY3VycmVudFR5cGUg
PSBzaW1wbGVUeXBlOwkJCQkgICAgCisJCQkJCQorCQkJCQkvLyBzcGVjaWFsIGNhc2UgaWYgdGhl
IGFubm90cyBhcmUgc3RhcnRpbmcgZnJvbSAxIGFzIDAgd291bGQgYmUgdGhlIFNULgorCQkJCQlz
dGFydGluZ0luZGV4ID0gZW5kaW5nSW5kZXggPT0gMCA/IGVuZGluZ0luZGV4ICsgMSA6IGVuZGlu
Z0luZGV4IDsKKwkJCQkJd2hpbGUoc3RhcnRpbmdJbmRleCA8IHR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnMubGVuZ3RoKSB7CisJCQkJCQlTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcgU2ltcGxl
TmFtZSh0aGlzLmFzdCk7CisJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihu
ZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4XSkpOworCQkJCQkJc2ltcGxlTmFtZS5pbmRl
eCA9IHN0YXJ0aW5nSW5kZXggKyAxOworCQkJCQkJc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3Rh
cnRpbmdJbmRleF0+Pj4zMik7CisJCQkJCQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJ
bmRleF07CisJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFy
dCArIDEpOworCQkJCQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24oc2ltcGxlTmFt
ZSk7CisJCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlw
ZSh0aGlzLmFzdCk7CisJCQkJCQlxdWFsaWZpZWRUeXBlLnNldFF1YWxpZmllcihjdXJyZW50VHlw
ZSk7CisJCQkJCQlxdWFsaWZpZWRUeXBlLnNldE5hbWUoc2ltcGxlTmFtZSk7CisJCQkJCQlpZiAo
dHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnNbc3RhcnRpbmdJbmRleF0pICE9IG51bGwpIHsKKwkJCQkJCQlh
bm5vdGF0ZVR5cGUocXVhbGlmaWVkVHlwZSwgYW5ub3RhdGlvbnMpOworCQkJCQkJfQorCQkJCQkJ
aWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7CisJCQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFt
ZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJcmVjb3JkTm9kZXMocXVhbGlmaWVkVHlwZSwgdHlw
ZVJlZmVyZW5jZSk7CisJCQkJCQl9CisJCQkJCQlzdGFydCA9IGN1cnJlbnRUeXBlLmdldFN0YXJ0
UG9zaXRpb24oKTsKKwkJCQkJCWVuZCA9IHNpbXBsZU5hbWUuZ2V0U3RhcnRQb3NpdGlvbigpICsg
c2ltcGxlTmFtZS5nZXRMZW5ndGgoKSAtIDE7CisJCQkJCQlxdWFsaWZpZWRUeXBlLnNldFNvdXJj
ZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJY3VycmVudFR5cGUgPSBxdWFs
aWZpZWRUeXBlOworCQkJLy8JCQlxdWFsaWZpZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVuY2xvc2lu
Z1R5cGU7IFRPRE8gIHRvIGNoZWNrIHdoZXRoZXIgdGhpcyBmaWVsZCBtYWtlcyBzZW5zZSBoZXJl
LgorCQkJCQkJc3RhcnRpbmdJbmRleCsrOworCQkJCQl9CisJCQkJCXR5cGUgPSBjdXJyZW50VHlw
ZTsKKwkJCQl9IGVsc2UgeworCQkJCQljaGFyW11bXSBuYW1lID0gKChvcmcuZWNsaXBzZS5qZHQu
aW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVu
Y2UpLmdldFR5cGVOYW1lKCk7CisJCQkJCWludCBuYW1lTGVuZ3RoID0gbmFtZS5sZW5ndGg7CisJ
CQkJCWxvbmdbXSBwb3NpdGlvbnMgPSAoKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZSkuc291cmNlUG9zaXRp
b25zOworCQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMyKTsKKwkJCQkJ
bGVuZ3RoID0gKGludCkocG9zaXRpb25zW25hbWVMZW5ndGggLSAxXSAmIDB4RkZGRkZGRkYpIC0g
c291cmNlU3RhcnQgKyAxOworCQkJCQlmaW5hbCBOYW1lIHF1YWxpZmllZE5hbWUgPSB0aGlzLnNl
dFF1YWxpZmllZE5hbWVOYW1lQW5kU291cmNlUmFuZ2VzKG5hbWUsIHBvc2l0aW9ucywgdHlwZVJl
ZmVyZW5jZSwgdHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyk7CisJCQkJCWZpbmFsIFNpbXBsZVR5
cGUgc2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKKwkJCQkJc2ltcGxlVHlw
ZS5zZXROYW1lKHF1YWxpZmllZE5hbWUpOworCQkJCQl0eXBlID0gc2ltcGxlVHlwZTsKKwkJCQkJ
dHlwZS5zZXRTb3VyY2VSYW5nZShzb3VyY2VTdGFydCwgbGVuZ3RoKTsKKwkJCQl9CiAJCQl9IGVs
c2UgewogCQkJCVR5cGVSZWZlcmVuY2VbXSB0eXBlUmVmZXJlbmNlcyA9ICgob3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5VbmlvblR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVu
Y2UpLnR5cGVSZWZlcmVuY2VzOwogCQkJCXN3aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Rv
bS9BU1RNYXRjaGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2Uv
amR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQppbmRleCA2NDE4NmJiLi5iNTA2NDhmIDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVE1hdGNoZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0
aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0
aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5k
IHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFj
Y29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xNjk3
LDggKzE2OTcsNyBAQAogCQkJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwg
by5nZXROYW1lKCkpOwogCQkJZGVmYXVsdDoKIAkJCQlyZXR1cm4gc2FmZVN1YnRyZWVNYXRjaChu
b2RlLmdldFF1YWxpZmllcigpLCBvLmdldFF1YWxpZmllcigpKQotCQkJCQkJJiYgc2FmZVN1YnRy
ZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpICYmCi0JCQkJCQlzYWZlU3VidHJl
ZUxpc3RNYXRjaChub2RlLmFubm90YXRpb25zKCksIG8uYW5ub3RhdGlvbnMoKSk7CisJCQkJCQkm
JiBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCX0JCiAJ
fQogCkBAIC0xNzg1LDggKzE3ODQsNyBAQAogCQkJY2FzZSBBU1QuSkxTNDoKIAkJCQlyZXR1cm4g
bm9kZS5nZXRJZGVudGlmaWVyKCkuZXF1YWxzKG8uZ2V0SWRlbnRpZmllcigpKTsKIAkJCWRlZmF1
bHQ6Ci0JCQkJcmV0dXJuIChub2RlLmdldElkZW50aWZpZXIoKS5lcXVhbHMoby5nZXRJZGVudGlm
aWVyKCkpKSAmJgotCQkJCQkJc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygp
LCBvLmFubm90YXRpb25zKCkpOworCQkJCXJldHVybiAobm9kZS5nZXRJZGVudGlmaWVyKCkuZXF1
YWxzKG8uZ2V0SWRlbnRpZmllcigpKSk7CiAJCX0JCiAJfQogCkBAIC0xODE1LDggKzE4MTMsNyBA
QAogCQkJY2FzZSBBU1QuSkxTNDoKIAkJCQlyZXR1cm4gc2FmZVN1YnRyZWVNYXRjaChub2RlLmdl
dE5hbWUoKSwgby5nZXROYW1lKCkpOwogCQkJZGVmYXVsdDoKLQkJCQlyZXR1cm4gKHNhZmVTdWJ0
cmVlTWF0Y2gobm9kZS5nZXROYW1lKCksIG8uZ2V0TmFtZSgpKSkgJiYKLQkJCQkJCXNhZmVTdWJ0
cmVlTGlzdE1hdGNoKG5vZGUuYW5ub3RhdGlvbnMoKSwgby5hbm5vdGF0aW9ucygpKTsKKwkJCQly
ZXR1cm4gKHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXROYW1lKCksIG8uZ2V0TmFtZSgpKSk7CiAJ
CX0KIAl9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vTmFtZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9OYW1lLmphdmEKaW5kZXggZTdkMDcyNi4uMzRjYzJhZCAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Rv
bS9OYW1lLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9jb3JlL2RvbS9OYW1lLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21w
YW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0
aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMTQsOCArMTQsNiBAQAog
ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKiovCiAKIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUu
ZG9tOwotCi1pbXBvcnQgamF2YS51dGlsLkxpc3Q7CiAKIC8qKgogICogQWJzdHJhY3QgYmFzZSBj
bGFzcyBmb3IgYWxsIEFTVCBub2RlcyB0aGF0IHJlcHJlc2VudCBuYW1lcy4KQEAgLTcxLDEyICs2
OSw2IEBACiAJICovCiAJaW50IGluZGV4OwogCQotCS8qKgotCSAqIFRoZSB0eXBlIGFubm90YXRp
b25zIChlbGVtZW50IHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCi0JICogQHNpbmNlIDMuOQot
CSAqLwotCXByb3RlY3RlZCBBU1ROb2RlLk5vZGVMaXN0IGFubm90YXRpb25zID0gbnVsbDsKLQog
CS8qKgogCSAqIENyZWF0ZXMgYSBuZXcgQVNUIG5vZGUgZm9yIGEgbmFtZSBvd25lZCBieSB0aGUg
Z2l2ZW4gQVNULgogCSAqIDxwPgpAQCAtMTU1LDE4ICsxNDcsNCBAQAogCSAqLwogCWFic3RyYWN0
IHZvaWQgYXBwZW5kTmFtZShTdHJpbmdCdWZmZXIgYnVmZmVyKTsKIAkKLQkvKioKLQkgKiBSZXR1
cm5zIHRoZSBsaXZlIG9yZGVyZWQgbGlzdCBvZiBhbm5vdGF0aW9ucyBmb3IgdGhpcyBOYW1lIG5v
ZGUuCi0JICoKLQkgKiBAcmV0dXJuIHRoZSBsaXZlIGxpc3Qgb2YgYW5ub3RhdGlvbnMgKGVsZW1l
bnQgdHlwZToge0BsaW5rIEFubm90YXRpb259KQotCSAqIEBleGNlcHRpb24gVW5zdXBwb3J0ZWRP
cGVyYXRpb25FeGNlcHRpb24gaWYgdGhpcyBvcGVyYXRpb24gaXMgdXNlZAotCSAqICAgICAgICAg
ICAgaW4gYSBKTFMyLCBKTFMzIG9yIEpMUzQgQVNUCi0JICogQHNpbmNlIDMuOQotCSAqLwotCXB1
YmxpYyBMaXN0IGFubm90YXRpb25zKCkgewotCQlpZiAodGhpcy5hbm5vdGF0aW9ucyA9PSBudWxs
KSB7Ci0JCQl1bnN1cHBvcnRlZEluMl8zXzQoKTsgCi0JCX0KLQkJcmV0dXJuIHRoaXMuYW5ub3Rh
dGlvbnM7Ci0JfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9RdWFsaWZpZWROYW1lLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1F1YWxpZmllZE5hbWUuamF2YQppbmRl
eCAxZjBlMjcyLi5lYmYwNTQ2IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1F1YWxpZmllZE5hbWUuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1F1YWxpZmllZE5hbWUu
amF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmln
aHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmln
aHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmln
aHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxz
CiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1
YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9u
LCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xNDEsOSArMTQxLDYgQEAKIAkgKi8KIAlRdWFsaWZp
ZWROYW1lKEFTVCBhc3QpIHsKIAkJc3VwZXIoYXN0KTsKLQkJaWYgKGFzdC5hcGlMZXZlbCA+PSBB
U1QuSkxTOCkgewotCQkJdGhpcy5hbm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KEFO
Tk9UQVRJT05TX1BST1BFUlRZKTsKLQkJfQogCX0KIAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRo
aXMgbWV0aG9kKQpAQCAtMTU3LDkgKzE1NCw2IEBACiAJICogTWV0aG9kIGRlY2xhcmVkIG9uIEFT
VE5vZGUuCiAJICovCiAJZmluYWwgTGlzdCBpbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KENo
aWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBwcm9wZXJ0eSkgewotCQlpZiAocHJvcGVydHkgPT0g
QU5OT1RBVElPTlNfUFJPUEVSVFkpIHsKLQkJCXJldHVybiBhbm5vdGF0aW9ucygpOwotCQl9CiAJ
CS8vIGFsbG93IGRlZmF1bHQgaW1wbGVtZW50YXRpb24gdG8gZmxhZyB0aGUgZXJyb3IKIAkJcmV0
dXJuIHN1cGVyLmludGVybmFsR2V0Q2hpbGRMaXN0UHJvcGVydHkocHJvcGVydHkpOwogCX0KQEAg
LTIwMywxMSArMTk3LDYgQEAKIAkJcmVzdWx0LnNldFNvdXJjZVJhbmdlKGdldFN0YXJ0UG9zaXRp
b24oKSwgZ2V0TGVuZ3RoKCkpOwogCQlyZXN1bHQuc2V0UXVhbGlmaWVyKChOYW1lKSBnZXRRdWFs
aWZpZXIoKS5jbG9uZSh0YXJnZXQpKTsKIAkJcmVzdWx0LnNldE5hbWUoKFNpbXBsZU5hbWUpIGdl
dE5hbWUoKS5jbG9uZSh0YXJnZXQpKTsKLQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5K
TFM4KSB7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5P
VEFUSU9OU19QUk9QRVJUWSk7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMuYWRkQWxsKAotCQkJCQlB
U1ROb2RlLmNvcHlTdWJ0cmVlcyh0YXJnZXQsIGFubm90YXRpb25zKCkpKTsKLQkJfQogCQlyZXR1
cm4gcmVzdWx0OwogCX0KIApAQCAtMjI3LDkgKzIxNiw2IEBACiAJCWlmICh2aXNpdENoaWxkcmVu
KSB7CiAJCQkvLyB2aXNpdCBjaGlsZHJlbiBpbiBub3JtYWwgbGVmdCB0byByaWdodCByZWFkaW5n
IG9yZGVyCiAJCQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBnZXRRdWFsaWZpZXIoKSk7Ci0JCQlpZiAo
dGhpcy5hc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCQlhY2NlcHRDaGlsZHJlbih2aXNp
dG9yLCB0aGlzLmFubm90YXRpb25zKTsKLQkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdl
dE5hbWUoKSk7CiAJCX0KIAkJdmlzaXRvci5lbmRWaXNpdCh0aGlzKTsKQEAgLTMzNyw4ICszMjMs
NyBAQAogCQlyZXR1cm4KIAkJCW1lbVNpemUoKQogCQkJKyAodGhpcy5uYW1lID09IG51bGwgPyAw
IDogZ2V0TmFtZSgpLnRyZWVTaXplKCkpCi0JCQkrICh0aGlzLnF1YWxpZmllciA9PSBudWxsID8g
MCA6IGdldFF1YWxpZmllcigpLnRyZWVTaXplKCkpCi0JCQkrICh0aGlzLmFubm90YXRpb25zID09
IG51bGwgPyAwIDogdGhpcy5hbm5vdGF0aW9ucy5saXN0U2l6ZSgpKTsKKwkJCSsgKHRoaXMucXVh
bGlmaWVyID09IG51bGwgPyAwIDogZ2V0UXVhbGlmaWVyKCkudHJlZVNpemUoKSk7CiAJfQogfQog
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2Nv
cmUvZG9tL1NpbXBsZU5hbWUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhCmluZGV4IDI2OTQ2ZDIuLmQ5NjMwYzYg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29y
ZS9kb20vU2ltcGxlTmFtZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29y
cG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29y
cG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3Jh
bSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1
bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hp
Y2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAg
LTEyMyw5ICsxMjMsNiBAQAogCSAqLwogCVNpbXBsZU5hbWUoQVNUIGFzdCkgewogCQlzdXBlcihh
c3QpOwotCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7Ci0JCQl0aGlzLmFubm90YXRp
b25zID0gbmV3IEFTVE5vZGUuTm9kZUxpc3QoQU5OT1RBVElPTlNfUFJPUEVSVFkpOwotCQl9CiAJ
fQogCiAJLyogKG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRob2QpCkBAIC0xNDAsOSArMTM3LDYg
QEAKIAkgKiBNZXRob2QgZGVjbGFyZWQgb24gQVNUTm9kZS4KIAkgKi8KIAlmaW5hbCBMaXN0IGlu
dGVybmFsR2V0Q2hpbGRMaXN0UHJvcGVydHkoQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yIHBy
b3BlcnR5KSB7Ci0JCWlmIChwcm9wZXJ0eSA9PSBBTk5PVEFUSU9OU19QUk9QRVJUWSkgewotCQkJ
cmV0dXJuIGFubm90YXRpb25zKCk7Ci0JCX0KIAkJLy8gYWxsb3cgZGVmYXVsdCBpbXBsZW1lbnRh
dGlvbiB0byBmbGFnIHRoZSBlcnJvcgogCQlyZXR1cm4gc3VwZXIuaW50ZXJuYWxHZXRDaGlsZExp
c3RQcm9wZXJ0eShwcm9wZXJ0eSk7CiAJfQpAQCAtMTc3LDExICsxNzEsNiBAQAogCQlTaW1wbGVO
YW1lIHJlc3VsdCA9IG5ldyBTaW1wbGVOYW1lKHRhcmdldCk7CiAJCXJlc3VsdC5zZXRTb3VyY2VS
YW5nZShnZXRTdGFydFBvc2l0aW9uKCksIGdldExlbmd0aCgpKTsKIAkJcmVzdWx0LnNldElkZW50
aWZpZXIoZ2V0SWRlbnRpZmllcigpKTsKLQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5K
TFM4KSB7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5P
VEFUSU9OU19QUk9QRVJUWSk7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMuYWRkQWxsKAotCQkJCQlB
U1ROb2RlLmNvcHlTdWJ0cmVlcyh0YXJnZXQsIGFubm90YXRpb25zKCkpKTsKLQkJfQogCQlyZXR1
cm4gcmVzdWx0OwogCX0KIApAQCAtMTk3LDEyICsxODYsNyBAQAogCSAqIE1ldGhvZCBkZWNsYXJl
ZCBvbiBBU1ROb2RlLgogCSAqLwogCXZvaWQgYWNjZXB0MChBU1RWaXNpdG9yIHZpc2l0b3IpIHsK
LQkJYm9vbGVhbiB2aXNpdENoaWxkcmVuID0gdmlzaXRvci52aXNpdCh0aGlzKTsKLQkJaWYgKHZp
c2l0Q2hpbGRyZW4pIHsKLQkJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgewot
CQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMuYW5ub3RhdGlvbnMpOwotCQkJfQotCQl9
CisJCXZpc2l0b3IudmlzaXQodGhpcyk7CiAJCXZpc2l0b3IuZW5kVmlzaXQodGhpcyk7CiAJfQog
CkBAIC0zNjUsNyArMzQ5LDcgQEAKIAkgKiBNZXRob2QgZGVjbGFyZWQgb24gQVNUTm9kZS4KIAkg
Ki8KIAlpbnQgdHJlZVNpemUoKSB7Ci0JCXJldHVybiBtZW1TaXplKCkgKyAodGhpcy5hbm5vdGF0
aW9ucyA9PSBudWxsID8gMCA6IHRoaXMuYW5ub3RhdGlvbnMubGlzdFNpemUoKSk7CisJCXJldHVy
biBtZW1TaXplKCk7CiAJfQogfQogCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9k
b20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKaW5kZXggMWQwOTU1Yi4uZDdkMWViZSAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVu
ZXIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5
cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5
cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwg
cmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJp
YWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNl
IFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0
aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xMjQyLDcgKzEyNDIsNiBAQAogCXB1YmxpYyBi
b29sZWFuIHZpc2l0KFF1YWxpZmllZE5hbWUgbm9kZSkgewogCQlub2RlLmdldFF1YWxpZmllcigp
LmFjY2VwdCh0aGlzKTsKIAkJdGhpcy5idWZmZXIuYXBwZW5kKCIuIik7Ly8kTk9OLU5MUy0xJAot
CQl2aXNpdFR5cGVBbm5vdGF0aW9ucyhub2RlKTsKIAkJbm9kZS5nZXROYW1lKCkuYWNjZXB0KHRo
aXMpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQpAQCAtMTI3Nyw3ICsxMjc2LDYgQEAKIAkgKiBAc2Vl
IEFTVFZpc2l0b3IjdmlzaXQoU2ltcGxlTmFtZSkKIAkgKi8KIAlwdWJsaWMgYm9vbGVhbiB2aXNp
dChTaW1wbGVOYW1lIG5vZGUpIHsKLQkJdmlzaXRUeXBlQW5ub3RhdGlvbnMobm9kZSk7CiAJCXRo
aXMuYnVmZmVyLmFwcGVuZChub2RlLmdldElkZW50aWZpZXIoKSk7CiAJCXJldHVybiBmYWxzZTsK
IAl9CkBAIC0xODA5LDE4ICsxODA3LDYgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwcml2YXRl
IHZvaWQgdmlzaXRUeXBlQW5ub3RhdGlvbnMoVHlwZSBub2RlKSB7Ci0JCWlmIChub2RlLmdldEFT
VCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsKLQkJCUxpc3QgYW5ub3RhdGlvbnMgPSBub2Rl
LmFubm90YXRpb25zKCk7Ci0JCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCkgewotCQkJCWZvciAo
SXRlcmF0b3IgaXQgPSBhbm5vdGF0aW9ucy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7ICkgewot
CQkJCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgaXQubmV4dCgpOwotCQkJ
CQlhbm5vdGF0aW9uLmFjY2VwdCh0aGlzKTsKLQkJCQkJdGhpcy5idWZmZXIuYXBwZW5kKCcgJyk7
Ci0JCQkJfQotCQkJfQotCQl9Ci0JfQotCXByaXZhdGUgdm9pZCB2aXNpdFR5cGVBbm5vdGF0aW9u
cyhOYW1lIG5vZGUpIHsKIAkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxT
OCkgewogCQkJTGlzdCBhbm5vdGF0aW9ucyA9IG5vZGUuYW5ub3RhdGlvbnMoKTsKIAkJCWlmIChh
bm5vdGF0aW9ucyAhPSBudWxsKSB7
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225202</attachid>
            <date>2013-01-04 03:43:00 -0500</date>
            <delta_ts>2013-01-07 00:48:25 -0500</delta_ts>
            <desc>Proposed Fix</desc>
            <filename>Bug-395886--18DOM-AST-Withdraw-annotations-property-from-Name.patch</filename>
            <type>text/plain</type>
            <size>65916</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDNhMzVlNTcuLjI3ZjYwOTEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTcsNyArMTcsNyBAQAogaW1wb3J0IGphdmEu
dXRpbC5MaXN0OwogCiBpbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3Q7Ci0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5kb20uKjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29t
cGlsYXRpb25Vbml0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2Vw
dGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUOwpAQCAtOTgsNCArOTgs
OTI5IEBACiAJCWFubm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOwogCQlj
aGVja1NvdXJjZVJhbmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOwogCX0KKwkK
KwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
Mzk1ODg2CisJICogdGVzdHMgYW5ub3RhdGlvbnMgb24gUVRSIGluIG11bHRpcGxlIHNjZW5hcmlv
cyBvZiBvY2N1cnJlbmNlLgorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJ
cHVibGljIHZvaWQgdGVzdDAwMDIoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhp
cy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDAy
L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAorCQkJCSJw
YWNrYWdlIHRlc3QwMDAyO1xuIiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5U
YXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIglwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlPdXRlciBvdXRlciA9
IG5ldyBPdXRlcigpO1xuIiArCQkKKwkJCQkiCQlPYmplY3QgbXlPYmplY3QgPSBuZXcgT2JqZWN0
KCk7XG4iKworCQkJCSIJCVN0cmluZyBteVN0cmluZztcbiIrCisJCQkJIgkJbXlTdHJpbmcgPSAo
amF2YS5sYW5nLkBNYXJrZXIgU3RyaW5nKSBteU9iamVjdDtcbiIrCisJCQkJIgkJT3V0ZXIuSW5u
ZXIgZmlyc3QgPSBvdXRlci5uZXcgSW5uZXIoKTtcbiIgKworCQkJCSIJCU91dGVyLiBATWFya2Vy
MiBJbm5lciBzZWNvbmQgPSBvdXRlci5uZXcgSW5uZXIoKSA7XG4iICsKKwkJCQkiCQlPdXRlci5J
bm5lci4gQE1hcmtlcjEgRGVlcGVyIGRlZXBlciA9IHNlY29uZC5uZXcgRGVlcGVyKCk7XG4iICsK
KwkJCQkiCQlPdXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIgZGVlcGVyMiA9ICBz
ZWNvbmQubmV3IERlZXBlcigpO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
ImNsYXNzIE91dGVyIHtcbiIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJ
CSIJCXB1YmxpYyBjbGFzcyBEZWVwZXIge1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgl9XG4i
ICsKKwkJCQkifVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1l
bnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyIHt9XG4iICsKKwkJ
CQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4i
ICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5s
YW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFj
ZSBNYXJrZXIyIHt9XG4iCQkKKwkJCQk7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxh
dGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkp
OworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJh
dGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJCUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERl
Y2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCk7CisJCWludCBzQ291bnQgPSAzOyAKKwor
CQkvLyBjYXNlIDEgLSBhbm5vdGF0aW9uIGp1c3QgYmVmb3JlIHRoZSBsYXN0IGZpZWxkCisJCUV4
cHJlc3Npb25TdGF0ZW1lbnQgZXhwcmVzc2lvblN0YXRlbWVudCA9IChFeHByZXNzaW9uU3RhdGVt
ZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCUFzc2lnbm1lbnQgYXNzaWdubWVudCA9
IChBc3NpZ25tZW50KSBleHByZXNzaW9uU3RhdGVtZW50LmdldEV4cHJlc3Npb24oKTsKKwkJYXNz
ZXJ0Tm90TnVsbChhc3NpZ25tZW50KTsKKwkJQ2FzdEV4cHJlc3Npb24gY2FzdEV4cHJlc3Npb24g
PSAoQ2FzdEV4cHJlc3Npb24pYXNzaWdubWVudC5nZXRSaWdodEhhbmRTaWRlKCk7CisJCWFzc2Vy
dE5vdE51bGwoY2FzdEV4cHJlc3Npb24pOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgY2FzdEV4cHJlc3Npb24uZ2V0VHlwZSgpOworCQlhc3NlcnROb3RO
dWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZy5ATWFya2VyIFN0
cmluZyIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9
IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBl
KSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZyIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRp
b25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCVNpbXBs
ZU5hbWUgc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIlN0cmluZyIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBR
dWFsaWZpZWRUeXBlIHdpdGhvdXQgYW5ub3RhdGlvbnMuCisJCVZhcmlhYmxlRGVjbGFyYXRpb25T
dGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCVR5cGUgdHlwZSA9IHZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUu
aXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMCk7CisJCQorCQkvLyBjYXNlIDMgLSBRYXVsaWZpZWQgVHlwZSB3aXRo
IG91dGVyIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIGlubmVyIHdpdGggYW5ub3RhdGlvbnMuCisJ
CXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMiBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CQkKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFu
bm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFu
bm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFu
bm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlh
c3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOwor
CQlzaW1wbGVOYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygi
SW5uZXIiLCBzaW1wbGVOYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNCAtIE11bHRpcGxl
IGxldmVscyB3aXRoIGFubm90YXRpb25zIGF0IHRoZSBsYXN0IG9ubHkuCisJCXZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgc3RhdGVt
ZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1
YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0Tm90TnVsbChxdWFs
aWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5Jbm5lci5ATWFya2VyMSBEZWVwZXIi
LCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOwkJCisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZp
ZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1w
bGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlh
bm5vdGF0aW9ucyA9IHF1YWxpZmllclR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsK
KwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMo
IkRlZXBlciIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA1IC0gTXVsdGlw
bGUgYW5ub3RhdGlvbnMKKwkJdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCXR5cGUg
PSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBl
KSB0eXBlOworCQlhc3NlcnROb3ROdWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyLkBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlciIsIHF1YWxpZmllZFR5cGUudG9T
dHJpbmcoKSk7CQkKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7
CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIyIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlzaW1wbGVOYW1l
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgc2lt
cGxlTmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmllZFR5cGUo
KSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSlxdWFsaWZpZXJUeXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJr
ZXIxIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlzaW1wbGVOYW1lID0gcXVh
bGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBzaW1wbGVOYW1l
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZp
ZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2lt
cGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZXJU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDAp
OworCX0KKworCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVn
LmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyB0aGUgcmVwcmVzZW50YXRpb24gb2YgdHlwZSBhbm5v
dGF0aW9ucyBvbiBhIHBvc3NpYmxlIEpBVkEgNyBhbmQgOCBwbGFjZS4KKwkgKiBAdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDAzKCkgdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgi
L0NvbnZlcnRlcjE4L3NyYy90ZXN0MDAwMy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlT
dHJpbmcgY29udGVudHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAwMztcbiIgKworCQkJCSJpbXBv
cnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBY
IHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xu
IiArCisJCQkJIgkJQE1hcmtlciBPdXRlci5Jbm5lciBmaXJzdFtdID0gbmV3IE91dGVyLklubmVy
WzFdO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIE91dGVyIHtc
biIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJ
In1cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlciB7fVxuIiAKKwkJCQk7CisJCUNv
bXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRl
bnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkpOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2RE
ZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJ
CUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRz
KCk7CisJCWludCBzQ291bnQgPSAwOyAKKworCQkvLyBDdXJyZW50IGRlc2lnbiBleHBlY3RzIGFu
bm90YXRpb24gb25seSBhdCB0aGUgSkFWQSA3IHBsYWNlIGlmIGl0IGlzIGV4cGVjdGVkIGF0IEpB
VkEgOC4KKwkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0aW9u
U3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0
KHNDb3VudCk7CisJCUxpc3QgbW9kaWZpZXJzID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dC5tb2RpZmllcnMoKTsKKwkJYXNzZXJ0VHJ1ZShtb2RpZmllcnMuc2l6ZSgpID09IDEpOworCQlB
bm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbiltb2RpZmllcnMuZ2V0KDApOworCQlh
c3NlcnRFcXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlUeXBlIHR5
cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBs
ZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRv
U3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygp
OworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisKKwkvKioKKwkg
KiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJ
ICogdGVzdHMgUVRSIHdpdGggYW5ub3RhdGlvbnMKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDA0KCkgdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4
L3NyYy90ZXN0MDAwNC9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlTdHJpbmcgY29udGVu
dHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAwNDsiICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5h
bm5vdGF0aW9uLlRhcmdldDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9u
ZTwvKnN0YXJ0Ki9ATWFya2VyMSBPdXRlcjxJbnRlZ2VyPi4gQE1hcmtlcjIgSW5uZXI8RG91Ymxl
PltdLyplbmQqLz4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImludGVyZmFjZSBPbmU8VD4g
e31cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXI8VD4ge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNz
IElubmVyPFM+IHt9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBN
YXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iIAorCQkJ
CTsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoCisJ
CQkJY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsMCk7CisJCUFy
cmF5VHlwZSB0eXBlID0gKEFycmF5VHlwZSkgKChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlZGVjbGFy
YXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKSkudHlwZUFyZ3VtZW50cygpLmdldCgw
KTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYW5ub3RhdGlvbiIsIHR5cGUpOworCQlJVHlwZUJpbmRp
bmcgYmluZGluZyA9IHR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8g
YmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1l
IiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91
YmxlPltdIiwgYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlUeXBlIGNvbXBvbmVudFR5
cGUgPSB0eXBlLmdldENvbXBvbmVudFR5cGUoKTsKKwkJYmluZGluZyA9IGNvbXBvbmVudFR5cGUu
cmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcp
OworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVy
PGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91YmxlPiIsIGJpbmRpbmcuZ2V0
UXVhbGlmaWVkTmFtZSgpKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBjb21w
b25lbnRUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBh
cmFtZXRlcml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBjb21wb25lbnRUeXBlOworCQlU
eXBlIHR5cGUyID0gcGFyYW1ldGVyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKCJO
b3QgcXVhbGlmaWVkIiwgdHlwZTIuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlRdWFsaWZpZWRUeXBl
IHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTI7CisJCWJpbmRpbmcgPSBxdWFs
aWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmci
LCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0
MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLCBi
aW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCVR5cGUgcXVhbGlmaWVyID0gcXVhbGlmaWVk
VHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBx
dWFsaWZpZXIuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJYmluZGluZyA9IHF1YWxpZmllci5y
ZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7
CisJCWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMDQuT3V0ZXI8
amF2YS5sYW5nLkludGVnZXI+IiwgYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlwYXJh
bWV0ZXJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyOworCQl0eXBlMiA9
IHBhcmFtZXRlcml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHNpbXBsZSB0
eXBlIiwgdHlwZTIuaXNTaW1wbGVUeXBlKCkpOworCQliaW5kaW5nID0gdHlwZTIucmVzb2x2ZUJp
bmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcpOworCQlhc3Nl
cnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFu
Zy5JbnRlZ2VyPiIsIGJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwl9CisJCisJLyoqCisJ
ICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4Ngor
CSAqIHRlc3RzIFFUUiB3aXRoIGFubm90YXRpb25zCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwNSgpIHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24geworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIx
OC9zcmMvdGVzdDAwMDUvWC5qYXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRl
bnRzID0gCisJCQkJInBhY2thZ2UgdGVzdDAwMDU7IiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcu
YW5ub3RhdGlvbi5UYXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBP
bmU8IE91dGVyLklubmVyID4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkgaW1w
bGVtZW50cyBPbmU8IE91dGVyLiBATWFya2VyMSBJbm5lciA+IHtcbiIgKyAKKwkJCQkifVxuIiAr
IAorCQkJCSJjbGFzcyBaIGltcGxlbWVudHMgT25lPCBATWFya2VyMSBPdXRlci5Jbm5lciA+IHtc
biIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBXIGltcGxlbWVudHMgT25lPCBATWFya2Vy
MSBPdXRlci4gQE1hcmtlcjIgSW5uZXIgPiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiaW50
ZXJmYWNlIE9uZTxUPiB7fVxuIiArIAorCQkJCSJjbGFzcyBPdXRlciB7XG4iICsgCisJCQkJIglw
dWJsaWMgY2xhc3MgSW5uZXIge31cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJAVGFyZ2V0IChq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50
ZXJmYWNlIE1hcmtlcjEge31cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlv
bi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlcjIge31c
biIgCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBidWls
ZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJaW50IHRDb3Vu
dCA9IDA7CisJCQorCQkvLyBjYXNlIDEgLSBubyBhbm5vdGF0aW9ucyBPdXRlci5Jbm5lcgorCQlU
eXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1RO
b2RlKGN1LCB0Q291bnQrKyk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQlMaXN0IHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
VHlwZSB0eXBlID0gKFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCB0eXBlLnRv
U3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSAyIC0gUVRSIHdpdGggb25lIGFubm90YXRpb24gT3V0
ZXIuQE1hcmtlcjEgSW5uZXIKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbiln
ZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7
CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOwor
CQlhc3NlcnRFcXVhbHMoIklubmVyIiwgcXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJpbmco
KSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlBbm5vdGF0aW9uIGFubm90
YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBl
ID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJU
eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRv
U3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSAzIC0gUVRSIHdpdGggb25lIGFubm90YXRpb24gYXQg
dGhlIGJlZ2lubmluZyBATWFya2VyMSBPdXRlci5Jbm5lcgorCQl0eXBlZGVjbGFyYXRpb24gPSAo
VHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
dHlwZSA9IChUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRUcnVlKHR5cGUuaXNR
dWFsaWZpZWRUeXBlKCkpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyLklubmVyIiwg
dHlwZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBl
OworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgcXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJp
bmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlh
c3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRU
cnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9u
KSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0
aW9uLnRvU3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSA0IC0gUVRSIHdpdGggYW5ub3RhdGlvbnMg
YXQgYm90aCB0aGUgdHlwZXMgQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIKKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJ
CXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5z
dXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRz
LnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBP
dXRlci5ATWFya2VyMiBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmll
ZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5
cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7
CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3Nl
cnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVy
VHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlm
aWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVh
bGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChB
bm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEi
LCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJfQorCQorCS8qKgorCSAqIGh0dHBzOi8vYnVn
cy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyBQUVRS
IHdpdGggYW5ub3RhdGlvbnMgcGFydAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJ
ICovCisJcHVibGljIHZvaWQgdGVzdDAwMDYoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsK
KwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rl
c3QwMDA2L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAor
CQkJCSJwYWNrYWdlIHRlc3QwMDA2OyIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgT25lPE91dGVy
LiAgSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFz
cyBYMSBpbXBsZW1lbnRzIE9uZTxPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4+
IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBYMiBpbXBsZW1lbnRzIE9uZTxPdXRl
ci4gQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQki
fVxuIiArIAorCQkJCSJjbGFzcyBYMyBpbXBsZW1lbnRzIE9uZTxATWFya2VyMSBPdXRlci4gQE1h
cmtlcjIgSW5uZXIuIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQki
Y2xhc3MgWSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91
YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkxIGltcGxlbWVudHMgT25l
PE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIEBNYXJrZXIxIERlZXBlcjxEb3VibGU+PiB7XG4iICsg
CisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWTIgaW1wbGVtZW50cyBPbmU8T3V0ZXIxLiBATWFy
a2VyMSBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiAr
IAkJCQkKKwkJCQkiY2xhc3MgWTMgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIxLiBJbm5l
cjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAkJCQkKKwkJ
CQkiY2xhc3MgWTQgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIxLiBATWFya2VyMiBJbm5l
cjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAkJCQkKKwkJ
CQkiY2xhc3MgWiBpbXBsZW1lbnRzIE9uZTxPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERv
dWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBaMSBpbXBsZW1lbnRzIE9u
ZTxATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAK
KwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBaMiBpbXBsZW1lbnRzIE9uZTxPdXRlcjI8SW50ZWdl
cj4uIEBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJ
In1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFcgaW1wbGVtZW50cyBPbmU8T3V0ZXIzPERvdWJsZT4u
IEBNYXJrZXIxIEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJhY3Rlcj4uIERlZXBlcjxEb3Vi
bGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImludGVyZmFjZSBPbmU8VD4ge31c
biIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVy
IHtcbiIgKworCQkJCSIgICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4iICsKKwkJCQki
ICAgICAgIH1cbiIrCisJCQkJIiAgIH1cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBP
dXRlcjEge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVyPFQ+IHtcbiIgKworCQkJCSIg
ICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4iICsKKwkJCQkiICAgICAgIH1cbiIrCisJ
CQkJIiAgIH1cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBPdXRlcjIgPFQ+IHtcbiIg
KyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iICsKKwkJCQkiICAgICAgIHB1YmxpYyBj
bGFzcyBEZWVwZXI8Uz4ge31cbiIgKworCQkJCSIgICB9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJ
CQkiY2xhc3MgT3V0ZXIzIDxUPiB7XG4iICsgCisJCQkJIglwdWJsaWMgY2xhc3MgSW5uZXI8Sywg
Vj4ge1xuIiArCisJCQkJIiAgICAgICBwdWJsaWMgY2xhc3MgRGVlcGVyPFM+IHt9XG4iICsKKwkJ
CQkiICAgfVxuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5v
dGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2Vy
MSB7fVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBl
LlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyMiB7fVxuIiAKKwkJCQk7CisJ
CUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNv
bnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkpOworCQlpbnQgdENvdW50ID0gMDsKKwkJCisJ
CS8vIGNhc2UgMTogdmFuaWxsYSBjYXNlIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIHdpdGggc2lu
Z2xlIHR5cGVBcmd1bWVudCAKKwkJLy8gT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJsZT4KKwkJVHlw
ZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0cml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygp
LmdldCgwKTsKKwkJTGlzdCB0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJn
dW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50
eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7
CisJCVR5cGUgdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlw
ZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBs
ZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKXR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0
ZXIuSW5uZXIuRGVlcGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJTmFtZSBuYW1lID0g
c2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUo
KSk7CisJCVF1YWxpZmllZE5hbWUgcXVhbGlmaWVkTmFtZSA9IChRdWFsaWZpZWROYW1lKSBuYW1l
OworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkRlZXBlciIsIHF1YWxpZmllZE5hbWUudG9T
dHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBPbmUgYW5ub3RhdGlvbiBhZnRlciB0aGUgZmly
c3QgY2xhc3MgCisJCS8vIE91dGVyLiBATWFya2VyMSBJbm5lci5EZWVwZXI8RG91YmxlPgorCQl0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsr
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0
aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJh
bWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1
bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5l
ci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVB
cmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1l
bnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5p
c1F1YWxpZmllZFR5cGUoKSk7CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IChRdWFs
aWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyLkRl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2Vy
dFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlUeXBlIHF1YWxpZmllclR5cGUgPSAg
cXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBl
LmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVhbGlmaWVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHF1
YWxpZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
QW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5h
bWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5h
bWUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwor
CQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBs
ZVR5cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCQorCQkvLyBjYXNlIDMgLSBJbm5lciB0eXBlcyBhbm5vdGF0ZWQgd2l0aCBvdXRlciBu
b3QgYW5ub3RhdGVkIHdpdGggbGFzdCB0eXBlIGFyZyAKKwkJLy8gT3V0ZXIuIEBNYXJrZXIxIElu
bmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVj
bGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAo
UGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCku
Z2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRz
KCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRy
aXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4i
LCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50
b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRF
cXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZp
ZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxp
ZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShx
dWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVh
bGlmaWVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2Vy
MSBJbm5lciIsIHF1YWxpZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVyVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlu
YW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBu
YW1lLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1w
bGVUeXBlKXR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5n
KCkpOwkJCisJCQorCQkvLyBjYXNlIDQgLSBvbmUgYW5ub3RhdGlvbiBvbiB0aGUgb3V0ZXJtb3N0
LCBvbmUgaW4gbWlkZGxlIGFuZCBvbmUgdHlwZWFyZyBpbiBpbm5lcm1vc3QKKyAJCS8vIEBNYXJr
ZXIxIE91dGVyLiBATWFya2VyMiBJbm5lci4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50
ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBl
LnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgp
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lci5E
ZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lci5EZWVwZXIiLCBx
dWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1l
KCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0
aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUu
aXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlICA9IChRdWFsaWZpZWRUeXBlKSBx
dWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyLkBNYXJrZXIyIElu
bmVyIiwgcXVhbGlmaWVyVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZp
ZXJUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUg
PSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUu
dG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlh
c3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9T
dHJpbmcoKSk7CQkKKwkJYW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFu
bm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIs
IGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDUgLSB3aXRob3V0IGFubm90
YXRpb25zLCBidXQgd2l0aCB0eXBlYXJncyBhdCBzZWNvbmQgYW5kIHRoaXJkIHR5cGVzCisJCS8v
IE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRp
b24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsdENvdW50KyspOworCQlwYXJhbWV0
cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRl
cmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkp
OworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMu
Z2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91
YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1l
bnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFy
YW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0
cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDAp
OworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkKKwkJ
YXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygp
OworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5
cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlw
ZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5h
bWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1YWxpZmllZE5hbWUp
IG5hbWU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlmaWVkTmFtZS50b1N0
cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNiAtIEFubm90IGluIGJldHdlZW4gdHdvIFBRUlQgd2l0
aCBvdXRlcm1vc3QgbmVpdGhlciBhbm5vdGF0ZWQgbm9yIGhhdmluZyB0eXBlYXJncworCQkvLyBP
dXRlcjEuIElubmVyPEludGVnZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJ
cGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1
cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMu
c2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uQE1h
cmtlcjEgRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+LkBNYXJrZXIxIERl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9u
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlm
aWVyKCk7CQkKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5
cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVk
VHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOwor
CQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIklu
dGVnZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRU
eXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUg
PSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRUcnVlKG5hbWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1
YWxpZmllZE5hbWUpIG5hbWU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlm
aWVkTmFtZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNyAtIE91dGVybW9zdCBzdGlsbCBl
bXB0eSAobm8gYW5ub3RhdGlvbnMsIG5vIHR5cGUgYXJncyksIGZvbGxvd2VkIGJ5IGFubm90YXRp
b24sIGFuZCB0aGVuIHR5cGVhcmdzCisJCS8vIE91dGVyMS4gQE1hcmtlcjEgSW5uZXI8SW50ZWdl
cj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24p
Z2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIxLkBNYXJrZXIxIElubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1l
dHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5
cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09
IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVh
bHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVh
bGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MS5ATWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5n
KCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygi
RGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJ
CXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3Nl
cnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJPdXRlcjEuQE1hcmtlcjEgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRv
U3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUg
PSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIs
IHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5ATWFya2VyMSBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlm
aWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9
PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQluYW1l
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5h
bWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQl0eXBl
ID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2lt
cGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQluYW1lID0g
c2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5hbWUoKSk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIxIiwgbmFtZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNh
c2UgOCAtIFNpbWlsYXIgdG8gYWJvdmUsIGJ1dCB3aXRoIHRoZSBtYWpvciBkaWZmZXJlbmNlIG9m
IGFubm90YXRpb24gc2hpZnRlZCB0byBvdXRlcm1vc3QuCisJCS8vIEBNYXJrZXIxIE91dGVyMS4g
SW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyPEludGVnZXI+LkRlZXBlcjxEb3Vi
bGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVu
dHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJh
bWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlw
ZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRU
eXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFz
c2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1
YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIo
KTsJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsK
KwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0
cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0g
MSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVh
bGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJr
ZXIxIE91dGVyMS5Jbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRp
b25zLnNpemUoKSA9PSAwKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwg
bmFtZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2lt
cGxlVHlwZSkgdHlwZTsKKwkJYW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90
YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFu
bm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJ
YXNzZXJ0VHJ1ZShuYW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEi
LCBuYW1lLnRvU3RyaW5nKCkpOworCQkJCQorCQkvLyBjYXNlIDk6IHNjZW5hcmlvIG9mIHRoZSBh
Ym92ZSBjYXNlIHBsdXMgYW5vdGhlciBhbm5vdGF0aW9uIGF0IG1pZC1sZXZlbC4KKwkJLy8gQE1h
cmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPiAKKwkJ
dHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQr
Kyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJh
dGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJn
dW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUp
dHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBN
YXJrZXIyIElubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50
b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBl
ID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIs
IHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5A
TWFya2VyMiBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkp
OworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVl
cGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1
YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3NlcnRU
cnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxz
KCJATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRU
eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBl
QXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJ
CXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50
ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5
cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVk
VHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91
dGVyMS5ATWFya2VyMiBJbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUo
bmFtZS5pc1NpbXBsZU5hbWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0
eXBlOworCQlhbm5vdGF0aW9ucyA9IHR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5u
b3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50
b1N0cmluZygpKTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVl
KG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMSIsIG5hbWUudG9T
dHJpbmcoKSk7CisJCQkJCisJCS8vIGNhc2UgMTAgLSBQUVJUIHdpdGggdHdvIHR5cGUgYXJncyBi
dXQgd2l0aG91dCBhbm5vdGF0aW9ucworCQkvLyBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVy
PERvdWJsZT4gCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVh
bHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIu
RGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRy
dWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmll
ZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgcXVhbGlm
aWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIiLCBxdWFsaWZp
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lICA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOwor
CQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlw
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVy
VHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXpl
KCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2Vy
dEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6
ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjIiLCB0eXBlLnRvU3RyaW5n
KCkpOworCQkKKworCQkvLyBjYXNlIDExIC0gYW5ub3RhdGlvbiBhdCBvdXRlcm1vc3QgaW4gYWRk
aXRpb24gdG8gc2NlbmFyaW8gaW4gY2FzZSAxMC4KKwkJLy8gQE1hcmtlcjEgT3V0ZXIyPEludGVn
ZXI+LklubmVyLkRlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xh
cmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQ
YXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5n
ZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4i
LCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlciIsIHF1YWxpZmllZFR5cGUu
dG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0
RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlm
aWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9
PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJ
CQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFs
aWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0
ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFy
Z3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0
eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVn
ZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBl
KCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIyIiwgdHlwZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3Rh
dGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRp
b25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJp
bmcoKSk7CisJCQkJCisJCS8vIGNhc2UgMTIgLSBObyBhbm5vdGF0aW9ucyBhdCBvdXRlcm1vc3Qs
IGJ1dCBvdXRlcm1vc3QgaGFzIHR5cGVBbm5vdGF0aW9ucy4KKwkJLy8gT3V0ZXIyPEludGVnZXI+
LiBATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlcklu
dGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50
cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVy
LkBNYXJrZXIyIERlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5
cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRU
eXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5ATWFya2VyMSBJbm5l
ci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0g
cXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRv
U3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsK
KwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAo
QW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIy
IiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOwkJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFs
aWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmll
clR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVyIiwg
cXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5h
bWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsK
KwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCXR5
cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CQkKKworCQkvLyBjYXNlIDEzIC0gYSBsaXN0IG9m
IGFubm90YXRpb25zIGFuZCBtdWx0aXBsZSB0eXBlQXJndW1lbnQgZWxlbWVudCBsaXN0cy4KKwkJ
Ly8gT3V0ZXIzPERvdWJsZT4uIEBNYXJrZXIxIEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJh
Y3Rlcj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0
aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJh
bWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQo
MCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsK
KwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjM8RG91YmxlPi5ATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLENo
YXJhY3Rlcj4uRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlw
ZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVl
KHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5
cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIzPERvdWJsZT4uQE1hcmtlcjEgQE1hcmtl
cjIgSW5uZXI8SW50ZWdlcixDaGFyYWN0ZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJp
bmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlw
ZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsK
KwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJCQorCQlh
c3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVl
KHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDIpOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0
eXBlQXJndW1lbnRzLmdldCgwKS50b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCJDaGFyYWN0
ZXIiLCB0eXBlQXJndW1lbnRzLmdldCgxKS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiSW5uZXIiLCBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKS50b1N0cmluZygpKTsKKwkJYW5ub3Rh
dGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3Rh
dGlvbnMuc2l6ZSgpID09IDIpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlv
bnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3Rh
dGlvbnMuZ2V0KDEpLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlw
ZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVy
aXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1
YWxpZmllclR5cGU7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlQXJndW1lbnRzLmdldCgwKS50b1N0cmluZygpKTsKKwkJ
dHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNT
aW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIzIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwl9CiB9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0
L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNo
ZXJUZXN0LmphdmEKaW5kZXggNjE5OTRmMi4uYmQ5ZGZhMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RNYXRjaGVyVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2
YQpAQCAtMTMzOCw0ICsxMzM4LDMwIEBACiAJCXgxLnZhcmFyZ3NBbm5vdGF0aW9ucygpLmFkZCh0
aGlzLkFOTzEpOwogCQliYXNpY01hdGNoKHgxKTsKIAl9CisJCisJLy8gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgorCXB1YmxpYyB2b2lkIHRlc3RR
dWFsaWZpZWRUeXBlQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsKCkgPCBB
U1QuSkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVF1YWxpZmllZFR5cGUgeDEgPSB0aGlzLmFz
dC5uZXdRdWFsaWZpZWRUeXBlKHRoaXMuVDEsIHRoaXMuTjEpOworCQl4MS5hbm5vdGF0aW9ucygp
LmFkZCh0aGlzLkFOTzEpOworCQl4MSA9IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUoeDEsIHRo
aXMuTjIpOworCQl4MS5hbm5vdGF0aW9ucygpLmFkZCh0aGlzLkFOTzIpOworCQliYXNpY01hdGNo
KHgxKTsKKwl9CisJCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTM5NTg4NgorCXB1YmxpYyB2b2lkIHRlc3RQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZUFubm90YXRpb24oKSB7CisJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCgpIDwgQVNULkpMUzgpIHsK
KwkJCXJldHVybjsKKwkJfQorCQlQYXJhbWV0ZXJpemVkVHlwZSB4MSA9IHRoaXMuYXN0Lm5ld1Bh
cmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5O
MSkpOworCQl4MS5nZXRUeXBlKCkuYW5ub3RhdGlvbnMoKS5hZGQodGhpcy5BTk8xKTsKKwkJeDEu
dHlwZUFyZ3VtZW50cygpLmFkZCh0aGlzLmFzdC5uZXdTaW1wbGVUeXBlKHRoaXMuYXN0Lm5ld1Np
bXBsZU5hbWUoIlNOMSIpKSk7CisJCXgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUo
dGhpcy5hc3QubmV3UXVhbGlmaWVkVHlwZSh4MSwgdGhpcy5OMikpOworCQl4MS50eXBlQXJndW1l
bnRzKCkuYWRkKHRoaXMuYXN0Lm5ld1NpbXBsZVR5cGUodGhpcy5hc3QubmV3U2ltcGxlTmFtZSgi
U04yIikpKTsKKwkJeDEuZ2V0VHlwZSgpLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJ
CWJhc2ljTWF0Y2goeDEpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5q
YXZhCmluZGV4IGY4MTM2YjIuLmZjZTVlZGQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252
ZXJ0ZXIuamF2YQpAQCAtMzA5Myw3ICszMDkzLDYgQEAKIAkJCQkJCWludCBzdGFydCA9IHR5cGVB
bm5vdGF0aW9uLnNvdXJjZVN0YXJ0OwogCQkJCQkJaW50IGVuZCA9IHR5cGVBbm5vdGF0aW9uLnNv
dXJjZUVuZDsKIAkJCQkJCWFubm90YXRpb24uc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0
YXJ0ICsgMSk7Ci0JCQkJCQluYW1lLmFubm90YXRpb25zLmFkZChhbm5vdGF0aW9uKTsKIAkJCQkJ
fQogCQkJCX0KIAkJfQpAQCAtMzI2Myw2ICszMjYyLDcgQEAKIAkJCQlQYXJhbWV0ZXJpemVkUXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSA9
IChQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZTsKIAkJ
CQljaGFyW11bXSB0b2tlbnMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50
b2tlbnM7CiAJCQkJVHlwZVJlZmVyZW5jZVtdW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6
ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnR5cGVBcmd1bWVudHM7CisJCQkJb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uW11bXSB0eXBlQW5ub3RhdGlvbnMg
PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uczsKIAkJCQls
b25nW10gcG9zaXRpb25zID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291
cmNlUG9zaXRpb25zOwogCQkJCXNvdXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIp
OwogCQkJCXN3aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewpAQCAtMzI4MCwxNSArMzI4MCwzMiBA
QAogCQkJCQl9CiAJCQkJCWJyZWFrOwogCQkJCQlkZWZhdWx0IDoKKwkJCQkJCS8vIGh0dHBzOi8v
YnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKIAkJCQkJCWlmICh0
eXBlQXJndW1lbnRzICE9IG51bGwpIHsKLQkJCQkJCQlpbnQgbnVtYmVyT2ZFbmNsb3NpbmdUeXBl
ID0gMDsKIAkJCQkJCQlpbnQgc3RhcnRpbmdJbmRleCA9IDA7CiAJCQkJCQkJaW50IGVuZGluZ0lu
ZGV4ID0gMDsKKwkJCQkJCQlpbnQgbnVtYmVyT2ZFbmNsb3NpbmdUeXBlID0gMDsKKwogCQkJCQkJ
CWZvciAoaW50IGkgPSAwLCBtYXggPSB0eXBlQXJndW1lbnRzLmxlbmd0aDsgaSA8IG1heDsgaSsr
KSB7CiAJCQkJCQkJCWlmICh0eXBlQXJndW1lbnRzW2ldICE9IG51bGwpIHsKIAkJCQkJCQkJCW51
bWJlck9mRW5jbG9zaW5nVHlwZSsrOwogCQkJCQkJCQl9IGVsc2UgaWYgKG51bWJlck9mRW5jbG9z
aW5nVHlwZSA9PSAwKSB7CiAJCQkJCQkJCQllbmRpbmdJbmRleCsrOworCQkJCQkJCQl9CisJCQkJ
CQkJfQorCQkJCQkJCWlmICh0eXBlQW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJCQkJCQlpbnQg
YW5ub3RfZW5kaW5nSW5kZXggPSAtMTsKKwkJCQkJCQkJbnVtYmVyT2ZFbmNsb3NpbmdUeXBlID0g
MDsKKwkJCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBbm5vdGF0aW9ucy5sZW5ndGg7
IGkgPCBtYXg7IGkrKykgeworCQkJCQkJCQkJaWYgKHR5cGVBbm5vdGF0aW9uc1tpXSAhPSBudWxs
KSB7CisJCQkJCQkJCQkJbnVtYmVyT2ZFbmNsb3NpbmdUeXBlKys7CisJCQkJCQkJCQl9IGVsc2Ug
aWYgKG51bWJlck9mRW5jbG9zaW5nVHlwZSA9PSAwKSB7CisJCQkJCQkJCQkJYW5ub3RfZW5kaW5n
SW5kZXgrKzsKKwkJCQkJCQkJCX0KKwkJCQkJCQkJfQkJCQkJCisJCQkJCQkJCWVuZGluZ0luZGV4
ID0gKGFubm90X2VuZGluZ0luZGV4IDwgZW5kaW5nSW5kZXgpID8gYW5ub3RfZW5kaW5nSW5kZXgg
OiBlbmRpbmdJbmRleDsKKwkJCQkJCQkJaWYgKGVuZGluZ0luZGV4IDwgMCkgeworCQkJCQkJCQkJ
ZW5kaW5nSW5kZXggPSAwOwogCQkJCQkJCQl9CiAJCQkJCQkJfQogCQkJCQkJCU5hbWUgbmFtZSA9
IG51bGw7CkBAIC0zMzEyLDI5ICszMzI5LDM1IEBACiAJCQkJCQkJaW50IHN0YXJ0ID0gKGludCko
cG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwogCQkJCQkJCWludCBlbmQgPSAoaW50KSBw
b3NpdGlvbnNbZW5kaW5nSW5kZXhdOwogCQkJCQkJCXNpbXBsZVR5cGUuc2V0U291cmNlUmFuZ2Uo
c3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7Ci0JCQkJCQkJaWYgKGVuZGluZ0luZGV4ID09IDAgJiYg
dHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0pICE9IG51bGwpIHsKKwkJCQkJCQlpZiAodHlwZVJlZmVy
ZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2Uu
YW5ub3RhdGlvbnNbZW5kaW5nSW5kZXhdKSAhPSBudWxsKSB7CiAJCQkJCQkJCWFubm90YXRlVHlw
ZShzaW1wbGVUeXBlLCBhbm5vdGF0aW9ucyk7CiAJCQkJCQkJfQotCQkJCQkJCVBhcmFtZXRlcml6
ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0
KTsKLQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5zZXRUeXBlKHNpbXBsZVR5cGUpOwotCQkJCQkJ
CWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewotCQkJCQkJCQlyZWNvcmROb2RlcyhzaW1wbGVU
eXBlLCB0eXBlUmVmZXJlbmNlKTsKLQkJCQkJCQkJcmVjb3JkTm9kZXMocGFyYW1ldGVyaXplZFR5
cGUsIHR5cGVSZWZlcmVuY2UpOwotCQkJCQkJCX0KLQkJCQkJCQlzdGFydCA9IHNpbXBsZVR5cGUu
Z2V0U3RhcnRQb3NpdGlvbigpOwotCQkJCQkJCWVuZCA9IHN0YXJ0ICsgc2ltcGxlVHlwZS5nZXRM
ZW5ndGgoKSAtIDE7Ci0JCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHNb
ZW5kaW5nSW5kZXhdLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7Ci0JCQkJCQkJCWZpbmFsIFR5cGUg
dHlwZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XVtpXSk7Ci0JCQkJ
CQkJCXBhcmFtZXRlcml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKS5hZGQodHlwZTIpOwotCQkJCQkJ
CQllbmQgPSB0eXBlMi5nZXRTdGFydFBvc2l0aW9uKCkgKyB0eXBlMi5nZXRMZW5ndGgoKSAtIDE7
Ci0JCQkJCQkJfQogCQkJCQkJCWludCBpbmRleE9mRW5jbG9zaW5nVHlwZSA9IDE7Ci0JCQkJCQkJ
cGFyYW1ldGVyaXplZFR5cGUuaW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlwZTsKLQkJCQkJCQll
bmQgPSByZXRyaWV2ZUNsb3NpbmdBbmdsZUJyYWNrZXRQb3NpdGlvbihlbmQgKyAxKTsKLQkJCQkJ
CQlsZW5ndGggPSBlbmQgKyAxOwotCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFNvdXJjZVJh
bmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJCVR5cGUgY3VycmVudFR5cGUgPSBz
aW1wbGVUeXBlOworCQkJCQkJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZTsKKwkJCQkJCQlp
ZiAodHlwZUFyZ3VtZW50c1tlbmRpbmdJbmRleF0gIT0gbnVsbCkgeworCQkJCQkJCQlQYXJhbWV0
ZXJpemVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZSA9IG5ldyBQYXJhbWV0ZXJpemVkVHlwZSh0aGlz
LmFzdCk7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFR5cGUoc2ltcGxlVHlwZSk7CisJ
CQkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJCQkJcmVjb3JkTm9kZXMo
c2ltcGxlVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCQlyZWNvcmROb2RlcyhwYXJhbWV0
ZXJpemVkVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCX0KKwkJCQkJCQkJc3RhcnQgPSBz
aW1wbGVUeXBlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJCQkJCQkJZW5kID0gc3RhcnQgKyBzaW1w
bGVUeXBlLmdldExlbmd0aCgpIC0gMTsKKwkJCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5
cGVBcmd1bWVudHNbZW5kaW5nSW5kZXhdLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7CisJCQkJCQkJ
CQlmaW5hbCBUeXBlIHR5cGUyID0gY29udmVydFR5cGUodHlwZUFyZ3VtZW50c1tlbmRpbmdJbmRl
eF1baV0pOworCQkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0
eXBlMik7CisJCQkJCQkJCQllbmQgPSB0eXBlMi5nZXRTdGFydFBvc2l0aW9uKCkgKyB0eXBlMi5n
ZXRMZW5ndGgoKSAtIDE7CisJCQkJCQkJCX0JCQkJCQkJCQorCQkJCQkJCQlpbmRleE9mRW5jbG9z
aW5nVHlwZSA9IDE7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVu
Y2xvc2luZ1R5cGU7CisJCQkJCQkJCWVuZCA9IHJldHJpZXZlQ2xvc2luZ0FuZ2xlQnJhY2tldFBv
c2l0aW9uKGVuZCArIDEpOworCQkJCQkJCQlsZW5ndGggPSBlbmQgKyAxOworCQkJCQkJCQlwYXJh
bWV0ZXJpemVkVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJ
CQkJCQkJY3VycmVudFR5cGUgPSBwYXJhbWV0ZXJpemVkVHlwZTsKKwkJCQkJCQl9CiAJCQkJCQkJ
c3RhcnRpbmdJbmRleCA9IGVuZGluZ0luZGV4ICsgMTsKLQkJCQkJCQlUeXBlIGN1cnJlbnRUeXBl
ID0gcGFyYW1ldGVyaXplZFR5cGU7CisKIAkJCQkJCQl3aGlsZShzdGFydGluZ0luZGV4IDwgdHlw
ZUFyZ3VtZW50cy5sZW5ndGgpIHsKIAkJCQkJCQkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3
IFNpbXBsZU5hbWUodGhpcy5hc3QpOwogCQkJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRl
bnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4XSkpOwpAQCAtMzM0Myw3ICsz
MzY2LDcgQEAKIAkJCQkJCQkJZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOwog
CQkJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEp
OwogCQkJCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsK
LQkJCQkJCQkJUXVhbGlmaWVkVHlwZSBxdWFsaWZpZWRUeXBlID0gbmV3IFF1YWxpZmllZFR5cGUo
dGhpcy5hc3QpOworCQkJCQkJCQlxdWFsaWZpZWRUeXBlID0gbmV3IFF1YWxpZmllZFR5cGUodGhp
cy5hc3QpOwogCQkJCQkJCQlxdWFsaWZpZWRUeXBlLnNldFF1YWxpZmllcihjdXJyZW50VHlwZSk7
CiAJCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0TmFtZShzaW1wbGVOYW1lKTsKIAkJCQkJCQkJaWYg
KHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBl
UmVmZXJlbmNlLmFubm90YXRpb25zW3N0YXJ0aW5nSW5kZXhdKSAhPSBudWxsKSB7CkBAIC0zMzg4
LDE2ICszNDExLDk5IEBACiAJCQkJCQl9CiAJCQkJfQogCQkJfSBlbHNlIGlmICh0eXBlUmVmZXJl
bmNlIGluc3RhbmNlb2Ygb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFs
aWZpZWRUeXBlUmVmZXJlbmNlKSB7Ci0JCQkJY2hhcltdW10gbmFtZSA9ICgob3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVm
ZXJlbmNlKS5nZXRUeXBlTmFtZSgpOwotCQkJCWludCBuYW1lTGVuZ3RoID0gbmFtZS5sZW5ndGg7
Ci0JCQkJbG9uZ1tdIHBvc2l0aW9ucyA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmFzdC5RdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlKS5zb3VyY2VQb3Np
dGlvbnM7Ci0JCQkJc291cmNlU3RhcnQgPSAoaW50KShwb3NpdGlvbnNbMF0+Pj4zMik7Ci0JCQkJ
bGVuZ3RoID0gKGludCkocG9zaXRpb25zW25hbWVMZW5ndGggLSAxXSAmIDB4RkZGRkZGRkYpIC0g
c291cmNlU3RhcnQgKyAxOwotCQkJCWZpbmFsIE5hbWUgcXVhbGlmaWVkTmFtZSA9IHRoaXMuc2V0
UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXMobmFtZSwgcG9zaXRpb25zLCB0eXBlUmVm
ZXJlbmNlLCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zKTsKLQkJCQlmaW5hbCBTaW1wbGVUeXBl
IHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFzdCk7Ci0JCQkJc2ltcGxlVHlwZS5z
ZXROYW1lKHF1YWxpZmllZE5hbWUpOwotCQkJCXR5cGUgPSBzaW1wbGVUeXBlOwotCQkJCXR5cGUu
c2V0U291cmNlUmFuZ2Uoc291cmNlU3RhcnQsIGxlbmd0aCk7CisJCQkJLy8gaHR0cHM6Ly9idWdz
LmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgorCQkJCWludCBpbmRleCA9
IDA7CisJCQkJUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlID0g
KFF1YWxpZmllZFR5cGVSZWZlcmVuY2UpdHlwZVJlZmVyZW5jZTsKKwkJCQljaGFyW11bXSB0b2tl
bnMgPSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnRva2VuczsKKwkJCQlpbnQgbnVtYmVyT2ZFbmNs
b3NpbmdUeXBlID0gMDsKKwkJCQlpbnQgc3RhcnRpbmdJbmRleCA9IDA7CisJCQkJaW50IGVuZGlu
Z0luZGV4ID0gMDsKKwkJCQlib29sZWFuIGhhc0Fubm90YXRpb25zID0gKCh0aGlzLmFzdC5hcGlM
ZXZlbCgpID49IEFTVC5KTFM4KSAmJiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxs
KSk7CisKKwkJCQlpZiAoaGFzQW5ub3RhdGlvbnMpIHsKKwkJCQkJCisJCQkJCWZvciAoOyAoaW5k
ZXggPCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCk7ICsraW5kZXgpIHsgCisJCQkJ
CQlpZiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpbmRleF0gIT0gbnVsbCkgIHsKKwkJCQkJ
CSAgCW51bWJlck9mRW5jbG9zaW5nVHlwZSsrOworCQkJCQkJfSBlbHNlIGlmIChudW1iZXJPZkVu
Y2xvc2luZ1R5cGUgPT0gMCkgeworCQkJCQkJCWVuZGluZ0luZGV4Kys7CisJCQkJCQl9CisJCQkJ
CX0KKwkJCQl9CisJCQkJCisJCQkJaWYgKGhhc0Fubm90YXRpb25zICYmIChlbmRpbmdJbmRleCA8
IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoKSkgeworCQkJCQkKKwkJCQkJbG9uZ1td
IHBvc2l0aW9ucyA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFs
aWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlKS5zb3VyY2VQb3NpdGlvbnM7CisJCQkJ
CXNvdXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIpOworCQkJCQkKKwkJCQkJTmFt
ZSBuYW1lID0gbnVsbDsKKwkJCQkJaWYgKGVuZGluZ0luZGV4IC0gc3RhcnRpbmdJbmRleCA8PSAx
KSB7CisJCQkJCQlmaW5hbCBTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcgU2ltcGxlTmFtZSh0
aGlzLmFzdCk7CisJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3Ry
aW5nKHRva2Vuc1swXSkpOworCQkJCQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24o
c2ltcGxlTmFtZSk7CisJCQkJCQlpbnQgc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3RhcnRpbmdJ
bmRleF0+Pj4zMik7CisJCQkJCQlpbnQgZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5k
ZXhdOworCQkJCQkJc2ltcGxlTmFtZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQg
KyAxKTsKKwkJCQkJCXNpbXBsZU5hbWUuaW5kZXggPSAxOworCQkJCQkJbmFtZSA9IHNpbXBsZU5h
bWU7CisJCQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKKwkJCQkJCQlyZWNvcmROb2Rl
cyhzaW1wbGVOYW1lLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCX0KKwkJCQkJfSBlbHNlIHsKKwkJ
CQkJCW5hbWUgPSB0aGlzLnNldFF1YWxpZmllZE5hbWVOYW1lQW5kU291cmNlUmFuZ2VzKHRva2Vu
cywgcG9zaXRpb25zLCBlbmRpbmdJbmRleCAtIDEsIHR5cGVSZWZlcmVuY2UpOworCQkJCQl9CisJ
CQkJCQorCQkJCQlTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFz
dCk7CisJCQkJCXNpbXBsZVR5cGUuc2V0TmFtZShuYW1lKTsKKwkJCQkJaW50IHN0YXJ0ID0gKGlu
dCkocG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOworCQkJCQlpbnQgZW5kID0gKGludCkg
cG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOworCQkJCQlzaW1wbGVUeXBlLnNldFNvdXJjZVJhbmdl
KHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQlpZiAoZW5kaW5nSW5kZXggPT0gMCAmJiB0
eXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJl
ZmVyZW5jZS5hbm5vdGF0aW9uc1swXSkgIT0gbnVsbCkgeworCQkJCQkJYW5ub3RhdGVUeXBlKHNp
bXBsZVR5cGUsIGFubm90YXRpb25zKTsKKwkJCQkJfQorCQkJCQlzaW1wbGVUeXBlLnNldEZsYWdz
KHNpbXBsZVR5cGUuZ2V0RmxhZ3MoKSB8IEFTVE5vZGUuTUFMRk9STUVEKTsvL1RPRE86IElzIHRo
aXMgc3RtdCByZXFkPworCQkJCQlUeXBlIGN1cnJlbnRUeXBlID0gc2ltcGxlVHlwZTsJCQkJICAg
IAorCQkJCQkKKwkJCQkJLy8gc3BlY2lhbCBjYXNlIGlmIHRoZSBhbm5vdHMgYXJlIHN0YXJ0aW5n
IGZyb20gMSBhcyAwIHdvdWxkIGJlIHRoZSBTVC4KKwkJCQkJc3RhcnRpbmdJbmRleCA9IGVuZGlu
Z0luZGV4ID09IDAgPyBlbmRpbmdJbmRleCArIDEgOiBlbmRpbmdJbmRleCA7CisJCQkJCXdoaWxl
KHN0YXJ0aW5nSW5kZXggPCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCkgeworCQkJ
CQkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOworCQkJ
CQkJc2ltcGxlTmFtZS5pbnRlcm5hbFNldElkZW50aWZpZXIobmV3IFN0cmluZyh0b2tlbnNbc3Rh
cnRpbmdJbmRleF0pKTsKKwkJCQkJCXNpbXBsZU5hbWUuaW5kZXggPSBzdGFydGluZ0luZGV4ICsg
MTsKKwkJCQkJCXN0YXJ0ID0gKGludCkocG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwor
CQkJCQkJZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOworCQkJCQkJc2ltcGxl
TmFtZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJCXJlY29y
ZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUpOworCQkJCQkJUXVhbGlmaWVk
VHlwZSBxdWFsaWZpZWRUeXBlID0gbmV3IFF1YWxpZmllZFR5cGUodGhpcy5hc3QpOworCQkJCQkJ
cXVhbGlmaWVkVHlwZS5zZXRRdWFsaWZpZXIoY3VycmVudFR5cGUpOworCQkJCQkJcXVhbGlmaWVk
VHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOworCQkJCQkJaWYgKHR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25z
W3N0YXJ0aW5nSW5kZXhdKSAhPSBudWxsKSB7CisJCQkJCQkJYW5ub3RhdGVUeXBlKHF1YWxpZmll
ZFR5cGUsIGFubm90YXRpb25zKTsKKwkJCQkJCX0KKwkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5k
aW5ncykgeworCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5cGVSZWZlcmVuY2UpOwor
CQkJCQkJCXJlY29yZE5vZGVzKHF1YWxpZmllZFR5cGUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJ
fQorCQkJCQkJc3RhcnQgPSBjdXJyZW50VHlwZS5nZXRTdGFydFBvc2l0aW9uKCk7CisJCQkJCQll
bmQgPSBzaW1wbGVOYW1lLmdldFN0YXJ0UG9zaXRpb24oKSArIHNpbXBsZU5hbWUuZ2V0TGVuZ3Ro
KCkgLSAxOworCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0g
c3RhcnQgKyAxKTsKKwkJCQkJCWN1cnJlbnRUeXBlID0gcXVhbGlmaWVkVHlwZTsKKwkJCS8vCQkJ
cXVhbGlmaWVkVHlwZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOyBUT0RPICB0byBjaGVj
ayB3aGV0aGVyIHRoaXMgZmllbGQgbWFrZXMgc2Vuc2UgaGVyZS4KKwkJCQkJCXN0YXJ0aW5nSW5k
ZXgrKzsKKwkJCQkJfQorCQkJCQl0eXBlID0gY3VycmVudFR5cGU7CisJCQkJfSBlbHNlIHsKKwkJ
CQkJY2hhcltdW10gbmFtZSA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFz
dC5RdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlKS5nZXRUeXBlTmFtZSgpOwor
CQkJCQlpbnQgbmFtZUxlbmd0aCA9IG5hbWUubGVuZ3RoOworCQkJCQlsb25nW10gcG9zaXRpb25z
ID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnNvdXJjZVBvc2l0aW9uczsKKwkJCQkJc291cmNlU3Rh
cnQgPSAoaW50KShwb3NpdGlvbnNbMF0+Pj4zMik7CisJCQkJCWxlbmd0aCA9IChpbnQpKHBvc2l0
aW9uc1tuYW1lTGVuZ3RoIC0gMV0gJiAweEZGRkZGRkZGKSAtIHNvdXJjZVN0YXJ0ICsgMTsKKwkJ
CQkJZmluYWwgTmFtZSBxdWFsaWZpZWROYW1lID0gdGhpcy5zZXRRdWFsaWZpZWROYW1lTmFtZUFu
ZFNvdXJjZVJhbmdlcyhuYW1lLCBwb3NpdGlvbnMsIHR5cGVSZWZlcmVuY2UsIHR5cGVSZWZlcmVu
Y2UuYW5ub3RhdGlvbnMpOworCQkJCQlmaW5hbCBTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcg
U2ltcGxlVHlwZSh0aGlzLmFzdCk7CisJCQkJCXNpbXBsZVR5cGUuc2V0TmFtZShxdWFsaWZpZWRO
YW1lKTsKKwkJCQkJdHlwZSA9IHNpbXBsZVR5cGU7CisJCQkJCXR5cGUuc2V0U291cmNlUmFuZ2Uo
c291cmNlU3RhcnQsIGxlbmd0aCk7CisJCQkJfQogCQkJfSBlbHNlIHsKIAkJCQlUeXBlUmVmZXJl
bmNlW10gdHlwZVJlZmVyZW5jZXMgPSAoKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5hc3QuVW5pb25UeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlKS50eXBlUmVmZXJlbmNlczsK
IAkJCQlzd2l0Y2godGhpcy5hc3QuYXBpTGV2ZWwpIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RNYXRj
aGVyLmphdmEKaW5kZXggMzQxNDljMi4uNzU5ZWViMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RNYXRjaGVyLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RN
YXRjaGVyLmphdmEKQEAgLTE2OTcsOCArMTY5Nyw3IEBACiAJCQkJCQkmJiBzYWZlU3VidHJlZU1h
dGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCQlkZWZhdWx0OgogCQkJCXJldHVy
biBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0UXVhbGlmaWVyKCksIG8uZ2V0UXVhbGlmaWVyKCkp
Ci0JCQkJCQkmJiBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSkg
JiYKLQkJCQkJCXNhZmVTdWJ0cmVlTGlzdE1hdGNoKG5vZGUuYW5ub3RhdGlvbnMoKSwgby5hbm5v
dGF0aW9ucygpKTsKKwkJCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXROYW1lKCksIG8u
Z2V0TmFtZSgpKTsKIAkJfQkKIAl9CiAKQEAgLTE3ODUsOCArMTc4NCw3IEBACiAJCQljYXNlIEFT
VC5KTFM0OgogCQkJCXJldHVybiBub2RlLmdldElkZW50aWZpZXIoKS5lcXVhbHMoby5nZXRJZGVu
dGlmaWVyKCkpOwogCQkJZGVmYXVsdDoKLQkJCQlyZXR1cm4gKG5vZGUuZ2V0SWRlbnRpZmllcigp
LmVxdWFscyhvLmdldElkZW50aWZpZXIoKSkpICYmCi0JCQkJCQlzYWZlU3VidHJlZUxpc3RNYXRj
aChub2RlLmFubm90YXRpb25zKCksIG8uYW5ub3RhdGlvbnMoKSk7CisJCQkJcmV0dXJuIChub2Rl
LmdldElkZW50aWZpZXIoKS5lcXVhbHMoby5nZXRJZGVudGlmaWVyKCkpKTsKIAkJfQkKIAl9CiAK
QEAgLTE4MTUsOCArMTgxMyw3IEBACiAJCQljYXNlIEFTVC5KTFM0OgogCQkJCXJldHVybiBzYWZl
U3VidHJlZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCQlkZWZhdWx0Ogot
CQkJCXJldHVybiAoc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkp
KSAmJgotCQkJCQkJc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygpLCBvLmFu
bm90YXRpb25zKCkpOworCQkJCXJldHVybiAoc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUo
KSwgby5nZXROYW1lKCkpKTsKIAkJfQogCX0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9OYW1lLmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQppbmRleCBl
N2QwNzI2Li4zNGNjMmFkIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3Jn
L2VjbGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQpAQCAtMSw1ICsxLDUgQEAK
IC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFi
bGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CkBAIC0xNCw4ICsxNCw2IEBACiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIAogcGFja2FnZSBv
cmcuZWNsaXBzZS5qZHQuY29yZS5kb207Ci0KLWltcG9ydCBqYXZhLnV0aWwuTGlzdDsKIAogLyoq
CiAgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgQVNUIG5vZGVzIHRoYXQgcmVwcmVzZW50
IG5hbWVzLgpAQCAtNzEsMTIgKzY5LDYgQEAKIAkgKi8KIAlpbnQgaW5kZXg7CiAJCi0JLyoqCi0J
ICogVGhlIHR5cGUgYW5ub3RhdGlvbnMgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFubm90YXRpb259
KS4KLQkgKiBAc2luY2UgMy45Ci0JICovCi0JcHJvdGVjdGVkIEFTVE5vZGUuTm9kZUxpc3QgYW5u
b3RhdGlvbnMgPSBudWxsOwotCiAJLyoqCiAJICogQ3JlYXRlcyBhIG5ldyBBU1Qgbm9kZSBmb3Ig
YSBuYW1lIG93bmVkIGJ5IHRoZSBnaXZlbiBBU1QuCiAJICogPHA+CkBAIC0xNTUsMTggKzE0Nyw0
IEBACiAJICovCiAJYWJzdHJhY3Qgdm9pZCBhcHBlbmROYW1lKFN0cmluZ0J1ZmZlciBidWZmZXIp
OwogCQotCS8qKgotCSAqIFJldHVybnMgdGhlIGxpdmUgb3JkZXJlZCBsaXN0IG9mIGFubm90YXRp
b25zIGZvciB0aGlzIE5hbWUgbm9kZS4KLQkgKgotCSAqIEByZXR1cm4gdGhlIGxpdmUgbGlzdCBv
ZiBhbm5vdGF0aW9ucyAoZWxlbWVudCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pCi0JICogQGV4
Y2VwdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiBpZiB0aGlzIG9wZXJhdGlvbiBp
cyB1c2VkCi0JICogICAgICAgICAgICBpbiBhIEpMUzIsIEpMUzMgb3IgSkxTNCBBU1QKLQkgKiBA
c2luY2UgMy45Ci0JICovCi0JcHVibGljIExpc3QgYW5ub3RhdGlvbnMoKSB7Ci0JCWlmICh0aGlz
LmFubm90YXRpb25zID09IG51bGwpIHsKLQkJCXVuc3VwcG9ydGVkSW4yXzNfNCgpOyAKLQkJfQot
CQlyZXR1cm4gdGhpcy5hbm5vdGF0aW9uczsKLQl9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1F1YWxpZmllZE5hbWUuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vUXVh
bGlmaWVkTmFtZS5qYXZhCmluZGV4IDFmMGUyNzIuLmViZjA1NDYgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vUXVhbGlmaWVkTmFt
ZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29y
ZS9kb20vUXVhbGlmaWVkTmFtZS5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5k
IG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5k
IG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFj
Y29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVy
bXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5p
ZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTE0MSw5ICsxNDEs
NiBAQAogCSAqLwogCVF1YWxpZmllZE5hbWUoQVNUIGFzdCkgewogCQlzdXBlcihhc3QpOwotCQlp
ZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7Ci0JCQl0aGlzLmFubm90YXRpb25zID0gbmV3
IEFTVE5vZGUuTm9kZUxpc3QoQU5OT1RBVElPTlNfUFJPUEVSVFkpOwotCQl9CiAJfQogCiAJLyog
KG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRob2QpCkBAIC0xNTcsOSArMTU0LDYgQEAKIAkgKiBN
ZXRob2QgZGVjbGFyZWQgb24gQVNUTm9kZS4KIAkgKi8KIAlmaW5hbCBMaXN0IGludGVybmFsR2V0
Q2hpbGRMaXN0UHJvcGVydHkoQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yIHByb3BlcnR5KSB7
Ci0JCWlmIChwcm9wZXJ0eSA9PSBBTk5PVEFUSU9OU19QUk9QRVJUWSkgewotCQkJcmV0dXJuIGFu
bm90YXRpb25zKCk7Ci0JCX0KIAkJLy8gYWxsb3cgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB0byBm
bGFnIHRoZSBlcnJvcgogCQlyZXR1cm4gc3VwZXIuaW50ZXJuYWxHZXRDaGlsZExpc3RQcm9wZXJ0
eShwcm9wZXJ0eSk7CiAJfQpAQCAtMjAzLDExICsxOTcsNiBAQAogCQlyZXN1bHQuc2V0U291cmNl
UmFuZ2UoZ2V0U3RhcnRQb3NpdGlvbigpLCBnZXRMZW5ndGgoKSk7CiAJCXJlc3VsdC5zZXRRdWFs
aWZpZXIoKE5hbWUpIGdldFF1YWxpZmllcigpLmNsb25lKHRhcmdldCkpOwogCQlyZXN1bHQuc2V0
TmFtZSgoU2ltcGxlTmFtZSkgZ2V0TmFtZSgpLmNsb25lKHRhcmdldCkpOwotCQlpZiAodGhpcy5h
c3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCXJlc3VsdC5hbm5vdGF0aW9ucyA9IG5ldyBB
U1ROb2RlLk5vZGVMaXN0KEFOTk9UQVRJT05TX1BST1BFUlRZKTsKLQkJCXJlc3VsdC5hbm5vdGF0
aW9ucy5hZGRBbGwoCi0JCQkJCUFTVE5vZGUuY29weVN1YnRyZWVzKHRhcmdldCwgYW5ub3RhdGlv
bnMoKSkpOwotCQl9CiAJCXJldHVybiByZXN1bHQ7CiAJfQogCkBAIC0yMjcsOSArMjE2LDYgQEAK
IAkJaWYgKHZpc2l0Q2hpbGRyZW4pIHsKIAkJCS8vIHZpc2l0IGNoaWxkcmVuIGluIG5vcm1hbCBs
ZWZ0IHRvIHJpZ2h0IHJlYWRpbmcgb3JkZXIKIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldFF1
YWxpZmllcigpKTsKLQkJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgewotCQkJ
CWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMuYW5ub3RhdGlvbnMpOwotCQkJfQogCQkJYWNj
ZXB0Q2hpbGQodmlzaXRvciwgZ2V0TmFtZSgpKTsKIAkJfQogCQl2aXNpdG9yLmVuZFZpc2l0KHRo
aXMpOwpAQCAtMzM3LDggKzMyMyw3IEBACiAJCXJldHVybgogCQkJbWVtU2l6ZSgpCiAJCQkrICh0
aGlzLm5hbWUgPT0gbnVsbCA/IDAgOiBnZXROYW1lKCkudHJlZVNpemUoKSkKLQkJCSsgKHRoaXMu
cXVhbGlmaWVyID09IG51bGwgPyAwIDogZ2V0UXVhbGlmaWVyKCkudHJlZVNpemUoKSkKLQkJCSsg
KHRoaXMuYW5ub3RhdGlvbnMgPT0gbnVsbCA/IDAgOiB0aGlzLmFubm90YXRpb25zLmxpc3RTaXpl
KCkpOworCQkJKyAodGhpcy5xdWFsaWZpZXIgPT0gbnVsbCA/IDAgOiBnZXRRdWFsaWZpZXIoKS50
cmVlU2l6ZSgpKTsKIAl9CiB9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKaW5k
ZXggMjY5NDZkMi4uZDk2MzBjNiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9t
L29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEK
QEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChj
KSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChj
KSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyBy
ZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICog
YXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMg
TGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5k
IGlzIGF2YWlsYWJsZSBhdApAQCAtMTIzLDkgKzEyMyw2IEBACiAJICovCiAJU2ltcGxlTmFtZShB
U1QgYXN0KSB7CiAJCXN1cGVyKGFzdCk7Ci0JCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgp
IHsKLQkJCXRoaXMuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9O
U19QUk9QRVJUWSk7Ci0JCX0KIAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhv
ZCkKQEAgLTE0MCw5ICsxMzcsNiBAQAogCSAqIE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgog
CSAqLwogCWZpbmFsIExpc3QgaW50ZXJuYWxHZXRDaGlsZExpc3RQcm9wZXJ0eShDaGlsZExpc3RQ
cm9wZXJ0eURlc2NyaXB0b3IgcHJvcGVydHkpIHsKLQkJaWYgKHByb3BlcnR5ID09IEFOTk9UQVRJ
T05TX1BST1BFUlRZKSB7Ci0JCQlyZXR1cm4gYW5ub3RhdGlvbnMoKTsKLQkJfQogCQkvLyBhbGxv
dyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHRvIGZsYWcgdGhlIGVycm9yCiAJCXJldHVybiBzdXBl
ci5pbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KHByb3BlcnR5KTsKIAl9CkBAIC0xNzcsMTEg
KzE3MSw2IEBACiAJCVNpbXBsZU5hbWUgcmVzdWx0ID0gbmV3IFNpbXBsZU5hbWUodGFyZ2V0KTsK
IAkJcmVzdWx0LnNldFNvdXJjZVJhbmdlKGdldFN0YXJ0UG9zaXRpb24oKSwgZ2V0TGVuZ3RoKCkp
OwogCQlyZXN1bHQuc2V0SWRlbnRpZmllcihnZXRJZGVudGlmaWVyKCkpOwotCQlpZiAodGhpcy5h
c3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCXJlc3VsdC5hbm5vdGF0aW9ucyA9IG5ldyBB
U1ROb2RlLk5vZGVMaXN0KEFOTk9UQVRJT05TX1BST1BFUlRZKTsKLQkJCXJlc3VsdC5hbm5vdGF0
aW9ucy5hZGRBbGwoCi0JCQkJCUFTVE5vZGUuY29weVN1YnRyZWVzKHRhcmdldCwgYW5ub3RhdGlv
bnMoKSkpOwotCQl9CiAJCXJldHVybiByZXN1bHQ7CiAJfQogCkBAIC0xOTcsMTIgKzE4Niw3IEBA
CiAJICogTWV0aG9kIGRlY2xhcmVkIG9uIEFTVE5vZGUuCiAJICovCiAJdm9pZCBhY2NlcHQwKEFT
VFZpc2l0b3IgdmlzaXRvcikgewotCQlib29sZWFuIHZpc2l0Q2hpbGRyZW4gPSB2aXNpdG9yLnZp
c2l0KHRoaXMpOwotCQlpZiAodmlzaXRDaGlsZHJlbikgewotCQkJaWYgKHRoaXMuYXN0LmFwaUxl
dmVsID49IEFTVC5KTFM4KSB7Ci0JCQkJYWNjZXB0Q2hpbGRyZW4odmlzaXRvciwgdGhpcy5hbm5v
dGF0aW9ucyk7Ci0JCQl9Ci0JCX0KKwkJdmlzaXRvci52aXNpdCh0aGlzKTsKIAkJdmlzaXRvci5l
bmRWaXNpdCh0aGlzKTsKIAl9CiAKQEAgLTM2NSw3ICszNDksNyBAQAogCSAqIE1ldGhvZCBkZWNs
YXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCWludCB0cmVlU2l6ZSgpIHsKLQkJcmV0dXJuIG1lbVNp
emUoKSArICh0aGlzLmFubm90YXRpb25zID09IG51bGwgPyAwIDogdGhpcy5hbm5vdGF0aW9ucy5s
aXN0U2l6ZSgpKTsKKwkJcmV0dXJuIG1lbVNpemUoKTsKIAl9CiB9CiAKZGlmZiAtLWdpdCBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20v
TmFpdmVBU1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQppbmRleCAx
OWEzYmFlLi43YWUyNTJlIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3Jl
L2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC0xMjQyLDcgKzEyNDIsNiBAQAogCXB1Ymxp
YyBib29sZWFuIHZpc2l0KFF1YWxpZmllZE5hbWUgbm9kZSkgewogCQlub2RlLmdldFF1YWxpZmll
cigpLmFjY2VwdCh0aGlzKTsKIAkJdGhpcy5idWZmZXIuYXBwZW5kKCIuIik7Ly8kTk9OLU5MUy0x
JAotCQl2aXNpdFR5cGVBbm5vdGF0aW9ucyhub2RlKTsKIAkJbm9kZS5nZXROYW1lKCkuYWNjZXB0
KHRoaXMpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQpAQCAtMTI3Nyw3ICsxMjc2LDYgQEAKIAkgKiBA
c2VlIEFTVFZpc2l0b3IjdmlzaXQoU2ltcGxlTmFtZSkKIAkgKi8KIAlwdWJsaWMgYm9vbGVhbiB2
aXNpdChTaW1wbGVOYW1lIG5vZGUpIHsKLQkJdmlzaXRUeXBlQW5ub3RhdGlvbnMobm9kZSk7CiAJ
CXRoaXMuYnVmZmVyLmFwcGVuZChub2RlLmdldElkZW50aWZpZXIoKSk7CiAJCXJldHVybiBmYWxz
ZTsKIAl9CkBAIC0xODIxLDE4ICsxODE5LDYgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwcml2
YXRlIHZvaWQgdmlzaXRUeXBlQW5ub3RhdGlvbnMoVHlwZSBub2RlKSB7Ci0JCWlmIChub2RlLmdl
dEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsKLQkJCUxpc3QgYW5ub3RhdGlvbnMgPSBu
b2RlLmFubm90YXRpb25zKCk7Ci0JCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCkgewotCQkJCWZv
ciAoSXRlcmF0b3IgaXQgPSBhbm5vdGF0aW9ucy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7ICkg
ewotCQkJCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgaXQubmV4dCgpOwot
CQkJCQlhbm5vdGF0aW9uLmFjY2VwdCh0aGlzKTsKLQkJCQkJdGhpcy5idWZmZXIuYXBwZW5kKCcg
Jyk7Ci0JCQkJfQotCQkJfQotCQl9Ci0JfQotCXByaXZhdGUgdm9pZCB2aXNpdFR5cGVBbm5vdGF0
aW9ucyhOYW1lIG5vZGUpIHsKIAkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1Qu
SkxTOCkgewogCQkJTGlzdCBhbm5vdGF0aW9ucyA9IG5vZGUuYW5ub3RhdGlvbnMoKTsKIAkJCWlm
IChhbm5vdGF0aW9ucyAhPSBudWxsKSB7
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225266</attachid>
            <date>2013-01-07 00:48:00 -0500</date>
            <delta_ts>2013-01-11 09:53:11 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Bug-395886--18DOM-AST-Withdraw-annotations-property-from-Name.patch</filename>
            <type>text/plain</type>
            <size>69310</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDNhMzVlNTcuLjI3ZjYwOTEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTcsNyArMTcsNyBAQAogaW1wb3J0IGphdmEu
dXRpbC5MaXN0OwogCiBpbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3Q7Ci0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5kb20uKjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29t
cGlsYXRpb25Vbml0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2Vw
dGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUOwpAQCAtOTgsNCArOTgs
OTI5IEBACiAJCWFubm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOwogCQlj
aGVja1NvdXJjZVJhbmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOwogCX0KKwkK
KwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
Mzk1ODg2CisJICogdGVzdHMgYW5ub3RhdGlvbnMgb24gUVRSIGluIG11bHRpcGxlIHNjZW5hcmlv
cyBvZiBvY2N1cnJlbmNlLgorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJ
cHVibGljIHZvaWQgdGVzdDAwMDIoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhp
cy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDAy
L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAorCQkJCSJw
YWNrYWdlIHRlc3QwMDAyO1xuIiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5U
YXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIglwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlPdXRlciBvdXRlciA9
IG5ldyBPdXRlcigpO1xuIiArCQkKKwkJCQkiCQlPYmplY3QgbXlPYmplY3QgPSBuZXcgT2JqZWN0
KCk7XG4iKworCQkJCSIJCVN0cmluZyBteVN0cmluZztcbiIrCisJCQkJIgkJbXlTdHJpbmcgPSAo
amF2YS5sYW5nLkBNYXJrZXIgU3RyaW5nKSBteU9iamVjdDtcbiIrCisJCQkJIgkJT3V0ZXIuSW5u
ZXIgZmlyc3QgPSBvdXRlci5uZXcgSW5uZXIoKTtcbiIgKworCQkJCSIJCU91dGVyLiBATWFya2Vy
MiBJbm5lciBzZWNvbmQgPSBvdXRlci5uZXcgSW5uZXIoKSA7XG4iICsKKwkJCQkiCQlPdXRlci5J
bm5lci4gQE1hcmtlcjEgRGVlcGVyIGRlZXBlciA9IHNlY29uZC5uZXcgRGVlcGVyKCk7XG4iICsK
KwkJCQkiCQlPdXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIgZGVlcGVyMiA9ICBz
ZWNvbmQubmV3IERlZXBlcigpO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
ImNsYXNzIE91dGVyIHtcbiIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJ
CSIJCXB1YmxpYyBjbGFzcyBEZWVwZXIge1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgl9XG4i
ICsKKwkJCQkifVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1l
bnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyIHt9XG4iICsKKwkJ
CQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4i
ICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5s
YW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFj
ZSBNYXJrZXIyIHt9XG4iCQkKKwkJCQk7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxh
dGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkp
OworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJh
dGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJCUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERl
Y2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCk7CisJCWludCBzQ291bnQgPSAzOyAKKwor
CQkvLyBjYXNlIDEgLSBhbm5vdGF0aW9uIGp1c3QgYmVmb3JlIHRoZSBsYXN0IGZpZWxkCisJCUV4
cHJlc3Npb25TdGF0ZW1lbnQgZXhwcmVzc2lvblN0YXRlbWVudCA9IChFeHByZXNzaW9uU3RhdGVt
ZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCUFzc2lnbm1lbnQgYXNzaWdubWVudCA9
IChBc3NpZ25tZW50KSBleHByZXNzaW9uU3RhdGVtZW50LmdldEV4cHJlc3Npb24oKTsKKwkJYXNz
ZXJ0Tm90TnVsbChhc3NpZ25tZW50KTsKKwkJQ2FzdEV4cHJlc3Npb24gY2FzdEV4cHJlc3Npb24g
PSAoQ2FzdEV4cHJlc3Npb24pYXNzaWdubWVudC5nZXRSaWdodEhhbmRTaWRlKCk7CisJCWFzc2Vy
dE5vdE51bGwoY2FzdEV4cHJlc3Npb24pOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgY2FzdEV4cHJlc3Npb24uZ2V0VHlwZSgpOworCQlhc3NlcnROb3RO
dWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZy5ATWFya2VyIFN0
cmluZyIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9
IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBl
KSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZyIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRp
b25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCVNpbXBs
ZU5hbWUgc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIlN0cmluZyIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBR
dWFsaWZpZWRUeXBlIHdpdGhvdXQgYW5ub3RhdGlvbnMuCisJCVZhcmlhYmxlRGVjbGFyYXRpb25T
dGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCVR5cGUgdHlwZSA9IHZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUu
aXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMCk7CisJCQorCQkvLyBjYXNlIDMgLSBRYXVsaWZpZWQgVHlwZSB3aXRo
IG91dGVyIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIGlubmVyIHdpdGggYW5ub3RhdGlvbnMuCisJ
CXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMiBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CQkKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFu
bm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFu
bm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFu
bm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlh
c3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOwor
CQlzaW1wbGVOYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygi
SW5uZXIiLCBzaW1wbGVOYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNCAtIE11bHRpcGxl
IGxldmVscyB3aXRoIGFubm90YXRpb25zIGF0IHRoZSBsYXN0IG9ubHkuCisJCXZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgc3RhdGVt
ZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1
YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0Tm90TnVsbChxdWFs
aWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5Jbm5lci5ATWFya2VyMSBEZWVwZXIi
LCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOwkJCisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZp
ZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1w
bGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlh
bm5vdGF0aW9ucyA9IHF1YWxpZmllclR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsK
KwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMo
IkRlZXBlciIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA1IC0gTXVsdGlw
bGUgYW5ub3RhdGlvbnMKKwkJdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCXR5cGUg
PSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBl
KSB0eXBlOworCQlhc3NlcnROb3ROdWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyLkBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlciIsIHF1YWxpZmllZFR5cGUudG9T
dHJpbmcoKSk7CQkKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7
CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIyIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlzaW1wbGVOYW1l
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgc2lt
cGxlTmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmllZFR5cGUo
KSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSlxdWFsaWZpZXJUeXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJr
ZXIxIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlzaW1wbGVOYW1lID0gcXVh
bGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBzaW1wbGVOYW1l
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZp
ZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2lt
cGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZXJU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDAp
OworCX0KKworCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVn
LmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyB0aGUgcmVwcmVzZW50YXRpb24gb2YgdHlwZSBhbm5v
dGF0aW9ucyBvbiBhIHBvc3NpYmxlIEpBVkEgNyBhbmQgOCBwbGFjZS4KKwkgKiBAdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDAzKCkgdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgi
L0NvbnZlcnRlcjE4L3NyYy90ZXN0MDAwMy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlT
dHJpbmcgY29udGVudHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAwMztcbiIgKworCQkJCSJpbXBv
cnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBY
IHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xu
IiArCisJCQkJIgkJQE1hcmtlciBPdXRlci5Jbm5lciBmaXJzdFtdID0gbmV3IE91dGVyLklubmVy
WzFdO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIE91dGVyIHtc
biIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJ
In1cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlciB7fVxuIiAKKwkJCQk7CisJCUNv
bXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRl
bnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkpOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2RE
ZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJ
CUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRz
KCk7CisJCWludCBzQ291bnQgPSAwOyAKKworCQkvLyBDdXJyZW50IGRlc2lnbiBleHBlY3RzIGFu
bm90YXRpb24gb25seSBhdCB0aGUgSkFWQSA3IHBsYWNlIGlmIGl0IGlzIGV4cGVjdGVkIGF0IEpB
VkEgOC4KKwkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0aW9u
U3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0
KHNDb3VudCk7CisJCUxpc3QgbW9kaWZpZXJzID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dC5tb2RpZmllcnMoKTsKKwkJYXNzZXJ0VHJ1ZShtb2RpZmllcnMuc2l6ZSgpID09IDEpOworCQlB
bm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbiltb2RpZmllcnMuZ2V0KDApOworCQlh
c3NlcnRFcXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlUeXBlIHR5
cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBs
ZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRv
U3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygp
OworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisKKwkvKioKKwkg
KiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJ
ICogdGVzdHMgUVRSIHdpdGggYW5ub3RhdGlvbnMKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDA0KCkgdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4
L3NyYy90ZXN0MDAwNC9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlTdHJpbmcgY29udGVu
dHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAwNDsiICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5h
bm5vdGF0aW9uLlRhcmdldDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9u
ZTwvKnN0YXJ0Ki9ATWFya2VyMSBPdXRlcjxJbnRlZ2VyPi4gQE1hcmtlcjIgSW5uZXI8RG91Ymxl
PltdLyplbmQqLz4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImludGVyZmFjZSBPbmU8VD4g
e31cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXI8VD4ge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNz
IElubmVyPFM+IHt9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBN
YXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iIAorCQkJ
CTsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoCisJ
CQkJY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsMCk7CisJCUFy
cmF5VHlwZSB0eXBlID0gKEFycmF5VHlwZSkgKChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlZGVjbGFy
YXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKSkudHlwZUFyZ3VtZW50cygpLmdldCgw
KTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYW5ub3RhdGlvbiIsIHR5cGUpOworCQlJVHlwZUJpbmRp
bmcgYmluZGluZyA9IHR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8g
YmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1l
IiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91
YmxlPltdIiwgYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlUeXBlIGNvbXBvbmVudFR5
cGUgPSB0eXBlLmdldENvbXBvbmVudFR5cGUoKTsKKwkJYmluZGluZyA9IGNvbXBvbmVudFR5cGUu
cmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcp
OworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVy
PGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91YmxlPiIsIGJpbmRpbmcuZ2V0
UXVhbGlmaWVkTmFtZSgpKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBjb21w
b25lbnRUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBh
cmFtZXRlcml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBjb21wb25lbnRUeXBlOworCQlU
eXBlIHR5cGUyID0gcGFyYW1ldGVyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKCJO
b3QgcXVhbGlmaWVkIiwgdHlwZTIuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlRdWFsaWZpZWRUeXBl
IHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTI7CisJCWJpbmRpbmcgPSBxdWFs
aWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmci
LCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0
MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLCBi
aW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCVR5cGUgcXVhbGlmaWVyID0gcXVhbGlmaWVk
VHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBx
dWFsaWZpZXIuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJYmluZGluZyA9IHF1YWxpZmllci5y
ZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7
CisJCWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMDQuT3V0ZXI8
amF2YS5sYW5nLkludGVnZXI+IiwgYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlwYXJh
bWV0ZXJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyOworCQl0eXBlMiA9
IHBhcmFtZXRlcml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHNpbXBsZSB0
eXBlIiwgdHlwZTIuaXNTaW1wbGVUeXBlKCkpOworCQliaW5kaW5nID0gdHlwZTIucmVzb2x2ZUJp
bmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcpOworCQlhc3Nl
cnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFu
Zy5JbnRlZ2VyPiIsIGJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwl9CisJCisJLyoqCisJ
ICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4Ngor
CSAqIHRlc3RzIFFUUiB3aXRoIGFubm90YXRpb25zCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwNSgpIHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24geworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIx
OC9zcmMvdGVzdDAwMDUvWC5qYXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRl
bnRzID0gCisJCQkJInBhY2thZ2UgdGVzdDAwMDU7IiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcu
YW5ub3RhdGlvbi5UYXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBP
bmU8IE91dGVyLklubmVyID4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkgaW1w
bGVtZW50cyBPbmU8IE91dGVyLiBATWFya2VyMSBJbm5lciA+IHtcbiIgKyAKKwkJCQkifVxuIiAr
IAorCQkJCSJjbGFzcyBaIGltcGxlbWVudHMgT25lPCBATWFya2VyMSBPdXRlci5Jbm5lciA+IHtc
biIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBXIGltcGxlbWVudHMgT25lPCBATWFya2Vy
MSBPdXRlci4gQE1hcmtlcjIgSW5uZXIgPiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiaW50
ZXJmYWNlIE9uZTxUPiB7fVxuIiArIAorCQkJCSJjbGFzcyBPdXRlciB7XG4iICsgCisJCQkJIglw
dWJsaWMgY2xhc3MgSW5uZXIge31cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJAVGFyZ2V0IChq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50
ZXJmYWNlIE1hcmtlcjEge31cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlv
bi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlcjIge31c
biIgCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBidWls
ZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJaW50IHRDb3Vu
dCA9IDA7CisJCQorCQkvLyBjYXNlIDEgLSBubyBhbm5vdGF0aW9ucyBPdXRlci5Jbm5lcgorCQlU
eXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1RO
b2RlKGN1LCB0Q291bnQrKyk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQlMaXN0IHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
VHlwZSB0eXBlID0gKFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCB0eXBlLnRv
U3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSAyIC0gUVRSIHdpdGggb25lIGFubm90YXRpb24gT3V0
ZXIuQE1hcmtlcjEgSW5uZXIKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbiln
ZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7
CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOwor
CQlhc3NlcnRFcXVhbHMoIklubmVyIiwgcXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJpbmco
KSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlBbm5vdGF0aW9uIGFubm90
YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBl
ID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJU
eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRv
U3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSAzIC0gUVRSIHdpdGggb25lIGFubm90YXRpb24gYXQg
dGhlIGJlZ2lubmluZyBATWFya2VyMSBPdXRlci5Jbm5lcgorCQl0eXBlZGVjbGFyYXRpb24gPSAo
VHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
dHlwZSA9IChUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRUcnVlKHR5cGUuaXNR
dWFsaWZpZWRUeXBlKCkpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyLklubmVyIiwg
dHlwZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBl
OworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgcXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJp
bmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlh
c3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRU
cnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9u
KSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0
aW9uLnRvU3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSA0IC0gUVRSIHdpdGggYW5ub3RhdGlvbnMg
YXQgYm90aCB0aGUgdHlwZXMgQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIKKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJ
CXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5z
dXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRz
LnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBP
dXRlci5ATWFya2VyMiBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmll
ZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5
cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7
CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3Nl
cnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVy
VHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlm
aWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVh
bGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChB
bm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEi
LCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJfQorCQorCS8qKgorCSAqIGh0dHBzOi8vYnVn
cy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyBQUVRS
IHdpdGggYW5ub3RhdGlvbnMgcGFydAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJ
ICovCisJcHVibGljIHZvaWQgdGVzdDAwMDYoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsK
KwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rl
c3QwMDA2L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAor
CQkJCSJwYWNrYWdlIHRlc3QwMDA2OyIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgT25lPE91dGVy
LiAgSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFz
cyBYMSBpbXBsZW1lbnRzIE9uZTxPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4+
IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBYMiBpbXBsZW1lbnRzIE9uZTxPdXRl
ci4gQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQki
fVxuIiArIAorCQkJCSJjbGFzcyBYMyBpbXBsZW1lbnRzIE9uZTxATWFya2VyMSBPdXRlci4gQE1h
cmtlcjIgSW5uZXIuIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQki
Y2xhc3MgWSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91
YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkxIGltcGxlbWVudHMgT25l
PE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIEBNYXJrZXIxIERlZXBlcjxEb3VibGU+PiB7XG4iICsg
CisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWTIgaW1wbGVtZW50cyBPbmU8T3V0ZXIxLiBATWFy
a2VyMSBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiAr
IAkJCQkKKwkJCQkiY2xhc3MgWTMgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIxLiBJbm5l
cjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAkJCQkKKwkJ
CQkiY2xhc3MgWTQgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIxLiBATWFya2VyMiBJbm5l
cjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAkJCQkKKwkJ
CQkiY2xhc3MgWiBpbXBsZW1lbnRzIE9uZTxPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERv
dWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBaMSBpbXBsZW1lbnRzIE9u
ZTxATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAK
KwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBaMiBpbXBsZW1lbnRzIE9uZTxPdXRlcjI8SW50ZWdl
cj4uIEBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJ
In1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFcgaW1wbGVtZW50cyBPbmU8T3V0ZXIzPERvdWJsZT4u
IEBNYXJrZXIxIEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJhY3Rlcj4uIERlZXBlcjxEb3Vi
bGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImludGVyZmFjZSBPbmU8VD4ge31c
biIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVy
IHtcbiIgKworCQkJCSIgICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4iICsKKwkJCQki
ICAgICAgIH1cbiIrCisJCQkJIiAgIH1cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBP
dXRlcjEge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVyPFQ+IHtcbiIgKworCQkJCSIg
ICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4iICsKKwkJCQkiICAgICAgIH1cbiIrCisJ
CQkJIiAgIH1cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBPdXRlcjIgPFQ+IHtcbiIg
KyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iICsKKwkJCQkiICAgICAgIHB1YmxpYyBj
bGFzcyBEZWVwZXI8Uz4ge31cbiIgKworCQkJCSIgICB9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJ
CQkiY2xhc3MgT3V0ZXIzIDxUPiB7XG4iICsgCisJCQkJIglwdWJsaWMgY2xhc3MgSW5uZXI8Sywg
Vj4ge1xuIiArCisJCQkJIiAgICAgICBwdWJsaWMgY2xhc3MgRGVlcGVyPFM+IHt9XG4iICsKKwkJ
CQkiICAgfVxuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5v
dGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2Vy
MSB7fVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBl
LlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyMiB7fVxuIiAKKwkJCQk7CisJ
CUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNv
bnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkpOworCQlpbnQgdENvdW50ID0gMDsKKwkJCisJ
CS8vIGNhc2UgMTogdmFuaWxsYSBjYXNlIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIHdpdGggc2lu
Z2xlIHR5cGVBcmd1bWVudCAKKwkJLy8gT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJsZT4KKwkJVHlw
ZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0cml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygp
LmdldCgwKTsKKwkJTGlzdCB0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJn
dW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50
eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7
CisJCVR5cGUgdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlw
ZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBs
ZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKXR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0
ZXIuSW5uZXIuRGVlcGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJTmFtZSBuYW1lID0g
c2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUo
KSk7CisJCVF1YWxpZmllZE5hbWUgcXVhbGlmaWVkTmFtZSA9IChRdWFsaWZpZWROYW1lKSBuYW1l
OworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkRlZXBlciIsIHF1YWxpZmllZE5hbWUudG9T
dHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBPbmUgYW5ub3RhdGlvbiBhZnRlciB0aGUgZmly
c3QgY2xhc3MgCisJCS8vIE91dGVyLiBATWFya2VyMSBJbm5lci5EZWVwZXI8RG91YmxlPgorCQl0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsr
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0
aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJh
bWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1
bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5l
ci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVB
cmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1l
bnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5p
c1F1YWxpZmllZFR5cGUoKSk7CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IChRdWFs
aWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyLkRl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2Vy
dFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlUeXBlIHF1YWxpZmllclR5cGUgPSAg
cXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBl
LmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVhbGlmaWVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHF1
YWxpZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
QW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5h
bWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5h
bWUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwor
CQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBs
ZVR5cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCQorCQkvLyBjYXNlIDMgLSBJbm5lciB0eXBlcyBhbm5vdGF0ZWQgd2l0aCBvdXRlciBu
b3QgYW5ub3RhdGVkIHdpdGggbGFzdCB0eXBlIGFyZyAKKwkJLy8gT3V0ZXIuIEBNYXJrZXIxIElu
bmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVj
bGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAo
UGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCku
Z2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRz
KCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRy
aXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4i
LCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50
b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRF
cXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZp
ZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxp
ZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShx
dWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVh
bGlmaWVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2Vy
MSBJbm5lciIsIHF1YWxpZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVyVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlu
YW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBu
YW1lLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1w
bGVUeXBlKXR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5n
KCkpOwkJCisJCQorCQkvLyBjYXNlIDQgLSBvbmUgYW5ub3RhdGlvbiBvbiB0aGUgb3V0ZXJtb3N0
LCBvbmUgaW4gbWlkZGxlIGFuZCBvbmUgdHlwZWFyZyBpbiBpbm5lcm1vc3QKKyAJCS8vIEBNYXJr
ZXIxIE91dGVyLiBATWFya2VyMiBJbm5lci4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50
ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBl
LnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgp
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lci5E
ZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lci5EZWVwZXIiLCBx
dWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1l
KCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0
aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUu
aXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlICA9IChRdWFsaWZpZWRUeXBlKSBx
dWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyLkBNYXJrZXIyIElu
bmVyIiwgcXVhbGlmaWVyVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZp
ZXJUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUg
PSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUu
dG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlh
c3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9T
dHJpbmcoKSk7CQkKKwkJYW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFu
bm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIs
IGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDUgLSB3aXRob3V0IGFubm90
YXRpb25zLCBidXQgd2l0aCB0eXBlYXJncyBhdCBzZWNvbmQgYW5kIHRoaXJkIHR5cGVzCisJCS8v
IE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRp
b24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsdENvdW50KyspOworCQlwYXJhbWV0
cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRl
cmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkp
OworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMu
Z2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91
YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1l
bnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFy
YW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0
cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDAp
OworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkKKwkJ
YXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygp
OworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5
cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlw
ZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5h
bWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1YWxpZmllZE5hbWUp
IG5hbWU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlmaWVkTmFtZS50b1N0
cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNiAtIEFubm90IGluIGJldHdlZW4gdHdvIFBRUlQgd2l0
aCBvdXRlcm1vc3QgbmVpdGhlciBhbm5vdGF0ZWQgbm9yIGhhdmluZyB0eXBlYXJncworCQkvLyBP
dXRlcjEuIElubmVyPEludGVnZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJ
cGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1
cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMu
c2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uQE1h
cmtlcjEgRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+LkBNYXJrZXIxIERl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9u
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlm
aWVyKCk7CQkKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5
cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVk
VHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOwor
CQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIklu
dGVnZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRU
eXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUg
PSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRUcnVlKG5hbWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1
YWxpZmllZE5hbWUpIG5hbWU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlm
aWVkTmFtZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNyAtIE91dGVybW9zdCBzdGlsbCBl
bXB0eSAobm8gYW5ub3RhdGlvbnMsIG5vIHR5cGUgYXJncyksIGZvbGxvd2VkIGJ5IGFubm90YXRp
b24sIGFuZCB0aGVuIHR5cGVhcmdzCisJCS8vIE91dGVyMS4gQE1hcmtlcjEgSW5uZXI8SW50ZWdl
cj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24p
Z2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIxLkBNYXJrZXIxIElubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1l
dHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5
cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09
IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVh
bHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVh
bGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MS5ATWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5n
KCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygi
RGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJ
CXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3Nl
cnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJPdXRlcjEuQE1hcmtlcjEgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRv
U3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUg
PSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIs
IHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5ATWFya2VyMSBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlm
aWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9
PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQluYW1l
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5h
bWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQl0eXBl
ID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2lt
cGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQluYW1lID0g
c2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5hbWUoKSk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIxIiwgbmFtZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNh
c2UgOCAtIFNpbWlsYXIgdG8gYWJvdmUsIGJ1dCB3aXRoIHRoZSBtYWpvciBkaWZmZXJlbmNlIG9m
IGFubm90YXRpb24gc2hpZnRlZCB0byBvdXRlcm1vc3QuCisJCS8vIEBNYXJrZXIxIE91dGVyMS4g
SW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyPEludGVnZXI+LkRlZXBlcjxEb3Vi
bGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVu
dHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJh
bWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlw
ZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRU
eXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFz
c2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1
YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIo
KTsJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsK
KwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0
cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0g
MSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVh
bGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJr
ZXIxIE91dGVyMS5Jbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRp
b25zLnNpemUoKSA9PSAwKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwg
bmFtZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2lt
cGxlVHlwZSkgdHlwZTsKKwkJYW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90
YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFu
bm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJ
YXNzZXJ0VHJ1ZShuYW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEi
LCBuYW1lLnRvU3RyaW5nKCkpOworCQkJCQorCQkvLyBjYXNlIDk6IHNjZW5hcmlvIG9mIHRoZSBh
Ym92ZSBjYXNlIHBsdXMgYW5vdGhlciBhbm5vdGF0aW9uIGF0IG1pZC1sZXZlbC4KKwkJLy8gQE1h
cmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPiAKKwkJ
dHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQr
Kyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJh
dGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJn
dW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUp
dHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBN
YXJrZXIyIElubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50
b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBl
ID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIs
IHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5A
TWFya2VyMiBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkp
OworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVl
cGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1
YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3NlcnRU
cnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxz
KCJATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRU
eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBl
QXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJ
CXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50
ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5
cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVk
VHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91
dGVyMS5ATWFya2VyMiBJbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUo
bmFtZS5pc1NpbXBsZU5hbWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0
eXBlOworCQlhbm5vdGF0aW9ucyA9IHR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5u
b3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50
b1N0cmluZygpKTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVl
KG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMSIsIG5hbWUudG9T
dHJpbmcoKSk7CisJCQkJCisJCS8vIGNhc2UgMTAgLSBQUVJUIHdpdGggdHdvIHR5cGUgYXJncyBi
dXQgd2l0aG91dCBhbm5vdGF0aW9ucworCQkvLyBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVy
PERvdWJsZT4gCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVh
bHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIu
RGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRy
dWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmll
ZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgcXVhbGlm
aWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIiLCBxdWFsaWZp
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lICA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOwor
CQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlw
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVy
VHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXpl
KCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2Vy
dEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6
ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjIiLCB0eXBlLnRvU3RyaW5n
KCkpOworCQkKKworCQkvLyBjYXNlIDExIC0gYW5ub3RhdGlvbiBhdCBvdXRlcm1vc3QgaW4gYWRk
aXRpb24gdG8gc2NlbmFyaW8gaW4gY2FzZSAxMC4KKwkJLy8gQE1hcmtlcjEgT3V0ZXIyPEludGVn
ZXI+LklubmVyLkRlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xh
cmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQ
YXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5n
ZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4i
LCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlciIsIHF1YWxpZmllZFR5cGUu
dG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0
RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlm
aWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9
PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJ
CQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFs
aWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0
ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFy
Z3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0
eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVn
ZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBl
KCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIyIiwgdHlwZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3Rh
dGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRp
b25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJp
bmcoKSk7CisJCQkJCisJCS8vIGNhc2UgMTIgLSBObyBhbm5vdGF0aW9ucyBhdCBvdXRlcm1vc3Qs
IGJ1dCBvdXRlcm1vc3QgaGFzIHR5cGVBbm5vdGF0aW9ucy4KKwkJLy8gT3V0ZXIyPEludGVnZXI+
LiBATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlcklu
dGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50
cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVy
LkBNYXJrZXIyIERlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5
cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRU
eXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5ATWFya2VyMSBJbm5l
ci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0g
cXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRv
U3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsK
KwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAo
QW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIy
IiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOwkJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFs
aWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmll
clR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVyIiwg
cXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5h
bWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsK
KwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCXR5
cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CQkKKworCQkvLyBjYXNlIDEzIC0gYSBsaXN0IG9m
IGFubm90YXRpb25zIGFuZCBtdWx0aXBsZSB0eXBlQXJndW1lbnQgZWxlbWVudCBsaXN0cy4KKwkJ
Ly8gT3V0ZXIzPERvdWJsZT4uIEBNYXJrZXIxIEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJh
Y3Rlcj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0
aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJh
bWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQo
MCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsK
KwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjM8RG91YmxlPi5ATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLENo
YXJhY3Rlcj4uRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlw
ZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVl
KHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5
cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIzPERvdWJsZT4uQE1hcmtlcjEgQE1hcmtl
cjIgSW5uZXI8SW50ZWdlcixDaGFyYWN0ZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJp
bmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlw
ZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsK
KwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJCQorCQlh
c3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVl
KHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDIpOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0
eXBlQXJndW1lbnRzLmdldCgwKS50b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCJDaGFyYWN0
ZXIiLCB0eXBlQXJndW1lbnRzLmdldCgxKS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiSW5uZXIiLCBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKS50b1N0cmluZygpKTsKKwkJYW5ub3Rh
dGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3Rh
dGlvbnMuc2l6ZSgpID09IDIpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlv
bnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3Rh
dGlvbnMuZ2V0KDEpLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlw
ZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVy
aXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1
YWxpZmllclR5cGU7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlQXJndW1lbnRzLmdldCgwKS50b1N0cmluZygpKTsKKwkJ
dHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNT
aW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIzIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwl9CiB9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0
L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNo
ZXJUZXN0LmphdmEKaW5kZXggNjE5OTRmMi4uYmQ5ZGZhMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RNYXRjaGVyVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2
YQpAQCAtMTMzOCw0ICsxMzM4LDMwIEBACiAJCXgxLnZhcmFyZ3NBbm5vdGF0aW9ucygpLmFkZCh0
aGlzLkFOTzEpOwogCQliYXNpY01hdGNoKHgxKTsKIAl9CisJCisJLy8gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgorCXB1YmxpYyB2b2lkIHRlc3RR
dWFsaWZpZWRUeXBlQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsKCkgPCBB
U1QuSkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVF1YWxpZmllZFR5cGUgeDEgPSB0aGlzLmFz
dC5uZXdRdWFsaWZpZWRUeXBlKHRoaXMuVDEsIHRoaXMuTjEpOworCQl4MS5hbm5vdGF0aW9ucygp
LmFkZCh0aGlzLkFOTzEpOworCQl4MSA9IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUoeDEsIHRo
aXMuTjIpOworCQl4MS5hbm5vdGF0aW9ucygpLmFkZCh0aGlzLkFOTzIpOworCQliYXNpY01hdGNo
KHgxKTsKKwl9CisJCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTM5NTg4NgorCXB1YmxpYyB2b2lkIHRlc3RQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZUFubm90YXRpb24oKSB7CisJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCgpIDwgQVNULkpMUzgpIHsK
KwkJCXJldHVybjsKKwkJfQorCQlQYXJhbWV0ZXJpemVkVHlwZSB4MSA9IHRoaXMuYXN0Lm5ld1Bh
cmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5O
MSkpOworCQl4MS5nZXRUeXBlKCkuYW5ub3RhdGlvbnMoKS5hZGQodGhpcy5BTk8xKTsKKwkJeDEu
dHlwZUFyZ3VtZW50cygpLmFkZCh0aGlzLmFzdC5uZXdTaW1wbGVUeXBlKHRoaXMuYXN0Lm5ld1Np
bXBsZU5hbWUoIlNOMSIpKSk7CisJCXgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUo
dGhpcy5hc3QubmV3UXVhbGlmaWVkVHlwZSh4MSwgdGhpcy5OMikpOworCQl4MS50eXBlQXJndW1l
bnRzKCkuYWRkKHRoaXMuYXN0Lm5ld1NpbXBsZVR5cGUodGhpcy5hc3QubmV3U2ltcGxlTmFtZSgi
U04yIikpKTsKKwkJeDEuZ2V0VHlwZSgpLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJ
CWJhc2ljTWF0Y2goeDEpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5q
YXZhCmluZGV4IGY4MTM2YjIuLmYzNmZiMTcgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252
ZXJ0ZXIuamF2YQpAQCAtMzA5Myw3ICszMDkzLDYgQEAKIAkJCQkJCWludCBzdGFydCA9IHR5cGVB
bm5vdGF0aW9uLnNvdXJjZVN0YXJ0OwogCQkJCQkJaW50IGVuZCA9IHR5cGVBbm5vdGF0aW9uLnNv
dXJjZUVuZDsKIAkJCQkJCWFubm90YXRpb24uc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0
YXJ0ICsgMSk7Ci0JCQkJCQluYW1lLmFubm90YXRpb25zLmFkZChhbm5vdGF0aW9uKTsKIAkJCQkJ
fQogCQkJCX0KIAkJfQpAQCAtMzI2Myw2ICszMjYyLDcgQEAKIAkJCQlQYXJhbWV0ZXJpemVkUXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSA9
IChQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZTsKIAkJ
CQljaGFyW11bXSB0b2tlbnMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50
b2tlbnM7CiAJCQkJVHlwZVJlZmVyZW5jZVtdW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6
ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnR5cGVBcmd1bWVudHM7CisJCQkJb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uW11bXSB0eXBlQW5ub3RhdGlvbnMg
PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uczsKIAkJCQls
b25nW10gcG9zaXRpb25zID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291
cmNlUG9zaXRpb25zOwogCQkJCXNvdXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIp
OwogCQkJCXN3aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewpAQCAtMzI4MCwxNSArMzI4MCwzMiBA
QAogCQkJCQl9CiAJCQkJCWJyZWFrOwogCQkJCQlkZWZhdWx0IDoKKwkJCQkJCS8vIGh0dHBzOi8v
YnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKIAkJCQkJCWlmICh0
eXBlQXJndW1lbnRzICE9IG51bGwpIHsKLQkJCQkJCQlpbnQgbnVtYmVyT2ZFbmNsb3NpbmdUeXBl
ID0gMDsKIAkJCQkJCQlpbnQgc3RhcnRpbmdJbmRleCA9IDA7CiAJCQkJCQkJaW50IGVuZGluZ0lu
ZGV4ID0gMDsKKwkJCQkJCQlpbnQgbnVtYmVyT2ZFbmNsb3NpbmdUeXBlID0gMDsKKwogCQkJCQkJ
CWZvciAoaW50IGkgPSAwLCBtYXggPSB0eXBlQXJndW1lbnRzLmxlbmd0aDsgaSA8IG1heDsgaSsr
KSB7CiAJCQkJCQkJCWlmICh0eXBlQXJndW1lbnRzW2ldICE9IG51bGwpIHsKIAkJCQkJCQkJCW51
bWJlck9mRW5jbG9zaW5nVHlwZSsrOwogCQkJCQkJCQl9IGVsc2UgaWYgKG51bWJlck9mRW5jbG9z
aW5nVHlwZSA9PSAwKSB7CiAJCQkJCQkJCQllbmRpbmdJbmRleCsrOworCQkJCQkJCQl9CisJCQkJ
CQkJfQorCQkJCQkJCWlmICh0eXBlQW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJCQkJCQlpbnQg
YW5ub3RfZW5kaW5nSW5kZXggPSAtMTsKKwkJCQkJCQkJbnVtYmVyT2ZFbmNsb3NpbmdUeXBlID0g
MDsKKwkJCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBbm5vdGF0aW9ucy5sZW5ndGg7
IGkgPCBtYXg7IGkrKykgeworCQkJCQkJCQkJaWYgKHR5cGVBbm5vdGF0aW9uc1tpXSAhPSBudWxs
KSB7CisJCQkJCQkJCQkJbnVtYmVyT2ZFbmNsb3NpbmdUeXBlKys7CisJCQkJCQkJCQl9IGVsc2Ug
aWYgKG51bWJlck9mRW5jbG9zaW5nVHlwZSA9PSAwKSB7CisJCQkJCQkJCQkJYW5ub3RfZW5kaW5n
SW5kZXgrKzsKKwkJCQkJCQkJCX0KKwkJCQkJCQkJfQkJCQkJCisJCQkJCQkJCWVuZGluZ0luZGV4
ID0gKGFubm90X2VuZGluZ0luZGV4IDwgZW5kaW5nSW5kZXgpID8gYW5ub3RfZW5kaW5nSW5kZXgg
OiBlbmRpbmdJbmRleDsKKwkJCQkJCQkJaWYgKGVuZGluZ0luZGV4IDwgMCkgeworCQkJCQkJCQkJ
ZW5kaW5nSW5kZXggPSAwOwogCQkJCQkJCQl9CiAJCQkJCQkJfQogCQkJCQkJCU5hbWUgbmFtZSA9
IG51bGw7CkBAIC0zMzEyLDI5ICszMzI5LDM1IEBACiAJCQkJCQkJaW50IHN0YXJ0ID0gKGludCko
cG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwogCQkJCQkJCWludCBlbmQgPSAoaW50KSBw
b3NpdGlvbnNbZW5kaW5nSW5kZXhdOwogCQkJCQkJCXNpbXBsZVR5cGUuc2V0U291cmNlUmFuZ2Uo
c3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7Ci0JCQkJCQkJaWYgKGVuZGluZ0luZGV4ID09IDAgJiYg
dHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0pICE9IG51bGwpIHsKKwkJCQkJCQlpZiAodHlwZVJlZmVy
ZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2Uu
YW5ub3RhdGlvbnNbZW5kaW5nSW5kZXhdKSAhPSBudWxsKSB7CiAJCQkJCQkJCWFubm90YXRlVHlw
ZShzaW1wbGVUeXBlLCBhbm5vdGF0aW9ucyk7CiAJCQkJCQkJfQotCQkJCQkJCVBhcmFtZXRlcml6
ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0
KTsKLQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5zZXRUeXBlKHNpbXBsZVR5cGUpOwotCQkJCQkJ
CWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewotCQkJCQkJCQlyZWNvcmROb2RlcyhzaW1wbGVU
eXBlLCB0eXBlUmVmZXJlbmNlKTsKLQkJCQkJCQkJcmVjb3JkTm9kZXMocGFyYW1ldGVyaXplZFR5
cGUsIHR5cGVSZWZlcmVuY2UpOwotCQkJCQkJCX0KLQkJCQkJCQlzdGFydCA9IHNpbXBsZVR5cGUu
Z2V0U3RhcnRQb3NpdGlvbigpOwotCQkJCQkJCWVuZCA9IHN0YXJ0ICsgc2ltcGxlVHlwZS5nZXRM
ZW5ndGgoKSAtIDE7Ci0JCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHNb
ZW5kaW5nSW5kZXhdLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7Ci0JCQkJCQkJCWZpbmFsIFR5cGUg
dHlwZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XVtpXSk7Ci0JCQkJ
CQkJCXBhcmFtZXRlcml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKS5hZGQodHlwZTIpOwotCQkJCQkJ
CQllbmQgPSB0eXBlMi5nZXRTdGFydFBvc2l0aW9uKCkgKyB0eXBlMi5nZXRMZW5ndGgoKSAtIDE7
Ci0JCQkJCQkJfQogCQkJCQkJCWludCBpbmRleE9mRW5jbG9zaW5nVHlwZSA9IDE7Ci0JCQkJCQkJ
cGFyYW1ldGVyaXplZFR5cGUuaW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlwZTsKLQkJCQkJCQll
bmQgPSByZXRyaWV2ZUNsb3NpbmdBbmdsZUJyYWNrZXRQb3NpdGlvbihlbmQgKyAxKTsKLQkJCQkJ
CQlsZW5ndGggPSBlbmQgKyAxOwotCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFNvdXJjZVJh
bmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJCVR5cGUgY3VycmVudFR5cGUgPSBz
aW1wbGVUeXBlOworCQkJCQkJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZTsKKwkJCQkJCQlp
ZiAodHlwZUFyZ3VtZW50c1tlbmRpbmdJbmRleF0gIT0gbnVsbCkgeworCQkJCQkJCQlQYXJhbWV0
ZXJpemVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZSA9IG5ldyBQYXJhbWV0ZXJpemVkVHlwZSh0aGlz
LmFzdCk7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFR5cGUoc2ltcGxlVHlwZSk7CisJ
CQkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJCQkJcmVjb3JkTm9kZXMo
c2ltcGxlVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCQlyZWNvcmROb2RlcyhwYXJhbWV0
ZXJpemVkVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCX0KKwkJCQkJCQkJc3RhcnQgPSBz
aW1wbGVUeXBlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJCQkJCQkJZW5kID0gc3RhcnQgKyBzaW1w
bGVUeXBlLmdldExlbmd0aCgpIC0gMTsKKwkJCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5
cGVBcmd1bWVudHNbZW5kaW5nSW5kZXhdLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7CisJCQkJCQkJ
CQlmaW5hbCBUeXBlIHR5cGUyID0gY29udmVydFR5cGUodHlwZUFyZ3VtZW50c1tlbmRpbmdJbmRl
eF1baV0pOworCQkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0
eXBlMik7CisJCQkJCQkJCQllbmQgPSB0eXBlMi5nZXRTdGFydFBvc2l0aW9uKCkgKyB0eXBlMi5n
ZXRMZW5ndGgoKSAtIDE7CisJCQkJCQkJCX0JCQkJCQkJCQorCQkJCQkJCQlpbmRleE9mRW5jbG9z
aW5nVHlwZSA9IDE7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVu
Y2xvc2luZ1R5cGU7CisJCQkJCQkJCWVuZCA9IHJldHJpZXZlQ2xvc2luZ0FuZ2xlQnJhY2tldFBv
c2l0aW9uKGVuZCArIDEpOworCQkJCQkJCQlsZW5ndGggPSBlbmQgKyAxOworCQkJCQkJCQlwYXJh
bWV0ZXJpemVkVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJ
CQkJCQkJY3VycmVudFR5cGUgPSBwYXJhbWV0ZXJpemVkVHlwZTsKKwkJCQkJCQl9CiAJCQkJCQkJ
c3RhcnRpbmdJbmRleCA9IGVuZGluZ0luZGV4ICsgMTsKLQkJCQkJCQlUeXBlIGN1cnJlbnRUeXBl
ID0gcGFyYW1ldGVyaXplZFR5cGU7CisKIAkJCQkJCQl3aGlsZShzdGFydGluZ0luZGV4IDwgdHlw
ZUFyZ3VtZW50cy5sZW5ndGgpIHsKIAkJCQkJCQkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3
IFNpbXBsZU5hbWUodGhpcy5hc3QpOwogCQkJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRl
bnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4XSkpOwpAQCAtMzM0Myw3ICsz
MzY2LDcgQEAKIAkJCQkJCQkJZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOwog
CQkJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEp
OwogCQkJCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsK
LQkJCQkJCQkJUXVhbGlmaWVkVHlwZSBxdWFsaWZpZWRUeXBlID0gbmV3IFF1YWxpZmllZFR5cGUo
dGhpcy5hc3QpOworCQkJCQkJCQlxdWFsaWZpZWRUeXBlID0gbmV3IFF1YWxpZmllZFR5cGUodGhp
cy5hc3QpOwogCQkJCQkJCQlxdWFsaWZpZWRUeXBlLnNldFF1YWxpZmllcihjdXJyZW50VHlwZSk7
CiAJCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0TmFtZShzaW1wbGVOYW1lKTsKIAkJCQkJCQkJaWYg
KHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBl
UmVmZXJlbmNlLmFubm90YXRpb25zW3N0YXJ0aW5nSW5kZXhdKSAhPSBudWxsKSB7CkBAIC0zMzg4
LDE2ICszNDExLDk5IEBACiAJCQkJCQl9CiAJCQkJfQogCQkJfSBlbHNlIGlmICh0eXBlUmVmZXJl
bmNlIGluc3RhbmNlb2Ygb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFs
aWZpZWRUeXBlUmVmZXJlbmNlKSB7Ci0JCQkJY2hhcltdW10gbmFtZSA9ICgob3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVm
ZXJlbmNlKS5nZXRUeXBlTmFtZSgpOwotCQkJCWludCBuYW1lTGVuZ3RoID0gbmFtZS5sZW5ndGg7
Ci0JCQkJbG9uZ1tdIHBvc2l0aW9ucyA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmFzdC5RdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlKS5zb3VyY2VQb3Np
dGlvbnM7Ci0JCQkJc291cmNlU3RhcnQgPSAoaW50KShwb3NpdGlvbnNbMF0+Pj4zMik7Ci0JCQkJ
bGVuZ3RoID0gKGludCkocG9zaXRpb25zW25hbWVMZW5ndGggLSAxXSAmIDB4RkZGRkZGRkYpIC0g
c291cmNlU3RhcnQgKyAxOwotCQkJCWZpbmFsIE5hbWUgcXVhbGlmaWVkTmFtZSA9IHRoaXMuc2V0
UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXMobmFtZSwgcG9zaXRpb25zLCB0eXBlUmVm
ZXJlbmNlLCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zKTsKLQkJCQlmaW5hbCBTaW1wbGVUeXBl
IHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFzdCk7Ci0JCQkJc2ltcGxlVHlwZS5z
ZXROYW1lKHF1YWxpZmllZE5hbWUpOwotCQkJCXR5cGUgPSBzaW1wbGVUeXBlOwotCQkJCXR5cGUu
c2V0U291cmNlUmFuZ2Uoc291cmNlU3RhcnQsIGxlbmd0aCk7CisJCQkJLy8gaHR0cHM6Ly9idWdz
LmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgorCQkJCWludCBpbmRleCA9
IDA7CisJCQkJUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlID0g
KFF1YWxpZmllZFR5cGVSZWZlcmVuY2UpdHlwZVJlZmVyZW5jZTsKKwkJCQljaGFyW11bXSB0b2tl
bnMgPSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnRva2VuczsKKwkJCQlpbnQgbnVtYmVyT2ZFbmNs
b3NpbmdUeXBlID0gMDsKKwkJCQlpbnQgc3RhcnRpbmdJbmRleCA9IDA7CisJCQkJaW50IGVuZGlu
Z0luZGV4ID0gMDsKKwkJCQlib29sZWFuIGhhc0Fubm90YXRpb25zID0gKCh0aGlzLmFzdC5hcGlM
ZXZlbCgpID49IEFTVC5KTFM4KSAmJiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxs
KSk7CisKKwkJCQlpZiAoaGFzQW5ub3RhdGlvbnMpIHsKKwkJCQkJCisJCQkJCWZvciAoOyAoaW5k
ZXggPCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCk7ICsraW5kZXgpIHsgCisJCQkJ
CQlpZiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpbmRleF0gIT0gbnVsbCkgIHsKKwkJCQkJ
CSAgCW51bWJlck9mRW5jbG9zaW5nVHlwZSsrOworCQkJCQkJfSBlbHNlIGlmIChudW1iZXJPZkVu
Y2xvc2luZ1R5cGUgPT0gMCkgeworCQkJCQkJCWVuZGluZ0luZGV4Kys7CisJCQkJCQl9CisJCQkJ
CX0KKwkJCQl9CisJCQkJCisJCQkJaWYgKGhhc0Fubm90YXRpb25zICYmIChlbmRpbmdJbmRleCA8
IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoKSkgeworCQkJCQkKKwkJCQkJbG9uZ1td
IHBvc2l0aW9ucyA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFs
aWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlKS5zb3VyY2VQb3NpdGlvbnM7CisJCQkJ
CXNvdXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIpOworCQkJCQkKKwkJCQkJTmFt
ZSBuYW1lID0gbnVsbDsKKwkJCQkJaWYgKGVuZGluZ0luZGV4IC0gc3RhcnRpbmdJbmRleCA8PSAx
KSB7CisJCQkJCQlmaW5hbCBTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcgU2ltcGxlTmFtZSh0
aGlzLmFzdCk7CisJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3Ry
aW5nKHRva2Vuc1swXSkpOworCQkJCQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24o
c2ltcGxlTmFtZSk7CisJCQkJCQlpbnQgc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3RhcnRpbmdJ
bmRleF0+Pj4zMik7CisJCQkJCQlpbnQgZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5k
ZXhdOworCQkJCQkJc2ltcGxlTmFtZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQg
KyAxKTsKKwkJCQkJCXNpbXBsZU5hbWUuaW5kZXggPSAxOworCQkJCQkJbmFtZSA9IHNpbXBsZU5h
bWU7CisJCQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKKwkJCQkJCQlyZWNvcmROb2Rl
cyhzaW1wbGVOYW1lLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCX0KKwkJCQkJfSBlbHNlIHsKKwkJ
CQkJCW5hbWUgPSB0aGlzLnNldFF1YWxpZmllZE5hbWVOYW1lQW5kU291cmNlUmFuZ2VzKHRva2Vu
cywgcG9zaXRpb25zLCBlbmRpbmdJbmRleCAtIDEsIHR5cGVSZWZlcmVuY2UpOworCQkJCQl9CisJ
CQkJCQorCQkJCQlTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFz
dCk7CisJCQkJCXNpbXBsZVR5cGUuc2V0TmFtZShuYW1lKTsKKwkJCQkJaW50IHN0YXJ0ID0gKGlu
dCkocG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOworCQkJCQlpbnQgZW5kID0gKGludCkg
cG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOworCQkJCQlzaW1wbGVUeXBlLnNldFNvdXJjZVJhbmdl
KHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQlpZiAoZW5kaW5nSW5kZXggPT0gMCAmJiB0
eXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJl
ZmVyZW5jZS5hbm5vdGF0aW9uc1swXSkgIT0gbnVsbCkgeworCQkJCQkJYW5ub3RhdGVUeXBlKHNp
bXBsZVR5cGUsIGFubm90YXRpb25zKTsKKwkJCQkJfQorCQkJCQlzaW1wbGVUeXBlLnNldEZsYWdz
KHNpbXBsZVR5cGUuZ2V0RmxhZ3MoKSB8IEFTVE5vZGUuTUFMRk9STUVEKTsvL1RPRE86IElzIHRo
aXMgc3RtdCByZXFkPworCQkJCQlUeXBlIGN1cnJlbnRUeXBlID0gc2ltcGxlVHlwZTsJCQkJICAg
IAorCQkJCQkKKwkJCQkJLy8gc3BlY2lhbCBjYXNlIGlmIHRoZSBhbm5vdHMgYXJlIHN0YXJ0aW5n
IGZyb20gMSBhcyAwIHdvdWxkIGJlIHRoZSBTVC4KKwkJCQkJc3RhcnRpbmdJbmRleCA9IGVuZGlu
Z0luZGV4ID09IDAgPyBlbmRpbmdJbmRleCArIDEgOiBlbmRpbmdJbmRleCA7CisJCQkJCXdoaWxl
KHN0YXJ0aW5nSW5kZXggPCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCkgeworCQkJ
CQkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOworCQkJ
CQkJc2ltcGxlTmFtZS5pbnRlcm5hbFNldElkZW50aWZpZXIobmV3IFN0cmluZyh0b2tlbnNbc3Rh
cnRpbmdJbmRleF0pKTsKKwkJCQkJCXNpbXBsZU5hbWUuaW5kZXggPSBzdGFydGluZ0luZGV4ICsg
MTsKKwkJCQkJCXN0YXJ0ID0gKGludCkocG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwor
CQkJCQkJZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOworCQkJCQkJc2ltcGxl
TmFtZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJCXJlY29y
ZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUpOworCQkJCQkJUXVhbGlmaWVk
VHlwZSBxdWFsaWZpZWRUeXBlID0gbmV3IFF1YWxpZmllZFR5cGUodGhpcy5hc3QpOworCQkJCQkJ
cXVhbGlmaWVkVHlwZS5zZXRRdWFsaWZpZXIoY3VycmVudFR5cGUpOworCQkJCQkJcXVhbGlmaWVk
VHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOworCQkJCQkJaWYgKHR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25z
W3N0YXJ0aW5nSW5kZXhdKSAhPSBudWxsKSB7CisJCQkJCQkJYW5ub3RhdGVUeXBlKHF1YWxpZmll
ZFR5cGUsIGFubm90YXRpb25zKTsKKwkJCQkJCX0KKwkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5k
aW5ncykgeworCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5cGVSZWZlcmVuY2UpOwor
CQkJCQkJCXJlY29yZE5vZGVzKHF1YWxpZmllZFR5cGUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJ
fQorCQkJCQkJc3RhcnQgPSBjdXJyZW50VHlwZS5nZXRTdGFydFBvc2l0aW9uKCk7CisJCQkJCQll
bmQgPSBzaW1wbGVOYW1lLmdldFN0YXJ0UG9zaXRpb24oKSArIHNpbXBsZU5hbWUuZ2V0TGVuZ3Ro
KCkgLSAxOworCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0g
c3RhcnQgKyAxKTsKKwkJCQkJCWN1cnJlbnRUeXBlID0gcXVhbGlmaWVkVHlwZTsKKwkJCQkJCXF1
YWxpZmllZFR5cGUuaW5kZXggPSAxOy8vIFRPRE8gTm90IHVzZWQsIGp1c3QgaW5pdGlhbGl6aW5n
IHRvIGRlZmF1bHQgb2YgMS4KKwkJCQkJCXN0YXJ0aW5nSW5kZXgrKzsKKwkJCQkJfQorCQkJCQl0
eXBlID0gY3VycmVudFR5cGU7CisJCQkJfSBlbHNlIHsKKwkJCQkJY2hhcltdW10gbmFtZSA9ICgo
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5RdWFsaWZpZWRUeXBlUmVmZXJl
bmNlKSB0eXBlUmVmZXJlbmNlKS5nZXRUeXBlTmFtZSgpOworCQkJCQlpbnQgbmFtZUxlbmd0aCA9
IG5hbWUubGVuZ3RoOworCQkJCQlsb25nW10gcG9zaXRpb25zID0gKChvcmcuZWNsaXBzZS5qZHQu
aW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVu
Y2UpLnNvdXJjZVBvc2l0aW9uczsKKwkJCQkJc291cmNlU3RhcnQgPSAoaW50KShwb3NpdGlvbnNb
MF0+Pj4zMik7CisJCQkJCWxlbmd0aCA9IChpbnQpKHBvc2l0aW9uc1tuYW1lTGVuZ3RoIC0gMV0g
JiAweEZGRkZGRkZGKSAtIHNvdXJjZVN0YXJ0ICsgMTsKKwkJCQkJZmluYWwgTmFtZSBxdWFsaWZp
ZWROYW1lID0gdGhpcy5zZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyhuYW1lLCBw
b3NpdGlvbnMsIHR5cGVSZWZlcmVuY2UsIHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMpOworCQkJ
CQlmaW5hbCBTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFzdCk7
CisJCQkJCXNpbXBsZVR5cGUuc2V0TmFtZShxdWFsaWZpZWROYW1lKTsKKwkJCQkJdHlwZSA9IHNp
bXBsZVR5cGU7CisJCQkJCXR5cGUuc2V0U291cmNlUmFuZ2Uoc291cmNlU3RhcnQsIGxlbmd0aCk7
CisJCQkJfQogCQkJfSBlbHNlIHsKIAkJCQlUeXBlUmVmZXJlbmNlW10gdHlwZVJlZmVyZW5jZXMg
PSAoKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuVW5pb25UeXBlUmVmZXJl
bmNlKSB0eXBlUmVmZXJlbmNlKS50eXBlUmVmZXJlbmNlczsKIAkJCQlzd2l0Y2godGhpcy5hc3Qu
YXBpTGV2ZWwpIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUv
ZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RNYXRjaGVyLmphdmEKaW5kZXggMzQxNDlj
Mi4uNzU5ZWViMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xp
cHNlL2pkdC9jb3JlL2RvbS9BU1RNYXRjaGVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RNYXRjaGVyLmphdmEKQEAgLTE2OTcs
OCArMTY5Nyw3IEBACiAJCQkJCQkmJiBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBv
LmdldE5hbWUoKSk7CiAJCQlkZWZhdWx0OgogCQkJCXJldHVybiBzYWZlU3VidHJlZU1hdGNoKG5v
ZGUuZ2V0UXVhbGlmaWVyKCksIG8uZ2V0UXVhbGlmaWVyKCkpCi0JCQkJCQkmJiBzYWZlU3VidHJl
ZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSkgJiYKLQkJCQkJCXNhZmVTdWJ0cmVl
TGlzdE1hdGNoKG5vZGUuYW5ub3RhdGlvbnMoKSwgby5hbm5vdGF0aW9ucygpKTsKKwkJCQkJCSYm
IHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXROYW1lKCksIG8uZ2V0TmFtZSgpKTsKIAkJfQkKIAl9
CiAKQEAgLTE3ODUsOCArMTc4NCw3IEBACiAJCQljYXNlIEFTVC5KTFM0OgogCQkJCXJldHVybiBu
b2RlLmdldElkZW50aWZpZXIoKS5lcXVhbHMoby5nZXRJZGVudGlmaWVyKCkpOwogCQkJZGVmYXVs
dDoKLQkJCQlyZXR1cm4gKG5vZGUuZ2V0SWRlbnRpZmllcigpLmVxdWFscyhvLmdldElkZW50aWZp
ZXIoKSkpICYmCi0JCQkJCQlzYWZlU3VidHJlZUxpc3RNYXRjaChub2RlLmFubm90YXRpb25zKCks
IG8uYW5ub3RhdGlvbnMoKSk7CisJCQkJcmV0dXJuIChub2RlLmdldElkZW50aWZpZXIoKS5lcXVh
bHMoby5nZXRJZGVudGlmaWVyKCkpKTsKIAkJfQkKIAl9CiAKQEAgLTE4MTUsOCArMTgxMyw3IEBA
CiAJCQljYXNlIEFTVC5KTFM0OgogCQkJCXJldHVybiBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0
TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCQlkZWZhdWx0OgotCQkJCXJldHVybiAoc2FmZVN1YnRy
ZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpKSAmJgotCQkJCQkJc2FmZVN1YnRy
ZWVMaXN0TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygpLCBvLmFubm90YXRpb25zKCkpOworCQkJCXJl
dHVybiAoc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpKTsKIAkJ
fQogCX0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNl
L2pkdC9jb3JlL2RvbS9OYW1lLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQppbmRleCBlN2QwNzI2Li4zNGNjMmFkIDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L05hbWUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2NvcmUvZG9tL05hbWUuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhl
cnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhl
cnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBh
bnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9m
IHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRo
aXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xNCw4ICsxNCw2IEBACiAg
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKi8KIAogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b207Ci0KLWltcG9ydCBqYXZhLnV0aWwuTGlzdDsKIAogLyoqCiAgKiBBYnN0cmFjdCBiYXNlIGNs
YXNzIGZvciBhbGwgQVNUIG5vZGVzIHRoYXQgcmVwcmVzZW50IG5hbWVzLgpAQCAtNzEsMTIgKzY5
LDYgQEAKIAkgKi8KIAlpbnQgaW5kZXg7CiAJCi0JLyoqCi0JICogVGhlIHR5cGUgYW5ub3RhdGlv
bnMgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFubm90YXRpb259KS4KLQkgKiBAc2luY2UgMy45Ci0J
ICovCi0JcHJvdGVjdGVkIEFTVE5vZGUuTm9kZUxpc3QgYW5ub3RhdGlvbnMgPSBudWxsOwotCiAJ
LyoqCiAJICogQ3JlYXRlcyBhIG5ldyBBU1Qgbm9kZSBmb3IgYSBuYW1lIG93bmVkIGJ5IHRoZSBn
aXZlbiBBU1QuCiAJICogPHA+CkBAIC0xNTUsMTggKzE0Nyw0IEBACiAJICovCiAJYWJzdHJhY3Qg
dm9pZCBhcHBlbmROYW1lKFN0cmluZ0J1ZmZlciBidWZmZXIpOwogCQotCS8qKgotCSAqIFJldHVy
bnMgdGhlIGxpdmUgb3JkZXJlZCBsaXN0IG9mIGFubm90YXRpb25zIGZvciB0aGlzIE5hbWUgbm9k
ZS4KLQkgKgotCSAqIEByZXR1cm4gdGhlIGxpdmUgbGlzdCBvZiBhbm5vdGF0aW9ucyAoZWxlbWVu
dCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pCi0JICogQGV4Y2VwdGlvbiBVbnN1cHBvcnRlZE9w
ZXJhdGlvbkV4Y2VwdGlvbiBpZiB0aGlzIG9wZXJhdGlvbiBpcyB1c2VkCi0JICogICAgICAgICAg
ICBpbiBhIEpMUzIsIEpMUzMgb3IgSkxTNCBBU1QKLQkgKiBAc2luY2UgMy45Ci0JICovCi0JcHVi
bGljIExpc3QgYW5ub3RhdGlvbnMoKSB7Ci0JCWlmICh0aGlzLmFubm90YXRpb25zID09IG51bGwp
IHsKLQkJCXVuc3VwcG9ydGVkSW4yXzNfNCgpOyAKLQkJfQotCQlyZXR1cm4gdGhpcy5hbm5vdGF0
aW9uczsKLQl9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2NvcmUvZG9tL1F1YWxpZmllZE5hbWUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vUXVhbGlmaWVkTmFtZS5qYXZhCmluZGV4
IDFmMGUyNzIuLjM3ZGNlODYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvY29yZS9kb20vUXVhbGlmaWVkTmFtZS5qYXZhCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vUXVhbGlmaWVkTmFtZS5q
YXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdo
dCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdo
dCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdo
dHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMK
ICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVi
bGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24s
IGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTYxLDM5ICs2MSwxOCBAQAogCQluZXcgQ2hpbGRQcm9w
ZXJ0eURlc2NyaXB0b3IoUXVhbGlmaWVkTmFtZS5jbGFzcywgIm5hbWUiLCBTaW1wbGVOYW1lLmNs
YXNzLCBNQU5EQVRPUlksIE5PX0NZQ0xFX1JJU0spOyAvLyROT04tTkxTLTEkCiAKIAkvKioKLQkg
KiBUaGUgImFubm90YXRpb25zIiBzdHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHRoaXMgbm9kZSB0eXBl
IChjaGlsZCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pLgotCSAqIEBzaW5jZSAzLjkKLQkgKi8K
LQlwdWJsaWMgc3RhdGljIGZpbmFsIENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBBTk5PVEFU
SU9OU19QUk9QRVJUWSA9Ci0JCW5ldyBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IoUXVhbGlm
aWVkTmFtZS5jbGFzcywgImFubm90YXRpb25zIiwgQW5ub3RhdGlvbi5jbGFzcywgQ1lDTEVfUklT
Syk7IC8vJE5PTi1OTFMtMSQKLQkvKioKIAkgKiBBIGxpc3Qgb2YgcHJvcGVydHkgZGVzY3JpcHRv
cnMgKGVsZW1lbnQgdHlwZToKIAkgKiB7QGxpbmsgU3RydWN0dXJhbFByb3BlcnR5RGVzY3JpcHRv
cn0pLAogCSAqIG9yIG51bGwgaWYgdW5pbml0aWFsaXplZC4KIAkgKi8KIAlwcml2YXRlIHN0YXRp
YyBmaW5hbCBMaXN0IFBST1BFUlRZX0RFU0NSSVBUT1JTOwogCQotCS8qKgotCSAqIEEgbGlzdCBv
ZiBwcm9wZXJ0eSBkZXNjcmlwdG9ycyAoZWxlbWVudCB0eXBlOgotCSAqIHtAbGluayBTdHJ1Y3R1
cmFsUHJvcGVydHlEZXNjcmlwdG9yfSksCi0JICogb3IgbnVsbCBpZiB1bmluaXRpYWxpemVkLgot
CSAqIEBzaW5jZSAzLjkKLQkgKi8KLQlwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0IFBST1BFUlRZ
X0RFU0NSSVBUT1JTXzhfMDsKLQogCXN0YXRpYyB7CiAJCUxpc3QgcHJvcGVydHlMaXN0ID0gbmV3
IEFycmF5TGlzdCgzKTsKIAkJY3JlYXRlUHJvcGVydHlMaXN0KFF1YWxpZmllZE5hbWUuY2xhc3Ms
IHByb3BlcnR5TGlzdCk7CiAJCWFkZFByb3BlcnR5KFFVQUxJRklFUl9QUk9QRVJUWSwgcHJvcGVy
dHlMaXN0KTsKIAkJYWRkUHJvcGVydHkoTkFNRV9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKLQkJ
UFJPUEVSVFlfREVTQ1JJUFRPUlMgPSByZWFwUHJvcGVydHlMaXN0KHByb3BlcnR5TGlzdCk7Ci0J
CQotCQlwcm9wZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0KDQpOwotCQljcmVhdGVQcm9wZXJ0eUxp
c3QoUXVhbGlmaWVkTmFtZS5jbGFzcywgcHJvcGVydHlMaXN0KTsKLQkJYWRkUHJvcGVydHkoUVVB
TElGSUVSX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwotCQlhZGRQcm9wZXJ0eShOQU1FX1BST1BF
UlRZLCBwcm9wZXJ0eUxpc3QpOwotCQlhZGRQcm9wZXJ0eShBTk5PVEFUSU9OU19QUk9QRVJUWSwg
cHJvcGVydHlMaXN0KTsKLQkJUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wID0gcmVhcFByb3BlcnR5
TGlzdChwcm9wZXJ0eUxpc3QpOworCQlQUk9QRVJUWV9ERVNDUklQVE9SUyA9IHJlYXBQcm9wZXJ0
eUxpc3QocHJvcGVydHlMaXN0KTsJCQogCX0KIAogCS8qKgpAQCAtMTA3LDE0ICs4Niw3IEBACiAJ
ICogQHNpbmNlIDMuMAogCSAqLwogCXB1YmxpYyBzdGF0aWMgTGlzdCBwcm9wZXJ0eURlc2NyaXB0
b3JzKGludCBhcGlMZXZlbCkgewotCQlzd2l0Y2ggKGFwaUxldmVsKSB7Ci0JCQljYXNlIEFTVC5K
TFMyX0lOVEVSTkFMIDoKLQkJCWNhc2UgQVNULkpMUzNfSU5URVJOQUwgOgotCQkJY2FzZSBBU1Qu
SkxTNDoKLQkJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlM7Ci0JCQlkZWZhdWx0IDoKLQkJ
CQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wOwotCQl9CisJCXJldHVybiBQUk9QRVJU
WV9ERVNDUklQVE9SUzsKIAl9CiAKIAkvKioKQEAgLTE0MSw5ICsxMTMsNiBAQAogCSAqLwogCVF1
YWxpZmllZE5hbWUoQVNUIGFzdCkgewogCQlzdXBlcihhc3QpOwotCQlpZiAoYXN0LmFwaUxldmVs
ID49IEFTVC5KTFM4KSB7Ci0JCQl0aGlzLmFubm90YXRpb25zID0gbmV3IEFTVE5vZGUuTm9kZUxp
c3QoQU5OT1RBVElPTlNfUFJPUEVSVFkpOwotCQl9CiAJfQogCiAJLyogKG9taXQgamF2YWRvYyBm
b3IgdGhpcyBtZXRob2QpCkBAIC0xNTcsOSArMTI2LDYgQEAKIAkgKiBNZXRob2QgZGVjbGFyZWQg
b24gQVNUTm9kZS4KIAkgKi8KIAlmaW5hbCBMaXN0IGludGVybmFsR2V0Q2hpbGRMaXN0UHJvcGVy
dHkoQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yIHByb3BlcnR5KSB7Ci0JCWlmIChwcm9wZXJ0
eSA9PSBBTk5PVEFUSU9OU19QUk9QRVJUWSkgewotCQkJcmV0dXJuIGFubm90YXRpb25zKCk7Ci0J
CX0KIAkJLy8gYWxsb3cgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB0byBmbGFnIHRoZSBlcnJvcgog
CQlyZXR1cm4gc3VwZXIuaW50ZXJuYWxHZXRDaGlsZExpc3RQcm9wZXJ0eShwcm9wZXJ0eSk7CiAJ
fQpAQCAtMjAzLDExICsxNjksNiBAQAogCQlyZXN1bHQuc2V0U291cmNlUmFuZ2UoZ2V0U3RhcnRQ
b3NpdGlvbigpLCBnZXRMZW5ndGgoKSk7CiAJCXJlc3VsdC5zZXRRdWFsaWZpZXIoKE5hbWUpIGdl
dFF1YWxpZmllcigpLmNsb25lKHRhcmdldCkpOwogCQlyZXN1bHQuc2V0TmFtZSgoU2ltcGxlTmFt
ZSkgZ2V0TmFtZSgpLmNsb25lKHRhcmdldCkpOwotCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwgPj0g
QVNULkpMUzgpIHsKLQkJCXJlc3VsdC5hbm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0
KEFOTk9UQVRJT05TX1BST1BFUlRZKTsKLQkJCXJlc3VsdC5hbm5vdGF0aW9ucy5hZGRBbGwoCi0J
CQkJCUFTVE5vZGUuY29weVN1YnRyZWVzKHRhcmdldCwgYW5ub3RhdGlvbnMoKSkpOwotCQl9CiAJ
CXJldHVybiByZXN1bHQ7CiAJfQogCkBAIC0yMjcsOSArMTg4LDYgQEAKIAkJaWYgKHZpc2l0Q2hp
bGRyZW4pIHsKIAkJCS8vIHZpc2l0IGNoaWxkcmVuIGluIG5vcm1hbCBsZWZ0IHRvIHJpZ2h0IHJl
YWRpbmcgb3JkZXIKIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldFF1YWxpZmllcigpKTsKLQkJ
CWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgewotCQkJCWFjY2VwdENoaWxkcmVu
KHZpc2l0b3IsIHRoaXMuYW5ub3RhdGlvbnMpOwotCQkJfQogCQkJYWNjZXB0Q2hpbGQodmlzaXRv
ciwgZ2V0TmFtZSgpKTsKIAkJfQogCQl2aXNpdG9yLmVuZFZpc2l0KHRoaXMpOwpAQCAtMzM3LDgg
KzI5NSw3IEBACiAJCXJldHVybgogCQkJbWVtU2l6ZSgpCiAJCQkrICh0aGlzLm5hbWUgPT0gbnVs
bCA/IDAgOiBnZXROYW1lKCkudHJlZVNpemUoKSkKLQkJCSsgKHRoaXMucXVhbGlmaWVyID09IG51
bGwgPyAwIDogZ2V0UXVhbGlmaWVyKCkudHJlZVNpemUoKSkKLQkJCSsgKHRoaXMuYW5ub3RhdGlv
bnMgPT0gbnVsbCA/IDAgOiB0aGlzLmFubm90YXRpb25zLmxpc3RTaXplKCkpOworCQkJKyAodGhp
cy5xdWFsaWZpZXIgPT0gbnVsbCA/IDAgOiBnZXRRdWFsaWZpZXIoKS50cmVlU2l6ZSgpKTsKIAl9
CiB9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKaW5kZXggMjY5NDZkMi4uZDk2
MzBjNiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9t
L29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKQEAgLTEsNSArMSw1IEBA
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBw
cm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAg
KiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBh
dApAQCAtMTIzLDkgKzEyMyw2IEBACiAJICovCiAJU2ltcGxlTmFtZShBU1QgYXN0KSB7CiAJCXN1
cGVyKGFzdCk7Ci0JCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCXRoaXMuYW5u
b3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7Ci0J
CX0KIAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTE0MCw5ICsx
MzcsNiBAQAogCSAqIE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCWZpbmFsIExp
c3QgaW50ZXJuYWxHZXRDaGlsZExpc3RQcm9wZXJ0eShDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0
b3IgcHJvcGVydHkpIHsKLQkJaWYgKHByb3BlcnR5ID09IEFOTk9UQVRJT05TX1BST1BFUlRZKSB7
Ci0JCQlyZXR1cm4gYW5ub3RhdGlvbnMoKTsKLQkJfQogCQkvLyBhbGxvdyBkZWZhdWx0IGltcGxl
bWVudGF0aW9uIHRvIGZsYWcgdGhlIGVycm9yCiAJCXJldHVybiBzdXBlci5pbnRlcm5hbEdldENo
aWxkTGlzdFByb3BlcnR5KHByb3BlcnR5KTsKIAl9CkBAIC0xNzcsMTEgKzE3MSw2IEBACiAJCVNp
bXBsZU5hbWUgcmVzdWx0ID0gbmV3IFNpbXBsZU5hbWUodGFyZ2V0KTsKIAkJcmVzdWx0LnNldFNv
dXJjZVJhbmdlKGdldFN0YXJ0UG9zaXRpb24oKSwgZ2V0TGVuZ3RoKCkpOwogCQlyZXN1bHQuc2V0
SWRlbnRpZmllcihnZXRJZGVudGlmaWVyKCkpOwotCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwgPj0g
QVNULkpMUzgpIHsKLQkJCXJlc3VsdC5hbm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0
KEFOTk9UQVRJT05TX1BST1BFUlRZKTsKLQkJCXJlc3VsdC5hbm5vdGF0aW9ucy5hZGRBbGwoCi0J
CQkJCUFTVE5vZGUuY29weVN1YnRyZWVzKHRhcmdldCwgYW5ub3RhdGlvbnMoKSkpOwotCQl9CiAJ
CXJldHVybiByZXN1bHQ7CiAJfQogCkBAIC0xOTcsMTIgKzE4Niw3IEBACiAJICogTWV0aG9kIGRl
Y2xhcmVkIG9uIEFTVE5vZGUuCiAJICovCiAJdm9pZCBhY2NlcHQwKEFTVFZpc2l0b3IgdmlzaXRv
cikgewotCQlib29sZWFuIHZpc2l0Q2hpbGRyZW4gPSB2aXNpdG9yLnZpc2l0KHRoaXMpOwotCQlp
ZiAodmlzaXRDaGlsZHJlbikgewotCQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4
KSB7Ci0JCQkJYWNjZXB0Q2hpbGRyZW4odmlzaXRvciwgdGhpcy5hbm5vdGF0aW9ucyk7Ci0JCQl9
Ci0JCX0KKwkJdmlzaXRvci52aXNpdCh0aGlzKTsKIAkJdmlzaXRvci5lbmRWaXNpdCh0aGlzKTsK
IAl9CiAKQEAgLTM2NSw3ICszNDksNyBAQAogCSAqIE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2Rl
LgogCSAqLwogCWludCB0cmVlU2l6ZSgpIHsKLQkJcmV0dXJuIG1lbVNpemUoKSArICh0aGlzLmFu
bm90YXRpb25zID09IG51bGwgPyAwIDogdGhpcy5hbm5vdGF0aW9ucy5saXN0U2l6ZSgpKTsKKwkJ
cmV0dXJuIG1lbVNpemUoKTsKIAl9CiB9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVu
ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQppbmRleCAxOWEzYmFlLi43YWUyNTJl
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZs
YXR0ZW5lci5qYXZhCkBAIC0xMjQyLDcgKzEyNDIsNiBAQAogCXB1YmxpYyBib29sZWFuIHZpc2l0
KFF1YWxpZmllZE5hbWUgbm9kZSkgewogCQlub2RlLmdldFF1YWxpZmllcigpLmFjY2VwdCh0aGlz
KTsKIAkJdGhpcy5idWZmZXIuYXBwZW5kKCIuIik7Ly8kTk9OLU5MUy0xJAotCQl2aXNpdFR5cGVB
bm5vdGF0aW9ucyhub2RlKTsKIAkJbm9kZS5nZXROYW1lKCkuYWNjZXB0KHRoaXMpOwogCQlyZXR1
cm4gZmFsc2U7CiAJfQpAQCAtMTI3Nyw3ICsxMjc2LDYgQEAKIAkgKiBAc2VlIEFTVFZpc2l0b3Ij
dmlzaXQoU2ltcGxlTmFtZSkKIAkgKi8KIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChTaW1wbGVOYW1l
IG5vZGUpIHsKLQkJdmlzaXRUeXBlQW5ub3RhdGlvbnMobm9kZSk7CiAJCXRoaXMuYnVmZmVyLmFw
cGVuZChub2RlLmdldElkZW50aWZpZXIoKSk7CiAJCXJldHVybiBmYWxzZTsKIAl9CkBAIC0xODIx
LDE4ICsxODE5LDYgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwcml2YXRlIHZvaWQgdmlzaXRU
eXBlQW5ub3RhdGlvbnMoVHlwZSBub2RlKSB7Ci0JCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVs
KCkgPj0gQVNULkpMUzgpIHsKLQkJCUxpc3QgYW5ub3RhdGlvbnMgPSBub2RlLmFubm90YXRpb25z
KCk7Ci0JCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCkgewotCQkJCWZvciAoSXRlcmF0b3IgaXQg
PSBhbm5vdGF0aW9ucy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7ICkgewotCQkJCQlBbm5vdGF0
aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgaXQubmV4dCgpOwotCQkJCQlhbm5vdGF0aW9u
LmFjY2VwdCh0aGlzKTsKLQkJCQkJdGhpcy5idWZmZXIuYXBwZW5kKCcgJyk7Ci0JCQkJfQotCQkJ
fQotCQl9Ci0JfQotCXByaXZhdGUgdm9pZCB2aXNpdFR5cGVBbm5vdGF0aW9ucyhOYW1lIG5vZGUp
IHsKIAkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkgewogCQkJTGlz
dCBhbm5vdGF0aW9ucyA9IG5vZGUuYW5ub3RhdGlvbnMoKTsKIAkJCWlmIChhbm5vdGF0aW9ucyAh
PSBudWxsKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUv
ZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKaW5kZXggYjI2MTFhMS4uNGIyZDRj
MyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20v
cmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YQpAQCAtMjc3OCw5ICsyNzc4LDYgQEAKIAkJ
fQogCiAJCXJld3JpdGVSZXF1aXJlZE5vZGUobm9kZSwgUXVhbGlmaWVkTmFtZS5RVUFMSUZJRVJf
UFJPUEVSVFkpOwotCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4KSB7
Ci0JCQlyZXdyaXRlVHlwZUFubm90YXRpb25zKG5vZGUsIFF1YWxpZmllZE5hbWUuQU5OT1RBVElP
TlNfUFJPUEVSVFksIG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpKTsKLQkJfQogCQlyZXdyaXRlUmVx
dWlyZWROb2RlKG5vZGUsIFF1YWxpZmllZE5hbWUuTkFNRV9QUk9QRVJUWSk7CiAJCXJldHVybiBm
YWxzZTsKIAl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3Jl
L2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQppbmRleCAxNGQyYjU5Li4zZWE1
OTdhIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCisrKyBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9k
b20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKQEAgLTczNCw5ICs3MzQsNiBAQAog
CXB1YmxpYyBib29sZWFuIHZpc2l0KFF1YWxpZmllZE5hbWUgbm9kZSkgewogCQlnZXRDaGlsZE5v
ZGUobm9kZSwgUXVhbGlmaWVkTmFtZS5RVUFMSUZJRVJfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsK
IAkJdGhpcy5yZXN1bHQuYXBwZW5kKCcuJyk7Ci0JCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVs
KCkgPj0gQVNULkpMUzgpIHsKLQkJCXZpc2l0TGlzdChub2RlLCBRdWFsaWZpZWROYW1lLkFOTk9U
QVRJT05TX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZignICcpLCBVdGlsLkVNUFRZX1NUUklORywg
U3RyaW5nLnZhbHVlT2YoJyAnKSk7Ci0JCX0KIAkJZ2V0Q2hpbGROb2RlKG5vZGUsIFF1YWxpZmll
ZE5hbWUuTkFNRV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQ==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225506</attachid>
            <date>2013-01-11 09:53:00 -0500</date>
            <delta_ts>2013-01-18 03:56:51 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Bug-395886--18DOM-AST-Withdraw-annotations-property-from-Name.patch</filename>
            <type>text/plain</type>
            <size>82561</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDNhMzVlNTcuLjI3ZjYwOTEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTcsNyArMTcsNyBAQAogaW1wb3J0IGphdmEu
dXRpbC5MaXN0OwogCiBpbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3Q7Ci0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5kb20uKjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29t
cGlsYXRpb25Vbml0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2Vw
dGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUOwpAQCAtOTgsNCArOTgs
OTI5IEBACiAJCWFubm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOwogCQlj
aGVja1NvdXJjZVJhbmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOwogCX0KKwkK
KwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
Mzk1ODg2CisJICogdGVzdHMgYW5ub3RhdGlvbnMgb24gUVRSIGluIG11bHRpcGxlIHNjZW5hcmlv
cyBvZiBvY2N1cnJlbmNlLgorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJ
cHVibGljIHZvaWQgdGVzdDAwMDIoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhp
cy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDAy
L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAorCQkJCSJw
YWNrYWdlIHRlc3QwMDAyO1xuIiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5U
YXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIglwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlPdXRlciBvdXRlciA9
IG5ldyBPdXRlcigpO1xuIiArCQkKKwkJCQkiCQlPYmplY3QgbXlPYmplY3QgPSBuZXcgT2JqZWN0
KCk7XG4iKworCQkJCSIJCVN0cmluZyBteVN0cmluZztcbiIrCisJCQkJIgkJbXlTdHJpbmcgPSAo
amF2YS5sYW5nLkBNYXJrZXIgU3RyaW5nKSBteU9iamVjdDtcbiIrCisJCQkJIgkJT3V0ZXIuSW5u
ZXIgZmlyc3QgPSBvdXRlci5uZXcgSW5uZXIoKTtcbiIgKworCQkJCSIJCU91dGVyLiBATWFya2Vy
MiBJbm5lciBzZWNvbmQgPSBvdXRlci5uZXcgSW5uZXIoKSA7XG4iICsKKwkJCQkiCQlPdXRlci5J
bm5lci4gQE1hcmtlcjEgRGVlcGVyIGRlZXBlciA9IHNlY29uZC5uZXcgRGVlcGVyKCk7XG4iICsK
KwkJCQkiCQlPdXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIgZGVlcGVyMiA9ICBz
ZWNvbmQubmV3IERlZXBlcigpO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
ImNsYXNzIE91dGVyIHtcbiIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJ
CSIJCXB1YmxpYyBjbGFzcyBEZWVwZXIge1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgl9XG4i
ICsKKwkJCQkifVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1l
bnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyIHt9XG4iICsKKwkJ
CQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4i
ICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5s
YW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFj
ZSBNYXJrZXIyIHt9XG4iCQkKKwkJCQk7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxh
dGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkp
OworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJh
dGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJCUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERl
Y2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCk7CisJCWludCBzQ291bnQgPSAzOyAKKwor
CQkvLyBjYXNlIDEgLSBhbm5vdGF0aW9uIGp1c3QgYmVmb3JlIHRoZSBsYXN0IGZpZWxkCisJCUV4
cHJlc3Npb25TdGF0ZW1lbnQgZXhwcmVzc2lvblN0YXRlbWVudCA9IChFeHByZXNzaW9uU3RhdGVt
ZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCUFzc2lnbm1lbnQgYXNzaWdubWVudCA9
IChBc3NpZ25tZW50KSBleHByZXNzaW9uU3RhdGVtZW50LmdldEV4cHJlc3Npb24oKTsKKwkJYXNz
ZXJ0Tm90TnVsbChhc3NpZ25tZW50KTsKKwkJQ2FzdEV4cHJlc3Npb24gY2FzdEV4cHJlc3Npb24g
PSAoQ2FzdEV4cHJlc3Npb24pYXNzaWdubWVudC5nZXRSaWdodEhhbmRTaWRlKCk7CisJCWFzc2Vy
dE5vdE51bGwoY2FzdEV4cHJlc3Npb24pOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgY2FzdEV4cHJlc3Npb24uZ2V0VHlwZSgpOworCQlhc3NlcnROb3RO
dWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZy5ATWFya2VyIFN0
cmluZyIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9
IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBl
KSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZyIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRp
b25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCVNpbXBs
ZU5hbWUgc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIlN0cmluZyIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBR
dWFsaWZpZWRUeXBlIHdpdGhvdXQgYW5ub3RhdGlvbnMuCisJCVZhcmlhYmxlRGVjbGFyYXRpb25T
dGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCVR5cGUgdHlwZSA9IHZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUu
aXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMCk7CisJCQorCQkvLyBjYXNlIDMgLSBRYXVsaWZpZWQgVHlwZSB3aXRo
IG91dGVyIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIGlubmVyIHdpdGggYW5ub3RhdGlvbnMuCisJ
CXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMiBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CQkKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFu
bm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFu
bm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFu
bm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlh
c3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOwor
CQlzaW1wbGVOYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygi
SW5uZXIiLCBzaW1wbGVOYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNCAtIE11bHRpcGxl
IGxldmVscyB3aXRoIGFubm90YXRpb25zIGF0IHRoZSBsYXN0IG9ubHkuCisJCXZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgc3RhdGVt
ZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1
YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0Tm90TnVsbChxdWFs
aWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5Jbm5lci5ATWFya2VyMSBEZWVwZXIi
LCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOwkJCisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZp
ZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1w
bGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlh
bm5vdGF0aW9ucyA9IHF1YWxpZmllclR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsK
KwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMo
IkRlZXBlciIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA1IC0gTXVsdGlw
bGUgYW5ub3RhdGlvbnMKKwkJdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCXR5cGUg
PSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBl
KSB0eXBlOworCQlhc3NlcnROb3ROdWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyLkBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlciIsIHF1YWxpZmllZFR5cGUudG9T
dHJpbmcoKSk7CQkKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7
CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIyIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlzaW1wbGVOYW1l
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgc2lt
cGxlTmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmllZFR5cGUo
KSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSlxdWFsaWZpZXJUeXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJr
ZXIxIiwgYW5ub3RhdGlvbnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlzaW1wbGVOYW1lID0gcXVh
bGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBzaW1wbGVOYW1l
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZp
ZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2lt
cGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZXJU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDAp
OworCX0KKworCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVn
LmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyB0aGUgcmVwcmVzZW50YXRpb24gb2YgdHlwZSBhbm5v
dGF0aW9ucyBvbiBhIHBvc3NpYmxlIEpBVkEgNyBhbmQgOCBwbGFjZS4KKwkgKiBAdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDAzKCkgdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgi
L0NvbnZlcnRlcjE4L3NyYy90ZXN0MDAwMy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlT
dHJpbmcgY29udGVudHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAwMztcbiIgKworCQkJCSJpbXBv
cnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBY
IHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xu
IiArCisJCQkJIgkJQE1hcmtlciBPdXRlci5Jbm5lciBmaXJzdFtdID0gbmV3IE91dGVyLklubmVy
WzFdO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIE91dGVyIHtc
biIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJ
In1cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlciB7fVxuIiAKKwkJCQk7CisJCUNv
bXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRl
bnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkpOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2RE
ZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJ
CUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRz
KCk7CisJCWludCBzQ291bnQgPSAwOyAKKworCQkvLyBDdXJyZW50IGRlc2lnbiBleHBlY3RzIGFu
bm90YXRpb24gb25seSBhdCB0aGUgSkFWQSA3IHBsYWNlIGlmIGl0IGlzIGV4cGVjdGVkIGF0IEpB
VkEgOC4KKwkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0aW9u
U3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0
KHNDb3VudCk7CisJCUxpc3QgbW9kaWZpZXJzID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dC5tb2RpZmllcnMoKTsKKwkJYXNzZXJ0VHJ1ZShtb2RpZmllcnMuc2l6ZSgpID09IDEpOworCQlB
bm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbiltb2RpZmllcnMuZ2V0KDApOworCQlh
c3NlcnRFcXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlUeXBlIHR5
cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBs
ZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRv
U3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygp
OworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisKKwkvKioKKwkg
KiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJ
ICogdGVzdHMgUVRSIHdpdGggYW5ub3RhdGlvbnMKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDA0KCkgdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4
L3NyYy90ZXN0MDAwNC9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlTdHJpbmcgY29udGVu
dHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAwNDsiICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5h
bm5vdGF0aW9uLlRhcmdldDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9u
ZTwvKnN0YXJ0Ki9ATWFya2VyMSBPdXRlcjxJbnRlZ2VyPi4gQE1hcmtlcjIgSW5uZXI8RG91Ymxl
PltdLyplbmQqLz4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImludGVyZmFjZSBPbmU8VD4g
e31cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXI8VD4ge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNz
IElubmVyPFM+IHt9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBN
YXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iIAorCQkJ
CTsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoCisJ
CQkJY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsMCk7CisJCUFy
cmF5VHlwZSB0eXBlID0gKEFycmF5VHlwZSkgKChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlZGVjbGFy
YXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKSkudHlwZUFyZ3VtZW50cygpLmdldCgw
KTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYW5ub3RhdGlvbiIsIHR5cGUpOworCQlJVHlwZUJpbmRp
bmcgYmluZGluZyA9IHR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8g
YmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1l
IiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91
YmxlPltdIiwgYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlUeXBlIGNvbXBvbmVudFR5
cGUgPSB0eXBlLmdldENvbXBvbmVudFR5cGUoKTsKKwkJYmluZGluZyA9IGNvbXBvbmVudFR5cGUu
cmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcp
OworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVy
PGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91YmxlPiIsIGJpbmRpbmcuZ2V0
UXVhbGlmaWVkTmFtZSgpKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBjb21w
b25lbnRUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBh
cmFtZXRlcml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBjb21wb25lbnRUeXBlOworCQlU
eXBlIHR5cGUyID0gcGFyYW1ldGVyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKCJO
b3QgcXVhbGlmaWVkIiwgdHlwZTIuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlRdWFsaWZpZWRUeXBl
IHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTI7CisJCWJpbmRpbmcgPSBxdWFs
aWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmci
LCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0
MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLCBi
aW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCVR5cGUgcXVhbGlmaWVyID0gcXVhbGlmaWVk
VHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBx
dWFsaWZpZXIuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJYmluZGluZyA9IHF1YWxpZmllci5y
ZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7
CisJCWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMDQuT3V0ZXI8
amF2YS5sYW5nLkludGVnZXI+IiwgYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlwYXJh
bWV0ZXJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyOworCQl0eXBlMiA9
IHBhcmFtZXRlcml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHNpbXBsZSB0
eXBlIiwgdHlwZTIuaXNTaW1wbGVUeXBlKCkpOworCQliaW5kaW5nID0gdHlwZTIucmVzb2x2ZUJp
bmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcpOworCQlhc3Nl
cnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFu
Zy5JbnRlZ2VyPiIsIGJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwl9CisJCisJLyoqCisJ
ICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4Ngor
CSAqIHRlc3RzIFFUUiB3aXRoIGFubm90YXRpb25zCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwNSgpIHRocm93cyBKYXZhTW9kZWxFeGNl
cHRpb24geworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIx
OC9zcmMvdGVzdDAwMDUvWC5qYXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRl
bnRzID0gCisJCQkJInBhY2thZ2UgdGVzdDAwMDU7IiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcu
YW5ub3RhdGlvbi5UYXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBP
bmU8IE91dGVyLklubmVyID4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkgaW1w
bGVtZW50cyBPbmU8IE91dGVyLiBATWFya2VyMSBJbm5lciA+IHtcbiIgKyAKKwkJCQkifVxuIiAr
IAorCQkJCSJjbGFzcyBaIGltcGxlbWVudHMgT25lPCBATWFya2VyMSBPdXRlci5Jbm5lciA+IHtc
biIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBXIGltcGxlbWVudHMgT25lPCBATWFya2Vy
MSBPdXRlci4gQE1hcmtlcjIgSW5uZXIgPiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiaW50
ZXJmYWNlIE9uZTxUPiB7fVxuIiArIAorCQkJCSJjbGFzcyBPdXRlciB7XG4iICsgCisJCQkJIglw
dWJsaWMgY2xhc3MgSW5uZXIge31cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJAVGFyZ2V0IChq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50
ZXJmYWNlIE1hcmtlcjEge31cbiIgKworCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlv
bi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlcjIge31c
biIgCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBidWls
ZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJaW50IHRDb3Vu
dCA9IDA7CisJCQorCQkvLyBjYXNlIDEgLSBubyBhbm5vdGF0aW9ucyBPdXRlci5Jbm5lcgorCQlU
eXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1RO
b2RlKGN1LCB0Q291bnQrKyk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQlMaXN0IHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
VHlwZSB0eXBlID0gKFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCB0eXBlLnRv
U3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSAyIC0gUVRSIHdpdGggb25lIGFubm90YXRpb24gT3V0
ZXIuQE1hcmtlcjEgSW5uZXIKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbiln
ZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7
CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOwor
CQlhc3NlcnRFcXVhbHMoIklubmVyIiwgcXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJpbmco
KSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlBbm5vdGF0aW9uIGFubm90
YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBl
ID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJU
eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRv
U3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSAzIC0gUVRSIHdpdGggb25lIGFubm90YXRpb24gYXQg
dGhlIGJlZ2lubmluZyBATWFya2VyMSBPdXRlci5Jbm5lcgorCQl0eXBlZGVjbGFyYXRpb24gPSAo
VHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
dHlwZSA9IChUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRUcnVlKHR5cGUuaXNR
dWFsaWZpZWRUeXBlKCkpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyLklubmVyIiwg
dHlwZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBl
OworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgcXVhbGlmaWVkVHlwZS5nZXROYW1lKCkudG9TdHJp
bmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlh
c3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRU
cnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9u
KSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0
aW9uLnRvU3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSA0IC0gUVRSIHdpdGggYW5ub3RhdGlvbnMg
YXQgYm90aCB0aGUgdHlwZXMgQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIKKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJ
CXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5z
dXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRz
LnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBP
dXRlci5ATWFya2VyMiBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmll
ZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5
cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7
CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3Nl
cnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVy
VHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlm
aWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVh
bGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChB
bm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEi
LCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJfQorCQorCS8qKgorCSAqIGh0dHBzOi8vYnVn
cy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyBQUVRS
IHdpdGggYW5ub3RhdGlvbnMgcGFydAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJ
ICovCisJcHVibGljIHZvaWQgdGVzdDAwMDYoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsK
KwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rl
c3QwMDA2L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAor
CQkJCSJwYWNrYWdlIHRlc3QwMDA2OyIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0O1xuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgT25lPE91dGVy
LiAgSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFz
cyBYMSBpbXBsZW1lbnRzIE9uZTxPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4+
IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBYMiBpbXBsZW1lbnRzIE9uZTxPdXRl
ci4gQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQki
fVxuIiArIAorCQkJCSJjbGFzcyBYMyBpbXBsZW1lbnRzIE9uZTxATWFya2VyMSBPdXRlci4gQE1h
cmtlcjIgSW5uZXIuIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQki
Y2xhc3MgWSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91
YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkxIGltcGxlbWVudHMgT25l
PE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIEBNYXJrZXIxIERlZXBlcjxEb3VibGU+PiB7XG4iICsg
CisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWTIgaW1wbGVtZW50cyBPbmU8T3V0ZXIxLiBATWFy
a2VyMSBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiAr
IAkJCQkKKwkJCQkiY2xhc3MgWTMgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIxLiBJbm5l
cjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAkJCQkKKwkJ
CQkiY2xhc3MgWTQgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIxLiBATWFya2VyMiBJbm5l
cjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAkJCQkKKwkJ
CQkiY2xhc3MgWiBpbXBsZW1lbnRzIE9uZTxPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERv
dWJsZT4+IHtcbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBaMSBpbXBsZW1lbnRzIE9u
ZTxATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAK
KwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBaMiBpbXBsZW1lbnRzIE9uZTxPdXRlcjI8SW50ZWdl
cj4uIEBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJ
In1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFcgaW1wbGVtZW50cyBPbmU8T3V0ZXIzPERvdWJsZT4u
IEBNYXJrZXIxIEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJhY3Rlcj4uIERlZXBlcjxEb3Vi
bGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImludGVyZmFjZSBPbmU8VD4ge31c
biIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVy
IHtcbiIgKworCQkJCSIgICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4iICsKKwkJCQki
ICAgICAgIH1cbiIrCisJCQkJIiAgIH1cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBP
dXRlcjEge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVyPFQ+IHtcbiIgKworCQkJCSIg
ICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4iICsKKwkJCQkiICAgICAgIH1cbiIrCisJ
CQkJIiAgIH1cbiIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBPdXRlcjIgPFQ+IHtcbiIg
KyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iICsKKwkJCQkiICAgICAgIHB1YmxpYyBj
bGFzcyBEZWVwZXI8Uz4ge31cbiIgKworCQkJCSIgICB9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJ
CQkiY2xhc3MgT3V0ZXIzIDxUPiB7XG4iICsgCisJCQkJIglwdWJsaWMgY2xhc3MgSW5uZXI8Sywg
Vj4ge1xuIiArCisJCQkJIiAgICAgICBwdWJsaWMgY2xhc3MgRGVlcGVyPFM+IHt9XG4iICsKKwkJ
CQkiICAgfVxuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5v
dGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2Vy
MSB7fVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBl
LlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyMiB7fVxuIiAKKwkJCQk7CisJ
CUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNv
bnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkpOworCQlpbnQgdENvdW50ID0gMDsKKwkJCisJ
CS8vIGNhc2UgMTogdmFuaWxsYSBjYXNlIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIHdpdGggc2lu
Z2xlIHR5cGVBcmd1bWVudCAKKwkJLy8gT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJsZT4KKwkJVHlw
ZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0cml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygp
LmdldCgwKTsKKwkJTGlzdCB0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJn
dW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50
eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7
CisJCVR5cGUgdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlw
ZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBs
ZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKXR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0
ZXIuSW5uZXIuRGVlcGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJTmFtZSBuYW1lID0g
c2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUo
KSk7CisJCVF1YWxpZmllZE5hbWUgcXVhbGlmaWVkTmFtZSA9IChRdWFsaWZpZWROYW1lKSBuYW1l
OworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkRlZXBlciIsIHF1YWxpZmllZE5hbWUudG9T
dHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBPbmUgYW5ub3RhdGlvbiBhZnRlciB0aGUgZmly
c3QgY2xhc3MgCisJCS8vIE91dGVyLiBATWFya2VyMSBJbm5lci5EZWVwZXI8RG91YmxlPgorCQl0
eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsr
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0
aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJh
bWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1
bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5l
ci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVB
cmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1l
bnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5p
c1F1YWxpZmllZFR5cGUoKSk7CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IChRdWFs
aWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyLkRl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2Vy
dFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlUeXBlIHF1YWxpZmllclR5cGUgPSAg
cXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBl
LmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVhbGlmaWVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHF1
YWxpZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVyVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
QW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5h
bWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5h
bWUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwor
CQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBs
ZVR5cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCQorCQkvLyBjYXNlIDMgLSBJbm5lciB0eXBlcyBhbm5vdGF0ZWQgd2l0aCBvdXRlciBu
b3QgYW5ub3RhdGVkIHdpdGggbGFzdCB0eXBlIGFyZyAKKwkJLy8gT3V0ZXIuIEBNYXJrZXIxIElu
bmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVj
bGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAo
UGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCku
Z2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRz
KCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRy
aXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4i
LCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50
b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRF
cXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZp
ZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxp
ZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShx
dWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSAgPSAoUXVh
bGlmaWVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2Vy
MSBJbm5lciIsIHF1YWxpZmllclR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVyVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlu
YW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBu
YW1lLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1w
bGVUeXBlKXR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5n
KCkpOwkJCisJCQorCQkvLyBjYXNlIDQgLSBvbmUgYW5ub3RhdGlvbiBvbiB0aGUgb3V0ZXJtb3N0
LCBvbmUgaW4gbWlkZGxlIGFuZCBvbmUgdHlwZWFyZyBpbiBpbm5lcm1vc3QKKyAJCS8vIEBNYXJr
ZXIxIE91dGVyLiBATWFya2VyMiBJbm5lci4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50
ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBl
LnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgp
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lci5E
ZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lci5EZWVwZXIiLCBx
dWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1l
KCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0
aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUu
aXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlICA9IChRdWFsaWZpZWRUeXBlKSBx
dWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyLkBNYXJrZXIyIElu
bmVyIiwgcXVhbGlmaWVyVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZp
ZXJUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUg
PSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUu
dG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlh
c3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5
cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9T
dHJpbmcoKSk7CQkKKwkJYW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFu
bm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIs
IGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDUgLSB3aXRob3V0IGFubm90
YXRpb25zLCBidXQgd2l0aCB0eXBlYXJncyBhdCBzZWNvbmQgYW5kIHRoaXJkIHR5cGVzCisJCS8v
IE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRp
b24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsdENvdW50KyspOworCQlwYXJhbWV0
cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRl
cmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkp
OworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMu
Z2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91
YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1l
bnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFy
YW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0
cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDAp
OworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkKKwkJ
YXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygp
OworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5
cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlw
ZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5h
bWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1YWxpZmllZE5hbWUp
IG5hbWU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlmaWVkTmFtZS50b1N0
cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNiAtIEFubm90IGluIGJldHdlZW4gdHdvIFBRUlQgd2l0
aCBvdXRlcm1vc3QgbmVpdGhlciBhbm5vdGF0ZWQgbm9yIGhhdmluZyB0eXBlYXJncworCQkvLyBP
dXRlcjEuIElubmVyPEludGVnZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJ
cGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1
cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMu
c2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uQE1h
cmtlcjEgRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+LkBNYXJrZXIxIERl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9u
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlm
aWVyKCk7CQkKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5
cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVk
VHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOwor
CQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIklu
dGVnZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRU
eXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUg
PSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRUcnVlKG5hbWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1
YWxpZmllZE5hbWUpIG5hbWU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlm
aWVkTmFtZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNhc2UgNyAtIE91dGVybW9zdCBzdGlsbCBl
bXB0eSAobm8gYW5ub3RhdGlvbnMsIG5vIHR5cGUgYXJncyksIGZvbGxvd2VkIGJ5IGFubm90YXRp
b24sIGFuZCB0aGVuIHR5cGVhcmdzCisJCS8vIE91dGVyMS4gQE1hcmtlcjEgSW5uZXI8SW50ZWdl
cj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24p
Z2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIxLkBNYXJrZXIxIElubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1l
dHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5
cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09
IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVh
bHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVh
bGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MS5ATWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5n
KCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygi
RGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJ
CXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3Nl
cnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJPdXRlcjEuQE1hcmtlcjEgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRv
U3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUg
PSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIs
IHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5ATWFya2VyMSBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlm
aWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9
PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQluYW1l
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5h
bWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQl0eXBl
ID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2lt
cGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQluYW1lID0g
c2ltcGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5hbWUoKSk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIxIiwgbmFtZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNh
c2UgOCAtIFNpbWlsYXIgdG8gYWJvdmUsIGJ1dCB3aXRoIHRoZSBtYWpvciBkaWZmZXJlbmNlIG9m
IGFubm90YXRpb24gc2hpZnRlZCB0byBvdXRlcm1vc3QuCisJCS8vIEBNYXJrZXIxIE91dGVyMS4g
SW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyPEludGVnZXI+LkRlZXBlcjxEb3Vi
bGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVu
dHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJh
bWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlw
ZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRU
eXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFz
c2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1
YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIo
KTsJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsK
KwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0
cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0g
MSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVh
bGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJr
ZXIxIE91dGVyMS5Jbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRp
b25zLnNpemUoKSA9PSAwKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwg
bmFtZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2lt
cGxlVHlwZSkgdHlwZTsKKwkJYW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90
YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFu
bm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJ
YXNzZXJ0VHJ1ZShuYW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEi
LCBuYW1lLnRvU3RyaW5nKCkpOworCQkJCQorCQkvLyBjYXNlIDk6IHNjZW5hcmlvIG9mIHRoZSBh
Ym92ZSBjYXNlIHBsdXMgYW5vdGhlciBhbm5vdGF0aW9uIGF0IG1pZC1sZXZlbC4KKwkJLy8gQE1h
cmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPiAKKwkJ
dHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQr
Kyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJh
dGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJn
dW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUp
dHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBN
YXJrZXIyIElubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50
b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBl
ID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIs
IHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9
IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5A
TWFya2VyMiBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkp
OworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVl
cGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1
YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3NlcnRU
cnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxz
KCJATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRU
eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBl
QXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJ
CXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50
ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5
cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVk
VHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91
dGVyMS5ATWFya2VyMiBJbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUo
bmFtZS5pc1NpbXBsZU5hbWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0
eXBlOworCQlhbm5vdGF0aW9ucyA9IHR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5u
b3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50
b1N0cmluZygpKTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVl
KG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMSIsIG5hbWUudG9T
dHJpbmcoKSk7CisJCQkJCisJCS8vIGNhc2UgMTAgLSBQUVJUIHdpdGggdHdvIHR5cGUgYXJncyBi
dXQgd2l0aG91dCBhbm5vdGF0aW9ucworCQkvLyBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVy
PERvdWJsZT4gCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVh
bHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIu
RGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRy
dWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmll
ZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgcXVhbGlm
aWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIiLCBxdWFsaWZp
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lICA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOwor
CQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlw
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVy
VHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXpl
KCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2Vy
dEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6
ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjIiLCB0eXBlLnRvU3RyaW5n
KCkpOworCQkKKworCQkvLyBjYXNlIDExIC0gYW5ub3RhdGlvbiBhdCBvdXRlcm1vc3QgaW4gYWRk
aXRpb24gdG8gc2NlbmFyaW8gaW4gY2FzZSAxMC4KKwkJLy8gQE1hcmtlcjEgT3V0ZXIyPEludGVn
ZXI+LklubmVyLkRlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xh
cmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQ
YXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5n
ZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4i
LCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlciIsIHF1YWxpZmllZFR5cGUu
dG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0
RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlm
aWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9
PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJ
CQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFs
aWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIyPEludGVnZXI+LklubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0
ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFy
Z3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0
eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVn
ZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBl
KCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIyIiwgdHlwZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3Rh
dGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRp
b25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJp
bmcoKSk7CisJCQkJCisJCS8vIGNhc2UgMTIgLSBObyBhbm5vdGF0aW9ucyBhdCBvdXRlcm1vc3Qs
IGJ1dCBvdXRlcm1vc3QgaGFzIHR5cGVBbm5vdGF0aW9ucy4KKwkJLy8gT3V0ZXIyPEludGVnZXI+
LiBATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0
aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlcklu
dGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50
cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVy
LkBNYXJrZXIyIERlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5
cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRU
eXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5ATWFya2VyMSBJbm5l
ci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0g
cXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRv
U3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsK
KwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAo
QW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIy
IiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOwkJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFs
aWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmll
clR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVyIiwg
cXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSAgPSBxdWFsaWZpZWRUeXBlLmdldE5h
bWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsK
KwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCXR5
cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0
VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CQkKKworCQkvLyBjYXNlIDEzIC0gYSBsaXN0IG9m
IGFubm90YXRpb25zIGFuZCBtdWx0aXBsZSB0eXBlQXJndW1lbnQgZWxlbWVudCBsaXN0cy4KKwkJ
Ly8gT3V0ZXIzPERvdWJsZT4uIEBNYXJrZXIxIEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJh
Y3Rlcj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0
aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJh
bWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQo
MCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsK
KwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjM8RG91YmxlPi5ATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLENo
YXJhY3Rlcj4uRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlw
ZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVl
KHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5
cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIzPERvdWJsZT4uQE1hcmtlcjEgQE1hcmtl
cjIgSW5uZXI8SW50ZWdlcixDaGFyYWN0ZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJp
bmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlw
ZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsK
KwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOwkJCQorCQlh
c3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1l
dHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVl
KHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDIpOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0
eXBlQXJndW1lbnRzLmdldCgwKS50b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCJDaGFyYWN0
ZXIiLCB0eXBlQXJndW1lbnRzLmdldCgxKS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRy
aXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkp
OworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiSW5uZXIiLCBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKS50b1N0cmluZygpKTsKKwkJYW5ub3Rh
dGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3Rh
dGlvbnMuc2l6ZSgpID09IDIpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlv
bnMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3Rh
dGlvbnMuZ2V0KDEpLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlw
ZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVy
aXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1
YWxpZmllclR5cGU7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlQXJndW1lbnRzLmdldCgwKS50b1N0cmluZygpKTsKKwkJ
dHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNT
aW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIzIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwl9CiB9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0
L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNo
ZXJUZXN0LmphdmEKaW5kZXggNjE5OTRmMi4uYmQ5ZGZhMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RNYXRjaGVyVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2
YQpAQCAtMTMzOCw0ICsxMzM4LDMwIEBACiAJCXgxLnZhcmFyZ3NBbm5vdGF0aW9ucygpLmFkZCh0
aGlzLkFOTzEpOwogCQliYXNpY01hdGNoKHgxKTsKIAl9CisJCisJLy8gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgorCXB1YmxpYyB2b2lkIHRlc3RR
dWFsaWZpZWRUeXBlQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsKCkgPCBB
U1QuSkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVF1YWxpZmllZFR5cGUgeDEgPSB0aGlzLmFz
dC5uZXdRdWFsaWZpZWRUeXBlKHRoaXMuVDEsIHRoaXMuTjEpOworCQl4MS5hbm5vdGF0aW9ucygp
LmFkZCh0aGlzLkFOTzEpOworCQl4MSA9IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUoeDEsIHRo
aXMuTjIpOworCQl4MS5hbm5vdGF0aW9ucygpLmFkZCh0aGlzLkFOTzIpOworCQliYXNpY01hdGNo
KHgxKTsKKwl9CisJCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTM5NTg4NgorCXB1YmxpYyB2b2lkIHRlc3RQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZUFubm90YXRpb24oKSB7CisJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCgpIDwgQVNULkpMUzgpIHsK
KwkJCXJldHVybjsKKwkJfQorCQlQYXJhbWV0ZXJpemVkVHlwZSB4MSA9IHRoaXMuYXN0Lm5ld1Bh
cmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5O
MSkpOworCQl4MS5nZXRUeXBlKCkuYW5ub3RhdGlvbnMoKS5hZGQodGhpcy5BTk8xKTsKKwkJeDEu
dHlwZUFyZ3VtZW50cygpLmFkZCh0aGlzLmFzdC5uZXdTaW1wbGVUeXBlKHRoaXMuYXN0Lm5ld1Np
bXBsZU5hbWUoIlNOMSIpKSk7CisJCXgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUo
dGhpcy5hc3QubmV3UXVhbGlmaWVkVHlwZSh4MSwgdGhpcy5OMikpOworCQl4MS50eXBlQXJndW1l
bnRzKCkuYWRkKHRoaXMuYXN0Lm5ld1NpbXBsZVR5cGUodGhpcy5hc3QubmV3U2ltcGxlTmFtZSgi
U04yIikpKTsKKwkJeDEuZ2V0VHlwZSgpLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJ
CWJhc2ljTWF0Y2goeDEpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5q
YXZhCmluZGV4IGY4MTM2YjIuLjZlNjZiZDAgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252
ZXJ0ZXIuamF2YQpAQCAtMjcyMCw3ICsyNzIwLDcgQEAKIAkJCS8vIFF1YWxpZmllZE5hbWUKIAkJ
CW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlID0gKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZTsKIAkJCWZp
bmFsIGxvbmdbXSBwb3NpdGlvbnMgPSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZVBvc2l0
aW9uczsKLQkJCXJldHVybiBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0eXBl
TmFtZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlLCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25z
KTsKKwkJCXJldHVybiBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0eXBlTmFt
ZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlKTsKIAkJfSBlbHNlIHsKIAkJCWZpbmFsIFNpbXBs
ZU5hbWUgbmFtZSA9IG5ldyBTaW1wbGVOYW1lKHRoaXMuYXN0KTsKIAkJCW5hbWUuaW50ZXJuYWxT
ZXRJZGVudGlmaWVyKG5ldyBTdHJpbmcodHlwZU5hbWVbMF0pKTsKQEAgLTI3MjgsMTAgKzI3Mjgs
NiBAQAogCQkJbmFtZS5pbmRleCA9IDE7CiAJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsK
IAkJCQlyZWNvcmROb2RlcyhuYW1lLCB0eXBlUmVmZXJlbmNlKTsKLQkJCX0KLQkJCW9yZy5lY2xp
cHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbltdIGFubm90YXRpb25zOwot
CQkJaWYgKHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMg
PSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7Ci0JCQkJYW5ub3RhdGVO
YW1lKG5hbWUsIGFubm90YXRpb25zKTsKIAkJCX0KIAkJCXJldHVybiBuYW1lOwogCQl9CkBAIC0z
MDc3LDI3ICszMDczLDcgQEAKIAkJCQl9CiAJCX0KIAl9Ci0JcHJpdmF0ZSB2b2lkIGFubm90YXRl
TmFtZShOYW1lIG5hbWUsIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5u
b3RhdGlvbltdIGFubm90YXRpb25zKSB7Ci0JCXN3aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewot
CQkJY2FzZSBBU1QuSkxTMl9JTlRFUk5BTCA6Ci0JCQljYXNlIEFTVC5KTFMzX0lOVEVSTkFMIDoK
LQkJCWNhc2UgQVNULkpMUzQ6Ci0JCQkJbmFtZS5zZXRGbGFncyhuYW1lLmdldEZsYWdzKCkgfCBB
U1ROb2RlLk1BTEZPUk1FRCk7Ci0JCQkJYnJlYWs7Ci0JCQlkZWZhdWx0OgotCQkJCWludCBhbm5v
dGF0aW9uc0xlbmd0aCA9IGFubm90YXRpb25zLmxlbmd0aDsKLQkJCQlmb3IgKGludCBpID0gMDsg
aSA8IGFubm90YXRpb25zTGVuZ3RoOyBpKyspIHsKLQkJCQkJb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uIHR5cGVBbm5vdGF0aW9uID0gYW5ub3RhdGlvbnNb
aV07Ci0JCQkJCWlmICh0eXBlQW5ub3RhdGlvbiAhPSBudWxsKSB7Ci0JCQkJCQlBbm5vdGF0aW9u
IGFubm90YXRpb24gPSBjb252ZXJ0KHR5cGVBbm5vdGF0aW9uKTsKLQkJCQkJCWludCBzdGFydCA9
IHR5cGVBbm5vdGF0aW9uLnNvdXJjZVN0YXJ0OwotCQkJCQkJaW50IGVuZCA9IHR5cGVBbm5vdGF0
aW9uLnNvdXJjZUVuZDsKLQkJCQkJCWFubm90YXRpb24uc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVu
ZCAtIHN0YXJ0ICsgMSk7Ci0JCQkJCQluYW1lLmFubm90YXRpb25zLmFkZChhbm5vdGF0aW9uKTsK
LQkJCQkJfQotCQkJCX0KLQkJfQotCX0KKwogCXByaXZhdGUgdm9pZCBhbm5vdGF0ZVR5cGVQYXJh
bWV0ZXIoVHlwZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyLCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0LkFubm90YXRpb25bXSBhbm5vdGF0aW9ucykgewogCQlzd2l0Y2godGhp
cy5hc3QuYXBpTGV2ZWwpIHsKIAkJCWNhc2UgQVNULkpMUzJfSU5URVJOQUwgOgpAQCAtMzI2Myw2
ICszMjM5LDcgQEAKIAkJCQlQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBwYXJh
bWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSA9IChQYXJhbWV0ZXJpemVkUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZTsKIAkJCQljaGFyW11bXSB0b2tlbnMgPSBwYXJh
bWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50b2tlbnM7CiAJCQkJVHlwZVJlZmVyZW5j
ZVtdW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LnR5cGVBcmd1bWVudHM7CisJCQkJb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFz
dC5Bbm5vdGF0aW9uW11bXSB0eXBlQW5ub3RhdGlvbnMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uczsKIAkJCQlsb25nW10gcG9zaXRpb25zID0gcGFyYW1l
dGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlUG9zaXRpb25zOwogCQkJCXNvdXJj
ZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIpOwogCQkJCXN3aXRjaCh0aGlzLmFzdC5h
cGlMZXZlbCkgewpAQCAtMzI3MSw3ICszMjQ4LDcgQEAKIAkJCQkJCWludCBuYW1lTGVuZ3RoID0g
bmFtZS5sZW5ndGg7CiAJCQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMy
KTsKIAkJCQkJCWxlbmd0aCA9IChpbnQpKHBvc2l0aW9uc1tuYW1lTGVuZ3RoIC0gMV0gJiAweEZG
RkZGRkZGKSAtIHNvdXJjZVN0YXJ0ICsgMTsKLQkJCQkJCU5hbWUgcXVhbGlmaWVkTmFtZSA9IHRo
aXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXMobmFtZSwgcG9zaXRpb25zLCB0
eXBlUmVmZXJlbmNlLCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zKTsKKwkJCQkJCU5hbWUgcXVh
bGlmaWVkTmFtZSA9IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXMobmFt
ZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlKTsKIAkJCQkJCWZpbmFsIFNpbXBsZVR5cGUgc2lt
cGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKIAkJCQkJCXNpbXBsZVR5cGUuc2V0
TmFtZShxdWFsaWZpZWROYW1lKTsKIAkJCQkJCXNpbXBsZVR5cGUuc2V0U291cmNlUmFuZ2Uoc291
cmNlU3RhcnQsIGxlbmd0aCk7CkBAIC0zMjgwLDE1ICszMjU3LDMyIEBACiAJCQkJCX0KIAkJCQkJ
YnJlYWs7CiAJCQkJCWRlZmF1bHQgOgorCQkJCQkJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgogCQkJCQkJaWYgKHR5cGVBcmd1bWVudHMgIT0g
bnVsbCkgewotCQkJCQkJCWludCBudW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAwOwogCQkJCQkJCWlu
dCBzdGFydGluZ0luZGV4ID0gMDsKIAkJCQkJCQlpbnQgZW5kaW5nSW5kZXggPSAwOworCQkJCQkJ
CWludCBudW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAwOworCiAJCQkJCQkJZm9yIChpbnQgaSA9IDAs
IG1heCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKIAkJCQkJCQkJaWYg
KHR5cGVBcmd1bWVudHNbaV0gIT0gbnVsbCkgewogCQkJCQkJCQkJbnVtYmVyT2ZFbmNsb3NpbmdU
eXBlKys7CiAJCQkJCQkJCX0gZWxzZSBpZiAobnVtYmVyT2ZFbmNsb3NpbmdUeXBlID09IDApIHsK
IAkJCQkJCQkJCWVuZGluZ0luZGV4Kys7CisJCQkJCQkJCX0KKwkJCQkJCQl9CisJCQkJCQkJaWYg
KHR5cGVBbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQkJCQkJCWludCBhbm5vdF9lbmRpbmdJbmRl
eCA9IC0xOworCQkJCQkJCQludW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAwOworCQkJCQkJCQlmb3Ig
KGludCBpID0gMCwgbWF4ID0gdHlwZUFubm90YXRpb25zLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7
CisJCQkJCQkJCQlpZiAodHlwZUFubm90YXRpb25zW2ldICE9IG51bGwpIHsKKwkJCQkJCQkJCQlu
dW1iZXJPZkVuY2xvc2luZ1R5cGUrKzsKKwkJCQkJCQkJCX0gZWxzZSBpZiAobnVtYmVyT2ZFbmNs
b3NpbmdUeXBlID09IDApIHsKKwkJCQkJCQkJCQlhbm5vdF9lbmRpbmdJbmRleCsrOworCQkJCQkJ
CQkJfQorCQkJCQkJCQl9CQkJCQkKKwkJCQkJCQkJZW5kaW5nSW5kZXggPSAoYW5ub3RfZW5kaW5n
SW5kZXggPCBlbmRpbmdJbmRleCkgPyBhbm5vdF9lbmRpbmdJbmRleCA6IGVuZGluZ0luZGV4Owor
CQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggPCAwKSB7CisJCQkJCQkJCQllbmRpbmdJbmRleCA9IDA7
CiAJCQkJCQkJCX0KIAkJCQkJCQl9CiAJCQkJCQkJTmFtZSBuYW1lID0gbnVsbDsKQEAgLTMzMTIs
MjkgKzMzMDYsMzUgQEAKIAkJCQkJCQlpbnQgc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3RhcnRp
bmdJbmRleF0+Pj4zMik7CiAJCQkJCQkJaW50IGVuZCA9IChpbnQpIHBvc2l0aW9uc1tlbmRpbmdJ
bmRleF07CiAJCQkJCQkJc2ltcGxlVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3Rh
cnQgKyAxKTsKLQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggPT0gMCAmJiB0eXBlUmVmZXJlbmNlLmFu
bm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJlZmVyZW5jZS5hbm5vdGF0
aW9uc1swXSkgIT0gbnVsbCkgeworCQkJCQkJCWlmICh0eXBlUmVmZXJlbmNlLmFubm90YXRpb25z
ICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tlbmRp
bmdJbmRleF0pICE9IG51bGwpIHsKIAkJCQkJCQkJYW5ub3RhdGVUeXBlKHNpbXBsZVR5cGUsIGFu
bm90YXRpb25zKTsKIAkJCQkJCQl9Ci0JCQkJCQkJUGFyYW1ldGVyaXplZFR5cGUgcGFyYW1ldGVy
aXplZFR5cGUgPSBuZXcgUGFyYW1ldGVyaXplZFR5cGUodGhpcy5hc3QpOwotCQkJCQkJCXBhcmFt
ZXRlcml6ZWRUeXBlLnNldFR5cGUoc2ltcGxlVHlwZSk7Ci0JCQkJCQkJaWYgKHRoaXMucmVzb2x2
ZUJpbmRpbmdzKSB7Ci0JCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZVR5cGUsIHR5cGVSZWZlcmVu
Y2UpOwotCQkJCQkJCQlyZWNvcmROb2RlcyhwYXJhbWV0ZXJpemVkVHlwZSwgdHlwZVJlZmVyZW5j
ZSk7Ci0JCQkJCQkJfQotCQkJCQkJCXN0YXJ0ID0gc2ltcGxlVHlwZS5nZXRTdGFydFBvc2l0aW9u
KCk7Ci0JCQkJCQkJZW5kID0gc3RhcnQgKyBzaW1wbGVUeXBlLmdldExlbmd0aCgpIC0gMTsKLQkJ
CQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFyZ3VtZW50c1tlbmRpbmdJbmRleF0ubGVu
Z3RoOyBpIDwgbWF4OyBpKyspIHsKLQkJCQkJCQkJZmluYWwgVHlwZSB0eXBlMiA9IGNvbnZlcnRU
eXBlKHR5cGVBcmd1bWVudHNbZW5kaW5nSW5kZXhdW2ldKTsKLQkJCQkJCQkJcGFyYW1ldGVyaXpl
ZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0eXBlMik7Ci0JCQkJCQkJCWVuZCA9IHR5cGUyLmdl
dFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdldExlbmd0aCgpIC0gMTsKLQkJCQkJCQl9CiAJCQkJ
CQkJaW50IGluZGV4T2ZFbmNsb3NpbmdUeXBlID0gMTsKLQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlw
ZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOwotCQkJCQkJCWVuZCA9IHJldHJpZXZlQ2xv
c2luZ0FuZ2xlQnJhY2tldFBvc2l0aW9uKGVuZCArIDEpOwotCQkJCQkJCWxlbmd0aCA9IGVuZCAr
IDE7Ci0JCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAt
IHN0YXJ0ICsgMSk7CisJCQkJCQkJVHlwZSBjdXJyZW50VHlwZSA9IHNpbXBsZVR5cGU7CisJCQkJ
CQkJUXVhbGlmaWVkVHlwZSBxdWFsaWZpZWRUeXBlOworCQkJCQkJCWlmICh0eXBlQXJndW1lbnRz
W2VuZGluZ0luZGV4XSAhPSBudWxsKSB7CisJCQkJCQkJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFt
ZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0KTsKKwkJCQkJCQkJ
cGFyYW1ldGVyaXplZFR5cGUuc2V0VHlwZShzaW1wbGVUeXBlKTsKKwkJCQkJCQkJaWYgKHRoaXMu
cmVzb2x2ZUJpbmRpbmdzKSB7CisJCQkJCQkJCQlyZWNvcmROb2RlcyhzaW1wbGVUeXBlLCB0eXBl
UmVmZXJlbmNlKTsKKwkJCQkJCQkJCXJlY29yZE5vZGVzKHBhcmFtZXRlcml6ZWRUeXBlLCB0eXBl
UmVmZXJlbmNlKTsKKwkJCQkJCQkJfQorCQkJCQkJCQlzdGFydCA9IHNpbXBsZVR5cGUuZ2V0U3Rh
cnRQb3NpdGlvbigpOworCQkJCQkJCQllbmQgPSBzdGFydCArIHNpbXBsZVR5cGUuZ2V0TGVuZ3Ro
KCkgLSAxOworCQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFyZ3VtZW50c1tlbmRp
bmdJbmRleF0ubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKKwkJCQkJCQkJCWZpbmFsIFR5cGUgdHlw
ZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XVtpXSk7CisJCQkJCQkJ
CQlwYXJhbWV0ZXJpemVkVHlwZS50eXBlQXJndW1lbnRzKCkuYWRkKHR5cGUyKTsKKwkJCQkJCQkJ
CWVuZCA9IHR5cGUyLmdldFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdldExlbmd0aCgpIC0gMTsK
KwkJCQkJCQkJfQkJCQkJCQkJCisJCQkJCQkJCWluZGV4T2ZFbmNsb3NpbmdUeXBlID0gMTsKKwkJ
CQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuaW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlwZTsKKwkJ
CQkJCQkJZW5kID0gcmV0cmlldmVDbG9zaW5nQW5nbGVCcmFja2V0UG9zaXRpb24oZW5kICsgMSk7
CisJCQkJCQkJCWxlbmd0aCA9IGVuZCArIDE7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNl
dFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJCQljdXJyZW50VHlw
ZSA9IHBhcmFtZXRlcml6ZWRUeXBlOworCQkJCQkJCX0KIAkJCQkJCQlzdGFydGluZ0luZGV4ID0g
ZW5kaW5nSW5kZXggKyAxOwotCQkJCQkJCVR5cGUgY3VycmVudFR5cGUgPSBwYXJhbWV0ZXJpemVk
VHlwZTsKKwogCQkJCQkJCXdoaWxlKHN0YXJ0aW5nSW5kZXggPCB0eXBlQXJndW1lbnRzLmxlbmd0
aCkgewogCQkJCQkJCQlTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcgU2ltcGxlTmFtZSh0aGlz
LmFzdCk7CiAJCQkJCQkJCXNpbXBsZU5hbWUuaW50ZXJuYWxTZXRJZGVudGlmaWVyKG5ldyBTdHJp
bmcodG9rZW5zW3N0YXJ0aW5nSW5kZXhdKSk7CkBAIC0zMzQzLDcgKzMzNDMsNyBAQAogCQkJCQkJ
CQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CiAJCQkJCQkJCXNpbXBsZU5h
bWUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CiAJCQkJCQkJCXJlY29y
ZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUpOwotCQkJCQkJCQlRdWFsaWZp
ZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7CisJCQkJ
CQkJCXF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7CiAJCQkJCQkJ
CXF1YWxpZmllZFR5cGUuc2V0UXVhbGlmaWVyKGN1cnJlbnRUeXBlKTsKIAkJCQkJCQkJcXVhbGlm
aWVkVHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOwogCQkJCQkJCQlpZiAodHlwZVJlZmVyZW5jZS5h
bm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnNbc3RhcnRpbmdJbmRleF0pICE9IG51bGwpIHsKQEAgLTMzODgsMTYgKzMzODgsOTkgQEAK
IAkJCQkJCX0KIAkJCQl9CiAJCQl9IGVsc2UgaWYgKHR5cGVSZWZlcmVuY2UgaW5zdGFuY2VvZiBv
cmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UpIHsKLQkJCQljaGFyW11bXSBuYW1lID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29t
cGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLmdldFR5cGVO
YW1lKCk7Ci0JCQkJaW50IG5hbWVMZW5ndGggPSBuYW1lLmxlbmd0aDsKLQkJCQlsb25nW10gcG9z
aXRpb25zID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmll
ZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnNvdXJjZVBvc2l0aW9uczsKLQkJCQlzb3Vy
Y2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMyKTsKLQkJCQlsZW5ndGggPSAoaW50KShw
b3NpdGlvbnNbbmFtZUxlbmd0aCAtIDFdICYgMHhGRkZGRkZGRikgLSBzb3VyY2VTdGFydCArIDE7
Ci0JCQkJZmluYWwgTmFtZSBxdWFsaWZpZWROYW1lID0gdGhpcy5zZXRRdWFsaWZpZWROYW1lTmFt
ZUFuZFNvdXJjZVJhbmdlcyhuYW1lLCBwb3NpdGlvbnMsIHR5cGVSZWZlcmVuY2UsIHR5cGVSZWZl
cmVuY2UuYW5ub3RhdGlvbnMpOwotCQkJCWZpbmFsIFNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IG5l
dyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKLQkJCQlzaW1wbGVUeXBlLnNldE5hbWUocXVhbGlmaWVk
TmFtZSk7Ci0JCQkJdHlwZSA9IHNpbXBsZVR5cGU7Ci0JCQkJdHlwZS5zZXRTb3VyY2VSYW5nZShz
b3VyY2VTdGFydCwgbGVuZ3RoKTsKKwkJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVn
cy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJCQkJaW50IGluZGV4ID0gMDsKKwkJCQlRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlIHF1YWxpZmllZFR5cGVSZWZlcmVuY2UgPSAoUXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZSl0eXBlUmVmZXJlbmNlOworCQkJCWNoYXJbXVtdIHRva2VucyA9IHF1YWxpZmllZFR5
cGVSZWZlcmVuY2UudG9rZW5zOworCQkJCWludCBudW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAwOwor
CQkJCWludCBzdGFydGluZ0luZGV4ID0gMDsKKwkJCQlpbnQgZW5kaW5nSW5kZXggPSAwOworCQkJ
CWJvb2xlYW4gaGFzQW5ub3RhdGlvbnMgPSAoKHRoaXMuYXN0LmFwaUxldmVsKCkgPj0gQVNULkpM
UzgpICYmICh0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpKTsKKworCQkJCWlmICho
YXNBbm5vdGF0aW9ucykgeworCQkJCQkKKwkJCQkJZm9yICg7IChpbmRleCA8IHR5cGVSZWZlcmVu
Y2UuYW5ub3RhdGlvbnMubGVuZ3RoKTsgKytpbmRleCkgeyAKKwkJCQkJCWlmICh0eXBlUmVmZXJl
bmNlLmFubm90YXRpb25zW2luZGV4XSAhPSBudWxsKSAgeworCQkJCQkJICAJbnVtYmVyT2ZFbmNs
b3NpbmdUeXBlKys7CisJCQkJCQl9IGVsc2UgaWYgKG51bWJlck9mRW5jbG9zaW5nVHlwZSA9PSAw
KSB7CisJCQkJCQkJZW5kaW5nSW5kZXgrKzsKKwkJCQkJCX0KKwkJCQkJfQorCQkJCX0KKwkJCQkK
KwkJCQlpZiAoaGFzQW5ub3RhdGlvbnMgJiYgKGVuZGluZ0luZGV4IDwgdHlwZVJlZmVyZW5jZS5h
bm5vdGF0aW9ucy5sZW5ndGgpKSB7CisJCQkJCQorCQkJCQlsb25nW10gcG9zaXRpb25zID0gKChv
cmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UpIHR5cGVSZWZlcmVuY2UpLnNvdXJjZVBvc2l0aW9uczsKKwkJCQkJc291cmNlU3RhcnQgPSAo
aW50KShwb3NpdGlvbnNbMF0+Pj4zMik7CisJCQkJCQorCQkJCQlOYW1lIG5hbWUgPSBudWxsOwor
CQkJCQlpZiAoZW5kaW5nSW5kZXggLSBzdGFydGluZ0luZGV4IDw9IDEpIHsKKwkJCQkJCWZpbmFs
IFNpbXBsZU5hbWUgc2ltcGxlTmFtZSA9IG5ldyBTaW1wbGVOYW1lKHRoaXMuYXN0KTsKKwkJCQkJ
CXNpbXBsZU5hbWUuaW50ZXJuYWxTZXRJZGVudGlmaWVyKG5ldyBTdHJpbmcodG9rZW5zWzBdKSk7
CisJCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsKKwkJ
CQkJCWludCBzdGFydCA9IChpbnQpKHBvc2l0aW9uc1tzdGFydGluZ0luZGV4XT4+PjMyKTsKKwkJ
CQkJCWludCBlbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CisJCQkJCQlzaW1w
bGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJc2lt
cGxlTmFtZS5pbmRleCA9IDE7CisJCQkJCQluYW1lID0gc2ltcGxlTmFtZTsKKwkJCQkJCWlmICh0
aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5
cGVSZWZlcmVuY2UpOworCQkJCQkJfQorCQkJCQl9IGVsc2UgeworCQkJCQkJbmFtZSA9IHRoaXMu
c2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXModG9rZW5zLCBwb3NpdGlvbnMsIGVu
ZGluZ0luZGV4IC0gMSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCX0KKwkJCQkJCisJCQkJCVNpbXBs
ZVR5cGUgc2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKKwkJCQkJc2ltcGxl
VHlwZS5zZXROYW1lKG5hbWUpOworCQkJCQlpbnQgc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3Rh
cnRpbmdJbmRleF0+Pj4zMik7CisJCQkJCWludCBlbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRp
bmdJbmRleF07CisJCQkJCXNpbXBsZVR5cGUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0
YXJ0ICsgMSk7CisJCQkJCWlmIChlbmRpbmdJbmRleCA9PSAwICYmIHR5cGVSZWZlcmVuY2UuYW5u
b3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRp
b25zWzBdKSAhPSBudWxsKSB7CisJCQkJCQlhbm5vdGF0ZVR5cGUoc2ltcGxlVHlwZSwgYW5ub3Rh
dGlvbnMpOworCQkJCQl9CisJCQkJCXNpbXBsZVR5cGUuc2V0RmxhZ3Moc2ltcGxlVHlwZS5nZXRG
bGFncygpIHwgQVNUTm9kZS5NQUxGT1JNRUQpOy8vVE9ETzogSXMgdGhpcyBzdG10IHJlcWQ/CisJ
CQkJCVR5cGUgY3VycmVudFR5cGUgPSBzaW1wbGVUeXBlOwkJCQkgICAgCisJCQkJCQorCQkJCQkv
LyBzcGVjaWFsIGNhc2UgaWYgdGhlIGFubm90cyBhcmUgc3RhcnRpbmcgZnJvbSAxIGFzIDAgd291
bGQgYmUgdGhlIFNULgorCQkJCQlzdGFydGluZ0luZGV4ID0gZW5kaW5nSW5kZXggPT0gMCA/IGVu
ZGluZ0luZGV4ICsgMSA6IGVuZGluZ0luZGV4IDsKKwkJCQkJd2hpbGUoc3RhcnRpbmdJbmRleCA8
IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoKSB7CisJCQkJCQlTaW1wbGVOYW1lIHNp
bXBsZU5hbWUgPSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CisJCQkJCQlzaW1wbGVOYW1lLmlu
dGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4XSkpOwor
CQkJCQkJc2ltcGxlTmFtZS5pbmRleCA9IHN0YXJ0aW5nSW5kZXggKyAxOworCQkJCQkJc3RhcnQg
PSAoaW50KShwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF0+Pj4zMik7CisJCQkJCQllbmQgPSAoaW50
KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CisJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJh
bmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJcmVjb3JkUGVuZGluZ05hbWVTY29w
ZVJlc29sdXRpb24oc2ltcGxlTmFtZSk7CisJCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5
cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCQlxdWFsaWZpZWRUeXBlLnNl
dFF1YWxpZmllcihjdXJyZW50VHlwZSk7CisJCQkJCQlxdWFsaWZpZWRUeXBlLnNldE5hbWUoc2lt
cGxlTmFtZSk7CisJCQkJCQlpZiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYm
IChhbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbc3RhcnRpbmdJbmRleF0p
ICE9IG51bGwpIHsKKwkJCQkJCQlhbm5vdGF0ZVR5cGUocXVhbGlmaWVkVHlwZSwgYW5ub3RhdGlv
bnMpOworCQkJCQkJfQorCQkJCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7CisJCQkJCQkJ
cmVjb3JkTm9kZXMoc2ltcGxlTmFtZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJcmVjb3JkTm9k
ZXMocXVhbGlmaWVkVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQl9CisJCQkJCQlzdGFydCA9
IGN1cnJlbnRUeXBlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJCQkJCWVuZCA9IHNpbXBsZU5hbWUu
Z2V0U3RhcnRQb3NpdGlvbigpICsgc2ltcGxlTmFtZS5nZXRMZW5ndGgoKSAtIDE7CisJCQkJCQlx
dWFsaWZpZWRUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJ
CQkJY3VycmVudFR5cGUgPSBxdWFsaWZpZWRUeXBlOworCQkJCQkJcXVhbGlmaWVkVHlwZS5pbmRl
eCA9IDE7Ly8gVE9ETyBOb3QgdXNlZCwganVzdCBpbml0aWFsaXppbmcgdG8gZGVmYXVsdCBvZiAx
LgorCQkJCQkJc3RhcnRpbmdJbmRleCsrOworCQkJCQl9CisJCQkJCXR5cGUgPSBjdXJyZW50VHlw
ZTsKKwkJCQl9IGVsc2UgeworCQkJCQljaGFyW11bXSBuYW1lID0gKChvcmcuZWNsaXBzZS5qZHQu
aW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVu
Y2UpLmdldFR5cGVOYW1lKCk7CisJCQkJCWludCBuYW1lTGVuZ3RoID0gbmFtZS5sZW5ndGg7CisJ
CQkJCWxvbmdbXSBwb3NpdGlvbnMgPSAoKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZSkuc291cmNlUG9zaXRp
b25zOworCQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMyKTsKKwkJCQkJ
bGVuZ3RoID0gKGludCkocG9zaXRpb25zW25hbWVMZW5ndGggLSAxXSAmIDB4RkZGRkZGRkYpIC0g
c291cmNlU3RhcnQgKyAxOworCQkJCQlmaW5hbCBOYW1lIHF1YWxpZmllZE5hbWUgPSB0aGlzLnNl
dFF1YWxpZmllZE5hbWVOYW1lQW5kU291cmNlUmFuZ2VzKG5hbWUsIHBvc2l0aW9ucywgdHlwZVJl
ZmVyZW5jZSk7CisJCQkJCWZpbmFsIFNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVU
eXBlKHRoaXMuYXN0KTsKKwkJCQkJc2ltcGxlVHlwZS5zZXROYW1lKHF1YWxpZmllZE5hbWUpOwor
CQkJCQl0eXBlID0gc2ltcGxlVHlwZTsKKwkJCQkJdHlwZS5zZXRTb3VyY2VSYW5nZShzb3VyY2VT
dGFydCwgbGVuZ3RoKTsKKwkJCQl9CiAJCQl9IGVsc2UgewogCQkJCVR5cGVSZWZlcmVuY2VbXSB0
eXBlUmVmZXJlbmNlcyA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5V
bmlvblR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnR5cGVSZWZlcmVuY2VzOwogCQkJCXN3
aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewpAQCAtNDk0OCwxMiArNTAzMSw3IEBACiAJfQogCiAJ
cHJvdGVjdGVkIFF1YWxpZmllZE5hbWUgc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5n
ZXMoY2hhcltdW10gdHlwZU5hbWUsIGxvbmdbXSBwb3NpdGlvbnMsIG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5hc3QuQVNUTm9kZSBub2RlKSB7Ci0JCXJldHVybiBzZXRRdWFsaWZp
ZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0eXBlTmFtZSwgcG9zaXRpb25zLCBub2RlLCBudWxs
KTsKLQl9Ci0KLQlwcm90ZWN0ZWQgUXVhbGlmaWVkTmFtZSBzZXRRdWFsaWZpZWROYW1lTmFtZUFu
ZFNvdXJjZVJhbmdlcyhjaGFyW11bXSB0eXBlTmFtZSwgbG9uZ1tdIHBvc2l0aW9ucywgb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5BU1ROb2RlIG5vZGUsIG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbltdW10gYW5ub3RhdGlvbnMpIHsK
LQkgICAgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uW10g
dHlwZUFubm90YXRpb25zOwotCQlpbnQgbGVuZ3RoID0gdHlwZU5hbWUubGVuZ3RoOworCSAgICBp
bnQgbGVuZ3RoID0gdHlwZU5hbWUubGVuZ3RoOwogCQlmaW5hbCBTaW1wbGVOYW1lIGZpcnN0VG9r
ZW4gPSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CiAJCWZpcnN0VG9rZW4uaW50ZXJuYWxTZXRJ
ZGVudGlmaWVyKG5ldyBTdHJpbmcodHlwZU5hbWVbMF0pKTsKIAkJZmlyc3RUb2tlbi5pbmRleCA9
IDE7CkBAIC00OTYxLDkgKzUwMzksNiBAQAogCQlpbnQgc3RhcnQgPSBzdGFydDA7CiAJCWludCBl
bmQgPSAoaW50KShwb3NpdGlvbnNbMF0gJiAweEZGRkZGRkZGKTsKIAkJZmlyc3RUb2tlbi5zZXRT
b3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJaWYgKGFubm90YXRpb25zICE9
IG51bGwgJiYgKHR5cGVBbm5vdGF0aW9ucyA9IGFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7Ci0J
CQlhbm5vdGF0ZU5hbWUoZmlyc3RUb2tlbiwgdHlwZUFubm90YXRpb25zKTsKLQkJfQogCQlmaW5h
bCBTaW1wbGVOYW1lIHNlY29uZFRva2VuID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOwogCQlz
ZWNvbmRUb2tlbi5pbnRlcm5hbFNldElkZW50aWZpZXIobmV3IFN0cmluZyh0eXBlTmFtZVsxXSkp
OwogCQlzZWNvbmRUb2tlbi5pbmRleCA9IDI7CkBAIC00OTczLDkgKzUwNDgsNiBAQAogCQlRdWFs
aWZpZWROYW1lIHF1YWxpZmllZE5hbWUgPSBuZXcgUXVhbGlmaWVkTmFtZSh0aGlzLmFzdCk7CiAJ
CXF1YWxpZmllZE5hbWUuc2V0UXVhbGlmaWVyKGZpcnN0VG9rZW4pOwogCQlxdWFsaWZpZWROYW1l
LnNldE5hbWUoc2Vjb25kVG9rZW4pOwotCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAodHlw
ZUFubm90YXRpb25zID0gYW5ub3RhdGlvbnNbMV0pICE9IG51bGwpIHsKLQkJCWFubm90YXRlTmFt
ZShxdWFsaWZpZWROYW1lLCB0eXBlQW5ub3RhdGlvbnMpOwotCQl9CiAJCWlmICh0aGlzLnJlc29s
dmVCaW5kaW5ncykgewogCQkJcmVjb3JkTm9kZXMocXVhbGlmaWVkTmFtZSwgbm9kZSk7CiAJCQly
ZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihxdWFsaWZpZWROYW1lKTsKQEAgLTUwMDAs
OSArNTA3Miw2IEBACiAJCQlxdWFsaWZpZWROYW1lID0gcXVhbGlmaWVkTmFtZTI7CiAJCQlxdWFs
aWZpZWROYW1lLmluZGV4ID0gbmV3UGFydC5pbmRleDsKIAkJCXF1YWxpZmllZE5hbWUuc2V0U291
cmNlUmFuZ2Uoc3RhcnQwLCBlbmQgLSBzdGFydDAgKyAxKTsKLQkJCWlmIChhbm5vdGF0aW9ucyAh
PSBudWxsICYmICh0eXBlQW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9uc1tpXSkgIT0gbnVsbCkgewot
CQkJCWFubm90YXRlTmFtZShxdWFsaWZpZWROYW1lLCB0eXBlQW5ub3RhdGlvbnMpOwotCQkJfQkK
IAkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewogCQkJCXJlY29yZE5vZGVzKHF1YWxpZmll
ZE5hbWUsIG5vZGUpOwogCQkJCXJlY29yZE5vZGVzKG5ld1BhcnQsIG5vZGUpOwpAQCAtNTAxOSw3
ICs1MDg4LDYgQEAKIAl9CiAKIAlwcm90ZWN0ZWQgUXVhbGlmaWVkTmFtZSBzZXRRdWFsaWZpZWRO
YW1lTmFtZUFuZFNvdXJjZVJhbmdlcyhjaGFyW11bXSB0eXBlTmFtZSwgbG9uZ1tdIHBvc2l0aW9u
cywgaW50IGVuZGluZ0luZGV4LCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0
LlR5cGVSZWZlcmVuY2Ugbm9kZSkgewotIAkJb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmFzdC5Bbm5vdGF0aW9uW10gYW5ub3RhdGlvbnM7CiAgCQlpbnQgbGVuZ3RoID0gZW5kaW5n
SW5kZXggKyAxOwogCQlmaW5hbCBTaW1wbGVOYW1lIGZpcnN0VG9rZW4gPSBuZXcgU2ltcGxlTmFt
ZSh0aGlzLmFzdCk7CiAJCWZpcnN0VG9rZW4uaW50ZXJuYWxTZXRJZGVudGlmaWVyKG5ldyBTdHJp
bmcodHlwZU5hbWVbMF0pKTsKQEAgLTUwMjgsOSArNTA5Niw2IEBACiAJCWludCBzdGFydCA9IHN0
YXJ0MDsKIAkJaW50IGVuZCA9IChpbnQpIHBvc2l0aW9uc1swXTsKIAkJZmlyc3RUb2tlbi5zZXRT
b3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJaWYgKG5vZGUuYW5ub3RhdGlv
bnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSBub2RlLmFubm90YXRpb25zWzBdKSAhPSBudWxs
KSB7Ci0JCQlhbm5vdGF0ZU5hbWUoZmlyc3RUb2tlbiwgYW5ub3RhdGlvbnMpOwotCQl9CiAJCWZp
bmFsIFNpbXBsZU5hbWUgc2Vjb25kVG9rZW4gPSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CiAJ
CXNlY29uZFRva2VuLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHR5cGVOYW1lWzFd
KSk7CiAJCXNlY29uZFRva2VuLmluZGV4ID0gMjsKQEAgLTUwNDAsOSArNTEwNSw2IEBACiAJCVF1
YWxpZmllZE5hbWUgcXVhbGlmaWVkTmFtZSA9IG5ldyBRdWFsaWZpZWROYW1lKHRoaXMuYXN0KTsK
IAkJcXVhbGlmaWVkTmFtZS5zZXRRdWFsaWZpZXIoZmlyc3RUb2tlbik7CiAJCXF1YWxpZmllZE5h
bWUuc2V0TmFtZShzZWNvbmRUb2tlbik7Ci0JCWlmIChub2RlLmFubm90YXRpb25zICE9IG51bGwg
JiYgKGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9uc1sxXSkgIT0gbnVsbCkgewotCQkJYW5u
b3RhdGVOYW1lKHF1YWxpZmllZE5hbWUsIGFubm90YXRpb25zKTsKLQkJfQogCQlpZiAodGhpcy5y
ZXNvbHZlQmluZGluZ3MpIHsKIAkJCXJlY29yZE5vZGVzKHF1YWxpZmllZE5hbWUsIG5vZGUpOwog
CQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24ocXVhbGlmaWVkTmFtZSk7CkBAIC01
MDY3LDkgKzUxMjksNiBAQAogCQkJcXVhbGlmaWVkTmFtZSA9IHF1YWxpZmllZE5hbWUyOwogCQkJ
cXVhbGlmaWVkTmFtZS5pbmRleCA9IG5ld1BhcnQuaW5kZXg7CiAJCQlxdWFsaWZpZWROYW1lLnNl
dFNvdXJjZVJhbmdlKHN0YXJ0MCwgZW5kIC0gc3RhcnQwICsgMSk7Ci0JCQlpZiAobm9kZS5hbm5v
dGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IG5vZGUuYW5ub3RhdGlvbnNbaV0pICE9
IG51bGwpIHsKLQkJCQlhbm5vdGF0ZU5hbWUocXVhbGlmaWVkTmFtZSwgYW5ub3RhdGlvbnMpOwot
CQkJfQogCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7CiAJCQkJcmVjb3JkTm9kZXMocXVh
bGlmaWVkTmFtZSwgbm9kZSk7CiAJCQkJcmVjb3JkTm9kZXMobmV3UGFydCwgbm9kZSk7CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVE1hdGNoZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCmluZGV4IDM0MTQ5YzIuLmYxYjZhOTAgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20v
QVNUTWF0Y2hlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCkBAIC0xNjk3LDggKzE2OTcsNyBAQAogCQkJ
CQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpOwogCQkJ
ZGVmYXVsdDoKIAkJCQlyZXR1cm4gc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldFF1YWxpZmllcigp
LCBvLmdldFF1YWxpZmllcigpKQotCQkJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5h
bWUoKSwgby5nZXROYW1lKCkpICYmCi0JCQkJCQlzYWZlU3VidHJlZUxpc3RNYXRjaChub2RlLmFu
bm90YXRpb25zKCksIG8uYW5ub3RhdGlvbnMoKSk7CisJCQkJCQkmJiBzYWZlU3VidHJlZU1hdGNo
KG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCX0JCiAJfQogCkBAIC0xNzc5LDE1ICsx
Nzc4LDcgQEAKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCQlTaW1wbGVOYW1lIG8gPSAoU2ltcGxl
TmFtZSkgb3RoZXI7Ci0JCXN3aXRjaChub2RlLmdldEFTVCgpLmFwaUxldmVsKSB7Ci0JCQljYXNl
IEFTVC5KTFMyX0lOVEVSTkFMIDoKLQkJCWNhc2UgQVNULkpMUzNfSU5URVJOQUwgOgotCQkJY2Fz
ZSBBU1QuSkxTNDoKLQkJCQlyZXR1cm4gbm9kZS5nZXRJZGVudGlmaWVyKCkuZXF1YWxzKG8uZ2V0
SWRlbnRpZmllcigpKTsKLQkJCWRlZmF1bHQ6Ci0JCQkJcmV0dXJuIChub2RlLmdldElkZW50aWZp
ZXIoKS5lcXVhbHMoby5nZXRJZGVudGlmaWVyKCkpKSAmJgotCQkJCQkJc2FmZVN1YnRyZWVMaXN0
TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygpLCBvLmFubm90YXRpb25zKCkpOwotCQl9CQorCQlyZXR1
cm4gbm9kZS5nZXRJZGVudGlmaWVyKCkuZXF1YWxzKG8uZ2V0SWRlbnRpZmllcigpKTsKIAl9CiAK
IAkvKioKQEAgLTE4MTUsOCArMTgwNiw3IEBACiAJCQljYXNlIEFTVC5KTFM0OgogCQkJCXJldHVy
biBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCQlkZWZh
dWx0OgotCQkJCXJldHVybiAoc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXRO
YW1lKCkpKSAmJgotCQkJCQkJc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygp
LCBvLmFubm90YXRpb25zKCkpOworCQkJCXJldHVybiAoc2FmZVN1YnRyZWVNYXRjaChub2RlLmdl
dE5hbWUoKSwgby5nZXROYW1lKCkpKTsKIAkJfQogCX0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9OYW1lLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQpp
bmRleCBlN2QwNzI2Li4zZTc3ODE3IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9k
b20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL05hbWUuamF2YQpAQCAtMSw1ICsx
LDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIw
MTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIw
MTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBU
aGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBh
dmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYx
LjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxh
YmxlIGF0CkBAIC04LDUzICs4LDI1IEBACiAgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9m
IGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCiAg
KiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3Rp
bmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKICAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21w
YXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KLSAqIAorICoKICAqIENv
bnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1w
bGVtZW50YXRpb24KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogCiBwYWNrYWdlIG9yZy5lY2xp
cHNlLmpkdC5jb3JlLmRvbTsKIAotaW1wb3J0IGphdmEudXRpbC5MaXN0OwotCiAvKioKICAqIEFi
c3RyYWN0IGJhc2UgY2xhc3MgZm9yIGFsbCBBU1Qgbm9kZXMgdGhhdCByZXByZXNlbnQgbmFtZXMu
CiAgKiBUaGVyZSBhcmUgZXhhY3RseSB0d28ga2luZHMgb2YgbmFtZTogc2ltcGxlIG9uZXMKICAq
ICg8Y29kZT5TaW1wbGVOYW1lPC9jb2RlPikgYW5kIHF1YWxpZmllZCBvbmVzICg8Y29kZT5RdWFs
aWZpZWROYW1lPC9jb2RlPikuCiAgKiA8cD4KLSAqIEZvciBKTFMyLCBKTFMzIG9yIEpMUzQ6CiAg
KiA8cHJlPgogICogTmFtZToKICAqICAgICBTaW1wbGVOYW1lCiAgKiAgICAgUXVhbGlmaWVkTmFt
ZQogICogPC9wcmU+Ci0gKiA8cD4KLSAqIEZvciBKTFM4LCB0aGUgTmFtZSBtYXkgYmUgcHJlY2Vk
ZWQgYnkgb3B0aW9uYWwgdHlwZSBhbm5vdGF0aW9ucy4KLSAqIFdoaWxlIHRoZSBhZGRpdGlvbmFs
IGxvY2F0aW9ucyB3aGVyZSBKYXZhIFNFOCBhbGxvd3MgYW5ub3RhdGlvbnMKLSAqIHRvIGJlIHdy
aXR0ZW4gYXJlIG9ubHkgaW4gdHlwZSByZWZlcmVuY2VzIGFuZCB0eXBlIHBhcmFtZXRlcnMsIHRo
ZXJlCi0gKiBhcmUgdmFyaW91cyBzaXR1YXRpb25zIGluIHdoaWNoIGEgcGFyc2VyIGlzIHVuYWJs
ZSB0byBkZWNpZGUgd2hldGhlcgotICogYSBuYW1lIGl0IHNlZXMgY29uc3RpdHV0ZXMgYSB0eXBl
IG5hbWUgb3Igbm90IGFuZCBlbmRzIHVwIGNyZWF0aW5nCi0gKiBOYW1lIG5vZGVzLgogICogPC9w
PgotICogPHA+Ci0gKiBGb3IgZXhhbXBsZSwgZ2l2ZW4gdGhlIHF1YWxpZmllZCB0eXBlIHJlZmVy
ZW5jZSBqYXZhLnV0aWwuTGlzdCwKLSAqIHRoZSBBU1RQYXJzZXIgY2Fubm90IGRlY2lkZSB3aGVu
IGJpbmRpbmdzIHJlc29sdXRpb24gaXMgTk9UIHJlcXVlc3RlZAotICogdmlhIHtAbGluayBBU1RQ
YXJzZXIjc2V0UmVzb2x2ZUJpbmRpbmdzfSwgd2hldGhlciBqYXZhIGNvbnN0aXR1dGVzIGEKLSAq
IHR5cGUgbmFtZSBvciBhIG5vbi10eXBlIG5hbWUgKGkuZS4sIGEgcGFja2FnZSBuYW1lKQotICog
PC9wPgotICogPHA+Ci0gKiBOb3RlIGFsc28gdGhhdCB0aGUgcGFyc2VyIGNhbm5vdCBkaXNhbWJp
Z3VhdGUgb24gdGhlIGJhc2lzIG9mIHRoZQotICogcHJlc2VuY2Ugb2YgdHlwZSBhbm5vdGF0aW9u
cyBhdCBhIGNlcnRhaW4gcGxhY2UuIAotICogSW4gQE5vbk51bGwgamF2YS51dGlsLkxpc3QsIGph
dmEgaXMgc3RpbGwgYSBwYWNrYWdlIG5hbWUgZXZlbiB0aG91Z2gKLSAqIGl0IGlzIHByZWNlZGVk
IGJ5IGFubm90YXRpb25zLgotICogPC9wPgotICogRm9yIEpMUzg6Ci0gKiA8cHJlPgotICogTmFt
ZToKLSAqICAgICB7QW5ub3RhdGlvbn0gU2ltcGxlTmFtZQotICogICAgIHtBbm5vdGF0aW9ufSBR
dWFsaWZpZWROYW1lCi0gKiA8L3ByZT4KLSAqIDwvcD4KKyAqCiAgKiBAc2luY2UgMi4wCiAgKiBA
bm9leHRlbmQgVGhpcyBjbGFzcyBpcyBub3QgaW50ZW5kZWQgdG8gYmUgc3ViY2xhc3NlZCBieSBj
bGllbnRzLgogICovCkBAIC02NCwxOCArMzYsMTIgQEAKIAkgKiBBcHByb3hpbWF0ZSBiYXNlIHNp
emUgb2YgYW4gZXhwcmVzc2lvbiBub2RlIGluc3RhbmNlIGluIGJ5dGVzLAogCSAqIGluY2x1ZGlu
ZyBvYmplY3QgaGVhZGVyIGFuZCBpbnN0YW5jZSBmaWVsZHMuCiAJICovCi0Jc3RhdGljIGZpbmFs
IGludCBCQVNFX05BTUVfTk9ERV9TSVpFID0gQkFTRV9OT0RFX1NJWkUgKyAyICogNDsKKwlzdGF0
aWMgZmluYWwgaW50IEJBU0VfTkFNRV9OT0RFX1NJWkUgPSBCQVNFX05PREVfU0laRSArIDEgKiA0
OwogCiAJLyoqCiAJICogVGhpcyBpbmRleCByZXByZXNlbnRzIHRoZSBwb3NpdGlvbiBpbnNpZGUg
YSBxdWFsaWZpZWQgbmFtZS4KIAkgKi8KIAlpbnQgaW5kZXg7Ci0JCi0JLyoqCi0JICogVGhlIHR5
cGUgYW5ub3RhdGlvbnMgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFubm90YXRpb259KS4KLQkgKiBA
c2luY2UgMy45Ci0JICovCi0JcHJvdGVjdGVkIEFTVE5vZGUuTm9kZUxpc3QgYW5ub3RhdGlvbnMg
PSBudWxsOwogCiAJLyoqCiAJICogQ3JlYXRlcyBhIG5ldyBBU1Qgbm9kZSBmb3IgYSBuYW1lIG93
bmVkIGJ5IHRoZSBnaXZlbiBBU1QuCkBAIC0xNTQsMTkgKzEyMCw0IEBACiAJICogQHNpbmNlIDMu
MAogCSAqLwogCWFic3RyYWN0IHZvaWQgYXBwZW5kTmFtZShTdHJpbmdCdWZmZXIgYnVmZmVyKTsK
LQkKLQkvKioKLQkgKiBSZXR1cm5zIHRoZSBsaXZlIG9yZGVyZWQgbGlzdCBvZiBhbm5vdGF0aW9u
cyBmb3IgdGhpcyBOYW1lIG5vZGUuCi0JICoKLQkgKiBAcmV0dXJuIHRoZSBsaXZlIGxpc3Qgb2Yg
YW5ub3RhdGlvbnMgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFubm90YXRpb259KQotCSAqIEBleGNl
cHRpb24gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24gaWYgdGhpcyBvcGVyYXRpb24gaXMg
dXNlZAotCSAqICAgICAgICAgICAgaW4gYSBKTFMyLCBKTFMzIG9yIEpMUzQgQVNUCi0JICogQHNp
bmNlIDMuOQotCSAqLwotCXB1YmxpYyBMaXN0IGFubm90YXRpb25zKCkgewotCQlpZiAodGhpcy5h
bm5vdGF0aW9ucyA9PSBudWxsKSB7Ci0JCQl1bnN1cHBvcnRlZEluMl8zXzQoKTsgCi0JCX0KLQkJ
cmV0dXJuIHRoaXMuYW5ub3RhdGlvbnM7Ci0JfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9RdWFsaWZpZWROYW1lLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1F1YWxp
ZmllZE5hbWUuamF2YQppbmRleCAxZjBlMjcyLi4wNTIxMGM1IDEwMDY0NAotLS0gYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1F1YWxpZmllZE5hbWUu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUv
ZG9tL1F1YWxpZmllZE5hbWUuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBv
dGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBv
dGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2Nv
bXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVz
IHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC04LDcgKzgsNyBAQAog
ICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0
aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQogICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkg
YW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2Vz
CiAgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0
aW9uIG9mIHRoZSBKQ1AuCi0gKiAKKyAqCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENv
cnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKi8KQEAgLTIzLDE4ICsyMywxMCBAQAogICogQVNUIG5vZGUgZm9yIGEgcXVhbGlm
aWVkIG5hbWUuIEEgcXVhbGlmaWVkIG5hbWUgaXMgZGVmaW5lZCByZWN1cnNpdmVseQogICogYXMg
YSBzaW1wbGUgbmFtZSBwcmVjZWRlZCBieSBhIG5hbWUsIHdoaWNoIHF1YWxpZmllcyBpdC4gRXhw
cmVzc2luZyBpdCB0aGlzCiAgKiB3YXkgbWVhbnMgdGhhdCB0aGUgcXVhbGlmaWVyIGFuZCB0aGUg
c2ltcGxlIG5hbWUgZ2V0IHRoZWlyIG93biBBU1Qgbm9kZXMuCi0gKiBGb3IgSkxTMiwgSkxTMyBv
ciBKTFM0OgogICogPHByZT4KICAqIFF1YWxpZmllZE5hbWU6CiAgKiAgICBOYW1lIDxiPi48L2I+
IFNpbXBsZU5hbWUKICAqIDwvcHJlPgotICogPHA+Ci0gKiBGb3IgSkxTODoKLSAqIDxwcmU+Ci0g
KiBRdWFsaWZpZWROYW1lOgotICogICAgTmFtZSA8Yj4uPC9iPiB7QW5ub3RhdGlvbn0gU2ltcGxl
TmFtZQotICogPC9wcmU+Ci0gKiA8L3A+CiAgKiA8cD4KICAqIFNlZSA8Y29kZT5GaWVsZEFjY2Vz
czwvY29kZT4gZm9yIGd1aWRlbGluZXMgb24gaGFuZGxpbmcgb3RoZXIgZXhwcmVzc2lvbnMKICAq
IHRoYXQgcmVzZW1ibGUgcXVhbGlmaWVkIG5hbWVzLgpAQCAtNjEsMjUgKzUzLDExIEBACiAJCW5l
dyBDaGlsZFByb3BlcnR5RGVzY3JpcHRvcihRdWFsaWZpZWROYW1lLmNsYXNzLCAibmFtZSIsIFNp
bXBsZU5hbWUuY2xhc3MsIE1BTkRBVE9SWSwgTk9fQ1lDTEVfUklTSyk7IC8vJE5PTi1OTFMtMSQK
IAogCS8qKgotCSAqIFRoZSAiYW5ub3RhdGlvbnMiIHN0cnVjdHVyYWwgcHJvcGVydHkgb2YgdGhp
cyBub2RlIHR5cGUgKGNoaWxkIHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCi0JICogQHNpbmNl
IDMuOQotCSAqLwotCXB1YmxpYyBzdGF0aWMgZmluYWwgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlw
dG9yIEFOTk9UQVRJT05TX1BST1BFUlRZID0KLQkJbmV3IENoaWxkTGlzdFByb3BlcnR5RGVzY3Jp
cHRvcihRdWFsaWZpZWROYW1lLmNsYXNzLCAiYW5ub3RhdGlvbnMiLCBBbm5vdGF0aW9uLmNsYXNz
LCBDWUNMRV9SSVNLKTsgLy8kTk9OLU5MUy0xJAotCS8qKgogCSAqIEEgbGlzdCBvZiBwcm9wZXJ0
eSBkZXNjcmlwdG9ycyAoZWxlbWVudCB0eXBlOgogCSAqIHtAbGluayBTdHJ1Y3R1cmFsUHJvcGVy
dHlEZXNjcmlwdG9yfSksCiAJICogb3IgbnVsbCBpZiB1bmluaXRpYWxpemVkLgogCSAqLwogCXBy
aXZhdGUgc3RhdGljIGZpbmFsIExpc3QgUFJPUEVSVFlfREVTQ1JJUFRPUlM7Ci0JCi0JLyoqCi0J
ICogQSBsaXN0IG9mIHByb3BlcnR5IGRlc2NyaXB0b3JzIChlbGVtZW50IHR5cGU6Ci0JICoge0Bs
aW5rIFN0cnVjdHVyYWxQcm9wZXJ0eURlc2NyaXB0b3J9KSwKLQkgKiBvciBudWxsIGlmIHVuaW5p
dGlhbGl6ZWQuCi0JICogQHNpbmNlIDMuOQotCSAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFsIExp
c3QgUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wOwogCiAJc3RhdGljIHsKIAkJTGlzdCBwcm9wZXJ0
eUxpc3QgPSBuZXcgQXJyYXlMaXN0KDMpOwpAQCAtODcsMTMgKzY1LDYgQEAKIAkJYWRkUHJvcGVy
dHkoUVVBTElGSUVSX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwogCQlhZGRQcm9wZXJ0eShOQU1F
X1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwogCQlQUk9QRVJUWV9ERVNDUklQVE9SUyA9IHJlYXBQ
cm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsKLQkJCi0JCXByb3BlcnR5TGlzdCA9IG5ldyBBcnJh
eUxpc3QoNCk7Ci0JCWNyZWF0ZVByb3BlcnR5TGlzdChRdWFsaWZpZWROYW1lLmNsYXNzLCBwcm9w
ZXJ0eUxpc3QpOwotCQlhZGRQcm9wZXJ0eShRVUFMSUZJRVJfUFJPUEVSVFksIHByb3BlcnR5TGlz
dCk7Ci0JCWFkZFByb3BlcnR5KE5BTUVfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7Ci0JCWFkZFBy
b3BlcnR5KEFOTk9UQVRJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwotCQlQUk9QRVJUWV9E
RVNDUklQVE9SU184XzAgPSByZWFwUHJvcGVydHlMaXN0KHByb3BlcnR5TGlzdCk7CiAJfQogCiAJ
LyoqCkBAIC0xMDcsMTQgKzc4LDcgQEAKIAkgKiBAc2luY2UgMy4wCiAJICovCiAJcHVibGljIHN0
YXRpYyBMaXN0IHByb3BlcnR5RGVzY3JpcHRvcnMoaW50IGFwaUxldmVsKSB7Ci0JCXN3aXRjaCAo
YXBpTGV2ZWwpIHsKLQkJCWNhc2UgQVNULkpMUzJfSU5URVJOQUwgOgotCQkJY2FzZSBBU1QuSkxT
M19JTlRFUk5BTCA6Ci0JCQljYXNlIEFTVC5KTFM0OgotCQkJCXJldHVybiBQUk9QRVJUWV9ERVND
UklQVE9SUzsKLQkJCWRlZmF1bHQgOgotCQkJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SU184
XzA7Ci0JCX0KKwkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTOwogCX0KIAogCS8qKgpAQCAt
MTQxLDkgKzEwNSw2IEBACiAJICovCiAJUXVhbGlmaWVkTmFtZShBU1QgYXN0KSB7CiAJCXN1cGVy
KGFzdCk7Ci0JCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCXRoaXMuYW5ub3Rh
dGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7Ci0JCX0K
IAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTE1MSwxNyArMTEy
LDYgQEAKIAkgKi8KIAlmaW5hbCBMaXN0IGludGVybmFsU3RydWN0dXJhbFByb3BlcnRpZXNGb3JU
eXBlKGludCBhcGlMZXZlbCkgewogCQlyZXR1cm4gcHJvcGVydHlEZXNjcmlwdG9ycyhhcGlMZXZl
bCk7Ci0JfQotCQotCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQotCSAqIE1ldGhv
ZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgotCSAqLwotCWZpbmFsIExpc3QgaW50ZXJuYWxHZXRDaGls
ZExpc3RQcm9wZXJ0eShDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgcHJvcGVydHkpIHsKLQkJ
aWYgKHByb3BlcnR5ID09IEFOTk9UQVRJT05TX1BST1BFUlRZKSB7Ci0JCQlyZXR1cm4gYW5ub3Rh
dGlvbnMoKTsKLQkJfQotCQkvLyBhbGxvdyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHRvIGZsYWcg
dGhlIGVycm9yCi0JCXJldHVybiBzdXBlci5pbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KHBy
b3BlcnR5KTsKIAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTIw
MywxMSArMTUzLDYgQEAKIAkJcmVzdWx0LnNldFNvdXJjZVJhbmdlKGdldFN0YXJ0UG9zaXRpb24o
KSwgZ2V0TGVuZ3RoKCkpOwogCQlyZXN1bHQuc2V0UXVhbGlmaWVyKChOYW1lKSBnZXRRdWFsaWZp
ZXIoKS5jbG9uZSh0YXJnZXQpKTsKIAkJcmVzdWx0LnNldE5hbWUoKFNpbXBsZU5hbWUpIGdldE5h
bWUoKS5jbG9uZSh0YXJnZXQpKTsKLQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4
KSB7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFU
SU9OU19QUk9QRVJUWSk7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMuYWRkQWxsKAotCQkJCQlBU1RO
b2RlLmNvcHlTdWJ0cmVlcyh0YXJnZXQsIGFubm90YXRpb25zKCkpKTsKLQkJfQogCQlyZXR1cm4g
cmVzdWx0OwogCX0KIApAQCAtMjI3LDkgKzE3Miw2IEBACiAJCWlmICh2aXNpdENoaWxkcmVuKSB7
CiAJCQkvLyB2aXNpdCBjaGlsZHJlbiBpbiBub3JtYWwgbGVmdCB0byByaWdodCByZWFkaW5nIG9y
ZGVyCiAJCQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBnZXRRdWFsaWZpZXIoKSk7Ci0JCQlpZiAodGhp
cy5hc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCQlhY2NlcHRDaGlsZHJlbih2aXNpdG9y
LCB0aGlzLmFubm90YXRpb25zKTsKLQkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldE5h
bWUoKSk7CiAJCX0KIAkJdmlzaXRvci5lbmRWaXNpdCh0aGlzKTsKQEAgLTMzNyw4ICsyNzksNyBA
QAogCQlyZXR1cm4KIAkJCW1lbVNpemUoKQogCQkJKyAodGhpcy5uYW1lID09IG51bGwgPyAwIDog
Z2V0TmFtZSgpLnRyZWVTaXplKCkpCi0JCQkrICh0aGlzLnF1YWxpZmllciA9PSBudWxsID8gMCA6
IGdldFF1YWxpZmllcigpLnRyZWVTaXplKCkpCi0JCQkrICh0aGlzLmFubm90YXRpb25zID09IG51
bGwgPyAwIDogdGhpcy5hbm5vdGF0aW9ucy5saXN0U2l6ZSgpKTsKKwkJCSsgKHRoaXMucXVhbGlm
aWVyID09IG51bGwgPyAwIDogZ2V0UXVhbGlmaWVyKCkudHJlZVNpemUoKSk7CiAJfQogfQogCmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUv
ZG9tL1NpbXBsZU5hbWUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhCmluZGV4IDI2OTQ2ZDIuLjNmZTJhZjcgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9k
b20vU2ltcGxlTmFtZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9y
YXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9y
YXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBh
bmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRl
ciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2gg
YWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTgs
NyArOCw3IEBACiAgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0
IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCiAgKiBDb21tdW5pdHkgUHJv
Y2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRp
b24gcHVycG9zZXMKICAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55
IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KLSAqIAorICoKICAqIENvbnRyaWJ1dG9yczoKICAq
ICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqLwpAQCAtNDMsMTMgKzQzLDYgQEAKIAkgKi8KIAlwdWJsaWMg
c3RhdGljIGZpbmFsIFNpbXBsZVByb3BlcnR5RGVzY3JpcHRvciBJREVOVElGSUVSX1BST1BFUlRZ
ID0KIAkJbmV3IFNpbXBsZVByb3BlcnR5RGVzY3JpcHRvcihTaW1wbGVOYW1lLmNsYXNzLCAiaWRl
bnRpZmllciIsIFN0cmluZy5jbGFzcywgTUFOREFUT1JZKTsgLy8kTk9OLU5MUy0xJAotCQotCS8q
KgotCSAqIFRoZSAiYW5ub3RhdGlvbnMiIHN0cnVjdHVyYWwgcHJvcGVydHkgb2YgdGhpcyBub2Rl
IHR5cGUgKGNoaWxkIHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCi0JICogQHNpbmNlIDMuOQot
CSAqLwotCXB1YmxpYyBzdGF0aWMgZmluYWwgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yIEFO
Tk9UQVRJT05TX1BST1BFUlRZID0KLQkJbmV3IENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvcihT
aW1wbGVOYW1lLmNsYXNzLCAiYW5ub3RhdGlvbnMiLCBBbm5vdGF0aW9uLmNsYXNzLCBDWUNMRV9S
SVNLKTsgLy8kTk9OLU5MUy0xJAogCiAJLyoqCiAJICogQSBsaXN0IG9mIHByb3BlcnR5IGRlc2Ny
aXB0b3JzIChlbGVtZW50IHR5cGU6CkBAIC01OCwyNiArNTEsMTIgQEAKIAkgKiBAc2luY2UgMy4w
CiAJICovCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlzdCBQUk9QRVJUWV9ERVNDUklQVE9SUzsK
LQkKLQkvKioKLQkgKiBBIGxpc3Qgb2YgcHJvcGVydHkgZGVzY3JpcHRvcnMgKGVsZW1lbnQgdHlw
ZToKLQkgKiB7QGxpbmsgU3RydWN0dXJhbFByb3BlcnR5RGVzY3JpcHRvcn0pLAotCSAqIG9yIG51
bGwgaWYgdW5pbml0aWFsaXplZC4KLQkgKiBAc2luY2UgMy45Ci0JICovCi0JcHJpdmF0ZSBzdGF0
aWMgZmluYWwgTGlzdCBQUk9QRVJUWV9ERVNDUklQVE9SU184XzA7CiAKIAlzdGF0aWMgewogCQlM
aXN0IHByb3BlcnR5TGlzdCA9IG5ldyBBcnJheUxpc3QoMik7CiAJCWNyZWF0ZVByb3BlcnR5TGlz
dChTaW1wbGVOYW1lLmNsYXNzLCBwcm9wZXJ0eUxpc3QpOwogCQlhZGRQcm9wZXJ0eShJREVOVElG
SUVSX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwogCQlQUk9QRVJUWV9ERVNDUklQVE9SUyA9IHJl
YXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsKLQkJCi0JCXByb3BlcnR5TGlzdCA9IG5ldyBB
cnJheUxpc3QoMyk7Ci0JCWNyZWF0ZVByb3BlcnR5TGlzdChTaW1wbGVOYW1lLmNsYXNzLCBwcm9w
ZXJ0eUxpc3QpOwotCQlhZGRQcm9wZXJ0eShJREVOVElGSUVSX1BST1BFUlRZLCBwcm9wZXJ0eUxp
c3QpOwotCQlhZGRQcm9wZXJ0eShBTk5PVEFUSU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsK
LQkJUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wID0gcmVhcFByb3BlcnR5TGlzdChwcm9wZXJ0eUxp
c3QpOwogCX0KIAogCS8qKgpAQCAtOTAsMTQgKzY5LDcgQEAKIAkgKiBAc2luY2UgMy4wCiAJICov
CiAJcHVibGljIHN0YXRpYyBMaXN0IHByb3BlcnR5RGVzY3JpcHRvcnMoaW50IGFwaUxldmVsKSB7
Ci0JCXN3aXRjaCAoYXBpTGV2ZWwpIHsKLQkJCWNhc2UgQVNULkpMUzJfSU5URVJOQUwgOgotCQkJ
Y2FzZSBBU1QuSkxTM19JTlRFUk5BTCA6Ci0JCQljYXNlIEFTVC5KTFM0OgotCQkJCXJldHVybiBQ
Uk9QRVJUWV9ERVNDUklQVE9SUzsKLQkJCWRlZmF1bHQgOgotCQkJCXJldHVybiBQUk9QRVJUWV9E
RVNDUklQVE9SU184XzA7Ci0JCX0KKwkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTOwogCX0K
IAogCS8qKgpAQCAtMTIzLDkgKzk1LDYgQEAKIAkgKi8KIAlTaW1wbGVOYW1lKEFTVCBhc3QpIHsK
IAkJc3VwZXIoYXN0KTsKLQkJaWYgKGFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgewotCQkJdGhp
cy5hbm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KEFOTk9UQVRJT05TX1BST1BFUlRZ
KTsKLQkJfQogCX0KIAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQpAQCAtMTM0
LDE3ICsxMDMsNiBAQAogCSAqLwogCWZpbmFsIExpc3QgaW50ZXJuYWxTdHJ1Y3R1cmFsUHJvcGVy
dGllc0ZvclR5cGUoaW50IGFwaUxldmVsKSB7CiAJCXJldHVybiBwcm9wZXJ0eURlc2NyaXB0b3Jz
KGFwaUxldmVsKTsKLQl9Ci0JCi0JLyogKG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRob2QpCi0J
ICogTWV0aG9kIGRlY2xhcmVkIG9uIEFTVE5vZGUuCi0JICovCi0JZmluYWwgTGlzdCBpbnRlcm5h
bEdldENoaWxkTGlzdFByb3BlcnR5KENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBwcm9wZXJ0
eSkgewotCQlpZiAocHJvcGVydHkgPT0gQU5OT1RBVElPTlNfUFJPUEVSVFkpIHsKLQkJCXJldHVy
biBhbm5vdGF0aW9ucygpOwotCQl9Ci0JCS8vIGFsbG93IGRlZmF1bHQgaW1wbGVtZW50YXRpb24g
dG8gZmxhZyB0aGUgZXJyb3IKLQkJcmV0dXJuIHN1cGVyLmludGVybmFsR2V0Q2hpbGRMaXN0UHJv
cGVydHkocHJvcGVydHkpOwogCX0KIAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9k
KQpAQCAtMTc3LDExICsxMzUsNiBAQAogCQlTaW1wbGVOYW1lIHJlc3VsdCA9IG5ldyBTaW1wbGVO
YW1lKHRhcmdldCk7CiAJCXJlc3VsdC5zZXRTb3VyY2VSYW5nZShnZXRTdGFydFBvc2l0aW9uKCks
IGdldExlbmd0aCgpKTsKIAkJcmVzdWx0LnNldElkZW50aWZpZXIoZ2V0SWRlbnRpZmllcigpKTsK
LQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7Ci0JCQlyZXN1bHQuYW5ub3Rh
dGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7Ci0JCQly
ZXN1bHQuYW5ub3RhdGlvbnMuYWRkQWxsKAotCQkJCQlBU1ROb2RlLmNvcHlTdWJ0cmVlcyh0YXJn
ZXQsIGFubm90YXRpb25zKCkpKTsKLQkJfQogCQlyZXR1cm4gcmVzdWx0OwogCX0KIApAQCAtMTk3
LDEyICsxNTAsNyBAQAogCSAqIE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCXZv
aWQgYWNjZXB0MChBU1RWaXNpdG9yIHZpc2l0b3IpIHsKLQkJYm9vbGVhbiB2aXNpdENoaWxkcmVu
ID0gdmlzaXRvci52aXNpdCh0aGlzKTsKLQkJaWYgKHZpc2l0Q2hpbGRyZW4pIHsKLQkJCWlmICh0
aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgewotCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0
b3IsIHRoaXMuYW5ub3RhdGlvbnMpOwotCQkJfQotCQl9CisJCXZpc2l0b3IudmlzaXQodGhpcyk7
CiAJCXZpc2l0b3IuZW5kVmlzaXQodGhpcyk7CiAJfQogCkBAIC0zNjUsNyArMzEzLDcgQEAKIAkg
KiBNZXRob2QgZGVjbGFyZWQgb24gQVNUTm9kZS4KIAkgKi8KIAlpbnQgdHJlZVNpemUoKSB7Ci0J
CXJldHVybiBtZW1TaXplKCkgKyAodGhpcy5hbm5vdGF0aW9ucyA9PSBudWxsID8gMCA6IHRoaXMu
YW5ub3RhdGlvbnMubGlzdFNpemUoKSk7CisJCXJldHVybiBtZW1TaXplKCk7CiAJfQogfQogCmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVy
LmphdmEKaW5kZXggMTlhM2JhZS4uN2FlMjUyZSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0
ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQpAQCAtMTI0Miw3ICsxMjQy
LDYgQEAKIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChRdWFsaWZpZWROYW1lIG5vZGUpIHsKIAkJbm9k
ZS5nZXRRdWFsaWZpZXIoKS5hY2NlcHQodGhpcyk7CiAJCXRoaXMuYnVmZmVyLmFwcGVuZCgiLiIp
Oy8vJE5PTi1OTFMtMSQKLQkJdmlzaXRUeXBlQW5ub3RhdGlvbnMobm9kZSk7CiAJCW5vZGUuZ2V0
TmFtZSgpLmFjY2VwdCh0aGlzKTsKIAkJcmV0dXJuIGZhbHNlOwogCX0KQEAgLTEyNzcsNyArMTI3
Niw2IEBACiAJICogQHNlZSBBU1RWaXNpdG9yI3Zpc2l0KFNpbXBsZU5hbWUpCiAJICovCiAJcHVi
bGljIGJvb2xlYW4gdmlzaXQoU2ltcGxlTmFtZSBub2RlKSB7Ci0JCXZpc2l0VHlwZUFubm90YXRp
b25zKG5vZGUpOwogCQl0aGlzLmJ1ZmZlci5hcHBlbmQobm9kZS5nZXRJZGVudGlmaWVyKCkpOwog
CQlyZXR1cm4gZmFsc2U7CiAJfQpAQCAtMTgyMSwxOCArMTgxOSw2IEBACiAJCXJldHVybiBmYWxz
ZTsKIAl9CiAJcHJpdmF0ZSB2b2lkIHZpc2l0VHlwZUFubm90YXRpb25zKFR5cGUgbm9kZSkgewot
CQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4KSB7Ci0JCQlMaXN0IGFu
bm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9ucygpOwotCQkJaWYgKGFubm90YXRpb25zICE9IG51
bGwpIHsKLQkJCQlmb3IgKEl0ZXJhdG9yIGl0ID0gYW5ub3RhdGlvbnMuaXRlcmF0b3IoKTsgaXQu
aGFzTmV4dCgpOyApIHsKLQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24p
IGl0Lm5leHQoKTsKLQkJCQkJYW5ub3RhdGlvbi5hY2NlcHQodGhpcyk7Ci0JCQkJCXRoaXMuYnVm
ZmVyLmFwcGVuZCgnICcpOwotCQkJCX0KLQkJCX0KLQkJfQotCX0KLQlwcml2YXRlIHZvaWQgdmlz
aXRUeXBlQW5ub3RhdGlvbnMoTmFtZSBub2RlKSB7CiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxl
dmVsKCkgPj0gQVNULkpMUzgpIHsKIAkJCUxpc3QgYW5ub3RhdGlvbnMgPSBub2RlLmFubm90YXRp
b25zKCk7CiAJCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCkgewpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXpl
ci5qYXZhCmluZGV4IGIyNjExYTEuLjNkY2MzMmEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RS
ZXdyaXRlQW5hbHl6ZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmph
dmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0
IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0
IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0
cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwog
ICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJs
aWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwg
YW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMjc3OCw5ICsyNzc4LDYgQEAKIAkJfQogCiAJCXJld3Jp
dGVSZXF1aXJlZE5vZGUobm9kZSwgUXVhbGlmaWVkTmFtZS5RVUFMSUZJRVJfUFJPUEVSVFkpOwot
CQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4KSB7Ci0JCQlyZXdyaXRl
VHlwZUFubm90YXRpb25zKG5vZGUsIFF1YWxpZmllZE5hbWUuQU5OT1RBVElPTlNfUFJPUEVSVFks
IG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpKTsKLQkJfQogCQlyZXdyaXRlUmVxdWlyZWROb2RlKG5v
ZGUsIFF1YWxpZmllZE5hbWUuTkFNRV9QUk9QRVJUWSk7CiAJCXJldHVybiBmYWxzZTsKIAl9CkBA
IC0yNzkxLDkgKzI3ODgsNiBAQAogCXB1YmxpYyBib29sZWFuIHZpc2l0KFNpbXBsZU5hbWUgbm9k
ZSkgewogCQlpZiAoIWhhc0NoaWxkcmVuQ2hhbmdlcyhub2RlKSkgewogCQkJcmV0dXJuIGRvVmlz
aXRVbmNoYW5nZWRDaGlsZHJlbihub2RlKTsKLQkJfQotCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlM
ZXZlbCgpID49IEFTVC5KTFM4KSB7Ci0JCQlyZXdyaXRlVHlwZUFubm90YXRpb25zKG5vZGUsIFNp
bXBsZU5hbWUuQU5OT1RBVElPTlNfUFJPUEVSVFksIG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpKTsK
IAkJfQogCQlTdHJpbmcgbmV3U3RyaW5nPSAoU3RyaW5nKSBnZXROZXdWYWx1ZShub2RlLCBTaW1w
bGVOYW1lLklERU5USUZJRVJfUFJPUEVSVFkpOwogCQlUZXh0RWRpdEdyb3VwIGdyb3VwID0gZ2V0
RWRpdEdyb3VwKG5vZGUsIFNpbXBsZU5hbWUuSURFTlRJRklFUl9QUk9QRVJUWSk7CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJl
d3JpdGVGbGF0dGVuZXIuamF2YQppbmRleCAxNGQyYjU5Li5jZWYwMzAxIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9t
L3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdy
aXRlRmxhdHRlbmVyLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
LgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
LgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55
aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0
aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlz
IGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNzM0LDkgKzczNCw2IEBACiAJ
cHVibGljIGJvb2xlYW4gdmlzaXQoUXVhbGlmaWVkTmFtZSBub2RlKSB7CiAJCWdldENoaWxkTm9k
ZShub2RlLCBRdWFsaWZpZWROYW1lLlFVQUxJRklFUl9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwog
CQl0aGlzLnJlc3VsdC5hcHBlbmQoJy4nKTsKLQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwo
KSA+PSBBU1QuSkxTOCkgewotCQkJdmlzaXRMaXN0KG5vZGUsIFF1YWxpZmllZE5hbWUuQU5OT1RB
VElPTlNfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5HLCBT
dHJpbmcudmFsdWVPZignICcpKTsKLQkJfQogCQlnZXRDaGlsZE5vZGUobm9kZSwgUXVhbGlmaWVk
TmFtZS5OQU1FX1BST1BFUlRZKS5hY2NlcHQodGhpcyk7CiAJCXJldHVybiBmYWxzZTsKIAl9CkBA
IC03NTksOSArNzU2LDYgQEAKIAkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoU2ltcGxlTmFtZSkK
IAkgKi8KIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChTaW1wbGVOYW1lIG5vZGUpIHsKLQkJaWYgKG5v
ZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkgewotCQkJdmlzaXRMaXN0KG5vZGUs
IFNpbXBsZU5hbWUuQU5OT1RBVElPTlNfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcgJyksIFV0
aWwuRU1QVFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignICcpKTsKLQkJfQogCQl0aGlzLnJlc3Vs
dC5hcHBlbmQoZ2V0QXR0cmlidXRlKG5vZGUsIFNpbXBsZU5hbWUuSURFTlRJRklFUl9QUk9QRVJU
WSkpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQ==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225804</attachid>
            <date>2013-01-18 03:56:00 -0500</date>
            <delta_ts>2013-01-18 03:56:51 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Bug-395886--18DOM-AST-Withdraw-annotations-property-from-Name.patch</filename>
            <type>text/plain</type>
            <size>83543</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDc5MTA3N2MuLjY2NGJlNmIgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTcsNyArMTcsNyBAQAogaW1wb3J0IGphdmEu
dXRpbC5MaXN0OwogCiBpbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3Q7Ci0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5kb20uKjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29t
cGlsYXRpb25Vbml0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2Vw
dGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUOwpAQCAtOTgsNCArOTgs
OTQzIEBACiAJCWFubm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOwogCQlj
aGVja1NvdXJjZVJhbmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOwogCX0KKwkK
KwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
Mzk1ODg2CisJICogdGVzdHMgYW5ub3RhdGlvbnMgb24gUVRSIGluIG11bHRpcGxlIHNjZW5hcmlv
cyBvZiBvY2N1cnJlbmNlLgorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJ
cHVibGljIHZvaWQgdGVzdDAwMDIoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhp
cy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDAy
L1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAorCQkJCSJw
YWNrYWdlIHRlc3QwMDAyO1xuIiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5U
YXJnZXQ7XG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIglwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlPdXRlciBvdXRlciA9
IG5ldyBPdXRlcigpO1xuIiArCQkKKwkJCQkiCQlPYmplY3QgbXlPYmplY3QgPSBuZXcgT2JqZWN0
KCk7XG4iKworCQkJCSIJCVN0cmluZyBteVN0cmluZztcbiIrCisJCQkJIgkJbXlTdHJpbmcgPSAo
amF2YS5sYW5nLkBNYXJrZXIgU3RyaW5nKSBteU9iamVjdDtcbiIrCisJCQkJIgkJT3V0ZXIuSW5u
ZXIgZmlyc3QgPSBvdXRlci5uZXcgSW5uZXIoKTtcbiIgKworCQkJCSIJCU91dGVyLiBATWFya2Vy
MiBJbm5lciBzZWNvbmQgPSBvdXRlci5uZXcgSW5uZXIoKSA7XG4iICsKKwkJCQkiCQlPdXRlci5J
bm5lci4gQE1hcmtlcjEgRGVlcGVyIGRlZXBlciA9IHNlY29uZC5uZXcgRGVlcGVyKCk7XG4iICsK
KwkJCQkiCQlPdXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIgZGVlcGVyMiA9ICBz
ZWNvbmQubmV3IERlZXBlcigpO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
ImNsYXNzIE91dGVyIHtcbiIgKworCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJ
CSIJCXB1YmxpYyBjbGFzcyBEZWVwZXIge1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgl9XG4i
ICsKKwkJCQkifVxuIiArCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1l
bnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyIHt9XG4iICsKKwkJ
CQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4i
ICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iICsKKwkJCQkiQFRhcmdldCAoamF2YS5s
YW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFj
ZSBNYXJrZXIyIHt9XG4iCQkKKwkJCQk7CisJCUNvbXBpbGF0aW9uVW5pdCBjdSA9IChDb21waWxh
dGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRlbnRzLAorCQkJCXRoaXMud29ya2luZ0NvcHkp
OworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJh
dGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7CisJCUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERl
Y2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCk7CisJCWludCBzQ291bnQgPSAzOyAKKwor
CQkvLyBjYXNlIDEgLSBhbm5vdGF0aW9uIGp1c3QgYmVmb3JlIHRoZSBsYXN0IGZpZWxkCisJCUV4
cHJlc3Npb25TdGF0ZW1lbnQgZXhwcmVzc2lvblN0YXRlbWVudCA9IChFeHByZXNzaW9uU3RhdGVt
ZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCUFzc2lnbm1lbnQgYXNzaWdubWVudCA9
IChBc3NpZ25tZW50KSBleHByZXNzaW9uU3RhdGVtZW50LmdldEV4cHJlc3Npb24oKTsKKwkJYXNz
ZXJ0Tm90TnVsbChhc3NpZ25tZW50KTsKKwkJQ2FzdEV4cHJlc3Npb24gY2FzdEV4cHJlc3Npb24g
PSAoQ2FzdEV4cHJlc3Npb24pYXNzaWdubWVudC5nZXRSaWdodEhhbmRTaWRlKCk7CisJCWFzc2Vy
dE5vdE51bGwoY2FzdEV4cHJlc3Npb24pOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgY2FzdEV4cHJlc3Npb24uZ2V0VHlwZSgpOworCQlhc3NlcnROb3RO
dWxsKHF1YWxpZmllZFR5cGUpOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZy5ATWFya2VyIFN0
cmluZyIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9
IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBl
KSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoImphdmEubGFuZyIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRp
b25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCVNpbXBs
ZU5hbWUgc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIlN0cmluZyIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisJCQorCQkvLyBjYXNlIDIgLSBR
dWFsaWZpZWRUeXBlIHdpdGhvdXQgYW5ub3RhdGlvbnMuCisJCVZhcmlhYmxlRGVjbGFyYXRpb25T
dGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCVR5cGUgdHlwZSA9IHZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUu
aXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMCk7CisJCQorCQkvLyBjYXNlIDMgLSBRYXVsaWZpZWQgVHlwZSB3aXRo
IG91dGVyIHdpdGhvdXQgYW5ub3RhdGlvbnMgYW5kIGlubmVyIHdpdGggYW5ub3RhdGlvbnMuCisJ
CXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMiBJ
bm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CQkKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFz
c2VydFRydWUocXVhbGlmaWVyVHlwZS5pc0Fubm90YXRhYmxlKCkpOworCQlBbm5vdGF0YWJsZVR5
cGUgYW5ub3RhdGFibGVUeXBlID0gKEFubm90YXRhYmxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJ
YW5ub3RhdGlvbnMgPSBhbm5vdGF0YWJsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1
ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlw
ZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygp
KTsKKwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIklubmVyIiwgc2ltcGxlTmFtZS50b1N0cmluZygpKTsKKworCQkvLyBjYXNlIDQgLSBNdWx0
aXBsZSBsZXZlbHMgd2l0aCBhbm5vdGF0aW9ucyBhdCB0aGUgbGFzdCBvbmx5LgorCQl2YXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0
YXRlbWVudHMuZ2V0KHNDb3VudCsrKTsKKwkJdHlwZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0
ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOwor
CQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydE5vdE51bGwo
cXVhbGlmaWVkVHlwZSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIuQE1hcmtlcjEgRGVl
cGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsJCQorCQlxdWFsaWZpZXJUeXBlID0gcXVh
bGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlz
U2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFsaWZpZXJUeXBl
OworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsK
KwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzQW5ub3RhdGFibGUoKSk7CisJCWFubm90YXRh
YmxlVHlwZSA9IChBbm5vdGF0YWJsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFubm90YXRpb25z
ID0gYW5ub3RhdGFibGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlv
bnMuc2l6ZSgpID09IDApOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlv
bnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCXNpbXBs
ZU5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIi
LCBzaW1wbGVOYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNSAtIE11bHRpcGxlIGFubm90
YXRpb25zCisJCXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQl0eXBlID0gdmFyaWFi
bGVEZWNsYXJhdGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5A
TWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkp
OwkJCisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3Nl
cnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2Vy
MiIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJc2ltcGxlTmFtZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIHNpbXBsZU5hbWUu
dG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmll
cigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlx
dWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFu
bm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJc2ltcGxlTmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgc2ltcGxlTmFtZS50b1N0cmlu
ZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJ
CWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUg
PSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlciIsIHNp
bXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc0Fubm90
YXRhYmxlKCkpOworCQlhbm5vdGF0YWJsZVR5cGUgPSAoQW5ub3RhdGFibGVUeXBlKSBxdWFsaWZp
ZXJUeXBlOworCQlhbm5vdGF0aW9ucyA9IGFubm90YXRhYmxlVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisKKwkvKioKKwkgKiBo
dHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJICog
dGVzdHMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIHR5cGUgYW5ub3RhdGlvbnMgb24gYSBwb3NzaWJs
ZSBKQVZBIDcgYW5kIDggcGxhY2UuCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24KKwkg
Ki8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwMygpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24gewor
CQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVz
dDAwMDMvWC5qYXZhIiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gCisJ
CQkJInBhY2thZ2UgdGVzdDAwMDM7XG4iICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0
aW9uLlRhcmdldDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCXB1Ymxp
YyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiIgKworCQkJCSIJCUBNYXJrZXIg
T3V0ZXIuSW5uZXIgZmlyc3RbXSA9IG5ldyBPdXRlci5Jbm5lclsxXTtcbiIgKworCQkJCSIJfVxu
IiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBPdXRlciB7XG4iICsKKwkJCQkiCXB1YmxpYyBj
bGFzcyBJbm5lciB7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiQFRhcmdl
dCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQki
QGludGVyZmFjZSBNYXJrZXIge31cbiIgCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAo
Q29tcGlsYXRpb25Vbml0KSBidWlsZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndvcmtp
bmdDb3B5KTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRpb24gPSAoTWV0aG9k
RGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIDAsIDApOworCQlMaXN0IHN0YXRlbWVudHMgPSBt
ZXRob2REZWNsYXJhdGlvbi5nZXRCb2R5KCkuc3RhdGVtZW50cygpOworCQlpbnQgc0NvdW50ID0g
MDsgCisKKwkJLy8gQ3VycmVudCBkZXNpZ24gZXhwZWN0cyBhbm5vdGF0aW9uIG9ubHkgYXQgdGhl
IEpBVkEgNyBwbGFjZSBpZiBpdCBpcyBleHBlY3RlZCBhdCBKQVZBIDguCisJCVZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQpOworCQlMaXN0IG1v
ZGlmaWVycyA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQubW9kaWZpZXJzKCk7CisJCWFz
c2VydFRydWUobW9kaWZpZXJzLnNpemUoKSA9PSAxKTsKKwkJQW5ub3RhdGlvbiBhbm5vdGF0aW9u
ID0gKEFubm90YXRpb24pbW9kaWZpZXJzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2Vy
IiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJVHlwZSB0eXBlID0gdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUo
KSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhc3Nl
cnRFcXVhbHMoIk91dGVyLklubmVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJTGlzdCBh
bm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5v
dGF0aW9ucy5zaXplKCkgPT0gMCk7CisJfQorCisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlw
c2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgorCSAqIHRlc3RzIFFUUiB3aXRoIGFu
bm90YXRpb25zCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24KKwkgKi8KKwlwdWJsaWMg
dm9pZCB0ZXN0MDAwNCgpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0aGlzLndvcmtp
bmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDAwMDQvWC5qYXZh
IiwgdHJ1ZS8qcmVzb2x2ZSovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gCisJCQkJInBhY2thZ2Ug
dGVzdDAwMDQ7IiArCisJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQ7XG4i
ICsKKwkJCQkicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBPbmU8LypzdGFydCovQE1hcmtlcjEg
T3V0ZXI8SW50ZWdlcj4uIEBNYXJrZXIyIElubmVyPERvdWJsZT5bXS8qZW5kKi8+IHtcbiIgKyAK
KwkJCQkifVxuIiArIAorCQkJCSJpbnRlcmZhY2UgT25lPFQ+IHt9XG4iICsgCisJCQkJImNsYXNz
IE91dGVyPFQ+IHtcbiIgKyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lcjxTPiB7fVxuIiArIAor
CQkJCSJ9XG4iICsgCisJCQkJIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRlcmZhY2UgTWFya2VyMSB7fVxuIiArCisJCQkJ
IkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiAr
CisJCQkJIkBpbnRlcmZhY2UgTWFya2VyMiB7fVxuIiAKKwkJCQk7CisJCUNvbXBpbGF0aW9uVW5p
dCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKAorCQkJCWNvbnRlbnRzLAorCQkJCXRo
aXMud29ya2luZ0NvcHkpOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0gKFR5
cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LDApOworCQlBcnJheVR5cGUgdHlwZSA9IChBcnJh
eVR5cGUpICgoUGFyYW1ldGVyaXplZFR5cGUpdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCkpLnR5cGVBcmd1bWVudHMoKS5nZXQoMCk7CisJCWFzc2VydE5vdE51bGwo
Ik5vIGFubm90YXRpb24iLCB0eXBlKTsKKwkJSVR5cGVCaW5kaW5nIGJpbmRpbmcgPSB0eXBlLnJl
c29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsK
KwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0MDAwNC5PdXRlcjxq
YXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT5bXSIsIGJpbmRpbmcuZ2V0
UXVhbGlmaWVkTmFtZSgpKTsKKwkJVHlwZSBjb21wb25lbnRUeXBlID0gdHlwZS5nZXRDb21wb25l
bnRUeXBlKCk7CisJCWJpbmRpbmcgPSBjb21wb25lbnRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJ
CWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJX
cm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4u
SW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLCBiaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJ
CWFzc2VydFRydWUoIk5vdCBwYXJhbWV0ZXJpemVkIiwgY29tcG9uZW50VHlwZS5pc1BhcmFtZXRl
cml6ZWRUeXBlKCkpOworCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZSA9IChQ
YXJhbWV0ZXJpemVkVHlwZSkgY29tcG9uZW50VHlwZTsKKwkJVHlwZSB0eXBlMiA9IHBhcmFtZXRl
cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHF1YWxpZmllZCIsIHR5cGUy
LmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJUXVhbGlmaWVkVHlwZSBxdWFsaWZpZWRUeXBlID0gKFF1
YWxpZmllZFR5cGUpIHR5cGUyOworCQliaW5kaW5nID0gcXVhbGlmaWVkVHlwZS5yZXNvbHZlQmlu
ZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7CisJCWFzc2Vy
dEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMDQuT3V0ZXI8amF2YS5sYW5n
LkludGVnZXI+LklubmVyPGphdmEubGFuZy5Eb3VibGU+IiwgYmluZGluZy5nZXRRdWFsaWZpZWRO
YW1lKCkpOworCQlUeXBlIHF1YWxpZmllciA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CisJCWFzc2VydFRydWUoIk5vdCBwYXJhbWV0ZXJpemVkIiwgcXVhbGlmaWVyLmlzUGFyYW1ldGVy
aXplZFR5cGUoKSk7CisJCWJpbmRpbmcgPSBxdWFsaWZpZXIucmVzb2x2ZUJpbmRpbmcoKTsKKwkJ
YXNzZXJ0Tm90TnVsbCgiTm8gYmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldy
b25nIHF1YWxpZmllZCBuYW1lIiwgInRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRlZ2VyPiIs
IGJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwkJcGFyYW1ldGVyaXplZFR5cGUgPSAoUGFy
YW1ldGVyaXplZFR5cGUpIHF1YWxpZmllcjsKKwkJdHlwZTIgPSBwYXJhbWV0ZXJpemVkVHlwZS5n
ZXRUeXBlKCk7CisJCWFzc2VydFRydWUoIk5vdCBzaW1wbGUgdHlwZSIsIHR5cGUyLmlzU2ltcGxl
VHlwZSgpKTsKKwkJYmluZGluZyA9IHR5cGUyLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5v
dE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFs
aWZpZWQgbmFtZSIsICJ0ZXN0MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4iLCBiaW5kaW5n
LmdldFF1YWxpZmllZE5hbWUoKSk7CisJfQorCQorCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xp
cHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYKKwkgKiB0ZXN0cyBRVFIgd2l0aCBh
bm5vdGF0aW9ucworCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVibGlj
IHZvaWQgdGVzdDAwMDUoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53b3Jr
aW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDA1L1guamF2
YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCVN0cmluZyBjb250ZW50cyA9IAorCQkJCSJwYWNrYWdl
IHRlc3QwMDA1OyIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xu
IiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgT25lPCBPdXRlci5Jbm5lciA+IHtc
biIgKyAKKwkJCQkifVxuIiArIAorCQkJCSJjbGFzcyBZIGltcGxlbWVudHMgT25lPCBPdXRlci4g
QE1hcmtlcjEgSW5uZXIgPiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWiBpbXBs
ZW1lbnRzIE9uZTwgQE1hcmtlcjEgT3V0ZXIuSW5uZXIgPiB7XG4iICsgCisJCQkJIn1cbiIgKyAK
KwkJCQkiY2xhc3MgVyBpbXBsZW1lbnRzIE9uZTwgQE1hcmtlcjEgT3V0ZXIuIEBNYXJrZXIyIElu
bmVyID4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImludGVyZmFjZSBPbmU8VD4ge31cbiIg
KyAKKwkJCQkiY2xhc3MgT3V0ZXIge1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVyIHt9
XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24u
RWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4i
ICsKKwkJCQkiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9V
U0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iIAorCQkJCTsKKwkJQ29tcGls
YXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoCisJCQkJY29udGVudHMs
CisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWludCB0Q291bnQgPSAwOworCQkKKwkJLy8gY2Fz
ZSAxIC0gbm8gYW5ub3RhdGlvbnMgT3V0ZXIuSW5uZXIKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVk
ZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOwor
CQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJTGlzdCB0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCVR5cGUgdHlwZSA9IChUeXBlKXR5
cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJCisJCS8v
IGNhc2UgMiAtIFFUUiB3aXRoIG9uZSBhbm5vdGF0aW9uIE91dGVyLkBNYXJrZXIxIElubmVyCisJ
CXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50
KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFy
YXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFy
Z3VtZW50cy5zaXplKCkpOworCQl0eXBlID0gKFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0
ZXIuQE1hcmtlcjEgSW5uZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQlRdWFsaWZpZWRUeXBlIHF1
YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5l
ciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRp
b25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRp
b25zLnNpemUoKSA9PSAxKTsKKwkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24p
IGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRp
b24udG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7
CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFsaWZpZXJUeXBlOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJCisJCS8v
IGNhc2UgMyAtIFFUUiB3aXRoIG9uZSBhbm5vdGF0aW9uIGF0IHRoZSBiZWdpbm5pbmcgQE1hcmtl
cjEgT3V0ZXIuSW5uZXIKKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRB
U1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXpl
ZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSl0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5Jbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7CisJ
CXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJ
bm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9u
cyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9u
cy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxp
ZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlz
aW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygi
QE1hcmtlcjEgT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9
IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDAp
OworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJ
CisJCS8vIGNhc2UgNCAtIFFUUiB3aXRoIGFubm90YXRpb25zIGF0IGJvdGggdGhlIHR5cGVzIEBN
YXJrZXIxIE91dGVyLkBNYXJrZXIyIElubmVyCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVj
bGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygp
LmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50
cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQl0eXBlID0g
KFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmll
ZFR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIi
LCB0eXBlLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5
cGU7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKS50b1N0
cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFu
bm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIs
IGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBl
LmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNTaW1wbGVUeXBl
KCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2Vy
dEVxdWFscygiQE1hcmtlcjEgT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlv
bnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmlu
ZygpKTsKKworCX0KKwkKKwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9z
aG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJICogdGVzdHMgUFFUUiB3aXRoIGFubm90YXRpb25zIHBh
cnQKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRl
c3QwMDA2KCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkg
PSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0MDAwNi9YLmphdmEiLCB0cnVl
LypyZXNvbHZlKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAKKwkJCQkicGFja2FnZSB0ZXN0MDAw
NjsiICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtcbiIgKworCQkJ
CSJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9uZTxPdXRlci4gIElubmVyLkRlZXBlcjxEb3Vi
bGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgWDEgaW1wbGVtZW50cyBPbmU8
T3V0ZXIuIEBNYXJrZXIxIElubmVyLkRlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIg
KyAKKwkJCQkiY2xhc3MgWDIgaW1wbGVtZW50cyBPbmU8T3V0ZXIuIEBNYXJrZXIxIElubmVyLkBN
YXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3Mg
WDMgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIuIEBNYXJrZXIyIElubmVyLiBEZWVwZXI8
RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIFkgaW1wbGVtZW50cyBP
bmU8T3V0ZXIxLiBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4+IHtcbiIgKyAKKwkJCQki
fVxuIiArIAorCQkJCSJjbGFzcyBZMSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElubmVyPEludGVn
ZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJ
ImNsYXNzIFkyIGltcGxlbWVudHMgT25lPE91dGVyMS4gQE1hcmtlcjEgSW5uZXI8SW50ZWdlcj4u
IERlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFkz
IGltcGxlbWVudHMgT25lPEBNYXJrZXIxIE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIERlZXBlcjxE
b3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFk0IGltcGxlbWVu
dHMgT25lPEBNYXJrZXIxIE91dGVyMS4gQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4uIERlZXBlcjxE
b3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAJCQkJCisJCQkJImNsYXNzIFogaW1wbGVtZW50
cyBPbmU8T3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJ
In1cbiIgKyAKKwkJCQkiY2xhc3MgWjEgaW1wbGVtZW50cyBPbmU8QE1hcmtlcjEgT3V0ZXIyPElu
dGVnZXI+LklubmVyLkRlZXBlcjxEb3VibGU+PiB7XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQki
Y2xhc3MgWjIgaW1wbGVtZW50cyBPbmU8T3V0ZXIyPEludGVnZXI+LiBATWFya2VyMSBJbm5lci5A
TWFya2VyMiBEZWVwZXI8RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9XG4iICsgCQkJCQorCQkJCSJj
bGFzcyBXIGltcGxlbWVudHMgT25lPE91dGVyMzxEb3VibGU+LiBATWFya2VyMSBATWFya2VyMiBJ
bm5lcjxJbnRlZ2VyLCBDaGFyYWN0ZXI+LiBEZWVwZXI8RG91YmxlPj4ge1xuIiArIAorCQkJCSJ9
XG4iICsgCQkJCQorCQkJCSJpbnRlcmZhY2UgT25lPFQ+IHt9XG4iICsgCisJCQkJImNsYXNzIE91
dGVyIHtcbiIgKyAKKwkJCQkiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iICsKKwkJCQkiICAgICAg
IHB1YmxpYyBjbGFzcyBEZWVwZXI8Uz4ge1xuIiArCisJCQkJIiAgICAgICB9XG4iKworCQkJCSIg
ICB9XG4iICsgCisJCQkJIn1cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIxIHtcbiIgKyAKKwkJCQki
CXB1YmxpYyBjbGFzcyBJbm5lcjxUPiB7XG4iICsKKwkJCQkiICAgICAgIHB1YmxpYyBjbGFzcyBE
ZWVwZXI8Uz4ge1xuIiArCisJCQkJIiAgICAgICB9XG4iKworCQkJCSIgICB9XG4iICsgCisJCQkJ
In1cbiIgKyAKKwkJCQkiY2xhc3MgT3V0ZXIyIDxUPiB7XG4iICsgCisJCQkJIglwdWJsaWMgY2xh
c3MgSW5uZXIge1xuIiArCisJCQkJIiAgICAgICBwdWJsaWMgY2xhc3MgRGVlcGVyPFM+IHt9XG4i
ICsKKwkJCQkiICAgfVxuIiArIAorCQkJCSJ9XG4iICsgCisJCQkJImNsYXNzIE91dGVyMyA8VD4g
e1xuIiArIAorCQkJCSIJcHVibGljIGNsYXNzIElubmVyPEssIFY+IHtcbiIgKworCQkJCSIgICAg
ICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7fVxuIiArCisJCQkJIiAgIH1cbiIgKyAKKwkJCQki
fVxuIiArIAorCQkJCSJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSlcbiIgKworCQkJCSJAaW50ZXJmYWNlIE1hcmtlcjEge31cbiIgKworCQkJCSJAVGFy
Z2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJ
CSJAaW50ZXJmYWNlIE1hcmtlcjIge31cbiIgCisJCQkJOworCQlDb21waWxhdGlvblVuaXQgY3Ug
PSAoQ29tcGlsYXRpb25Vbml0KSBidWlsZEFTVCgKKwkJCQljb250ZW50cywKKwkJCQl0aGlzLndv
cmtpbmdDb3B5KTsKKwkJaW50IHRDb3VudCA9IDA7CisJCQorCQkvLyBjYXNlIDE6IHZhbmlsbGEg
Y2FzZSB3aXRob3V0IGFubm90YXRpb25zIGFuZCB3aXRoIHNpbmdsZSB0eXBlQXJndW1lbnQgCisJ
CS8vIE91dGVyLklubmVyLkRlZXBlcjxEb3VibGU+CisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlZGVj
bGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJ
UGFyYW1ldGVyaXplZFR5cGUgcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkg
dHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCUxpc3QgdHlw
ZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRF
cXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBh
cmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyLklubmVyLkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQlUeXBlIHR5cGUgPSAoVHlw
ZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50
b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3Nl
cnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSAo
U2ltcGxlVHlwZSl0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkRlZXBlciIsIHNp
bXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCU5hbWUgbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgp
OworCQlhc3NlcnRUcnVlKG5hbWUuaXNRdWFsaWZpZWROYW1lKCkpOworCQlRdWFsaWZpZWROYW1l
IHF1YWxpZmllZE5hbWUgPSAoUXVhbGlmaWVkTmFtZSkgbmFtZTsKKwkJYXNzZXJ0RXF1YWxzKCJP
dXRlci5Jbm5lci5EZWVwZXIiLCBxdWFsaWZpZWROYW1lLnRvU3RyaW5nKCkpOworCQkKKwkJLy8g
Y2FzZSAyIC0gT25lIGFubm90YXRpb24gYWZ0ZXIgdGhlIGZpcnN0IGNsYXNzIAorCQkvLyBPdXRl
ci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5
cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5
cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5
cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJn
dW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBh
cmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4iLCBw
YXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXpl
KCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2Vy
dEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXpl
ZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOwor
CQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJ
YXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lci5EZWVwZXIiLCBxdWFsaWZpZWRUeXBl
LnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2Vy
dEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0g
cXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNp
emUoKSA9PSAwKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVh
bGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7
CisJCXF1YWxpZmllZFR5cGUgID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCBxdWFsaWZpZXJUeXBlLnRvU3RyaW5n
KCkpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNBbm5vdGF0YWJsZSgpKTsKKwkJQW5u
b3RhdGFibGVUeXBlIGFubm90YXRhYmxlVHlwZSA9IChBbm5vdGF0YWJsZVR5cGUpIHF1YWxpZmll
clR5cGU7CisJCWFubm90YXRpb25zID0gYW5ub3RhdGFibGVUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlBbm5vdGF0aW9uIGFubm90
YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsK
KwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSl0eXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJCisJCS8vIGNh
c2UgMyAtIElubmVyIHR5cGVzIGFubm90YXRlZCB3aXRoIG91dGVyIG5vdCBhbm5vdGF0ZWQgd2l0
aCBsYXN0IHR5cGUgYXJnIAorCQkvLyBPdXRlci4gQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVl
cGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1RO
b2RlKGN1LHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlw
ZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVB
cmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1
YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJh
bWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRl
ci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5
cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJ
dHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3Vi
bGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBl
KCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5
cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2Vy
MSBJbm5lci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQlu
YW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixu
YW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlv
bnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRp
b24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBN
YXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFs
aWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNR
dWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlICA9IChRdWFsaWZpZWRUeXBlKSBxdWFs
aWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyIiwgcXVhbGlm
aWVyVHlwZS50b1N0cmluZygpKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzQW5ub3Rh
dGFibGUoKSk7CisJCWFubm90YXRhYmxlVHlwZSA9IChBbm5vdGF0YWJsZVR5cGUpIHF1YWxpZmll
clR5cGU7CisJCWFubm90YXRpb25zID0gYW5ub3RhdGFibGVUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFu
bm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIs
IGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUo
KTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVU
eXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpdHlwZTsKKwkJYXNzZXJ0RXF1YWxz
KCJPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CQkKKwkJCisJCS8vIGNhc2UgNCAtIG9u
ZSBhbm5vdGF0aW9uIG9uIHRoZSBvdXRlcm1vc3QsIG9uZSBpbiBtaWRkbGUgYW5kIG9uZSB0eXBl
YXJnIGluIGlubmVybW9zdAorIAkJLy8gQE1hcmtlcjEgT3V0ZXIuIEBNYXJrZXIyIElubmVyLiBE
ZWVwZXI8RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFT
VE5vZGUoY3UsdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRU
eXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlw
ZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRF
cXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBh
cmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBN
YXJrZXIxIE91dGVyLkBNYXJrZXIyIElubmVyLkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVk
VHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOwor
CQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRv
dWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5
cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVk
VHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91
dGVyLkBNYXJrZXIyIElubmVyLkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJ
CW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIi
LG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0
aW9ucygpOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxp
ZmllZFR5cGUgID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIiLCBxdWFsaWZpZXJUeXBlLnRvU3RyaW5n
KCkpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNBbm5vdGF0YWJsZSgpKTsKKwkJYW5u
b3RhdGFibGVUeXBlID0gKEFubm90YXRhYmxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYW5ub3Rh
dGlvbnMgPSBhbm5vdGF0YWJsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5v
dGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3Rh
dGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0
cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVh
bHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBs
ZVR5cGUgPSAoU2ltcGxlVHlwZSl0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVy
Iiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsJCQorCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJ
CWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJCisJCS8vIGNhc2Ug
NSAtIHdpdGhvdXQgYW5ub3RhdGlvbnMsIGJ1dCB3aXRoIHR5cGVhcmdzIGF0IHNlY29uZCBhbmQg
dGhpcmQgdHlwZXMKKwkJLy8gT3V0ZXIxLiBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4g
CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSx0Q291
bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNs
YXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0g
cGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBl
QXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5
cGUpdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyPElu
dGVnZXI+LkRlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJ
dHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3Nl
cnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVB
cmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmco
KSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBl
KSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLCBx
dWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1l
KCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0
aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRR
dWFsaWZpZXIoKTsJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVk
VHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlm
aWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0
cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0g
MSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBl
LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxl
VHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQluYW1lID0gc2ltcGxlVHlwZS5nZXROYW1lKCk7
CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUoKSk7CisJCXF1YWxpZmllZE5hbWUg
PSAoUXVhbGlmaWVkTmFtZSkgbmFtZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXIiLCBx
dWFsaWZpZWROYW1lLnRvU3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSA2IC0gQW5ub3QgaW4gYmV0
d2VlbiB0d28gUFFSVCB3aXRoIG91dGVybW9zdCBuZWl0aGVyIGFubm90YXRlZCBub3IgaGF2aW5n
IHR5cGVhcmdzCisJCS8vIE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIEBNYXJrZXIxIERlZXBlcjxE
b3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUo
Y3UsdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0
eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3Vt
ZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMo
MSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRl
cml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5J
bm5lcjxJbnRlZ2VyPi5ATWFya2VyMSBEZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUu
dG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlw
ZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUi
LCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50
ZWdlcj4uQE1hcmtlcjEgRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFt
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFt
ZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25z
KCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9u
ID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFy
a2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlm
aWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQorCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQ
YXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVk
VHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdl
cj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50
cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJh
bWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgp
KTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQluYW1lID0gc2ltcGxlVHlw
ZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUoKSk7CisJCXF1
YWxpZmllZE5hbWUgPSAoUXVhbGlmaWVkTmFtZSkgbmFtZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRl
cjEuSW5uZXIiLCBxdWFsaWZpZWROYW1lLnRvU3RyaW5nKCkpOworCQkKKwkJLy8gY2FzZSA3IC0g
T3V0ZXJtb3N0IHN0aWxsIGVtcHR5IChubyBhbm5vdGF0aW9ucywgbm8gdHlwZSBhcmdzKSwgZm9s
bG93ZWQgYnkgYW5ub3RhdGlvbiwgYW5kIHRoZW4gdHlwZWFyZ3MKKwkJLy8gT3V0ZXIxLiBATWFy
a2VyMSBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0g
KFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
cGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgw
KTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuQE1hcmtlcjEgSW5uZXI8SW50ZWdlcj4uRGVlcGVy
PERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRz
ID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFy
Z3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9
IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZp
ZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIxLkBNYXJrZXIxIElubmVyPEludGVnZXI+LkRlZXBlciIsIHF1YWxp
ZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsK
KwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25z
ID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25z
LnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1YWxp
ZmllcigpOwkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBl
KCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJU
eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5ATWFya2VyMSBJbm5lcjxJbnRlZ2VyPiIsIHBh
cmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUo
KSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXpl
ZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOwor
CQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygi
T3V0ZXIxLkBNYXJrZXIxIElubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJYW5u
b3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5u
b3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90
YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9T
dHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1
ZShuYW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9T
dHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3Nl
cnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUp
IHR5cGU7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShuYW1l
LmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEiLCBuYW1lLnRvU3RyaW5n
KCkpOworCQkKKwkJLy8gY2FzZSA4IC0gU2ltaWxhciB0byBhYm92ZSwgYnV0IHdpdGggdGhlIG1h
am9yIGRpZmZlcmVuY2Ugb2YgYW5ub3RhdGlvbiBzaGlmdGVkIHRvIG91dGVybW9zdC4KKwkJLy8g
QE1hcmtlcjEgT3V0ZXIxLiBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRl
Y2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LHRDb3VudCsrKTsKKwkJ
cGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1
cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMu
c2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJn
dW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuSW5uZXI8SW50
ZWdlcj4uRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyPEludGVnZXI+LkRl
ZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBl
LmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJ
CWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVl
KGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRU
eXBlLmdldFF1YWxpZmllcigpOwkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFt
ZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lcjxJ
bnRlZ2VyPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMg
PSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJn
dW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgw
KTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9
IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZp
ZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmlu
ZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQluYW1lID0gcXVhbGlmaWVkVHlw
ZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5hbWUoKSk7CisJCWFzc2Vy
dEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcXVhbGlmaWVkVHlw
ZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJ
c2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5
cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7
CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3Nl
cnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJbmFtZSA9IHNp
bXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyMSIsIG5hbWUudG9TdHJpbmcoKSk7CisJCQkJCisJCS8vIGNh
c2UgOTogc2NlbmFyaW8gb2YgdGhlIGFib3ZlIGNhc2UgcGx1cyBhbm90aGVyIGFubm90YXRpb24g
YXQgbWlkLWxldmVsLgorCQkvLyBATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdl
cj4uIERlZXBlcjxEb3VibGU+IAorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9u
KWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0
ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7
CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJ
YXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlw
ZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4uRGVlcGVyPERvdWJs
ZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50
cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJ
CWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFt
ZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBl
KCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyPEludGVnZXI+LkRlZXBlciIsIHF1
YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUo
KTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRp
b25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9ICBxdWFsaWZpZWRUeXBlLmdldFF1
YWxpZmllcigpOwkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRU
eXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZp
ZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5ATWFya2VyMiBJbm5lcjxJ
bnRlZ2VyPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMg
PSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJn
dW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgw
KTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9
IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZp
ZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFz
c2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyIiwgcXVhbGlmaWVkVHlw
ZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25z
KCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9u
ID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFy
a2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdl
dE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShuYW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1
YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBxdWFsaWZpZWRUeXBlLmdl
dFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1w
bGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5h
bm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJ
YW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQluYW1lID0gc2ltcGxl
VHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBsZU5hbWUoKSk7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIxIiwgbmFtZS50b1N0cmluZygpKTsKKwkJCQkKKwkJLy8gY2FzZSAx
MCAtIFBRUlQgd2l0aCB0d28gdHlwZSBhcmdzIGJ1dCB3aXRob3V0IGFubm90YXRpb25zCisJCS8v
IE91dGVyMjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPiAKKwkJdHlwZWRlY2xhcmF0aW9u
ID0gKFR5cGVEZWNsYXJhdGlvbilnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRy
aXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVy
ZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50
eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7
CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpdHlwZUFyZ3VtZW50cy5n
ZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LklubmVyLkRlZXBlcjxEb3Vi
bGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVu
dHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJh
bWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlw
ZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRF
cXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3Ry
aW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFs
cygiRGVlcGVyIixuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5
cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7
CisJCXF1YWxpZmllclR5cGUgPSAgcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsJCQkKKwkJ
YXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVk
VHlwZSA9IChRdWFsaWZpZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91
dGVyMjxJbnRlZ2VyPi5Jbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUg
ID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1l
LnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZp
ZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7
CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7
CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJ
YXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0
cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRF
cXVhbHMoIk91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CisJCQorCisJCS8vIGNhc2UgMTEgLSBh
bm5vdGF0aW9uIGF0IG91dGVybW9zdCBpbiBhZGRpdGlvbiB0byBzY2VuYXJpbyBpbiBjYXNlIDEw
LgorCQkvLyBATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4gCisJ
CXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50
KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFy
YXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFy
Z3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KXR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMjxJ
bnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmco
KSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBl
KSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRv
U3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2Vy
dFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlm
aWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4u
SW5uZXIuRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmlu
ZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gIHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4u
SW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lICA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsK
KwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2Vy
dFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6
ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1l
bnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlw
ZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5n
ZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5
cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2Vy
MSBPdXRlcjIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNBbm5vdGF0
YWJsZSgpKTsKKwkJYW5ub3RhdGFibGVUeXBlID0gKEFubm90YXRhYmxlVHlwZSkgdHlwZTsKKwkJ
YW5ub3RhdGlvbnMgPSBhbm5vdGF0YWJsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1
ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikg
YW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlv
bi50b1N0cmluZygpKTsKKwkJCQkKKwkJLy8gY2FzZSAxMiAtIE5vIGFubm90YXRpb25zIGF0IG91
dGVybW9zdCwgYnV0IG91dGVybW9zdCBoYXMgdHlwZUFubm90YXRpb25zLgorCQkvLyBPdXRlcjI8
SW50ZWdlcj4uIEBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+IAorCQl0eXBl
ZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKWdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsK
KwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9u
LnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0
cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVu
dHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSl0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uQE1hcmtl
cjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3Ry
aW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRz
KCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAo
VHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlw
ZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlh
c3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1
YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJr
ZXIxIElubmVyLkBNYXJrZXIyIERlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJ
CW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIi
LG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0
aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3Rh
dGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygi
QE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gIHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CQkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uQE1hcmtlcjEg
SW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lICA9IHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRy
dWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24p
IGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRp
b24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxp
ZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgp
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOwor
CQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUp
IHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBlLnRv
U3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2Vy
dEVxdWFscygiT3V0ZXIyIiwgdHlwZS50b1N0cmluZygpKTsJCQorCisJCS8vIGNhc2UgMTMgLSBh
IGxpc3Qgb2YgYW5ub3RhdGlvbnMgYW5kIG11bHRpcGxlIHR5cGVBcmd1bWVudCBlbGVtZW50IGxp
c3RzLgorCQkvLyBPdXRlcjM8RG91YmxlPi4gQE1hcmtlcjEgQE1hcmtlcjIgSW5uZXI8SW50ZWdl
ciwgQ2hhcmFjdGVyPi4gRGVlcGVyPERvdWJsZT4gCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBl
RGVjbGFyYXRpb24pZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBl
ID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBl
cygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJh
bWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKXR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyMzxEb3VibGU+LkBNYXJrZXIxIEBNYXJrZXIyIElubmVyPElu
dGVnZXIsQ2hhcmFjdGVyPi5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjM8RG91YmxlPi5ATWFya2Vy
MSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLENoYXJhY3Rlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlw
ZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3Nl
cnRFcXVhbHMoIkRlZXBlciIsbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFs
aWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgp
ID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gIHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CQkJCisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOwor
CQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOwor
CQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFz
c2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMik7CisJCWFzc2VydEVxdWFscygiSW50
ZWdlciIsIHR5cGVBcmd1bWVudHMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlhc3NlcnRFcXVhbHMo
IkNoYXJhY3RlciIsIHR5cGVBcmd1bWVudHMuZ2V0KDEpLnRvU3RyaW5nKCkpOworCQl0eXBlID0g
cGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmll
ZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNz
ZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOwor
CQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1
ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMik7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBh
bm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIi
LCBhbm5vdGF0aW9ucy5nZXQoMSkudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFs
aWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQ
YXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVk
VHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEp
OworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGVBcmd1bWVudHMuZ2V0KDApLnRvU3RyaW5n
KCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUo
dHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjMiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCX0KIH0K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20v
QVNUTWF0Y2hlclRlc3QuamF2YQppbmRleCBhZDBjNmIwLi5jZjM5ZjBkIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVy
VGVzdC5qYXZhCkBAIC0xMzQ3LDQgKzEzNDcsMzMgQEAKIAkJeDEudmFyYXJnc0Fubm90YXRpb25z
KCkuYWRkKHRoaXMuQU5PMSk7CiAJCWJhc2ljTWF0Y2goeDEpOwogCX0KKwkKKwkvLyBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJcHVibGljIHZv
aWQgdGVzdFF1YWxpZmllZFR5cGVBbm5vdGF0aW9uKCkgeworCQlpZiAodGhpcy5hc3QuYXBpTGV2
ZWwoKSA8IEFTVC5KTFM4KSB7CisJCQlyZXR1cm47CisJCX0KKwkJUXVhbGlmaWVkVHlwZSB4MSA9
IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5OMSk7CisJCXgxLmFubm90
YXRpb25zKCkuYWRkKHRoaXMuQU5PMSk7CisJCXgxID0gdGhpcy5hc3QubmV3UXVhbGlmaWVkVHlw
ZSh4MSwgdGhpcy5OMik7CisJCXgxLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJCWJh
c2ljTWF0Y2goeDEpOworCX0KKwkKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9z
aG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJcHVibGljIHZvaWQgdGVzdFBhcmFtZXRlcml6ZWRRdWFs
aWZpZWRUeXBlQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsKCkgPCBBU1Qu
SkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9
IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5OMSk7IAorCQlxdWFsaWZp
ZWRUeXBlLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMSk7CisJCVBhcmFtZXRlcml6ZWRUeXBl
IHgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUocXVhbGlmaWVkVHlwZSk7CisJCXgx
LnR5cGVBcmd1bWVudHMoKS5hZGQodGhpcy5hc3QubmV3U2ltcGxlVHlwZSh0aGlzLmFzdC5uZXdT
aW1wbGVOYW1lKCJTTjEiKSkpOworCQlxdWFsaWZpZWRUeXBlID0gdGhpcy5hc3QubmV3UXVhbGlm
aWVkVHlwZSh4MSwgdGhpcy5OMik7CisJCXgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5
cGUocXVhbGlmaWVkVHlwZSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IHRoaXMuYXN0Lm5l
d1NpbXBsZVR5cGUodGhpcy5hc3QubmV3U2ltcGxlTmFtZSgiU04yIikpOworCQlzaW1wbGVUeXBl
LmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJCXgxLnR5cGVBcmd1bWVudHMoKS5hZGQo
c2ltcGxlVHlwZSk7CisJCWJhc2ljTWF0Y2goeDEpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVy
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVENvbnZlcnRlci5qYXZhCmluZGV4IGQ4ODY4NmEuLmJhMTRjYmMgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVy
dGVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9j
b3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQpAQCAtMjczMyw3ICsyNzMzLDcgQEAKIAkJCS8vIFF1
YWxpZmllZE5hbWUKIAkJCW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlID0gKG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJl
ZmVyZW5jZTsKIAkJCWZpbmFsIGxvbmdbXSBwb3NpdGlvbnMgPSBxdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLnNvdXJjZVBvc2l0aW9uczsKLQkJCXJldHVybiBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNv
dXJjZVJhbmdlcyh0eXBlTmFtZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlLCB0eXBlUmVmZXJl
bmNlLmFubm90YXRpb25zKTsKKwkJCXJldHVybiBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJj
ZVJhbmdlcyh0eXBlTmFtZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlKTsKIAkJfSBlbHNlIHsK
IAkJCWZpbmFsIFNpbXBsZU5hbWUgbmFtZSA9IG5ldyBTaW1wbGVOYW1lKHRoaXMuYXN0KTsKIAkJ
CW5hbWUuaW50ZXJuYWxTZXRJZGVudGlmaWVyKG5ldyBTdHJpbmcodHlwZU5hbWVbMF0pKTsKQEAg
LTI3NDEsMTAgKzI3NDEsNiBAQAogCQkJbmFtZS5pbmRleCA9IDE7CiAJCQlpZiAodGhpcy5yZXNv
bHZlQmluZGluZ3MpIHsKIAkJCQlyZWNvcmROb2RlcyhuYW1lLCB0eXBlUmVmZXJlbmNlKTsKLQkJ
CX0KLQkJCW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbltd
IGFubm90YXRpb25zOwotCQkJaWYgKHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAm
JiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7
Ci0JCQkJYW5ub3RhdGVOYW1lKG5hbWUsIGFubm90YXRpb25zKTsKIAkJCX0KIAkJCXJldHVybiBu
YW1lOwogCQl9CkBAIC0zMDkwLDI3ICszMDg2LDcgQEAKIAkJCQl9CiAJCX0KIAl9Ci0JcHJpdmF0
ZSB2b2lkIGFubm90YXRlTmFtZShOYW1lIG5hbWUsIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5hc3QuQW5ub3RhdGlvbltdIGFubm90YXRpb25zKSB7Ci0JCXN3aXRjaCh0aGlzLmFz
dC5hcGlMZXZlbCkgewotCQkJY2FzZSBBU1QuSkxTMl9JTlRFUk5BTCA6Ci0JCQljYXNlIEFTVC5K
TFMzX0lOVEVSTkFMIDoKLQkJCWNhc2UgQVNULkpMUzQ6Ci0JCQkJbmFtZS5zZXRGbGFncyhuYW1l
LmdldEZsYWdzKCkgfCBBU1ROb2RlLk1BTEZPUk1FRCk7Ci0JCQkJYnJlYWs7Ci0JCQlkZWZhdWx0
OgotCQkJCWludCBhbm5vdGF0aW9uc0xlbmd0aCA9IGFubm90YXRpb25zLmxlbmd0aDsKLQkJCQlm
b3IgKGludCBpID0gMDsgaSA8IGFubm90YXRpb25zTGVuZ3RoOyBpKyspIHsKLQkJCQkJb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uIHR5cGVBbm5vdGF0aW9u
ID0gYW5ub3RhdGlvbnNbaV07Ci0JCQkJCWlmICh0eXBlQW5ub3RhdGlvbiAhPSBudWxsKSB7Ci0J
CQkJCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSBjb252ZXJ0KHR5cGVBbm5vdGF0aW9uKTsKLQkJ
CQkJCWludCBzdGFydCA9IHR5cGVBbm5vdGF0aW9uLnNvdXJjZVN0YXJ0OwotCQkJCQkJaW50IGVu
ZCA9IHR5cGVBbm5vdGF0aW9uLnNvdXJjZUVuZDsKLQkJCQkJCWFubm90YXRpb24uc2V0U291cmNl
UmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7Ci0JCQkJCQluYW1lLmFubm90YXRpb25zLmFk
ZChhbm5vdGF0aW9uKTsKLQkJCQkJfQotCQkJCX0KLQkJfQotCX0KKwogCXByaXZhdGUgdm9pZCBh
bm5vdGF0ZVR5cGVQYXJhbWV0ZXIoVHlwZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyLCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb25bXSBhbm5vdGF0aW9ucykg
ewogCQlzd2l0Y2godGhpcy5hc3QuYXBpTGV2ZWwpIHsKIAkJCWNhc2UgQVNULkpMUzJfSU5URVJO
QUwgOgpAQCAtMzI4OCw2ICszMjY0LDcgQEAKIAkJCQlQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSA9IChQYXJhbWV0
ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZTsKIAkJCQljaGFyW11b
XSB0b2tlbnMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50b2tlbnM7CiAJ
CQkJVHlwZVJlZmVyZW5jZVtdW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6ZWRRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlLnR5cGVBcmd1bWVudHM7CisJCQkJb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uW11bXSB0eXBlQW5ub3RhdGlvbnMgPSBwYXJhbWV0
ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uczsKIAkJCQlsb25nW10gcG9z
aXRpb25zID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlUG9zaXRp
b25zOwogCQkJCXNvdXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIpOwogCQkJCXN3
aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewpAQCAtMzI5Niw3ICszMjczLDcgQEAKIAkJCQkJCWlu
dCBuYW1lTGVuZ3RoID0gbmFtZS5sZW5ndGg7CiAJCQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBv
c2l0aW9uc1swXT4+PjMyKTsKIAkJCQkJCWxlbmd0aCA9IChpbnQpKHBvc2l0aW9uc1tuYW1lTGVu
Z3RoIC0gMV0gJiAweEZGRkZGRkZGKSAtIHNvdXJjZVN0YXJ0ICsgMTsKLQkJCQkJCU5hbWUgcXVh
bGlmaWVkTmFtZSA9IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXMobmFt
ZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlLCB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zKTsK
KwkJCQkJCU5hbWUgcXVhbGlmaWVkTmFtZSA9IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRT
b3VyY2VSYW5nZXMobmFtZSwgcG9zaXRpb25zLCB0eXBlUmVmZXJlbmNlKTsKIAkJCQkJCWZpbmFs
IFNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKIAkJCQkJ
CXNpbXBsZVR5cGUuc2V0TmFtZShxdWFsaWZpZWROYW1lKTsKIAkJCQkJCXNpbXBsZVR5cGUuc2V0
U291cmNlUmFuZ2Uoc291cmNlU3RhcnQsIGxlbmd0aCk7CkBAIC0zMzA1LDE1ICszMjgyLDMyIEBA
CiAJCQkJCX0KIAkJCQkJYnJlYWs7CiAJCQkJCWRlZmF1bHQgOgorCQkJCQkJLy8gaHR0cHM6Ly9i
dWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NgogCQkJCQkJaWYgKHR5
cGVBcmd1bWVudHMgIT0gbnVsbCkgewotCQkJCQkJCWludCBudW1iZXJPZkVuY2xvc2luZ1R5cGUg
PSAwOwogCQkJCQkJCWludCBzdGFydGluZ0luZGV4ID0gMDsKIAkJCQkJCQlpbnQgZW5kaW5nSW5k
ZXggPSAwOworCQkJCQkJCWludCBudW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAwOworCiAJCQkJCQkJ
Zm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOyBpIDwgbWF4OyBpKysp
IHsKIAkJCQkJCQkJaWYgKHR5cGVBcmd1bWVudHNbaV0gIT0gbnVsbCkgewogCQkJCQkJCQkJbnVt
YmVyT2ZFbmNsb3NpbmdUeXBlKys7CiAJCQkJCQkJCX0gZWxzZSBpZiAobnVtYmVyT2ZFbmNsb3Np
bmdUeXBlID09IDApIHsKIAkJCQkJCQkJCWVuZGluZ0luZGV4Kys7CisJCQkJCQkJCX0KKwkJCQkJ
CQl9CisJCQkJCQkJaWYgKHR5cGVBbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQkJCQkJCWludCBh
bm5vdF9lbmRpbmdJbmRleCA9IC0xOworCQkJCQkJCQludW1iZXJPZkVuY2xvc2luZ1R5cGUgPSAw
OworCQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFubm90YXRpb25zLmxlbmd0aDsg
aSA8IG1heDsgaSsrKSB7CisJCQkJCQkJCQlpZiAodHlwZUFubm90YXRpb25zW2ldICE9IG51bGwp
IHsKKwkJCQkJCQkJCQludW1iZXJPZkVuY2xvc2luZ1R5cGUrKzsKKwkJCQkJCQkJCX0gZWxzZSBp
ZiAobnVtYmVyT2ZFbmNsb3NpbmdUeXBlID09IDApIHsKKwkJCQkJCQkJCQlhbm5vdF9lbmRpbmdJ
bmRleCsrOworCQkJCQkJCQkJfQorCQkJCQkJCQl9CQkJCQkKKwkJCQkJCQkJZW5kaW5nSW5kZXgg
PSAoYW5ub3RfZW5kaW5nSW5kZXggPCBlbmRpbmdJbmRleCkgPyBhbm5vdF9lbmRpbmdJbmRleCA6
IGVuZGluZ0luZGV4OworCQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggPCAwKSB7CisJCQkJCQkJCQll
bmRpbmdJbmRleCA9IDA7CiAJCQkJCQkJCX0KIAkJCQkJCQl9CiAJCQkJCQkJTmFtZSBuYW1lID0g
bnVsbDsKQEAgLTMzMzcsMjkgKzMzMzEsMzUgQEAKIAkJCQkJCQlpbnQgc3RhcnQgPSAoaW50KShw
b3NpdGlvbnNbc3RhcnRpbmdJbmRleF0+Pj4zMik7CiAJCQkJCQkJaW50IGVuZCA9IChpbnQpIHBv
c2l0aW9uc1tlbmRpbmdJbmRleF07CiAJCQkJCQkJc2ltcGxlVHlwZS5zZXRTb3VyY2VSYW5nZShz
dGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggPT0gMCAmJiB0
eXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJl
ZmVyZW5jZS5hbm5vdGF0aW9uc1swXSkgIT0gbnVsbCkgeworCQkJCQkJCWlmICh0eXBlUmVmZXJl
bmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZVJlZmVyZW5jZS5h
bm5vdGF0aW9uc1tlbmRpbmdJbmRleF0pICE9IG51bGwpIHsKIAkJCQkJCQkJYW5ub3RhdGVUeXBl
KHNpbXBsZVR5cGUsIGFubm90YXRpb25zKTsKIAkJCQkJCQl9Ci0JCQkJCQkJUGFyYW1ldGVyaXpl
ZFR5cGUgcGFyYW1ldGVyaXplZFR5cGUgPSBuZXcgUGFyYW1ldGVyaXplZFR5cGUodGhpcy5hc3Qp
OwotCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFR5cGUoc2ltcGxlVHlwZSk7Ci0JCQkJCQkJ
aWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7Ci0JCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZVR5
cGUsIHR5cGVSZWZlcmVuY2UpOwotCQkJCQkJCQlyZWNvcmROb2RlcyhwYXJhbWV0ZXJpemVkVHlw
ZSwgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJCQkJfQotCQkJCQkJCXN0YXJ0ID0gc2ltcGxlVHlwZS5n
ZXRTdGFydFBvc2l0aW9uKCk7Ci0JCQkJCQkJZW5kID0gc3RhcnQgKyBzaW1wbGVUeXBlLmdldExl
bmd0aCgpIC0gMTsKLQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFyZ3VtZW50c1tl
bmRpbmdJbmRleF0ubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKLQkJCQkJCQkJZmluYWwgVHlwZSB0
eXBlMiA9IGNvbnZlcnRUeXBlKHR5cGVBcmd1bWVudHNbZW5kaW5nSW5kZXhdW2ldKTsKLQkJCQkJ
CQkJcGFyYW1ldGVyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0eXBlMik7Ci0JCQkJCQkJ
CWVuZCA9IHR5cGUyLmdldFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdldExlbmd0aCgpIC0gMTsK
LQkJCQkJCQl9CiAJCQkJCQkJaW50IGluZGV4T2ZFbmNsb3NpbmdUeXBlID0gMTsKLQkJCQkJCQlw
YXJhbWV0ZXJpemVkVHlwZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOwotCQkJCQkJCWVu
ZCA9IHJldHJpZXZlQ2xvc2luZ0FuZ2xlQnJhY2tldFBvc2l0aW9uKGVuZCArIDEpOwotCQkJCQkJ
CWxlbmd0aCA9IGVuZCArIDE7Ci0JCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0U291cmNlUmFu
Z2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CisJCQkJCQkJVHlwZSBjdXJyZW50VHlwZSA9IHNp
bXBsZVR5cGU7CisJCQkJCQkJUXVhbGlmaWVkVHlwZSBxdWFsaWZpZWRUeXBlOworCQkJCQkJCWlm
ICh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XSAhPSBudWxsKSB7CisJCQkJCQkJCVBhcmFtZXRl
cml6ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFtZXRlcml6ZWRUeXBlKHRoaXMu
YXN0KTsKKwkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0VHlwZShzaW1wbGVUeXBlKTsKKwkJ
CQkJCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7CisJCQkJCQkJCQlyZWNvcmROb2Rlcyhz
aW1wbGVUeXBlLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCQkJCXJlY29yZE5vZGVzKHBhcmFtZXRl
cml6ZWRUeXBlLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCQkJfQorCQkJCQkJCQlzdGFydCA9IHNp
bXBsZVR5cGUuZ2V0U3RhcnRQb3NpdGlvbigpOworCQkJCQkJCQllbmQgPSBzdGFydCArIHNpbXBs
ZVR5cGUuZ2V0TGVuZ3RoKCkgLSAxOworCQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlw
ZUFyZ3VtZW50c1tlbmRpbmdJbmRleF0ubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKKwkJCQkJCQkJ
CWZpbmFsIFR5cGUgdHlwZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4
XVtpXSk7CisJCQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS50eXBlQXJndW1lbnRzKCkuYWRkKHR5
cGUyKTsKKwkJCQkJCQkJCWVuZCA9IHR5cGUyLmdldFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdl
dExlbmd0aCgpIC0gMTsKKwkJCQkJCQkJfQkJCQkJCQkJCisJCQkJCQkJCWluZGV4T2ZFbmNsb3Np
bmdUeXBlID0gMTsKKwkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuaW5kZXggPSBpbmRleE9mRW5j
bG9zaW5nVHlwZTsKKwkJCQkJCQkJZW5kID0gcmV0cmlldmVDbG9zaW5nQW5nbGVCcmFja2V0UG9z
aXRpb24oZW5kICsgMSk7CisJCQkJCQkJCWxlbmd0aCA9IGVuZCArIDE7CisJCQkJCQkJCXBhcmFt
ZXRlcml6ZWRUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJ
CQkJCQljdXJyZW50VHlwZSA9IHBhcmFtZXRlcml6ZWRUeXBlOworCQkJCQkJCX0KIAkJCQkJCQlz
dGFydGluZ0luZGV4ID0gZW5kaW5nSW5kZXggKyAxOwotCQkJCQkJCVR5cGUgY3VycmVudFR5cGUg
PSBwYXJhbWV0ZXJpemVkVHlwZTsKKwogCQkJCQkJCXdoaWxlKHN0YXJ0aW5nSW5kZXggPCB0eXBl
QXJndW1lbnRzLmxlbmd0aCkgewogCQkJCQkJCQlTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcg
U2ltcGxlTmFtZSh0aGlzLmFzdCk7CiAJCQkJCQkJCXNpbXBsZU5hbWUuaW50ZXJuYWxTZXRJZGVu
dGlmaWVyKG5ldyBTdHJpbmcodG9rZW5zW3N0YXJ0aW5nSW5kZXhdKSk7CkBAIC0zMzY4LDcgKzMz
NjgsNyBAQAogCQkJCQkJCQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CiAJ
CQkJCQkJCXNpbXBsZU5hbWUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7
CiAJCQkJCQkJCXJlY29yZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUpOwot
CQkJCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0
aGlzLmFzdCk7CisJCQkJCQkJCXF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlz
LmFzdCk7CiAJCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0UXVhbGlmaWVyKGN1cnJlbnRUeXBlKTsK
IAkJCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOwogCQkJCQkJCQlpZiAo
dHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnNbc3RhcnRpbmdJbmRleF0pICE9IG51bGwpIHsKQEAgLTM0MTMs
MTYgKzM0MTMsOTkgQEAKIAkJCQkJCX0KIAkJCQl9CiAJCQl9IGVsc2UgaWYgKHR5cGVSZWZlcmVu
Y2UgaW5zdGFuY2VvZiBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UpIHsKLQkJCQljaGFyW11bXSBuYW1lID0gKChvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZl
cmVuY2UpLmdldFR5cGVOYW1lKCk7Ci0JCQkJaW50IG5hbWVMZW5ndGggPSBuYW1lLmxlbmd0aDsK
LQkJCQlsb25nW10gcG9zaXRpb25zID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGls
ZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnNvdXJjZVBvc2l0
aW9uczsKLQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMyKTsKLQkJCQls
ZW5ndGggPSAoaW50KShwb3NpdGlvbnNbbmFtZUxlbmd0aCAtIDFdICYgMHhGRkZGRkZGRikgLSBz
b3VyY2VTdGFydCArIDE7Ci0JCQkJZmluYWwgTmFtZSBxdWFsaWZpZWROYW1lID0gdGhpcy5zZXRR
dWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyhuYW1lLCBwb3NpdGlvbnMsIHR5cGVSZWZl
cmVuY2UsIHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMpOwotCQkJCWZpbmFsIFNpbXBsZVR5cGUg
c2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKLQkJCQlzaW1wbGVUeXBlLnNl
dE5hbWUocXVhbGlmaWVkTmFtZSk7Ci0JCQkJdHlwZSA9IHNpbXBsZVR5cGU7Ci0JCQkJdHlwZS5z
ZXRTb3VyY2VSYW5nZShzb3VyY2VTdGFydCwgbGVuZ3RoKTsKKwkJCQkvLyBodHRwczovL2J1Z3Mu
ZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJCQkJaW50IGluZGV4ID0g
MDsKKwkJCQlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIHF1YWxpZmllZFR5cGVSZWZlcmVuY2UgPSAo
UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSl0eXBlUmVmZXJlbmNlOworCQkJCWNoYXJbXVtdIHRva2Vu
cyA9IHF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zOworCQkJCWludCBudW1iZXJPZkVuY2xv
c2luZ1R5cGUgPSAwOworCQkJCWludCBzdGFydGluZ0luZGV4ID0gMDsKKwkJCQlpbnQgZW5kaW5n
SW5kZXggPSAwOworCQkJCWJvb2xlYW4gaGFzQW5ub3RhdGlvbnMgPSAoKHRoaXMuYXN0LmFwaUxl
dmVsKCkgPj0gQVNULkpMUzgpICYmICh0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwp
KTsKKworCQkJCWlmIChoYXNBbm5vdGF0aW9ucykgeworCQkJCQkKKwkJCQkJZm9yICg7IChpbmRl
eCA8IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoKTsgKytpbmRleCkgeyAKKwkJCQkJ
CWlmICh0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2luZGV4XSAhPSBudWxsKSAgeworCQkJCQkJ
ICAJbnVtYmVyT2ZFbmNsb3NpbmdUeXBlKys7CisJCQkJCQl9IGVsc2UgaWYgKG51bWJlck9mRW5j
bG9zaW5nVHlwZSA9PSAwKSB7CisJCQkJCQkJZW5kaW5nSW5kZXgrKzsKKwkJCQkJCX0KKwkJCQkJ
fQorCQkJCX0KKwkJCQkKKwkJCQlpZiAoaGFzQW5ub3RhdGlvbnMgJiYgKGVuZGluZ0luZGV4IDwg
dHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucy5sZW5ndGgpKSB7CisJCQkJCQorCQkJCQlsb25nW10g
cG9zaXRpb25zID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnNvdXJjZVBvc2l0aW9uczsKKwkJCQkJ
c291cmNlU3RhcnQgPSAoaW50KShwb3NpdGlvbnNbMF0+Pj4zMik7CisJCQkJCQorCQkJCQlOYW1l
IG5hbWUgPSBudWxsOworCQkJCQlpZiAoZW5kaW5nSW5kZXggLSBzdGFydGluZ0luZGV4IDw9IDEp
IHsKKwkJCQkJCWZpbmFsIFNpbXBsZU5hbWUgc2ltcGxlTmFtZSA9IG5ldyBTaW1wbGVOYW1lKHRo
aXMuYXN0KTsKKwkJCQkJCXNpbXBsZU5hbWUuaW50ZXJuYWxTZXRJZGVudGlmaWVyKG5ldyBTdHJp
bmcodG9rZW5zWzBdKSk7CisJCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihz
aW1wbGVOYW1lKTsKKwkJCQkJCWludCBzdGFydCA9IChpbnQpKHBvc2l0aW9uc1tzdGFydGluZ0lu
ZGV4XT4+PjMyKTsKKwkJCQkJCWludCBlbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRl
eF07CisJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCAr
IDEpOworCQkJCQkJc2ltcGxlTmFtZS5pbmRleCA9IDE7CisJCQkJCQluYW1lID0gc2ltcGxlTmFt
ZTsKKwkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJCXJlY29yZE5vZGVz
KHNpbXBsZU5hbWUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJfQorCQkJCQl9IGVsc2UgeworCQkJ
CQkJbmFtZSA9IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXModG9rZW5z
LCBwb3NpdGlvbnMsIGVuZGluZ0luZGV4IC0gMSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCX0KKwkJ
CQkJCisJCQkJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0
KTsKKwkJCQkJc2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOworCQkJCQlpbnQgc3RhcnQgPSAoaW50
KShwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF0+Pj4zMik7CisJCQkJCWludCBlbmQgPSAoaW50KSBw
b3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CisJCQkJCXNpbXBsZVR5cGUuc2V0U291cmNlUmFuZ2Uo
c3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CisJCQkJCWlmIChlbmRpbmdJbmRleCA9PSAwICYmIHR5
cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVm
ZXJlbmNlLmFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7CisJCQkJCQlhbm5vdGF0ZVR5cGUoc2lt
cGxlVHlwZSwgYW5ub3RhdGlvbnMpOworCQkJCQl9CisJCQkJCXNpbXBsZVR5cGUuc2V0RmxhZ3Mo
c2ltcGxlVHlwZS5nZXRGbGFncygpIHwgQVNUTm9kZS5NQUxGT1JNRUQpOy8vVE9ETzogSXMgdGhp
cyBzdG10IHJlcWQ/CisJCQkJCVR5cGUgY3VycmVudFR5cGUgPSBzaW1wbGVUeXBlOwkJCQkgICAg
CisJCQkJCQorCQkJCQkvLyBzcGVjaWFsIGNhc2UgaWYgdGhlIGFubm90cyBhcmUgc3RhcnRpbmcg
ZnJvbSAxIGFzIDAgd291bGQgYmUgdGhlIFNULgorCQkJCQlzdGFydGluZ0luZGV4ID0gZW5kaW5n
SW5kZXggPT0gMCA/IGVuZGluZ0luZGV4ICsgMSA6IGVuZGluZ0luZGV4IDsKKwkJCQkJd2hpbGUo
c3RhcnRpbmdJbmRleCA8IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoKSB7CisJCQkJ
CQlTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CisJCQkJ
CQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tzdGFy
dGluZ0luZGV4XSkpOworCQkJCQkJc2ltcGxlTmFtZS5pbmRleCA9IHN0YXJ0aW5nSW5kZXggKyAx
OworCQkJCQkJc3RhcnQgPSAoaW50KShwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF0+Pj4zMik7CisJ
CQkJCQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07CisJCQkJCQlzaW1wbGVO
YW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOworCQkJCQkJcmVjb3Jk
UGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24oc2ltcGxlTmFtZSk7CisJCQkJCQlRdWFsaWZpZWRU
eXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCQlx
dWFsaWZpZWRUeXBlLnNldFF1YWxpZmllcihjdXJyZW50VHlwZSk7CisJCQkJCQlxdWFsaWZpZWRU
eXBlLnNldE5hbWUoc2ltcGxlTmFtZSk7CisJCQkJCQlpZiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0
aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNb
c3RhcnRpbmdJbmRleF0pICE9IG51bGwpIHsKKwkJCQkJCQlhbm5vdGF0ZVR5cGUocXVhbGlmaWVk
VHlwZSwgYW5ub3RhdGlvbnMpOworCQkJCQkJfQorCQkJCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRp
bmdzKSB7CisJCQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFtZSwgdHlwZVJlZmVyZW5jZSk7CisJ
CQkJCQkJcmVjb3JkTm9kZXMocXVhbGlmaWVkVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQl9
CisJCQkJCQlzdGFydCA9IGN1cnJlbnRUeXBlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJCQkJCWVu
ZCA9IHNpbXBsZU5hbWUuZ2V0U3RhcnRQb3NpdGlvbigpICsgc2ltcGxlTmFtZS5nZXRMZW5ndGgo
KSAtIDE7CisJCQkJCQlxdWFsaWZpZWRUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBz
dGFydCArIDEpOworCQkJCQkJY3VycmVudFR5cGUgPSBxdWFsaWZpZWRUeXBlOworCQkJCQkJcXVh
bGlmaWVkVHlwZS5pbmRleCA9IDE7Ly8gVE9ETyBOb3QgdXNlZCwganVzdCBpbml0aWFsaXppbmcg
dG8gZGVmYXVsdCBvZiAxLgorCQkJCQkJc3RhcnRpbmdJbmRleCsrOworCQkJCQl9CisJCQkJCXR5
cGUgPSBjdXJyZW50VHlwZTsKKwkJCQl9IGVsc2UgeworCQkJCQljaGFyW11bXSBuYW1lID0gKChv
cmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UpIHR5cGVSZWZlcmVuY2UpLmdldFR5cGVOYW1lKCk7CisJCQkJCWludCBuYW1lTGVuZ3RoID0g
bmFtZS5sZW5ndGg7CisJCQkJCWxvbmdbXSBwb3NpdGlvbnMgPSAoKG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5j
ZSkuc291cmNlUG9zaXRpb25zOworCQkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1sw
XT4+PjMyKTsKKwkJCQkJbGVuZ3RoID0gKGludCkocG9zaXRpb25zW25hbWVMZW5ndGggLSAxXSAm
IDB4RkZGRkZGRkYpIC0gc291cmNlU3RhcnQgKyAxOworCQkJCQlmaW5hbCBOYW1lIHF1YWxpZmll
ZE5hbWUgPSB0aGlzLnNldFF1YWxpZmllZE5hbWVOYW1lQW5kU291cmNlUmFuZ2VzKG5hbWUsIHBv
c2l0aW9ucywgdHlwZVJlZmVyZW5jZSk7CisJCQkJCWZpbmFsIFNpbXBsZVR5cGUgc2ltcGxlVHlw
ZSA9IG5ldyBTaW1wbGVUeXBlKHRoaXMuYXN0KTsKKwkJCQkJc2ltcGxlVHlwZS5zZXROYW1lKHF1
YWxpZmllZE5hbWUpOworCQkJCQl0eXBlID0gc2ltcGxlVHlwZTsKKwkJCQkJdHlwZS5zZXRTb3Vy
Y2VSYW5nZShzb3VyY2VTdGFydCwgbGVuZ3RoKTsKKwkJCQl9CiAJCQl9IGVsc2UgewogCQkJCVR5
cGVSZWZlcmVuY2VbXSB0eXBlUmVmZXJlbmNlcyA9ICgob3JnLmVjbGlwc2UuamR0LmludGVybmFs
LmNvbXBpbGVyLmFzdC5VbmlvblR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLnR5cGVSZWZl
cmVuY2VzOwogCQkJCXN3aXRjaCh0aGlzLmFzdC5hcGlMZXZlbCkgewpAQCAtNDk4MywxMiArNTA2
Niw3IEBACiAJfQogCiAJcHJvdGVjdGVkIFF1YWxpZmllZE5hbWUgc2V0UXVhbGlmaWVkTmFtZU5h
bWVBbmRTb3VyY2VSYW5nZXMoY2hhcltdW10gdHlwZU5hbWUsIGxvbmdbXSBwb3NpdGlvbnMsIG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQVNUTm9kZSBub2RlKSB7Ci0JCXJl
dHVybiBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0eXBlTmFtZSwgcG9zaXRp
b25zLCBub2RlLCBudWxsKTsKLQl9Ci0KLQlwcm90ZWN0ZWQgUXVhbGlmaWVkTmFtZSBzZXRRdWFs
aWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyhjaGFyW11bXSB0eXBlTmFtZSwgbG9uZ1tdIHBv
c2l0aW9ucywgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5BU1ROb2RlIG5v
ZGUsIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbltdW10g
YW5ub3RhdGlvbnMpIHsKLQkgICAgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFz
dC5Bbm5vdGF0aW9uW10gdHlwZUFubm90YXRpb25zOwotCQlpbnQgbGVuZ3RoID0gdHlwZU5hbWUu
bGVuZ3RoOworCSAgICBpbnQgbGVuZ3RoID0gdHlwZU5hbWUubGVuZ3RoOwogCQlmaW5hbCBTaW1w
bGVOYW1lIGZpcnN0VG9rZW4gPSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CiAJCWZpcnN0VG9r
ZW4uaW50ZXJuYWxTZXRJZGVudGlmaWVyKG5ldyBTdHJpbmcodHlwZU5hbWVbMF0pKTsKIAkJZmly
c3RUb2tlbi5pbmRleCA9IDE7CkBAIC00OTk2LDkgKzUwNzQsNiBAQAogCQlpbnQgc3RhcnQgPSBz
dGFydDA7CiAJCWludCBlbmQgPSAoaW50KShwb3NpdGlvbnNbMF0gJiAweEZGRkZGRkZGKTsKIAkJ
Zmlyc3RUb2tlbi5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJaWYg
KGFubm90YXRpb25zICE9IG51bGwgJiYgKHR5cGVBbm5vdGF0aW9ucyA9IGFubm90YXRpb25zWzBd
KSAhPSBudWxsKSB7Ci0JCQlhbm5vdGF0ZU5hbWUoZmlyc3RUb2tlbiwgdHlwZUFubm90YXRpb25z
KTsKLQkJfQogCQlmaW5hbCBTaW1wbGVOYW1lIHNlY29uZFRva2VuID0gbmV3IFNpbXBsZU5hbWUo
dGhpcy5hc3QpOwogCQlzZWNvbmRUb2tlbi5pbnRlcm5hbFNldElkZW50aWZpZXIobmV3IFN0cmlu
Zyh0eXBlTmFtZVsxXSkpOwogCQlzZWNvbmRUb2tlbi5pbmRleCA9IDI7CkBAIC01MDA4LDkgKzUw
ODMsNiBAQAogCQlRdWFsaWZpZWROYW1lIHF1YWxpZmllZE5hbWUgPSBuZXcgUXVhbGlmaWVkTmFt
ZSh0aGlzLmFzdCk7CiAJCXF1YWxpZmllZE5hbWUuc2V0UXVhbGlmaWVyKGZpcnN0VG9rZW4pOwog
CQlxdWFsaWZpZWROYW1lLnNldE5hbWUoc2Vjb25kVG9rZW4pOwotCQlpZiAoYW5ub3RhdGlvbnMg
IT0gbnVsbCAmJiAodHlwZUFubm90YXRpb25zID0gYW5ub3RhdGlvbnNbMV0pICE9IG51bGwpIHsK
LQkJCWFubm90YXRlTmFtZShxdWFsaWZpZWROYW1lLCB0eXBlQW5ub3RhdGlvbnMpOwotCQl9CiAJ
CWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewogCQkJcmVjb3JkTm9kZXMocXVhbGlmaWVkTmFt
ZSwgbm9kZSk7CiAJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihxdWFsaWZpZWRO
YW1lKTsKQEAgLTUwMzUsOSArNTEwNyw2IEBACiAJCQlxdWFsaWZpZWROYW1lID0gcXVhbGlmaWVk
TmFtZTI7CiAJCQlxdWFsaWZpZWROYW1lLmluZGV4ID0gbmV3UGFydC5pbmRleDsKIAkJCXF1YWxp
ZmllZE5hbWUuc2V0U291cmNlUmFuZ2Uoc3RhcnQwLCBlbmQgLSBzdGFydDAgKyAxKTsKLQkJCWlm
IChhbm5vdGF0aW9ucyAhPSBudWxsICYmICh0eXBlQW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9uc1tp
XSkgIT0gbnVsbCkgewotCQkJCWFubm90YXRlTmFtZShxdWFsaWZpZWROYW1lLCB0eXBlQW5ub3Rh
dGlvbnMpOwotCQkJfQkKIAkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewogCQkJCXJlY29y
ZE5vZGVzKHF1YWxpZmllZE5hbWUsIG5vZGUpOwogCQkJCXJlY29yZE5vZGVzKG5ld1BhcnQsIG5v
ZGUpOwpAQCAtNTA1NCw3ICs1MTIzLDYgQEAKIAl9CiAKIAlwcm90ZWN0ZWQgUXVhbGlmaWVkTmFt
ZSBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyhjaGFyW11bXSB0eXBlTmFtZSwg
bG9uZ1tdIHBvc2l0aW9ucywgaW50IGVuZGluZ0luZGV4LCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0LlR5cGVSZWZlcmVuY2Ugbm9kZSkgewotIAkJb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uW10gYW5ub3RhdGlvbnM7CiAgCQlpbnQg
bGVuZ3RoID0gZW5kaW5nSW5kZXggKyAxOwogCQlmaW5hbCBTaW1wbGVOYW1lIGZpcnN0VG9rZW4g
PSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CiAJCWZpcnN0VG9rZW4uaW50ZXJuYWxTZXRJZGVu
dGlmaWVyKG5ldyBTdHJpbmcodHlwZU5hbWVbMF0pKTsKQEAgLTUwNjMsOSArNTEzMSw2IEBACiAJ
CWludCBzdGFydCA9IHN0YXJ0MDsKIAkJaW50IGVuZCA9IChpbnQpIHBvc2l0aW9uc1swXTsKIAkJ
Zmlyc3RUb2tlbi5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJaWYg
KG5vZGUuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSBub2RlLmFubm90YXRp
b25zWzBdKSAhPSBudWxsKSB7Ci0JCQlhbm5vdGF0ZU5hbWUoZmlyc3RUb2tlbiwgYW5ub3RhdGlv
bnMpOwotCQl9CiAJCWZpbmFsIFNpbXBsZU5hbWUgc2Vjb25kVG9rZW4gPSBuZXcgU2ltcGxlTmFt
ZSh0aGlzLmFzdCk7CiAJCXNlY29uZFRva2VuLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3Ry
aW5nKHR5cGVOYW1lWzFdKSk7CiAJCXNlY29uZFRva2VuLmluZGV4ID0gMjsKQEAgLTUwNzUsOSAr
NTE0MCw2IEBACiAJCVF1YWxpZmllZE5hbWUgcXVhbGlmaWVkTmFtZSA9IG5ldyBRdWFsaWZpZWRO
YW1lKHRoaXMuYXN0KTsKIAkJcXVhbGlmaWVkTmFtZS5zZXRRdWFsaWZpZXIoZmlyc3RUb2tlbik7
CiAJCXF1YWxpZmllZE5hbWUuc2V0TmFtZShzZWNvbmRUb2tlbik7Ci0JCWlmIChub2RlLmFubm90
YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9uc1sxXSkgIT0g
bnVsbCkgewotCQkJYW5ub3RhdGVOYW1lKHF1YWxpZmllZE5hbWUsIGFubm90YXRpb25zKTsKLQkJ
fQogCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKIAkJCXJlY29yZE5vZGVzKHF1YWxpZmll
ZE5hbWUsIG5vZGUpOwogCQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24ocXVhbGlm
aWVkTmFtZSk7CkBAIC01MTAyLDkgKzUxNjQsNiBAQAogCQkJcXVhbGlmaWVkTmFtZSA9IHF1YWxp
ZmllZE5hbWUyOwogCQkJcXVhbGlmaWVkTmFtZS5pbmRleCA9IG5ld1BhcnQuaW5kZXg7CiAJCQlx
dWFsaWZpZWROYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0MCwgZW5kIC0gc3RhcnQwICsgMSk7Ci0J
CQlpZiAobm9kZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IG5vZGUuYW5u
b3RhdGlvbnNbaV0pICE9IG51bGwpIHsKLQkJCQlhbm5vdGF0ZU5hbWUocXVhbGlmaWVkTmFtZSwg
YW5ub3RhdGlvbnMpOwotCQkJfQogCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7CiAJCQkJ
cmVjb3JkTm9kZXMocXVhbGlmaWVkTmFtZSwgbm9kZSk7CiAJCQkJcmVjb3JkTm9kZXMobmV3UGFy
dCwgbm9kZSk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCmluZGV4IGQ5MTc4MzAu
LjMyN2Y1ZDggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCkBAIC0xNjk5LDgg
KzE2OTksNyBAQAogCQkJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5n
ZXROYW1lKCkpOwogCQkJZGVmYXVsdDoKIAkJCQlyZXR1cm4gc2FmZVN1YnRyZWVNYXRjaChub2Rl
LmdldFF1YWxpZmllcigpLCBvLmdldFF1YWxpZmllcigpKQotCQkJCQkJJiYgc2FmZVN1YnRyZWVN
YXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpICYmCi0JCQkJCQlzYWZlU3VidHJlZUxp
c3RNYXRjaChub2RlLmFubm90YXRpb25zKCksIG8uYW5ub3RhdGlvbnMoKSk7CisJCQkJCQkmJiBz
YWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0TmFtZSgpLCBvLmdldE5hbWUoKSk7CiAJCX0JCiAJfQog
CkBAIC0xNzgxLDE1ICsxNzgwLDcgQEAKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCQlTaW1wbGVO
YW1lIG8gPSAoU2ltcGxlTmFtZSkgb3RoZXI7Ci0JCXN3aXRjaChub2RlLmdldEFTVCgpLmFwaUxl
dmVsKSB7Ci0JCQljYXNlIEFTVC5KTFMyX0lOVEVSTkFMIDoKLQkJCWNhc2UgQVNULkpMUzNfSU5U
RVJOQUwgOgotCQkJY2FzZSBBU1QuSkxTNDoKLQkJCQlyZXR1cm4gbm9kZS5nZXRJZGVudGlmaWVy
KCkuZXF1YWxzKG8uZ2V0SWRlbnRpZmllcigpKTsKLQkJCWRlZmF1bHQ6Ci0JCQkJcmV0dXJuIChu
b2RlLmdldElkZW50aWZpZXIoKS5lcXVhbHMoby5nZXRJZGVudGlmaWVyKCkpKSAmJgotCQkJCQkJ
c2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygpLCBvLmFubm90YXRpb25zKCkp
OwotCQl9CQorCQlyZXR1cm4gbm9kZS5nZXRJZGVudGlmaWVyKCkuZXF1YWxzKG8uZ2V0SWRlbnRp
ZmllcigpKTsKIAl9CiAKIAkvKioKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTmFtZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9OYW1lLmphdmEKaW5kZXggZTdkMDcyNi4u
NjU0MzBlZCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNl
L2pkdC9jb3JlL2RvbS9OYW1lLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9OYW1lLmphdmEKQEAgLTEsNjAgKzEsMjggQEAKIC8qKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBv
cmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMDggSUJNIENvcnBv
cmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0g
YW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5k
ZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNo
IGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CiAgKiBo
dHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAogICoKLSAqIFRoaXMgaXMg
YW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBkZXZlbG9w
ZWQgdW5kZXIgdGhlIEphdmEKLSAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBpcyBtYWRl
IGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcwotICogb25seS4g
VGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBvZiB0aGUg
SkNQLgotICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5p
dGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIAog
cGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb207CiAKLWltcG9ydCBqYXZhLnV0aWwuTGlz
dDsKLQogLyoqCiAgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgQVNUIG5vZGVzIHRoYXQg
cmVwcmVzZW50IG5hbWVzLgogICogVGhlcmUgYXJlIGV4YWN0bHkgdHdvIGtpbmRzIG9mIG5hbWU6
IHNpbXBsZSBvbmVzCiAgKiAoPGNvZGU+U2ltcGxlTmFtZTwvY29kZT4pIGFuZCBxdWFsaWZpZWQg
b25lcyAoPGNvZGU+UXVhbGlmaWVkTmFtZTwvY29kZT4pLgogICogPHA+Ci0gKiBGb3IgSkxTMiwg
SkxTMyBvciBKTFM0OgogICogPHByZT4KICAqIE5hbWU6CiAgKiAgICAgU2ltcGxlTmFtZQogICog
ICAgIFF1YWxpZmllZE5hbWUKICAqIDwvcHJlPgotICogPHA+Ci0gKiBGb3IgSkxTOCwgdGhlIE5h
bWUgbWF5IGJlIHByZWNlZGVkIGJ5IG9wdGlvbmFsIHR5cGUgYW5ub3RhdGlvbnMuCi0gKiBXaGls
ZSB0aGUgYWRkaXRpb25hbCBsb2NhdGlvbnMgd2hlcmUgSmF2YSBTRTggYWxsb3dzIGFubm90YXRp
b25zCi0gKiB0byBiZSB3cml0dGVuIGFyZSBvbmx5IGluIHR5cGUgcmVmZXJlbmNlcyBhbmQgdHlw
ZSBwYXJhbWV0ZXJzLCB0aGVyZQotICogYXJlIHZhcmlvdXMgc2l0dWF0aW9ucyBpbiB3aGljaCBh
IHBhcnNlciBpcyB1bmFibGUgdG8gZGVjaWRlIHdoZXRoZXIKLSAqIGEgbmFtZSBpdCBzZWVzIGNv
bnN0aXR1dGVzIGEgdHlwZSBuYW1lIG9yIG5vdCBhbmQgZW5kcyB1cCBjcmVhdGluZwotICogTmFt
ZSBub2Rlcy4KICAqIDwvcD4KLSAqIDxwPgotICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBxdWFs
aWZpZWQgdHlwZSByZWZlcmVuY2UgamF2YS51dGlsLkxpc3QsCi0gKiB0aGUgQVNUUGFyc2VyIGNh
bm5vdCBkZWNpZGUgd2hlbiBiaW5kaW5ncyByZXNvbHV0aW9uIGlzIE5PVCByZXF1ZXN0ZWQKLSAq
IHZpYSB7QGxpbmsgQVNUUGFyc2VyI3NldFJlc29sdmVCaW5kaW5nc30sIHdoZXRoZXIgamF2YSBj
b25zdGl0dXRlcyBhCi0gKiB0eXBlIG5hbWUgb3IgYSBub24tdHlwZSBuYW1lIChpLmUuLCBhIHBh
Y2thZ2UgbmFtZSkKLSAqIDwvcD4KLSAqIDxwPgotICogTm90ZSBhbHNvIHRoYXQgdGhlIHBhcnNl
ciBjYW5ub3QgZGlzYW1iaWd1YXRlIG9uIHRoZSBiYXNpcyBvZiB0aGUKLSAqIHByZXNlbmNlIG9m
IHR5cGUgYW5ub3RhdGlvbnMgYXQgYSBjZXJ0YWluIHBsYWNlLiAKLSAqIEluIEBOb25OdWxsIGph
dmEudXRpbC5MaXN0LCBqYXZhIGlzIHN0aWxsIGEgcGFja2FnZSBuYW1lIGV2ZW4gdGhvdWdoCi0g
KiBpdCBpcyBwcmVjZWRlZCBieSBhbm5vdGF0aW9ucy4KLSAqIDwvcD4KLSAqIEZvciBKTFM4Ogot
ICogPHByZT4KLSAqIE5hbWU6Ci0gKiAgICAge0Fubm90YXRpb259IFNpbXBsZU5hbWUKLSAqICAg
ICB7QW5ub3RhdGlvbn0gUXVhbGlmaWVkTmFtZQotICogPC9wcmU+Ci0gKiA8L3A+CisgKgogICog
QHNpbmNlIDIuMAogICogQG5vZXh0ZW5kIFRoaXMgY2xhc3MgaXMgbm90IGludGVuZGVkIHRvIGJl
IHN1YmNsYXNzZWQgYnkgY2xpZW50cy4KICAqLwpAQCAtNjQsMTggKzMyLDEyIEBACiAJICogQXBw
cm94aW1hdGUgYmFzZSBzaXplIG9mIGFuIGV4cHJlc3Npb24gbm9kZSBpbnN0YW5jZSBpbiBieXRl
cywKIAkgKiBpbmNsdWRpbmcgb2JqZWN0IGhlYWRlciBhbmQgaW5zdGFuY2UgZmllbGRzLgogCSAq
LwotCXN0YXRpYyBmaW5hbCBpbnQgQkFTRV9OQU1FX05PREVfU0laRSA9IEJBU0VfTk9ERV9TSVpF
ICsgMiAqIDQ7CisJc3RhdGljIGZpbmFsIGludCBCQVNFX05BTUVfTk9ERV9TSVpFID0gQkFTRV9O
T0RFX1NJWkUgKyAxICogNDsKIAogCS8qKgogCSAqIFRoaXMgaW5kZXggcmVwcmVzZW50cyB0aGUg
cG9zaXRpb24gaW5zaWRlIGEgcXVhbGlmaWVkIG5hbWUuCiAJICovCiAJaW50IGluZGV4OwotCQot
CS8qKgotCSAqIFRoZSB0eXBlIGFubm90YXRpb25zIChlbGVtZW50IHR5cGU6IHtAbGluayBBbm5v
dGF0aW9ufSkuCi0JICogQHNpbmNlIDMuOQotCSAqLwotCXByb3RlY3RlZCBBU1ROb2RlLk5vZGVM
aXN0IGFubm90YXRpb25zID0gbnVsbDsKIAogCS8qKgogCSAqIENyZWF0ZXMgYSBuZXcgQVNUIG5v
ZGUgZm9yIGEgbmFtZSBvd25lZCBieSB0aGUgZ2l2ZW4gQVNULgpAQCAtMTU0LDE5ICsxMTYsNCBA
QAogCSAqIEBzaW5jZSAzLjAKIAkgKi8KIAlhYnN0cmFjdCB2b2lkIGFwcGVuZE5hbWUoU3RyaW5n
QnVmZmVyIGJ1ZmZlcik7Ci0JCi0JLyoqCi0JICogUmV0dXJucyB0aGUgbGl2ZSBvcmRlcmVkIGxp
c3Qgb2YgYW5ub3RhdGlvbnMgZm9yIHRoaXMgTmFtZSBub2RlLgotCSAqCi0JICogQHJldHVybiB0
aGUgbGl2ZSBsaXN0IG9mIGFubm90YXRpb25zIChlbGVtZW50IHR5cGU6IHtAbGluayBBbm5vdGF0
aW9ufSkKLQkgKiBAZXhjZXB0aW9uIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uIGlmIHRo
aXMgb3BlcmF0aW9uIGlzIHVzZWQKLQkgKiAgICAgICAgICAgIGluIGEgSkxTMiwgSkxTMyBvciBK
TFM0IEFTVAotCSAqIEBzaW5jZSAzLjkKLQkgKi8KLQlwdWJsaWMgTGlzdCBhbm5vdGF0aW9ucygp
IHsKLQkJaWYgKHRoaXMuYW5ub3RhdGlvbnMgPT0gbnVsbCkgewotCQkJdW5zdXBwb3J0ZWRJbjJf
M180KCk7IAotCQl9Ci0JCXJldHVybiB0aGlzLmFubm90YXRpb25zOwotCX0KIH0KZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vUXVh
bGlmaWVkTmFtZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9jb3JlL2RvbS9RdWFsaWZpZWROYW1lLmphdmEKaW5kZXggMWYwZTI3Mi4uYzc3NTNiMiAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Rv
bS9RdWFsaWZpZWROYW1lLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9RdWFsaWZpZWROYW1lLmphdmEKQEAgLTEsMTQgKzEsMTAgQEAK
IC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTAgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFi
bGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAogICoKLSAqIFRo
aXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBk
ZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKLSAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBp
cyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcwotICog
b25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBv
ZiB0aGUgSkNQLgotICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9u
IC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ki8KQEAgLTIzLDE4ICsxOSwxMCBAQAogICogQVNUIG5vZGUgZm9yIGEgcXVhbGlmaWVkIG5hbWUu
IEEgcXVhbGlmaWVkIG5hbWUgaXMgZGVmaW5lZCByZWN1cnNpdmVseQogICogYXMgYSBzaW1wbGUg
bmFtZSBwcmVjZWRlZCBieSBhIG5hbWUsIHdoaWNoIHF1YWxpZmllcyBpdC4gRXhwcmVzc2luZyBp
dCB0aGlzCiAgKiB3YXkgbWVhbnMgdGhhdCB0aGUgcXVhbGlmaWVyIGFuZCB0aGUgc2ltcGxlIG5h
bWUgZ2V0IHRoZWlyIG93biBBU1Qgbm9kZXMuCi0gKiBGb3IgSkxTMiwgSkxTMyBvciBKTFM0Ogog
ICogPHByZT4KICAqIFF1YWxpZmllZE5hbWU6CiAgKiAgICBOYW1lIDxiPi48L2I+IFNpbXBsZU5h
bWUKICAqIDwvcHJlPgotICogPHA+Ci0gKiBGb3IgSkxTODoKLSAqIDxwcmU+Ci0gKiBRdWFsaWZp
ZWROYW1lOgotICogICAgTmFtZSA8Yj4uPC9iPiB7QW5ub3RhdGlvbn0gU2ltcGxlTmFtZQotICog
PC9wcmU+Ci0gKiA8L3A+CiAgKiA8cD4KICAqIFNlZSA8Y29kZT5GaWVsZEFjY2VzczwvY29kZT4g
Zm9yIGd1aWRlbGluZXMgb24gaGFuZGxpbmcgb3RoZXIgZXhwcmVzc2lvbnMKICAqIHRoYXQgcmVz
ZW1ibGUgcXVhbGlmaWVkIG5hbWVzLgpAQCAtNjEsMjUgKzQ5LDExIEBACiAJCW5ldyBDaGlsZFBy
b3BlcnR5RGVzY3JpcHRvcihRdWFsaWZpZWROYW1lLmNsYXNzLCAibmFtZSIsIFNpbXBsZU5hbWUu
Y2xhc3MsIE1BTkRBVE9SWSwgTk9fQ1lDTEVfUklTSyk7IC8vJE5PTi1OTFMtMSQKIAogCS8qKgot
CSAqIFRoZSAiYW5ub3RhdGlvbnMiIHN0cnVjdHVyYWwgcHJvcGVydHkgb2YgdGhpcyBub2RlIHR5
cGUgKGNoaWxkIHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCi0JICogQHNpbmNlIDMuOQotCSAq
LwotCXB1YmxpYyBzdGF0aWMgZmluYWwgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yIEFOTk9U
QVRJT05TX1BST1BFUlRZID0KLQkJbmV3IENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvcihRdWFs
aWZpZWROYW1lLmNsYXNzLCAiYW5ub3RhdGlvbnMiLCBBbm5vdGF0aW9uLmNsYXNzLCBDWUNMRV9S
SVNLKTsgLy8kTk9OLU5MUy0xJAotCS8qKgogCSAqIEEgbGlzdCBvZiBwcm9wZXJ0eSBkZXNjcmlw
dG9ycyAoZWxlbWVudCB0eXBlOgogCSAqIHtAbGluayBTdHJ1Y3R1cmFsUHJvcGVydHlEZXNjcmlw
dG9yfSksCiAJICogb3IgbnVsbCBpZiB1bmluaXRpYWxpemVkLgogCSAqLwogCXByaXZhdGUgc3Rh
dGljIGZpbmFsIExpc3QgUFJPUEVSVFlfREVTQ1JJUFRPUlM7Ci0JCi0JLyoqCi0JICogQSBsaXN0
IG9mIHByb3BlcnR5IGRlc2NyaXB0b3JzIChlbGVtZW50IHR5cGU6Ci0JICoge0BsaW5rIFN0cnVj
dHVyYWxQcm9wZXJ0eURlc2NyaXB0b3J9KSwKLQkgKiBvciBudWxsIGlmIHVuaW5pdGlhbGl6ZWQu
Ci0JICogQHNpbmNlIDMuOQotCSAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFsIExpc3QgUFJPUEVS
VFlfREVTQ1JJUFRPUlNfOF8wOwogCiAJc3RhdGljIHsKIAkJTGlzdCBwcm9wZXJ0eUxpc3QgPSBu
ZXcgQXJyYXlMaXN0KDMpOwpAQCAtODcsMTMgKzYxLDYgQEAKIAkJYWRkUHJvcGVydHkoUVVBTElG
SUVSX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwogCQlhZGRQcm9wZXJ0eShOQU1FX1BST1BFUlRZ
LCBwcm9wZXJ0eUxpc3QpOwogCQlQUk9QRVJUWV9ERVNDUklQVE9SUyA9IHJlYXBQcm9wZXJ0eUxp
c3QocHJvcGVydHlMaXN0KTsKLQkJCi0JCXByb3BlcnR5TGlzdCA9IG5ldyBBcnJheUxpc3QoNCk7
Ci0JCWNyZWF0ZVByb3BlcnR5TGlzdChRdWFsaWZpZWROYW1lLmNsYXNzLCBwcm9wZXJ0eUxpc3Qp
OwotCQlhZGRQcm9wZXJ0eShRVUFMSUZJRVJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7Ci0JCWFk
ZFByb3BlcnR5KE5BTUVfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7Ci0JCWFkZFByb3BlcnR5KEFO
Tk9UQVRJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwotCQlQUk9QRVJUWV9ERVNDUklQVE9S
U184XzAgPSByZWFwUHJvcGVydHlMaXN0KHByb3BlcnR5TGlzdCk7CiAJfQogCiAJLyoqCkBAIC0x
MDcsMTQgKzc0LDcgQEAKIAkgKiBAc2luY2UgMy4wCiAJICovCiAJcHVibGljIHN0YXRpYyBMaXN0
IHByb3BlcnR5RGVzY3JpcHRvcnMoaW50IGFwaUxldmVsKSB7Ci0JCXN3aXRjaCAoYXBpTGV2ZWwp
IHsKLQkJCWNhc2UgQVNULkpMUzJfSU5URVJOQUwgOgotCQkJY2FzZSBBU1QuSkxTM19JTlRFUk5B
TCA6Ci0JCQljYXNlIEFTVC5KTFM0OgotCQkJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SUzsK
LQkJCWRlZmF1bHQgOgotCQkJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SU184XzA7Ci0JCX0K
KwkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTOwogCX0KIAogCS8qKgpAQCAtMTQxLDkgKzEw
MSw2IEBACiAJICovCiAJUXVhbGlmaWVkTmFtZShBU1QgYXN0KSB7CiAJCXN1cGVyKGFzdCk7Ci0J
CWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCXRoaXMuYW5ub3RhdGlvbnMgPSBu
ZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7Ci0JCX0KIAl9CiAKIAkv
KiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTE1MSwxNyArMTA4LDYgQEAKIAkg
Ki8KIAlmaW5hbCBMaXN0IGludGVybmFsU3RydWN0dXJhbFByb3BlcnRpZXNGb3JUeXBlKGludCBh
cGlMZXZlbCkgewogCQlyZXR1cm4gcHJvcGVydHlEZXNjcmlwdG9ycyhhcGlMZXZlbCk7Ci0JfQot
CQotCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQotCSAqIE1ldGhvZCBkZWNsYXJl
ZCBvbiBBU1ROb2RlLgotCSAqLwotCWZpbmFsIExpc3QgaW50ZXJuYWxHZXRDaGlsZExpc3RQcm9w
ZXJ0eShDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgcHJvcGVydHkpIHsKLQkJaWYgKHByb3Bl
cnR5ID09IEFOTk9UQVRJT05TX1BST1BFUlRZKSB7Ci0JCQlyZXR1cm4gYW5ub3RhdGlvbnMoKTsK
LQkJfQotCQkvLyBhbGxvdyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHRvIGZsYWcgdGhlIGVycm9y
Ci0JCXJldHVybiBzdXBlci5pbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KHByb3BlcnR5KTsK
IAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTIwMywxMSArMTQ5
LDYgQEAKIAkJcmVzdWx0LnNldFNvdXJjZVJhbmdlKGdldFN0YXJ0UG9zaXRpb24oKSwgZ2V0TGVu
Z3RoKCkpOwogCQlyZXN1bHQuc2V0UXVhbGlmaWVyKChOYW1lKSBnZXRRdWFsaWZpZXIoKS5jbG9u
ZSh0YXJnZXQpKTsKIAkJcmVzdWx0LnNldE5hbWUoKFNpbXBsZU5hbWUpIGdldE5hbWUoKS5jbG9u
ZSh0YXJnZXQpKTsKLQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7Ci0JCQly
ZXN1bHQuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9Q
RVJUWSk7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMuYWRkQWxsKAotCQkJCQlBU1ROb2RlLmNvcHlT
dWJ0cmVlcyh0YXJnZXQsIGFubm90YXRpb25zKCkpKTsKLQkJfQogCQlyZXR1cm4gcmVzdWx0Owog
CX0KIApAQCAtMjI3LDkgKzE2OCw2IEBACiAJCWlmICh2aXNpdENoaWxkcmVuKSB7CiAJCQkvLyB2
aXNpdCBjaGlsZHJlbiBpbiBub3JtYWwgbGVmdCB0byByaWdodCByZWFkaW5nIG9yZGVyCiAJCQlh
Y2NlcHRDaGlsZCh2aXNpdG9yLCBnZXRRdWFsaWZpZXIoKSk7Ci0JCQlpZiAodGhpcy5hc3QuYXBp
TGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCQlhY2NlcHRDaGlsZHJlbih2aXNpdG9yLCB0aGlzLmFu
bm90YXRpb25zKTsKLQkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldE5hbWUoKSk7CiAJ
CX0KIAkJdmlzaXRvci5lbmRWaXNpdCh0aGlzKTsKQEAgLTMyNyw3ICsyNjUsNyBAQAogCSAqIE1l
dGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCWludCBtZW1TaXplKCkgewotCQlyZXR1
cm4gQkFTRV9OQU1FX05PREVfU0laRSArIDIgKiA0OworCQlyZXR1cm4gQkFTRV9OQU1FX05PREVf
U0laRSArIDMgKiA0OwogCX0KIAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQpA
QCAtMzM3LDggKzI3NSw3IEBACiAJCXJldHVybgogCQkJbWVtU2l6ZSgpCiAJCQkrICh0aGlzLm5h
bWUgPT0gbnVsbCA/IDAgOiBnZXROYW1lKCkudHJlZVNpemUoKSkKLQkJCSsgKHRoaXMucXVhbGlm
aWVyID09IG51bGwgPyAwIDogZ2V0UXVhbGlmaWVyKCkudHJlZVNpemUoKSkKLQkJCSsgKHRoaXMu
YW5ub3RhdGlvbnMgPT0gbnVsbCA/IDAgOiB0aGlzLmFubm90YXRpb25zLmxpc3RTaXplKCkpOwor
CQkJKyAodGhpcy5xdWFsaWZpZXIgPT0gbnVsbCA/IDAgOiBnZXRRdWFsaWZpZXIoKS50cmVlU2l6
ZSgpKTsKIAl9CiB9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvY29yZS9kb20vU2ltcGxlTmFtZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKaW5kZXggMjY5
NDZkMi4uZDRhMWJmNiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW1wbGVOYW1lLmphdmEKQEAgLTEs
MTQgKzEsMTAgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTEgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2Vy
dmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMg
YXZhaWxhYmxlIGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRt
bAogICoKLSAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3Bl
Y2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKLSAqIENvbW11bml0eSBQcm9jZXNz
IChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBw
dXJwb3NlcwotICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3Bl
Y2lmaWNhdGlvbiBvZiB0aGUgSkNQLgotICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJN
IENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKi8KQEAgLTQzLDEzICszOSw2IEBACiAJICovCiAJcHVibGljIHN0YXRpYyBm
aW5hbCBTaW1wbGVQcm9wZXJ0eURlc2NyaXB0b3IgSURFTlRJRklFUl9QUk9QRVJUWSA9CiAJCW5l
dyBTaW1wbGVQcm9wZXJ0eURlc2NyaXB0b3IoU2ltcGxlTmFtZS5jbGFzcywgImlkZW50aWZpZXIi
LCBTdHJpbmcuY2xhc3MsIE1BTkRBVE9SWSk7IC8vJE5PTi1OTFMtMSQKLQkKLQkvKioKLQkgKiBU
aGUgImFubm90YXRpb25zIiBzdHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHRoaXMgbm9kZSB0eXBlIChj
aGlsZCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pLgotCSAqIEBzaW5jZSAzLjkKLQkgKi8KLQlw
dWJsaWMgc3RhdGljIGZpbmFsIENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBBTk5PVEFUSU9O
U19QUk9QRVJUWSA9Ci0JCW5ldyBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IoU2ltcGxlTmFt
ZS5jbGFzcywgImFubm90YXRpb25zIiwgQW5ub3RhdGlvbi5jbGFzcywgQ1lDTEVfUklTSyk7IC8v
JE5PTi1OTFMtMSQKIAogCS8qKgogCSAqIEEgbGlzdCBvZiBwcm9wZXJ0eSBkZXNjcmlwdG9ycyAo
ZWxlbWVudCB0eXBlOgpAQCAtNTgsMjYgKzQ3LDEyIEBACiAJICogQHNpbmNlIDMuMAogCSAqLwog
CXByaXZhdGUgc3RhdGljIGZpbmFsIExpc3QgUFJPUEVSVFlfREVTQ1JJUFRPUlM7Ci0JCi0JLyoq
Ci0JICogQSBsaXN0IG9mIHByb3BlcnR5IGRlc2NyaXB0b3JzIChlbGVtZW50IHR5cGU6Ci0JICog
e0BsaW5rIFN0cnVjdHVyYWxQcm9wZXJ0eURlc2NyaXB0b3J9KSwKLQkgKiBvciBudWxsIGlmIHVu
aW5pdGlhbGl6ZWQuCi0JICogQHNpbmNlIDMuOQotCSAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFs
IExpc3QgUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wOwogCiAJc3RhdGljIHsKIAkJTGlzdCBwcm9w
ZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0KDIpOwogCQljcmVhdGVQcm9wZXJ0eUxpc3QoU2ltcGxl
TmFtZS5jbGFzcywgcHJvcGVydHlMaXN0KTsKIAkJYWRkUHJvcGVydHkoSURFTlRJRklFUl9QUk9Q
RVJUWSwgcHJvcGVydHlMaXN0KTsKIAkJUFJPUEVSVFlfREVTQ1JJUFRPUlMgPSByZWFwUHJvcGVy
dHlMaXN0KHByb3BlcnR5TGlzdCk7Ci0JCQotCQlwcm9wZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0
KDMpOwotCQljcmVhdGVQcm9wZXJ0eUxpc3QoU2ltcGxlTmFtZS5jbGFzcywgcHJvcGVydHlMaXN0
KTsKLQkJYWRkUHJvcGVydHkoSURFTlRJRklFUl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKLQkJ
YWRkUHJvcGVydHkoQU5OT1RBVElPTlNfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7Ci0JCVBST1BF
UlRZX0RFU0NSSVBUT1JTXzhfMCA9IHJlYXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsKIAl9
CiAKIAkvKioKQEAgLTkwLDE0ICs2NSw3IEBACiAJICogQHNpbmNlIDMuMAogCSAqLwogCXB1Ymxp
YyBzdGF0aWMgTGlzdCBwcm9wZXJ0eURlc2NyaXB0b3JzKGludCBhcGlMZXZlbCkgewotCQlzd2l0
Y2ggKGFwaUxldmVsKSB7Ci0JCQljYXNlIEFTVC5KTFMyX0lOVEVSTkFMIDoKLQkJCWNhc2UgQVNU
LkpMUzNfSU5URVJOQUwgOgotCQkJY2FzZSBBU1QuSkxTNDoKLQkJCQlyZXR1cm4gUFJPUEVSVFlf
REVTQ1JJUFRPUlM7Ci0JCQlkZWZhdWx0IDoKLQkJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRP
UlNfOF8wOwotCQl9CisJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SUzsKIAl9CiAKIAkvKioK
QEAgLTEyMyw5ICs5MSw2IEBACiAJICovCiAJU2ltcGxlTmFtZShBU1QgYXN0KSB7CiAJCXN1cGVy
KGFzdCk7Ci0JCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKLQkJCXRoaXMuYW5ub3Rh
dGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7Ci0JCX0K
IAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTEzNCwxNyArOTks
NiBAQAogCSAqLwogCWZpbmFsIExpc3QgaW50ZXJuYWxTdHJ1Y3R1cmFsUHJvcGVydGllc0ZvclR5
cGUoaW50IGFwaUxldmVsKSB7CiAJCXJldHVybiBwcm9wZXJ0eURlc2NyaXB0b3JzKGFwaUxldmVs
KTsKLQl9Ci0JCi0JLyogKG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRob2QpCi0JICogTWV0aG9k
IGRlY2xhcmVkIG9uIEFTVE5vZGUuCi0JICovCi0JZmluYWwgTGlzdCBpbnRlcm5hbEdldENoaWxk
TGlzdFByb3BlcnR5KENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBwcm9wZXJ0eSkgewotCQlp
ZiAocHJvcGVydHkgPT0gQU5OT1RBVElPTlNfUFJPUEVSVFkpIHsKLQkJCXJldHVybiBhbm5vdGF0
aW9ucygpOwotCQl9Ci0JCS8vIGFsbG93IGRlZmF1bHQgaW1wbGVtZW50YXRpb24gdG8gZmxhZyB0
aGUgZXJyb3IKLQkJcmV0dXJuIHN1cGVyLmludGVybmFsR2V0Q2hpbGRMaXN0UHJvcGVydHkocHJv
cGVydHkpOwogCX0KIAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQpAQCAtMTc3
LDExICsxMzEsNiBAQAogCQlTaW1wbGVOYW1lIHJlc3VsdCA9IG5ldyBTaW1wbGVOYW1lKHRhcmdl
dCk7CiAJCXJlc3VsdC5zZXRTb3VyY2VSYW5nZShnZXRTdGFydFBvc2l0aW9uKCksIGdldExlbmd0
aCgpKTsKIAkJcmVzdWx0LnNldElkZW50aWZpZXIoZ2V0SWRlbnRpZmllcigpKTsKLQkJaWYgKHRo
aXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7Ci0JCQlyZXN1bHQuYW5ub3RhdGlvbnMgPSBu
ZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7Ci0JCQlyZXN1bHQuYW5u
b3RhdGlvbnMuYWRkQWxsKAotCQkJCQlBU1ROb2RlLmNvcHlTdWJ0cmVlcyh0YXJnZXQsIGFubm90
YXRpb25zKCkpKTsKLQkJfQogCQlyZXR1cm4gcmVzdWx0OwogCX0KIApAQCAtMTk3LDEyICsxNDYs
NyBAQAogCSAqIE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCXZvaWQgYWNjZXB0
MChBU1RWaXNpdG9yIHZpc2l0b3IpIHsKLQkJYm9vbGVhbiB2aXNpdENoaWxkcmVuID0gdmlzaXRv
ci52aXNpdCh0aGlzKTsKLQkJaWYgKHZpc2l0Q2hpbGRyZW4pIHsKLQkJCWlmICh0aGlzLmFzdC5h
cGlMZXZlbCA+PSBBU1QuSkxTOCkgewotCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMu
YW5ub3RhdGlvbnMpOwotCQkJfQotCQl9CisJCXZpc2l0b3IudmlzaXQodGhpcyk7CiAJCXZpc2l0
b3IuZW5kVmlzaXQodGhpcyk7CiAJfQogCkBAIC0zNTMsNyArMjk3LDcgQEAKIAkgKiBNZXRob2Qg
ZGVjbGFyZWQgb24gQVNUTm9kZS4KIAkgKi8KIAlpbnQgbWVtU2l6ZSgpIHsKLQkJaW50IHNpemUg
PSBCQVNFX05BTUVfTk9ERV9TSVpFICsgMSAqIDQ7CisJCWludCBzaXplID0gQkFTRV9OQU1FX05P
REVfU0laRSArIDIgKiA0OwogCQlpZiAodGhpcy5pZGVudGlmaWVyICE9IE1JU1NJTkdfSURFTlRJ
RklFUikgewogCQkJLy8gZXZlcnl0aGluZyBidXQgb3VyIG1pc3NpbmcgaWQgY29zdHMKIAkJCXNp
emUgKz0gc3RyaW5nU2l6ZSh0aGlzLmlkZW50aWZpZXIpOwpAQCAtMzY1LDcgKzMwOSw3IEBACiAJ
ICogTWV0aG9kIGRlY2xhcmVkIG9uIEFTVE5vZGUuCiAJICovCiAJaW50IHRyZWVTaXplKCkgewot
CQlyZXR1cm4gbWVtU2l6ZSgpICsgKHRoaXMuYW5ub3RhdGlvbnMgPT0gbnVsbCA/IDAgOiB0aGlz
LmFubm90YXRpb25zLmxpc3RTaXplKCkpOworCQlyZXR1cm4gbWVtU2l6ZSgpOwogCX0KIH0KIApk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5l
ci5qYXZhCmluZGV4IDQ1YmQ2OWUuLjBjNDRlZWYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0
dGVuZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKQEAgLTEyNTcsNyArMTI1
Nyw2IEBACiAJcHVibGljIGJvb2xlYW4gdmlzaXQoUXVhbGlmaWVkTmFtZSBub2RlKSB7CiAJCW5v
ZGUuZ2V0UXVhbGlmaWVyKCkuYWNjZXB0KHRoaXMpOwogCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4i
KTsvLyROT04tTkxTLTEkCi0JCXZpc2l0VHlwZUFubm90YXRpb25zKG5vZGUpOwogCQlub2RlLmdl
dE5hbWUoKS5hY2NlcHQodGhpcyk7CiAJCXJldHVybiBmYWxzZTsKIAl9CkBAIC0xMjkyLDcgKzEy
OTEsNiBAQAogCSAqIEBzZWUgQVNUVmlzaXRvciN2aXNpdChTaW1wbGVOYW1lKQogCSAqLwogCXB1
YmxpYyBib29sZWFuIHZpc2l0KFNpbXBsZU5hbWUgbm9kZSkgewotCQl2aXNpdFR5cGVBbm5vdGF0
aW9ucyhub2RlKTsKIAkJdGhpcy5idWZmZXIuYXBwZW5kKG5vZGUuZ2V0SWRlbnRpZmllcigpKTsK
IAkJcmV0dXJuIGZhbHNlOwogCX0KQEAgLTE4NDYsMTggKzE4NDQsNSBAQAogCQkJCX0KIAkJCX0K
IAkJfQotCX0KLQlwcml2YXRlIHZvaWQgdmlzaXRUeXBlQW5ub3RhdGlvbnMoTmFtZSBub2RlKSB7
Ci0JCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsKLQkJCUxpc3Qg
YW5ub3RhdGlvbnMgPSBub2RlLmFubm90YXRpb25zKCk7Ci0JCQlpZiAoYW5ub3RhdGlvbnMgIT0g
bnVsbCkgewotCQkJCWZvciAoSXRlcmF0b3IgaXQgPSBhbm5vdGF0aW9ucy5pdGVyYXRvcigpOyBp
dC5oYXNOZXh0KCk7ICkgewotCQkJCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlv
bikgaXQubmV4dCgpOwotCQkJCQlhbm5vdGF0aW9uLmFjY2VwdCh0aGlzKTsKLQkJCQkJdGhpcy5i
dWZmZXIuYXBwZW5kKCcgJyk7Ci0JCQkJfQotCQkJfQotCQl9Ci0JfQotCisJfQkKIH0KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RS
ZXdyaXRlQW5hbHl6ZXIuamF2YQppbmRleCBiMjYxMWExLi4zZGNjMzJhIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9t
L3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3Jp
dGVBbmFseXplci5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioK
LSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4K
KyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4K
ICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWlu
ZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhl
IEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBk
aXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTI3NzgsOSArMjc3OCw2IEBACiAJ
CX0KIAogCQlyZXdyaXRlUmVxdWlyZWROb2RlKG5vZGUsIFF1YWxpZmllZE5hbWUuUVVBTElGSUVS
X1BST1BFUlRZKTsKLQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkg
ewotCQkJcmV3cml0ZVR5cGVBbm5vdGF0aW9ucyhub2RlLCBRdWFsaWZpZWROYW1lLkFOTk9UQVRJ
T05TX1BST1BFUlRZLCBub2RlLmdldFN0YXJ0UG9zaXRpb24oKSk7Ci0JCX0KIAkJcmV3cml0ZVJl
cXVpcmVkTm9kZShub2RlLCBRdWFsaWZpZWROYW1lLk5BTUVfUFJPUEVSVFkpOwogCQlyZXR1cm4g
ZmFsc2U7CiAJfQpAQCAtMjc5MSw5ICsyNzg4LDYgQEAKIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChT
aW1wbGVOYW1lIG5vZGUpIHsKIAkJaWYgKCFoYXNDaGlsZHJlbkNoYW5nZXMobm9kZSkpIHsKIAkJ
CXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7Ci0JCX0KLQkJaWYgKG5vZGUu
Z2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkgewotCQkJcmV3cml0ZVR5cGVBbm5vdGF0
aW9ucyhub2RlLCBTaW1wbGVOYW1lLkFOTk9UQVRJT05TX1BST1BFUlRZLCBub2RlLmdldFN0YXJ0
UG9zaXRpb24oKSk7CiAJCX0KIAkJU3RyaW5nIG5ld1N0cmluZz0gKFN0cmluZykgZ2V0TmV3VmFs
dWUobm9kZSwgU2ltcGxlTmFtZS5JREVOVElGSUVSX1BST1BFUlRZKTsKIAkJVGV4dEVkaXRHcm91
cCBncm91cCA9IGdldEVkaXRHcm91cChub2RlLCBTaW1wbGVOYW1lLklERU5USUZJRVJfUFJPUEVS
VFkpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20v
cmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKaW5kZXggMTRkMmI1OS4uY2VmMDMwMSAx
MDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQorKysgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jl
d3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRp
b24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRp
b24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQg
dGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNj
b21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTczNCw5
ICs3MzQsNiBAQAogCXB1YmxpYyBib29sZWFuIHZpc2l0KFF1YWxpZmllZE5hbWUgbm9kZSkgewog
CQlnZXRDaGlsZE5vZGUobm9kZSwgUXVhbGlmaWVkTmFtZS5RVUFMSUZJRVJfUFJPUEVSVFkpLmFj
Y2VwdCh0aGlzKTsKIAkJdGhpcy5yZXN1bHQuYXBwZW5kKCcuJyk7Ci0JCWlmIChub2RlLmdldEFT
VCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsKLQkJCXZpc2l0TGlzdChub2RlLCBRdWFsaWZp
ZWROYW1lLkFOTk9UQVRJT05TX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZignICcpLCBVdGlsLkVN
UFRZX1NUUklORywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7Ci0JCX0KIAkJZ2V0Q2hpbGROb2RlKG5v
ZGUsIFF1YWxpZmllZE5hbWUuTkFNRV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwogCQlyZXR1cm4g
ZmFsc2U7CiAJfQpAQCAtNzU5LDkgKzc1Niw2IEBACiAJICogQHNlZSBBU1RWaXNpdG9yI3Zpc2l0
KFNpbXBsZU5hbWUpCiAJICovCiAJcHVibGljIGJvb2xlYW4gdmlzaXQoU2ltcGxlTmFtZSBub2Rl
KSB7Ci0JCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsKLQkJCXZp
c2l0TGlzdChub2RlLCBTaW1wbGVOYW1lLkFOTk9UQVRJT05TX1BST1BFUlRZLCBTdHJpbmcudmFs
dWVPZignICcpLCBVdGlsLkVNUFRZX1NUUklORywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7Ci0JCX0K
IAkJdGhpcy5yZXN1bHQuYXBwZW5kKGdldEF0dHJpYnV0ZShub2RlLCBTaW1wbGVOYW1lLklERU5U
SUZJRVJfUFJPUEVSVFkpKTsKIAkJcmV0dXJuIGZhbHNlOwogCX0=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>226013</attachid>
            <date>2013-01-23 21:43:00 -0500</date>
            <delta_ts>2013-01-24 01:19:42 -0500</delta_ts>
            <desc>Proposed Patch - part 2</desc>
            <filename>Fix-Bug-395886--18DOM-AST-Withdraw-annotations-prope.2.patch</filename>
            <type>text/plain</type>
            <size>64750</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDc5MTA3N2MuLmMzNDAxOTggMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTcsNyArMTcsNyBAQAogaW1wb3J0IGphdmEu
dXRpbC5MaXN0OwogCiBpbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3Q7Ci0KK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5kb20uKjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29t
cGlsYXRpb25Vbml0OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2Vw
dGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUOwpAQCAtNDAsMTAgKzQw
LDExIEBACiAJfQogCiAJc3RhdGljIHsKLS8vCQlURVNUU19OVU1CRVJTID0gbmV3IGludFtdIHsg
MTkgfTsKLS8vCQlURVNUU19SQU5HRSA9IG5ldyBpbnRbXSB7IDEsIC0xIH07Ci0vLwkJVEVTVFNf
TkFNRVMgPSBuZXcgU3RyaW5nW10geyJ0ZXN0MDAwMSJ9OworCQkvLyBURVNUU19OVU1CRVJTID0g
bmV3IGludFtdIHsgMTkgfTsKKwkJLy8gVEVTVFNfUkFOR0UgPSBuZXcgaW50W10geyAxLCAtMSB9
OworCQkvLyBURVNUU19OQU1FUyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CiAJfQorCiAJ
cHVibGljIHN0YXRpYyBUZXN0IHN1aXRlKCkgewogCQlyZXR1cm4gYnVpbGRNb2RlbFRlc3RTdWl0
ZShBU1RDb252ZXJ0ZXIxOFRlc3QuY2xhc3MpOwogCX0KQEAgLTYxLDM1ICs2MiwzNSBAQAogCSAq
LwogCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4
OTgKIAlwdWJsaWMgdm9pZCB0ZXN0MDAwMSgpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24gewot
CQlTdHJpbmcgY29udGVudHMgPQotCQkJIiAgICBAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKwotCQkJIiAg
ICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKLQkJCSIgICAgfVxuIiArCi0JCQkicHVibGljIGNs
YXNzIFgge1xuIiArCi0JCQkiCXB1YmxpYyB2b2lkIGZvbyhpbnQgQE1hcmtlci4uLiBhcmdzKSB7
XG4iICsKLQkJCSIJfVxuIiArCi0JCQkiIAlwdWJsaWMgdm9pZCBiYXIoQE1hcmtlciBpbnQgQE1h
cmtlci4uLiBhcmdzKSB7XG4iICsKLQkJCSIgCX1cbiIgKwotCQkJIn0iOwotCQl0aGlzLndvcmtp
bmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvWC5qYXZhIiwgdHJ1ZS8q
cmVzb2x2ZSovKTsKLQkJQVNUTm9kZSBub2RlID0gYnVpbGRBU1QoCi0JCQljb250ZW50cywKLQkJ
CXRoaXMud29ya2luZ0NvcHkpOwotCQlhc3NlcnRFcXVhbHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVu
aXQiLCBBU1ROb2RlLkNPTVBJTEFUSU9OX1VOSVQsIG5vZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCVN0
cmluZyBjb250ZW50cyA9ICIgICAgQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCAoamF2YS5s
YW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iCisJCQkJKyAiICAgIEBpbnRl
cmZhY2UgTWFya2VyIHtcbiIKKwkJCQkrICIgICAgfVxuIgorCQkJCSsgInB1YmxpYyBjbGFzcyBY
IHtcbiIKKwkJCQkrICIJcHVibGljIHZvaWQgZm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIK
KwkJCQkrICIJfVxuIgorCQkJCSsgIiAJcHVibGljIHZvaWQgYmFyKEBNYXJrZXIgaW50IEBNYXJr
ZXIuLi4gYXJncykge1xuIgorCQkJCSsgIiAJfVxuIiArICJ9IjsKKwkJdGhpcy53b3JraW5nQ29w
eSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL1guamF2YSIsIHRydWUvKiByZXNv
bHZlICovKTsKKwkJQVNUTm9kZSBub2RlID0gYnVpbGRBU1QoY29udGVudHMsIHRoaXMud29ya2lu
Z0NvcHkpOworCQlhc3NlcnRFcXVhbHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVuaXQiLCBBU1ROb2Rl
LkNPTVBJTEFUSU9OX1VOSVQsCisJCQkJbm9kZS5nZXROb2RlVHlwZSgpKTsKIAkJQ29tcGlsYXRp
b25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9IChDb21waWxhdGlvblVuaXQpIG5vZGU7CiAJCWFzc2Vy
dFByb2JsZW1zU2l6ZShjb21waWxhdGlvblVuaXQsIDApOwogCQlub2RlID0gZ2V0QVNUTm9kZShj
b21waWxhdGlvblVuaXQsIDEsIDApOwotCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFy
YXRpb24iLCBub2RlLmdldE5vZGVUeXBlKCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04p
OworCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLAorCQkJCW5vZGUuZ2V0
Tm9kZVR5cGUoKSA9PSBBU1ROb2RlLk1FVEhPRF9ERUNMQVJBVElPTik7CiAJCU1ldGhvZERlY2xh
cmF0aW9uIG1ldGhvZERlY2xhcmF0aW9uID0gKE1ldGhvZERlY2xhcmF0aW9uKSBub2RlOwogCQlM
aXN0IHBhcmFtZXRlcnMgPSBtZXRob2REZWNsYXJhdGlvbi5wYXJhbWV0ZXJzKCk7CiAJCWFzc2Vy
dEVxdWFscygid3Jvbmcgc2l6ZSIsIDEsIHBhcmFtZXRlcnMuc2l6ZSgpKTsKLQkJU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbiBwYXJhbWV0ZXIgPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikg
cGFyYW1ldGVycy5nZXQoMCk7CisJCVNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24gcGFyYW1ldGVy
ID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRlcnMKKwkJCQkuZ2V0KDApOwog
CQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0aW9ucygpOwogCQlh
c3NlcnRFcXVhbHMoIldyb25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEsIGFubm90YXRpb25z
LnNpemUoKSk7CiAJCUFTVE5vZGUgYW5ub3RhdGlvbiA9IChBU1ROb2RlKSBhbm5vdGF0aW9ucy5n
ZXQoMCk7CiAJCWNoZWNrU291cmNlUmFuZ2UoYW5ub3RhdGlvbiwgIkBNYXJrZXIiLCBjb250ZW50
cyk7Ci0JCW5vZGUgPSBnZXRBU1ROb2RlKGNvbXBpbGF0aW9uVW5pdCwxLDEpOwotCQlhc3NlcnRU
cnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBlKCkgPT0gQVNU
Tm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlv
blVuaXQsIDEsIDEpOworCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLAor
CQkJCW5vZGUuZ2V0Tm9kZVR5cGUoKSA9PSBBU1ROb2RlLk1FVEhPRF9ERUNMQVJBVElPTik7CiAJ
CXBhcmFtZXRlcnMgPSBtZXRob2REZWNsYXJhdGlvbi5wYXJhbWV0ZXJzKCk7CiAJCWFzc2VydEVx
dWFscygiV3JvbmcgbnVtYmVyIG9mIHBhcmFtZXRlcnMiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7
CiAJCXBhcmFtZXRlciA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBwYXJhbWV0ZXJzLmdl
dCgwKTsKQEAgLTk4LDQgKzk5LDkzOCBAQAogCQlhbm5vdGF0aW9uID0gKEFTVE5vZGUpIGFubm90
YXRpb25zLmdldCgwKTsKIAkJY2hlY2tTb3VyY2VSYW5nZShhbm5vdGF0aW9uLCAiQE1hcmtlciIs
IGNvbnRlbnRzKTsKIAl9CisKKwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVn
cy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2IHRlc3RzIGFubm90YXRpb25zIG9uCisJICogUVRSIGlu
IG11bHRpcGxlIHNjZW5hcmlvcyBvZiBvY2N1cnJlbmNlLgorCSAqIAorCSAqIEB0aHJvd3MgSmF2
YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVibGljIHZvaWQgdGVzdDAwMDIoKSB0aHJvd3MgSmF2
YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIv
Q29udmVydGVyMTgvc3JjL3Rlc3QwMDAyL1guamF2YSIsCisJCQkJdHJ1ZS8qIHJlc29sdmUgKi8p
OworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0MDAwMjtcbiIKKwkJCQkrICJpbXBv
cnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIgorCQkJCSsgInB1YmxpYyBjbGFzcyBY
IHtcbiIKKwkJCQkrICIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xu
IgorCQkJCSsgIgkJT3V0ZXIgb3V0ZXIgPSBuZXcgT3V0ZXIoKTtcbiIKKwkJCQkrICIJCU9iamVj
dCBteU9iamVjdCA9IG5ldyBPYmplY3QoKTtcbiIKKwkJCQkrICIJCVN0cmluZyBteVN0cmluZztc
biIKKwkJCQkrICIJCW15U3RyaW5nID0gKGphdmEubGFuZy5ATWFya2VyIFN0cmluZykgbXlPYmpl
Y3Q7XG4iCisJCQkJKyAiCQlPdXRlci5Jbm5lciBmaXJzdCA9IG91dGVyLm5ldyBJbm5lcigpO1xu
IgorCQkJCSsgIgkJT3V0ZXIuIEBNYXJrZXIyIElubmVyIHNlY29uZCA9IG91dGVyLm5ldyBJbm5l
cigpIDtcbiIKKwkJCQkrICIJCU91dGVyLklubmVyLiBATWFya2VyMSBEZWVwZXIgZGVlcGVyID0g
c2Vjb25kLm5ldyBEZWVwZXIoKTtcbiIKKwkJCQkrICIJCU91dGVyLkBNYXJrZXIxIElubmVyLkBN
YXJrZXIyIERlZXBlciBkZWVwZXIyID0gIHNlY29uZC5uZXcgRGVlcGVyKCk7XG4iCisJCQkJKyAi
CX1cbiIgKyAifVxuIiArICJjbGFzcyBPdXRlciB7XG4iCisJCQkJKyAiCXB1YmxpYyBjbGFzcyBJ
bm5lciB7XG4iICsgIgkJcHVibGljIGNsYXNzIERlZXBlciB7XG4iCisJCQkJKyAiCQl9XG4iICsg
Igl9XG4iICsgIn1cbiIKKwkJCQkrICJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVt
ZW50VHlwZS5UWVBFX1VTRSlcbiIKKwkJCQkrICJAaW50ZXJmYWNlIE1hcmtlciB7fVxuIgorCQkJ
CSsgIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxu
IgorCQkJCSsgIkBpbnRlcmZhY2UgTWFya2VyMSB7fVxuIgorCQkJCSsgIkBUYXJnZXQgKGphdmEu
bGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIgorCQkJCSsgIkBpbnRlcmZh
Y2UgTWFya2VyMiB7fVxuIjsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5p
dCkgYnVpbGRBU1QoY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCU1ldGhvZERl
Y2xhcmF0aW9uIG1ldGhvZERlY2xhcmF0aW9uID0gKE1ldGhvZERlY2xhcmF0aW9uKSBnZXRBU1RO
b2RlKAorCQkJCWN1LCAwLCAwKTsKKwkJTGlzdCBzdGF0ZW1lbnRzID0gbWV0aG9kRGVjbGFyYXRp
b24uZ2V0Qm9keSgpLnN0YXRlbWVudHMoKTsKKwkJaW50IHNDb3VudCA9IDM7CisKKwkJLy8gY2Fz
ZSAxIC0gYW5ub3RhdGlvbiBqdXN0IGJlZm9yZSB0aGUgbGFzdCBmaWVsZAorCQlFeHByZXNzaW9u
U3RhdGVtZW50IGV4cHJlc3Npb25TdGF0ZW1lbnQgPSAoRXhwcmVzc2lvblN0YXRlbWVudCkgc3Rh
dGVtZW50cworCQkJCS5nZXQoc0NvdW50KyspOworCQlBc3NpZ25tZW50IGFzc2lnbm1lbnQgPSAo
QXNzaWdubWVudCkgZXhwcmVzc2lvblN0YXRlbWVudAorCQkJCS5nZXRFeHByZXNzaW9uKCk7CisJ
CWFzc2VydE5vdE51bGwoYXNzaWdubWVudCk7CisJCUNhc3RFeHByZXNzaW9uIGNhc3RFeHByZXNz
aW9uID0gKENhc3RFeHByZXNzaW9uKSBhc3NpZ25tZW50CisJCQkJLmdldFJpZ2h0SGFuZFNpZGUo
KTsKKwkJYXNzZXJ0Tm90TnVsbChjYXN0RXhwcmVzc2lvbik7CisJCVNpbXBsZVR5cGUgc2ltcGxl
VHlwZSA9IChTaW1wbGVUeXBlKSBjYXN0RXhwcmVzc2lvbi5nZXRUeXBlKCk7CisJCWFzc2VydE5v
dE51bGwoc2ltcGxlVHlwZSk7CisJCWFzc2VydEVxdWFscygiamF2YS5sYW5nLkBNYXJrZXIgU3Ry
aW5nIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJTGlzdCBhbm5vdGF0aW9ucyA9IHNpbXBs
ZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0g
MSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlciIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmlu
ZygpKTsKKworCQkvLyBjYXNlIDIgLSBRdWFsaWZpZWRUeXBlIHdpdGhvdXQgYW5ub3RhdGlvbnMu
CisJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzCisJCQkJLmdl
dChzQ291bnQrKyk7CisJCVR5cGUgdHlwZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQu
Z2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVU
eXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBz
aW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3Rh
dGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisKKwkJLy8g
Y2FzZSAzIC0gUWF1bGlmaWVkIFR5cGUgd2l0aCBvdXRlciB3aXRob3V0IGFubm90YXRpb25zIGFu
ZCBpbm5lciB3aXRoCisJCS8vIGFubm90YXRpb25zLgorCQl2YXJpYWJsZURlY2xhcmF0aW9uU3Rh
dGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMKKwkJCQku
Z2V0KHNDb3VudCsrKTsKKwkJdHlwZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0
VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBl
ID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydE5vdE51bGwoc2ltcGxlVHlwZSk7CisJCWFz
c2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjIgSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkp
OworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1
ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBh
bm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA0IC0gTXVsdGlwbGUg
bGV2ZWxzIHdpdGggYW5ub3RhdGlvbnMgYXQgdGhlIGxhc3Qgb25seS4KKwkJdmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1l
bnRzCisJCQkJLmdldChzQ291bnQrKyk7CisJCXR5cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3Rh
dGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJ
c2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhc3NlcnROb3ROdWxsKHNpbXBsZVR5
cGUpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkBNYXJrZXIxIERlZXBlciIsIHNpbXBs
ZVR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9u
cygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1
YWxzKCJATWFya2VyMSIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKworCQkvLyBj
YXNlIDUgLSBNdWx0aXBsZSBhbm5vdGF0aW9ucworCQl2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMKKwkJCQkuZ2V0
KHNDb3VudCsrKTsKKwkJdHlwZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlw
ZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlRdWFsaWZpZWRU
eXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0Tm90TnVs
bChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lci5A
TWFya2VyMiBEZWVwZXIiLAorCQkJCXF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRp
b25zLmdldCgwKS50b1N0cmluZygpKTsKKwkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gcXVhbGlm
aWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgc2ltcGxlTmFtZS50
b1N0cmluZygpKTsKKwkJVHlwZSBxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFs
aWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJ
c2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMo
Ik91dGVyLkBNYXJrZXIxIElubmVyIiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3Rh
dGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlv
bnMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbnMu
Z2V0KDApLnRvU3RyaW5nKCkpOworCX0KKworCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNl
Lm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYgdGVzdHMgdGhlCisJICogcmVwcmVzZW50
YXRpb24gb2YgdHlwZSBhbm5vdGF0aW9ucyBvbiBhIHBvc3NpYmxlIEpBVkEgNyBhbmQgOCBwbGFj
ZS4KKwkgKiAKKwkgKiBAdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2
b2lkIHRlc3QwMDAzKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29ya2lu
Z0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0MDAwMy9YLmphdmEi
LAorCQkJCXRydWUvKiByZXNvbHZlICovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gInBhY2thZ2Ug
dGVzdDAwMDM7XG4iCisJCQkJKyAiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtc
biIKKwkJCQkrICJwdWJsaWMgY2xhc3MgWCB7XG4iCisJCQkJKyAiCXB1YmxpYyBzdGF0aWMgdm9p
ZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiIKKwkJCQkrICIJCUBNYXJrZXIgT3V0ZXIuSW5uZXIg
Zmlyc3RbXSA9IG5ldyBPdXRlci5Jbm5lclsxXTtcbiIKKwkJCQkrICIJfVxuIiArICJ9XG4iICsg
ImNsYXNzIE91dGVyIHtcbiIKKwkJCQkrICIJcHVibGljIGNsYXNzIElubmVyIHtcbiIgKyAiCX1c
biIgKyAifVxuIgorCQkJCSsgIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIgorCQkJCSsgIkBpbnRlcmZhY2UgTWFya2VyIHt9XG4iOworCQlDb21w
aWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25Vbml0KSBidWlsZEFTVChjb250ZW50cywKKwkJ
CQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRp
b24gPSAoTWV0aG9kRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoCisJCQkJY3UsIDAsIDApOworCQlM
aXN0IHN0YXRlbWVudHMgPSBtZXRob2REZWNsYXJhdGlvbi5nZXRCb2R5KCkuc3RhdGVtZW50cygp
OworCQlpbnQgc0NvdW50ID0gMDsKKworCQkvLyBDdXJyZW50IGRlc2lnbiBleHBlY3RzIGFubm90
YXRpb24gb25seSBhdCB0aGUgSkFWQSA3IHBsYWNlIGlmIGl0IGlzCisJCS8vIGV4cGVjdGVkIGF0
IEpBVkEgOC4KKwkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0
aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMK
KwkJCQkuZ2V0KHNDb3VudCk7CisJCUxpc3QgbW9kaWZpZXJzID0gdmFyaWFibGVEZWNsYXJhdGlv
blN0YXRlbWVudC5tb2RpZmllcnMoKTsKKwkJYXNzZXJ0VHJ1ZShtb2RpZmllcnMuc2l6ZSgpID09
IDEpOworCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgbW9kaWZpZXJzLmdl
dCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsK
KwkJVHlwZSB0eXBlID0gdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5nZXRUeXBlKCk7CisJ
CWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlw
ZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklubmVyIiwgc2lt
cGxlVHlwZS50b1N0cmluZygpKTsKKwkJTGlzdCBhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJfQor
CisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lk
PTM5NTg4NiB0ZXN0cyBRVFIgd2l0aAorCSAqIGFubm90YXRpb25zCisJICogCisJICogQHRocm93
cyBKYXZhTW9kZWxFeGNlcHRpb24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwNCgpIHRocm93
cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0Nv
cHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDAwMDQvWC5qYXZhIiwKKwkJCQl0cnVlLyogcmVzb2x2
ZSAqLyk7CisJCVN0cmluZyBjb250ZW50cyA9ICJwYWNrYWdlIHRlc3QwMDA0OyIKKwkJCQkrICJp
bXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIgorCQkJCSsgInB1YmxpYyBjbGFz
cyBYIGltcGxlbWVudHMgT25lPC8qc3RhcnQqL0BNYXJrZXIxIE91dGVyPEludGVnZXI+LiBATWFy
a2VyMiBJbm5lcjxEb3VibGU+W10vKmVuZCovPiB7XG4iCisJCQkJKyAifVxuIiArICJpbnRlcmZh
Y2UgT25lPFQ+IHt9XG4iICsgImNsYXNzIE91dGVyPFQ+IHtcbiIKKwkJCQkrICIJcHVibGljIGNs
YXNzIElubmVyPFM+IHt9XG4iICsgIn1cbiIKKwkJCQkrICJAVGFyZ2V0IChqYXZhLmxhbmcuYW5u
b3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIKKwkJCQkrICJAaW50ZXJmYWNlIE1hcmtl
cjEge31cbiIKKwkJCQkrICJAVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlw
ZS5UWVBFX1VTRSlcbiIKKwkJCQkrICJAaW50ZXJmYWNlIE1hcmtlcjIge31cbiI7CisJCUNvbXBp
bGF0aW9uVW5pdCBjdSA9IChDb21waWxhdGlvblVuaXQpIGJ1aWxkQVNUKGNvbnRlbnRzLAorCQkJ
CXRoaXMud29ya2luZ0NvcHkpOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0g
KFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMCk7CisJCUFycmF5VHlwZSB0eXBlID0g
KEFycmF5VHlwZSkgKChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1
cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCkpLnR5cGVBcmd1bWVudHMoKS5nZXQoMCk7CisJCWFz
c2VydE5vdE51bGwoIk5vIGFubm90YXRpb24iLCB0eXBlKTsKKwkJSVR5cGVCaW5kaW5nIGJpbmRp
bmcgPSB0eXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmci
LCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsCisJCQkJ
InRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91Ymxl
PltdIiwKKwkJCQliaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCVR5cGUgY29tcG9uZW50
VHlwZSA9IHR5cGUuZ2V0Q29tcG9uZW50VHlwZSgpOworCQliaW5kaW5nID0gY29tcG9uZW50VHlw
ZS5yZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGlu
Zyk7CisJCWFzc2VydEVxdWFscygiV3JvbmcgcXVhbGlmaWVkIG5hbWUiLAorCQkJCSJ0ZXN0MDAw
NC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT4iLAorCQkJ
CWJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRl
cml6ZWQiLCBjb21wb25lbnRUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCVBhcmFtZXRl
cml6ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBjb21wb25l
bnRUeXBlOworCQlUeXBlIHR5cGUyID0gcGFyYW1ldGVyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlh
c3NlcnRUcnVlKCJOb3QgcXVhbGlmaWVkIiwgdHlwZTIuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlR
dWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTI7CisJCWJp
bmRpbmcgPSBxdWFsaWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwo
Ik5vIGJpbmRpbmciLCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQg
bmFtZSIsCisJCQkJInRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZh
LmxhbmcuRG91YmxlPiIsCisJCQkJYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOworCQlUeXBl
IHF1YWxpZmllciA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUo
Ik5vdCBwYXJhbWV0ZXJpemVkIiwgcXVhbGlmaWVyLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJ
CWJpbmRpbmcgPSBxdWFsaWZpZXIucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgi
Tm8gYmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBu
YW1lIiwKKwkJCQkidGVzdDAwMDQuT3V0ZXI8amF2YS5sYW5nLkludGVnZXI+IiwgYmluZGluZy5n
ZXRRdWFsaWZpZWROYW1lKCkpOworCQlwYXJhbWV0ZXJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVk
VHlwZSkgcXVhbGlmaWVyOworCQl0eXBlMiA9IHBhcmFtZXRlcml6ZWRUeXBlLmdldFR5cGUoKTsK
KwkJYXNzZXJ0VHJ1ZSgiTm90IHNpbXBsZSB0eXBlIiwgdHlwZTIuaXNTaW1wbGVUeXBlKCkpOwor
CQliaW5kaW5nID0gdHlwZTIucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiTm8g
YmluZGluZyIsIGJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIHF1YWxpZmllZCBuYW1l
IiwKKwkJCQkidGVzdDAwMDQuT3V0ZXI8amF2YS5sYW5nLkludGVnZXI+IiwgYmluZGluZy5nZXRR
dWFsaWZpZWROYW1lKCkpOworCX0KKworCS8qKgorCSAqIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9y
Zy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTU4ODYgdGVzdHMgUVRSIHdpdGgKKwkgKiBhbm5vdGF0
aW9ucworCSAqIAorCSAqIEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVibGlj
IHZvaWQgdGVzdDAwMDUoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53b3Jr
aW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDA1L1guamF2
YSIsCisJCQkJdHJ1ZS8qIHJlc29sdmUgKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2Fn
ZSB0ZXN0MDAwNTsiCisJCQkJKyAiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtc
biIKKwkJCQkrICJwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIE9uZTwgT3V0ZXIuSW5uZXIgPiB7
XG4iCisJCQkJKyAifVxuIgorCQkJCSsgImNsYXNzIFkgaW1wbGVtZW50cyBPbmU8IE91dGVyLiBA
TWFya2VyMSBJbm5lciA+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xhc3MgWiBpbXBsZW1l
bnRzIE9uZTwgQE1hcmtlcjEgT3V0ZXIuSW5uZXIgPiB7XG4iCisJCQkJKyAifVxuIgorCQkJCSsg
ImNsYXNzIFcgaW1wbGVtZW50cyBPbmU8IEBNYXJrZXIxIE91dGVyLiBATWFya2VyMiBJbm5lciA+
IHtcbiIKKwkJCQkrICJ9XG4iICsgImludGVyZmFjZSBPbmU8VD4ge31cbiIgKyAiY2xhc3MgT3V0
ZXIge1xuIgorCQkJCSsgIglwdWJsaWMgY2xhc3MgSW5uZXIge31cbiIgKyAifVxuIgorCQkJCSsg
IkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIgor
CQkJCSsgIkBpbnRlcmZhY2UgTWFya2VyMSB7fVxuIgorCQkJCSsgIkBUYXJnZXQgKGphdmEubGFu
Zy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIgorCQkJCSsgIkBpbnRlcmZhY2Ug
TWFya2VyMiB7fVxuIjsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkg
YnVpbGRBU1QoY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWludCB0Q291bnQg
PSAwOworCisJCS8vIGNhc2UgMSAtIG5vIGFubm90YXRpb25zIE91dGVyLklubmVyCisJCVR5cGVE
ZWNsYXJhdGlvbiB0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2Rl
KGN1LAorCQkJCXRDb3VudCsrKTsKKwkJUGFyYW1ldGVyaXplZFR5cGUgcGFyYW1ldHJpemVkVHlw
ZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJm
YWNlVHlwZXMoKS5nZXQoMCk7CisJCUxpc3QgdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5
cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXpl
KCkpOworCQlUeXBlIHR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2Vy
dFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIi
LCB0eXBlLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgMiAtIFFUUiB3aXRoIG9uZSBhbm5vdGF0
aW9uIE91dGVyLkBNYXJrZXIxIElubmVyCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFy
YXRpb24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQ
YXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlw
ZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJdHlw
ZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2lt
cGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3Ry
aW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJQW5ub3RhdGlvbiBhbm5v
dGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxz
KCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSAzIC0gUVRS
IHdpdGggb25lIGFubm90YXRpb24gYXQgdGhlIGJlZ2lubmluZyBATWFya2VyMQorCQkvLyBPdXRl
ci5Jbm5lcgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2Rl
KGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUp
IHR5cGVkZWNsYXJhdGlvbgorCQkJCS5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIuSW5uZXIiLCB0eXBlLnRvU3RyaW5nKCkpOwor
CQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJ
YXNzZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkp
OworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0
VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmco
KSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRU
cnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9u
KSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0
aW9uLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNCAtIFFUUiB3aXRoIGFubm90YXRpb25zIGF0
IGJvdGggdGhlIHR5cGVzIEBNYXJrZXIxCisJCS8vIE91dGVyLkBNYXJrZXIyIElubmVyCisJCXR5
cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsr
KTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0
aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMg
PSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5
cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgw
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJYXNzZXJ0RXF1YWxz
KCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXF1
YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5l
ciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9
IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5z
aXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0
KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsK
KwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2Vy
dFRydWUocXVhbGlmaWVyVHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2lt
cGxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIs
IHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5v
dGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5u
b3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJfQorCisJLyoqCisJICog
aHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NiB0ZXN0
cyBQUVRSIHdpdGgKKwkgKiBhbm5vdGF0aW9ucyBwYXJ0CisJICogCisJICogQHRocm93cyBKYXZh
TW9kZWxFeGNlcHRpb24KKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwNigpIHRocm93cyBKYXZh
TW9kZWxFeGNlcHRpb24geworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9D
b252ZXJ0ZXIxOC9zcmMvdGVzdDAwMDYvWC5qYXZhIiwKKwkJCQl0cnVlKTsKKwkJU3RyaW5nIGNv
bnRlbnRzID0gInBhY2thZ2UgdGVzdDAwMDY7IgorCQkJCSsgImltcG9ydCBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQ7XG4iCisJCQkJKyAicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBPbmU8
T3V0ZXIuICBJbm5lci5EZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJj
bGFzcyBYMSBpbXBsZW1lbnRzIE9uZTxPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJs
ZT4+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xhc3MgWDIgaW1wbGVtZW50cyBPbmU8T3V0
ZXIuIEBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iCisJCQkJKyAi
fVxuIgorCQkJCSsgImNsYXNzIFgzIGltcGxlbWVudHMgT25lPEBNYXJrZXIxIE91dGVyLiBATWFy
a2VyMiBJbm5lci4gRGVlcGVyPERvdWJsZT4+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xh
c3MgWSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91Ymxl
Pj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBZMSBpbXBsZW1lbnRzIE9uZTxPdXRl
cjEuIElubmVyPEludGVnZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsg
In1cbiIKKwkJCQkrICJjbGFzcyBZMiBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIEBNYXJrZXIxIElu
bmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJj
bGFzcyBZMyBpbXBsZW1lbnRzIE9uZTxATWFya2VyMSBPdXRlcjEuIElubmVyPEludGVnZXI+LiBE
ZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBZNCBpbXBsZW1l
bnRzIE9uZTxATWFya2VyMSBPdXRlcjEuIEBNYXJrZXIyIElubmVyPEludGVnZXI+LiBEZWVwZXI8
RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBaIGltcGxlbWVudHMgT25l
PE91dGVyMjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIK
KwkJCQkrICJjbGFzcyBaMSBpbXBsZW1lbnRzIE9uZTxATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4u
SW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xhc3MgWjIg
aW1wbGVtZW50cyBPbmU8T3V0ZXIyPEludGVnZXI+LiBATWFya2VyMSBJbm5lci5ATWFya2VyMiBE
ZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBXIGltcGxlbWVu
dHMgT25lPE91dGVyMzxEb3VibGU+LiBATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLCBD
aGFyYWN0ZXI+LiBEZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIgKyAiaW50ZXJmYWNl
IE9uZTxUPiB7fVxuIiArICJjbGFzcyBPdXRlciB7XG4iCisJCQkJKyAiCXB1YmxpYyBjbGFzcyBJ
bm5lciB7XG4iCisJCQkJKyAiICAgICAgIHB1YmxpYyBjbGFzcyBEZWVwZXI8Uz4ge1xuIiArICIg
ICAgICAgfVxuIiArICIgICB9XG4iCisJCQkJKyAifVxuIiArICJjbGFzcyBPdXRlcjEge1xuIiAr
ICIJcHVibGljIGNsYXNzIElubmVyPFQ+IHtcbiIKKwkJCQkrICIgICAgICAgcHVibGljIGNsYXNz
IERlZXBlcjxTPiB7XG4iICsgIiAgICAgICB9XG4iICsgIiAgIH1cbiIKKwkJCQkrICJ9XG4iICsg
ImNsYXNzIE91dGVyMiA8VD4ge1xuIiArICIJcHVibGljIGNsYXNzIElubmVyIHtcbiIKKwkJCQkr
ICIgICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7fVxuIiArICIgICB9XG4iICsgIn1cbiIK
KwkJCQkrICJjbGFzcyBPdXRlcjMgPFQ+IHtcbiIgKyAiCXB1YmxpYyBjbGFzcyBJbm5lcjxLLCBW
PiB7XG4iCisJCQkJKyAiICAgICAgIHB1YmxpYyBjbGFzcyBEZWVwZXI8Uz4ge31cbiIgKyAiICAg
fVxuIiArICJ9XG4iCisJCQkJKyAiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9VU0UpXG4iCisJCQkJKyAiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iCisJCQkJ
KyAiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4i
CisJCQkJKyAiQGludGVyZmFjZSBNYXJrZXIyIHt9XG4iOworCQlDb21waWxhdGlvblVuaXQgY3Ug
PSAoQ29tcGlsYXRpb25Vbml0KSBidWlsZEFTVChjb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdD
b3B5KTsKKwkJaW50IHRDb3VudCA9IDA7CisKKwkJLy8gY2FzZSAxOiB2YW5pbGxhIGNhc2Ugd2l0
aG91dCBhbm5vdGF0aW9ucyBhbmQgd2l0aCBzaW5nbGUgdHlwZUFyZ3VtZW50CisJCS8vIE91dGVy
LklubmVyLkRlZXBlcjxEb3VibGU+CisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlZGVjbGFyYXRpb24g
PSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LAorCQkJCXRDb3VudCsrKTsKKwkJUGFy
YW1ldGVyaXplZFR5cGUgcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlw
ZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCUxpc3Qg
dHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3Nl
cnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxz
KCJPdXRlci5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmco
KSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsK
KwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJVHlwZSB0eXBlID0g
KFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5
cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJ
YXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBl
ID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIuRGVlcGVy
Iiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJTmFtZSBuYW1lID0gc2ltcGxlVHlwZS5nZXRO
YW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUoKSk7CisJCVF1YWxpZmll
ZE5hbWUgcXVhbGlmaWVkTmFtZSA9IChRdWFsaWZpZWROYW1lKSBuYW1lOworCQlhc3NlcnRFcXVh
bHMoIk91dGVyLklubmVyLkRlZXBlciIsIHF1YWxpZmllZE5hbWUudG9TdHJpbmcoKSk7CisKKwkJ
Ly8gY2FzZSAyIC0gT25lIGFubm90YXRpb24gYWZ0ZXIgdGhlIGZpcnN0IGNsYXNzCisJCS8vIE91
dGVyLiBATWFya2VyMSBJbm5lci5EZWVwZXI8RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAo
VHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXpl
ZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbgorCQkJCS5zdXBlcklu
dGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUo
KSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVBcmd1bWVu
dHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVyLkRlZXBlcjxE
b3VibGU+IiwKKwkJCQlwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1l
bnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlw
ZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5n
ZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlw
ZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFs
aWZpZWRUeXBlKCkpOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVk
VHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lci5EZWVwZXIi
LCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXRO
YW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJTGlz
dCBhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1
ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1Np
bXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHNpbXBsZVR5cGUudG9TdHJp
bmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3Nl
cnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJQW5ub3RhdGlvbiBhbm5vdGF0aW9u
ID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFy
a2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSAzIC0gSW5uZXIgdHlw
ZXMgYW5ub3RhdGVkIHdpdGggb3V0ZXIgbm90IGFubm90YXRlZCB3aXRoIGxhc3QKKwkJLy8gdHlw
ZSBhcmcKKwkJLy8gT3V0ZXIuIEBNYXJrZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+
CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIHRD
b3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRl
Y2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxz
KDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0
ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIu
QE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVyPERvdWJsZT4iLAorCQkJCXBhcmFtZXRyaXpl
ZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5
cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsK
KwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJE
b3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRU
eXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmll
ZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFy
a2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIiLAorCQkJCXF1YWxpZmllZFR5cGUudG9TdHJpbmco
KSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJE
ZWVwZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJ
CWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlw
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVy
VHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlm
aWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHNpbXBsZVR5
cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygp
OworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9
IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtl
cjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNCAtIG9uZSBhbm5vdGF0
aW9uIG9uIHRoZSBvdXRlcm1vc3QsIG9uZSBpbiBtaWRkbGUgYW5kIG9uZQorCQkvLyB0eXBlYXJn
IGluIGlubmVybW9zdAorCQkvLyBATWFya2VyMSBPdXRlci4gQE1hcmtlcjIgSW5uZXIuIERlZXBl
cjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5v
ZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlw
ZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJ
CXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNz
ZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9
IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIuRGVlcGVyPERvdWJsZT4iLAorCQkJCXBh
cmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCUlUeXBlQmluZGluZyB0eXBlQmluZGluZyA9
IHBhcmFtZXRyaXplZFR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiQmlu
ZGluZyBub24tbnVsbCIsIHR5cGVCaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJ3cm9uZyBxdWFs
aWZpZWQgbmFtZSIsCisJCQkJInRlc3QwMDA2Lk91dGVyLklubmVyLkRlZXBlcjxqYXZhLmxhbmcu
RG91YmxlPiIsCisJCQkJdHlwZUJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwkJYXNzZXJ0
VHJ1ZSgiTm90IGEgUGFyYW1ldGVyaXplZCBUeXBlIiwKKwkJCQl0eXBlQmluZGluZy5pc1BhcmFt
ZXRlcml6ZWRUeXBlKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBl
QXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJ
CXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91
YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlw
ZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRU
eXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0
ZXIuQE1hcmtlcjIgSW5uZXIuRGVlcGVyIiwKKwkJCQlxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkp
OworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVl
cGVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFu
bm90YXRpb25zKCk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmll
cigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlx
dWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEgT3V0ZXIuQE1hcmtlcjIgSW5uZXIiLCBxdWFsaWZpZXJUeXBlLnRvU3Ry
aW5nKCkpOworCQl0eXBlQmluZGluZyA9IHF1YWxpZmllZFR5cGUucmVzb2x2ZUJpbmRpbmcoKTsK
KwkJYXNzZXJ0Tm90TnVsbCgiQmluZGluZyBub24tbnVsbCIsIHR5cGVCaW5kaW5nKTsKKwkJdHlw
ZUJpbmRpbmcgPSBxdWFsaWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydEVxdWFs
cygid3JvbmcgcXVhbGlmaWVkIG5hbWUiLCAidGVzdDAwMDYuT3V0ZXIuSW5uZXIiLAorCQkJCXR5
cGVCaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc0Fubm90YXRhYmxlKCkpOworCQlBbm5vdGF0YWJsZVR5cGUgYW5ub3RhdGFibGVUeXBlID0g
KEFubm90YXRhYmxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYW5ub3RhdGlvbnMgPSBhbm5vdGF0
YWJsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkg
PT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJbmFt
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFt
ZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJ
CWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxl
VHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUu
dG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChB
bm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEi
LCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgNSAtIHdpdGhvdXQgYW5ub3Rh
dGlvbnMsIGJ1dCB3aXRoIHR5cGVhcmdzIGF0IHNlY29uZCBhbmQgdGhpcmQKKwkJLy8gdHlwZXMK
KwkJLy8gT3V0ZXIxLiBJbm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xh
cmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlw
YXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24KKwkJ
CQkuc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFt
ZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3Vt
ZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdl
cj4uRGVlcGVyPERvdWJsZT4iLAorCQkJCXBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJ
CXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNz
ZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5n
KCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUo
dHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlw
ZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwg
cXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFt
ZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90
YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRU
eXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZp
ZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPiIsIHBhcmFtZXRy
aXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBl
LnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAx
KTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxz
KCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUu
Z2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVU
eXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsK
KwkJYXNzZXJ0VHJ1ZShuYW1lLmlzUXVhbGlmaWVkTmFtZSgpKTsKKwkJcXVhbGlmaWVkTmFtZSA9
IChRdWFsaWZpZWROYW1lKSBuYW1lOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lciIsIHF1
YWxpZmllZE5hbWUudG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA2IC0gQW5ub3QgaW4gYmV0d2Vl
biB0d28gUFFSVCB3aXRoIG91dGVybW9zdCBuZWl0aGVyIGFubm90YXRlZAorCQkvLyBub3IgaGF2
aW5nIHR5cGVhcmdzCisJCS8vIE91dGVyMS4gSW5uZXI8SW50ZWdlcj4uIEBNYXJrZXIxIERlZXBl
cjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5v
ZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlw
ZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJ
CXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNz
ZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9
IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIxLklubmVyPEludGVnZXI+LkBNYXJrZXIxIERlZXBlcjxEb3VibGU+IiwKKwkJCQlw
YXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJp
emVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXpl
KCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2Vy
dEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXpl
ZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOwor
CQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygi
T3V0ZXIxLklubmVyPEludGVnZXI+LkBNYXJrZXIxIERlZXBlciIsCisJCQkJcXVhbGlmaWVkVHlw
ZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3Nl
cnRFcXVhbHMoIkRlZXBlciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlx
dWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1
ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5
cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygi
T3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJ
dHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3Nl
cnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVB
cmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBlLnRvU3RyaW5n
KCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUo
dHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsK
KwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNRdWFs
aWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1YWxpZmllZE5hbWUpIG5hbWU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlmaWVkTmFtZS50b1N0cmluZygpKTsK
KworCQkvLyBjYXNlIDcgLSBPdXRlcm1vc3Qgc3RpbGwgZW1wdHkgKG5vIGFubm90YXRpb25zLCBu
byB0eXBlIGFyZ3MpLAorCQkvLyBmb2xsb3dlZCBieSBhbm5vdGF0aW9uLCBhbmQgdGhlbiB0eXBl
YXJncworCQkvLyBPdXRlcjEuIEBNYXJrZXIxIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91Ymxl
PgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LCB0
Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVk
ZWNsYXJhdGlvbgorCQkJCS5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJn
dW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFs
cygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1l
dGVyaXplZFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVy
MS5ATWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91YmxlPiIsCisJCQkJcGFyYW1ldHJp
emVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEp
OworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMo
IkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdl
dFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlm
aWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5A
TWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXIiLAorCQkJCXF1YWxpZmllZFR5cGUudG9TdHJp
bmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxz
KCJEZWVwZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5
cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7
CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3Nl
cnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJPdXRlcjEuQE1hcmtlcjEgSW5uZXI8SW50ZWdlcj4iLAorCQkJCXBhcmFtZXRyaXplZFR5
cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJ
dHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRl
Z2VyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlw
ZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0g
KFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLkBNYXJrZXIxIElubmVy
Iiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFu
bm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlh
bm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1
YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA4IC0g
U2ltaWxhciB0byBhYm92ZSwgYnV0IHdpdGggdGhlIG1ham9yIGRpZmZlcmVuY2Ugb2YKKwkJLy8g
YW5ub3RhdGlvbiBzaGlmdGVkIHRvIG91dGVybW9zdC4KKwkJLy8gQE1hcmtlcjEgT3V0ZXIxLiBJ
bm5lcjxJbnRlZ2VyPi4gRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVE
ZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBl
ID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24KKwkJCQkuc3VwZXJJbnRlcmZh
Y2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOwor
CQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdl
dCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVl
cGVyPERvdWJsZT4iLAorCQkJCXBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVB
cmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1l
bnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOwor
CQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5p
c1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlw
ZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVy
IiwKKwkJCQlxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlw
ZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgbmFtZS50b1N0cmluZygpKTsK
KwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRy
dWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVk
VHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1l
dGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUp
IHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLklubmVyPElu
dGVnZXI+IiwKKwkJCQlwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1l
bnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlw
ZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5n
ZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5
cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzUXVh
bGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOwor
CQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lciIsIHF1YWxpZmllZFR5cGUudG9T
dHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJbmFtZSA9IHF1YWxpZmll
ZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNTaW1wbGVOYW1lKCkpOworCQlh
c3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHF1YWxpZmll
ZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7
CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJYW5ub3RhdGlvbnMgPSBzaW1w
bGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09
IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUg
PSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShuYW1lLmlzU2ltcGxlTmFtZSgp
KTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEiLCBuYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNh
c2UgOTogc2NlbmFyaW8gb2YgdGhlIGFib3ZlIGNhc2UgcGx1cyBhbm90aGVyIGFubm90YXRpb24g
YXQKKwkJLy8gbWlkLWxldmVsLgorCQkvLyBATWFya2VyMSBPdXRlcjEuQE1hcmtlcjIgSW5uZXI8
SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFy
YXRpb24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQ
YXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlw
ZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFy
YW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyPEludGVnZXI+
LkRlZXBlcjxEb3VibGU+IiwKKwkJCQlwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElubmVyPElu
dGVnZXI+LkRlZXBlciIsCisJCQkJcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9
IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIG5hbWUu
dG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygp
OworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlw
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVy
VHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91
dGVyMS5ATWFya2VyMiBJbm5lcjxJbnRlZ2VyPiIsCisJCQkJcGFyYW1ldHJpemVkVHlwZS50b1N0
cmluZygpKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50
cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0g
KFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0
eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJ
CWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAo
UXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjEuQE1h
cmtlcjIgSW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9
IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5z
aXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0
KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsK
KwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNT
aW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsK
KwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJ
YW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5u
b3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90
YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9T
dHJpbmcoKSk7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShu
YW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEiLCBuYW1lLnRvU3Ry
aW5nKCkpOworCisJCS8vIGNhc2UgMTAgLSBQUVJUIHdpdGggdHdvIHR5cGUgYXJncyBidXQgd2l0
aG91dCBhbm5vdGF0aW9ucworCQkvLyBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJs
ZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwg
dENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBl
ZGVjbGFyYXRpb24KKwkJCQkuc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVh
bHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRl
cjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERvdWJsZT4iLAorCQkJCXBhcmFtZXRyaXplZFR5cGUu
dG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlw
ZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUi
LCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4u
SW5uZXIuRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJSVR5cGVCaW5kaW5n
IGJpbmRpbmcgPSBxdWFsaWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCW5hbWUgPSBxdWFs
aWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBuYW1lLnRvU3Ry
aW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJ
YXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUu
aXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1
YWxpZmllclR5cGU7CisJCWJpbmRpbmcgPSBxdWFsaWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LklubmVyIiwgcXVhbGlmaWVkVHlwZS50
b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCJ3cm9uZyBxdWFsaWZpZWQgYmluZGluZyIsCisJ
CQkJInRlc3QwMDA2Lk91dGVyMjxqYXZhLmxhbmcuSW50ZWdlcj4uSW5uZXIiLAorCQkJCWJpbmRp
bmcuZ2V0UXVhbGlmaWVkTmFtZSgpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgp
OworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVy
VHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlm
aWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBh
cmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1l
dHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5z
aXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFz
c2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0
cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjIiLCB0eXBlLnRvU3Ry
aW5nKCkpOworCisJCS8vIGNhc2UgMTEgLSBhbm5vdGF0aW9uIGF0IG91dGVybW9zdCBpbiBhZGRp
dGlvbiB0byBzY2VuYXJpbyBpbiBjYXNlIDEwLgorCQkvLyBATWFya2VyMSBPdXRlcjI8SW50ZWdl
cj4uSW5uZXIuRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJh
dGlvbikgZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBh
cmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24KKwkJCQkuc3VwZXJJbnRlcmZhY2VUeXBl
cygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3Vt
ZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJh
bWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERv
dWJsZT4iLAorCQkJCXBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVu
dHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBl
QXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdl
dCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBl
ID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxp
ZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJ
YXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyIiwKKwkJ
CQlxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXRO
YW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJYW5u
b3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5u
b3RhdGlvbnMuc2l6ZSgpID09IDApOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5n
ZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUXVhbGlmaWVkVHlw
ZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSBxdWFsaWZpZXJUeXBlOwor
CQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMjxJbnRlZ2VyPi5Jbm5lciIsIHF1YWxpZmll
ZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUg
PSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5
cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0
ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXpl
ZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgp
ID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIkludGVnZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVk
VHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIyIiwgdHlwZS50
b1N0cmluZygpKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxl
VHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFu
bm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVh
bHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKworCQkvLyBjYXNlIDEyIC0g
Tm8gYW5ub3RhdGlvbnMgYXQgb3V0ZXJtb3N0LCBidXQgb3V0ZXJtb3N0IGhhcworCQkvLyB0eXBl
QW5ub3RhdGlvbnMuCisJCS8vIE91dGVyMjxJbnRlZ2VyPi4gQE1hcmtlcjEgSW5uZXIuQE1hcmtl
cjIgRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikg
Z2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRl
cml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24KKwkJCQkuc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdl
dCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygp
OworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6
ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIgRGVlcGVy
PERvdWJsZT4iLAorCQkJCXBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0
eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRz
LmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1
YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uQE1hcmtlcjEgSW5uZXIuQE1hcmtlcjIg
RGVlcGVyIiwKKwkJCQlxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlm
aWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgbmFtZS50b1N0cmlu
ZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90
YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFu
bm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdl
dFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBl
KCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVyIiwgcXVhbGlmaWVk
VHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBx
dWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6
ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgw
KTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJ
CXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRU
cnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50
cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVB
cmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0
KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBl
ID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyIiwg
dHlwZS50b1N0cmluZygpKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwor
CQkvLyBjYXNlIDEzIC0gYSBsaXN0IG9mIGFubm90YXRpb25zIGFuZCBtdWx0aXBsZSB0eXBlQXJn
dW1lbnQgZWxlbWVudAorCQkvLyBsaXN0cy4KKwkJLy8gT3V0ZXIzPERvdWJsZT4uIEBNYXJrZXIx
IEBNYXJrZXIyIElubmVyPEludGVnZXIsIENoYXJhY3Rlcj4uCisJCS8vIERlZXBlcjxEb3VibGU+
CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIHRD
b3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRl
Y2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1
bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxz
KDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0
ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygKKwkJCQki
T3V0ZXIzPERvdWJsZT4uQE1hcmtlcjEgQE1hcmtlcjIgSW5uZXI8SW50ZWdlcixDaGFyYWN0ZXI+
LkRlZXBlcjxEb3VibGU+IiwKKwkJCQlwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0cmluZygp
KTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygKKwkJCQkiT3V0ZXIzPERvdWJsZT4uQE1hcmtlcjEgQE1h
cmtlcjIgSW5uZXI8SW50ZWdlcixDaGFyYWN0ZXI+LkRlZXBlciIsCisJCQkJcXVhbGlmaWVkVHlw
ZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3Nl
cnRFcXVhbHMoIkRlZXBlciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7
CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlw
YXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0
eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2Vy
dFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMik7CisJCWFzc2VydEVxdWFscygiSW50ZWdl
ciIsIHR5cGVBcmd1bWVudHMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQlhc3NlcnRFcXVhbHMoIkNo
YXJhY3RlciIsIHR5cGVBcmd1bWVudHMuZ2V0KDEpLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFy
YW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlh
bm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShh
bm5vdGF0aW9ucy5zaXplKCkgPT0gMik7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5v
dGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBh
bm5vdGF0aW9ucy5nZXQoMSkudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZp
ZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJh
bWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlw
ZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlw
ZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOwor
CQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGVBcmd1bWVudHMuZ2V0KDApLnRvU3RyaW5nKCkp
OworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJ
YXNzZXJ0RXF1YWxzKCJPdXRlcjMiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCX0KIH0KZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBz
ZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNU
TWF0Y2hlclRlc3QuamF2YQppbmRleCBhZDBjNmIwLi5jZjM5ZjBkIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVz
dC5qYXZhCkBAIC0xMzQ3LDQgKzEzNDcsMzMgQEAKIAkJeDEudmFyYXJnc0Fubm90YXRpb25zKCku
YWRkKHRoaXMuQU5PMSk7CiAJCWJhc2ljTWF0Y2goeDEpOwogCX0KKwkKKwkvLyBodHRwczovL2J1
Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJcHVibGljIHZvaWQg
dGVzdFF1YWxpZmllZFR5cGVBbm5vdGF0aW9uKCkgeworCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwo
KSA8IEFTVC5KTFM4KSB7CisJCQlyZXR1cm47CisJCX0KKwkJUXVhbGlmaWVkVHlwZSB4MSA9IHRo
aXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5OMSk7CisJCXgxLmFubm90YXRp
b25zKCkuYWRkKHRoaXMuQU5PMSk7CisJCXgxID0gdGhpcy5hc3QubmV3UXVhbGlmaWVkVHlwZSh4
MSwgdGhpcy5OMik7CisJCXgxLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJCWJhc2lj
TWF0Y2goeDEpOworCX0KKwkKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93
X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJcHVibGljIHZvaWQgdGVzdFBhcmFtZXRlcml6ZWRRdWFsaWZp
ZWRUeXBlQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsKCkgPCBBU1QuSkxT
OCkgeworCQkJcmV0dXJuOworCQl9CisJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IHRo
aXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5UMSwgdGhpcy5OMSk7IAorCQlxdWFsaWZpZWRU
eXBlLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMSk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHgx
ID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUocXVhbGlmaWVkVHlwZSk7CisJCXgxLnR5
cGVBcmd1bWVudHMoKS5hZGQodGhpcy5hc3QubmV3U2ltcGxlVHlwZSh0aGlzLmFzdC5uZXdTaW1w
bGVOYW1lKCJTTjEiKSkpOworCQlxdWFsaWZpZWRUeXBlID0gdGhpcy5hc3QubmV3UXVhbGlmaWVk
VHlwZSh4MSwgdGhpcy5OMik7CisJCXgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUo
cXVhbGlmaWVkVHlwZSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IHRoaXMuYXN0Lm5ld1Np
bXBsZVR5cGUodGhpcy5hc3QubmV3U2ltcGxlTmFtZSgiU04yIikpOworCQlzaW1wbGVUeXBlLmFu
bm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJCXgxLnR5cGVBcmd1bWVudHMoKS5hZGQoc2lt
cGxlVHlwZSk7CisJCWJhc2ljTWF0Y2goeDEpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FT
VENvbnZlcnRlci5qYXZhCmluZGV4IGFiOTFhYzguLjY1NmZiZDggMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVy
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3Jl
L2RvbS9BU1RDb252ZXJ0ZXIuamF2YQpAQCAtMzI2NCw2ICszMjY0LDEwIEBACiAJCQkJUGFyYW1l
dGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UgcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UgPSAoUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZl
cmVuY2U7CiAJCQkJY2hhcltdW10gdG9rZW5zID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UudG9rZW5zOwogCQkJCVR5cGVSZWZlcmVuY2VbXVtdIHR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOworCQkJCW9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbltdW10gdHlwZUFu
bm90YXRpb25zID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlv
bnM7CisJCQkJVHlwZVJlZmVyZW5jZVtdIGFyZ3VtZW50cyA9IG51bGw7CisJCQkJaW50IGxlbnRo
ID0gdG9rZW5zLmxlbmd0aDsKKwkJCQlpbnQgZmlyc3RUeXBlSW5kZXggPSBsZW50aCAtIDE7CiAJ
CQkJbG9uZ1tdIHBvc2l0aW9ucyA9IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LnNvdXJjZVBvc2l0aW9uczsKIAkJCQlzb3VyY2VTdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+
PjMyKTsKIAkJCQlzd2l0Y2godGhpcy5hc3QuYXBpTGV2ZWwpIHsKQEAgLTMyODEsMTI0ICszMjg1
LDE4NSBAQAogCQkJCQl9CiAJCQkJCWJyZWFrOwogCQkJCQlkZWZhdWx0IDoKLQkJCQkJCWlmICh0
eXBlQXJndW1lbnRzICE9IG51bGwpIHsKLQkJCQkJCQlpbnQgbnVtYmVyT2ZFbmNsb3NpbmdUeXBl
ID0gMDsKLQkJCQkJCQlpbnQgc3RhcnRpbmdJbmRleCA9IDA7Ci0JCQkJCQkJaW50IGVuZGluZ0lu
ZGV4ID0gMDsKLQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFyZ3VtZW50cy5sZW5n
dGg7IGkgPCBtYXg7IGkrKykgewotCQkJCQkJCQlpZiAodHlwZUFyZ3VtZW50c1tpXSAhPSBudWxs
KSB7Ci0JCQkJCQkJCQludW1iZXJPZkVuY2xvc2luZ1R5cGUrKzsKLQkJCQkJCQkJfSBlbHNlIGlm
IChudW1iZXJPZkVuY2xvc2luZ1R5cGUgPT0gMCkgewotCQkJCQkJCQkJZW5kaW5nSW5kZXgrKzsK
LQkJCQkJCQkJfQorCQkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW50aDsgKytpKSB7CisJCQkJ
CQkJaWYgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAmJiB0eXBlQXJndW1lbnRzW2ldICE9IG51bGwp
IHsKKwkJCQkJCQkJZmlyc3RUeXBlSW5kZXggPSBpOworCQkJCQkJCQlicmVhazsKIAkJCQkJCQl9
Ci0JCQkJCQkJTmFtZSBuYW1lID0gbnVsbDsKLQkJCQkJCQlpZiAoZW5kaW5nSW5kZXggLSBzdGFy
dGluZ0luZGV4ID09IDApIHsKLQkJCQkJCQkJZmluYWwgU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0g
bmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOwotCQkJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0
SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4XSkpOwotCQkJCQkJCQly
ZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsKLQkJCQkJCQkJaW50
IHN0YXJ0ID0gKGludCkocG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwotCQkJCQkJCQlp
bnQgZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdOwotCQkJCQkJCQlzaW1wbGVO
YW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOwotCQkJCQkJCQlzaW1w
bGVOYW1lLmluZGV4ID0gMTsKLQkJCQkJCQkJbmFtZSA9IHNpbXBsZU5hbWU7Ci0JCQkJCQkJCWlm
ICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewotCQkJCQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFt
ZSwgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJCQkJCX0KLQkJCQkJCQl9IGVsc2UgewotCQkJCQkJCQlu
YW1lID0gdGhpcy5zZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0b2tlbnMsIHBv
c2l0aW9ucywgZW5kaW5nSW5kZXgsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJCWlmICh0eXBlQW5u
b3RhdGlvbnMgIT0gbnVsbCAmJiB0eXBlQW5ub3RhdGlvbnNbaV0gIT0gbnVsbCkgeworCQkJCQkJ
CQlmaXJzdFR5cGVJbmRleCA9IGk7CisJCQkJCQkJCWJyZWFrOwogCQkJCQkJCX0KLQkJCQkJCQlT
aW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFzdCk7Ci0JCQkJCQkJ
c2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOwotCQkJCQkJCWludCBzdGFydCA9IChpbnQpKHBvc2l0
aW9uc1tzdGFydGluZ0luZGV4XT4+PjMyKTsKLQkJCQkJCQlpbnQgZW5kID0gKGludCkgcG9zaXRp
b25zW2VuZGluZ0luZGV4XTsKLQkJCQkJCQlzaW1wbGVUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0
LCBlbmQgLSBzdGFydCArIDEpOwotCQkJCQkJCWlmIChlbmRpbmdJbmRleCA9PSAwICYmIHR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJl
bmNlLmFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7Ci0JCQkJCQkJCWFubm90YXRlVHlwZShzaW1w
bGVUeXBlLCBhbm5vdGF0aW9ucyk7Ci0JCQkJCQkJfQotCQkJCQkJCVBhcmFtZXRlcml6ZWRUeXBl
IHBhcmFtZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFtZXRlcml6ZWRUeXBlKHRoaXMuYXN0KTsKLQkJ
CQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5zZXRUeXBlKHNpbXBsZVR5cGUpOworCQkJCQkJfQkJCQkJ
CQorCQkJCQkJCisJCQkJCQlOYW1lIG5hbWUgPSBudWxsOwkJCQkJCQorCQkJCQkJaWYgKGZpcnN0
VHlwZUluZGV4ID09IDApIHsKKwkJCQkJCQlmaW5hbCBTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBu
ZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CisJCQkJCQkJc2ltcGxlTmFtZS5zZXRJZGVudGlmaWVy
KG5ldyBTdHJpbmcodG9rZW5zWzBdKSk7CisJCQkJCQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJl
c29sdXRpb24oc2ltcGxlTmFtZSk7CisJCQkJCQkJaW50IHN0YXJ0ID0gKGludCkgKHBvc2l0aW9u
c1swXSA+Pj4gMzIpOworCQkJCQkJCWludCBlbmQgPSAoaW50KSBwb3NpdGlvbnNbMF07CisJCQkJ
CQkJc2ltcGxlTmFtZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJ
CQkJCQlzaW1wbGVOYW1lLmluZGV4ID0gMTsKKwkJCQkJCQluYW1lID0gc2ltcGxlTmFtZTsKIAkJ
CQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKLQkJCQkJCQkJcmVjb3JkTm9kZXMoc2lt
cGxlVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUs
IHR5cGVSZWZlcmVuY2UpOworCQkJCQkJCX0KKwkJCQkJCX0gZWxzZSB7CisJCQkJCQkJbmFtZSA9
IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRTb3VyY2VSYW5nZXModG9rZW5zLCBwb3NpdGlv
bnMsIGZpcnN0VHlwZUluZGV4LCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCX0KKwkJCQkJCQorCQkJ
CQkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gbmV3IFNpbXBsZVR5cGUodGhpcy5hc3QpOworCQkJ
CQkJc2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOworCQkJCQkJaW50IHN0YXJ0ID0gKGludCkocG9z
aXRpb25zWzBdID4+PiAzMik7CisJCQkJCQlpbnQgZW5kID0gKGludClwb3NpdGlvbnNbZmlyc3RU
eXBlSW5kZXhdOworCQkJCQkJc2ltcGxlVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0g
c3RhcnQgKyAxKTsKKwkJCQkJCWlmICh0eXBlQW5ub3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3Rh
dGlvbnMgPSB0eXBlQW5ub3RhdGlvbnNbZmlyc3RUeXBlSW5kZXhdKSAhPSBudWxsKSB7CisJCQkJ
CQkJYW5ub3RhdGVUeXBlKHNpbXBsZVR5cGUsIGFubm90YXRpb25zKTsKKwkJCQkJCX0KKwkJCQkJ
CWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZVR5
cGUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJfQorCQkJCQkJVHlwZSBjdXJyZW50VHlwZSA9IHNp
bXBsZVR5cGU7CQkJCQkJCisJCQkJCQlpbnQgaW5kZXhPZkVuY2xvc2luZ1R5cGUgPSAxOworCQkJ
CQkJaWYgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAmJiAoYXJndW1lbnRzID0gdHlwZUFyZ3VtZW50
c1tmaXJzdFR5cGVJbmRleF0pICE9IG51bGwpIHsKKwkJCQkJCQlpbnQgYXJnbGVuID0gYXJndW1l
bnRzLmxlbmd0aDsKKwkJCQkJCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZSA9
IG5ldyBQYXJhbWV0ZXJpemVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCQkJcGFyYW1ldGVyaXplZFR5
cGUuaW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlwZTsKKwkJCQkJCQlwYXJhbWV0ZXJpemVkVHlw
ZS5zZXRUeXBlKGN1cnJlbnRUeXBlKTsKKwkJCQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3Mp
IHsKIAkJCQkJCQkJcmVjb3JkTm9kZXMocGFyYW1ldGVyaXplZFR5cGUsIHR5cGVSZWZlcmVuY2Up
OwogCQkJCQkJCX0KLQkJCQkJCQlzdGFydCA9IHNpbXBsZVR5cGUuZ2V0U3RhcnRQb3NpdGlvbigp
OwotCQkJCQkJCWVuZCA9IHN0YXJ0ICsgc2ltcGxlVHlwZS5nZXRMZW5ndGgoKSAtIDE7Ci0JCQkJ
CQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHNbZW5kaW5nSW5kZXhdLmxlbmd0
aDsgaSA8IG1heDsgaSsrKSB7Ci0JCQkJCQkJCWZpbmFsIFR5cGUgdHlwZTIgPSBjb252ZXJ0VHlw
ZSh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XVtpXSk7CisJCQkJCQkJVHlwZSB0eXBlMiA9IG51
bGw7IAorCQkJCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgYXJnbGVuOyArK2kgKSB7CisJCQkJCQkJ
CXR5cGUyID0gY29udmVydFR5cGUoYXJndW1lbnRzW2ldKTsKIAkJCQkJCQkJcGFyYW1ldGVyaXpl
ZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0eXBlMik7Ci0JCQkJCQkJCWVuZCA9IHR5cGUyLmdl
dFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdldExlbmd0aCgpIC0gMTsKIAkJCQkJCQl9Ci0JCQkJ
CQkJaW50IGluZGV4T2ZFbmNsb3NpbmdUeXBlID0gMTsKLQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlw
ZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOworCQkJCQkJCWVuZCA9IHR5cGUyICE9IG51
bGwgPyB0eXBlMi5nZXRTdGFydFBvc2l0aW9uKCkgKyB0eXBlMi5nZXRMZW5ndGgoKSAtIDEgOiBl
bmQ7CiAJCQkJCQkJZW5kID0gcmV0cmlldmVDbG9zaW5nQW5nbGVCcmFja2V0UG9zaXRpb24oZW5k
ICsgMSk7Ci0JCQkJCQkJbGVuZ3RoID0gZW5kICsgMTsKIAkJCQkJCQlwYXJhbWV0ZXJpemVkVHlw
ZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKLQkJCQkJCQlzdGFydGlu
Z0luZGV4ID0gZW5kaW5nSW5kZXggKyAxOwotCQkJCQkJCVR5cGUgY3VycmVudFR5cGUgPSBwYXJh
bWV0ZXJpemVkVHlwZTsKLQkJCQkJCQl3aGlsZShzdGFydGluZ0luZGV4IDwgdHlwZUFyZ3VtZW50
cy5sZW5ndGgpIHsKLQkJCQkJCQkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5h
bWUodGhpcy5hc3QpOwotCQkJCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihu
ZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4XSkpOwotCQkJCQkJCQlzaW1wbGVOYW1lLmlu
ZGV4ID0gc3RhcnRpbmdJbmRleCArIDE7Ci0JCQkJCQkJCXN0YXJ0ID0gKGludCkocG9zaXRpb25z
W3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwotCQkJCQkJCQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3Rh
cnRpbmdJbmRleF07Ci0JCQkJCQkJCXNpbXBsZU5hbWUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVu
ZCAtIHN0YXJ0ICsgMSk7Ci0JCQkJCQkJCXJlY29yZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9u
KHNpbXBsZU5hbWUpOwotCQkJCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcg
UXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7Ci0JCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0UXVhbGlm
aWVyKGN1cnJlbnRUeXBlKTsKLQkJCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXROYW1lKHNpbXBsZU5h
bWUpOwotCQkJCQkJCQlpZiAodHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChh
bm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbc3RhcnRpbmdJbmRleF0pICE9
IG51bGwpIHsKLQkJCQkJCQkJCWFubm90YXRlVHlwZShxdWFsaWZpZWRUeXBlLCBhbm5vdGF0aW9u
cyk7Ci0JCQkJCQkJCX0KLQkJCQkJCQkJaWYgKHRoaXMucmVzb2x2ZUJpbmRpbmdzKSB7Ci0JCQkJ
CQkJCQlyZWNvcmROb2RlcyhzaW1wbGVOYW1lLCB0eXBlUmVmZXJlbmNlKTsKLQkJCQkJCQkJCXJl
Y29yZE5vZGVzKHF1YWxpZmllZFR5cGUsIHR5cGVSZWZlcmVuY2UpOwotCQkJCQkJCQl9Ci0JCQkJ
CQkJCXN0YXJ0ID0gY3VycmVudFR5cGUuZ2V0U3RhcnRQb3NpdGlvbigpOwotCQkJCQkJCQllbmQg
PSBzaW1wbGVOYW1lLmdldFN0YXJ0UG9zaXRpb24oKSArIHNpbXBsZU5hbWUuZ2V0TGVuZ3RoKCkg
LSAxOwotCQkJCQkJCQlxdWFsaWZpZWRUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBz
dGFydCArIDEpOwotCQkJCQkJCQlpbmRleE9mRW5jbG9zaW5nVHlwZSsrOwotCQkJCQkJCQlpZiAo
dHlwZUFyZ3VtZW50c1tzdGFydGluZ0luZGV4XSAhPSBudWxsKSB7Ci0JCQkJCQkJCQlxdWFsaWZp
ZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVuY2xvc2luZ1R5cGU7Ci0JCQkJCQkJCQlQYXJhbWV0ZXJp
emVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZTIgPSBuZXcgUGFyYW1ldGVyaXplZFR5cGUodGhpcy5h
c3QpOwotCQkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUyLnNldFR5cGUocXVhbGlmaWVkVHlwZSk7
Ci0JCQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZTIuaW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlw
ZTsKLQkJCQkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewotCQkJCQkJCQkJCXJlY29y
ZE5vZGVzKHBhcmFtZXRlcml6ZWRUeXBlMiwgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJCQkJCQl9Ci0J
CQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0gdHlwZUFyZ3VtZW50c1tzdGFydGluZ0luZGV4
XS5sZW5ndGg7IGkgPCBtYXg7IGkrKykgewotCQkJCQkJCQkJCWZpbmFsIFR5cGUgdHlwZTIgPSBj
b252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW3N0YXJ0aW5nSW5kZXhdW2ldKTsKLQkJCQkJCQkJCQlw
YXJhbWV0ZXJpemVkVHlwZTIudHlwZUFyZ3VtZW50cygpLmFkZCh0eXBlMik7Ci0JCQkJCQkJCQkJ
ZW5kID0gdHlwZTIuZ2V0U3RhcnRQb3NpdGlvbigpICsgdHlwZTIuZ2V0TGVuZ3RoKCkgLSAxOwot
CQkJCQkJCQkJfQotCQkJCQkJCQkJZW5kID0gcmV0cmlldmVDbG9zaW5nQW5nbGVCcmFja2V0UG9z
aXRpb24oZW5kICsgMSk7Ci0JCQkJCQkJCQlsZW5ndGggPSBlbmQgKyAxOwotCQkJCQkJCQkJcGFy
YW1ldGVyaXplZFR5cGUyLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOwot
CQkJCQkJCQkJY3VycmVudFR5cGUgPSBwYXJhbWV0ZXJpemVkVHlwZTI7Ci0JCQkJCQkJCX0gZWxz
ZSB7Ci0JCQkJCQkJCQljdXJyZW50VHlwZSA9IHF1YWxpZmllZFR5cGU7Ci0JCQkJCQkJCQlxdWFs
aWZpZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVuY2xvc2luZ1R5cGU7Ci0JCQkJCQkJCX0KLQkJCQkJ
CQkJc3RhcnRpbmdJbmRleCsrOworCQkJCQkJCWN1cnJlbnRUeXBlID0gcGFyYW1ldGVyaXplZFR5
cGU7CisJCQkJCQl9CisJCQkJCQkKKwkJCQkJCWZvciAoaW50IGkgPSBmaXJzdFR5cGVJbmRleCAr
IDE7IGkgPCBsZW50aDsgKytpKSB7CisJCQkJCQkJU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3
IFNpbXBsZU5hbWUodGhpcy5hc3QpOworCQkJCQkJCXNpbXBsZU5hbWUuc2V0SWRlbnRpZmllcihu
ZXcgU3RyaW5nKHRva2Vuc1tpXSkpOworCQkJCQkJCXNpbXBsZU5hbWUuaW5kZXggPSBpICsgMTsK
KwkJCQkJCQlzdGFydCA9IChpbnQpIChwb3NpdGlvbnNbaV0gPj4+IDMyKTsKKwkJCQkJCQllbmQg
PSAoaW50KSBwb3NpdGlvbnNbaV07CisJCQkJCQkJc2ltcGxlTmFtZS5zZXRTb3VyY2VSYW5nZShz
dGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVz
b2x1dGlvbihzaW1wbGVOYW1lKTsKKwkJCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUg
PSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXRR
dWFsaWZpZXIoY3VycmVudFR5cGUpOworCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0TmFtZShzaW1w
bGVOYW1lKTsKKwkJCQkJCQlpZiAodHlwZUFubm90YXRpb25zICE9IG51bGwgJiYgIChhbm5vdGF0
aW9ucyA9IHR5cGVBbm5vdGF0aW9uc1tpXSkgIT0gbnVsbCkgeworCQkJCQkJCQlhbm5vdGF0ZVR5
cGUocXVhbGlmaWVkVHlwZSwgYW5ub3RhdGlvbnMpOwogCQkJCQkJCX0KIAkJCQkJCQlpZiAodGhp
cy5yZXNvbHZlQmluZGluZ3MpIHsKLQkJCQkJCQkJdGhpcy5yZWNvcmROb2RlcyhjdXJyZW50VHlw
ZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5cGVS
ZWZlcmVuY2UpOworCQkJCQkJCQlyZWNvcmROb2RlcyhxdWFsaWZpZWRUeXBlLCB0eXBlUmVmZXJl
bmNlKTsKIAkJCQkJCQl9Ci0JCQkJCQkJdHlwZSA9IGN1cnJlbnRUeXBlOwotCQkJCQkJCWxlbmd0
aCAtPSBzb3VyY2VTdGFydDsKKwkJCQkJCQlzdGFydCA9IGN1cnJlbnRUeXBlLmdldFN0YXJ0UG9z
aXRpb24oKTsKKwkJCQkJCQllbmQgPSBzaW1wbGVOYW1lLmdldFN0YXJ0UG9zaXRpb24oKSArIHNp
bXBsZU5hbWUuZ2V0TGVuZ3RoKCkgLSAxOworCQkJCQkJCXF1YWxpZmllZFR5cGUuc2V0U291cmNl
UmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CisJCQkJCQkJY3VycmVudFR5cGUgPSBxdWFs
aWZpZWRUeXBlOworCQkJCQkJCWluZGV4T2ZFbmNsb3NpbmdUeXBlKys7CisJCQkJCQkJCisJCQkJ
CQkJaWYgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAmJiAoYXJndW1lbnRzID0gdHlwZUFyZ3VtZW50
c1tpXSkgIT0gbnVsbCkgeworCQkJCQkJCQlpbnQgYXJnbGVuID0gYXJndW1lbnRzLmxlbmd0aDsK
KwkJCQkJCQkJcXVhbGlmaWVkVHlwZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOworCQkJ
CQkJCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZSA9IG5ldyBQYXJhbWV0ZXJp
emVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLmluZGV4ID0gaW5k
ZXhPZkVuY2xvc2luZ1R5cGU7CisJCQkJCQkJCXBhcmFtZXRlcml6ZWRUeXBlLnNldFR5cGUoY3Vy
cmVudFR5cGUpOworCQkJCQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKKwkJCQkJCQkJ
CXJlY29yZE5vZGVzKHBhcmFtZXRlcml6ZWRUeXBlLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCQkJ
fQorCQkJCQkJCQlUeXBlIHR5cGUyID0gbnVsbDsgCisJCQkJCQkJCWZvciAoaW50IGogPSAwOyBq
IDwgYXJnbGVuOyArK2ogKSB7CisJCQkJCQkJCQl0eXBlMiA9IGNvbnZlcnRUeXBlKGFyZ3VtZW50
c1tqXSk7CisJCQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS50eXBlQXJndW1lbnRzKCkuYWRkKHR5
cGUyKTsKKwkJCQkJCQkJfQorCQkJCQkJCQllbmQgPSB0eXBlMiAhPSBudWxsID8gdHlwZTIuZ2V0
U3RhcnRQb3NpdGlvbigpICsgdHlwZTIuZ2V0TGVuZ3RoKCkgLSAxIDogZW5kOworCQkJCQkJCQll
bmQgPSByZXRyaWV2ZUNsb3NpbmdBbmdsZUJyYWNrZXRQb3NpdGlvbihlbmQgKyAxKTsKKwkJCQkJ
CQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsg
MSk7CisJCQkJCQkJCWN1cnJlbnRUeXBlID0gcGFyYW1ldGVyaXplZFR5cGU7CisJCQkJCQkJfSBl
bHNlIHsKKwkJCQkJCQkJcXVhbGlmaWVkVHlwZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBl
OworCQkJCQkJCX0KIAkJCQkJCX0KKwkJCQkJCXR5cGUgPSBjdXJyZW50VHlwZTsKIAkJCQl9Ci0J
CQl9IGVsc2UgaWYgKHR5cGVSZWZlcmVuY2UgaW5zdGFuY2VvZiBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHsKLQkJCQljaGFyW11b
XSBuYW1lID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmll
ZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2UpLmdldFR5cGVOYW1lKCk7Ci0JCQkJaW50IG5h
bWVMZW5ndGggPSBuYW1lLmxlbmd0aDsKKwkJCX0gZWxzZSBpZiAodHlwZVJlZmVyZW5jZSBpbnN0
YW5jZW9mIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSkgewkJCQorCQkJCVF1YWxpZmllZFR5cGVSZWZlcmVuY2UgcXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSA9IChRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKSB0eXBlUmVmZXJlbmNlOwogCQkJ
CWxvbmdbXSBwb3NpdGlvbnMgPSAoKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5h
c3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZSkuc291cmNlUG9zaXRpb25z
OworCQkJCW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbiBb
XVtdIHR5cGVBbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnM7CisJCQkJY2hh
ciBbXVtdIHRva2VucyA9IHF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zOworCQkJCWludCBs
ZW50aCA9IHRva2Vucy5sZW5ndGg7CisJCQkJaW50IGZpcnN0VHlwZUluZGV4ID0gbGVudGggLSAx
OworCQkJCQorCQkJCWlmICh0eXBlQW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJCQlmb3IgKGlu
dCBpID0gMDsgaSA8IGxlbnRoOyArK2kpIHsKKwkJCQkJCWlmICh0eXBlQW5ub3RhdGlvbnNbaV0g
IT0gbnVsbCkgeworCQkJCQkJCWZpcnN0VHlwZUluZGV4ID0gaTsKKwkJCQkJCQlicmVhazsKKwkJ
CQkJCX0KKwkJCQkJfQorCQkJCX0gIAogCQkJCXNvdXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25z
WzBdPj4+MzIpOwotCQkJCWxlbmd0aCA9IChpbnQpKHBvc2l0aW9uc1tuYW1lTGVuZ3RoIC0gMV0g
JiAweEZGRkZGRkZGKSAtIHNvdXJjZVN0YXJ0ICsgMTsKLQkJCQlmaW5hbCBOYW1lIHF1YWxpZmll
ZE5hbWUgPSB0aGlzLnNldFF1YWxpZmllZE5hbWVOYW1lQW5kU291cmNlUmFuZ2VzKG5hbWUsIHBv
c2l0aW9ucywgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJZmluYWwgU2ltcGxlVHlwZSBzaW1wbGVUeXBl
ID0gbmV3IFNpbXBsZVR5cGUodGhpcy5hc3QpOwotCQkJCXNpbXBsZVR5cGUuc2V0TmFtZShxdWFs
aWZpZWROYW1lKTsKLQkJCQl0eXBlID0gc2ltcGxlVHlwZTsKLQkJCQl0eXBlLnNldFNvdXJjZVJh
bmdlKHNvdXJjZVN0YXJ0LCBsZW5ndGgpOworCQkJCU5hbWUgbmFtZSA9IG51bGw7CisJCQkJaWYg
KGZpcnN0VHlwZUluZGV4ID09IDApIHsKKwkJCQkJZmluYWwgU2ltcGxlTmFtZSBzaW1wbGVOYW1l
ID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOworCQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0
SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1swXSkpOworCQkJCQlyZWNvcmRQZW5kaW5nTmFt
ZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsKKwkJCQkJaW50IHN0YXJ0ID0gKGludCkgKHBv
c2l0aW9uc1swXSA+Pj4gMzIpOworCQkJCQlpbnQgZW5kID0gKGludCkgcG9zaXRpb25zWzBdOwor
CQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQpOworCQkJCQlzaW1wbGVO
YW1lLmluZGV4ID0gMTsKKwkJCQkJbmFtZSA9IHNpbXBsZU5hbWU7CisJCQkJCWlmICh0aGlzLnJl
c29sdmVCaW5kaW5ncykgeworCQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFtZSwgdHlwZVJlZmVy
ZW5jZSk7CisJCQkJCX0JCQkJCQorCQkJCX0gZWxzZSB7CisJCQkJCW5hbWUgPSBzZXRRdWFsaWZp
ZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0b2tlbnMsIHBvc2l0aW9ucywgZmlyc3RUeXBlSW5k
ZXgsIHR5cGVSZWZlcmVuY2UpOworCQkJCX0KKwkJCQlTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBu
ZXcgU2ltcGxlVHlwZSh0aGlzLmFzdCk7CisJCQkJc2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOwor
CQkJCWludCBzdGFydCA9IChpbnQpKHBvc2l0aW9uc1swXSA+Pj4gMzIpOworCQkJCWludCBlbmQg
PSAoaW50KXBvc2l0aW9uc1tmaXJzdFR5cGVJbmRleF07CisJCQkJc2ltcGxlVHlwZS5zZXRTb3Vy
Y2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQlpZiAodHlwZUFubm90YXRpb25z
ICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZUFubm90YXRpb25zW2ZpcnN0VHlwZUluZGV4
XSkgIT0gbnVsbCkgeworCQkJCQlhbm5vdGF0ZVR5cGUoc2ltcGxlVHlwZSwgYW5ub3RhdGlvbnMp
OworCQkJCX0KKwkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKKwkJCQkJcmVjb3JkTm9k
ZXMoc2ltcGxlVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJfQorCQkJCVR5cGUgY3VycmVudFR5
cGUgPSBzaW1wbGVUeXBlOworCQkJCQorCQkJCWZvciAoaW50IGkgPSBmaXJzdFR5cGVJbmRleCAr
IDE7IGkgPCBsZW50aDsgKytpKSB7CisJCQkJCVNpbXBsZU5hbWUgc2ltcGxlTmFtZSA9IG5ldyBT
aW1wbGVOYW1lKHRoaXMuYXN0KTsKKwkJCQkJc2ltcGxlTmFtZS5pbnRlcm5hbFNldElkZW50aWZp
ZXIobmV3IFN0cmluZyh0b2tlbnNbaV0pKTsKKwkJCQkJc2ltcGxlTmFtZS5pbmRleCA9IGkgKyAx
OworCQkJCQlzdGFydCA9IChpbnQpIChwb3NpdGlvbnNbaV0gPj4+IDMyKTsKKwkJCQkJZW5kID0g
KGludCkgcG9zaXRpb25zW2ldOworCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0
LCBlbmQgLSBzdGFydCArMSk7CisJCQkJCXJlY29yZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9u
KHNpbXBsZU5hbWUpOworCQkJCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVh
bGlmaWVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCXF1YWxpZmllZFR5cGUuc2V0UXVhbGlmaWVyKGN1
cnJlbnRUeXBlKTsKKwkJCQkJcXVhbGlmaWVkVHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOworCQkJ
CQlpZiAodHlwZUFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlwZUFubm90
YXRpb25zW2ldKSAhPSBudWxsKSB7CisJCQkJCQlhbm5vdGF0ZVR5cGUocXVhbGlmaWVkVHlwZSwg
YW5ub3RhdGlvbnMpOworCQkJCQl9CisJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewor
CQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFtZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQlyZWNv
cmROb2RlcyhxdWFsaWZpZWRUeXBlLCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJfQorCQkJCQlzdGFy
dCA9IGN1cnJlbnRUeXBlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJCQkJZW5kID0gc2ltcGxlTmFt
ZS5nZXRTdGFydFBvc2l0aW9uKCkgKyBzaW1wbGVOYW1lLmdldExlbmd0aCgpIC0gMTsKKwkJCQkJ
cXVhbGlmaWVkVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJ
CQkJY3VycmVudFR5cGUgPSBxdWFsaWZpZWRUeXBlOworCQkJCQlxdWFsaWZpZWRUeXBlLmluZGV4
ICA9IDE7CisJCQkJfQorCQkJCXR5cGUgPSBjdXJyZW50VHlwZTsKIAkJCX0gZWxzZSB7CiAJCQkJ
VHlwZVJlZmVyZW5jZVtdIHR5cGVSZWZlcmVuY2VzID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0LlVuaW9uVHlwZVJlZmVyZW5jZSkgdHlwZVJlZmVyZW5jZSkudHlwZVJl
ZmVyZW5jZXM7CiAJCQkJc3dpdGNoKHRoaXMuYXN0LmFwaUxldmVsKSB7CmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0RlZmF1bHRC
aW5kaW5nUmVzb2x2ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdSZXNvbHZlci5qYXZhCmluZGV4IDE4YTIzMWEu
LjY1M2IwMWEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdSZXNvbHZlci5qYXZhCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdS
ZXNvbHZlci5qYXZhCkBAIC0xLDEwICsxLDE0IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgot
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgog
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqCisgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9m
IGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisg
KiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3Rp
bmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21w
YXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KKyAqIAogICogQ29udHJp
YnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1l
bnRhdGlvbgogICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yIEJ1ZyAz
NDI2NzEgLSBDbGFzc0Nhc3RFeGNlcHRpb246IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5sb29rdXAuU291cmNlVHlwZUJpbmRpbmcgY2Fubm90IGJlIGNhc3QgdG8gb3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5BcnJheUJpbmRpbmcKQEAgLTI4OCw4ICsy
OTIsMTEgQEAKIAlwcml2YXRlIGludCBnZXRUeXBlQXJndW1lbnRzKFBhcmFtZXRlcml6ZWRRdWFs
aWZpZWRUeXBlUmVmZXJlbmNlIHR5cGVSZWZlcmVuY2UpIHsKIAkJVHlwZVJlZmVyZW5jZVtdW10g
dHlwZUFyZ3VtZW50cyA9IHR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50czsKIAkJaW50IHZhbHVl
ID0gMDsKLQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOyBpIDwg
bWF4OyBpKyspIHsKLQkJCWlmICgodHlwZUFyZ3VtZW50c1tpXSAhPSBudWxsKSB8fCAodmFsdWUg
IT0gMCkpIHsKKwkJb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0
aW9uW11bXSB0eXBlQW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zOworCQlp
bnQgbGVuZ3RoID0gdHlwZVJlZmVyZW5jZS50b2tlbnMubGVuZ3RoOwkKKwkJZm9yIChpbnQgaSA9
IDA7IGkgPCBsZW5ndGg7ICsraSkgeworCQkJaWYgKHZhbHVlICE9IDAgfHwgKHR5cGVBcmd1bWVu
dHMgIT0gbnVsbCAmJiB0eXBlQXJndW1lbnRzW2ldICE9IG51bGwpIHx8CisJCQkJKHR5cGVBbm5v
dGF0aW9ucyAhPSBudWxsICYmIHR5cGVBbm5vdGF0aW9uc1tpXSAhPSBudWxsICkpIHsKIAkJCQl2
YWx1ZSsrOwogCQkJfQogCQl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUv
ZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKaW5kZXggMGM0NGVlZi4uZDI5OTAzYiAxMDA2NDQK
LS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIu
amF2YQpAQCAtMTI5OSw4ICsxMjk5LDE3IEBACiAJICogQHNlZSBBU1RWaXNpdG9yI3Zpc2l0KFNp
bXBsZVR5cGUpCiAJICovCiAJcHVibGljIGJvb2xlYW4gdmlzaXQoU2ltcGxlVHlwZSBub2RlKSB7
Ci0JCXZpc2l0VHlwZUFubm90YXRpb25zKG5vZGUpOwotCQlub2RlLmdldE5hbWUoKS5hY2NlcHQo
dGhpcyk7CisJCU5hbWUgbmFtZSA9IG5vZGUuZ2V0TmFtZSgpOworCQlpZiAobmFtZS5pc1F1YWxp
ZmllZE5hbWUoKSkgeworCQkJUXVhbGlmaWVkTmFtZSBxdWFsaWZpZWROYW1lID0gKFF1YWxpZmll
ZE5hbWUpIG5hbWU7CisJCQlxdWFsaWZpZWROYW1lLmdldFF1YWxpZmllcigpLmFjY2VwdCh0aGlz
KTsKKwkJCXRoaXMuYnVmZmVyLmFwcGVuZCgiLiIpOy8vJE5PTi1OTFMtMSQKKwkJCXZpc2l0VHlw
ZUFubm90YXRpb25zKG5vZGUpOworCQkJcXVhbGlmaWVkTmFtZS5nZXROYW1lKCkuYWNjZXB0KHRo
aXMpOworCQl9IGVsc2UgeworCQkJdmlzaXRUeXBlQW5ub3RhdGlvbnMobm9kZSk7CisJCQlub2Rl
LmdldE5hbWUoKS5hY2NlcHQodGhpcyk7CQkJCisJCX0KIAkJcmV0dXJuIGZhbHNlOwogCX0KIA==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>226019</attachid>
            <date>2013-01-24 01:19:00 -0500</date>
            <delta_ts>2013-01-24 01:19:42 -0500</delta_ts>
            <desc>Proposed Patch - Part 2</desc>
            <filename>Fix-Bug-395886--18DOM-AST-Withdraw-annotations-prope.2.patch</filename>
            <type>text/plain</type>
            <size>61822</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDc5MTA3N2MuLjZkN2VjMWMgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTgsNiArMTgsNyBAQAogCiBpbXBvcnQganVu
aXQuZnJhbWV3b3JrLlRlc3Q7CiAKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uKjsK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29tcGlsYXRpb25Vbml0OwogaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2VwdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuY29yZS5kb20uQVNUOwpAQCAtOTgsNCArOTksODY3IEBACiAJCWFubm90YXRpb24gPSAo
QVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOwogCQljaGVja1NvdXJjZVJhbmdlKGFubm90YXRp
b24sICJATWFya2VyIiwgY29udGVudHMpOwogCX0KKwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNs
aXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2IHRlc3RzIGFubm90YXRpb25zIG9u
CisJICogUVRSIGluIG11bHRpcGxlIHNjZW5hcmlvcyBvZiBvY2N1cnJlbmNlLgorCSAqIAorCSAq
IEB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uCisJICovCisJcHVibGljIHZvaWQgdGVzdDAwMDIo
KSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdv
cmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL3Rlc3QwMDAyL1guamF2YSIsCisJCQkJdHJ1ZS8q
IHJlc29sdmUgKi8pOworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0MDAwMjtcbiIK
KwkJCQkrICJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIgorCQkJCSsgInB1
YmxpYyBjbGFzcyBYIHtcbiIKKwkJCQkrICIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5n
W10gYXJncykge1xuIgorCQkJCSsgIgkJT3V0ZXIgb3V0ZXIgPSBuZXcgT3V0ZXIoKTtcbiIKKwkJ
CQkrICIJCU9iamVjdCBteU9iamVjdCA9IG5ldyBPYmplY3QoKTtcbiIKKwkJCQkrICIJCVN0cmlu
ZyBteVN0cmluZztcbiIKKwkJCQkrICIJCW15U3RyaW5nID0gKGphdmEubGFuZy5ATWFya2VyIFN0
cmluZykgbXlPYmplY3Q7XG4iCisJCQkJKyAiCQlPdXRlci5Jbm5lciBmaXJzdCA9IG91dGVyLm5l
dyBJbm5lcigpO1xuIgorCQkJCSsgIgkJT3V0ZXIuIEBNYXJrZXIyIElubmVyIHNlY29uZCA9IG91
dGVyLm5ldyBJbm5lcigpIDtcbiIKKwkJCQkrICIJCU91dGVyLklubmVyLiBATWFya2VyMSBEZWVw
ZXIgZGVlcGVyID0gc2Vjb25kLm5ldyBEZWVwZXIoKTtcbiIKKwkJCQkrICIJCU91dGVyLkBNYXJr
ZXIxIElubmVyLkBNYXJrZXIyIERlZXBlciBkZWVwZXIyID0gIHNlY29uZC5uZXcgRGVlcGVyKCk7
XG4iCisJCQkJKyAiCX1cbiIgKyAifVxuIiArICJjbGFzcyBPdXRlciB7XG4iCisJCQkJKyAiCXB1
YmxpYyBjbGFzcyBJbm5lciB7XG4iICsgIgkJcHVibGljIGNsYXNzIERlZXBlciB7XG4iCisJCQkJ
KyAiCQl9XG4iICsgIgl9XG4iICsgIn1cbiIKKwkJCQkrICJAVGFyZ2V0IChqYXZhLmxhbmcuYW5u
b3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIKKwkJCQkrICJAaW50ZXJmYWNlIE1hcmtl
ciB7fVxuIgorCQkJCSsgIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBl
LlRZUEVfVVNFKVxuIgorCQkJCSsgIkBpbnRlcmZhY2UgTWFya2VyMSB7fVxuIgorCQkJCSsgIkBU
YXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIgorCQkJ
CSsgIkBpbnRlcmZhY2UgTWFya2VyMiB7fVxuIjsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENv
bXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoY29udGVudHMsCisJCQkJdGhpcy53b3JraW5nQ29weSk7
CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2xhcmF0aW9uID0gKE1ldGhvZERlY2xhcmF0
aW9uKSBnZXRBU1ROb2RlKGN1LCAwLCAwKTsKKwkJTGlzdCBzdGF0ZW1lbnRzID0gbWV0aG9kRGVj
bGFyYXRpb24uZ2V0Qm9keSgpLnN0YXRlbWVudHMoKTsKKwkJaW50IHNDb3VudCA9IDM7CisKKwkJ
Ly8gY2FzZSAxIC0gYW5ub3RhdGlvbiBqdXN0IGJlZm9yZSB0aGUgbGFzdCBmaWVsZAorCQlFeHBy
ZXNzaW9uU3RhdGVtZW50IGV4cHJlc3Npb25TdGF0ZW1lbnQgPSAoRXhwcmVzc2lvblN0YXRlbWVu
dCkgc3RhdGVtZW50cy5nZXQoc0NvdW50KyspOworCQlBc3NpZ25tZW50IGFzc2lnbm1lbnQgPSAo
QXNzaWdubWVudCkgZXhwcmVzc2lvblN0YXRlbWVudC5nZXRFeHByZXNzaW9uKCk7CisJCWFzc2Vy
dE5vdE51bGwoYXNzaWdubWVudCk7CisJCUNhc3RFeHByZXNzaW9uIGNhc3RFeHByZXNzaW9uID0g
KENhc3RFeHByZXNzaW9uKSBhc3NpZ25tZW50LmdldFJpZ2h0SGFuZFNpZGUoKTsKKwkJYXNzZXJ0
Tm90TnVsbChjYXN0RXhwcmVzc2lvbik7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1w
bGVUeXBlKSBjYXN0RXhwcmVzc2lvbi5nZXRUeXBlKCk7CisJCWFzc2VydE5vdE51bGwoc2ltcGxl
VHlwZSk7CisJCWFzc2VydEVxdWFscygiamF2YS5sYW5nLkBNYXJrZXIgU3RyaW5nIiwgc2ltcGxl
VHlwZS50b1N0cmluZygpKTsKKwkJTGlzdCBhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3Rh
dGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFzc2Vy
dEVxdWFscygiQE1hcmtlciIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKworCQkv
LyBjYXNlIDIgLSBRdWFsaWZpZWRUeXBlIHdpdGhvdXQgYW5ub3RhdGlvbnMuCisJCVZhcmlhYmxl
RGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJp
YWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCVR5
cGUgdHlwZSA9IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3Nl
cnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUp
IHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5n
KCkpOworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0
VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisKKwkJLy8gY2FzZSAzIC0gUWF1bGlmaWVk
IFR5cGUgd2l0aCBvdXRlciB3aXRob3V0IGFubm90YXRpb25zIGFuZCBpbm5lciB3aXRoCisJCS8v
IGFubm90YXRpb25zLgorCQl2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxl
RGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0KHNDb3VudCsrKTsKKwkJdHlwZSA9
IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5
cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJ
CWFzc2VydE5vdE51bGwoc2ltcGxlVHlwZSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtl
cjIgSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHNpbXBs
ZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0g
MSk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJp
bmcoKSk7CisKKwkJLy8gY2FzZSA0IC0gTXVsdGlwbGUgbGV2ZWxzIHdpdGggYW5ub3RhdGlvbnMg
YXQgdGhlIGxhc3Qgb25seS4KKwkJdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJp
YWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChzQ291bnQrKyk7CisJCXR5
cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBl
OworCQlhc3NlcnROb3ROdWxsKHNpbXBsZVR5cGUpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLklu
bmVyLkBNYXJrZXIxIERlZXBlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRp
b25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25z
LnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb25zLmdl
dCgwKS50b1N0cmluZygpKTsKKworCQkvLyBjYXNlIDUgLSBNdWx0aXBsZSBhbm5vdGF0aW9ucwor
CQl2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0
ZW1lbnQpIHN0YXRlbWVudHMuZ2V0KHNDb3VudCsrKTsKKwkJdHlwZSA9IHZhcmlhYmxlRGVjbGFy
YXRpb25TdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRU
eXBlKCkpOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkg
dHlwZTsKKwkJYXNzZXJ0Tm90TnVsbChxdWFsaWZpZWRUeXBlKTsKKwkJYXNzZXJ0RXF1YWxzKCJP
dXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3Ry
aW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJ
YXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFzc2VydEVxdWFscygiQE1h
cmtlcjIiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJCVNpbXBsZU5hbWUgc2lt
cGxlTmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBl
ciIsIHNpbXBsZU5hbWUudG9TdHJpbmcoKSk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1Np
bXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlwZTsK
KwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lciIsIHNpbXBsZVR5cGUudG9TdHJp
bmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3Nl
cnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2Vy
MSIsIGFubm90YXRpb25zLmdldCgwKS50b1N0cmluZygpKTsKKwl9CisKKwkvKioKKwkgKiBodHRw
czovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2IHRlc3RzIHRo
ZQorCSAqIHJlcHJlc2VudGF0aW9uIG9mIHR5cGUgYW5ub3RhdGlvbnMgb24gYSBwb3NzaWJsZSBK
QVZBIDcgYW5kIDggcGxhY2UuCisJICogCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24K
KwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwMygpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24g
eworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMv
dGVzdDAwMDMvWC5qYXZhIiwKKwkJCQl0cnVlLyogcmVzb2x2ZSAqLyk7CisJCVN0cmluZyBjb250
ZW50cyA9ICJwYWNrYWdlIHRlc3QwMDAzO1xuIgorCQkJCSsgImltcG9ydCBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQ7XG4iCisJCQkJKyAicHVibGljIGNsYXNzIFgge1xuIgorCQkJCSsgIglw
dWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iCisJCQkJKyAiCQlATWFy
a2VyIE91dGVyLklubmVyIGZpcnN0W10gPSBuZXcgT3V0ZXIuSW5uZXJbMV07XG4iCisJCQkJKyAi
CX1cbiIgKyAifVxuIiArICJjbGFzcyBPdXRlciB7XG4iCisJCQkJKyAiCXB1YmxpYyBjbGFzcyBJ
bm5lciB7XG4iICsgIgl9XG4iICsgIn1cbiIKKwkJCQkrICJAVGFyZ2V0IChqYXZhLmxhbmcuYW5u
b3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIKKwkJCQkrICJAaW50ZXJmYWNlIE1hcmtl
ciB7fVxuIjsKKwkJQ29tcGlsYXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRB
U1QoY29udGVudHMsIHRoaXMud29ya2luZ0NvcHkpOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRo
b2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMCwgMCk7
CisJCUxpc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldEJvZHkoKS5zdGF0ZW1l
bnRzKCk7CisJCWludCBzQ291bnQgPSAwOworCisJCS8vIEN1cnJlbnQgZGVzaWduIGV4cGVjdHMg
YW5ub3RhdGlvbiBvbmx5IGF0IHRoZSBKQVZBIDcgcGxhY2UgaWYgaXQgaXMKKwkJLy8gZXhwZWN0
ZWQgYXQgSkFWQSA4LgorCQlWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50IHZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgc3RhdGVt
ZW50cy5nZXQoc0NvdW50KTsKKwkJTGlzdCBtb2RpZmllcnMgPSB2YXJpYWJsZURlY2xhcmF0aW9u
U3RhdGVtZW50Lm1vZGlmaWVycygpOworCQlhc3NlcnRUcnVlKG1vZGlmaWVycy5zaXplKCkgPT0g
MSk7CisJCUFubm90YXRpb24gYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBtb2RpZmllcnMuZ2V0
KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOwor
CQlUeXBlIHR5cGUgPSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmdldFR5cGUoKTsKKwkJ
YXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBl
ID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCBzaW1w
bGVUeXBlLnRvU3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5v
dGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwl9CisK
KwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
Mzk1ODg2IHRlc3RzIFFUUiB3aXRoCisJICogYW5ub3RhdGlvbnMKKwkgKiAKKwkgKiBAdGhyb3dz
IEphdmFNb2RlbEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDA0KCkgdGhyb3dz
IEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29w
eSgiL0NvbnZlcnRlcjE4L3NyYy90ZXN0MDAwNC9YLmphdmEiLAorCQkJCXRydWUvKiByZXNvbHZl
ICovKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gInBhY2thZ2UgdGVzdDAwMDQ7IgorCQkJCSsgImlt
cG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQ7XG4iCisJCQkJKyAicHVibGljIGNsYXNz
IFggaW1wbGVtZW50cyBPbmU8LypzdGFydCovQE1hcmtlcjEgT3V0ZXI8SW50ZWdlcj4uIEBNYXJr
ZXIyIElubmVyPERvdWJsZT5bXS8qZW5kKi8+IHtcbiIKKwkJCQkrICJ9XG4iICsgImludGVyZmFj
ZSBPbmU8VD4ge31cbiIgKyAiY2xhc3MgT3V0ZXI8VD4ge1xuIgorCQkJCSsgIglwdWJsaWMgY2xh
c3MgSW5uZXI8Uz4ge31cbiIgKyAifVxuIgorCQkJCSsgIkBUYXJnZXQgKGphdmEubGFuZy5hbm5v
dGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIgorCQkJCSsgIkBpbnRlcmZhY2UgTWFya2Vy
MSB7fVxuIgorCQkJCSsgIkBUYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBl
LlRZUEVfVVNFKVxuIgorCQkJCSsgIkBpbnRlcmZhY2UgTWFya2VyMiB7fVxuIjsKKwkJQ29tcGls
YXRpb25Vbml0IGN1ID0gKENvbXBpbGF0aW9uVW5pdCkgYnVpbGRBU1QoY29udGVudHMsIHRoaXMu
d29ya2luZ0NvcHkpOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVE
ZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgMCk7CisJCUFycmF5VHlwZSB0eXBlID0gKEFycmF5
VHlwZSkgKChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCkpLnR5cGVBcmd1bWVudHMoKS5nZXQoMCk7CisJCWFzc2VydE5vdE51bGwo
Ik5vIGFubm90YXRpb24iLCB0eXBlKTsKKwkJSVR5cGVCaW5kaW5nIGJpbmRpbmcgPSB0eXBlLnJl
c29sdmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsK
KwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0MDAwNC5PdXRlcjxq
YXZhLmxhbmcuSW50ZWdlcj4uSW5uZXI8amF2YS5sYW5nLkRvdWJsZT5bXSIsIGJpbmRpbmcuZ2V0
UXVhbGlmaWVkTmFtZSgpKTsKKwkJVHlwZSBjb21wb25lbnRUeXBlID0gdHlwZS5nZXRDb21wb25l
bnRUeXBlKCk7CisJCWJpbmRpbmcgPSBjb21wb25lbnRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJ
CWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxzKCJX
cm9uZyBxdWFsaWZpZWQgbmFtZSIsCisJCQkJInRlc3QwMDA0Lk91dGVyPGphdmEubGFuZy5JbnRl
Z2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91YmxlPiIsIGJpbmRpbmcuZ2V0UXVhbGlmaWVkTmFtZSgp
KTsKKwkJYXNzZXJ0VHJ1ZSgiTm90IHBhcmFtZXRlcml6ZWQiLCBjb21wb25lbnRUeXBlLmlzUGFy
YW1ldGVyaXplZFR5cGUoKSk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBl
ID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBjb21wb25lbnRUeXBlOworCQlUeXBlIHR5cGUyID0gcGFy
YW1ldGVyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKCJOb3QgcXVhbGlmaWVkIiwg
dHlwZTIuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlRdWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTI7CisJCWJpbmRpbmcgPSBxdWFsaWZpZWRUeXBlLnJlc29s
dmVCaW5kaW5nKCk7CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsInRlc3QwMDA0Lk91dGVyPGphdmEu
bGFuZy5JbnRlZ2VyPi5Jbm5lcjxqYXZhLmxhbmcuRG91YmxlPiIsIGJpbmRpbmcuZ2V0UXVhbGlm
aWVkTmFtZSgpKTsKKwkJVHlwZSBxdWFsaWZpZXIgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmll
cigpOworCQlhc3NlcnRUcnVlKCJOb3QgcGFyYW1ldGVyaXplZCIsIHF1YWxpZmllci5pc1BhcmFt
ZXRlcml6ZWRUeXBlKCkpOworCQliaW5kaW5nID0gcXVhbGlmaWVyLnJlc29sdmVCaW5kaW5nKCk7
CisJCWFzc2VydE5vdE51bGwoIk5vIGJpbmRpbmciLCBiaW5kaW5nKTsKKwkJYXNzZXJ0RXF1YWxz
KCJXcm9uZyBxdWFsaWZpZWQgbmFtZSIsICJ0ZXN0MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdl
cj4iLCBiaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCXBhcmFtZXRlcml6ZWRUeXBlID0g
KFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXI7CisJCXR5cGUyID0gcGFyYW1ldGVyaXplZFR5
cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVlKCJOb3Qgc2ltcGxlIHR5cGUiLCB0eXBlMi5pc1Np
bXBsZVR5cGUoKSk7CisJCWJpbmRpbmcgPSB0eXBlMi5yZXNvbHZlQmluZGluZygpOworCQlhc3Nl
cnROb3ROdWxsKCJObyBiaW5kaW5nIiwgYmluZGluZyk7CisJCWFzc2VydEVxdWFscygiV3Jvbmcg
cXVhbGlmaWVkIG5hbWUiLCJ0ZXN0MDAwNC5PdXRlcjxqYXZhLmxhbmcuSW50ZWdlcj4iLCBiaW5k
aW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJfQorCisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NiB0ZXN0cyBRVFIgd2l0aAorCSAq
IGFubm90YXRpb25zCisJICogCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24KKwkgKi8K
KwlwdWJsaWMgdm9pZCB0ZXN0MDAwNSgpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQl0
aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvdGVzdDAw
MDUvWC5qYXZhIiwKKwkJCQl0cnVlLyogcmVzb2x2ZSAqLyk7CisJCVN0cmluZyBjb250ZW50cyA9
ICJwYWNrYWdlIHRlc3QwMDA1OyIKKwkJCQkrICJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24u
VGFyZ2V0O1xuIgorCQkJCSsgInB1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgT25lPCBPdXRlci5J
bm5lciA+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xhc3MgWSBpbXBsZW1lbnRzIE9uZTwg
T3V0ZXIuIEBNYXJrZXIxIElubmVyID4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBa
IGltcGxlbWVudHMgT25lPCBATWFya2VyMSBPdXRlci5Jbm5lciA+IHtcbiIKKwkJCQkrICJ9XG4i
CisJCQkJKyAiY2xhc3MgVyBpbXBsZW1lbnRzIE9uZTwgQE1hcmtlcjEgT3V0ZXIuIEBNYXJrZXIy
IElubmVyID4ge1xuIgorCQkJCSsgIn1cbiIgKyAiaW50ZXJmYWNlIE9uZTxUPiB7fVxuIiArICJj
bGFzcyBPdXRlciB7XG4iCisJCQkJKyAiCXB1YmxpYyBjbGFzcyBJbm5lciB7fVxuIiArICJ9XG4i
CisJCQkJKyAiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9V
U0UpXG4iCisJCQkJKyAiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iCisJCQkJKyAiQFRhcmdldCAo
amF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iCisJCQkJKyAiQGlu
dGVyZmFjZSBNYXJrZXIyIHt9XG4iOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRp
b25Vbml0KSBidWlsZEFTVChjb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJaW50
IHRDb3VudCA9IDA7CisKKwkJLy8gY2FzZSAxIC0gbm8gYW5ub3RhdGlvbnMgT3V0ZXIuSW5uZXIK
KwkJVHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdl
dEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJUGFyYW1ldGVyaXplZFR5cGUgcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCk7CisJCUxpc3QgdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUu
dHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkp
OworCQlUeXBlIHR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydFRy
dWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIiLCB0
eXBlLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgMiAtIFFUUiB3aXRoIG9uZSBhbm5vdGF0aW9u
IE91dGVyLkBNYXJrZXIxIElubmVyCisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRp
b24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJh
bWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uCisJCQkJLnN1cGVySW50ZXJmYWNlVHlwZXMo
KS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVu
dHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJdHlwZSA9
IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxl
VHlwZSgpKTsKKwkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJ
CWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5n
KCkpOworCQlMaXN0IGFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlh
c3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJQW5ub3RhdGlvbiBhbm5vdGF0
aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJA
TWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSAzIC0gUVRSIHdp
dGggb25lIGFubm90YXRpb24gYXQgdGhlIGJlZ2lubmluZyBATWFya2VyMQorCQkvLyBPdXRlci5J
bm5lcgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1
LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5
cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1l
bnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygx
LCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5n
ZXQoMCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCWFzc2VydEVx
dWFscygiQE1hcmtlcjEgT3V0ZXIuSW5uZXIiLCB0eXBlLnRvU3RyaW5nKCkpOworCQlRdWFsaWZp
ZWRUeXBlIHF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5v
dGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCVR5cGUgcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5
cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1NpbXBsZVR5
cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNz
ZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7CisJCWFu
bm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90
YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0
aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3Ry
aW5nKCkpOworCisJCS8vIGNhc2UgNCAtIFFUUiB3aXRoIGFubm90YXRpb25zIGF0IGJvdGggdGhl
IHR5cGVzIEBNYXJrZXIxCisJCS8vIE91dGVyLkBNYXJrZXIyIElubmVyCisJCXR5cGVkZWNsYXJh
dGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFy
YW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVy
SW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRU
eXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6
ZSgpKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0VHJ1
ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRl
ci5ATWFya2VyMiBJbm5lciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAo
UXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5
cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUu
YW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJ
CWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIyIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlw
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVy
VHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgcXVhbGlm
aWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlciIsIHNpbXBsZVR5cGUudG9T
dHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gc2ltcGxlVHlwZS5hbm5vdGF0aW9ucygpOworCQlh
c3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5v
dGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBh
bm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCisJfQorCisJLyoqCisJICogaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NTg4NiB0ZXN0cyBQUVRSIHdpdGgKKwkg
KiBhbm5vdGF0aW9ucyBwYXJ0CisJICogCisJICogQHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24K
KwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwNigpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24g
eworCQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMv
dGVzdDAwMDYvWC5qYXZhIiwKKwkJCQl0cnVlKTsKKwkJU3RyaW5nIGNvbnRlbnRzID0gInBhY2th
Z2UgdGVzdDAwMDY7IgorCQkJCSsgImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQ7
XG4iCisJCQkJKyAicHVibGljIGNsYXNzIFggaW1wbGVtZW50cyBPbmU8T3V0ZXIuICBJbm5lci5E
ZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBYMSBpbXBsZW1l
bnRzIE9uZTxPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVyPERvdWJsZT4+IHtcbiIKKwkJCQkr
ICJ9XG4iCisJCQkJKyAiY2xhc3MgWDIgaW1wbGVtZW50cyBPbmU8T3V0ZXIuIEBNYXJrZXIxIElu
bmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+PiB7XG4iCisJCQkJKyAifVxuIgorCQkJCSsgImNs
YXNzIFgzIGltcGxlbWVudHMgT25lPEBNYXJrZXIxIE91dGVyLiBATWFya2VyMiBJbm5lci4gRGVl
cGVyPERvdWJsZT4+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xhc3MgWSBpbXBsZW1lbnRz
IE9uZTxPdXRlcjEuIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsg
In1cbiIKKwkJCQkrICJjbGFzcyBZMSBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIElubmVyPEludGVn
ZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJj
bGFzcyBZMiBpbXBsZW1lbnRzIE9uZTxPdXRlcjEuIEBNYXJrZXIxIElubmVyPEludGVnZXI+LiBE
ZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBZMyBpbXBsZW1l
bnRzIE9uZTxATWFya2VyMSBPdXRlcjEuIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPj4g
e1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBZNCBpbXBsZW1lbnRzIE9uZTxATWFya2Vy
MSBPdXRlcjEuIEBNYXJrZXIyIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91YmxlPj4ge1xuIgor
CQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBaIGltcGxlbWVudHMgT25lPE91dGVyMjxJbnRlZ2Vy
Pi5Jbm5lci5EZWVwZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBa
MSBpbXBsZW1lbnRzIE9uZTxATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyPERv
dWJsZT4+IHtcbiIKKwkJCQkrICJ9XG4iCisJCQkJKyAiY2xhc3MgWjIgaW1wbGVtZW50cyBPbmU8
T3V0ZXIyPEludGVnZXI+LiBATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPj4g
e1xuIgorCQkJCSsgIn1cbiIKKwkJCQkrICJjbGFzcyBXIGltcGxlbWVudHMgT25lPE91dGVyMzxE
b3VibGU+LiBATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLCBDaGFyYWN0ZXI+LiBEZWVw
ZXI8RG91YmxlPj4ge1xuIgorCQkJCSsgIn1cbiIgKyAiaW50ZXJmYWNlIE9uZTxUPiB7fVxuIiAr
ICJjbGFzcyBPdXRlciB7XG4iCisJCQkJKyAiCXB1YmxpYyBjbGFzcyBJbm5lciB7XG4iCisJCQkJ
KyAiICAgICAgIHB1YmxpYyBjbGFzcyBEZWVwZXI8Uz4ge1xuIiArICIgICAgICAgfVxuIiArICIg
ICB9XG4iCisJCQkJKyAifVxuIiArICJjbGFzcyBPdXRlcjEge1xuIiArICIJcHVibGljIGNsYXNz
IElubmVyPFQ+IHtcbiIKKwkJCQkrICIgICAgICAgcHVibGljIGNsYXNzIERlZXBlcjxTPiB7XG4i
ICsgIiAgICAgICB9XG4iICsgIiAgIH1cbiIKKwkJCQkrICJ9XG4iICsgImNsYXNzIE91dGVyMiA8
VD4ge1xuIiArICIJcHVibGljIGNsYXNzIElubmVyIHtcbiIKKwkJCQkrICIgICAgICAgcHVibGlj
IGNsYXNzIERlZXBlcjxTPiB7fVxuIiArICIgICB9XG4iICsgIn1cbiIKKwkJCQkrICJjbGFzcyBP
dXRlcjMgPFQ+IHtcbiIgKyAiCXB1YmxpYyBjbGFzcyBJbm5lcjxLLCBWPiB7XG4iCisJCQkJKyAi
ICAgICAgIHB1YmxpYyBjbGFzcyBEZWVwZXI8Uz4ge31cbiIgKyAiICAgfVxuIiArICJ9XG4iCisJ
CQkJKyAiQFRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0Up
XG4iCisJCQkJKyAiQGludGVyZmFjZSBNYXJrZXIxIHt9XG4iCisJCQkJKyAiQFRhcmdldCAoamF2
YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iCisJCQkJKyAiQGludGVy
ZmFjZSBNYXJrZXIyIHt9XG4iOworCQlDb21waWxhdGlvblVuaXQgY3UgPSAoQ29tcGlsYXRpb25V
bml0KSBidWlsZEFTVChjb250ZW50cywKKwkJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJaW50IHRD
b3VudCA9IDA7CisKKwkJLy8gY2FzZSAxOiB2YW5pbGxhIGNhc2Ugd2l0aG91dCBhbm5vdGF0aW9u
cyBhbmQgd2l0aCBzaW5nbGUgdHlwZUFyZ3VtZW50CisJCS8vIE91dGVyLklubmVyLkRlZXBlcjxE
b3VibGU+CisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0
aW9uKSBnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlcklu
dGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQlMaXN0IHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMu
c2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFy
Z3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuSW5uZXIuRGVlcGVyPERvdWJs
ZT4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFy
YW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50
cy5zaXplKCkgPT0gMSk7CisJCVR5cGUgdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgw
KTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0g
cGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5
cGUoKSk7CisJCVNpbXBsZVR5cGUgc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyLklubmVyLkRlZXBlciIsIHNpbXBsZVR5cGUudG9TdHJpbmcoKSk7
CisJCU5hbWUgbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUu
aXNRdWFsaWZpZWROYW1lKCkpOworCQlRdWFsaWZpZWROYW1lIHF1YWxpZmllZE5hbWUgPSAoUXVh
bGlmaWVkTmFtZSkgbmFtZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlci5Jbm5lci5EZWVwZXIiLCBx
dWFsaWZpZWROYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2UgMiAtIE9uZSBhbm5vdGF0aW9u
IGFmdGVyIHRoZSBmaXJzdCBjbGFzcworCQkvLyBPdXRlci4gQE1hcmtlcjEgSW5uZXIuRGVlcGVy
PERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9k
ZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBl
KSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFy
Z3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVh
bHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRl
ci5ATWFya2VyMSBJbm5lci5EZWVwZXI8RG91YmxlPiIsCXBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCVF1YWxpZmllZFR5cGUgcXVhbGlm
aWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBN
YXJrZXIxIElubmVyLkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUg
PSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBuYW1l
LnRvU3RyaW5nKCkpOworCQlMaXN0IGFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0
aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJVHlwZSBx
dWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1
ZShxdWFsaWZpZXJUeXBlLmlzU2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVU
eXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyLkBNYXJrZXIxIElubmVy
Iiwgc2ltcGxlVHlwZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFu
bm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlB
bm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKworCQkv
LyBjYXNlIDMgLSBJbm5lciB0eXBlcyBhbm5vdGF0ZWQgd2l0aCBvdXRlciBub3QgYW5ub3RhdGVk
IHdpdGggbGFzdAorCQkvLyB0eXBlIGFyZworCQkvLyBPdXRlci4gQE1hcmtlcjEgSW5uZXIuQE1h
cmtlcjIgRGVlcGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlv
bikgZ2V0QVNUTm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFt
ZXRlcml6ZWRUeXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgw
KTsKKwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOwor
CQlhc3NlcnRFcXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRU
eXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXI8RG91YmxlPiIsIHBh
cmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6
ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUo
KSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0
RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVk
VHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJ
CXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJP
dXRlci5ATWFya2VyMSBJbm5lci5ATWFya2VyMiBEZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3Ry
aW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFs
cygiRGVlcGVyIiwgbmFtZS50b1N0cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRU
eXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEp
OworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNz
ZXJ0RXF1YWxzKCJATWFya2VyMiIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCXF1YWxpZmll
clR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxp
ZmllclR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHF1
YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIuQE1hcmtlcjEgSW5uZXIiLCBzaW1w
bGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlv
bnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRp
b24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBN
YXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKworCQkvLyBjYXNlIDQgLSBvbmUgYW5u
b3RhdGlvbiBvbiB0aGUgb3V0ZXJtb3N0LCBvbmUgaW4gbWlkZGxlIGFuZCBvbmUKKwkJLy8gdHlw
ZWFyZyBpbiBpbm5lcm1vc3QKKwkJLy8gQE1hcmtlcjEgT3V0ZXIuIEBNYXJrZXIyIElubmVyLiBE
ZWVwZXI8RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRB
U1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXpl
ZFR5cGUpIHR5cGVkZWNsYXJhdGlvbgorCQkJCS5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDAp
OworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJ
CWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5
cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRF
cXVhbHMoIkBNYXJrZXIxIE91dGVyLkBNYXJrZXIyIElubmVyLkRlZXBlcjxEb3VibGU+IiwgcGFy
YW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJSVR5cGVCaW5kaW5nIHR5cGVCaW5kaW5nID0g
cGFyYW1ldHJpemVkVHlwZS5yZXNvbHZlQmluZGluZygpOworCQlhc3NlcnROb3ROdWxsKCJCaW5k
aW5nIG5vbi1udWxsIiwgdHlwZUJpbmRpbmcpOworCQlhc3NlcnRFcXVhbHMoIndyb25nIHF1YWxp
ZmllZCBuYW1lIiwgInRlc3QwMDA2Lk91dGVyLklubmVyLkRlZXBlcjxqYXZhLmxhbmcuRG91Ymxl
PiIsIHR5cGVCaW5kaW5nLmdldFF1YWxpZmllZE5hbWUoKSk7CisJCWFzc2VydFRydWUoIk5vdCBh
IFBhcmFtZXRlcml6ZWQgVHlwZSIsIHR5cGVCaW5kaW5nLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7
CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJ
YXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0
eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRy
dWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVk
VHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlci5ATWFya2VyMiBJbm5l
ci5EZWVwZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVk
VHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiRGVlcGVyIiwgbmFtZS50b1N0cmluZygp
KTsKKwkJYW5ub3RhdGlvbnMgPSBxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCk7CisJCXF1YWxp
ZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1
YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxp
ZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIu
QE1hcmtlcjIgSW5uZXIiLCBxdWFsaWZpZXJUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQmluZGlu
ZyA9IHF1YWxpZmllZFR5cGUucmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0Tm90TnVsbCgiQmlu
ZGluZyBub24tbnVsbCIsIHR5cGVCaW5kaW5nKTsKKwkJdHlwZUJpbmRpbmcgPSBxdWFsaWZpZWRU
eXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydEVxdWFscygid3JvbmcgcXVhbGlmaWVkIG5h
bWUiLCAidGVzdDAwMDYuT3V0ZXIuSW5uZXIiLCB0eXBlQmluZGluZy5nZXRRdWFsaWZpZWROYW1l
KCkpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNBbm5vdGF0YWJsZSgpKTsKKwkJQW5u
b3RhdGFibGVUeXBlIGFubm90YXRhYmxlVHlwZSA9IChBbm5vdGF0YWJsZVR5cGUpIHF1YWxpZmll
clR5cGU7CisJCWFubm90YXRpb25zID0gYW5ub3RhdGFibGVUeXBlLmFubm90YXRpb25zKCk7CisJ
CWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFu
bm90YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMiIs
IGFubm90YXRpb24udG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUo
KTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCXR5cGUgPSBx
dWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVU
eXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFs
cygiQE1hcmtlcjEgT3V0ZXIiLCBzaW1wbGVUeXBlLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9u
cyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5z
aXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0
KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsK
KworCQkvLyBjYXNlIDUgLSB3aXRob3V0IGFubm90YXRpb25zLCBidXQgd2l0aCB0eXBlYXJncyBh
dCBzZWNvbmQgYW5kIHRoaXJkCisJCS8vIHR5cGVzCisJCS8vIE91dGVyMS4gSW5uZXI8SW50ZWdl
cj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChUeXBlRGVjbGFyYXRpb24p
IGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0
ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7
CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJ
YXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlw
ZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVx
dWFscygiT3V0ZXIxLklubmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IixwYXJhbWV0cml6ZWRU
eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBl
QXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJ
CXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91
YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlw
ZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRU
eXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVy
PEludGVnZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBx
dWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBuYW1lLnRv
U3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsK
KwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUg
PSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5
cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0
ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuSW5uZXI8
SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRz
ID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFy
Z3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUg
PSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlzU2ltcGxl
VHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQluYW1lID0gc2lt
cGxlVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1F1YWxpZmllZE5hbWUoKSk7
CisJCXF1YWxpZmllZE5hbWUgPSAoUXVhbGlmaWVkTmFtZSkgbmFtZTsKKwkJYXNzZXJ0RXF1YWxz
KCJPdXRlcjEuSW5uZXIiLCBxdWFsaWZpZWROYW1lLnRvU3RyaW5nKCkpOworCisJCS8vIGNhc2Ug
NiAtIEFubm90IGluIGJldHdlZW4gdHdvIFBRUlQgd2l0aCBvdXRlcm1vc3QgbmVpdGhlciBhbm5v
dGF0ZWQKKwkJLy8gbm9yIGhhdmluZyB0eXBlYXJncworCQkvLyBPdXRlcjEuIElubmVyPEludGVn
ZXI+LiBATWFya2VyMSBEZWVwZXI8RG91YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURl
Y2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUg
PSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVz
KCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFt
ZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOwor
CQlhc3NlcnRFcXVhbHMoIk91dGVyMS5Jbm5lcjxJbnRlZ2VyPi5ATWFya2VyMSBEZWVwZXI8RG91
YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1l
bnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsK
KwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFy
YW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5
cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0
RXF1YWxzKCJPdXRlcjEuSW5uZXI8SW50ZWdlcj4uQE1hcmtlcjEgRGVlcGVyIiwgcXVhbGlmaWVk
VHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlh
c3NlcnRFcXVhbHMoIkRlZXBlciIsIG5hbWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0g
cXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNp
emUoKSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOwor
CQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0
VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXpl
ZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIxLklubmVyPEludGVnZXI+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsK
KwkJdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlh
c3NlcnRUcnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5
cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkludGVnZXIiLCB0eXBlLnRvU3Ry
aW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRy
dWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlw
ZTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNR
dWFsaWZpZWROYW1lKCkpOworCQlxdWFsaWZpZWROYW1lID0gKFF1YWxpZmllZE5hbWUpIG5hbWU7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLklubmVyIiwgcXVhbGlmaWVkTmFtZS50b1N0cmluZygp
KTsKKworCQkvLyBjYXNlIDcgLSBPdXRlcm1vc3Qgc3RpbGwgZW1wdHkgKG5vIGFubm90YXRpb25z
LCBubyB0eXBlIGFyZ3MpLAorCQkvLyBmb2xsb3dlZCBieSBhbm5vdGF0aW9uLCBhbmQgdGhlbiB0
eXBlYXJncworCQkvLyBPdXRlcjEuIEBNYXJrZXIxIElubmVyPEludGVnZXI+LiBEZWVwZXI8RG91
YmxlPgorCQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1
LCB0Q291bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5
cGVkZWNsYXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1l
bnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygx
LCB0eXBlQXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVy
aXplZFR5cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5A
TWFya2VyMSBJbm5lcjxJbnRlZ2VyPi5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUu
dG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1
bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlw
ZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUi
LCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7
CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUg
PSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEuQE1hcmtlcjEg
SW5uZXI8SW50ZWdlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFt
ZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIG5h
bWUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9u
cygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVy
VHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlm
aWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBh
cmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMS5A
TWFya2VyMSBJbm5lcjxJbnRlZ2VyPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJ
CXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNz
ZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmlu
ZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRUcnVl
KHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCQlzaW1wbGVUeXBlID0gKFNpbXBsZVR5cGUpIHR5cGU7
CisJCWFzc2VydEVxdWFscygiT3V0ZXIxLkBNYXJrZXIxIElubmVyIiwgc2ltcGxlVHlwZS50b1N0
cmluZygpKTsKKwkJYW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFz
c2VydFRydWUoYW5ub3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90
YXRpb24pIGFubm90YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFu
bm90YXRpb24udG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSA4IC0gU2ltaWxhciB0byBhYm92ZSwg
YnV0IHdpdGggdGhlIG1ham9yIGRpZmZlcmVuY2Ugb2YKKwkJLy8gYW5ub3RhdGlvbiBzaGlmdGVk
IHRvIG91dGVybW9zdC4KKwkJLy8gQE1hcmtlcjEgT3V0ZXIxLiBJbm5lcjxJbnRlZ2VyPi4gRGVl
cGVyPERvdWJsZT4KKwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNU
Tm9kZShjdSwgdENvdW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRU
eXBlKSB0eXBlZGVjbGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlw
ZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRF
cXVhbHMoMSwgdHlwZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBh
cmFtZXRlcml6ZWRUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJA
TWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4uRGVlcGVyPERvdWJsZT4iLCBwYXJhbWV0cml6
ZWRUeXBlLnRvU3RyaW5nKCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50
eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7
CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygi
RG91YmxlIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0
VHlwZSgpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZp
ZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEg
T3V0ZXIxLklubmVyPEludGVnZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7
CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVw
ZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1
YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVl
KHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlw
ZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJA
TWFya2VyMSBPdXRlcjEuSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5n
KCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7
CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlw
ZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUu
dG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNz
ZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFs
aWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5Jbm5lciIs
IHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlw
ZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsK
KwkJbmFtZSA9IHF1YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUuaXNT
aW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIklubmVyIiwgbmFtZS50b1N0cmluZygpKTsK
KwkJdHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUodHlw
ZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJ
YW5ub3RhdGlvbnMgPSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5u
b3RhdGlvbnMuc2l6ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90
YXRpb25zLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9T
dHJpbmcoKSk7CisJCW5hbWUgPSBzaW1wbGVUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0VHJ1ZShu
YW1lLmlzU2ltcGxlTmFtZSgpKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjEiLCBuYW1lLnRvU3Ry
aW5nKCkpOworCisJCS8vIGNhc2UgOTogc2NlbmFyaW8gb2YgdGhlIGFib3ZlIGNhc2UgcGx1cyBh
bm90aGVyIGFubm90YXRpb24gYXQKKwkJLy8gbWlkLWxldmVsLgorCQkvLyBATWFya2VyMSBPdXRl
cjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4uIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJh
dGlvbiA9IChUeXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFy
YW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVy
SW50ZXJmYWNlVHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRU
eXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6
ZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFyZ3Vt
ZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElu
bmVyPEludGVnZXI+LkRlZXBlcjxEb3VibGU+IixwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5nKCkp
OworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJ
CWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkg
dHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiRG91YmxlIiwgdHlwZS50b1N0
cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRU
cnVlKHR5cGUuaXNRdWFsaWZpZWRUeXBlKCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmll
ZFR5cGUpIHR5cGU7CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjEgT3V0ZXIxLkBNYXJrZXIyIElu
bmVyPEludGVnZXI+LkRlZXBlciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUg
PSBxdWFsaWZpZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBuYW1l
LnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMo
KTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5
cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmll
clR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJpemVkVHlwZSA9IChQYXJh
bWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBP
dXRlcjEuQE1hcmtlcjIgSW5uZXI8SW50ZWdlcj4iLCBwYXJhbWV0cml6ZWRUeXBlLnRvU3RyaW5n
KCkpOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7
CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlw
ZSkgdHlwZUFyZ3VtZW50cy5nZXQoMCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUu
dG9TdHJpbmcoKSk7CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNz
ZXJ0VHJ1ZSh0eXBlLmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFs
aWZpZWRUeXBlKSB0eXBlOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVyMS5ATWFya2Vy
MiBJbm5lciIsIHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVh
bGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUo
KSA9PSAxKTsKKwkJYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBhbm5vdGF0aW9ucy5nZXQoMCk7
CisJCWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBhbm5vdGF0aW9uLnRvU3RyaW5nKCkpOworCQlu
YW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydFRydWUobmFtZS5pc1NpbXBs
ZU5hbWUoKSk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQl0
eXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlLmlz
U2ltcGxlVHlwZSgpKTsKKwkJc2ltcGxlVHlwZSA9IChTaW1wbGVUeXBlKSB0eXBlOworCQlhbm5v
dGF0aW9ucyA9IHNpbXBsZVR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0
aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlv
bnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmlu
ZygpKTsKKwkJbmFtZSA9IHNpbXBsZVR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRUcnVlKG5hbWUu
aXNTaW1wbGVOYW1lKCkpOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMSIsIG5hbWUudG9TdHJpbmco
KSk7CisKKwkJLy8gY2FzZSAxMCAtIFBRUlQgd2l0aCB0d28gdHlwZSBhcmdzIGJ1dCB3aXRob3V0
IGFubm90YXRpb25zCisJCS8vIE91dGVyMjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPgor
CQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LCB0Q291
bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNs
YXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0g
cGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBl
QXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5
cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2Vy
Pi5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJ
CXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNz
ZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBl
QXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5n
KCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUo
dHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlw
ZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uSW5uZXIuRGVlcGVyIiwg
cXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJSVR5cGVCaW5kaW5nIGJpbmRpbmcgPSBxdWFs
aWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCW5hbWUgPSBxdWFsaWZpZWRUeXBlLmdldE5h
bWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5v
dGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5v
dGF0aW9ucy5zaXplKCkgPT0gMCk7CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdl
dFF1YWxpZmllcigpOworCQlhc3NlcnRUcnVlKHF1YWxpZmllclR5cGUuaXNRdWFsaWZpZWRUeXBl
KCkpOworCQlxdWFsaWZpZWRUeXBlID0gKFF1YWxpZmllZFR5cGUpIHF1YWxpZmllclR5cGU7CisJ
CWJpbmRpbmcgPSBxdWFsaWZpZWRUeXBlLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydEVxdWFs
cygiT3V0ZXIyPEludGVnZXI+LklubmVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJ3cm9uZyBxdWFsaWZpZWQgYmluZGluZyIsICJ0ZXN0MDAwNi5PdXRlcjI8
amF2YS5sYW5nLkludGVnZXI+LklubmVyIiwJYmluZGluZy5nZXRRdWFsaWZpZWROYW1lKCkpOwor
CQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIi
LCBuYW1lLnRvU3RyaW5nKCkpOworCQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRR
dWFsaWZpZXIoKTsKKwkJYXNzZXJ0VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5
cGUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmll
clR5cGU7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlw
ZS50b1N0cmluZygpKTsKKwkJdHlwZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlh
c3NlcnRFcXVhbHMoIk91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CisKKwkJLy8gY2FzZSAxMSAt
IGFubm90YXRpb24gYXQgb3V0ZXJtb3N0IGluIGFkZGl0aW9uIHRvIHNjZW5hcmlvIGluIGNhc2Ug
MTAuCisJCS8vIEBNYXJrZXIxIE91dGVyMjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPgor
CQl0eXBlZGVjbGFyYXRpb24gPSAoVHlwZURlY2xhcmF0aW9uKSBnZXRBU1ROb2RlKGN1LCB0Q291
bnQrKyk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHR5cGVkZWNs
YXJhdGlvbi5zdXBlckludGVyZmFjZVR5cGVzKCkuZ2V0KDApOworCQl0eXBlQXJndW1lbnRzID0g
cGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydEVxdWFscygxLCB0eXBl
QXJndW1lbnRzLnNpemUoKSk7CisJCXBhcmFtZXRyaXplZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5
cGUpIHR5cGVBcmd1bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIE91dGVy
MjxJbnRlZ2VyPi5Jbm5lci5EZWVwZXI8RG91YmxlPiIsIHBhcmFtZXRyaXplZFR5cGUudG9TdHJp
bmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMo
KTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBl
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdl
cj4uSW5uZXIuRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1
YWxpZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIG5hbWUudG9T
dHJpbmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOwor
CQlhc3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9
IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlw
ZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkg
cXVhbGlmaWVyVHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSBPdXRlcjI8SW50ZWdlcj4u
SW5uZXIiLCBxdWFsaWZpZWRUeXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlw
ZS5nZXROYW1lKCk7CisJCWFzc2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOwor
CQlxdWFsaWZpZXJUeXBlID0gcXVhbGlmaWVkVHlwZS5nZXRRdWFsaWZpZXIoKTsKKwkJYXNzZXJ0
VHJ1ZShxdWFsaWZpZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSk7CisJCXBhcmFtZXRyaXpl
ZFR5cGUgPSAoUGFyYW1ldGVyaXplZFR5cGUpIHF1YWxpZmllclR5cGU7CisJCXR5cGVBcmd1bWVu
dHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBl
QXJndW1lbnRzLnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdl
dCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJJbnRlZ2VyIiwgdHlwZS50b1N0cmluZygpKTsKKwkJdHlw
ZSA9IHBhcmFtZXRyaXplZFR5cGUuZ2V0VHlwZSgpOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIx
IE91dGVyMiIsIHR5cGUudG9TdHJpbmcoKSk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5
cGUoKSk7CisJCXNpbXBsZVR5cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJYW5ub3RhdGlvbnMg
PSBzaW1wbGVUeXBlLmFubm90YXRpb25zKCk7CisJCWFzc2VydFRydWUoYW5ub3RhdGlvbnMuc2l6
ZSgpID09IDEpOworCQlhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldCgw
KTsKKwkJYXNzZXJ0RXF1YWxzKCJATWFya2VyMSIsIGFubm90YXRpb24udG9TdHJpbmcoKSk7CisK
KwkJLy8gY2FzZSAxMiAtIE5vIGFubm90YXRpb25zIGF0IG91dGVybW9zdCwgYnV0IG91dGVybW9z
dCBoYXMKKwkJLy8gdHlwZUFubm90YXRpb25zLgorCQkvLyBPdXRlcjI8SW50ZWdlcj4uIEBNYXJr
ZXIxIElubmVyLkBNYXJrZXIyIERlZXBlcjxEb3VibGU+CisJCXR5cGVkZWNsYXJhdGlvbiA9IChU
eXBlRGVjbGFyYXRpb24pIGdldEFTVE5vZGUoY3UsIHRDb3VudCsrKTsKKwkJcGFyYW1ldHJpemVk
VHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZWRlY2xhcmF0aW9uLnN1cGVySW50ZXJmYWNl
VHlwZXMoKS5nZXQoMCk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJhbWV0cml6ZWRUeXBlLnR5cGVB
cmd1bWVudHMoKTsKKwkJYXNzZXJ0RXF1YWxzKDEsIHR5cGVBcmd1bWVudHMuc2l6ZSgpKTsKKwkJ
cGFyYW1ldHJpemVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiT3V0ZXIyPEludGVnZXI+LkBNYXJrZXIxIElubmVyLkBNYXJr
ZXIyIERlZXBlcjxEb3VibGU+IiwgcGFyYW1ldHJpemVkVHlwZS50b1N0cmluZygpKTsKKwkJdHlw
ZUFyZ3VtZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRU
cnVlKHR5cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQl0eXBlID0gKFR5cGUpIHR5cGVBcmd1
bWVudHMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGUudG9TdHJpbmcoKSk7
CisJCXR5cGUgPSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBl
LmlzUXVhbGlmaWVkVHlwZSgpKTsKKwkJcXVhbGlmaWVkVHlwZSA9IChRdWFsaWZpZWRUeXBlKSB0
eXBlOworCQlhc3NlcnRFcXVhbHMoIk91dGVyMjxJbnRlZ2VyPi5ATWFya2VyMSBJbm5lci5ATWFy
a2VyMiBEZWVwZXIiLHF1YWxpZmllZFR5cGUudG9TdHJpbmcoKSk7CisJCW5hbWUgPSBxdWFsaWZp
ZWRUeXBlLmdldE5hbWUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJEZWVwZXIiLCBuYW1lLnRvU3RyaW5n
KCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNz
ZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3Rh
dGlvbikgYW5ub3RhdGlvbnMuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIyIiwgYW5u
b3RhdGlvbi50b1N0cmluZygpKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0
UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5pc1F1YWxpZmllZFR5cGUo
KSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJ
YXNzZXJ0RXF1YWxzKCJPdXRlcjI8SW50ZWdlcj4uQE1hcmtlcjEgSW5uZXIiLCBxdWFsaWZpZWRU
eXBlLnRvU3RyaW5nKCkpOworCQluYW1lID0gcXVhbGlmaWVkVHlwZS5nZXROYW1lKCk7CisJCWFz
c2VydEVxdWFscygiSW5uZXIiLCBuYW1lLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1
YWxpZmllZFR5cGUuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXpl
KCkgPT0gMSk7CisJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KDAp
OworCQlhc3NlcnRFcXVhbHMoIkBNYXJrZXIxIiwgYW5ub3RhdGlvbi50b1N0cmluZygpKTsKKwkJ
cXVhbGlmaWVyVHlwZSA9IHF1YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRy
dWUocXVhbGlmaWVyVHlwZS5pc1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRU
eXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRz
ID0gcGFyYW1ldHJpemVkVHlwZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFy
Z3VtZW50cy5zaXplKCkgPT0gMSk7CisJCXR5cGUgPSAoVHlwZSkgdHlwZUFyZ3VtZW50cy5nZXQo
MCk7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGUg
PSBwYXJhbWV0cml6ZWRUeXBlLmdldFR5cGUoKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjIiLCB0
eXBlLnRvU3RyaW5nKCkpOworCQlhc3NlcnRUcnVlKHR5cGUuaXNTaW1wbGVUeXBlKCkpOworCisJ
CS8vIGNhc2UgMTMgLSBhIGxpc3Qgb2YgYW5ub3RhdGlvbnMgYW5kIG11bHRpcGxlIHR5cGVBcmd1
bWVudCBlbGVtZW50CisJCS8vIGxpc3RzLgorCQkvLyBPdXRlcjM8RG91YmxlPi4gQE1hcmtlcjEg
QE1hcmtlcjIgSW5uZXI8SW50ZWdlciwgQ2hhcmFjdGVyPi4KKwkJLy8gRGVlcGVyPERvdWJsZT4K
KwkJdHlwZWRlY2xhcmF0aW9uID0gKFR5cGVEZWNsYXJhdGlvbikgZ2V0QVNUTm9kZShjdSwgdENv
dW50KyspOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSB0eXBlZGVj
bGFyYXRpb24uc3VwZXJJbnRlcmZhY2VUeXBlcygpLmdldCgwKTsKKwkJdHlwZUFyZ3VtZW50cyA9
IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRFcXVhbHMoMSwgdHlw
ZUFyZ3VtZW50cy5zaXplKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6ZWRU
eXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjM8RG91Ymxl
Pi5ATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLENoYXJhY3Rlcj4uRGVlcGVyPERvdWJs
ZT4iLHBhcmFtZXRyaXplZFR5cGUudG9TdHJpbmcoKSk7CisJCXR5cGVBcmd1bWVudHMgPSBwYXJh
bWV0cml6ZWRUeXBlLnR5cGVBcmd1bWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSh0eXBlQXJndW1lbnRz
LnNpemUoKSA9PSAxKTsKKwkJdHlwZSA9IChUeXBlKSB0eXBlQXJndW1lbnRzLmdldCgwKTsKKwkJ
YXNzZXJ0RXF1YWxzKCJEb3VibGUiLCB0eXBlLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1l
dHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUo
KSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVhbGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1
YWxzKCJPdXRlcjM8RG91YmxlPi5ATWFya2VyMSBATWFya2VyMiBJbm5lcjxJbnRlZ2VyLENoYXJh
Y3Rlcj4uRGVlcGVyIiwgcXVhbGlmaWVkVHlwZS50b1N0cmluZygpKTsKKwkJbmFtZSA9IHF1YWxp
ZmllZFR5cGUuZ2V0TmFtZSgpOworCQlhc3NlcnRFcXVhbHMoIkRlZXBlciIsIG5hbWUudG9TdHJp
bmcoKSk7CisJCWFubm90YXRpb25zID0gcXVhbGlmaWVkVHlwZS5hbm5vdGF0aW9ucygpOworCQlh
c3NlcnRUcnVlKGFubm90YXRpb25zLnNpemUoKSA9PSAwKTsKKwkJcXVhbGlmaWVyVHlwZSA9IHF1
YWxpZmllZFR5cGUuZ2V0UXVhbGlmaWVyKCk7CisJCWFzc2VydFRydWUocXVhbGlmaWVyVHlwZS5p
c1BhcmFtZXRlcml6ZWRUeXBlKCkpOworCQlwYXJhbWV0cml6ZWRUeXBlID0gKFBhcmFtZXRlcml6
ZWRUeXBlKSBxdWFsaWZpZXJUeXBlOworCQl0eXBlQXJndW1lbnRzID0gcGFyYW1ldHJpemVkVHlw
ZS50eXBlQXJndW1lbnRzKCk7CisJCWFzc2VydFRydWUodHlwZUFyZ3VtZW50cy5zaXplKCkgPT0g
Mik7CisJCWFzc2VydEVxdWFscygiSW50ZWdlciIsIHR5cGVBcmd1bWVudHMuZ2V0KDApLnRvU3Ry
aW5nKCkpOworCQlhc3NlcnRFcXVhbHMoIkNoYXJhY3RlciIsIHR5cGVBcmd1bWVudHMuZ2V0KDEp
LnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5nZXRUeXBlKCk7CisJCWFz
c2VydFRydWUodHlwZS5pc1F1YWxpZmllZFR5cGUoKSk7CisJCXF1YWxpZmllZFR5cGUgPSAoUXVh
bGlmaWVkVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJJbm5lciIsIHF1YWxpZmllZFR5cGUu
Z2V0TmFtZSgpLnRvU3RyaW5nKCkpOworCQlhbm5vdGF0aW9ucyA9IHF1YWxpZmllZFR5cGUuYW5u
b3RhdGlvbnMoKTsKKwkJYXNzZXJ0VHJ1ZShhbm5vdGF0aW9ucy5zaXplKCkgPT0gMik7CisJCWFz
c2VydEVxdWFscygiQE1hcmtlcjEiLCBhbm5vdGF0aW9ucy5nZXQoMCkudG9TdHJpbmcoKSk7CisJ
CWFzc2VydEVxdWFscygiQE1hcmtlcjIiLCBhbm5vdGF0aW9ucy5nZXQoMSkudG9TdHJpbmcoKSk7
CisJCXF1YWxpZmllclR5cGUgPSBxdWFsaWZpZWRUeXBlLmdldFF1YWxpZmllcigpOworCQlhc3Nl
cnRUcnVlKHF1YWxpZmllclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKTsKKwkJcGFyYW1ldHJp
emVkVHlwZSA9IChQYXJhbWV0ZXJpemVkVHlwZSkgcXVhbGlmaWVyVHlwZTsKKwkJdHlwZUFyZ3Vt
ZW50cyA9IHBhcmFtZXRyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpOworCQlhc3NlcnRUcnVlKHR5
cGVBcmd1bWVudHMuc2l6ZSgpID09IDEpOworCQlhc3NlcnRFcXVhbHMoIkRvdWJsZSIsIHR5cGVB
cmd1bWVudHMuZ2V0KDApLnRvU3RyaW5nKCkpOworCQl0eXBlID0gcGFyYW1ldHJpemVkVHlwZS5n
ZXRUeXBlKCk7CisJCWFzc2VydFRydWUodHlwZS5pc1NpbXBsZVR5cGUoKSk7CisJCXNpbXBsZVR5
cGUgPSAoU2ltcGxlVHlwZSkgdHlwZTsKKwkJYXNzZXJ0RXF1YWxzKCJPdXRlcjMiLCBzaW1wbGVU
eXBlLnRvU3RyaW5nKCkpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hl
clRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YQppbmRleCBhZDBjNmIw
Li5jZjM5ZjBkIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5qYXZhCkBAIC0xMzQ3LDQgKzEzNDcsMzMgQEAK
IAkJeDEudmFyYXJnc0Fubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMSk7CiAJCWJhc2ljTWF0Y2go
eDEpOwogCX0KKwkKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5j
Z2k/aWQ9Mzk1ODg2CisJcHVibGljIHZvaWQgdGVzdFF1YWxpZmllZFR5cGVBbm5vdGF0aW9uKCkg
eworCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwoKSA8IEFTVC5KTFM4KSB7CisJCQlyZXR1cm47CisJ
CX0KKwkJUXVhbGlmaWVkVHlwZSB4MSA9IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5U
MSwgdGhpcy5OMSk7CisJCXgxLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMSk7CisJCXgxID0g
dGhpcy5hc3QubmV3UXVhbGlmaWVkVHlwZSh4MSwgdGhpcy5OMik7CisJCXgxLmFubm90YXRpb25z
KCkuYWRkKHRoaXMuQU5PMik7CisJCWJhc2ljTWF0Y2goeDEpOworCX0KKwkKKwkvLyBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk1ODg2CisJcHVibGljIHZv
aWQgdGVzdFBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRo
aXMuYXN0LmFwaUxldmVsKCkgPCBBU1QuSkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVF1YWxp
ZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IHRoaXMuYXN0Lm5ld1F1YWxpZmllZFR5cGUodGhpcy5U
MSwgdGhpcy5OMSk7IAorCQlxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5P
MSk7CisJCVBhcmFtZXRlcml6ZWRUeXBlIHgxID0gdGhpcy5hc3QubmV3UGFyYW1ldGVyaXplZFR5
cGUocXVhbGlmaWVkVHlwZSk7CisJCXgxLnR5cGVBcmd1bWVudHMoKS5hZGQodGhpcy5hc3QubmV3
U2ltcGxlVHlwZSh0aGlzLmFzdC5uZXdTaW1wbGVOYW1lKCJTTjEiKSkpOworCQlxdWFsaWZpZWRU
eXBlID0gdGhpcy5hc3QubmV3UXVhbGlmaWVkVHlwZSh4MSwgdGhpcy5OMik7CisJCXgxID0gdGhp
cy5hc3QubmV3UGFyYW1ldGVyaXplZFR5cGUocXVhbGlmaWVkVHlwZSk7CisJCVNpbXBsZVR5cGUg
c2ltcGxlVHlwZSA9IHRoaXMuYXN0Lm5ld1NpbXBsZVR5cGUodGhpcy5hc3QubmV3U2ltcGxlTmFt
ZSgiU04yIikpOworCQlzaW1wbGVUeXBlLmFubm90YXRpb25zKCkuYWRkKHRoaXMuQU5PMik7CisJ
CXgxLnR5cGVBcmd1bWVudHMoKS5hZGQoc2ltcGxlVHlwZSk7CisJCWJhc2ljTWF0Y2goeDEpOwor
CX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCmluZGV4IGFiOTFhYzgu
LjY1NmZiZDggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQpAQCAtMzI2
NCw2ICszMjY0LDEwIEBACiAJCQkJUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2Ug
cGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UgPSAoUGFyYW1ldGVyaXplZFF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2U7CiAJCQkJY2hhcltdW10gdG9rZW5zID0g
cGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zOwogCQkJCVR5cGVSZWZl
cmVuY2VbXVtdIHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZS50eXBlQXJndW1lbnRzOworCQkJCW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5hc3QuQW5ub3RhdGlvbltdW10gdHlwZUFubm90YXRpb25zID0gcGFyYW1ldGVyaXplZFF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnM7CisJCQkJVHlwZVJlZmVyZW5jZVtdIGFyZ3Vt
ZW50cyA9IG51bGw7CisJCQkJaW50IGxlbnRoID0gdG9rZW5zLmxlbmd0aDsKKwkJCQlpbnQgZmly
c3RUeXBlSW5kZXggPSBsZW50aCAtIDE7CiAJCQkJbG9uZ1tdIHBvc2l0aW9ucyA9IHBhcmFtZXRl
cml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZVBvc2l0aW9uczsKIAkJCQlzb3VyY2VT
dGFydCA9IChpbnQpKHBvc2l0aW9uc1swXT4+PjMyKTsKIAkJCQlzd2l0Y2godGhpcy5hc3QuYXBp
TGV2ZWwpIHsKQEAgLTMyODEsMTI0ICszMjg1LDE4NSBAQAogCQkJCQl9CiAJCQkJCWJyZWFrOwog
CQkJCQlkZWZhdWx0IDoKLQkJCQkJCWlmICh0eXBlQXJndW1lbnRzICE9IG51bGwpIHsKLQkJCQkJ
CQlpbnQgbnVtYmVyT2ZFbmNsb3NpbmdUeXBlID0gMDsKLQkJCQkJCQlpbnQgc3RhcnRpbmdJbmRl
eCA9IDA7Ci0JCQkJCQkJaW50IGVuZGluZ0luZGV4ID0gMDsKLQkJCQkJCQlmb3IgKGludCBpID0g
MCwgbWF4ID0gdHlwZUFyZ3VtZW50cy5sZW5ndGg7IGkgPCBtYXg7IGkrKykgewotCQkJCQkJCQlp
ZiAodHlwZUFyZ3VtZW50c1tpXSAhPSBudWxsKSB7Ci0JCQkJCQkJCQludW1iZXJPZkVuY2xvc2lu
Z1R5cGUrKzsKLQkJCQkJCQkJfSBlbHNlIGlmIChudW1iZXJPZkVuY2xvc2luZ1R5cGUgPT0gMCkg
ewotCQkJCQkJCQkJZW5kaW5nSW5kZXgrKzsKLQkJCQkJCQkJfQorCQkJCQkJZm9yIChpbnQgaSA9
IDA7IGkgPCBsZW50aDsgKytpKSB7CisJCQkJCQkJaWYgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAm
JiB0eXBlQXJndW1lbnRzW2ldICE9IG51bGwpIHsKKwkJCQkJCQkJZmlyc3RUeXBlSW5kZXggPSBp
OworCQkJCQkJCQlicmVhazsKIAkJCQkJCQl9Ci0JCQkJCQkJTmFtZSBuYW1lID0gbnVsbDsKLQkJ
CQkJCQlpZiAoZW5kaW5nSW5kZXggLSBzdGFydGluZ0luZGV4ID09IDApIHsKLQkJCQkJCQkJZmlu
YWwgU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOwotCQkJ
CQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tz
dGFydGluZ0luZGV4XSkpOwotCQkJCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlv
bihzaW1wbGVOYW1lKTsKLQkJCQkJCQkJaW50IHN0YXJ0ID0gKGludCkocG9zaXRpb25zW3N0YXJ0
aW5nSW5kZXhdPj4+MzIpOwotCQkJCQkJCQlpbnQgZW5kID0gKGludCkgcG9zaXRpb25zW3N0YXJ0
aW5nSW5kZXhdOwotCQkJCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQg
LSBzdGFydCArIDEpOwotCQkJCQkJCQlzaW1wbGVOYW1lLmluZGV4ID0gMTsKLQkJCQkJCQkJbmFt
ZSA9IHNpbXBsZU5hbWU7Ci0JCQkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewotCQkJ
CQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFtZSwgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJCQkJCX0K
LQkJCQkJCQl9IGVsc2UgewotCQkJCQkJCQluYW1lID0gdGhpcy5zZXRRdWFsaWZpZWROYW1lTmFt
ZUFuZFNvdXJjZVJhbmdlcyh0b2tlbnMsIHBvc2l0aW9ucywgZW5kaW5nSW5kZXgsIHR5cGVSZWZl
cmVuY2UpOworCQkJCQkJCWlmICh0eXBlQW5ub3RhdGlvbnMgIT0gbnVsbCAmJiB0eXBlQW5ub3Rh
dGlvbnNbaV0gIT0gbnVsbCkgeworCQkJCQkJCQlmaXJzdFR5cGVJbmRleCA9IGk7CisJCQkJCQkJ
CWJyZWFrOwogCQkJCQkJCX0KLQkJCQkJCQlTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcgU2lt
cGxlVHlwZSh0aGlzLmFzdCk7Ci0JCQkJCQkJc2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOwotCQkJ
CQkJCWludCBzdGFydCA9IChpbnQpKHBvc2l0aW9uc1tzdGFydGluZ0luZGV4XT4+PjMyKTsKLQkJ
CQkJCQlpbnQgZW5kID0gKGludCkgcG9zaXRpb25zW2VuZGluZ0luZGV4XTsKLQkJCQkJCQlzaW1w
bGVUeXBlLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOwotCQkJCQkJCWlm
IChlbmRpbmdJbmRleCA9PSAwICYmIHR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAm
JiAoYW5ub3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdKSAhPSBudWxsKSB7
Ci0JCQkJCQkJCWFubm90YXRlVHlwZShzaW1wbGVUeXBlLCBhbm5vdGF0aW9ucyk7Ci0JCQkJCQkJ
fQotCQkJCQkJCVBhcmFtZXRlcml6ZWRUeXBlIHBhcmFtZXRlcml6ZWRUeXBlID0gbmV3IFBhcmFt
ZXRlcml6ZWRUeXBlKHRoaXMuYXN0KTsKLQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5zZXRUeXBl
KHNpbXBsZVR5cGUpOworCQkJCQkJfQkJCQkJCQorCQkJCQkJCisJCQkJCQlOYW1lIG5hbWUgPSBu
dWxsOwkJCQkJCQorCQkJCQkJaWYgKGZpcnN0VHlwZUluZGV4ID09IDApIHsKKwkJCQkJCQlmaW5h
bCBTaW1wbGVOYW1lIHNpbXBsZU5hbWUgPSBuZXcgU2ltcGxlTmFtZSh0aGlzLmFzdCk7CisJCQkJ
CQkJc2ltcGxlTmFtZS5zZXRJZGVudGlmaWVyKG5ldyBTdHJpbmcodG9rZW5zWzBdKSk7CisJCQkJ
CQkJcmVjb3JkUGVuZGluZ05hbWVTY29wZVJlc29sdXRpb24oc2ltcGxlTmFtZSk7CisJCQkJCQkJ
aW50IHN0YXJ0ID0gKGludCkgKHBvc2l0aW9uc1swXSA+Pj4gMzIpOworCQkJCQkJCWludCBlbmQg
PSAoaW50KSBwb3NpdGlvbnNbMF07CisJCQkJCQkJc2ltcGxlTmFtZS5zZXRTb3VyY2VSYW5nZShz
dGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJCQlzaW1wbGVOYW1lLmluZGV4ID0gMTsKKwkJ
CQkJCQluYW1lID0gc2ltcGxlTmFtZTsKIAkJCQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3Mp
IHsKLQkJCQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlVHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJ
CQkJCXJlY29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJCX0KKwkJ
CQkJCX0gZWxzZSB7CisJCQkJCQkJbmFtZSA9IHRoaXMuc2V0UXVhbGlmaWVkTmFtZU5hbWVBbmRT
b3VyY2VSYW5nZXModG9rZW5zLCBwb3NpdGlvbnMsIGZpcnN0VHlwZUluZGV4LCB0eXBlUmVmZXJl
bmNlKTsKKwkJCQkJCX0KKwkJCQkJCQorCQkJCQkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gbmV3
IFNpbXBsZVR5cGUodGhpcy5hc3QpOworCQkJCQkJc2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOwor
CQkJCQkJaW50IHN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdID4+PiAzMik7CisJCQkJCQlpbnQg
ZW5kID0gKGludClwb3NpdGlvbnNbZmlyc3RUeXBlSW5kZXhdOworCQkJCQkJc2ltcGxlVHlwZS5z
ZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJCWlmICh0eXBlQW5u
b3RhdGlvbnMgIT0gbnVsbCAmJiAoYW5ub3RhdGlvbnMgPSB0eXBlQW5ub3RhdGlvbnNbZmlyc3RU
eXBlSW5kZXhdKSAhPSBudWxsKSB7CisJCQkJCQkJYW5ub3RhdGVUeXBlKHNpbXBsZVR5cGUsIGFu
bm90YXRpb25zKTsKKwkJCQkJCX0KKwkJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgewor
CQkJCQkJCXJlY29yZE5vZGVzKHNpbXBsZVR5cGUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJfQor
CQkJCQkJVHlwZSBjdXJyZW50VHlwZSA9IHNpbXBsZVR5cGU7CQkJCQkJCisJCQkJCQlpbnQgaW5k
ZXhPZkVuY2xvc2luZ1R5cGUgPSAxOworCQkJCQkJaWYgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAm
JiAoYXJndW1lbnRzID0gdHlwZUFyZ3VtZW50c1tmaXJzdFR5cGVJbmRleF0pICE9IG51bGwpIHsK
KwkJCQkJCQlpbnQgYXJnbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKKwkJCQkJCQlQYXJhbWV0ZXJp
emVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZSA9IG5ldyBQYXJhbWV0ZXJpemVkVHlwZSh0aGlzLmFz
dCk7CisJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuaW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlw
ZTsKKwkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5zZXRUeXBlKGN1cnJlbnRUeXBlKTsKKwkJCQkJ
CQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKIAkJCQkJCQkJcmVjb3JkTm9kZXMocGFyYW1l
dGVyaXplZFR5cGUsIHR5cGVSZWZlcmVuY2UpOwogCQkJCQkJCX0KLQkJCQkJCQlzdGFydCA9IHNp
bXBsZVR5cGUuZ2V0U3RhcnRQb3NpdGlvbigpOwotCQkJCQkJCWVuZCA9IHN0YXJ0ICsgc2ltcGxl
VHlwZS5nZXRMZW5ndGgoKSAtIDE7Ci0JCQkJCQkJZm9yIChpbnQgaSA9IDAsIG1heCA9IHR5cGVB
cmd1bWVudHNbZW5kaW5nSW5kZXhdLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7Ci0JCQkJCQkJCWZp
bmFsIFR5cGUgdHlwZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW2VuZGluZ0luZGV4XVtp
XSk7CisJCQkJCQkJVHlwZSB0eXBlMiA9IG51bGw7IAorCQkJCQkJCWZvciAoaW50IGkgPSAwOyBp
IDwgYXJnbGVuOyArK2kgKSB7CisJCQkJCQkJCXR5cGUyID0gY29udmVydFR5cGUoYXJndW1lbnRz
W2ldKTsKIAkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUudHlwZUFyZ3VtZW50cygpLmFkZCh0eXBl
Mik7Ci0JCQkJCQkJCWVuZCA9IHR5cGUyLmdldFN0YXJ0UG9zaXRpb24oKSArIHR5cGUyLmdldExl
bmd0aCgpIC0gMTsKIAkJCQkJCQl9Ci0JCQkJCQkJaW50IGluZGV4T2ZFbmNsb3NpbmdUeXBlID0g
MTsKLQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5pbmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBl
OworCQkJCQkJCWVuZCA9IHR5cGUyICE9IG51bGwgPyB0eXBlMi5nZXRTdGFydFBvc2l0aW9uKCkg
KyB0eXBlMi5nZXRMZW5ndGgoKSAtIDEgOiBlbmQ7CiAJCQkJCQkJZW5kID0gcmV0cmlldmVDbG9z
aW5nQW5nbGVCcmFja2V0UG9zaXRpb24oZW5kICsgMSk7Ci0JCQkJCQkJbGVuZ3RoID0gZW5kICsg
MTsKIAkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0g
c3RhcnQgKyAxKTsKLQkJCQkJCQlzdGFydGluZ0luZGV4ID0gZW5kaW5nSW5kZXggKyAxOwotCQkJ
CQkJCVR5cGUgY3VycmVudFR5cGUgPSBwYXJhbWV0ZXJpemVkVHlwZTsKLQkJCQkJCQl3aGlsZShz
dGFydGluZ0luZGV4IDwgdHlwZUFyZ3VtZW50cy5sZW5ndGgpIHsKLQkJCQkJCQkJU2ltcGxlTmFt
ZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOwotCQkJCQkJCQlzaW1wbGVO
YW1lLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tzdGFydGluZ0luZGV4
XSkpOwotCQkJCQkJCQlzaW1wbGVOYW1lLmluZGV4ID0gc3RhcnRpbmdJbmRleCArIDE7Ci0JCQkJ
CQkJCXN0YXJ0ID0gKGludCkocG9zaXRpb25zW3N0YXJ0aW5nSW5kZXhdPj4+MzIpOwotCQkJCQkJ
CQllbmQgPSAoaW50KSBwb3NpdGlvbnNbc3RhcnRpbmdJbmRleF07Ci0JCQkJCQkJCXNpbXBsZU5h
bWUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7Ci0JCQkJCQkJCXJlY29y
ZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUpOwotCQkJCQkJCQlRdWFsaWZp
ZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7Ci0JCQkJ
CQkJCXF1YWxpZmllZFR5cGUuc2V0UXVhbGlmaWVyKGN1cnJlbnRUeXBlKTsKLQkJCQkJCQkJcXVh
bGlmaWVkVHlwZS5zZXROYW1lKHNpbXBsZU5hbWUpOwotCQkJCQkJCQlpZiAodHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIChhbm5vdGF0aW9ucyA9IHR5cGVSZWZlcmVuY2UuYW5u
b3RhdGlvbnNbc3RhcnRpbmdJbmRleF0pICE9IG51bGwpIHsKLQkJCQkJCQkJCWFubm90YXRlVHlw
ZShxdWFsaWZpZWRUeXBlLCBhbm5vdGF0aW9ucyk7Ci0JCQkJCQkJCX0KLQkJCQkJCQkJaWYgKHRo
aXMucmVzb2x2ZUJpbmRpbmdzKSB7Ci0JCQkJCQkJCQlyZWNvcmROb2RlcyhzaW1wbGVOYW1lLCB0
eXBlUmVmZXJlbmNlKTsKLQkJCQkJCQkJCXJlY29yZE5vZGVzKHF1YWxpZmllZFR5cGUsIHR5cGVS
ZWZlcmVuY2UpOwotCQkJCQkJCQl9Ci0JCQkJCQkJCXN0YXJ0ID0gY3VycmVudFR5cGUuZ2V0U3Rh
cnRQb3NpdGlvbigpOwotCQkJCQkJCQllbmQgPSBzaW1wbGVOYW1lLmdldFN0YXJ0UG9zaXRpb24o
KSArIHNpbXBsZU5hbWUuZ2V0TGVuZ3RoKCkgLSAxOwotCQkJCQkJCQlxdWFsaWZpZWRUeXBlLnNl
dFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOwotCQkJCQkJCQlpbmRleE9mRW5j
bG9zaW5nVHlwZSsrOwotCQkJCQkJCQlpZiAodHlwZUFyZ3VtZW50c1tzdGFydGluZ0luZGV4XSAh
PSBudWxsKSB7Ci0JCQkJCQkJCQlxdWFsaWZpZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVuY2xvc2lu
Z1R5cGU7Ci0JCQkJCQkJCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0ZXJpemVkVHlwZTIgPSBu
ZXcgUGFyYW1ldGVyaXplZFR5cGUodGhpcy5hc3QpOwotCQkJCQkJCQkJcGFyYW1ldGVyaXplZFR5
cGUyLnNldFR5cGUocXVhbGlmaWVkVHlwZSk7Ci0JCQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZTIu
aW5kZXggPSBpbmRleE9mRW5jbG9zaW5nVHlwZTsKLQkJCQkJCQkJCWlmICh0aGlzLnJlc29sdmVC
aW5kaW5ncykgewotCQkJCQkJCQkJCXJlY29yZE5vZGVzKHBhcmFtZXRlcml6ZWRUeXBlMiwgdHlw
ZVJlZmVyZW5jZSk7Ci0JCQkJCQkJCQl9Ci0JCQkJCQkJCQlmb3IgKGludCBpID0gMCwgbWF4ID0g
dHlwZUFyZ3VtZW50c1tzdGFydGluZ0luZGV4XS5sZW5ndGg7IGkgPCBtYXg7IGkrKykgewotCQkJ
CQkJCQkJCWZpbmFsIFR5cGUgdHlwZTIgPSBjb252ZXJ0VHlwZSh0eXBlQXJndW1lbnRzW3N0YXJ0
aW5nSW5kZXhdW2ldKTsKLQkJCQkJCQkJCQlwYXJhbWV0ZXJpemVkVHlwZTIudHlwZUFyZ3VtZW50
cygpLmFkZCh0eXBlMik7Ci0JCQkJCQkJCQkJZW5kID0gdHlwZTIuZ2V0U3RhcnRQb3NpdGlvbigp
ICsgdHlwZTIuZ2V0TGVuZ3RoKCkgLSAxOwotCQkJCQkJCQkJfQotCQkJCQkJCQkJZW5kID0gcmV0
cmlldmVDbG9zaW5nQW5nbGVCcmFja2V0UG9zaXRpb24oZW5kICsgMSk7Ci0JCQkJCQkJCQlsZW5n
dGggPSBlbmQgKyAxOwotCQkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUyLnNldFNvdXJjZVJhbmdl
KHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpOwotCQkJCQkJCQkJY3VycmVudFR5cGUgPSBwYXJhbWV0
ZXJpemVkVHlwZTI7Ci0JCQkJCQkJCX0gZWxzZSB7Ci0JCQkJCQkJCQljdXJyZW50VHlwZSA9IHF1
YWxpZmllZFR5cGU7Ci0JCQkJCQkJCQlxdWFsaWZpZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVuY2xv
c2luZ1R5cGU7Ci0JCQkJCQkJCX0KLQkJCQkJCQkJc3RhcnRpbmdJbmRleCsrOworCQkJCQkJCWN1
cnJlbnRUeXBlID0gcGFyYW1ldGVyaXplZFR5cGU7CisJCQkJCQl9CisJCQkJCQkKKwkJCQkJCWZv
ciAoaW50IGkgPSBmaXJzdFR5cGVJbmRleCArIDE7IGkgPCBsZW50aDsgKytpKSB7CisJCQkJCQkJ
U2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOworCQkJCQkJ
CXNpbXBsZU5hbWUuc2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1tpXSkpOworCQkJCQkJ
CXNpbXBsZU5hbWUuaW5kZXggPSBpICsgMTsKKwkJCQkJCQlzdGFydCA9IChpbnQpIChwb3NpdGlv
bnNbaV0gPj4+IDMyKTsKKwkJCQkJCQllbmQgPSAoaW50KSBwb3NpdGlvbnNbaV07CisJCQkJCQkJ
c2ltcGxlTmFtZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJ
CQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsKKwkJCQkJCQlR
dWFsaWZpZWRUeXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7
CisJCQkJCQkJcXVhbGlmaWVkVHlwZS5zZXRRdWFsaWZpZXIoY3VycmVudFR5cGUpOworCQkJCQkJ
CXF1YWxpZmllZFR5cGUuc2V0TmFtZShzaW1wbGVOYW1lKTsKKwkJCQkJCQlpZiAodHlwZUFubm90
YXRpb25zICE9IG51bGwgJiYgIChhbm5vdGF0aW9ucyA9IHR5cGVBbm5vdGF0aW9uc1tpXSkgIT0g
bnVsbCkgeworCQkJCQkJCQlhbm5vdGF0ZVR5cGUocXVhbGlmaWVkVHlwZSwgYW5ub3RhdGlvbnMp
OwogCQkJCQkJCX0KIAkJCQkJCQlpZiAodGhpcy5yZXNvbHZlQmluZGluZ3MpIHsKLQkJCQkJCQkJ
dGhpcy5yZWNvcmROb2RlcyhjdXJyZW50VHlwZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCQkJCXJl
Y29yZE5vZGVzKHNpbXBsZU5hbWUsIHR5cGVSZWZlcmVuY2UpOworCQkJCQkJCQlyZWNvcmROb2Rl
cyhxdWFsaWZpZWRUeXBlLCB0eXBlUmVmZXJlbmNlKTsKIAkJCQkJCQl9Ci0JCQkJCQkJdHlwZSA9
IGN1cnJlbnRUeXBlOwotCQkJCQkJCWxlbmd0aCAtPSBzb3VyY2VTdGFydDsKKwkJCQkJCQlzdGFy
dCA9IGN1cnJlbnRUeXBlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJCQkJCQllbmQgPSBzaW1wbGVO
YW1lLmdldFN0YXJ0UG9zaXRpb24oKSArIHNpbXBsZU5hbWUuZ2V0TGVuZ3RoKCkgLSAxOworCQkJ
CQkJCXF1YWxpZmllZFR5cGUuc2V0U291cmNlUmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7
CisJCQkJCQkJY3VycmVudFR5cGUgPSBxdWFsaWZpZWRUeXBlOworCQkJCQkJCWluZGV4T2ZFbmNs
b3NpbmdUeXBlKys7CisJCQkJCQkJCisJCQkJCQkJaWYgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAm
JiAoYXJndW1lbnRzID0gdHlwZUFyZ3VtZW50c1tpXSkgIT0gbnVsbCkgeworCQkJCQkJCQlpbnQg
YXJnbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKKwkJCQkJCQkJcXVhbGlmaWVkVHlwZS5pbmRleCA9
IGluZGV4T2ZFbmNsb3NpbmdUeXBlOworCQkJCQkJCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0
ZXJpemVkVHlwZSA9IG5ldyBQYXJhbWV0ZXJpemVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCQkJCXBh
cmFtZXRlcml6ZWRUeXBlLmluZGV4ID0gaW5kZXhPZkVuY2xvc2luZ1R5cGU7CisJCQkJCQkJCXBh
cmFtZXRlcml6ZWRUeXBlLnNldFR5cGUoY3VycmVudFR5cGUpOworCQkJCQkJCQlpZiAodGhpcy5y
ZXNvbHZlQmluZGluZ3MpIHsKKwkJCQkJCQkJCXJlY29yZE5vZGVzKHBhcmFtZXRlcml6ZWRUeXBl
LCB0eXBlUmVmZXJlbmNlKTsKKwkJCQkJCQkJfQorCQkJCQkJCQlUeXBlIHR5cGUyID0gbnVsbDsg
CisJCQkJCQkJCWZvciAoaW50IGogPSAwOyBqIDwgYXJnbGVuOyArK2ogKSB7CisJCQkJCQkJCQl0
eXBlMiA9IGNvbnZlcnRUeXBlKGFyZ3VtZW50c1tqXSk7CisJCQkJCQkJCQlwYXJhbWV0ZXJpemVk
VHlwZS50eXBlQXJndW1lbnRzKCkuYWRkKHR5cGUyKTsKKwkJCQkJCQkJfQorCQkJCQkJCQllbmQg
PSB0eXBlMiAhPSBudWxsID8gdHlwZTIuZ2V0U3RhcnRQb3NpdGlvbigpICsgdHlwZTIuZ2V0TGVu
Z3RoKCkgLSAxIDogZW5kOworCQkJCQkJCQllbmQgPSByZXRyaWV2ZUNsb3NpbmdBbmdsZUJyYWNr
ZXRQb3NpdGlvbihlbmQgKyAxKTsKKwkJCQkJCQkJcGFyYW1ldGVyaXplZFR5cGUuc2V0U291cmNl
UmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7CisJCQkJCQkJCWN1cnJlbnRUeXBlID0gcGFy
YW1ldGVyaXplZFR5cGU7CisJCQkJCQkJfSBlbHNlIHsKKwkJCQkJCQkJcXVhbGlmaWVkVHlwZS5p
bmRleCA9IGluZGV4T2ZFbmNsb3NpbmdUeXBlOworCQkJCQkJCX0KIAkJCQkJCX0KKwkJCQkJCXR5
cGUgPSBjdXJyZW50VHlwZTsKIAkJCQl9Ci0JCQl9IGVsc2UgaWYgKHR5cGVSZWZlcmVuY2UgaW5z
dGFuY2VvZiBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5
cGVSZWZlcmVuY2UpIHsKLQkJCQljaGFyW11bXSBuYW1lID0gKChvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIuYXN0LlF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHR5cGVSZWZlcmVuY2Up
LmdldFR5cGVOYW1lKCk7Ci0JCQkJaW50IG5hbWVMZW5ndGggPSBuYW1lLmxlbmd0aDsKKwkJCX0g
ZWxzZSBpZiAodHlwZVJlZmVyZW5jZSBpbnN0YW5jZW9mIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgewkJCQorCQkJCVF1YWxpZmll
ZFR5cGVSZWZlcmVuY2UgcXVhbGlmaWVkVHlwZVJlZmVyZW5jZSA9IChRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlKSB0eXBlUmVmZXJlbmNlOwogCQkJCWxvbmdbXSBwb3NpdGlvbnMgPSAoKG9yZy5lY2xp
cHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgdHlw
ZVJlZmVyZW5jZSkuc291cmNlUG9zaXRpb25zOworCQkJCW9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5hc3QuQW5ub3RhdGlvbiBbXVtdIHR5cGVBbm5vdGF0aW9ucyA9IHR5cGVSZWZl
cmVuY2UuYW5ub3RhdGlvbnM7CisJCQkJY2hhciBbXVtdIHRva2VucyA9IHF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UudG9rZW5zOworCQkJCWludCBsZW50aCA9IHRva2Vucy5sZW5ndGg7CisJCQkJaW50
IGZpcnN0VHlwZUluZGV4ID0gbGVudGggLSAxOworCQkJCQorCQkJCWlmICh0eXBlQW5ub3RhdGlv
bnMgIT0gbnVsbCkgeworCQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGxlbnRoOyArK2kpIHsKKwkJ
CQkJCWlmICh0eXBlQW5ub3RhdGlvbnNbaV0gIT0gbnVsbCkgeworCQkJCQkJCWZpcnN0VHlwZUlu
ZGV4ID0gaTsKKwkJCQkJCQlicmVhazsKKwkJCQkJCX0KKwkJCQkJfQorCQkJCX0gIAogCQkJCXNv
dXJjZVN0YXJ0ID0gKGludCkocG9zaXRpb25zWzBdPj4+MzIpOwotCQkJCWxlbmd0aCA9IChpbnQp
KHBvc2l0aW9uc1tuYW1lTGVuZ3RoIC0gMV0gJiAweEZGRkZGRkZGKSAtIHNvdXJjZVN0YXJ0ICsg
MTsKLQkJCQlmaW5hbCBOYW1lIHF1YWxpZmllZE5hbWUgPSB0aGlzLnNldFF1YWxpZmllZE5hbWVO
YW1lQW5kU291cmNlUmFuZ2VzKG5hbWUsIHBvc2l0aW9ucywgdHlwZVJlZmVyZW5jZSk7Ci0JCQkJ
ZmluYWwgU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gbmV3IFNpbXBsZVR5cGUodGhpcy5hc3QpOwot
CQkJCXNpbXBsZVR5cGUuc2V0TmFtZShxdWFsaWZpZWROYW1lKTsKLQkJCQl0eXBlID0gc2ltcGxl
VHlwZTsKLQkJCQl0eXBlLnNldFNvdXJjZVJhbmdlKHNvdXJjZVN0YXJ0LCBsZW5ndGgpOworCQkJ
CU5hbWUgbmFtZSA9IG51bGw7CisJCQkJaWYgKGZpcnN0VHlwZUluZGV4ID09IDApIHsKKwkJCQkJ
ZmluYWwgU2ltcGxlTmFtZSBzaW1wbGVOYW1lID0gbmV3IFNpbXBsZU5hbWUodGhpcy5hc3QpOwor
CQkJCQlzaW1wbGVOYW1lLmludGVybmFsU2V0SWRlbnRpZmllcihuZXcgU3RyaW5nKHRva2Vuc1sw
XSkpOworCQkJCQlyZWNvcmRQZW5kaW5nTmFtZVNjb3BlUmVzb2x1dGlvbihzaW1wbGVOYW1lKTsK
KwkJCQkJaW50IHN0YXJ0ID0gKGludCkgKHBvc2l0aW9uc1swXSA+Pj4gMzIpOworCQkJCQlpbnQg
ZW5kID0gKGludCkgcG9zaXRpb25zWzBdOworCQkJCQlzaW1wbGVOYW1lLnNldFNvdXJjZVJhbmdl
KHN0YXJ0LCBlbmQpOworCQkJCQlzaW1wbGVOYW1lLmluZGV4ID0gMTsKKwkJCQkJbmFtZSA9IHNp
bXBsZU5hbWU7CisJCQkJCWlmICh0aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJcmVjb3Jk
Tm9kZXMoc2ltcGxlTmFtZSwgdHlwZVJlZmVyZW5jZSk7CisJCQkJCX0JCQkJCQorCQkJCX0gZWxz
ZSB7CisJCQkJCW5hbWUgPSBzZXRRdWFsaWZpZWROYW1lTmFtZUFuZFNvdXJjZVJhbmdlcyh0b2tl
bnMsIHBvc2l0aW9ucywgZmlyc3RUeXBlSW5kZXgsIHR5cGVSZWZlcmVuY2UpOworCQkJCX0KKwkJ
CQlTaW1wbGVUeXBlIHNpbXBsZVR5cGUgPSBuZXcgU2ltcGxlVHlwZSh0aGlzLmFzdCk7CisJCQkJ
c2ltcGxlVHlwZS5zZXROYW1lKG5hbWUpOworCQkJCWludCBzdGFydCA9IChpbnQpKHBvc2l0aW9u
c1swXSA+Pj4gMzIpOworCQkJCWludCBlbmQgPSAoaW50KXBvc2l0aW9uc1tmaXJzdFR5cGVJbmRl
eF07CisJCQkJc2ltcGxlVHlwZS5zZXRTb3VyY2VSYW5nZShzdGFydCwgZW5kIC0gc3RhcnQgKyAx
KTsKKwkJCQlpZiAodHlwZUFubm90YXRpb25zICE9IG51bGwgJiYgKGFubm90YXRpb25zID0gdHlw
ZUFubm90YXRpb25zW2ZpcnN0VHlwZUluZGV4XSkgIT0gbnVsbCkgeworCQkJCQlhbm5vdGF0ZVR5
cGUoc2ltcGxlVHlwZSwgYW5ub3RhdGlvbnMpOworCQkJCX0KKwkJCQlpZiAodGhpcy5yZXNvbHZl
QmluZGluZ3MpIHsKKwkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlVHlwZSwgdHlwZVJlZmVyZW5jZSk7
CisJCQkJfQorCQkJCVR5cGUgY3VycmVudFR5cGUgPSBzaW1wbGVUeXBlOworCQkJCQorCQkJCWZv
ciAoaW50IGkgPSBmaXJzdFR5cGVJbmRleCArIDE7IGkgPCBsZW50aDsgKytpKSB7CisJCQkJCVNp
bXBsZU5hbWUgc2ltcGxlTmFtZSA9IG5ldyBTaW1wbGVOYW1lKHRoaXMuYXN0KTsKKwkJCQkJc2lt
cGxlTmFtZS5pbnRlcm5hbFNldElkZW50aWZpZXIobmV3IFN0cmluZyh0b2tlbnNbaV0pKTsKKwkJ
CQkJc2ltcGxlTmFtZS5pbmRleCA9IGkgKyAxOworCQkJCQlzdGFydCA9IChpbnQpIChwb3NpdGlv
bnNbaV0gPj4+IDMyKTsKKwkJCQkJZW5kID0gKGludCkgcG9zaXRpb25zW2ldOworCQkJCQlzaW1w
bGVOYW1lLnNldFNvdXJjZVJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCArMSk7CisJCQkJCXJlY29y
ZFBlbmRpbmdOYW1lU2NvcGVSZXNvbHV0aW9uKHNpbXBsZU5hbWUpOworCQkJCQlRdWFsaWZpZWRU
eXBlIHF1YWxpZmllZFR5cGUgPSBuZXcgUXVhbGlmaWVkVHlwZSh0aGlzLmFzdCk7CisJCQkJCXF1
YWxpZmllZFR5cGUuc2V0UXVhbGlmaWVyKGN1cnJlbnRUeXBlKTsKKwkJCQkJcXVhbGlmaWVkVHlw
ZS5zZXROYW1lKHNpbXBsZU5hbWUpOworCQkJCQlpZiAodHlwZUFubm90YXRpb25zICE9IG51bGwg
JiYgKGFubm90YXRpb25zID0gdHlwZUFubm90YXRpb25zW2ldKSAhPSBudWxsKSB7CisJCQkJCQlh
bm5vdGF0ZVR5cGUocXVhbGlmaWVkVHlwZSwgYW5ub3RhdGlvbnMpOworCQkJCQl9CisJCQkJCWlm
ICh0aGlzLnJlc29sdmVCaW5kaW5ncykgeworCQkJCQkJcmVjb3JkTm9kZXMoc2ltcGxlTmFtZSwg
dHlwZVJlZmVyZW5jZSk7CisJCQkJCQlyZWNvcmROb2RlcyhxdWFsaWZpZWRUeXBlLCB0eXBlUmVm
ZXJlbmNlKTsKKwkJCQkJfQorCQkJCQlzdGFydCA9IGN1cnJlbnRUeXBlLmdldFN0YXJ0UG9zaXRp
b24oKTsKKwkJCQkJZW5kID0gc2ltcGxlTmFtZS5nZXRTdGFydFBvc2l0aW9uKCkgKyBzaW1wbGVO
YW1lLmdldExlbmd0aCgpIC0gMTsKKwkJCQkJcXVhbGlmaWVkVHlwZS5zZXRTb3VyY2VSYW5nZShz
dGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKKwkJCQkJY3VycmVudFR5cGUgPSBxdWFsaWZpZWRUeXBl
OworCQkJCQlxdWFsaWZpZWRUeXBlLmluZGV4ICA9IDE7CisJCQkJfQorCQkJCXR5cGUgPSBjdXJy
ZW50VHlwZTsKIAkJCX0gZWxzZSB7CiAJCQkJVHlwZVJlZmVyZW5jZVtdIHR5cGVSZWZlcmVuY2Vz
ID0gKChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlVuaW9uVHlwZVJlZmVy
ZW5jZSkgdHlwZVJlZmVyZW5jZSkudHlwZVJlZmVyZW5jZXM7CiAJCQkJc3dpdGNoKHRoaXMuYXN0
LmFwaUxldmVsKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2NvcmUvZG9tL0RlZmF1bHRCaW5kaW5nUmVzb2x2ZXIuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdS
ZXNvbHZlci5qYXZhCmluZGV4IDE4YTIzMWEuLjc3ZDQ4ZDQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdS
ZXNvbHZlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvY29yZS9kb20vRGVmYXVsdEJpbmRpbmdSZXNvbHZlci5qYXZhCkBAIC0xLDEwICsxLDE0IEBA
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBw
cm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAg
KiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBh
dAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqCisgKiBU
aGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24g
ZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQg
aXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAq
IG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24g
b2YgdGhlIEpDUC4KKyAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlv
biAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICogICAgIFN0ZXBoYW4gSGVycm1h
bm4gLSBDb250cmlidXRpb24gZm9yIEJ1ZyAzNDI2NzEgLSBDbGFzc0Nhc3RFeGNlcHRpb246IG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuU291cmNlVHlwZUJpbmRpbmcg
Y2Fubm90IGJlIGNhc3QgdG8gb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1
cC5BcnJheUJpbmRpbmcKQEAgLTI4NSwxMSArMjg5LDE0IEBACiAJCXRoaXMuYmluZGluZ1RhYmxl
cy5jb21waWxlckJpbmRpbmdzVG9BU1RCaW5kaW5ncy5wdXQocGFja2FnZUJpbmRpbmcsIGJpbmRp
bmcpOwogCQlyZXR1cm4gYmluZGluZzsKIAl9Ci0JcHJpdmF0ZSBpbnQgZ2V0VHlwZUFyZ3VtZW50
cyhQYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSB0eXBlUmVmZXJlbmNlKSB7CisJ
cHJpdmF0ZSBpbnQgZ2V0VHlwZUNvdW50KFBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlIHR5cGVSZWZlcmVuY2UpIHsKIAkJVHlwZVJlZmVyZW5jZVtdW10gdHlwZUFyZ3VtZW50cyA9
IHR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50czsKIAkJaW50IHZhbHVlID0gMDsKLQkJZm9yIChp
bnQgaSA9IDAsIG1heCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHsKLQkJ
CWlmICgodHlwZUFyZ3VtZW50c1tpXSAhPSBudWxsKSB8fCAodmFsdWUgIT0gMCkpIHsKKwkJb3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uW11bXSB0eXBlQW5u
b3RhdGlvbnMgPSB0eXBlUmVmZXJlbmNlLmFubm90YXRpb25zOworCQlpbnQgbGVuZ3RoID0gdHlw
ZVJlZmVyZW5jZS50b2tlbnMubGVuZ3RoOwkKKwkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7
ICsraSkgeworCQkJaWYgKHZhbHVlICE9IDAgfHwgKHR5cGVBcmd1bWVudHMgIT0gbnVsbCAmJiB0
eXBlQXJndW1lbnRzW2ldICE9IG51bGwpIHx8CisJCQkJKHR5cGVBbm5vdGF0aW9ucyAhPSBudWxs
ICYmIHR5cGVBbm5vdGF0aW9uc1tpXSAhPSBudWxsICkpIHsKIAkJCQl2YWx1ZSsrOwogCQkJfQog
CQl9CkBAIC0xNTUxLDcgKzE1NTgsNyBAQAogCQkJCX0gZWxzZSB7CiAJCQkJCWluZGV4ID0gMTsK
IAkJCQl9Ci0JCQkJZmluYWwgaW50IG51bWJlck9mVHlwZUFyZ3VtZW50c05vdE51bGwgPSBnZXRU
eXBlQXJndW1lbnRzKHR5cGVSZWZlcmVuY2UpOworCQkJCWZpbmFsIGludCBudW1iZXJPZlR5cGVB
cmd1bWVudHNOb3ROdWxsID0gZ2V0VHlwZUNvdW50KHR5cGVSZWZlcmVuY2UpOwogCQkJCWlmIChp
bmRleCAhPSBudW1iZXJPZlR5cGVBcmd1bWVudHNOb3ROdWxsKSB7CiAJCQkJCWludCAgaSA9IG51
bWJlck9mVHlwZUFyZ3VtZW50c05vdE51bGw7CiAJCQkJCXdoaWxlIChpICE9IGluZGV4KSB7CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVy
LmphdmEKaW5kZXggMGM0NGVlZi4uZDI5OTAzYiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0
ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQpAQCAtMTI5OSw4ICsxMjk5
LDE3IEBACiAJICogQHNlZSBBU1RWaXNpdG9yI3Zpc2l0KFNpbXBsZVR5cGUpCiAJICovCiAJcHVi
bGljIGJvb2xlYW4gdmlzaXQoU2ltcGxlVHlwZSBub2RlKSB7Ci0JCXZpc2l0VHlwZUFubm90YXRp
b25zKG5vZGUpOwotCQlub2RlLmdldE5hbWUoKS5hY2NlcHQodGhpcyk7CisJCU5hbWUgbmFtZSA9
IG5vZGUuZ2V0TmFtZSgpOworCQlpZiAobmFtZS5pc1F1YWxpZmllZE5hbWUoKSkgeworCQkJUXVh
bGlmaWVkTmFtZSBxdWFsaWZpZWROYW1lID0gKFF1YWxpZmllZE5hbWUpIG5hbWU7CisJCQlxdWFs
aWZpZWROYW1lLmdldFF1YWxpZmllcigpLmFjY2VwdCh0aGlzKTsKKwkJCXRoaXMuYnVmZmVyLmFw
cGVuZCgiLiIpOy8vJE5PTi1OTFMtMSQKKwkJCXZpc2l0VHlwZUFubm90YXRpb25zKG5vZGUpOwor
CQkJcXVhbGlmaWVkTmFtZS5nZXROYW1lKCkuYWNjZXB0KHRoaXMpOworCQl9IGVsc2UgeworCQkJ
dmlzaXRUeXBlQW5ub3RhdGlvbnMobm9kZSk7CisJCQlub2RlLmdldE5hbWUoKS5hY2NlcHQodGhp
cyk7CQkJCisJCX0KIAkJcmV0dXJuIGZhbHNlOwogCX0KIA==
</data>

          </attachment>
      

    </bug>

</bugzilla>