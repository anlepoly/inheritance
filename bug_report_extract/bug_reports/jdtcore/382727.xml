<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>382727</bug_id>
          
          <creation_ts>2012-06-15 08:00:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Lambda expression parameters and locals cannot shadow variables from context</short_desc>
          <delta_ts>2013-02-12 19:39:44 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>382701</blocked>
    
    <blocked>382721</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>anchakrk</cc>
    
    <cc>jesper</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2124847</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-06-15 08:00:54 -0400</bug_when>
    <thetext>BETA_JAVA8

The following program should trigger three errors about x, y and
args being redeclared. At the moment, (a) none of these usages are
complained against. (b) We also get a CCE from Parser.consumeEnterVariable.

// -------- 8&lt; --------------


interface I {
  void foo(int x, int y);
}
public class X {
  public static void main(String[] args) {
    int x, y;
    I i = (x, y) -&gt; { // Error: x,y being redeclared
      int args = 10; //  Error args is being redeclared
    };
  }
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2124849</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-06-15 08:03:58 -0400</bug_when>
    <thetext>I&apos;ll hook up the resolution code as a part of this fix and
then the fix for bug 382721 can proceed from there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2125399</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-06-18 07:15:35 -0400</bug_when>
    <thetext>(In reply to comment #0)

&gt; complained against. (b) We also get a CCE from Parser.consumeEnterVariable.

I have raised https://bugs.eclipse.org/bugs/show_bug.cgi?id=382841 to track
(b) since it is unrelated to (a)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2203586</commentid>
    <comment_count>3</comment_count>
      <attachid>225696</attachid>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-01-16 07:30:56 -0500</bug_when>
    <thetext>Created attachment 225696
Test refinements for bug 382727 (and 38701)

More tests (they will not pass until bug 38701 is fixed, though)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2208242</commentid>
    <comment_count>4</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-01-27 06:22:12 -0500</bug_when>
    <thetext>Patches in Gerrit (may be easier to view patch and easier to check out from using Git)

https://git.eclipse.org/r/#/c/9911/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2212540</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-05 13:07:41 -0500</bug_when>
    <thetext>(In reply to comment #3)
&gt; Created attachment 225696 [details]
&gt; Test refinements for bug 382727 (and 38701)
&gt; 
&gt; More tests (they will not pass until bug 38701 is fixed, though)

Released these tests via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=370fc9797484c96c0e1fdf0a7794604c16e52ccb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2212701</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-05 19:55:17 -0500</bug_when>
    <thetext>Just a quick note that the spec committee has been asked to look into
this requirement and relax it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215172</commentid>
    <comment_count>7</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-12 03:03:15 -0500</bug_when>
    <thetext>I&apos;ll work on this next.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215840</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-12 18:26:47 -0500</bug_when>
    <thetext>Fix and tests released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=4b84620f8d71e6de7e42a2050aa5360e2143f846.

I&apos;ll add a few more tests before closing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215846</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-12 19:39:44 -0500</bug_when>
    <thetext>Added several more tests that include testing of nested lambda and classes
inside lambdas(!).</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225696</attachid>
            <date>2013-01-16 07:30:00 -0500</date>
            <delta_ts>2013-02-05 13:08:14 -0500</delta_ts>
            <desc>Test refinements for bug 382727 (and 38701)</desc>
            <filename>tests-for-382701-and-382727.txt</filename>
            <type>text/plain</type>
            <size>4836</size>
            <attacher name="Jesper Moller">jesper</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuY29tcGlsZXINCmRpZmYgLS1naXQgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVMYW1iZGFFeHByZXNzaW9uc1Rlc3QuamF2YSBz
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZUxhbWJkYUV4cHJlc3Npb25zVGVzdC5qYXZhDQppbmRleCA0NjE0NGE1Li40OWMzNzVhIDEwMDY0
NA0KLS0tIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9u
L05lZ2F0aXZlTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmENCisrKyBzcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2ZUxhbWJkYUV4cHJlc3Np
b25zVGVzdC5qYXZhDQpAQCAtMjE5LDE0ICsyMTksMTQgQEANCiAJCQkJCSJ9XG4iICsNCiAJCQkJ
CSJwdWJsaWMgY2xhc3MgWCB7XG4iICsNCiAJCQkJCSIgIHB1YmxpYyB2b2lkIHRlc3QxKGludCB4
KSB7XG4iICsNCi0JCQkJCSIgICAgQWN0aW9uTGlzdGVuZXIgYWwgPSAocHVibGljIHh5eikgLT4g
U3lzdGVtLm91dC5wcmludGxuKGUpOyBcbiIgKw0KKwkJCQkJIiAgICBBY3Rpb25MaXN0ZW5lciBh
bCA9IChwdWJsaWMgeHl6KSAtPiBTeXN0ZW0ub3V0LnByaW50bG4oeHl6KTsgXG4iICsNCiAJCQkJ
CSIgICAgSSBmID0gKGFic3RyYWN0IGZpbmFsIHMsIEBOdWxsYWJsZSB0KSAtPiBTeXN0ZW0ub3V0
LnByaW50bG4ocyArIHQpOyBcbiIgKw0KIAkJCQkJIiAgfVxuIiArDQogCQkJCQkifVxuIiwNCiAJ
CQkJfSwNCiAJCQkJIi0tLS0tLS0tLS1cbiIgKyANCiAJCQkJIjEuIEVSUk9SIGluIFguamF2YSAo
YXQgbGluZSA3KVxuIiArIA0KLQkJCQkiCUFjdGlvbkxpc3RlbmVyIGFsID0gKHB1YmxpYyB4eXop
IC0+IFN5c3RlbS5vdXQucHJpbnRsbihlKTsgXG4iICsgDQorCQkJCSIJQWN0aW9uTGlzdGVuZXIg
YWwgPSAocHVibGljIHh5eikgLT4gU3lzdGVtLm91dC5wcmludGxuKHh5eik7IFxuIiArIA0KIAkJ
CQkiCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5cbiIgKyANCiAJCQkJIlN5bnRheCBl
cnJvciwgbW9kaWZpZXJzIGFuZCBhbm5vdGF0aW9ucyBhcmUgbm90IGFsbG93ZWQgZm9yIHRoZSBs
YW1iZGEgcGFyYW1ldGVyIHh5eiBhcyBpdHMgdHlwZSBpcyBlbGlkZWRcbiIgKyANCiAJCQkJIi0t
LS0tLS0tLS1cbiIgKyANCkBAIC0yNDEsOCArMjQxLDkgQEANCiAJCQkJIlN5bnRheCBlcnJvciwg
bW9kaWZpZXJzIGFuZCBhbm5vdGF0aW9ucyBhcmUgbm90IGFsbG93ZWQgZm9yIHRoZSBsYW1iZGEg
cGFyYW1ldGVyIHQgYXMgaXRzIHR5cGUgaXMgZWxpZGVkXG4iICsgDQogCQkJCSItLS0tLS0tLS0t
XG4iKTsNCiB9DQotLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dp
P2lkPTM4MTEyMSwgIFtdIHNob3VsZCBiZSBhY2NlcHRlZCBpbiByZWZlcmVuY2UgZXhwcmVzc2lv
bnMuDQotcHVibGljIHZvaWQgdGVzdDAxMCgpIHsNCisNCisvL2h0dHBzOi8vYnVncy5lY2xpcHNl
Lm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zODExMjEsICBbXSBzaG91bGQgYmUgYWNjZXB0ZWQg
aW4gcmVmZXJlbmNlIGV4cHJlc3Npb25zLg0KK3B1YmxpYyB2b2lkIGlnbm9yZWRUZXN0MDEwKCkg
eyAvLyBhd2FpdHMgaW1wbGVtZW50YXRpb24gb2YgcmVzb2x1dGlvbiBvZiB0YXJnZXQgdHlwZXMg
YmVmb3JlIHJldHVybiBjYW4gYmUgY2hlY2tlZA0KIAl0aGlzLnJ1bk5lZ2F0aXZlVGVzdCgNCiAJ
CQluZXcgU3RyaW5nW10gew0KIAkJCQkJIlguamF2YSIsDQpAQCAtMjY0LDYgKzI2NSw5MCBAQA0K
IAkJCQkiWm9yayBjYW5ub3QgYmUgcmVzb2x2ZWQgdG8gYSB0eXBlXG4iICsgDQogCQkJCSItLS0t
LS0tLS0tXG4iKTsNCiB9DQorDQorLy9odHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93
X2J1Zy5jZ2k/aWQ9MzgxMTIxLCAgW10gc2hvdWxkIGJlIGFjY2VwdGVkIGluIHJlZmVyZW5jZSBl
eHByZXNzaW9ucy4NCitwdWJsaWMgdm9pZCB0ZXN0MDEwKCkgew0KKwl0aGlzLnJ1bk5lZ2F0aXZl
VGVzdCgNCisJCQluZXcgU3RyaW5nW10gew0KKwkJCQkJIlguamF2YSIsDQorCQkJCQkiaW50ZXJm
YWNlIEkge1xuIiArDQorCQkJCQkiCU9iamVjdCBmb28oaW50IFtdIGlhKTtcbiIgKw0KKwkJCQkJ
In1cbiIgKw0KKwkJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKw0KKwkJCQkJIglJIGkgPSAoaW50
IFtdIGlhKSAtPiBpYS5jbG9uZSgpO1xuIiArDQorCQkJCQkiCUkgaTIgPSBpbnRbXTo6Y2xvbmU7
XG4iICsNCisJCQkJCSIJWm9yayB6O1xuIiArDQorCQkJCQkifVxuIiwNCisJCQkJfSwNCisJCQkJ
Ii0tLS0tLS0tLS1cbiIgKyANCisJCQkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA3KVxu
IiArIA0KKwkJCQkiCVpvcmsgejtcbiIgKyANCisJCQkJIgleXl5eXG4iICsgDQorCQkJCSJab3Jr
IGNhbm5vdCBiZSByZXNvbHZlZCB0byBhIHR5cGVcbiIgKyANCisJCQkJIi0tLS0tLS0tLS1cbiIp
Ow0KK30NCisNCisvL2h0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9p
ZD0zODI3MjcsICBMYW1iZGEgZXhwcmVzc2lvbiBwYXJhbWV0ZXJzIGFuZCBsb2NhbHMgY2Fubm90
IHNoYWRvdyB2YXJpYWJsZXMgZnJvbSBjb250ZXh0DQorcHVibGljIHZvaWQgdGVzdDAxMSgpIHsN
CisJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoDQorCQkJbmV3IFN0cmluZ1tdIHsNCisJCQkiWC5qYXZh
IiwNCisJCQkiaW50ZXJmYWNlIEkge1xyXG4iICsgDQorCQkJIiAgdm9pZCBmb28oaW50IHgsIGlu
dCB5KTtcclxuIiArIA0KKwkJCSJ9XHJcbiIgKyANCisJCQkicHVibGljIGNsYXNzIFgge1xyXG4i
ICsgDQorCQkJIiAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xyXG4i
ICsgDQorCQkJIiAgICBpbnQgeCwgeTtcclxuIiArIA0KKwkJCSIgICAgSSBpID0gKHgsIHkpIC0+
IHsgLy8gRXJyb3I6IHgseSBiZWluZyByZWRlY2xhcmVkXHJcbiIgKyANCisJCQkiICAgICAgaW50
IGFyZ3MgPSAxMDsgLy8gIEVycm9yIGFyZ3MgaXMgYmVpbmcgcmVkZWNsYXJlZFxyXG4iICsgDQor
CQkJIiAgICB9O1xyXG4iICsgDQorCQkJIiAgfVxyXG4iICsgDQorCQkJIn0ifSwgDQorCQkJIi0t
LS0tLS0tLS1cbiIgKw0KKwkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNylcclxuIiAr
IA0KKwkJCSIJSSBpID0gKHgsIHkpIC0+IHsgLy8gRXJyb3I6IHgseSBiZWluZyByZWRlY2xhcmVk
XHJcbiIgKyANCisJCQkiCSAgICAgICBeXHJcbiIgKyANCisJCQkiRHVwbGljYXRlIGxvY2FsIHZh
cmlhYmxlIHhcclxuIiArIA0KKwkJCSItLS0tLS0tLS0tXHJcbiIgKyANCisJCQkiMi4gRVJST1Ig
aW4gWC5qYXZhIChhdCBsaW5lIDcpXHJcbiIgKyANCisJCQkiCUkgaSA9ICh4LCB5KSAtPiB7IC8v
IEVycm9yOiB4LHkgYmVpbmcgcmVkZWNsYXJlZFxyXG4iICsgDQorCQkJIgkgICAgICAgICAgXlxy
XG4iICsgDQorCQkJIkR1cGxpY2F0ZSBsb2NhbCB2YXJpYWJsZSB5XHJcbiIgKyANCisJCQkiLS0t
LS0tLS0tLVxyXG4iICsgDQorCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA4KVxyXG4i
ICsgDQorCQkJIglpbnQgYXJncyA9IDEwOyAvLyAgRXJyb3IgYXJncyBpcyBiZWluZyByZWRlY2xh
cmVkXHJcbiIgKyANCisJCQkiCSAgICBeXl5eXHJcbiIgKyANCisJCQkiRHVwbGljYXRlIGxvY2Fs
IHZhcmlhYmxlIGFyZ3NcclxuIiArIA0KKwkJCSIiICsNCisJCQkiLS0tLS0tLS0tLVxuIik7DQor
CQkJCQ0KK30NCisNCisvL2h0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNn
aT9pZD0zODI3MDEsICBJbXBsZW1lbnQgc2VtYW50aWMgYW5hbHlzaXMgb2YgTGFtYmRhIGV4cHJl
c3Npb25zICYgUmVmZXJlbmNlIGV4cHJlc3Npb25zDQorcHVibGljIHZvaWQgdGVzdDAxMWEoKSB7
DQorCXRoaXMucnVuTmVnYXRpdmVUZXN0KA0KKwkJCW5ldyBTdHJpbmdbXSB7DQorCQkJIlguamF2
YSIsDQorCQkJImludGVyZmFjZSBJIHtcclxuIiArIA0KKwkJCSIgIGludCBmb28oaW50IHgsIGlu
dCB5KTtcclxuIiArIA0KKwkJCSJ9XHJcbiIgKyANCisJCQkicHVibGljIGNsYXNzIFgge1xyXG4i
ICsgDQorCQkJIiAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xyXG4i
ICsgDQorCQkJIiAgICBpbnQgeCA9IDI7XHJcbiIgKyANCisJCQkiICAgIEkgaSA9IChhLCBiKSAt
PiB7XHJcbiIgKyANCisJCQkiICAgICAgcmV0dXJuIDQyLjAgKyBhICsgYXJncy5sZW5ndGg7IC8v
IFR5cGUgbWlzbWF0Y2g6IGNhbm5vdCBjb252ZXJ0IGZyb20gZG91YmxlIHRvIGludFxyXG4iICsg
DQorCQkJIiAgICB9O1xyXG4iICsgDQorCQkJIiAgfVxyXG4iICsgDQorCQkJIn0ifSwNCisJCQki
LS0tLS0tLS0tLVxuIiArIA0KKwkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIg
KyANCisJCQkiCXJldHVybiA0Mi4wICsgYSArIGFyZ3MubGVuZ3RoOyAvLyBUeXBlIG1pc21hdGNo
OiBjYW5ub3QgY29udmVydCBmcm9tIGRvdWJsZSB0byBpbnRcbiIgKyANCisJCQkiCSAgICAgICBe
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgDQorCQkJIlR5cGUgbWlzbWF0Y2g6IGNhbm5vdCBj
b252ZXJ0IGZyb20gZG91YmxlIHRvIGludFxuIiArIA0KKwkJCSItLS0tLS0tLS0tXG4iKTsNCisJ
CQkJDQorfQ0KKw0KIHB1YmxpYyBzdGF0aWMgQ2xhc3MgdGVzdENsYXNzKCkgew0KIAlyZXR1cm4g
TmVnYXRpdmVMYW1iZGFFeHByZXNzaW9uc1Rlc3QuY2xhc3M7DQogfQ0KIA0KIA0K
</data>

          </attachment>
      

    </bug>

</bugzilla>