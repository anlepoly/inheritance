<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>343713</bug_id>
          
          <creation_ts>2011-04-24 15:41:00 -0400</creation_ts>
          <short_desc>[compiler] bogus line number in constructor of inner class in 1.5 compliance</short_desc>
          <delta_ts>2011-04-27 10:11:47 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.7 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>Olivier_Thomann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1918220</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-04-24 15:41:54 -0400</bug_when>
    <thetext>Compile the following class with -1.5 -g :

public class LineNumberBug {
	class Inner {
		public Inner() {
			System.out.println(&quot;Inner()&quot;);
		} // line 10
	}
	public static void main(String[] args) {
		new LineNumberBug().new Inner();
	}
}

Inspecting the generated line number table you&apos;ll see that the first few
instructions are mapped to line 10, which is at least confusing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918221</commentid>
    <comment_count>1</comment_count>
      <attachid>193971</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-04-24 15:57:11 -0400</bug_when>
    <thetext>Created attachment 193971
test &amp; proposed fix

Here&apos;s the same test as a regression test case and a proposed simple fix.

The line in question was last modified for bug 15250 to ensure that the
free return maps to the closing brace rather than the ctor header.

For target &lt; 1.4 this seemed to work OK, but since 1.4 a constructor of
an inner class may have instructions before the super-ctor call, which 
assign to the this$0 synthetic field. PC positions for these instructions
(generated from generateSyntheticFieldInitializationsIfNecessary(..)) 
are never recorded, but this line
  codeStream.recordPositionsFrom(0, this.bodyEnd)
will actually be applied to those leading instructions.

At first look it seems safe to just avoid using a startPC of 0, but simply
remembering the position before the free return is generated.

Unfortunately I couldn&apos;t find any tests for bug 15250 to see if the change
breaks anything. Also, the &quot;0&quot; argument has been there since day one,
so I can&apos;t see why it is there. Any idea?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918222</commentid>
    <comment_count>2</comment_count>
      <attachid>193972</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-04-24 16:07:34 -0400</bug_when>
    <thetext>Created attachment 193972
Alternative fix

I guess this fix is even better and has minimal impact:

Instead of changing the final recordPositionsFrom(..) I simply added another
call to this method right where it was missing: immediately after
  generateSyntheticFieldInitializationsIfNecessary(..)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918348</commentid>
    <comment_count>3</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-25 09:36:19 -0400</bug_when>
    <thetext>Looks good. Targeting M7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918657</commentid>
    <comment_count>4</comment_count>
      <attachid>194026</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-04-25 18:48:35 -0400</bug_when>
    <thetext>Created attachment 194026
previous patch with copyright updated

The same patch as before (second strategy) with copyright updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918658</commentid>
    <comment_count>5</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-04-25 18:52:07 -0400</bug_when>
    <thetext>Released for 3.7M7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1919024</commentid>
    <comment_count>6</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-26 10:14:30 -0400</bug_when>
    <thetext>Will be verified once a build with v_B51 is available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1919696</commentid>
    <comment_count>7</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-27 10:11:47 -0400</bug_when>
    <thetext>Verified.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>193971</attachid>
            <date>2011-04-24 15:57:00 -0400</date>
            <delta_ts>2011-04-24 16:07:34 -0400</delta_ts>
            <desc>test &amp; proposed fix</desc>
            <filename>Bug_343713.patch</filename>
            <type>text/plain</type>
            <size>3815</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpJ
bmRleDogY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25z
dHJ1Y3RvckRlY2xhcmF0aW9uLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNs
aXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvYXN0L0NvbnN0cnVjdG9yRGVjbGFyYXRpb24uamF2YSx2CnJldHJpZXZpbmcg
cmV2aXNpb24gMS4xMTQKZGlmZiAtdSAtcjEuMTE0IENvbnN0cnVjdG9yRGVjbGFyYXRpb24uamF2
YQotLS0gY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25z
dHJ1Y3RvckRlY2xhcmF0aW9uLmphdmEJNSBNYXIgMjAxMSAxNzoxODo0MyAtMDAwMAkxLjExNAor
KysgY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25zdHJ1
Y3RvckRlY2xhcmF0aW9uLmphdmEJMjQgQXByIDIwMTEgMTk6NDI6NDUgLTAwMDAKQEAgLTM2NSwx
MiArMzY1LDEzIEBACiAJCWlmICh0aGlzLmlnbm9yZUZ1cnRoZXJJbnZlc3RpZ2F0aW9uKSB7CiAJ
CQl0aHJvdyBuZXcgQWJvcnRNZXRob2QodGhpcy5zY29wZS5yZWZlcmVuY2VDb21waWxhdGlvblVu
aXQoKS5jb21waWxhdGlvblJlc3VsdCwgbnVsbCk7CiAJCX0KKwkJaW50IHByZVJldHVyblBDID0g
Y29kZVN0cmVhbS5sYXN0RW50cnlQQzsKIAkJaWYgKCh0aGlzLmJpdHMgJiBBU1ROb2RlLk5lZWRG
cmVlUmV0dXJuKSAhPSAwKSB7CiAJCQljb2RlU3RyZWFtLnJldHVybl8oKTsKIAkJfQogCQkvLyBs
b2NhbCB2YXJpYWJsZSBhdHRyaWJ1dGVzCiAJCWNvZGVTdHJlYW0uZXhpdFVzZXJTY29wZSh0aGlz
LnNjb3BlKTsKLQkJY29kZVN0cmVhbS5yZWNvcmRQb3NpdGlvbnNGcm9tKDAsIHRoaXMuYm9keUVu
ZCk7CisJCWNvZGVTdHJlYW0ucmVjb3JkUG9zaXRpb25zRnJvbShwcmVSZXR1cm5QQywgdGhpcy5i
b2R5RW5kKTsKIAkJdHJ5IHsKIAkJCWNsYXNzRmlsZS5jb21wbGV0ZUNvZGVBdHRyaWJ1dGUoY29k
ZUF0dHJpYnV0ZU9mZnNldCk7CiAJCX0gY2F0Y2goTmVnYXRpdmVBcnJheVNpemVFeGNlcHRpb24g
ZSkgewojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlcgpJbmRleDogc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vSW5uZXJFbXVsYXRp
b25UZXN0XzFfNS5qYXZhCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L2VjbGlwc2Uvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3Jl
L3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vSW5uZXJFbXVsYXRpb25UZXN0XzFfNS5qYXZhLHYK
cmV0cmlldmluZyByZXZpc2lvbiAxLjEKZGlmZiAtdSAtcjEuMSBJbm5lckVtdWxhdGlvblRlc3Rf
MV81LmphdmEKLS0tIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdy
ZXNzaW9uL0lubmVyRW11bGF0aW9uVGVzdF8xXzUuamF2YQkxMiBNYXkgMjAwOSAyMDo0OTo1MyAt
MDAwMAkxLjEKKysrIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdy
ZXNzaW9uL0lubmVyRW11bGF0aW9uVGVzdF8xXzUuamF2YQkyNCBBcHIgMjAxMSAxOTo0Mjo0NiAt
MDAwMApAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmln
aHQgKGMpIDIwMDkgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDksIDIwMTEgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJl
c2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBh
cmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBM
aWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQg
aXMgYXZhaWxhYmxlIGF0CkBAIC0yODYsNiArMjg2LDM5IEBACiAJCSIgICAgIGlubmVyIG5hbWU6
ICMyNCBELCBhY2Nlc3NmbGFnczogOCBzdGF0aWNdXG4iOwogCWNoZWNrRGlzYXNzZW1ibGVkQ2xh
c3NGaWxlKE9VVFBVVF9ESVIgKyBGaWxlLnNlcGFyYXRvciArICJwIiArIEZpbGUuc2VwYXJhdG9y
ICsgIlguY2xhc3MiLCAiWCIsIGV4cGVjdGVkT3V0cHV0KTsKIH0KK3B1YmxpYyB2b2lkIHRlc3Qx
NCgpIHRocm93cyBFeGNlcHRpb24geworCXJ1bkNvbmZvcm1UZXN0KG5ldyBTdHJpbmdbXSB7CisJ
CSJMaW5lTnVtYmVyQnVnLmphdmEiLAorCQkicHVibGljIGNsYXNzIExpbmVOdW1iZXJCdWcge1xu
IiArIAorCQkiICAgIGNsYXNzIElubmVyIHtcbiIgKyAKKwkJIgkJcHVibGljIElubmVyKCkge1xu
IiArIAorCQkiCQkJU3lzdGVtLm91dC5wcmludGxuKFwiSW5uZXIoKVwiKTtcbiIgKyAKKwkJIgkJ
fVxuIiArIAorCQkiICAgIH1cbiIgKyAKKwkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJp
bmdbXSBhcmdzKSB7XG4iICsgCisJCSIJCW5ldyBMaW5lTnVtYmVyQnVnKCkubmV3IElubmVyKCk7
XG4iICsgCisJCSIJfVxuIiArIAorCQkifVxuIgorCX0pOworCVN0cmluZyBleHBlY3RlZE91dHB1
dCA9CisJCSIgIC8vIE1ldGhvZCBkZXNjcmlwdG9yICM4IChMTGluZU51bWJlckJ1ZzspVlxuIiAr
IAorCQkiICAvLyBTdGFjazogMiwgTG9jYWxzOiAyXG4iICsgCisJCSIgIHB1YmxpYyBMaW5lTnVt
YmVyQnVnJElubmVyKExpbmVOdW1iZXJCdWcgYXJnMCk7XG4iICsgCisJCSIgICAgIDAgIGFsb2Fk
XzAgW3RoaXNdXG4iICsgCisJCSIgICAgIDEgIGFsb2FkXzEgW2FyZzBdXG4iICsgCisJCSIgICAg
IDIgIHB1dGZpZWxkIExpbmVOdW1iZXJCdWckSW5uZXIudGhpcyQwIDogTGluZU51bWJlckJ1ZyBb
MTBdXG4iICsgCisJCSIgICAgIDUgIGFsb2FkXzAgW3RoaXNdXG4iICsgCisJCSIgICAgIDYgIGlu
dm9rZXNwZWNpYWwgamF2YS5sYW5nLk9iamVjdCgpIFsxMl1cbiIgKyAKKwkJIiAgICAgOSAgZ2V0
c3RhdGljIGphdmEubGFuZy5TeXN0ZW0ub3V0IDogamF2YS5pby5QcmludFN0cmVhbSBbMTVdXG4i
ICsgCisJCSIgICAgMTIgIGxkYyA8U3RyaW5nIFwiSW5uZXIoKVwiPiBbMjFdXG4iICsgCisJCSIg
ICAgMTQgIGludm9rZXZpcnR1YWwgamF2YS5pby5QcmludFN0cmVhbS5wcmludGxuKGphdmEubGFu
Zy5TdHJpbmcpIDogdm9pZCBbMjNdXG4iICsgCisJCSIgICAgMTcgIHJldHVyblxuIiArIAorCQki
ICAgICAgTGluZSBudW1iZXJzOlxuIiArIAorCQkiICAgICAgICBbcGM6IDUsIGxpbmU6IDNdXG4i
ICsgCisJCSIgICAgICAgIFtwYzogOSwgbGluZTogNF1cbiIgKworCQkiICAgICAgICBbcGM6IDE3
LCBsaW5lOiA1XVxuIjsKKwljaGVja0Rpc2Fzc2VtYmxlZENsYXNzRmlsZShPVVRQVVRfRElSICsg
RmlsZS5zZXBhcmF0b3IgKyAiTGluZU51bWJlckJ1ZyRJbm5lci5jbGFzcyIsICJMaW5lTnVtYmVy
QnVnJElubmVyIiwgZXhwZWN0ZWRPdXRwdXQpOwkKK30KIHB1YmxpYyBzdGF0aWMgQ2xhc3MgdGVz
dENsYXNzKCkgewogCXJldHVybiBJbm5lckVtdWxhdGlvblRlc3RfMV81LmNsYXNzOwogfQo=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>193972</attachid>
            <date>2011-04-24 16:07:00 -0400</date>
            <delta_ts>2011-04-25 18:48:35 -0400</delta_ts>
            <desc>Alternative fix</desc>
            <filename>Bug_343713_v2.patch</filename>
            <type>text/plain</type>
            <size>3538</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpJ
bmRleDogY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25z
dHJ1Y3RvckRlY2xhcmF0aW9uLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNs
aXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvYXN0L0NvbnN0cnVjdG9yRGVjbGFyYXRpb24uamF2YSx2CnJldHJpZXZpbmcg
cmV2aXNpb24gMS4xMTQKZGlmZiAtdSAtcjEuMTE0IENvbnN0cnVjdG9yRGVjbGFyYXRpb24uamF2
YQotLS0gY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25z
dHJ1Y3RvckRlY2xhcmF0aW9uLmphdmEJNSBNYXIgMjAxMSAxNzoxODo0MyAtMDAwMAkxLjExNAor
KysgY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25zdHJ1
Y3RvckRlY2xhcmF0aW9uLmphdmEJMjQgQXByIDIwMTEgMjA6MDI6MDcgLTAwMDAKQEAgLTMzNSw2
ICszMzUsNyBAQAogCiAJCWlmIChuZWVkRmllbGRJbml0aWFsaXphdGlvbnMgJiYgcHJlSW5pdFN5
bnRoZXRpY0ZpZWxkcyl7CiAJCQlnZW5lcmF0ZVN5bnRoZXRpY0ZpZWxkSW5pdGlhbGl6YXRpb25z
SWZOZWNlc3NhcnkodGhpcy5zY29wZSwgY29kZVN0cmVhbSwgZGVjbGFyaW5nQ2xhc3MpOworCQkJ
Y29kZVN0cmVhbS5yZWNvcmRQb3NpdGlvbnNGcm9tKDAsIHRoaXMuYm9keVN0YXJ0KTsKIAkJfQog
CQkvLyBnZW5lcmF0ZSBjb25zdHJ1Y3RvciBjYWxsCiAJCWlmICh0aGlzLmNvbnN0cnVjdG9yQ2Fs
bCAhPSBudWxsKSB7CiNQIG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyCkluZGV4
OiBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9Jbm5l
ckVtdWxhdGlvblRlc3RfMV81LmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNs
aXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9Jbm5lckVtdWxhdGlvblRlc3RfMV81
LmphdmEsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMQpkaWZmIC11IC1yMS4xIElubmVyRW11bGF0
aW9uVGVzdF8xXzUuamF2YQotLS0gc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBp
bGVyL3JlZ3Jlc3Npb24vSW5uZXJFbXVsYXRpb25UZXN0XzFfNS5qYXZhCTEyIE1heSAyMDA5IDIw
OjQ5OjUzIC0wMDAwCTEuMQorKysgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBp
bGVyL3JlZ3Jlc3Npb24vSW5uZXJFbXVsYXRpb25UZXN0XzFfNS5qYXZhCTI0IEFwciAyMDExIDIw
OjAyOjA4IC0wMDAwCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAq
IENvcHlyaWdodCAoYykgMjAwOSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHly
aWdodCAoYykgMjAwOSwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCBy
aWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlh
bHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2Ug
UHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRp
b24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTI4Niw2ICsyODYsMzkgQEAKIAkJIiAgICAgaW5u
ZXIgbmFtZTogIzI0IEQsIGFjY2Vzc2ZsYWdzOiA4IHN0YXRpY11cbiI7CiAJY2hlY2tEaXNhc3Nl
bWJsZWRDbGFzc0ZpbGUoT1VUUFVUX0RJUiArIEZpbGUuc2VwYXJhdG9yICsgInAiICsgRmlsZS5z
ZXBhcmF0b3IgKyAiWC5jbGFzcyIsICJYIiwgZXhwZWN0ZWRPdXRwdXQpOwogfQorcHVibGljIHZv
aWQgdGVzdDE0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJcnVuQ29uZm9ybVRlc3QobmV3IFN0cmlu
Z1tdIHsKKwkJIkxpbmVOdW1iZXJCdWcuamF2YSIsCisJCSJwdWJsaWMgY2xhc3MgTGluZU51bWJl
ckJ1ZyB7XG4iICsgCisJCSIgICAgY2xhc3MgSW5uZXIge1xuIiArIAorCQkiCQlwdWJsaWMgSW5u
ZXIoKSB7XG4iICsgCisJCSIJCQlTeXN0ZW0ub3V0LnByaW50bG4oXCJJbm5lcigpXCIpO1xuIiAr
IAorCQkiCQl9XG4iICsgCisJCSIgICAgfVxuIiArIAorCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBt
YWluKFN0cmluZ1tdIGFyZ3MpIHtcbiIgKyAKKwkJIgkJbmV3IExpbmVOdW1iZXJCdWcoKS5uZXcg
SW5uZXIoKTtcbiIgKyAKKwkJIgl9XG4iICsgCisJCSJ9XG4iCisJfSk7CisJU3RyaW5nIGV4cGVj
dGVkT3V0cHV0ID0KKwkJIiAgLy8gTWV0aG9kIGRlc2NyaXB0b3IgIzggKExMaW5lTnVtYmVyQnVn
OylWXG4iICsgCisJCSIgIC8vIFN0YWNrOiAyLCBMb2NhbHM6IDJcbiIgKyAKKwkJIiAgcHVibGlj
IExpbmVOdW1iZXJCdWckSW5uZXIoTGluZU51bWJlckJ1ZyBhcmcwKTtcbiIgKyAKKwkJIiAgICAg
MCAgYWxvYWRfMCBbdGhpc11cbiIgKyAKKwkJIiAgICAgMSAgYWxvYWRfMSBbYXJnMF1cbiIgKyAK
KwkJIiAgICAgMiAgcHV0ZmllbGQgTGluZU51bWJlckJ1ZyRJbm5lci50aGlzJDAgOiBMaW5lTnVt
YmVyQnVnIFsxMF1cbiIgKyAKKwkJIiAgICAgNSAgYWxvYWRfMCBbdGhpc11cbiIgKyAKKwkJIiAg
ICAgNiAgaW52b2tlc3BlY2lhbCBqYXZhLmxhbmcuT2JqZWN0KCkgWzEyXVxuIiArIAorCQkiICAg
ICA5ICBnZXRzdGF0aWMgamF2YS5sYW5nLlN5c3RlbS5vdXQgOiBqYXZhLmlvLlByaW50U3RyZWFt
IFsxNV1cbiIgKyAKKwkJIiAgICAxMiAgbGRjIDxTdHJpbmcgXCJJbm5lcigpXCI+IFsyMV1cbiIg
KyAKKwkJIiAgICAxNCAgaW52b2tldmlydHVhbCBqYXZhLmlvLlByaW50U3RyZWFtLnByaW50bG4o
amF2YS5sYW5nLlN0cmluZykgOiB2b2lkIFsyM11cbiIgKyAKKwkJIiAgICAxNyAgcmV0dXJuXG4i
ICsgCisJCSIgICAgICBMaW5lIG51bWJlcnM6XG4iICsgCisJCSIgICAgICAgIFtwYzogMCwgbGlu
ZTogM11cbiIgKyAKKwkJIiAgICAgICAgW3BjOiA5LCBsaW5lOiA0XVxuIiArCisJCSIgICAgICAg
IFtwYzogMTcsIGxpbmU6IDVdXG4iOworCWNoZWNrRGlzYXNzZW1ibGVkQ2xhc3NGaWxlKE9VVFBV
VF9ESVIgKyBGaWxlLnNlcGFyYXRvciArICJMaW5lTnVtYmVyQnVnJElubmVyLmNsYXNzIiwgIkxp
bmVOdW1iZXJCdWckSW5uZXIiLCBleHBlY3RlZE91dHB1dCk7CQorfQogcHVibGljIHN0YXRpYyBD
bGFzcyB0ZXN0Q2xhc3MoKSB7CiAJcmV0dXJuIElubmVyRW11bGF0aW9uVGVzdF8xXzUuY2xhc3M7
CiB9Cg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>194026</attachid>
            <date>2011-04-25 18:48:00 -0400</date>
            <delta_ts>2011-04-25 18:48:35 -0400</delta_ts>
            <desc>previous patch with copyright updated</desc>
            <filename>Bug_343713_v3.patch</filename>
            <type>text/plain</type>
            <size>4409</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpJ
bmRleDogY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25z
dHJ1Y3RvckRlY2xhcmF0aW9uLmphdmEKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNs
aXBzZS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvYXN0L0NvbnN0cnVjdG9yRGVjbGFyYXRpb24uamF2YSx2CnJldHJpZXZpbmcg
cmV2aXNpb24gMS4xMTQKZGlmZiAtdSAtcjEuMTE0IENvbnN0cnVjdG9yRGVjbGFyYXRpb24uamF2
YQotLS0gY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25z
dHJ1Y3RvckRlY2xhcmF0aW9uLmphdmEJNSBNYXIgMjAxMSAxNzoxODo0MyAtMDAwMAkxLjExNAor
KysgY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Db25zdHJ1
Y3RvckRlY2xhcmF0aW9uLmphdmEJMjUgQXByIDIwMTEgMjI6NDQ6MzMgLTAwMDAKQEAgLTcsNiAr
Nyw3IEBACiAgKgogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGlu
aXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBD
b250cmlidXRpb24gZm9yIEJ1ZyAzNDM3MTMgLSBbY29tcGlsZXJdIGJvZ3VzIGxpbmUgbnVtYmVy
IGluIGNvbnN0cnVjdG9yIG9mIGlubmVyIGNsYXNzIGluIDEuNSBjb21wbGlhbmNlCiAgKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmFzdDsKIApAQCAtMzM1LDYgKzMzNiw3IEBACiAKIAkJaWYgKG5lZWRGaWVsZEluaXRpYWxp
emF0aW9ucyAmJiBwcmVJbml0U3ludGhldGljRmllbGRzKXsKIAkJCWdlbmVyYXRlU3ludGhldGlj
RmllbGRJbml0aWFsaXphdGlvbnNJZk5lY2Vzc2FyeSh0aGlzLnNjb3BlLCBjb2RlU3RyZWFtLCBk
ZWNsYXJpbmdDbGFzcyk7CisJCQljb2RlU3RyZWFtLnJlY29yZFBvc2l0aW9uc0Zyb20oMCwgdGhp
cy5ib2R5U3RhcnQpOwogCQl9CiAJCS8vIGdlbmVyYXRlIGNvbnN0cnVjdG9yIGNhbGwKIAkJaWYg
KHRoaXMuY29uc3RydWN0b3JDYWxsICE9IG51bGwpIHsKI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuY29tcGlsZXIKSW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21w
aWxlci9yZWdyZXNzaW9uL0lubmVyRW11bGF0aW9uVGVzdF8xXzUuamF2YQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJD
UyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBp
bGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0lu
bmVyRW11bGF0aW9uVGVzdF8xXzUuamF2YSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4xCmRpZmYg
LXUgLXIxLjEgSW5uZXJFbXVsYXRpb25UZXN0XzFfNS5qYXZhCi0tLSBzcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9Jbm5lckVtdWxhdGlvblRlc3RfMV81
LmphdmEJMTIgTWF5IDIwMDkgMjA6NDk6NTMgLTAwMDAJMS4xCisrKyBzcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9Jbm5lckVtdWxhdGlvblRlc3RfMV81
LmphdmEJMjUgQXByIDIwMTEgMjI6NDQ6MzUgLTAwMDAKQEAgLTEsNSArMSw1IEBACiAvKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDA5IElCTSBDb3Jwb3JhdGlvbiBh
bmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDA5LCAyMDExIElCTSBDb3Jwb3JhdGlvbiBh
bmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUg
YWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBh
bmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNyw2ICs3LDcg
QEAKICAqCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlh
bCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRy
aWJ1dGlvbiBmb3IgQnVnIDM0MzcxMyAtIFtjb21waWxlcl0gYm9ndXMgbGluZSBudW1iZXIgaW4g
Y29uc3RydWN0b3Igb2YgaW5uZXIgY2xhc3MgaW4gMS41IGNvbXBsaWFuY2UKICAqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxl
ci5yZWdyZXNzaW9uOwogCkBAIC0yODYsNiArMjg3LDQxIEBACiAJCSIgICAgIGlubmVyIG5hbWU6
ICMyNCBELCBhY2Nlc3NmbGFnczogOCBzdGF0aWNdXG4iOwogCWNoZWNrRGlzYXNzZW1ibGVkQ2xh
c3NGaWxlKE9VVFBVVF9ESVIgKyBGaWxlLnNlcGFyYXRvciArICJwIiArIEZpbGUuc2VwYXJhdG9y
ICsgIlguY2xhc3MiLCAiWCIsIGV4cGVjdGVkT3V0cHV0KTsKIH0KKy8vIGh0dHBzOi8vYnVncy5l
Y2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zNDM3MTMKKy8vIFtjb21waWxlcl0gYm9n
dXMgbGluZSBudW1iZXIgaW4gY29uc3RydWN0b3Igb2YgaW5uZXIgY2xhc3MgaW4gMS41IGNvbXBs
aWFuY2UKK3B1YmxpYyB2b2lkIHRlc3QxNCgpIHRocm93cyBFeGNlcHRpb24geworCXJ1bkNvbmZv
cm1UZXN0KG5ldyBTdHJpbmdbXSB7CisJCSJMaW5lTnVtYmVyQnVnLmphdmEiLAorCQkicHVibGlj
IGNsYXNzIExpbmVOdW1iZXJCdWcge1xuIiArIAorCQkiICAgIGNsYXNzIElubmVyIHtcbiIgKyAK
KwkJIgkJcHVibGljIElubmVyKCkge1xuIiArIAorCQkiCQkJU3lzdGVtLm91dC5wcmludGxuKFwi
SW5uZXIoKVwiKTtcbiIgKyAKKwkJIgkJfVxuIiArIAorCQkiICAgIH1cbiIgKyAKKwkJIglwdWJs
aWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsgCisJCSIJCW5ldyBMaW5l
TnVtYmVyQnVnKCkubmV3IElubmVyKCk7XG4iICsgCisJCSIJfVxuIiArIAorCQkifVxuIgorCX0p
OworCVN0cmluZyBleHBlY3RlZE91dHB1dCA9CisJCSIgIC8vIE1ldGhvZCBkZXNjcmlwdG9yICM4
IChMTGluZU51bWJlckJ1ZzspVlxuIiArIAorCQkiICAvLyBTdGFjazogMiwgTG9jYWxzOiAyXG4i
ICsgCisJCSIgIHB1YmxpYyBMaW5lTnVtYmVyQnVnJElubmVyKExpbmVOdW1iZXJCdWcgYXJnMCk7
XG4iICsgCisJCSIgICAgIDAgIGFsb2FkXzAgW3RoaXNdXG4iICsgCisJCSIgICAgIDEgIGFsb2Fk
XzEgW2FyZzBdXG4iICsgCisJCSIgICAgIDIgIHB1dGZpZWxkIExpbmVOdW1iZXJCdWckSW5uZXIu
dGhpcyQwIDogTGluZU51bWJlckJ1ZyBbMTBdXG4iICsgCisJCSIgICAgIDUgIGFsb2FkXzAgW3Ro
aXNdXG4iICsgCisJCSIgICAgIDYgIGludm9rZXNwZWNpYWwgamF2YS5sYW5nLk9iamVjdCgpIFsx
Ml1cbiIgKyAKKwkJIiAgICAgOSAgZ2V0c3RhdGljIGphdmEubGFuZy5TeXN0ZW0ub3V0IDogamF2
YS5pby5QcmludFN0cmVhbSBbMTVdXG4iICsgCisJCSIgICAgMTIgIGxkYyA8U3RyaW5nIFwiSW5u
ZXIoKVwiPiBbMjFdXG4iICsgCisJCSIgICAgMTQgIGludm9rZXZpcnR1YWwgamF2YS5pby5Qcmlu
dFN0cmVhbS5wcmludGxuKGphdmEubGFuZy5TdHJpbmcpIDogdm9pZCBbMjNdXG4iICsgCisJCSIg
ICAgMTcgIHJldHVyblxuIiArIAorCQkiICAgICAgTGluZSBudW1iZXJzOlxuIiArIAorCQkiICAg
ICAgICBbcGM6IDAsIGxpbmU6IDNdXG4iICsgCisJCSIgICAgICAgIFtwYzogOSwgbGluZTogNF1c
biIgKworCQkiICAgICAgICBbcGM6IDE3LCBsaW5lOiA1XVxuIjsKKwljaGVja0Rpc2Fzc2VtYmxl
ZENsYXNzRmlsZShPVVRQVVRfRElSICsgRmlsZS5zZXBhcmF0b3IgKyAiTGluZU51bWJlckJ1ZyRJ
bm5lci5jbGFzcyIsICJMaW5lTnVtYmVyQnVnJElubmVyIiwgZXhwZWN0ZWRPdXRwdXQpOwkKK30K
IHB1YmxpYyBzdGF0aWMgQ2xhc3MgdGVzdENsYXNzKCkgewogCXJldHVybiBJbm5lckVtdWxhdGlv
blRlc3RfMV81LmNsYXNzOwogfQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>