<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>406982</bug_id>
          
          <creation_ts>2013-05-01 08:59:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Generation of MethodParameters Attribute in classfile</short_desc>
          <delta_ts>2013-09-05 18:56:12 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>406966</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Jesper Moller">jesper</reporter>
          <assigned_to name="Jesper Moller">jesper</assigned_to>
          <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="59090"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2250997</commentid>
    <comment_count>0</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-05-01 08:59:48 -0400</bug_when>
    <thetext>Generate the MethodParameters attribute into the attributes table of a method_info structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2296576</commentid>
    <comment_count>1</comment_count>
      <attachid>234562</attachid>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-08-20 03:53:48 -0400</bug_when>
    <thetext>Created attachment 234562
Patch for review for this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2296577</commentid>
    <comment_count>2</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-08-20 03:54:37 -0400</bug_when>
    <thetext>Please consider this patch for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2298857</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-08-26 04:30:21 -0400</bug_when>
    <thetext>I&apos;ll review this one shortly. Thanks for your patience.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2298889</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-08-26 07:18:40 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; Please consider this patch for review

Patch looks good. Released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=446bb541ca213992576e03757eea7f75301ac1be

Before we resolve this, a couple of things need addressing.

(1) Per my reading the enum valueOf method must have a mandated parameter
by name &apos;name&apos; - this is presently missing.

(2) Let us also add a couple more tests with deeper levels of inner class
nesting and capture of outer locals from different contexts.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2298906</commentid>
    <comment_count>5</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-08-26 07:54:58 -0400</bug_when>
    <thetext>(In reply to comment #4)

&gt; (1) Per my reading the enum valueOf method must have a mandated parameter
&gt; by name &apos;name&apos; - this is presently missing.

Good catch!

&gt; (2) Let us also add a couple more tests with deeper levels of inner class
&gt; nesting and capture of outer locals from different contexts.

Yes, but there&apos;s a a snag: See bug 415019 - there&apos;s some inconsistency with javac regarding local classes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2299304</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-08-26 23:17:23 -0400</bug_when>
    <thetext>Via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=5a2c180a837c1c434b2700b180ba498a761566e7, I released some
more tests.

Please note that some of the tests are disabled because of known bugs
in ECJ and will have to enabled once fixes are available. A couple of
tests are disabled on account of spec wording confusion. See https://bugs.eclipse.org/bugs/show_bug.cgi?id=415019#c5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2299385</commentid>
    <comment_count>7</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-08-27 04:23:40 -0400</bug_when>
    <thetext>Removing review flag since patch has already been reviewed by Srikanth</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2299830</commentid>
    <comment_count>8</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-08-28 02:33:35 -0400</bug_when>
    <thetext>Released fixes for the issue with enum&apos;s valueOf and private nested classes&apos;s constructors.

Here it is:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=3001a2e9b40b82bc07cde07151a79e328e95bc31

Issue with anonymous classes under local classes still not resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2303458</commentid>
    <comment_count>9</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-09-05 18:56:12 -0400</bug_when>
    <thetext>Released the fix for the remaining cases, via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=dadef2fc0573a510ff313dd625ee1ba4e2b2e6e3</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>234562</attachid>
            <date>2013-08-20 03:53:00 -0400</date>
            <delta_ts>2013-08-20 03:53:48 -0400</delta_ts>
            <desc>Patch for review for this issue</desc>
            <filename>bug406982.txt</filename>
            <type>text/plain</type>
            <size>28436</size>
            <attacher name="Jesper Moller">jesper</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL01ldGhvZFBhcmFtZXRl
cnNBdHRyaWJ1dGVUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxl
ci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9NZXRo
b2RQYXJhbWV0ZXJzQXR0cmlidXRlVGVzdC5qYXZhCmluZGV4IDg1YTZlZmMuLjAwYjM2YTEgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL01ldGhvZFBhcmFtZXRlcnNB
dHRyaWJ1dGVUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTWV0
aG9kUGFyYW1ldGVyc0F0dHJpYnV0ZVRlc3QuamF2YQpAQCAtMTUsNiArMTUsOCBAQAogcGFja2Fn
ZSBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci5yZWdyZXNzaW9uOwogCiBpbXBv
cnQgamF2YS5pby5GaWxlOworaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CitpbXBvcnQgamF2
YS51dGlsLk1hcDsKIAogaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OwogCkBAIC0yMiw3ICsy
NCw5IEBAIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5Ub29sRmFjdG9yeTsKIGltcG9ydCBv
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy51dGlsLlV0aWw7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmNvcmUudXRpbC5DbGFzc0ZpbGVCeXRlc0Rpc2Fzc2VtYmxlcjsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuY2xhc3NmbXQuQ2xhc3NGaWxlUmVhZGVyOworaW1w
b3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jbGFzc2ZtdC5DbGFzc0Zvcm1h
dEV4Y2VwdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuZW52
LklCaW5hcnlNZXRob2Q7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmltcGwuQ29tcGlsZXJPcHRpb25zOwogCiBwdWJsaWMgY2xhc3MgTWV0aG9kUGFyYW1ldGVyc0F0
dHJpYnV0ZVRlc3QgZXh0ZW5kcyBBYnN0cmFjdFJlZ3Jlc3Npb25UZXN0IHsKIAlwdWJsaWMgTWV0
aG9kUGFyYW1ldGVyc0F0dHJpYnV0ZVRlc3QoU3RyaW5nIG5hbWUpIHsKQEAgLTM2LDcgKzQwLDcg
QEAgcHVibGljIGNsYXNzIE1ldGhvZFBhcmFtZXRlcnNBdHRyaWJ1dGVUZXN0IGV4dGVuZHMgQWJz
dHJhY3RSZWdyZXNzaW9uVGVzdCB7CiAJLy8gVXNlIHRoaXMgc3RhdGljIGluaXRpYWxpemVyIHRv
IHNwZWNpZnkgc3Vic2V0IGZvciB0ZXN0cwogCS8vIEFsbCBzcGVjaWZpZWQgdGVzdHMgd2hpY2gg
ZG9lcyBub3QgYmVsb25nIHRvIHRoZSBjbGFzcyBhcmUgc2tpcHBlZC4uLgogCXN0YXRpYyB7Ci0v
LwkJVEVTVFNfUFJFRklYID0gInRlc3RCdWc5NTUyMSI7CisvLwkJVEVTVFNfUFJFRklYID0gInRl
c3QwMDgiOwogLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsgInRlc3RCdWczNTk0OTUi
IH07CiAvLwkJVEVTVFNfTlVNQkVSUyA9IG5ldyBpbnRbXSB7IDUzIH07CiAvLwkJVEVTVFNfUkFO
R0UgPSBuZXcgaW50W10geyAyMyAtMSx9OwpAQCAtMTU5LDEzICsxNjMsNyBAQCBwdWJsaWMgY2xh
c3MgTWV0aG9kUGFyYW1ldGVyc0F0dHJpYnV0ZVRlc3QgZXh0ZW5kcyBBYnN0cmFjdFJlZ3Jlc3Np
b25UZXN0IHsKIAkJCQkJIn0iOwogCiAKLQkJCWludCBpbmRleCA9IGFjdHVhbE91dHB1dC5pbmRl
eE9mKGV4cGVjdGVkT3V0cHV0KTsKLQkJCWlmIChpbmRleCA9PSAtMSB8fCBleHBlY3RlZE91dHB1
dC5sZW5ndGgoKSA9PSAwKSB7Ci0JCQkJU3lzdGVtLm91dC5wcmludGxuKFV0aWwuZGlzcGxheVN0
cmluZyhhY3R1YWxPdXRwdXQsIDIpKTsKLQkJCX0KLQkJCWlmIChpbmRleCA9PSAtMSkgewotCQkJ
CWFzc2VydEVxdWFscygiV3JvbmcgY29udGVudHMiLCBleHBlY3RlZE91dHB1dCwgYWN0dWFsT3V0
cHV0KTsKLQkJCX0KKwkJCWFzc2VydFN1YnN0cmluZyhhY3R1YWxPdXRwdXQsIGV4cGVjdGVkT3V0
cHV0KTsKIAl9CiAJcHVibGljIHZvaWQgdGVzdDAwMigpIHRocm93cyBFeGNlcHRpb24gewogCkBA
IC0yMzEsMTMgKzIyOSw3IEBAIHB1YmxpYyBjbGFzcyBNZXRob2RQYXJhbWV0ZXJzQXR0cmlidXRl
VGVzdCBleHRlbmRzIEFic3RyYWN0UmVncmVzc2lvblRlc3QgewogCQkJIiAgRW5jbG9zaW5nIE1l
dGhvZDogIzI3ICAjMjggUGFyYW1ldGVyTmFtZXMubWFrZUlubmVyV2l0aENhcHR1cmUoTGphdmEv
bGFuZy9TdHJpbmc7TGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL3V0aWwvY29uY3VycmVudC9DYWxs
YWJsZTtcbiIgKyAKIAkJCSJ9IjsKIAotCQlpbnQgaW5kZXggPSBhY3R1YWxPdXRwdXQuaW5kZXhP
ZihleHBlY3RlZE91dHB1dCk7Ci0JCWlmIChpbmRleCA9PSAtMSB8fCBleHBlY3RlZE91dHB1dC5s
ZW5ndGgoKSA9PSAwKSB7Ci0JCQlTeXN0ZW0ub3V0LnByaW50bG4oVXRpbC5kaXNwbGF5U3RyaW5n
KGFjdHVhbE91dHB1dCwgMikpOwotCQl9Ci0JCWlmIChpbmRleCA9PSAtMSkgewotCQkJYXNzZXJ0
RXF1YWxzKCJXcm9uZyBjb250ZW50cyIsIGV4cGVjdGVkT3V0cHV0LCBhY3R1YWxPdXRwdXQpOwot
CQl9CisJCWFzc2VydFN1YnN0cmluZyhhY3R1YWxPdXRwdXQsIGV4cGVjdGVkT3V0cHV0KTsKIAl9
CiAKIAlwdWJsaWMgdm9pZCB0ZXN0MDAzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CkBAIC0zMTEsMTMg
KzMwMyw3IEBAIHB1YmxpYyBjbGFzcyBNZXRob2RQYXJhbWV0ZXJzQXR0cmlidXRlVGVzdCBleHRl
bmRzIEFic3RyYWN0UmVncmVzc2lvblRlc3QgewogCQkJIiAgRW5jbG9zaW5nIE1ldGhvZDogIzI2
ICAjMjcgUGFyYW1ldGVyTmFtZXMubG9jYWxNYXRoKExqYXZhL2xhbmcvU3RyaW5nO0xqYXZhL2xh
bmcvU3RyaW5nOylJXG4iICsgCiAJCQkifSI7CiAKLQkJaW50IGluZGV4ID0gYWN0dWFsT3V0cHV0
LmluZGV4T2YoZXhwZWN0ZWRPdXRwdXQpOwotCQlpZiAoaW5kZXggPT0gLTEgfHwgZXhwZWN0ZWRP
dXRwdXQubGVuZ3RoKCkgPT0gMCkgewotCQkJU3lzdGVtLm91dC5wcmludGxuKFV0aWwuZGlzcGxh
eVN0cmluZyhhY3R1YWxPdXRwdXQsIDIpKTsKLQkJfQotCQlpZiAoaW5kZXggPT0gLTEpIHsKLQkJ
CWFzc2VydEVxdWFscygiV3JvbmcgY29udGVudHMiLCBleHBlY3RlZE91dHB1dCwgYWN0dWFsT3V0
cHV0KTsKLQkJfQorCQlhc3NlcnRTdWJzdHJpbmcoYWN0dWFsT3V0cHV0LCBleHBlY3RlZE91dHB1
dCk7CiAJfQogCiAJcHVibGljIHZvaWQgdGVzdDAwNCgpIHRocm93cyBFeGNlcHRpb24gewpAQCAt
MzQ2LDUgKzMzMiwzNDYgQEAgcHVibGljIGNsYXNzIE1ldGhvZFBhcmFtZXRlcnNBdHRyaWJ1dGVU
ZXN0IGV4dGVuZHMgQWJzdHJhY3RSZWdyZXNzaW9uVGVzdCB7CiAJCWFzc2VydEVxdWFscygidGhp
cyQwIiwgbmV3IFN0cmluZyhtZXRob2RJbmZvc1swXS5nZXRBcmd1bWVudE5hbWVzKClbMF0pKTsK
IAkJYXNzZXJ0RXF1YWxzKCJ2YWwkY2FwdHVyZWRCIiwgbmV3IFN0cmluZyhtZXRob2RJbmZvc1sw
XS5nZXRBcmd1bWVudE5hbWVzKClbMV0pKTsKIAl9CisJcHVibGljIHZvaWQgdGVzdDAwNigpIHRo
cm93cyBFeGNlcHRpb24geworCQkvLyBUZXN0IHRoYXQgdGhlIGNvZGUgZ2VuZXJhdG9yIGNhbiBl
bWl0IHRoZSBuYW1lcywgc28gdGhlIENsYXNzRmlsZVJlYWRlciBtYXkgcmVhZCB0aGVtIGJhY2sK
KwkJCisJCXRoaXMucnVuUGFyYW1ldGVyTmFtZVRlc3QoCisJCQkiWC5qYXZhIiwKKwkJCSJwdWJs
aWMgY2xhc3MgWCB7XG4iICsKKwkJCSIgICAgWChpbnQgd2hvbGVOdW1iZXIpIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSIgICAgdm9pZCBmb28oZmluYWwgZmxvYXQgcGx1Z2dlZFRoZUhvbGVz
LCBib29sZWFuIHllc0l0RmxvYXRzKSB7XG4iICsKKwkJCSIgICAgfVxuIiArCisJCQkifSIpOwog
CisJCXRyeSB7CisJCQlDbGFzc0ZpbGVSZWFkZXIgY2xhc3NGaWxlUmVhZGVyID0gQ2xhc3NGaWxl
UmVhZGVyLnJlYWQoT1VUUFVUX0RJUiArIEZpbGUuc2VwYXJhdG9yICsgIlguY2xhc3MiKTsKKwkJ
CUlCaW5hcnlNZXRob2RbXSBtZXRob2RzID0gY2xhc3NGaWxlUmVhZGVyLmdldE1ldGhvZHMoKTsK
KwkJCWFzc2VydE5vdE51bGwoIk5vIG1ldGhvZHMiLCBtZXRob2RzKTsKKwkJCWFzc2VydEVxdWFs
cygiV3Jvbmcgc2l6ZSIsIDIsIG1ldGhvZHMubGVuZ3RoKTsKKwkJCWFzc2VydEVxdWFscygiV3Jv
bmcgbmFtZSIsICI8aW5pdD4iLCBuZXcgU3RyaW5nKG1ldGhvZHNbMF0uZ2V0U2VsZWN0b3IoKSkp
OworCQkJY2hhcltdW10gYXJndW1lbnROYW1lcyA9IG1ldGhvZHNbMF0uZ2V0QXJndW1lbnROYW1l
cygpOworCQkJYXNzZXJ0RXF1YWxzKCI8aW5pdD4gc2hvdWxkIGhhdmUgMSBwYXJhbWV0ZXIiLCAx
LCBhcmd1bWVudE5hbWVzLmxlbmd0aCk7CisJCQlhc3NlcnRFcXVhbHMoIndob2xlTnVtYmVyIiwg
bmV3IFN0cmluZyhhcmd1bWVudE5hbWVzWzBdKSkKKwkJCTsKKwkJCWFzc2VydEVxdWFscygiV3Jv
bmcgbmFtZSIsICJmb28iLCBuZXcgU3RyaW5nKG1ldGhvZHNbMV0uZ2V0U2VsZWN0b3IoKSkpOwor
CQkJYXNzZXJ0RXF1YWxzKCJwbHVnZ2VkVGhlSG9sZXMiLCBuZXcgU3RyaW5nKG1ldGhvZHNbMV0u
Z2V0QXJndW1lbnROYW1lcygpWzBdKSk7CisJCQlhc3NlcnRFcXVhbHMoInllc0l0RmxvYXRzIiwg
bmV3IFN0cmluZyhtZXRob2RzWzFdLmdldEFyZ3VtZW50TmFtZXMoKVsxXSkpOworCQl9IGNhdGNo
IChDbGFzc0Zvcm1hdEV4Y2VwdGlvbiBlKSB7CisJCQlhc3NlcnRUcnVlKGZhbHNlKTsKKwkJfSBj
YXRjaCAoSU9FeGNlcHRpb24gZSkgeworCQkJYXNzZXJ0VHJ1ZShmYWxzZSk7CisJCX0KKwl9CisK
KwlwdWJsaWMgdm9pZCB0ZXN0MDA3KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJCS8vIFRlc3QgdGhh
dCB0aGUgY29kZSBnZW5lcmF0b3IgY2FuIGVtaXQgdGhlIG5hbWVzLCBzbyB0aGUgZGlzYXNzZW1i
bGVyIG1heSByZWFkIHRoZW0gYmFjayAoc2FtZSBzb3VyY2UgYXMgd2FzIGNvbXBpbGVkIHdpdGgg
amF2YWMpCisJCQorCQl0aGlzLnJ1blBhcmFtZXRlck5hbWVUZXN0KAorCQkJIlBhcmFtZXRlck5h
bWVzLmphdmEiLAorCQkJdGhpcy5vcmlnaW5hbFNvdXJjZSk7CisKKwkJQ2xhc3NGaWxlQnl0ZXNE
aXNhc3NlbWJsZXIgZGlzYXNzZW1ibGVyID0gVG9vbEZhY3RvcnkuY3JlYXRlRGVmYXVsdENsYXNz
RmlsZUJ5dGVzRGlzYXNzZW1ibGVyKCk7CisJCVN0cmluZyBwYXRoID0gT1VUUFVUX0RJUiArIEZp
bGUuc2VwYXJhdG9yICsgIlBhcmFtZXRlck5hbWVzLmNsYXNzIjsKKwkJYnl0ZVtdIGNsYXNzRmls
ZUJ5dGVzID0gb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLnV0aWwuVXRpbC5nZXRG
aWxlQnl0ZUNvbnRlbnQobmV3IEZpbGUocGF0aCkpOworCQlTdHJpbmcgYWN0dWFsT3V0cHV0ID0K
KwkJCWRpc2Fzc2VtYmxlci5kaXNhc3NlbWJsZSgKKwkJCQljbGFzc0ZpbGVCeXRlcywKKwkJCQki
XG4iLAorCQkJCUNsYXNzRmlsZUJ5dGVzRGlzYXNzZW1ibGVyLkRFVEFJTEVEKTsKKwkKKwkJU3Ry
aW5nIGV4cGVjdGVkT3V0cHV0ID0KKwkJCQkiLy8gQ29tcGlsZWQgZnJvbSBQYXJhbWV0ZXJOYW1l
cy5qYXZhICh2ZXJzaW9uIDEuOCA6IDUyLjAsIHN1cGVyIGJpdClcbiIgKyAKKwkJCQkicHVibGlj
IGNsYXNzIFBhcmFtZXRlck5hbWVzIHtcbiIgKyAKKwkJCQkiICBcbiIgKyAKKwkJCQkiICAvLyBN
ZXRob2QgZGVzY3JpcHRvciAjNiAoKVZcbiIgKyAKKwkJCQkiICAvLyBTdGFjazogMSwgTG9jYWxz
OiAxXG4iICsgCisJCQkJIiAgcHVibGljIFBhcmFtZXRlck5hbWVzKCk7XG4iICsgCisJCQkJIiAg
ICAwICBhbG9hZF8wIFt0aGlzXVxuIiArIAorCQkJCSIgICAgMSAgaW52b2tlc3BlY2lhbCBqYXZh
LmxhbmcuT2JqZWN0KCkgWzhdXG4iICsgCisJCQkJIiAgICA0ICByZXR1cm5cbiIgKyAKKwkJCQki
ICAgICAgTGluZSBudW1iZXJzOlxuIiArIAorCQkJCSIgICAgICAgIFtwYzogMCwgbGluZTogM11c
biIgKyAKKwkJCQkiICBcbiIgKyAKKwkJCQkiICAvLyBNZXRob2QgZGVzY3JpcHRvciAjMTIgKElE
KVZcbiIgKyAKKwkJCQkiICAvLyBTdGFjazogMCwgTG9jYWxzOiA0XG4iICsgCisJCQkJIiAgcHVi
bGljIHZvaWQgc29tZU1ldGhvZChpbnQgc2ltcGxlLCBkb3VibGUgY29tcGxleCk7XG4iICsgCisJ
CQkJIiAgICAwICByZXR1cm5cbiIgKyAKKwkJCQkiICAgICAgTGluZSBudW1iZXJzOlxuIiArIAor
CQkJCSIgICAgICAgIFtwYzogMCwgbGluZTogNl1cbiIgKyAKKwkJCQkiICAgICAgTWV0aG9kIFBh
cmFtZXRlcnM6XG4iICsgCisJCQkJIiAgICAgICAgc2ltcGxlXG4iICsgCisJCQkJIiAgICAgICAg
ZmluYWwgY29tcGxleFxuIiArIAorCQkJCSIgIFxuIiArIAorCQkJCSIgIC8vIE1ldGhvZCBkZXNj
cmlwdG9yICMxNyAoTGphdmEvbGFuZy9TdHJpbmc7TGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL3V0
aWwvY29uY3VycmVudC9DYWxsYWJsZTtcbiIgKyAKKwkJCQkiICAvLyBTaWduYXR1cmU6IChMamF2
YS9sYW5nL1N0cmluZztMamF2YS9sYW5nL1N0cmluZzspTGphdmEvdXRpbC9jb25jdXJyZW50L0Nh
bGxhYmxlPExqYXZhL2xhbmcvU3RyaW5nOz47XG4iICsgCisJCQkJIiAgLy8gU3RhY2s6IDQsIExv
Y2FsczogM1xuIiArIAorCQkJCSIgIHB1YmxpYyBqYXZhLnV0aWwuY29uY3VycmVudC5DYWxsYWJs
ZSBtYWtlSW5uZXJXaXRoQ2FwdHVyZShqYXZhLmxhbmcuU3RyaW5nIGZpbmFsTWVzc2FnZSwgamF2
YS5sYW5nLlN0cmluZyBtdXRhYmxlTWVzc2FnZSk7XG4iICsgCisJCQkJIiAgICAgMCAgbmV3IFBh
cmFtZXRlck5hbWVzJDEgWzIwXVxuIiArIAorCQkJCSIgICAgIDMgIGR1cFxuIiArIAorCQkJCSIg
ICAgIDQgIGFsb2FkXzAgW3RoaXNdXG4iICsgCisJCQkJIiAgICAgNSAgYWxvYWRfMSBbZmluYWxN
ZXNzYWdlXVxuIiArIAorCQkJCSIgICAgIDYgIGludm9rZXNwZWNpYWwgUGFyYW1ldGVyTmFtZXMk
MShQYXJhbWV0ZXJOYW1lcywgamF2YS5sYW5nLlN0cmluZykgWzIyXVxuIiArIAorCQkJCSIgICAg
IDkgIGFyZXR1cm5cbiIgKyAKKwkJCQkiICAgICAgTGluZSBudW1iZXJzOlxuIiArIAorCQkJCSIg
ICAgICAgIFtwYzogMCwgbGluZTogOV1cbiIgKyAKKwkJCQkiICAgICAgTWV0aG9kIFBhcmFtZXRl
cnM6XG4iICsgCisJCQkJIiAgICAgICAgZmluYWwgZmluYWxNZXNzYWdlXG4iICsgCisJCQkJIiAg
ICAgICAgbXV0YWJsZU1lc3NhZ2VcbiIgKyAKKwkJCQkiICBcbiIgKyAKKwkJCQkiICAvLyBNZXRo
b2QgZGVzY3JpcHRvciAjMjggKExqYXZhL2xhbmcvU3RyaW5nO0xqYXZhL2xhbmcvU3RyaW5nOylJ
XG4iICsgCisJCQkJIiAgLy8gU3RhY2s6IDUsIExvY2FsczogNFxuIiArIAorCQkJCSIgIHB1Ymxp
YyBpbnQgbG9jYWxNYXRoKGphdmEubGFuZy5TdHJpbmcgZmluYWxNZXNzYWdlLCBqYXZhLmxhbmcu
U3RyaW5nIG11dGFibGVNZXNzYWdlKTtcbiIgKyAKKwkJCQkiICAgICAwICBiaXB1c2ggNDJcbiIg
KyAKKwkJCQkiICAgICAyICBpc3RvcmVfM1xuIiArIAorCQkJCSIgICAgIDMgIG5ldyBQYXJhbWV0
ZXJOYW1lcyQxTG9jYWwgWzI5XVxuIiArIAorCQkJCSIgICAgIDYgIGR1cFxuIiArIAorCQkJCSIg
ICAgIDcgIGFsb2FkXzAgW3RoaXNdXG4iICsgCisJCQkJIiAgICAgOCAgaWNvbnN0XzJcbiIgKyAK
KwkJCQkiICAgICA5ICBpbG9hZF8zXG4iICsgCisJCQkJIiAgICAxMCAgaW52b2tlc3BlY2lhbCBQ
YXJhbWV0ZXJOYW1lcyQxTG9jYWwoUGFyYW1ldGVyTmFtZXMsIGludCwgaW50KSBbMzFdXG4iICsg
CisJCQkJIiAgICAxMyAgaWNvbnN0XzNcbiIgKyAKKwkJCQkiICAgIDE0ICBpbnZva2V2aXJ0dWFs
IFBhcmFtZXRlck5hbWVzJDFMb2NhbC5jYWxjdWxhdGUoaW50KSA6IGludCBbMzRdXG4iICsgCisJ
CQkJIiAgICAxNyAgaXJldHVyblxuIiArIAorCQkJCSIgICAgICBMaW5lIG51bWJlcnM6XG4iICsg
CisJCQkJIiAgICAgICAgW3BjOiAwLCBsaW5lOiAxN11cbiIgKyAKKwkJCQkiICAgICAgICBbcGM6
IDMsIGxpbmU6IDI5XVxuIiArIAorCQkJCSIgICAgICBNZXRob2QgUGFyYW1ldGVyczpcbiIgKyAK
KwkJCQkiICAgICAgICBmaW5hbCBmaW5hbE1lc3NhZ2VcbiIgKyAKKwkJCQkiICAgICAgICBtdXRh
YmxlTWVzc2FnZVxuIiArIAorCQkJCSJcbiIgKyAKKwkJCQkiICBJbm5lciBjbGFzc2VzOlxuIiAr
IAorCQkJCSIgICAgW2lubmVyIGNsYXNzIGluZm86ICMyMCBQYXJhbWV0ZXJOYW1lcyQxLCBvdXRl
ciBjbGFzcyBpbmZvOiAjMFxuIiArIAorCQkJCSIgICAgIGlubmVyIG5hbWU6ICMwLCBhY2Nlc3Nm
bGFnczogMCBkZWZhdWx0XSxcbiIgKyAKKwkJCQkiICAgIFtpbm5lciBjbGFzcyBpbmZvOiAjMjkg
UGFyYW1ldGVyTmFtZXMkMUxvY2FsLCBvdXRlciBjbGFzcyBpbmZvOiAjMFxuIiArIAorCQkJCSIg
ICAgIGlubmVyIG5hbWU6ICM0MSBMb2NhbCwgYWNjZXNzZmxhZ3M6IDAgZGVmYXVsdF1cbiIgKyAK
KwkJCQkifSI7CisKKwkJYXNzZXJ0U3Vic3RyaW5nKGFjdHVhbE91dHB1dCwgZXhwZWN0ZWRPdXRw
dXQpOworCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJ
Ly8gVGVzdCB0aGF0IHRoZSBjb2RlIGdlbmVyYXRvciBjYW4gZW1pdCBzeW50aGV0aWMgYW5kIG1h
bmRhdGVkIG5hbWVzLCBqdXN0IHRvIG1hdGNoIGphdmFjIGFzIGNsb3NlbHkgYXMgcG9zc2libHkK
KwkJCisJCXRoaXMucnVuUGFyYW1ldGVyTmFtZVRlc3QoCisJCQkiUGFyYW1ldGVyTmFtZXMuamF2
YSIsCisJCQl0aGlzLm9yaWdpbmFsU291cmNlKTsKKworCQlDbGFzc0ZpbGVCeXRlc0Rpc2Fzc2Vt
YmxlciBkaXNhc3NlbWJsZXIgPSBUb29sRmFjdG9yeS5jcmVhdGVEZWZhdWx0Q2xhc3NGaWxlQnl0
ZXNEaXNhc3NlbWJsZXIoKTsKKwkJU3RyaW5nIHBhdGggPSBPVVRQVVRfRElSICsgRmlsZS5zZXBh
cmF0b3IgKyAiUGFyYW1ldGVyTmFtZXMkMS5jbGFzcyI7CisJCWJ5dGVbXSBjbGFzc0ZpbGVCeXRl
cyA9IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci51dGlsLlV0aWwuZ2V0RmlsZUJ5
dGVDb250ZW50KG5ldyBGaWxlKHBhdGgpKTsKKwkJU3RyaW5nIGFjdHVhbE91dHB1dCA9CisJCQlk
aXNhc3NlbWJsZXIuZGlzYXNzZW1ibGUoCisJCQkJY2xhc3NGaWxlQnl0ZXMsCisJCQkJIlxuIiwK
KwkJCQlDbGFzc0ZpbGVCeXRlc0Rpc2Fzc2VtYmxlci5ERVRBSUxFRCk7CisKKwkJU3RyaW5nIGV4
cGVjdGVkT3V0cHV0ID0KKwkJCSIvLyBDb21waWxlZCBmcm9tIFBhcmFtZXRlck5hbWVzLmphdmEg
KHZlcnNpb24gMS44IDogNTIuMCwgc3VwZXIgYml0KVxuIiArIAorCQkJIi8vIFNpZ25hdHVyZTog
TGphdmEvbGFuZy9PYmplY3Q7TGphdmEvdXRpbC9jb25jdXJyZW50L0NhbGxhYmxlPExqYXZhL2xh
bmcvU3RyaW5nOz47XG4iICsgCisJCQkiY2xhc3MgUGFyYW1ldGVyTmFtZXMkMSBpbXBsZW1lbnRz
IGphdmEudXRpbC5jb25jdXJyZW50LkNhbGxhYmxlIHtcbiIgKyAKKwkJCSIgIFxuIiArIAorCQkJ
IiAgLy8gRmllbGQgZGVzY3JpcHRvciAjOCBMUGFyYW1ldGVyTmFtZXM7XG4iICsgCisJCQkiICBm
aW5hbCBzeW50aGV0aWMgUGFyYW1ldGVyTmFtZXMgdGhpcyQwO1xuIiArIAorCQkJIiAgXG4iICsg
CisJCQkiICAvLyBGaWVsZCBkZXNjcmlwdG9yICMxMCBMamF2YS9sYW5nL1N0cmluZztcbiIgKyAK
KwkJCSIgIHByaXZhdGUgZmluYWwgc3ludGhldGljIGphdmEubGFuZy5TdHJpbmcgdmFsJGZpbmFs
TWVzc2FnZTtcbiIgKyAKKwkJCSIgIFxuIiArIAorCQkJIiAgLy8gTWV0aG9kIGRlc2NyaXB0b3Ig
IzEyIChMUGFyYW1ldGVyTmFtZXM7TGphdmEvbGFuZy9TdHJpbmc7KVZcbiIgKyAKKwkJCSIgIC8v
IFN0YWNrOiAyLCBMb2NhbHM6IDNcbiIgKyAKKwkJCSIgIFBhcmFtZXRlck5hbWVzJDEoUGFyYW1l
dGVyTmFtZXMgdGhpcyQwLCBqYXZhLmxhbmcuU3RyaW5nIHZhbCRmaW5hbE1lc3NhZ2UpO1xuIiAr
IAorCQkJIiAgICAgMCAgYWxvYWRfMCBbdGhpc11cbiIgKyAKKwkJCSIgICAgIDEgIGFsb2FkXzEg
W3RoaXMkMF1cbiIgKyAKKwkJCSIgICAgIDIgIHB1dGZpZWxkIFBhcmFtZXRlck5hbWVzJDEudGhp
cyQwIDogUGFyYW1ldGVyTmFtZXMgWzE0XVxuIiArIAorCQkJIiAgICAgNSAgYWxvYWRfMCBbdGhp
c11cbiIgKyAKKwkJCSIgICAgIDYgIGFsb2FkXzIgW3ZhbCRmaW5hbE1lc3NhZ2VdXG4iICsgCisJ
CQkiICAgICA3ICBwdXRmaWVsZCBQYXJhbWV0ZXJOYW1lcyQxLnZhbCRmaW5hbE1lc3NhZ2UgOiBq
YXZhLmxhbmcuU3RyaW5nIFsxNl1cbiIgKyAKKwkJCSIgICAgMTAgIGFsb2FkXzAgW3RoaXNdXG4i
ICsgCisJCQkiICAgIDExICBpbnZva2VzcGVjaWFsIGphdmEubGFuZy5PYmplY3QoKSBbMThdXG4i
ICsgCisJCQkiICAgIDE0ICByZXR1cm5cbiIgKyAKKwkJCSIgICAgICBMaW5lIG51bWJlcnM6XG4i
ICsgCisJCQkiICAgICAgICBbcGM6IDAsIGxpbmU6IDFdXG4iICsgCisJCQkiICAgICAgICBbcGM6
IDEwLCBsaW5lOiA5XVxuIiArIAorCQkJIiAgICAgIE1ldGhvZCBQYXJhbWV0ZXJzOlxuIiArIAor
CQkJIiAgICAgICAgZmluYWwgbWFuZGF0ZWQgdGhpcyQwXG4iICsgCisJCQkiICAgICAgICBmaW5h
bCBzeW50aGV0aWMgdmFsJGZpbmFsTWVzc2FnZVxuIiArIAorCQkJIiAgXG4iICsgCisJCQkiICAv
LyBNZXRob2QgZGVzY3JpcHRvciAjMjQgKClMamF2YS9sYW5nL1N0cmluZztcbiIgKyAKKwkJCSIg
IC8vIFN0YWNrOiAxLCBMb2NhbHM6IDFcbiIgKyAKKwkJCSIgIHB1YmxpYyBqYXZhLmxhbmcuU3Ry
aW5nIGNhbGwoKSB0aHJvd3MgamF2YS5sYW5nLkV4Y2VwdGlvbjtcbiIgKyAKKwkJCSIgICAgMCAg
YWxvYWRfMCBbdGhpc11cbiIgKyAKKwkJCSIgICAgMSAgZ2V0ZmllbGQgUGFyYW1ldGVyTmFtZXMk
MS52YWwkZmluYWxNZXNzYWdlIDogamF2YS5sYW5nLlN0cmluZyBbMTZdXG4iICsgCisJCQkiICAg
IDQgIGFyZXR1cm5cbiIgKyAKKwkJCSIgICAgICBMaW5lIG51bWJlcnM6XG4iICsgCisJCQkiICAg
ICAgICBbcGM6IDAsIGxpbmU6IDExXVxuIiArIAorCQkJIiAgXG4iICsgCisJCQkiICAvLyBNZXRo
b2QgZGVzY3JpcHRvciAjMjggKClMamF2YS9sYW5nL09iamVjdDtcbiIgKyAKKwkJCSIgIC8vIFN0
YWNrOiAxLCBMb2NhbHM6IDFcbiIgKyAKKwkJCSIgIHB1YmxpYyBicmlkZ2Ugc3ludGhldGljIGph
dmEubGFuZy5PYmplY3QgY2FsbCgpIHRocm93cyBqYXZhLmxhbmcuRXhjZXB0aW9uO1xuIiArIAor
CQkJIiAgICAwICBhbG9hZF8wIFt0aGlzXVxuIiArIAorCQkJIiAgICAxICBpbnZva2V2aXJ0dWFs
IFBhcmFtZXRlck5hbWVzJDEuY2FsbCgpIDogamF2YS5sYW5nLlN0cmluZyBbMjldXG4iICsgCisJ
CQkiICAgIDQgIGFyZXR1cm5cbiIgKyAKKwkJCSIgICAgICBMaW5lIG51bWJlcnM6XG4iICsgCisJ
CQkiICAgICAgICBbcGM6IDAsIGxpbmU6IDFdXG4iICsgCisJCQkiXG4iICsgCisJCQkiICBJbm5l
ciBjbGFzc2VzOlxuIiArIAorCQkJIiAgICBbaW5uZXIgY2xhc3MgaW5mbzogIzEgUGFyYW1ldGVy
TmFtZXMkMSwgb3V0ZXIgY2xhc3MgaW5mbzogIzBcbiIgKyAKKwkJCSIgICAgIGlubmVyIG5hbWU6
ICMwLCBhY2Nlc3NmbGFnczogMCBkZWZhdWx0XVxuIiArIAorCQkJIiAgRW5jbG9zaW5nIE1ldGhv
ZDogIzM2ICAjMzggUGFyYW1ldGVyTmFtZXMubWFrZUlubmVyV2l0aENhcHR1cmUoTGphdmEvbGFu
Zy9TdHJpbmc7TGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL3V0aWwvY29uY3VycmVudC9DYWxsYWJs
ZTtcbiIgKyAKKwkJCSJ9Igk7CisKKwkJYXNzZXJ0U3Vic3RyaW5nKGFjdHVhbE91dHB1dCwgZXhw
ZWN0ZWRPdXRwdXQpOworCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDkoKSB0aHJvd3MgRXhjZXB0
aW9uIHsKKwkJLy8gVGVzdCB0aGF0IHRoZSBjb2RlIGdlbmVyYXRvciBjYW4gZW1pdCBzeW50aGV0
aWMgYW5kIG1hbmRhdGVkIG5hbWVzLCBqdXN0IHRvIG1hdGNoIGphdmFjIGFzIGNsb3NlbHkgYXMg
cG9zc2libHkKKwkJCisJCXRoaXMucnVuUGFyYW1ldGVyTmFtZVRlc3QoCisJCQkiRmFuY3lFbnVt
LmphdmEiLAorCQkJIlxuIiArIAorCQkJInB1YmxpYyBlbnVtIEZhbmN5RW51bSB7XG4iICsgCisJ
CQkiCU9ORSgxKSwgVFdPKDIpO1xuIiArIAorCQkJIglcbiIgKyAKKwkJCSIJcHJpdmF0ZSBGYW5j
eUVudW0oZmluYWwgaW50IHYpIHsgdGhpcy52YXIgPSB2OyB9XG4iICsgCisJCQkiCWludCB2YXI7
XG4iICsgCisJCQkifVxuIiArIAorCQkJIiIpOworCisJCUNsYXNzRmlsZUJ5dGVzRGlzYXNzZW1i
bGVyIGRpc2Fzc2VtYmxlciA9IFRvb2xGYWN0b3J5LmNyZWF0ZURlZmF1bHRDbGFzc0ZpbGVCeXRl
c0Rpc2Fzc2VtYmxlcigpOworCQlTdHJpbmcgcGF0aCA9IE9VVFBVVF9ESVIgKyBGaWxlLnNlcGFy
YXRvciArICJGYW5jeUVudW0uY2xhc3MiOworCQlieXRlW10gY2xhc3NGaWxlQnl0ZXMgPSBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIudXRpbC5VdGlsLmdldEZpbGVCeXRlQ29udGVu
dChuZXcgRmlsZShwYXRoKSk7CisJCVN0cmluZyBhY3R1YWxPdXRwdXQgPQorCQkJZGlzYXNzZW1i
bGVyLmRpc2Fzc2VtYmxlKAorCQkJCWNsYXNzRmlsZUJ5dGVzLAorCQkJCSJcbiIsCisJCQkJQ2xh
c3NGaWxlQnl0ZXNEaXNhc3NlbWJsZXIuREVUQUlMRUQpOworCisJCVN0cmluZyBleHBlY3RlZE91
dHB1dCA9CisJCQkiLy8gQ29tcGlsZWQgZnJvbSBGYW5jeUVudW0uamF2YSAodmVyc2lvbiAxLjgg
OiA1Mi4wLCBzdXBlciBiaXQpXG4iICsgCisJCQkiLy8gU2lnbmF0dXJlOiBMamF2YS9sYW5nL0Vu
dW08TEZhbmN5RW51bTs+O1xuIiArIAorCQkJInB1YmxpYyBmaW5hbCBlbnVtIEZhbmN5RW51bSB7
XG4iICsgCisJCQkiICBcbiIgKyAKKwkJCSIgIC8vIEZpZWxkIGRlc2NyaXB0b3IgIzYgTEZhbmN5
RW51bTtcbiIgKyAKKwkJCSIgIHB1YmxpYyBzdGF0aWMgZmluYWwgZW51bSBGYW5jeUVudW0gT05F
O1xuIiArIAorCQkJIiAgXG4iICsgCisJCQkiICAvLyBGaWVsZCBkZXNjcmlwdG9yICM2IExGYW5j
eUVudW07XG4iICsgCisJCQkiICBwdWJsaWMgc3RhdGljIGZpbmFsIGVudW0gRmFuY3lFbnVtIFRX
TztcbiIgKyAKKwkJCSIgIFxuIiArIAorCQkJIiAgLy8gRmllbGQgZGVzY3JpcHRvciAjOSBJXG4i
ICsgCisJCQkiICBpbnQgdmFyO1xuIiArIAorCQkJIiAgXG4iICsgCisJCQkiICAvLyBGaWVsZCBk
ZXNjcmlwdG9yICMxMSBbTEZhbmN5RW51bTtcbiIgKyAKKwkJCSIgIHByaXZhdGUgc3RhdGljIGZp
bmFsIHN5bnRoZXRpYyBGYW5jeUVudW1bXSBFTlVNJFZBTFVFUztcbiIgKyAKKwkJCSIgIFxuIiAr
IAorCQkJIiAgLy8gTWV0aG9kIGRlc2NyaXB0b3IgIzEzICgpVlxuIiArIAorCQkJIiAgLy8gU3Rh
Y2s6IDUsIExvY2FsczogMFxuIiArIAorCQkJIiAgc3RhdGljIHt9O1xuIiArIAorCQkJIiAgICAg
MCAgbmV3IEZhbmN5RW51bSBbMV1cbiIgKyAKKwkJCSIgICAgIDMgIGR1cFxuIiArIAorCQkJIiAg
ICAgNCAgbGRjIDxTdHJpbmcgXCJPTkVcIj4gWzE1XVxuIiArIAorCQkJIiAgICAgNiAgaWNvbnN0
XzBcbiIgKyAKKwkJCSIgICAgIDcgIGljb25zdF8xXG4iICsgCisJCQkiICAgICA4ICBpbnZva2Vz
cGVjaWFsIEZhbmN5RW51bShqYXZhLmxhbmcuU3RyaW5nLCBpbnQsIGludCkgWzE2XVxuIiArIAor
CQkJIiAgICAxMSAgcHV0c3RhdGljIEZhbmN5RW51bS5PTkUgOiBGYW5jeUVudW0gWzIwXVxuIiAr
IAorCQkJIiAgICAxNCAgbmV3IEZhbmN5RW51bSBbMV1cbiIgKyAKKwkJCSIgICAgMTcgIGR1cFxu
IiArIAorCQkJIiAgICAxOCAgbGRjIDxTdHJpbmcgXCJUV09cIj4gWzIyXVxuIiArIAorCQkJIiAg
ICAyMCAgaWNvbnN0XzFcbiIgKyAKKwkJCSIgICAgMjEgIGljb25zdF8yXG4iICsgCisJCQkiICAg
IDIyICBpbnZva2VzcGVjaWFsIEZhbmN5RW51bShqYXZhLmxhbmcuU3RyaW5nLCBpbnQsIGludCkg
WzE2XVxuIiArIAorCQkJIiAgICAyNSAgcHV0c3RhdGljIEZhbmN5RW51bS5UV08gOiBGYW5jeUVu
dW0gWzIzXVxuIiArIAorCQkJIiAgICAyOCAgaWNvbnN0XzJcbiIgKyAKKwkJCSIgICAgMjkgIGFu
ZXdhcnJheSBGYW5jeUVudW0gWzFdXG4iICsgCisJCQkiICAgIDMyICBkdXBcbiIgKyAKKwkJCSIg
ICAgMzMgIGljb25zdF8wXG4iICsgCisJCQkiICAgIDM0ICBnZXRzdGF0aWMgRmFuY3lFbnVtLk9O
RSA6IEZhbmN5RW51bSBbMjBdXG4iICsgCisJCQkiICAgIDM3ICBhYXN0b3JlXG4iICsgCisJCQki
ICAgIDM4ICBkdXBcbiIgKyAKKwkJCSIgICAgMzkgIGljb25zdF8xXG4iICsgCisJCQkiICAgIDQw
ICBnZXRzdGF0aWMgRmFuY3lFbnVtLlRXTyA6IEZhbmN5RW51bSBbMjNdXG4iICsgCisJCQkiICAg
IDQzICBhYXN0b3JlXG4iICsgCisJCQkiICAgIDQ0ICBwdXRzdGF0aWMgRmFuY3lFbnVtLkVOVU0k
VkFMVUVTIDogRmFuY3lFbnVtW10gWzI1XVxuIiArIAorCQkJIiAgICA0NyAgcmV0dXJuXG4iICsg
CisJCQkiICAgICAgTGluZSBudW1iZXJzOlxuIiArIAorCQkJIiAgICAgICAgW3BjOiAwLCBsaW5l
OiAzXVxuIiArIAorCQkJIiAgICAgICAgW3BjOiAyOCwgbGluZTogMl1cbiIgKyAKKwkJCSIgIFxu
IiArIAorCQkJIiAgLy8gTWV0aG9kIGRlc2NyaXB0b3IgIzE5IChMamF2YS9sYW5nL1N0cmluZztJ
SSlWXG4iICsgCisJCQkiICAvLyBTdGFjazogMywgTG9jYWxzOiA0XG4iICsgCisJCQkiICBwcml2
YXRlIEZhbmN5RW51bShqYXZhLmxhbmcuU3RyaW5nICRlbnVtJG5hbWUsIGludCAkZW51bSRvcmRp
bmFsLCBpbnQgdik7XG4iICsgCisJCQkiICAgICAwICBhbG9hZF8wIFt0aGlzXVxuIiArIAorCQkJ
IiAgICAgMSAgYWxvYWRfMSBbJGVudW0kbmFtZV1cbiIgKyAKKwkJCSIgICAgIDIgIGlsb2FkXzIg
WyRlbnVtJG9yZGluYWxdXG4iICsgCisJCQkiICAgICAzICBpbnZva2VzcGVjaWFsIGphdmEubGFu
Zy5FbnVtKGphdmEubGFuZy5TdHJpbmcsIGludCkgWzI4XVxuIiArIAorCQkJIiAgICAgNiAgYWxv
YWRfMCBbdGhpc11cbiIgKyAKKwkJCSIgICAgIDcgIGlsb2FkXzMgW3ZdXG4iICsgCisJCQkiICAg
ICA4ICBwdXRmaWVsZCBGYW5jeUVudW0udmFyIDogaW50IFszMV1cbiIgKyAKKwkJCSIgICAgMTEg
IHJldHVyblxuIiArIAorCQkJIiAgICAgIExpbmUgbnVtYmVyczpcbiIgKyAKKwkJCSIgICAgICAg
IFtwYzogMCwgbGluZTogNV1cbiIgKyAKKwkJCSIgICAgICBNZXRob2QgUGFyYW1ldGVyczpcbiIg
KyAKKwkJCSIgICAgICAgIHN5bnRoZXRpYyAkZW51bSRuYW1lXG4iICsgCisJCQkiICAgICAgICBz
eW50aGV0aWMgJGVudW0kb3JkaW5hbFxuIiArIAorCQkJIiAgICAgICAgZmluYWwgdlxuIiArIAor
CQkJIiAgXG4iICsgCisJCQkiICAvLyBNZXRob2QgZGVzY3JpcHRvciAjMzggKClbTEZhbmN5RW51
bTtcbiIgKyAKKwkJCSIgIC8vIFN0YWNrOiA1LCBMb2NhbHM6IDNcbiIgKyAKKwkJCSIgIHB1Ymxp
YyBzdGF0aWMgRmFuY3lFbnVtW10gdmFsdWVzKCk7XG4iICsgCisJCQkiICAgICAwICBnZXRzdGF0
aWMgRmFuY3lFbnVtLkVOVU0kVkFMVUVTIDogRmFuY3lFbnVtW10gWzI1XVxuIiArIAorCQkJIiAg
ICAgMyAgZHVwXG4iICsgCisJCQkiICAgICA0ICBhc3RvcmVfMFxuIiArIAorCQkJIiAgICAgNSAg
aWNvbnN0XzBcbiIgKyAKKwkJCSIgICAgIDYgIGFsb2FkXzBcbiIgKyAKKwkJCSIgICAgIDcgIGFy
cmF5bGVuZ3RoXG4iICsgCisJCQkiICAgICA4ICBkdXBcbiIgKyAKKwkJCSIgICAgIDkgIGlzdG9y
ZV8xXG4iICsgCisJCQkiICAgIDEwICBhbmV3YXJyYXkgRmFuY3lFbnVtIFsxXVxuIiArIAorCQkJ
IiAgICAxMyAgZHVwXG4iICsgCisJCQkiICAgIDE0ICBhc3RvcmVfMlxuIiArIAorCQkJIiAgICAx
NSAgaWNvbnN0XzBcbiIgKyAKKwkJCSIgICAgMTYgIGlsb2FkXzFcbiIgKyAKKwkJCSIgICAgMTcg
IGludm9rZXN0YXRpYyBqYXZhLmxhbmcuU3lzdGVtLmFycmF5Y29weShqYXZhLmxhbmcuT2JqZWN0
LCBpbnQsIGphdmEubGFuZy5PYmplY3QsIGludCwgaW50KSA6IHZvaWQgWzM5XVxuIiArIAorCQkJ
IiAgICAyMCAgYWxvYWRfMlxuIiArIAorCQkJIiAgICAyMSAgYXJldHVyblxuIiArIAorCQkJIiAg
ICAgIExpbmUgbnVtYmVyczpcbiIgKyAKKwkJCSIgICAgICAgIFtwYzogMCwgbGluZTogMV1cbiIg
KyAKKwkJCSIgIFxuIiArIAorCQkJIiAgLy8gTWV0aG9kIGRlc2NyaXB0b3IgIzQ2IChMamF2YS9s
YW5nL1N0cmluZzspTEZhbmN5RW51bTtcbiIgKyAKKwkJCSIgIC8vIFN0YWNrOiAyLCBMb2NhbHM6
IDFcbiIgKyAKKwkJCSIgIHB1YmxpYyBzdGF0aWMgRmFuY3lFbnVtIHZhbHVlT2YoamF2YS5sYW5n
LlN0cmluZyBhcmcwKTtcbiIgKyAKKwkJCSIgICAgIDAgIGxkYyA8Q2xhc3MgRmFuY3lFbnVtPiBb
MV1cbiIgKyAKKwkJCSIgICAgIDIgIGFsb2FkXzAgW2FyZzBdXG4iICsgCisJCQkiICAgICAzICBp
bnZva2VzdGF0aWMgamF2YS5sYW5nLkVudW0udmFsdWVPZihqYXZhLmxhbmcuQ2xhc3MsIGphdmEu
bGFuZy5TdHJpbmcpIDogamF2YS5sYW5nLkVudW0gWzQ3XVxuIiArIAorCQkJIiAgICAgNiAgY2hl
Y2tjYXN0IEZhbmN5RW51bSBbMV1cbiIgKyAKKwkJCSIgICAgIDkgIGFyZXR1cm5cbiIgKyAKKwkJ
CSIgICAgICBMaW5lIG51bWJlcnM6XG4iICsgCisJCQkiICAgICAgICBbcGM6IDAsIGxpbmU6IDFd
XG4iICsgCisJCQkiICAgICAgQXR0cmlidXRlOiBNZXRob2RQYXJhbWV0ZXJzIExlbmd0aDogNVxu
IiArIAorCQkJIn0iOworCisJCWFzc2VydFN1YnN0cmluZyhhY3R1YWxPdXRwdXQsIGV4cGVjdGVk
T3V0cHV0KTsKKwl9CisKKwlwcml2YXRlIHZvaWQgcnVuUGFyYW1ldGVyTmFtZVRlc3QoU3RyaW5n
IGZpbGVOYW1lLCBTdHJpbmcgYm9keSkgeworCQlNYXAgY29tcGlsZXJPcHRpb25zID0gZ2V0Q29t
cGlsZXJPcHRpb25zKCk7CisJCWNvbXBpbGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9Q
VElPTl9Mb2NhbFZhcmlhYmxlQXR0cmlidXRlLCBDb21waWxlck9wdGlvbnMuRE9fTk9UX0dFTkVS
QVRFKTsKKwkJY29tcGlsZXJPcHRpb25zLnB1dChDb21waWxlck9wdGlvbnMuT1BUSU9OX01ldGhv
ZFBhcmFtZXRlcnNBdHRyaWJ1dGUsIENvbXBpbGVyT3B0aW9ucy5HRU5FUkFURSk7CisJCXRoaXMu
cnVuQ29uZm9ybVRlc3QoCisJCQluZXcgU3RyaW5nW10geworCQkJCWZpbGVOYW1lLCAKKwkJCQli
b2R5CisJCQl9LAorCQkJY29tcGlsZXJPcHRpb25zIC8qIGN1c3RvbSBvcHRpb25zICovCisJCSk7
CisJfQorCisJcHJpdmF0ZSB2b2lkIGFzc2VydFN1YnN0cmluZyhTdHJpbmcgYWN0dWFsT3V0cHV0
LCBTdHJpbmcgZXhwZWN0ZWRPdXRwdXQpIHsKKwkJaW50IGluZGV4ID0gYWN0dWFsT3V0cHV0Lmlu
ZGV4T2YoZXhwZWN0ZWRPdXRwdXQpOworCQlpZiAoaW5kZXggPT0gLTEgfHwgZXhwZWN0ZWRPdXRw
dXQubGVuZ3RoKCkgPT0gMCkgeworCQkJU3lzdGVtLm91dC5wcmludGxuKFV0aWwuZGlzcGxheVN0
cmluZyhhY3R1YWxPdXRwdXQsIDIpKTsKKwkJfQorCQlpZiAoaW5kZXggPT0gLTEpIHsKKwkJCWFz
c2VydEVxdWFscygiV3JvbmcgY29udGVudHMiLCBleHBlY3RlZE91dHB1dCwgYWN0dWFsT3V0cHV0
KTsKKwkJfQorCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9DbGFzc0ZpbGUuamF2YQppbmRleCBkYzU1YjNkLi4yMjY0MDEwIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvQ2xhc3NGaWxlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZhCkBAIC0xMyw2ICsx
Myw3IEBACiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVu
dGF0aW9uCiAgKiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqCQkJ
CQkJCUJ1ZyA0MDUwNjYgLSBbMS44XVtjb21waWxlcl1bY29kZWdlbl0gSW1wbGVtZW50IGNvZGUg
Z2VuZXJhdGlvbiBpbmZyYXN0cnVjdHVyZSBmb3IgSlNSMzM1ICAgICAgICAgICAgIAorICoJCQkJ
CQkJQnVnIDQwNjk4MiAtIFsxLjhdW2NvbXBpbGVyXSBHZW5lcmF0aW9uIG9mIE1ldGhvZFBhcmFt
ZXRlcnMgQXR0cmlidXRlIGluIGNsYXNzZmlsZQogICogICAgICAgIEFuZHkgQ2xlbWVudCAoR29Q
aXZvdGFsLCBJbmMpIGFjbGVtZW50QGdvcGl2b3RhbC5jb20gLSBDb250cmlidXRpb25zIGZvcgog
ICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyAzODM2MjQgLSBbMS44XVtjb21waWxlcl0g
UmV2aXZlIGNvZGUgZ2VuZXJhdGlvbiBzdXBwb3J0IGZvciB0eXBlIGFubm90YXRpb25zIChmcm9t
IE9saXZpZXIncyB3b3JrKQogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyA0MDkyMzYg
LSBbMS44XVtjb21waWxlcl0gVHlwZSBhbm5vdGF0aW9ucyBvbiBpbnRlcnNlY3Rpb24gY2FzdCB0
eXBlcyBkcm9wcGVkIGJ5IGNvZGUgZ2VuZXJhdG9yCkBAIC0yNzEsNiArMjcyLDkgQEAgcHVibGlj
IGNsYXNzIENsYXNzRmlsZSBpbXBsZW1lbnRzIFR5cGVDb25zdGFudHMsIFR5cGVJZHMgewogCQkJ
aWYgKHRoaXMudGFyZ2V0SkRLID49IENsYXNzRmlsZUNvbnN0YW50cy5KREsxXzgpIHsKIAkJCQl0
aGlzLnByb2R1Y2VBdHRyaWJ1dGVzIHw9IENsYXNzRmlsZUNvbnN0YW50cy5BVFRSX1RZUEVfQU5O
T1RBVElPTjsKIAkJCQl0aGlzLmNvZGVTdHJlYW0gPSBuZXcgVHlwZUFubm90YXRpb25Db2RlU3Ry
ZWFtKHRoaXMpOworCQkJCWlmIChvcHRpb25zLnByb2R1Y2VNZXRob2RQYXJhbWV0ZXJzKSB7CisJ
CQkJCXRoaXMucHJvZHVjZUF0dHJpYnV0ZXMgfD0gQ2xhc3NGaWxlQ29uc3RhbnRzLkFUVFJfTUVU
SE9EX1BBUkFNRVRFUlM7CisJCQkJfQogCQkJfSBlbHNlIHsKIAkJCQl0aGlzLmNvZGVTdHJlYW0g
PSBuZXcgU3RhY2tNYXBGcmFtZUNvZGVTdHJlYW0odGhpcyk7CiAJCQl9CkBAIC0yMDAyLDYgKzIw
MDYsOSBAQCBwdWJsaWMgY2xhc3MgQ2xhc3NGaWxlIGltcGxlbWVudHMgVHlwZUNvbnN0YW50cywg
VHlwZUlkcyB7CiAJCQkJCW1heF9sb2NhbHMsCiAJCQkJCWZhbHNlKTsKIAkJfQorCQlpZiAoKHRo
aXMucHJvZHVjZUF0dHJpYnV0ZXMgJiBDbGFzc0ZpbGVDb25zdGFudHMuQVRUUl9NRVRIT0RfUEFS
QU1FVEVSUykgIT0gMCkgeworCQkJYXR0cmlidXRlc051bWJlciArPSBnZW5lcmF0ZU1ldGhvZFBh
cmFtZXRlcnMoYmluZGluZyk7CisJCX0KIAogCQkvLyB1cGRhdGUgdGhlIG51bWJlciBvZiBhdHRy
aWJ1dGVzCiAJCS8vIGVuc3VyZSBmaXJzdCB0aGF0IHRoZXJlIGlzIGVub3VnaCBzcGFjZSBhdmFp
bGFibGUgaW5zaWRlIHRoZSBjb250ZW50cyBhcnJheQpAQCAtMjEyMyw2ICsyMTMwLDkgQEAgcHVi
bGljIGNsYXNzIENsYXNzRmlsZSBpbXBsZW1lbnRzIFR5cGVDb25zdGFudHMsIFR5cGVJZHMgewog
CQkJCQkJaW52aXNpYmxlVHlwZUFubm90YXRpb25zQ291bnRlcik7CiAJCQl9CiAJCX0KKwkJaWYg
KCh0aGlzLnByb2R1Y2VBdHRyaWJ1dGVzICYgQ2xhc3NGaWxlQ29uc3RhbnRzLkFUVFJfTUVUSE9E
X1BBUkFNRVRFUlMpICE9IDApIHsKKwkJCWF0dHJpYnV0ZXNOdW1iZXIgKz0gZ2VuZXJhdGVNZXRo
b2RQYXJhbWV0ZXJzKGJpbmRpbmcpOworCQl9CiAJCS8vIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGF0
dHJpYnV0ZXMKIAkJdGhpcy5jb250ZW50c1ttZXRob2RBdHRyaWJ1dGVPZmZzZXQrK10gPSAoYnl0
ZSkgKGF0dHJpYnV0ZXNOdW1iZXIgPj4gOCk7CiAJCXRoaXMuY29udGVudHNbbWV0aG9kQXR0cmli
dXRlT2Zmc2V0XSA9IChieXRlKSBhdHRyaWJ1dGVzTnVtYmVyOwpAQCAtMzczOSw2ICszNzQ5LDEw
NCBAQCBwdWJsaWMgY2xhc3MgQ2xhc3NGaWxlIGltcGxlbWVudHMgVHlwZUNvbnN0YW50cywgVHlw
ZUlkcyB7CiAJCXJldHVybiBhdHRyaWJ1dGVzTnVtYmVyOwogCX0KIAorCS8qKgorCSAqIEBwYXJh
bSBiaW5kaW5nIHRoZSBnaXZlbiBtZXRob2QgYmluZGluZworCSAqIEByZXR1cm4gdGhlIG51bWJl
ciBvZiBhdHRyaWJ1dGVzIGNyZWF0ZWQgd2hpbGUgZHVtcGluZyBoZSBtZXRob2QncyBwYXJhbWV0
ZXJzIGluIHRoZSAuY2xhc3MgZmlsZSAoMCBvciAxKQorCSAqLworCXByaXZhdGUgaW50IGdlbmVy
YXRlTWV0aG9kUGFyYW1ldGVycyhmaW5hbCBNZXRob2RCaW5kaW5nIGJpbmRpbmcpIHsKKwkJCisJ
CWludCBpbml0aWFsQ29udGVudHNPZmZzZXQgPSB0aGlzLmNvbnRlbnRzT2Zmc2V0OworCQlpbnQg
bGVuZ3RoID0gMDsgLy8gY291bnQgb2YgYWN0dWFsIHBhcmFtZXRlcnMKKwkJCisJCUFic3RyYWN0
TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbGFyYXRpb24gPSBiaW5kaW5nLnNvdXJjZU1ldGhv
ZCgpOworCQkKKwkJYm9vbGVhbiBpc0NvbnN0cnVjdG9yID0gYmluZGluZy5pc0NvbnN0cnVjdG9y
KCk7CisJCVR5cGVCaW5kaW5nW10gdGFyZ2V0UGFyYW1ldGVycyA9IGJpbmRpbmcucGFyYW1ldGVy
czsKKwkJaWYgKGlzQ29uc3RydWN0b3IgJiYgYmluZGluZy5kZWNsYXJpbmdDbGFzcy5pc0VudW0o
KSkgeyAvLyBpbnNlcnQgU3RyaW5nIG5hbWUsaW50IG9yZGluYWwKKwkJCXdyaXRlQXJndW1lbnRO
YW1lKENvbnN0YW50UG9vbC5FbnVtTmFtZSwgQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1N5bnRoZXRp
YywgMCk7CisJCQl3cml0ZUFyZ3VtZW50TmFtZShDb25zdGFudFBvb2wuRW51bU9yZGluYWwsIENs
YXNzRmlsZUNvbnN0YW50cy5BY2NTeW50aGV0aWMsIDEpOworCQkJbGVuZ3RoID0gMjsKKwkJfQor
CisJCWJvb2xlYW4gbmVlZFN5bnRoZXRpY3MgPSBpc0NvbnN0cnVjdG9yICYmIGJpbmRpbmcuZGVj
bGFyaW5nQ2xhc3MuaXNOZXN0ZWRUeXBlKCk7CisJCWlmIChuZWVkU3ludGhldGljcykgeworCQkJ
Ly8gdGFrZSBpbnRvIGFjY291bnQgdGhlIHN5bnRoZXRpYyBhcmd1bWVudCBuYW1lcworCQkJUmVm
ZXJlbmNlQmluZGluZ1tdIHN5bnRoZXRpY0FyZ3VtZW50VHlwZXMgPSBiaW5kaW5nLmRlY2xhcmlu
Z0NsYXNzLnN5bnRoZXRpY0VuY2xvc2luZ0luc3RhbmNlVHlwZXMoKTsKKwkJCWlmIChzeW50aGV0
aWNBcmd1bWVudFR5cGVzICE9IG51bGwpIHsKKwkJCQlmb3IgKGludCBpID0gMCwgY291bnQgPSBz
eW50aGV0aWNBcmd1bWVudFR5cGVzLmxlbmd0aDsgaSA8IGNvdW50OyBpKyspIHsKKwkJCQkJY2hh
cltdIG5hbWUgPSBDaGFyT3BlcmF0aW9uLmNvbmNhdCgKKwkJCQkJCQlUeXBlQ29uc3RhbnRzLlNZ
TlRIRVRJQ19FTkNMT1NJTkdfSU5TVEFOQ0VfUFJFRklYLAorCQkJCQkJCVN0cmluZy52YWx1ZU9m
KGkpLnRvQ2hhckFycmF5KCkpOyAvLyBjYW5ub3QgdXNlIGRlcHRoLCBjYW4gYmUgaWRlbnRpY2Fs
CisJCQkJCWxlbmd0aCA9IHdyaXRlQXJndW1lbnROYW1lKG5hbWUsIENsYXNzRmlsZUNvbnN0YW50
cy5BY2NNYW5kYXRlZCB8IENsYXNzRmlsZUNvbnN0YW50cy5BY2NGaW5hbCwgbGVuZ3RoKTsKKwkJ
CQl9CisJCQl9CisJCQlpZiAoYmluZGluZyBpbnN0YW5jZW9mIFN5bnRoZXRpY01ldGhvZEJpbmRp
bmcpIHsKKwkJCQl0YXJnZXRQYXJhbWV0ZXJzID0gKChTeW50aGV0aWNNZXRob2RCaW5kaW5nKWJp
bmRpbmcpLnRhcmdldE1ldGhvZC5wYXJhbWV0ZXJzOworCQkJCW1ldGhvZERlY2xhcmF0aW9uID0g
KChTeW50aGV0aWNNZXRob2RCaW5kaW5nKWJpbmRpbmcpLnRhcmdldE1ldGhvZC5zb3VyY2VNZXRo
b2QoKTsKKwkJCX0KKwkJfQorCQlpZiAodGFyZ2V0UGFyYW1ldGVycyAhPSBCaW5kaW5nLk5PX1BB
UkFNRVRFUlMpIHsKKwkJCWZvciAoaW50IGkgPSAwLCBtYXggPSB0YXJnZXRQYXJhbWV0ZXJzLmxl
bmd0aDsgaSA8IG1heDsgaSsrKSB7CisJCQkJaWYgKG1ldGhvZERlY2xhcmF0aW9uICE9IG51bGwg
JiYgbWV0aG9kRGVjbGFyYXRpb24uYXJndW1lbnRzICE9IG51bGwgJiYgbWV0aG9kRGVjbGFyYXRp
b24uYXJndW1lbnRzLmxlbmd0aCA+IGkgJiYgbWV0aG9kRGVjbGFyYXRpb24uYXJndW1lbnRzW2ld
ICE9IG51bGwpIHsKKwkJCQkJQXJndW1lbnQgYXJndW1lbnQgPSBtZXRob2REZWNsYXJhdGlvbi5h
cmd1bWVudHNbaV07CisJCQkJCWxlbmd0aCA9IHdyaXRlQXJndW1lbnROYW1lKGFyZ3VtZW50Lm5h
bWUsIGFyZ3VtZW50LmJpbmRpbmcubW9kaWZpZXJzLCBsZW5ndGgpOworCQkJCX0gZWxzZSB7CisJ
CQkJCWxlbmd0aCA9IHdyaXRlQXJndW1lbnROYW1lKG51bGwsIENsYXNzRmlsZUNvbnN0YW50cy5B
Y2NTeW50aGV0aWMsIGxlbmd0aCk7CisJCQkJfQorCQkJfQorCQl9CisJCWlmIChuZWVkU3ludGhl
dGljcykgeworCQkJU3ludGhldGljQXJndW1lbnRCaW5kaW5nW10gc3ludGhldGljT3V0ZXJBcmd1
bWVudHMgPSBiaW5kaW5nLmRlY2xhcmluZ0NsYXNzLnN5bnRoZXRpY091dGVyTG9jYWxWYXJpYWJs
ZXMoKTsKKwkJCWludCBjb3VudCA9IHN5bnRoZXRpY091dGVyQXJndW1lbnRzID09IG51bGwgPyAw
IDogc3ludGhldGljT3V0ZXJBcmd1bWVudHMubGVuZ3RoOworCQkJZm9yIChpbnQgaSA9IDA7IGkg
PCBjb3VudDsgaSsrKSB7CisJCQkJbGVuZ3RoID0gd3JpdGVBcmd1bWVudE5hbWUoc3ludGhldGlj
T3V0ZXJBcmd1bWVudHNbaV0ubmFtZSwgc3ludGhldGljT3V0ZXJBcmd1bWVudHNbaV0ubW9kaWZp
ZXJzICB8IENsYXNzRmlsZUNvbnN0YW50cy5BY2NTeW50aGV0aWMsIGxlbmd0aCk7CisJCQl9CisJ
CQkvLyBtb3ZlIHRoZSBleHRyYSBwYWRkaW5nIGFyZ3VtZW50cyBvZiB0aGUgc3ludGhldGljIGNv
bnN0cnVjdG9yIGludm9jYXRpb24gdG8gdGhlIGVuZAorCQkJZm9yIChpbnQgaSA9IHRhcmdldFBh
cmFtZXRlcnMubGVuZ3RoLCBleHRyYUxlbmd0aCA9IGJpbmRpbmcucGFyYW1ldGVycy5sZW5ndGg7
IGkgPCBleHRyYUxlbmd0aDsgaSsrKSB7CisJCQkJVHlwZUJpbmRpbmcgcGFyYW1ldGVyID0gYmlu
ZGluZy5wYXJhbWV0ZXJzW2ldOworCQkJCWxlbmd0aCA9IHdyaXRlQXJndW1lbnROYW1lKHBhcmFt
ZXRlci5jb25zdGFudFBvb2xOYW1lKCksIENsYXNzRmlsZUNvbnN0YW50cy5BY2NTeW50aGV0aWMs
IGxlbmd0aCk7CisJCQl9CisJCX0KKworCQlpZiAobGVuZ3RoID4gMCkgeworCQkJLy8gc28gd2Ug
YWN0dWFsbHkgb3V0cHV0IHRoZSBwYXJhbWV0ZXIKKwkgCQlpbnQgYXR0cmlidXRlTGVuZ3RoID0g
MSArIDQgKiBsZW5ndGg7IC8vIHUxIGZvciBjb3VudCwgdTIrdTIgcGVyIHBhcmFtZXRlcgorCQkJ
aWYgKHRoaXMuY29udGVudHNPZmZzZXQgKyA2ICsgYXR0cmlidXRlTGVuZ3RoID49IHRoaXMuY29u
dGVudHMubGVuZ3RoKSB7CisJCQkJcmVzaXplQ29udGVudHMoNiArIGF0dHJpYnV0ZUxlbmd0aCk7
CisJCQl9CisJCQlpbnQgbWV0aG9kUGFyYW1ldGVyc05hbWVJbmRleCA9IHRoaXMuY29uc3RhbnRQ
b29sLmxpdGVyYWxJbmRleChBdHRyaWJ1dGVOYW1lc0NvbnN0YW50cy5NZXRob2RQYXJhbWV0ZXJz
TmFtZSk7CisJCQl0aGlzLmNvbnRlbnRzW2luaXRpYWxDb250ZW50c09mZnNldCsrXSA9IChieXRl
KSAobWV0aG9kUGFyYW1ldGVyc05hbWVJbmRleCA+PiA4KTsKKwkJCXRoaXMuY29udGVudHNbaW5p
dGlhbENvbnRlbnRzT2Zmc2V0KytdID0gKGJ5dGUpIG1ldGhvZFBhcmFtZXRlcnNOYW1lSW5kZXg7
CisJCQl0aGlzLmNvbnRlbnRzW2luaXRpYWxDb250ZW50c09mZnNldCsrXSA9IChieXRlKSAoYXR0
cmlidXRlTGVuZ3RoID4+IDI0KTsKKwkJCXRoaXMuY29udGVudHNbaW5pdGlhbENvbnRlbnRzT2Zm
c2V0KytdID0gKGJ5dGUpIChhdHRyaWJ1dGVMZW5ndGggPj4gMTYpOworCQkJdGhpcy5jb250ZW50
c1tpbml0aWFsQ29udGVudHNPZmZzZXQrK10gPSAoYnl0ZSkgKGF0dHJpYnV0ZUxlbmd0aCA+PiA4
KTsKKwkJCXRoaXMuY29udGVudHNbaW5pdGlhbENvbnRlbnRzT2Zmc2V0KytdID0gKGJ5dGUpIGF0
dHJpYnV0ZUxlbmd0aDsKKwkJCXRoaXMuY29udGVudHNbaW5pdGlhbENvbnRlbnRzT2Zmc2V0Kytd
ID0gKGJ5dGUpIGxlbmd0aDsKKwkJCXJldHVybiAxOworCQl9CisJCWVsc2UgeworCQkJcmV0dXJu
IDA7CisJCX0KKwl9CisJcHJpdmF0ZSBpbnQgd3JpdGVBcmd1bWVudE5hbWUoY2hhcltdIG5hbWUs
IGludCBtb2RpZmllcnMsIGludCBvbGRMZW5ndGgpIHsKKwkJaW50IGVuc3VyZVJvb21Gb3JCeXRl
cyA9IDQ7CisJCWlmIChvbGRMZW5ndGggPT0gMCkgeworCQkJLy8gTWFrZSByb29tIGZvciAKKwkJ
CWVuc3VyZVJvb21Gb3JCeXRlcyArPSA3OworCQkJdGhpcy5jb250ZW50c09mZnNldCArPSA3OyAv
LyBNYWtlIHJvb20gZm9yIGF0dHJpYnV0ZSBoZWFkZXIgKyBjb3VudCBieXRlCisJCX0KKwkJaWYg
KHRoaXMuY29udGVudHNPZmZzZXQgKyBlbnN1cmVSb29tRm9yQnl0ZXMgPiB0aGlzLmNvbnRlbnRz
Lmxlbmd0aCkgeworCQkJCXJlc2l6ZUNvbnRlbnRzKGVuc3VyZVJvb21Gb3JCeXRlcyk7CisJCX0K
KwkJaW50IHBhcmFtZXRlck5hbWVJbmRleCA9IG5hbWUgPT0gbnVsbCA/IDAgOiB0aGlzLmNvbnN0
YW50UG9vbC5saXRlcmFsSW5kZXgobmFtZSk7CisJCXRoaXMuY29udGVudHNbdGhpcy5jb250ZW50
c09mZnNldCsrXSA9IChieXRlKSAocGFyYW1ldGVyTmFtZUluZGV4ID4+IDgpOworCQl0aGlzLmNv
bnRlbnRzW3RoaXMuY29udGVudHNPZmZzZXQrK10gPSAoYnl0ZSkgcGFyYW1ldGVyTmFtZUluZGV4
OworCQlpbnQgZmxhZ3MgPSBtb2RpZmllcnMgJiAoQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY0ZpbmFs
IHwgQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1N5bnRoZXRpYyB8IENsYXNzRmlsZUNvbnN0YW50cy5B
Y2NNYW5kYXRlZCk7CisJCXRoaXMuY29udGVudHNbdGhpcy5jb250ZW50c09mZnNldCsrXSA9IChi
eXRlKSAoZmxhZ3MgPj4gOCk7CisJCXRoaXMuY29udGVudHNbdGhpcy5jb250ZW50c09mZnNldCsr
XSA9IChieXRlKSBmbGFnczsKKwkJcmV0dXJuIG9sZExlbmd0aCArIDE7CisJfQorCiAJcHJpdmF0
ZSBpbnQgZ2VuZXJhdGVTaWduYXR1cmVBdHRyaWJ1dGUoY2hhcltdIGdlbmVyaWNTaWduYXR1cmUp
IHsKIAkJaW50IGxvY2FsQ29udGVudHNPZmZzZXQgPSB0aGlzLmNvbnRlbnRzT2Zmc2V0OwogCQlp
ZiAobG9jYWxDb250ZW50c09mZnNldCArIDggPj0gdGhpcy5jb250ZW50cy5sZW5ndGgpIHsKZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9jbGFzc2ZtdC9DbGFzc0ZpbGVDb25zdGFudHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9jbGFzc2ZtdC9DbGFzc0ZpbGVDb25zdGFudHMuamF2YQppbmRleCBjMmNhZmQ3Li5iOWZhMzk1
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvY2xhc3NmbXQvQ2xhc3NGaWxlQ29uc3RhbnRzLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2NsYXNzZm10L0NsYXNzRmlsZUNvbnN0YW50cy5qYXZhCkBAIC0xMyw2ICsxMyw3
IEBACiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0
aW9uCiAgKiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqCQkJCQkJ
CUJ1ZyA0MDUwNjYgLSBbMS44XVtjb21waWxlcl1bY29kZWdlbl0gSW1wbGVtZW50IGNvZGUgZ2Vu
ZXJhdGlvbiBpbmZyYXN0cnVjdHVyZSBmb3IgSlNSMzM1ICAgICAgICAgICAgIAorICoJCQkJCQkJ
QnVnIDQwNjk4MiAtIFsxLjhdW2NvbXBpbGVyXSBHZW5lcmF0aW9uIG9mIE1ldGhvZFBhcmFtZXRl
cnMgQXR0cmlidXRlIGluIGNsYXNzZmlsZQogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNr
YWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jbGFzc2ZtdDsKIApAQCAtNDMs
NiArNDQsMTMgQEAgcHVibGljIGludGVyZmFjZSBDbGFzc0ZpbGVDb25zdGFudHMgewogCWludCBB
Y2NFbnVtICAgICAgICAgPSAweDQwMDA7CiAKIAkvKioKKwkgKiBGcm9tIGNsYXNzZmlsZSB2ZXJz
aW9uIDUyIChjb21wbGlhbmNlIDEuOCB1cCksIG1lYW5pbmcgdGhhdCBhIGZvcm1hbCBwYXJhbWV0
ZXIgaXMgbWFuZGF0ZWQKKwkgKiBieSBhIGxhbmd1YWdlIHNwZWNpZmljYXRpb24sIHNvIGFsbCBj
b21waWxlcnMgZm9yIHRoZSBsYW5ndWFnZSBtdXN0IGVtaXQgaXQuCisJICovCisJaW50IEFjY01h
bmRhdGVkICAgICA9IDB4ODAwMDsKKworCQorCS8qKgogCSAqIE90aGVyIFZNIGZsYWdzLgogCSAq
LwogCWludCBBY2NTdXBlciA9IDB4MDAyMDsKQEAgLTE0Niw0ICsxNTQsNSBAQCBwdWJsaWMgaW50
ZXJmYWNlIENsYXNzRmlsZUNvbnN0YW50cyB7CiAJaW50IEFUVFJfU1RBQ0tfTUFQX1RBQkxFID0g
MHg4OyAvLyBTdGFjayBtYXAgdGFibGUgYXR0cmlidXRlCiAJaW50IEFUVFJfU1RBQ0tfTUFQID0g
MHgxMDsgLy8gU3RhY2sgbWFwIGF0dHJpYnV0ZTogY2xkYwogCWludCBBVFRSX1RZUEVfQU5OT1RB
VElPTiA9IDB4MjA7IC8vIHR5cGUgYW5ub3RhdGlvbiBhdHRyaWJ1dGUgKGpzciAzMDgpCisJaW50
IEFUVFJfTUVUSE9EX1BBUkFNRVRFUlMgPSAweDQwOyAvLyBtZXRob2QgcGFyYW1ldGVycyBhdHRy
aWJ1dGUgKGplcCAxMTgpCiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvY29kZWdlbi9Db25zdGFudFBv
b2wuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9jb2RlZ2VuL0NvbnN0YW50UG9vbC5qYXZhCmluZGV4IGQ5ZWY4NzMu
LmZmNjI2MjggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9jb2RlZ2VuL0NvbnN0YW50UG9vbC5qYXZhCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9jb2RlZ2VuL0NvbnN0YW50UG9vbC5qYXZhCkBAIC0xMyw2ICsxMyw3IEBACiAg
KiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAg
KiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqCQkJCQkJCUJ1ZyA0
MDUwNjYgLSBbMS44XVtjb21waWxlcl1bY29kZWdlbl0gSW1wbGVtZW50IGNvZGUgZ2VuZXJhdGlv
biBpbmZyYXN0cnVjdHVyZSBmb3IgSlNSMzM1ICAgICAgICAKKyAqCQkJCQkJCUJ1ZyA0MDY5ODIg
LSBbMS44XVtjb21waWxlcl0gR2VuZXJhdGlvbiBvZiBNZXRob2RQYXJhbWV0ZXJzIEF0dHJpYnV0
ZSBpbiBjbGFzc2ZpbGUKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuY29kZWdlbjsKIApAQCAtODYsNiArODcsOCBAQCBw
dWJsaWMgY2xhc3MgQ29uc3RhbnRQb29sIGltcGxlbWVudHMgQ2xhc3NGaWxlQ29uc3RhbnRzLCBU
eXBlSWRzIHsKIAlwdWJsaWMgc3RhdGljIGZpbmFsIGNoYXJbXSBkb3VibGVEb3VibGVTaWduYXR1
cmUgPSAiKEQpTGphdmEvbGFuZy9Eb3VibGU7Ii50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEk
CiAJcHVibGljIHN0YXRpYyBmaW5hbCBjaGFyW10gRE9VQkxFVkFMVUVfRE9VQkxFX01FVEhPRF9O
QU1FID0gImRvdWJsZVZhbHVlIi50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCiAJcHVibGlj
IHN0YXRpYyBmaW5hbCBjaGFyW10gRE9VQkxFVkFMVUVfRE9VQkxFX01FVEhPRF9TSUdOQVRVUkUg
PSAiKClEIi50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCisJcHVibGljIHN0YXRpYyBmaW5h
bCBjaGFyW10gRW51bU5hbWUgPSAiJGVudW0kbmFtZSIudG9DaGFyQXJyYXkoKTsvLyROT04tTkxT
LTEkCisJcHVibGljIHN0YXRpYyBmaW5hbCBjaGFyW10gRW51bU9yZGluYWwgPSAiJGVudW0kb3Jk
aW5hbCIudG9DaGFyQXJyYXkoKTsvLyROT04tTkxTLTEkCiAJcHVibGljIHN0YXRpYyBmaW5hbCBj
aGFyW10gRXhpdCA9ICJleGl0Ii50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCiAJcHVibGlj
IHN0YXRpYyBmaW5hbCBjaGFyW10gRXhpdEludFNpZ25hdHVyZSA9ICIoSSlWIi50b0NoYXJBcnJh
eSgpOyAvLyROT04tTkxTLTEkCiAJcHVibGljIHN0YXRpYyBmaW5hbCBjaGFyW10gRmxvYXRDb25z
dHJTaWduYXR1cmUgPSAiKEYpViIudG9DaGFyQXJyYXkoKTsgLy8kTk9OLU5MUy0xJAo=
</data>

          </attachment>
      

    </bug>

</bugzilla>