<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>391898</bug_id>
          
          <creation_ts>2012-10-15 04:27:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Add DOM/AST support for annotations on varargs,</short_desc>
          <delta_ts>2013-01-03 01:26:53 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>391847</blocked>
    
    <blocked>395663</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>jarthana</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="54026"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2171618</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-15 04:27:05 -0400</bug_when>
    <thetext>BETA_JAVA8:

For a variable arity method, the compiler AST contains an extra dimension
while on the DOM/AST side the Type of SingleVariableDeclaration does not
contain an extra dimension, but captures the fact of variable arity in a
boolean property: VARARGS_PROPERTY. So SingleVariableDeclaration  needs to
be extended to capture, expose and allow manipulations on the annotations
on the ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2176346</commentid>
    <comment_count>1</comment_count>
      <attachid>222879</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-10-26 11:13:57 -0400</bug_when>
    <thetext>Created attachment 222879
Proposed Patch - Work-in-progress.

This is a work-in-progress patch - please provide early review comments.
- ASTConverter delta needs to be checked specifically.
- Also, the point discussed in https://bugs.eclipse.org/bugs/show_bug.cgi?id=391895#c2 needs to be discussed for incorporating into this fix if required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2176755</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-29 01:06:31 -0400</bug_when>
    <thetext>(In reply to comment #1)
&gt; Created attachment 222879 [details]
&gt; Proposed Patch - Work-in-progress.

Questions/points:
1. Even in the case of variable args, the argument (i.e., the SingleVaribaleDeclration) can have annotation along with annotations on dimenstions. So, we need to come up with a new field for that rather than using the existing annotations field.

For e.g., in this case - foo(@Marker1 int @Marker2 ... args){}
The SVD should get the @Marker1 (in an array, of course) and @Marker2 should go to the annotations on dimensions.

Even if you argue that for a varargs parameter the annotation on the parameter doesn&apos;t make sense (which I don&apos;t agree with), we have to have a separate field for the annotations on dimensions. We can&apos;t use the same field for dual purpose to avoid confusion.

2. Instead of cloning the annotations from the type and setting them on dimensions, we should try to avoid the cloning part. Try to set it at the right place the first time itself.

3. This question is for Srikanth:
  Why can&apos;t treat the varargs case like a parameter of array type and that will take care of most of the annotation related tasks. I know the API are already there and such. But if we just convert the varargs parameter to an SVD with it&apos;s type as an ArrayType of single dimension, we don&apos;t need any specific code for var args case. I mean, the ArrayType will anyway get it&apos;s annotation on dimensions won&apos;t it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2176757</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-29 01:33:21 -0400</bug_when>
    <thetext>(In reply to comment #2) 
&gt; Questions/points:
&gt; 1. Even in the case of variable args, the argument (i.e., the
&gt; SingleVaribaleDeclration) can have annotation along with annotations on
&gt; dimenstions. So, we need to come up with a new field for that rather than
&gt; using the existing annotations field.
&gt; 
&gt; For e.g., in this case - foo(@Marker1 int @Marker2 ... args){}
&gt; The SVD should get the @Marker1 (in an array, of course) and @Marker2 should
&gt; go to the annotations on dimensions.

Please, ignore this question. I must have known that we do support annotations on SVD already. What I didn&apos;t know was, until Srikanth told me, that the modifiers2 field is used to capture annotations. So, what we really need is a specific field to capture the annotations on the varargs&apos; dimensions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2179308</commentid>
    <comment_count>4</comment_count>
      <attachid>223159</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-11-05 02:00:48 -0500</bug_when>
    <thetext>Created attachment 223159
Proposed Patch - Work-in-progress.

Todo:
  - Add more tests [particularly matcher tests]
  - Confirming functionality based on Varargs [as part of review?]
  - Review by Manoj for functionality issues and for patch review c/l adherence.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2179769</commentid>
    <comment_count>5</comment_count>
      <attachid>223210</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-11-05 22:35:15 -0500</bug_when>
    <thetext>Created attachment 223210
Proposed Patch - Work-in-progress.

Todo:
- Rewrite/Correct the existing test cases that are failing due to new syntax of type annotations.
- More review and testing by Manoj.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2187818</commentid>
    <comment_count>6</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-11-27 01:46:51 -0500</bug_when>
    <thetext>On a rebase, tests pass. This same patch may be reviewed as a fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2187831</commentid>
    <comment_count>7</comment_count>
      <attachid>223997</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-11-27 03:37:00 -0500</bug_when>
    <thetext>Created attachment 223997
Non ASTRewrite Part of the original patch

The earlier patch has been now being uploaded as two parts for ease of review : NonASTRewrite Part and ASTRewrite Part. This attachment is NonASTRewrite Part</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2187833</commentid>
    <comment_count>8</comment_count>
      <attachid>223999</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-11-27 03:38:41 -0500</bug_when>
    <thetext>Created attachment 223999
ASTRewrite Part of the original Patch

ASTRewrite Part of the Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2189814</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-12-03 01:59:16 -0500</bug_when>
    <thetext>(In reply to comment #7)
&gt; Created attachment 223997 [details]
&gt; Non ASTRewrite Part of the original patch
&gt; 
&gt; The earlier patch has been now being uploaded as two parts for ease of
&gt; review : NonASTRewrite Part and ASTRewrite Part. This attachment is
&gt; NonASTRewrite Part

Here are some review comments:

(1) SVD: The javadoc update (diff 2 in SVD) is incorrect, looks identical to
JLS3 change (i.e missing optional annotations)

(2) SVD: ANNOTATIONS_PROPERTY is better named VARARGS_ANNOTATIONS_PROPERTY ?
SVD itself can have annotations which are captured in modifiers.

(3) SVD: javadoc for the new property should also NOT say : The &quot;annotations&quot; structural property of this node type ...

(4) SVD: I believe the CYCLE_RISK parameter should actually be NO_CYCLE_RISK.
Can annotations contains a single variable declarations ? 

(5) SVD field annotations is better named varargsAnnotations, does this have
to be protected ?

(6) SVD: annotations() is better named varargsAnnotations() ? The javadoc above
also needs fixing, it is too general and confusing : &quot;Returns the live ordered list of annotations for this SingleVariableDeclaration node&quot;

(7) NaiveASTFlattener: Is there a reason why the call to this.buffer.append(&apos; &apos;); happens before as opposed to after the annotations gets visited ? 
Compare visitTypeAnnotations methods in the same file. We probably need it
both before and after (including in old places ?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2190308</commentid>
    <comment_count>10</comment_count>
      <attachid>224260</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-12-04 07:27:16 -0500</bug_when>
    <thetext>Created attachment 224260
Proposed Patch - NONASTRewrite Part - Reworked</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2193416</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-12-12 01:51:28 -0500</bug_when>
    <thetext>(In reply to comment #10)
&gt; Created attachment 224260 [details]
&gt; Proposed Patch - NONASTRewrite Part - Reworked

1. SingleVariableDeclaration grammatical notation includes a [] pair
incorrectly.

2. Sorry if this was not clear in earlier comment 9 point 2. The new 
property&apos;s id should not be &quot;annotations&quot; - it should be varargsAnnotations.
Likewise the javadoc needs to be suitably adjusted.

3. NaiveASTFlattener: Won&apos;t there be two white spaces after the last
annotation ? 

Jay, After these are fixed, please quickly eyeball the patch and release
it - Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2194403</commentid>
    <comment_count>12</comment_count>
      <attachid>224702</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2012-12-13 20:22:24 -0500</bug_when>
    <thetext>Created attachment 224702
Proposed Patch [after rework]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2195074</commentid>
    <comment_count>13</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-12-17 01:57:27 -0500</bug_when>
    <thetext>(In reply to comment #12)
&gt; Created attachment 224702 [details]
&gt; Proposed Patch [after rework]

1. The property name in the Javadoc has a typo - it should be varargsAnnotations and not varargsannotations
2. The Javadoc for varargsAnnotations field doesn&apos;t mention varargs.
3. In the SVD&apos;s Javadoc, I see &apos;varargs&apos;. Consider using the full form if it makes sense.
4. May be we can avoid the clone of the annotations. The ArrayType that gets created with the type annotations is discarded anyway. So, if we can find a way to avoid adding annotations to the ArrayType in case of varargs, we can do it at a later point of time when required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2198015</commentid>
    <comment_count>14</comment_count>
      <attachid>225128</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-02 04:18:46 -0500</bug_when>
    <thetext>Created attachment 225128
Proposed Patched - [Reworked]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2198016</commentid>
    <comment_count>15</comment_count>
      <attachid>225129</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-01-02 04:20:49 -0500</bug_when>
    <thetext>Created attachment 225129
Proposed Patch [Reworked]

Resubmitting the patch obsoleting earlier ones.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2198243</commentid>
    <comment_count>16</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-03 01:26:53 -0500</bug_when>
    <thetext>Patch is good and released to BETA_JAVA8:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=3388256fa80bf40daffa9f485d2674986c875b82</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>222879</attachid>
            <date>2012-10-26 11:13:00 -0400</date>
            <delta_ts>2012-11-05 02:00:48 -0500</delta_ts>
            <desc>Proposed Patch - Work-in-progress.</desc>
            <filename>Bug-391898--18compiler-Add-DOM-AST-support-for-annot.patch</filename>
            <type>text/plain</type>
            <size>14540</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLmYxOTRlMTMKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsODkgQEAKKy8qKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCisg
KiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisg
KiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcg
bWF0ZXJpYWxzCisgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBF
Y2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKKyAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlz
dHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3Jn
L2xlZ2FsL2VwbC12MTAuaHRtbAorICoKKyAgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9m
IGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisg
KiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3Rp
bmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21w
YXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KKyAqIAorICogQ29udHJp
YnV0b3JzOgorICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1l
bnRhdGlvbgorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCitwYWNrYWdlIG9yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLmRvbTsKKworaW1wb3J0IGphdmEudXRpbC5MaXN0OworCitpbXBvcnQganVu
aXQuZnJhbWV3b3JrLlRlc3Q7CisKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29tcGls
YXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFNb2RlbEV4Y2VwdGlv
bjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUOworaW1wb3J0IG9yZy5lY2xp
cHNlLmpkdC5jb3JlLmRvbS5BU1ROb2RlOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRv
bS5Db21waWxhdGlvblVuaXQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLk1ldGhv
ZERlY2xhcmF0aW9uOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5TaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uOworCitwdWJsaWMgY2xhc3MgQVNUQ29udmVydGVyMThUZXN0IGV4dGVu
ZHMgQ29udmVydGVyVGVzdFNldHVwIHsKKworCUlDb21waWxhdGlvblVuaXQgd29ya2luZ0NvcHk7
CisKKwlwdWJsaWMgdm9pZCBzZXRVcFN1aXRlKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJCXN1cGVy
LnNldFVwU3VpdGUoKTsKKwkJdGhpcy5hc3QgPSBBU1QubmV3QVNUKEFTVC5KTFM4KTsKKwl9CisK
KwlwdWJsaWMgQVNUQ29udmVydGVyMThUZXN0KFN0cmluZyBuYW1lKSB7CisJCXN1cGVyKG5hbWUp
OworCX0KKworCXN0YXRpYyB7CisvLwkJVEVTVFNfTlVNQkVSUyA9IG5ldyBpbnRbXSB7IDE5IH07
CisvLwkJVEVTVFNfUkFOR0UgPSBuZXcgaW50W10geyAxLCAtMSB9OworLy8JCVRFU1RTX05BTUVT
ID0gbmV3IFN0cmluZ1tdIHsidGVzdDAwMDEifTsKKwl9CisJcHVibGljIHN0YXRpYyBUZXN0IHN1
aXRlKCkgeworCQlyZXR1cm4gYnVpbGRNb2RlbFRlc3RTdWl0ZShBU1RDb252ZXJ0ZXIxOFRlc3Qu
Y2xhc3MpOworCX0KKworCXByb3RlY3RlZCB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlv
biB7CisJCXN1cGVyLnRlYXJEb3duKCk7CisJCWlmICh0aGlzLndvcmtpbmdDb3B5ICE9IG51bGwp
IHsKKwkJCXRoaXMud29ya2luZ0NvcHkuZGlzY2FyZFdvcmtpbmdDb3B5KCk7CisJCQl0aGlzLndv
cmtpbmdDb3B5ID0gbnVsbDsKKwkJfQorCX0KKworCS8qCisJICogVHlwZSBBbm5vdGF0aW9ucyBv
biBWYXJpYWJsZSBBcmd1bWVudHMKKwkgKi8KKwlwdWJsaWMgdm9pZCB0ZXN0MDAwMSgpIHRocm93
cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQlTdHJpbmcgY29udGVudHMgPQorCQkJIiAgICBAamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlw
ZS5UWVBFX1VTRSlcbiIgKworCQkJIiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKKwkJCSIg
ICAgfVxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiCXB1YmxpYyB2b2lkIGZv
byhpbnQgQE1hcmtlci4uLiBhcmdzKSB7XG4iICsKKwkJCSIJfVxuIiArCisJCQkifSI7CisJCXRo
aXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy9YLmphdmEi
LCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBidWlsZEFTVCgKKwkJCWNvbnRl
bnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVxdWFscygiTm90IGEgY29tcGls
YXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwgbm9kZS5nZXROb2RlVHlwZSgp
KTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9IChDb21waWxhdGlvblVuaXQp
IG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlvblVuaXQsIDApOworCQlub2Rl
ID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOworCQlhc3NlcnRUcnVlKCJOb3Qg
YSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBlKCkgPT0gQVNUTm9kZS5NRVRI
T0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsYXJhdGlvbiA9
IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJhbWV0ZXJzID0gbWV0aG9kRGVj
bGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMoIndyb25nIHNpemUiLCAxLCBw
YXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24gcGFyYW1ldGVy
ID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRlcnMuZ2V0KDApOworCQlMaXN0
IGFubm90YXRpb25zID0gcGFyYW1ldGVyLmFubm90YXRpb25zKCk7CisJCWFzc2VydEVxdWFscygi
V3JvbmcgbnVtYmVyIG9mIGFubm90YXRpb25zIiwgMSwgYW5ub3RhdGlvbnMuc2l6ZSgpKTsKKwkJ
QVNUTm9kZSBhbm5vdGF0aW9uID0gKEFTVE5vZGUpIGFubm90YXRpb25zLmdldCgwKTsKKwkJY2hl
Y2tTb3VyY2VSYW5nZShhbm5vdGF0aW9uLCAiQE1hcmtlciIsIGNvbnRlbnRzKTsKKwl9Cit9CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUv
ZG9tL0FTVENvbnZlcnRlci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xp
cHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQppbmRleCBlYjI1N2QyLi4wNWY3ZDg3
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2Nv
cmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKQEAgLTc5NSw2ICs3OTUs
MTMgQEAKIAkJICovCiAJCWlmIChpc1ZhckFyZ3MpIHsKIAkJCXNldFR5cGVGb3JTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uKHZhcmlhYmxlRGVjbCwgdHlwZSwgZXh0cmFEaW1lbnNpb25zICsgMSk7
CisJCQlpZiAoIXR5cGUuYW5ub3RhdGlvbnMoKS5pc0VtcHR5KCkpIHsKKwkJCQlJdGVyYXRvciBh
bm5vdGF0aW9ucyA9IHR5cGUuYW5ub3RhdGlvbnMuaXRlcmF0b3IoKTsKKwkJCQl3aGlsZSAoYW5u
b3RhdGlvbnMuaGFzTmV4dCgpKSB7CisJCQkJCUFubm90YXRpb24gYW5ub3RhdGlvbiA9IChBbm5v
dGF0aW9uKSBhbm5vdGF0aW9ucy5uZXh0KCk7CisJCQkJCXZhcmlhYmxlRGVjbC5hbm5vdGF0aW9u
cygpLmFkZCgoYW5ub3RhdGlvbi5jbG9uZSh0aGlzLmFzdCkpKTsKKwkJCQl9CisJCQl9CiAJCQlp
ZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKIAkJCQl2YXJpYWJsZURlY2wuc2V0RmxhZ3ModmFy
aWFibGVEZWNsLmdldEZsYWdzKCkgfCBBU1ROb2RlLk1BTEZPUk1FRCk7CiAJCQl9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FT
VE1hdGNoZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
Y29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCmluZGV4IDY0MTg2YmIuLmMzMDRhMDQgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNU
TWF0Y2hlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCkBAIC0xODg1LDcgKzE4ODUsOCBAQAogCQkgICAg
c2FmZVN1YnRyZWVNYXRjaChub2RlLmdldFR5cGUoKSwgby5nZXRUeXBlKCkpCiAJCQkJJiYgc2Fm
ZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpCiAJIAkJCSYmIG5vZGUu
Z2V0RXh0cmFEaW1lbnNpb25zKCkgPT0gby5nZXRFeHRyYURpbWVuc2lvbnMoKQotCQkJCSYmIHNh
ZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigpLCBvLmdldEluaXRpYWxpemVyKCkp
OworCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigpLCBvLmdldElu
aXRpYWxpemVyKCkpCisJCQkJJiYgKGxldmVsID49IEFTVC5KTFM4KSA/IHNhZmVTdWJ0cmVlTGlz
dE1hdGNoKG5vZGUuYW5ub3RhdGlvbnMoKSwgby5hbm5vdGF0aW9ucygpKSA6IHRydWU7CQkKIAl9
CiAKIAkvKioKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uLmphdmEKaW5kZXggNDM2YWYyMS4uZjhjOTI3MiAxMDA2NDQKLS0tIGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xp
cHNlL2pkdC9jb3JlL2RvbS9TaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmphdmEKQEAgLTUsNiAr
NSwxMCBAQAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBh
dmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1s
CiAgKgorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVj
aWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3Mg
KEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1
cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVj
aWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0g
Q29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqLwpAQCAtMzEsNiArMzUsMTEgQEAKICAqIDxwcmU+CiAgKiBTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uOgogICogICAgeyBFeHRlbmRlZE1vZGlmaWVyIH0gVHlwZSBbIDxiPi4u
LjwvYj4gXSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9IFsgPGI+PTwvYj4gRXhwcmVz
c2lvbiBdCisgKiA8L3ByZT4KKyAqIEZvciBKTFM4LCB2YXJhcmdzIGFyZSBhbGxvd2VkIHRvIGhh
dmUgb3B0aW9uYWwgYW5ub3RhdGlvbnMuCisgKiA8cHJlPgorICogU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbjoKKyAqICAgIHsgRXh0ZW5kZWRNb2RpZmllciB9IFR5cGUgW10gWyA8Yj4uLi48L2I+
IF0gSWRlbnRpZmllciB7IDxiPls8L2I+PGI+XTwvYj4gfSBbIDxiPj08L2I+IEV4cHJlc3Npb24g
XQogICogPC9wcmU+CiAgKgogICogQHNpbmNlIDIuMApAQCAtNzIsNiArODEsMTMgQEAKIAkgKi8K
IAlwdWJsaWMgc3RhdGljIGZpbmFsIFNpbXBsZVByb3BlcnR5RGVzY3JpcHRvciBWQVJBUkdTX1BS
T1BFUlRZID0KIAkJbmV3IFNpbXBsZVByb3BlcnR5RGVzY3JpcHRvcihTaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uLmNsYXNzLCAidmFyYXJncyIsIGJvb2xlYW4uY2xhc3MsIE1BTkRBVE9SWSk7IC8v
JE5PTi1OTFMtMSQKKwkKKwkvKioKKwkgKiBUaGUgImFubm90YXRpb25zIiBzdHJ1Y3R1cmFsIHBy
b3BlcnR5IG9mIHRoaXMgbm9kZSB0eXBlIChjaGlsZCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0p
LgorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwdWJsaWMgc3RhdGljIGZpbmFsIENoaWxkTGlzdFBy
b3BlcnR5RGVzY3JpcHRvciBBTk5PVEFUSU9OU19QUk9QRVJUWSA9CisJCW5ldyBDaGlsZExpc3RQ
cm9wZXJ0eURlc2NyaXB0b3IoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5jbGFzcywgImFubm90
YXRpb25zIiwgQW5ub3RhdGlvbi5jbGFzcywgQ1lDTEVfUklTSyk7IC8vJE5PTi1OTFMtMSQKIAog
CS8qKgogCSAqIFRoZSAiZXh0cmFEaW1lbnNpb25zIiBzdHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHRo
aXMgbm9kZSB0eXBlICh0eXBlOiB7QGxpbmsgSW50ZWdlcn0pLgpAQCAtMTAyLDcgKzExOCwxNSBA
QAogCSAqIEBzaW5jZSAzLjEKIAkgKi8KIAlwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0IFBST1BF
UlRZX0RFU0NSSVBUT1JTXzNfMDsKLQorCQorCS8qKgorCSAqIEEgbGlzdCBvZiBwcm9wZXJ0eSBk
ZXNjcmlwdG9ycyAoZWxlbWVudCB0eXBlOgorCSAqIHtAbGluayBTdHJ1Y3R1cmFsUHJvcGVydHlE
ZXNjcmlwdG9yfSksCisJICogb3IgbnVsbCBpZiB1bmluaXRpYWxpemVkLgorCSAqIEBzaW5jZSAz
LjkKKwkgKi8KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0IFBST1BFUlRZX0RFU0NSSVBUT1JT
XzhfMDsKKwkKIAlzdGF0aWMgewogCQlMaXN0IHByb3BlcnR5TGlzdCA9IG5ldyBBcnJheUxpc3Qo
Nik7CiAJCWNyZWF0ZVByb3BlcnR5TGlzdChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmNsYXNz
LCBwcm9wZXJ0eUxpc3QpOwpAQCAtMTIyLDcgKzE0NiwyMCBAQAogCQlhZGRQcm9wZXJ0eShFWFRS
QV9ESU1FTlNJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwogCQlhZGRQcm9wZXJ0eShJTklU
SUFMSVpFUl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKIAkJUFJPUEVSVFlfREVTQ1JJUFRPUlNf
M18wID0gcmVhcFByb3BlcnR5TGlzdChwcm9wZXJ0eUxpc3QpOwotCX0KKwkJCisJCQorCQlwcm9w
ZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0KDgpOworCQljcmVhdGVQcm9wZXJ0eUxpc3QoU2luZ2xl
VmFyaWFibGVEZWNsYXJhdGlvbi5jbGFzcywgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHko
TU9ESUZJRVJTMl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoVFlQRV9Q
Uk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoQU5OT1RBVElPTlNfUFJPUEVS
VFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFZBUkFSR1NfUFJPUEVSVFksIHByb3Bl
cnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KE5BTUVfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJ
CWFkZFByb3BlcnR5KEVYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJ
CWFkZFByb3BlcnR5KElOSVRJQUxJWkVSX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOworCQlQUk9Q
RVJUWV9ERVNDUklQVE9SU184XzAgPSByZWFwUHJvcGVydHlMaXN0KHByb3BlcnR5TGlzdCk7CQkK
KwkKKwkJfQogCiAJLyoqCiAJICogUmV0dXJucyBhIGxpc3Qgb2Ygc3RydWN0dXJhbCBwcm9wZXJ0
eSBkZXNjcmlwdG9ycyBmb3IgdGhpcyBub2RlIHR5cGUuCkBAIC0xMzcsOCArMTc0LDEwIEBACiAJ
cHVibGljIHN0YXRpYyBMaXN0IHByb3BlcnR5RGVzY3JpcHRvcnMoaW50IGFwaUxldmVsKSB7CiAJ
CWlmIChhcGlMZXZlbCA9PSBBU1QuSkxTMl9JTlRFUk5BTCkgewogCQkJcmV0dXJuIFBST1BFUlRZ
X0RFU0NSSVBUT1JTXzJfMDsKLQkJfSBlbHNlIHsKKwkJfSBlbHNlIGlmIChhcGlMZXZlbCA8IEFT
VC5KTFM4KSB7CiAJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlNfM18wOworCQl9IGVsc2Ug
eworCQkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMDsKIAkJfQogCX0KIApAQCAtMTky
LDYgKzIzMSwxMiBAQAogCXByaXZhdGUgRXhwcmVzc2lvbiBvcHRpb25hbEluaXRpYWxpemVyID0g
bnVsbDsKIAogCS8qKgorCSAqIFRoZSB0eXBlIGFubm90YXRpb25zIChlbGVtZW50IHR5cGU6IHtA
bGluayBBbm5vdGF0aW9ufSkuCisJICogQHNpbmNlIDMuOQorCSAqLworCXByb3RlY3RlZCBBU1RO
b2RlLk5vZGVMaXN0IGFubm90YXRpb25zID0gbnVsbDsKKworCS8qKgogCSAqIENyZWF0ZXMgYSBu
ZXcgQVNUIG5vZGUgZm9yIGEgdmFyaWFibGUgZGVjbGFyYXRpb24gb3duZWQgYnkgdGhlIGdpdmVu
CiAJICogQVNULiBCeSBkZWZhdWx0LCB0aGUgdmFyaWFibGUgZGVjbGFyYXRpb24gaGFzOiBubyBt
b2RpZmllcnMsIGFuCiAJICogdW5zcGVjaWZpZWQgKGJ1dCBsZWdhbCkgdHlwZSwgYW4gdW5zcGVj
aWZpZWQgKGJ1dCBsZWdhbCkgdmFyaWFibGUgbmFtZSwKQEAgLTIwNiw2ICsyNTEsOSBAQAogCQlz
dXBlcihhc3QpOwogCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFMzX0lOVEVSTkFMKSB7CiAJ
CQl0aGlzLm1vZGlmaWVycyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KE1PRElGSUVSUzJfUFJPUEVS
VFkpOworCQkJaWYgKGFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgeworCQkJCXRoaXMuYW5ub3Rh
dGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQl9
CiAJCX0KIAl9CiAKQEAgLTMxOSw2ICszNjcsOSBAQAogCQlpZiAocHJvcGVydHkgPT0gTU9ESUZJ
RVJTMl9QUk9QRVJUWSkgewogCQkJcmV0dXJuIG1vZGlmaWVycygpOwogCQl9CisJCWlmIChwcm9w
ZXJ0eSA9PSBBTk5PVEFUSU9OU19QUk9QRVJUWSkgeworCQkJcmV0dXJuIGFubm90YXRpb25zKCk7
CisJCX0KIAkJLy8gYWxsb3cgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB0byBmbGFnIHRoZSBlcnJv
cgogCQlyZXR1cm4gc3VwZXIuaW50ZXJuYWxHZXRDaGlsZExpc3RQcm9wZXJ0eShwcm9wZXJ0eSk7
CiAJfQpAQCAtMzQ3LDYgKzM5OCwxMSBAQAogCQlyZXN1bHQuc2V0TmFtZSgoU2ltcGxlTmFtZSkg
Z2V0TmFtZSgpLmNsb25lKHRhcmdldCkpOwogCQlyZXN1bHQuc2V0SW5pdGlhbGl6ZXIoCiAJCQko
RXhwcmVzc2lvbikgQVNUTm9kZS5jb3B5U3VidHJlZSh0YXJnZXQsIGdldEluaXRpYWxpemVyKCkp
KTsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7CisJCQlyZXN1bHQuYW5u
b3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJ
CQlyZXN1bHQuYW5ub3RhdGlvbnMoKS5hZGRBbGwoCisJCQkJCUFTVE5vZGUuY29weVN1YnRyZWVz
KHRhcmdldCwgYW5ub3RhdGlvbnMoKSkpOworCQl9CiAJCXJldHVybiByZXN1bHQ7CiAJfQogCkBA
IC0zNjcsNiArNDIzLDkgQEAKIAkJCS8vIHZpc2l0IGNoaWxkcmVuIGluIG5vcm1hbCBsZWZ0IHRv
IHJpZ2h0IHJlYWRpbmcgb3JkZXIKIAkJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxT
M19JTlRFUk5BTCkgewogCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMubW9kaWZpZXJz
KTsKKwkJCX0KKwkJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgeworCQkJCWFj
Y2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMuYW5ub3RhdGlvbnMpOwogCQkJfQogCQkJYWNjZXB0
Q2hpbGQodmlzaXRvciwgZ2V0VHlwZSgpKTsKIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldE5h
bWUoKSk7CkBAIC02MTMsMTMgKzY3MiwyOCBAQAogCQl0aGlzLm9wdGlvbmFsSW5pdGlhbGl6ZXIg
PSBpbml0aWFsaXplcjsKIAkJcG9zdFJlcGxhY2VDaGlsZChvbGRDaGlsZCwgaW5pdGlhbGl6ZXIs
SU5JVElBTElaRVJfUFJPUEVSVFkpOwogCX0KLQorCQorCS8qKgorCSAqIFJldHVybnMgdGhlIGxp
dmUgb3JkZXJlZCBsaXN0IG9mIGFubm90YXRpb25zIGZvciB0aGlzIFNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gbm9kZS4KKwkgKgorCSAqIEByZXR1cm4gdGhlIGxpdmUgbGlzdCBvZiBhbm5vdGF0
aW9ucyAoZWxlbWVudCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pCisJICogQGV4Y2VwdGlvbiBV
bnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiBpZiB0aGlzIG9wZXJhdGlvbiBpcyB1c2VkCisJ
ICogICAgICAgICAgICBpbiBhIEpMUzIsIEpMUzMgb3IgSkxTNCBBU1QKKwkgKiBAc2luY2UgMy45
CisJICovCisJcHVibGljIExpc3QgYW5ub3RhdGlvbnMoKSB7CisJCWlmICh0aGlzLmFubm90YXRp
b25zID09IG51bGwpIHsKKwkJCXVuc3VwcG9ydGVkSW4yXzNfNCgpOyAKKwkJfQorCQlyZXR1cm4g
dGhpcy5hbm5vdGF0aW9uczsKKwl9CisJCiAJLyogKG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRo
b2QpCiAJICogTWV0aG9kIGRlY2xhcmVkIG9uIEFTVE5vZGUuCiAJICovCiAJaW50IG1lbVNpemUo
KSB7CiAJCS8vIHRyZWF0IE9wZXJhdG9yIGFzIGZyZWUKLQkJcmV0dXJuIEJBU0VfTk9ERV9TSVpF
ICsgNyAqIDQ7CisJCXJldHVybiBCQVNFX05PREVfU0laRSArIDggKiA0OwogCX0KIAogCS8qIChv
bWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQpAQCAtNjI4LDYgKzcwMiw3IEBACiAJaW50IHRy
ZWVTaXplKCkgewogCQlyZXR1cm4KIAkJCW1lbVNpemUoKQorCQkJKyAodGhpcy5hbm5vdGF0aW9u
cyA9PSBudWxsID8gMCA6IHRoaXMuYW5ub3RhdGlvbnMubGlzdFNpemUoKSkKIAkJCSsgKHRoaXMu
bW9kaWZpZXJzID09IG51bGwgPyAwIDogdGhpcy5tb2RpZmllcnMubGlzdFNpemUoKSkKIAkJCSsg
KHRoaXMudHlwZSA9PSBudWxsID8gMCA6IGdldFR5cGUoKS50cmVlU2l6ZSgpKQogCQkJKyAodGhp
cy52YXJpYWJsZU5hbWUgPT0gbnVsbCA/IDAgOiBnZXROYW1lKCkudHJlZVNpemUoKSkKZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2
YQppbmRleCAxZDA5NTViLi40ZDg3N2RiIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVy
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC0xMzIxLDYgKzEzMjEsMTYg
QEAKIAkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4uLiIpOy8vJE5PTi1OTFMtMSQKIAkJCX0KIAkJ
fQorCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4KSB7CisJCQlMaXN0
IGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9ucygpOworCQkJaWYgKGFubm90YXRpb25zICE9
IG51bGwpIHsKKwkJCQlmb3IgKEl0ZXJhdG9yIGl0ID0gYW5ub3RhdGlvbnMuaXRlcmF0b3IoKTsg
aXQuaGFzTmV4dCgpOyApIHsKKwkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRp
b24pIGl0Lm5leHQoKTsKKwkJCQkJYW5ub3RhdGlvbi5hY2NlcHQodGhpcyk7CisJCQkJCXRoaXMu
YnVmZmVyLmFwcGVuZCgnICcpOworCQkJCX0KKwkJCX0KKwkJfQogCQl0aGlzLmJ1ZmZlci5hcHBl
bmQoIiAiKTsvLyROT04tTkxTLTEkCiAJCW5vZGUuZ2V0TmFtZSgpLmFjY2VwdCh0aGlzKTsKIAkJ
Zm9yIChpbnQgaSA9IDA7IGkgPCBub2RlLmdldEV4dHJhRGltZW5zaW9ucygpOyBpKyspIHsKZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9B
U1RSZXdyaXRlQW5hbHl6ZXIuamF2YQppbmRleCBiMjYxMWExLi5mZGFkNzI1IDEwMDY0NAotLS0g
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUv
ZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJl
d3JpdGVBbmFseXplci5qYXZhCkBAIC0yODI5LDYgKzI4MjksOSBAQAogCQkJcmV3cml0ZU1vZGlm
aWVyczIobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5NT0RJRklFUlMyX1BST1BFUlRZ
LCBwb3MpOwogCQl9CiAJCXBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uLlRZUEVfUFJPUEVSVFkpOworCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlM
ZXZlbCgpID49IEFTVC5KTFM4KSB7CisJCQlwb3MgPSByZXdyaXRlVHlwZUFubm90YXRpb25zKG5v
ZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIG5vZGUu
Z2V0U3RhcnRQb3NpdGlvbigpKTsKKwkJfQogCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgp
ID49IEpMUzNfSU5URVJOQUwpIHsKIAkJCWlmIChpc0NoYW5nZWQobm9kZSwgU2luZ2xlVmFyaWFi
bGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZKSkgewogCQkJCWlmIChnZXROZXdWYWx1ZShu
b2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpLmVxdWFscyhC
b29sZWFuLlRSVUUpKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5l
ci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQppbmRleCAxNGQyYjU5
Li4zM2QyMzQ0IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZh
CisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKQEAgLTc4Nyw2ICs3ODcs
OSBAQAogCQkJdmlzaXRMaXN0KG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uTU9ESUZJ
RVJTMl9QUk9QRVJUWSwgU3RyaW5nLnZhbHVlT2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcsIFN0
cmluZy52YWx1ZU9mKCcgJykpOwogCQl9CiAJCWdldENoaWxkTm9kZShub2RlLCBTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uLlRZUEVfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsKKwkJaWYgKG5vZGUu
Z2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkgeworCQkJdmlzaXRMaXN0KG5vZGUsIFNp
bmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIFN0cmluZy52YWx1
ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignICcpKTsKKwkJfQog
CQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEpMUzNfSU5URVJOQUwpIHsKIAkJCWlm
IChnZXRCb29sZWFuQXR0cmlidXRlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFS
QVJHU19QUk9QRVJUWSkpIHsKIAkJCQl0aGlzLnJlc3VsdC5hcHBlbmQoIi4uLiIpOy8vJE5PTi1O
TFMtMSQ=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>223159</attachid>
            <date>2012-11-05 02:00:00 -0500</date>
            <delta_ts>2012-11-05 22:35:15 -0500</delta_ts>
            <desc>Proposed Patch - Work-in-progress.</desc>
            <filename>Bug-391898--18compiler-Add-DOM-AST-support-for-annot.patch.wip</filename>
            <type>text/plain</type>
            <size>26976</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjEzMjBkZTcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAwIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJcHVibGljIHZvaWQgdGVzdDAwMDEoKSB0aHJv
d3MgSmF2YU1vZGVsRXhjZXB0aW9uIHsKKwkJU3RyaW5nIGNvbnRlbnRzID0KKwkJCSIgICAgQGph
dmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5
cGUuVFlQRV9VU0UpXG4iICsKKwkJCSIgICAgQGludGVyZmFjZSBNYXJrZXIge1xuIiArCisJCQki
ICAgIH1cbiIgKworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglwdWJsaWMgdm9pZCBm
b28oaW50IEBNYXJrZXIuLi4gYXJncykge1xuIiArCisJCQkiCX1cbiIgKworCQkJIiAJcHVibGlj
IHZvaWQgYmFyKEBNYXJrZXIgaW50IEBNYXJrZXIuLi4gYXJncykge1xuIiArCisJCQkiIAl9XG4i
ICsKKwkJCSJ9IjsKKwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVy
dGVyMTgvc3JjL1guamF2YSIsIHRydWUvKnJlc29sdmUqLyk7CisJCUFTVE5vZGUgbm9kZSA9IGJ1
aWxkQVNUKAorCQkJY29udGVudHMsCisJCQl0aGlzLndvcmtpbmdDb3B5KTsKKwkJYXNzZXJ0RXF1
YWxzKCJOb3QgYSBjb21waWxhdGlvbiB1bml0IiwgQVNUTm9kZS5DT01QSUxBVElPTl9VTklULCBu
b2RlLmdldE5vZGVUeXBlKCkpOworCQlDb21waWxhdGlvblVuaXQgY29tcGlsYXRpb25Vbml0ID0g
KENvbXBpbGF0aW9uVW5pdCkgbm9kZTsKKwkJYXNzZXJ0UHJvYmxlbXNTaXplKGNvbXBpbGF0aW9u
VW5pdCwgMCk7CisJCW5vZGUgPSBnZXRBU1ROb2RlKGNvbXBpbGF0aW9uVW5pdCwgMSwgMCk7CisJ
CWFzc2VydFRydWUoIk5vdCBhIG1ldGhvZCBkZWNsYXJhdGlvbiIsIG5vZGUuZ2V0Tm9kZVR5cGUo
KSA9PSBBU1ROb2RlLk1FVEhPRF9ERUNMQVJBVElPTik7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1l
dGhvZERlY2xhcmF0aW9uID0gKE1ldGhvZERlY2xhcmF0aW9uKSBub2RlOworCQlMaXN0IHBhcmFt
ZXRlcnMgPSBtZXRob2REZWNsYXJhdGlvbi5wYXJhbWV0ZXJzKCk7CisJCWFzc2VydEVxdWFscygi
d3Jvbmcgc2l6ZSIsIDEsIHBhcmFtZXRlcnMuc2l6ZSgpKTsKKwkJU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbiBwYXJhbWV0ZXIgPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgcGFyYW1ldGVy
cy5nZXQoMCk7CisJCUxpc3QgYW5ub3RhdGlvbnMgPSBwYXJhbWV0ZXIuYW5ub3RhdGlvbnMoKTsK
KwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBudW1iZXIgb2YgYW5ub3RhdGlvbnMiLCAxLCBhbm5vdGF0
aW9ucy5zaXplKCkpOworCQlBU1ROb2RlIGFubm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlv
bnMuZ2V0KDApOworCQljaGVja1NvdXJjZVJhbmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29u
dGVudHMpOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsMSwxKTsKKwkJYXNz
ZXJ0VHJ1ZSgiTm90IGEgbWV0aG9kIGRlY2xhcmF0aW9uIiwgbm9kZS5nZXROb2RlVHlwZSgpID09
IEFTVE5vZGUuTUVUSE9EX0RFQ0xBUkFUSU9OKTsKKwkJcGFyYW1ldGVycyA9IG1ldGhvZERlY2xh
cmF0aW9uLnBhcmFtZXRlcnMoKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBudW1iZXIgb2YgcGFy
YW1ldGVycyIsIDEsIHBhcmFtZXRlcnMuc2l6ZSgpKTsKKwkJcGFyYW1ldGVyID0gKFNpbmdsZVZh
cmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRlcnMuZ2V0KDApOworCQlhbm5vdGF0aW9ucyA9IHBh
cmFtZXRlci5hbm5vdGF0aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJlciBvZiBh
bm5vdGF0aW9ucyIsIDEsIGFubm90YXRpb25zLnNpemUoKSk7CisJCWFubm90YXRpb24gPSAoQVNU
Tm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOworCQljaGVja1NvdXJjZVJhbmdlKGFubm90YXRpb24s
ICJATWFya2VyIiwgY29udGVudHMpOworCX0KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRl
L2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9kRGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdy
aXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9kRGVjbFRlc3QuamF2YQppbmRleCA2M2Iw
YWE1Li4xZmE4YWQ4IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJl
d3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmlu
Zy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5qYXZhCkBAIC0yODcxLDUgKzI4NzEsMTMzIEBA
CiAJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsKIAl9CiAKKwlw
dWJsaWMgdm9pZCB0ZXN0VmFyQXJnc0Fubm90YXRpb25zKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAK
KwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2Fn
ZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3
IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1
Zi5hcHBlbmQoIkBpbnRlcmZhY2UgTWFya2VyIHtcbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsK
KwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEREIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
cHJpdmF0ZSB2b2lkIGZvbzEoU3RyaW5nIGZvcm1hdCwgT2JqZWN0IEBNYXJrZXIuLi4gYXJncyl7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHJpdmF0
ZSB2b2lkIGZvbzIoT2JqZWN0IC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1c
biIpOworCQlidWYuYXBwZW5kKCIgICAgcHJpdmF0ZSB2b2lkIGZvbzMoT2JqZWN0IEBNYXJrZXIg
Li4uIGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICBwcml2YXRlIHZvaWQgZm9vNChPYmplY3QgQE1hcmtlci4uLiBhcmdzKSB7XG4iKTsgCisJ
CWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHByaXZhdGUgdm9pZCBm
b281KE9iamVjdCAuLi4gYXJncykge1xuIik7IAorCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJ
CWJ1Zi5hcHBlbmQoIiAgICBwcml2YXRlIHZvaWQgZm9vNihPYmplY3QgYXJncykge1xuIik7CisJ
CWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHByaXZhdGUgdm9pZCBm
b283KE9iamVjdCBATWFya2VyIC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1c
biIpOwkJCisJCWJ1Zi5hcHBlbmQoIiAgICBwcml2YXRlIHZvaWQgZm9vOChPYmplY3QgQE1hcmtl
ciAuLi4gYXJncykge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsJCQorCQlidWYuYXBw
ZW5kKCIgICAgcHVibGljIHZvaWQgZm9vOShAQiBAQyBpbnQgQEEuLi4gYSkge1xuIik7CisJCWJ1
Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCUlDb21waWxhdGlv
blVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiREQuamF2YSIsIGJ1Zi50b1N0
cmluZygpLCBmYWxzZSwgbnVsbCk7CisKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0
ZUFTVChBU1QuSkxTOCwgY3UsIGZhbHNlKTsKKwkJQVNUIGFzdD0gYXN0Um9vdC5nZXRBU1QoKTsK
KwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgp
KTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGU9IGZpbmRUeXBlRGVjbGFyYXRpb24oYXN0Um9vdCwg
IkREIik7CisJCQorCQl7CisJCQkvLyBSZW1vdmUgYW5ub3RhdGlvbiBmcm9tIGZpcnN0IG1ldGhv
ZCBhcmdzIC0gYm91bmRhcnkgY29uZGl0aW9uIC0KKwkJCS8vIC0gb25seSBvbmUgYW5ub3RhdGlv
biBzaG91bGQgYmUgcHJlc2VudC4KKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZp
bmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vMSIpOworCQkJU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbiBwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBtZXRob2REZWNsLnBh
cmFtZXRlcnMoKS5nZXQoMSk7CisJCQlyZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSlwYXJhbS5hbm5v
dGF0aW9ucygpLmdldCgwKSwgbnVsbCk7CisJCQkKKwkJCS8vIEFkZCBvbmUgYW5ub3RhdGlvbiB0
byB0aGUgc2Vjb25kIG1ldGhvZCAtIGJvdW5kYXJ5IGNvbmRpdGlvbiAKKwkJCS8vIC0gbm8gYW5u
b3RhdGlvbiBzaG91bGQgYmUgcHJlc2VudAorCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xh
cmF0aW9uKHR5cGUsICJmb28yIik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0
aW9uKSBtZXRob2REZWNsLnBhcmFtZXRlcnMoKS5nZXQoMCk7CisJCQlNYXJrZXJBbm5vdGF0aW9u
IG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJB
bm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJYIikpOworCQkJTGlzdFJl
d3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUocGFyYW0sIFNpbmdsZVZh
cmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUu
aW5zZXJ0Rmlyc3QobWFya2VyQW5ub3RhdGlvbiwgbnVsbCk7CisKKwkJCS8vIFJlbW92ZSB0aGUg
dmFyYXJncyBwcm9wZXJ0eSAtIGFubm90YXRpb24ocykgc2hvdWxkIGRpc2FwcGVhcgorCQkJbWV0
aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb28zIik7CisJCQlwYXJhbSA9
IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBtZXRob2REZWNsLnBhcmFtZXRlcnMoKS5nZXQo
MCk7CisJCQlyZXdyaXRlLnNldChwYXJhbSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJB
UkdTX1BST1BFUlRZLCBCb29sZWFuLkZBTFNFLCBudWxsKTsKKworCQkJLy8gUmVtb3ZlIHRoZSB2
YXJhcmdzIHByb3BlcnR5IC0gYW5ub3RhdGlvbihzKSBzaG91bGQgZGlzYXBwZWFyCisJCQkvLyAt
IGRpZmZlcnMgZnJvbSB0aGUgYWJvdmUgZHVlIHRvIHRoZSBhYnNlbmNlIG9mIGEgYmxhbmsgYmVm
b3JlIC4uLgorCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb280
Iik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBtZXRob2REZWNsLnBh
cmFtZXRlcnMoKS5nZXQoMCk7CisJCQlyZXdyaXRlLnNldChwYXJhbSwgU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZLCBCb29sZWFuLkZBTFNFLCBudWxsKTsKKworCQkJ
Ly8gUmVtb3ZlIHRoZSB2YXJhcmdzIHByb3BlcnR5IC0gRXhpc3RpbmcgZnVuY3Rpb25hbGl0eSB1
bmNoYW5nZWQgd2l0aG91dCBhbm5vdGF0aW9ucworCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERl
Y2xhcmF0aW9uKHR5cGUsICJmb281Iik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uKSBtZXRob2REZWNsLnBhcmFtZXRlcnMoKS5nZXQoMCk7CisJCQlyZXdyaXRlLnNldChw
YXJhbSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZLCBCb29sZWFu
LkZBTFNFLCBudWxsKTsKKworCQkJLy8gQWRkIHRoZSB2YXJhcmdzIHByb3BlcnR5ICBhbmQgYW5u
b3RhdGlvbgorCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb282
Iik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBtZXRob2REZWNsLnBh
cmFtZXRlcnMoKS5nZXQoMCk7CisJCQlyZXdyaXRlLnNldChwYXJhbSwgU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZLCBCb29sZWFuLlRSVUUsIG51bGwpOworCQkJbWFy
a2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90
YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlgiKSk7CisJCQlsaXN0UmV3cml0
ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShwYXJhbSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRGaXJzdChtYXJr
ZXJBbm5vdGF0aW9uLCBudWxsKTsKKworCQkJLy8gUmVwbGFjZSBhbm5vdGF0aW9uCisJCQltZXRo
b2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzciKTsKKwkJCXBhcmFtID0g
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdldCgw
KTsKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQlt
YXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJYIikpOworCQkJ
cmV3cml0ZS5yZXBsYWNlKChBU1ROb2RlKXBhcmFtLmFubm90YXRpb25zKCkuZ2V0KDApLCBtYXJr
ZXJBbm5vdGF0aW9uLCBudWxsKTsKKworCQkJLy8gUmVzZXQgYW5kIFNldCBWYXJhcmdzIC0gb3V0
cHV0IHNob3VsZCBub3QgY2hhbmdlLgorCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0
aW9uKHR5cGUsICJmb284Iik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9u
KSBtZXRob2REZWNsLnBhcmFtZXRlcnMoKS5nZXQoMCk7CisJCQlyZXdyaXRlLnNldChwYXJhbSwg
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZLCBCb29sZWFuLkZBTFNF
LCBudWxsKTsKKwkJCXJld3JpdGUuc2V0KHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9u
LlZBUkFSR1NfUFJPUEVSVFksIEJvb2xlYW4uVFJVRSwgbnVsbCk7CisKKwkJCS8vIEFkZCBtdWx0
aXBsZSAodHdvKSBhbm5vdGF0aW9ucywgcmVtb3ZlIGFuIGV4aXN0aW5nIGFubm90YXRpb24KKwkJ
CW1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vOSIpOworCQkJcGFy
YW0gPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCku
Z2V0KDApOworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsK
KwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlgiKSk7
CisJCQlsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShwYXJhbSwgU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5p
bnNlcnRGaXJzdChtYXJrZXJBbm5vdGF0aW9uLCBudWxsKTsKKwkJCW1hcmtlckFubm90YXRpb249
IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVO
YW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJZIikpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0Rmlyc3Qo
bWFya2VyQW5ub3RhdGlvbiwgbnVsbCk7CisJCQlyZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSlwYXJh
bS5hbm5vdGF0aW9ucygpLmdldCgwKSwgbnVsbCk7CisKKwkJfQorCQlTdHJpbmcgcHJldmlldz0g
ZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKworCQlidWY9IG5ldyBTdHJpbmdCdWZmZXIo
KTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJAaW50
ZXJmYWNlIE1hcmtlciB7XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQo
InB1YmxpYyBjbGFzcyBERCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHByaXZhdGUgdm9pZCBm
b28xKFN0cmluZyBmb3JtYXQsIE9iamVjdCAuLi4gYXJncyl7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHJpdmF0ZSB2b2lkIGZvbzIoT2JqZWN0IEBY
IC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5k
KCIgICAgcHJpdmF0ZSB2b2lkIGZvbzMoT2JqZWN0IGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwcml2YXRlIHZvaWQgZm9vNChPYmplY3Qg
YXJncykge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAg
IHByaXZhdGUgdm9pZCBmb281KE9iamVjdCBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAg
IH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHJpdmF0ZSB2b2lkIGZvbzYoT2JqZWN0IEBYIC4u
LmFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICBwcml2YXRlIHZvaWQgZm9vNyhPYmplY3QgQFggLi4uIGFyZ3MpIHtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgfVxuIik7CQkKKwkJYnVmLmFwcGVuZCgiICAgIHByaXZhdGUgdm9pZCBmb284KE9i
amVjdCBATWFya2VyIC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOwkJ
CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb285KEBCIEBDIGludCBAWSBAWCAuLi4g
YSkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7
CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsJCisJfQogfQpk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3Jl
L2RvbS9BU1RDb252ZXJ0ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKaW5kZXggZWIyNTdkMi4uMDVmN2Q4
NyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9j
b3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCkBAIC03OTUsNiArNzk1
LDEzIEBACiAJCSAqLwogCQlpZiAoaXNWYXJBcmdzKSB7CiAJCQlzZXRUeXBlRm9yU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbih2YXJpYWJsZURlY2wsIHR5cGUsIGV4dHJhRGltZW5zaW9ucyArIDEp
OworCQkJaWYgKCF0eXBlLmFubm90YXRpb25zKCkuaXNFbXB0eSgpKSB7CisJCQkJSXRlcmF0b3Ig
YW5ub3RhdGlvbnMgPSB0eXBlLmFubm90YXRpb25zLml0ZXJhdG9yKCk7CisJCQkJd2hpbGUgKGFu
bm90YXRpb25zLmhhc05leHQoKSkgeworCQkJCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5u
b3RhdGlvbikgYW5ub3RhdGlvbnMubmV4dCgpOworCQkJCQl2YXJpYWJsZURlY2wuYW5ub3RhdGlv
bnMoKS5hZGQoKGFubm90YXRpb24uY2xvbmUodGhpcy5hc3QpKSk7CisJCQkJfQorCQkJfQogCQkJ
aWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7CiAJCQkJdmFyaWFibGVEZWNsLnNldEZsYWdzKHZh
cmlhYmxlRGVjbC5nZXRGbGFncygpIHwgQVNUTm9kZS5NQUxGT1JNRUQpOwogCQkJfQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9B
U1RNYXRjaGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQppbmRleCA2NDE4NmJiLi5jMzA0YTA0IDEwMDY0NAot
LS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FT
VE1hdGNoZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2Uv
amR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQpAQCAtMTg4NSw3ICsxODg1LDggQEAKIAkJICAg
IHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRUeXBlKCksIG8uZ2V0VHlwZSgpKQogCQkJCSYmIHNh
ZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXROYW1lKCksIG8uZ2V0TmFtZSgpKQogCSAJCQkmJiBub2Rl
LmdldEV4dHJhRGltZW5zaW9ucygpID09IG8uZ2V0RXh0cmFEaW1lbnNpb25zKCkKLQkJCQkmJiBz
YWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0SW5pdGlhbGl6ZXIoKSwgby5nZXRJbml0aWFsaXplcigp
KTsKKwkJCQkmJiBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0SW5pdGlhbGl6ZXIoKSwgby5nZXRJ
bml0aWFsaXplcigpKQorCQkJCSYmIChsZXZlbCA+PSBBU1QuSkxTOCkgPyBzYWZlU3VidHJlZUxp
c3RNYXRjaChub2RlLmFubm90YXRpb25zKCksIG8uYW5ub3RhdGlvbnMoKSkgOiB0cnVlOwkJCiAJ
fQogCiAJLyoqCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2NvcmUvZG9tL1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5qYXZhCmluZGV4IDQzNmFmMjEuLjdiNmM1NzQgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFi
bGVEZWNsYXJhdGlvbi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5qYXZhCkBAIC01LDYg
KzUsMTAgQEAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMg
YXZhaWxhYmxlIGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRt
bAogICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3Bl
Y2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNz
IChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBw
dXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3Bl
Y2lmaWNhdGlvbiBvZiB0aGUgSkNQLgorICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJN
IENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKi8KQEAgLTMxLDYgKzM1LDExIEBACiAgKiA8cHJlPgogICogU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjoKICAqICAgIHsgRXh0ZW5kZWRNb2RpZmllciB9IFR5cGUgWyA8Yj4u
Li48L2I+IF0gSWRlbnRpZmllciB7IDxiPls8L2I+PGI+XTwvYj4gfSBbIDxiPj08L2I+IEV4cHJl
c3Npb24gXQorICogPC9wcmU+CisgKiBGb3IgSkxTOCwgdmFyYXJncyBhcmUgYWxsb3dlZCB0byBo
YXZlIG9wdGlvbmFsIGFubm90YXRpb25zLgorICogPHByZT4KKyAqIFNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb246CisgKiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIFtdIFsgPGI+Li4uPC9i
PiBdIElkZW50aWZpZXIgeyA8Yj5bPC9iPjxiPl08L2I+IH0gWyA8Yj49PC9iPiBFeHByZXNzaW9u
IF0KICAqIDwvcHJlPgogICoKICAqIEBzaW5jZSAyLjAKQEAgLTcyLDYgKzgxLDEzIEBACiAJICov
CiAJcHVibGljIHN0YXRpYyBmaW5hbCBTaW1wbGVQcm9wZXJ0eURlc2NyaXB0b3IgVkFSQVJHU19Q
Uk9QRVJUWSA9CiAJCW5ldyBTaW1wbGVQcm9wZXJ0eURlc2NyaXB0b3IoU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5jbGFzcywgInZhcmFyZ3MiLCBib29sZWFuLmNsYXNzLCBNQU5EQVRPUlkpOyAv
LyROT04tTkxTLTEkCisJCisJLyoqCisJICogVGhlICJhbm5vdGF0aW9ucyIgc3RydWN0dXJhbCBw
cm9wZXJ0eSBvZiB0aGlzIG5vZGUgdHlwZSAoY2hpbGQgdHlwZToge0BsaW5rIEFubm90YXRpb259
KS4KKwkgKiBAc2luY2UgMy45CisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBDaGlsZExpc3RQ
cm9wZXJ0eURlc2NyaXB0b3IgQU5OT1RBVElPTlNfUFJPUEVSVFkgPQorCQluZXcgQ2hpbGRMaXN0
UHJvcGVydHlEZXNjcmlwdG9yKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsICJhbm5v
dGF0aW9ucyIsIEFubm90YXRpb24uY2xhc3MsIENZQ0xFX1JJU0spOyAvLyROT04tTkxTLTEkCiAK
IAkvKioKIAkgKiBUaGUgImV4dHJhRGltZW5zaW9ucyIgc3RydWN0dXJhbCBwcm9wZXJ0eSBvZiB0
aGlzIG5vZGUgdHlwZSAodHlwZToge0BsaW5rIEludGVnZXJ9KS4KQEAgLTEwMiw3ICsxMTgsMTUg
QEAKIAkgKiBAc2luY2UgMy4xCiAJICovCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlzdCBQUk9Q
RVJUWV9ERVNDUklQVE9SU18zXzA7Ci0KKwkKKwkvKioKKwkgKiBBIGxpc3Qgb2YgcHJvcGVydHkg
ZGVzY3JpcHRvcnMgKGVsZW1lbnQgdHlwZToKKwkgKiB7QGxpbmsgU3RydWN0dXJhbFByb3BlcnR5
RGVzY3JpcHRvcn0pLAorCSAqIG9yIG51bGwgaWYgdW5pbml0aWFsaXplZC4KKwkgKiBAc2luY2Ug
My45CisJICovCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlzdCBQUk9QRVJUWV9ERVNDUklQVE9S
U184XzA7CisJCiAJc3RhdGljIHsKIAkJTGlzdCBwcm9wZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0
KDYpOwogCQljcmVhdGVQcm9wZXJ0eUxpc3QoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5jbGFz
cywgcHJvcGVydHlMaXN0KTsKQEAgLTEyMiw3ICsxNDYsMjAgQEAKIAkJYWRkUHJvcGVydHkoRVhU
UkFfRElNRU5TSU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKIAkJYWRkUHJvcGVydHkoSU5J
VElBTElaRVJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CiAJCVBST1BFUlRZX0RFU0NSSVBUT1JT
XzNfMCA9IHJlYXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsKLQl9CisJCQorCQkKKwkJcHJv
cGVydHlMaXN0ID0gbmV3IEFycmF5TGlzdCg4KTsKKwkJY3JlYXRlUHJvcGVydHlMaXN0KFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5
KE1PRElGSUVSUzJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFRZUEVf
UFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KEFOTk9UQVRJT05TX1BST1BF
UlRZLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShWQVJBUkdTX1BST1BFUlRZLCBwcm9w
ZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShOQU1FX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwor
CQlhZGRQcm9wZXJ0eShFWFRSQV9ESU1FTlNJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwor
CQlhZGRQcm9wZXJ0eShJTklUSUFMSVpFUl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJUFJP
UEVSVFlfREVTQ1JJUFRPUlNfOF8wID0gcmVhcFByb3BlcnR5TGlzdChwcm9wZXJ0eUxpc3QpOwkJ
CisJCisJCX0KIAogCS8qKgogCSAqIFJldHVybnMgYSBsaXN0IG9mIHN0cnVjdHVyYWwgcHJvcGVy
dHkgZGVzY3JpcHRvcnMgZm9yIHRoaXMgbm9kZSB0eXBlLgpAQCAtMTM3LDggKzE3NCwxMCBAQAog
CXB1YmxpYyBzdGF0aWMgTGlzdCBwcm9wZXJ0eURlc2NyaXB0b3JzKGludCBhcGlMZXZlbCkgewog
CQlpZiAoYXBpTGV2ZWwgPT0gQVNULkpMUzJfSU5URVJOQUwpIHsKIAkJCXJldHVybiBQUk9QRVJU
WV9ERVNDUklQVE9SU18yXzA7Ci0JCX0gZWxzZSB7CisJCX0gZWxzZSBpZiAoYXBpTGV2ZWwgPCBB
U1QuSkxTOCkgewogCQkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzNfMDsKKwkJfSBlbHNl
IHsKKwkJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SU184XzA7CiAJCX0KIAl9CiAKQEAgLTE5
Miw2ICsyMzEsMTIgQEAKIAlwcml2YXRlIEV4cHJlc3Npb24gb3B0aW9uYWxJbml0aWFsaXplciA9
IG51bGw7CiAKIAkvKioKKwkgKiBUaGUgdHlwZSBhbm5vdGF0aW9ucyAoZWxlbWVudCB0eXBlOiB7
QGxpbmsgQW5ub3RhdGlvbn0pLgorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwcm90ZWN0ZWQgQVNU
Tm9kZS5Ob2RlTGlzdCBhbm5vdGF0aW9ucyA9IG51bGw7CisKKwkvKioKIAkgKiBDcmVhdGVzIGEg
bmV3IEFTVCBub2RlIGZvciBhIHZhcmlhYmxlIGRlY2xhcmF0aW9uIG93bmVkIGJ5IHRoZSBnaXZl
bgogCSAqIEFTVC4gQnkgZGVmYXVsdCwgdGhlIHZhcmlhYmxlIGRlY2xhcmF0aW9uIGhhczogbm8g
bW9kaWZpZXJzLCBhbgogCSAqIHVuc3BlY2lmaWVkIChidXQgbGVnYWwpIHR5cGUsIGFuIHVuc3Bl
Y2lmaWVkIChidXQgbGVnYWwpIHZhcmlhYmxlIG5hbWUsCkBAIC0yMDYsNiArMjUxLDkgQEAKIAkJ
c3VwZXIoYXN0KTsKIAkJaWYgKGFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTM19JTlRFUk5BTCkgewog
CQkJdGhpcy5tb2RpZmllcnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChNT0RJRklFUlMyX1BST1BF
UlRZKTsKKwkJCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKKwkJCQl0aGlzLmFubm90
YXRpb25zID0gbmV3IEFTVE5vZGUuTm9kZUxpc3QoQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJ
fQogCQl9CiAJfQogCkBAIC0zMTksNiArMzY3LDkgQEAKIAkJaWYgKHByb3BlcnR5ID09IE1PRElG
SUVSUzJfUFJPUEVSVFkpIHsKIAkJCXJldHVybiBtb2RpZmllcnMoKTsKIAkJfQorCQlpZiAocHJv
cGVydHkgPT0gQU5OT1RBVElPTlNfUFJPUEVSVFkpIHsKKwkJCXJldHVybiBhbm5vdGF0aW9ucygp
OworCQl9CiAJCS8vIGFsbG93IGRlZmF1bHQgaW1wbGVtZW50YXRpb24gdG8gZmxhZyB0aGUgZXJy
b3IKIAkJcmV0dXJuIHN1cGVyLmludGVybmFsR2V0Q2hpbGRMaXN0UHJvcGVydHkocHJvcGVydHkp
OwogCX0KQEAgLTM0Nyw2ICszOTgsMTEgQEAKIAkJcmVzdWx0LnNldE5hbWUoKFNpbXBsZU5hbWUp
IGdldE5hbWUoKS5jbG9uZSh0YXJnZXQpKTsKIAkJcmVzdWx0LnNldEluaXRpYWxpemVyKAogCQkJ
KEV4cHJlc3Npb24pIEFTVE5vZGUuY29weVN1YnRyZWUodGFyZ2V0LCBnZXRJbml0aWFsaXplcigp
KSk7CisJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgeworCQkJcmVzdWx0LmFu
bm90YXRpb25zID0gbmV3IEFTVE5vZGUuTm9kZUxpc3QoQU5OT1RBVElPTlNfUFJPUEVSVFkpOwor
CQkJcmVzdWx0LmFubm90YXRpb25zKCkuYWRkQWxsKAorCQkJCQlBU1ROb2RlLmNvcHlTdWJ0cmVl
cyh0YXJnZXQsIGFubm90YXRpb25zKCkpKTsKKwkJfQogCQlyZXR1cm4gcmVzdWx0OwogCX0KIApA
QCAtMzY5LDYgKzQyNSw5IEBACiAJCQkJYWNjZXB0Q2hpbGRyZW4odmlzaXRvciwgdGhpcy5tb2Rp
ZmllcnMpOwogCQkJfQogCQkJYWNjZXB0Q2hpbGQodmlzaXRvciwgZ2V0VHlwZSgpKTsKKwkJCWlm
IChpc1ZhcmFyZ3MoKSAmJiB0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgeworCQkJCWFj
Y2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMuYW5ub3RhdGlvbnMpOworCQkJfQogCQkJYWNjZXB0
Q2hpbGQodmlzaXRvciwgZ2V0TmFtZSgpKTsKIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldElu
aXRpYWxpemVyKCkpOwogCQl9CkBAIC02MTMsMTMgKzY3MiwyOCBAQAogCQl0aGlzLm9wdGlvbmFs
SW5pdGlhbGl6ZXIgPSBpbml0aWFsaXplcjsKIAkJcG9zdFJlcGxhY2VDaGlsZChvbGRDaGlsZCwg
aW5pdGlhbGl6ZXIsSU5JVElBTElaRVJfUFJPUEVSVFkpOwogCX0KLQorCQorCS8qKgorCSAqIFJl
dHVybnMgdGhlIGxpdmUgb3JkZXJlZCBsaXN0IG9mIGFubm90YXRpb25zIGZvciB0aGlzIFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb24gbm9kZS4KKwkgKgorCSAqIEByZXR1cm4gdGhlIGxpdmUgbGlz
dCBvZiBhbm5vdGF0aW9ucyAoZWxlbWVudCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pCisJICog
QGV4Y2VwdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiBpZiB0aGlzIG9wZXJhdGlv
biBpcyB1c2VkCisJICogICAgICAgICAgICBpbiBhIEpMUzIsIEpMUzMgb3IgSkxTNCBBU1QKKwkg
KiBAc2luY2UgMy45CisJICovCisJcHVibGljIExpc3QgYW5ub3RhdGlvbnMoKSB7CisJCWlmICh0
aGlzLmFubm90YXRpb25zID09IG51bGwpIHsKKwkJCXVuc3VwcG9ydGVkSW4yXzNfNCgpOyAKKwkJ
fQorCQlyZXR1cm4gdGhpcy5hbm5vdGF0aW9uczsKKwl9CisJCiAJLyogKG9taXQgamF2YWRvYyBm
b3IgdGhpcyBtZXRob2QpCiAJICogTWV0aG9kIGRlY2xhcmVkIG9uIEFTVE5vZGUuCiAJICovCiAJ
aW50IG1lbVNpemUoKSB7CiAJCS8vIHRyZWF0IE9wZXJhdG9yIGFzIGZyZWUKLQkJcmV0dXJuIEJB
U0VfTk9ERV9TSVpFICsgNyAqIDQ7CisJCXJldHVybiBCQVNFX05PREVfU0laRSArIDggKiA0Owog
CX0KIAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQpAQCAtNjI4LDYgKzcwMiw3
IEBACiAJaW50IHRyZWVTaXplKCkgewogCQlyZXR1cm4KIAkJCW1lbVNpemUoKQorCQkJKyAodGhp
cy5hbm5vdGF0aW9ucyA9PSBudWxsID8gMCA6IHRoaXMuYW5ub3RhdGlvbnMubGlzdFNpemUoKSkK
IAkJCSsgKHRoaXMubW9kaWZpZXJzID09IG51bGwgPyAwIDogdGhpcy5tb2RpZmllcnMubGlzdFNp
emUoKSkKIAkJCSsgKHRoaXMudHlwZSA9PSBudWxsID8gMCA6IGdldFR5cGUoKS50cmVlU2l6ZSgp
KQogCQkJKyAodGhpcy52YXJpYWJsZU5hbWUgPT0gbnVsbCA/IDAgOiBnZXROYW1lKCkudHJlZVNp
emUoKSkKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RG
bGF0dGVuZXIuamF2YQppbmRleCAxZDA5NTViLi4xMjBkZjdlIDEwMDY0NAotLS0gYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZl
QVNURmxhdHRlbmVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC0xMzE4
LDYgKzEzMTgsMTYgQEAKIAkJbm9kZS5nZXRUeXBlKCkuYWNjZXB0KHRoaXMpOwogCQlpZiAobm9k
ZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEpMUzMpIHsKIAkJCWlmIChub2RlLmlzVmFyYXJncygp
KSB7CisJCQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkgeworCQkJ
CQlMaXN0IGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9ucygpOworCQkJCQlpZiAoYW5ub3Rh
dGlvbnMgIT0gbnVsbCkgeworCQkJCQkJZm9yIChJdGVyYXRvciBpdCA9IGFubm90YXRpb25zLml0
ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTsgKSB7CisJCQkJCQkJdGhpcy5idWZmZXIuYXBwZW5kKCcg
Jyk7CisJCQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGl0Lm5leHQo
KTsKKwkJCQkJCQlhbm5vdGF0aW9uLmFjY2VwdCh0aGlzKTsKKwkJCQkJCX0KKwkJCQkJfQorCQkJ
CX0KIAkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4uLiIpOy8vJE5PTi1OTFMtMSQKIAkJCX0KIAkJ
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhCmluZGV4IGIyNjExYTEuLjVhOGQ0N2YgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YQorKysgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUv
QVNUUmV3cml0ZUFuYWx5emVyLmphdmEKQEAgLTE1NDQsNiArMTU0NCw0OCBAQAogCQlyZXR1cm4g
ZW5kUG9zOwogCX0KIAorCXByaXZhdGUgaW50IHJld3JpdGVWYXJhcmdzQW5ub3RhdGlvbnMoQVNU
Tm9kZSBub2RlLCBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgcHJvcGVydHksIGludCBwb3Mp
IHsKKwkJUmV3cml0ZUV2ZW50IGV2ZW50PSBnZXRFdmVudChub2RlLCBwcm9wZXJ0eSk7CisJCWlm
IChldmVudCA9PSBudWxsIHx8IGV2ZW50LmdldENoYW5nZUtpbmQoKSA9PSBSZXdyaXRlRXZlbnQu
VU5DSEFOR0VEKSB7CisJCQlyZXR1cm4gZG9WaXNpdChub2RlLCBwcm9wZXJ0eSwgcG9zKTsKKwkJ
fQorCQlSZXdyaXRlRXZlbnRbXSBjaGlsZHJlbj0gZXZlbnQuZ2V0Q2hpbGRyZW4oKTsKKwkJYm9v
bGVhbiBpc0FsbEluc2VydD0gaXNBbGxPZktpbmQoY2hpbGRyZW4sIFJld3JpdGVFdmVudC5JTlNF
UlRFRCk7CisJCWJvb2xlYW4gaXNBbGxSZW1vdmU9IGlzQWxsT2ZLaW5kKGNoaWxkcmVuLCBSZXdy
aXRlRXZlbnQuUkVNT1ZFRCk7CisJCWlmIChpc0FsbEluc2VydCB8fCBpc0FsbFJlbW92ZSkgewor
CQkJLy8gdXBkYXRlIHBvcworCQkJdHJ5IHsKKwkJCQlwb3M9IGdldFNjYW5uZXIoKS5nZXROZXh0
U3RhcnRPZmZzZXQocG9zLCBmYWxzZSk7CisJCQl9IGNhdGNoIChDb3JlRXhjZXB0aW9uIGUpIHsK
KwkJCQloYW5kbGVFeGNlcHRpb24oZSk7CisJCQl9CisJCX0KKworCQlQcmVmaXggZm9ybWF0dGVy
UHJlZml4OworCQlmb3JtYXR0ZXJQcmVmaXg9IHRoaXMuZm9ybWF0dGVyLlZBUkFSR1NfQU5OT1RB
VElPTl9TRVBBUkFUSU9OOworCQlpbnQgZW5kUG9zPSBuZXcgTW9kaWZpZXJSZXdyaXRlcihmb3Jt
YXR0ZXJQcmVmaXgpLnJld3JpdGVMaXN0KG5vZGUsIHByb3BlcnR5LCBwb3MsIFV0aWwuRU1QVFlf
U1RSSU5HLCAiICIpOyAvLyROT04tTkxTLTEkIAorCQl0cnkgeworCQkJaW50IG5leHRQb3M9IGdl
dFNjYW5uZXIoKS5nZXROZXh0U3RhcnRPZmZzZXQoZW5kUG9zLCBmYWxzZSk7CisKKwkJCWJvb2xl
YW4gbGFzdFVuY2hhbmdlZD0gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0uZ2V0Q2hhbmdl
S2luZCgpICE9IFJld3JpdGVFdmVudC5VTkNIQU5HRUQ7CisJCQlpZiAoaXNBbGxSZW1vdmUpIHsK
KwkJCWRvVGV4dFJlbW92ZShlbmRQb3MsIG5leHRQb3MgLSBlbmRQb3MsIGdldEVkaXRHcm91cChj
aGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSkpOworCQkJCXJldHVybiBuZXh0UG9zOworCQkJ
fSBlbHNlIGlmIChpc0FsbEluc2VydCB8fCAobmV4dFBvcyA9PSBlbmRQb3MgJiYgbGFzdFVuY2hh
bmdlZCkpIHsgLy8gc2VlIGJ1ZyAxNjU2NTQKKwkJCQlSZXdyaXRlRXZlbnQgbGFzdENoaWxkPSBj
aGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXTsKKwkJCQlTdHJpbmcgc2VwYXJhdG9yOworCQkJ
CWlmIChsYXN0Q2hpbGQuZ2V0TmV3VmFsdWUoKSBpbnN0YW5jZW9mIEFubm90YXRpb24pIHsKKwkJ
CQkJc2VwYXJhdG9yPSBmb3JtYXR0ZXJQcmVmaXguZ2V0UHJlZml4KGdldEluZGVudChwb3MpKTsK
KwkJCQl9IGVsc2UgeworCQkJCQlzZXBhcmF0b3I9IFN0cmluZy52YWx1ZU9mKCcgJyk7CisJCQkJ
fQorCQkJCWRvVGV4dEluc2VydChlbmRQb3MsIHNlcGFyYXRvciwgZ2V0RWRpdEdyb3VwKGxhc3RD
aGlsZCkpOworCQkJfQorCQl9IGNhdGNoIChDb3JlRXhjZXB0aW9uIGUpIHsKKwkJCWhhbmRsZUV4
Y2VwdGlvbihlKTsKKwkJfQorCQlyZXR1cm4gZW5kUG9zOworCX0KIAogCXByaXZhdGUgdm9pZCBy
ZXBsYWNlT3BlcmF0aW9uKGludCBwb3NCZWZvcmVPcGVyYXRpb24sIFN0cmluZyBuZXdPcGVyYXRp
b24sIFRleHRFZGl0R3JvdXAgZWRpdEdyb3VwKSB7CiAJCXRyeSB7CkBAIC0yODI4LDE0ICsyODcw
LDI0IEBACiAJCX0gZWxzZSB7CiAJCQlyZXdyaXRlTW9kaWZpZXJzMihub2RlLCBTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uLk1PRElGSUVSUzJfUFJPUEVSVFksIHBvcyk7CiAJCX0KLQkJcG9zPSBy
ZXdyaXRlUmVxdWlyZWROb2RlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVFlQRV9Q
Uk9QRVJUWSk7CisJCXBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBTaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uLlRZUEVfUFJPUEVSVFkpOwkJCiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxl
dmVsKCkgPj0gSkxTM19JTlRFUk5BTCkgewogCQkJaWYgKGlzQ2hhbmdlZChub2RlLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpKSB7CiAJCQkJaWYgKGdldE5ld1Zh
bHVlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSkuZXF1
YWxzKEJvb2xlYW4uVFJVRSkpIHsKKwkJCQkJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1
Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCQkJCQlwb3MgPSByZXdyaXRlVmFyYXJnc0Fubm90
YXRpb25zKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVS
VFksIHBvcyk7CiAJCQkJCWRvVGV4dEluc2VydChwb3MsICIuLi4iLCBnZXRFZGl0R3JvdXAobm9k
ZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZKSk7IC8vJE5PTi1O
TFMtMSQKIAkJCQl9IGVsc2UgewogCQkJCQl0cnkgewogCQkJCQkJaW50IGVsbGlwc2lzRW5kPSBn
ZXRTY2FubmVyKCkuZ2V0TmV4dEVuZE9mZnNldChwb3MsIHRydWUpOworCQkJCQkJLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCQkJCQkJaWYg
KG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCAmJiBub2RlLmFubm90YXRpb25z
KCkuc2l6ZSgpID4gMCApIHsKKwkJCQkJCQlpbnQgYW5ub3RhdGlvblN0YXJ0UG9zaXRpb24gPSBu
b2RlLmdldFR5cGUoKS5nZXRTdGFydFBvc2l0aW9uKCkgKyBub2RlLmdldFR5cGUoKS5nZXRMZW5n
dGgoKTsKKwkJCQkJCQlpbnQgYW5ub3RhdGlvbkVuZFBvc2l0aW9uID0gYW5ub3RhdGlvblN0YXJ0
UG9zaXRpb24gKyBub2RlLmFubm90YXRpb25zKCkudG9TdHJpbmcoKS5sZW5ndGgoKSAtIDE7CisJ
CQkJCQkJZWxsaXBzaXNFbmQgPSBnZXRTY2FubmVyKCkuZ2V0TmV4dEVuZE9mZnNldChhbm5vdGF0
aW9uRW5kUG9zaXRpb24sIHRydWUpOworCQkJCQkJfSBlbHNlIHsKKwkJCQkJCQllbGxpcHNpc0Vu
ZD0gZ2V0U2Nhbm5lcigpLmdldE5leHRFbmRPZmZzZXQocG9zLCB0cnVlKTsKKwkJCQkJCX0JCQkJ
CQkJCiAJCQkJCQlkb1RleHRSZW1vdmUocG9zLCBlbGxpcHNpc0VuZCAtIHBvcywgZ2V0RWRpdEdy
b3VwKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSkpOwog
CQkJCQl9IGNhdGNoIChDb3JlRXhjZXB0aW9uIGUpIHsKIAkJCQkJCWhhbmRsZUV4Y2VwdGlvbihl
KTsKQEAgLTI4NDQsNiArMjg5NiwxMiBAQAogCQkJfQogCQkJaWYgKCFub2RlLmlzVmFyYXJncygp
KSB7CiAJCQkJZW5zdXJlU3BhY2VBZnRlclJlcGxhY2Uobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbi5UWVBFX1BST1BFUlRZKTsKKwkJCX0gZWxzZSB7Ly8gaHR0cHM6Ly9idWdzLmVjbGlw
c2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCQkJCWlmIChub2RlLmdldEFTVCgp
LmFwaUxldmVsKCkgPj0gQVNULkpMUzggJiYgIWlzQ2hhbmdlZChub2RlLCBTaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpCisJCQkJCQkmJiBub2RlLmlzVmFyYXJncygp
KSB7CisJCQkJCWludCBhbm5vdGF0aW9uU3RhcnRQb3NpdGlvbiA9IG5vZGUuZ2V0VHlwZSgpLmdl
dFN0YXJ0UG9zaXRpb24oKSArIG5vZGUuZ2V0VHlwZSgpLmdldExlbmd0aCgpOworCQkJCQlwb3Mg
PSByZXdyaXRlVmFyYXJnc0Fubm90YXRpb25zKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRp
b24uQU5OT1RBVElPTlNfUFJPUEVSVFksIGFubm90YXRpb25TdGFydFBvc2l0aW9uKTsKKwkJCQl9
CiAJCQl9CiAJCX0gZWxzZSB7CiAJCQllbnN1cmVTcGFjZUFmdGVyUmVwbGFjZShub2RlLCBTaW5n
bGVWYXJpYWJsZURlY2xhcmF0aW9uLlRZUEVfUFJPUEVSVFkpOwpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRl
bmVyLmphdmEKaW5kZXggMTRkMmI1OS4uZWU5NjFiMyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FT
VFJld3JpdGVGbGF0dGVuZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5l
ci5qYXZhCkBAIC03ODcsNiArNzg3LDEwIEBACiAJCQl2aXNpdExpc3Qobm9kZSwgU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbi5NT0RJRklFUlMyX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZignICcp
LCBVdGlsLkVNUFRZX1NUUklORywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7CiAJCX0KIAkJZ2V0Q2hp
bGROb2RlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVFlQRV9QUk9QRVJUWSkuYWNj
ZXB0KHRoaXMpOworCQkKKwkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxT
OCAgJiYgbm9kZS5pc1ZhcmFyZ3MoKSkgeworCQkJdmlzaXRMaXN0KG5vZGUsIFNpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcgJyks
IFV0aWwuRU1QVFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignICcpKTsKKwkJfQogCQlpZiAobm9k
ZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEpMUzNfSU5URVJOQUwpIHsKIAkJCWlmIChnZXRCb29s
ZWFuQXR0cmlidXRlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9Q
RVJUWSkpIHsKIAkJCQl0aGlzLnJlc3VsdC5hcHBlbmQoIi4uLiIpOy8vJE5PTi1OTFMtMSQKZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRm9ybWF0dGVyLmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUv
QVNUUmV3cml0ZUZvcm1hdHRlci5qYXZhCmluZGV4IDhlMzlmN2QuLjU4YWUwOTAgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29y
ZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRm9ybWF0dGVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FT
VFJld3JpdGVGb3JtYXR0ZXIuamF2YQpAQCAtNTUwLDYgKzU1MCw3IEBACiAJcHVibGljIGZpbmFs
IFByZWZpeCBGSVJTVF9FTlVNX0NPTlNUPSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgiZW51bSBFIHsg
WDt9IiwgInsgWCIgLCBDb2RlRm9ybWF0dGVyLktfQ09NUElMQVRJT05fVU5JVCk7IC8vJE5PTi1O
TFMtMSQgLy8kTk9OLU5MUy0yJAogCXB1YmxpYyBmaW5hbCBQcmVmaXggQU5OT1RBVElPTl9TRVBB
UkFUSU9OPSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgiQEEgQEIgY2xhc3MgQyB7fSIsICJBIEAiICwg
Q29kZUZvcm1hdHRlci5LX0NPTVBJTEFUSU9OX1VOSVQpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1O
TFMtMiQKIAlwdWJsaWMgZmluYWwgUHJlZml4IFBBUkFNX0FOTk9UQVRJT05fU0VQQVJBVElPTj0g
bmV3IEZvcm1hdHRpbmdQcmVmaXgoInZvaWQgZm9vKEBBIEBCIHApIHsgfSIsICJBIEAiICwgQ29k
ZUZvcm1hdHRlci5LX0NMQVNTX0JPRFlfREVDTEFSQVRJT05TKTsgLy8kTk9OLU5MUy0xJCAvLyRO
T04tTkxTLTIkCisJcHVibGljIGZpbmFsIFByZWZpeCBWQVJBUkdTX0FOTk9UQVRJT05fU0VQQVJB
VElPTj0gbmV3IEZvcm1hdHRpbmdQcmVmaXgoInZvaWQgZm9vKHAgQEEgQEIuLi4pIHsgfSIsICJB
IEAiICwgQ29kZUZvcm1hdHRlci5LX0NMQVNTX0JPRFlfREVDTEFSQVRJT05TKTsgLy8kTk9OLU5M
Uy0xJCAvLyROT04tTkxTLTIkCiAJcHVibGljIGZpbmFsIFByZWZpeCBUUllfUkVTT1VSQ0VTID0g
bmV3IEZvcm1hdHRpbmdQcmVmaXgoInRyeSAoQSBhID0gbmV3IEEoKTsgQiBiID0gbmV3IEIoKSkg
e30iLCAiOyBCIiAsIENvZGVGb3JtYXR0ZXIuS19TVEFURU1FTlRTKTsgLy8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCiAJcHVibGljIGZpbmFsIFByZWZpeCBUUllfUkVTT1VSQ0VTX1BBUkVOID0g
bmV3IEZvcm1hdHRpbmdQcmVmaXgoInRyeSAoQSBhID0gbmV3IEEoKTsgQiBiID0gbmV3IEIoKSkg
e30iLCAieSAoIiAsIENvZGVGb3JtYXR0ZXIuS19TVEFURU1FTlRTKTsgLy8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCiAJ
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>223210</attachid>
            <date>2012-11-05 22:35:00 -0500</date>
            <delta_ts>2012-12-12 01:18:59 -0500</delta_ts>
            <desc>Proposed Patch - Work-in-progress.</desc>
            <filename>Bug-391898--18compiler-Add-DOM-AST-support-for-annot.patch.wip</filename>
            <type>text/plain</type>
            <size>31455</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjllZjc4MGEKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAxIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRlc3QwMDAxKCkgdGhy
b3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIgl9XG4iICsKKwkJCSIgCXB1Ymxp
YyB2b2lkIGJhcihATWFya2VyIGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIiAJfVxu
IiArCisJCQkifSI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZl
cnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBi
dWlsZEFTVCgKKwkJCWNvbnRlbnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVx
dWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwg
bm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9
IChDb21waWxhdGlvblVuaXQpIG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlv
blVuaXQsIDApOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOwor
CQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBl
KCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbWV0aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMo
Indyb25nIHNpemUiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gcGFyYW1ldGVyID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRl
cnMuZ2V0KDApOworCQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLmFubm90YXRpb25zKCk7
CisJCWFzc2VydEVxdWFscygiV3JvbmcgbnVtYmVyIG9mIGFubm90YXRpb25zIiwgMSwgYW5ub3Rh
dGlvbnMuc2l6ZSgpKTsKKwkJQVNUTm9kZSBhbm5vdGF0aW9uID0gKEFTVE5vZGUpIGFubm90YXRp
b25zLmdldCgwKTsKKwkJY2hlY2tTb3VyY2VSYW5nZShhbm5vdGF0aW9uLCAiQE1hcmtlciIsIGNv
bnRlbnRzKTsKKwkJbm9kZSA9IGdldEFTVE5vZGUoY29tcGlsYXRpb25Vbml0LDEsMSk7CisJCWFz
c2VydFRydWUoIk5vdCBhIG1ldGhvZCBkZWNsYXJhdGlvbiIsIG5vZGUuZ2V0Tm9kZVR5cGUoKSA9
PSBBU1ROb2RlLk1FVEhPRF9ERUNMQVJBVElPTik7CisJCXBhcmFtZXRlcnMgPSBtZXRob2REZWNs
YXJhdGlvbi5wYXJhbWV0ZXJzKCk7CisJCWFzc2VydEVxdWFscygiV3JvbmcgbnVtYmVyIG9mIHBh
cmFtZXRlcnMiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCXBhcmFtZXRlciA9IChTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uKSBwYXJhbWV0ZXJzLmdldCgwKTsKKwkJYW5ub3RhdGlvbnMgPSBw
YXJhbWV0ZXIuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBudW1iZXIgb2Yg
YW5ub3RhdGlvbnMiLCAxLCBhbm5vdGF0aW9ucy5zaXplKCkpOworCQlhbm5vdGF0aW9uID0gKEFT
VE5vZGUpIGFubm90YXRpb25zLmdldCgwKTsKKwkJY2hlY2tTb3VyY2VSYW5nZShhbm5vdGF0aW9u
LCAiQE1hcmtlciIsIGNvbnRlbnRzKTsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FT
VE1hdGNoZXJUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEKaW5kZXgg
MzJhNDQ0Ny4uODJiYmQ1OSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBz
ZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YQpAQCAtMzksNiArMzksOCBA
QAogCQkJaWYgKG1ldGhvZHNbaV0uZ2V0TmFtZSgpLnN0YXJ0c1dpdGgoInRlc3QiKSkgeyAvLyRO
T04tTkxTLTEkCiAJCQkJc3VpdGUuYWRkVGVzdChuZXcgQVNUTWF0Y2hlclRlc3QobWV0aG9kc1tp
XS5nZXROYW1lKCksIEFTVC5KTFMyKSk7CiAJCQkJc3VpdGUuYWRkVGVzdChuZXcgQVNUTWF0Y2hl
clRlc3QobWV0aG9kc1tpXS5nZXROYW1lKCksIEpMUzNfSU5URVJOQUwpKTsKKwkJCQkvLyBodHRw
czovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQkJc3Vp
dGUuYWRkVGVzdChuZXcgQVNUTWF0Y2hlclRlc3QobWV0aG9kc1tpXS5nZXROYW1lKCksIEFTVC5K
TFM4KSk7CiAJCQl9CiAJCX0KIAkJcmV0dXJuIHN1aXRlOwpAQCAtMTMyMCw0ICsxMzIyLDE2IEBA
CiAJCWJhc2ljTWF0Y2goeDEpOwogCX0KIAorCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9i
dWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwlwdWJsaWMgdm9pZCB0ZXN0U2luZ2xlVmFyaWFi
bGVEZWNsYXJhdGlvblZhcmFyZ3NBbm5vdGF0aW9uKCkgeworCQlpZiAodGhpcy5hc3QuYXBpTGV2
ZWwoKSA8IEFTVC5KTFM4KSB7CisJCQlyZXR1cm47CisJCX0KKwkJU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbiB4MSA9IHRoaXMuYXN0Lm5ld1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24oKTsKKwkJ
eDEuc2V0VHlwZSh0aGlzLlQxKTsKKwkJeDEuc2V0TmFtZSh0aGlzLk4xKTsKKwkJeDEuc2V0VmFy
YXJncyh0cnVlKTsKKwkJeDEuYW5ub3RhdGlvbnMoKS5hZGQodGhpcy5BTk8xKTsKKwkJYmFzaWNN
YXRjaCh4MSk7CisJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0ZXJUZXN0
cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNl
L2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0ZXJUZXN0cy5qYXZhCmluZGV4IGUwZTExYzEu
LjRhMzQ5MTMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3Ny
Yy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vUnVuQ29udmVydGVyVGVzdHMuamF2YQor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0
L2NvcmUvdGVzdHMvZG9tL1J1bkNvbnZlcnRlclRlc3RzLmphdmEKQEAgLTQ2LDYgKzQ2LDcgQEAK
IAkJQVNUQ29udmVydGVyMTVKTFM0VGVzdC5jbGFzcywKIAkJQVNUQ29udmVydGVyMTVKTFM4VGVz
dC5jbGFzcywKIAkJVHlwZUFubm90YXRpb25zQ29udmVydGVyVGVzdC5jbGFzcywKKwkJQVNUQ29u
dmVydGVyMThUZXN0LmNsYXNzLAogCX07CiB9CiBwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2Vj
bGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhv
ZERlY2xUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3Jn
L2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01l
dGhvZERlY2xUZXN0LmphdmEKaW5kZXggNjNiMGFhNS4uZDljYTVhMiAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5qYXZhCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9kRGVjbFRlc3Qu
amF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmln
aHQgKGMpIDIwMDAsIDIwMTAgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmln
aHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmln
aHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxz
CiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1
YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9u
LCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0yMzUwLDkgKzIzNTAsOSBAQAogCQlTdHJpbmdCdWZm
ZXIgYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7
XG4iKTsKIAkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEREIHtcbiIpOwotCQlidWYuYXBwZW5k
KCIgICAgcHJpdmF0ZSB2b2lkIGZvbzEoU3RyaW5nIGZvcm1hdCwgT2JqZWN0Li4uIGFyZ3Mpe1xu
Iik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28xKFN0cmluZyBmb3JtYXQsIE9i
amVjdC4uLiBhcmdzKXtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgfVxuIik7Ci0JCWJ1Zi5hcHBl
bmQoIiAgICBwcml2YXRlIHZvaWQgZm9vMihTdHJpbmcgZm9ybWF0LCBPYmplY3RbXSBhcmdzKSB7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzIoU3RyaW5nIGZvcm1hdCwg
T2JqZWN0W10gYXJncykge1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKIAkJYnVmLmFw
cGVuZCgifVxuIik7CiAJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0
aW9uVW5pdCgiREQuamF2YSIsIGJ1Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7CkBAIC0yMzc4
LDkgKzIzNzgsOSBAQAogCQlidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKIAkJYnVmLmFwcGVuZCgi
cGFja2FnZSB0ZXN0MTtcbiIpOwogCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgREQge1xuIik7
Ci0JCWJ1Zi5hcHBlbmQoIiAgICBwcml2YXRlIHZvaWQgZm9vMShTdHJpbmcgZm9ybWF0LCBPYmpl
Y3QgYXJncyl7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzEoU3RyaW5n
IGZvcm1hdCwgT2JqZWN0IGFyZ3Mpe1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKLQkJ
YnVmLmFwcGVuZCgiICAgIHByaXZhdGUgdm9pZCBmb28yKFN0cmluZyBmb3JtYXQsIGludC4uLiBh
cmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzIoU3RyaW5nIGZv
cm1hdCwgaW50Li4uIGFyZ3MpIHtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CiAJCWJ1
Zi5hcHBlbmQoIn1cbiIpOwogCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJp
bmcoKSk7CkBAIC0yODcxLDUgKzI4NzEsMTM0IEBACiAJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZp
ZXcsIGJ1Zi50b1N0cmluZygpKTsKIAl9CiAKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcv
YnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJcHVibGljIHZvaWQgdGVzdFZhckFyZ3NBbm5v
dGF0aW9ucygpIHRocm93cyBFeGNlcHRpb24gewogCisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9
IHRoaXMuc291cmNlRm9sZGVyLmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwg
bnVsbCk7CisJCVN0cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFw
cGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIE1hcmtl
ciB7XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFz
cyBERCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzEoU3RyaW5nIGZv
cm1hdCwgT2JqZWN0IEBNYXJrZXIuLi4gYXJncyl7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1c
biIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMihPYmplY3QgLi4uIGFyZ3Mp
IHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJs
aWMgdm9pZCBmb28zKE9iamVjdCBATWFya2VyIC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vNChPYmplY3Qg
QE1hcmtlci4uLiBhcmdzKSB7XG4iKTsgCisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVm
LmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzUoT2JqZWN0IC4uLiBhcmdzKSB7XG4iKTsgCisJ
CWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZv
bzYoT2JqZWN0IGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb283KE9iamVjdCBATWFya2VyIC4uLiBhcmdzKSB7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOwkJCisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMg
dm9pZCBmb284KE9iamVjdCBATWFya2VyIC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIH1cbiIpOwkJCisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb285KEBCIEBDIGlu
dCBAQS4uLiBhKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5k
KCJ9XG4iKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25V
bml0KCJERC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKworCQlDb21waWxh
dGlvblVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUKEFTVC5KTFM4LCBjdSwgZmFsc2UpOworCQlBU1Qg
YXN0PSBhc3RSb290LmdldEFTVCgpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUu
Y3JlYXRlKGFzdFJvb3QuZ2V0QVNUKCkpOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZT0gZmluZFR5
cGVEZWNsYXJhdGlvbihhc3RSb290LCAiREQiKTsKKwkJCisJCXsKKwkJCS8vIFJlbW92ZSBhbm5v
dGF0aW9uIGZyb20gZmlyc3QgbWV0aG9kIGFyZ3MgLSBib3VuZGFyeSBjb25kaXRpb24gLQorCQkJ
Ly8gLSBvbmx5IG9uZSBhbm5vdGF0aW9uIHNob3VsZCBiZSBwcmVzZW50LgorCQkJTWV0aG9kRGVj
bGFyYXRpb24gbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb28xIik7
CisJCQlTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uIHBhcmFtID0gKFNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdldCgxKTsKKwkJCXJld3JpdGUucmVt
b3ZlKChBU1ROb2RlKXBhcmFtLmFubm90YXRpb25zKCkuZ2V0KDApLCBudWxsKTsKKwkJCQorCQkJ
Ly8gQWRkIG9uZSBhbm5vdGF0aW9uIHRvIHRoZSBzZWNvbmQgbWV0aG9kIC0gYm91bmRhcnkgY29u
ZGl0aW9uIAorCQkJLy8gLSBubyBhbm5vdGF0aW9uIHNob3VsZCBiZSBwcmVzZW50CisJCQltZXRo
b2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzIiKTsKKwkJCXBhcmFtID0g
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdldCgw
KTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFu
bm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBs
ZU5hbWUoIlgiKSk7CisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0
UmV3cml0ZShwYXJhbSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5BTk5PVEFUSU9OU19QUk9Q
RVJUWSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRGaXJzdChtYXJrZXJBbm5vdGF0aW9uLCBudWxs
KTsKKworCQkJLy8gUmVtb3ZlIHRoZSB2YXJhcmdzIHByb3BlcnR5IC0gYW5ub3RhdGlvbihzKSBz
aG91bGQgZGlzYXBwZWFyCisJCQltZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlw
ZSwgImZvbzMiKTsKKwkJCXBhcmFtID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIG1ldGhv
ZERlY2wucGFyYW1ldGVycygpLmdldCgwKTsKKwkJCXJld3JpdGUuc2V0KHBhcmFtLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFksIEJvb2xlYW4uRkFMU0UsIG51bGwp
OworCisJCQkvLyBSZW1vdmUgdGhlIHZhcmFyZ3MgcHJvcGVydHkgLSBhbm5vdGF0aW9uKHMpIHNo
b3VsZCBkaXNhcHBlYXIKKwkJCS8vIC0gZGlmZmVycyBmcm9tIHRoZSBhYm92ZSBkdWUgdG8gdGhl
IGFic2VuY2Ugb2YgYSBibGFuayBiZWZvcmUgLi4uCisJCQltZXRob2REZWNsPSBmaW5kTWV0aG9k
RGVjbGFyYXRpb24odHlwZSwgImZvbzQiKTsKKwkJCXBhcmFtID0gKFNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdldCgwKTsKKwkJCXJld3JpdGUuc2V0
KHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFksIEJvb2xl
YW4uRkFMU0UsIG51bGwpOworCisJCQkvLyBSZW1vdmUgdGhlIHZhcmFyZ3MgcHJvcGVydHkgLSBF
eGlzdGluZyBmdW5jdGlvbmFsaXR5IHVuY2hhbmdlZCB3aXRob3V0IGFubm90YXRpb25zCisJCQlt
ZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzUiKTsKKwkJCXBhcmFt
ID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdl
dCgwKTsKKwkJCXJld3JpdGUuc2V0KHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZB
UkFSR1NfUFJPUEVSVFksIEJvb2xlYW4uRkFMU0UsIG51bGwpOworCisJCQkvLyBBZGQgdGhlIHZh
cmFyZ3MgcHJvcGVydHkgIGFuZCBhbm5vdGF0aW9uCisJCQltZXRob2REZWNsPSBmaW5kTWV0aG9k
RGVjbGFyYXRpb24odHlwZSwgImZvbzYiKTsKKwkJCXBhcmFtID0gKFNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdldCgwKTsKKwkJCXJld3JpdGUuc2V0
KHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFksIEJvb2xl
YW4uVFJVRSwgbnVsbCk7CisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3Rh
dGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFt
ZSgiWCIpKTsKKwkJCWxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKHBhcmFtLCBT
aW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RS
ZXdyaXRlLmluc2VydEZpcnN0KG1hcmtlckFubm90YXRpb24sIG51bGwpOworCisJCQkvLyBSZXBs
YWNlIGFubm90YXRpb24KKwkJCW1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBl
LCAiZm9vNyIpOworCQkJcGFyYW0gPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgbWV0aG9k
RGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDApOworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01h
cmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5l
d1NpbXBsZU5hbWUoIlgiKSk7CisJCQlyZXdyaXRlLnJlcGxhY2UoKEFTVE5vZGUpcGFyYW0uYW5u
b3RhdGlvbnMoKS5nZXQoMCksIG1hcmtlckFubm90YXRpb24sIG51bGwpOworCisJCQkvLyBSZXNl
dCBhbmQgU2V0IFZhcmFyZ3MgLSBvdXRwdXQgc2hvdWxkIG5vdCBjaGFuZ2UuCisJCQltZXRob2RE
ZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzgiKTsKKwkJCXBhcmFtID0gKFNp
bmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIG1ldGhvZERlY2wucGFyYW1ldGVycygpLmdldCgwKTsK
KwkJCXJld3JpdGUuc2V0KHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1Nf
UFJPUEVSVFksIEJvb2xlYW4uRkFMU0UsIG51bGwpOworCQkJcmV3cml0ZS5zZXQocGFyYW0sIFNp
bmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSwgQm9vbGVhbi5UUlVFLCBu
dWxsKTsKKworCQkJLy8gQWRkIG11bHRpcGxlICh0d28pIGFubm90YXRpb25zLCByZW1vdmUgYW4g
ZXhpc3RpbmcgYW5ub3RhdGlvbgorCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9u
KHR5cGUsICJmb285Iik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBt
ZXRob2REZWNsLnBhcmFtZXRlcnMoKS5nZXQoMCk7CisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3Qu
bmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShh
c3QubmV3U2ltcGxlTmFtZSgiWCIpKTsKKwkJCWxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkFOTk9UQVRJT05TX1BST1BF
UlRZKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEZpcnN0KG1hcmtlckFubm90YXRpb24sIG51bGwp
OworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1h
cmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlkiKSk7CisJCQls
aXN0UmV3cml0ZS5pbnNlcnRGaXJzdChtYXJrZXJBbm5vdGF0aW9uLCBudWxsKTsKKwkJCXJld3Jp
dGUucmVtb3ZlKChBU1ROb2RlKXBhcmFtLmFubm90YXRpb25zKCkuZ2V0KDApLCBudWxsKTsKKwor
CQl9CisJCVN0cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCisJ
CWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xu
Iik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgTWFya2VyIHtcbiIpOworCQlidWYuYXBwZW5k
KCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEREIHtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMShTdHJpbmcgZm9ybWF0LCBPYmplY3QgLi4uIGFyZ3Mp
e1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1Ymxp
YyB2b2lkIGZvbzIoT2JqZWN0IEBYIC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAg
IH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMyhPYmplY3QgYXJncykg
e1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1Ymxp
YyB2b2lkIGZvbzQoT2JqZWN0IGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7
CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb281KE9iamVjdCBhcmdzKSB7XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQg
Zm9vNihPYmplY3QgQFggLi4uYXJncykge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzcoT2JqZWN0IEBYIC4uLiBhcmdzKSB7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOwkJCisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJs
aWMgdm9pZCBmb284KE9iamVjdCBATWFya2VyIC4uLiBhcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIH1cbiIpOwkJCisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb285KEBCIEBD
IGludCBAWSBAWCAuLi4gYSkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVm
LmFwcGVuZCgifVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmlu
ZygpKTsJCisJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKaW5kZXgg
ZWIyNTdkMi4uMzMzZDA2YyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQorKysgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZh
CkBAIC03OTUsNiArNzk1LDE0IEBACiAJCSAqLwogCQlpZiAoaXNWYXJBcmdzKSB7CiAJCQlzZXRU
eXBlRm9yU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbih2YXJpYWJsZURlY2wsIHR5cGUsIGV4dHJh
RGltZW5zaW9ucyArIDEpOworCQkJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hv
d19idWcuY2dpP2lkPTM5MTg5OAorCQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsKCkgPj0gQVNULkpM
UzggJiYgIXR5cGUuYW5ub3RhdGlvbnMoKS5pc0VtcHR5KCkpIHsKKwkJCQlJdGVyYXRvciBhbm5v
dGF0aW9ucyA9IHR5cGUuYW5ub3RhdGlvbnMuaXRlcmF0b3IoKTsKKwkJCQl3aGlsZSAoYW5ub3Rh
dGlvbnMuaGFzTmV4dCgpKSB7CisJCQkJCUFubm90YXRpb24gYW5ub3RhdGlvbiA9IChBbm5vdGF0
aW9uKSBhbm5vdGF0aW9ucy5uZXh0KCk7CisJCQkJCXZhcmlhYmxlRGVjbC5hbm5vdGF0aW9ucygp
LmFkZCgoYW5ub3RhdGlvbi5jbG9uZSh0aGlzLmFzdCkpKTsKKwkJCQl9CisJCQl9CiAJCQlpZiAo
ZXh0cmFEaW1lbnNpb25zICE9IDApIHsKIAkJCQl2YXJpYWJsZURlY2wuc2V0RmxhZ3ModmFyaWFi
bGVEZWNsLmdldEZsYWdzKCkgfCBBU1ROb2RlLk1BTEZPUk1FRCk7CiAJCQl9CmRpZmYgLS1naXQg
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVE1h
dGNoZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29y
ZS9kb20vQVNUTWF0Y2hlci5qYXZhCmluZGV4IDY0MTg2YmIuLjlhNjI3YjIwIDEwMDY0NAotLS0g
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVE1h
dGNoZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQpAQCAtMTg4NSw3ICsxODg1LDggQEAKIAkJICAgIHNh
ZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRUeXBlKCksIG8uZ2V0VHlwZSgpKQogCQkJCSYmIHNhZmVT
dWJ0cmVlTWF0Y2gobm9kZS5nZXROYW1lKCksIG8uZ2V0TmFtZSgpKQogCSAJCQkmJiBub2RlLmdl
dEV4dHJhRGltZW5zaW9ucygpID09IG8uZ2V0RXh0cmFEaW1lbnNpb25zKCkKLQkJCQkmJiBzYWZl
U3VidHJlZU1hdGNoKG5vZGUuZ2V0SW5pdGlhbGl6ZXIoKSwgby5nZXRJbml0aWFsaXplcigpKTsK
KwkJCQkmJiBzYWZlU3VidHJlZU1hdGNoKG5vZGUuZ2V0SW5pdGlhbGl6ZXIoKSwgby5nZXRJbml0
aWFsaXplcigpKQorCQkJCSYmIChsZXZlbCA+PSBBU1QuSkxTOCAmJiBub2RlLmlzVmFyYXJncygp
KSA/IHNhZmVTdWJ0cmVlTGlzdE1hdGNoKG5vZGUuYW5ub3RhdGlvbnMoKSwgby5hbm5vdGF0aW9u
cygpKSA6IHRydWU7CQkKIAl9CiAKIAkvKioKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Rv
bS9TaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmphdmEKaW5kZXggNDM2YWYyMS4uMzg0YWZmZCAx
MDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3Jl
L2RvbS9TaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9TaW5nbGVWYXJpYWJsZURlY2xhcmF0
aW9uLmphdmEKQEAgLTUsNiArNSwxMCBAQAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0
cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcv
bGVnYWwvZXBsLXYxMC5odG1sCiAgKgorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBh
biBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICog
Q29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5n
IGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0
aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKICAqIENvbnRyaWJ1
dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50
YXRpb24KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpAQCAtMzEsNiArMzUsMTEgQEAKICAqIDxw
cmU+CiAgKiBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uOgogICogICAgeyBFeHRlbmRlZE1vZGlm
aWVyIH0gVHlwZSBbIDxiPi4uLjwvYj4gXSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9
IFsgPGI+PTwvYj4gRXhwcmVzc2lvbiBdCisgKiA8L3ByZT4KKyAqIEZvciBKTFM4LCB2YXJhcmdz
IGFyZSBhbGxvd2VkIHRvIGhhdmUgb3B0aW9uYWwgYW5ub3RhdGlvbnMuCisgKiA8cHJlPgorICog
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbjoKKyAqICAgIHsgRXh0ZW5kZWRNb2RpZmllciB9IFR5
cGUgW10gWyA8Yj4uLi48L2I+IF0gSWRlbnRpZmllciB7IDxiPls8L2I+PGI+XTwvYj4gfSBbIDxi
Pj08L2I+IEV4cHJlc3Npb24gXQogICogPC9wcmU+CiAgKgogICogQHNpbmNlIDIuMApAQCAtNzIs
NiArODEsMTMgQEAKIAkgKi8KIAlwdWJsaWMgc3RhdGljIGZpbmFsIFNpbXBsZVByb3BlcnR5RGVz
Y3JpcHRvciBWQVJBUkdTX1BST1BFUlRZID0KIAkJbmV3IFNpbXBsZVByb3BlcnR5RGVzY3JpcHRv
cihTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmNsYXNzLCAidmFyYXJncyIsIGJvb2xlYW4uY2xh
c3MsIE1BTkRBVE9SWSk7IC8vJE5PTi1OTFMtMSQKKwkKKwkvKioKKwkgKiBUaGUgImFubm90YXRp
b25zIiBzdHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHRoaXMgbm9kZSB0eXBlIChjaGlsZCB0eXBlOiB7
QGxpbmsgQW5ub3RhdGlvbn0pLgorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwdWJsaWMgc3RhdGlj
IGZpbmFsIENoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBBTk5PVEFUSU9OU19QUk9QRVJUWSA9
CisJCW5ldyBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IoU2luZ2xlVmFyaWFibGVEZWNsYXJh
dGlvbi5jbGFzcywgImFubm90YXRpb25zIiwgQW5ub3RhdGlvbi5jbGFzcywgQ1lDTEVfUklTSyk7
IC8vJE5PTi1OTFMtMSQKIAogCS8qKgogCSAqIFRoZSAiZXh0cmFEaW1lbnNpb25zIiBzdHJ1Y3R1
cmFsIHByb3BlcnR5IG9mIHRoaXMgbm9kZSB0eXBlICh0eXBlOiB7QGxpbmsgSW50ZWdlcn0pLgpA
QCAtMTAyLDcgKzExOCwxNSBAQAogCSAqIEBzaW5jZSAzLjEKIAkgKi8KIAlwcml2YXRlIHN0YXRp
YyBmaW5hbCBMaXN0IFBST1BFUlRZX0RFU0NSSVBUT1JTXzNfMDsKLQorCQorCS8qKgorCSAqIEEg
bGlzdCBvZiBwcm9wZXJ0eSBkZXNjcmlwdG9ycyAoZWxlbWVudCB0eXBlOgorCSAqIHtAbGluayBT
dHJ1Y3R1cmFsUHJvcGVydHlEZXNjcmlwdG9yfSksCisJICogb3IgbnVsbCBpZiB1bmluaXRpYWxp
emVkLgorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0IFBS
T1BFUlRZX0RFU0NSSVBUT1JTXzhfMDsKKwkKIAlzdGF0aWMgewogCQlMaXN0IHByb3BlcnR5TGlz
dCA9IG5ldyBBcnJheUxpc3QoNik7CiAJCWNyZWF0ZVByb3BlcnR5TGlzdChTaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uLmNsYXNzLCBwcm9wZXJ0eUxpc3QpOwpAQCAtMTIyLDcgKzE0NiwyMCBAQAog
CQlhZGRQcm9wZXJ0eShFWFRSQV9ESU1FTlNJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwog
CQlhZGRQcm9wZXJ0eShJTklUSUFMSVpFUl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKIAkJUFJP
UEVSVFlfREVTQ1JJUFRPUlNfM18wID0gcmVhcFByb3BlcnR5TGlzdChwcm9wZXJ0eUxpc3QpOwot
CX0KKwkJCisJCQorCQlwcm9wZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0KDgpOworCQljcmVhdGVQ
cm9wZXJ0eUxpc3QoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5jbGFzcywgcHJvcGVydHlMaXN0
KTsKKwkJYWRkUHJvcGVydHkoTU9ESUZJRVJTMl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJ
YWRkUHJvcGVydHkoVFlQRV9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHko
QU5OT1RBVElPTlNfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFZBUkFS
R1NfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KE5BTUVfUFJPUEVSVFks
IHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KEVYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFks
IHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KElOSVRJQUxJWkVSX1BST1BFUlRZLCBwcm9w
ZXJ0eUxpc3QpOworCQlQUk9QRVJUWV9ERVNDUklQVE9SU184XzAgPSByZWFwUHJvcGVydHlMaXN0
KHByb3BlcnR5TGlzdCk7CQkKKwkKKwkJfQogCiAJLyoqCiAJICogUmV0dXJucyBhIGxpc3Qgb2Yg
c3RydWN0dXJhbCBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBmb3IgdGhpcyBub2RlIHR5cGUuCkBAIC0x
MzcsOCArMTc0LDEwIEBACiAJcHVibGljIHN0YXRpYyBMaXN0IHByb3BlcnR5RGVzY3JpcHRvcnMo
aW50IGFwaUxldmVsKSB7CiAJCWlmIChhcGlMZXZlbCA9PSBBU1QuSkxTMl9JTlRFUk5BTCkgewog
CQkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzJfMDsKLQkJfSBlbHNlIHsKKwkJfSBlbHNl
IGlmIChhcGlMZXZlbCA8IEFTVC5KTFM4KSB7CiAJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRP
UlNfM18wOworCQl9IGVsc2UgeworCQkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMDsK
IAkJfQogCX0KIApAQCAtMTkyLDYgKzIzMSwxMiBAQAogCXByaXZhdGUgRXhwcmVzc2lvbiBvcHRp
b25hbEluaXRpYWxpemVyID0gbnVsbDsKIAogCS8qKgorCSAqIFRoZSB0eXBlIGFubm90YXRpb25z
IChlbGVtZW50IHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCisJICogQHNpbmNlIDMuOQorCSAq
LworCXByb3RlY3RlZCBBU1ROb2RlLk5vZGVMaXN0IGFubm90YXRpb25zID0gbnVsbDsKKworCS8q
KgogCSAqIENyZWF0ZXMgYSBuZXcgQVNUIG5vZGUgZm9yIGEgdmFyaWFibGUgZGVjbGFyYXRpb24g
b3duZWQgYnkgdGhlIGdpdmVuCiAJICogQVNULiBCeSBkZWZhdWx0LCB0aGUgdmFyaWFibGUgZGVj
bGFyYXRpb24gaGFzOiBubyBtb2RpZmllcnMsIGFuCiAJICogdW5zcGVjaWZpZWQgKGJ1dCBsZWdh
bCkgdHlwZSwgYW4gdW5zcGVjaWZpZWQgKGJ1dCBsZWdhbCkgdmFyaWFibGUgbmFtZSwKQEAgLTIw
Niw2ICsyNTEsOSBAQAogCQlzdXBlcihhc3QpOwogCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5K
TFMzX0lOVEVSTkFMKSB7CiAJCQl0aGlzLm1vZGlmaWVycyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0
KE1PRElGSUVSUzJfUFJPUEVSVFkpOworCQkJaWYgKGFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkg
eworCQkJCXRoaXMuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFUSU9O
U19QUk9QRVJUWSk7CisJCQl9CiAJCX0KIAl9CiAKQEAgLTMxOSw2ICszNjcsOSBAQAogCQlpZiAo
cHJvcGVydHkgPT0gTU9ESUZJRVJTMl9QUk9QRVJUWSkgewogCQkJcmV0dXJuIG1vZGlmaWVycygp
OwogCQl9CisJCWlmIChwcm9wZXJ0eSA9PSBBTk5PVEFUSU9OU19QUk9QRVJUWSkgeworCQkJcmV0
dXJuIGFubm90YXRpb25zKCk7CisJCX0KIAkJLy8gYWxsb3cgZGVmYXVsdCBpbXBsZW1lbnRhdGlv
biB0byBmbGFnIHRoZSBlcnJvcgogCQlyZXR1cm4gc3VwZXIuaW50ZXJuYWxHZXRDaGlsZExpc3RQ
cm9wZXJ0eShwcm9wZXJ0eSk7CiAJfQpAQCAtMzQ3LDYgKzM5OCwxMSBAQAogCQlyZXN1bHQuc2V0
TmFtZSgoU2ltcGxlTmFtZSkgZ2V0TmFtZSgpLmNsb25lKHRhcmdldCkpOwogCQlyZXN1bHQuc2V0
SW5pdGlhbGl6ZXIoCiAJCQkoRXhwcmVzc2lvbikgQVNUTm9kZS5jb3B5U3VidHJlZSh0YXJnZXQs
IGdldEluaXRpYWxpemVyKCkpKTsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4
KSB7CisJCQlyZXN1bHQuYW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChBTk5PVEFU
SU9OU19QUk9QRVJUWSk7CisJCQlyZXN1bHQuYW5ub3RhdGlvbnMoKS5hZGRBbGwoCisJCQkJCUFT
VE5vZGUuY29weVN1YnRyZWVzKHRhcmdldCwgYW5ub3RhdGlvbnMoKSkpOworCQl9CiAJCXJldHVy
biByZXN1bHQ7CiAJfQogCkBAIC0zNjksNiArNDI1LDkgQEAKIAkJCQlhY2NlcHRDaGlsZHJlbih2
aXNpdG9yLCB0aGlzLm1vZGlmaWVycyk7CiAJCQl9CiAJCQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBn
ZXRUeXBlKCkpOworCQkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5KTFM4ICYmIGlzVmFy
YXJncygpKSB7CisJCQkJYWNjZXB0Q2hpbGRyZW4odmlzaXRvciwgdGhpcy5hbm5vdGF0aW9ucyk7
CisJCQl9CiAJCQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBnZXROYW1lKCkpOwogCQkJYWNjZXB0Q2hp
bGQodmlzaXRvciwgZ2V0SW5pdGlhbGl6ZXIoKSk7CiAJCX0KQEAgLTYxMywxMyArNjcyLDI4IEBA
CiAJCXRoaXMub3B0aW9uYWxJbml0aWFsaXplciA9IGluaXRpYWxpemVyOwogCQlwb3N0UmVwbGFj
ZUNoaWxkKG9sZENoaWxkLCBpbml0aWFsaXplcixJTklUSUFMSVpFUl9QUk9QRVJUWSk7CiAJfQot
CisJCisJLyoqCisJICogUmV0dXJucyB0aGUgbGl2ZSBvcmRlcmVkIGxpc3Qgb2YgYW5ub3RhdGlv
bnMgZm9yIHRoaXMgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbiBub2RlLgorCSAqCisJICogQHJl
dHVybiB0aGUgbGl2ZSBsaXN0IG9mIGFubm90YXRpb25zIChlbGVtZW50IHR5cGU6IHtAbGluayBB
bm5vdGF0aW9ufSkKKwkgKiBAZXhjZXB0aW9uIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9u
IGlmIHRoaXMgb3BlcmF0aW9uIGlzIHVzZWQKKwkgKiAgICAgICAgICAgIGluIGEgSkxTMiwgSkxT
MyBvciBKTFM0IEFTVAorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwdWJsaWMgTGlzdCBhbm5vdGF0
aW9ucygpIHsKKwkJaWYgKHRoaXMuYW5ub3RhdGlvbnMgPT0gbnVsbCkgeworCQkJdW5zdXBwb3J0
ZWRJbjJfM180KCk7IAorCQl9CisJCXJldHVybiB0aGlzLmFubm90YXRpb25zOworCX0KKwkKIAkv
KiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKIAkgKiBNZXRob2QgZGVjbGFyZWQgb24g
QVNUTm9kZS4KIAkgKi8KIAlpbnQgbWVtU2l6ZSgpIHsKIAkJLy8gdHJlYXQgT3BlcmF0b3IgYXMg
ZnJlZQotCQlyZXR1cm4gQkFTRV9OT0RFX1NJWkUgKyA3ICogNDsKKwkJcmV0dXJuIEJBU0VfTk9E
RV9TSVpFICsgOCAqIDQ7CiAJfQogCiAJLyogKG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRob2Qp
CkBAIC02MjgsNiArNzAyLDcgQEAKIAlpbnQgdHJlZVNpemUoKSB7CiAJCXJldHVybgogCQkJbWVt
U2l6ZSgpCisJCQkrICh0aGlzLmFubm90YXRpb25zID09IG51bGwgPyAwIDogdGhpcy5hbm5vdGF0
aW9ucy5saXN0U2l6ZSgpKQogCQkJKyAodGhpcy5tb2RpZmllcnMgPT0gbnVsbCA/IDAgOiB0aGlz
Lm1vZGlmaWVycy5saXN0U2l6ZSgpKQogCQkJKyAodGhpcy50eXBlID09IG51bGwgPyAwIDogZ2V0
VHlwZSgpLnRyZWVTaXplKCkpCiAJCQkrICh0aGlzLnZhcmlhYmxlTmFtZSA9PSBudWxsID8gMCA6
IGdldE5hbWUoKS50cmVlU2l6ZSgpKQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
ZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCmluZGV4IDFkMDk1NWIuLjk3MDMwZjEgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRl
bmVyLmphdmEKQEAgLTEzMTgsNiArMTMxOCwxNyBAQAogCQlub2RlLmdldFR5cGUoKS5hY2NlcHQo
dGhpcyk7CiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gSkxTMykgewogCQkJaWYg
KG5vZGUuaXNWYXJhcmdzKCkpIHsKKwkJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVn
cy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwo
KSA+PSBBU1QuSkxTOCkgeworCQkJCQlMaXN0IGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9u
cygpOworCQkJCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJCQkJZm9yIChJdGVyYXRv
ciBpdCA9IGFubm90YXRpb25zLml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTsgKSB7CisJCQkJCQkJ
dGhpcy5idWZmZXIuYXBwZW5kKCcgJyk7CisJCQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0g
KEFubm90YXRpb24pIGl0Lm5leHQoKTsKKwkJCQkJCQlhbm5vdGF0aW9uLmFjY2VwdCh0aGlzKTsK
KwkJCQkJCX0KKwkJCQkJfQorCQkJCX0KIAkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4uLiIpOy8v
JE5PTi1OTFMtMSQKIAkJCX0KIAkJfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
ZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVB
bmFseXplci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhCmluZGV4IGIy
NjExYTEuLjhhN2U1OWIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKQEAgLTE1NDQsNiAr
MTU0NCw1MiBAQAogCQlyZXR1cm4gZW5kUG9zOwogCX0KIAorCS8vIGh0dHBzOi8vYnVncy5lY2xp
cHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwlwcml2YXRlIGludCByZXdyaXRl
VmFyYXJnc0Fubm90YXRpb25zKEFTVE5vZGUgbm9kZSwgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlw
dG9yIHByb3BlcnR5LCBpbnQgcG9zKSB7CisJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkg
PCBBU1QuSkxTOCkgeworCQkJcmV0dXJuIHBvczsKKwkJfQorCQlSZXdyaXRlRXZlbnQgZXZlbnQ9
IGdldEV2ZW50KG5vZGUsIHByb3BlcnR5KTsJCQorCQlpZiAoZXZlbnQgPT0gbnVsbCB8fCBldmVu
dC5nZXRDaGFuZ2VLaW5kKCkgPT0gUmV3cml0ZUV2ZW50LlVOQ0hBTkdFRCkgeworCQkJcmV0dXJu
IGRvVmlzaXQobm9kZSwgcHJvcGVydHksIHBvcyk7CisJCX0KKwkJUmV3cml0ZUV2ZW50W10gY2hp
bGRyZW49IGV2ZW50LmdldENoaWxkcmVuKCk7CisJCWJvb2xlYW4gaXNBbGxJbnNlcnQ9IGlzQWxs
T2ZLaW5kKGNoaWxkcmVuLCBSZXdyaXRlRXZlbnQuSU5TRVJURUQpOworCQlib29sZWFuIGlzQWxs
UmVtb3ZlPSBpc0FsbE9mS2luZChjaGlsZHJlbiwgUmV3cml0ZUV2ZW50LlJFTU9WRUQpOworCQlp
ZiAoaXNBbGxJbnNlcnQgfHwgaXNBbGxSZW1vdmUpIHsKKwkJCS8vIHVwZGF0ZSBwb3MKKwkJCXRy
eSB7CisJCQkJcG9zPSBnZXRTY2FubmVyKCkuZ2V0TmV4dFN0YXJ0T2Zmc2V0KHBvcywgZmFsc2Up
OworCQkJfSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7CisJCQkJaGFuZGxlRXhjZXB0aW9uKGUp
OworCQkJfQorCQl9CisKKwkJUHJlZml4IGZvcm1hdHRlclByZWZpeDsKKwkJZm9ybWF0dGVyUHJl
Zml4PSB0aGlzLmZvcm1hdHRlci5WQVJBUkdTX0FOTk9UQVRJT05fU0VQQVJBVElPTjsKKwkJaW50
IGVuZFBvcz0gbmV3IE1vZGlmaWVyUmV3cml0ZXIoZm9ybWF0dGVyUHJlZml4KS5yZXdyaXRlTGlz
dChub2RlLCBwcm9wZXJ0eSwgcG9zLCBVdGlsLkVNUFRZX1NUUklORywgIiAiKTsgLy8kTk9OLU5M
Uy0xJCAKKwkJdHJ5IHsKKwkJCWludCBuZXh0UG9zPSBnZXRTY2FubmVyKCkuZ2V0TmV4dFN0YXJ0
T2Zmc2V0KGVuZFBvcywgZmFsc2UpOworCisJCQlib29sZWFuIGxhc3RVbmNoYW5nZWQ9IGNoaWxk
cmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdLmdldENoYW5nZUtpbmQoKSAhPSBSZXdyaXRlRXZlbnQu
VU5DSEFOR0VEOworCQkJaWYgKGlzQWxsUmVtb3ZlKSB7CisJCQlkb1RleHRSZW1vdmUoZW5kUG9z
LCBuZXh0UG9zIC0gZW5kUG9zLCBnZXRFZGl0R3JvdXAoY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3Ro
IC0gMV0pKTsKKwkJCQlyZXR1cm4gbmV4dFBvczsKKwkJCX0gZWxzZSBpZiAoaXNBbGxJbnNlcnQg
fHwgKG5leHRQb3MgPT0gZW5kUG9zICYmIGxhc3RVbmNoYW5nZWQpKSB7IC8vIHNlZSBidWcgMTY1
NjU0CisJCQkJUmV3cml0ZUV2ZW50IGxhc3RDaGlsZD0gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3Ro
IC0gMV07CisJCQkJU3RyaW5nIHNlcGFyYXRvcjsKKwkJCQlpZiAobGFzdENoaWxkLmdldE5ld1Zh
bHVlKCkgaW5zdGFuY2VvZiBBbm5vdGF0aW9uKSB7CisJCQkJCXNlcGFyYXRvcj0gZm9ybWF0dGVy
UHJlZml4LmdldFByZWZpeChnZXRJbmRlbnQocG9zKSk7CisJCQkJfSBlbHNlIHsKKwkJCQkJc2Vw
YXJhdG9yPSBTdHJpbmcudmFsdWVPZignICcpOworCQkJCX0KKwkJCQlkb1RleHRJbnNlcnQoZW5k
UG9zLCBzZXBhcmF0b3IsIGdldEVkaXRHcm91cChsYXN0Q2hpbGQpKTsKKwkJCX0KKwkJfSBjYXRj
aCAoQ29yZUV4Y2VwdGlvbiBlKSB7CisJCQloYW5kbGVFeGNlcHRpb24oZSk7CisJCX0KKwkJcmV0
dXJuIGVuZFBvczsKKwl9CiAKIAlwcml2YXRlIHZvaWQgcmVwbGFjZU9wZXJhdGlvbihpbnQgcG9z
QmVmb3JlT3BlcmF0aW9uLCBTdHJpbmcgbmV3T3BlcmF0aW9uLCBUZXh0RWRpdEdyb3VwIGVkaXRH
cm91cCkgewogCQl0cnkgewpAQCAtMjgzMiwxMCArMjg3OCwyMCBAQAogCQlpZiAobm9kZS5nZXRB
U1QoKS5hcGlMZXZlbCgpID49IEpMUzNfSU5URVJOQUwpIHsKIAkJCWlmIChpc0NoYW5nZWQobm9k
ZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZKSkgewogCQkJCWlm
IChnZXROZXdWYWx1ZShub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJP
UEVSVFkpLmVxdWFscyhCb29sZWFuLlRSVUUpKSB7CisJCQkJCS8vIGh0dHBzOi8vYnVncy5lY2xp
cHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwkJCQkJcG9zID0gcmV3cml0ZVZh
cmFyZ3NBbm5vdGF0aW9ucyhub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkFOTk9UQVRJ
T05TX1BST1BFUlRZLCBwb3MpOwogCQkJCQlkb1RleHRJbnNlcnQocG9zLCAiLi4uIiwgZ2V0RWRp
dEdyb3VwKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSkp
OyAvLyROT04tTkxTLTEkCiAJCQkJfSBlbHNlIHsKIAkJCQkJdHJ5IHsKIAkJCQkJCWludCBlbGxp
cHNpc0VuZD0gZ2V0U2Nhbm5lcigpLmdldE5leHRFbmRPZmZzZXQocG9zLCB0cnVlKTsKKwkJCQkJ
CS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgK
KwkJCQkJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzggJiYgbm9kZS5h
bm5vdGF0aW9ucygpLnNpemUoKSA+IDAgKSB7CisJCQkJCQkJaW50IGFubm90YXRpb25TdGFydFBv
c2l0aW9uID0gbm9kZS5nZXRUeXBlKCkuZ2V0U3RhcnRQb3NpdGlvbigpICsgbm9kZS5nZXRUeXBl
KCkuZ2V0TGVuZ3RoKCk7CisJCQkJCQkJaW50IGFubm90YXRpb25FbmRQb3NpdGlvbiA9IGFubm90
YXRpb25TdGFydFBvc2l0aW9uICsgbm9kZS5hbm5vdGF0aW9ucygpLnRvU3RyaW5nKCkubGVuZ3Ro
KCkgLSAxOworCQkJCQkJCWVsbGlwc2lzRW5kID0gZ2V0U2Nhbm5lcigpLmdldE5leHRFbmRPZmZz
ZXQoYW5ub3RhdGlvbkVuZFBvc2l0aW9uLCB0cnVlKTsKKwkJCQkJCX0gZWxzZSB7CisJCQkJCQkJ
ZWxsaXBzaXNFbmQ9IGdldFNjYW5uZXIoKS5nZXROZXh0RW5kT2Zmc2V0KHBvcywgdHJ1ZSk7CisJ
CQkJCQl9CQkJCQkJCQogCQkJCQkJZG9UZXh0UmVtb3ZlKHBvcywgZWxsaXBzaXNFbmQgLSBwb3Ms
IGdldEVkaXRHcm91cChub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJP
UEVSVFkpKTsKIAkJCQkJfSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7CiAJCQkJCQloYW5kbGVF
eGNlcHRpb24oZSk7CkBAIC0yODQ0LDYgKzI5MDAsMTIgQEAKIAkJCX0KIAkJCWlmICghbm9kZS5p
c1ZhcmFyZ3MoKSkgewogCQkJCWVuc3VyZVNwYWNlQWZ0ZXJSZXBsYWNlKG5vZGUsIFNpbmdsZVZh
cmlhYmxlRGVjbGFyYXRpb24uVFlQRV9QUk9QRVJUWSk7CisJCQl9IGVsc2Ugey8vIGh0dHBzOi8v
YnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwkJCQlpZiAobm9k
ZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4ICYmICFpc0NoYW5nZWQobm9kZSwgU2lu
Z2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZKQorCQkJCQkJJiYgbm9kZS5p
c1ZhcmFyZ3MoKSkgeworCQkJCQlpbnQgYW5ub3RhdGlvblN0YXJ0UG9zaXRpb24gPSBub2RlLmdl
dFR5cGUoKS5nZXRTdGFydFBvc2l0aW9uKCkgKyBub2RlLmdldFR5cGUoKS5nZXRMZW5ndGgoKTsK
KwkJCQkJcG9zID0gcmV3cml0ZVZhcmFyZ3NBbm5vdGF0aW9ucyhub2RlLCBTaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uLkFOTk9UQVRJT05TX1BST1BFUlRZLCBhbm5vdGF0aW9uU3RhcnRQb3NpdGlv
bik7CisJCQkJfQogCQkJfQogCQl9IGVsc2UgewogCQkJZW5zdXJlU3BhY2VBZnRlclJlcGxhY2Uo
bm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5UWVBFX1BST1BFUlRZKTsKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29y
ZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3
cml0ZUZsYXR0ZW5lci5qYXZhCmluZGV4IDE0ZDJiNTkuLjZmZTY4MDYgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20v
cmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3Jp
dGVGbGF0dGVuZXIuamF2YQpAQCAtNzg3LDYgKzc4NywxMSBAQAogCQkJdmlzaXRMaXN0KG5vZGUs
IFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uTU9ESUZJRVJTMl9QUk9QRVJUWSwgU3RyaW5nLnZh
bHVlT2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcsIFN0cmluZy52YWx1ZU9mKCcgJykpOwogCQl9
CiAJCWdldENoaWxkTm9kZShub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlRZUEVfUFJP
UEVSVFkpLmFjY2VwdCh0aGlzKTsKKwkJCisJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9i
dWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwo
KSA+PSBBU1QuSkxTOCAgJiYgbm9kZS5pc1ZhcmFyZ3MoKSkgeworCQkJdmlzaXRMaXN0KG5vZGUs
IFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIFN0cmluZy52
YWx1ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignICcpKTsKKwkJ
fQogCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEpMUzNfSU5URVJOQUwpIHsKIAkJ
CWlmIChnZXRCb29sZWFuQXR0cmlidXRlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24u
VkFSQVJHU19QUk9QRVJUWSkpIHsKIAkJCQl0aGlzLnJlc3VsdC5hcHBlbmQoIi4uLiIpOy8vJE5P
Ti1OTFMtMSQKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRm9ybWF0dGVyLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUv
ZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZvcm1hdHRlci5qYXZhCmluZGV4IDhlMzlmN2QuLmQ1YzZm
Y2UgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRm9ybWF0dGVyLmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2Rv
bS9yZXdyaXRlL0FTVFJld3JpdGVGb3JtYXR0ZXIuamF2YQpAQCAtMSwxMCArMSwxNCBAQAogLyoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29y
cG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29y
cG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3Jh
bSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1
bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hp
Y2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAq
IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKgorICogVGhpcyBp
cyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVs
b3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1h
ZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5
LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRo
ZSBKQ1AuCisgKiAKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBp
bml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpA
QCAtNTUwLDYgKzU1NCw3IEBACiAJcHVibGljIGZpbmFsIFByZWZpeCBGSVJTVF9FTlVNX0NPTlNU
PSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgiZW51bSBFIHsgWDt9IiwgInsgWCIgLCBDb2RlRm9ybWF0
dGVyLktfQ09NUElMQVRJT05fVU5JVCk7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAogCXB1
YmxpYyBmaW5hbCBQcmVmaXggQU5OT1RBVElPTl9TRVBBUkFUSU9OPSBuZXcgRm9ybWF0dGluZ1By
ZWZpeCgiQEEgQEIgY2xhc3MgQyB7fSIsICJBIEAiICwgQ29kZUZvcm1hdHRlci5LX0NPTVBJTEFU
SU9OX1VOSVQpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAlwdWJsaWMgZmluYWwgUHJl
Zml4IFBBUkFNX0FOTk9UQVRJT05fU0VQQVJBVElPTj0gbmV3IEZvcm1hdHRpbmdQcmVmaXgoInZv
aWQgZm9vKEBBIEBCIHApIHsgfSIsICJBIEAiICwgQ29kZUZvcm1hdHRlci5LX0NMQVNTX0JPRFlf
REVDTEFSQVRJT05TKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJcHVibGljIGZpbmFs
IFByZWZpeCBWQVJBUkdTX0FOTk9UQVRJT05fU0VQQVJBVElPTj0gbmV3IEZvcm1hdHRpbmdQcmVm
aXgoInZvaWQgZm9vKHAgQEEgQEIuLi4pIHsgfSIsICJBIEAiICwgQ29kZUZvcm1hdHRlci5LX0NM
QVNTX0JPRFlfREVDTEFSQVRJT05TKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCiAJcHVi
bGljIGZpbmFsIFByZWZpeCBUUllfUkVTT1VSQ0VTID0gbmV3IEZvcm1hdHRpbmdQcmVmaXgoInRy
eSAoQSBhID0gbmV3IEEoKTsgQiBiID0gbmV3IEIoKSkge30iLCAiOyBCIiAsIENvZGVGb3JtYXR0
ZXIuS19TVEFURU1FTlRTKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCiAJcHVibGljIGZp
bmFsIFByZWZpeCBUUllfUkVTT1VSQ0VTX1BBUkVOID0gbmV3IEZvcm1hdHRpbmdQcmVmaXgoInRy
eSAoQSBhID0gbmV3IEEoKTsgQiBiID0gbmV3IEIoKSkge30iLCAieSAoIiAsIENvZGVGb3JtYXR0
ZXIuS19TVEFURU1FTlRTKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCiAJ
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>223997</attachid>
            <date>2012-11-27 03:37:00 -0500</date>
            <delta_ts>2012-12-04 07:27:16 -0500</delta_ts>
            <desc>Non ASTRewrite Part of the original patch</desc>
            <filename>Bug-391898--18compiler-Add-DOM-AST-support-for-annot.patch.NON_ASTRewritePart</filename>
            <type>text/plain</type>
            <size>15172</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjllZjc4MGEKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAxIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRlc3QwMDAxKCkgdGhy
b3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIgl9XG4iICsKKwkJCSIgCXB1Ymxp
YyB2b2lkIGJhcihATWFya2VyIGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIiAJfVxu
IiArCisJCQkifSI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZl
cnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBi
dWlsZEFTVCgKKwkJCWNvbnRlbnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVx
dWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwg
bm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9
IChDb21waWxhdGlvblVuaXQpIG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlv
blVuaXQsIDApOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOwor
CQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBl
KCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbWV0aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMo
Indyb25nIHNpemUiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gcGFyYW1ldGVyID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRl
cnMuZ2V0KDApOworCQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLmFubm90YXRpb25zKCk7
CisJCWFzc2VydEVxdWFscygiV3JvbmcgbnVtYmVyIG9mIGFubm90YXRpb25zIiwgMSwgYW5ub3Rh
dGlvbnMuc2l6ZSgpKTsKKwkJQVNUTm9kZSBhbm5vdGF0aW9uID0gKEFTVE5vZGUpIGFubm90YXRp
b25zLmdldCgwKTsKKwkJY2hlY2tTb3VyY2VSYW5nZShhbm5vdGF0aW9uLCAiQE1hcmtlciIsIGNv
bnRlbnRzKTsKKwkJbm9kZSA9IGdldEFTVE5vZGUoY29tcGlsYXRpb25Vbml0LDEsMSk7CisJCWFz
c2VydFRydWUoIk5vdCBhIG1ldGhvZCBkZWNsYXJhdGlvbiIsIG5vZGUuZ2V0Tm9kZVR5cGUoKSA9
PSBBU1ROb2RlLk1FVEhPRF9ERUNMQVJBVElPTik7CisJCXBhcmFtZXRlcnMgPSBtZXRob2REZWNs
YXJhdGlvbi5wYXJhbWV0ZXJzKCk7CisJCWFzc2VydEVxdWFscygiV3JvbmcgbnVtYmVyIG9mIHBh
cmFtZXRlcnMiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCXBhcmFtZXRlciA9IChTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uKSBwYXJhbWV0ZXJzLmdldCgwKTsKKwkJYW5ub3RhdGlvbnMgPSBw
YXJhbWV0ZXIuYW5ub3RhdGlvbnMoKTsKKwkJYXNzZXJ0RXF1YWxzKCJXcm9uZyBudW1iZXIgb2Yg
YW5ub3RhdGlvbnMiLCAxLCBhbm5vdGF0aW9ucy5zaXplKCkpOworCQlhbm5vdGF0aW9uID0gKEFT
VE5vZGUpIGFubm90YXRpb25zLmdldCgwKTsKKwkJY2hlY2tTb3VyY2VSYW5nZShhbm5vdGF0aW9u
LCAiQE1hcmtlciIsIGNvbnRlbnRzKTsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FT
VE1hdGNoZXJUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVE1hdGNoZXJUZXN0LmphdmEKaW5kZXgg
MzJhNDQ0Ny4uODJiYmQ1OSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBz
ZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YQpAQCAtMzksNiArMzksOCBA
QAogCQkJaWYgKG1ldGhvZHNbaV0uZ2V0TmFtZSgpLnN0YXJ0c1dpdGgoInRlc3QiKSkgeyAvLyRO
T04tTkxTLTEkCiAJCQkJc3VpdGUuYWRkVGVzdChuZXcgQVNUTWF0Y2hlclRlc3QobWV0aG9kc1tp
XS5nZXROYW1lKCksIEFTVC5KTFMyKSk7CiAJCQkJc3VpdGUuYWRkVGVzdChuZXcgQVNUTWF0Y2hl
clRlc3QobWV0aG9kc1tpXS5nZXROYW1lKCksIEpMUzNfSU5URVJOQUwpKTsKKwkJCQkvLyBodHRw
czovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQkJc3Vp
dGUuYWRkVGVzdChuZXcgQVNUTWF0Y2hlclRlc3QobWV0aG9kc1tpXS5nZXROYW1lKCksIEFTVC5K
TFM4KSk7CiAJCQl9CiAJCX0KIAkJcmV0dXJuIHN1aXRlOwpAQCAtMTMyMCw0ICsxMzIyLDE2IEBA
CiAJCWJhc2ljTWF0Y2goeDEpOwogCX0KIAorCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9i
dWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwlwdWJsaWMgdm9pZCB0ZXN0U2luZ2xlVmFyaWFi
bGVEZWNsYXJhdGlvblZhcmFyZ3NBbm5vdGF0aW9uKCkgeworCQlpZiAodGhpcy5hc3QuYXBpTGV2
ZWwoKSA8IEFTVC5KTFM4KSB7CisJCQlyZXR1cm47CisJCX0KKwkJU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbiB4MSA9IHRoaXMuYXN0Lm5ld1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24oKTsKKwkJ
eDEuc2V0VHlwZSh0aGlzLlQxKTsKKwkJeDEuc2V0TmFtZSh0aGlzLk4xKTsKKwkJeDEuc2V0VmFy
YXJncyh0cnVlKTsKKwkJeDEuYW5ub3RhdGlvbnMoKS5hZGQodGhpcy5BTk8xKTsKKwkJYmFzaWNN
YXRjaCh4MSk7CisJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0ZXJUZXN0
cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNl
L2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0ZXJUZXN0cy5qYXZhCmluZGV4IGUwZTExYzEu
LjRhMzQ5MTMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3Ny
Yy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vUnVuQ29udmVydGVyVGVzdHMuamF2YQor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0
L2NvcmUvdGVzdHMvZG9tL1J1bkNvbnZlcnRlclRlc3RzLmphdmEKQEAgLTQ2LDYgKzQ2LDcgQEAK
IAkJQVNUQ29udmVydGVyMTVKTFM0VGVzdC5jbGFzcywKIAkJQVNUQ29udmVydGVyMTVKTFM4VGVz
dC5jbGFzcywKIAkJVHlwZUFubm90YXRpb25zQ29udmVydGVyVGVzdC5jbGFzcywKKwkJQVNUQ29u
dmVydGVyMThUZXN0LmNsYXNzLAogCX07CiB9CiBwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2Nv
cmUvZG9tL0FTVENvbnZlcnRlci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YQppbmRleCBlYjI1N2QyLi4zMzNk
MDZjIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVydGVyLmphdmEKQEAgLTc5NSw2ICs3
OTUsMTQgQEAKIAkJICovCiAJCWlmIChpc1ZhckFyZ3MpIHsKIAkJCXNldFR5cGVGb3JTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uKHZhcmlhYmxlRGVjbCwgdHlwZSwgZXh0cmFEaW1lbnNpb25zICsg
MSk7CisJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
MzkxODk4CisJCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCAmJiAhdHlwZS5h
bm5vdGF0aW9ucygpLmlzRW1wdHkoKSkgeworCQkJCUl0ZXJhdG9yIGFubm90YXRpb25zID0gdHlw
ZS5hbm5vdGF0aW9ucy5pdGVyYXRvcigpOworCQkJCXdoaWxlIChhbm5vdGF0aW9ucy5oYXNOZXh0
KCkpIHsKKwkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRp
b25zLm5leHQoKTsKKwkJCQkJdmFyaWFibGVEZWNsLmFubm90YXRpb25zKCkuYWRkKChhbm5vdGF0
aW9uLmNsb25lKHRoaXMuYXN0KSkpOworCQkJCX0KKwkJCX0KIAkJCWlmIChleHRyYURpbWVuc2lv
bnMgIT0gMCkgewogCQkJCXZhcmlhYmxlRGVjbC5zZXRGbGFncyh2YXJpYWJsZURlY2wuZ2V0Rmxh
Z3MoKSB8IEFTVE5vZGUuTUFMRk9STUVEKTsKIAkJCX0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RNYXRj
aGVyLmphdmEKaW5kZXggNjQxODZiYi4uOWE2MjdiMjAgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNU
TWF0Y2hlci5qYXZhCkBAIC0xODg1LDcgKzE4ODUsOCBAQAogCQkgICAgc2FmZVN1YnRyZWVNYXRj
aChub2RlLmdldFR5cGUoKSwgby5nZXRUeXBlKCkpCiAJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChu
b2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpCiAJIAkJCSYmIG5vZGUuZ2V0RXh0cmFEaW1lbnNp
b25zKCkgPT0gby5nZXRFeHRyYURpbWVuc2lvbnMoKQotCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2go
bm9kZS5nZXRJbml0aWFsaXplcigpLCBvLmdldEluaXRpYWxpemVyKCkpOworCQkJCSYmIHNhZmVT
dWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigpLCBvLmdldEluaXRpYWxpemVyKCkpCisJ
CQkJJiYgKGxldmVsID49IEFTVC5KTFM4ICYmIG5vZGUuaXNWYXJhcmdzKCkpID8gc2FmZVN1YnRy
ZWVMaXN0TWF0Y2gobm9kZS5hbm5vdGF0aW9ucygpLCBvLmFubm90YXRpb25zKCkpIDogdHJ1ZTsJ
CQogCX0KIAogCS8qKgpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL2RvbS9TaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1NpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb24uamF2YQppbmRleCA0MzZhZjIxLi4zODRhZmZkIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL1NpbmdsZVZh
cmlhYmxlRGVjbGFyYXRpb24uamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3Jn
L2VjbGlwc2UvamR0L2NvcmUvZG9tL1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uamF2YQpAQCAt
NSw2ICs1LDEwIEBACiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5k
IGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEw
Lmh0bWwKICAqCisgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0
IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJv
Y2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRp
b24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55
IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KKyAqIAogICogQ29udHJpYnV0b3JzOgogICogICAg
IElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKiovCkBAIC0zMSw2ICszNSwxMSBAQAogICogPHByZT4KICAqIFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb246CiAgKiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIFsg
PGI+Li4uPC9iPiBdIElkZW50aWZpZXIgeyA8Yj5bPC9iPjxiPl08L2I+IH0gWyA8Yj49PC9iPiBF
eHByZXNzaW9uIF0KKyAqIDwvcHJlPgorICogRm9yIEpMUzgsIHZhcmFyZ3MgYXJlIGFsbG93ZWQg
dG8gaGF2ZSBvcHRpb25hbCBhbm5vdGF0aW9ucy4KKyAqIDxwcmU+CisgKiBTaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uOgorICogICAgeyBFeHRlbmRlZE1vZGlmaWVyIH0gVHlwZSBbXSBbIDxiPi4u
LjwvYj4gXSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9IFsgPGI+PTwvYj4gRXhwcmVz
c2lvbiBdCiAgKiA8L3ByZT4KICAqCiAgKiBAc2luY2UgMi4wCkBAIC03Miw2ICs4MSwxMyBAQAog
CSAqLwogCXB1YmxpYyBzdGF0aWMgZmluYWwgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9yIFZBUkFS
R1NfUFJPUEVSVFkgPQogCQluZXcgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9yKFNpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb24uY2xhc3MsICJ2YXJhcmdzIiwgYm9vbGVhbi5jbGFzcywgTUFOREFUT1JZ
KTsgLy8kTk9OLU5MUy0xJAorCQorCS8qKgorCSAqIFRoZSAiYW5ub3RhdGlvbnMiIHN0cnVjdHVy
YWwgcHJvcGVydHkgb2YgdGhpcyBub2RlIHR5cGUgKGNoaWxkIHR5cGU6IHtAbGluayBBbm5vdGF0
aW9ufSkuCisJICogQHNpbmNlIDMuOQorCSAqLworCXB1YmxpYyBzdGF0aWMgZmluYWwgQ2hpbGRM
aXN0UHJvcGVydHlEZXNjcmlwdG9yIEFOTk9UQVRJT05TX1BST1BFUlRZID0KKwkJbmV3IENoaWxk
TGlzdFByb3BlcnR5RGVzY3JpcHRvcihTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmNsYXNzLCAi
YW5ub3RhdGlvbnMiLCBBbm5vdGF0aW9uLmNsYXNzLCBDWUNMRV9SSVNLKTsgLy8kTk9OLU5MUy0x
JAogCiAJLyoqCiAJICogVGhlICJleHRyYURpbWVuc2lvbnMiIHN0cnVjdHVyYWwgcHJvcGVydHkg
b2YgdGhpcyBub2RlIHR5cGUgKHR5cGU6IHtAbGluayBJbnRlZ2VyfSkuCkBAIC0xMDIsNyArMTE4
LDE1IEBACiAJICogQHNpbmNlIDMuMQogCSAqLwogCXByaXZhdGUgc3RhdGljIGZpbmFsIExpc3Qg
UFJPUEVSVFlfREVTQ1JJUFRPUlNfM18wOwotCisJCisJLyoqCisJICogQSBsaXN0IG9mIHByb3Bl
cnR5IGRlc2NyaXB0b3JzIChlbGVtZW50IHR5cGU6CisJICoge0BsaW5rIFN0cnVjdHVyYWxQcm9w
ZXJ0eURlc2NyaXB0b3J9KSwKKwkgKiBvciBudWxsIGlmIHVuaW5pdGlhbGl6ZWQuCisJICogQHNp
bmNlIDMuOQorCSAqLworCXByaXZhdGUgc3RhdGljIGZpbmFsIExpc3QgUFJPUEVSVFlfREVTQ1JJ
UFRPUlNfOF8wOworCQogCXN0YXRpYyB7CiAJCUxpc3QgcHJvcGVydHlMaXN0ID0gbmV3IEFycmF5
TGlzdCg2KTsKIAkJY3JlYXRlUHJvcGVydHlMaXN0KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24u
Y2xhc3MsIHByb3BlcnR5TGlzdCk7CkBAIC0xMjIsNyArMTQ2LDIwIEBACiAJCWFkZFByb3BlcnR5
KEVYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CiAJCWFkZFByb3BlcnR5
KElOSVRJQUxJWkVSX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOwogCQlQUk9QRVJUWV9ERVNDUklQ
VE9SU18zXzAgPSByZWFwUHJvcGVydHlMaXN0KHByb3BlcnR5TGlzdCk7Ci0JfQorCQkKKwkJCisJ
CXByb3BlcnR5TGlzdCA9IG5ldyBBcnJheUxpc3QoOCk7CisJCWNyZWF0ZVByb3BlcnR5TGlzdChT
aW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmNsYXNzLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9w
ZXJ0eShNT0RJRklFUlMyX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShU
WVBFX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShBTk5PVEFUSU9OU19Q
Uk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoVkFSQVJHU19QUk9QRVJUWSwg
cHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoTkFNRV9QUk9QRVJUWSwgcHJvcGVydHlMaXN0
KTsKKwkJYWRkUHJvcGVydHkoRVhUUkFfRElNRU5TSU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0
KTsKKwkJYWRkUHJvcGVydHkoSU5JVElBTElaRVJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJ
CVBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMCA9IHJlYXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0
KTsJCQorCQorCQl9CiAKIAkvKioKIAkgKiBSZXR1cm5zIGEgbGlzdCBvZiBzdHJ1Y3R1cmFsIHBy
b3BlcnR5IGRlc2NyaXB0b3JzIGZvciB0aGlzIG5vZGUgdHlwZS4KQEAgLTEzNyw4ICsxNzQsMTAg
QEAKIAlwdWJsaWMgc3RhdGljIExpc3QgcHJvcGVydHlEZXNjcmlwdG9ycyhpbnQgYXBpTGV2ZWwp
IHsKIAkJaWYgKGFwaUxldmVsID09IEFTVC5KTFMyX0lOVEVSTkFMKSB7CiAJCQlyZXR1cm4gUFJP
UEVSVFlfREVTQ1JJUFRPUlNfMl8wOwotCQl9IGVsc2UgeworCQl9IGVsc2UgaWYgKGFwaUxldmVs
IDwgQVNULkpMUzgpIHsKIAkJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SU18zXzA7CisJCX0g
ZWxzZSB7CisJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wOwogCQl9CiAJfQogCkBA
IC0xOTIsNiArMjMxLDEyIEBACiAJcHJpdmF0ZSBFeHByZXNzaW9uIG9wdGlvbmFsSW5pdGlhbGl6
ZXIgPSBudWxsOwogCiAJLyoqCisJICogVGhlIHR5cGUgYW5ub3RhdGlvbnMgKGVsZW1lbnQgdHlw
ZToge0BsaW5rIEFubm90YXRpb259KS4KKwkgKiBAc2luY2UgMy45CisJICovCisJcHJvdGVjdGVk
IEFTVE5vZGUuTm9kZUxpc3QgYW5ub3RhdGlvbnMgPSBudWxsOworCisJLyoqCiAJICogQ3JlYXRl
cyBhIG5ldyBBU1Qgbm9kZSBmb3IgYSB2YXJpYWJsZSBkZWNsYXJhdGlvbiBvd25lZCBieSB0aGUg
Z2l2ZW4KIAkgKiBBU1QuIEJ5IGRlZmF1bHQsIHRoZSB2YXJpYWJsZSBkZWNsYXJhdGlvbiBoYXM6
IG5vIG1vZGlmaWVycywgYW4KIAkgKiB1bnNwZWNpZmllZCAoYnV0IGxlZ2FsKSB0eXBlLCBhbiB1
bnNwZWNpZmllZCAoYnV0IGxlZ2FsKSB2YXJpYWJsZSBuYW1lLApAQCAtMjA2LDYgKzI1MSw5IEBA
CiAJCXN1cGVyKGFzdCk7CiAJCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzNfSU5URVJOQUwp
IHsKIAkJCXRoaXMubW9kaWZpZXJzID0gbmV3IEFTVE5vZGUuTm9kZUxpc3QoTU9ESUZJRVJTMl9Q
Uk9QRVJUWSk7CisJCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFM4KSB7CisJCQkJdGhpcy5h
bm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KEFOTk9UQVRJT05TX1BST1BFUlRZKTsK
KwkJCX0KIAkJfQogCX0KIApAQCAtMzE5LDYgKzM2Nyw5IEBACiAJCWlmIChwcm9wZXJ0eSA9PSBN
T0RJRklFUlMyX1BST1BFUlRZKSB7CiAJCQlyZXR1cm4gbW9kaWZpZXJzKCk7CiAJCX0KKwkJaWYg
KHByb3BlcnR5ID09IEFOTk9UQVRJT05TX1BST1BFUlRZKSB7CisJCQlyZXR1cm4gYW5ub3RhdGlv
bnMoKTsKKwkJfQogCQkvLyBhbGxvdyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHRvIGZsYWcgdGhl
IGVycm9yCiAJCXJldHVybiBzdXBlci5pbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KHByb3Bl
cnR5KTsKIAl9CkBAIC0zNDcsNiArMzk4LDExIEBACiAJCXJlc3VsdC5zZXROYW1lKChTaW1wbGVO
YW1lKSBnZXROYW1lKCkuY2xvbmUodGFyZ2V0KSk7CiAJCXJlc3VsdC5zZXRJbml0aWFsaXplcigK
IAkJCShFeHByZXNzaW9uKSBBU1ROb2RlLmNvcHlTdWJ0cmVlKHRhcmdldCwgZ2V0SW5pdGlhbGl6
ZXIoKSkpOworCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKKwkJCXJlc3Vs
dC5hbm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KEFOTk9UQVRJT05TX1BST1BFUlRZ
KTsKKwkJCXJlc3VsdC5hbm5vdGF0aW9ucygpLmFkZEFsbCgKKwkJCQkJQVNUTm9kZS5jb3B5U3Vi
dHJlZXModGFyZ2V0LCBhbm5vdGF0aW9ucygpKSk7CisJCX0KIAkJcmV0dXJuIHJlc3VsdDsKIAl9
CiAKQEAgLTM2OSw2ICs0MjUsOSBAQAogCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMu
bW9kaWZpZXJzKTsKIAkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldFR5cGUoKSk7CisJ
CQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzggJiYgaXNWYXJhcmdzKCkpIHsKKwkJ
CQlhY2NlcHRDaGlsZHJlbih2aXNpdG9yLCB0aGlzLmFubm90YXRpb25zKTsKKwkJCX0KIAkJCWFj
Y2VwdENoaWxkKHZpc2l0b3IsIGdldE5hbWUoKSk7CiAJCQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBn
ZXRJbml0aWFsaXplcigpKTsKIAkJfQpAQCAtNjEzLDEzICs2NzIsMjggQEAKIAkJdGhpcy5vcHRp
b25hbEluaXRpYWxpemVyID0gaW5pdGlhbGl6ZXI7CiAJCXBvc3RSZXBsYWNlQ2hpbGQob2xkQ2hp
bGQsIGluaXRpYWxpemVyLElOSVRJQUxJWkVSX1BST1BFUlRZKTsKIAl9Ci0KKwkKKwkvKioKKwkg
KiBSZXR1cm5zIHRoZSBsaXZlIG9yZGVyZWQgbGlzdCBvZiBhbm5vdGF0aW9ucyBmb3IgdGhpcyBT
aW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uIG5vZGUuCisJICoKKwkgKiBAcmV0dXJuIHRoZSBsaXZl
IGxpc3Qgb2YgYW5ub3RhdGlvbnMgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFubm90YXRpb259KQor
CSAqIEBleGNlcHRpb24gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24gaWYgdGhpcyBvcGVy
YXRpb24gaXMgdXNlZAorCSAqICAgICAgICAgICAgaW4gYSBKTFMyLCBKTFMzIG9yIEpMUzQgQVNU
CisJICogQHNpbmNlIDMuOQorCSAqLworCXB1YmxpYyBMaXN0IGFubm90YXRpb25zKCkgeworCQlp
ZiAodGhpcy5hbm5vdGF0aW9ucyA9PSBudWxsKSB7CisJCQl1bnN1cHBvcnRlZEluMl8zXzQoKTsg
CisJCX0KKwkJcmV0dXJuIHRoaXMuYW5ub3RhdGlvbnM7CisJfQorCQogCS8qIChvbWl0IGphdmFk
b2MgZm9yIHRoaXMgbWV0aG9kKQogCSAqIE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAq
LwogCWludCBtZW1TaXplKCkgewogCQkvLyB0cmVhdCBPcGVyYXRvciBhcyBmcmVlCi0JCXJldHVy
biBCQVNFX05PREVfU0laRSArIDcgKiA0OworCQlyZXR1cm4gQkFTRV9OT0RFX1NJWkUgKyA4ICog
NDsKIAl9CiAKIAkvKiAob21pdCBqYXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTYyOCw2ICs3
MDIsNyBAQAogCWludCB0cmVlU2l6ZSgpIHsKIAkJcmV0dXJuCiAJCQltZW1TaXplKCkKKwkJCSsg
KHRoaXMuYW5ub3RhdGlvbnMgPT0gbnVsbCA/IDAgOiB0aGlzLmFubm90YXRpb25zLmxpc3RTaXpl
KCkpCiAJCQkrICh0aGlzLm1vZGlmaWVycyA9PSBudWxsID8gMCA6IHRoaXMubW9kaWZpZXJzLmxp
c3RTaXplKCkpCiAJCQkrICh0aGlzLnR5cGUgPT0gbnVsbCA/IDAgOiBnZXRUeXBlKCkudHJlZVNp
emUoKSkKIAkJCSsgKHRoaXMudmFyaWFibGVOYW1lID09IG51bGwgPyAwIDogZ2V0TmFtZSgpLnRy
ZWVTaXplKCkpCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZl
QVNURmxhdHRlbmVyLmphdmEKaW5kZXggMWQwOTU1Yi4uOTcwMzBmMSAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9O
YWl2ZUFTVEZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQpAQCAt
MTMxOCw2ICsxMzE4LDE3IEBACiAJCW5vZGUuZ2V0VHlwZSgpLmFjY2VwdCh0aGlzKTsKIAkJaWYg
KG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBKTFMzKSB7CiAJCQlpZiAobm9kZS5pc1ZhcmFy
Z3MoKSkgeworCQkJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNn
aT9pZD0zOTE4OTgKKwkJCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4
KSB7CisJCQkJCUxpc3QgYW5ub3RhdGlvbnMgPSBub2RlLmFubm90YXRpb25zKCk7CisJCQkJCWlm
IChhbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQkJCQlmb3IgKEl0ZXJhdG9yIGl0ID0gYW5ub3Rh
dGlvbnMuaXRlcmF0b3IoKTsgaXQuaGFzTmV4dCgpOyApIHsKKwkJCQkJCQl0aGlzLmJ1ZmZlci5h
cHBlbmQoJyAnKTsKKwkJCQkJCQlBbm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikg
aXQubmV4dCgpOworCQkJCQkJCWFubm90YXRpb24uYWNjZXB0KHRoaXMpOworCQkJCQkJfQorCQkJ
CQl9CisJCQkJfQogCQkJCXRoaXMuYnVmZmVyLmFwcGVuZCgiLi4uIik7Ly8kTk9OLU5MUy0xJAog
CQkJfQogCQl9Cg==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>223999</attachid>
            <date>2012-11-27 03:38:00 -0500</date>
            <delta_ts>2012-12-12 01:20:21 -0500</delta_ts>
            <desc>ASTRewrite Part of the original Patch</desc>
            <filename>Bug-391898--18compiler-Add-DOM-AST-support-for-annot.patch.ASTRewritePart</filename>
            <type>text/plain</type>
            <size>16284</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9k
RGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0
aG9kRGVjbFRlc3QuamF2YQppbmRleCA2M2IwYWE1Li5kOWNhNWEyIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5q
YXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdo
dCAoYykgMjAwMCwgMjAxMCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdo
dCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdo
dHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMK
ICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVi
bGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24s
IGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTIzNTAsOSArMjM1MCw5IEBACiAJCVN0cmluZ0J1ZmZl
ciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKIAkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtc
biIpOwogCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgREQge1xuIik7Ci0JCWJ1Zi5hcHBlbmQo
IiAgICBwcml2YXRlIHZvaWQgZm9vMShTdHJpbmcgZm9ybWF0LCBPYmplY3QuLi4gYXJncyl7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzEoU3RyaW5nIGZvcm1hdCwgT2Jq
ZWN0Li4uIGFyZ3Mpe1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKLQkJYnVmLmFwcGVu
ZCgiICAgIHByaXZhdGUgdm9pZCBmb28yKFN0cmluZyBmb3JtYXQsIE9iamVjdFtdIGFyZ3MpIHtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMihTdHJpbmcgZm9ybWF0LCBP
YmplY3RbXSBhcmdzKSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOwogCQlidWYuYXBw
ZW5kKCJ9XG4iKTsKIAkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRp
b25Vbml0KCJERC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKQEAgLTIzNzgs
OSArMjM3OCw5IEBACiAJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOwogCQlidWYuYXBwZW5kKCJw
YWNrYWdlIHRlc3QxO1xuIik7CiAJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBERCB7XG4iKTsK
LQkJYnVmLmFwcGVuZCgiICAgIHByaXZhdGUgdm9pZCBmb28xKFN0cmluZyBmb3JtYXQsIE9iamVj
dCBhcmdzKXtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMShTdHJpbmcg
Zm9ybWF0LCBPYmplY3QgYXJncyl7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOwotCQli
dWYuYXBwZW5kKCIgICAgcHJpdmF0ZSB2b2lkIGZvbzIoU3RyaW5nIGZvcm1hdCwgaW50Li4uIGFy
Z3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMihTdHJpbmcgZm9y
bWF0LCBpbnQuLi4gYXJncykge1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKIAkJYnVm
LmFwcGVuZCgifVxuIik7CiAJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmlu
ZygpKTsKQEAgLTI4NzEsNSArMjg3MSwxMzQgQEAKIAkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmll
dywgYnVmLnRvU3RyaW5nKCkpOwogCX0KIAorCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9i
dWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwlwdWJsaWMgdm9pZCB0ZXN0VmFyQXJnc0Fubm90
YXRpb25zKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0g
dGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBu
dWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBw
ZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgTWFya2Vy
IHtcbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNz
IEREIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vMShTdHJpbmcgZm9y
bWF0LCBPYmplY3QgQE1hcmtlci4uLiBhcmdzKXtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxu
Iik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28yKE9iamVjdCAuLi4gYXJncykg
e1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1Ymxp
YyB2b2lkIGZvbzMoT2JqZWN0IEBNYXJrZXIgLi4uIGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb280KE9iamVjdCBA
TWFya2VyLi4uIGFyZ3MpIHtcbiIpOyAKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYu
YXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vNShPYmplY3QgLi4uIGFyZ3MpIHtcbiIpOyAKKwkJ
YnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9v
NihPYmplY3QgYXJncykge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFw
cGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzcoT2JqZWN0IEBNYXJrZXIgLi4uIGFyZ3MpIHtcbiIp
OworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CQkKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2
b2lkIGZvbzgoT2JqZWN0IEBNYXJrZXIgLi4uIGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgfVxuIik7CQkKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzkoQEIgQEMgaW50
IEBBLi4uIGEpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQo
In1cbiIpOworCQlJQ29tcGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVu
aXQoIkRELmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNvbXBpbGF0
aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1QoQVNULkpMUzgsIGN1LCBmYWxzZSk7CisJCUFTVCBh
c3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5j
cmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlPSBmaW5kVHlw
ZURlY2xhcmF0aW9uKGFzdFJvb3QsICJERCIpOworCQkKKwkJeworCQkJLy8gUmVtb3ZlIGFubm90
YXRpb24gZnJvbSBmaXJzdCBtZXRob2QgYXJncyAtIGJvdW5kYXJ5IGNvbmRpdGlvbiAtCisJCQkv
LyAtIG9ubHkgb25lIGFubm90YXRpb24gc2hvdWxkIGJlIHByZXNlbnQuCisJCQlNZXRob2REZWNs
YXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzEiKTsK
KwkJCVNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24gcGFyYW0gPSAoU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDEpOworCQkJcmV3cml0ZS5yZW1v
dmUoKEFTVE5vZGUpcGFyYW0uYW5ub3RhdGlvbnMoKS5nZXQoMCksIG51bGwpOworCQkJCisJCQkv
LyBBZGQgb25lIGFubm90YXRpb24gdG8gdGhlIHNlY29uZCBtZXRob2QgLSBib3VuZGFyeSBjb25k
aXRpb24gCisJCQkvLyAtIG5vIGFubm90YXRpb24gc2hvdWxkIGJlIHByZXNlbnQKKwkJCW1ldGhv
ZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vMiIpOworCQkJcGFyYW0gPSAo
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDAp
OworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5u
b3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxl
TmFtZSgiWCIpKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKHBhcmFtLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkFOTk9UQVRJT05TX1BST1BF
UlRZKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEZpcnN0KG1hcmtlckFubm90YXRpb24sIG51bGwp
OworCisJCQkvLyBSZW1vdmUgdGhlIHZhcmFyZ3MgcHJvcGVydHkgLSBhbm5vdGF0aW9uKHMpIHNo
b3VsZCBkaXNhcHBlYXIKKwkJCW1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBl
LCAiZm9vMyIpOworCQkJcGFyYW0gPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgbWV0aG9k
RGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDApOworCQkJcmV3cml0ZS5zZXQocGFyYW0sIFNpbmdsZVZh
cmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSwgQm9vbGVhbi5GQUxTRSwgbnVsbCk7
CisKKwkJCS8vIFJlbW92ZSB0aGUgdmFyYXJncyBwcm9wZXJ0eSAtIGFubm90YXRpb24ocykgc2hv
dWxkIGRpc2FwcGVhcgorCQkJLy8gLSBkaWZmZXJzIGZyb20gdGhlIGFib3ZlIGR1ZSB0byB0aGUg
YWJzZW5jZSBvZiBhIGJsYW5rIGJlZm9yZSAuLi4KKwkJCW1ldGhvZERlY2w9IGZpbmRNZXRob2RE
ZWNsYXJhdGlvbih0eXBlLCAiZm9vNCIpOworCQkJcGFyYW0gPSAoU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDApOworCQkJcmV3cml0ZS5zZXQo
cGFyYW0sIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSwgQm9vbGVh
bi5GQUxTRSwgbnVsbCk7CisKKwkJCS8vIFJlbW92ZSB0aGUgdmFyYXJncyBwcm9wZXJ0eSAtIEV4
aXN0aW5nIGZ1bmN0aW9uYWxpdHkgdW5jaGFuZ2VkIHdpdGhvdXQgYW5ub3RhdGlvbnMKKwkJCW1l
dGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vNSIpOworCQkJcGFyYW0g
PSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCkuZ2V0
KDApOworCQkJcmV3cml0ZS5zZXQocGFyYW0sIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFS
QVJHU19QUk9QRVJUWSwgQm9vbGVhbi5GQUxTRSwgbnVsbCk7CisKKwkJCS8vIEFkZCB0aGUgdmFy
YXJncyBwcm9wZXJ0eSAgYW5kIGFubm90YXRpb24KKwkJCW1ldGhvZERlY2w9IGZpbmRNZXRob2RE
ZWNsYXJhdGlvbih0eXBlLCAiZm9vNiIpOworCQkJcGFyYW0gPSAoU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDApOworCQkJcmV3cml0ZS5zZXQo
cGFyYW0sIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSwgQm9vbGVh
bi5UUlVFLCBudWxsKTsKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0
aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1l
KCJYIikpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUocGFyYW0sIFNp
bmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlzdFJl
d3JpdGUuaW5zZXJ0Rmlyc3QobWFya2VyQW5ub3RhdGlvbiwgbnVsbCk7CisKKwkJCS8vIFJlcGxh
Y2UgYW5ub3RhdGlvbgorCQkJbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUs
ICJmb283Iik7CisJCQlwYXJhbSA9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBtZXRob2RE
ZWNsLnBhcmFtZXRlcnMoKS5nZXQoMCk7CisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFy
a2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3
U2ltcGxlTmFtZSgiWCIpKTsKKwkJCXJld3JpdGUucmVwbGFjZSgoQVNUTm9kZSlwYXJhbS5hbm5v
dGF0aW9ucygpLmdldCgwKSwgbWFya2VyQW5ub3RhdGlvbiwgbnVsbCk7CisKKwkJCS8vIFJlc2V0
IGFuZCBTZXQgVmFyYXJncyAtIG91dHB1dCBzaG91bGQgbm90IGNoYW5nZS4KKwkJCW1ldGhvZERl
Y2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vOCIpOworCQkJcGFyYW0gPSAoU2lu
Z2xlVmFyaWFibGVEZWNsYXJhdGlvbikgbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCkuZ2V0KDApOwor
CQkJcmV3cml0ZS5zZXQocGFyYW0sIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19Q
Uk9QRVJUWSwgQm9vbGVhbi5GQUxTRSwgbnVsbCk7CisJCQlyZXdyaXRlLnNldChwYXJhbSwgU2lu
Z2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZLCBCb29sZWFuLlRSVUUsIG51
bGwpOworCisJCQkvLyBBZGQgbXVsdGlwbGUgKHR3bykgYW5ub3RhdGlvbnMsIHJlbW92ZSBhbiBl
eGlzdGluZyBhbm5vdGF0aW9uCisJCQltZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24o
dHlwZSwgImZvbzkiKTsKKwkJCXBhcmFtID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIG1l
dGhvZERlY2wucGFyYW1ldGVycygpLmdldCgwKTsKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5u
ZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFz
dC5uZXdTaW1wbGVOYW1lKCJYIikpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJl
d3JpdGUocGFyYW0sIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVS
VFkpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0Rmlyc3QobWFya2VyQW5ub3RhdGlvbiwgbnVsbCk7
CisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFy
a2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiWSIpKTsKKwkJCWxp
c3RSZXdyaXRlLmluc2VydEZpcnN0KG1hcmtlckFubm90YXRpb24sIG51bGwpOworCQkJcmV3cml0
ZS5yZW1vdmUoKEFTVE5vZGUpcGFyYW0uYW5ub3RhdGlvbnMoKS5nZXQoMCksIG51bGwpOworCisJ
CX0KKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisKKwkJ
YnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBNYXJrZXIge1xuIik7CisJCWJ1Zi5hcHBlbmQo
In1cbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgREQge1xuIik7CisJCWJ1Zi5hcHBl
bmQoIiAgICBwdWJsaWMgdm9pZCBmb28xKFN0cmluZyBmb3JtYXQsIE9iamVjdCAuLi4gYXJncyl7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGlj
IHZvaWQgZm9vMihPYmplY3QgQFggLi4uIGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
fVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28zKE9iamVjdCBhcmdzKSB7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGlj
IHZvaWQgZm9vNChPYmplY3QgYXJncykge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzUoT2JqZWN0IGFyZ3MpIHtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBm
b282KE9iamVjdCBAWCAuLi5hcmdzKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vNyhPYmplY3QgQFggLi4uIGFyZ3MpIHtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CQkKKwkJYnVmLmFwcGVuZCgiICAgIHB1Ymxp
YyB2b2lkIGZvbzgoT2JqZWN0IEBNYXJrZXIgLi4uIGFyZ3MpIHtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgfVxuIik7CQkKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbzkoQEIgQEMg
aW50IEBZIEBYIC4uLiBhKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYu
YXBwZW5kKCJ9XG4iKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5n
KCkpOwkKKwl9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKaW5kZXggYjI2MTFhMS4uOGE3
ZTU5YiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhCisrKyBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9k
b20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YQpAQCAtMTU0NCw2ICsxNTQ0LDUyIEBA
CiAJCXJldHVybiBlbmRQb3M7CiAJfQogCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1
Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXByaXZhdGUgaW50IHJld3JpdGVWYXJhcmdzQW5u
b3RhdGlvbnMoQVNUTm9kZSBub2RlLCBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgcHJvcGVy
dHksIGludCBwb3MpIHsKKwkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA8IEFTVC5KTFM4
KSB7CisJCQlyZXR1cm4gcG9zOworCQl9CisJCVJld3JpdGVFdmVudCBldmVudD0gZ2V0RXZlbnQo
bm9kZSwgcHJvcGVydHkpOwkJCisJCWlmIChldmVudCA9PSBudWxsIHx8IGV2ZW50LmdldENoYW5n
ZUtpbmQoKSA9PSBSZXdyaXRlRXZlbnQuVU5DSEFOR0VEKSB7CisJCQlyZXR1cm4gZG9WaXNpdChu
b2RlLCBwcm9wZXJ0eSwgcG9zKTsKKwkJfQorCQlSZXdyaXRlRXZlbnRbXSBjaGlsZHJlbj0gZXZl
bnQuZ2V0Q2hpbGRyZW4oKTsKKwkJYm9vbGVhbiBpc0FsbEluc2VydD0gaXNBbGxPZktpbmQoY2hp
bGRyZW4sIFJld3JpdGVFdmVudC5JTlNFUlRFRCk7CisJCWJvb2xlYW4gaXNBbGxSZW1vdmU9IGlz
QWxsT2ZLaW5kKGNoaWxkcmVuLCBSZXdyaXRlRXZlbnQuUkVNT1ZFRCk7CisJCWlmIChpc0FsbElu
c2VydCB8fCBpc0FsbFJlbW92ZSkgeworCQkJLy8gdXBkYXRlIHBvcworCQkJdHJ5IHsKKwkJCQlw
b3M9IGdldFNjYW5uZXIoKS5nZXROZXh0U3RhcnRPZmZzZXQocG9zLCBmYWxzZSk7CisJCQl9IGNh
dGNoIChDb3JlRXhjZXB0aW9uIGUpIHsKKwkJCQloYW5kbGVFeGNlcHRpb24oZSk7CisJCQl9CisJ
CX0KKworCQlQcmVmaXggZm9ybWF0dGVyUHJlZml4OworCQlmb3JtYXR0ZXJQcmVmaXg9IHRoaXMu
Zm9ybWF0dGVyLlZBUkFSR1NfQU5OT1RBVElPTl9TRVBBUkFUSU9OOworCQlpbnQgZW5kUG9zPSBu
ZXcgTW9kaWZpZXJSZXdyaXRlcihmb3JtYXR0ZXJQcmVmaXgpLnJld3JpdGVMaXN0KG5vZGUsIHBy
b3BlcnR5LCBwb3MsIFV0aWwuRU1QVFlfU1RSSU5HLCAiICIpOyAvLyROT04tTkxTLTEkIAorCQl0
cnkgeworCQkJaW50IG5leHRQb3M9IGdldFNjYW5uZXIoKS5nZXROZXh0U3RhcnRPZmZzZXQoZW5k
UG9zLCBmYWxzZSk7CisKKwkJCWJvb2xlYW4gbGFzdFVuY2hhbmdlZD0gY2hpbGRyZW5bY2hpbGRy
ZW4ubGVuZ3RoIC0gMV0uZ2V0Q2hhbmdlS2luZCgpICE9IFJld3JpdGVFdmVudC5VTkNIQU5HRUQ7
CisJCQlpZiAoaXNBbGxSZW1vdmUpIHsKKwkJCWRvVGV4dFJlbW92ZShlbmRQb3MsIG5leHRQb3Mg
LSBlbmRQb3MsIGdldEVkaXRHcm91cChjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSkpOwor
CQkJCXJldHVybiBuZXh0UG9zOworCQkJfSBlbHNlIGlmIChpc0FsbEluc2VydCB8fCAobmV4dFBv
cyA9PSBlbmRQb3MgJiYgbGFzdFVuY2hhbmdlZCkpIHsgLy8gc2VlIGJ1ZyAxNjU2NTQKKwkJCQlS
ZXdyaXRlRXZlbnQgbGFzdENoaWxkPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXTsKKwkJ
CQlTdHJpbmcgc2VwYXJhdG9yOworCQkJCWlmIChsYXN0Q2hpbGQuZ2V0TmV3VmFsdWUoKSBpbnN0
YW5jZW9mIEFubm90YXRpb24pIHsKKwkJCQkJc2VwYXJhdG9yPSBmb3JtYXR0ZXJQcmVmaXguZ2V0
UHJlZml4KGdldEluZGVudChwb3MpKTsKKwkJCQl9IGVsc2UgeworCQkJCQlzZXBhcmF0b3I9IFN0
cmluZy52YWx1ZU9mKCcgJyk7CisJCQkJfQorCQkJCWRvVGV4dEluc2VydChlbmRQb3MsIHNlcGFy
YXRvciwgZ2V0RWRpdEdyb3VwKGxhc3RDaGlsZCkpOworCQkJfQorCQl9IGNhdGNoIChDb3JlRXhj
ZXB0aW9uIGUpIHsKKwkJCWhhbmRsZUV4Y2VwdGlvbihlKTsKKwkJfQorCQlyZXR1cm4gZW5kUG9z
OworCX0KIAogCXByaXZhdGUgdm9pZCByZXBsYWNlT3BlcmF0aW9uKGludCBwb3NCZWZvcmVPcGVy
YXRpb24sIFN0cmluZyBuZXdPcGVyYXRpb24sIFRleHRFZGl0R3JvdXAgZWRpdEdyb3VwKSB7CiAJ
CXRyeSB7CkBAIC0yODMyLDEwICsyODc4LDIwIEBACiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxl
dmVsKCkgPj0gSkxTM19JTlRFUk5BTCkgewogCQkJaWYgKGlzQ2hhbmdlZChub2RlLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpKSB7CiAJCQkJaWYgKGdldE5ld1Zh
bHVlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSkuZXF1
YWxzKEJvb2xlYW4uVFJVRSkpIHsKKwkJCQkJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1
Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCQkJCQlwb3MgPSByZXdyaXRlVmFyYXJnc0Fubm90
YXRpb25zKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uQU5OT1RBVElPTlNfUFJPUEVS
VFksIHBvcyk7CiAJCQkJCWRvVGV4dEluc2VydChwb3MsICIuLi4iLCBnZXRFZGl0R3JvdXAobm9k
ZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZKSk7IC8vJE5PTi1O
TFMtMSQKIAkJCQl9IGVsc2UgewogCQkJCQl0cnkgewogCQkJCQkJaW50IGVsbGlwc2lzRW5kPSBn
ZXRTY2FubmVyKCkuZ2V0TmV4dEVuZE9mZnNldChwb3MsIHRydWUpOworCQkJCQkJLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCQkJCQkJaWYg
KG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCAmJiBub2RlLmFubm90YXRpb25z
KCkuc2l6ZSgpID4gMCApIHsKKwkJCQkJCQlpbnQgYW5ub3RhdGlvblN0YXJ0UG9zaXRpb24gPSBu
b2RlLmdldFR5cGUoKS5nZXRTdGFydFBvc2l0aW9uKCkgKyBub2RlLmdldFR5cGUoKS5nZXRMZW5n
dGgoKTsKKwkJCQkJCQlpbnQgYW5ub3RhdGlvbkVuZFBvc2l0aW9uID0gYW5ub3RhdGlvblN0YXJ0
UG9zaXRpb24gKyBub2RlLmFubm90YXRpb25zKCkudG9TdHJpbmcoKS5sZW5ndGgoKSAtIDE7CisJ
CQkJCQkJZWxsaXBzaXNFbmQgPSBnZXRTY2FubmVyKCkuZ2V0TmV4dEVuZE9mZnNldChhbm5vdGF0
aW9uRW5kUG9zaXRpb24sIHRydWUpOworCQkJCQkJfSBlbHNlIHsKKwkJCQkJCQllbGxpcHNpc0Vu
ZD0gZ2V0U2Nhbm5lcigpLmdldE5leHRFbmRPZmZzZXQocG9zLCB0cnVlKTsKKwkJCQkJCX0JCQkJ
CQkJCiAJCQkJCQlkb1RleHRSZW1vdmUocG9zLCBlbGxpcHNpc0VuZCAtIHBvcywgZ2V0RWRpdEdy
b3VwKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSkpOwog
CQkJCQl9IGNhdGNoIChDb3JlRXhjZXB0aW9uIGUpIHsKIAkJCQkJCWhhbmRsZUV4Y2VwdGlvbihl
KTsKQEAgLTI4NDQsNiArMjkwMCwxMiBAQAogCQkJfQogCQkJaWYgKCFub2RlLmlzVmFyYXJncygp
KSB7CiAJCQkJZW5zdXJlU3BhY2VBZnRlclJlcGxhY2Uobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbi5UWVBFX1BST1BFUlRZKTsKKwkJCX0gZWxzZSB7Ly8gaHR0cHM6Ly9idWdzLmVjbGlw
c2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCQkJCWlmIChub2RlLmdldEFTVCgp
LmFwaUxldmVsKCkgPj0gQVNULkpMUzggJiYgIWlzQ2hhbmdlZChub2RlLCBTaW5nbGVWYXJpYWJs
ZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpCisJCQkJCQkmJiBub2RlLmlzVmFyYXJncygp
KSB7CisJCQkJCWludCBhbm5vdGF0aW9uU3RhcnRQb3NpdGlvbiA9IG5vZGUuZ2V0VHlwZSgpLmdl
dFN0YXJ0UG9zaXRpb24oKSArIG5vZGUuZ2V0VHlwZSgpLmdldExlbmd0aCgpOworCQkJCQlwb3Mg
PSByZXdyaXRlVmFyYXJnc0Fubm90YXRpb25zKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRp
b24uQU5OT1RBVElPTlNfUFJPUEVSVFksIGFubm90YXRpb25TdGFydFBvc2l0aW9uKTsKKwkJCQl9
CiAJCQl9CiAJCX0gZWxzZSB7CiAJCQllbnN1cmVTcGFjZUFmdGVyUmVwbGFjZShub2RlLCBTaW5n
bGVWYXJpYWJsZURlY2xhcmF0aW9uLlRZUEVfUFJPUEVSVFkpOwpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRl
bmVyLmphdmEKaW5kZXggMTRkMmI1OS4uNmZlNjgwNiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FT
VFJld3JpdGVGbGF0dGVuZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5l
ci5qYXZhCkBAIC03ODcsNiArNzg3LDExIEBACiAJCQl2aXNpdExpc3Qobm9kZSwgU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbi5NT0RJRklFUlMyX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZignICcp
LCBVdGlsLkVNUFRZX1NUUklORywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7CiAJCX0KIAkJZ2V0Q2hp
bGROb2RlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVFlQRV9QUk9QRVJUWSkuYWNj
ZXB0KHRoaXMpOworCQkKKwkJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19i
dWcuY2dpP2lkPTM5MTg5OAorCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID49IEFTVC5K
TFM4ICAmJiBub2RlLmlzVmFyYXJncygpKSB7CisJCQl2aXNpdExpc3Qobm9kZSwgU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSwgU3RyaW5nLnZhbHVlT2YoJyAn
KSwgVXRpbC5FTVBUWV9TVFJJTkcsIFN0cmluZy52YWx1ZU9mKCcgJykpOworCQl9CiAJCWlmIChu
b2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gSkxTM19JTlRFUk5BTCkgewogCQkJaWYgKGdldEJv
b2xlYW5BdHRyaWJ1dGUobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BS
T1BFUlRZKSkgewogCQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiLi4uIik7Ly8kTk9OLU5MUy0xJApk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGb3JtYXR0ZXIuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0
ZS9BU1RSZXdyaXRlRm9ybWF0dGVyLmphdmEKaW5kZXggOGUzOWY3ZC4uZDVjNmZjZSAxMDA2NDQK
LS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGb3JtYXR0ZXIuamF2YQorKysgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUv
QVNUUmV3cml0ZUZvcm1hdHRlci5qYXZhCkBAIC0xLDEwICsxLDE0IEBACiAvKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElCTSBDb3Jwb3JhdGlvbiBh
bmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBh
bmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUg
YWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBh
bmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3
dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqCisgKiBUaGlzIGlzIGFuIGltcGxl
bWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVy
IHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFi
bGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBjb2Rl
IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KKyAq
IAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJ
IGFuZCBpbXBsZW1lbnRhdGlvbgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCkBAIC01NTAsNiAr
NTU0LDcgQEAKIAlwdWJsaWMgZmluYWwgUHJlZml4IEZJUlNUX0VOVU1fQ09OU1Q9IG5ldyBGb3Jt
YXR0aW5nUHJlZml4KCJlbnVtIEUgeyBYO30iLCAieyBYIiAsIENvZGVGb3JtYXR0ZXIuS19DT01Q
SUxBVElPTl9VTklUKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCiAJcHVibGljIGZpbmFs
IFByZWZpeCBBTk5PVEFUSU9OX1NFUEFSQVRJT049IG5ldyBGb3JtYXR0aW5nUHJlZml4KCJAQSBA
QiBjbGFzcyBDIHt9IiwgIkEgQCIgLCBDb2RlRm9ybWF0dGVyLktfQ09NUElMQVRJT05fVU5JVCk7
IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAogCXB1YmxpYyBmaW5hbCBQcmVmaXggUEFSQU1f
QU5OT1RBVElPTl9TRVBBUkFUSU9OPSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgidm9pZCBmb28oQEEg
QEIgcCkgeyB9IiwgIkEgQCIgLCBDb2RlRm9ybWF0dGVyLktfQ0xBU1NfQk9EWV9ERUNMQVJBVElP
TlMpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwlwdWJsaWMgZmluYWwgUHJlZml4IFZB
UkFSR1NfQU5OT1RBVElPTl9TRVBBUkFUSU9OPSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgidm9pZCBm
b28ocCBAQSBAQi4uLikgeyB9IiwgIkEgQCIgLCBDb2RlRm9ybWF0dGVyLktfQ0xBU1NfQk9EWV9E
RUNMQVJBVElPTlMpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAlwdWJsaWMgZmluYWwg
UHJlZml4IFRSWV9SRVNPVVJDRVMgPSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgidHJ5IChBIGEgPSBu
ZXcgQSgpOyBCIGIgPSBuZXcgQigpKSB7fSIsICI7IEIiICwgQ29kZUZvcm1hdHRlci5LX1NUQVRF
TUVOVFMpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAlwdWJsaWMgZmluYWwgUHJlZml4
IFRSWV9SRVNPVVJDRVNfUEFSRU4gPSBuZXcgRm9ybWF0dGluZ1ByZWZpeCgidHJ5IChBIGEgPSBu
ZXcgQSgpOyBCIGIgPSBuZXcgQigpKSB7fSIsICJ5ICgiICwgQ29kZUZvcm1hdHRlci5LX1NUQVRF
TUVOVFMpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAkK
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>224260</attachid>
            <date>2012-12-04 07:27:00 -0500</date>
            <delta_ts>2012-12-13 20:22:24 -0500</delta_ts>
            <desc>Proposed Patch - NONASTRewrite Part - Reworked</desc>
            <filename>Bug-391898---18compiler-Add-DOM-AST-support-for-annot.NONASTRewrite.patch</filename>
            <type>text/plain</type>
            <size>15394</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjVlODI3ZGEKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAxIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRlc3QwMDAxKCkgdGhy
b3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIgl9XG4iICsKKwkJCSIgCXB1Ymxp
YyB2b2lkIGJhcihATWFya2VyIGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIiAJfVxu
IiArCisJCQkifSI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZl
cnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBi
dWlsZEFTVCgKKwkJCWNvbnRlbnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVx
dWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwg
bm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9
IChDb21waWxhdGlvblVuaXQpIG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlv
blVuaXQsIDApOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOwor
CQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBl
KCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbWV0aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMo
Indyb25nIHNpemUiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gcGFyYW1ldGVyID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRl
cnMuZ2V0KDApOworCQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0
aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEs
IGFubm90YXRpb25zLnNpemUoKSk7CisJCUFTVE5vZGUgYW5ub3RhdGlvbiA9IChBU1ROb2RlKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWNoZWNrU291cmNlUmFuZ2UoYW5ub3RhdGlvbiwgIkBNYXJr
ZXIiLCBjb250ZW50cyk7CisJCW5vZGUgPSBnZXRBU1ROb2RlKGNvbXBpbGF0aW9uVW5pdCwxLDEp
OworCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVU
eXBlKCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlwYXJhbWV0ZXJzID0gbWV0
aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJl
ciBvZiBwYXJhbWV0ZXJzIiwgMSwgcGFyYW1ldGVycy5zaXplKCkpOworCQlwYXJhbWV0ZXIgPSAo
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgcGFyYW1ldGVycy5nZXQoMCk7CisJCWFubm90YXRp
b25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldy
b25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEsIGFubm90YXRpb25zLnNpemUoKSk7CisJCWFu
bm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOworCQljaGVja1NvdXJjZVJh
bmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOworCX0KK30KZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29y
ZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRl
c3QuamF2YQppbmRleCAzMmE0NDQ3Li5iOWVlM2I3IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FT
VE1hdGNoZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5qYXZhCkBA
IC0zOSw2ICszOSw4IEBACiAJCQlpZiAobWV0aG9kc1tpXS5nZXROYW1lKCkuc3RhcnRzV2l0aCgi
dGVzdCIpKSB7IC8vJE5PTi1OTFMtMSQKIAkJCQlzdWl0ZS5hZGRUZXN0KG5ldyBBU1RNYXRjaGVy
VGVzdChtZXRob2RzW2ldLmdldE5hbWUoKSwgQVNULkpMUzIpKTsKIAkJCQlzdWl0ZS5hZGRUZXN0
KG5ldyBBU1RNYXRjaGVyVGVzdChtZXRob2RzW2ldLmdldE5hbWUoKSwgSkxTM19JTlRFUk5BTCkp
OworCQkJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0z
OTE4OTgKKwkJCQlzdWl0ZS5hZGRUZXN0KG5ldyBBU1RNYXRjaGVyVGVzdChtZXRob2RzW2ldLmdl
dE5hbWUoKSwgQVNULkpMUzgpKTsKIAkJCX0KIAkJfQogCQlyZXR1cm4gc3VpdGU7CkBAIC0xMzIw
LDQgKzEzMjIsMTYgQEAKIAkJYmFzaWNNYXRjaCh4MSk7CiAJfQogCisJLy8gaHR0cHM6Ly9idWdz
LmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRl
c3RTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uVmFyYXJnc0Fubm90YXRpb24oKSB7CisJCWlmICh0
aGlzLmFzdC5hcGlMZXZlbCgpIDwgQVNULkpMUzgpIHsKKwkJCXJldHVybjsKKwkJfQorCQlTaW5n
bGVWYXJpYWJsZURlY2xhcmF0aW9uIHgxID0gdGhpcy5hc3QubmV3U2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbigpOworCQl4MS5zZXRUeXBlKHRoaXMuVDEpOworCQl4MS5zZXROYW1lKHRoaXMuTjEp
OworCQl4MS5zZXRWYXJhcmdzKHRydWUpOworCQl4MS52YXJhcmdzQW5ub3RhdGlvbnMoKS5hZGQo
dGhpcy5BTk8xKTsKKwkJYmFzaWNNYXRjaCh4MSk7CisJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2RvbS9SdW5Db252ZXJ0ZXJUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0ZXJUZXN0
cy5qYXZhCmluZGV4IGUwZTExYzEuLjRhMzQ5MTMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vUnVu
Q29udmVydGVyVGVzdHMuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL1J1bkNvbnZlcnRlclRlc3RzLmph
dmEKQEAgLTQ2LDYgKzQ2LDcgQEAKIAkJQVNUQ29udmVydGVyMTVKTFM0VGVzdC5jbGFzcywKIAkJ
QVNUQ29udmVydGVyMTVKTFM4VGVzdC5jbGFzcywKIAkJVHlwZUFubm90YXRpb25zQ29udmVydGVy
VGVzdC5jbGFzcywKKwkJQVNUQ29udmVydGVyMThUZXN0LmNsYXNzLAogCX07CiB9CiBwdWJsaWMg
c3RhdGljIFRlc3Qgc3VpdGUoKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9k
b20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2
YQppbmRleCBlYjI1N2QyLi40OWYxOTI0IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVy
dGVyLmphdmEKQEAgLTc5NSw2ICs3OTUsMTQgQEAKIAkJICovCiAJCWlmIChpc1ZhckFyZ3MpIHsK
IAkJCXNldFR5cGVGb3JTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKHZhcmlhYmxlRGVjbCwgdHlw
ZSwgZXh0cmFEaW1lbnNpb25zICsgMSk7CisJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcv
YnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwoKSA+
PSBBU1QuSkxTOCAmJiAhdHlwZS5hbm5vdGF0aW9ucygpLmlzRW1wdHkoKSkgeworCQkJCUl0ZXJh
dG9yIGFubm90YXRpb25zID0gdHlwZS5hbm5vdGF0aW9ucy5pdGVyYXRvcigpOworCQkJCXdoaWxl
IChhbm5vdGF0aW9ucy5oYXNOZXh0KCkpIHsKKwkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0g
KEFubm90YXRpb24pIGFubm90YXRpb25zLm5leHQoKTsKKwkJCQkJdmFyaWFibGVEZWNsLnZhcmFy
Z3NBbm5vdGF0aW9ucygpLmFkZCgoYW5ub3RhdGlvbi5jbG9uZSh0aGlzLmFzdCkpKTsKKwkJCQl9
CisJCQl9CiAJCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKIAkJCQl2YXJpYWJsZURlY2wu
c2V0RmxhZ3ModmFyaWFibGVEZWNsLmdldEZsYWdzKCkgfCBBU1ROb2RlLk1BTEZPUk1FRCk7CiAJ
CQl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCmluZGV4IDY0MTg2YmIuLmVkYzY0
NTQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
Y29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCkBAIC0xODg1LDcgKzE4ODUs
OCBAQAogCQkgICAgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldFR5cGUoKSwgby5nZXRUeXBlKCkp
CiAJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpCiAJ
IAkJCSYmIG5vZGUuZ2V0RXh0cmFEaW1lbnNpb25zKCkgPT0gby5nZXRFeHRyYURpbWVuc2lvbnMo
KQotCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigpLCBvLmdldElu
aXRpYWxpemVyKCkpOworCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXpl
cigpLCBvLmdldEluaXRpYWxpemVyKCkpCisJCQkJJiYgKGxldmVsID49IEFTVC5KTFM4ICYmIG5v
ZGUuaXNWYXJhcmdzKCkpID8gc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS52YXJhcmdzQW5ub3Rh
dGlvbnMoKSwgby52YXJhcmdzQW5ub3RhdGlvbnMoKSkgOiB0cnVlOwkJCiAJfQogCiAJLyoqCmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUv
ZG9tL1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5q
YXZhCmluZGV4IDQzNmFmMjEuLjdiZWFiMGEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29y
ZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5qYXZhCkBAIC01LDYgKzUsMTAgQEAKICAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAogICoKKyAqIFRo
aXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBk
ZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBp
cyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcworICog
b25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBv
ZiB0aGUgSkNQLgorICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9u
IC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ki8KQEAgLTMxLDYgKzM1LDExIEBACiAgKiA8cHJlPgogICogU2luZ2xlVmFyaWFibGVEZWNsYXJh
dGlvbjoKICAqICAgIHsgRXh0ZW5kZWRNb2RpZmllciB9IFR5cGUgWyA8Yj4uLi48L2I+IF0gSWRl
bnRpZmllciB7IDxiPls8L2I+PGI+XTwvYj4gfSBbIDxiPj08L2I+IEV4cHJlc3Npb24gXQorICog
PC9wcmU+CisgKiBGb3IgSkxTOCwgdmFyYXJncyBhcmUgYWxsb3dlZCB0byBoYXZlIG9wdGlvbmFs
IGFubm90YXRpb25zLgorICogPHByZT4KKyAqIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb246Cisg
KiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIFtdIHtBbm5vdGF0aW9ufSBbIDxiPi4uLjwv
Yj4gXSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9IFsgPGI+PTwvYj4gRXhwcmVzc2lv
biBdCiAgKiA8L3ByZT4KICAqCiAgKiBAc2luY2UgMi4wCkBAIC03Miw2ICs4MSwxMyBAQAogCSAq
LwogCXB1YmxpYyBzdGF0aWMgZmluYWwgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9yIFZBUkFSR1Nf
UFJPUEVSVFkgPQogCQluZXcgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9yKFNpbmdsZVZhcmlhYmxl
RGVjbGFyYXRpb24uY2xhc3MsICJ2YXJhcmdzIiwgYm9vbGVhbi5jbGFzcywgTUFOREFUT1JZKTsg
Ly8kTk9OLU5MUy0xJAorCQorCS8qKgorCSAqIFRoZSAiYW5ub3RhdGlvbnMiIHN0cnVjdHVyYWwg
cHJvcGVydHkgb2YgdmFyYXJncyBvZiB0aGlzIG5vZGUgdHlwZSAoY2hpbGQgdHlwZToge0BsaW5r
IEFubm90YXRpb259KS4KKwkgKiBAc2luY2UgMy45CisJICovCisJcHVibGljIHN0YXRpYyBmaW5h
bCBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJU
WSA9CisJCW5ldyBDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IoU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbi5jbGFzcywgImFubm90YXRpb25zIiwgQW5ub3RhdGlvbi5jbGFzcywgTk9fQ1lDTEVf
UklTSyk7IC8vJE5PTi1OTFMtMSQKIAogCS8qKgogCSAqIFRoZSAiZXh0cmFEaW1lbnNpb25zIiBz
dHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHRoaXMgbm9kZSB0eXBlICh0eXBlOiB7QGxpbmsgSW50ZWdl
cn0pLgpAQCAtMTAyLDcgKzExOCwxNSBAQAogCSAqIEBzaW5jZSAzLjEKIAkgKi8KIAlwcml2YXRl
IHN0YXRpYyBmaW5hbCBMaXN0IFBST1BFUlRZX0RFU0NSSVBUT1JTXzNfMDsKLQorCQorCS8qKgor
CSAqIEEgbGlzdCBvZiBwcm9wZXJ0eSBkZXNjcmlwdG9ycyAoZWxlbWVudCB0eXBlOgorCSAqIHtA
bGluayBTdHJ1Y3R1cmFsUHJvcGVydHlEZXNjcmlwdG9yfSksCisJICogb3IgbnVsbCBpZiB1bmlu
aXRpYWxpemVkLgorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBM
aXN0IFBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMDsKKwkKIAlzdGF0aWMgewogCQlMaXN0IHByb3Bl
cnR5TGlzdCA9IG5ldyBBcnJheUxpc3QoNik7CiAJCWNyZWF0ZVByb3BlcnR5TGlzdChTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLmNsYXNzLCBwcm9wZXJ0eUxpc3QpOwpAQCAtMTIyLDcgKzE0Niwy
MCBAQAogCQlhZGRQcm9wZXJ0eShFWFRSQV9ESU1FTlNJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxp
c3QpOwogCQlhZGRQcm9wZXJ0eShJTklUSUFMSVpFUl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsK
IAkJUFJPUEVSVFlfREVTQ1JJUFRPUlNfM18wID0gcmVhcFByb3BlcnR5TGlzdChwcm9wZXJ0eUxp
c3QpOwotCX0KKwkJCisJCQorCQlwcm9wZXJ0eUxpc3QgPSBuZXcgQXJyYXlMaXN0KDgpOworCQlj
cmVhdGVQcm9wZXJ0eUxpc3QoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5jbGFzcywgcHJvcGVy
dHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoTU9ESUZJRVJTMl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0
KTsKKwkJYWRkUHJvcGVydHkoVFlQRV9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJv
cGVydHkoVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRk
UHJvcGVydHkoVkFSQVJHU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHko
TkFNRV9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoRVhUUkFfRElNRU5T
SU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJYWRkUHJvcGVydHkoSU5JVElBTElaRVJf
UFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCVBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMCA9IHJl
YXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsJCQorCQorCQl9CiAKIAkvKioKIAkgKiBSZXR1
cm5zIGEgbGlzdCBvZiBzdHJ1Y3R1cmFsIHByb3BlcnR5IGRlc2NyaXB0b3JzIGZvciB0aGlzIG5v
ZGUgdHlwZS4KQEAgLTEzNyw4ICsxNzQsMTAgQEAKIAlwdWJsaWMgc3RhdGljIExpc3QgcHJvcGVy
dHlEZXNjcmlwdG9ycyhpbnQgYXBpTGV2ZWwpIHsKIAkJaWYgKGFwaUxldmVsID09IEFTVC5KTFMy
X0lOVEVSTkFMKSB7CiAJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlNfMl8wOwotCQl9IGVs
c2UgeworCQl9IGVsc2UgaWYgKGFwaUxldmVsIDwgQVNULkpMUzgpIHsKIAkJCXJldHVybiBQUk9Q
RVJUWV9ERVNDUklQVE9SU18zXzA7CisJCX0gZWxzZSB7CisJCQlyZXR1cm4gUFJPUEVSVFlfREVT
Q1JJUFRPUlNfOF8wOwogCQl9CiAJfQogCkBAIC0xOTIsNiArMjMxLDEyIEBACiAJcHJpdmF0ZSBF
eHByZXNzaW9uIG9wdGlvbmFsSW5pdGlhbGl6ZXIgPSBudWxsOwogCiAJLyoqCisJICogVGhlIHR5
cGUgYW5ub3RhdGlvbnMgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFubm90YXRpb259KS4KKwkgKiBA
c2luY2UgMy45CisJICovCisJcHJpdmF0ZSBBU1ROb2RlLk5vZGVMaXN0IHZhcmFyZ3NBbm5vdGF0
aW9ucyA9IG51bGw7CisKKwkvKioKIAkgKiBDcmVhdGVzIGEgbmV3IEFTVCBub2RlIGZvciBhIHZh
cmlhYmxlIGRlY2xhcmF0aW9uIG93bmVkIGJ5IHRoZSBnaXZlbgogCSAqIEFTVC4gQnkgZGVmYXVs
dCwgdGhlIHZhcmlhYmxlIGRlY2xhcmF0aW9uIGhhczogbm8gbW9kaWZpZXJzLCBhbgogCSAqIHVu
c3BlY2lmaWVkIChidXQgbGVnYWwpIHR5cGUsIGFuIHVuc3BlY2lmaWVkIChidXQgbGVnYWwpIHZh
cmlhYmxlIG5hbWUsCkBAIC0yMDYsNiArMjUxLDkgQEAKIAkJc3VwZXIoYXN0KTsKIAkJaWYgKGFz
dC5hcGlMZXZlbCA+PSBBU1QuSkxTM19JTlRFUk5BTCkgewogCQkJdGhpcy5tb2RpZmllcnMgPSBu
ZXcgQVNUTm9kZS5Ob2RlTGlzdChNT0RJRklFUlMyX1BST1BFUlRZKTsKKwkJCWlmIChhc3QuYXBp
TGV2ZWwgPj0gQVNULkpMUzgpIHsKKwkJCQl0aGlzLnZhcmFyZ3NBbm5vdGF0aW9ucyA9IG5ldyBB
U1ROb2RlLk5vZGVMaXN0KFZBUkFSR1NfQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJfQogCQl9
CiAJfQogCkBAIC0zMTksNiArMzY3LDkgQEAKIAkJaWYgKHByb3BlcnR5ID09IE1PRElGSUVSUzJf
UFJPUEVSVFkpIHsKIAkJCXJldHVybiBtb2RpZmllcnMoKTsKIAkJfQorCQlpZiAocHJvcGVydHkg
PT0gVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJUWSkgeworCQkJcmV0dXJuIHZhcmFyZ3NBbm5v
dGF0aW9ucygpOworCQl9CiAJCS8vIGFsbG93IGRlZmF1bHQgaW1wbGVtZW50YXRpb24gdG8gZmxh
ZyB0aGUgZXJyb3IKIAkJcmV0dXJuIHN1cGVyLmludGVybmFsR2V0Q2hpbGRMaXN0UHJvcGVydHko
cHJvcGVydHkpOwogCX0KQEAgLTM0Nyw2ICszOTgsMTEgQEAKIAkJcmVzdWx0LnNldE5hbWUoKFNp
bXBsZU5hbWUpIGdldE5hbWUoKS5jbG9uZSh0YXJnZXQpKTsKIAkJcmVzdWx0LnNldEluaXRpYWxp
emVyKAogCQkJKEV4cHJlc3Npb24pIEFTVE5vZGUuY29weVN1YnRyZWUodGFyZ2V0LCBnZXRJbml0
aWFsaXplcigpKSk7CisJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgeworCQkJ
cmVzdWx0LnZhcmFyZ3NBbm5vdGF0aW9ucyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KFZBUkFSR1Nf
QU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJcmVzdWx0LnZhcmFyZ3NBbm5vdGF0aW9ucygpLmFk
ZEFsbCgKKwkJCQkJQVNUTm9kZS5jb3B5U3VidHJlZXModGFyZ2V0LCB2YXJhcmdzQW5ub3RhdGlv
bnMoKSkpOworCQl9CiAJCXJldHVybiByZXN1bHQ7CiAJfQogCkBAIC0zNjksNiArNDI1LDkgQEAK
IAkJCQlhY2NlcHRDaGlsZHJlbih2aXNpdG9yLCB0aGlzLm1vZGlmaWVycyk7CiAJCQl9CiAJCQlh
Y2NlcHRDaGlsZCh2aXNpdG9yLCBnZXRUeXBlKCkpOworCQkJaWYgKHRoaXMuYXN0LmFwaUxldmVs
ID49IEFTVC5KTFM4ICYmIGlzVmFyYXJncygpKSB7CisJCQkJYWNjZXB0Q2hpbGRyZW4odmlzaXRv
ciwgdGhpcy52YXJhcmdzQW5ub3RhdGlvbnMpOworCQkJfQogCQkJYWNjZXB0Q2hpbGQodmlzaXRv
ciwgZ2V0TmFtZSgpKTsKIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldEluaXRpYWxpemVyKCkp
OwogCQl9CkBAIC02MTMsMTMgKzY3MiwyOCBAQAogCQl0aGlzLm9wdGlvbmFsSW5pdGlhbGl6ZXIg
PSBpbml0aWFsaXplcjsKIAkJcG9zdFJlcGxhY2VDaGlsZChvbGRDaGlsZCwgaW5pdGlhbGl6ZXIs
SU5JVElBTElaRVJfUFJPUEVSVFkpOwogCX0KLQorCQorCS8qKgorCSAqIFJldHVybnMgdGhlICBv
cmRlcmVkIGxpc3Qgb2YgYW5ub3RhdGlvbnMgb2YgdmFyaWFibGUgYXJndW1lbnRzLgorCSAqCisJ
ICogQHJldHVybiB0aGUgbGlzdCBvZiBhbm5vdGF0aW9ucyBvZiB0aGUgdmFyYXJncyAoZWxlbWVu
dCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlvbn0pCisJICogQGV4Y2VwdGlvbiBVbnN1cHBvcnRlZE9w
ZXJhdGlvbkV4Y2VwdGlvbiBpZiB0aGlzIG9wZXJhdGlvbiBpcyB1c2VkCisJICogICAgICAgICAg
ICBpbiBhIEpMUzIsIEpMUzMgb3IgSkxTNCBBU1QKKwkgKiBAc2luY2UgMy45CisJICovCisJcHVi
bGljIExpc3QgdmFyYXJnc0Fubm90YXRpb25zKCkgeworCQlpZiAodGhpcy52YXJhcmdzQW5ub3Rh
dGlvbnMgPT0gbnVsbCkgeworCQkJdW5zdXBwb3J0ZWRJbjJfM180KCk7IAorCQl9CisJCXJldHVy
biB0aGlzLnZhcmFyZ3NBbm5vdGF0aW9uczsKKwl9CisJCiAJLyogKG9taXQgamF2YWRvYyBmb3Ig
dGhpcyBtZXRob2QpCiAJICogTWV0aG9kIGRlY2xhcmVkIG9uIEFTVE5vZGUuCiAJICovCiAJaW50
IG1lbVNpemUoKSB7CiAJCS8vIHRyZWF0IE9wZXJhdG9yIGFzIGZyZWUKLQkJcmV0dXJuIEJBU0Vf
Tk9ERV9TSVpFICsgNyAqIDQ7CisJCXJldHVybiBCQVNFX05PREVfU0laRSArIDggKiA0OwogCX0K
IAogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQpAQCAtNjI4LDYgKzcwMiw3IEBA
CiAJaW50IHRyZWVTaXplKCkgewogCQlyZXR1cm4KIAkJCW1lbVNpemUoKQorCQkJKyAodGhpcy52
YXJhcmdzQW5ub3RhdGlvbnMgPT0gbnVsbCA/IDAgOiB0aGlzLnZhcmFyZ3NBbm5vdGF0aW9ucy5s
aXN0U2l6ZSgpKQogCQkJKyAodGhpcy5tb2RpZmllcnMgPT0gbnVsbCA/IDAgOiB0aGlzLm1vZGlm
aWVycy5saXN0U2l6ZSgpKQogCQkJKyAodGhpcy50eXBlID09IG51bGwgPyAwIDogZ2V0VHlwZSgp
LnRyZWVTaXplKCkpCiAJCQkrICh0aGlzLnZhcmlhYmxlTmFtZSA9PSBudWxsID8gMCA6IGdldE5h
bWUoKS50cmVlU2l6ZSgpKQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2Rv
bS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCmluZGV4IDFkMDk1NWIuLmQzMzg5YTYgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29y
ZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9k
b20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmph
dmEKQEAgLTEzMTgsNiArMTMxOCwxOCBAQAogCQlub2RlLmdldFR5cGUoKS5hY2NlcHQodGhpcyk7
CiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gSkxTMykgewogCQkJaWYgKG5vZGUu
aXNWYXJhcmdzKCkpIHsKKwkJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93
X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBB
U1QuSkxTOCkgeworCQkJCQlMaXN0IGFubm90YXRpb25zID0gbm9kZS52YXJhcmdzQW5ub3RhdGlv
bnMoKTsKKwkJCQkJaWYgKGFubm90YXRpb25zICE9IG51bGwpIHsKKwkJCQkJCWZvciAoSXRlcmF0
b3IgaXQgPSBhbm5vdGF0aW9ucy5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7ICkgeworCQkJCQkJ
CUFubm90YXRpb24gYW5ub3RhdGlvbiA9IChBbm5vdGF0aW9uKSBpdC5uZXh0KCk7CisJCQkJCQkJ
YW5ub3RhdGlvbi5hY2NlcHQodGhpcyk7CisJCQkJCQkJdGhpcy5idWZmZXIuYXBwZW5kKCcgJyk7
CisJCQkJCQl9CisJCQkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoJyAnKTsJCQkJCQkKKwkJCQkJfQor
CQkJCX0KIAkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4uLiIpOy8vJE5PTi1OTFMtMSQKIAkJCX0K
IAkJfQ==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>224702</attachid>
            <date>2012-12-13 20:22:00 -0500</date>
            <delta_ts>2013-01-02 04:20:49 -0500</delta_ts>
            <desc>Proposed Patch [after rework]</desc>
            <filename>Bug-391898---18compiler-Add-DOM-AST-support-for-annot.NONASTRewrite.reworked.patch</filename>
            <type>text/plain</type>
            <size>15405</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjVlODI3ZGEKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAxIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRlc3QwMDAxKCkgdGhy
b3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIgl9XG4iICsKKwkJCSIgCXB1Ymxp
YyB2b2lkIGJhcihATWFya2VyIGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIiAJfVxu
IiArCisJCQkifSI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZl
cnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBi
dWlsZEFTVCgKKwkJCWNvbnRlbnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVx
dWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwg
bm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9
IChDb21waWxhdGlvblVuaXQpIG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlv
blVuaXQsIDApOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOwor
CQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBl
KCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbWV0aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMo
Indyb25nIHNpemUiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gcGFyYW1ldGVyID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRl
cnMuZ2V0KDApOworCQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0
aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEs
IGFubm90YXRpb25zLnNpemUoKSk7CisJCUFTVE5vZGUgYW5ub3RhdGlvbiA9IChBU1ROb2RlKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWNoZWNrU291cmNlUmFuZ2UoYW5ub3RhdGlvbiwgIkBNYXJr
ZXIiLCBjb250ZW50cyk7CisJCW5vZGUgPSBnZXRBU1ROb2RlKGNvbXBpbGF0aW9uVW5pdCwxLDEp
OworCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVU
eXBlKCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlwYXJhbWV0ZXJzID0gbWV0
aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJl
ciBvZiBwYXJhbWV0ZXJzIiwgMSwgcGFyYW1ldGVycy5zaXplKCkpOworCQlwYXJhbWV0ZXIgPSAo
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgcGFyYW1ldGVycy5nZXQoMCk7CisJCWFubm90YXRp
b25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldy
b25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEsIGFubm90YXRpb25zLnNpemUoKSk7CisJCWFu
bm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOworCQljaGVja1NvdXJjZVJh
bmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOworCX0KK30KZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29y
ZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRl
c3QuamF2YQppbmRleCAzMmE0NDQ3Li5iOWVlM2I3IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FT
VE1hdGNoZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5qYXZhCkBA
IC0zOSw2ICszOSw4IEBACiAJCQlpZiAobWV0aG9kc1tpXS5nZXROYW1lKCkuc3RhcnRzV2l0aCgi
dGVzdCIpKSB7IC8vJE5PTi1OTFMtMSQKIAkJCQlzdWl0ZS5hZGRUZXN0KG5ldyBBU1RNYXRjaGVy
VGVzdChtZXRob2RzW2ldLmdldE5hbWUoKSwgQVNULkpMUzIpKTsKIAkJCQlzdWl0ZS5hZGRUZXN0
KG5ldyBBU1RNYXRjaGVyVGVzdChtZXRob2RzW2ldLmdldE5hbWUoKSwgSkxTM19JTlRFUk5BTCkp
OworCQkJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0z
OTE4OTgKKwkJCQlzdWl0ZS5hZGRUZXN0KG5ldyBBU1RNYXRjaGVyVGVzdChtZXRob2RzW2ldLmdl
dE5hbWUoKSwgQVNULkpMUzgpKTsKIAkJCX0KIAkJfQogCQlyZXR1cm4gc3VpdGU7CkBAIC0xMzIw
LDQgKzEzMjIsMTYgQEAKIAkJYmFzaWNNYXRjaCh4MSk7CiAJfQogCisJLy8gaHR0cHM6Ly9idWdz
LmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRl
c3RTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uVmFyYXJnc0Fubm90YXRpb24oKSB7CisJCWlmICh0
aGlzLmFzdC5hcGlMZXZlbCgpIDwgQVNULkpMUzgpIHsKKwkJCXJldHVybjsKKwkJfQorCQlTaW5n
bGVWYXJpYWJsZURlY2xhcmF0aW9uIHgxID0gdGhpcy5hc3QubmV3U2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbigpOworCQl4MS5zZXRUeXBlKHRoaXMuVDEpOworCQl4MS5zZXROYW1lKHRoaXMuTjEp
OworCQl4MS5zZXRWYXJhcmdzKHRydWUpOworCQl4MS52YXJhcmdzQW5ub3RhdGlvbnMoKS5hZGQo
dGhpcy5BTk8xKTsKKwkJYmFzaWNNYXRjaCh4MSk7CisJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2RvbS9SdW5Db252ZXJ0ZXJUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0ZXJUZXN0
cy5qYXZhCmluZGV4IGUwZTExYzEuLjRhMzQ5MTMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vUnVu
Q29udmVydGVyVGVzdHMuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL1J1bkNvbnZlcnRlclRlc3RzLmph
dmEKQEAgLTQ2LDYgKzQ2LDcgQEAKIAkJQVNUQ29udmVydGVyMTVKTFM0VGVzdC5jbGFzcywKIAkJ
QVNUQ29udmVydGVyMTVKTFM4VGVzdC5jbGFzcywKIAkJVHlwZUFubm90YXRpb25zQ29udmVydGVy
VGVzdC5jbGFzcywKKwkJQVNUQ29udmVydGVyMThUZXN0LmNsYXNzLAogCX07CiB9CiBwdWJsaWMg
c3RhdGljIFRlc3Qgc3VpdGUoKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9k
b20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2
YQppbmRleCBlYjI1N2QyLi40OWYxOTI0IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29udmVy
dGVyLmphdmEKQEAgLTc5NSw2ICs3OTUsMTQgQEAKIAkJICovCiAJCWlmIChpc1ZhckFyZ3MpIHsK
IAkJCXNldFR5cGVGb3JTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKHZhcmlhYmxlRGVjbCwgdHlw
ZSwgZXh0cmFEaW1lbnNpb25zICsgMSk7CisJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcv
YnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwoKSA+
PSBBU1QuSkxTOCAmJiAhdHlwZS5hbm5vdGF0aW9ucygpLmlzRW1wdHkoKSkgeworCQkJCUl0ZXJh
dG9yIGFubm90YXRpb25zID0gdHlwZS5hbm5vdGF0aW9ucy5pdGVyYXRvcigpOworCQkJCXdoaWxl
IChhbm5vdGF0aW9ucy5oYXNOZXh0KCkpIHsKKwkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0g
KEFubm90YXRpb24pIGFubm90YXRpb25zLm5leHQoKTsKKwkJCQkJdmFyaWFibGVEZWNsLnZhcmFy
Z3NBbm5vdGF0aW9ucygpLmFkZCgoYW5ub3RhdGlvbi5jbG9uZSh0aGlzLmFzdCkpKTsKKwkJCQl9
CisJCQl9CiAJCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKIAkJCQl2YXJpYWJsZURlY2wu
c2V0RmxhZ3ModmFyaWFibGVEZWNsLmdldEZsYWdzKCkgfCBBU1ROb2RlLk1BTEZPUk1FRCk7CiAJ
CQl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0
L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCmluZGV4IDY0MTg2YmIuLmVkYzY0
NTQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
Y29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUTWF0Y2hlci5qYXZhCkBAIC0xODg1LDcgKzE4ODUs
OCBAQAogCQkgICAgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldFR5cGUoKSwgby5nZXRUeXBlKCkp
CiAJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXROYW1lKCkpCiAJ
IAkJCSYmIG5vZGUuZ2V0RXh0cmFEaW1lbnNpb25zKCkgPT0gby5nZXRFeHRyYURpbWVuc2lvbnMo
KQotCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigpLCBvLmdldElu
aXRpYWxpemVyKCkpOworCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXpl
cigpLCBvLmdldEluaXRpYWxpemVyKCkpCisJCQkJJiYgKGxldmVsID49IEFTVC5KTFM4ICYmIG5v
ZGUuaXNWYXJhcmdzKCkpID8gc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS52YXJhcmdzQW5ub3Rh
dGlvbnMoKSwgby52YXJhcmdzQW5ub3RhdGlvbnMoKSkgOiB0cnVlOwkJCiAJfQogCiAJLyoqCmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUv
ZG9tL1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5q
YXZhCmluZGV4IDQzNmFmMjEuLmQ5YTM2YzEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29y
ZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5qYXZhCkBAIC01LDYgKzUsMTAgQEAKICAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAogICoKKyAqIFRo
aXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBk
ZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBp
cyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcworICog
b25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBv
ZiB0aGUgSkNQLgorICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9u
IC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ki8KQEAgLTMxLDYgKzM1LDExIEBACiAgKiA8cHJlPgogICogU2luZ2xlVmFyaWFibGVEZWNsYXJh
dGlvbjoKICAqICAgIHsgRXh0ZW5kZWRNb2RpZmllciB9IFR5cGUgWyA8Yj4uLi48L2I+IF0gSWRl
bnRpZmllciB7IDxiPls8L2I+PGI+XTwvYj4gfSBbIDxiPj08L2I+IEV4cHJlc3Npb24gXQorICog
PC9wcmU+CisgKiBGb3IgSkxTOCwgdmFyYXJncyBhcmUgYWxsb3dlZCB0byBoYXZlIG9wdGlvbmFs
IGFubm90YXRpb25zOgorICogPHByZT4KKyAqIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb246Cisg
KiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIHtBbm5vdGF0aW9ufSBbIDxiPi4uLjwvYj4g
XSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9IFsgPGI+PTwvYj4gRXhwcmVzc2lvbiBd
CiAgKiA8L3ByZT4KICAqCiAgKiBAc2luY2UgMi4wCkBAIC03Miw2ICs4MSwxMyBAQAogCSAqLwog
CXB1YmxpYyBzdGF0aWMgZmluYWwgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9yIFZBUkFSR1NfUFJP
UEVSVFkgPQogCQluZXcgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9yKFNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24uY2xhc3MsICJ2YXJhcmdzIiwgYm9vbGVhbi5jbGFzcywgTUFOREFUT1JZKTsgLy8k
Tk9OLU5MUy0xJAorCQorCS8qKgorCSAqIFRoZSAidmFyYXJnc2Fubm90YXRpb25zIiBzdHJ1Y3R1
cmFsIHByb3BlcnR5IG9mIHZhcmFyZ3Mgb2YgdGhpcyBub2RlIHR5cGUgKGNoaWxkIHR5cGU6IHtA
bGluayBBbm5vdGF0aW9ufSkuCisJICogQHNpbmNlIDMuOQorCSAqLworCXB1YmxpYyBzdGF0aWMg
ZmluYWwgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yIFZBUkFSR1NfQU5OT1RBVElPTlNfUFJP
UEVSVFkgPQorCQluZXcgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlwdG9yKFNpbmdsZVZhcmlhYmxl
RGVjbGFyYXRpb24uY2xhc3MsICJ2YXJhcmdzQW5ub3RhdGlvbnMiLCBBbm5vdGF0aW9uLmNsYXNz
LCBOT19DWUNMRV9SSVNLKTsgLy8kTk9OLU5MUy0xJAogCiAJLyoqCiAJICogVGhlICJleHRyYURp
bWVuc2lvbnMiIHN0cnVjdHVyYWwgcHJvcGVydHkgb2YgdGhpcyBub2RlIHR5cGUgKHR5cGU6IHtA
bGluayBJbnRlZ2VyfSkuCkBAIC0xMDIsNyArMTE4LDE1IEBACiAJICogQHNpbmNlIDMuMQogCSAq
LwogCXByaXZhdGUgc3RhdGljIGZpbmFsIExpc3QgUFJPUEVSVFlfREVTQ1JJUFRPUlNfM18wOwot
CisJCisJLyoqCisJICogQSBsaXN0IG9mIHByb3BlcnR5IGRlc2NyaXB0b3JzIChlbGVtZW50IHR5
cGU6CisJICoge0BsaW5rIFN0cnVjdHVyYWxQcm9wZXJ0eURlc2NyaXB0b3J9KSwKKwkgKiBvciBu
dWxsIGlmIHVuaW5pdGlhbGl6ZWQuCisJICogQHNpbmNlIDMuOQorCSAqLworCXByaXZhdGUgc3Rh
dGljIGZpbmFsIExpc3QgUFJPUEVSVFlfREVTQ1JJUFRPUlNfOF8wOworCQogCXN0YXRpYyB7CiAJ
CUxpc3QgcHJvcGVydHlMaXN0ID0gbmV3IEFycmF5TGlzdCg2KTsKIAkJY3JlYXRlUHJvcGVydHlM
aXN0KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsIHByb3BlcnR5TGlzdCk7CkBAIC0x
MjIsNyArMTQ2LDIwIEBACiAJCWFkZFByb3BlcnR5KEVYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFks
IHByb3BlcnR5TGlzdCk7CiAJCWFkZFByb3BlcnR5KElOSVRJQUxJWkVSX1BST1BFUlRZLCBwcm9w
ZXJ0eUxpc3QpOwogCQlQUk9QRVJUWV9ERVNDUklQVE9SU18zXzAgPSByZWFwUHJvcGVydHlMaXN0
KHByb3BlcnR5TGlzdCk7Ci0JfQorCQkKKwkJCisJCXByb3BlcnR5TGlzdCA9IG5ldyBBcnJheUxp
c3QoOCk7CisJCWNyZWF0ZVByb3BlcnR5TGlzdChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLmNs
YXNzLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShNT0RJRklFUlMyX1BST1BFUlRZLCBw
cm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShUWVBFX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3Qp
OworCQlhZGRQcm9wZXJ0eShWQVJBUkdTX0FOTk9UQVRJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxp
c3QpOworCQlhZGRQcm9wZXJ0eShWQVJBUkdTX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOworCQlh
ZGRQcm9wZXJ0eShOQU1FX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShF
WFRSQV9ESU1FTlNJT05TX1BST1BFUlRZLCBwcm9wZXJ0eUxpc3QpOworCQlhZGRQcm9wZXJ0eShJ
TklUSUFMSVpFUl9QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKKwkJUFJPUEVSVFlfREVTQ1JJUFRP
UlNfOF8wID0gcmVhcFByb3BlcnR5TGlzdChwcm9wZXJ0eUxpc3QpOwkJCisJCisJCX0KIAogCS8q
KgogCSAqIFJldHVybnMgYSBsaXN0IG9mIHN0cnVjdHVyYWwgcHJvcGVydHkgZGVzY3JpcHRvcnMg
Zm9yIHRoaXMgbm9kZSB0eXBlLgpAQCAtMTM3LDggKzE3NCwxMCBAQAogCXB1YmxpYyBzdGF0aWMg
TGlzdCBwcm9wZXJ0eURlc2NyaXB0b3JzKGludCBhcGlMZXZlbCkgewogCQlpZiAoYXBpTGV2ZWwg
PT0gQVNULkpMUzJfSU5URVJOQUwpIHsKIAkJCXJldHVybiBQUk9QRVJUWV9ERVNDUklQVE9SU18y
XzA7Ci0JCX0gZWxzZSB7CisJCX0gZWxzZSBpZiAoYXBpTGV2ZWwgPCBBU1QuSkxTOCkgewogCQkJ
cmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzNfMDsKKwkJfSBlbHNlIHsKKwkJCXJldHVybiBQ
Uk9QRVJUWV9ERVNDUklQVE9SU184XzA7CiAJCX0KIAl9CiAKQEAgLTE5Miw2ICsyMzEsMTIgQEAK
IAlwcml2YXRlIEV4cHJlc3Npb24gb3B0aW9uYWxJbml0aWFsaXplciA9IG51bGw7CiAKIAkvKioK
KwkgKiBUaGUgdHlwZSBhbm5vdGF0aW9ucyAoZWxlbWVudCB0eXBlOiB7QGxpbmsgQW5ub3RhdGlv
bn0pLgorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwcml2YXRlIEFTVE5vZGUuTm9kZUxpc3QgdmFy
YXJnc0Fubm90YXRpb25zID0gbnVsbDsKKworCS8qKgogCSAqIENyZWF0ZXMgYSBuZXcgQVNUIG5v
ZGUgZm9yIGEgdmFyaWFibGUgZGVjbGFyYXRpb24gb3duZWQgYnkgdGhlIGdpdmVuCiAJICogQVNU
LiBCeSBkZWZhdWx0LCB0aGUgdmFyaWFibGUgZGVjbGFyYXRpb24gaGFzOiBubyBtb2RpZmllcnMs
IGFuCiAJICogdW5zcGVjaWZpZWQgKGJ1dCBsZWdhbCkgdHlwZSwgYW4gdW5zcGVjaWZpZWQgKGJ1
dCBsZWdhbCkgdmFyaWFibGUgbmFtZSwKQEAgLTIwNiw2ICsyNTEsOSBAQAogCQlzdXBlcihhc3Qp
OwogCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFMzX0lOVEVSTkFMKSB7CiAJCQl0aGlzLm1v
ZGlmaWVycyA9IG5ldyBBU1ROb2RlLk5vZGVMaXN0KE1PRElGSUVSUzJfUFJPUEVSVFkpOworCQkJ
aWYgKGFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCkgeworCQkJCXRoaXMudmFyYXJnc0Fubm90YXRp
b25zID0gbmV3IEFTVE5vZGUuTm9kZUxpc3QoVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJUWSk7
CisJCQl9CiAJCX0KIAl9CiAKQEAgLTMxOSw2ICszNjcsOSBAQAogCQlpZiAocHJvcGVydHkgPT0g
TU9ESUZJRVJTMl9QUk9QRVJUWSkgewogCQkJcmV0dXJuIG1vZGlmaWVycygpOwogCQl9CisJCWlm
IChwcm9wZXJ0eSA9PSBWQVJBUkdTX0FOTk9UQVRJT05TX1BST1BFUlRZKSB7CisJCQlyZXR1cm4g
dmFyYXJnc0Fubm90YXRpb25zKCk7CisJCX0KIAkJLy8gYWxsb3cgZGVmYXVsdCBpbXBsZW1lbnRh
dGlvbiB0byBmbGFnIHRoZSBlcnJvcgogCQlyZXR1cm4gc3VwZXIuaW50ZXJuYWxHZXRDaGlsZExp
c3RQcm9wZXJ0eShwcm9wZXJ0eSk7CiAJfQpAQCAtMzQ3LDYgKzM5OCwxMSBAQAogCQlyZXN1bHQu
c2V0TmFtZSgoU2ltcGxlTmFtZSkgZ2V0TmFtZSgpLmNsb25lKHRhcmdldCkpOwogCQlyZXN1bHQu
c2V0SW5pdGlhbGl6ZXIoCiAJCQkoRXhwcmVzc2lvbikgQVNUTm9kZS5jb3B5U3VidHJlZSh0YXJn
ZXQsIGdldEluaXRpYWxpemVyKCkpKTsKKwkJaWYgKHRoaXMuYXN0LmFwaUxldmVsID49IEFTVC5K
TFM4KSB7CisJCQlyZXN1bHQudmFyYXJnc0Fubm90YXRpb25zID0gbmV3IEFTVE5vZGUuTm9kZUxp
c3QoVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlyZXN1bHQudmFyYXJnc0Fubm90
YXRpb25zKCkuYWRkQWxsKAorCQkJCQlBU1ROb2RlLmNvcHlTdWJ0cmVlcyh0YXJnZXQsIHZhcmFy
Z3NBbm5vdGF0aW9ucygpKSk7CisJCX0KIAkJcmV0dXJuIHJlc3VsdDsKIAl9CiAKQEAgLTM2OSw2
ICs0MjUsOSBAQAogCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMubW9kaWZpZXJzKTsK
IAkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldFR5cGUoKSk7CisJCQlpZiAodGhpcy5h
c3QuYXBpTGV2ZWwgPj0gQVNULkpMUzggJiYgaXNWYXJhcmdzKCkpIHsKKwkJCQlhY2NlcHRDaGls
ZHJlbih2aXNpdG9yLCB0aGlzLnZhcmFyZ3NBbm5vdGF0aW9ucyk7CisJCQl9CiAJCQlhY2NlcHRD
aGlsZCh2aXNpdG9yLCBnZXROYW1lKCkpOwogCQkJYWNjZXB0Q2hpbGQodmlzaXRvciwgZ2V0SW5p
dGlhbGl6ZXIoKSk7CiAJCX0KQEAgLTYxMywxMyArNjcyLDI4IEBACiAJCXRoaXMub3B0aW9uYWxJ
bml0aWFsaXplciA9IGluaXRpYWxpemVyOwogCQlwb3N0UmVwbGFjZUNoaWxkKG9sZENoaWxkLCBp
bml0aWFsaXplcixJTklUSUFMSVpFUl9QUk9QRVJUWSk7CiAJfQotCisJCisJLyoqCisJICogUmV0
dXJucyB0aGUgIG9yZGVyZWQgbGlzdCBvZiBhbm5vdGF0aW9ucyBvZiB2YXJpYWJsZSBhcmd1bWVu
dHMuCisJICoKKwkgKiBAcmV0dXJuIHRoZSBsaXN0IG9mIGFubm90YXRpb25zIG9mIHRoZSB2YXJh
cmdzIChlbGVtZW50IHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkKKwkgKiBAZXhjZXB0aW9uIFVu
c3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uIGlmIHRoaXMgb3BlcmF0aW9uIGlzIHVzZWQKKwkg
KiAgICAgICAgICAgIGluIGEgSkxTMiwgSkxTMyBvciBKTFM0IEFTVAorCSAqIEBzaW5jZSAzLjkK
KwkgKi8KKwlwdWJsaWMgTGlzdCB2YXJhcmdzQW5ub3RhdGlvbnMoKSB7CisJCWlmICh0aGlzLnZh
cmFyZ3NBbm5vdGF0aW9ucyA9PSBudWxsKSB7CisJCQl1bnN1cHBvcnRlZEluMl8zXzQoKTsgCisJ
CX0KKwkJcmV0dXJuIHRoaXMudmFyYXJnc0Fubm90YXRpb25zOworCX0KKwkKIAkvKiAob21pdCBq
YXZhZG9jIGZvciB0aGlzIG1ldGhvZCkKIAkgKiBNZXRob2QgZGVjbGFyZWQgb24gQVNUTm9kZS4K
IAkgKi8KIAlpbnQgbWVtU2l6ZSgpIHsKIAkJLy8gdHJlYXQgT3BlcmF0b3IgYXMgZnJlZQotCQly
ZXR1cm4gQkFTRV9OT0RFX1NJWkUgKyA3ICogNDsKKwkJcmV0dXJuIEJBU0VfTk9ERV9TSVpFICsg
OCAqIDQ7CiAJfQogCiAJLyogKG9taXQgamF2YWRvYyBmb3IgdGhpcyBtZXRob2QpCkBAIC02Mjgs
NiArNzAyLDcgQEAKIAlpbnQgdHJlZVNpemUoKSB7CiAJCXJldHVybgogCQkJbWVtU2l6ZSgpCisJ
CQkrICh0aGlzLnZhcmFyZ3NBbm5vdGF0aW9ucyA9PSBudWxsID8gMCA6IHRoaXMudmFyYXJnc0Fu
bm90YXRpb25zLmxpc3RTaXplKCkpCiAJCQkrICh0aGlzLm1vZGlmaWVycyA9PSBudWxsID8gMCA6
IHRoaXMubW9kaWZpZXJzLmxpc3RTaXplKCkpCiAJCQkrICh0aGlzLnR5cGUgPT0gbnVsbCA/IDAg
OiBnZXRUeXBlKCkudHJlZVNpemUoKSkKIAkJCSsgKHRoaXMudmFyaWFibGVOYW1lID09IG51bGwg
PyAwIDogZ2V0TmFtZSgpLnRyZWVTaXplKCkpCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRl
bmVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKaW5kZXggMWQwOTU1Yi4uYzczMTE3
NCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RG
bGF0dGVuZXIuamF2YQpAQCAtMTMxOCw2ICsxMzE4LDE4IEBACiAJCW5vZGUuZ2V0VHlwZSgpLmFj
Y2VwdCh0aGlzKTsKIAkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBKTFMzKSB7CiAJ
CQlpZiAobm9kZS5pc1ZhcmFyZ3MoKSkgeworCQkJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9y
Zy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTE4OTgKKwkJCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlM
ZXZlbCgpID49IEFTVC5KTFM4KSB7CisJCQkJCUxpc3QgYW5ub3RhdGlvbnMgPSBub2RlLnZhcmFy
Z3NBbm5vdGF0aW9ucygpOworCQkJCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJCQkJ
dGhpcy5idWZmZXIuYXBwZW5kKCcgJyk7CQkJCQkJCisJCQkJCQlmb3IgKEl0ZXJhdG9yIGl0ID0g
YW5ub3RhdGlvbnMuaXRlcmF0b3IoKTsgaXQuaGFzTmV4dCgpOyApIHsKKwkJCQkJCQlBbm5vdGF0
aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgaXQubmV4dCgpOworCQkJCQkJCWFubm90YXRp
b24uYWNjZXB0KHRoaXMpOworCQkJCQkJCXRoaXMuYnVmZmVyLmFwcGVuZCgnICcpOworCQkJCQkJ
fQorCQkJCQl9CisJCQkJfQogCQkJCXRoaXMuYnVmZmVyLmFwcGVuZCgiLi4uIik7Ly8kTk9OLU5M
Uy0xJAogCQkJfQogCQl9
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>225128</attachid>
            <date>2013-01-02 04:18:00 -0500</date>
            <delta_ts>2013-01-02 04:20:49 -0500</delta_ts>
            <desc>Proposed Patched - [Reworked]</desc>
            <filename>Bug-391898---18compiler-Add-DOM-AST-support-for-annot.NONASTRewrite.reworked.2Jan2013.patch</filename>
            <type>text/plain</type>
            <size>18244</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjNhMzVlNTcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAxIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRlc3QwMDAxKCkgdGhy
b3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIgl9XG4iICsKKwkJCSIgCXB1Ymxp
YyB2b2lkIGJhcihATWFya2VyIGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIiAJfVxu
IiArCisJCQkifSI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZl
cnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBi
dWlsZEFTVCgKKwkJCWNvbnRlbnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVx
dWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwg
bm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9
IChDb21waWxhdGlvblVuaXQpIG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlv
blVuaXQsIDApOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOwor
CQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBl
KCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbWV0aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMo
Indyb25nIHNpemUiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gcGFyYW1ldGVyID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRl
cnMuZ2V0KDApOworCQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0
aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEs
IGFubm90YXRpb25zLnNpemUoKSk7CisJCUFTVE5vZGUgYW5ub3RhdGlvbiA9IChBU1ROb2RlKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWNoZWNrU291cmNlUmFuZ2UoYW5ub3RhdGlvbiwgIkBNYXJr
ZXIiLCBjb250ZW50cyk7CisJCW5vZGUgPSBnZXRBU1ROb2RlKGNvbXBpbGF0aW9uVW5pdCwxLDEp
OworCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVU
eXBlKCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlwYXJhbWV0ZXJzID0gbWV0
aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJl
ciBvZiBwYXJhbWV0ZXJzIiwgMSwgcGFyYW1ldGVycy5zaXplKCkpOworCQlwYXJhbWV0ZXIgPSAo
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgcGFyYW1ldGVycy5nZXQoMCk7CisJCWFubm90YXRp
b25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldy
b25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEsIGFubm90YXRpb25zLnNpemUoKSk7CisJCWFu
bm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOworCQljaGVja1NvdXJjZVJh
bmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOworCX0KK30KZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29y
ZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRl
c3QuamF2YQppbmRleCAzMmE0NDQ3Li42MTk5NGYyIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FT
VE1hdGNoZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5qYXZhCkBA
IC0xLDkgKzEsMTMgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJl
c2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBh
cmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBM
aWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQg
aXMgYXZhaWxhYmxlIGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAu
aHRtbAorICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQg
c3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9j
ZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlv
biBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkg
c3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJ
Qk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KQEAgLTM5LDYg
KzQzLDggQEAKIAkJCWlmIChtZXRob2RzW2ldLmdldE5hbWUoKS5zdGFydHNXaXRoKCJ0ZXN0Iikp
IHsgLy8kTk9OLU5MUy0xJAogCQkJCXN1aXRlLmFkZFRlc3QobmV3IEFTVE1hdGNoZXJUZXN0KG1l
dGhvZHNbaV0uZ2V0TmFtZSgpLCBBU1QuSkxTMikpOwogCQkJCXN1aXRlLmFkZFRlc3QobmV3IEFT
VE1hdGNoZXJUZXN0KG1ldGhvZHNbaV0uZ2V0TmFtZSgpLCBKTFMzX0lOVEVSTkFMKSk7CisJCQkJ
Ly8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAor
CQkJCXN1aXRlLmFkZFRlc3QobmV3IEFTVE1hdGNoZXJUZXN0KG1ldGhvZHNbaV0uZ2V0TmFtZSgp
LCBBU1QuSkxTOCkpOwogCQkJfQogCQl9CiAJCXJldHVybiBzdWl0ZTsKQEAgLTEzMjAsNCArMTMy
NiwxNiBAQAogCQliYXNpY01hdGNoKHgxKTsKIAl9CiAKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBz
ZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJcHVibGljIHZvaWQgdGVzdFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb25WYXJhcmdzQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0
LmFwaUxldmVsKCkgPCBBU1QuSkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVNpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb24geDEgPSB0aGlzLmFzdC5uZXdTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9u
KCk7CisJCXgxLnNldFR5cGUodGhpcy5UMSk7CisJCXgxLnNldE5hbWUodGhpcy5OMSk7CisJCXgx
LnNldFZhcmFyZ3ModHJ1ZSk7CisJCXgxLnZhcmFyZ3NBbm5vdGF0aW9ucygpLmFkZCh0aGlzLkFO
TzEpOworCQliYXNpY01hdGNoKHgxKTsKKwl9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL1J1
bkNvbnZlcnRlclRlc3RzLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL1J1bkNvbnZlcnRlclRlc3RzLmphdmEK
aW5kZXggZTBlMTFjMS4uZWNjODUzMCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0
ZXJUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vUnVuQ29udmVydGVyVGVzdHMuamF2YQpAQCAt
MSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2Vy
dmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMg
YXZhaWxhYmxlIGF0CkBAIC00Niw2ICs0Niw3IEBACiAJCUFTVENvbnZlcnRlcjE1SkxTNFRlc3Qu
Y2xhc3MsCiAJCUFTVENvbnZlcnRlcjE1SkxTOFRlc3QuY2xhc3MsCiAJCVR5cGVBbm5vdGF0aW9u
c0NvbnZlcnRlclRlc3QuY2xhc3MsCisJCUFTVENvbnZlcnRlcjE4VGVzdC5jbGFzcywKIAl9Owog
fQogcHVibGljIHN0YXRpYyBUZXN0IHN1aXRlKCkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29u
dmVydGVyLmphdmEKaW5kZXggZWIyNTdkMi4uZjgxMzZiMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVENvbnZlcnRlci5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFu
eWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2Yg
dGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhp
cyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTc5NSw2ICs3OTUsMTUgQEAK
IAkJICovCiAJCWlmIChpc1ZhckFyZ3MpIHsKIAkJCXNldFR5cGVGb3JTaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uKHZhcmlhYmxlRGVjbCwgdHlwZSwgZXh0cmFEaW1lbnNpb25zICsgMSk7CisJCQkv
LyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJ
CQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCAmJiAhdHlwZS5hbm5vdGF0aW9u
cygpLmlzRW1wdHkoKSkgeworCQkJCUl0ZXJhdG9yIGFubm90YXRpb25zID0gdHlwZS5hbm5vdGF0
aW9ucy5pdGVyYXRvcigpOworCQkJCXdoaWxlIChhbm5vdGF0aW9ucy5oYXNOZXh0KCkpIHsKKwkJ
CQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLm5leHQo
KTsKKwkJCQkJYW5ub3RhdGlvbi5zZXRQYXJlbnQobnVsbCwgbnVsbCk7CisJCQkJCXZhcmlhYmxl
RGVjbC52YXJhcmdzQW5ub3RhdGlvbnMoKS5hZGQoYW5ub3RhdGlvbik7CisJCQkJfQorCQkJfQog
CQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7CiAJCQkJdmFyaWFibGVEZWNsLnNldEZsYWdz
KHZhcmlhYmxlRGVjbC5nZXRGbGFncygpIHwgQVNUTm9kZS5NQUxGT1JNRUQpOwogCQkJfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Rv
bS9BU1RNYXRjaGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2Uv
amR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQppbmRleCA2NDE4NmJiLi4zNDE0OWMyIDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVE1hdGNoZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0
aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0
aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5k
IHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFj
Y29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xODg1
LDcgKzE4ODUsOCBAQAogCQkgICAgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldFR5cGUoKSwgby5n
ZXRUeXBlKCkpCiAJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXRO
YW1lKCkpCiAJIAkJCSYmIG5vZGUuZ2V0RXh0cmFEaW1lbnNpb25zKCkgPT0gby5nZXRFeHRyYURp
bWVuc2lvbnMoKQotCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigp
LCBvLmdldEluaXRpYWxpemVyKCkpOworCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJ
bml0aWFsaXplcigpLCBvLmdldEluaXRpYWxpemVyKCkpCisJCQkJJiYgKGxldmVsID49IEFTVC5K
TFM4ICYmIG5vZGUuaXNWYXJhcmdzKCkpID8gc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS52YXJh
cmdzQW5ub3RhdGlvbnMoKSwgby52YXJhcmdzQW5ub3RhdGlvbnMoKSkgOiB0cnVlOwkJCiAJfQog
CiAJLyoqCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2Uv
amR0L2NvcmUvZG9tL1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbi5qYXZhCmluZGV4IDQzNmFmMjEuLjVjMjhiMDggMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5qYXZhCkBAIC0xLDEwICsx
LDE0IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAy
MDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAy
MDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4g
VGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUg
YXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2
MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWls
YWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAq
CisgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmlj
YXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQ
KSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9z
ZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmlj
YXRpb24gb2YgdGhlIEpDUC4KKyAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jw
b3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKiovCkBAIC0zMSw2ICszNSwxMSBAQAogICogPHByZT4KICAqIFNpbmdsZVZhcmlhYmxl
RGVjbGFyYXRpb246CiAgKiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIFsgPGI+Li4uPC9i
PiBdIElkZW50aWZpZXIgeyA8Yj5bPC9iPjxiPl08L2I+IH0gWyA8Yj49PC9iPiBFeHByZXNzaW9u
IF0KKyAqIDwvcHJlPgorICogRm9yIEpMUzgsIHZhcmlhYmxlIGFyZ3VtZW50cyBhcmUgYWxsb3dl
ZCB0byBoYXZlIG9wdGlvbmFsIGFubm90YXRpb25zOgorICogPHByZT4KKyAqIFNpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb246CisgKiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIHtBbm5vdGF0
aW9ufSBbIDxiPi4uLjwvYj4gXSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9IFsgPGI+
PTwvYj4gRXhwcmVzc2lvbiBdCiAgKiA8L3ByZT4KICAqCiAgKiBAc2luY2UgMi4wCkBAIC03Miw2
ICs4MSwxMyBAQAogCSAqLwogCXB1YmxpYyBzdGF0aWMgZmluYWwgU2ltcGxlUHJvcGVydHlEZXNj
cmlwdG9yIFZBUkFSR1NfUFJPUEVSVFkgPQogCQluZXcgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9y
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsICJ2YXJhcmdzIiwgYm9vbGVhbi5jbGFz
cywgTUFOREFUT1JZKTsgLy8kTk9OLU5MUy0xJAorCQorCS8qKgorCSAqIFRoZSAidmFyYXJnc0Fu
bm90YXRpb25zIiBzdHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHZhcmlhYmxlIGFyZ3VtZW50cyBvZiB0
aGlzIG5vZGUgdHlwZSAoY2hpbGQgdHlwZToge0BsaW5rIEFubm90YXRpb259KS4KKwkgKiBAc2lu
Y2UgMy45CisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBDaGlsZExpc3RQcm9wZXJ0eURlc2Ny
aXB0b3IgVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJUWSA9CisJCW5ldyBDaGlsZExpc3RQcm9w
ZXJ0eURlc2NyaXB0b3IoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5jbGFzcywgInZhcmFyZ3NB
bm5vdGF0aW9ucyIsIEFubm90YXRpb24uY2xhc3MsIE5PX0NZQ0xFX1JJU0spOyAvLyROT04tTkxT
LTEkCiAKIAkvKioKIAkgKiBUaGUgImV4dHJhRGltZW5zaW9ucyIgc3RydWN0dXJhbCBwcm9wZXJ0
eSBvZiB0aGlzIG5vZGUgdHlwZSAodHlwZToge0BsaW5rIEludGVnZXJ9KS4KQEAgLTEwMiw3ICsx
MTgsMTUgQEAKIAkgKiBAc2luY2UgMy4xCiAJICovCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlz
dCBQUk9QRVJUWV9ERVNDUklQVE9SU18zXzA7Ci0KKwkKKwkvKioKKwkgKiBBIGxpc3Qgb2YgcHJv
cGVydHkgZGVzY3JpcHRvcnMgKGVsZW1lbnQgdHlwZToKKwkgKiB7QGxpbmsgU3RydWN0dXJhbFBy
b3BlcnR5RGVzY3JpcHRvcn0pLAorCSAqIG9yIG51bGwgaWYgdW5pbml0aWFsaXplZC4KKwkgKiBA
c2luY2UgMy45CisJICovCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlzdCBQUk9QRVJUWV9ERVND
UklQVE9SU184XzA7CisJCiAJc3RhdGljIHsKIAkJTGlzdCBwcm9wZXJ0eUxpc3QgPSBuZXcgQXJy
YXlMaXN0KDYpOwogCQljcmVhdGVQcm9wZXJ0eUxpc3QoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5jbGFzcywgcHJvcGVydHlMaXN0KTsKQEAgLTEyMiw3ICsxNDYsMjAgQEAKIAkJYWRkUHJvcGVy
dHkoRVhUUkFfRElNRU5TSU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKIAkJYWRkUHJvcGVy
dHkoSU5JVElBTElaRVJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CiAJCVBST1BFUlRZX0RFU0NS
SVBUT1JTXzNfMCA9IHJlYXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsKLQl9CisJCQorCQkK
KwkJcHJvcGVydHlMaXN0ID0gbmV3IEFycmF5TGlzdCg4KTsKKwkJY3JlYXRlUHJvcGVydHlMaXN0
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsIHByb3BlcnR5TGlzdCk7CisJCWFkZFBy
b3BlcnR5KE1PRElGSUVSUzJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5
KFRZUEVfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFZBUkFSR1NfQU5O
T1RBVElPTlNfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFZBUkFSR1Nf
UFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KE5BTUVfUFJPUEVSVFksIHBy
b3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KEVYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHBy
b3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KElOSVRJQUxJWkVSX1BST1BFUlRZLCBwcm9wZXJ0
eUxpc3QpOworCQlQUk9QRVJUWV9ERVNDUklQVE9SU184XzAgPSByZWFwUHJvcGVydHlMaXN0KHBy
b3BlcnR5TGlzdCk7CQkKKwkKKwkJfQogCiAJLyoqCiAJICogUmV0dXJucyBhIGxpc3Qgb2Ygc3Ry
dWN0dXJhbCBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBmb3IgdGhpcyBub2RlIHR5cGUuCkBAIC0xMzcs
OCArMTc0LDEwIEBACiAJcHVibGljIHN0YXRpYyBMaXN0IHByb3BlcnR5RGVzY3JpcHRvcnMoaW50
IGFwaUxldmVsKSB7CiAJCWlmIChhcGlMZXZlbCA9PSBBU1QuSkxTMl9JTlRFUk5BTCkgewogCQkJ
cmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzJfMDsKLQkJfSBlbHNlIHsKKwkJfSBlbHNlIGlm
IChhcGlMZXZlbCA8IEFTVC5KTFM4KSB7CiAJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlNf
M18wOworCQl9IGVsc2UgeworCQkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMDsKIAkJ
fQogCX0KIApAQCAtMTkyLDYgKzIzMSwxMiBAQAogCXByaXZhdGUgRXhwcmVzc2lvbiBvcHRpb25h
bEluaXRpYWxpemVyID0gbnVsbDsKIAogCS8qKgorCSAqIFRoZSB0eXBlIGFubm90YXRpb25zIChl
bGVtZW50IHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCisJICogQHNpbmNlIDMuOQorCSAqLwor
CXByaXZhdGUgQVNUTm9kZS5Ob2RlTGlzdCB2YXJhcmdzQW5ub3RhdGlvbnMgPSBudWxsOworCisJ
LyoqCiAJICogQ3JlYXRlcyBhIG5ldyBBU1Qgbm9kZSBmb3IgYSB2YXJpYWJsZSBkZWNsYXJhdGlv
biBvd25lZCBieSB0aGUgZ2l2ZW4KIAkgKiBBU1QuIEJ5IGRlZmF1bHQsIHRoZSB2YXJpYWJsZSBk
ZWNsYXJhdGlvbiBoYXM6IG5vIG1vZGlmaWVycywgYW4KIAkgKiB1bnNwZWNpZmllZCAoYnV0IGxl
Z2FsKSB0eXBlLCBhbiB1bnNwZWNpZmllZCAoYnV0IGxlZ2FsKSB2YXJpYWJsZSBuYW1lLApAQCAt
MjA2LDYgKzI1MSw5IEBACiAJCXN1cGVyKGFzdCk7CiAJCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNU
LkpMUzNfSU5URVJOQUwpIHsKIAkJCXRoaXMubW9kaWZpZXJzID0gbmV3IEFTVE5vZGUuTm9kZUxp
c3QoTU9ESUZJRVJTMl9QUk9QRVJUWSk7CisJCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFM4
KSB7CisJCQkJdGhpcy52YXJhcmdzQW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChW
QVJBUkdTX0FOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCX0KIAkJfQogCX0KIApAQCAtMzE5LDYg
KzM2Nyw5IEBACiAJCWlmIChwcm9wZXJ0eSA9PSBNT0RJRklFUlMyX1BST1BFUlRZKSB7CiAJCQly
ZXR1cm4gbW9kaWZpZXJzKCk7CiAJCX0KKwkJaWYgKHByb3BlcnR5ID09IFZBUkFSR1NfQU5OT1RB
VElPTlNfUFJPUEVSVFkpIHsKKwkJCXJldHVybiB2YXJhcmdzQW5ub3RhdGlvbnMoKTsKKwkJfQog
CQkvLyBhbGxvdyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHRvIGZsYWcgdGhlIGVycm9yCiAJCXJl
dHVybiBzdXBlci5pbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KHByb3BlcnR5KTsKIAl9CkBA
IC0zNDcsNiArMzk4LDExIEBACiAJCXJlc3VsdC5zZXROYW1lKChTaW1wbGVOYW1lKSBnZXROYW1l
KCkuY2xvbmUodGFyZ2V0KSk7CiAJCXJlc3VsdC5zZXRJbml0aWFsaXplcigKIAkJCShFeHByZXNz
aW9uKSBBU1ROb2RlLmNvcHlTdWJ0cmVlKHRhcmdldCwgZ2V0SW5pdGlhbGl6ZXIoKSkpOworCQlp
ZiAodGhpcy5hc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKKwkJCXJlc3VsdC52YXJhcmdzQW5u
b3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChWQVJBUkdTX0FOTk9UQVRJT05TX1BST1BF
UlRZKTsKKwkJCXJlc3VsdC52YXJhcmdzQW5ub3RhdGlvbnMoKS5hZGRBbGwoCisJCQkJCUFTVE5v
ZGUuY29weVN1YnRyZWVzKHRhcmdldCwgdmFyYXJnc0Fubm90YXRpb25zKCkpKTsKKwkJfQogCQly
ZXR1cm4gcmVzdWx0OwogCX0KIApAQCAtMzY5LDYgKzQyNSw5IEBACiAJCQkJYWNjZXB0Q2hpbGRy
ZW4odmlzaXRvciwgdGhpcy5tb2RpZmllcnMpOwogCQkJfQogCQkJYWNjZXB0Q2hpbGQodmlzaXRv
ciwgZ2V0VHlwZSgpKTsKKwkJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCAmJiBp
c1ZhcmFyZ3MoKSkgeworCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMudmFyYXJnc0Fu
bm90YXRpb25zKTsKKwkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldE5hbWUoKSk7CiAJ
CQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBnZXRJbml0aWFsaXplcigpKTsKIAkJfQpAQCAtNjEzLDEz
ICs2NzIsMjggQEAKIAkJdGhpcy5vcHRpb25hbEluaXRpYWxpemVyID0gaW5pdGlhbGl6ZXI7CiAJ
CXBvc3RSZXBsYWNlQ2hpbGQob2xkQ2hpbGQsIGluaXRpYWxpemVyLElOSVRJQUxJWkVSX1BST1BF
UlRZKTsKIAl9Ci0KKwkKKwkvKioKKwkgKiBSZXR1cm5zIHRoZSAgb3JkZXJlZCBsaXN0IG9mIGFu
bm90YXRpb25zIG9mIHZhcmlhYmxlIGFyZ3VtZW50cy4KKwkgKgorCSAqIEByZXR1cm4gdGhlIGxp
c3Qgb2YgYW5ub3RhdGlvbnMgb2YgdGhlIHZhcmFyZ3MgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFu
bm90YXRpb259KQorCSAqIEBleGNlcHRpb24gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24g
aWYgdGhpcyBvcGVyYXRpb24gaXMgdXNlZAorCSAqICAgICAgICAgICAgaW4gYSBKTFMyLCBKTFMz
IG9yIEpMUzQgQVNUCisJICogQHNpbmNlIDMuOQorCSAqLworCXB1YmxpYyBMaXN0IHZhcmFyZ3NB
bm5vdGF0aW9ucygpIHsKKwkJaWYgKHRoaXMudmFyYXJnc0Fubm90YXRpb25zID09IG51bGwpIHsK
KwkJCXVuc3VwcG9ydGVkSW4yXzNfNCgpOyAKKwkJfQorCQlyZXR1cm4gdGhpcy52YXJhcmdzQW5u
b3RhdGlvbnM7CisJfQorCQogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQogCSAq
IE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCWludCBtZW1TaXplKCkgewogCQkv
LyB0cmVhdCBPcGVyYXRvciBhcyBmcmVlCi0JCXJldHVybiBCQVNFX05PREVfU0laRSArIDcgKiA0
OworCQlyZXR1cm4gQkFTRV9OT0RFX1NJWkUgKyA4ICogNDsKIAl9CiAKIAkvKiAob21pdCBqYXZh
ZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTYyOCw2ICs3MDIsNyBAQAogCWludCB0cmVlU2l6ZSgp
IHsKIAkJcmV0dXJuCiAJCQltZW1TaXplKCkKKwkJCSsgKHRoaXMudmFyYXJnc0Fubm90YXRpb25z
ID09IG51bGwgPyAwIDogdGhpcy52YXJhcmdzQW5ub3RhdGlvbnMubGlzdFNpemUoKSkKIAkJCSsg
KHRoaXMubW9kaWZpZXJzID09IG51bGwgPyAwIDogdGhpcy5tb2RpZmllcnMubGlzdFNpemUoKSkK
IAkJCSsgKHRoaXMudHlwZSA9PSBudWxsID8gMCA6IGdldFR5cGUoKS50cmVlU2l6ZSgpKQogCQkJ
KyAodGhpcy52YXJpYWJsZU5hbWUgPT0gbnVsbCA/IDAgOiBnZXROYW1lKCkudHJlZVNpemUoKSkK
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVu
ZXIuamF2YQppbmRleCAxZDA5NTViLi4xOWEzYmFlIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxh
dHRlbmVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC0xLDUgKzEsNSBA
QAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJ
Qk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJ
Qk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMg
cHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWls
YWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAog
ICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUg
YXQKQEAgLTEzMTgsNiArMTMxOCwxOCBAQAogCQlub2RlLmdldFR5cGUoKS5hY2NlcHQodGhpcyk7
CiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gSkxTMykgewogCQkJaWYgKG5vZGUu
aXNWYXJhcmdzKCkpIHsKKwkJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93
X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBB
U1QuSkxTOCkgeworCQkJCQlMaXN0IGFubm90YXRpb25zID0gbm9kZS52YXJhcmdzQW5ub3RhdGlv
bnMoKTsKKwkJCQkJaWYgKGFubm90YXRpb25zICE9IG51bGwpIHsKKwkJCQkJCXRoaXMuYnVmZmVy
LmFwcGVuZCgnICcpOwkJCQkJCQorCQkJCQkJZm9yIChJdGVyYXRvciBpdCA9IGFubm90YXRpb25z
Lml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTsgKSB7CisJCQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0
aW9uID0gKEFubm90YXRpb24pIGl0Lm5leHQoKTsKKwkJCQkJCQlhbm5vdGF0aW9uLmFjY2VwdCh0
aGlzKTsKKwkJCQkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoJyAnKTsKKwkJCQkJCX0KKwkJCQkJfQor
CQkJCX0KIAkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4uLiIpOy8vJE5PTi1OTFMtMSQKIAkJCX0K
IAkJfQ==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225129</attachid>
            <date>2013-01-02 04:20:00 -0500</date>
            <delta_ts>2013-01-02 04:20:49 -0500</delta_ts>
            <desc>Proposed Patch [Reworked]</desc>
            <filename>Bug-391898---18compiler-Add-DOM-AST-support-for-annot.NONASTRewrite.reworked.2Jan2013.patch</filename>
            <type>text/plain</type>
            <size>18244</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjNhMzVlNTcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENvbnZlcnRl
cjE4VGVzdC5qYXZhCkBAIC0wLDAgKzEsMTAxIEBACisvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscworICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRy
aWJ1dG9yczoKKyAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVt
ZW50YXRpb24KKyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5kb207CisKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworaW1wb3J0IGp1
bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBp
bGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRp
b247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5k
b20uQ29tcGlsYXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5NZXRo
b2REZWNsYXJhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbjsKKworcHVibGljIGNsYXNzIEFTVENvbnZlcnRlcjE4VGVzdCBleHRl
bmRzIENvbnZlcnRlclRlc3RTZXR1cCB7CisKKwlJQ29tcGlsYXRpb25Vbml0IHdvcmtpbmdDb3B5
OworCisJcHVibGljIHZvaWQgc2V0VXBTdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlzdXBl
ci5zZXRVcFN1aXRlKCk7CisJCXRoaXMuYXN0ID0gQVNULm5ld0FTVChBU1QuSkxTOCk7CisJfQor
CisJcHVibGljIEFTVENvbnZlcnRlcjE4VGVzdChTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1l
KTsKKwl9CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyAxOSB9
OworLy8JCVRFU1RTX1JBTkdFID0gbmV3IGludFtdIHsgMSwgLTEgfTsKKy8vCQlURVNUU19OQU1F
UyA9IG5ldyBTdHJpbmdbXSB7InRlc3QwMDAxIn07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBz
dWl0ZSgpIHsKKwkJcmV0dXJuIGJ1aWxkTW9kZWxUZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0
LmNsYXNzKTsKKwl9CisKKwlwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp
b24geworCQlzdXBlci50ZWFyRG93bigpOworCQlpZiAodGhpcy53b3JraW5nQ29weSAhPSBudWxs
KSB7CisJCQl0aGlzLndvcmtpbmdDb3B5LmRpc2NhcmRXb3JraW5nQ29weSgpOworCQkJdGhpcy53
b3JraW5nQ29weSA9IG51bGw7CisJCX0KKwl9CisKKwkvKgorCSAqIFR5cGUgQW5ub3RhdGlvbnMg
b24gVmFyaWFibGUgQXJndW1lbnRzCisJICovCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAorCXB1YmxpYyB2b2lkIHRlc3QwMDAxKCkgdGhy
b3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCisJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKworCQkJ
IiAgICB9XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIgl9XG4iICsKKwkJCSIgCXB1Ymxp
YyB2b2lkIGJhcihATWFya2VyIGludCBATWFya2VyLi4uIGFyZ3MpIHtcbiIgKworCQkJIiAJfVxu
IiArCisJCQkifSI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3JraW5nQ29weSgiL0NvbnZl
cnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlLypyZXNvbHZlKi8pOworCQlBU1ROb2RlIG5vZGUgPSBi
dWlsZEFTVCgKKwkJCWNvbnRlbnRzLAorCQkJdGhpcy53b3JraW5nQ29weSk7CisJCWFzc2VydEVx
dWFscygiTm90IGEgY29tcGlsYXRpb24gdW5pdCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwg
bm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29tcGlsYXRpb25Vbml0IGNvbXBpbGF0aW9uVW5pdCA9
IChDb21waWxhdGlvblVuaXQpIG5vZGU7CisJCWFzc2VydFByb2JsZW1zU2l6ZShjb21waWxhdGlv
blVuaXQsIDApOworCQlub2RlID0gZ2V0QVNUTm9kZShjb21waWxhdGlvblVuaXQsIDEsIDApOwor
CQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVUeXBl
KCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsYXJhdGlvbiA9IChNZXRob2REZWNsYXJhdGlvbikgbm9kZTsKKwkJTGlzdCBwYXJh
bWV0ZXJzID0gbWV0aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMo
Indyb25nIHNpemUiLCAxLCBwYXJhbWV0ZXJzLnNpemUoKSk7CisJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gcGFyYW1ldGVyID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIHBhcmFtZXRl
cnMuZ2V0KDApOworCQlMaXN0IGFubm90YXRpb25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0
aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEs
IGFubm90YXRpb25zLnNpemUoKSk7CisJCUFTVE5vZGUgYW5ub3RhdGlvbiA9IChBU1ROb2RlKSBh
bm5vdGF0aW9ucy5nZXQoMCk7CisJCWNoZWNrU291cmNlUmFuZ2UoYW5ub3RhdGlvbiwgIkBNYXJr
ZXIiLCBjb250ZW50cyk7CisJCW5vZGUgPSBnZXRBU1ROb2RlKGNvbXBpbGF0aW9uVW5pdCwxLDEp
OworCQlhc3NlcnRUcnVlKCJOb3QgYSBtZXRob2QgZGVjbGFyYXRpb24iLCBub2RlLmdldE5vZGVU
eXBlKCkgPT0gQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04pOworCQlwYXJhbWV0ZXJzID0gbWV0
aG9kRGVjbGFyYXRpb24ucGFyYW1ldGVycygpOworCQlhc3NlcnRFcXVhbHMoIldyb25nIG51bWJl
ciBvZiBwYXJhbWV0ZXJzIiwgMSwgcGFyYW1ldGVycy5zaXplKCkpOworCQlwYXJhbWV0ZXIgPSAo
U2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgcGFyYW1ldGVycy5nZXQoMCk7CisJCWFubm90YXRp
b25zID0gcGFyYW1ldGVyLnZhcmFyZ3NBbm5vdGF0aW9ucygpOworCQlhc3NlcnRFcXVhbHMoIldy
b25nIG51bWJlciBvZiBhbm5vdGF0aW9ucyIsIDEsIGFubm90YXRpb25zLnNpemUoKSk7CisJCWFu
bm90YXRpb24gPSAoQVNUTm9kZSkgYW5ub3RhdGlvbnMuZ2V0KDApOworCQljaGVja1NvdXJjZVJh
bmdlKGFubm90YXRpb24sICJATWFya2VyIiwgY29udGVudHMpOworCX0KK30KZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29y
ZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUTWF0Y2hlclRl
c3QuamF2YQppbmRleCAzMmE0NDQ3Li42MTk5NGYyIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FT
VE1hdGNoZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RNYXRjaGVyVGVzdC5qYXZhCkBA
IC0xLDkgKzEsMTMgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJl
c2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBh
cmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBM
aWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQg
aXMgYXZhaWxhYmxlIGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAu
aHRtbAorICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQg
c3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9j
ZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlv
biBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkg
c3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJ
Qk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KQEAgLTM5LDYg
KzQzLDggQEAKIAkJCWlmIChtZXRob2RzW2ldLmdldE5hbWUoKS5zdGFydHNXaXRoKCJ0ZXN0Iikp
IHsgLy8kTk9OLU5MUy0xJAogCQkJCXN1aXRlLmFkZFRlc3QobmV3IEFTVE1hdGNoZXJUZXN0KG1l
dGhvZHNbaV0uZ2V0TmFtZSgpLCBBU1QuSkxTMikpOwogCQkJCXN1aXRlLmFkZFRlc3QobmV3IEFT
VE1hdGNoZXJUZXN0KG1ldGhvZHNbaV0uZ2V0TmFtZSgpLCBKTFMzX0lOVEVSTkFMKSk7CisJCQkJ
Ly8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MTg5OAor
CQkJCXN1aXRlLmFkZFRlc3QobmV3IEFTVE1hdGNoZXJUZXN0KG1ldGhvZHNbaV0uZ2V0TmFtZSgp
LCBBU1QuSkxTOCkpOwogCQkJfQogCQl9CiAJCXJldHVybiBzdWl0ZTsKQEAgLTEzMjAsNCArMTMy
NiwxNiBAQAogCQliYXNpY01hdGNoKHgxKTsKIAl9CiAKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBz
ZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJcHVibGljIHZvaWQgdGVzdFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb25WYXJhcmdzQW5ub3RhdGlvbigpIHsKKwkJaWYgKHRoaXMuYXN0
LmFwaUxldmVsKCkgPCBBU1QuSkxTOCkgeworCQkJcmV0dXJuOworCQl9CisJCVNpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb24geDEgPSB0aGlzLmFzdC5uZXdTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9u
KCk7CisJCXgxLnNldFR5cGUodGhpcy5UMSk7CisJCXgxLnNldE5hbWUodGhpcy5OMSk7CisJCXgx
LnNldFZhcmFyZ3ModHJ1ZSk7CisJCXgxLnZhcmFyZ3NBbm5vdGF0aW9ucygpLmFkZCh0aGlzLkFO
TzEpOworCQliYXNpY01hdGNoKHgxKTsKKwl9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL1J1
bkNvbnZlcnRlclRlc3RzLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL1J1bkNvbnZlcnRlclRlc3RzLmphdmEK
aW5kZXggZTBlMTFjMS4uZWNjODUzMCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9SdW5Db252ZXJ0
ZXJUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vUnVuQ29udmVydGVyVGVzdHMuamF2YQpAQCAt
MSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2Vy
dmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMg
YXZhaWxhYmxlIGF0CkBAIC00Niw2ICs0Niw3IEBACiAJCUFTVENvbnZlcnRlcjE1SkxTNFRlc3Qu
Y2xhc3MsCiAJCUFTVENvbnZlcnRlcjE1SkxTOFRlc3QuY2xhc3MsCiAJCVR5cGVBbm5vdGF0aW9u
c0NvbnZlcnRlclRlc3QuY2xhc3MsCisJCUFTVENvbnZlcnRlcjE4VGVzdC5jbGFzcywKIAl9Owog
fQogcHVibGljIHN0YXRpYyBUZXN0IHN1aXRlKCkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vQVNUQ29u
dmVydGVyLmphdmEKaW5kZXggZWIyNTdkMi4uZjgxMzZiMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVENvbnZlcnRlci5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVy
cy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFu
eWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2Yg
dGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhp
cyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTc5NSw2ICs3OTUsMTUgQEAK
IAkJICovCiAJCWlmIChpc1ZhckFyZ3MpIHsKIAkJCXNldFR5cGVGb3JTaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uKHZhcmlhYmxlRGVjbCwgdHlwZSwgZXh0cmFEaW1lbnNpb25zICsgMSk7CisJCQkv
LyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MzkxODk4CisJ
CQlpZiAodGhpcy5hc3QuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCAmJiAhdHlwZS5hbm5vdGF0aW9u
cygpLmlzRW1wdHkoKSkgeworCQkJCUl0ZXJhdG9yIGFubm90YXRpb25zID0gdHlwZS5hbm5vdGF0
aW9ucy5pdGVyYXRvcigpOworCQkJCXdoaWxlIChhbm5vdGF0aW9ucy5oYXNOZXh0KCkpIHsKKwkJ
CQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLm5leHQo
KTsKKwkJCQkJYW5ub3RhdGlvbi5zZXRQYXJlbnQobnVsbCwgbnVsbCk7CisJCQkJCXZhcmlhYmxl
RGVjbC52YXJhcmdzQW5ub3RhdGlvbnMoKS5hZGQoYW5ub3RhdGlvbik7CisJCQkJfQorCQkJfQog
CQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7CiAJCQkJdmFyaWFibGVEZWNsLnNldEZsYWdz
KHZhcmlhYmxlRGVjbC5nZXRGbGFncygpIHwgQVNUTm9kZS5NQUxGT1JNRUQpOwogCQkJfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Rv
bS9BU1RNYXRjaGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2Uv
amR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQppbmRleCA2NDE4NmJiLi4zNDE0OWMyIDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L0FTVE1hdGNoZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2NvcmUvZG9tL0FTVE1hdGNoZXIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0
aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0
aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5k
IHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFj
Y29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xODg1
LDcgKzE4ODUsOCBAQAogCQkgICAgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldFR5cGUoKSwgby5n
ZXRUeXBlKCkpCiAJCQkJJiYgc2FmZVN1YnRyZWVNYXRjaChub2RlLmdldE5hbWUoKSwgby5nZXRO
YW1lKCkpCiAJIAkJCSYmIG5vZGUuZ2V0RXh0cmFEaW1lbnNpb25zKCkgPT0gby5nZXRFeHRyYURp
bWVuc2lvbnMoKQotCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJbml0aWFsaXplcigp
LCBvLmdldEluaXRpYWxpemVyKCkpOworCQkJCSYmIHNhZmVTdWJ0cmVlTWF0Y2gobm9kZS5nZXRJ
bml0aWFsaXplcigpLCBvLmdldEluaXRpYWxpemVyKCkpCisJCQkJJiYgKGxldmVsID49IEFTVC5K
TFM4ICYmIG5vZGUuaXNWYXJhcmdzKCkpID8gc2FmZVN1YnRyZWVMaXN0TWF0Y2gobm9kZS52YXJh
cmdzQW5ub3RhdGlvbnMoKSwgby52YXJhcmdzQW5ub3RhdGlvbnMoKSkgOiB0cnVlOwkJCiAJfQog
CiAJLyoqCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2Uv
amR0L2NvcmUvZG9tL1NpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbi5qYXZhCmluZGV4IDQzNmFmMjEuLjVjMjhiMDggMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5qYXZhCkBAIC0xLDEwICsx
LDE0IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAy
MDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAy
MDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4g
VGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUg
YXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2
MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWls
YWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAq
CisgKiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmlj
YXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQ
KSBhbmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9z
ZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmlj
YXRpb24gb2YgdGhlIEpDUC4KKyAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jw
b3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKiovCkBAIC0zMSw2ICszNSwxMSBAQAogICogPHByZT4KICAqIFNpbmdsZVZhcmlhYmxl
RGVjbGFyYXRpb246CiAgKiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIFsgPGI+Li4uPC9i
PiBdIElkZW50aWZpZXIgeyA8Yj5bPC9iPjxiPl08L2I+IH0gWyA8Yj49PC9iPiBFeHByZXNzaW9u
IF0KKyAqIDwvcHJlPgorICogRm9yIEpMUzgsIHZhcmlhYmxlIGFyZ3VtZW50cyBhcmUgYWxsb3dl
ZCB0byBoYXZlIG9wdGlvbmFsIGFubm90YXRpb25zOgorICogPHByZT4KKyAqIFNpbmdsZVZhcmlh
YmxlRGVjbGFyYXRpb246CisgKiAgICB7IEV4dGVuZGVkTW9kaWZpZXIgfSBUeXBlIHtBbm5vdGF0
aW9ufSBbIDxiPi4uLjwvYj4gXSBJZGVudGlmaWVyIHsgPGI+WzwvYj48Yj5dPC9iPiB9IFsgPGI+
PTwvYj4gRXhwcmVzc2lvbiBdCiAgKiA8L3ByZT4KICAqCiAgKiBAc2luY2UgMi4wCkBAIC03Miw2
ICs4MSwxMyBAQAogCSAqLwogCXB1YmxpYyBzdGF0aWMgZmluYWwgU2ltcGxlUHJvcGVydHlEZXNj
cmlwdG9yIFZBUkFSR1NfUFJPUEVSVFkgPQogCQluZXcgU2ltcGxlUHJvcGVydHlEZXNjcmlwdG9y
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsICJ2YXJhcmdzIiwgYm9vbGVhbi5jbGFz
cywgTUFOREFUT1JZKTsgLy8kTk9OLU5MUy0xJAorCQorCS8qKgorCSAqIFRoZSAidmFyYXJnc0Fu
bm90YXRpb25zIiBzdHJ1Y3R1cmFsIHByb3BlcnR5IG9mIHZhcmlhYmxlIGFyZ3VtZW50cyBvZiB0
aGlzIG5vZGUgdHlwZSAoY2hpbGQgdHlwZToge0BsaW5rIEFubm90YXRpb259KS4KKwkgKiBAc2lu
Y2UgMy45CisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBDaGlsZExpc3RQcm9wZXJ0eURlc2Ny
aXB0b3IgVkFSQVJHU19BTk5PVEFUSU9OU19QUk9QRVJUWSA9CisJCW5ldyBDaGlsZExpc3RQcm9w
ZXJ0eURlc2NyaXB0b3IoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5jbGFzcywgInZhcmFyZ3NB
bm5vdGF0aW9ucyIsIEFubm90YXRpb24uY2xhc3MsIE5PX0NZQ0xFX1JJU0spOyAvLyROT04tTkxT
LTEkCiAKIAkvKioKIAkgKiBUaGUgImV4dHJhRGltZW5zaW9ucyIgc3RydWN0dXJhbCBwcm9wZXJ0
eSBvZiB0aGlzIG5vZGUgdHlwZSAodHlwZToge0BsaW5rIEludGVnZXJ9KS4KQEAgLTEwMiw3ICsx
MTgsMTUgQEAKIAkgKiBAc2luY2UgMy4xCiAJICovCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlz
dCBQUk9QRVJUWV9ERVNDUklQVE9SU18zXzA7Ci0KKwkKKwkvKioKKwkgKiBBIGxpc3Qgb2YgcHJv
cGVydHkgZGVzY3JpcHRvcnMgKGVsZW1lbnQgdHlwZToKKwkgKiB7QGxpbmsgU3RydWN0dXJhbFBy
b3BlcnR5RGVzY3JpcHRvcn0pLAorCSAqIG9yIG51bGwgaWYgdW5pbml0aWFsaXplZC4KKwkgKiBA
c2luY2UgMy45CisJICovCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgTGlzdCBQUk9QRVJUWV9ERVND
UklQVE9SU184XzA7CisJCiAJc3RhdGljIHsKIAkJTGlzdCBwcm9wZXJ0eUxpc3QgPSBuZXcgQXJy
YXlMaXN0KDYpOwogCQljcmVhdGVQcm9wZXJ0eUxpc3QoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5jbGFzcywgcHJvcGVydHlMaXN0KTsKQEAgLTEyMiw3ICsxNDYsMjAgQEAKIAkJYWRkUHJvcGVy
dHkoRVhUUkFfRElNRU5TSU9OU19QUk9QRVJUWSwgcHJvcGVydHlMaXN0KTsKIAkJYWRkUHJvcGVy
dHkoSU5JVElBTElaRVJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CiAJCVBST1BFUlRZX0RFU0NS
SVBUT1JTXzNfMCA9IHJlYXBQcm9wZXJ0eUxpc3QocHJvcGVydHlMaXN0KTsKLQl9CisJCQorCQkK
KwkJcHJvcGVydHlMaXN0ID0gbmV3IEFycmF5TGlzdCg4KTsKKwkJY3JlYXRlUHJvcGVydHlMaXN0
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uY2xhc3MsIHByb3BlcnR5TGlzdCk7CisJCWFkZFBy
b3BlcnR5KE1PRElGSUVSUzJfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5
KFRZUEVfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFZBUkFSR1NfQU5O
T1RBVElPTlNfUFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KFZBUkFSR1Nf
UFJPUEVSVFksIHByb3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KE5BTUVfUFJPUEVSVFksIHBy
b3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KEVYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHBy
b3BlcnR5TGlzdCk7CisJCWFkZFByb3BlcnR5KElOSVRJQUxJWkVSX1BST1BFUlRZLCBwcm9wZXJ0
eUxpc3QpOworCQlQUk9QRVJUWV9ERVNDUklQVE9SU184XzAgPSByZWFwUHJvcGVydHlMaXN0KHBy
b3BlcnR5TGlzdCk7CQkKKwkKKwkJfQogCiAJLyoqCiAJICogUmV0dXJucyBhIGxpc3Qgb2Ygc3Ry
dWN0dXJhbCBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBmb3IgdGhpcyBub2RlIHR5cGUuCkBAIC0xMzcs
OCArMTc0LDEwIEBACiAJcHVibGljIHN0YXRpYyBMaXN0IHByb3BlcnR5RGVzY3JpcHRvcnMoaW50
IGFwaUxldmVsKSB7CiAJCWlmIChhcGlMZXZlbCA9PSBBU1QuSkxTMl9JTlRFUk5BTCkgewogCQkJ
cmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzJfMDsKLQkJfSBlbHNlIHsKKwkJfSBlbHNlIGlm
IChhcGlMZXZlbCA8IEFTVC5KTFM4KSB7CiAJCQlyZXR1cm4gUFJPUEVSVFlfREVTQ1JJUFRPUlNf
M18wOworCQl9IGVsc2UgeworCQkJcmV0dXJuIFBST1BFUlRZX0RFU0NSSVBUT1JTXzhfMDsKIAkJ
fQogCX0KIApAQCAtMTkyLDYgKzIzMSwxMiBAQAogCXByaXZhdGUgRXhwcmVzc2lvbiBvcHRpb25h
bEluaXRpYWxpemVyID0gbnVsbDsKIAogCS8qKgorCSAqIFRoZSB0eXBlIGFubm90YXRpb25zIChl
bGVtZW50IHR5cGU6IHtAbGluayBBbm5vdGF0aW9ufSkuCisJICogQHNpbmNlIDMuOQorCSAqLwor
CXByaXZhdGUgQVNUTm9kZS5Ob2RlTGlzdCB2YXJhcmdzQW5ub3RhdGlvbnMgPSBudWxsOworCisJ
LyoqCiAJICogQ3JlYXRlcyBhIG5ldyBBU1Qgbm9kZSBmb3IgYSB2YXJpYWJsZSBkZWNsYXJhdGlv
biBvd25lZCBieSB0aGUgZ2l2ZW4KIAkgKiBBU1QuIEJ5IGRlZmF1bHQsIHRoZSB2YXJpYWJsZSBk
ZWNsYXJhdGlvbiBoYXM6IG5vIG1vZGlmaWVycywgYW4KIAkgKiB1bnNwZWNpZmllZCAoYnV0IGxl
Z2FsKSB0eXBlLCBhbiB1bnNwZWNpZmllZCAoYnV0IGxlZ2FsKSB2YXJpYWJsZSBuYW1lLApAQCAt
MjA2LDYgKzI1MSw5IEBACiAJCXN1cGVyKGFzdCk7CiAJCWlmIChhc3QuYXBpTGV2ZWwgPj0gQVNU
LkpMUzNfSU5URVJOQUwpIHsKIAkJCXRoaXMubW9kaWZpZXJzID0gbmV3IEFTVE5vZGUuTm9kZUxp
c3QoTU9ESUZJRVJTMl9QUk9QRVJUWSk7CisJCQlpZiAoYXN0LmFwaUxldmVsID49IEFTVC5KTFM4
KSB7CisJCQkJdGhpcy52YXJhcmdzQW5ub3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChW
QVJBUkdTX0FOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCX0KIAkJfQogCX0KIApAQCAtMzE5LDYg
KzM2Nyw5IEBACiAJCWlmIChwcm9wZXJ0eSA9PSBNT0RJRklFUlMyX1BST1BFUlRZKSB7CiAJCQly
ZXR1cm4gbW9kaWZpZXJzKCk7CiAJCX0KKwkJaWYgKHByb3BlcnR5ID09IFZBUkFSR1NfQU5OT1RB
VElPTlNfUFJPUEVSVFkpIHsKKwkJCXJldHVybiB2YXJhcmdzQW5ub3RhdGlvbnMoKTsKKwkJfQog
CQkvLyBhbGxvdyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHRvIGZsYWcgdGhlIGVycm9yCiAJCXJl
dHVybiBzdXBlci5pbnRlcm5hbEdldENoaWxkTGlzdFByb3BlcnR5KHByb3BlcnR5KTsKIAl9CkBA
IC0zNDcsNiArMzk4LDExIEBACiAJCXJlc3VsdC5zZXROYW1lKChTaW1wbGVOYW1lKSBnZXROYW1l
KCkuY2xvbmUodGFyZ2V0KSk7CiAJCXJlc3VsdC5zZXRJbml0aWFsaXplcigKIAkJCShFeHByZXNz
aW9uKSBBU1ROb2RlLmNvcHlTdWJ0cmVlKHRhcmdldCwgZ2V0SW5pdGlhbGl6ZXIoKSkpOworCQlp
ZiAodGhpcy5hc3QuYXBpTGV2ZWwgPj0gQVNULkpMUzgpIHsKKwkJCXJlc3VsdC52YXJhcmdzQW5u
b3RhdGlvbnMgPSBuZXcgQVNUTm9kZS5Ob2RlTGlzdChWQVJBUkdTX0FOTk9UQVRJT05TX1BST1BF
UlRZKTsKKwkJCXJlc3VsdC52YXJhcmdzQW5ub3RhdGlvbnMoKS5hZGRBbGwoCisJCQkJCUFTVE5v
ZGUuY29weVN1YnRyZWVzKHRhcmdldCwgdmFyYXJnc0Fubm90YXRpb25zKCkpKTsKKwkJfQogCQly
ZXR1cm4gcmVzdWx0OwogCX0KIApAQCAtMzY5LDYgKzQyNSw5IEBACiAJCQkJYWNjZXB0Q2hpbGRy
ZW4odmlzaXRvciwgdGhpcy5tb2RpZmllcnMpOwogCQkJfQogCQkJYWNjZXB0Q2hpbGQodmlzaXRv
ciwgZ2V0VHlwZSgpKTsKKwkJCWlmICh0aGlzLmFzdC5hcGlMZXZlbCA+PSBBU1QuSkxTOCAmJiBp
c1ZhcmFyZ3MoKSkgeworCQkJCWFjY2VwdENoaWxkcmVuKHZpc2l0b3IsIHRoaXMudmFyYXJnc0Fu
bm90YXRpb25zKTsKKwkJCX0KIAkJCWFjY2VwdENoaWxkKHZpc2l0b3IsIGdldE5hbWUoKSk7CiAJ
CQlhY2NlcHRDaGlsZCh2aXNpdG9yLCBnZXRJbml0aWFsaXplcigpKTsKIAkJfQpAQCAtNjEzLDEz
ICs2NzIsMjggQEAKIAkJdGhpcy5vcHRpb25hbEluaXRpYWxpemVyID0gaW5pdGlhbGl6ZXI7CiAJ
CXBvc3RSZXBsYWNlQ2hpbGQob2xkQ2hpbGQsIGluaXRpYWxpemVyLElOSVRJQUxJWkVSX1BST1BF
UlRZKTsKIAl9Ci0KKwkKKwkvKioKKwkgKiBSZXR1cm5zIHRoZSAgb3JkZXJlZCBsaXN0IG9mIGFu
bm90YXRpb25zIG9mIHZhcmlhYmxlIGFyZ3VtZW50cy4KKwkgKgorCSAqIEByZXR1cm4gdGhlIGxp
c3Qgb2YgYW5ub3RhdGlvbnMgb2YgdGhlIHZhcmFyZ3MgKGVsZW1lbnQgdHlwZToge0BsaW5rIEFu
bm90YXRpb259KQorCSAqIEBleGNlcHRpb24gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24g
aWYgdGhpcyBvcGVyYXRpb24gaXMgdXNlZAorCSAqICAgICAgICAgICAgaW4gYSBKTFMyLCBKTFMz
IG9yIEpMUzQgQVNUCisJICogQHNpbmNlIDMuOQorCSAqLworCXB1YmxpYyBMaXN0IHZhcmFyZ3NB
bm5vdGF0aW9ucygpIHsKKwkJaWYgKHRoaXMudmFyYXJnc0Fubm90YXRpb25zID09IG51bGwpIHsK
KwkJCXVuc3VwcG9ydGVkSW4yXzNfNCgpOyAKKwkJfQorCQlyZXR1cm4gdGhpcy52YXJhcmdzQW5u
b3RhdGlvbnM7CisJfQorCQogCS8qIChvbWl0IGphdmFkb2MgZm9yIHRoaXMgbWV0aG9kKQogCSAq
IE1ldGhvZCBkZWNsYXJlZCBvbiBBU1ROb2RlLgogCSAqLwogCWludCBtZW1TaXplKCkgewogCQkv
LyB0cmVhdCBPcGVyYXRvciBhcyBmcmVlCi0JCXJldHVybiBCQVNFX05PREVfU0laRSArIDcgKiA0
OworCQlyZXR1cm4gQkFTRV9OT0RFX1NJWkUgKyA4ICogNDsKIAl9CiAKIAkvKiAob21pdCBqYXZh
ZG9jIGZvciB0aGlzIG1ldGhvZCkKQEAgLTYyOCw2ICs3MDIsNyBAQAogCWludCB0cmVlU2l6ZSgp
IHsKIAkJcmV0dXJuCiAJCQltZW1TaXplKCkKKwkJCSsgKHRoaXMudmFyYXJnc0Fubm90YXRpb25z
ID09IG51bGwgPyAwIDogdGhpcy52YXJhcmdzQW5ub3RhdGlvbnMubGlzdFNpemUoKSkKIAkJCSsg
KHRoaXMubW9kaWZpZXJzID09IG51bGwgPyAwIDogdGhpcy5tb2RpZmllcnMubGlzdFNpemUoKSkK
IAkJCSsgKHRoaXMudHlwZSA9PSBudWxsID8gMCA6IGdldFR5cGUoKS50cmVlU2l6ZSgpKQogCQkJ
KyAodGhpcy52YXJpYWJsZU5hbWUgPT0gbnVsbCA/IDAgOiBnZXROYW1lKCkudHJlZVNpemUoKSkK
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVu
ZXIuamF2YQppbmRleCAxZDA5NTViLi4xOWEzYmFlIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxh
dHRlbmVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC0xLDUgKzEsNSBA
QAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJ
Qk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJ
Qk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMg
cHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWls
YWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAog
ICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUg
YXQKQEAgLTEzMTgsNiArMTMxOCwxOCBAQAogCQlub2RlLmdldFR5cGUoKS5hY2NlcHQodGhpcyk7
CiAJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gSkxTMykgewogCQkJaWYgKG5vZGUu
aXNWYXJhcmdzKCkpIHsKKwkJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93
X2J1Zy5jZ2k/aWQ9MzkxODk4CisJCQkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBB
U1QuSkxTOCkgeworCQkJCQlMaXN0IGFubm90YXRpb25zID0gbm9kZS52YXJhcmdzQW5ub3RhdGlv
bnMoKTsKKwkJCQkJaWYgKGFubm90YXRpb25zICE9IG51bGwpIHsKKwkJCQkJCXRoaXMuYnVmZmVy
LmFwcGVuZCgnICcpOwkJCQkJCQorCQkJCQkJZm9yIChJdGVyYXRvciBpdCA9IGFubm90YXRpb25z
Lml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTsgKSB7CisJCQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0
aW9uID0gKEFubm90YXRpb24pIGl0Lm5leHQoKTsKKwkJCQkJCQlhbm5vdGF0aW9uLmFjY2VwdCh0
aGlzKTsKKwkJCQkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoJyAnKTsKKwkJCQkJCX0KKwkJCQkJfQor
CQkJCX0KIAkJCQl0aGlzLmJ1ZmZlci5hcHBlbmQoIi4uLiIpOy8vJE5PTi1OTFMtMSQKIAkJCX0K
IAkJfQ==
</data>

          </attachment>
      

    </bug>

</bugzilla>