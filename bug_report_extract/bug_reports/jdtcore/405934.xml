<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>405934</bug_id>
          
          <creation_ts>2013-04-18 02:16:00 -0400</creation_ts>
          <short_desc>[1.8][dom ast]  thrown Exceptions with Type Annotations should have malformed nodes for AST level less than 8</short_desc>
          <delta_ts>2013-07-01 10:31:34 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Manoj Palat Away Until May 11 2015">manpalat</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>jarthana</cc>
    
    <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="58705"
          type_id="1"
          status="?"
          setter="jarthana"
          requestee="manpalat"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2245180</commentid>
    <comment_count>0</comment_count>
      <attachid>229840</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-04-18 02:16:14 -0400</bug_when>
    <thetext>Created attachment 229840
Test case to reproduce

See  java.io.@NonNull EOFException node in the attached test case using ast viewer:

thrownExceptions are converted to Name in ast level prior to 8. These nodes should have malformed flag set (somewhere) in case of presence of type annotations in the thrown exceptions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2274238</commentid>
    <comment_count>1</comment_count>
      <attachid>232524</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-06-19 03:43:04 -0400</bug_when>
    <thetext>Created attachment 232524
Fix with test

Simple fix to mark the exception Name as MALFORMED when there are annotations found in the type reference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2276047</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-06-24 02:03:40 -0400</bug_when>
    <thetext>Manoj, can you glance over the patch once, please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2276059</commentid>
    <comment_count>3</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-06-24 02:51:39 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; Manoj, can you glance over the patch once, please?

Jay: 
1) Patch looks good.

2) Experimenting with the test case, it can be seen that the same issue applies in return types, and parameters ie for &lt; 1.8, the ASTNode is not signalled as MALFORMED. If possible, we should address in the same bug or raise another bug for the same.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2277258</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-06-26 05:35:40 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; (In reply to comment #2)
&gt; &gt; Manoj, can you glance over the patch once, please?
&gt; 
&gt; Jay: 
&gt; 1) Patch looks good.
&gt; 
&gt; 2) Experimenting with the test case, it can be seen that the same issue
&gt; applies in return types, and parameters ie for &lt; 1.8, the ASTNode is not
&gt; signalled as MALFORMED. If possible, we should address in the same bug or
&gt; raise another bug for the same.

Actually, when I switch the AST level in the ASTView, I do see that return types and types of arguments are marked as malformed.

Manoj, can you please confirm?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2279251</commentid>
    <comment_count>5</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-07-01 01:50:29 -0400</bug_when>
    <thetext>(In reply to comment #4)
&gt; (In reply to comment #3)
&gt; &gt; (In reply to comment #2)
&gt; &gt; &gt; Manoj, can you glance over the patch once, please?
&gt; &gt; 
&gt; &gt; Jay: 
&gt; &gt; 1) Patch looks good.
&gt; &gt; 
&gt; &gt; 2) Experimenting with the test case, it can be seen that the same issue
&gt; &gt; applies in return types, and parameters ie for &lt; 1.8, the ASTNode is not
&gt; &gt; signalled as MALFORMED. If possible, we should address in the same bug or
&gt; &gt; raise another bug for the same.
&gt; 
&gt; Actually, when I switch the AST level in the ASTView, I do see that return
&gt; types and types of arguments are marked as malformed.
&gt; 
&gt; Manoj, can you please confirm?

Jay: Please ignore my comment 2 regarding return types and parameters as I did not consider the availability of SE7 annotations at that point. Patch is good to commit without any changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2279388</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-07-01 10:31:34 -0400</bug_when>
    <thetext>Thanks for reviewing, Manoj. Fix released via commit:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=4eeaf0d0e03ab922557bc9369f948328bc88b0fc</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>229840</attachid>
            <date>2013-04-18 02:16:00 -0400</date>
            <delta_ts>2013-04-18 02:16:14 -0400</delta_ts>
            <desc>Test case to reproduce</desc>
            <filename>file_405934.txt</filename>
            <type>text/plain</type>
            <size>195</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">cHVibGljIGNsYXNzIFggew0KICAgIEBUYXJnZXQoRWxlbWVudFR5cGUuVFlQRV9VU0UpDQogICAg
QFJldGVudGlvbihSZXRlbnRpb25Qb2xpY3kuUlVOVElNRSkNCiAgICBARG9jdW1lbnRlZA0KICAg
IEBpbnRlcmZhY2UgTm9uTnVsbCB7fQ0KICAgIHZvaWQgZm9vKCkgdGhyb3dzIGphdmEuaW8uQE5v
bk51bGwgRU9GRXhjZXB0aW9uIHt9DQp9
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>232524</attachid>
            <date>2013-06-19 03:43:00 -0400</date>
            <delta_ts>2013-06-19 03:43:04 -0400</delta_ts>
            <desc>Fix with test</desc>
            <filename>Fix-for-Bug-405934.patch</filename>
            <type>text/plain</type>
            <size>2799</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbApkaWZmIC0tZ2l0IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20v
QVNUQ29udmVydGVyMTdUZXN0LmphdmEgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxN1Rlc3QuamF2YQppbmRleCBmZGQ5ZGJkLi44ZjliODkwIDEwMDY0NAot
LS0gc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RDb252ZXJ0ZXIxN1Rlc3Qu
amF2YQorKysgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RDb252ZXJ0ZXIx
N1Rlc3QuamF2YQpAQCAtNDgsNCArNDgsNiBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3Jl
LmRvbS5OdWxsTGl0ZXJhbDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uTnVtYmVy
TGl0ZXJhbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uUXVhbGlmaWVkTmFtZTsK
K2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU2ltcGxlTmFtZTsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5kb20uU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbjsKIGltcG9ydCBv
cmcuZWNsaXBzZS5qZHQuY29yZS5kb20uU3dpdGNoU3RhdGVtZW50OwpAQCAtOTY0LDMgKzk2Niwy
NiBAQAogCQkJYXNzZXJ0RXF1YWxzKCJNZXRob2Qgc2hvdWxkIGJlIG1hbGZvcm1lZCIsIEFTVE5v
ZGUuTUFMRk9STUVELCAobWV0aG9kLmdldEZsYWdzKCkgJiBBU1ROb2RlLk1BTEZPUk1FRCkpOwog
CX0KKwkvKioKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/
aWQ9NDA1OTM0CisJICoKKwkgKiBAZGVwcmVjYXRlZCBhcyBpdCB1c2VzIGRlcHJlY2F0ZWQgbWV0
aG9kcworCSAqLworCXB1YmxpYyB2b2lkIHRlc3QwMDIyKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2Vw
dGlvbiB7CisJCVN0cmluZyBjb250ZW50cyA9CisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKwor
CQkJCSIJdm9pZCBmb28oKSB0aHJvd3MgIEBOb25OdWxsIEVPRkV4Y2VwdGlvbiwgamF2YS5pby5A
Tm9uTnVsbCBGaWxlTm90Rm91bmRFeGNlcHRpb24ge31cbiIgKworCQkJCSJ9XG4iOworCQl0aGlz
LndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxNy9zcmMvWC5qYXZhIiwg
ZmFsc2UpOworCQlBU1ROb2RlIG5vZGUgPSBidWlsZEFTVChjb250ZW50cywgdGhpcy53b3JraW5n
Q29weSwgZmFsc2UpOworCQlhc3NlcnRFcXVhbHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVuaXQiLCBB
U1ROb2RlLkNPTVBJTEFUSU9OX1VOSVQsIG5vZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCUNvbXBpbGF0
aW9uVW5pdCB1bml0ID0gKENvbXBpbGF0aW9uVW5pdCkgbm9kZTsKKwkJVHlwZURlY2xhcmF0aW9u
IHR5cGUgPSAgKFR5cGVEZWNsYXJhdGlvbikgdW5pdC50eXBlcygpLmdldCgwKTsKKwkJbm9kZSA9
IChBU1ROb2RlKSB0eXBlLmJvZHlEZWNsYXJhdGlvbnMoKS5nZXQoMCk7CisJCWFzc2VydEVxdWFs
cygiTm90IGEgbWV0aG9kIERlY2xhcmF0aW9uIiwgQVNUTm9kZS5NRVRIT0RfREVDTEFSQVRJT04s
IG5vZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZCA9IChNZXRo
b2REZWNsYXJhdGlvbikgbm9kZTsKKwkJU2ltcGxlTmFtZSBleGNlcHRpb24xID0gKFNpbXBsZU5h
bWUpIG1ldGhvZC50aHJvd25FeGNlcHRpb25zKCkuZ2V0KDApOworCQlhc3NlcnRFcXVhbHMoIlF1
YWxpZmllZE5hbWUgc2hvdWxkIGJlIG1hbGZvcm1lZCIsIEFTVE5vZGUuTUFMRk9STUVELCAoZXhj
ZXB0aW9uMS5nZXRGbGFncygpICYgQVNUTm9kZS5NQUxGT1JNRUQpKTsKKwkJUXVhbGlmaWVkTmFt
ZSBleGNlcHRpb24yID0gKFF1YWxpZmllZE5hbWUpIG1ldGhvZC50aHJvd25FeGNlcHRpb25zKCku
Z2V0KDEpOworCQlhc3NlcnRFcXVhbHMoIlF1YWxpZmllZE5hbWUgc2hvdWxkIGJlIG1hbGZvcm1l
ZCIsIEFTVE5vZGUuTUFMRk9STUVELCAoZXhjZXB0aW9uMi5nZXRGbGFncygpICYgQVNUTm9kZS5N
QUxGT1JNRUQpKTsKKwl9CiB9CiNQIG9yZy5lY2xpcHNlLmpkdC5jb3JlCmRpZmYgLS1naXQgZG9t
L29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9BU1RDb252ZXJ0ZXIuamF2YSBkb20vb3JnL2VjbGlw
c2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCmluZGV4IDQxNzdhNzkuLjc5ZjkzMzEg
MTAwNjQ0Ci0tLSBkb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZh
CisrKyBkb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0FTVENvbnZlcnRlci5qYXZhCkBAIC01
MDEsNSArNTAxLDkgQEAKIAkJCQlpbnQgaSA9IDA7CiAJCQkJZG8gewotCQkJCQl0aHJvd25FeGNl
cHRpb24gPSBjb252ZXJ0KHRocm93bkV4Y2VwdGlvbnNbaSsrXSk7CisJCQkJCVR5cGVSZWZlcmVu
Y2UgdHlwZVJlZiA9IHRocm93bkV4Y2VwdGlvbnNbaSsrXTsKKwkJCQkJdGhyb3duRXhjZXB0aW9u
ID0gY29udmVydCh0eXBlUmVmKTsKKwkJCQkJaWYgKHR5cGVSZWYuYW5ub3RhdGlvbnMgIT0gbnVs
bCAmJiB0eXBlUmVmLmFubm90YXRpb25zLmxlbmd0aCA+IDApIHsKKwkJCQkJCXRocm93bkV4Y2Vw
dGlvbi5zZXRGbGFncyh0aHJvd25FeGNlcHRpb24uZ2V0RmxhZ3MoKSB8IEFTVE5vZGUuTUFMRk9S
TUVEKTsKKwkJCQkJfQogCQkJCQlpbnRlcm5hbFRob3duRXhjZXB0aW9ucyhtZXRob2REZWNsKS5h
ZGQodGhyb3duRXhjZXB0aW9uKTsKIAkJCQl9IHdoaWxlIChpIDwgdGhyb3duRXhjZXB0aW9uc0xl
bmd0aCk7
</data>

          </attachment>
      

    </bug>

</bugzilla>