<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>407131</bug_id>
          
          <creation_ts>2013-05-02 21:00:00 -0400</creation_ts>
          <short_desc>[1.8][dom ast]ASTRewrite support for ReferenceExpression nodes family</short_desc>
          <delta_ts>2013-12-05 13:57:35 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          <dependson>399794</dependson>
          <blocked>399790</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Manoj Palat Away Until May 11 2015">manpalat</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="58764"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2251814</commentid>
    <comment_count>0</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-05-02 21:00:54 -0400</bug_when>
    <thetext></thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2270342</commentid>
    <comment_count>1</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-06-10 02:13:19 -0400</bug_when>
    <thetext>*** Bug 410295 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2279237</commentid>
    <comment_count>2</comment_count>
      <attachid>232932</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-07-01 01:14:51 -0400</bug_when>
    <thetext>Created attachment 232932
Proposed Patch

This patch addresses the issue  of additional character in new for source position - mentioned in bug 399794 comment 7 (repeated as the issue mentioned in  bug 384667 comment 7)

Srikanth: Could you please take a quick glance at this single character change in Parser (consequently the affected test cases also have output changes - by a char).

Markus: The above patch has only the required changes for this bug in ASTRAnalyzer which needs changes - reordering of existing functions - to maintain the order. This can be done once the review of the above patch is done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2279246</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-07-01 01:31:44 -0400</bug_when>
    <thetext>(In reply to comment #2)

&gt; Srikanth: Could you please take a quick glance at this single character
&gt; change in Parser (consequently the affected test cases also have output
&gt; changes - by a char).

I reviewed the change to Parser.java - it looks good, Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2279660</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-07-02 05:29:28 -0400</bug_when>
    <thetext>Just one comment:

1. ASTRewriteFlattener - visitReferenceTypeArguments() results in two calls to getChildList, which can be avoided by directly calling the approprriate visitList that takes &apos;lead&apos; and &apos;post&apos; as parameters. And the method visitReferenceTypeArguments itself can be avoided.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2280020</commentid>
    <comment_count>5</comment_count>
      <attachid>233013</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-07-03 02:52:26 -0400</bug_when>
    <thetext>Created attachment 233013
Proposed Patch

Thanks Jay for the comment which has been incorporated. 
Markus: You may review this patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2284785</commentid>
    <comment_count>6</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-07-16 01:58:32 -0400</bug_when>
    <thetext>Markus: you may file follow up bugs if required.

committed via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=c0d735bb59d0292c44074a58c867bfe7a8670833</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>232932</attachid>
            <date>2013-07-01 01:14:00 -0400</date>
            <delta_ts>2013-07-03 02:52:26 -0400</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-407131-18dom-astASTRewrite-support-for-R.patch</filename>
            <type>text/plain</type>
            <size>45890</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9wYXJzZXIvQ29tcGxpYW5jZURpYWdub3Nl
VGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3BhcnNlci9Db21wbGlhbmNlRGlhZ25vc2VU
ZXN0LmphdmEKaW5kZXggOWE4MzI5NS4uZmQwOTZkMyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Nv
bXBpbGVyL3BhcnNlci9Db21wbGlhbmNlRGlhZ25vc2VUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3BhcnNlci9Db21wbGlhbmNlRGlhZ25vc2VUZXN0LmphdmEKQEAgLTI4MjMsNyAr
MjgyMyw3IEBACiAJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJIjEuIEVSUk9SIGluIFguamF2YSAo
YXQgbGluZSAxMSlcbiIgKyAKIAkJCSIJSSBpID0gWTo6bmV3O1xuIiArIAotCQkJIgkgICAgICBe
Xl5eXl5eXG4iICsgCisJCQkiCSAgICAgIF5eXl5eXlxuIiArIAogCQkJIkNvbnN0cnVjdG9yIHJl
ZmVyZW5jZXMgYXJlIGFsbG93ZWQgb25seSBhdCBzb3VyY2UgbGV2ZWwgMS44IG9yIGFib3ZlXG4i
ICsgCiAJCQkiLS0tLS0tLS0tLVxuIjsKIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVy
L3JlZ3Jlc3Npb24vR3JhbW1hckNvdmVyYWdlVGVzdHMzMDguamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21w
aWxlci9yZWdyZXNzaW9uL0dyYW1tYXJDb3ZlcmFnZVRlc3RzMzA4LmphdmEKaW5kZXggNTU2ZmNh
Mi4uZTIzNjljOCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR3Jh
bW1hckNvdmVyYWdlVGVzdHMzMDguamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVz
c2lvbi9HcmFtbWFyQ292ZXJhZ2VUZXN0czMwOC5qYXZhCkBAIC0xNTAwLDcgKzE1MDAsNyBAQAog
CQkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAx
MilcbiIgKyAKIAkJCQkiCWkgPSBATWFya2VyIFc8QE1hcmtlciBJbnRlZ2VyPjo6PEBNYXJrZXIg
U3RyaW5nPiBuZXc7XG4iICsgCi0JCQkJIgkgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJCSIJICAgIF5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAogCQkJCSJUaGUgdGFyZ2V0IHR5
cGUgb2YgdGhpcyBleHByZXNzaW9uIG11c3QgYmUgYSBmdW5jdGlvbmFsIGludGVyZmFjZVxuIiAr
IAogCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGlu
ZSAxMilcbiIgKyAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBp
bGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05l
Z2F0aXZlTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVn
cmVzc2lvbi9OZWdhdGl2ZUxhbWJkYUV4cHJlc3Npb25zVGVzdC5qYXZhCmluZGV4IDBiMDBmNjIu
LmQ1MDdmZDcgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVy
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0
aXZlTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3Jl
Z3Jlc3Npb24vTmVnYXRpdmVMYW1iZGFFeHByZXNzaW9uc1Rlc3QuamF2YQpAQCAtMTI0OSw3ICsx
MjQ5LDcgQEAKIAkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkiMy4gRVJST1IgaW4gWC5qYXZhIChh
dCBsaW5lIDgpXG4iICsgCiAJCQkiCVN5c3RlbS5vdXQucHJpbnRsbihcIkNvbnN0cnVjdG9yIFJl
ZmVyZW5jZSBpbiBpbGxlZ2FsIGNvbnRleHQ6IFwiICsgU3RyaW5nOjpuZXcpO1xuIiArIAotCQkJ
IgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBeXl5eXl5eXl5eXl5cbiIgKyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5c
biIgKyAKIAkJCSJUaGUgdGFyZ2V0IHR5cGUgb2YgdGhpcyBleHByZXNzaW9uIG11c3QgYmUgYSBm
dW5jdGlvbmFsIGludGVyZmFjZVxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCSI0LiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMTApXG4iICsgCkBAIC00MjYxLDcgKzQyNjEsNyBAQAog
CQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5l
IDEyKVxuIiArIAogCQkJCQkiCUkgaTMgPSBBcnJheUxpc3Q8SW50ZWdlcj46Om5ldztcbiIgKyAK
LQkJCQkJIgkgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJICAg
ICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkJCSJUaGUgY29uc3RydWN0ZWQg
b2JqZWN0IG9mIHR5cGUgQXJyYXlMaXN0PEludGVnZXI+IGlzIGluY29tcGF0aWJsZSB3aXRoIHRo
ZSBkZXNjcmlwdG9yXCdzIHJldHVybiB0eXBlOiBMaXN0PFN0cmluZz5cbiIgKyAKIAkJCQkJIi0t
LS0tLS0tLS1cbiIgKyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxMylcbiIg
KyAKQEAgLTQzMDQsMTIgKzQzMDQsMTIgQEAKIAkJCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJ
IjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA3KVxuIiArIAogCQkJCQkiCUkgaTEgPSBBcnJh
eUxpc3Q8U3RyaW5nPltdOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgIF5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XG4iICsgCiAJCQkJCSJDYW5ub3QgY3JlYXRlIGEgZ2VuZXJpYyBhcnJheSBvZiBBcnJheUxpc3Q8
U3RyaW5nPlxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMi4gRVJST1IgaW4g
WC5qYXZhIChhdCBsaW5lIDgpXG4iICsgCiAJCQkJCSIJSSBpMiA9IExpc3Q8U3RyaW5nPltdOjpu
ZXc7XG4iICsgCi0JCQkJCSIJICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJ
CSIJICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCQkJIkNhbm5vdCBjcmVhdGUg
YSBnZW5lcmljIGFycmF5IG9mIExpc3Q8U3RyaW5nPlxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxu
Iik7CiB9CkBAIC00MzY2LDI3ICs0MzY2LDI3IEBACiAJCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJ
CQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMzQpXG4iICsgCiAJCQkJCSIJSSBpID0g
TGlzdFtdOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJ
CSIJICAgICAgXl5eXl5eXl5eXl5cbiIgKyAKIAkJCQkJIkluY29tcGF0aWJsZSBwYXJhbWV0ZXIg
bGlzdCBmb3IgYXJyYXkgY29uc3RydWN0b3IuIEV4cGVjdGVkIChpbnQpLCBidXQgZm91bmQgKClc
biIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAo
YXQgbGluZSAzNSlcbiIgKyAKIAkJCQkJIglKIGogPSBBcnJheUxpc3RbXTo6bmV3O1xuIiArIAot
CQkJCQkiCSAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJICAgICAgXl5eXl5e
Xl5eXl5eXl5eXlxuIiArIAogCQkJCQkiSW5jb21wYXRpYmxlIHBhcmFtZXRlciBsaXN0IGZvciBh
cnJheSBjb25zdHJ1Y3Rvci4gRXhwZWN0ZWQgKGludCksIGJ1dCBmb3VuZCAobG9uZylcbiIgKyAK
IAkJCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGlu
ZSAzNilcbiIgKyAKIAkJCQkJIglLIGsgPSBBcnJheUxpc3RbXTo6bmV3O1xuIiArIAotCQkJCQki
CSAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJICAgICAgXl5eXl5eXl5eXl5e
Xl5eXlxuIiArIAogCQkJCQkiSW5jb21wYXRpYmxlIHBhcmFtZXRlciBsaXN0IGZvciBhcnJheSBj
b25zdHJ1Y3Rvci4gRXhwZWN0ZWQgKGludCksIGJ1dCBmb3VuZCAoU3RyaW5nLCBsb25nKVxuIiAr
IAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiNC4gRVJST1IgaW4gWC5qYXZhIChhdCBs
aW5lIDQyKVxuIiArIAogCQkJCQkiCVEgcSA9IEFycmF5TGlzdFtdOjpuZXc7XG4iICsgCi0JCQkJ
CSIJICAgICAgXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXG4iICsgCiAJCQkJCSJJbmNvbXBhdGlibGUgcGFyYW1ldGVyIGxpc3QgZm9yIGFycmF5
IGNvbnN0cnVjdG9yLiBFeHBlY3RlZCAoaW50KSwgYnV0IGZvdW5kIChGbG9hdClcbiIgKyAKIAkJ
CQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJIjUuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA0
MylcbiIgKyAKIAkJCQkJIglSIHIgPSBBcnJheUxpc3RbXVtdW106Om5ldztcbiIgKyAKLQkJCQkJ
IgkgICAgICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICBeXl5eXl5e
Xl5eXl5eXl5eXl5eXlxuIiArIAogCQkJCQkiQ29uc3RydWN0ZWQgYXJyYXkgQXJyYXlMaXN0W11b
XVtdIGNhbm5vdCBiZSBhc3NpZ25lZCB0byBMaXN0PFN0cmluZz5bXSBhcyByZXF1aXJlZCBpbiB0
aGUgaW50ZXJmYWNlIGRlc2NyaXB0b3IgIFxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIik7CiB9
CkBAIC00NjMwLDE3ICs0NjMwLDE3IEBACiAJCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkJCSIx
LiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMjMpXG4iICsgCiAJCQkJCSIJSiBqID0gWDxJbnRl
Z2VyPjo6bmV3O1xuIiArIAotCQkJCQkiCSAgICAgIF5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJ
CQkJIgkgICAgICBeXl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCQkJIlRoZSBjb25zdHJ1Y3RlZCBv
YmplY3Qgb2YgdHlwZSBYPEludGVnZXI+IGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBkZXNjcmlw
dG9yXCdzIHJldHVybiB0eXBlOiBYPFN0cmluZz5cbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIg
KyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAyNClcbiIgKyAKIAkJCQkJIglL
IGsgPSBYOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgXl5eXl5eXlxuIiArIAorCQkJCQkiCSAg
ICAgIF5eXl5eXlxuIiArIAogCQkJCQkiVGhlIHRhcmdldCB0eXBlIG9mIHRoaXMgZXhwcmVzc2lv
biBtdXN0IGJlIGEgZnVuY3Rpb25hbCBpbnRlcmZhY2VcbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1c
biIgKyAKIAkJCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAyNilcbiIgKyAKIAkJCQkJ
IglNIG0gPSBYPFN0cmluZz46Om5ldztcbiIgKyAKLQkJCQkJIgkgICAgICBeXl5eXl5eXl5eXl5e
Xl5cbiIgKyAKKwkJCQkJIgkgICAgICBeXl5eXl5eXl5eXl5eXlxuIiArIAogCQkJCQkiVGhlIHR5
cGUgWDxTdHJpbmc+IGRvZXMgbm90IGRlZmluZSBYKFN0cmluZykgdGhhdCBpcyBhcHBsaWNhYmxl
IGhlcmVcbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIpOwogfQpAQCAtNDY3NywyMiArNDY3Nywy
MiBAQAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMS4gRVJST1IgaW4gWC5qYXZhIChh
dCBsaW5lIDE5KVxuIiArIAogCQkJCQkiCUkgaSA9IFg6Om5ldztcbiIgKyAKLQkJCQkJIgkgICAg
ICBeXl5eXl5eXG4iICsgCisJCQkJCSIJICAgICAgXl5eXl5eXG4iICsgCiAJCQkJCSJVbmhhbmRs
ZWQgZXhjZXB0aW9uIHR5cGUgSU9FeGNlcHRpb25cbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIg
KyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxOSlcbiIgKyAKIAkJCQkJIglJ
IGkgPSBYOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgXl5eXl5eXlxuIiArIAorCQkJCQkiCSAg
ICAgIF5eXl5eXlxuIiArIAogCQkJCQkiVW5oYW5kbGVkIGV4Y2VwdGlvbiB0eXBlIEZpbGVOb3RG
b3VuZEV4Y2VwdGlvblxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMy4gRVJS
T1IgaW4gWC5qYXZhIChhdCBsaW5lIDIwKVxuIiArIAogCQkJCQkiCUogaiA9IFg8SW50ZWdlcj46
Om5ldztcbiIgKyAKLQkJCQkJIgkgICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJ
ICAgICAgXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkJCSJUaGUgY29uc3RydWN0ZWQgb2JqZWN0
IG9mIHR5cGUgWDxJbnRlZ2VyPiBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgZGVzY3JpcHRvclwn
cyByZXR1cm4gdHlwZTogWDxTdHJpbmc+XG4iICsgCiAJCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJ
CQkJCSI0LiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMjEpXG4iICsgCiAJCQkJCSIJSyBrID0g
WDo6bmV3O1xuIiArIAotCQkJCQkiCSAgICAgIF5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICBe
Xl5eXl5cbiIgKyAKIAkJCQkJIlVuaGFuZGxlZCBleGNlcHRpb24gdHlwZSBJT0V4Y2VwdGlvblxu
IiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIik7CiB9CkBAIC02NDA4LDcgKzY0MDgsNyBAQAogCQkJ
Ii0tLS0tLS0tLS1cbiIgKyAKIAkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMTApXG4i
ICsgCiAJCQkiCXRoaXMoWjo6bmV3KTtcbiIgKyAKLQkJCSIJICAgICBeXl5eXl5eXG4iICsgCisJ
CQkiCSAgICAgXl5eXl5eXG4iICsgCiAJCQkiTm8gZW5jbG9zaW5nIGluc3RhbmNlIG9mIHRoZSB0
eXBlIFguWSBpcyBhY2Nlc3NpYmxlIGluIHNjb3BlXG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7
CiB9CkBAIC02NDMxLDcgKzY0MzEsNyBAQAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCSIxLiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKIAkJCSIJSSBpID0gWTo6bmV3O1xuIiAr
IAotCQkJIgkgICAgICBeXl5eXl5eXG4iICsgCisJCQkiCSAgICAgIF5eXl5eXlxuIiArIAogCQkJ
Ik5vIGVuY2xvc2luZyBpbnN0YW5jZSBvZiB0aGUgdHlwZSBYIGlzIGFjY2Vzc2libGUgaW4gc2Nv
cGVcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iKTsKIH0KQEAgLTY1MjEsMTIgKzY1MjEsMTIgQEAK
IAkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUg
MTApXG4iICsgCiAJCQkiCUkgaSA9IFg6Om5ldztcbiIgKyAKLQkJCSIJICAgICAgXl5eXl5eXlxu
IiArIAorCQkJIgkgICAgICBeXl5eXl5cbiIgKyAKIAkJCSJBY2Nlc3MgdG8gZW5jbG9zaW5nIGNv
bnN0cnVjdG9yIFgoaW50KSBpcyBlbXVsYXRlZCBieSBhIHN5bnRoZXRpYyBhY2Nlc3NvciBtZXRo
b2RcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkiMy4gRVJST1IgaW4gWC5qYXZhIChh
dCBsaW5lIDEyKVxuIiArIAogCQkJIglpID0gWTo6bmV3O1xuIiArIAotCQkJIgkgICAgXl5eXl5e
XlxuIiArIAorCQkJIgkgICAgXl5eXl5eXG4iICsgCiAJCQkiTm8gZW5jbG9zaW5nIGluc3RhbmNl
IG9mIHRoZSB0eXBlIFggaXMgYWNjZXNzaWJsZSBpbiBzY29wZVxuIiArIAogCQkJIi0tLS0tLS0t
LS1cbiIsCiAJCQludWxsIC8qIG5vIGV4dHJhIGNsYXNzIGxpYnJhcmllcyAqLywKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENv
bnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGM5OWY1NjYuLjI5NmUxNDYgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RDb252
ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTgwMSw3ICsxODAxLDcgQEAKIAkJZXhwcmVzc2lvbiA9IGZy
YWdtZW50LmdldEluaXRpYWxpemVyKCk7CiAJCWFzc2VydFRydWUoZXhwcmVzc2lvbiBpbnN0YW5j
ZW9mIENyZWF0aW9uUmVmZXJlbmNlKTsKIAkJQ3JlYXRpb25SZWZlcmVuY2UgY3JlYXRpb25SZWZl
cmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIGV4cHJlc3Npb247Ci0JCWNoZWNrU291cmNlUmFu
Z2UoY3JlYXRpb25SZWZlcmVuY2UsICJATWFya2VyIFc8QE1hcmtlciBJbnRlZ2VyPiA6OiA8U3Ry
aW5nPiBuZXcgIiwgY29udGVudHMpOworCQljaGVja1NvdXJjZVJhbmdlKGNyZWF0aW9uUmVmZXJl
bmNlLCAiQE1hcmtlciBXPEBNYXJrZXIgSW50ZWdlcj4gOjogPFN0cmluZz4gbmV3IiwgY29udGVu
dHMpOwogCQl0eXBlQmluZGluZyA9IGNyZWF0aW9uUmVmZXJlbmNlLnJlc29sdmVUeXBlQmluZGlu
ZygpOwogCQlhc3NlcnROb3ROdWxsKHR5cGVCaW5kaW5nKTsKIAkJbWV0aG9kQmluZGluZyA9IGNy
ZWF0aW9uUmVmZXJlbmNlLnJlc29sdmVNZXRob2RCaW5kaW5nKCk7CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1JlZmVyZW5jZUV4cHJlc3Npb25UZXN0
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1JlZmVyZW5jZUV4
cHJlc3Npb25UZXN0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNzVk
ZDYyYwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nUmVmZXJlbmNlRXhwcmVzc2lvblRlc3QuamF2YQpAQCAtMCwwICsxLDYyNCBAQAorLyoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioKKyAqIENvcHlyaWdodCAoYykgMjAxMyBJQk0gQ29ycG9yYXRp
b24gYW5kIG90aGVycy4KKyAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQg
dGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKKyAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAorICogd2hpY2ggYWNj
b21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKKyAqIGh0dHA6
Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCisgKgorICogVGhpcyBpcyBhbiBp
bXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1
bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZh
aWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUg
Y29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1Au
CisgKgorICogQ29udHJpYnV0b3JzOgorICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwg
QVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCitwYWNrYWdl
IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLnJld3JpdGUuZGVzY3JpYmluZzsKKworaW1wb3J0
IGphdmEudXRpbC5JdGVyYXRvcjsKKworaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OworCitp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBpbGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5JUGFja2FnZUZyYWdtZW50OworaW1wb3J0IG9yZy5lY2xpcHNlLmpk
dC5jb3JlLmRvbS4qOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5yZXdyaXRlLkFT
VFJld3JpdGU7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLnJld3JpdGUuTGlzdFJl
d3JpdGU7CisKK3B1YmxpYyBjbGFzcyBBU1RSZXdyaXRpbmdSZWZlcmVuY2VFeHByZXNzaW9uVGVz
dCBleHRlbmRzIEFTVFJld3JpdGluZ1Rlc3QgeworCisJcHVibGljIEFTVFJld3JpdGluZ1JlZmVy
ZW5jZUV4cHJlc3Npb25UZXN0KFN0cmluZyBuYW1lKSB7CisJCXN1cGVyKG5hbWUpOworCX0KKwor
CXB1YmxpYyBBU1RSZXdyaXRpbmdSZWZlcmVuY2VFeHByZXNzaW9uVGVzdChTdHJpbmcgbmFtZSwg
aW50IGFwaUxldmVsKSB7CisJCXN1cGVyKG5hbWUsIGFwaUxldmVsKTsKKwl9CisKKwlwdWJsaWMg
c3RhdGljIFRlc3Qgc3VpdGUoKSB7CisJCXJldHVybiBjcmVhdGVTdWl0ZShBU1RSZXdyaXRpbmdS
ZWZlcmVuY2VFeHByZXNzaW9uVGVzdC5jbGFzcyk7CisJfQorCisJLyoqCisJICogdGVzdHMgdmFy
aW91cyBhc3BlY3RzIG9mIENyZWF0aW9uUmVmZXJlbmNlIChDb25zdHJ1Y3RvciBNZXRob2QgUmVm
ZXJlbmNlKSB3aXRoIENsYXNzVHlwZSBhcyBsaHMKKwkgKiBAdGhyb3dzIEV4Y2VwdGlvbgorCSAq
LworCXB1YmxpYyB2b2lkIHRlc3RSZWZlcmVuY2VFeHByZXNzaW9uc190ZXN0MDAxX3NpbmNlXzgo
KSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3Vy
Y2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0NDA3MTMxIiwgZmFsc2UsIG51bGwp
OworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMxO1xuIiArCisJCQkJIlxu
IiArCisJCQkJImludGVyZmFjZSBKIHtcbiIgKworCQkJCSIJdm9pZCBmb28oaW50IHgpO1xuIiAr
CisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBZIHtcbiIgKworCQkJCSIJc3RhdGljIGNsYXNzIFog
e1xuIiArCisJCQkJIgkJcHVibGljIFooaW50IHgpIHtcbiIgKworCQkJCSIJCQlTeXN0ZW0ub3V0
LnByaW50KHgpO1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgkJcHVibGljIHZvaWQgZm9vKGlu
dCB4KSB7XG4iICsKKwkJCQkiCQkJU3lzdGVtLm91dC5wcmludCh4KTtcbiIgKworCQkJCSIJCX1c
biIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBXPFQ+IHtcbiIgKwor
CQkJCSIJcHVibGljIFcoaW50IHgpIHt9XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJ
CQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJCSIJQFN1cHByZXNzV2FybmluZ3MoXCJ1bnVz
ZWRcIilcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdz
KSB7XG4iICsKKwkJCQkiCQlKIGoxID0gVyA8SW50ZWdlcj4gOjogPFN0cmluZz4gbmV3O1xuIiAr
CisJCQkJIgkJSiBqMiA9IFcgPEludGVnZXI+IDo6IDxTdHJpbmc+IG5ldyA7XG4iICsKKwkJCQki
CQlKIGozID0gVyA8SW50ZWdlcj4gOjogPFN0cmluZywgSW50ZWdlcj4gbmV3IDtcbiIgKworCQkJ
CSIJCUogajQgPSBXIDxJbnRlZ2VyPiA6OiA8U3RyaW5nPiBuZXcgO1xuIiArCisJCQkJIgkJSiBq
NSA9IFcgPEludGVnZXI+IDo6IDxTdHJpbmc+IG5ldyA7XG4iICsKKwkJCQkiCQlKIGo2ID0gVyA8
SW50ZWdlcj4gOjogbmV3O1xuIiArCisJCQkJIgkJSiBqNyA9IFcgPEludGVnZXI+IDo6IG5ldztc
biIgKworCQkJCSIJCUogajggPSBXIDxJbnRlZ2VyPiA6OiBuZXc7XG4iICsKKwkJCQkiCX1cbiIg
KworCQkJCSJ9XG4iICsKKwkJCQkiXG4iIDsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmlu
Z0J1ZmZlcihjb250ZW50cyk7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNv
bXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJ
Q29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVFJld3JpdGUgcmV3
cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFz
dFJvb3QuZ2V0QVNUKCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbj0gZmlu
ZFR5cGVEZWNsYXJhdGlvbihhc3RSb290LCAiWCIpOworCisJCU1ldGhvZERlY2xhcmF0aW9uIG1l
dGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlZGVjbGFyYXRpb24sICJtYWluIik7
CisJCXsKKwkJCS8vIGNhc2UgMTogcmVwbGFjZSB0aGUgdHlwZSBhcmd1bWVudC4KKwkJCVZhcmlh
YmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChW
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1l
bnRzKCkuZ2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlhYmxl
RGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJQ3JlYXRpb25SZWZl
cmVuY2UgY3JlYXRpb25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlwZVBhcmFtZXRlciB0eXBl
UGFyYW1ldGVyPSBhc3QubmV3VHlwZVBhcmFtZXRlcigpOworCQkJdHlwZVBhcmFtZXRlci5zZXRO
YW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJJbnRlZ2VyIikpOwkJCQorCQkJTGlzdFJld3JpdGUgbGlz
dFJld3JpdGUgPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGNyZWF0aW9uUmVmZXJlbmNlLCBDcmVh
dGlvblJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5y
ZXBsYWNlKChBU1ROb2RlKShjcmVhdGlvblJlZmVyZW5jZS50eXBlQXJndW1lbnRzKCkuZ2V0KDAp
KSwgdHlwZVBhcmFtZXRlciwgbnVsbCk7CisJCQkKKwkJCS8vIGNhc2UgMjogYWRkIGEgdHlwZSBh
cmd1bWVudC4KKwkJCXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudCkgbWV0aG9kRGVjbC5nZXRCb2R5KCkuc3RhdGVtZW50cygpLmdldCgx
KTsKKwkJCXZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQpIHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDAp
OworCQkJY3JlYXRpb25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJdHlwZVBhcmFtZXRlcj0gYXN0
Lm5ld1R5cGVQYXJhbWV0ZXIoKTsKKwkJCXR5cGVQYXJhbWV0ZXIuc2V0TmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiSW50ZWdlciIpKTsJCQkKKwkJCWxpc3RSZXdyaXRlID0gcmV3cml0ZS5nZXRMaXN0
UmV3cml0ZShjcmVhdGlvblJlZmVyZW5jZSwgQ3JlYXRpb25SZWZlcmVuY2UuVFlQRV9BUkdVTUVO
VFNfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0TGFzdCh0eXBlUGFyYW1ldGVyLCBu
dWxsKTsKKwkJCQorCQkJLy8gY2FzZSAzOiBkZWxldGUgYSB0eXBlIGFyZ3VtZW50LgorCQkJdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50
KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDIpOworCQkJdmFyaWFibGVE
ZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFi
bGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQljcmVhdGlvblJl
ZmVyZW5jZSA9IChDcmVhdGlvblJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
LmdldEluaXRpYWxpemVyKCk7CisJCQlsaXN0UmV3cml0ZSA9IHJld3JpdGUuZ2V0TGlzdFJld3Jp
dGUoY3JlYXRpb25SZWZlcmVuY2UsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BS
T1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSkoY3JlYXRpb25SZWZlcmVu
Y2UudHlwZUFyZ3VtZW50cygpLmdldCgxKSksIG51bGwpOworCisJCQkvLyBjYXNlIDQ6IGRvIG5v
dCBjaGFuZ2UgZXhpc3RpbmcgdHlwZSBhcmcgLSBpbXBsaWNpdCB0ZXN0IGNhc2UuCisJCQkvLyBj
YXNlIDU6IGRlbGV0ZSB0aGUgb25seSB0eXBlIGFyZ3VtZW50LgorCQkJdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNs
LmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDQpOworCQkJdmFyaWFibGVEZWNsYXJhdGlvbkZy
YWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNsYXJhdGlv
blN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQljcmVhdGlvblJlZmVyZW5jZSA9IChD
cmVhdGlvblJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LmdldEluaXRpYWxp
emVyKCk7CisJCQlsaXN0UmV3cml0ZSA9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoY3JlYXRpb25S
ZWZlcmVuY2UsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZKTsKKwkJ
CWZvciAoSXRlcmF0b3IgaXRlcj0gbGlzdFJld3JpdGUuZ2V0T3JpZ2luYWxMaXN0KCkuaXRlcmF0
b3IoKTsgaXRlci5oYXNOZXh0KCk7ICkgey8vbG9vcCBhZGRlZCBmb3IgZ2VuZXJhbCBjYXNlIC0g
aXRlcmF0ZXMgb25jZSBoZXJlLgorCQkJCUFTVE5vZGUgdHlwZUFyZ3VtZW50PSAoQVNUTm9kZSkg
aXRlci5uZXh0KCk7CisJCQkJbGlzdFJld3JpdGUucmVtb3ZlKHR5cGVBcmd1bWVudCwgbnVsbCk7
CisJCQl9CisKKwkJCS8vIGNhc2UgNjogZG8gbm90IGNoYW5nZSBhIENyZWF0aW9uUmVmZXJlbmNl
IG9yaWdpbmFsbHkgaGF2aW5nIG5vIHR5cGUgYXJndW1lbnRzIC0gaW1wbGljaXQgdGVzdCBjYXNl
LgorCQkJLy8gY2FzZSA3OiBJbnNlcnQgYSB0eXBlIGFyZ3VtZW50IGZvciBhIENyZWF0aW9uUmVm
ZXJlbmNlIG9yaWdpbmFsbHkgaGF2aW5nIG5vIHR5cGUgYXJndW1lbnRzLgorCQkJdmFyaWFibGVE
ZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRo
b2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDYpOworCQkJdmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQljcmVhdGlvblJlZmVyZW5j
ZSA9IChDcmVhdGlvblJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LmdldElu
aXRpYWxpemVyKCk7CisJCQlsaXN0UmV3cml0ZSA9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoY3Jl
YXRpb25SZWZlcmVuY2UsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZ
KTsKKwkJCXR5cGVQYXJhbWV0ZXI9IGFzdC5uZXdUeXBlUGFyYW1ldGVyKCk7CisJCQl0eXBlUGFy
YW1ldGVyLnNldE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlN0cmluZyIpKTsJCQkKKwkJCWxpc3RS
ZXdyaXRlLmluc2VydEZpcnN0KHR5cGVQYXJhbWV0ZXIsIG51bGwpOworCisJCQkvLyBjYXNlIDg6
IGNoYW5nZSBhIENyZWF0aW9uUmVmZXJlbmNlIHRvIGEgVHlwZU1ldGhvZFJlZmVyZW5jZS4KKwkJ
CXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgbWV0aG9kRGVjbC5nZXRCb2R5KCkuc3RhdGVtZW50cygpLmdldCg3KTsKKwkJCXZhcmlh
YmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJY3JlYXRp
b25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFyYXRpb25GcmFn
bWVudC5nZXRJbml0aWFsaXplcigpOworCQkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gYXN0Lm5l
d1NpbXBsZVR5cGUoYXN0Lm5ld1F1YWxpZmllZE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlkiKSwg
YXN0Lm5ld1NpbXBsZU5hbWUoIloiKSkpOworCQkJcmV3cml0ZS5yZXBsYWNlKGNyZWF0aW9uUmVm
ZXJlbmNlLmdldFR5cGUoKSwgc2ltcGxlVHlwZSwgbnVsbCk7CisJCX0KKwkJCisJCVN0cmluZyBw
cmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCQljb250ZW50cyA9ICJwYWNr
YWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiaW50ZXJmYWNlIEoge1xuIiAr
CisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIFkg
e1xuIiArCisJCQkJIglzdGF0aWMgY2xhc3MgWiB7XG4iICsKKwkJCQkiCQlwdWJsaWMgWihpbnQg
eCkge1xuIiArCisJCQkJIgkJCVN5c3RlbS5vdXQucHJpbnQoeCk7XG4iICsKKwkJCQkiCQl9XG4i
ICsKKwkJCQkiCQlwdWJsaWMgdm9pZCBmb28oaW50IHgpIHtcbiIgKworCQkJCSIJCQlTeXN0ZW0u
b3V0LnByaW50KHgpO1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxu
IiArCisJCQkJImNsYXNzIFc8VD4ge1xuIiArCisJCQkJIglwdWJsaWMgVyhpbnQgeCkge31cbiIg
KworCQkJCSJ9XG4iICsKKwkJCQkiXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJ
CQkJIglAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHtcbiIgKworCQkJCSIJCUogajEgPSBXIDxJ
bnRlZ2VyPiA6OiA8SW50ZWdlcj4gbmV3O1xuIiArCisJCQkJIgkJSiBqMiA9IFcgPEludGVnZXI+
IDo6IDxTdHJpbmcsIEludGVnZXI+IG5ldyA7XG4iICsKKwkJCQkiCQlKIGozID0gVyA8SW50ZWdl
cj4gOjogPFN0cmluZz4gbmV3IDtcbiIgKworCQkJCSIJCUogajQgPSBXIDxJbnRlZ2VyPiA6OiA8
U3RyaW5nPiBuZXcgO1xuIiArCisJCQkJIgkJSiBqNSA9IFcgPEludGVnZXI+IDo6IG5ldyA7XG4i
ICsKKwkJCQkiCQlKIGo2ID0gVyA8SW50ZWdlcj4gOjogbmV3O1xuIiArCisJCQkJIgkJSiBqNyA9
IFcgPEludGVnZXI+IDo6PFN0cmluZz4gbmV3O1xuIiArCisJCQkJIgkJSiBqOCA9IFkuWiA6OiBu
ZXc7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiXG4iIDsKKwkJYnVmPSBu
ZXcgU3RyaW5nQnVmZmVyKGNvbnRlbnRzKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywg
YnVmLnRvU3RyaW5nKCkpOworCX0KKwkKKwkvKioKKwkgKiB0ZXN0cyB2YXJpb3VzIGFzcGVjdHMg
b2YgQ3JlYXRpb25SZWZlcmVuY2UgKENvbnN0cnVjdG9yIE1ldGhvZCBSZWZlcmVuY2UpIHdpdGgg
QXJyYXlUeXBlIGFzIGxocworCSAqIEB0aHJvd3MgRXhjZXB0aW9uCisJICovCisJcHVibGljIHZv
aWQgdGVzdFJlZmVyZW5jZUV4cHJlc3Npb25zX3Rlc3QwMDJfc2luY2VfOCgpIHRocm93cyBFeGNl
cHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVh
dGVQYWNrYWdlRnJhZ21lbnQoInRlc3Q0MDcxMzEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZyBj
b250ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiaW50ZXJmYWNlIEkge1xu
IiArCisJCQkJIglPYmplY3QgZm9vKGludCB4KTtcbiIgKworCQkJCSJ9XG4iICsKKwkJCQkicHVi
bGljIGNsYXNzIFgge1xuIiArCisJCQkJIglAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxu
IiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHtcbiIg
KworCQkJCSIJCUkgaTEgPSBpbnRbXSA6OiBuZXc7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9
XG4iICsKKwkJCQkiXG4iIDsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcihj
b250ZW50cyk7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9u
VW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJQ29tcGlsYXRp
b25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNU
UmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0
QVNUKCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbj0gZmluZFR5cGVEZWNs
YXJhdGlvbihhc3RSb290LCAiWCIpOworCisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9
IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlZGVjbGFyYXRpb24sICJtYWluIik7CisJCXsKKwkJ
CS8vIHJlcGxhY2UgdGhlIHByaW1pdGl2ZSB0eXBlIG9mIGxocyBmcm9tIGludCB0byBjaGFyLgor
CQkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1ldGhvZERlY2wuZ2V0Qm9keSgp
LnN0YXRlbWVudHMoKS5nZXQoMCk7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgdmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkg
dmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQlDcmVh
dGlvblJlZmVyZW5jZSBjcmVhdGlvblJlZmVyZW5jZSA9IChDcmVhdGlvblJlZmVyZW5jZSkgdmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LmdldEluaXRpYWxpemVyKCk7CisJCQlBcnJheVR5cGUg
YXJyYXlUeXBlID0gKEFycmF5VHlwZSkgY3JlYXRpb25SZWZlcmVuY2UuZ2V0VHlwZSgpOworCQkJ
cmV3cml0ZS5yZXBsYWNlKGFycmF5VHlwZS5nZXRFbGVtZW50VHlwZSgpLCBhc3QubmV3UHJpbWl0
aXZlVHlwZShQcmltaXRpdmVUeXBlLkNIQVIpLCBudWxsKTsKKwkJfQorCQlTdHJpbmcgcHJldmll
dz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKwkJY29udGVudHMgPSAicGFja2FnZSB0
ZXN0NDA3MTMxO1xuIiArCisJCQkJImludGVyZmFjZSBJIHtcbiIgKworCQkJCSIJT2JqZWN0IGZv
byhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKwor
CQkJCSIJQFN1cHByZXNzV2FybmluZ3MoXCJ1bnVzZWRcIilcbiIgKworCQkJCSIJcHVibGljIHN0
YXRpYyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlJIGkxID0gY2hh
cltdIDo6IG5ldztcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgOwor
CQlidWY9IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOworCQlhc3NlcnRFcXVhbFN0cmluZyhw
cmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCQorCS8qKgorCSAqIHRlc3RzIHZhcmlvdXMg
YXNwZWN0cyBvZiB7QGxpbmsgRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZX0KKwkgKiBAdGhyb3dz
IEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3RSZWZlcmVuY2VFeHByZXNzaW9uc190
ZXN0MDAzX3NpbmNlXzgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBw
YWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0NDA3MTMx
IiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMx
O1xuIiArCisJCQkJImludGVyZmFjZSBKIHtcbiIgKworCQkJCSIJdm9pZCBmb28oaW50IHgpO1xu
IiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBZIHtcbiIgKworCQkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBaIHtcbiIgKworCQkJ
CSIJcHVibGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIg
KworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCUBTdXBwcmVzc1dhcm5pbmdzKFwi
dW51c2VkXCIpXG4iICsKKwkJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluIChTdHJpbmcgW10g
YXJncykge1xuIiArCisJCQkJIgkJWSB5ID0gbmV3IFkoKTtcbiIgKworCQkJCSIJCVogeiA9IG5l
dyBaKCk7XG4iICsKKwkJCQkiCQlKIGoxID0geSA6OiBmb287XG4iICsKKwkJCQkiCQlKIGoyID0g
eiA6OiA8U3RyaW5nPiBiYXI7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQki
XG4iIDsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcihjb250ZW50cyk7CisJ
CUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZh
IiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJv
b3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVh
dGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisKKwkJ
VHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbj0gZmluZFR5cGVEZWNsYXJhdGlvbihhc3RS
b290LCAiWCIpOworCisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2RE
ZWNsYXJhdGlvbih0eXBlZGVjbGFyYXRpb24sICJtYWluIik7CisJCXsKKwkJCS8vIHJlcGxhY2Ug
dGhlIGxocyBhbmQgdGhlIHJocy4KKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50
KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDIpOworCQkJVmFyaWFibGVE
ZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21l
bnRzKCkuZ2V0KDApOworCQkJRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSBleHByZXNzaW9uTWV0
aG9kUmVmZXJlbmNlID0gKEV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFy
YXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlwZVBhcmFtZXRlciB0eXBlUGFy
YW1ldGVyPSBhc3QubmV3VHlwZVBhcmFtZXRlcigpOworCQkJdHlwZVBhcmFtZXRlci5zZXROYW1l
KGFzdC5uZXdTaW1wbGVOYW1lKCJTdHJpbmciKSk7CQkJCisJCQlyZXdyaXRlLnJlcGxhY2UoZXhw
cmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5nZXRFeHByZXNzaW9uKCksIGFzdC5uZXdTaW1wbGVOYW1l
KCJ6IiksIG51bGwpOworCQkJcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShleHByZXNzaW9uTWV0aG9k
UmVmZXJlbmNlLCBFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BF
UlRZKS5pbnNlcnRGaXJzdCh0eXBlUGFyYW1ldGVyLCBudWxsKTsKKwkJCXJld3JpdGUucmVwbGFj
ZShleHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlLmdldE5hbWUoKSwgYXN0Lm5ld1NpbXBsZU5hbWUo
ImJhciIpLCBudWxsKTsKKwkJCQorCQkJdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChW
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1l
bnRzKCkuZ2V0KDMpOworCQkJdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVu
dHMoKS5nZXQoMCk7CisJCQlleHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlID0gKEV4cHJlc3Npb25N
ZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXpl
cigpOworCQkJcmV3cml0ZS5yZXBsYWNlKGV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UuZ2V0RXhw
cmVzc2lvbigpLCBhc3QubmV3U2ltcGxlTmFtZSgieSIpLCBudWxsKTsKKwkJCUFTVE5vZGUgdHlw
ZUFyZ3VtZW50ID0gKEFTVE5vZGUpIGV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UudHlwZUFyZ3Vt
ZW50cygpLmdldCgwKTsKKwkJCXJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZXhwcmVzc2lvbk1ldGhv
ZFJlZmVyZW5jZSwgRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9Q
RVJUWSkucmVtb3ZlKHR5cGVBcmd1bWVudCwgbnVsbCk7CisJCQlyZXdyaXRlLnJlcGxhY2UoZXhw
cmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5nZXROYW1lKCksIGFzdC5uZXdTaW1wbGVOYW1lKCJmb28i
KSwgbnVsbCk7CisJCQkKKwkJfQorCQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1
LCByZXdyaXRlKTsKKwkJY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMxO1xuIiArCisJCQkJ
ImludGVyZmFjZSBKIHtcbiIgKworCQkJCSIJdm9pZCBmb28oaW50IHgpO1xuIiArCisJCQkJIn1c
biIgKworCQkJCSJjbGFzcyBZIHtcbiIgKworCQkJCSIJcHVibGljIHZvaWQgZm9vKGludCB4KSB7
fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBaIHtcbiIgKworCQkJCSIJcHVibGljIHZv
aWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgKworCQkJCSJwdWJs
aWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCUBTdXBwcmVzc1dhcm5pbmdzKFwidW51c2VkXCIpXG4i
ICsKKwkJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluIChTdHJpbmcgW10gYXJncykge1xuIiAr
CisJCQkJIgkJWSB5ID0gbmV3IFkoKTtcbiIgKworCQkJCSIJCVogeiA9IG5ldyBaKCk7XG4iICsK
KwkJCQkiCQlKIGoxID0geiA6OjxTdHJpbmc+IGJhcjtcbiIgKworCQkJCSIJCUogajIgPSB5IDo6
IGZvbztcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgOworCQlidWY9
IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOworCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3
LCBidWYudG9TdHJpbmcoKSk7CisJfQorCQorCS8qKgorCSAqIHRlc3RzIHZhcmlvdXMgYXNwZWN0
cyBvZiB7QGxpbmsgVHlwZU1ldGhvZFJlZmVyZW5jZX0KKwkgKiBAdGhyb3dzIEV4Y2VwdGlvbgor
CSAqLworCXB1YmxpYyB2b2lkIHRlc3RSZWZlcmVuY2VFeHByZXNzaW9uc190ZXN0MDA0X3NpbmNl
XzgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5z
b3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0NDA3MTMxIiwgZmFsc2UsIG51
bGwpOworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMxO1xuIiArCisJCQkJ
InBhY2thZ2UgdGVzdDQwNzEzMTtcbiIgKworCQkJCSJcbiIgKworCQkJCSJpbnRlcmZhY2UgSiB7
XG4iICsKKwkJCQkiCXZvaWQgZm9vKGludCB4KTtcbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiY2xh
c3MgWSB7XG4iICsKKwkJCQkiCXN0YXRpYyBjbGFzcyBaIHtcbiIgKworCQkJCSIJCXB1YmxpYyBa
KGludCB4KSB7fVxuIiArCisJCQkJIgkJcHVibGljIHN0YXRpYyB2b2lkIGZvbyhpbnQgeCkge31c
biIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBXPFQ+IHtcbiIgKwor
CQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIGJhcihpbnQgeCkge31cbiIgKworCQkJCSJ9XG4iICsK
KwkJCQkiXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIglAU3VwcHJlc3NX
YXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbiAo
U3RyaW5nIFtdIGFyZ3MpIHtcbiIgKworCQkJCSIJCUogajEgPSBZLkBNYXJrZXIgWiA6OiBmb287
XG4iICsKKwkJCQkiCQlKIGoyID0gQE1hcmtlciBXIDo6IDxJbnRlZ2VyPiBiYXI7XG4iICsKKwkJ
CQkiCX1cbiIgKworCQkJCSJAVGFyZ2V0IChFbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJ
CSJAaW50ZXJmYWNlIEBNYXJrZXIge31cbiIgKworCQkJCSJ9XG4iIDsKKwkJU3RyaW5nQnVmZmVy
IGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcihjb250ZW50cyk7CisJCUlDb21waWxhdGlvblVuaXQgY3U9
IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZh
bHNlLCBudWxsKTsKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJ
CUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7
CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVk
ZWNsYXJhdGlvbj0gZmluZFR5cGVEZWNsYXJhdGlvbihhc3RSb290LCAiWCIpOworCisJCU1ldGhv
ZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlZGVjbGFy
YXRpb24sICJtYWluIik7CisJCXsKKwkJCS8vIHJlcGxhY2UgdGhlIGxocyBhbmQgdGhlIHJocy4K
KwkJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHko
KS5zdGF0ZW1lbnRzKCkuZ2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZh
cmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQp
IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJVHlw
ZU1ldGhvZFJlZmVyZW5jZSB0eXBlTWV0aG9kUmVmZXJlbmNlID0gKFR5cGVNZXRob2RSZWZlcmVu
Y2UpIHZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlw
ZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyPSBhc3QubmV3VHlwZVBhcmFtZXRlcigpOworCQkJdHlw
ZVBhcmFtZXRlci5zZXROYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJJbnRlZ2VyIikpOworCQkJVHlw
ZSBuZXdUeXBlID0gYXN0Lm5ld1NpbXBsZVR5cGUoYXN0Lm5ld1NpbXBsZU5hbWUoIlciKSk7CisJ
CQlyZXdyaXRlLnJlcGxhY2UodHlwZU1ldGhvZFJlZmVyZW5jZS5nZXRUeXBlKCksIG5ld1R5cGUs
IG51bGwpOworCQkJcmV3cml0ZS5nZXRMaXN0UmV3cml0ZSh0eXBlTWV0aG9kUmVmZXJlbmNlLCBU
eXBlTWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZKS5pbnNlcnRGaXJzdCh0
eXBlUGFyYW1ldGVyLCBudWxsKTsKKwkJCXJld3JpdGUucmVwbGFjZSh0eXBlTWV0aG9kUmVmZXJl
bmNlLmdldE5hbWUoKSwgYXN0Lm5ld1NpbXBsZU5hbWUoImJhciIpLCBudWxsKTsKKwkJCQorCQkJ
dmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDEpOworCQkJdmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQl0eXBlTWV0
aG9kUmVmZXJlbmNlID0gKFR5cGVNZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFyYXRpb25G
cmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJbmV3VHlwZSA9IGFzdC5uZXdTaW1wbGVUeXBl
KGFzdC5uZXdRdWFsaWZpZWROYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJZIiksYXN0Lm5ld1NpbXBs
ZU5hbWUoIloiKSkpOworCQkJcmV3cml0ZS5yZXBsYWNlKHR5cGVNZXRob2RSZWZlcmVuY2UuZ2V0
VHlwZSgpLCBuZXdUeXBlLCBudWxsKTsKKwkJCUFTVE5vZGUgdHlwZUFyZ3VtZW50ID0gKEFTVE5v
ZGUpIHR5cGVNZXRob2RSZWZlcmVuY2UudHlwZUFyZ3VtZW50cygpLmdldCgwKTsKKwkJCXJld3Jp
dGUuZ2V0TGlzdFJld3JpdGUodHlwZU1ldGhvZFJlZmVyZW5jZSwgVHlwZU1ldGhvZFJlZmVyZW5j
ZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJUWSkucmVtb3ZlKHR5cGVBcmd1bWVudCwgbnVsbCk7CisJ
CQlyZXdyaXRlLnJlcGxhY2UodHlwZU1ldGhvZFJlZmVyZW5jZS5nZXROYW1lKCksIGFzdC5uZXdT
aW1wbGVOYW1lKCJmb28iKSwgbnVsbCk7CQkJCisJCX0KKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1
YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWNvbnRlbnRzID0gInBhY2thZ2UgdGVzdDQwNzEz
MTtcbiIgKworCQkJCSJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiXG4iICsKKwkJCQki
aW50ZXJmYWNlIEoge1xuIiArCisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxu
IiArCisJCQkJImNsYXNzIFkge1xuIiArCisJCQkJIglzdGF0aWMgY2xhc3MgWiB7XG4iICsKKwkJ
CQkiCQlwdWJsaWMgWihpbnQgeCkge31cbiIgKworCQkJCSIJCXB1YmxpYyBzdGF0aWMgdm9pZCBm
b28oaW50IHgpIHt9XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiY2xhc3Mg
VzxUPiB7XG4iICsKKwkJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBiYXIoaW50IHgpIHt9XG4iICsK
KwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJ
CSIJQFN1cHByZXNzV2FybmluZ3MoXCJ1bnVzZWRcIilcbiIgKworCQkJCSIJcHVibGljIHN0YXRp
YyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlKIGoxID0gVyA6OjxJ
bnRlZ2VyPiBiYXI7XG4iICsKKwkJCQkiCQlKIGoyID0gWS5aIDo6IGZvbztcbiIgKworCQkJCSIJ
fVxuIiArCisJCQkJIkBUYXJnZXQgKEVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBp
bnRlcmZhY2UgQE1hcmtlciB7fVxuIiArCisJCQkJIn1cbiIgOworCQlidWY9IG5ldyBTdHJpbmdC
dWZmZXIoY29udGVudHMpOworCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJp
bmcoKSk7CisJfQorCQorCS8qKgorCSAqIHRlc3RzIHZhcmlvdXMgYXNwZWN0cyBvZiBTdXBlck1l
dGhvZFJlZmVyZW5jZQorCSAqIEB0aHJvd3MgRXhjZXB0aW9uCisJICovCisJcHVibGljIHZvaWQg
dGVzdFJlZmVyZW5jZUV4cHJlc3Npb25zX3Rlc3QwMDVfc2luY2VfOCgpIHRocm93cyBFeGNlcHRp
b24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQ
YWNrYWdlRnJhZ21lbnQoInRlc3Q0MDcxMzEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZyBjb250
ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiaW50ZXJmYWNlIEoge1xuIiAr
CisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJ
CQkJImNsYXNzIFhYIHtcbiIgKworCQkJCSIJcHVibGljIHZvaWQgZm9vKGludCB4KSB7fVxuIiAr
CisJCQkJIglwdWJsaWMgdm9pZCBiYXIoaW50IHgpIHt9XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
IlxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWFgge1xuIiArCisJCQkJIiAgICAg
ICBAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIiAgICAgICBwdWJsaWMg
IHZvaWQgYmFyKGludCBpKSB7XG4iICsKKwkJCQkiICAgICAgICAgICBKIGp4ID0gc3VwZXIgOjog
PEludGVnZXI+IGZvbztcbiIgKworCQkJCSIgICAgICAgICAgIEoganogPSBYLnN1cGVyIDo6IGJh
cjtcbiIgKworCQkJCSIgICAgICAgfVxuIiArCisJCQkJIiAgICAgICBwdWJsaWMgc3RhdGljIHZv
aWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHt9XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiA7
CisJCVN0cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOworCQlJQ29t
cGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlguamF2YSIsIGJ1
Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7CisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBj
cmVhdGVBU1QoY3UpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFz
dFJvb3QuZ2V0QVNUKCkpOworCQlBU1QgYXN0PSBhc3RSb290LmdldEFTVCgpOworCisJCVR5cGVE
ZWNsYXJhdGlvbiB0eXBlZGVjbGFyYXRpb249IGZpbmRUeXBlRGVjbGFyYXRpb24oYXN0Um9vdCwg
IlgiKTsKKworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFy
YXRpb24odHlwZWRlY2xhcmF0aW9uLCAiYmFyIik7CisJCXsKKwkJCS8vIHJlcGxhY2UgdGhlIGxo
cyBhbmQgdGhlIHJocywgYWRkL2RlbGV0ZSB0eXBlIGFyZ3VtZW50cy4KKwkJCVZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCku
Z2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxlRGVjbGFyYXRp
b25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlhYmxlRGVjbGFy
YXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJU3VwZXJNZXRob2RSZWZlcmVu
Y2Ugc3VwZXJNZXRob2RSZWZlcmVuY2UgPSAoU3VwZXJNZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJcmV3cml0ZS5zZXQoc3Vw
ZXJNZXRob2RSZWZlcmVuY2UsIFN1cGVyTWV0aG9kUmVmZXJlbmNlLlFVQUxJRklFUl9QUk9QRVJU
WSwgYXN0Lm5ld1NpbXBsZU5hbWUoIlgiKSwgbnVsbCk7CisJCQlBU1ROb2RlIHR5cGVBcmd1bWVu
dCA9IChBU1ROb2RlKSBzdXBlck1ldGhvZFJlZmVyZW5jZS50eXBlQXJndW1lbnRzKCkuZ2V0KDAp
OworCQkJcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShzdXBlck1ldGhvZFJlZmVyZW5jZSwgU3VwZXJN
ZXRob2RSZWZlcmVuY2UuVFlQRV9BUkdVTUVOVFNfUFJPUEVSVFkpLnJlbW92ZSh0eXBlQXJndW1l
bnQsIG51bGwpOworCQkJcmV3cml0ZS5yZXBsYWNlKHN1cGVyTWV0aG9kUmVmZXJlbmNlLmdldE5h
bWUoKSwgYXN0Lm5ld1NpbXBsZU5hbWUoImJhciIpLCBudWxsKTsKKwkJCQorCQkJdmFyaWFibGVE
ZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRo
b2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDEpOworCQkJdmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQlzdXBlck1ldGhvZFJlZmVy
ZW5jZSA9IChTdXBlck1ldGhvZFJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
LmdldEluaXRpYWxpemVyKCk7CisJCQlyZXdyaXRlLnJlbW92ZShzdXBlck1ldGhvZFJlZmVyZW5j
ZS5nZXRRdWFsaWZpZXIoKSwgbnVsbCk7CisJCQlUeXBlUGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXI9
IGFzdC5uZXdUeXBlUGFyYW1ldGVyKCk7CisJCQl0eXBlUGFyYW1ldGVyLnNldE5hbWUoYXN0Lm5l
d1NpbXBsZU5hbWUoIlN0cmluZyIpKTsKKwkJCXJld3JpdGUuZ2V0TGlzdFJld3JpdGUoc3VwZXJN
ZXRob2RSZWZlcmVuY2UsIFN1cGVyTWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BF
UlRZKS5pbnNlcnRGaXJzdCh0eXBlUGFyYW1ldGVyLCBudWxsKTsKKwkJCXJld3JpdGUucmVwbGFj
ZShzdXBlck1ldGhvZFJlZmVyZW5jZS5nZXROYW1lKCksIGFzdC5uZXdTaW1wbGVOYW1lKCJmb28i
KSwgbnVsbCk7CisJCQkKKwkJfQorCQlTdHJpbmcgcHJldmlldyA9IGV2YWx1YXRlUmV3cml0ZShj
dSwgcmV3cml0ZSk7CisJCWNvbnRlbnRzID0gInBhY2thZ2UgdGVzdDQwNzEzMTtcbiIgKworCQkJ
CSJpbnRlcmZhY2UgSiB7XG4iICsKKwkJCQkiCXZvaWQgZm9vKGludCB4KTtcbiIgKworCQkJCSJ9
XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiY2xhc3MgWFgge1xuIiArCisJCQkJIglwdWJsaWMgdm9p
ZCBmb28oaW50IHgpIHt9XG4iICsKKwkJCQkiCXB1YmxpYyB2b2lkIGJhcihpbnQgeCkge31cbiIg
KworCQkJCSJ9XG4iICsKKwkJCQkiXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFggZXh0ZW5kcyBY
WCB7XG4iICsKKwkJCQkiICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW51c2VkXCIpXG4iICsK
KwkJCQkiICAgICAgIHB1YmxpYyAgdm9pZCBiYXIoaW50IGkpIHtcbiIgKworCQkJCSIgICAgICAg
ICAgIEoganggPSBYLnN1cGVyIDo6IGJhcjtcbiIgKworCQkJCSIgICAgICAgICAgIEoganogPSBz
dXBlciA6OjxTdHJpbmc+IGZvbztcbiIgKworCQkJCSIgICAgICAgfVxuIiArCisJCQkJIiAgICAg
ICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHt9XG4iICsKKwkJCQki
fVxuIiArCisJCQkJIlxuIiA7CisJCWJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOwor
CQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCS8qKgor
CSAqIHRlc3RzIGNyb3NzIHJld3JpdGluZyAtIGNoYW5naW5nIGZyb20gb25lIG1lbWJlciBvZiBy
ZWZlcmVuY2UgZXhwcmVzc2lvbnMgdG8gYW5vdGhlciB0eXBlLgorCSAqIEB0aHJvd3MgRXhjZXB0
aW9uCisJICovCisJcHVibGljIHZvaWQgdGVzdFJlZmVyZW5jZUV4cHJlc3Npb25zX3Rlc3QwMDZf
c2luY2VfOCgpIHRocm93cyBFeGNlcHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0
aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJhZ21lbnQoInRlc3Q0MDcxMzEiLCBmYWxz
ZSwgbnVsbCk7CisJCVN0cmluZyBjb250ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsK
KwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLio7XG4iICsKKwkJCQkiaW50ZXJmYWNl
IEoge1xuIiArCisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
ImNsYXNzIFkge1xuIiArCisJCQkJIglzdGF0aWMgY2xhc3MgWiB7XG4iICsKKwkJCQkiCQlwdWJs
aWMgWihpbnQgeCkge31cbiIgKworCQkJCSIJCXB1YmxpYyBzdGF0aWMgdm9pZCBmb28oaW50IHgp
IHt9XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiY2xhc3MgVzxUPiB7XG4i
ICsKKwkJCQkiCXB1YmxpYyBXKGludCB4KSB7fVxuIiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZv
aWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgKworCQkJCSJjbGFz
cyBYWCB7XG4iICsKKwkJCQkiCXB1YmxpYyB2b2lkIGZvbyhpbnQgeCkge31cbiIgKworCQkJCSIJ
cHVibGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgKwor
CQkJCSJwdWJsaWMgY2xhc3MgWCBleHRlbmRzIFhYIHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRp
YyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7fVxuIiArCisJCQkJIglAU3VwcHJlc3NXYXJu
aW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglwdWJsaWMgdm9pZCBiYXIgKCkge1xuIiArCisJ
CQkJIgkJSiBqMSA9IFcgPEludGVnZXI+IDo6IDxTdHJpbmc+IG5ldztcbiIgKworCQkJCSIJCUog
ajIgPSBZLlogOjogbmV3O1xuIiArCisJCQkJIgkJSiBqMyA9IFkuQE1hcmtlciBaIDo6IGZvbztc
biIgKworCQkJCSIJCUoganggPSBzdXBlciA6OiBmb287XG4iICsKKwkJCQkiCQlKIGp6ID0gWC5z
dXBlciA6OiBiYXI7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiQFRhcmdl
dCAoRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIge31c
biIgKworCQkJCSJ9XG4iOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5nQnVmZmVyKGNv
bnRlbnRzKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25V
bml0KCJYLmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOworCQlDb21waWxhdGlv
blVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUKGN1KTsKKwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RS
ZXdyaXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgpKTsKKwkJQVNUIGFzdD0gYXN0Um9vdC5nZXRB
U1QoKTsKKworCQlUeXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uPSBmaW5kVHlwZURlY2xh
cmF0aW9uKGFzdFJvb3QsICJYIik7CisKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0g
ZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGVkZWNsYXJhdGlvbiwgImJhciIpOworCQl7CisJCQkv
LyBjYXNlIDE6IGNyZWF0aW9uUmVmZXJlbmNlIHRvIFR5cGVNZXRob2RSZWZlcmVuY2UKKwkJCVZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9
IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0
ZW1lbnRzKCkuZ2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlh
YmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJQ3JlYXRpb25S
ZWZlcmVuY2UgY3JlYXRpb25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlwZU1ldGhvZFJlZmVy
ZW5jZSB0eXBlTWV0aG9kUmVmZXJlbmNlID0gYXN0Lm5ld1R5cGVNZXRob2RSZWZlcmVuY2UoKTsK
KwkJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IGFzdC5uZXdRdWFsaWZpZWRUeXBlKGFz
dC5uZXdTaW1wbGVUeXBlKGFzdC5uZXdTaW1wbGVOYW1lKCJZIikpLCBhc3QubmV3U2ltcGxlTmFt
ZSgiWiIpKTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbiA9IGFzdC5uZXdN
YXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5u
ZXdTaW1wbGVOYW1lKCJNYXJrZXIiKSk7CisJCQlxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCku
YWRkKG1hcmtlckFubm90YXRpb24pOworCQkJdHlwZU1ldGhvZFJlZmVyZW5jZS5zZXRUeXBlKHF1
YWxpZmllZFR5cGUpOworCQkJdHlwZU1ldGhvZFJlZmVyZW5jZS5zZXROYW1lKGFzdC5uZXdTaW1w
bGVOYW1lKCJmb28iKSk7CisJCQlyZXdyaXRlLnJlcGxhY2UoY3JlYXRpb25SZWZlcmVuY2UsIHR5
cGVNZXRob2RSZWZlcmVuY2UsIG51bGwpOworCQkJCisJCQkvLyBjYXNlIDI6IENyZWF0aW9uUmVm
ZXJlbmNlIHRvIFN1cGVyTWV0aG9kUmVmZXJlbmNlCisJCQl2YXJpYWJsZURlY2xhcmF0aW9uU3Rh
dGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1ldGhvZERlY2wuZ2V0Qm9k
eSgpLnN0YXRlbWVudHMoKS5nZXQoMSk7CisJCQl2YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQg
PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50LmZyYWdtZW50cygpLmdldCgwKTsKKwkJCWNyZWF0aW9uUmVmZXJlbmNlID0gKENyZWF0aW9u
UmVmZXJlbmNlKSB2YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKTsK
KwkJCVN1cGVyTWV0aG9kUmVmZXJlbmNlIHN1cGVyTWV0aG9kUmVmZXJlbmNlID0gYXN0Lm5ld1N1
cGVyTWV0aG9kUmVmZXJlbmNlKCk7CisJCQlzdXBlck1ldGhvZFJlZmVyZW5jZS5zZXROYW1lKGFz
dC5uZXdTaW1wbGVOYW1lKCJmb28iKSk7CisJCQlyZXdyaXRlLnJlcGxhY2UoY3JlYXRpb25SZWZl
cmVuY2UsIHN1cGVyTWV0aG9kUmVmZXJlbmNlLCBudWxsKTsKKwkJCQorCQkJLy8gY2FzZSAzOiBU
eXBlTWV0aG9kUmVmZXJlbmNlIHRvIFN1cGVyTWV0aG9kUmVmZXJlbmNlCisJCQl2YXJpYWJsZURl
Y2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1ldGhv
ZERlY2wuZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoMik7CisJCQl2YXJpYWJsZURlY2xhcmF0
aW9uRnJhZ21lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSB2YXJpYWJsZURlY2xh
cmF0aW9uU3RhdGVtZW50LmZyYWdtZW50cygpLmdldCgwKTsKKwkJCXR5cGVNZXRob2RSZWZlcmVu
Y2UgPSAoVHlwZU1ldGhvZFJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50Lmdl
dEluaXRpYWxpemVyKCk7CisJCQlzdXBlck1ldGhvZFJlZmVyZW5jZSA9IGFzdC5uZXdTdXBlck1l
dGhvZFJlZmVyZW5jZSgpOworCQkJc3VwZXJNZXRob2RSZWZlcmVuY2Uuc2V0TmFtZShhc3QubmV3
U2ltcGxlTmFtZSgiYmFyIikpOworCQkJc3VwZXJNZXRob2RSZWZlcmVuY2Uuc2V0UXVhbGlmaWVy
KGFzdC5uZXdTaW1wbGVOYW1lKCJYIikpOworCQkJcmV3cml0ZS5yZXBsYWNlKHR5cGVNZXRob2RS
ZWZlcmVuY2UsIHN1cGVyTWV0aG9kUmVmZXJlbmNlLCBudWxsKTsJCQkKKwkJCQorCQkJLy8gY2Fz
ZSA0OiBTdXBlck1ldGhvZFJlZmVyZW5jZSB0byBDcmVhdGlvbk1ldGhvZFJlZmVyZW5jZQorCQkJ
dmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDMpOworCQkJdmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQlzdXBlck1l
dGhvZFJlZmVyZW5jZSA9IChTdXBlck1ldGhvZFJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlv
bkZyYWdtZW50LmdldEluaXRpYWxpemVyKCk7CisJCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0
ZXJpemVkVHlwZSA9IGFzdC5uZXdQYXJhbWV0ZXJpemVkVHlwZShhc3QubmV3U2ltcGxlVHlwZShh
c3QubmV3U2ltcGxlTmFtZSgiVyIpKSk7CisJCQlwYXJhbWV0ZXJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCkuYWRkKGFzdC5uZXdTaW1wbGVUeXBlKGFzdC5uZXdTaW1wbGVOYW1lKCJJbnRlZ2VyIikp
KTsKKwkJCWNyZWF0aW9uUmVmZXJlbmNlID0gYXN0Lm5ld0NyZWF0aW9uUmVmZXJlbmNlKCk7CisJ
CQljcmVhdGlvblJlZmVyZW5jZS5zZXRUeXBlKHBhcmFtZXRlcml6ZWRUeXBlKTsKKwkJCWNyZWF0
aW9uUmVmZXJlbmNlLnR5cGVBcmd1bWVudHMoKS5hZGQoYXN0Lm5ld1NpbXBsZVR5cGUoYXN0Lm5l
d1NpbXBsZU5hbWUoIlN0cmluZyIpKSk7CisJCQlyZXdyaXRlLnJlcGxhY2Uoc3VwZXJNZXRob2RS
ZWZlcmVuY2UsIGNyZWF0aW9uUmVmZXJlbmNlLCBudWxsKTsJCQkKKwkJCQorCQkJLy8gY2FzZSA1
OiBTdXBlck1ldGhvZFJlZmVyZW5jZSB0byBFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlCisJCQl2
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1l
bnQpIG1ldGhvZERlY2wuZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoNCk7CisJCQl2YXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSB2YXJp
YWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmZyYWdtZW50cygpLmdldCgwKTsKKwkJCXN1cGVyTWV0
aG9kUmVmZXJlbmNlID0gKFN1cGVyTWV0aG9kUmVmZXJlbmNlKSB2YXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJCUV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2Ug
ZXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSA9IGFzdC5uZXdFeHByZXNzaW9uTWV0aG9kUmVmZXJl
bmNlKCk7CisJCQlleHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlLnNldEV4cHJlc3Npb24oYXN0Lm5l
d1F1YWxpZmllZE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlkiKSwgYXN0Lm5ld1NpbXBsZU5hbWUo
IloiKSkpOworCQkJZXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5zZXROYW1lKGFzdC5uZXdTaW1w
bGVOYW1lKCJmb28iKSk7CisJCQlyZXdyaXRlLnJlcGxhY2Uoc3VwZXJNZXRob2RSZWZlcmVuY2Us
IGV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UsIG51bGwpOwkJCQorCQkJCisJCX0KKwkJCisJCVN0
cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCQljb250ZW50cyA9
ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0
aW9uLio7XG4iICsKKwkJCQkiaW50ZXJmYWNlIEoge1xuIiArCisJCQkJIgl2b2lkIGZvbyhpbnQg
eCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIFkge1xuIiArCisJCQkJIglzdGF0aWMg
Y2xhc3MgWiB7XG4iICsKKwkJCQkiCQlwdWJsaWMgWihpbnQgeCkge31cbiIgKworCQkJCSIJCXB1
YmxpYyBzdGF0aWMgdm9pZCBmb28oaW50IHgpIHt9XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9
XG4iICsKKwkJCQkiY2xhc3MgVzxUPiB7XG4iICsKKwkJCQkiCXB1YmxpYyBXKGludCB4KSB7fVxu
IiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1c
biIgKworCQkJCSJcbiIgKworCQkJCSJjbGFzcyBYWCB7XG4iICsKKwkJCQkiCXB1YmxpYyB2b2lk
IGZvbyhpbnQgeCkge31cbiIgKworCQkJCSIJcHVibGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiAr
CisJCQkJIn1cbiIgKworCQkJCSJcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBleHRlbmRzIFhY
IHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7
fVxuIiArCisJCQkJIglAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglw
dWJsaWMgdm9pZCBiYXIgKCkge1xuIiArCisJCQkJIgkJSiBqMSA9IFkuQE1hcmtlciBaOjpmb287
XG4iICsKKwkJCQkiCQlKIGoyID0gc3VwZXI6OmZvbztcbiIgKworCQkJCSIJCUogajMgPSBYLnN1
cGVyOjpiYXI7XG4iICsKKwkJCQkiCQlKIGp4ID0gVzxJbnRlZ2VyPjo6PFN0cmluZz4gbmV3O1xu
IiArCisJCQkJIgkJSiBqeiA9IFkuWjo6Zm9vO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxu
IiArCisJCQkJIkBUYXJnZXQgKEVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRl
cmZhY2UgTWFya2VyIHt9XG4iICsKKwkJCQkifVxuIjsKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVy
KGNvbnRlbnRzKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkp
OworCX0JCit9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0
ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3QuamF2YQppbmRleCA0ZGE0ODk2Li5lMzcxYjRk
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2Vj
bGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3Qu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3QuamF2
YQpAQCAtMTE1LDYgKzExNSw3IEBACiAJCXN1aXRlLmFkZFRlc3QoQVNUUmV3cml0ZVByb3BlcnR5
VGVzdC5zdWl0ZSgpKTsKIAkJc3VpdGUuYWRkVGVzdChBU1RSZXdyaXRpbmdQYWNrYWdlRGVjbFRl
c3Quc3VpdGUoKSk7CiAJCXN1aXRlLmFkZFRlc3QoQVNUUmV3cml0aW5nTGFtYmRhRXhwcmVzc2lv
blRlc3Quc3VpdGUoKSk7CQkKKwkJc3VpdGUuYWRkVGVzdChBU1RSZXdyaXRpbmdSZWZlcmVuY2VF
eHByZXNzaW9uVGVzdC5zdWl0ZSgpKTsJCQogCQlzdWl0ZS5hZGRUZXN0KFNvdXJjZU1vZGlmaWVy
VGVzdC5zdWl0ZSgpKTsKIAkJc3VpdGUuYWRkVGVzdChJbXBvcnRSZXdyaXRlVGVzdC5zdWl0ZSgp
KTsKIAkJcmV0dXJuIHN1aXRlOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3BhcnNlci9QYXJzZXIuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9wYXJzZXIvUGFyc2VyLmphdmEKaW5kZXggMGZkODkyYy4uODJiYTZmYSAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL3BhcnNlci9QYXJzZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcGFyc2VyL1Bh
cnNlci5qYXZhCkBAIC03OTkxLDcgKzc5OTEsNyBAQAogCS8vIElkZW50aWZpZXJPck5ldyA6Oj0g
J25ldycKIAlpZiAobmV3Rm9ybSkgewogCQlpbnQgbmV3U3RhcnQgPSB0aGlzLmludFN0YWNrW3Ro
aXMuaW50UHRyLS1dOwotCQlwdXNoSWRlbnRpZmllcihDb25zdGFudFBvb2wuSW5pdCwgKCgobG9u
ZykgbmV3U3RhcnQgPDwgMzIpKSArIChuZXdTdGFydCArIDMpKTsKKwkJcHVzaElkZW50aWZpZXIo
Q29uc3RhbnRQb29sLkluaXQsICgoKGxvbmcpIG5ld1N0YXJ0IDw8IDMyKSkgKyAobmV3U3RhcnQg
KyAyKSk7CiAJfQogfQogcHJvdGVjdGVkIHZvaWQgY29uc3VtZUVtcHR5VHlwZUFyZ3VtZW50cygp
IHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3
cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YQppbmRleCBmZDNiMWIzLi42Y2Y0NGE5IDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRl
L0FTVFJld3JpdGVBbmFseXplci5qYXZhCkBAIC0yNDI4LDYgKzI0MjgsMjkgQEAKIAkJcmV0dXJu
IGZhbHNlOwogCX0KIAorCXByaXZhdGUgdm9pZCB2aXNpdFJlZmVyZW5jZVR5cGVBcmd1bWVudHMo
QVNUTm9kZSBub2RlLCBTdHJ1Y3R1cmFsUHJvcGVydHlEZXNjcmlwdG9yIGNoaWxkUHJvcGVydHks
IGludCBwb3MpIHsKKwkJaWYgKGlzQ2hhbmdlZChub2RlLCBjaGlsZFByb3BlcnR5KSkgeworCQkJ
dHJ5IHsKKwkJCQlwb3MgPSBnZXRTY2FubmVyKCkuZ2V0VG9rZW5FbmRPZmZzZXQoVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lQ09MT05fQ09MT04sIHBvcyk7CisJCQkJcmV3cml0ZU9wdGlvbmFsVHlw
ZVBhcmFtZXRlcnMobm9kZSwgY2hpbGRQcm9wZXJ0eSwgcG9zLCBVdGlsLkVNUFRZX1NUUklORywg
ZmFsc2UsIGZhbHNlKTsKKwkJCX0gY2F0Y2ggKENvcmVFeGNlcHRpb24gZSkgeworCQkJCWhhbmRs
ZUV4Y2VwdGlvbihlKTsKKwkJCX0KKwkJfQorCX0KKworCS8qIChub24tSmF2YWRvYykKKwkgKiBA
c2VlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5BU1RWaXNpdG9yI3Zpc2l0KENyZWF0aW9uUmVm
ZXJlbmNlKQorCSAqLworCXB1YmxpYyBib29sZWFuIHZpc2l0KENyZWF0aW9uUmVmZXJlbmNlIG5v
ZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJlbkNoYW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zp
c2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7CisJCX0KKwkJaW50IHBvcz0gcmV3cml0ZVJlcXVp
cmVkTm9kZShub2RlLCBDcmVhdGlvblJlZmVyZW5jZS5UWVBFX1BST1BFUlRZKTsKKwkJdmlzaXRS
ZWZlcmVuY2VUeXBlQXJndW1lbnRzKG5vZGUsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1F
TlRTX1BST1BFUlRZLCBwb3MpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCiAJLyogKG5vbi1KYXZh
ZG9jKQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQo
RG9TdGF0ZW1lbnQpCiAJICovCkBAIC0zODk1LDYgKzM5MTgsMjAgQEAKIAkJcmV3cml0ZVBhcmFn
cmFwaExpc3Qobm9kZSwgRW51bURlY2xhcmF0aW9uLkJPRFlfREVDTEFSQVRJT05TX1BST1BFUlRZ
LCBwb3MsIGluZGVudCwgLTEsIDIpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQorCisJLyogKG5vbi1K
YXZhZG9jKQorCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3Ijdmlz
aXQoRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlwdWJsaWMgYm9vbGVhbiB2aXNp
dChFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJlbkNo
YW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7
CisJCX0KKwkJaW50IHBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBFeHByZXNzaW9uTWV0
aG9kUmVmZXJlbmNlLkVYUFJFU1NJT05fUFJPUEVSVFkpOworCQl2aXNpdFJlZmVyZW5jZVR5cGVB
cmd1bWVudHMobm9kZSwgRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19Q
Uk9QRVJUWSwgcG9zKTsKKwkJcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBFeHByZXNzaW9uTWV0
aG9kUmVmZXJlbmNlLk5BTUVfUFJPUEVSVFkpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCiAJLyog
KG5vbi1KYXZhZG9jKQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0
b3IjdmlzaXQob3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLk1hcmtlckFubm90YXRpb24pCiAJICov
CkBAIC00MDE4LDYgKzQwNTUsMzMgQEAKIAkJcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBTaW5n
bGVNZW1iZXJBbm5vdGF0aW9uLlZBTFVFX1BST1BFUlRZKTsKIAkJcmV0dXJuIGZhbHNlOwogCX0K
KworCS8qIChub24tSmF2YWRvYykKKwkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5B
U1RWaXNpdG9yI3Zpc2l0KFN1cGVyTWV0aG9kUmVmZXJlbmNlKQorCSAqLworCXB1YmxpYyBib29s
ZWFuIHZpc2l0KFN1cGVyTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJl
bkNoYW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9k
ZSk7CisJCX0KKwkJaW50IHBvcyA9IHJld3JpdGVPcHRpb25hbFF1YWxpZmllcihub2RlLCBTdXBl
ck1ldGhvZFJlZmVyZW5jZS5RVUFMSUZJRVJfUFJPUEVSVFksIG5vZGUuZ2V0U3RhcnRQb3NpdGlv
bigpKTsKKwkJdmlzaXRSZWZlcmVuY2VUeXBlQXJndW1lbnRzKG5vZGUsIFN1cGVyTWV0aG9kUmVm
ZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZLCBwb3MpOworCQlyZXdyaXRlUmVxdWlyZWRO
b2RlKG5vZGUsIFN1cGVyTWV0aG9kUmVmZXJlbmNlLk5BTUVfUFJPUEVSVFkpOworCQlyZXR1cm4g
ZmFsc2U7CisJfQorCisJLyogKG5vbi1KYXZhZG9jKQorCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0
LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQoVHlwZU1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlw
dWJsaWMgYm9vbGVhbiB2aXNpdChUeXBlTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJaWYgKCFo
YXNDaGlsZHJlbkNoYW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hp
bGRyZW4obm9kZSk7CisJCX0KKwkJaW50IHBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBU
eXBlTWV0aG9kUmVmZXJlbmNlLlRZUEVfUFJPUEVSVFkpOworCQl2aXNpdFJlZmVyZW5jZVR5cGVB
cmd1bWVudHMobm9kZSwgVHlwZU1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJU
WSwgcG9zKTsKKwkJcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBUeXBlTWV0aG9kUmVmZXJlbmNl
Lk5BTUVfUFJPUEVSVFkpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCiAJLyogKG5vbi1KYXZhZG9j
KQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQob3Jn
LmVjbGlwc2UuamR0LmNvcmUuZG9tLlR5cGVQYXJhbWV0ZXIpCiAJICovCmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9t
L3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUv
ZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVG
bGF0dGVuZXIuamF2YQppbmRleCAyOWU4ODEzLi5iMDI4ZTYzIDEwMDY0NAotLS0gYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3Jp
dGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxh
dHRlbmVyLmphdmEKQEAgLTIwNyw2ICsyMDcsMjEgQEAKIAkJfQogCX0KIAorCS8qKgorCSAqIHJl
ZmVyZW5jZSBub2RlIGhlbHBlciBmdW5jdGlvbiB0aGF0IGlzIGNvbW1vbiB0byBhbGwKKwkgKiB0
aGUgbWVtYmVycyBpbiB0aGUgZmFtaWx5IG9mIHJlZmVyZW5jZSBub2Rlcy4KKwkgKiAKKwkgKiBA
cGFyYW0gbm9kZSBub2RlIGZyb20gdGhlIGZhbWlseSBvZiBSZWZlcmVuY2VFeHByZXNzaW9uCisJ
ICogQHBhcmFtIGNoaWxkUHJvcGVydHkgVFlQRV9BUkdVTUVOVFNfUFJPUEVSVFkgCisJICovCisJ
cHJpdmF0ZSB2b2lkIHZpc2l0UmVmZXJlbmNlVHlwZUFyZ3VtZW50cyhBU1ROb2RlIG5vZGUsIFN0
cnVjdHVyYWxQcm9wZXJ0eURlc2NyaXB0b3IgY2hpbGRQcm9wZXJ0eSkgeworCQlpZiAoZ2V0Q2hp
bGRMaXN0KG5vZGUsIGNoaWxkUHJvcGVydHkpLnNpemUoKSA+IDApIHsKKwkJCXRoaXMucmVzdWx0
LmFwcGVuZCgnPCcpOworCQkJdmlzaXRMaXN0KG5vZGUsIGNoaWxkUHJvcGVydHksICIsIik7IC8v
JE5PTi1OTFMtMSQKKwkJCXRoaXMucmVzdWx0LmFwcGVuZCgnPicpOworCQl9CisJfQorCiAJLyoK
IAkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoQW5vbnltb3VzQ2xhc3NEZWNsYXJhdGlvbikKIAkg
Ki8KQEAgLTQ2Nyw2ICs0ODIsMTcgQEAKIAkJCWxhYmVsLmFjY2VwdCh0aGlzKTsKIAkJfQogCQl0
aGlzLnJlc3VsdC5hcHBlbmQoJzsnKTsKKwkJcmV0dXJuIGZhbHNlOworCX0KKworCS8qCisJICog
QHNlZSBBU1RWaXNpdG9yI3Zpc2l0KENyZWF0aW9uUmVmZXJlbmNlKQorCSAqLworCXB1YmxpYyBi
b29sZWFuIHZpc2l0KENyZWF0aW9uUmVmZXJlbmNlIG5vZGUpIHsKKwkJZ2V0Q2hpbGROb2RlKG5v
ZGUsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsKKwkJdGhp
cy5yZXN1bHQuYXBwZW5kKCI6OiIpOyAvLyROT04tTkxTLTEkCisJCXZpc2l0UmVmZXJlbmNlVHlw
ZUFyZ3VtZW50cyhub2RlLCBDcmVhdGlvblJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJU
WSk7CisJCXRoaXMucmVzdWx0LmFwcGVuZCgibmV3Iik7IC8vJE5PTi1OTFMtMSQKIAkJcmV0dXJu
IGZhbHNlOwogCX0KIApAQCAtMTM2NSw2ICsxMzkxLDE4IEBACiAJCXRoaXMucmVzdWx0LmFwcGVu
ZCgnfScpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQorCisJLyoKKwkgKiBAc2VlIEFTVFZpc2l0b3Ij
dmlzaXQoRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlwdWJsaWMgYm9vbGVhbiB2
aXNpdChFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJZ2V0Q2hpbGROb2RlKG5v
ZGUsIEV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UuRVhQUkVTU0lPTl9QUk9QRVJUWSkuYWNjZXB0
KHRoaXMpOworCQl0aGlzLnJlc3VsdC5hcHBlbmQoIjo6Iik7IC8vJE5PTi1OTFMtMSQKKwkJdmlz
aXRSZWZlcmVuY2VUeXBlQXJndW1lbnRzKG5vZGUsIEV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2Uu
VFlQRV9BUkdVTUVOVFNfUFJPUEVSVFkpOworCQlub2RlLmdldE5hbWUoKS5hY2NlcHQodGhpcyk7
CisJCXJldHVybiBmYWxzZTsKKwl9CisKIAkvKgogCSAqIEBzZWUgQVNUVmlzaXRvciN2aXNpdChN
YXJrZXJBbm5vdGF0aW9uKQogCSAqIEBzaW5jZSAzLjAKQEAgLTE0NTksNiArMTQ5NywzMiBAQAog
CQlyZXR1cm4gZmFsc2U7CiAJfQogCisJLyoKKwkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoU3Vw
ZXJNZXRob2RSZWZlcmVuY2UpCisJICovCisJcHVibGljIGJvb2xlYW4gdmlzaXQoU3VwZXJNZXRo
b2RSZWZlcmVuY2Ugbm9kZSkgeworCQlBU1ROb2RlIHF1YWxpZmllciA9IGdldENoaWxkTm9kZShu
b2RlLCBTdXBlck1ldGhvZFJlZmVyZW5jZS5RVUFMSUZJRVJfUFJPUEVSVFkpOworCQlpZiAocXVh
bGlmaWVyICE9IG51bGwpIHsKKwkJCXF1YWxpZmllci5hY2NlcHQodGhpcyk7CisJCQl0aGlzLnJl
c3VsdC5hcHBlbmQoJy4nKTsKKwkJfQorCQl0aGlzLnJlc3VsdC5hcHBlbmQoInN1cGVyIDo6Iik7
IC8vJE5PTi1OTFMtMSQKKwkJdmlzaXRSZWZlcmVuY2VUeXBlQXJndW1lbnRzKG5vZGUsIFN1cGVy
TWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZKTsKKwkJbm9kZS5nZXROYW1l
KCkuYWNjZXB0KHRoaXMpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCisJLyoKKwkgKiBAc2VlIEFT
VFZpc2l0b3IjdmlzaXQoVHlwZU1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlwdWJsaWMgYm9vbGVh
biB2aXNpdChUeXBlTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJZ2V0Q2hpbGROb2RlKG5vZGUs
IFR5cGVNZXRob2RSZWZlcmVuY2UuVFlQRV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOworCQl0aGlz
LnJlc3VsdC5hcHBlbmQoIjo6Iik7IC8vJE5PTi1OTFMtMSQKKwkJdmlzaXRSZWZlcmVuY2VUeXBl
QXJndW1lbnRzKG5vZGUsIFR5cGVNZXRob2RSZWZlcmVuY2UuVFlQRV9BUkdVTUVOVFNfUFJPUEVS
VFkpOworCQlub2RlLmdldE5hbWUoKS5hY2NlcHQodGhpcyk7CisJCXJldHVybiBmYWxzZTsKKwl9
CisKIAkvKiAobm9uLUphdmFkb2MpCiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20u
QVNUVmlzaXRvciN2aXNpdChvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uVHlwZVBhcmFtZXRlcikK
IAkgKi8=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>233013</attachid>
            <date>2013-07-03 02:52:00 -0400</date>
            <delta_ts>2013-07-03 02:52:26 -0400</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-407131-18dom-astASTRewrite-support-for-R.patch</filename>
            <type>text/plain</type>
            <size>45440</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9wYXJzZXIvQ29tcGxpYW5jZURpYWdub3Nl
VGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3BhcnNlci9Db21wbGlhbmNlRGlhZ25vc2VU
ZXN0LmphdmEKaW5kZXggOWE4MzI5NS4uZmQwOTZkMyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Nv
bXBpbGVyL3BhcnNlci9Db21wbGlhbmNlRGlhZ25vc2VUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3BhcnNlci9Db21wbGlhbmNlRGlhZ25vc2VUZXN0LmphdmEKQEAgLTI4MjMsNyAr
MjgyMyw3IEBACiAJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJIjEuIEVSUk9SIGluIFguamF2YSAo
YXQgbGluZSAxMSlcbiIgKyAKIAkJCSIJSSBpID0gWTo6bmV3O1xuIiArIAotCQkJIgkgICAgICBe
Xl5eXl5eXG4iICsgCisJCQkiCSAgICAgIF5eXl5eXlxuIiArIAogCQkJIkNvbnN0cnVjdG9yIHJl
ZmVyZW5jZXMgYXJlIGFsbG93ZWQgb25seSBhdCBzb3VyY2UgbGV2ZWwgMS44IG9yIGFib3ZlXG4i
ICsgCiAJCQkiLS0tLS0tLS0tLVxuIjsKIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVy
L3JlZ3Jlc3Npb24vR3JhbW1hckNvdmVyYWdlVGVzdHMzMDguamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21w
aWxlci9yZWdyZXNzaW9uL0dyYW1tYXJDb3ZlcmFnZVRlc3RzMzA4LmphdmEKaW5kZXggNTU2ZmNh
Mi4uZTIzNjljOCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR3Jh
bW1hckNvdmVyYWdlVGVzdHMzMDguamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVz
c2lvbi9HcmFtbWFyQ292ZXJhZ2VUZXN0czMwOC5qYXZhCkBAIC0xNTAwLDcgKzE1MDAsNyBAQAog
CQkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAx
MilcbiIgKyAKIAkJCQkiCWkgPSBATWFya2VyIFc8QE1hcmtlciBJbnRlZ2VyPjo6PEBNYXJrZXIg
U3RyaW5nPiBuZXc7XG4iICsgCi0JCQkJIgkgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJCSIJICAgIF5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAogCQkJCSJUaGUgdGFyZ2V0IHR5
cGUgb2YgdGhpcyBleHByZXNzaW9uIG11c3QgYmUgYSBmdW5jdGlvbmFsIGludGVyZmFjZVxuIiAr
IAogCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGlu
ZSAxMilcbiIgKyAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBp
bGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05l
Z2F0aXZlTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVn
cmVzc2lvbi9OZWdhdGl2ZUxhbWJkYUV4cHJlc3Npb25zVGVzdC5qYXZhCmluZGV4IDBiMDBmNjIu
LmQ1MDdmZDcgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVy
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0
aXZlTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3Jl
Z3Jlc3Npb24vTmVnYXRpdmVMYW1iZGFFeHByZXNzaW9uc1Rlc3QuamF2YQpAQCAtMTI0OSw3ICsx
MjQ5LDcgQEAKIAkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkiMy4gRVJST1IgaW4gWC5qYXZhIChh
dCBsaW5lIDgpXG4iICsgCiAJCQkiCVN5c3RlbS5vdXQucHJpbnRsbihcIkNvbnN0cnVjdG9yIFJl
ZmVyZW5jZSBpbiBpbGxlZ2FsIGNvbnRleHQ6IFwiICsgU3RyaW5nOjpuZXcpO1xuIiArIAotCQkJ
IgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBeXl5eXl5eXl5eXl5cbiIgKyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5c
biIgKyAKIAkJCSJUaGUgdGFyZ2V0IHR5cGUgb2YgdGhpcyBleHByZXNzaW9uIG11c3QgYmUgYSBm
dW5jdGlvbmFsIGludGVyZmFjZVxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCSI0LiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMTApXG4iICsgCkBAIC00MjYxLDcgKzQyNjEsNyBAQAog
CQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5l
IDEyKVxuIiArIAogCQkJCQkiCUkgaTMgPSBBcnJheUxpc3Q8SW50ZWdlcj46Om5ldztcbiIgKyAK
LQkJCQkJIgkgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJICAg
ICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkJCSJUaGUgY29uc3RydWN0ZWQg
b2JqZWN0IG9mIHR5cGUgQXJyYXlMaXN0PEludGVnZXI+IGlzIGluY29tcGF0aWJsZSB3aXRoIHRo
ZSBkZXNjcmlwdG9yXCdzIHJldHVybiB0eXBlOiBMaXN0PFN0cmluZz5cbiIgKyAKIAkJCQkJIi0t
LS0tLS0tLS1cbiIgKyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxMylcbiIg
KyAKQEAgLTQzMDQsMTIgKzQzMDQsMTIgQEAKIAkJCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJ
IjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA3KVxuIiArIAogCQkJCQkiCUkgaTEgPSBBcnJh
eUxpc3Q8U3RyaW5nPltdOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgIF5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XG4iICsgCiAJCQkJCSJDYW5ub3QgY3JlYXRlIGEgZ2VuZXJpYyBhcnJheSBvZiBBcnJheUxpc3Q8
U3RyaW5nPlxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMi4gRVJST1IgaW4g
WC5qYXZhIChhdCBsaW5lIDgpXG4iICsgCiAJCQkJCSIJSSBpMiA9IExpc3Q8U3RyaW5nPltdOjpu
ZXc7XG4iICsgCi0JCQkJCSIJICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJ
CSIJICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCQkJIkNhbm5vdCBjcmVhdGUg
YSBnZW5lcmljIGFycmF5IG9mIExpc3Q8U3RyaW5nPlxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxu
Iik7CiB9CkBAIC00MzY2LDI3ICs0MzY2LDI3IEBACiAJCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJ
CQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMzQpXG4iICsgCiAJCQkJCSIJSSBpID0g
TGlzdFtdOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJ
CSIJICAgICAgXl5eXl5eXl5eXl5cbiIgKyAKIAkJCQkJIkluY29tcGF0aWJsZSBwYXJhbWV0ZXIg
bGlzdCBmb3IgYXJyYXkgY29uc3RydWN0b3IuIEV4cGVjdGVkIChpbnQpLCBidXQgZm91bmQgKClc
biIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAo
YXQgbGluZSAzNSlcbiIgKyAKIAkJCQkJIglKIGogPSBBcnJheUxpc3RbXTo6bmV3O1xuIiArIAot
CQkJCQkiCSAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJICAgICAgXl5eXl5e
Xl5eXl5eXl5eXlxuIiArIAogCQkJCQkiSW5jb21wYXRpYmxlIHBhcmFtZXRlciBsaXN0IGZvciBh
cnJheSBjb25zdHJ1Y3Rvci4gRXhwZWN0ZWQgKGludCksIGJ1dCBmb3VuZCAobG9uZylcbiIgKyAK
IAkJCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGlu
ZSAzNilcbiIgKyAKIAkJCQkJIglLIGsgPSBBcnJheUxpc3RbXTo6bmV3O1xuIiArIAotCQkJCQki
CSAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJICAgICAgXl5eXl5eXl5eXl5e
Xl5eXlxuIiArIAogCQkJCQkiSW5jb21wYXRpYmxlIHBhcmFtZXRlciBsaXN0IGZvciBhcnJheSBj
b25zdHJ1Y3Rvci4gRXhwZWN0ZWQgKGludCksIGJ1dCBmb3VuZCAoU3RyaW5nLCBsb25nKVxuIiAr
IAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiNC4gRVJST1IgaW4gWC5qYXZhIChhdCBs
aW5lIDQyKVxuIiArIAogCQkJCQkiCVEgcSA9IEFycmF5TGlzdFtdOjpuZXc7XG4iICsgCi0JCQkJ
CSIJICAgICAgXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXG4iICsgCiAJCQkJCSJJbmNvbXBhdGlibGUgcGFyYW1ldGVyIGxpc3QgZm9yIGFycmF5
IGNvbnN0cnVjdG9yLiBFeHBlY3RlZCAoaW50KSwgYnV0IGZvdW5kIChGbG9hdClcbiIgKyAKIAkJ
CQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCQkJIjUuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA0
MylcbiIgKyAKIAkJCQkJIglSIHIgPSBBcnJheUxpc3RbXVtdW106Om5ldztcbiIgKyAKLQkJCQkJ
IgkgICAgICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICBeXl5eXl5e
Xl5eXl5eXl5eXl5eXlxuIiArIAogCQkJCQkiQ29uc3RydWN0ZWQgYXJyYXkgQXJyYXlMaXN0W11b
XVtdIGNhbm5vdCBiZSBhc3NpZ25lZCB0byBMaXN0PFN0cmluZz5bXSBhcyByZXF1aXJlZCBpbiB0
aGUgaW50ZXJmYWNlIGRlc2NyaXB0b3IgIFxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIik7CiB9
CkBAIC00NjMwLDE3ICs0NjMwLDE3IEBACiAJCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkJCSIx
LiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMjMpXG4iICsgCiAJCQkJCSIJSiBqID0gWDxJbnRl
Z2VyPjo6bmV3O1xuIiArIAotCQkJCQkiCSAgICAgIF5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJ
CQkJIgkgICAgICBeXl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCQkJIlRoZSBjb25zdHJ1Y3RlZCBv
YmplY3Qgb2YgdHlwZSBYPEludGVnZXI+IGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBkZXNjcmlw
dG9yXCdzIHJldHVybiB0eXBlOiBYPFN0cmluZz5cbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIg
KyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAyNClcbiIgKyAKIAkJCQkJIglL
IGsgPSBYOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgXl5eXl5eXlxuIiArIAorCQkJCQkiCSAg
ICAgIF5eXl5eXlxuIiArIAogCQkJCQkiVGhlIHRhcmdldCB0eXBlIG9mIHRoaXMgZXhwcmVzc2lv
biBtdXN0IGJlIGEgZnVuY3Rpb25hbCBpbnRlcmZhY2VcbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1c
biIgKyAKIAkJCQkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAyNilcbiIgKyAKIAkJCQkJ
IglNIG0gPSBYPFN0cmluZz46Om5ldztcbiIgKyAKLQkJCQkJIgkgICAgICBeXl5eXl5eXl5eXl5e
Xl5cbiIgKyAKKwkJCQkJIgkgICAgICBeXl5eXl5eXl5eXl5eXlxuIiArIAogCQkJCQkiVGhlIHR5
cGUgWDxTdHJpbmc+IGRvZXMgbm90IGRlZmluZSBYKFN0cmluZykgdGhhdCBpcyBhcHBsaWNhYmxl
IGhlcmVcbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIpOwogfQpAQCAtNDY3NywyMiArNDY3Nywy
MiBAQAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMS4gRVJST1IgaW4gWC5qYXZhIChh
dCBsaW5lIDE5KVxuIiArIAogCQkJCQkiCUkgaSA9IFg6Om5ldztcbiIgKyAKLQkJCQkJIgkgICAg
ICBeXl5eXl5eXG4iICsgCisJCQkJCSIJICAgICAgXl5eXl5eXG4iICsgCiAJCQkJCSJVbmhhbmRs
ZWQgZXhjZXB0aW9uIHR5cGUgSU9FeGNlcHRpb25cbiIgKyAKIAkJCQkJIi0tLS0tLS0tLS1cbiIg
KyAKIAkJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxOSlcbiIgKyAKIAkJCQkJIglJ
IGkgPSBYOjpuZXc7XG4iICsgCi0JCQkJCSIJICAgICAgXl5eXl5eXlxuIiArIAorCQkJCQkiCSAg
ICAgIF5eXl5eXlxuIiArIAogCQkJCQkiVW5oYW5kbGVkIGV4Y2VwdGlvbiB0eXBlIEZpbGVOb3RG
b3VuZEV4Y2VwdGlvblxuIiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIiArIAogCQkJCQkiMy4gRVJS
T1IgaW4gWC5qYXZhIChhdCBsaW5lIDIwKVxuIiArIAogCQkJCQkiCUogaiA9IFg8SW50ZWdlcj46
Om5ldztcbiIgKyAKLQkJCQkJIgkgICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkJCSIJ
ICAgICAgXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkJCSJUaGUgY29uc3RydWN0ZWQgb2JqZWN0
IG9mIHR5cGUgWDxJbnRlZ2VyPiBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgZGVzY3JpcHRvclwn
cyByZXR1cm4gdHlwZTogWDxTdHJpbmc+XG4iICsgCiAJCQkJCSItLS0tLS0tLS0tXG4iICsgCiAJ
CQkJCSI0LiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMjEpXG4iICsgCiAJCQkJCSIJSyBrID0g
WDo6bmV3O1xuIiArIAotCQkJCQkiCSAgICAgIF5eXl5eXl5cbiIgKyAKKwkJCQkJIgkgICAgICBe
Xl5eXl5cbiIgKyAKIAkJCQkJIlVuaGFuZGxlZCBleGNlcHRpb24gdHlwZSBJT0V4Y2VwdGlvblxu
IiArIAogCQkJCQkiLS0tLS0tLS0tLVxuIik7CiB9CkBAIC02NDA4LDcgKzY0MDgsNyBAQAogCQkJ
Ii0tLS0tLS0tLS1cbiIgKyAKIAkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMTApXG4i
ICsgCiAJCQkiCXRoaXMoWjo6bmV3KTtcbiIgKyAKLQkJCSIJICAgICBeXl5eXl5eXG4iICsgCisJ
CQkiCSAgICAgXl5eXl5eXG4iICsgCiAJCQkiTm8gZW5jbG9zaW5nIGluc3RhbmNlIG9mIHRoZSB0
eXBlIFguWSBpcyBhY2Nlc3NpYmxlIGluIHNjb3BlXG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7
CiB9CkBAIC02NDMxLDcgKzY0MzEsNyBAQAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKIAkJCSIxLiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKIAkJCSIJSSBpID0gWTo6bmV3O1xuIiAr
IAotCQkJIgkgICAgICBeXl5eXl5eXG4iICsgCisJCQkiCSAgICAgIF5eXl5eXlxuIiArIAogCQkJ
Ik5vIGVuY2xvc2luZyBpbnN0YW5jZSBvZiB0aGUgdHlwZSBYIGlzIGFjY2Vzc2libGUgaW4gc2Nv
cGVcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iKTsKIH0KQEAgLTY1MjEsMTIgKzY1MjEsMTIgQEAK
IAkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUg
MTApXG4iICsgCiAJCQkiCUkgaSA9IFg6Om5ldztcbiIgKyAKLQkJCSIJICAgICAgXl5eXl5eXlxu
IiArIAorCQkJIgkgICAgICBeXl5eXl5cbiIgKyAKIAkJCSJBY2Nlc3MgdG8gZW5jbG9zaW5nIGNv
bnN0cnVjdG9yIFgoaW50KSBpcyBlbXVsYXRlZCBieSBhIHN5bnRoZXRpYyBhY2Nlc3NvciBtZXRo
b2RcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCiAJCQkiMy4gRVJST1IgaW4gWC5qYXZhIChh
dCBsaW5lIDEyKVxuIiArIAogCQkJIglpID0gWTo6bmV3O1xuIiArIAotCQkJIgkgICAgXl5eXl5e
XlxuIiArIAorCQkJIgkgICAgXl5eXl5eXG4iICsgCiAJCQkiTm8gZW5jbG9zaW5nIGluc3RhbmNl
IG9mIHRoZSB0eXBlIFggaXMgYWNjZXNzaWJsZSBpbiBzY29wZVxuIiArIAogCQkJIi0tLS0tLS0t
LS1cbiIsCiAJCQludWxsIC8qIG5vIGV4dHJhIGNsYXNzIGxpYnJhcmllcyAqLywKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZG9tL0FTVENv
bnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGM5OWY1NjYuLjI5NmUxNDYgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9BU1RDb252
ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTgwMSw3ICsxODAxLDcgQEAKIAkJZXhwcmVzc2lvbiA9IGZy
YWdtZW50LmdldEluaXRpYWxpemVyKCk7CiAJCWFzc2VydFRydWUoZXhwcmVzc2lvbiBpbnN0YW5j
ZW9mIENyZWF0aW9uUmVmZXJlbmNlKTsKIAkJQ3JlYXRpb25SZWZlcmVuY2UgY3JlYXRpb25SZWZl
cmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIGV4cHJlc3Npb247Ci0JCWNoZWNrU291cmNlUmFu
Z2UoY3JlYXRpb25SZWZlcmVuY2UsICJATWFya2VyIFc8QE1hcmtlciBJbnRlZ2VyPiA6OiA8U3Ry
aW5nPiBuZXcgIiwgY29udGVudHMpOworCQljaGVja1NvdXJjZVJhbmdlKGNyZWF0aW9uUmVmZXJl
bmNlLCAiQE1hcmtlciBXPEBNYXJrZXIgSW50ZWdlcj4gOjogPFN0cmluZz4gbmV3IiwgY29udGVu
dHMpOwogCQl0eXBlQmluZGluZyA9IGNyZWF0aW9uUmVmZXJlbmNlLnJlc29sdmVUeXBlQmluZGlu
ZygpOwogCQlhc3NlcnROb3ROdWxsKHR5cGVCaW5kaW5nKTsKIAkJbWV0aG9kQmluZGluZyA9IGNy
ZWF0aW9uUmVmZXJlbmNlLnJlc29sdmVNZXRob2RCaW5kaW5nKCk7CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1JlZmVyZW5jZUV4cHJlc3Npb25UZXN0
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1JlZmVyZW5jZUV4
cHJlc3Npb25UZXN0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNzVk
ZDYyYwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nUmVmZXJlbmNlRXhwcmVzc2lvblRlc3QuamF2YQpAQCAtMCwwICsxLDYyNCBAQAorLyoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioKKyAqIENvcHlyaWdodCAoYykgMjAxMyBJQk0gQ29ycG9yYXRp
b24gYW5kIG90aGVycy4KKyAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQg
dGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKKyAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAorICogd2hpY2ggYWNj
b21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKKyAqIGh0dHA6
Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCisgKgorICogVGhpcyBpcyBhbiBp
bXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1
bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZh
aWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUg
Y29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1Au
CisgKgorICogQ29udHJpYnV0b3JzOgorICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwg
QVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCitwYWNrYWdl
IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLnJld3JpdGUuZGVzY3JpYmluZzsKKworaW1wb3J0
IGphdmEudXRpbC5JdGVyYXRvcjsKKworaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OworCitp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuSUNvbXBpbGF0aW9uVW5pdDsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuY29yZS5JUGFja2FnZUZyYWdtZW50OworaW1wb3J0IG9yZy5lY2xpcHNlLmpk
dC5jb3JlLmRvbS4qOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5yZXdyaXRlLkFT
VFJld3JpdGU7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLnJld3JpdGUuTGlzdFJl
d3JpdGU7CisKK3B1YmxpYyBjbGFzcyBBU1RSZXdyaXRpbmdSZWZlcmVuY2VFeHByZXNzaW9uVGVz
dCBleHRlbmRzIEFTVFJld3JpdGluZ1Rlc3QgeworCisJcHVibGljIEFTVFJld3JpdGluZ1JlZmVy
ZW5jZUV4cHJlc3Npb25UZXN0KFN0cmluZyBuYW1lKSB7CisJCXN1cGVyKG5hbWUpOworCX0KKwor
CXB1YmxpYyBBU1RSZXdyaXRpbmdSZWZlcmVuY2VFeHByZXNzaW9uVGVzdChTdHJpbmcgbmFtZSwg
aW50IGFwaUxldmVsKSB7CisJCXN1cGVyKG5hbWUsIGFwaUxldmVsKTsKKwl9CisKKwlwdWJsaWMg
c3RhdGljIFRlc3Qgc3VpdGUoKSB7CisJCXJldHVybiBjcmVhdGVTdWl0ZShBU1RSZXdyaXRpbmdS
ZWZlcmVuY2VFeHByZXNzaW9uVGVzdC5jbGFzcyk7CisJfQorCisJLyoqCisJICogdGVzdHMgdmFy
aW91cyBhc3BlY3RzIG9mIENyZWF0aW9uUmVmZXJlbmNlIChDb25zdHJ1Y3RvciBNZXRob2QgUmVm
ZXJlbmNlKSB3aXRoIENsYXNzVHlwZSBhcyBsaHMKKwkgKiBAdGhyb3dzIEV4Y2VwdGlvbgorCSAq
LworCXB1YmxpYyB2b2lkIHRlc3RSZWZlcmVuY2VFeHByZXNzaW9uc190ZXN0MDAxX3NpbmNlXzgo
KSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3Vy
Y2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0NDA3MTMxIiwgZmFsc2UsIG51bGwp
OworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMxO1xuIiArCisJCQkJIlxu
IiArCisJCQkJImludGVyZmFjZSBKIHtcbiIgKworCQkJCSIJdm9pZCBmb28oaW50IHgpO1xuIiAr
CisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBZIHtcbiIgKworCQkJCSIJc3RhdGljIGNsYXNzIFog
e1xuIiArCisJCQkJIgkJcHVibGljIFooaW50IHgpIHtcbiIgKworCQkJCSIJCQlTeXN0ZW0ub3V0
LnByaW50KHgpO1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgkJcHVibGljIHZvaWQgZm9vKGlu
dCB4KSB7XG4iICsKKwkJCQkiCQkJU3lzdGVtLm91dC5wcmludCh4KTtcbiIgKworCQkJCSIJCX1c
biIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBXPFQ+IHtcbiIgKwor
CQkJCSIJcHVibGljIFcoaW50IHgpIHt9XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJ
CQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJCSIJQFN1cHByZXNzV2FybmluZ3MoXCJ1bnVz
ZWRcIilcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdz
KSB7XG4iICsKKwkJCQkiCQlKIGoxID0gVyA8SW50ZWdlcj4gOjogPFN0cmluZz4gbmV3O1xuIiAr
CisJCQkJIgkJSiBqMiA9IFcgPEludGVnZXI+IDo6IDxTdHJpbmc+IG5ldyA7XG4iICsKKwkJCQki
CQlKIGozID0gVyA8SW50ZWdlcj4gOjogPFN0cmluZywgSW50ZWdlcj4gbmV3IDtcbiIgKworCQkJ
CSIJCUogajQgPSBXIDxJbnRlZ2VyPiA6OiA8U3RyaW5nPiBuZXcgO1xuIiArCisJCQkJIgkJSiBq
NSA9IFcgPEludGVnZXI+IDo6IDxTdHJpbmc+IG5ldyA7XG4iICsKKwkJCQkiCQlKIGo2ID0gVyA8
SW50ZWdlcj4gOjogbmV3O1xuIiArCisJCQkJIgkJSiBqNyA9IFcgPEludGVnZXI+IDo6IG5ldztc
biIgKworCQkJCSIJCUogajggPSBXIDxJbnRlZ2VyPiA6OiBuZXc7XG4iICsKKwkJCQkiCX1cbiIg
KworCQkJCSJ9XG4iICsKKwkJCQkiXG4iIDsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmlu
Z0J1ZmZlcihjb250ZW50cyk7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNv
bXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJ
Q29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVFJld3JpdGUgcmV3
cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFz
dFJvb3QuZ2V0QVNUKCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbj0gZmlu
ZFR5cGVEZWNsYXJhdGlvbihhc3RSb290LCAiWCIpOworCisJCU1ldGhvZERlY2xhcmF0aW9uIG1l
dGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlZGVjbGFyYXRpb24sICJtYWluIik7
CisJCXsKKwkJCS8vIGNhc2UgMTogcmVwbGFjZSB0aGUgdHlwZSBhcmd1bWVudC4KKwkJCVZhcmlh
YmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChW
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1l
bnRzKCkuZ2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlhYmxl
RGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJQ3JlYXRpb25SZWZl
cmVuY2UgY3JlYXRpb25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlwZVBhcmFtZXRlciB0eXBl
UGFyYW1ldGVyPSBhc3QubmV3VHlwZVBhcmFtZXRlcigpOworCQkJdHlwZVBhcmFtZXRlci5zZXRO
YW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJJbnRlZ2VyIikpOwkJCQorCQkJTGlzdFJld3JpdGUgbGlz
dFJld3JpdGUgPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGNyZWF0aW9uUmVmZXJlbmNlLCBDcmVh
dGlvblJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5y
ZXBsYWNlKChBU1ROb2RlKShjcmVhdGlvblJlZmVyZW5jZS50eXBlQXJndW1lbnRzKCkuZ2V0KDAp
KSwgdHlwZVBhcmFtZXRlciwgbnVsbCk7CisJCQkKKwkJCS8vIGNhc2UgMjogYWRkIGEgdHlwZSBh
cmd1bWVudC4KKwkJCXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudCkgbWV0aG9kRGVjbC5nZXRCb2R5KCkuc3RhdGVtZW50cygpLmdldCgx
KTsKKwkJCXZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQpIHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDAp
OworCQkJY3JlYXRpb25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJdHlwZVBhcmFtZXRlcj0gYXN0
Lm5ld1R5cGVQYXJhbWV0ZXIoKTsKKwkJCXR5cGVQYXJhbWV0ZXIuc2V0TmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiSW50ZWdlciIpKTsJCQkKKwkJCWxpc3RSZXdyaXRlID0gcmV3cml0ZS5nZXRMaXN0
UmV3cml0ZShjcmVhdGlvblJlZmVyZW5jZSwgQ3JlYXRpb25SZWZlcmVuY2UuVFlQRV9BUkdVTUVO
VFNfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0TGFzdCh0eXBlUGFyYW1ldGVyLCBu
dWxsKTsKKwkJCQorCQkJLy8gY2FzZSAzOiBkZWxldGUgYSB0eXBlIGFyZ3VtZW50LgorCQkJdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50
KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDIpOworCQkJdmFyaWFibGVE
ZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFi
bGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQljcmVhdGlvblJl
ZmVyZW5jZSA9IChDcmVhdGlvblJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
LmdldEluaXRpYWxpemVyKCk7CisJCQlsaXN0UmV3cml0ZSA9IHJld3JpdGUuZ2V0TGlzdFJld3Jp
dGUoY3JlYXRpb25SZWZlcmVuY2UsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BS
T1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSkoY3JlYXRpb25SZWZlcmVu
Y2UudHlwZUFyZ3VtZW50cygpLmdldCgxKSksIG51bGwpOworCisJCQkvLyBjYXNlIDQ6IGRvIG5v
dCBjaGFuZ2UgZXhpc3RpbmcgdHlwZSBhcmcgLSBpbXBsaWNpdCB0ZXN0IGNhc2UuCisJCQkvLyBj
YXNlIDU6IGRlbGV0ZSB0aGUgb25seSB0eXBlIGFyZ3VtZW50LgorCQkJdmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNs
LmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDQpOworCQkJdmFyaWFibGVEZWNsYXJhdGlvbkZy
YWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNsYXJhdGlv
blN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQljcmVhdGlvblJlZmVyZW5jZSA9IChD
cmVhdGlvblJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LmdldEluaXRpYWxp
emVyKCk7CisJCQlsaXN0UmV3cml0ZSA9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoY3JlYXRpb25S
ZWZlcmVuY2UsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZKTsKKwkJ
CWZvciAoSXRlcmF0b3IgaXRlcj0gbGlzdFJld3JpdGUuZ2V0T3JpZ2luYWxMaXN0KCkuaXRlcmF0
b3IoKTsgaXRlci5oYXNOZXh0KCk7ICkgey8vbG9vcCBhZGRlZCBmb3IgZ2VuZXJhbCBjYXNlIC0g
aXRlcmF0ZXMgb25jZSBoZXJlLgorCQkJCUFTVE5vZGUgdHlwZUFyZ3VtZW50PSAoQVNUTm9kZSkg
aXRlci5uZXh0KCk7CisJCQkJbGlzdFJld3JpdGUucmVtb3ZlKHR5cGVBcmd1bWVudCwgbnVsbCk7
CisJCQl9CisKKwkJCS8vIGNhc2UgNjogZG8gbm90IGNoYW5nZSBhIENyZWF0aW9uUmVmZXJlbmNl
IG9yaWdpbmFsbHkgaGF2aW5nIG5vIHR5cGUgYXJndW1lbnRzIC0gaW1wbGljaXQgdGVzdCBjYXNl
LgorCQkJLy8gY2FzZSA3OiBJbnNlcnQgYSB0eXBlIGFyZ3VtZW50IGZvciBhIENyZWF0aW9uUmVm
ZXJlbmNlIG9yaWdpbmFsbHkgaGF2aW5nIG5vIHR5cGUgYXJndW1lbnRzLgorCQkJdmFyaWFibGVE
ZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRo
b2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDYpOworCQkJdmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQljcmVhdGlvblJlZmVyZW5j
ZSA9IChDcmVhdGlvblJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LmdldElu
aXRpYWxpemVyKCk7CisJCQlsaXN0UmV3cml0ZSA9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoY3Jl
YXRpb25SZWZlcmVuY2UsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZ
KTsKKwkJCXR5cGVQYXJhbWV0ZXI9IGFzdC5uZXdUeXBlUGFyYW1ldGVyKCk7CisJCQl0eXBlUGFy
YW1ldGVyLnNldE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlN0cmluZyIpKTsJCQkKKwkJCWxpc3RS
ZXdyaXRlLmluc2VydEZpcnN0KHR5cGVQYXJhbWV0ZXIsIG51bGwpOworCisJCQkvLyBjYXNlIDg6
IGNoYW5nZSBhIENyZWF0aW9uUmVmZXJlbmNlIHRvIGEgVHlwZU1ldGhvZFJlZmVyZW5jZS4KKwkJ
CXZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgbWV0aG9kRGVjbC5nZXRCb2R5KCkuc3RhdGVtZW50cygpLmdldCg3KTsKKwkJCXZhcmlh
YmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJY3JlYXRp
b25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFyYXRpb25GcmFn
bWVudC5nZXRJbml0aWFsaXplcigpOworCQkJU2ltcGxlVHlwZSBzaW1wbGVUeXBlID0gYXN0Lm5l
d1NpbXBsZVR5cGUoYXN0Lm5ld1F1YWxpZmllZE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlkiKSwg
YXN0Lm5ld1NpbXBsZU5hbWUoIloiKSkpOworCQkJcmV3cml0ZS5yZXBsYWNlKGNyZWF0aW9uUmVm
ZXJlbmNlLmdldFR5cGUoKSwgc2ltcGxlVHlwZSwgbnVsbCk7CisJCX0KKwkJCisJCVN0cmluZyBw
cmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCQljb250ZW50cyA9ICJwYWNr
YWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiaW50ZXJmYWNlIEoge1xuIiAr
CisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIFkg
e1xuIiArCisJCQkJIglzdGF0aWMgY2xhc3MgWiB7XG4iICsKKwkJCQkiCQlwdWJsaWMgWihpbnQg
eCkge1xuIiArCisJCQkJIgkJCVN5c3RlbS5vdXQucHJpbnQoeCk7XG4iICsKKwkJCQkiCQl9XG4i
ICsKKwkJCQkiCQlwdWJsaWMgdm9pZCBmb28oaW50IHgpIHtcbiIgKworCQkJCSIJCQlTeXN0ZW0u
b3V0LnByaW50KHgpO1xuIiArCisJCQkJIgkJfVxuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxu
IiArCisJCQkJImNsYXNzIFc8VD4ge1xuIiArCisJCQkJIglwdWJsaWMgVyhpbnQgeCkge31cbiIg
KworCQkJCSJ9XG4iICsKKwkJCQkiXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJ
CQkJIglAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHtcbiIgKworCQkJCSIJCUogajEgPSBXIDxJ
bnRlZ2VyPiA6OiA8SW50ZWdlcj4gbmV3O1xuIiArCisJCQkJIgkJSiBqMiA9IFcgPEludGVnZXI+
IDo6IDxTdHJpbmcsIEludGVnZXI+IG5ldyA7XG4iICsKKwkJCQkiCQlKIGozID0gVyA8SW50ZWdl
cj4gOjogPFN0cmluZz4gbmV3IDtcbiIgKworCQkJCSIJCUogajQgPSBXIDxJbnRlZ2VyPiA6OiA8
U3RyaW5nPiBuZXcgO1xuIiArCisJCQkJIgkJSiBqNSA9IFcgPEludGVnZXI+IDo6IG5ldyA7XG4i
ICsKKwkJCQkiCQlKIGo2ID0gVyA8SW50ZWdlcj4gOjogbmV3O1xuIiArCisJCQkJIgkJSiBqNyA9
IFcgPEludGVnZXI+IDo6PFN0cmluZz4gbmV3O1xuIiArCisJCQkJIgkJSiBqOCA9IFkuWiA6OiBu
ZXc7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiXG4iIDsKKwkJYnVmPSBu
ZXcgU3RyaW5nQnVmZmVyKGNvbnRlbnRzKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywg
YnVmLnRvU3RyaW5nKCkpOworCX0KKwkKKwkvKioKKwkgKiB0ZXN0cyB2YXJpb3VzIGFzcGVjdHMg
b2YgQ3JlYXRpb25SZWZlcmVuY2UgKENvbnN0cnVjdG9yIE1ldGhvZCBSZWZlcmVuY2UpIHdpdGgg
QXJyYXlUeXBlIGFzIGxocworCSAqIEB0aHJvd3MgRXhjZXB0aW9uCisJICovCisJcHVibGljIHZv
aWQgdGVzdFJlZmVyZW5jZUV4cHJlc3Npb25zX3Rlc3QwMDJfc2luY2VfOCgpIHRocm93cyBFeGNl
cHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVh
dGVQYWNrYWdlRnJhZ21lbnQoInRlc3Q0MDcxMzEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZyBj
b250ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiaW50ZXJmYWNlIEkge1xu
IiArCisJCQkJIglPYmplY3QgZm9vKGludCB4KTtcbiIgKworCQkJCSJ9XG4iICsKKwkJCQkicHVi
bGljIGNsYXNzIFgge1xuIiArCisJCQkJIglAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxu
IiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHtcbiIg
KworCQkJCSIJCUkgaTEgPSBpbnRbXSA6OiBuZXc7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9
XG4iICsKKwkJCQkiXG4iIDsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcihj
b250ZW50cyk7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9u
VW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJQ29tcGlsYXRp
b25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNU
UmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0
QVNUKCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbj0gZmluZFR5cGVEZWNs
YXJhdGlvbihhc3RSb290LCAiWCIpOworCisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9
IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlZGVjbGFyYXRpb24sICJtYWluIik7CisJCXsKKwkJ
CS8vIHJlcGxhY2UgdGhlIHByaW1pdGl2ZSB0eXBlIG9mIGxocyBmcm9tIGludCB0byBjaGFyLgor
CQkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1ldGhvZERlY2wuZ2V0Qm9keSgp
LnN0YXRlbWVudHMoKS5nZXQoMCk7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgdmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkg
dmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQlDcmVh
dGlvblJlZmVyZW5jZSBjcmVhdGlvblJlZmVyZW5jZSA9IChDcmVhdGlvblJlZmVyZW5jZSkgdmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LmdldEluaXRpYWxpemVyKCk7CisJCQlBcnJheVR5cGUg
YXJyYXlUeXBlID0gKEFycmF5VHlwZSkgY3JlYXRpb25SZWZlcmVuY2UuZ2V0VHlwZSgpOworCQkJ
cmV3cml0ZS5yZXBsYWNlKGFycmF5VHlwZS5nZXRFbGVtZW50VHlwZSgpLCBhc3QubmV3UHJpbWl0
aXZlVHlwZShQcmltaXRpdmVUeXBlLkNIQVIpLCBudWxsKTsKKwkJfQorCQlTdHJpbmcgcHJldmll
dz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKwkJY29udGVudHMgPSAicGFja2FnZSB0
ZXN0NDA3MTMxO1xuIiArCisJCQkJImludGVyZmFjZSBJIHtcbiIgKworCQkJCSIJT2JqZWN0IGZv
byhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKwor
CQkJCSIJQFN1cHByZXNzV2FybmluZ3MoXCJ1bnVzZWRcIilcbiIgKworCQkJCSIJcHVibGljIHN0
YXRpYyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlJIGkxID0gY2hh
cltdIDo6IG5ldztcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgOwor
CQlidWY9IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOworCQlhc3NlcnRFcXVhbFN0cmluZyhw
cmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCQorCS8qKgorCSAqIHRlc3RzIHZhcmlvdXMg
YXNwZWN0cyBvZiB7QGxpbmsgRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZX0KKwkgKiBAdGhyb3dz
IEV4Y2VwdGlvbgorCSAqLworCXB1YmxpYyB2b2lkIHRlc3RSZWZlcmVuY2VFeHByZXNzaW9uc190
ZXN0MDAzX3NpbmNlXzgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBw
YWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0NDA3MTMx
IiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMx
O1xuIiArCisJCQkJImludGVyZmFjZSBKIHtcbiIgKworCQkJCSIJdm9pZCBmb28oaW50IHgpO1xu
IiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBZIHtcbiIgKworCQkJCSIJcHVibGljIHZvaWQg
Zm9vKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBaIHtcbiIgKworCQkJ
CSIJcHVibGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIg
KworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCUBTdXBwcmVzc1dhcm5pbmdzKFwi
dW51c2VkXCIpXG4iICsKKwkJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluIChTdHJpbmcgW10g
YXJncykge1xuIiArCisJCQkJIgkJWSB5ID0gbmV3IFkoKTtcbiIgKworCQkJCSIJCVogeiA9IG5l
dyBaKCk7XG4iICsKKwkJCQkiCQlKIGoxID0geSA6OiBmb287XG4iICsKKwkJCQkiCQlKIGoyID0g
eiA6OiA8U3RyaW5nPiBiYXI7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQki
XG4iIDsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcihjb250ZW50cyk7CisJ
CUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZh
IiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJv
b3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVh
dGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisKKwkJ
VHlwZURlY2xhcmF0aW9uIHR5cGVkZWNsYXJhdGlvbj0gZmluZFR5cGVEZWNsYXJhdGlvbihhc3RS
b290LCAiWCIpOworCisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2RE
ZWNsYXJhdGlvbih0eXBlZGVjbGFyYXRpb24sICJtYWluIik7CisJCXsKKwkJCS8vIHJlcGxhY2Ug
dGhlIGxocyBhbmQgdGhlIHJocy4KKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50
KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDIpOworCQkJVmFyaWFibGVE
ZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21l
bnRzKCkuZ2V0KDApOworCQkJRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSBleHByZXNzaW9uTWV0
aG9kUmVmZXJlbmNlID0gKEV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFy
YXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlwZVBhcmFtZXRlciB0eXBlUGFy
YW1ldGVyPSBhc3QubmV3VHlwZVBhcmFtZXRlcigpOworCQkJdHlwZVBhcmFtZXRlci5zZXROYW1l
KGFzdC5uZXdTaW1wbGVOYW1lKCJTdHJpbmciKSk7CQkJCisJCQlyZXdyaXRlLnJlcGxhY2UoZXhw
cmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5nZXRFeHByZXNzaW9uKCksIGFzdC5uZXdTaW1wbGVOYW1l
KCJ6IiksIG51bGwpOworCQkJcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShleHByZXNzaW9uTWV0aG9k
UmVmZXJlbmNlLCBFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BF
UlRZKS5pbnNlcnRGaXJzdCh0eXBlUGFyYW1ldGVyLCBudWxsKTsKKwkJCXJld3JpdGUucmVwbGFj
ZShleHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlLmdldE5hbWUoKSwgYXN0Lm5ld1NpbXBsZU5hbWUo
ImJhciIpLCBudWxsKTsKKwkJCQorCQkJdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChW
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1l
bnRzKCkuZ2V0KDMpOworCQkJdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVu
dHMoKS5nZXQoMCk7CisJCQlleHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlID0gKEV4cHJlc3Npb25N
ZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXpl
cigpOworCQkJcmV3cml0ZS5yZXBsYWNlKGV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UuZ2V0RXhw
cmVzc2lvbigpLCBhc3QubmV3U2ltcGxlTmFtZSgieSIpLCBudWxsKTsKKwkJCUFTVE5vZGUgdHlw
ZUFyZ3VtZW50ID0gKEFTVE5vZGUpIGV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UudHlwZUFyZ3Vt
ZW50cygpLmdldCgwKTsKKwkJCXJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZXhwcmVzc2lvbk1ldGhv
ZFJlZmVyZW5jZSwgRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9Q
RVJUWSkucmVtb3ZlKHR5cGVBcmd1bWVudCwgbnVsbCk7CisJCQlyZXdyaXRlLnJlcGxhY2UoZXhw
cmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5nZXROYW1lKCksIGFzdC5uZXdTaW1wbGVOYW1lKCJmb28i
KSwgbnVsbCk7CisJCQkKKwkJfQorCQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1
LCByZXdyaXRlKTsKKwkJY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMxO1xuIiArCisJCQkJ
ImludGVyZmFjZSBKIHtcbiIgKworCQkJCSIJdm9pZCBmb28oaW50IHgpO1xuIiArCisJCQkJIn1c
biIgKworCQkJCSJjbGFzcyBZIHtcbiIgKworCQkJCSIJcHVibGljIHZvaWQgZm9vKGludCB4KSB7
fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBaIHtcbiIgKworCQkJCSIJcHVibGljIHZv
aWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgKworCQkJCSJwdWJs
aWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCUBTdXBwcmVzc1dhcm5pbmdzKFwidW51c2VkXCIpXG4i
ICsKKwkJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluIChTdHJpbmcgW10gYXJncykge1xuIiAr
CisJCQkJIgkJWSB5ID0gbmV3IFkoKTtcbiIgKworCQkJCSIJCVogeiA9IG5ldyBaKCk7XG4iICsK
KwkJCQkiCQlKIGoxID0geiA6OjxTdHJpbmc+IGJhcjtcbiIgKworCQkJCSIJCUogajIgPSB5IDo6
IGZvbztcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgOworCQlidWY9
IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOworCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3
LCBidWYudG9TdHJpbmcoKSk7CisJfQorCQorCS8qKgorCSAqIHRlc3RzIHZhcmlvdXMgYXNwZWN0
cyBvZiB7QGxpbmsgVHlwZU1ldGhvZFJlZmVyZW5jZX0KKwkgKiBAdGhyb3dzIEV4Y2VwdGlvbgor
CSAqLworCXB1YmxpYyB2b2lkIHRlc3RSZWZlcmVuY2VFeHByZXNzaW9uc190ZXN0MDA0X3NpbmNl
XzgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5z
b3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0NDA3MTMxIiwgZmFsc2UsIG51
bGwpOworCQlTdHJpbmcgY29udGVudHMgPSAicGFja2FnZSB0ZXN0NDA3MTMxO1xuIiArCisJCQkJ
InBhY2thZ2UgdGVzdDQwNzEzMTtcbiIgKworCQkJCSJcbiIgKworCQkJCSJpbnRlcmZhY2UgSiB7
XG4iICsKKwkJCQkiCXZvaWQgZm9vKGludCB4KTtcbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiY2xh
c3MgWSB7XG4iICsKKwkJCQkiCXN0YXRpYyBjbGFzcyBaIHtcbiIgKworCQkJCSIJCXB1YmxpYyBa
KGludCB4KSB7fVxuIiArCisJCQkJIgkJcHVibGljIHN0YXRpYyB2b2lkIGZvbyhpbnQgeCkge31c
biIgKworCQkJCSIJfVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJjbGFzcyBXPFQ+IHtcbiIgKwor
CQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIGJhcihpbnQgeCkge31cbiIgKworCQkJCSJ9XG4iICsK
KwkJCQkiXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIglAU3VwcHJlc3NX
YXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbiAo
U3RyaW5nIFtdIGFyZ3MpIHtcbiIgKworCQkJCSIJCUogajEgPSBZLkBNYXJrZXIgWiA6OiBmb287
XG4iICsKKwkJCQkiCQlKIGoyID0gQE1hcmtlciBXIDo6IDxJbnRlZ2VyPiBiYXI7XG4iICsKKwkJ
CQkiCX1cbiIgKworCQkJCSJAVGFyZ2V0IChFbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKworCQkJ
CSJAaW50ZXJmYWNlIEBNYXJrZXIge31cbiIgKworCQkJCSJ9XG4iIDsKKwkJU3RyaW5nQnVmZmVy
IGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcihjb250ZW50cyk7CisJCUlDb21waWxhdGlvblVuaXQgY3U9
IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZh
bHNlLCBudWxsKTsKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJ
CUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7
CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVk
ZWNsYXJhdGlvbj0gZmluZFR5cGVEZWNsYXJhdGlvbihhc3RSb290LCAiWCIpOworCisJCU1ldGhv
ZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlZGVjbGFy
YXRpb24sICJtYWluIik7CisJCXsKKwkJCS8vIHJlcGxhY2UgdGhlIGxocyBhbmQgdGhlIHJocy4K
KwkJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHko
KS5zdGF0ZW1lbnRzKCkuZ2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZh
cmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQp
IHZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJVHlw
ZU1ldGhvZFJlZmVyZW5jZSB0eXBlTWV0aG9kUmVmZXJlbmNlID0gKFR5cGVNZXRob2RSZWZlcmVu
Y2UpIHZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlw
ZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyPSBhc3QubmV3VHlwZVBhcmFtZXRlcigpOworCQkJdHlw
ZVBhcmFtZXRlci5zZXROYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJJbnRlZ2VyIikpOworCQkJVHlw
ZSBuZXdUeXBlID0gYXN0Lm5ld1NpbXBsZVR5cGUoYXN0Lm5ld1NpbXBsZU5hbWUoIlciKSk7CisJ
CQlyZXdyaXRlLnJlcGxhY2UodHlwZU1ldGhvZFJlZmVyZW5jZS5nZXRUeXBlKCksIG5ld1R5cGUs
IG51bGwpOworCQkJcmV3cml0ZS5nZXRMaXN0UmV3cml0ZSh0eXBlTWV0aG9kUmVmZXJlbmNlLCBU
eXBlTWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZKS5pbnNlcnRGaXJzdCh0
eXBlUGFyYW1ldGVyLCBudWxsKTsKKwkJCXJld3JpdGUucmVwbGFjZSh0eXBlTWV0aG9kUmVmZXJl
bmNlLmdldE5hbWUoKSwgYXN0Lm5ld1NpbXBsZU5hbWUoImJhciIpLCBudWxsKTsKKwkJCQorCQkJ
dmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDEpOworCQkJdmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQl0eXBlTWV0
aG9kUmVmZXJlbmNlID0gKFR5cGVNZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxlRGVjbGFyYXRpb25G
cmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJbmV3VHlwZSA9IGFzdC5uZXdTaW1wbGVUeXBl
KGFzdC5uZXdRdWFsaWZpZWROYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJZIiksYXN0Lm5ld1NpbXBs
ZU5hbWUoIloiKSkpOworCQkJcmV3cml0ZS5yZXBsYWNlKHR5cGVNZXRob2RSZWZlcmVuY2UuZ2V0
VHlwZSgpLCBuZXdUeXBlLCBudWxsKTsKKwkJCUFTVE5vZGUgdHlwZUFyZ3VtZW50ID0gKEFTVE5v
ZGUpIHR5cGVNZXRob2RSZWZlcmVuY2UudHlwZUFyZ3VtZW50cygpLmdldCgwKTsKKwkJCXJld3Jp
dGUuZ2V0TGlzdFJld3JpdGUodHlwZU1ldGhvZFJlZmVyZW5jZSwgVHlwZU1ldGhvZFJlZmVyZW5j
ZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJUWSkucmVtb3ZlKHR5cGVBcmd1bWVudCwgbnVsbCk7CisJ
CQlyZXdyaXRlLnJlcGxhY2UodHlwZU1ldGhvZFJlZmVyZW5jZS5nZXROYW1lKCksIGFzdC5uZXdT
aW1wbGVOYW1lKCJmb28iKSwgbnVsbCk7CQkJCisJCX0KKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1
YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWNvbnRlbnRzID0gInBhY2thZ2UgdGVzdDQwNzEz
MTtcbiIgKworCQkJCSJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiXG4iICsKKwkJCQki
aW50ZXJmYWNlIEoge1xuIiArCisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxu
IiArCisJCQkJImNsYXNzIFkge1xuIiArCisJCQkJIglzdGF0aWMgY2xhc3MgWiB7XG4iICsKKwkJ
CQkiCQlwdWJsaWMgWihpbnQgeCkge31cbiIgKworCQkJCSIJCXB1YmxpYyBzdGF0aWMgdm9pZCBm
b28oaW50IHgpIHt9XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiY2xhc3Mg
VzxUPiB7XG4iICsKKwkJCQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBiYXIoaW50IHgpIHt9XG4iICsK
KwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJ
CSIJQFN1cHByZXNzV2FybmluZ3MoXCJ1bnVzZWRcIilcbiIgKworCQkJCSIJcHVibGljIHN0YXRp
YyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7XG4iICsKKwkJCQkiCQlKIGoxID0gVyA6OjxJ
bnRlZ2VyPiBiYXI7XG4iICsKKwkJCQkiCQlKIGoyID0gWS5aIDo6IGZvbztcbiIgKworCQkJCSIJ
fVxuIiArCisJCQkJIkBUYXJnZXQgKEVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBp
bnRlcmZhY2UgQE1hcmtlciB7fVxuIiArCisJCQkJIn1cbiIgOworCQlidWY9IG5ldyBTdHJpbmdC
dWZmZXIoY29udGVudHMpOworCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJp
bmcoKSk7CisJfQorCQorCS8qKgorCSAqIHRlc3RzIHZhcmlvdXMgYXNwZWN0cyBvZiBTdXBlck1l
dGhvZFJlZmVyZW5jZQorCSAqIEB0aHJvd3MgRXhjZXB0aW9uCisJICovCisJcHVibGljIHZvaWQg
dGVzdFJlZmVyZW5jZUV4cHJlc3Npb25zX3Rlc3QwMDVfc2luY2VfOCgpIHRocm93cyBFeGNlcHRp
b24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQ
YWNrYWdlRnJhZ21lbnQoInRlc3Q0MDcxMzEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZyBjb250
ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiaW50ZXJmYWNlIEoge1xuIiAr
CisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiArCisJ
CQkJImNsYXNzIFhYIHtcbiIgKworCQkJCSIJcHVibGljIHZvaWQgZm9vKGludCB4KSB7fVxuIiAr
CisJCQkJIglwdWJsaWMgdm9pZCBiYXIoaW50IHgpIHt9XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
IlxuIiArCisJCQkJInB1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWFgge1xuIiArCisJCQkJIiAgICAg
ICBAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIiAgICAgICBwdWJsaWMg
IHZvaWQgYmFyKGludCBpKSB7XG4iICsKKwkJCQkiICAgICAgICAgICBKIGp4ID0gc3VwZXIgOjog
PEludGVnZXI+IGZvbztcbiIgKworCQkJCSIgICAgICAgICAgIEoganogPSBYLnN1cGVyIDo6IGJh
cjtcbiIgKworCQkJCSIgICAgICAgfVxuIiArCisJCQkJIiAgICAgICBwdWJsaWMgc3RhdGljIHZv
aWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHt9XG4iICsKKwkJCQkifVxuIiArCisJCQkJIlxuIiA7
CisJCVN0cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOworCQlJQ29t
cGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlguamF2YSIsIGJ1
Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7CisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBj
cmVhdGVBU1QoY3UpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFz
dFJvb3QuZ2V0QVNUKCkpOworCQlBU1QgYXN0PSBhc3RSb290LmdldEFTVCgpOworCisJCVR5cGVE
ZWNsYXJhdGlvbiB0eXBlZGVjbGFyYXRpb249IGZpbmRUeXBlRGVjbGFyYXRpb24oYXN0Um9vdCwg
IlgiKTsKKworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFy
YXRpb24odHlwZWRlY2xhcmF0aW9uLCAiYmFyIik7CisJCXsKKwkJCS8vIHJlcGxhY2UgdGhlIGxo
cyBhbmQgdGhlIHJocywgYWRkL2RlbGV0ZSB0eXBlIGFyZ3VtZW50cy4KKwkJCVZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCku
Z2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxlRGVjbGFyYXRp
b25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlhYmxlRGVjbGFy
YXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJU3VwZXJNZXRob2RSZWZlcmVu
Y2Ugc3VwZXJNZXRob2RSZWZlcmVuY2UgPSAoU3VwZXJNZXRob2RSZWZlcmVuY2UpIHZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJcmV3cml0ZS5zZXQoc3Vw
ZXJNZXRob2RSZWZlcmVuY2UsIFN1cGVyTWV0aG9kUmVmZXJlbmNlLlFVQUxJRklFUl9QUk9QRVJU
WSwgYXN0Lm5ld1NpbXBsZU5hbWUoIlgiKSwgbnVsbCk7CisJCQlBU1ROb2RlIHR5cGVBcmd1bWVu
dCA9IChBU1ROb2RlKSBzdXBlck1ldGhvZFJlZmVyZW5jZS50eXBlQXJndW1lbnRzKCkuZ2V0KDAp
OworCQkJcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShzdXBlck1ldGhvZFJlZmVyZW5jZSwgU3VwZXJN
ZXRob2RSZWZlcmVuY2UuVFlQRV9BUkdVTUVOVFNfUFJPUEVSVFkpLnJlbW92ZSh0eXBlQXJndW1l
bnQsIG51bGwpOworCQkJcmV3cml0ZS5yZXBsYWNlKHN1cGVyTWV0aG9kUmVmZXJlbmNlLmdldE5h
bWUoKSwgYXN0Lm5ld1NpbXBsZU5hbWUoImJhciIpLCBudWxsKTsKKwkJCQorCQkJdmFyaWFibGVE
ZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRo
b2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDEpOworCQkJdmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFyaWFibGVEZWNs
YXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQlzdXBlck1ldGhvZFJlZmVy
ZW5jZSA9IChTdXBlck1ldGhvZFJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
LmdldEluaXRpYWxpemVyKCk7CisJCQlyZXdyaXRlLnJlbW92ZShzdXBlck1ldGhvZFJlZmVyZW5j
ZS5nZXRRdWFsaWZpZXIoKSwgbnVsbCk7CisJCQlUeXBlUGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXI9
IGFzdC5uZXdUeXBlUGFyYW1ldGVyKCk7CisJCQl0eXBlUGFyYW1ldGVyLnNldE5hbWUoYXN0Lm5l
d1NpbXBsZU5hbWUoIlN0cmluZyIpKTsKKwkJCXJld3JpdGUuZ2V0TGlzdFJld3JpdGUoc3VwZXJN
ZXRob2RSZWZlcmVuY2UsIFN1cGVyTWV0aG9kUmVmZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BF
UlRZKS5pbnNlcnRGaXJzdCh0eXBlUGFyYW1ldGVyLCBudWxsKTsKKwkJCXJld3JpdGUucmVwbGFj
ZShzdXBlck1ldGhvZFJlZmVyZW5jZS5nZXROYW1lKCksIGFzdC5uZXdTaW1wbGVOYW1lKCJmb28i
KSwgbnVsbCk7CisJCQkKKwkJfQorCQlTdHJpbmcgcHJldmlldyA9IGV2YWx1YXRlUmV3cml0ZShj
dSwgcmV3cml0ZSk7CisJCWNvbnRlbnRzID0gInBhY2thZ2UgdGVzdDQwNzEzMTtcbiIgKworCQkJ
CSJpbnRlcmZhY2UgSiB7XG4iICsKKwkJCQkiCXZvaWQgZm9vKGludCB4KTtcbiIgKworCQkJCSJ9
XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiY2xhc3MgWFgge1xuIiArCisJCQkJIglwdWJsaWMgdm9p
ZCBmb28oaW50IHgpIHt9XG4iICsKKwkJCQkiCXB1YmxpYyB2b2lkIGJhcihpbnQgeCkge31cbiIg
KworCQkJCSJ9XG4iICsKKwkJCQkiXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFggZXh0ZW5kcyBY
WCB7XG4iICsKKwkJCQkiICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW51c2VkXCIpXG4iICsK
KwkJCQkiICAgICAgIHB1YmxpYyAgdm9pZCBiYXIoaW50IGkpIHtcbiIgKworCQkJCSIgICAgICAg
ICAgIEoganggPSBYLnN1cGVyIDo6IGJhcjtcbiIgKworCQkJCSIgICAgICAgICAgIEoganogPSBz
dXBlciA6OjxTdHJpbmc+IGZvbztcbiIgKworCQkJCSIgICAgICAgfVxuIiArCisJCQkJIiAgICAg
ICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbiAoU3RyaW5nIFtdIGFyZ3MpIHt9XG4iICsKKwkJCQki
fVxuIiArCisJCQkJIlxuIiA7CisJCWJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoY29udGVudHMpOwor
CQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCS8qKgor
CSAqIHRlc3RzIGNyb3NzIHJld3JpdGluZyAtIGNoYW5naW5nIGZyb20gb25lIG1lbWJlciBvZiBy
ZWZlcmVuY2UgZXhwcmVzc2lvbnMgdG8gYW5vdGhlciB0eXBlLgorCSAqIEB0aHJvd3MgRXhjZXB0
aW9uCisJICovCisJcHVibGljIHZvaWQgdGVzdFJlZmVyZW5jZUV4cHJlc3Npb25zX3Rlc3QwMDZf
c2luY2VfOCgpIHRocm93cyBFeGNlcHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0
aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJhZ21lbnQoInRlc3Q0MDcxMzEiLCBmYWxz
ZSwgbnVsbCk7CisJCVN0cmluZyBjb250ZW50cyA9ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsK
KwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLio7XG4iICsKKwkJCQkiaW50ZXJmYWNl
IEoge1xuIiArCisJCQkJIgl2b2lkIGZvbyhpbnQgeCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJ
ImNsYXNzIFkge1xuIiArCisJCQkJIglzdGF0aWMgY2xhc3MgWiB7XG4iICsKKwkJCQkiCQlwdWJs
aWMgWihpbnQgeCkge31cbiIgKworCQkJCSIJCXB1YmxpYyBzdGF0aWMgdm9pZCBmb28oaW50IHgp
IHt9XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiY2xhc3MgVzxUPiB7XG4i
ICsKKwkJCQkiCXB1YmxpYyBXKGludCB4KSB7fVxuIiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZv
aWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgKworCQkJCSJjbGFz
cyBYWCB7XG4iICsKKwkJCQkiCXB1YmxpYyB2b2lkIGZvbyhpbnQgeCkge31cbiIgKworCQkJCSIJ
cHVibGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1cbiIgKworCQkJCSJcbiIgKwor
CQkJCSJwdWJsaWMgY2xhc3MgWCBleHRlbmRzIFhYIHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRp
YyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7fVxuIiArCisJCQkJIglAU3VwcHJlc3NXYXJu
aW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglwdWJsaWMgdm9pZCBiYXIgKCkge1xuIiArCisJ
CQkJIgkJSiBqMSA9IFcgPEludGVnZXI+IDo6IDxTdHJpbmc+IG5ldztcbiIgKworCQkJCSIJCUog
ajIgPSBZLlogOjogbmV3O1xuIiArCisJCQkJIgkJSiBqMyA9IFkuQE1hcmtlciBaIDo6IGZvbztc
biIgKworCQkJCSIJCUoganggPSBzdXBlciA6OiBmb287XG4iICsKKwkJCQkiCQlKIGp6ID0gWC5z
dXBlciA6OiBiYXI7XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iICsKKwkJCQkiQFRhcmdl
dCAoRWxlbWVudFR5cGUuVFlQRV9VU0UpXG4iICsKKwkJCQkiQGludGVyZmFjZSBNYXJrZXIge31c
biIgKworCQkJCSJ9XG4iOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5nQnVmZmVyKGNv
bnRlbnRzKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25V
bml0KCJYLmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOworCQlDb21waWxhdGlv
blVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUKGN1KTsKKwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RS
ZXdyaXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgpKTsKKwkJQVNUIGFzdD0gYXN0Um9vdC5nZXRB
U1QoKTsKKworCQlUeXBlRGVjbGFyYXRpb24gdHlwZWRlY2xhcmF0aW9uPSBmaW5kVHlwZURlY2xh
cmF0aW9uKGFzdFJvb3QsICJYIik7CisKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0g
ZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGVkZWNsYXJhdGlvbiwgImJhciIpOworCQl7CisJCQkv
LyBjYXNlIDE6IGNyZWF0aW9uUmVmZXJlbmNlIHRvIFR5cGVNZXRob2RSZWZlcmVuY2UKKwkJCVZh
cmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9
IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0
ZW1lbnRzKCkuZ2V0KDApOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IHZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIHZhcmlh
YmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQuZnJhZ21lbnRzKCkuZ2V0KDApOworCQkJQ3JlYXRpb25S
ZWZlcmVuY2UgY3JlYXRpb25SZWZlcmVuY2UgPSAoQ3JlYXRpb25SZWZlcmVuY2UpIHZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudC5nZXRJbml0aWFsaXplcigpOworCQkJVHlwZU1ldGhvZFJlZmVy
ZW5jZSB0eXBlTWV0aG9kUmVmZXJlbmNlID0gYXN0Lm5ld1R5cGVNZXRob2RSZWZlcmVuY2UoKTsK
KwkJCVF1YWxpZmllZFR5cGUgcXVhbGlmaWVkVHlwZSA9IGFzdC5uZXdRdWFsaWZpZWRUeXBlKGFz
dC5uZXdTaW1wbGVUeXBlKGFzdC5uZXdTaW1wbGVOYW1lKCJZIikpLCBhc3QubmV3U2ltcGxlTmFt
ZSgiWiIpKTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbiA9IGFzdC5uZXdN
YXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5u
ZXdTaW1wbGVOYW1lKCJNYXJrZXIiKSk7CisJCQlxdWFsaWZpZWRUeXBlLmFubm90YXRpb25zKCku
YWRkKG1hcmtlckFubm90YXRpb24pOworCQkJdHlwZU1ldGhvZFJlZmVyZW5jZS5zZXRUeXBlKHF1
YWxpZmllZFR5cGUpOworCQkJdHlwZU1ldGhvZFJlZmVyZW5jZS5zZXROYW1lKGFzdC5uZXdTaW1w
bGVOYW1lKCJmb28iKSk7CisJCQlyZXdyaXRlLnJlcGxhY2UoY3JlYXRpb25SZWZlcmVuY2UsIHR5
cGVNZXRob2RSZWZlcmVuY2UsIG51bGwpOworCQkJCisJCQkvLyBjYXNlIDI6IENyZWF0aW9uUmVm
ZXJlbmNlIHRvIFN1cGVyTWV0aG9kUmVmZXJlbmNlCisJCQl2YXJpYWJsZURlY2xhcmF0aW9uU3Rh
dGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1ldGhvZERlY2wuZ2V0Qm9k
eSgpLnN0YXRlbWVudHMoKS5nZXQoMSk7CisJCQl2YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQg
PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSB2YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50LmZyYWdtZW50cygpLmdldCgwKTsKKwkJCWNyZWF0aW9uUmVmZXJlbmNlID0gKENyZWF0aW9u
UmVmZXJlbmNlKSB2YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKTsK
KwkJCVN1cGVyTWV0aG9kUmVmZXJlbmNlIHN1cGVyTWV0aG9kUmVmZXJlbmNlID0gYXN0Lm5ld1N1
cGVyTWV0aG9kUmVmZXJlbmNlKCk7CisJCQlzdXBlck1ldGhvZFJlZmVyZW5jZS5zZXROYW1lKGFz
dC5uZXdTaW1wbGVOYW1lKCJmb28iKSk7CisJCQlyZXdyaXRlLnJlcGxhY2UoY3JlYXRpb25SZWZl
cmVuY2UsIHN1cGVyTWV0aG9kUmVmZXJlbmNlLCBudWxsKTsKKwkJCQorCQkJLy8gY2FzZSAzOiBU
eXBlTWV0aG9kUmVmZXJlbmNlIHRvIFN1cGVyTWV0aG9kUmVmZXJlbmNlCisJCQl2YXJpYWJsZURl
Y2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIG1ldGhv
ZERlY2wuZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoMik7CisJCQl2YXJpYWJsZURlY2xhcmF0
aW9uRnJhZ21lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSB2YXJpYWJsZURlY2xh
cmF0aW9uU3RhdGVtZW50LmZyYWdtZW50cygpLmdldCgwKTsKKwkJCXR5cGVNZXRob2RSZWZlcmVu
Y2UgPSAoVHlwZU1ldGhvZFJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50Lmdl
dEluaXRpYWxpemVyKCk7CisJCQlzdXBlck1ldGhvZFJlZmVyZW5jZSA9IGFzdC5uZXdTdXBlck1l
dGhvZFJlZmVyZW5jZSgpOworCQkJc3VwZXJNZXRob2RSZWZlcmVuY2Uuc2V0TmFtZShhc3QubmV3
U2ltcGxlTmFtZSgiYmFyIikpOworCQkJc3VwZXJNZXRob2RSZWZlcmVuY2Uuc2V0UXVhbGlmaWVy
KGFzdC5uZXdTaW1wbGVOYW1lKCJYIikpOworCQkJcmV3cml0ZS5yZXBsYWNlKHR5cGVNZXRob2RS
ZWZlcmVuY2UsIHN1cGVyTWV0aG9kUmVmZXJlbmNlLCBudWxsKTsJCQkKKwkJCQorCQkJLy8gY2Fz
ZSA0OiBTdXBlck1ldGhvZFJlZmVyZW5jZSB0byBDcmVhdGlvbk1ldGhvZFJlZmVyZW5jZQorCQkJ
dmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50KSBtZXRob2REZWNsLmdldEJvZHkoKS5zdGF0ZW1lbnRzKCkuZ2V0KDMpOworCQkJdmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgdmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5mcmFnbWVudHMoKS5nZXQoMCk7CisJCQlzdXBlck1l
dGhvZFJlZmVyZW5jZSA9IChTdXBlck1ldGhvZFJlZmVyZW5jZSkgdmFyaWFibGVEZWNsYXJhdGlv
bkZyYWdtZW50LmdldEluaXRpYWxpemVyKCk7CisJCQlQYXJhbWV0ZXJpemVkVHlwZSBwYXJhbWV0
ZXJpemVkVHlwZSA9IGFzdC5uZXdQYXJhbWV0ZXJpemVkVHlwZShhc3QubmV3U2ltcGxlVHlwZShh
c3QubmV3U2ltcGxlTmFtZSgiVyIpKSk7CisJCQlwYXJhbWV0ZXJpemVkVHlwZS50eXBlQXJndW1l
bnRzKCkuYWRkKGFzdC5uZXdTaW1wbGVUeXBlKGFzdC5uZXdTaW1wbGVOYW1lKCJJbnRlZ2VyIikp
KTsKKwkJCWNyZWF0aW9uUmVmZXJlbmNlID0gYXN0Lm5ld0NyZWF0aW9uUmVmZXJlbmNlKCk7CisJ
CQljcmVhdGlvblJlZmVyZW5jZS5zZXRUeXBlKHBhcmFtZXRlcml6ZWRUeXBlKTsKKwkJCWNyZWF0
aW9uUmVmZXJlbmNlLnR5cGVBcmd1bWVudHMoKS5hZGQoYXN0Lm5ld1NpbXBsZVR5cGUoYXN0Lm5l
d1NpbXBsZU5hbWUoIlN0cmluZyIpKSk7CisJCQlyZXdyaXRlLnJlcGxhY2Uoc3VwZXJNZXRob2RS
ZWZlcmVuY2UsIGNyZWF0aW9uUmVmZXJlbmNlLCBudWxsKTsJCQkKKwkJCQorCQkJLy8gY2FzZSA1
OiBTdXBlck1ldGhvZFJlZmVyZW5jZSB0byBFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlCisJCQl2
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1l
bnQpIG1ldGhvZERlY2wuZ2V0Qm9keSgpLnN0YXRlbWVudHMoKS5nZXQoNCk7CisJCQl2YXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSB2YXJp
YWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LmZyYWdtZW50cygpLmdldCgwKTsKKwkJCXN1cGVyTWV0
aG9kUmVmZXJlbmNlID0gKFN1cGVyTWV0aG9kUmVmZXJlbmNlKSB2YXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJCUV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2Ug
ZXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSA9IGFzdC5uZXdFeHByZXNzaW9uTWV0aG9kUmVmZXJl
bmNlKCk7CisJCQlleHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlLnNldEV4cHJlc3Npb24oYXN0Lm5l
d1F1YWxpZmllZE5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIlkiKSwgYXN0Lm5ld1NpbXBsZU5hbWUo
IloiKSkpOworCQkJZXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5zZXROYW1lKGFzdC5uZXdTaW1w
bGVOYW1lKCJmb28iKSk7CisJCQlyZXdyaXRlLnJlcGxhY2Uoc3VwZXJNZXRob2RSZWZlcmVuY2Us
IGV4cHJlc3Npb25NZXRob2RSZWZlcmVuY2UsIG51bGwpOwkJCQorCQkJCisJCX0KKwkJCisJCVN0
cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCQljb250ZW50cyA9
ICJwYWNrYWdlIHRlc3Q0MDcxMzE7XG4iICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0
aW9uLio7XG4iICsKKwkJCQkiaW50ZXJmYWNlIEoge1xuIiArCisJCQkJIgl2b2lkIGZvbyhpbnQg
eCk7XG4iICsKKwkJCQkifVxuIiArCisJCQkJImNsYXNzIFkge1xuIiArCisJCQkJIglzdGF0aWMg
Y2xhc3MgWiB7XG4iICsKKwkJCQkiCQlwdWJsaWMgWihpbnQgeCkge31cbiIgKworCQkJCSIJCXB1
YmxpYyBzdGF0aWMgdm9pZCBmb28oaW50IHgpIHt9XG4iICsKKwkJCQkiCX1cbiIgKworCQkJCSJ9
XG4iICsKKwkJCQkiY2xhc3MgVzxUPiB7XG4iICsKKwkJCQkiCXB1YmxpYyBXKGludCB4KSB7fVxu
IiArCisJCQkJIglwdWJsaWMgc3RhdGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiArCisJCQkJIn1c
biIgKworCQkJCSJcbiIgKworCQkJCSJjbGFzcyBYWCB7XG4iICsKKwkJCQkiCXB1YmxpYyB2b2lk
IGZvbyhpbnQgeCkge31cbiIgKworCQkJCSIJcHVibGljIHZvaWQgYmFyKGludCB4KSB7fVxuIiAr
CisJCQkJIn1cbiIgKworCQkJCSJcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCBleHRlbmRzIFhY
IHtcbiIgKworCQkJCSIJcHVibGljIHN0YXRpYyB2b2lkIG1haW4gKFN0cmluZyBbXSBhcmdzKSB7
fVxuIiArCisJCQkJIglAU3VwcHJlc3NXYXJuaW5ncyhcInVudXNlZFwiKVxuIiArCisJCQkJIglw
dWJsaWMgdm9pZCBiYXIgKCkge1xuIiArCisJCQkJIgkJSiBqMSA9IFkuQE1hcmtlciBaOjpmb287
XG4iICsKKwkJCQkiCQlKIGoyID0gc3VwZXI6OmZvbztcbiIgKworCQkJCSIJCUogajMgPSBYLnN1
cGVyOjpiYXI7XG4iICsKKwkJCQkiCQlKIGp4ID0gVzxJbnRlZ2VyPjo6PFN0cmluZz4gbmV3O1xu
IiArCisJCQkJIgkJSiBqeiA9IFkuWjo6Zm9vO1xuIiArCisJCQkJIgl9XG4iICsKKwkJCQkifVxu
IiArCisJCQkJIkBUYXJnZXQgKEVsZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCisJCQkJIkBpbnRl
cmZhY2UgTWFya2VyIHt9XG4iICsKKwkJCQkifVxuIjsKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVy
KGNvbnRlbnRzKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkp
OworCX0JCit9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0
ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3QuamF2YQppbmRleCA0ZGE0ODk2Li5lMzcxYjRk
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2Vj
bGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3Qu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3QuamF2
YQpAQCAtMTE1LDYgKzExNSw3IEBACiAJCXN1aXRlLmFkZFRlc3QoQVNUUmV3cml0ZVByb3BlcnR5
VGVzdC5zdWl0ZSgpKTsKIAkJc3VpdGUuYWRkVGVzdChBU1RSZXdyaXRpbmdQYWNrYWdlRGVjbFRl
c3Quc3VpdGUoKSk7CiAJCXN1aXRlLmFkZFRlc3QoQVNUUmV3cml0aW5nTGFtYmRhRXhwcmVzc2lv
blRlc3Quc3VpdGUoKSk7CQkKKwkJc3VpdGUuYWRkVGVzdChBU1RSZXdyaXRpbmdSZWZlcmVuY2VF
eHByZXNzaW9uVGVzdC5zdWl0ZSgpKTsJCQogCQlzdWl0ZS5hZGRUZXN0KFNvdXJjZU1vZGlmaWVy
VGVzdC5zdWl0ZSgpKTsKIAkJc3VpdGUuYWRkVGVzdChJbXBvcnRSZXdyaXRlVGVzdC5zdWl0ZSgp
KTsKIAkJcmV0dXJuIHN1aXRlOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3BhcnNlci9QYXJzZXIuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9wYXJzZXIvUGFyc2VyLmphdmEKaW5kZXggMGZkODkyYy4uODJiYTZmYSAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL3BhcnNlci9QYXJzZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcGFyc2VyL1Bh
cnNlci5qYXZhCkBAIC03OTkxLDcgKzc5OTEsNyBAQAogCS8vIElkZW50aWZpZXJPck5ldyA6Oj0g
J25ldycKIAlpZiAobmV3Rm9ybSkgewogCQlpbnQgbmV3U3RhcnQgPSB0aGlzLmludFN0YWNrW3Ro
aXMuaW50UHRyLS1dOwotCQlwdXNoSWRlbnRpZmllcihDb25zdGFudFBvb2wuSW5pdCwgKCgobG9u
ZykgbmV3U3RhcnQgPDwgMzIpKSArIChuZXdTdGFydCArIDMpKTsKKwkJcHVzaElkZW50aWZpZXIo
Q29uc3RhbnRQb29sLkluaXQsICgoKGxvbmcpIG5ld1N0YXJ0IDw8IDMyKSkgKyAobmV3U3RhcnQg
KyAyKSk7CiAJfQogfQogcHJvdGVjdGVkIHZvaWQgY29uc3VtZUVtcHR5VHlwZUFyZ3VtZW50cygp
IHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3
cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YQppbmRleCBmZDNiMWIzLi42Y2Y0NGE5IDEwMDY0
NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRl
L0FTVFJld3JpdGVBbmFseXplci5qYXZhCkBAIC0yNDI4LDYgKzI0MjgsMjkgQEAKIAkJcmV0dXJu
IGZhbHNlOwogCX0KIAorCXByaXZhdGUgdm9pZCB2aXNpdFJlZmVyZW5jZVR5cGVBcmd1bWVudHMo
QVNUTm9kZSBub2RlLCBTdHJ1Y3R1cmFsUHJvcGVydHlEZXNjcmlwdG9yIGNoaWxkUHJvcGVydHks
IGludCBwb3MpIHsKKwkJaWYgKGlzQ2hhbmdlZChub2RlLCBjaGlsZFByb3BlcnR5KSkgeworCQkJ
dHJ5IHsKKwkJCQlwb3MgPSBnZXRTY2FubmVyKCkuZ2V0VG9rZW5FbmRPZmZzZXQoVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lQ09MT05fQ09MT04sIHBvcyk7CisJCQkJcmV3cml0ZU9wdGlvbmFsVHlw
ZVBhcmFtZXRlcnMobm9kZSwgY2hpbGRQcm9wZXJ0eSwgcG9zLCBVdGlsLkVNUFRZX1NUUklORywg
ZmFsc2UsIGZhbHNlKTsKKwkJCX0gY2F0Y2ggKENvcmVFeGNlcHRpb24gZSkgeworCQkJCWhhbmRs
ZUV4Y2VwdGlvbihlKTsKKwkJCX0KKwkJfQorCX0KKworCS8qIChub24tSmF2YWRvYykKKwkgKiBA
c2VlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5BU1RWaXNpdG9yI3Zpc2l0KENyZWF0aW9uUmVm
ZXJlbmNlKQorCSAqLworCXB1YmxpYyBib29sZWFuIHZpc2l0KENyZWF0aW9uUmVmZXJlbmNlIG5v
ZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJlbkNoYW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zp
c2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7CisJCX0KKwkJaW50IHBvcz0gcmV3cml0ZVJlcXVp
cmVkTm9kZShub2RlLCBDcmVhdGlvblJlZmVyZW5jZS5UWVBFX1BST1BFUlRZKTsKKwkJdmlzaXRS
ZWZlcmVuY2VUeXBlQXJndW1lbnRzKG5vZGUsIENyZWF0aW9uUmVmZXJlbmNlLlRZUEVfQVJHVU1F
TlRTX1BST1BFUlRZLCBwb3MpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCiAJLyogKG5vbi1KYXZh
ZG9jKQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQo
RG9TdGF0ZW1lbnQpCiAJICovCkBAIC0zODk1LDYgKzM5MTgsMjAgQEAKIAkJcmV3cml0ZVBhcmFn
cmFwaExpc3Qobm9kZSwgRW51bURlY2xhcmF0aW9uLkJPRFlfREVDTEFSQVRJT05TX1BST1BFUlRZ
LCBwb3MsIGluZGVudCwgLTEsIDIpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQorCisJLyogKG5vbi1K
YXZhZG9jKQorCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3Ijdmlz
aXQoRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlwdWJsaWMgYm9vbGVhbiB2aXNp
dChFeHByZXNzaW9uTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJlbkNo
YW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7
CisJCX0KKwkJaW50IHBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBFeHByZXNzaW9uTWV0
aG9kUmVmZXJlbmNlLkVYUFJFU1NJT05fUFJPUEVSVFkpOworCQl2aXNpdFJlZmVyZW5jZVR5cGVB
cmd1bWVudHMobm9kZSwgRXhwcmVzc2lvbk1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19Q
Uk9QRVJUWSwgcG9zKTsKKwkJcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBFeHByZXNzaW9uTWV0
aG9kUmVmZXJlbmNlLk5BTUVfUFJPUEVSVFkpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCiAJLyog
KG5vbi1KYXZhZG9jKQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0
b3IjdmlzaXQob3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLk1hcmtlckFubm90YXRpb24pCiAJICov
CkBAIC00MDE4LDYgKzQwNTUsMzMgQEAKIAkJcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBTaW5n
bGVNZW1iZXJBbm5vdGF0aW9uLlZBTFVFX1BST1BFUlRZKTsKIAkJcmV0dXJuIGZhbHNlOwogCX0K
KworCS8qIChub24tSmF2YWRvYykKKwkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLmRvbS5B
U1RWaXNpdG9yI3Zpc2l0KFN1cGVyTWV0aG9kUmVmZXJlbmNlKQorCSAqLworCXB1YmxpYyBib29s
ZWFuIHZpc2l0KFN1cGVyTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJl
bkNoYW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9k
ZSk7CisJCX0KKwkJaW50IHBvcyA9IHJld3JpdGVPcHRpb25hbFF1YWxpZmllcihub2RlLCBTdXBl
ck1ldGhvZFJlZmVyZW5jZS5RVUFMSUZJRVJfUFJPUEVSVFksIG5vZGUuZ2V0U3RhcnRQb3NpdGlv
bigpKTsKKwkJdmlzaXRSZWZlcmVuY2VUeXBlQXJndW1lbnRzKG5vZGUsIFN1cGVyTWV0aG9kUmVm
ZXJlbmNlLlRZUEVfQVJHVU1FTlRTX1BST1BFUlRZLCBwb3MpOworCQlyZXdyaXRlUmVxdWlyZWRO
b2RlKG5vZGUsIFN1cGVyTWV0aG9kUmVmZXJlbmNlLk5BTUVfUFJPUEVSVFkpOworCQlyZXR1cm4g
ZmFsc2U7CisJfQorCisJLyogKG5vbi1KYXZhZG9jKQorCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0
LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQoVHlwZU1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlw
dWJsaWMgYm9vbGVhbiB2aXNpdChUeXBlTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJaWYgKCFo
YXNDaGlsZHJlbkNoYW5nZXMobm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hp
bGRyZW4obm9kZSk7CisJCX0KKwkJaW50IHBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBU
eXBlTWV0aG9kUmVmZXJlbmNlLlRZUEVfUFJPUEVSVFkpOworCQl2aXNpdFJlZmVyZW5jZVR5cGVB
cmd1bWVudHMobm9kZSwgVHlwZU1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJU
WSwgcG9zKTsKKwkJcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBUeXBlTWV0aG9kUmVmZXJlbmNl
Lk5BTUVfUFJPUEVSVFkpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCiAJLyogKG5vbi1KYXZhZG9j
KQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQob3Jn
LmVjbGlwc2UuamR0LmNvcmUuZG9tLlR5cGVQYXJhbWV0ZXIpCiAJICovCmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9t
L3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUv
ZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVG
bGF0dGVuZXIuamF2YQppbmRleCAyOWU4ODEzLi4yMGY2NmUzIDEwMDY0NAotLS0gYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3Jp
dGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxh
dHRlbmVyLmphdmEKQEAgLTQ3MSw2ICs0NzEsMTcgQEAKIAl9CiAKIAkvKgorCSAqIEBzZWUgQVNU
VmlzaXRvciN2aXNpdChDcmVhdGlvblJlZmVyZW5jZSkKKwkgKi8KKwlwdWJsaWMgYm9vbGVhbiB2
aXNpdChDcmVhdGlvblJlZmVyZW5jZSBub2RlKSB7CisJCWdldENoaWxkTm9kZShub2RlLCBDcmVh
dGlvblJlZmVyZW5jZS5UWVBFX1BST1BFUlRZKS5hY2NlcHQodGhpcyk7CisJCXRoaXMucmVzdWx0
LmFwcGVuZCgiOjoiKTsgLy8kTk9OLU5MUy0xJAorCQl2aXNpdExpc3Qobm9kZSwgQ3JlYXRpb25S
ZWZlcmVuY2UuVFlQRV9BUkdVTUVOVFNfUFJPUEVSVFksIFV0aWwuRU1QVFlfU1RSSU5HLCBTdHJp
bmcudmFsdWVPZignPCcpLCBTdHJpbmcudmFsdWVPZignPicpKTsKKwkJdGhpcy5yZXN1bHQuYXBw
ZW5kKCJuZXciKTsgLy8kTk9OLU5MUy0xJAorCQlyZXR1cm4gZmFsc2U7CisJfQorCisJLyoKIAkg
KiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoRG9TdGF0ZW1lbnQpCiAJICovCiAJcHVibGljIGJvb2xl
YW4gdmlzaXQoRG9TdGF0ZW1lbnQgbm9kZSkgewpAQCAtMTM2Niw2ICsxMzc3LDE3IEBACiAJCXJl
dHVybiBmYWxzZTsKIAl9CiAJLyoKKwkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoRXhwcmVzc2lv
bk1ldGhvZFJlZmVyZW5jZSkKKwkgKi8KKwlwdWJsaWMgYm9vbGVhbiB2aXNpdChFeHByZXNzaW9u
TWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJZ2V0Q2hpbGROb2RlKG5vZGUsIEV4cHJlc3Npb25N
ZXRob2RSZWZlcmVuY2UuRVhQUkVTU0lPTl9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOworCQl0aGlz
LnJlc3VsdC5hcHBlbmQoIjo6Iik7IC8vJE5PTi1OTFMtMSQKKwkJdmlzaXRMaXN0KG5vZGUsIEV4
cHJlc3Npb25NZXRob2RSZWZlcmVuY2UuVFlQRV9BUkdVTUVOVFNfUFJPUEVSVFksIFV0aWwuRU1Q
VFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignPCcpLCBTdHJpbmcudmFsdWVPZignPicpKTsKKwkJ
bm9kZS5nZXROYW1lKCkuYWNjZXB0KHRoaXMpOworCQlyZXR1cm4gZmFsc2U7CisJfQorCisJLyoK
IAkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoTWFya2VyQW5ub3RhdGlvbikKIAkgKiBAc2luY2Ug
My4wCiAJICovCkBAIC0xNDU5LDYgKzE0ODEsMzIgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAor
CS8qCisJICogQHNlZSBBU1RWaXNpdG9yI3Zpc2l0KFN1cGVyTWV0aG9kUmVmZXJlbmNlKQorCSAq
LworCXB1YmxpYyBib29sZWFuIHZpc2l0KFN1cGVyTWV0aG9kUmVmZXJlbmNlIG5vZGUpIHsKKwkJ
QVNUTm9kZSBxdWFsaWZpZXIgPSBnZXRDaGlsZE5vZGUobm9kZSwgU3VwZXJNZXRob2RSZWZlcmVu
Y2UuUVVBTElGSUVSX1BST1BFUlRZKTsKKwkJaWYgKHF1YWxpZmllciAhPSBudWxsKSB7CisJCQlx
dWFsaWZpZXIuYWNjZXB0KHRoaXMpOworCQkJdGhpcy5yZXN1bHQuYXBwZW5kKCcuJyk7CisJCX0K
KwkJdGhpcy5yZXN1bHQuYXBwZW5kKCJzdXBlciA6OiIpOyAvLyROT04tTkxTLTEkCisJCXZpc2l0
TGlzdChub2RlLCBTdXBlck1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9QRVJUWSwg
VXRpbC5FTVBUWV9TVFJJTkcsIFN0cmluZy52YWx1ZU9mKCc8JyksIFN0cmluZy52YWx1ZU9mKCc+
JykpOworCQlub2RlLmdldE5hbWUoKS5hY2NlcHQodGhpcyk7CisJCXJldHVybiBmYWxzZTsKKwl9
CisKKwkvKgorCSAqIEBzZWUgQVNUVmlzaXRvciN2aXNpdChUeXBlTWV0aG9kUmVmZXJlbmNlKQor
CSAqLworCXB1YmxpYyBib29sZWFuIHZpc2l0KFR5cGVNZXRob2RSZWZlcmVuY2Ugbm9kZSkgewor
CQlnZXRDaGlsZE5vZGUobm9kZSwgVHlwZU1ldGhvZFJlZmVyZW5jZS5UWVBFX1BST1BFUlRZKS5h
Y2NlcHQodGhpcyk7CisJCXRoaXMucmVzdWx0LmFwcGVuZCgiOjoiKTsgLy8kTk9OLU5MUy0xJAor
CQl2aXNpdExpc3Qobm9kZSwgVHlwZU1ldGhvZFJlZmVyZW5jZS5UWVBFX0FSR1VNRU5UU19QUk9Q
RVJUWSwgVXRpbC5FTVBUWV9TVFJJTkcsIFN0cmluZy52YWx1ZU9mKCc8JyksIFN0cmluZy52YWx1
ZU9mKCc+JykpOworCQlub2RlLmdldE5hbWUoKS5hY2NlcHQodGhpcyk7CisJCXJldHVybiBmYWxz
ZTsKKwl9CisKIAkvKiAobm9uLUphdmFkb2MpCiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuY29y
ZS5kb20uQVNUVmlzaXRvciN2aXNpdChvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uVHlwZVBhcmFt
ZXRlcikKIAkgKi8=
</data>

          </attachment>
      

    </bug>

</bugzilla>