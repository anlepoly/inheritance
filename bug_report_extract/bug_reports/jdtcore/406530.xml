<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>406530</bug_id>
          
          <creation_ts>2013-04-25 06:47:00 -0400</creation_ts>
          <short_desc>[code assist] propose keywords even if there is no prefix</short_desc>
          <delta_ts>2013-04-30 18:19:32 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>4.3 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dani Megert">daniel_megert</reporter>
          <assigned_to name="Dani Megert">daniel_megert</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>lars.vogel</cc>
    
    <cc>markus_keller</cc>
    
    <cc>shankhba</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2248328</commentid>
    <comment_count>0</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-04-25 06:47:17 -0400</bug_when>
    <thetext>We should propose the keywords even if there is no prefix. We already do this when outside a class but not when inside a class or method.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2248331</commentid>
    <comment_count>1</comment_count>
      <attachid>230116</attachid>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-04-25 06:50:22 -0400</bug_when>
    <thetext>Created attachment 230116
Fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2248334</commentid>
    <comment_count>2</comment_count>
    <who name="Lars Vogel">lars.vogel</who>
    <bug_when>2013-04-25 07:00:38 -0400</bug_when>
    <thetext>Thanks Dani, this is great! Thanks a bunch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2248463</commentid>
    <comment_count>3</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-04-25 10:15:31 -0400</bug_when>
    <thetext>The patch effectively makes CompletionOnKeyword#canCompleteEmptyToken() obsolete, undoing most of bug 96918. That&apos;s OK for me, but we need to remove the unused infrastructure as well.

There were test failures in org.eclipse.jdt.core.tests.model.CompletionTests#testCompletionMethodDeclaration5() and org.eclipse.jdt.core.tests.model.CompletionTests2#testBug392581().

The latter actually revealed another bug:

    @Override
    public int hashCode() {
        super. // complete here
        return 0;
    }

Content assist must not propose the &apos;new&apos; keyword here. This bug was already present before this fix if you completed after &apos;super.n&apos;.

Fixed these problems as well; all model tests green; released to master:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=20607cc9da90bd1294c224d1eff6327bec9954ac</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2248496</commentid>
    <comment_count>4</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-04-25 10:52:33 -0400</bug_when>
    <thetext>Thanks Markus!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250764</commentid>
    <comment_count>5</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2013-04-30 15:16:19 -0400</bug_when>
    <thetext>Verified for 3.7 M7 using  build I20130428-2000.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>230116</attachid>
            <date>2013-04-25 06:50:00 -0400</date>
            <delta_ts>2013-04-25 06:50:22 -0400</delta_ts>
            <desc>Fix</desc>
            <filename>eclipse.jdt.core.patch</filename>
            <type>text/plain</type>
            <size>7669</size>
            <attacher name="Dani Megert">daniel_megert</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpk
aWZmIC0tZ2l0IGNvZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3Qv
Q29tcGxldGlvbkVuZ2luZS5qYXZhIGNvZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvZGVhc3Npc3QvQ29tcGxldGlvbkVuZ2luZS5qYXZhCmluZGV4IDdhNjY3MzUuLjI1MGU0ZmIg
MTAwNjQ0Ci0tLSBjb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNzaXN0
L0NvbXBsZXRpb25FbmdpbmUuamF2YQorKysgY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29kZWFzc2lzdC9Db21wbGV0aW9uRW5naW5lLmphdmEKQEAgLTE4NjMsNyArMTg2Myw3
IEBACiAJCQkJCQkJaWYoIXRoaXMucmVxdWVzdG9yLmlzSWdub3JlZChDb21wbGV0aW9uUHJvcG9z
YWwuS0VZV09SRCkpIHsKIAkJCQkJCQkJc2V0U291cmNlQW5kVG9rZW5SYW5nZShpbXBvcnRSZWZl
cmVuY2Uuc291cmNlU3RhcnQsIGltcG9ydFJlZmVyZW5jZS5zb3VyY2VFbmQpOwogCQkJCQkJCQlD
b21wbGV0aW9uT25LZXl3b3JkIGtleXdvcmQgPSAoQ29tcGxldGlvbk9uS2V5d29yZClpbXBvcnRS
ZWZlcmVuY2U7Ci0JCQkJCQkJCWZpbmRLZXl3b3JkcyhrZXl3b3JkLmdldFRva2VuKCksIGtleXdv
cmQuZ2V0UG9zc2libGVLZXl3b3JkcygpLCB0cnVlLCBmYWxzZSwgcGFyc2VkVW5pdC5jdXJyZW50
UGFja2FnZSAhPSBudWxsKTsKKwkJCQkJCQkJZmluZEtleXdvcmRzKGtleXdvcmQuZ2V0VG9rZW4o
KSwga2V5d29yZC5nZXRQb3NzaWJsZUtleXdvcmRzKCksIGZhbHNlLCBwYXJzZWRVbml0LmN1cnJl
bnRQYWNrYWdlICE9IG51bGwpOwogCQkJCQkJCX0KIAkJCQkJCQlpZih0aGlzLm5vUHJvcG9zYWwg
JiYgdGhpcy5wcm9ibGVtICE9IG51bGwpIHsKIAkJCQkJCQkJdGhpcy5yZXF1ZXN0b3IuY29tcGxl
dGlvbkZhaWx1cmUodGhpcy5wcm9ibGVtKTsKQEAgLTI0MjUsNyArMjQyNSw3IEBACiAJcHJpdmF0
ZSB2b2lkIGNvbXBsZXRpb25PbktleXdvcmQoQVNUTm9kZSBhc3ROb2RlKSB7CiAJCWlmICghdGhp
cy5yZXF1ZXN0b3IuaXNJZ25vcmVkKENvbXBsZXRpb25Qcm9wb3NhbC5LRVlXT1JEKSkgewogCQkJ
Q29tcGxldGlvbk9uS2V5d29yZCBrZXl3b3JkID0gKENvbXBsZXRpb25PbktleXdvcmQpYXN0Tm9k
ZTsKLQkJCWZpbmRLZXl3b3JkcyhrZXl3b3JkLmdldFRva2VuKCksIGtleXdvcmQuZ2V0UG9zc2li
bGVLZXl3b3JkcygpLCBrZXl3b3JkLmNhbkNvbXBsZXRlRW1wdHlUb2tlbigpLCBmYWxzZSwgZmFs
c2UpOworCQkJZmluZEtleXdvcmRzKGtleXdvcmQuZ2V0VG9rZW4oKSwga2V5d29yZC5nZXRQb3Nz
aWJsZUtleXdvcmRzKCksIGZhbHNlLCBmYWxzZSk7CiAJCX0KIAl9CiAJCkBAIC0yNTc0LDcgKzI1
NzQsNyBAQAogCQl9IGVsc2UgewogCQkJaWYgKCFhY2Nlc3MuaXNJbnNpZGVBbm5vdGF0aW9uKSB7
CiAJCQkJaWYgKCF0aGlzLnJlcXVlc3Rvci5pc0lnbm9yZWQoQ29tcGxldGlvblByb3Bvc2FsLktF
WVdPUkQpKSB7Ci0JCQkJCWZpbmRLZXl3b3Jkcyh0aGlzLmNvbXBsZXRpb25Ub2tlbiwgbmV3IGNo
YXJbXVtde0tleXdvcmRzLk5FV30sIGZhbHNlLCBmYWxzZSwgZmFsc2UpOworCQkJCQlmaW5kS2V5
d29yZHModGhpcy5jb21wbGV0aW9uVG9rZW4sIG5ldyBjaGFyW11bXXtLZXl3b3Jkcy5ORVd9LCBm
YWxzZSwgZmFsc2UpOwogCQkJCX0KIAogCQkJCU9iamVjdFZlY3RvciBmaWVsZHNGb3VuZCA9IG5l
dyBPYmplY3RWZWN0b3IoKTsKQEAgLTMyMzAsNyArMzIzMCw3IEBACiAJCQlmaW5kVHlwZXNBbmRQ
YWNrYWdlcyh0aGlzLmNvbXBsZXRpb25Ub2tlbiwgc2NvcGUsIHRydWUsIGZhbHNlLCBuZXcgT2Jq
ZWN0VmVjdG9yKCkpOwogCQkJaWYgKCF0aGlzLnJlcXVlc3Rvci5pc0lnbm9yZWQoQ29tcGxldGlv
blByb3Bvc2FsLktFWVdPUkQpKSB7CiAJCQkJaWYgKHRoaXMuY29tcGxldGlvblRva2VuICE9IG51
bGwgJiYgdGhpcy5jb21wbGV0aW9uVG9rZW4ubGVuZ3RoICE9IDApIHsKLQkJCQkJZmluZEtleXdv
cmRzKHRoaXMuY29tcGxldGlvblRva2VuLCBzaW5nbGVOYW1lUmVmZXJlbmNlLnBvc3NpYmxlS2V5
d29yZHMsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOworCQkJCQlmaW5kS2V5d29yZHModGhpcy5jb21w
bGV0aW9uVG9rZW4sIHNpbmdsZU5hbWVSZWZlcmVuY2UucG9zc2libGVLZXl3b3JkcywgZmFsc2Us
IGZhbHNlKTsKIAkJCQl9IGVsc2UgewogCQkJCQlmaW5kVHJ1ZU9yRmFsc2VLZXl3b3JkcyhzaW5n
bGVOYW1lUmVmZXJlbmNlLnBvc3NpYmxlS2V5d29yZHMpOwogCQkJCX0KQEAgLTgwODgsNDIgKzgw
ODgsNDAgQEAKIAogCS8vIHdoYXQgYWJvdXQgb25EZW1hbmQgdHlwZXM/IElnbm9yZSB0aGVtIHNp
bmNlIGl0IGRvZXMgbm90IGhhcHBlbiEKIAkvLyBpbXBvcnQgcDEucDIuQS4qOwotCXByaXZhdGUg
dm9pZCBmaW5kS2V5d29yZHMoY2hhcltdIGtleXdvcmQsIGNoYXJbXVtdIGNob2ljZXMsIGJvb2xl
YW4gY2FuQ29tcGxldGVFbXB0eVRva2VuLCBib29sZWFuIHN0YXRpY0ZpZWxkc0FuZE1ldGhvZE9u
bHksIGJvb2xlYW4gaWdub3JlUGFja2FnZUtleXdvcmQpIHsKKwlwcml2YXRlIHZvaWQgZmluZEtl
eXdvcmRzKGNoYXJbXSBrZXl3b3JkLCBjaGFyW11bXSBjaG9pY2VzLCBib29sZWFuIHN0YXRpY0Zp
ZWxkc0FuZE1ldGhvZE9ubHksIGJvb2xlYW4gaWdub3JlUGFja2FnZUtleXdvcmQpIHsKIAkJaWYo
Y2hvaWNlcyA9PSBudWxsIHx8IGNob2ljZXMubGVuZ3RoID09IDApIHJldHVybjsKLQogCQlpbnQg
bGVuZ3RoID0ga2V5d29yZC5sZW5ndGg7Ci0JCWlmIChjYW5Db21wbGV0ZUVtcHR5VG9rZW4gfHwg
bGVuZ3RoID4gMCkKLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykK
LQkJCQlpZiAobGVuZ3RoIDw9IGNob2ljZXNbaV0ubGVuZ3RoCi0JCQkJCSYmIENoYXJPcGVyYXRp
b24ucHJlZml4RXF1YWxzKGtleXdvcmQsIGNob2ljZXNbaV0sIGZhbHNlIC8qIGlnbm9yZSBjYXNl
ICovCi0JCQkJKSl7Ci0JCQkJCWlmIChpZ25vcmVQYWNrYWdlS2V5d29yZCAmJiBDaGFyT3BlcmF0
aW9uLmVxdWFscyhjaG9pY2VzW2ldLCBLZXl3b3Jkcy5QQUNLQUdFKSkKLQkJCQkJCWNvbnRpbnVl
OwotCQkJCQlpbnQgcmVsZXZhbmNlID0gY29tcHV0ZUJhc2VSZWxldmFuY2UoKTsKLQkJCQkJcmVs
ZXZhbmNlICs9IGNvbXB1dGVSZWxldmFuY2VGb3JSZXNvbHV0aW9uKCk7Ci0JCQkJCXJlbGV2YW5j
ZSArPSBjb21wdXRlUmVsZXZhbmNlRm9ySW50ZXJlc3RpbmdQcm9wb3NhbCgpOwotCQkJCQlyZWxl
dmFuY2UgKz0gY29tcHV0ZVJlbGV2YW5jZUZvckNhc2VNYXRjaGluZyhrZXl3b3JkLCBjaG9pY2Vz
W2ldKTsKLQkJCQkJcmVsZXZhbmNlICs9IGNvbXB1dGVSZWxldmFuY2VGb3JSZXN0cmljdGlvbnMo
SUFjY2Vzc1J1bGUuS19BQ0NFU1NJQkxFKTsgLy8gbm8gYWNjZXNzIHJlc3RyaWN0aW9uIGZvciBr
ZXl3b3JkcwotCQkJCQlpZiAoc3RhdGljRmllbGRzQW5kTWV0aG9kT25seSAmJiB0aGlzLmluc2lk
ZVF1YWxpZmllZFJlZmVyZW5jZSkgcmVsZXZhbmNlICs9IFJfTk9OX0lOSEVSSVRFRDsKKwkJZm9y
IChpbnQgaSA9IDA7IGkgPCBjaG9pY2VzLmxlbmd0aDsgaSsrKQorCQkJaWYgKGxlbmd0aCA8PSBj
aG9pY2VzW2ldLmxlbmd0aAorCQkJJiYgQ2hhck9wZXJhdGlvbi5wcmVmaXhFcXVhbHMoa2V5d29y
ZCwgY2hvaWNlc1tpXSwgZmFsc2UgLyogaWdub3JlIGNhc2UgKi8KKwkJCQkJKSl7CisJCQkJaWYg
KGlnbm9yZVBhY2thZ2VLZXl3b3JkICYmIENoYXJPcGVyYXRpb24uZXF1YWxzKGNob2ljZXNbaV0s
IEtleXdvcmRzLlBBQ0tBR0UpKQorCQkJCQljb250aW51ZTsKKwkJCQlpbnQgcmVsZXZhbmNlID0g
Y29tcHV0ZUJhc2VSZWxldmFuY2UoKTsKKwkJCQlyZWxldmFuY2UgKz0gY29tcHV0ZVJlbGV2YW5j
ZUZvclJlc29sdXRpb24oKTsKKwkJCQlyZWxldmFuY2UgKz0gY29tcHV0ZVJlbGV2YW5jZUZvcklu
dGVyZXN0aW5nUHJvcG9zYWwoKTsKKwkJCQlyZWxldmFuY2UgKz0gY29tcHV0ZVJlbGV2YW5jZUZv
ckNhc2VNYXRjaGluZyhrZXl3b3JkLCBjaG9pY2VzW2ldKTsKKwkJCQlyZWxldmFuY2UgKz0gY29t
cHV0ZVJlbGV2YW5jZUZvclJlc3RyaWN0aW9ucyhJQWNjZXNzUnVsZS5LX0FDQ0VTU0lCTEUpOyAv
LyBubyBhY2Nlc3MgcmVzdHJpY3Rpb24gZm9yIGtleXdvcmRzCisJCQkJaWYgKHN0YXRpY0ZpZWxk
c0FuZE1ldGhvZE9ubHkgJiYgdGhpcy5pbnNpZGVRdWFsaWZpZWRSZWZlcmVuY2UpIHJlbGV2YW5j
ZSArPSBSX05PTl9JTkhFUklURUQ7CiAKLQkJCQkJaWYoQ2hhck9wZXJhdGlvbi5lcXVhbHMoY2hv
aWNlc1tpXSwgS2V5d29yZHMuVFJVRSkgfHwgQ2hhck9wZXJhdGlvbi5lcXVhbHMoY2hvaWNlc1tp
XSwgS2V5d29yZHMuRkFMU0UpKSB7Ci0JCQkJCQlyZWxldmFuY2UgKz0gY29tcHV0ZVJlbGV2YW5j
ZUZvckV4cGVjdGluZ1R5cGUoVHlwZUJpbmRpbmcuQk9PTEVBTik7Ci0JCQkJCQlyZWxldmFuY2Ug
Kz0gY29tcHV0ZVJlbGV2YW5jZUZvclF1YWxpZmljYXRpb24oZmFsc2UpOwotCQkJCQl9Ci0JCQkJ
CXRoaXMubm9Qcm9wb3NhbCA9IGZhbHNlOwotCQkJCQlpZighdGhpcy5yZXF1ZXN0b3IuaXNJZ25v
cmVkKENvbXBsZXRpb25Qcm9wb3NhbC5LRVlXT1JEKSkgewotCQkJCQkJSW50ZXJuYWxDb21wbGV0
aW9uUHJvcG9zYWwgcHJvcG9zYWwgPSAgY3JlYXRlUHJvcG9zYWwoQ29tcGxldGlvblByb3Bvc2Fs
LktFWVdPUkQsIHRoaXMuYWN0dWFsQ29tcGxldGlvblBvc2l0aW9uKTsKLQkJCQkJCXByb3Bvc2Fs
LnNldE5hbWUoY2hvaWNlc1tpXSk7Ci0JCQkJCQlwcm9wb3NhbC5zZXRDb21wbGV0aW9uKGNob2lj
ZXNbaV0pOwotCQkJCQkJcHJvcG9zYWwuc2V0UmVwbGFjZVJhbmdlKChjYW5Db21wbGV0ZUVtcHR5
VG9rZW4gJiYgKHRoaXMuc3RhcnRQb3NpdGlvbiA8IDApKSA/IDAgOiB0aGlzLnN0YXJ0UG9zaXRp
b24gLSB0aGlzLm9mZnNldCwgdGhpcy5lbmRQb3NpdGlvbiAtIHRoaXMub2Zmc2V0KTsKLQkJCQkJ
CXByb3Bvc2FsLnNldFRva2VuUmFuZ2UoKGNhbkNvbXBsZXRlRW1wdHlUb2tlbiAmJiAodGhpcy50
b2tlblN0YXJ0IDwgMCkpID8gMCA6IHRoaXMudG9rZW5TdGFydCAtIHRoaXMub2Zmc2V0LCB0aGlz
LnRva2VuRW5kIC0gdGhpcy5vZmZzZXQpOwotCQkJCQkJcHJvcG9zYWwuc2V0UmVsZXZhbmNlKHJl
bGV2YW5jZSk7Ci0JCQkJCQl0aGlzLnJlcXVlc3Rvci5hY2NlcHQocHJvcG9zYWwpOwotCQkJCQkJ
aWYoREVCVUcpIHsKLQkJCQkJCQl0aGlzLnByaW50RGVidWcocHJvcG9zYWwpOwotCQkJCQkJfQor
CQkJCWlmKENoYXJPcGVyYXRpb24uZXF1YWxzKGNob2ljZXNbaV0sIEtleXdvcmRzLlRSVUUpIHx8
IENoYXJPcGVyYXRpb24uZXF1YWxzKGNob2ljZXNbaV0sIEtleXdvcmRzLkZBTFNFKSkgeworCQkJ
CQlyZWxldmFuY2UgKz0gY29tcHV0ZVJlbGV2YW5jZUZvckV4cGVjdGluZ1R5cGUoVHlwZUJpbmRp
bmcuQk9PTEVBTik7CisJCQkJCXJlbGV2YW5jZSArPSBjb21wdXRlUmVsZXZhbmNlRm9yUXVhbGlm
aWNhdGlvbihmYWxzZSk7CisJCQkJfQorCQkJCXRoaXMubm9Qcm9wb3NhbCA9IGZhbHNlOworCQkJ
CWlmKCF0aGlzLnJlcXVlc3Rvci5pc0lnbm9yZWQoQ29tcGxldGlvblByb3Bvc2FsLktFWVdPUkQp
KSB7CisJCQkJCUludGVybmFsQ29tcGxldGlvblByb3Bvc2FsIHByb3Bvc2FsID0gIGNyZWF0ZVBy
b3Bvc2FsKENvbXBsZXRpb25Qcm9wb3NhbC5LRVlXT1JELCB0aGlzLmFjdHVhbENvbXBsZXRpb25Q
b3NpdGlvbik7CisJCQkJCXByb3Bvc2FsLnNldE5hbWUoY2hvaWNlc1tpXSk7CisJCQkJCXByb3Bv
c2FsLnNldENvbXBsZXRpb24oY2hvaWNlc1tpXSk7CisJCQkJCXByb3Bvc2FsLnNldFJlcGxhY2VS
YW5nZSgodGhpcy5zdGFydFBvc2l0aW9uIDwgMCkgPyAwIDogdGhpcy5zdGFydFBvc2l0aW9uIC0g
dGhpcy5vZmZzZXQsIHRoaXMuZW5kUG9zaXRpb24gLSB0aGlzLm9mZnNldCk7CisJCQkJCXByb3Bv
c2FsLnNldFRva2VuUmFuZ2UoKHRoaXMudG9rZW5TdGFydCA8IDApID8gMCA6IHRoaXMudG9rZW5T
dGFydCAtIHRoaXMub2Zmc2V0LCB0aGlzLnRva2VuRW5kIC0gdGhpcy5vZmZzZXQpOworCQkJCQlw
cm9wb3NhbC5zZXRSZWxldmFuY2UocmVsZXZhbmNlKTsKKwkJCQkJdGhpcy5yZXF1ZXN0b3IuYWNj
ZXB0KHByb3Bvc2FsKTsKKwkJCQkJaWYoREVCVUcpIHsKKwkJCQkJCXRoaXMucHJpbnREZWJ1Zyhw
cm9wb3NhbCk7CiAJCQkJCX0KIAkJCQl9CisJCQl9CiAJfQogCXByaXZhdGUgdm9pZCBmaW5kS2V5
d29yZHNGb3JNZW1iZXIoY2hhcltdIHRva2VuLCBpbnQgbW9kaWZpZXJzKSB7CiAJCWNoYXJbXVtd
IGtleXdvcmRzID0gbmV3IGNoYXJbS2V5d29yZHMuQ09VTlRdW107CkBAIC04MjE2LDcgKzgyMTQs
NyBAQAogCQl9CiAJCVN5c3RlbS5hcnJheWNvcHkoa2V5d29yZHMsIDAsIGtleXdvcmRzID0gbmV3
IGNoYXJbY291bnRdW10sIDAsIGNvdW50KTsKIAotCQlmaW5kS2V5d29yZHModG9rZW4sIGtleXdv
cmRzLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsKKwkJZmluZEtleXdvcmRzKHRva2VuLCBrZXl3b3Jk
cywgZmFsc2UsIGZhbHNlKTsKIAl9CiAJcHJpdmF0ZSB2b2lkIGZpbmRMYWJlbHMoY2hhcltdIGxh
YmVsLCBjaGFyW11bXSBjaG9pY2VzKSB7CiAJCWlmKGNob2ljZXMgPT0gbnVsbCB8fCBjaG9pY2Vz
Lmxlbmd0aCA9PSAwKSByZXR1cm47CkBAIC05MjEyLDcgKzkyMTAsNyBAQAogCQkJCSgoc2NvcGUg
aW5zdGFuY2VvZiBNZXRob2RTY29wZSAmJiAhKChNZXRob2RTY29wZSlzY29wZSkuaXNTdGF0aWMp
CiAJCQkJfHwgKChtZXRob2RTY29wZSA9IHNjb3BlLmVuY2xvc2luZ01ldGhvZFNjb3BlKCkpICE9
IG51bGwgJiYgIW1ldGhvZFNjb3BlLmlzU3RhdGljKSkpIHsKIAkJCWlmICh0b2tlbi5sZW5ndGgg
PiAwKSB7Ci0JCQkJZmluZEtleXdvcmRzKHRva2VuLCBuZXcgY2hhcltdW117S2V5d29yZHMuVEhJ
U30sIGZhbHNlLCB0cnVlLCBmYWxzZSk7CisJCQkJZmluZEtleXdvcmRzKHRva2VuLCBuZXcgY2hh
cltdW117S2V5d29yZHMuVEhJU30sIHRydWUsIGZhbHNlKTsKIAkJCX0gZWxzZSB7CiAJCQkJaW50
IHJlbGV2YW5jZSA9IGNvbXB1dGVCYXNlUmVsZXZhbmNlKCk7CiAJCQkJcmVsZXZhbmNlICs9IGNv
bXB1dGVSZWxldmFuY2VGb3JSZXNvbHV0aW9uKCk7CkBAIC0xMDUzMSw5ICsxMDUyOSw5IEBACiAJ
CQkJaWYgKHRoaXMuYXNzaXN0Tm9kZUluSmF2YWRvYyA9PSAwIHx8ICh0aGlzLmFzc2lzdE5vZGVJ
bkphdmFkb2MgJiBDb21wbGV0aW9uT25KYXZhZG9jLkJBU0VfVFlQRVMpICE9IDApIHsKIAkJCQkJ
aWYgKHByb3Bvc2VCYXNlVHlwZXMpIHsKIAkJCQkJCWlmIChwcm9wb3NlVm9pZFR5cGUpIHsKLQkJ
CQkJCQlmaW5kS2V5d29yZHModG9rZW4sIEJBU0VfVFlQRV9OQU1FUywgZmFsc2UsIGZhbHNlLCBm
YWxzZSk7CisJCQkJCQkJZmluZEtleXdvcmRzKHRva2VuLCBCQVNFX1RZUEVfTkFNRVMsIGZhbHNl
LCBmYWxzZSk7CiAJCQkJCQl9IGVsc2UgewotCQkJCQkJCWZpbmRLZXl3b3Jkcyh0b2tlbiwgQkFT
RV9UWVBFX05BTUVTX1dJVEhPVVRfVk9JRCwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CisJCQkJCQkJ
ZmluZEtleXdvcmRzKHRva2VuLCBCQVNFX1RZUEVfTkFNRVNfV0lUSE9VVF9WT0lELCBmYWxzZSwg
ZmFsc2UpOwogCQkJCQkJfQogCQkJCQl9CiAJCQkJfQ==
</data>

          </attachment>
      

    </bug>

</bugzilla>