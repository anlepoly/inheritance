<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>402892</bug_id>
          
          <creation_ts>2013-03-11 09:25:00 -0400</creation_ts>
          <short_desc>[1.8][formatter] Code formatter should understand type annotations</short_desc>
          <delta_ts>2013-03-20 06:16:08 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>400830</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Jesper Moller">jesper</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>manpalat</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="56114"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2228867</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-11 09:25:23 -0400</bug_when>
    <thetext>BETA_JAVA8:

We need formatter support for JSR308 style annotations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2230138</commentid>
    <comment_count>1</comment_count>
      <attachid>228325</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-13 02:42:29 -0400</bug_when>
    <thetext>Created attachment 228325
Jesper&apos;s patch from bug 400830 - 335 work

Patch under review.

This patch is missing a file FormatterJSR308AnnotationsTests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2230201</commentid>
    <comment_count>2</comment_count>
      <attachid>228328</attachid>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-03-13 05:11:16 -0400</bug_when>
    <thetext>Created attachment 228328
&quot;Total&quot; patch, where I&apos;d renamed the test class to Formatter18Tests</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2230202</commentid>
    <comment_count>3</comment_count>
      <attachid>228329</attachid>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-03-13 05:12:24 -0400</bug_when>
    <thetext>Created attachment 228329
Patch for all 1.8 formatter work

This is an older patch - some of this is partially committed in master</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231093</commentid>
    <comment_count>4</comment_count>
      <attachid>228406</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-14 04:53:50 -0400</bug_when>
    <thetext>Created attachment 228406
Jesper&apos;s patch for format support for 308 annotations - up to date</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231427</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-14 12:18:23 -0400</bug_when>
    <thetext>Jesper, we need a statement from you confirming you authored the code and have 
the rights to donate the code to Eclipse under the EPL for inclusion in 
future Eclipse releases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231643</commentid>
    <comment_count>6</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-03-14 18:10:02 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; Jesper, we need a statement from you confirming you authored the code and have
&gt; the rights to donate the code to Eclipse under the EPL for inclusion in
&gt; future Eclipse releases.
Sure: 

I authored 100% of the patches I&apos;m contributing.
I have the rights to contribute this to Eclipse?
I am willing to license this as EPL as stated in the file header comments I&apos;m uploaded.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231644</commentid>
    <comment_count>7</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-03-14 18:10:35 -0400</bug_when>
    <thetext>(oops, typo questionmark in clause 2)

I authored 100% of the patches I&apos;m contributing.
I have the rights to contribute this to Eclipse.
I am willing to license this as EPL as stated in the file header comments I&apos;m uploaded.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231727</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-15 01:39:06 -0400</bug_when>
    <thetext>To simplify the review and the CQ process, I am releasing those files
whose provenance can be clearly ascertained/established to be eclipse 
JDT/Core source base itself. 

A large part of the patch consists of data files which show pre-format
and post-format program contents - these are borrowed from existing 
eclipse source code base itself as documented below:

+------------------------------------+------------------------------------+
 New file created by the patch       |- Derived from existing file/method |
+------------------------------------+------------------------------------+
FormatterJSR308/test000/I_*.java       GrammarCoverageTests308.test023
FormatterJSR308/test001/X_*.java       GrammarCoverageTests308.test024
FormatterJSR308/test002/X_*.java       GrammarCoverageTests308.test001
FormatterJSR308/test003/X_*.java       GrammarCoverageTests308.test003
FormatterJSR308/test004/X_*.java       GrammarCoverageTests308.test006
FormatterJSR308/test005/X_*.java       GrammarCoverageTests308.test005
FormatterJSR308/test006/X_*.java       GrammarCoverageTests308.test003
FormatterJSR308/test007/X_*.java       GrammarCoverageTests308.test004
FormatterJSR308/test008/X_*.java       GrammarCoverageTests308.test007
FormatterJSR308/test009/X_*.java       GrammarCoverageTests308.test008
FormatterJSR308/test010/X_*.java       GrammarCoverageTests308.test000
FormatterJSR308/test011/X_*.java       GrammarCoverageTests308.test009
FormatterJSR308/test012/X_*.java       GrammarCoverageTests308.test010
FormatterJSR308/test013/X_*.java       GrammarCoverageTests308.test011
FormatterJSR308/test014/X_*.java       GrammarCoverageTests308.test012
FormatterJSR308/test015/X_*.java       GrammarCoverageTests308.test013
FormatterJSR308/test016/X_*.java       GrammarCoverageTests308.test014
FormatterJSR308/test017/X_*.java       GrammarCoverageTests308.test015
FormatterJSR308/test018/X_*.java       GrammarCoverageTests308.test016
FormatterJSR308/test019/X_*.java       GrammarCoverageTests308.test017
FormatterJSR308/test020/X_*.java       GrammarCoverageTests308.test018
FormatterJSR308/test021/X_*.java       GrammarCoverageTests308.test019
FormatterJSR308/test022/X_*.java       GrammarCoverageTests308.test020
FormatterJSR308/test023/X_*.java       GrammarCoverageTests308.test021
FormatterJSR308/test024/X_*.java       GrammarCoverageTests308.test022
FormatterJSR308/test025/X_*.java       GrammarCoverageTests308.test025
FormatterJSR308/test026/X_*.java       GrammarCoverageTests308.test026
FormatterJSR308/test027/X_*.java       GrammarCoverageTests308.test027
FormatterJSR308/test028/X_*.java       GrammarCoverageTests308.test028
FormatterJSR308/test029/X_*.java       GrammarCoverageTests308.test029
FormatterJSR308/test030/X_*.java       GrammarCoverageTests308.test030
FormatterJSR308/test031/X_*.java       GrammarCoverageTests308.test031
FormatterJSR308/test032/X_*.java       GrammarCoverageTests308.test032
FormatterJSR308/test033/X_*.java       GrammarCoverageTests308.test033
FormatterJSR308/test034/X_*.java       GrammarCoverageTests308.test034
FormatterJSR308/test035/X_*.java       GrammarCoverageTests308.test035
FormatterJSR308/test036/X_*.java       GrammarCoverageTests308.test036
FormatterJSR308/test037/X_*.java       GrammarCoverageTests308.test037
FormatterJSR308/test038/X_*.java       GrammarCoverageTests308.test038
FormatterJSR308/test039/X_*.java       GrammarCoverageTests308.test039

Released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=fe98ddbed4cd1f8bb449a78291ed05ed04f18196</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231729</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-15 01:44:06 -0400</bug_when>
    <thetext>I also verified that the formatting looks reasonable for all the tests.
All but FormatterJSR308/test023 look OK. As part of review process of the
code changes, I&apos;ll see why we end up with that kind of formatting and raise
follow up bugs if needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231732</commentid>
    <comment_count>10</comment_count>
      <attachid>228457</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-15 02:08:20 -0400</bug_when>
    <thetext>Created attachment 228457
Jesper&apos;s patch for formatting 308 style annotations.

This is the portion that needs review and approval for release.

Jesper, the lambda &amp; method reference tests are missing type annotations,
so they are not really testing that formatter works fine with 308 + 335.
Formatter work for 335 already has tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231756</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-15 03:43:02 -0400</bug_when>
    <thetext>Oops. By mistake I ended up pushing the unreviewed/unapproved changes via
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=afe1aa1e23ce83b573f50388f1a50d564fe4b851.

This has been reverted via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=3e03e3984540d3907fa7739b419f89dad9725944</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2232615</commentid>
    <comment_count>12</comment_count>
      <attachid>228546</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-17 15:55:15 -0400</bug_when>
    <thetext>Created attachment 228546
Jesper&apos;s patch with corrections from code review.

I finished one round of review and will look through the patch one
more time, before the CQ process.

Overall, the work looks solid - Thanks a lot.

Here are the comments/corrections I incorporated:

(1) formatInlineAnnotations: else {} is unnecessary as if returns.
(2) formatInlineAnnotations: extracted length of annotations array to hoist 
loop invariant computation.
(3) isNextTokenPunctuation: Eliminated comment processing. This is material 
for isClosingGenericToken from which this method seems to be borrowed, but
immaterial here.
(4) formatQualifiedTypeReference: extracted length of tokens into a local.
(5) For consistency&apos;s sake, let us use if (!condition) and not 
if (! condition)
(6) getDimensions: will not accept annotations with qualified names. 
I introduced a new method skipPastTypeAnnotations to handle this case.
(7) Why would PSTR&apos;s leading dimension formatting call to 
formatLeadingDimensions pass false for spaceBefore annotations while PQTR 
pass true to it ? I have uniformly made it into true - we may even 
considering removing this parameter ?
(8) Visit(ParameterizedQualifiedTypeReference, ...) has two calls to 
formatInlineAnnotations once outside the loop and once inside, folded these 
into one.
(9) formatExtraDimensions: pushed the computation of anchor into if 
(extraDimensions != 0)
(10) Varargs annotation printing is handled incorrectly. It should be handled 
in visit(Argument, ...) and not in visit(ArrayTypeReference) as otherwise 
we won&apos;t format this snippet correctly:

public class X {
	void foo(List&lt;String&gt; @Marker ... ls) {}
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2232684</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-17 22:51:37 -0400</bug_when>
    <thetext>The following tests fail with this patch:
org.eclipse.jdt.core.tests.model.JavaSearchBugsTests.testBug185452()
org.eclipse.jdt.core.tests.model.SearchTests.testChangeClasspath2()
org.eclipse.jdt.core.tests.model.ResolveTests2.testBug227822a()
org.eclipse.jdt.core.tests.model.WorkingCopyOwnerTests.testSearch2()

However, if I run EunModelTests of which these are a part, all tests pass.
There is some flakiness in the suites.

Jesper, does anything look obvious ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2232685</commentid>
    <comment_count>14</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-17 22:52:22 -0400</bug_when>
    <thetext>(In reply to comment #12)

&gt; Here are the comments/corrections I incorporated:

Jesper, please look through these changes and let me know if something is
amiss. TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2232731</commentid>
    <comment_count>15</comment_count>
    <who name="Jesper Moller">jesper</who>
    <bug_when>2013-03-18 05:06:26 -0400</bug_when>
    <thetext>(In reply to comment #14)
&gt; Jesper, please look through these changes and let me know if something is
&gt; amiss. TIA.
Ok, I will investigate the test failures and your notes, something should be ready for you tomorrow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2232748</commentid>
    <comment_count>16</comment_count>
      <attachid>228555</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-18 05:41:20 -0400</bug_when>
    <thetext>Created attachment 228555
Jesper&apos;s patch in final form after 2 rounds of review

I completed another round of review and in this round, fixed the
following issues:

(1) Adjusted various formatting/indenting issues.
(2) Fixed a bug in (my implementation) of skipPastTypeAnnotations.
(3) Removed various redundant bound checks. It is guaranteed that in
a QTR, annotations [][] will be either null or as long as the tokens.length.
(An element may be null, but the cell for its storage will exist)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2232749</commentid>
    <comment_count>17</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-18 05:43:14 -0400</bug_when>
    <thetext>Patch from comment#16 looks good to go. Review is complete. Will initiate
the CQ process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2233763</commentid>
    <comment_count>18</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-19 11:53:48 -0400</bug_when>
    <thetext>Contribution review process complete and approvals are in place.
Fix and tests released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=9617178877607b049b1a7c4f92c93a8d11facd28.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234126</commentid>
    <comment_count>19</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-20 06:16:08 -0400</bug_when>
    <thetext>(In reply to comment #13)
&gt; The following tests fail with this patch:
&gt; org.eclipse.jdt.core.tests.model.JavaSearchBugsTests.testBug185452()
&gt; org.eclipse.jdt.core.tests.model.SearchTests.testChangeClasspath2()
&gt; org.eclipse.jdt.core.tests.model.ResolveTests2.testBug227822a()
&gt; org.eclipse.jdt.core.tests.model.WorkingCopyOwnerTests.testSearch2()
&gt; 
&gt; However, if I run EunModelTests of which these are a part, all tests pass.
&gt; There is some flakiness in the suites.
&gt; 
&gt; Jesper, does anything look obvious ?

Fixed with: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=5bca51a3a4b6130db814e9f9c75f049af2eaf04f</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>228325</attachid>
            <date>2013-03-13 02:42:00 -0400</date>
            <delta_ts>2013-03-14 04:51:31 -0400</delta_ts>
            <desc>Jesper&apos;s patch from bug 400830 - 335 work</desc>
            <filename>308-format-support.patch</filename>
            <type>application/octet-stream</type>
            <size>73503</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkZv
cm1hdHRlclRlc3RzLmphdmEKaW5kZXggMjBkYTRkOS4uMmM0Y2ZmMiAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL1J1bkZvcm1hdHRlclRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkZvcm1hdHRlclRlc3Rz
LmphdmEKQEAgLTM3LDYgKzM3LDcgQEAKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckNvbW1l
bnRzQnVnc1Rlc3QuY2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVyQ29tbWVudHNU
ZXN0cy5jbGFzcyk7CiAJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMzVUZXN0cy5jbGFz
cyk7CisJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcyk7CiAJCVRF
U1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJDb21tZW50c0NsZWFyQmxhbmtMaW5lc1Rlc3RzLmNsYXNz
KTsKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc1Rlc3Rz
LmNsYXNzKTsKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFn
c0Rlc2NyaXB0aW9uVGVzdHMuY2xhc3MpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC8uY2xhc3NwYXRoIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC8u
Y2xhc3NwYXRoCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmU0YWM2MTEKLS0t
IC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySnNyMzA4Ly5jbGFzc3BhdGgKQEAgLTAsMCArMSw2IEBACis8P3htbCB2ZXJz
aW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/PgorPGNsYXNzcGF0aD4KKyAgICA8Y2xhc3NwYXRo
ZW50cnkga2luZD0ic3JjIiBwYXRoPSIiLz4KKyAgICA8Y2xhc3NwYXRoZW50cnkga2luZD0idmFy
IiBwYXRoPSJKQ0wxOF9MSUIiIHNvdXJjZXBhdGg9IkpDTDE4X1NSQyIgcm9vdHBhdGg9IkpDTF9T
UkMxOFJPT1QiLz4KKyAgICA8Y2xhc3NwYXRoZW50cnkga2luZD0ib3V0cHV0IiBwYXRoPSJiaW4i
Lz4KKzwvY2xhc3NwYXRoPgpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3Iz
MDgvLnByb2plY3QgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySnNyMzA4Ly5wcm9qZWN0Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLmFhZDJlYmIKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4Ly5wcm9qZWN0CkBAIC0wLDAgKzEsMTcg
QEAKKzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+Cis8cHJvamVjdERlc2Ny
aXB0aW9uPgorCTxuYW1lPkZvcm1hdHRlckpzcjMwODwvbmFtZT4KKwk8Y29tbWVudD48L2NvbW1l
bnQ+CisJPHByb2plY3RzPgorCTwvcHJvamVjdHM+CisJPGJ1aWxkU3BlYz4KKwkJPGJ1aWxkQ29t
bWFuZD4KKwkJCTxuYW1lPm9yZy5lY2xpcHNlLmpkdC5jb3JlLmphdmFidWlsZGVyPC9uYW1lPgor
CQkJPGFyZ3VtZW50cz4KKwkJCTwvYXJndW1lbnRzPgorCQk8L2J1aWxkQ29tbWFuZD4KKwk8L2J1
aWxkU3BlYz4KKwk8bmF0dXJlcz4KKwkJPG5hdHVyZT5vcmcuZWNsaXBzZS5qZHQuY29yZS5qYXZh
bmF0dXJlPC9uYXR1cmU+CisJPC9uYXR1cmVzPgorPC9wcm9qZWN0RGVzY3JpcHRpb24+CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMDAvSV9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAwL0lfaW4uamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4wNGM3YzhhCi0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDAwL0lfaW4uamF2YQpAQCAtMCwwICsxLDEyIEBACitwdWJsaWMgaW50ZXJmYWNlIEk8
VSBleHRlbmRzIEo8PyBleHRlbmRzIEk8VT4+PiB7Cit9CitpbnRlcmZhY2UgSjxUIGV4dGVuZHMg
STw/IGV4dGVuZHMgSjxUPj4+IHsKK30KK2NsYXNzIENJPFUgZXh0ZW5kcyBDSjxULCBVPiAmIEBN
YXJrZXIgSjxATWFya2VyIFQ+LAorCQkJVCBleHRlbmRzIENJPFUsIFQ+ICYgQE1hcmtlciBJPFU+
PgorCWltcGxlbWVudHMgSTxVPiB7Cit9CitjbGFzcyBDSjxUIGV4dGVuZHMgQ0k8VSwgVD4gJiBA
TWFya2VyIEk8QE1hcmtlciBVPiwKKwkJCVUgZXh0ZW5kcyBDSjxULCBVPiAmIEo8VD4+CisJaW1w
bGVtZW50cyBKPFQ+IHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwMC9JX291dC5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90
ZXN0MDAwL0lfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMjJm
NTYwNAotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwMC9JX291dC5qYXZhCkBAIC0wLDAgKzEs
MTMgQEAKK3B1YmxpYyBpbnRlcmZhY2UgSTxVIGV4dGVuZHMgSjw/IGV4dGVuZHMgSTxVPj4+IHsK
K30KKworaW50ZXJmYWNlIEo8VCBleHRlbmRzIEk8PyBleHRlbmRzIEo8VD4+PiB7Cit9CisKK2Ns
YXNzIENJPFUgZXh0ZW5kcyBDSjxULCBVPiAmIEBNYXJrZXIgSjxATWFya2VyIFQ+LCBUIGV4dGVu
ZHMgQ0k8VSwgVD4gJiBATWFya2VyIEk8VT4+CisJCWltcGxlbWVudHMgSTxVPiB7Cit9CisKK2Ns
YXNzIENKPFQgZXh0ZW5kcyBDSTxVLCBUPiAmIEBNYXJrZXIgSTxATWFya2VyIFU+LCBVIGV4dGVu
ZHMgQ0o8VCwgVT4gJiBKPFQ+PgorCQlpbXBsZW1lbnRzIEo8VD4geworfQpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDAxL1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwMS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMC4uYTI3ZmQ5MgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAw
MS9YX2luLmphdmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWDxFPiB7CisgIGNsYXNz
IFkgeworICAgIEUgZTsKKyAgICBFIGdldE90aGVyRWxlbWVudChPYmplY3Qgb3RoZXIpIHsKKyAg
ICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgQE1hcmtlciBYPD8+LlkpKSB7fTsKKyAgICAgIHJl
dHVybiBudWxsOworICAgIH0KKyAgfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAxL1hfb3V0Lmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SnNyMzA4L3Rlc3QwMDEvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwLi5hMjgzYjg3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAxL1hfb3V0LmphdmEKQEAg
LTAsMCArMSwxMiBAQAorcHVibGljIGNsYXNzIFg8RT4geworCWNsYXNzIFkgeworCQlFIGU7CisK
KwkJRSBnZXRPdGhlckVsZW1lbnQoT2JqZWN0IG90aGVyKSB7CisJCQlpZiAoIShvdGhlciBpbnN0
YW5jZW9mIEBNYXJrZXIgWDw/Pi5ZKSkgeworCQkJfQorCQkJOworCQkJcmV0dXJuIG51bGw7CisJ
CX0KKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDIvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAyL1hf
aW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5iOWZkY2QyCi0tLSAv
ZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAyL1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1Ymxp
YyBjbGFzcyBYIHsKKyAgICBATWFya2VyIGludCB4OworICAgIFpvcmsgejsKK30KK0BqYXZhLmxh
bmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZ
UEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIge30KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAw
Mi9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAyL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uZGE5YWQ1MQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwMi9YX291
dC5qYXZhCkBAIC0wLDAgKzEsOSBAQAorcHVibGljIGNsYXNzIFggeworCUBNYXJrZXIKKwlpbnQg
eDsKKwlab3JrIHo7Cit9CisKK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtl
ciB7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDMvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDAzL1hfaW4u
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4zM2E5OTZmCi0tLSAvZGV2
L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpzcjMwOC90ZXN0MDAzL1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBj
bGFzcyBYIHsKKyAgICBATWFya2VyIDxUPiBpbnQgeCgpIHsgcmV0dXJuIDEwOyB9OworICAgIFpv
cmsgejsKK30KK2ludGVyZmFjZSBab3JrIHt9CitAaW50ZXJmYWNlIE1hcmtlciB7fQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpzcjMwOC90ZXN0MDAzL1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDMvWF9vdXQuamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kMDI0Mjc3Ci0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDAzL1hfb3V0LmphdmEKQEAgLTAsMCArMSwxNCBAQAorcHVibGljIGNsYXNzIFggewor
CUBNYXJrZXIKKwk8VD4gaW50IHgoKSB7CisJCXJldHVybiAxMDsKKwl9OworCisJWm9yayB6Owor
fQorCitpbnRlcmZhY2UgWm9yayB7Cit9CisKK0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0
ZXJKc3IzMDgvdGVzdDAwNC9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDQvWF9pbi5qYXZhCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmNmZjM4ODQKLS0tIC9kZXYvbnVsbAorKysgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4
L3Rlc3QwMDQvWF9pbi5qYXZhCkBAIC0wLDAgKzEsOCBAQAorcHVibGljIGNsYXNzIFggeworICAg
IGludCB4KEBNYXJrZXIxIGludCBbXSBATWFya2VyMiAuLi4gcCkgeyByZXR1cm4gMTA7IH07Cisg
ICAgWm9yayB6OworfQoraW50ZXJmYWNlIFpvcmsge30KK0BpbnRlcmZhY2UgTWFya2VyMSB7fQor
QGludGVyZmFjZSBNYXJrZXIyIHt9CisKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwNC9YX291dC5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpz
cjMwOC90ZXN0MDA0L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MC4uM2JmMzg1MwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwNC9YX291dC5qYXZhCkBAIC0w
LDAgKzEsMTYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlpbnQgeChATWFya2VyMSBpbnRbXSBATWFy
a2VyMi4uLiBwKSB7CisJCXJldHVybiAxMDsKKwl9OworCisJWm9yayB6OworfQorCitpbnRlcmZh
Y2UgWm9yayB7Cit9CisKK0BpbnRlcmZhY2UgTWFya2VyMSB7Cit9CisKK0BpbnRlcmZhY2UgTWFy
a2VyMiB7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDUvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDA1L1hf
aW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5iNDUyOWRiCi0tLSAv
ZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpzcjMwOC90ZXN0MDA1L1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1Ymxp
YyBjbGFzcyBYIHsKKyAgICBpbnQgeChATWFya2VyIGludCAuLi4gcCkgeyByZXR1cm4gMTA7IH07
CisgICAgWm9yayB6OworfQorQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCAoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtl
ciB7fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDA1L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDUvWF9vdXQu
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5lYmMxOWEzCi0tLSAvZGV2
L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpzcjMwOC90ZXN0MDA1L1hfb3V0LmphdmEKQEAgLTAsMCArMSwxMSBAQAorcHVibGlj
IGNsYXNzIFggeworCWludCB4KEBNYXJrZXIgaW50Li4uIHApIHsKKwkJcmV0dXJuIDEwOworCX07
CisKKwlab3JrIHo7Cit9CisKK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQoamF2YS5sYW5n
LmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtl
ciB7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDYvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDA2L1hfaW4u
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4wYjQzZTk2Ci0tLSAvZGV2
L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpzcjMwOC90ZXN0MDA2L1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBj
bGFzcyBYIHsKKyAgICBATWFya2VyIGludCB4KCkgeyByZXR1cm4gMTA7IH07CisgICAgWm9yayB6
OworfQorQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24u
RWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtlciB7fQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpzcjMwOC90ZXN0MDA2L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDYvWF9vdXQuamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43NzE4OGM3Ci0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDA2L1hfb3V0LmphdmEKQEAgLTAsMCArMSwxMiBAQAorcHVibGljIGNsYXNzIFggewor
CUBNYXJrZXIKKwlpbnQgeCgpIHsKKwkJcmV0dXJuIDEwOworCX07CisKKwlab3JrIHo7Cit9CisK
K0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtlciB7Cit9CmRpZmYgLS1naXQg
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNy
MzA4L3Rlc3QwMDcvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
d29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDA3L1hfaW4uamF2YQpuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwLi5kN2Q1YzZiCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0
MDA3L1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKyAgICBpbnQg
eChATWFya2VyIGludCBwKSB7IHJldHVybiAxMDsgfTsKKyAgICBab3JrIHo7Cit9CitAamF2YS5s
YW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHt9CmRpZmYgLS1naXQgYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3Qw
MDcvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwNy9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLjJkZTFkN2EKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDcvWF9v
dXQuamF2YQpAQCAtMCwwICsxLDExIEBACitwdWJsaWMgY2xhc3MgWCB7CisJaW50IHgoQE1hcmtl
ciBpbnQgcCkgeworCQlyZXR1cm4gMTA7CisJfTsKKworCVpvcmsgejsKK30KKworQGphdmEubGFu
Zy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBF
X1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAw
OC9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySnNyMzA4L3Rlc3QwMDgvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLmM4MTQyYjgKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDgvWF9pbi5q
YXZhCkBAIC0wLDAgKzEsOSBAQAorcHVibGljIGNsYXNzIFggeworICAgIGludCB4KCkgeworICAg
ICAgICB0cnkgeworICAgICAgICB9IGNhdGNoIChATWFya2VyIE51bGxQb2ludGVyRXhjZXB0aW9u
IHwgQE1hcmtlciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24gZSkgeworICAgICAgICB9
CisgICAgICAgIHJldHVybiAxMDsKKyAgICB9CisgICAgWm9yayB6OworfQpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDA4L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDgvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwLi5jOTk0M2JkCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0
MDA4L1hfb3V0LmphdmEKQEAgLTAsMCArMSwxMSBAQAorcHVibGljIGNsYXNzIFggeworCWludCB4
KCkgeworCQl0cnkgeworCQl9IGNhdGNoIChATWFya2VyIE51bGxQb2ludGVyRXhjZXB0aW9uCisJ
CQkJfCBATWFya2VyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiBlKSB7CisJCX0KKwkJ
cmV0dXJuIDEwOworCX0KKworCVpvcmsgejsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwOS9YX2lu
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMDkvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLmJlMGI2YTQKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMDkvWF9pbi5qYXZhCkBA
IC0wLDAgKzEsMTEgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKyAgICBpbnQgeCgpIHsKKyAgICAgICAg
QE1hcmtlciBpbnQgcDsKKyAgICAgICAgZmluYWwgQE1hcmtlciBpbnQgcTsKKyAgICAgICAgQE1h
cmtlciBmaW5hbCBpbnQgcjsKKyAgICAgICAgcmV0dXJuIDEwOworICAgIH0KKyAgICBab3JrIHo7
Cit9CitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5F
bGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHt9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SnNyMzA4L3Rlc3QwMDkvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAwOS9YX291dC5qYXZhCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjAyMWMwODUKLS0tIC9kZXYvbnVsbAorKysgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4
L3Rlc3QwMDkvWF9vdXQuamF2YQpAQCAtMCwwICsxLDE3IEBACitwdWJsaWMgY2xhc3MgWCB7CisJ
aW50IHgoKSB7CisJCUBNYXJrZXIKKwkJaW50IHA7CisJCWZpbmFsIEBNYXJrZXIKKwkJaW50IHE7
CisJCUBNYXJrZXIKKwkJZmluYWwgaW50IHI7CisJCXJldHVybiAxMDsKKwl9CisKKwlab3JrIHo7
Cit9CisKK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQoamF2YS5sYW5nLmFubm90YXRpb24u
RWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtlciB7Cit9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMTAvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEwL1hfaW4uamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi44YjQ2ZTRmCi0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDEwL1hfaW4uamF2YQpAQCAtMCwwICsxLDIgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVu
ZHMgQE1hcmtlciBAU2luZ2xlTWVtYmVyKDApIEBOb3JtYWwoVmFsdWUgPSAwKSBPYmplY3Qgewor
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEwL1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTAvWF9vdXQuamF2
YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi44YjQ2ZTRmCi0tLSAvZGV2L251
bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpzcjMwOC90ZXN0MDEwL1hfb3V0LmphdmEKQEAgLTAsMCArMSwyIEBACitwdWJsaWMgY2xh
c3MgWCBleHRlbmRzIEBNYXJrZXIgQFNpbmdsZU1lbWJlcigwKSBATm9ybWFsKFZhbHVlID0gMCkg
T2JqZWN0IHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxMS9YX2luLmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTEv
WF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjUxMTljMzIKLS0t
IC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTEvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMTAgQEAKK3B1
YmxpYyBjbGFzcyBYIHsKKyAgICBpbnQgeCgpIHsKKyAgICAgICAgdHJ5IChATWFya2VyIEludGVn
ZXIgcCA9IG51bGw7IGZpbmFsIEBNYXJrZXIgSW50ZWdlciBxID0gbnVsbDsgQE1hcmtlciBmaW5h
bCBJbnRlZ2VyIHIgPSBudWxsKSB7CisgICAgICAgIH0KKyAgICAgICAgcmV0dXJuIDEwOworICAg
IH0KKyAgICBab3JrIHo7Cit9CitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxh
bmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFy
a2VyIHt9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTEvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxMS9YX291
dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjJiNTQyZTgKLS0tIC9k
ZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySnNyMzA4L3Rlc3QwMTEvWF9vdXQuamF2YQpAQCAtMCwwICsxLDE2IEBACitwdWJs
aWMgY2xhc3MgWCB7CisJaW50IHgoKSB7CisJCXRyeSAoQE1hcmtlcgorCQlJbnRlZ2VyIHAgPSBu
dWxsOyBmaW5hbCBATWFya2VyCisJCUludGVnZXIgcSA9IG51bGw7IEBNYXJrZXIKKwkJZmluYWwg
SW50ZWdlciByID0gbnVsbCkgeworCQl9CisJCXJldHVybiAxMDsKKwl9CisKKwlab3JrIHo7Cit9
CisKK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQoamF2YS5sYW5nLmFubm90YXRpb24uRWxl
bWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtlciB7Cit9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SnNyMzA4L3Rlc3QwMTIvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEyL1hfaW4uamF2YQpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi41YTc1ODlmCi0tLSAvZGV2L251bGwKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90
ZXN0MDEyL1hfaW4uamF2YQpAQCAtMCwwICsxLDExIEBACitwdWJsaWMgY2xhc3MgWCB7CisgICAg
aW50IHgoKSB7CisgICAgICAgIGZvciAoQE1hcmtlciBpbnQgaTogbmV3IGludFszXSkge30KKyAg
ICAgICAgZm9yIChmaW5hbCBATWFya2VyIGludCBpOiBuZXcgaW50WzNdKSB7fQorICAgICAgICBm
b3IgKEBNYXJrZXIgZmluYWwgaW50IGk6IG5ldyBpbnRbM10pIHt9CisgICAgICAgIHJldHVybiAx
MDsKKyAgICB9CisgICAgWm9yayB6OworfQorQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCAo
amF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJm
YWNlIE1hcmtlciB7fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEyL1hfb3V0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3Qw
MTIvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5mN2YwM2I3
Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29y
a3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEyL1hfb3V0LmphdmEKQEAgLTAsMCArMSwyMCBA
QAorcHVibGljIGNsYXNzIFggeworCWludCB4KCkgeworCQlmb3IgKEBNYXJrZXIKKwkJaW50IGkg
OiBuZXcgaW50WzNdKSB7CisJCX0KKwkJZm9yIChmaW5hbCBATWFya2VyCisJCWludCBpIDogbmV3
IGludFszXSkgeworCQl9CisJCWZvciAoQE1hcmtlcgorCQlmaW5hbCBpbnQgaSA6IG5ldyBpbnRb
M10pIHsKKwkJfQorCQlyZXR1cm4gMTA7CisJfQorCisJWm9yayB6OworfQorCitAamF2YS5sYW5n
LmFubm90YXRpb24uVGFyZ2V0KGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVf
UEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIgeworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEz
L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKc3IzMDgvdGVzdDAxMy9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMC4uZGRkOTYyNQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxMy9YX2luLmph
dmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgQGludGVyZmFjZSBYIHsgCisJcHVibGljIEBNYXJr
ZXIgU3RyaW5nIHZhbHVlKCk7IAorCUBNYXJrZXIgU3RyaW5nIHZhbHVlMigpOyAKKwlATWFya2Vy
IHB1YmxpYyBTdHJpbmcgdmFsdWUzKCk7IAorfQorQGludGVyZmFjZSBNYXJrZXIge30KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0
ZXJKc3IzMDgvdGVzdDAxMy9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDEzL1hfb3V0LmphdmEKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMjE0M2EwNwotLS0gL2Rldi9udWxsCisrKyBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3Iz
MDgvdGVzdDAxMy9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTMgQEAKK3B1YmxpYyBAaW50ZXJmYWNl
IFggeworCXB1YmxpYyBATWFya2VyCisJU3RyaW5nIHZhbHVlKCk7CisKKwlATWFya2VyCisJU3Ry
aW5nIHZhbHVlMigpOworCisJQE1hcmtlcgorCXB1YmxpYyBTdHJpbmcgdmFsdWUzKCk7Cit9CisK
K0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxNC9YX2luLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNy
MzA4L3Rlc3QwMTQvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjY3MTUxMDYKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTQvWF9pbi5qYXZhCkBAIC0wLDAg
KzEsNiBAQAorcHVibGljIGNsYXNzIFggeyAKKwlwdWJsaWMgdm9pZCB2YWx1ZSgpIHsKKwkJT2Jq
ZWN0IG8gPSBATWFya2VyIGludC5jbGFzczsKKwkJT2JqZWN0IG8yID0gQE1hcmtlciBpbnQgQE1h
cmtlcltdIFtdIEBNYXJrZXJbXS5jbGFzczsKKyAgIH0KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAx
NC9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpzcjMwOC90ZXN0MDE0L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uZThhM2MwMAotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxNC9YX291
dC5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggeworCXB1YmxpYyB2b2lkIHZh
bHVlKCkgeworCQlPYmplY3QgbyA9IEBNYXJrZXIgaW50LmNsYXNzOworCQlPYmplY3QgbzIgPSBA
TWFya2VyIGludCBATWFya2VyW10gW10gQE1hcmtlcltdLmNsYXNzOworICAgfQorfQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpzcjMwOC90ZXN0MDE1L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxNS9YX2luLmphdmEKbmV3IGZpbGUg
bW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMzI0YTE1NwotLS0gL2Rldi9udWxsCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgv
dGVzdDAxNS9YX2luLmphdmEKQEAgLTAsMCArMSw5IEBACitpbnRlcmZhY2UgSSB7CisgICAgT2Jq
ZWN0IGNvcHkoaW50IFtdIGlhKTsKK30KK3B1YmxpYyBjbGFzcyBYICB7CisgICAgcHVibGljIHN0
YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHsKKyAgICAgICAgSSBpID0gQE1hcmtlciBp
bnQgQE1hcmtlciBbXTo6PFN0cmluZz5jbG9uZTsKKyAgICAgICAgWm9yayB6OworICAgIH0KK30K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKc3IzMDgvdGVzdDAxNS9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDE1L1hfb3V0LmphdmEK
bmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZmE5MGE0YQotLS0gL2Rldi9udWxs
CisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0
ZXJKc3IzMDgvdGVzdDAxNS9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTAgQEAKK2ludGVyZmFjZSBJ
IHsKKwlPYmplY3QgY29weShpbnRbXSBpYSk7Cit9CisKK3B1YmxpYyBjbGFzcyBYIHsKKwlwdWJs
aWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCUkgaSA9IEBNYXJrZXIgaW50
IEBNYXJrZXJbXTo6PFN0cmluZz5jbG9uZTsKKwkJWm9yayB6OworCX0KK30KZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3Iz
MDgvdGVzdDAxNi9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTYvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLmQ5ZjkzOWIKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3Qw
MTYvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNyBAQAorcHVibGljIGNsYXNzIFggIHsKKyAgICBwdWJs
aWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykgeworICAgICAgICBpbnQgaSBbXSA9
IG5ldyBATWFya2VyIGludCBATWFya2VyIFs0XTsKKyAgICAgICAgaW50IGogW10gPSBuZXcgQE1h
cmtlciBpbnQgQE1hcmtlciBbXSB7IDEwIH07CisgICAgICAgIFpvcmsgejsKKyAgICB9Cit9CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySnNyMzA4L3Rlc3QwMTYvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxNi9YX291dC5qYXZhCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmM1OGRhNGEKLS0tIC9kZXYvbnVsbAor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SnNyMzA4L3Rlc3QwMTYvWF9vdXQuamF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBjbGFzcyBY
IHsKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCWludCBpW10g
PSBuZXcgQE1hcmtlciBpbnQgQE1hcmtlcls0XTsKKwkJaW50IGpbXSA9IG5ldyBATWFya2VyIGlu
dCBATWFya2VyW10geyAxMCB9OworCQlab3JrIHo7CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0
MDE3L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxNy9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uYWU0ZTlhZgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxNy9YX2lu
LmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCAgeworICAgIHB1YmxpYyBzdGF0
aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7CisgICAgICAgIGludCBpID0gKEBNYXJrZXIg
aW50KSAwOworICAgICAgICBpbnQgaiBbXSA9IChATWFya2VyIGludCBATWFya2VyIFtdKSBudWxs
OworICAgICAgICBab3JrIHo7CisgICAgfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDE3L1hfb3V0
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMTcvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAw
MDAwMDAwLi5kOTE3YjA5Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDE3L1hfb3V0LmphdmEK
QEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCB7CisJcHVibGljIHN0YXRpYyB2b2lkIG1h
aW4oU3RyaW5nW10gYXJncykgeworCQlpbnQgaSA9IChATWFya2VyIGludCkgMDsKKwkJaW50IGpb
XSA9IChATWFya2VyIGludCBATWFya2VyW10pIG51bGw7CisJCVpvcmsgejsKKwl9Cit9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMTgvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDE4L1hfaW4uamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4xMTAyOGYxCi0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDE4L1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYICB7Cisg
ICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHsKKyAgICAgICAgaWYg
KGFyZ3MgaW5zdGFuY2VvZiBAUmVhZG9ubHkgU3RyaW5nKSB7CisgICAgICAgIH0KKyAgICB9Cit9
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySnNyMzA4L3Rlc3QwMTgvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxOC9YX291dC5qYXZh
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjQyYzg5MDUKLS0tIC9kZXYvbnVs
bAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMTgvWF9vdXQuamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFz
cyBYIHsKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCWlmIChh
cmdzIGluc3RhbmNlb2YgQFJlYWRvbmx5IFN0cmluZykgeworCQl9CisJfQorfQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpz
cjMwOC90ZXN0MDE5L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxOS9YX2luLmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYTY2NWVjYwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVz
dDAxOS9YX2luLmphdmEKQEAgLTAsMCArMSw0IEBACitwdWJsaWMgY2xhc3MgWCBleHRlbmRzIFk8
QE1hcmtlciBJbnRlZ2VyLCBTdHJpbmc+IHt9CitjbGFzcyBZPFQsIFY+IHsKKyAgICBab3JrIHo7
Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMTkvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAxOS9YX291dC5q
YXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjYwNjIxNTIKLS0tIC9kZXYv
bnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySnNyMzA4L3Rlc3QwMTkvWF9vdXQuamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBj
bGFzcyBYIGV4dGVuZHMgWTxATWFya2VyIEludGVnZXIsIFN0cmluZz4geworfQorCitjbGFzcyBZ
PFQsIFY+IHsKKwlab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjAvWF9pbi5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDIwL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4w
ZTFjZWQ3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDIwL1hfaW4uamF2YQpAQCAtMCwwICsx
LDQgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWTxATWFya2VyIEludGVnZXI+IHt9CitjbGFz
cyBZPFQ+IHsKKyAgICBab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjAvWF9vdXQuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJK
c3IzMDgvdGVzdDAyMC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLjY3MmI5YzUKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjAvWF9vdXQuamF2YQpAQCAt
MCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWTxATWFya2VyIEludGVnZXI+IHsK
K30KKworY2xhc3MgWTxUPiB7CisJWm9yayB6OworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDIxL1hf
aW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKc3IzMDgvdGVzdDAyMS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMC4uYzZhNDkxZQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMS9YX2luLmphdmEK
QEAgLTAsMCArMSw0IEBACitwdWJsaWMgY2xhc3MgWDxUIGV4dGVuZHMgT2JqZWN0ICYgQ29tcGFy
YWJsZTw/IHN1cGVyIEBNYXJrZXIgU3RyaW5nPj4ge30KK2NsYXNzIFk8VD4geworICAgIFpvcmsg
ejsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMS9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDIxL1hfb3V0
LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uN2FmOTA5NwotLS0gL2Rl
di9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKc3IzMDgvdGVzdDAyMS9YX291dC5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGlj
IGNsYXNzIFg8VCBleHRlbmRzIE9iamVjdCAmIENvbXBhcmFibGU8PyBzdXBlciBATWFya2VyIFN0
cmluZz4+IHsKK30KKworY2xhc3MgWTxUPiB7CisJWm9yayB6OworfQpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90
ZXN0MDIyL1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMi9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMC4uNjU1MzI3MAotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMi9Y
X2luLmphdmEKQEAgLTAsMCArMSw0IEBACitwdWJsaWMgY2xhc3MgWDxBIGV4dGVuZHMgWDxYPFg8
QE1hcmtlciBTdHJpbmc+Pj4+IHt9CitjbGFzcyBZPFQ+IHsKKyAgICBab3JrIHo7Cit9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMjIvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMi9YX291dC5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmNlZWNhOWUKLS0tIC9kZXYvbnVsbAorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNy
MzA4L3Rlc3QwMjIvWF9vdXQuamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYPEEg
ZXh0ZW5kcyBYPFg8WDxATWFya2VyIFN0cmluZz4+Pj4geworfQorCitjbGFzcyBZPFQ+IHsKKwla
b3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjMvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDIzL1hf
aW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi44ODM0ZGQxCi0tLSAv
ZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpzcjMwOC90ZXN0MDIzL1hfaW4uamF2YQpAQCAtMCwwICsxLDQgQEAKK3B1Ymxp
YyBjbGFzcyBYIHsKKwl2b2lkIGZvbyhNYXA8QE1hcmtlciA/IHN1cGVyIEBNYXJrZXIgT2JqZWN0
LCBATWFya2VyID8gZXh0ZW5kcyBATWFya2VyIFN0cmluZz4gbSl7fQorICAgdm9pZCBnb28oTWFw
PEBNYXJrZXIgPyBleHRlbmRzIEBNYXJrZXIgT2JqZWN0LCBATWFya2VyID8gc3VwZXIgQE1hcmtl
ciBTdHJpbmc+IG0pe30KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMy9YX291dC5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90
ZXN0MDIzL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNDg0
OTVmMQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyMy9YX291dC5qYXZhCkBAIC0wLDAgKzEs
OSBAQAorcHVibGljIGNsYXNzIFggeworCXZvaWQgZm9vKAorCQkJTWFwPEBNYXJrZXIgPyBzdXBl
ciBATWFya2VyIE9iamVjdCwgQE1hcmtlciA/IGV4dGVuZHMgQE1hcmtlciBTdHJpbmc+IG0pIHsK
Kwl9CisKKwl2b2lkIGdvbygKKwkJCU1hcDxATWFya2VyID8gZXh0ZW5kcyBATWFya2VyIE9iamVj
dCwgQE1hcmtlciA/IHN1cGVyIEBNYXJrZXIgU3RyaW5nPiBtKSB7CisJfQorfQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpz
cjMwOC90ZXN0MDI0L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyNC9YX2luLmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNDI1ZDg3OAotLS0gL2Rldi9udWxsCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVz
dDAyNC9YX2luLmphdmEKQEAgLTAsMCArMSwzIEBACitwdWJsaWMgY2xhc3MgWCA8QE1hcmtlciBU
IGV4dGVuZHMgQE1hcmtlciBZPEBNYXJrZXIgPz4sIEBNYXJrZXIgUSBleHRlbmRzIEBNYXJrZXIg
SW50ZWdlcj4geworfQorY2xhc3MgWTxUPiB7fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI0L1hfb3V0
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMjQvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAw
MDAwMDAwLi44MDg4M2Q5Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI0L1hfb3V0LmphdmEK
QEAgLTAsMCArMSw1IEBACitwdWJsaWMgY2xhc3MgWDxATWFya2VyIFQgZXh0ZW5kcyBATWFya2Vy
IFk8QE1hcmtlciA/PiwgQE1hcmtlciBRIGV4dGVuZHMgQE1hcmtlciBJbnRlZ2VyPiB7Cit9CisK
K2NsYXNzIFk8VD4geworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI1L1hfaW4uamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVz
dDAyNS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZjQ0OTE4
MQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyNS9YX2luLmphdmEKQEAgLTAsMCArMSw1IEBA
CitwdWJsaWMgY2xhc3MgWDxQLCBDPiB7CisgIHB1YmxpYyBYKCkgeworICAgIGlmICghKHRoaXMg
aW5zdGFuY2VvZiBATWFya2VyIFgpKSB7fQorICB9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjUv
WF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKc3IzMDgvdGVzdDAyNS9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLjhlODIwOTQKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjUvWF9vdXQu
amF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYPFAsIEM+IHsKKwlwdWJsaWMgWCgp
IHsKKwkJaWYgKCEodGhpcyBpbnN0YW5jZW9mIEBNYXJrZXIgWCkpIHsKKwkJfQorCX0KK30KZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKc3IzMDgvdGVzdDAyNi9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjYvWF9pbi5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjVhYzc3YzEKLS0tIC9kZXYvbnVsbAorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNy
MzA4L3Rlc3QwMjYvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMTcgQEAKK2ludGVyZmFjZSBJIHsKKyAg
ICB2b2lkIGZvbyhZPFN0cmluZz4uWiB6LCBpbnQgeCk7Cit9CitwdWJsaWMgY2xhc3MgWCAgewor
ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7CisgICAgICAgIEkg
aSA9IFk8U3RyaW5nPi5ATWFya2VyIFo6OmZvbzsKKyAgICAgICAgaS5mb28obmV3IFk8U3RyaW5n
PigpLm5ldyBaKCksIDEwKTsgCisgICAgICAgIFpvcmsgejsKKyAgICB9Cit9CitjbGFzcyBZPFQ+
IHsKKyAgICBjbGFzcyBaIHsKKyAgICAgICAgdm9pZCBmb28oaW50IHgpIHsKKwkgICAgU3lzdGVt
Lm91dC5wcmludGxuKHgpOworICAgICAgICB9CisgICAgfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0
MDI2L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjYvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwLi5kNWI5NDgzCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI2L1hf
b3V0LmphdmEKQEAgLTAsMCArMSwxOSBAQAoraW50ZXJmYWNlIEkgeworCXZvaWQgZm9vKFk8U3Ry
aW5nPi5aIHosIGludCB4KTsKK30KKworcHVibGljIGNsYXNzIFggeworCXB1YmxpYyBzdGF0aWMg
dm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKKwkJSSBpID0gWTxTdHJpbmc+LkBNYXJrZXIgWjo6
Zm9vOworCQlpLmZvbyhuZXcgWTxTdHJpbmc+KCkubmV3IFooKSwgMTApOworCQlab3JrIHo7CisJ
fQorfQorCitjbGFzcyBZPFQ+IHsKKwljbGFzcyBaIHsKKwkJdm9pZCBmb28oaW50IHgpIHsKKwkJ
CVN5c3RlbS5vdXQucHJpbnRsbih4KTsKKwkJfQorCX0KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAy
Ny9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySnNyMzA4L3Rlc3QwMjcvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLjdmNWQ5OTAKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjcvWF9pbi5q
YXZhCkBAIC0wLDAgKzEsNyBAQAorcHVibGljIGNsYXNzIFggIHsKKyAgICBwdWJsaWMgc3RhdGlj
IHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykgeworICAgICAgICBYIFtdIHggPSBuZXcgQE1hcmtl
ciBYIEBNYXJrZXIgWzVdOworICAgICAgICBYIFtdIHgyID0gbmV3IEBNYXJrZXIgWCBATWFya2Vy
IFtdIHsgbnVsbCB9OworICAgICAgICBab3JrIHo7CisgICAgfQorfQpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90
ZXN0MDI3L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjcvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwLi43MTgxOTBhCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI3
L1hfb3V0LmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCB7CisJcHVibGljIHN0
YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgeworCQlYW10geCA9IG5ldyBATWFya2VyIFgg
QE1hcmtlcls1XTsKKwkJWFtdIHgyID0gbmV3IEBNYXJrZXIgWCBATWFya2VyW10geyBudWxsIH07
CisJCVpvcmsgejsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjgvWF9pbi5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90
ZXN0MDI4L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4xMjI3
YTYyCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
d29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI4L1hfaW4uamF2YQpAQCAtMCwwICsxLDUg
QEAKK3B1YmxpYyBjbGFzcyBYICB7CisgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5n
IFtdIGFyZ3MpIHsKKyAgICAgICAgamF2YS51dGlsLk1hcC5FbnRyeSBbXSBlID0gKGphdmEudXRp
bC5NYXA8U3RyaW5nLCBTdHJpbmc+LkBNYXJrZXIgRW50cnkgW10pIG51bGw7CisgICAgfQorfQpk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpzcjMwOC90ZXN0MDI4L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjgvWF9vdXQuamF2YQpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4zNTQzMzRkCi0tLSAvZGV2L251bGwK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpzcjMwOC90ZXN0MDI4L1hfb3V0LmphdmEKQEAgLTAsMCArMSw1IEBACitwdWJsaWMgY2xhc3Mg
WCB7CisJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgeworCQlqYXZhLnV0
aWwuTWFwLkVudHJ5W10gZSA9IChqYXZhLnV0aWwuTWFwPFN0cmluZywgU3RyaW5nPi5ATWFya2Vy
IEVudHJ5W10pIG51bGw7CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDI5L1hfaW4uamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3Iz
MDgvdGVzdDAyOS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4u
N2QwNDgwZgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyOS9YX2luLmphdmEKQEAgLTAsMCAr
MSw1IEBACitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQgamF2YS51dGlsLkxp
c3Q7CitwdWJsaWMgY2xhc3MgWDxUIGV4dGVuZHMgQ29tcGFyYWJsZTxUPiAmIFNlcmlhbGl6YWJs
ZT4geworCXZvaWQgZm9vKExpc3Q8PyBleHRlbmRzIEBNYXJrZXIgQ29tcGFyYWJsZTxUPj4gcCkg
e30gCit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMjkvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAyOS9YX291
dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjg1OTU2MTQKLS0tIC9k
ZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySnNyMzA4L3Rlc3QwMjkvWF9vdXQuamF2YQpAQCAtMCwwICsxLDcgQEAKK2ltcG9y
dCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsKKworcHVibGlj
IGNsYXNzIFg8VCBleHRlbmRzIENvbXBhcmFibGU8VD4gJiBTZXJpYWxpemFibGU+IHsKKwl2b2lk
IGZvbyhMaXN0PD8gZXh0ZW5kcyBATWFya2VyIENvbXBhcmFibGU8VD4+IHApIHsKKwl9Cit9CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySnNyMzA4L3Rlc3QwMzAvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMwL1hfaW4uamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi42OGQxOWU2Ci0tLSAvZGV2L251bGwKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpz
cjMwOC90ZXN0MDMwL1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK2NsYXNzIEJhc2UgeworfQor
Y2xhc3MgRm9vPFUgZXh0ZW5kcyBCYXNlLCBWIGV4dGVuZHMgQmFyPFUsIEBNYXJrZXIgRm9vPFUs
IFY+Pj4geworfQorY2xhc3MgQmFyPEUgZXh0ZW5kcyBCYXNlLCBGIGV4dGVuZHMgRm9vPEUsIEBN
YXJrZXIgQmFyPEUsIEY+Pj4geworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMwL1hfb3V0LmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNy
MzA4L3Rlc3QwMzAvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
Li4zYzNlMmMyCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMwL1hfb3V0LmphdmEKQEAgLTAs
MCArMSw4IEBACitjbGFzcyBCYXNlIHsKK30KKworY2xhc3MgRm9vPFUgZXh0ZW5kcyBCYXNlLCBW
IGV4dGVuZHMgQmFyPFUsIEBNYXJrZXIgRm9vPFUsIFY+Pj4geworfQorCitjbGFzcyBCYXI8RSBl
eHRlbmRzIEJhc2UsIEYgZXh0ZW5kcyBGb288RSwgQE1hcmtlciBCYXI8RSwgRj4+PiB7Cit9CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySnNyMzA4L3Rlc3QwMzEvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMxL1hfaW4uamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43NjNiNmExCi0tLSAvZGV2L251bGwKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpz
cjMwOC90ZXN0MDMxL1hfaW4uamF2YQpAQCAtMCwwICsxLDIgQEAKK3B1YmxpYyBjbGFzcyBYIGV4
dGVuZHMgQE1hcmtlciBPYmplY3QgeworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMxL1hfb3V0Lmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SnNyMzA4L3Rlc3QwMzEvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwLi43NjNiNmExCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMxL1hfb3V0LmphdmEKQEAg
LTAsMCArMSwyIEBACitwdWJsaWMgY2xhc3MgWCBleHRlbmRzIEBNYXJrZXIgT2JqZWN0IHsKK30K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKc3IzMDgvdGVzdDAzMi9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzIvWF9pbi5qYXZhCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjMwNmZiNjMKLS0tIC9kZXYvbnVsbAor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SnNyMzA4L3Rlc3QwMzIvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNCBAQAorcHVibGljIGNsYXNzIFgg
eworICAgIFggeCA9IG5ldyBATWFya2VyIFgoKTsKKyAgICBYIHkgPSBuZXcgPFN0cmluZz4gQE1h
cmtlciBYKCk7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzIvWF9vdXQuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAz
Mi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmZiMWVhNDgK
LS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzIvWF9vdXQuamF2YQpAQCAtMCwwICsxLDQgQEAK
K3B1YmxpYyBjbGFzcyBYIHsKKwlYIHggPSBuZXcgQE1hcmtlciBYKCk7CisJWCB5ID0gbmV3PFN0
cmluZz4gQE1hcmtlciBYKCk7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzMvWF9pbi5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0MDMzL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4y
NmIxZmE3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDMzL1hfaW4uamF2YQpAQCAtMCwwICsx
LDYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKyAgICBjbGFzcyBZIHsKKyAgICB9CisgICAgWSB5MSA9
IG5ldyBATWFya2VyIFgoKS5uZXcgQE1hcmtlciBZKCk7CisgICAgWSB5MiA9IG5ldyBATWFya2Vy
IFgoKS5uZXcgPFN0cmluZz4gQE1hcmtlciBZKCk7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzMv
WF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKc3IzMDgvdGVzdDAzMy9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLjBhOGYwY2MKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzMvWF9vdXQu
amF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwljbGFzcyBZIHsKKwl9CisK
KwlZIHkxID0gbmV3IEBNYXJrZXIgWCgpLm5ldyBATWFya2VyIFkoKTsKKwlZIHkyID0gbmV3IEBN
YXJrZXIgWCgpLm5ldzxTdHJpbmc+IEBNYXJrZXIgWSgpOworfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0
MDM0L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNC9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uYjRiYzQ0MwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNC9YX2lu
LmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCB7CisgICAgWCB4OworICAgIGNs
YXNzIFkgeworICAgIH0KKyAgICBZIHkxID0geC5uZXcgQE1hcmtlciBZKCk7CisgICAgWSB5MiA9
IHgubmV3IDxTdHJpbmc+IEBNYXJrZXIgWSgpOworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM0L1hf
b3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySnNyMzA4L3Rlc3QwMzQvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi4wNWI4YmQ3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM0L1hfb3V0Lmph
dmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7CisJWCB4OworCisJY2xhc3MgWSB7
CisJfQorCisJWSB5MSA9IHgubmV3IEBNYXJrZXIgWSgpOworCVkgeTIgPSB4Lm5ldzxTdHJpbmc+
IEBNYXJrZXIgWSgpOworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM1L1hfaW4uamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVz
dDAzNS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uOTFhY2Jj
MwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNS9YX2luLmphdmEKQEAgLTAsMCArMSwzIEBA
CitwdWJsaWMgY2xhc3MgWCB7CisgICAgdm9pZCBmb28oKSB0aHJvd3MgQE1hcmtlciBOdWxsUG9p
bnRlckV4Y2VwdGlvbiwgQE1hcmtlciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ge30K
K30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNS9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM1L1hfb3V0Lmph
dmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNzk5NGI0ZQotLS0gL2Rldi9u
dWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKc3IzMDgvdGVzdDAzNS9YX291dC5qYXZhCkBAIC0wLDAgKzEsNSBAQAorcHVibGljIGNs
YXNzIFggeworCXZvaWQgZm9vKCkgdGhyb3dzIEBNYXJrZXIgTnVsbFBvaW50ZXJFeGNlcHRpb24s
CisJCQlATWFya2VyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiB7CisJfQorfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpzcjMwOC90ZXN0MDM2L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNi9YX2luLmphdmEKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZmIwODQzOQotLS0gL2Rldi9udWxsCisrKyBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3Iz
MDgvdGVzdDAzNi9YX2luLmphdmEKQEAgLTAsMCArMSw2IEBACitpbnRlcmZhY2UgSSB7fQoraW50
ZXJmYWNlIEoge30KK2ludGVyZmFjZSBLIGV4dGVuZHMgQE1hcmtlciBJLCBATWFya2VyIEoge30K
K2ludGVyZmFjZSBMIHt9CitwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIEBNYXJrZXIgSywgQE1h
cmtlciBMIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNi9YX291dC5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM2
L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYjEwNGUzMwot
LS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNi9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTQgQEAK
K2ludGVyZmFjZSBJIHsKK30KKworaW50ZXJmYWNlIEogeworfQorCitpbnRlcmZhY2UgSyBleHRl
bmRzIEBNYXJrZXIgSSwgQE1hcmtlciBKIHsKK30KKworaW50ZXJmYWNlIEwgeworfQorCitwdWJs
aWMgY2xhc3MgWCBpbXBsZW1lbnRzIEBNYXJrZXIgSywgQE1hcmtlciBMIHsKK30KZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJK
c3IzMDgvdGVzdDAzNy9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzcvWF9pbi5qYXZhCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjAzNGZjOGUKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rl
c3QwMzcvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMTkgQEAKK2ludGVyZmFjZSBJIHsKKyAgICB2b2lk
IGZvbyhpbnQgeCk7Cit9CitwdWJsaWMgY2xhc3MgWCAgeworICAgIHB1YmxpYyBzdGF0aWMgdm9p
ZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7CisgICAgICAgIEkgaSA9IEBNYXJrZXIgWS4gQE1hcmtl
ciBaIEBNYXJrZXIgW10gW10gQE1hcmtlciBbXSA6OmZvbzsKKyAgICAgICAgSSBpMiA9IEBWYWx1
ZSgiSm9lIikgWS4gQFZhbHVlMihAVmFsdWUoIkpvZSIpKSBATWFya2VyIFogQE1hcmtlciBbXSBb
XSBATWFya2VyIFtdIDo6Zm9vOworICAgICAgICBJIGkzID0gQFZhbHVlKCJEdW8iKSBZLiBAVmFs
dWUyKEBWYWx1ZSgiSm9lIikpIEBNYXJrZXIgWiA6OmZvbzsKKyAgICAgICAgaS5mb28oMTApOyAK
KyAgICAgICAgWm9yayB6OworICAgIH0KK30KK2NsYXNzIFkgeworICAgIHN0YXRpYyBjbGFzcyBa
IHsKKyAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIGZvbyhpbnQgeCkgeworCSAgICBTeXN0ZW0u
b3V0LnByaW50bG4oeCk7CisgICAgICAgIH0KKyAgICB9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3Qw
MzcvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzNy9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLjc3N2E4NWQKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzcvWF9v
dXQuamF2YQpAQCAtMCwwICsxLDIxIEBACitpbnRlcmZhY2UgSSB7CisJdm9pZCBmb28oaW50IHgp
OworfQorCitwdWJsaWMgY2xhc3MgWCB7CisJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5n
W10gYXJncykgeworCQlJIGkgPSBATWFya2VyIFkuQE1hcmtlciBaIEBNYXJrZXJbXVtdQE1hcmtl
cltdOjpmb287CisJCUkgaTIgPSBAVmFsdWUoIkpvZSIpIFkuQFZhbHVlMihAVmFsdWUoIkpvZSIp
KSBATWFya2VyIFogQE1hcmtlcltdW11ATWFya2VyW106OmZvbzsKKwkJSSBpMyA9IEBWYWx1ZSgi
RHVvIikgWS5AVmFsdWUyKEBWYWx1ZSgiSm9lIikpIEBNYXJrZXIgWjo6Zm9vOworCQlpLmZvbygx
MCk7CisJCVpvcmsgejsKKwl9Cit9CisKK2NsYXNzIFkgeworCXN0YXRpYyBjbGFzcyBaIHsKKwkJ
cHVibGljIHN0YXRpYyB2b2lkIGZvbyhpbnQgeCkgeworCQkJU3lzdGVtLm91dC5wcmludGxuKHgp
OworCQl9CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM4L1hfaW4uamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAz
OC9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uOGU1ZDFiMwot
LS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdDAzOC9YX2luLmphdmEKQEAgLTAsMCArMSwyNSBAQAor
aW50ZXJmYWNlIEkgeworICAgIFkgZm9vKGludCB4KTsKK30KK3B1YmxpYyBjbGFzcyBYICB7Cisg
ICAgY2xhc3MgWiBleHRlbmRzIFkgeworICAgICAgICBwdWJsaWMgWihpbnQgeCkgeworICAgICAg
ICAgICAgc3VwZXIoeCk7CisgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oKTsKKyAgICAg
ICAgfQorICAgIH0KKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykg
eworICAgICAgICBpID0gQE1hcmtlciBXPEBNYXJrZXIgSW50ZWdlcj46OjxATWFya2VyIFN0cmlu
Zz4gbmV3OworICAgIH0KK30KK2NsYXNzIFc8VD4gZXh0ZW5kcyBZIHsKKyAgICBwdWJsaWMgVyhU
IHgpIHsKKyAgICAgICAgc3VwZXIoMCk7CisgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbih4KTsK
KyAgICB9Cit9CitjbGFzcyBZIHsKKyAgICBwdWJsaWMgWShpbnQgeCkgeworICAgICAgICBTeXN0
ZW0ub3V0LnByaW50bG4oeCk7CisgICAgfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM4L1hfb3V0
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySnNyMzA4L3Rlc3QwMzgvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAw
MDAwMDAwLi5mZjdmYzNlCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM4L1hfb3V0LmphdmEK
QEAgLTAsMCArMSwyOSBAQAoraW50ZXJmYWNlIEkgeworCVkgZm9vKGludCB4KTsKK30KKworcHVi
bGljIGNsYXNzIFggeworCWNsYXNzIFogZXh0ZW5kcyBZIHsKKwkJcHVibGljIFooaW50IHgpIHsK
KwkJCXN1cGVyKHgpOworCQkJU3lzdGVtLm91dC5wcmludGxuKCk7CisJCX0KKwl9CisKKwlwdWJs
aWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCWkgPSBATWFya2VyIFc8QE1h
cmtlciBJbnRlZ2VyPjo6PEBNYXJrZXIgU3RyaW5nPm5ldzsKKwl9Cit9CisKK2NsYXNzIFc8VD4g
ZXh0ZW5kcyBZIHsKKwlwdWJsaWMgVyhUIHgpIHsKKwkJc3VwZXIoMCk7CisJCVN5c3RlbS5vdXQu
cHJpbnRsbih4KTsKKwl9Cit9CisKK2NsYXNzIFkgeworCXB1YmxpYyBZKGludCB4KSB7CisJCVN5
c3RlbS5vdXQucHJpbnRsbih4KTsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3QwMzkvWF9pbi5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpzcjMwOC90ZXN0MDM5L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwLi5mOGZmNWZiCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM5L1hfaW4uamF2YQpAQCAt
MCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYICB7CisgICAgT2JqZWN0IG8gPSAoQE1hcmtlciBY
KSBudWxsOworICAgIE9iamVjdCBwID0gKEBNYXJrZXIgWCBATWFya2VyIFtdKSBudWxsOworICAg
IE9iamVjdCBxID0gKEBNYXJrZXIgamF2YS4gQE1hcmtlciB1dGlsLiBATWFya2VyIExpc3Q8QE1h
cmtlciBTdHJpbmc+IFtdKSBudWxsOworICAgIE9iamVjdCByID0gKEBNYXJrZXIgamF2YS4gQE1h
cmtlciB1dGlsLkBNYXJrZXIgTWFwPEBNYXJrZXIgU3RyaW5nLCBATWFya2VyIFN0cmluZz4uQE1h
cmtlciBFbnRyeSBATWFya2VyIFtdKSBudWxsOworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM5L1hf
b3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySnNyMzA4L3Rlc3QwMzkvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi4yN2E2MjlhCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0MDM5L1hfb3V0Lmph
dmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgY2xhc3MgWCB7CisJT2JqZWN0IG8gPSAoQE1hcmtl
ciBYKSBudWxsOworCU9iamVjdCBwID0gKEBNYXJrZXIgWCBATWFya2VyW10pIG51bGw7CisJT2Jq
ZWN0IHEgPSAoQE1hcmtlciBqYXZhLkBNYXJrZXIgdXRpbC5ATWFya2VyIExpc3Q8QE1hcmtlciBT
dHJpbmc+W10pIG51bGw7CisJT2JqZWN0IHIgPSAoQE1hcmtlciBqYXZhLkBNYXJrZXIgdXRpbC5A
TWFya2VyIE1hcDxATWFya2VyIFN0cmluZywgQE1hcmtlciBTdHJpbmc+LkBNYXJrZXIgRW50cnkg
QE1hcmtlcltdKSBudWxsOworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMwOC90ZXN0U21va2UvQV9pbi5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpzcjMw
OC90ZXN0U21va2UvQV9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
Ljg0MjZhNTgKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3RTbW9rZS9BX2luLmphdmEKQEAgLTAs
MCArMSw0OCBAQAorLyoqCisgKiBUZXN0CisgKgorICovCitwYWNrYWdlIHAxLnAyLnRlc3Q7CisK
K2ltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2ltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9u
OworCitwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQSBleHRlbmRzIGphdmEubGFuZy5PYmplY3QgaW1w
bGVtZW50cyBSdW5uYWJsZSwgQ2xvbmVhYmxlLCBTZXJpYWxpemFibGUgeworCXB1YmxpYyB2b2lk
IHJ1bigpIHsKKwl9CisJCisJcHVibGljIHN0YXRpYyB2b2lkIGZvbygpIHRocm93cyBAQm9yaW5n
CisJIEBEcmVhZGZ1bCgicmVhbGx5ISIpIElPRXhjZXB0aW9uIHsKKwkJQE5vbk51bGwgSW50ZWdl
ciBhID0gY2FsbE1lKCk7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRhcygpIHsKKwkJUnVubmFi
bGUgYSA9ICgpIC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVzdE1ldCh5b3UpOworCQkJ
aGVyZS5udW1iZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEgPSB4IC0+IHg7CisKKwkJ
RnVuYyBpZEIgPSB4IC0+IHsgcmV0dXJuIHg7IH07CisJCQorCQlGdW5jIGlkQyA9IHggICAtPiAg
IHg7CisKKwkJRnVuYyBpZDIgPSB4IC0+IHsKKwkJCWlmICh4ID09IG51bGwpCisJCQl7CisJCQkJ
cmV0dXJuIG51bGw7CisJCQl9CisJCQllbHNlCisJCQkJcmV0dXJuIHg7CisJCX07CisJCQorCQlJ
bWFnaW5hYmxlRnVuY3Rpb248QE5vbk51bGwgU3RyaW5nLCBJbnRlZ2VyPiBmID0KKwkJCShATm9u
TnVsbCBTdHJpbmcgaW5wdXQpIC0+IGlucHV0Lmxlbmd0aCgpOworCisJCUltYWdpbmFibGVGdW5j
dGlvbjxATm9uTnVsbCBTdHJpbmcsIEBOb25OdWxsIEludGVnZXI+IGYyID0KKwkJCShTdHJpbmcg
aW5wdXQpIC0+IHsgcmV0dXJuIGlucHV0Lmxlbmd0aCgpOyB9OworCX0KKworfQpcIE5vIG5ld2xp
bmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKc3IzMDgvdGVzdFNtb2tlL0Ffb3V0LmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4
L3Rlc3RTbW9rZS9BX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjU1MjU2MjkKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySnNyMzA4L3Rlc3RTbW9rZS9BX291dC5qYXZhCkBAIC0w
LDAgKzEsNTAgQEAKKy8qKgorICogVGVzdAorICoKKyAqLworcGFja2FnZSBwMS5wMi50ZXN0Owor
CitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv
bjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGlt
cGxlbWVudHMgUnVubmFibGUsCisJCUNsb25lYWJsZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMg
dm9pZCBydW4oKSB7CisJfQorCisJcHVibGljIHN0YXRpYyB2b2lkIGZvbygpIHRocm93cyBAQm9y
aW5nIEBEcmVhZGZ1bCgicmVhbGx5ISIpIElPRXhjZXB0aW9uIHsKKwkJQE5vbk51bGwKKwkJSW50
ZWdlciBhID0gY2FsbE1lKCk7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRhcygpIHsKKwkJUnVu
bmFibGUgYSA9ICgpIC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVzdE1ldCh5b3UpOwor
CQkJaGVyZS5udW1iZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEgPSB4IC0+IHg7CisK
KwkJRnVuYyBpZEIgPSB4IC0+IHsKKwkJCXJldHVybiB4OworCQl9OworCisJCUZ1bmMgaWRDID0g
eCAtPiB4OworCisJCUZ1bmMgaWQyID0geCAtPiB7CisJCQlpZiAoeCA9PSBudWxsKSB7CisJCQkJ
cmV0dXJuIG51bGw7CisJCQl9IGVsc2UKKwkJCQlyZXR1cm4geDsKKwkJfTsKKworCQlJbWFnaW5h
YmxlRnVuY3Rpb248QE5vbk51bGwgU3RyaW5nLCBJbnRlZ2VyPiBmID0gKEBOb25OdWxsIFN0cmlu
ZyBpbnB1dCkgLT4gaW5wdXQKKwkJCQkubGVuZ3RoKCk7CisKKwkJSW1hZ2luYWJsZUZ1bmN0aW9u
PEBOb25OdWxsIFN0cmluZywgQE5vbk51bGwgSW50ZWdlcj4gZjIgPSAoU3RyaW5nIGlucHV0KSAt
PiB7CisJCQlyZXR1cm4gaW5wdXQubGVuZ3RoKCk7CisJCX07CisJfQorCit9ClwgTm8gbmV3bGlu
ZSBhdCBlbmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0
dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZvcm1hdHRlclZpc2l0
b3IuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3JtYXR0ZXJWaXNpdG9yLmphdmEKaW5kZXggM2I0OWQz
ZC4uNjlhNzNmNSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZvcm1hdHRlclZpc2l0b3IuamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2Zvcm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhCkBAIC0zMiw2ICszMiw3
IEBACiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5BYnN0cmFj
dE1ldGhvZERlY2xhcmF0aW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5hc3QuQWJzdHJhY3RWYXJpYWJsZURlY2xhcmF0aW9uOwogaW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQWxsb2NhdGlvbkV4cHJlc3Npb247CitpbXBvcnQg
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbk1ldGhvZERl
Y2xhcmF0aW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3Qu
QXJndW1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5B
cnJheUFsbG9jYXRpb25FeHByZXNzaW9uOwpAQCAtNjM0LDE2ICs2MzUsNyBAQAogCiAJCXRoaXMu
c2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIs
IHRydWUpOwogCi0JCS8qCi0JCSAqIENoZWNrIGZvciBleHRyYSBkaW1lbnNpb25zCi0JCSAqLwot
CQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAoZXh0cmFEaW1l
bnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5zaW9uczsg
aSsrKSB7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZUxCUkFDS0VUKTsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJIH0KLQkJfQorCQlmb3JtYXRFeHRyYURp
bWVuc2lvbnMoZmllbGREZWNsYXJhdGlvbi50eXBlKTsKIAogCQkvKgogCQkgKiBGaWVsZCBpbml0
aWFsaXphdGlvbgpAQCAtNjgzLDYgKzY3NSw0MSBAQAogCQl9IGVsc2UgewogCQkJdGhpcy5zY3Jp
YmUuc3BhY2UoKTsKIAkJCXRoaXMuc2NyaWJlLnByaW50Q29tbWVudChDb2RlRm9ybWF0dGVyLktf
VU5LTk9XTiwgU2NyaWJlLkJBU0lDX1RSQUlMSU5HX0NPTU1FTlQpOworCQl9CisJfQorCisJcHJp
dmF0ZSB2b2lkIGZvcm1hdEV4dHJhRGltZW5zaW9ucyhUeXBlUmVmZXJlbmNlIHR5cGVSZWZlcmVu
Y2UpIHsKKwkJLyoKKwkJICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKKwkJICovCisJCWlu
dCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7CisJCWludCBhbmNob3IgPSB0eXBl
UmVmZXJlbmNlICE9IG51bGwgPyAodHlwZVJlZmVyZW5jZS5kaW1lbnNpb25zKCkgLSBleHRyYURp
bWVuc2lvbnMpIDogMDsKKwkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSBmb3JtYXREaW1lbnNp
b25zKHR5cGVSZWZlcmVuY2UsIGFuY2hvciwgZXh0cmFEaW1lbnNpb25zLCB0cnVlKTsKKwl9CisK
Kwlwcml2YXRlIHZvaWQgZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMoVHlwZVJlZmVyZW5jZSB0eXBl
UmVmZXJlbmNlLCBib29sZWFuIHNwYWNlQmVmb3JlQW5ub3RhdGlvbikgeworCQlpbnQgbGVhZGlu
Z0RpbWVuc2lvbnMgPSBNYXRoLm1pbihnZXREaW1lbnNpb25zKCksIHR5cGVSZWZlcmVuY2UgIT0g
bnVsbCA/IHR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpIDogMCk7CisJCWlmIChsZWFkaW5nRGlt
ZW5zaW9ucyAhPSAwKSBmb3JtYXREaW1lbnNpb25zKHR5cGVSZWZlcmVuY2UsIDAsIGxlYWRpbmdE
aW1lbnNpb25zLCBzcGFjZUJlZm9yZUFubm90YXRpb24pOworCX0KKworCXByaXZhdGUgdm9pZCBm
b3JtYXREaW1lbnNpb25zKFR5cGVSZWZlcmVuY2UgdHlwZVJlZmVyZW5jZSwgaW50IGFuY2hvciwg
aW50IGNvdW50LCBib29sZWFuIHNwYWNlQmVmb3JlQW5ub3RhdGlvbikgeworCQlpZiAoY291bnQg
IT0gMCkgeworCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVu
aW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKKwkJCQl0aGlzLnNjcmliZS5z
cGFjZSgpOworCQkJfQorCQkJQW5ub3RhdGlvbltdW10gYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMg
PSB0eXBlUmVmZXJlbmNlICE9IG51bGwgPyB0eXBlUmVmZXJlbmNlLmdldEFubm90YXRpb25zT25E
aW1lbnNpb25zKCkgOiBudWxsOworCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKykg
eworCQkJCWludCBkaW1lbnNpb25JbmRleCA9IGFuY2hvciArIGk7CisJCQkJaWYgKGFubm90YXRp
b25zT25EaW1lbnNpb25zICE9IG51bGwgJiYgYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMubGVuZ3Ro
ID4gZGltZW5zaW9uSW5kZXgpIHsKKwkJCQkJYm9vbGVhbiBoYWRBbm5vdGF0aW9ucyA9IGZvcm1h
dElubGluZUFubm90YXRpb25zKGFubm90YXRpb25zT25EaW1lbnNpb25zW2RpbWVuc2lvbkluZGV4
XSwgc3BhY2VCZWZvcmVBbm5vdGF0aW9uICYmIGkgPT0gMCk7CisJCQkJCWlmIChoYWRBbm5vdGF0
aW9ucyAmJiB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFj
a2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB0aGlzLnNjcmliZS5zcGFjZSgpOworCQkJCX0K
KwkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
TEJSQUNLRVQpOworCQkJIAlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vl
bl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJIAkJdGhpcy5zY3JpYmUu
c3BhY2UoKTsKKwkJCSAJfQorCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5h
bFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7CisJCQkgfQogCQl9CiAJfQogCkBAIC03NjMsMTYg
Kzc5MCw3IEBACiAJCQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVJZGVudGlmaWVyLCBmYWxzZSk7CiAJCQkJCX0KIAotCQkJCQkvKgotCQkJCQkg
KiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwotCQkJCQkgKi8KLQkJCQkJaW50IGV4dHJhRGlt
ZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAw
KSB7Ci0JCQkJCQkgZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IGV4dHJhRGltZW5zaW9uczsg
aW5kZXgrKykgewotCQkJCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCQkJCSB9Ci0JCQkJCX0K
KwkJCQkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKGZpZWxkRGVjbGFyYXRpb24udHlwZSk7CiAKIAkJ
CQkJLyoKIAkJCQkJICogRmllbGQgaW5pdGlhbGl6YXRpb24KQEAgLTE2NzcsMTYgKzE2OTUsNyBA
QAogCQkgCSovCiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5U
b2tlbk5hbWVJZGVudGlmaWVyLCBmYWxzZSk7CiAJCX0KLQkJLyoKLQkJICogQ2hlY2sgZm9yIGV4
dHJhIGRpbWVuc2lvbnMKLQkJICovCi0JCWludCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNp
b25zKCk7Ci0JCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewotCQkJIGZvciAoaW50IGluZGV4
ID0gMDsgaW5kZXggPCBleHRyYURpbWVuc2lvbnM7IGluZGV4KyspIHsKLQkJCSAJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJ
IAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJB
Q0tFVCk7Ci0JCQkgfQotCQl9CisJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhsb2NhbERlY2xhcmF0
aW9uLnR5cGUpOwogCiAJCWZpbmFsIEV4cHJlc3Npb24gaW5pdGlhbGl6YXRpb24gPSBsb2NhbERl
Y2xhcmF0aW9uLmluaXRpYWxpemF0aW9uOwogCQlpZiAoaW5pdGlhbGl6YXRpb24gIT0gbnVsbCkg
ewpAQCAtMjM0MCw2ICsyMzQ5LDggQEAKIAkJdGhpcy5sb2NhbFNjYW5uZXIucmVzZXRUbyh0aGlz
LnNjcmliZS5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbiwgdGhpcy5zY3JpYmUuc2Nhbm5lckVuZFBv
c2l0aW9uIC0gMSk7CiAJCWludCBkaW1lbnNpb25zID0gMDsKIAkJaW50IGJhbGFuY2UgPSAwOwor
CQlib29sZWFuIGluQW5ub3RhdGlvbiA9IGZhbHNlOworCQlpbnQgcGFyZW5CYWxhbmNlID0gMDsg
Ly8gZm9yIGlubGluZSBhbm5vdGF0aW9ucwogCQl0cnkgewogCQkJaW50IHRva2VuOwogCQkJbG9v
cDogd2hpbGUgKCh0b2tlbiA9IHRoaXMubG9jYWxTY2FubmVyLmdldE5leHRUb2tlbigpKSAhPSBU
ZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVFT0YpIHsKQEAgLTIzNDcsNiArMjM1OCwyMCBAQAogCQkJ
CQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUOgogCQkJCQkJZGltZW5zaW9u
cysrOwogCQkJCQkJYmFsYW5jZS0tOworCQkJCQkJYnJlYWs7CisJCQkJCWNhc2UgVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTFBBUkVOOgorCQkJCQkJcGFyZW5CYWxhbmNlKys7CisJCQkJCQlicmVh
azsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSUEFSRU46CisJCQkJCQlpZiAo
ISBpbkFubm90YXRpb24pIGJyZWFrIGxvb3A7CisJCQkJCQlpZiAoLS1wYXJlbkJhbGFuY2UgPT0g
MCkgaW5Bbm5vdGF0aW9uID0gZmFsc2U7CisJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5h
bFRva2Vucy5Ub2tlbk5hbWVBVCA6CisJCQkJCQlpbkFubm90YXRpb24gPSB0cnVlOworCQkJCQkJ
YnJlYWs7CisJCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciA6CisJ
CQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRVFVQUwgOgorCQkJCQkJaWYgKHBhcmVu
QmFsYW5jZSA9PSAwICYmICEgaW5Bbm5vdGF0aW9uKSBicmVhayBsb29wOwogCQkJCQkJYnJlYWs7
CiAJCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9DSyA6CiAJCQkJ
CWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoKQEAgLTIzNTYs
NyArMjM4MSw3IEBACiAJCQkJCQliYWxhbmNlKys7CiAJCQkJCQlicmVhazsKIAkJCQkJZGVmYXVs
dDoKLQkJCQkJCWJyZWFrIGxvb3A7CisJCQkJCQlpZiAocGFyZW5CYWxhbmNlID09IDApIGJyZWFr
IGxvb3A7CiAJCQkJfQogCQkJfQogCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7
CkBAIC0yNDAwLDYgKzI0MjUsMjggQEAKIAkJCQl9CiAJCQl9CiAJCQlyZXR1cm4gIHRva2VuID09
IHRva2VuTmFtZTsKKwkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgeworCQkJLy8g
aWdub3JlCisJCX0KKwkJcmV0dXJuIGZhbHNlOworCX0KKworCXByaXZhdGUgYm9vbGVhbiBpc05l
eHRUb2tlblB1bmN0dWF0aW9uKCkgeworCQl0aGlzLmxvY2FsU2Nhbm5lci5yZXNldFRvKHRoaXMu
c2NyaWJlLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uLCB0aGlzLnNjcmliZS5zY2FubmVyRW5kUG9z
aXRpb24gLSAxKTsKKwkJdHJ5IHsKKwkJCWludCB0b2tlbiA9IHRoaXMubG9jYWxTY2FubmVyLmdl
dE5leHRUb2tlbigpOworCQkJbG9vcDogd2hpbGUodHJ1ZSkgeworCQkJCXN3aXRjaCh0b2tlbikg
eworCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfQkxPQ0sgOgorCQkJ
CQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfSkFWQURPQyA6CisJCQkJCWNh
c2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9MSU5FIDoKKwkJCQkJCXRva2VuID0g
dGhpcy5sb2NhbFNjYW5uZXIuZ2V0TmV4dFRva2VuKCk7CisJCQkJCQljb250aW51ZSBsb29wOwor
CQkJCQlkZWZhdWx0OgorCQkJCQkJYnJlYWsgbG9vcDsKKwkJCQl9CisJCQl9CisJCQlyZXR1cm4g
ISAoU2Nhbm5lci5pc0xpdGVyYWwodG9rZW4pIHx8IFNjYW5uZXIuaXNLZXl3b3JkKHRva2VuKSB8
fCBTY2FubmVyLmlzSWRlbnRpZmllcih0b2tlbikpOwogCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4
Y2VwdGlvbiBlKSB7CiAJCQkvLyBpZ25vcmUKIAkJfQpAQCAtMjYyNCw4ICsyNjcxLDE1IEBACiAJ
CSAqLwogCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gYW5ub3RhdGlvblR5cGVNZW1iZXJEZWNsYXJh
dGlvbi5leHRlbmRlZERpbWVuc2lvbnM7CiAJCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewor
CQkJCisJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdf
YnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJCXRoaXMuc2NyaWJlLnNwYWNl
KCk7CisJCQl9CiAJCQkgZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lvbnM7IGkrKykg
ewogCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVMQlJBQ0tFVCk7CisJCQkgCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3
ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkgCQl0aGlzLnNjcmli
ZS5zcGFjZSgpOworCQkJIAl9CiAJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKIAkJCSB9CiAJCX0KQEAgLTI2ODEsMTggKzI3
MzUsNyBAQAogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lSWRlbnRpZmllciwgdHJ1ZSk7CiAJCX0KIAotCi0JCS8qCi0JCSAqIENoZWNrIGZvciBl
eHRyYSBkaW1lbnNpb25zCi0JCSAqLwotCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5z
aW9ucygpOwotCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpID0g
MDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4
dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCSAJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJ
IH0KLQkJfQotCisJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhhcmd1bWVudC50eXBlKTsKIAkJcmV0
dXJuIGZhbHNlOwogCX0KIApAQCAtMjcxNCw2ICsyNzU3LDkgQEAKIAkJCWZpbmFsIEV4cHJlc3Np
b25bXSBkaW1lbnNpb25zID0gYXJyYXlBbGxvY2F0aW9uRXhwcmVzc2lvbi5kaW1lbnNpb25zOwog
CQkJaW50IGRpbWVuc2lvbnNMZW5ndGggPSBkaW1lbnNpb25zLmxlbmd0aDsKIAkJCWZvciAoaW50
IGkgPSAwOyBpIDwgZGltZW5zaW9uc0xlbmd0aDsgaSsrKSB7CisJCQkJaWYgKGFycmF5QWxsb2Nh
dGlvbkV4cHJlc3Npb24uYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMgIT0gbnVsbCkgeworCQkJCQlm
b3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhcnJheUFsbG9jYXRpb25FeHByZXNzaW9uLmFubm90YXRp
b25zT25EaW1lbnNpb25zW2ldLCBpID09IDApOworCQkJCX0KIAkJCQlpZiAodGhpcy5wcmVmZXJl
bmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV9hbGxvY2F0
aW9uX2V4cHJlc3Npb24pIHsKIAkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKIAkJCQl9CkBAIC0y
ODk2LDMxICsyOTQyLDI5IEBACiAJCXJldHVybiBmYWxzZTsKIAl9CiAKKwlwcml2YXRlIHZvaWQg
Zm9ybWF0QXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKEFycmF5UXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHsKKwkJZmluYWwgaW50IG51bWJlck9m
UGFyZW5zID0gKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJl
bnRoZXNpemVkTUFTSykgPj4gQVNUTm9kZS5QYXJlbnRoZXNpemVkU0hJRlQ7CisJCWlmIChudW1i
ZXJPZlBhcmVucyA+IDApIHsKKwkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lv
bihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKKwkJfQorCQlm
b3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7
CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwg
dHJ1ZSk7CisJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKKwkJCW1hbmFnZUNsb3NpbmdQYXJl
bnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9m
UGFyZW5zKTsKKwkJfQorCX0KKwogCS8qKgogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvbXBpbGVyLkFTVFZpc2l0b3IjdmlzaXQob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLmFzdC5BcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5sb29rdXAuQmxvY2tTY29wZSkKIAkgKi8KIAlwdWJsaWMgYm9vbGVh
biB2aXNpdCgKLQkJQXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIGFycmF5UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSwKLQkJQmxvY2tTY29wZSBzY29wZSkgeworCQkJQXJyYXlRdWFsaWZpZWRUeXBl
UmVmZXJlbmNlIGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwKKwkJCUJsb2NrU2NvcGUgc2Nv
cGUpIHsKIAotCQkJZmluYWwgaW50IG51bWJlck9mUGFyZW5zID0gKGFycmF5UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJlbnRoZXNpemVkTUFTSykgPj4gQVNUTm9kZS5Q
YXJlbnRoZXNpemVkU0hJRlQ7Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7Ci0JCQkJbWFu
YWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQotCQkJdGhpcy5zY3JpYmUucHJpbnRBcnJheVF1
YWxpZmllZFJlZmVyZW5jZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zLmxlbmd0
aCwgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCk7Ci0JCQlpbnQgZGltZW5z
aW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCWlmIChkaW1lbnNpb25zICE9IDApIHsKLQkJCQlm
b3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJCXRo
aXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VU
KTsKLQkJCQl9Ci0JCQl9Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7Ci0JCQkJbWFuYWdl
Q2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQorCQkJZm9ybWF0QXJyYXlRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7CiAJCQlyZXR1cm4gZmFsc2U7CiAJ
fQotCisJCiAJLyoqCiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIu
QVNUVmlzaXRvciN2aXNpdChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmxvb2t1cC5DbGFzc1Njb3BlKQogCSAqLwpAQCAtMjkyOCwyNCArMjk3Miw5IEBACiAJCUFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsCiAJ
CUNsYXNzU2NvcGUgc2NvcGUpIHsKIAotCQkJZmluYWwgaW50IG51bWJlck9mUGFyZW5zID0gKGFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJlbnRoZXNpemVkTUFT
SykgPj4gQVNUTm9kZS5QYXJlbnRoZXNpemVkU0hJRlQ7Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMg
PiAwKSB7Ci0JCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQotCQkJdGhpcy5zY3Jp
YmUucHJpbnRBcnJheVF1YWxpZmllZFJlZmVyZW5jZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UudG9rZW5zLmxlbmd0aCwgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCk7
Ci0JCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCWlmIChkaW1lbnNpb25z
ICE9IDApIHsKLQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJ
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJB
Q0tFVCk7Ci0JCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZVJCUkFDS0VUKTsKLQkJCQl9Ci0JCQl9Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAw
KSB7Ci0JCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlm
aWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQorCQkJZm9ybWF0QXJyYXlR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7CiAJCQly
ZXR1cm4gZmFsc2U7CiAJfQotCiAKIAkvKioKIAkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb21waWxlci5BU1RWaXNpdG9yI3Zpc2l0KG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5hc3QuQXJyYXlSZWZlcmVuY2UsIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5sb29rdXAuQmxvY2tTY29wZSkKQEAgLTI5ODEsMjAgKzMwMTAsMTggQEAKIAkJaWYgKG51
bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNz
aW9uKGFycmF5VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChhcnJh
eVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlv
bnMoYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFNJTkdMRVRZUEVSRUZFUkVOQ0VfRVhQRUNURURUT0tFTlMpOwog
CiAJCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwogCQlpZiAoZGltZW5zaW9ucyAh
PSAwKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNw
YWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewot
CQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxC
UkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9i
cmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFj
ZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQl9CisJCQlmb3JtYXREaW1lbnNpb25zKGFycmF5VHlw
ZVJlZmVyZW5jZSwgMCwgZGltZW5zaW9ucywgdHJ1ZSk7CisJCX0KKwkJLy8gZGltZW5zaW9ucyB0
aGUgbnVtYmVyIG9mIHZpc2libGUgYnJhY2tldC1wYWlycy4gRWxsaXBzaXMgaXMgYW4gZXh0cmEg
ZGltZW5zaW9uCisJCWlmICgoYXJyYXlUeXBlUmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLklzVmFy
QXJncykgIT0gMAorCQkJCSYmIGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09uRGltZW5z
aW9ucyAhPSBudWxsCisJCQkJJiYgYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zT25EaW1l
bnNpb25zLmxlbmd0aCA+IGRpbWVuc2lvbnMpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9u
cyhhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnNbZGltZW5zaW9uc10s
IHRydWUpOwogCQl9CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3Np
bmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFy
ZW5zKTsKQEAgLTMwMTMsMTkgKzMwNDAsMTcgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkg
ewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5VHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChhcnJheVR5cGVSZWZlcmVuY2UuYW5u
b3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYXJyYXlUeXBlUmVmZXJl
bmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFNJTkdMRVRZUEVSRUZFUkVOQ0VfRVhQRUNURURUT0tFTlMpOwogCQlpbnQgZGltZW5zaW9ucyA9
IGdldERpbWVuc2lvbnMoKTsKIAkJaWYgKGRpbWVuc2lvbnMgIT0gMCkgewotCQkJaWYgKHRoaXMu
cHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlf
dHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJZm9y
IChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5wcmlu
dE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYgKHRo
aXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlfdHlw
ZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJdGhp
cy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQp
OwotCQkJfQorCQkJZm9ybWF0RGltZW5zaW9ucyhhcnJheVR5cGVSZWZlcmVuY2UsIDAsIGRpbWVu
c2lvbnMsIHRydWUpOworCQl9CisJCS8vIGRpbWVuc2lvbnMgdGhlIG51bWJlciBvZiB2aXNpYmxl
IGJyYWNrZXQtcGFpcnMuIEVsbGlwc2lzIGlzIGFuIGV4dHJhIGRpbWVuc2lvbgorCQlpZiAoKGFy
cmF5VHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5Jc1ZhckFyZ3MpICE9IDAKKwkJCQkmJiBh
cnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMgIT0gbnVsbAorCQkJCSYm
IGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09uRGltZW5zaW9ucy5sZW5ndGggPiBkaW1l
bnNpb25zKSB7CisJCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYXJyYXlUeXBlUmVmZXJlbmNl
LmFubm90YXRpb25zT25EaW1lbnNpb25zW2RpbWVuc2lvbnNdLCB0cnVlKTsKIAkJfQogCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJl
c3Npb24oYXJyYXlUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CkBAIC00NTIwLDE2ICs0
NTQ1LDcgQEAKIAkJCQkJdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfY29tbWFf
aW5fbWV0aG9kX2RlY2xhcmF0aW9uX3BhcmFtZXRlcnMsCiAJCQkJCXRoaXMucHJlZmVyZW5jZXMu
YWxpZ25tZW50X2Zvcl9wYXJhbWV0ZXJzX2luX21ldGhvZF9kZWNsYXJhdGlvbik7CiAKLQkJCQkv
KgotCQkJCSAqIENoZWNrIGZvciBleHRyYSBkaW1lbnNpb25zCi0JCQkJICovCi0JCQkJaW50IGV4
dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCQlpZiAoZXh0cmFEaW1lbnNpb25z
ICE9IDApIHsKLQkJCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKysp
IHsKLQkJCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tl
bk5hbWVMQlJBQ0tFVCk7Ci0JCQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJCQkgfQotCQkJCX0KKwkJCQlmb3JtYXRF
eHRyYURpbWVuc2lvbnMobWV0aG9kRGVjbGFyYXRpb24ucmV0dXJuVHlwZSk7CiAKIAkJCQkvLyBG
b3JtYXQgdGhyb3dzCiAJCQkJZm9ybWF0VGhyb3dzQ2xhdXNlKApAQCAtNDY2NSw2ICs0NjgxLDcg
QEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhl
c2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1i
ZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRl
cml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCVR5
cGVSZWZlcmVuY2VbXVtdIHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOwogCQlpbnQgbGVuZ3RoID0gdHlwZUFyZ3VtZW50cy5s
ZW5ndGg7CiAJCWZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKQEAgLTQ2OTUsMjEg
KzQ3MTIsMTIgQEAKIAkJCX0KIAkJCWlmIChpIDwgbGVuZ3RoIC0gMSkgewogCQkJCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZURPVCk7Ci0JCQl9Ci0J
CX0KLQkJaW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChkaW1lbnNpb25z
ICE9IDAgJiYgZGltZW5zaW9ucyA8PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZS5kaW1lbnNpb25zKCkpIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9i
ZWZvcmVfb3BlbmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJdGhp
cy5zY3JpYmUuc3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9u
czsgaSsrKSB7Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFj
ZV9iZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJCXRoaXMu
c2NyaWJlLnNwYWNlKCk7CisJCQkJaWYgKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLmFubm90YXRpb25zICE9IG51bGwgJiYgcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZl
cmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoID4gaSsxKSB7CisJCQkJCWZvcm1hdElubGluZUFubm90
YXRpb25zKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2kr
MV0sIGZhbHNlKTsKIAkJCQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwogCQkJfQogCQl9CisJCWZvcm1hdExlYWRpbmdE
aW1lbnNpb25zKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVlKTsKIAkJ
aWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRF
eHByZXNzaW9uKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBh
cmVucyk7CiAJCX0KQEAgLTQ3MjIsNiArNDczMCw3IEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+
IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJp
emVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChw
YXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBm
b3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQlUeXBlUmVmZXJlbmNlW11bXSB0eXBlQXJndW1l
bnRzID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50czsK
IAkJaW50IGxlbmd0aCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOwogCQlmb3IgKGludCBpID0gMDsg
aSA8IGxlbmd0aDsgaSsrKSB7CkBAIC00NzUzLDIwICs0NzYyLDExIEBACiAJCQlpZiAoaSA8IGxl
bmd0aCAtIDEpIHsKIAkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVET1QpOwogCQkJfQotCQl9Ci0JCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5z
aW9ucygpOwotCQlpZiAoZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0gcGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlpZiAodGhpcy5w
cmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90
eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3Ig
KGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50
TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhp
cy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBl
X3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7
CisJCQlpZiAocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMg
IT0gbnVsbCAmJiBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9u
cy5sZW5ndGggPiBpKzEpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJp
emVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpKzFdLCBmYWxzZSk7CiAJCQl9
CiAJCX0KKwkJZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UsIHRydWUpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5h
Z2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQpAQCAtNDc3OSw2ICs0Nzc5LDcgQEAK
IAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6
ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBh
cmVucyk7CiAJCX0KKwkJaWYgKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90
YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRlcml6ZWRTaW5n
bGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnBy
aW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCiAJCVR5
cGVSZWZlcmVuY2VbXSB0eXBlQXJndW1lbnRzID0gcGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZl
cmVuY2UudHlwZUFyZ3VtZW50czsKQEAgLTQ4MDQsMTkgKzQ4MDUsNyBAQAogCQkJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oQ0xPU0lOR19HRU5FUklDU19FWFBFQ1RFRFRPS0VOUyk7CiAJCX0K
IAotCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMg
IT0gMCAmJiBkaW1lbnNpb25zIDw9IHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmRp
bWVuc2lvbnMoKSkgewotCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9y
ZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNj
cmliZS5zcGFjZSgpOwotCQkJfQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBp
KyspIHsKLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tl
bk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2Jl
dHdlZW5fYnJhY2tldHNfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3Jp
YmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJfQotCQl9CisJCWZvcm1hdExlYWRpbmdE
aW1lbnNpb25zKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBmYWxzZSk7CiAJCWlm
IChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhw
cmVzc2lvbihwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMp
OwogCQl9CkBAIC00ODI5LDYgKzQ4MTgsNyBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7
CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFNp
bmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAocGFyYW1ldGVy
aXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5l
QW5ub3RhdGlvbnMocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNb
MF0sIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lSWRlbnRpZmllcik7CiAKIAkJVHlwZVJlZmVyZW5jZVtdIHR5cGVBcmd1bWVudHMg
PSBwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOwpAQCAtNDg1
NCwxOSArNDg0NCw3IEBACiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihDTE9TSU5HX0dF
TkVSSUNTX0VYUEVDVEVEVE9LRU5TKTsKIAkJfQogCi0JCWludCBkaW1lbnNpb25zID0gZ2V0RGlt
ZW5zaW9ucygpOwotCQlpZiAoZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0gcGFyYW1l
dGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlpZiAodGhpcy5w
cmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90
eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3Ig
KGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50
TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhp
cy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBl
X3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7
Ci0JCQl9Ci0JCX0KKwkJZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVyaXplZFNpbmds
ZVR5cGVSZWZlcmVuY2UsIGZhbHNlKTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJ
bWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRTaW5nbGVU
eXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KQEAgLTUwODcsMTIgKzUwNjUsMjUg
QEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhl
c2l6ZWRFeHByZXNzaW9uKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsK
IAkJfQotCQl0aGlzLnNjcmliZS5wcmludFF1YWxpZmllZFJlZmVyZW5jZShxdWFsaWZpZWRUeXBl
UmVmZXJlbmNlLnNvdXJjZUVuZCwgbnVtYmVyT2ZQYXJlbnM+PTAvKmV4cGVjdCBwYXJlbnRoZXNp
cyovKTsKLQorCQlmb3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKHF1YWxpZmllZFR5cGVSZWZl
cmVuY2UpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFy
ZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJl
bnMpOwogCQl9CiAJCXJldHVybiBmYWxzZTsKKwl9CisKKwlwcml2YXRlIHZvaWQgZm9ybWF0UXVh
bGlmaWVkVHlwZVJlZmVyZW5jZShRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIHF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UpIHsKKwkJZm9yIChpbnQgaSA9IDA7IGkgPCBxdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LnRva2Vucy5sZW5ndGg7ICsraSkgeworCQkJaWYgKGkgIT0gMCkgdGhpcy5zY3JpYmUucHJpbnRO
ZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRE9ULCBmYWxzZSk7CisJCQlpZiAocXVh
bGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsCisJCQkJCSYmIHF1YWxpZmll
ZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMubGVuZ3RoID4gaQorCQkJCQkmJiBxdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2ldICE9IG51bGwpIHsKKwkJCQlmb3JtYXRJbmxpbmVB
bm5vdGF0aW9ucyhxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2ldLCBmYWxzZSk7
CisJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
SWRlbnRpZmllciwgdHJ1ZSk7CisJCQl9IGVsc2UgeworCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4
dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIsIGZhbHNlKTsKKwkJCX0K
KwkJfQogCX0KIAogCS8qKgpAQCAtNTEwNiw3ICs1MDk3LDcgQEAKIAkJCWlmIChudW1iZXJPZlBh
cmVucyA+IDApIHsKIAkJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQkJfQotCQkJdGhpcy5zY3Jp
YmUucHJpbnRRdWFsaWZpZWRSZWZlcmVuY2UocXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5zb3VyY2VF
bmQsIG51bWJlck9mUGFyZW5zPj0wLypleHBlY3QgcGFyZW50aGVzaXMqLyk7CisJCQlmb3JtYXRR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCiAJCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHBy
ZXNzaW9uKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKQEAgLTUxODQs
NiArNTE3NSw3IEBACiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZVJQQVJFTiwgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX2Ns
b3NpbmdfcGFyZW5faW5fYW5ub3RhdGlvbik7CiAJCXJldHVybiBmYWxzZTsKIAl9CisJCiAJLyoq
CiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuQVNUVmlzaXRvciN2
aXNpdChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlNpbmdsZU5hbWVSZWZl
cmVuY2UsIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuQmxvY2tTY29w
ZSkKIAkgKi8KQEAgLTUyMTIsMTIgKzUyMDQsMzAgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4g
MCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHNpbmdsZVR5cGVS
ZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAoc2luZ2xlVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhzaW5nbGVUeXBl
UmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4
dFRva2VuKFNJTkdMRVRZUEVSRUZFUkVOQ0VfRVhQRUNURURUT0tFTlMpOwogCiAJCWlmIChudW1i
ZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lv
bihzaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KIAkJcmV0dXJuIGZh
bHNlOworCX0KKworCXByaXZhdGUgYm9vbGVhbiBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhmaW5h
bCBBbm5vdGF0aW9uW10gYW5ub3RhdGlvbnMsIGJvb2xlYW4gc3BhY2VCZWZvcmUpIHsKKwkJaWYg
KGFubm90YXRpb25zICE9IG51bGwgKSB7CisJCQlpZiAoc3BhY2VCZWZvcmUpIHRoaXMuc2NyaWJl
LnNwYWNlKCk7CisKKwkJCWZvciAoaW50IGkgPSAwOyBpIDwgYW5ub3RhdGlvbnMubGVuZ3RoOyAr
K2kpIHsKKwkJCQlpZiAoaSAhPSAwKSB0aGlzLnNjcmliZS5zcGFjZSgpOworCQkJCWFubm90YXRp
b25zW2ldLnRyYXZlcnNlKHRoaXMsIChCbG9ja1Njb3BlKW51bGwpOworCQkJfQorCQkJaWYgKGFu
bm90YXRpb25zLmxlbmd0aCA+IDAgJiYgISB0aGlzLmlzTmV4dFRva2VuUHVuY3R1YXRpb24oKSkg
eworCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCQl9CisJCQlyZXR1cm4gdHJ1ZTsKKwkJfSBl
bHNlIHsKKwkJCXJldHVybiBmYWxzZTsKKwkJfQogCX0KIAogCS8qKgpAQCAtNTIzMSw2ICs1MjQx
LDcgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVu
dGhlc2l6ZWRFeHByZXNzaW9uKHNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsK
IAkJfQorCQlpZiAoc2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3Jt
YXRJbmxpbmVBbm5vdGF0aW9ucyhzaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBm
YWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFNJTkdMRVRZUEVSRUZFUkVOQ0Vf
RVhQRUNURURUT0tFTlMpOwogCiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKQEAgLTU2ODgs
NiArNTY5OSw3IEBACiAJCXJldHVybiBmYWxzZTsKIAl9CiAJcHVibGljIGJvb2xlYW4gdmlzaXQo
VHlwZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyLCBCbG9ja1Njb3BlIHNjb3BlKSB7CisJCWlmICh0
eXBlUGFyYW1ldGVyLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25z
KHR5cGVQYXJhbWV0ZXIuYW5ub3RhdGlvbnMsIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnRO
ZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllcik7CiAJCWlmICh0eXBl
UGFyYW1ldGVyLnR5cGUgIT0gbnVsbCkgewogCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKQEAgLTU3
MTQsNiArNTcyNiw3IEBACiAJCXJldHVybiBmYWxzZTsKIAl9CiAJcHVibGljIGJvb2xlYW4gdmlz
aXQoVHlwZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyLCBDbGFzc1Njb3BlIHNjb3BlKSB7CisJCWlm
ICh0eXBlUGFyYW1ldGVyLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRp
b25zKHR5cGVQYXJhbWV0ZXIuYW5ub3RhdGlvbnMsIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJp
bnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllcik7CiAJCWlmICh0
eXBlUGFyYW1ldGVyLnR5cGUgIT0gbnVsbCkgewogCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKQEAg
LTU5MDAsNiArNTkxMyw5IEBACiAJCXJldHVybiBmYWxzZTsKIAl9CiAJcHVibGljIGJvb2xlYW4g
dmlzaXQoV2lsZGNhcmQgd2lsZGNhcmQsIEJsb2NrU2NvcGUgc2NvcGUpIHsKKwkJaWYgKHdpbGRj
YXJkLmFubm90YXRpb25zICE9IG51bGwpIHsKKwkJCWlmIChmb3JtYXRJbmxpbmVBbm5vdGF0aW9u
cyh3aWxkY2FyZC5hbm5vdGF0aW9uc1swXSwgZmFsc2UpKSB0aGlzLnNjcmliZS5zcGFjZSgpOwor
CQl9CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZVFVRVNUSU9OLCB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfcXVlc3Rpb25f
aW5fd2lsY2FyZCk7CiAJCXN3aXRjaCh3aWxkY2FyZC5raW5kKSB7CiAJCQljYXNlIFdpbGRjYXJk
LlNVUEVSIDoKQEAgLTU5MjAsNiArNTkzNiw5IEBACiAJCXJldHVybiBmYWxzZTsKIAl9CiAJcHVi
bGljIGJvb2xlYW4gdmlzaXQoV2lsZGNhcmQgd2lsZGNhcmQsIENsYXNzU2NvcGUgc2NvcGUpIHsK
KwkJaWYgKHdpbGRjYXJkLmFubm90YXRpb25zICE9IG51bGwpIHsKKwkJCWlmIChmb3JtYXRJbmxp
bmVBbm5vdGF0aW9ucyh3aWxkY2FyZC5hbm5vdGF0aW9uc1swXSwgZmFsc2UpKSB0aGlzLnNjcmli
ZS5zcGFjZSgpOworCQl9CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZVFVRVNUSU9OLCB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZv
cmVfcXVlc3Rpb25faW5fd2lsY2FyZCk7CiAJCXN3aXRjaCh3aWxkY2FyZC5raW5kKSB7CiAJCQlj
YXNlIFdpbGRjYXJkLlNVUEVSIDoKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zv
cm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL1NjcmliZS5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9m
b3JtYXR0ZXIvU2NyaWJlLmphdmEKaW5kZXggY2VkNTY4Ni4uYWMwZTNiZCAxMDA2NDQKLS0tIGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9m
b3JtYXR0ZXIvU2NyaWJlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmphdmEKQEAgLTUsOSAr
NSwxNCBAQAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBh
dmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1s
CiAgKiAKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3Bl
Y2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNz
IChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBw
dXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3Bl
Y2lmaWNhdGlvbiBvZiB0aGUgSkNQLgorICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJN
IENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAgUmF5
IFYuICh2b2lkc3RhckBnbWFpbC5jb20pIC0gQ29udHJpYnV0aW9uIGZvciBidWcgMjgyOTg4Cisg
KiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9uIGZvciBidWcgNDAwODMwCiAgKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZv
cm1hdHRlcjsKIApAQCAtNDkyMyw1MyArNDkyOCw2IEBACiAJCQl9CiAJCQlwcmludCh0aGlzLnNj
YW5uZXIuY3VycmVudFBvc2l0aW9uIC0gdGhpcy5zY2FubmVyLnN0YXJ0UG9zaXRpb24sIGNvbnNp
ZGVyU3BhY2VJZkFueSk7CiAJCX0gY2F0Y2ggKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7Ci0J
CQl0aHJvdyBuZXcgQWJvcnRGb3JtYXR0aW5nKGUpOwotCQl9Ci0JfQotCi0JcHVibGljIHZvaWQg
cHJpbnRBcnJheVF1YWxpZmllZFJlZmVyZW5jZShpbnQgbnVtYmVyT2ZUb2tlbnMsIGludCBzb3Vy
Y2VFbmQpIHsKLQkJaW50IGN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIu
Y3VycmVudFBvc2l0aW9uOwotCQlpbnQgbnVtYmVyT2ZJZGVudGlmaWVycyA9IDA7Ci0JCXRyeSB7
Ci0JCQlkbyB7Ci0JCQkJcHJpbnRDb21tZW50KENvZGVGb3JtYXR0ZXIuS19VTktOT1dOLCBOT19U
UkFJTElOR19DT01NRU5UKTsKLQkJCQlzd2l0Y2godGhpcy5jdXJyZW50VG9rZW4gPSB0aGlzLnNj
YW5uZXIuZ2V0TmV4dFRva2VuKCkpIHsKLQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVFT0YgOgotCQkJCQkJcmV0dXJuOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZVdISVRFU1BBQ0UgOgotCQkJCQkJYWRkRGVsZXRlRWRpdCh0aGlzLnNjYW5uZXIuZ2V0Q3VycmVu
dFRva2VuU3RhcnRQb3NpdGlvbigpLCB0aGlzLnNjYW5uZXIuZ2V0Q3VycmVudFRva2VuRW5kUG9z
aXRpb24oKSk7Ci0JCQkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVy
LmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZUNPTU1FTlRfQkxPQ0sgOgotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2Vu
TmFtZUNPTU1FTlRfSkFWQURPQyA6Ci0JCQkJCQlwcmludEJsb2NrQ29tbWVudChmYWxzZSk7Ci0J
CQkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQb3Np
dGlvbjsKLQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNP
TU1FTlRfTElORSA6Ci0JCQkJCQlwcmludExpbmVDb21tZW50KCk7Ci0JCQkJCQljdXJyZW50VG9r
ZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWJy
ZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIgOgotCQkJ
CQkJcHJpbnQodGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbiAtIHRoaXMuc2Nhbm5lci5zdGFy
dFBvc2l0aW9uLCBmYWxzZSk7Ci0JCQkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhp
cy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWlmICgrKyBudW1iZXJPZklkZW50aWZp
ZXJzID09IG51bWJlck9mVG9rZW5zKSB7Ci0JCQkJCQkJdGhpcy5zY2FubmVyLnJlc2V0VG8oY3Vy
cmVudFRva2VuU3RhcnRQb3NpdGlvbiwgdGhpcy5zY2FubmVyRW5kUG9zaXRpb24gLSAxKTsKLQkJ
CQkJCQlyZXR1cm47Ci0JCQkJCQl9Ci0JCQkJCQlicmVhazsKLQkJCQkJY2FzZSBUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVET1QgOgotCQkJCQkJcHJpbnQodGhpcy5zY2FubmVyLmN1cnJlbnRQb3Np
dGlvbiAtIHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0aW9uLCBmYWxzZSk7Ci0JCQkJCQljdXJyZW50
VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJ
CWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJQQVJFTjoKLQkJCQkJ
CWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlvbjsK
LQkJCQkJCS8vICRGQUxMLVRIUk9VR0gkIC0gZmFsbCB0aHJvdWdoIGRlZmF1bHQgY2FzZS4uLgot
CQkJCQlkZWZhdWx0OgotCQkJCQkJdGhpcy5zY2FubmVyLnJlc2V0VG8oY3VycmVudFRva2VuU3Rh
cnRQb3NpdGlvbiwgdGhpcy5zY2FubmVyRW5kUG9zaXRpb24gLSAxKTsKLQkJCQkJCXJldHVybjsK
LQkJCQl9Ci0JCQl9IHdoaWxlICh0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uIDw9IHNvdXJj
ZUVuZCk7Ci0JCX0gY2F0Y2goSW52YWxpZElucHV0RXhjZXB0aW9uIGUpIHsKIAkJCXRocm93IG5l
dyBBYm9ydEZvcm1hdHRpbmcoZSk7CiAJCX0KIAl9
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>228328</attachid>
            <date>2013-03-13 05:11:00 -0400</date>
            <delta_ts>2013-03-14 04:51:54 -0400</delta_ts>
            <desc>&quot;Total&quot; patch, where I&apos;d renamed the test class to Formatter18Tests</desc>
            <filename>patch-formatter-tests.txt</filename>
            <type>text/plain</type>
            <size>49201</size>
            <attacher name="Jesper Moller">jesper</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbApkaWZmIC0tZ2l0IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9SdW5G
b3JtYXR0ZXJUZXN0cy5qYXZhIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3Jt
YXR0ZXJUZXN0cy5qYXZhCmluZGV4IGRhNzI1NTYuLjYzZTc1ZTggMTAwNjQ0Ci0tLSBzcmMvb3Jn
L2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuRm9ybWF0dGVyVGVzdHMuamF2YQorKysgc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkZvcm1hdHRlclRlc3RzLmphdmEKQEAgLTQsOSAr
NCwxNCBAQAogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNs
aXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3Ry
aWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9s
ZWdhbC9lcGwtdjEwLmh0bWwKKyAqIAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBh
biBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICog
Q29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5n
IGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0
aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCiAgKgogICogQ29udHJpYnV0
b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRh
dGlvbgorICogICAgIEplc3BlciBTIE1vbGxlciAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDQwMDgz
MAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzOwogCkBAIC0zMSw2ICszNiw3IEBACiAJc3RhdGljIHsKIAkJVEVTVF9TVUlURVMuYWRk
KEZvcm1hdHRlckNvbW1lbnRzQnVnc1Rlc3QuY2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9y
bWF0dGVyQ29tbWVudHNUZXN0cy5jbGFzcyk7CisJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXIx
OFRlc3RzLmNsYXNzKTsKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckNvbW1lbnRzQ2xlYXJC
bGFua0xpbmVzVGVzdHMuY2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVySmF2YWRv
Y0RvbnRJbmRlbnRUYWdzVGVzdHMuY2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVy
SmF2YWRvY0RvbnRJbmRlbnRUYWdzRGVzY3JpcHRpb25UZXN0cy5jbGFzcyk7CmRpZmYgLS1naXQg
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXIxOFRlc3Rz
LmphdmEgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXIx
OFRlc3RzLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYTVkY2VhZQot
LS0gL2Rldi9udWxsCisrKyBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvZm9ybWF0dGVy
L0Zvcm1hdHRlcjE4VGVzdHMuamF2YQpAQCAtMCwwICsxLDM0OSBAQAorLyoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioKKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9yYXRpb24gYW5k
IG90aGVycy4KKyAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFj
Y29tcGFueWluZyBtYXRlcmlhbHMKKyAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVy
bXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAorICogd2hpY2ggYWNjb21wYW5p
ZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKKyAqIGh0dHA6Ly93d3cu
ZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCisgKiAKKyAqIENvbnRyaWJ1dG9yczoKKyAq
ICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAq
ICAgICBCcm9jayBKYW5pY3phayAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDE1MDc0MQorICogICAg
IFJheSBWLiAodm9pZHN0YXJAZ21haWwuY29tKSAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDI4Mjk4
OAorICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKiovCitwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLmZvcm1hdHRlcjsKKworaW1wb3J0IGphdmEudXRpbC5NYXA7CisKK2ltcG9ydCBqdW5p
dC5mcmFtZXdvcmsuVGVzdDsKKworaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucmVzb3VyY2VzLklX
b3Jrc3BhY2VEZXNjcmlwdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5JQ29tcGls
YXRpb25Vbml0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklKYXZhUHJvamVjdDsKK2lt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRpb247CitpbXBvcnQgb3Jn
LmVjbGlwc2UuamR0LmNvcmUuZm9ybWF0dGVyLkNvZGVGb3JtYXR0ZXI7CitpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwuQWJzdHJhY3RKYXZhTW9kZWxUZXN0czsKK2ltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy51dGlsLlV0aWw7CitpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmNvbXBpbGVyLmltcGwuQ29tcGlsZXJPcHRpb25zOworaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXIuRGVmYXVsdENvZGVGb3JtYXR0ZXI7Citp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZvcm1hdHRlci5EZWZhdWx0Q29kZUZvcm1h
dHRlck9wdGlvbnM7CitpbXBvcnQgb3JnLmVjbGlwc2UudGV4dC5lZGl0cy5UZXh0RWRpdDsKKwor
cHVibGljIGNsYXNzIEZvcm1hdHRlcjE4VGVzdHMgZXh0ZW5kcyBBYnN0cmFjdEphdmFNb2RlbFRl
c3RzIHsKKworCXByb3RlY3RlZCBzdGF0aWMgSUphdmFQcm9qZWN0IEpBVkFfUFJPSkVDVDsKKwor
CXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVOS05PV05fS0lORCA9IDA7CisJcHVibGljIHN0YXRp
YyBmaW5hbCBTdHJpbmcgSU4gPSAiX2luIjsKKwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBP
VVQgPSAiX291dCI7CisJcHVibGljIHN0YXRpYyBmaW5hbCBib29sZWFuIERFQlVHID0gZmFsc2U7
CisJc3RhdGljIGZpbmFsIFN0cmluZyBMSU5FX1NFUEFSQVRPUiA9IFN5c3RlbS5nZXRQcm9wZXJ0
eSgibGluZS5zZXBhcmF0b3IiKTsKKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJPSkVD
VF9OQU1FID0gIkZvcm1hdHRlcjE4IjsgCisJcHJpdmF0ZSBsb25nIHRpbWU7CisKKwlEZWZhdWx0
Q29kZUZvcm1hdHRlck9wdGlvbnMgZm9ybWF0dGVyUHJlZnM7CisJTWFwIGZvcm1hdHRlck9wdGlv
bnM7CisKKwlzdGF0aWMgeworLy8JCVRFU1RTX05VTUJFUlMgPSBuZXcgaW50W10geyA3ODMgfTsK
Ky8vCQlURVNUU19SQU5HRSA9IG5ldyBpbnRbXSB7IDczNCwgLTEgfTsKKwl9CisJcHVibGljIHN0
YXRpYyBUZXN0IHN1aXRlKCkgeworCQlyZXR1cm4gYnVpbGRNb2RlbFRlc3RTdWl0ZShGb3JtYXR0
ZXIxOFRlc3RzLmNsYXNzKTsKKwl9CisKKwlwdWJsaWMgRm9ybWF0dGVyMThUZXN0cyhTdHJpbmcg
bmFtZSkgeworCQlzdXBlcihuYW1lKTsKKwl9CisKKwlTdHJpbmcgcnVuRm9ybWF0dGVyKENvZGVG
b3JtYXR0ZXIgY29kZUZvcm1hdHRlciwgU3RyaW5nIHNvdXJjZSwgaW50IGtpbmQsIGludCBpbmRl
bnRhdGlvbkxldmVsLCBpbnQgb2Zmc2V0LCBpbnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRv
ciwgYm9vbGVhbiByZXBlYXQpIHsKKy8vCQlsb25nIHRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVN
aWxsaXMoKTsKKwkJVGV4dEVkaXQgZWRpdCA9IGNvZGVGb3JtYXR0ZXIuZm9ybWF0KGtpbmQsIHNv
dXJjZSwgb2Zmc2V0LCBsZW5ndGgsIGluZGVudGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8v
JE5PTi1OTFMtMSQKKy8vCQlTeXN0ZW0ub3V0LnByaW50bG4oKFN5c3RlbS5jdXJyZW50VGltZU1p
bGxpcygpIC0gdGltZSkgKyAiIG1zIik7CisJCWlmIChlZGl0ID09IG51bGwpIHJldHVybiBudWxs
OworLy8JCVN5c3RlbS5vdXQucHJpbnRsbihlZGl0LmdldENoaWxkcmVuU2l6ZSgpICsgIiBlZGl0
cyIpOworCQlTdHJpbmcgcmVzdWx0ID0gb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUudXRp
bC5VdGlsLmVkaXRlZFN0cmluZyhzb3VyY2UsIGVkaXQpOworCisJCWlmIChyZXBlYXQgJiYgbGVu
Z3RoID09IHNvdXJjZS5sZW5ndGgoKSkgeworLy8JCQl0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1l
TWlsbGlzKCk7CisJCQllZGl0ID0gY29kZUZvcm1hdHRlci5mb3JtYXQoa2luZCwgcmVzdWx0LCAw
LCByZXN1bHQubGVuZ3RoKCksIGluZGVudGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5P
Ti1OTFMtMSQKKy8vCQkJU3lzdGVtLm91dC5wcmludGxuKChTeXN0ZW0uY3VycmVudFRpbWVNaWxs
aXMoKSAtIHRpbWUpICsgIiBtcyIpOworCQkJaWYgKGVkaXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7
CisvLwkJCWFzc2VydEVxdWFscygiU2hvdWxkIG5vdCBoYXZlIGVkaXRzIiwgMCwgZWRpdC5nZXRD
aGlsZHJlbigpLmxlbmd0aCk7CisJCQlmaW5hbCBTdHJpbmcgcmVzdWx0MiA9IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwuVXRpbC5lZGl0ZWRTdHJpbmcocmVzdWx0LCBlZGl0KTsK
KwkJCWlmICghcmVzdWx0LmVxdWFscyhyZXN1bHQyKSkgeworCQkJCWFzc2VydFNvdXJjZUVxdWFs
cygiU2Vjb25kIGZvcm1hdHRpbmcgaXMgZGlmZmVyZW50IGZyb20gZmlyc3Qgb25lISIsIFV0aWwu
Y29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVyKHJlc3VsdCksIFV0aWwuY29udmVydFRv
SW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVyKHJlc3VsdDIpKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4g
cmVzdWx0OworCX0KKworCS8qKgorCSAqIEluaXQgZm9ybWF0dGVyIHByZWZlcmVuY2VzIHdpdGgg
RWNsaXBzZSBkZWZhdWx0IHNldHRpbmdzLgorCSAqLworCXByb3RlY3RlZCB2b2lkIHNldFVwKCkg
dGhyb3dzIEV4Y2VwdGlvbiB7CisJICAgIHN1cGVyLnNldFVwKCk7CisJCXRoaXMuZm9ybWF0dGVy
UHJlZnMgPSBEZWZhdWx0Q29kZUZvcm1hdHRlck9wdGlvbnMuZ2V0RWNsaXBzZURlZmF1bHRTZXR0
aW5ncygpOworCQlpZiAoSkFWQV9QUk9KRUNUICE9IG51bGwpIHsKKwkJCXRoaXMuZm9ybWF0dGVy
T3B0aW9ucyA9IEpBVkFfUFJPSkVDVC5nZXRPcHRpb25zKHRydWUpOworCQl9CisJCXRoaXMuZm9y
bWF0dGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9QVElPTl9Db21wbGlhbmNlLCBDb21w
aWxlck9wdGlvbnMuVkVSU0lPTl8xXzgpOworCQl0aGlzLmZvcm1hdHRlck9wdGlvbnMucHV0KENv
bXBpbGVyT3B0aW9ucy5PUFRJT05fVGFyZ2V0UGxhdGZvcm0sIENvbXBpbGVyT3B0aW9ucy5WRVJT
SU9OXzFfOCk7CisJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9Q
VElPTl9Tb3VyY2UsIENvbXBpbGVyT3B0aW9ucy5WRVJTSU9OXzFfOCk7CisJfQorCisJLyoqCisJ
ICogQ3JlYXRlIHByb2plY3QgYW5kIHNldCB0aGUgamFyIHBsYWNlaG9sZGVyLgorCSAqLworCXB1
YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJLy8gZW5zdXJlIGF1
dG9idWlsZGluZyBpcyB0dXJuZWQgb2ZmCisJCUlXb3Jrc3BhY2VEZXNjcmlwdGlvbiBkZXNjcmlw
dGlvbiA9IGdldFdvcmtzcGFjZSgpLmdldERlc2NyaXB0aW9uKCk7CisJCWlmIChkZXNjcmlwdGlv
bi5pc0F1dG9CdWlsZGluZygpKSB7CisJCQlkZXNjcmlwdGlvbi5zZXRBdXRvQnVpbGRpbmcoZmFs
c2UpOworCQkJZ2V0V29ya3NwYWNlKCkuc2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pOworCQl9
CisKKwkJaWYgKEpBVkFfUFJPSkVDVCA9PSBudWxsKSB7CisJCQlKQVZBX1BST0pFQ1QgPSBzZXRV
cEphdmFQcm9qZWN0KFBST0pFQ1RfTkFNRSwgIjEuOCIpOyAvLyROT04tTkxTLTEkCisJCX0KKwor
CQlpZiAoREVCVUcpIHsKKwkJCXRoaXMudGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygp
OworCQl9CisJfQorCisJLyoqCisJICogUmVzZXQgdGhlIGphciBwbGFjZWhvbGRlciBhbmQgZGVs
ZXRlIHByb2plY3QuCisJICovCisJcHVibGljIHZvaWQgdGVhckRvd25TdWl0ZSgpIHRocm93cyBF
eGNlcHRpb24geworCQlkZWxldGVQcm9qZWN0KEpBVkFfUFJPSkVDVCk7IC8vJE5PTi1OTFMtMSQK
KwkJSkFWQV9QUk9KRUNUID0gbnVsbDsKKwkJaWYgKERFQlVHKSB7CisJCQlTeXN0ZW0ub3V0LnBy
aW50bG4oIlRpbWUgc3BlbnQgPSAiICsgKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGhp
cy50aW1lKSk7Ly8kTk9OLU5MUy0xJAorCQl9CisJCXN1cGVyLnRlYXJEb3duU3VpdGUoKTsKKwl9
CisKKwlwcml2YXRlIFN0cmluZyBnZXRJbihTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgewor
CQlhc3NlcnROb3ROdWxsKGNvbXBpbGF0aW9uVW5pdE5hbWUpOworCQlpbnQgZG90SW5kZXggPSBj
b21waWxhdGlvblVuaXROYW1lLmluZGV4T2YoJy4nKTsKKwkJYXNzZXJ0VHJ1ZShkb3RJbmRleCAh
PSAtMSk7CisJCXJldHVybiBjb21waWxhdGlvblVuaXROYW1lLnN1YnN0cmluZygwLCBkb3RJbmRl
eCkgKyBJTiArIGNvbXBpbGF0aW9uVW5pdE5hbWUuc3Vic3RyaW5nKGRvdEluZGV4KTsKKwl9CisK
Kwlwcml2YXRlIFN0cmluZyBnZXRPdXQoU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUpIHsKKwkJ
YXNzZXJ0Tm90TnVsbChjb21waWxhdGlvblVuaXROYW1lKTsKKwkJaW50IGRvdEluZGV4ID0gY29t
cGlsYXRpb25Vbml0TmFtZS5pbmRleE9mKCcuJyk7CisJCWFzc2VydFRydWUoZG90SW5kZXggIT0g
LTEpOworCQlyZXR1cm4gY29tcGlsYXRpb25Vbml0TmFtZS5zdWJzdHJpbmcoMCwgZG90SW5kZXgp
ICsgT1VUICsgY29tcGlsYXRpb25Vbml0TmFtZS5zdWJzdHJpbmcoZG90SW5kZXgpOworCX0KKwor
CXZvaWQgYXNzZXJ0TGluZUVxdWFscyhTdHJpbmcgYWN0dWFsQ29udGVudHMsIFN0cmluZyBvcmln
aW5hbFNvdXJjZSwgU3RyaW5nIGV4cGVjdGVkQ29udGVudHMsIGJvb2xlYW4gY2hlY2tOdWxsKSB7
CisJCWlmIChhY3R1YWxDb250ZW50cyA9PSBudWxsKSB7CisJCQlhc3NlcnRUcnVlKCJhY3R1YWxD
b250ZW50cyBpcyBudWxsIiwgY2hlY2tOdWxsKTsKKwkJCWFzc2VydEVxdWFscyhleHBlY3RlZENv
bnRlbnRzLCBvcmlnaW5hbFNvdXJjZSk7CisJCQlyZXR1cm47CisJCX0KKwkJYXNzZXJ0U291cmNl
RXF1YWxzKCJEaWZmZXJlbnQgbnVtYmVyIG9mIGxlbmd0aCIsIFV0aWwuY29udmVydFRvSW5kZXBl
bmRhbnRMaW5lRGVsaW1pdGVyKGV4cGVjdGVkQ29udGVudHMpLCBhY3R1YWxDb250ZW50cyk7CisJ
fQorCisJcHJpdmF0ZSB2b2lkIHJ1blRlc3QoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcgY29t
cGlsYXRpb25Vbml0TmFtZSkgeworCQlEZWZhdWx0Q29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVy
ID0gbmV3IERlZmF1bHRDb2RlRm9ybWF0dGVyKHRoaXMuZm9ybWF0dGVyUHJlZnMsIHRoaXMuZm9y
bWF0dGVyT3B0aW9ucyk7CisJCXJ1blRlc3QoY29kZUZvcm1hdHRlciwgcGFja2FnZU5hbWUsIGNv
bXBpbGF0aW9uVW5pdE5hbWUsIENvZGVGb3JtYXR0ZXIuS19DT01QSUxBVElPTl9VTklULCAwKTsK
Kwl9CisKKwlwcml2YXRlIHZvaWQgcnVuVGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIs
IFN0cmluZyBwYWNrYWdlTmFtZSwgU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5k
LCBpbnQgaW5kZW50YXRpb25MZXZlbCkgeworCQlydW5UZXN0KGNvZGVGb3JtYXR0ZXIsIHBhY2th
Z2VOYW1lLCBjb21waWxhdGlvblVuaXROYW1lLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBmYWxz
ZSwgMCwgLTEpOworCX0KKwlwcml2YXRlIHZvaWQgcnVuVGVzdChDb2RlRm9ybWF0dGVyIGNvZGVG
b3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdlTmFtZSwgU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUs
IGludCBraW5kLCBpbnQgaW5kZW50YXRpb25MZXZlbCwgYm9vbGVhbiBjaGVja051bGwsIGludCBv
ZmZzZXQsIGludCBsZW5ndGgpIHsKKwkJcnVuVGVzdChjb2RlRm9ybWF0dGVyLCBwYWNrYWdlTmFt
ZSwgY29tcGlsYXRpb25Vbml0TmFtZSwga2luZCwgaW5kZW50YXRpb25MZXZlbCwgY2hlY2tOdWxs
LCBvZmZzZXQsIGxlbmd0aCwgbnVsbCk7CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRlc3QoQ29k
ZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVyLCBTdHJpbmcgcGFja2FnZU5hbWUsIFN0cmluZyBjb21w
aWxhdGlvblVuaXROYW1lLCBpbnQga2luZCwgaW50IGluZGVudGF0aW9uTGV2ZWwsIGJvb2xlYW4g
Y2hlY2tOdWxsLCBpbnQgb2Zmc2V0LCBpbnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvcikg
eworCQl0cnkgeworCQkJSUNvbXBpbGF0aW9uVW5pdCBzb3VyY2VVbml0ID0gZ2V0Q29tcGlsYXRp
b25Vbml0KFBST0pFQ1RfTkFNRSAsICIiLCBwYWNrYWdlTmFtZSwgZ2V0SW4oY29tcGlsYXRpb25V
bml0TmFtZSkpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwkJCVN0cmluZyBzb3VyY2Ug
PSBzb3VyY2VVbml0LmdldFNvdXJjZSgpOworCQkJYXNzZXJ0Tm90TnVsbChzb3VyY2UpOworCQkJ
SUNvbXBpbGF0aW9uVW5pdCBvdXRwdXRVbml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1Rf
TkFNRSAsICIiLCBwYWNrYWdlTmFtZSwgZ2V0T3V0KGNvbXBpbGF0aW9uVW5pdE5hbWUpKTsgLy8k
Tk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJCQlhc3NlcnROb3ROdWxsKG91dHB1dFVuaXQpOwor
CQkJU3RyaW5nIHJlc3VsdDsKKwkJCWlmIChsZW5ndGggPT0gLTEpIHsKKwkJCQlyZXN1bHQgPSBy
dW5Gb3JtYXR0ZXIoY29kZUZvcm1hdHRlciwgc291cmNlLCBraW5kLCBpbmRlbnRhdGlvbkxldmVs
LCBvZmZzZXQsIHNvdXJjZS5sZW5ndGgoKSwgbGluZVNlcGFyYXRvciwgdHJ1ZSk7CisJCQl9IGVs
c2UgeworCQkJCXJlc3VsdCA9IHJ1bkZvcm1hdHRlcihjb2RlRm9ybWF0dGVyLCBzb3VyY2UsIGtp
bmQsIGluZGVudGF0aW9uTGV2ZWwsIG9mZnNldCwgbGVuZ3RoLCBsaW5lU2VwYXJhdG9yLCB0cnVl
KTsKKwkJCX0KKwkJCWFzc2VydExpbmVFcXVhbHMocmVzdWx0LCBzb3VyY2UsIG91dHB1dFVuaXQu
Z2V0U291cmNlKCksIGNoZWNrTnVsbCk7CisJCX0gY2F0Y2ggKEphdmFNb2RlbEV4Y2VwdGlvbiBl
KSB7CisJCQllLnByaW50U3RhY2tUcmFjZSgpOworCQkJYXNzZXJ0VHJ1ZShmYWxzZSk7CisJCX0K
Kwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0TGFtYmRhKCkgeworCQlydW5UZXN0KCJ0ZXN0TGFtYmRh
IiwgIkEuamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKwkKKwlwdWJsaWMg
dm9pZCB0ZXN0UmVmZXJlbmNlRXhwcmVzc2lvbigpIHsKKwkJcnVuVGVzdCgidGVzdFJlZmVyZW5j
ZUV4cHJlc3Npb24iLCAiQS5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQor
CQorCXB1YmxpYyB2b2lkIHRlc3QwMDAoKSB7CisJCXJ1blRlc3QoInRlc3QwMDAiLCAiSS5qYXZh
Iik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAw
MSgpIHsKKwkJcnVuVGVzdCgidGVzdDAwMSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5P
Ti1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDAyKCkgeworCQlydW5UZXN0KCJ0ZXN0
MDAyIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1Ymxp
YyB2b2lkIHRlc3QwMDMoKSB7CisJCXJ1blRlc3QoInRlc3QwMDMiLCAiWC5qYXZhIik7Ly8kTk9O
LU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAwNCgpIHsKKwkJ
cnVuVGVzdCgidGVzdDAwNCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQK
Kwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDA1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDA1IiwgIlgu
amF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRl
c3QwMDYoKSB7CisJCXJ1blRlc3QoInRlc3QwMDYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAwNygpIHsKKwkJcnVuVGVzdCgi
dGVzdDAwNyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlw
dWJsaWMgdm9pZCB0ZXN0MDA4KCkgeworCQlydW5UZXN0KCJ0ZXN0MDA4IiwgIlguamF2YSIpOy8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDkoKSB7
CisJCXJ1blRlc3QoInRlc3QwMDkiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxT
LTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxMCgpIHsKKwkJcnVuVGVzdCgidGVzdDAxMCIs
ICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9p
ZCB0ZXN0MDExKCkgeworCQlydW5UZXN0KCJ0ZXN0MDExIiwgIlguamF2YSIpOy8vJE5PTi1OTFMt
MSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMTIoKSB7CisJCXJ1blRl
c3QoInRlc3QwMTIiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQor
CisJcHVibGljIHZvaWQgdGVzdDAxMygpIHsKKwkJcnVuVGVzdCgidGVzdDAxMyIsICJYLmphdmEi
KTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE0
KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE0IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9O
LU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMTUoKSB7CisJCXJ1blRlc3QoInRlc3Qw
MTUiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGlj
IHZvaWQgdGVzdDAxNigpIHsKKwkJcnVuVGVzdCgidGVzdDAxNiIsICJYLmphdmEiKTsvLyROT04t
TkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE3KCkgeworCQly
dW5UZXN0KCJ0ZXN0MDE3IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAor
CX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMTgoKSB7CisJCXJ1blRlc3QoInRlc3QwMTgiLCAiWC5q
YXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVz
dDAxOSgpIHsKKwkJcnVuVGVzdCgidGVzdDAxOSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8v
JE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDIwKCkgeworCQlydW5UZXN0KCJ0
ZXN0MDIwIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1
YmxpYyB2b2lkIHRlc3QwMjEoKSB7CisJCXJ1blRlc3QoInRlc3QwMjEiLCAiWC5qYXZhIik7Ly8k
Tk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyMigpIHsK
KwkJcnVuVGVzdCgidGVzdDAyMiIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMt
MiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDIzKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIzIiwg
IlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lk
IHRlc3QwMjQoKSB7CisJCXJ1blRlc3QoInRlc3QwMjQiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0x
JCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyNSgpIHsKKwkJcnVuVGVz
dCgidGVzdDAyNSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisK
KwlwdWJsaWMgdm9pZCB0ZXN0MDI2KCkgeworCQlydW5UZXN0KCJ0ZXN0MDI2IiwgIlguamF2YSIp
Oy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjco
KSB7CisJCXJ1blRlc3QoInRlc3QwMjciLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04t
TkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyOCgpIHsKKwkJcnVuVGVzdCgidGVzdDAy
OCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMg
dm9pZCB0ZXN0MDI5KCkgeworCQlydW5UZXN0KCJ0ZXN0MDI5IiwgIlguamF2YSIpOy8vJE5PTi1O
TFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzAoKSB7CisJCXJ1
blRlc3QoInRlc3QwMzAiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJ
fQorCisJcHVibGljIHZvaWQgdGVzdDAzMSgpIHsKKwkJcnVuVGVzdCgidGVzdDAzMSIsICJYLmph
dmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0
MDMyKCkgeworCQlydW5UZXN0KCJ0ZXN0MDMyIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8k
Tk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzMoKSB7CisJCXJ1blRlc3QoInRl
c3QwMzMiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVi
bGljIHZvaWQgdGVzdDAzNCgpIHsKKwkJcnVuVGVzdCgidGVzdDAzNCIsICJYLmphdmEiKTsvLyRO
T04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDM1KCkgewor
CQlydW5UZXN0KCJ0ZXN0MDM1IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzYoKSB7CisJCXJ1blRlc3QoInRlc3QwMzYiLCAi
WC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQg
dGVzdDAzNygpIHsKKwkJcnVuVGVzdCgidGVzdDAzNyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDM4KCkgeworCQlydW5UZXN0
KCJ0ZXN0MDM4IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKwor
CXB1YmxpYyB2b2lkIHRlc3QwMzkoKSB7CisJCXJ1blRlc3QoInRlc3QwMzkiLCAiWC5qYXZhIik7
Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCit9CmRpZmYgLS1naXQgd29ya3NwYWNl
L0Zvcm1hdHRlcjE4Ly5jbGFzc3BhdGggd29ya3NwYWNlL0Zvcm1hdHRlcjE4Ly5jbGFzc3BhdGgK
bmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZTRhYzYxMQotLS0gL2Rldi9udWxs
CisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvLmNsYXNzcGF0aApAQCAtMCwwICsxLDYgQEAKKzw/
eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+Cis8Y2xhc3NwYXRoPgorICAgIDxj
bGFzc3BhdGhlbnRyeSBraW5kPSJzcmMiIHBhdGg9IiIvPgorICAgIDxjbGFzc3BhdGhlbnRyeSBr
aW5kPSJ2YXIiIHBhdGg9IkpDTDE4X0xJQiIgc291cmNlcGF0aD0iSkNMMThfU1JDIiByb290cGF0
aD0iSkNMX1NSQzE4Uk9PVCIvPgorICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPSJvdXRwdXQiIHBh
dGg9ImJpbiIvPgorPC9jbGFzc3BhdGg+ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQpkaWZm
IC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC8ucHJvamVjdCB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvLnByb2plY3QKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYWFkMmViYgot
LS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvLnByb2plY3QKQEAgLTAsMCAr
MSwxNyBAQAorPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KKzxwcm9qZWN0
RGVzY3JpcHRpb24+CisJPG5hbWU+Rm9ybWF0dGVySnNyMzA4PC9uYW1lPgorCTxjb21tZW50Pjwv
Y29tbWVudD4KKwk8cHJvamVjdHM+CisJPC9wcm9qZWN0cz4KKwk8YnVpbGRTcGVjPgorCQk8YnVp
bGRDb21tYW5kPgorCQkJPG5hbWU+b3JnLmVjbGlwc2UuamR0LmNvcmUuamF2YWJ1aWxkZXI8L25h
bWU+CisJCQk8YXJndW1lbnRzPgorCQkJPC9hcmd1bWVudHM+CisJCTwvYnVpbGRDb21tYW5kPgor
CTwvYnVpbGRTcGVjPgorCTxuYXR1cmVzPgorCQk8bmF0dXJlPm9yZy5lY2xpcHNlLmpkdC5jb3Jl
LmphdmFuYXR1cmU8L25hdHVyZT4KKwk8L25hdHVyZXM+Cis8L3Byb2plY3REZXNjcmlwdGlvbj4K
ZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwMC9JX2luLmphdmEgd29ya3Nw
YWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDAvSV9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLjA0YzdjOGEKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMDAvSV9pbi5qYXZhCkBAIC0wLDAgKzEsMTIgQEAKK3B1YmxpYyBpbnRlcmZhY2Ug
STxVIGV4dGVuZHMgSjw/IGV4dGVuZHMgSTxVPj4+IHsKK30KK2ludGVyZmFjZSBKPFQgZXh0ZW5k
cyBJPD8gZXh0ZW5kcyBKPFQ+Pj4geworfQorY2xhc3MgQ0k8VSBleHRlbmRzIENKPFQsIFU+ICYg
QE1hcmtlciBKPEBNYXJrZXIgVD4sCisJCQlUIGV4dGVuZHMgQ0k8VSwgVD4gJiBATWFya2VyIEk8
VT4+CisJaW1wbGVtZW50cyBJPFU+IHsKK30KK2NsYXNzIENKPFQgZXh0ZW5kcyBDSTxVLCBUPiAm
IEBNYXJrZXIgSTxATWFya2VyIFU+LAorCQkJVSBleHRlbmRzIENKPFQsIFU+ICYgSjxUPj4KKwlp
bXBsZW1lbnRzIEo8VD4geworfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0
MDAwL0lfb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDAvSV9vdXQuamF2YQpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4yMmY1NjA0Ci0tLSAvZGV2L251bGwK
KysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDAwL0lfb3V0LmphdmEKQEAgLTAsMCArMSwx
MyBAQAorcHVibGljIGludGVyZmFjZSBJPFUgZXh0ZW5kcyBKPD8gZXh0ZW5kcyBJPFU+Pj4gewor
fQorCitpbnRlcmZhY2UgSjxUIGV4dGVuZHMgSTw/IGV4dGVuZHMgSjxUPj4+IHsKK30KKworY2xh
c3MgQ0k8VSBleHRlbmRzIENKPFQsIFU+ICYgQE1hcmtlciBKPEBNYXJrZXIgVD4sIFQgZXh0ZW5k
cyBDSTxVLCBUPiAmIEBNYXJrZXIgSTxVPj4KKwkJaW1wbGVtZW50cyBJPFU+IHsKK30KKworY2xh
c3MgQ0o8VCBleHRlbmRzIENJPFUsIFQ+ICYgQE1hcmtlciBJPEBNYXJrZXIgVT4sIFUgZXh0ZW5k
cyBDSjxULCBVPiAmIEo8VD4+CisJCWltcGxlbWVudHMgSjxUPiB7Cit9CmRpZmYgLS1naXQgd29y
a3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDEvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDAxL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5h
MjdmZDkyCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDAxL1hf
aW4uamF2YQpAQCAtMCwwICsxLDkgQEAKK3B1YmxpYyBjbGFzcyBYPEU+IHsKKyAgY2xhc3MgWSB7
CisgICAgRSBlOworICAgIEUgZ2V0T3RoZXJFbGVtZW50KE9iamVjdCBvdGhlcikgeworICAgICAg
aWYgKCEob3RoZXIgaW5zdGFuY2VvZiBATWFya2VyIFg8Pz4uWSkpIHt9OworICAgICAgcmV0dXJu
IG51bGw7CisgICAgfQorICB9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rl
c3QwMDEvWF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwMS9YX291dC5qYXZh
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmEyODNiODcKLS0tIC9kZXYvbnVs
bAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDEvWF9vdXQuamF2YQpAQCAtMCwwICsx
LDEyIEBACitwdWJsaWMgY2xhc3MgWDxFPiB7CisJY2xhc3MgWSB7CisJCUUgZTsKKworCQlFIGdl
dE90aGVyRWxlbWVudChPYmplY3Qgb3RoZXIpIHsKKwkJCWlmICghKG90aGVyIGluc3RhbmNlb2Yg
QE1hcmtlciBYPD8+LlkpKSB7CisJCQl9CisJCQk7CisJCQlyZXR1cm4gbnVsbDsKKwkJfQorCX0K
K30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwMi9YX2luLmphdmEgd29y
a3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDIvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLmI5ZmRjZDIKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMDIvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFgg
eworICAgIEBNYXJrZXIgaW50IHg7CisgICAgWm9yayB6OworfQorQGphdmEubGFuZy5hbm5vdGF0
aW9uLlRhcmdldCAoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVU
RVIpCitAaW50ZXJmYWNlIE1hcmtlciB7fQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDAyL1hfb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDIvWF9vdXQu
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kYTlhZDUxCi0tLSAvZGV2
L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDAyL1hfb3V0LmphdmEKQEAgLTAs
MCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7CisJQE1hcmtlcgorCWludCB4OworCVpvcmsgejsK
K30KKworQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5F
bGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAt
LWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwMy9YX2luLmphdmEgd29ya3NwYWNlL0Zv
cm1hdHRlcjE4L3Rlc3QwMDMvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjMzYTk5NmYKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rl
c3QwMDMvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIEBN
YXJrZXIgPFQ+IGludCB4KCkgeyByZXR1cm4gMTA7IH07CisgICAgWm9yayB6OworfQoraW50ZXJm
YWNlIFpvcmsge30KK0BpbnRlcmZhY2UgTWFya2VyIHt9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zv
cm1hdHRlcjE4L3Rlc3QwMDMvWF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAw
My9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmQwMjQyNzcK
LS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDMvWF9vdXQuamF2
YQpAQCAtMCwwICsxLDE0IEBACitwdWJsaWMgY2xhc3MgWCB7CisJQE1hcmtlcgorCTxUPiBpbnQg
eCgpIHsKKwkJcmV0dXJuIDEwOworCX07CisKKwlab3JrIHo7Cit9CisKK2ludGVyZmFjZSBab3Jr
IHsKK30KKworQGludGVyZmFjZSBNYXJrZXIgeworfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3Jt
YXR0ZXIxOC90ZXN0MDA0L1hfaW4uamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwNC9Y
X2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uY2ZmMzg4NAotLS0g
L2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwNC9YX2luLmphdmEKQEAg
LTAsMCArMSw4IEBACitwdWJsaWMgY2xhc3MgWCB7CisgICAgaW50IHgoQE1hcmtlcjEgaW50IFtd
IEBNYXJrZXIyIC4uLiBwKSB7IHJldHVybiAxMDsgfTsKKyAgICBab3JrIHo7Cit9CitpbnRlcmZh
Y2UgWm9yayB7fQorQGludGVyZmFjZSBNYXJrZXIxIHt9CitAaW50ZXJmYWNlIE1hcmtlcjIge30K
KwpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDA0L1hfb3V0LmphdmEgd29y
a3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDQvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwLi4zYmYzODUzCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3Jt
YXR0ZXIxOC90ZXN0MDA0L1hfb3V0LmphdmEKQEAgLTAsMCArMSwxNiBAQAorcHVibGljIGNsYXNz
IFggeworCWludCB4KEBNYXJrZXIxIGludFtdIEBNYXJrZXIyLi4uIHApIHsKKwkJcmV0dXJuIDEw
OworCX07CisKKwlab3JrIHo7Cit9CisKK2ludGVyZmFjZSBab3JrIHsKK30KKworQGludGVyZmFj
ZSBNYXJrZXIxIHsKK30KKworQGludGVyZmFjZSBNYXJrZXIyIHsKK30KZGlmZiAtLWdpdCB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwNS9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3QwMDUvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmI0
NTI5ZGIKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDUvWF9p
bi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIGludCB4KEBNYXJr
ZXIgaW50IC4uLiBwKSB7IHJldHVybiAxMDsgfTsKKyAgICBab3JrIHo7Cit9CitAamF2YS5sYW5n
LmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBF
X1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHt9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zv
cm1hdHRlcjE4L3Rlc3QwMDUvWF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAw
NS9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmViYzE5YTMK
LS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDUvWF9vdXQuamF2
YQpAQCAtMCwwICsxLDExIEBACitwdWJsaWMgY2xhc3MgWCB7CisJaW50IHgoQE1hcmtlciBpbnQu
Li4gcCkgeworCQlyZXR1cm4gMTA7CisJfTsKKworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5h
bm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BB
UkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9y
bWF0dGVyMTgvdGVzdDAwNi9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDYv
WF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjBiNDNlOTYKLS0t
IC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDYvWF9pbi5qYXZhCkBA
IC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIEBNYXJrZXIgaW50IHgoKSB7IHJl
dHVybiAxMDsgfTsKKyAgICBab3JrIHo7Cit9CitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRl
cmZhY2UgTWFya2VyIHt9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDYv
WF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwNi9YX291dC5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjc3MTg4YzcKLS0tIC9kZXYvbnVsbAorKysg
d29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDYvWF9vdXQuamF2YQpAQCAtMCwwICsxLDEyIEBA
CitwdWJsaWMgY2xhc3MgWCB7CisJQE1hcmtlcgorCWludCB4KCkgeworCQlyZXR1cm4gMTA7CisJ
fTsKKworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxh
bmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFy
a2VyIHsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwNy9YX2luLmph
dmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDcvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLmQ3ZDVjNmIKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNl
L0Zvcm1hdHRlcjE4L3Rlc3QwMDcvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNs
YXNzIFggeworICAgIGludCB4KEBNYXJrZXIgaW50IHApIHsgcmV0dXJuIDEwOyB9OworICAgIFpv
cmsgejsKK30KK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0
aW9uLkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIge30KZGlm
ZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwNy9YX291dC5qYXZhIHdvcmtzcGFj
ZS9Gb3JtYXR0ZXIxOC90ZXN0MDA3L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMC4uMmRlMWQ3YQotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvdGVzdDAwNy9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTEgQEAKK3B1YmxpYyBjbGFzcyBYIHsK
KwlpbnQgeChATWFya2VyIGludCBwKSB7CisJCXJldHVybiAxMDsKKwl9OworCisJWm9yayB6Owor
fQorCitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KGphdmEubGFuZy5hbm5vdGF0aW9uLkVs
ZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIgeworfQpkaWZmIC0t
Z2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDA4L1hfaW4uamF2YSB3b3Jrc3BhY2UvRm9y
bWF0dGVyMTgvdGVzdDAwOC9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMC4uYzgxNDJiOAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVz
dDAwOC9YX2luLmphdmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7CisgICAgaW50
IHgoKSB7CisgICAgICAgIHRyeSB7CisgICAgICAgIH0gY2F0Y2ggKEBNYXJrZXIgTnVsbFBvaW50
ZXJFeGNlcHRpb24gfCBATWFya2VyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiBlKSB7
CisgICAgICAgIH0KKyAgICAgICAgcmV0dXJuIDEwOworICAgIH0KKyAgICBab3JrIHo7Cit9CmRp
ZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMDgvWF9vdXQuamF2YSB3b3Jrc3Bh
Y2UvRm9ybWF0dGVyMTgvdGVzdDAwOC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLmM5OTQzYmQKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMDgvWF9vdXQuamF2YQpAQCAtMCwwICsxLDExIEBACitwdWJsaWMgY2xhc3MgWCB7
CisJaW50IHgoKSB7CisJCXRyeSB7CisJCX0gY2F0Y2ggKEBNYXJrZXIgTnVsbFBvaW50ZXJFeGNl
cHRpb24KKwkJCQl8IEBNYXJrZXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGUpIHsK
KwkJfQorCQlyZXR1cm4gMTA7CisJfQorCisJWm9yayB6OworfQpkaWZmIC0tZ2l0IHdvcmtzcGFj
ZS9Gb3JtYXR0ZXIxOC90ZXN0MDA5L1hfaW4uamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVz
dDAwOS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYmUwYjZh
NAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwOS9YX2luLmph
dmEKQEAgLTAsMCArMSwxMSBAQAorcHVibGljIGNsYXNzIFggeworICAgIGludCB4KCkgeworICAg
ICAgICBATWFya2VyIGludCBwOworICAgICAgICBmaW5hbCBATWFya2VyIGludCBxOworICAgICAg
ICBATWFya2VyIGZpbmFsIGludCByOworICAgICAgICByZXR1cm4gMTA7CisgICAgfQorICAgIFpv
cmsgejsKK30KK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0
aW9uLkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIge30KZGlm
ZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAwOS9YX291dC5qYXZhIHdvcmtzcGFj
ZS9Gb3JtYXR0ZXIxOC90ZXN0MDA5L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMC4uMDIxYzA4NQotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvdGVzdDAwOS9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTcgQEAKK3B1YmxpYyBjbGFzcyBYIHsK
KwlpbnQgeCgpIHsKKwkJQE1hcmtlcgorCQlpbnQgcDsKKwkJZmluYWwgQE1hcmtlcgorCQlpbnQg
cTsKKwkJQE1hcmtlcgorCQlmaW5hbCBpbnQgcjsKKwkJcmV0dXJuIDEwOworCX0KKworCVpvcmsg
ejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlv
bi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlm
ZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxMC9YX2luLmphdmEgd29ya3NwYWNl
L0Zvcm1hdHRlcjE4L3Rlc3QwMTAvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAuLjhiNDZlNGYKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3QwMTAvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMiBAQAorcHVibGljIGNsYXNzIFggZXh0ZW5k
cyBATWFya2VyIEBTaW5nbGVNZW1iZXIoMCkgQE5vcm1hbChWYWx1ZSA9IDApIE9iamVjdCB7Cit9
CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTAvWF9vdXQuamF2YSB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxMC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLjhiNDZlNGYKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMTAvWF9vdXQuamF2YQpAQCAtMCwwICsxLDIgQEAKK3B1YmxpYyBjbGFzcyBY
IGV4dGVuZHMgQE1hcmtlciBAU2luZ2xlTWVtYmVyKDApIEBOb3JtYWwoVmFsdWUgPSAwKSBPYmpl
Y3QgeworfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDExL1hfaW4uamF2
YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxMS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMC4uNTExOWMzMgotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2Uv
Rm9ybWF0dGVyMTgvdGVzdDAxMS9YX2luLmphdmEKQEAgLTAsMCArMSwxMCBAQAorcHVibGljIGNs
YXNzIFggeworICAgIGludCB4KCkgeworICAgICAgICB0cnkgKEBNYXJrZXIgSW50ZWdlciBwID0g
bnVsbDsgZmluYWwgQE1hcmtlciBJbnRlZ2VyIHEgPSBudWxsOyBATWFya2VyIGZpbmFsIEludGVn
ZXIgciA9IG51bGwpIHsKKyAgICAgICAgfQorICAgICAgICByZXR1cm4gMTA7CisgICAgfQorICAg
IFpvcmsgejsKK30KK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5v
dGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIge30K
ZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxMS9YX291dC5qYXZhIHdvcmtz
cGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDExL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uMmI1NDJlOAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0
dGVyMTgvdGVzdDAxMS9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTYgQEAKK3B1YmxpYyBjbGFzcyBY
IHsKKwlpbnQgeCgpIHsKKwkJdHJ5IChATWFya2VyCisJCUludGVnZXIgcCA9IG51bGw7IGZpbmFs
IEBNYXJrZXIKKwkJSW50ZWdlciBxID0gbnVsbDsgQE1hcmtlcgorCQlmaW5hbCBJbnRlZ2VyIHIg
PSBudWxsKSB7CisJCX0KKwkJcmV0dXJuIDEwOworCX0KKworCVpvcmsgejsKK30KKworQGphdmEu
bGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAtLWdpdCB3b3Jrc3Bh
Y2UvRm9ybWF0dGVyMTgvdGVzdDAxMi9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rl
c3QwMTIvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjVhNzU4
OWYKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTIvWF9pbi5q
YXZhCkBAIC0wLDAgKzEsMTEgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKyAgICBpbnQgeCgpIHsKKyAg
ICAgICAgZm9yIChATWFya2VyIGludCBpOiBuZXcgaW50WzNdKSB7fQorICAgICAgICBmb3IgKGZp
bmFsIEBNYXJrZXIgaW50IGk6IG5ldyBpbnRbM10pIHt9CisgICAgICAgIGZvciAoQE1hcmtlciBm
aW5hbCBpbnQgaTogbmV3IGludFszXSkge30KKyAgICAgICAgcmV0dXJuIDEwOworICAgIH0KKyAg
ICBab3JrIHo7Cit9CitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5u
b3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHt9
CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTIvWF9vdXQuamF2YSB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxMi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLmY3ZjAzYjcKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMTIvWF9vdXQuamF2YQpAQCAtMCwwICsxLDIwIEBACitwdWJsaWMgY2xhc3Mg
WCB7CisJaW50IHgoKSB7CisJCWZvciAoQE1hcmtlcgorCQlpbnQgaSA6IG5ldyBpbnRbM10pIHsK
KwkJfQorCQlmb3IgKGZpbmFsIEBNYXJrZXIKKwkJaW50IGkgOiBuZXcgaW50WzNdKSB7CisJCX0K
KwkJZm9yIChATWFya2VyCisJCWZpbmFsIGludCBpIDogbmV3IGludFszXSkgeworCQl9CisJCXJl
dHVybiAxMDsKKwl9CisKKwlab3JrIHo7Cit9CisKK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJn
ZXQoamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50
ZXJmYWNlIE1hcmtlciB7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3Qw
MTMvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDEzL1hfaW4uamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kZGQ5NjI1Ci0tLSAvZGV2L251bGwKKysr
IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDEzL1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAK
K3B1YmxpYyBAaW50ZXJmYWNlIFggeyAKKwlwdWJsaWMgQE1hcmtlciBTdHJpbmcgdmFsdWUoKTsg
CisJQE1hcmtlciBTdHJpbmcgdmFsdWUyKCk7IAorCUBNYXJrZXIgcHVibGljIFN0cmluZyB2YWx1
ZTMoKTsgCit9CitAaW50ZXJmYWNlIE1hcmtlciB7fQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3Jt
YXR0ZXIxOC90ZXN0MDEzL1hfb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTMv
WF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4yMTQzYTA3Ci0t
LSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDEzL1hfb3V0LmphdmEK
QEAgLTAsMCArMSwxMyBAQAorcHVibGljIEBpbnRlcmZhY2UgWCB7CisJcHVibGljIEBNYXJrZXIK
KwlTdHJpbmcgdmFsdWUoKTsKKworCUBNYXJrZXIKKwlTdHJpbmcgdmFsdWUyKCk7CisKKwlATWFy
a2VyCisJcHVibGljIFN0cmluZyB2YWx1ZTMoKTsKK30KKworQGludGVyZmFjZSBNYXJrZXIgewor
fQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE0L1hfaW4uamF2YSB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxNC9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uNjcxNTEwNgotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0
dGVyMTgvdGVzdDAxNC9YX2luLmphdmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgY2xhc3MgWCB7
IAorCXB1YmxpYyB2b2lkIHZhbHVlKCkgeworCQlPYmplY3QgbyA9IEBNYXJrZXIgaW50LmNsYXNz
OworCQlPYmplY3QgbzIgPSBATWFya2VyIGludCBATWFya2VyW10gW10gQE1hcmtlcltdLmNsYXNz
OworICAgfQorfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE0L1hfb3V0
LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTQvWF9vdXQuamF2YQpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5lOGEzYzAwCi0tLSAvZGV2L251bGwKKysrIHdvcmtz
cGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE0L1hfb3V0LmphdmEKQEAgLTAsMCArMSw2IEBACitwdWJs
aWMgY2xhc3MgWCB7CisJcHVibGljIHZvaWQgdmFsdWUoKSB7CisJCU9iamVjdCBvID0gQE1hcmtl
ciBpbnQuY2xhc3M7CisJCU9iamVjdCBvMiA9IEBNYXJrZXIgaW50IEBNYXJrZXJbXSBbXSBATWFy
a2VyW10uY2xhc3M7CisgICB9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rl
c3QwMTUvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE1L1hfaW4uamF2YQpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4zMjRhMTU3Ci0tLSAvZGV2L251bGwK
KysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE1L1hfaW4uamF2YQpAQCAtMCwwICsxLDkg
QEAKK2ludGVyZmFjZSBJIHsKKyAgICBPYmplY3QgY29weShpbnQgW10gaWEpOworfQorcHVibGlj
IGNsYXNzIFggIHsKKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykg
eworICAgICAgICBJIGkgPSBATWFya2VyIGludCBATWFya2VyIFtdOjo8U3RyaW5nPmNsb25lOwor
ICAgICAgICBab3JrIHo7CisgICAgfQorfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDE1L1hfb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTUvWF9vdXQu
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5mYTkwYTRhCi0tLSAvZGV2
L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE1L1hfb3V0LmphdmEKQEAgLTAs
MCArMSwxMCBAQAoraW50ZXJmYWNlIEkgeworCU9iamVjdCBjb3B5KGludFtdIGlhKTsKK30KKwor
cHVibGljIGNsYXNzIFggeworCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3Mp
IHsKKwkJSSBpID0gQE1hcmtlciBpbnQgQE1hcmtlcltdOjo8U3RyaW5nPmNsb25lOworCQlab3Jr
IHo7CisJfQorfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE2L1hfaW4u
amF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxNi9YX2luLmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZDlmOTM5YgotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3Bh
Y2UvRm9ybWF0dGVyMTgvdGVzdDAxNi9YX2luLmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMg
Y2xhc3MgWCAgeworICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7
CisgICAgICAgIGludCBpIFtdID0gbmV3IEBNYXJrZXIgaW50IEBNYXJrZXIgWzRdOworICAgICAg
ICBpbnQgaiBbXSA9IG5ldyBATWFya2VyIGludCBATWFya2VyIFtdIHsgMTAgfTsKKyAgICAgICAg
Wm9yayB6OworICAgIH0KK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAx
Ni9YX291dC5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE2L1hfb3V0LmphdmEKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYzU4ZGE0YQotLS0gL2Rldi9udWxsCisr
KyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxNi9YX291dC5qYXZhCkBAIC0wLDAgKzEsNyBA
QAorcHVibGljIGNsYXNzIFggeworCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFy
Z3MpIHsKKwkJaW50IGlbXSA9IG5ldyBATWFya2VyIGludCBATWFya2VyWzRdOworCQlpbnQgaltd
ID0gbmV3IEBNYXJrZXIgaW50IEBNYXJrZXJbXSB7IDEwIH07CisJCVpvcmsgejsKKwl9Cit9CmRp
ZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTcvWF9pbi5qYXZhIHdvcmtzcGFj
ZS9Gb3JtYXR0ZXIxOC90ZXN0MDE3L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi5hZTRlOWFmCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDE3L1hfaW4uamF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBjbGFzcyBYICB7Cisg
ICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHsKKyAgICAgICAgaW50
IGkgPSAoQE1hcmtlciBpbnQpIDA7CisgICAgICAgIGludCBqIFtdID0gKEBNYXJrZXIgaW50IEBN
YXJrZXIgW10pIG51bGw7CisgICAgICAgIFpvcmsgejsKKyAgICB9Cit9CmRpZmYgLS1naXQgd29y
a3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTcvWF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvdGVzdDAxNy9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LmQ5MTdiMDkKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTcv
WF9vdXQuamF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlwdWJsaWMgc3Rh
dGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCWludCBpID0gKEBNYXJrZXIgaW50KSAw
OworCQlpbnQgaltdID0gKEBNYXJrZXIgaW50IEBNYXJrZXJbXSkgbnVsbDsKKwkJWm9yayB6Owor
CX0KK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxOC9YX2luLmphdmEg
d29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTgvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IDAwMDAwMDAuLjExMDI4ZjEKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zv
cm1hdHRlcjE4L3Rlc3QwMTgvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNz
IFggIHsKKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykgeworICAg
ICAgICBpZiAoYXJncyBpbnN0YW5jZW9mIEBSZWFkb25seSBTdHJpbmcpIHsKKyAgICAgICAgfQor
ICAgIH0KK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxOC9YX291dC5q
YXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE4L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNDJjODkwNQotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3Bh
Y2UvRm9ybWF0dGVyMTgvdGVzdDAxOC9YX291dC5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGlj
IGNsYXNzIFggeworCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKKwkJ
aWYgKGFyZ3MgaW5zdGFuY2VvZiBAUmVhZG9ubHkgU3RyaW5nKSB7CisJCX0KKwl9Cit9CmRpZmYg
LS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMTkvWF9pbi5qYXZhIHdvcmtzcGFjZS9G
b3JtYXR0ZXIxOC90ZXN0MDE5L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAw
MDAwMDAwLi5hNjY1ZWNjCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90
ZXN0MDE5L1hfaW4uamF2YQpAQCAtMCwwICsxLDQgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMg
WTxATWFya2VyIEludGVnZXIsIFN0cmluZz4ge30KK2NsYXNzIFk8VCwgVj4geworICAgIFpvcmsg
ejsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAxOS9YX291dC5qYXZh
IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDE5L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMC4uNjA2MjE1MgotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2Uv
Rm9ybWF0dGVyMTgvdGVzdDAxOS9YX291dC5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNs
YXNzIFggZXh0ZW5kcyBZPEBNYXJrZXIgSW50ZWdlciwgU3RyaW5nPiB7Cit9CisKK2NsYXNzIFk8
VCwgVj4geworCVpvcmsgejsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVz
dDAyMC9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjAvWF9pbi5qYXZhCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjBlMWNlZDcKLS0tIC9kZXYvbnVsbAor
Kysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjAvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNCBA
QAorcHVibGljIGNsYXNzIFggZXh0ZW5kcyBZPEBNYXJrZXIgSW50ZWdlcj4ge30KK2NsYXNzIFk8
VD4geworICAgIFpvcmsgejsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVz
dDAyMC9YX291dC5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIwL1hfb3V0LmphdmEK
bmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNjcyYjljNQotLS0gL2Rldi9udWxs
CisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyMC9YX291dC5qYXZhCkBAIC0wLDAgKzEs
NiBAQAorcHVibGljIGNsYXNzIFggZXh0ZW5kcyBZPEBNYXJrZXIgSW50ZWdlcj4geworfQorCitj
bGFzcyBZPFQ+IHsKKwlab3JrIHo7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3QwMjEvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIxL1hfaW4uamF2
YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5jNmE0OTFlCi0tLSAvZGV2L251
bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIxL1hfaW4uamF2YQpAQCAtMCwwICsx
LDQgQEAKK3B1YmxpYyBjbGFzcyBYPFQgZXh0ZW5kcyBPYmplY3QgJiBDb21wYXJhYmxlPD8gc3Vw
ZXIgQE1hcmtlciBTdHJpbmc+PiB7fQorY2xhc3MgWTxUPiB7CisgICAgWm9yayB6OworfQpkaWZm
IC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIxL1hfb3V0LmphdmEgd29ya3NwYWNl
L0Zvcm1hdHRlcjE4L3Rlc3QwMjEvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi43YWY5MDk3Ci0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDIxL1hfb3V0LmphdmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgY2xhc3MgWDxUIGV4
dGVuZHMgT2JqZWN0ICYgQ29tcGFyYWJsZTw/IHN1cGVyIEBNYXJrZXIgU3RyaW5nPj4geworfQor
CitjbGFzcyBZPFQ+IHsKKwlab3JrIHo7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMjIvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIyL1hfaW4u
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi42NTUzMjcwCi0tLSAvZGV2
L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIyL1hfaW4uamF2YQpAQCAtMCww
ICsxLDQgQEAKK3B1YmxpYyBjbGFzcyBYPEEgZXh0ZW5kcyBYPFg8WDxATWFya2VyIFN0cmluZz4+
Pj4ge30KK2NsYXNzIFk8VD4geworICAgIFpvcmsgejsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2Uv
Rm9ybWF0dGVyMTgvdGVzdDAyMi9YX291dC5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0
MDIyL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uY2VlY2E5
ZQotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyMi9YX291dC5q
YXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFg8QSBleHRlbmRzIFg8WDxYPEBNYXJr
ZXIgU3RyaW5nPj4+PiB7Cit9CisKK2NsYXNzIFk8VD4geworCVpvcmsgejsKK30KZGlmZiAtLWdp
dCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyMy9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMjMvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLjg4MzRkZDEKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3Qw
MjMvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNCBAQAorcHVibGljIGNsYXNzIFggeworCXZvaWQgZm9v
KE1hcDxATWFya2VyID8gc3VwZXIgQE1hcmtlciBPYmplY3QsIEBNYXJrZXIgPyBleHRlbmRzIEBN
YXJrZXIgU3RyaW5nPiBtKXt9CisgICB2b2lkIGdvbyhNYXA8QE1hcmtlciA/IGV4dGVuZHMgQE1h
cmtlciBPYmplY3QsIEBNYXJrZXIgPyBzdXBlciBATWFya2VyIFN0cmluZz4gbSl7fQorfQpkaWZm
IC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDIzL1hfb3V0LmphdmEgd29ya3NwYWNl
L0Zvcm1hdHRlcjE4L3Rlc3QwMjMvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi40ODQ5NWYxCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDIzL1hfb3V0LmphdmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7CisJ
dm9pZCBmb28oCisJCQlNYXA8QE1hcmtlciA/IHN1cGVyIEBNYXJrZXIgT2JqZWN0LCBATWFya2Vy
ID8gZXh0ZW5kcyBATWFya2VyIFN0cmluZz4gbSkgeworCX0KKworCXZvaWQgZ29vKAorCQkJTWFw
PEBNYXJrZXIgPyBleHRlbmRzIEBNYXJrZXIgT2JqZWN0LCBATWFya2VyID8gc3VwZXIgQE1hcmtl
ciBTdHJpbmc+IG0pIHsKKwl9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rl
c3QwMjQvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI0L1hfaW4uamF2YQpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi40MjVkODc4Ci0tLSAvZGV2L251bGwK
KysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI0L1hfaW4uamF2YQpAQCAtMCwwICsxLDMg
QEAKK3B1YmxpYyBjbGFzcyBYIDxATWFya2VyIFQgZXh0ZW5kcyBATWFya2VyIFk8QE1hcmtlciA/
PiwgQE1hcmtlciBRIGV4dGVuZHMgQE1hcmtlciBJbnRlZ2VyPiB7Cit9CitjbGFzcyBZPFQ+IHt9
CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjQvWF9vdXQuamF2YSB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyNC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLjgwODgzZDkKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMjQvWF9vdXQuamF2YQpAQCAtMCwwICsxLDUgQEAKK3B1YmxpYyBjbGFzcyBY
PEBNYXJrZXIgVCBleHRlbmRzIEBNYXJrZXIgWTxATWFya2VyID8+LCBATWFya2VyIFEgZXh0ZW5k
cyBATWFya2VyIEludGVnZXI+IHsKK30KKworY2xhc3MgWTxUPiB7Cit9CmRpZmYgLS1naXQgd29y
a3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjUvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDI1L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5m
NDQ5MTgxCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI1L1hf
aW4uamF2YQpAQCAtMCwwICsxLDUgQEAKK3B1YmxpYyBjbGFzcyBYPFAsIEM+IHsKKyAgcHVibGlj
IFgoKSB7CisgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEBNYXJrZXIgWCkpIHt9CisgIH0KK30K
ZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyNS9YX291dC5qYXZhIHdvcmtz
cGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI1L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uOGU4MjA5NAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0
dGVyMTgvdGVzdDAyNS9YX291dC5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFg8
UCwgQz4geworCXB1YmxpYyBYKCkgeworCQlpZiAoISh0aGlzIGluc3RhbmNlb2YgQE1hcmtlciBY
KSkgeworCQl9CisJfQorfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI2
L1hfaW4uamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyNi9YX2luLmphdmEKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNWFjNzdjMQotLS0gL2Rldi9udWxsCisrKyB3
b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyNi9YX2luLmphdmEKQEAgLTAsMCArMSwxNyBAQAor
aW50ZXJmYWNlIEkgeworICAgIHZvaWQgZm9vKFk8U3RyaW5nPi5aIHosIGludCB4KTsKK30KK3B1
YmxpYyBjbGFzcyBYICB7CisgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFy
Z3MpIHsKKyAgICAgICAgSSBpID0gWTxTdHJpbmc+LkBNYXJrZXIgWjo6Zm9vOworICAgICAgICBp
LmZvbyhuZXcgWTxTdHJpbmc+KCkubmV3IFooKSwgMTApOyAKKyAgICAgICAgWm9yayB6OworICAg
IH0KK30KK2NsYXNzIFk8VD4geworICAgIGNsYXNzIFogeworICAgICAgICB2b2lkIGZvbyhpbnQg
eCkgeworCSAgICBTeXN0ZW0ub3V0LnByaW50bG4oeCk7CisgICAgICAgIH0KKyAgICB9Cit9CmRp
ZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjYvWF9vdXQuamF2YSB3b3Jrc3Bh
Y2UvRm9ybWF0dGVyMTgvdGVzdDAyNi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLmQ1Yjk0ODMKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMjYvWF9vdXQuamF2YQpAQCAtMCwwICsxLDE5IEBACitpbnRlcmZhY2UgSSB7CisJ
dm9pZCBmb28oWTxTdHJpbmc+LlogeiwgaW50IHgpOworfQorCitwdWJsaWMgY2xhc3MgWCB7CisJ
cHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgeworCQlJIGkgPSBZPFN0cmlu
Zz4uQE1hcmtlciBaOjpmb287CisJCWkuZm9vKG5ldyBZPFN0cmluZz4oKS5uZXcgWigpLCAxMCk7
CisJCVpvcmsgejsKKwl9Cit9CisKK2NsYXNzIFk8VD4geworCWNsYXNzIFogeworCQl2b2lkIGZv
byhpbnQgeCkgeworCQkJU3lzdGVtLm91dC5wcmludGxuKHgpOworCQl9CisJfQorfQpkaWZmIC0t
Z2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI3L1hfaW4uamF2YSB3b3Jrc3BhY2UvRm9y
bWF0dGVyMTgvdGVzdDAyNy9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMC4uN2Y1ZDk5MAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVz
dDAyNy9YX2luLmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCAgeworICAgIHB1
YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7CisgICAgICAgIFggW10geCA9
IG5ldyBATWFya2VyIFggQE1hcmtlciBbNV07CisgICAgICAgIFggW10geDIgPSBuZXcgQE1hcmtl
ciBYIEBNYXJrZXIgW10geyBudWxsIH07CisgICAgICAgIFpvcmsgejsKKyAgICB9Cit9CmRpZmYg
LS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjcvWF9vdXQuamF2YSB3b3Jrc3BhY2Uv
Rm9ybWF0dGVyMTgvdGVzdDAyNy9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAuLjcxODE5MGEKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3QwMjcvWF9vdXQuamF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlw
dWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCVhbXSB4ID0gbmV3IEBN
YXJrZXIgWCBATWFya2VyWzVdOworCQlYW10geDIgPSBuZXcgQE1hcmtlciBYIEBNYXJrZXJbXSB7
IG51bGwgfTsKKwkJWm9yayB6OworCX0KK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvdGVzdDAyOC9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjgvWF9pbi5q
YXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjEyMjdhNjIKLS0tIC9kZXYv
bnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjgvWF9pbi5qYXZhCkBAIC0wLDAg
KzEsNSBAQAorcHVibGljIGNsYXNzIFggIHsKKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihT
dHJpbmcgW10gYXJncykgeworICAgICAgICBqYXZhLnV0aWwuTWFwLkVudHJ5IFtdIGUgPSAoamF2
YS51dGlsLk1hcDxTdHJpbmcsIFN0cmluZz4uQE1hcmtlciBFbnRyeSBbXSkgbnVsbDsKKyAgICB9
Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMjgvWF9vdXQuamF2YSB3
b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyOC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IDAwMDAwMDAuLjM1NDMzNGQKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zv
cm1hdHRlcjE4L3Rlc3QwMjgvWF9vdXQuamF2YQpAQCAtMCwwICsxLDUgQEAKK3B1YmxpYyBjbGFz
cyBYIHsKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJCWphdmEu
dXRpbC5NYXAuRW50cnlbXSBlID0gKGphdmEudXRpbC5NYXA8U3RyaW5nLCBTdHJpbmc+LkBNYXJr
ZXIgRW50cnlbXSkgbnVsbDsKKwl9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3QwMjkvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI5L1hfaW4uamF2
YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43ZDA0ODBmCi0tLSAvZGV2L251
bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI5L1hfaW4uamF2YQpAQCAtMCwwICsx
LDUgQEAKK2ltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2ltcG9ydCBqYXZhLnV0aWwuTGlz
dDsKK3B1YmxpYyBjbGFzcyBYPFQgZXh0ZW5kcyBDb21wYXJhYmxlPFQ+ICYgU2VyaWFsaXphYmxl
PiB7CisJdm9pZCBmb28oTGlzdDw/IGV4dGVuZHMgQE1hcmtlciBDb21wYXJhYmxlPFQ+PiBwKSB7
fSAKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAyOS9YX291dC5qYXZh
IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDI5L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMC4uODU5NTYxNAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2Uv
Rm9ybWF0dGVyMTgvdGVzdDAyOS9YX291dC5qYXZhCkBAIC0wLDAgKzEsNyBAQAoraW1wb3J0IGph
dmEuaW8uU2VyaWFsaXphYmxlOworaW1wb3J0IGphdmEudXRpbC5MaXN0OworCitwdWJsaWMgY2xh
c3MgWDxUIGV4dGVuZHMgQ29tcGFyYWJsZTxUPiAmIFNlcmlhbGl6YWJsZT4geworCXZvaWQgZm9v
KExpc3Q8PyBleHRlbmRzIEBNYXJrZXIgQ29tcGFyYWJsZTxUPj4gcCkgeworCX0KK30KZGlmZiAt
LWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMC9YX2luLmphdmEgd29ya3NwYWNlL0Zv
cm1hdHRlcjE4L3Rlc3QwMzAvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAuLjY4ZDE5ZTYKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rl
c3QwMzAvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorY2xhc3MgQmFzZSB7Cit9CitjbGFzcyBG
b288VSBleHRlbmRzIEJhc2UsIFYgZXh0ZW5kcyBCYXI8VSwgQE1hcmtlciBGb288VSwgVj4+PiB7
Cit9CitjbGFzcyBCYXI8RSBleHRlbmRzIEJhc2UsIEYgZXh0ZW5kcyBGb288RSwgQE1hcmtlciBC
YXI8RSwgRj4+PiB7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzAv
WF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMC9YX291dC5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjNjM2UyYzIKLS0tIC9kZXYvbnVsbAorKysg
d29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzAvWF9vdXQuamF2YQpAQCAtMCwwICsxLDggQEAK
K2NsYXNzIEJhc2UgeworfQorCitjbGFzcyBGb288VSBleHRlbmRzIEJhc2UsIFYgZXh0ZW5kcyBC
YXI8VSwgQE1hcmtlciBGb288VSwgVj4+PiB7Cit9CisKK2NsYXNzIEJhcjxFIGV4dGVuZHMgQmFz
ZSwgRiBleHRlbmRzIEZvbzxFLCBATWFya2VyIEJhcjxFLCBGPj4+IHsKK30KZGlmZiAtLWdpdCB3
b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMS9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMzEvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
Ljc2M2I2YTEKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzEv
WF9pbi5qYXZhCkBAIC0wLDAgKzEsMiBAQAorcHVibGljIGNsYXNzIFggZXh0ZW5kcyBATWFya2Vy
IE9iamVjdCB7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzEvWF9v
dXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMS9YX291dC5qYXZhCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjc2M2I2YTEKLS0tIC9kZXYvbnVsbAorKysgd29y
a3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzEvWF9vdXQuamF2YQpAQCAtMCwwICsxLDIgQEAKK3B1
YmxpYyBjbGFzcyBYIGV4dGVuZHMgQE1hcmtlciBPYmplY3QgeworfQpkaWZmIC0tZ2l0IHdvcmtz
cGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDMyL1hfaW4uamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgv
dGVzdDAzMi9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMzA2
ZmI2MwotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMi9YX2lu
LmphdmEKQEAgLTAsMCArMSw0IEBACitwdWJsaWMgY2xhc3MgWCB7CisgICAgWCB4ID0gbmV3IEBN
YXJrZXIgWCgpOworICAgIFggeSA9IG5ldyA8U3RyaW5nPiBATWFya2VyIFgoKTsKK30KZGlmZiAt
LWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMi9YX291dC5qYXZhIHdvcmtzcGFjZS9G
b3JtYXR0ZXIxOC90ZXN0MDMyL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMC4uZmIxZWE0OAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgv
dGVzdDAzMi9YX291dC5qYXZhCkBAIC0wLDAgKzEsNCBAQAorcHVibGljIGNsYXNzIFggeworCVgg
eCA9IG5ldyBATWFya2VyIFgoKTsKKwlYIHkgPSBuZXc8U3RyaW5nPiBATWFya2VyIFgoKTsKK30K
ZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMy9YX2luLmphdmEgd29ya3Nw
YWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzMvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAuLjI2YjFmYTcKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMzMvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggewor
ICAgIGNsYXNzIFkgeworICAgIH0KKyAgICBZIHkxID0gbmV3IEBNYXJrZXIgWCgpLm5ldyBATWFy
a2VyIFkoKTsKKyAgICBZIHkyID0gbmV3IEBNYXJrZXIgWCgpLm5ldyA8U3RyaW5nPiBATWFya2Vy
IFkoKTsKK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzMy9YX291dC5q
YXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDMzL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMGE4ZjBjYwotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3Bh
Y2UvRm9ybWF0dGVyMTgvdGVzdDAzMy9YX291dC5qYXZhCkBAIC0wLDAgKzEsNyBAQAorcHVibGlj
IGNsYXNzIFggeworCWNsYXNzIFkgeworCX0KKworCVkgeTEgPSBuZXcgQE1hcmtlciBYKCkubmV3
IEBNYXJrZXIgWSgpOworCVkgeTIgPSBuZXcgQE1hcmtlciBYKCkubmV3PFN0cmluZz4gQE1hcmtl
ciBZKCk7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzQvWF9pbi5q
YXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM0L1hfaW4uamF2YQpuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwLi5iNGJjNDQzCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFj
ZS9Gb3JtYXR0ZXIxOC90ZXN0MDM0L1hfaW4uamF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBj
bGFzcyBYIHsKKyAgICBYIHg7CisgICAgY2xhc3MgWSB7CisgICAgfQorICAgIFkgeTEgPSB4Lm5l
dyBATWFya2VyIFkoKTsKKyAgICBZIHkyID0geC5uZXcgPFN0cmluZz4gQE1hcmtlciBZKCk7Cit9
CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzQvWF9vdXQuamF2YSB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzNC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLjA1YjhiZDcKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMzQvWF9vdXQuamF2YQpAQCAtMCwwICsxLDkgQEAKK3B1YmxpYyBjbGFzcyBY
IHsKKwlYIHg7CisKKwljbGFzcyBZIHsKKwl9CisKKwlZIHkxID0geC5uZXcgQE1hcmtlciBZKCk7
CisJWSB5MiA9IHgubmV3PFN0cmluZz4gQE1hcmtlciBZKCk7Cit9CmRpZmYgLS1naXQgd29ya3Nw
YWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzUvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90
ZXN0MDM1L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi45MWFj
YmMzCi0tLSAvZGV2L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM1L1hfaW4u
amF2YQpAQCAtMCwwICsxLDMgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKyAgICB2b2lkIGZvbygpIHRo
cm93cyBATWFya2VyIE51bGxQb2ludGVyRXhjZXB0aW9uLCBATWFya2VyIEFycmF5SW5kZXhPdXRP
ZkJvdW5kc0V4Y2VwdGlvbiB7fQorfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90
ZXN0MDM1L1hfb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzUvWF9vdXQuamF2
YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43OTk0YjRlCi0tLSAvZGV2L251
bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM1L1hfb3V0LmphdmEKQEAgLTAsMCAr
MSw1IEBACitwdWJsaWMgY2xhc3MgWCB7CisJdm9pZCBmb28oKSB0aHJvd3MgQE1hcmtlciBOdWxs
UG9pbnRlckV4Y2VwdGlvbiwKKwkJCUBNYXJrZXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0
aW9uIHsKKwl9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzYvWF9p
bi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM2L1hfaW4uamF2YQpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5mYjA4NDM5Ci0tLSAvZGV2L251bGwKKysrIHdvcmtz
cGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM2L1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK2ludGVy
ZmFjZSBJIHt9CitpbnRlcmZhY2UgSiB7fQoraW50ZXJmYWNlIEsgZXh0ZW5kcyBATWFya2VyIEks
IEBNYXJrZXIgSiB7fQoraW50ZXJmYWNlIEwge30KK3B1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMg
QE1hcmtlciBLLCBATWFya2VyIEwgeworfQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0MDM2L1hfb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzYvWF9vdXQu
amF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5iMTA0ZTMzCi0tLSAvZGV2
L251bGwKKysrIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM2L1hfb3V0LmphdmEKQEAgLTAs
MCArMSwxNCBAQAoraW50ZXJmYWNlIEkgeworfQorCitpbnRlcmZhY2UgSiB7Cit9CisKK2ludGVy
ZmFjZSBLIGV4dGVuZHMgQE1hcmtlciBJLCBATWFya2VyIEogeworfQorCitpbnRlcmZhY2UgTCB7
Cit9CisKK3B1YmxpYyBjbGFzcyBYIGltcGxlbWVudHMgQE1hcmtlciBLLCBATWFya2VyIEwgewor
fQpkaWZmIC0tZ2l0IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM3L1hfaW4uamF2YSB3b3Jr
c3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzNy9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uMDM0ZmM4ZQotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0
dGVyMTgvdGVzdDAzNy9YX2luLmphdmEKQEAgLTAsMCArMSwxOSBAQAoraW50ZXJmYWNlIEkgewor
ICAgIHZvaWQgZm9vKGludCB4KTsKK30KK3B1YmxpYyBjbGFzcyBYICB7CisgICAgcHVibGljIHN0
YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHsKKyAgICAgICAgSSBpID0gQE1hcmtlciBZ
LiBATWFya2VyIFogQE1hcmtlciBbXSBbXSBATWFya2VyIFtdIDo6Zm9vOworICAgICAgICBJIGky
ID0gQFZhbHVlKCJKb2UiKSBZLiBAVmFsdWUyKEBWYWx1ZSgiSm9lIikpIEBNYXJrZXIgWiBATWFy
a2VyIFtdIFtdIEBNYXJrZXIgW10gOjpmb287CisgICAgICAgIEkgaTMgPSBAVmFsdWUoIkR1byIp
IFkuIEBWYWx1ZTIoQFZhbHVlKCJKb2UiKSkgQE1hcmtlciBaIDo6Zm9vOworICAgICAgICBpLmZv
bygxMCk7IAorICAgICAgICBab3JrIHo7CisgICAgfQorfQorY2xhc3MgWSB7CisgICAgc3RhdGlj
IGNsYXNzIFogeworICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgZm9vKGludCB4KSB7CisJICAg
IFN5c3RlbS5vdXQucHJpbnRsbih4KTsKKyAgICAgICAgfQorICAgIH0KK30KZGlmZiAtLWdpdCB3
b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzNy9YX291dC5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0
ZXIxOC90ZXN0MDM3L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MC4uNzc3YTg1ZAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAz
Ny9YX291dC5qYXZhCkBAIC0wLDAgKzEsMjEgQEAKK2ludGVyZmFjZSBJIHsKKwl2b2lkIGZvbyhp
bnQgeCk7Cit9CisKK3B1YmxpYyBjbGFzcyBYIHsKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihT
dHJpbmdbXSBhcmdzKSB7CisJCUkgaSA9IEBNYXJrZXIgWS5ATWFya2VyIFogQE1hcmtlcltdW11A
TWFya2VyW106OmZvbzsKKwkJSSBpMiA9IEBWYWx1ZSgiSm9lIikgWS5AVmFsdWUyKEBWYWx1ZSgi
Sm9lIikpIEBNYXJrZXIgWiBATWFya2VyW11bXUBNYXJrZXJbXTo6Zm9vOworCQlJIGkzID0gQFZh
bHVlKCJEdW8iKSBZLkBWYWx1ZTIoQFZhbHVlKCJKb2UiKSkgQE1hcmtlciBaOjpmb287CisJCWku
Zm9vKDEwKTsKKwkJWm9yayB6OworCX0KK30KKworY2xhc3MgWSB7CisJc3RhdGljIGNsYXNzIFog
eworCQlwdWJsaWMgc3RhdGljIHZvaWQgZm9vKGludCB4KSB7CisJCQlTeXN0ZW0ub3V0LnByaW50
bG4oeCk7CisJCX0KKwl9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3Qw
MzgvWF9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM4L1hfaW4uamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi44ZTVkMWIzCi0tLSAvZGV2L251bGwKKysr
IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0MDM4L1hfaW4uamF2YQpAQCAtMCwwICsxLDI1IEBA
CitpbnRlcmZhY2UgSSB7CisgICAgWSBmb28oaW50IHgpOworfQorcHVibGljIGNsYXNzIFggIHsK
KyAgICBjbGFzcyBaIGV4dGVuZHMgWSB7CisgICAgICAgIHB1YmxpYyBaKGludCB4KSB7CisgICAg
ICAgICAgICBzdXBlcih4KTsKKyAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigpOworICAg
ICAgICB9CisgICAgfQorICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdz
KSB7CisgICAgICAgIGkgPSBATWFya2VyIFc8QE1hcmtlciBJbnRlZ2VyPjo6PEBNYXJrZXIgU3Ry
aW5nPiBuZXc7CisgICAgfQorfQorY2xhc3MgVzxUPiBleHRlbmRzIFkgeworICAgIHB1YmxpYyBX
KFQgeCkgeworICAgICAgICBzdXBlcigwKTsKKyAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKHgp
OworICAgIH0KK30KK2NsYXNzIFkgeworICAgIHB1YmxpYyBZKGludCB4KSB7CisgICAgICAgIFN5
c3RlbS5vdXQucHJpbnRsbih4KTsKKyAgICB9Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1h
dHRlcjE4L3Rlc3QwMzgvWF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzOC9Y
X291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmZmN2ZjM2UKLS0t
IC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzgvWF9vdXQuamF2YQpA
QCAtMCwwICsxLDI5IEBACitpbnRlcmZhY2UgSSB7CisJWSBmb28oaW50IHgpOworfQorCitwdWJs
aWMgY2xhc3MgWCB7CisJY2xhc3MgWiBleHRlbmRzIFkgeworCQlwdWJsaWMgWihpbnQgeCkgewor
CQkJc3VwZXIoeCk7CisJCQlTeXN0ZW0ub3V0LnByaW50bG4oKTsKKwkJfQorCX0KKworCXB1Ymxp
YyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKKwkJaSA9IEBNYXJrZXIgVzxATWFy
a2VyIEludGVnZXI+Ojo8QE1hcmtlciBTdHJpbmc+bmV3OworCX0KK30KKworY2xhc3MgVzxUPiBl
eHRlbmRzIFkgeworCXB1YmxpYyBXKFQgeCkgeworCQlzdXBlcigwKTsKKwkJU3lzdGVtLm91dC5w
cmludGxuKHgpOworCX0KK30KKworY2xhc3MgWSB7CisJcHVibGljIFkoaW50IHgpIHsKKwkJU3lz
dGVtLm91dC5wcmludGxuKHgpOworCX0KK30KZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvdGVzdDAzOS9YX2luLmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzkvWF9pbi5q
YXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmY4ZmY1ZmIKLS0tIC9kZXYv
bnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzkvWF9pbi5qYXZhCkBAIC0wLDAg
KzEsNiBAQAorcHVibGljIGNsYXNzIFggIHsKKyAgICBPYmplY3QgbyA9IChATWFya2VyIFgpIG51
bGw7CisgICAgT2JqZWN0IHAgPSAoQE1hcmtlciBYIEBNYXJrZXIgW10pIG51bGw7CisgICAgT2Jq
ZWN0IHEgPSAoQE1hcmtlciBqYXZhLiBATWFya2VyIHV0aWwuIEBNYXJrZXIgTGlzdDxATWFya2Vy
IFN0cmluZz4gW10pIG51bGw7CisgICAgT2JqZWN0IHIgPSAoQE1hcmtlciBqYXZhLiBATWFya2Vy
IHV0aWwuQE1hcmtlciBNYXA8QE1hcmtlciBTdHJpbmcsIEBNYXJrZXIgU3RyaW5nPi5ATWFya2Vy
IEVudHJ5IEBNYXJrZXIgW10pIG51bGw7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRl
cjE4L3Rlc3QwMzkvWF9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgvdGVzdDAzOS9YX291
dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjI3YTYyOWEKLS0tIC9k
ZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3QwMzkvWF9vdXQuamF2YQpAQCAt
MCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlPYmplY3QgbyA9IChATWFya2VyIFgpIG51
bGw7CisJT2JqZWN0IHAgPSAoQE1hcmtlciBYIEBNYXJrZXJbXSkgbnVsbDsKKwlPYmplY3QgcSA9
IChATWFya2VyIGphdmEuQE1hcmtlciB1dGlsLkBNYXJrZXIgTGlzdDxATWFya2VyIFN0cmluZz5b
XSkgbnVsbDsKKwlPYmplY3QgciA9IChATWFya2VyIGphdmEuQE1hcmtlciB1dGlsLkBNYXJrZXIg
TWFwPEBNYXJrZXIgU3RyaW5nLCBATWFya2VyIFN0cmluZz4uQE1hcmtlciBFbnRyeSBATWFya2Vy
W10pIG51bGw7Cit9CmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3RMYW1iZGEv
QV9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0TGFtYmRhL0FfaW4uamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4zOTc0NGQ3Ci0tLSAvZGV2L251bGwKKysr
IHdvcmtzcGFjZS9Gb3JtYXR0ZXIxOC90ZXN0TGFtYmRhL0FfaW4uamF2YQpAQCAtMCwwICsxLDQ0
IEBACisvKioKKyAqIFRlc3QKKyAqCisgKi8KK3BhY2thZ2UgcDEucDIudGVzdDsKKworaW1wb3J0
IGphdmEuaW8uU2VyaWFsaXphYmxlOworaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CisKK3B1
YmxpYyBhYnN0cmFjdCBjbGFzcyBBIGV4dGVuZHMgamF2YS5sYW5nLk9iamVjdCBpbXBsZW1lbnRz
IFJ1bm5hYmxlLCBDbG9uZWFibGUsIFNlcmlhbGl6YWJsZSB7CisJcHVibGljIHZvaWQgcnVuKCkg
eworCX0KKworCXB1YmxpYyB2b2lkIGxhbWJkYXMoKSB7CisJCVJ1bm5hYmxlIGEgPSAoKSAtPiB7
CisJCQl0aGlzSXNDcmF6eSgpOworCQkJaUp1c3RNZXQoeW91KTsKKwkJCWhlcmUubnVtYmVyLmNh
bGxNZSgpOworCQl9OworCisJCUZ1bmMgaWRBID0geCAtPiB4OworCisJCUZ1bmMgaWRCID0geCAt
PiB7IHJldHVybiB4OyB9OworCQkKKwkJRnVuYyBpZEMgPSB4ICAgLT4gICB4OworCisJCUZ1bmMg
aWQyID0geCAtPiB7CisJCQlpZiAoeCA9PSBudWxsKQorCQkJeworCQkJCXJldHVybiBudWxsOwor
CQkJfQorCQkJZWxzZQorCQkJCXJldHVybiB4OworCQl9OworCQkKKwkJSW1hZ2luYWJsZUZ1bmN0
aW9uPFN0cmluZywgSW50ZWdlcj4gZiA9CisJCQkoU3RyaW5nIGlucHV0KSAtPiBpbnB1dC5sZW5n
dGgoKTsKKworCQkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZjIgPSAoU3Ry
aW5nIGlucHV0KSAtPiB7IHJldHVybiBpbnB1dC5sZW5ndGgoKSArIG5ldyBMZXRzUHJldGVuZCgp
IHsgaW50IGhvd01hbnkoKSB7IHJldHVybiA0MjsgfSB9CisJCQkJCQorLmhvd01hbnkoKTsgfTsK
Kwl9CisKK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgd29ya3NwYWNl
L0Zvcm1hdHRlcjE4L3Rlc3RMYW1iZGEvQV9vdXQuamF2YSB3b3Jrc3BhY2UvRm9ybWF0dGVyMTgv
dGVzdExhbWJkYS9BX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjFiY2Q3YzMKLS0tIC9kZXYvbnVsbAorKysgd29ya3NwYWNlL0Zvcm1hdHRlcjE4L3Rlc3RMYW1i
ZGEvQV9vdXQuamF2YQpAQCAtMCwwICsxLDUxIEBACisvKioKKyAqIFRlc3QKKyAqCisgKi8KK3Bh
Y2thZ2UgcDEucDIudGVzdDsKKworaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOworaW1wb3J0
IGphdmEuaW8uSU9FeGNlcHRpb247CisKK3B1YmxpYyBhYnN0cmFjdCBjbGFzcyBBIGV4dGVuZHMg
amF2YS5sYW5nLk9iamVjdCBpbXBsZW1lbnRzIFJ1bm5hYmxlLAorCQlDbG9uZWFibGUsIFNlcmlh
bGl6YWJsZSB7CisJcHVibGljIHZvaWQgcnVuKCkgeworCX0KKworCXB1YmxpYyB2b2lkIGxhbWJk
YXMoKSB7CisJCVJ1bm5hYmxlIGEgPSAoKSAtPiB7CisJCQl0aGlzSXNDcmF6eSgpOworCQkJaUp1
c3RNZXQoeW91KTsKKwkJCWhlcmUubnVtYmVyLmNhbGxNZSgpOworCQl9OworCisJCUZ1bmMgaWRB
ID0geCAtPiB4OworCisJCUZ1bmMgaWRCID0geCAtPiB7CisJCQlyZXR1cm4geDsKKwkJfTsKKwor
CQlGdW5jIGlkQyA9IHggLT4geDsKKworCQlGdW5jIGlkMiA9IHggLT4geworCQkJaWYgKHggPT0g
bnVsbCkgeworCQkJCXJldHVybiBudWxsOworCQkJfSBlbHNlCisJCQkJcmV0dXJuIHg7CisJCX07
CisKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZiA9IChTdHJpbmcgaW5w
dXQpIC0+IGlucHV0CisJCQkJLmxlbmd0aCgpOworCisJCUltYWdpbmFibGVGdW5jdGlvbjxTdHJp
bmcsIEludGVnZXI+IGYyID0gKFN0cmluZyBpbnB1dCkgLT4geworCQkJcmV0dXJuIGlucHV0Lmxl
bmd0aCgpICsgbmV3IExldHNQcmV0ZW5kKCkgeworCQkJCWludCBob3dNYW55KCkgeworCQkJCQly
ZXR1cm4gNDI7CisJCQkJfQorCQkJfQorCisJCQkuaG93TWFueSgpOworCQl9OworCX0KKworfQpc
IE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCB3b3Jrc3BhY2UvRm9ybWF0dGVy
MTgvdGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9pbi5qYXZhIHdvcmtzcGFjZS9Gb3JtYXR0ZXIx
OC90ZXN0UmVmZXJlbmNlRXhwcmVzc2lvbi9BX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uNDQ5OTQ2NwotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0
dGVyMTgvdGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9pbi5qYXZhCkBAIC0wLDAgKzEsMjEgQEAK
Ky8qKgorICogVGVzdAorICoKKyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2
YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGlj
IGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVu
bmFibGUsIENsb25lYWJsZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJ
fQorCisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgICBGdW5jdGlvbmFsaXNoPExpc3Q8SW50ZWdlcj4s
IEludGVnZXI+IFdIQVRFVkVSID0gTGlzdDwgSW50ZWdlciA+IDo6IHNpemUgOworCQorCXB1Ymxp
YyB2b2lkIHJlZmVyZW5jZUV4cHJlc3Npb24oKSB7CisJCUltYWdpbmFibGVGdW5jdGlvbjxTdHJp
bmcsIEludGVnZXI+IGZ1bmMgPSBLbGF6egorCQkJCTo6ICBtZXRob2Q7IAorCX0JCisKK30KXCBO
byBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3RSZWZlcmVuY2VFeHByZXNzaW9uL0Ffb3V0LmphdmEgd29ya3NwYWNlL0Zvcm1hdHRlcjE4
L3Rlc3RSZWZlcmVuY2VFeHByZXNzaW9uL0Ffb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uMjY1MjQwNAotLS0gL2Rldi9udWxsCisrKyB3b3Jrc3BhY2UvRm9ybWF0
dGVyMTgvdGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YQpAQCAtMCwwICsxLDIxIEBA
CisvKioKKyAqIFRlc3QKKyAqCisgKi8KK3BhY2thZ2UgcDEucDIudGVzdDsKKworaW1wb3J0IGph
dmEuaW8uU2VyaWFsaXphYmxlOworaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CisKK3B1Ymxp
YyBhYnN0cmFjdCBjbGFzcyBBIGV4dGVuZHMgamF2YS5sYW5nLk9iamVjdCBpbXBsZW1lbnRzIFJ1
bm5hYmxlLAorCQlDbG9uZWFibGUsIFNlcmlhbGl6YWJsZSB7CisJcHVibGljIHZvaWQgcnVuKCkg
eworCX0KKworCXByaXZhdGUgc3RhdGljIGZpbmFsIEZ1bmN0aW9uYWxpc2g8TGlzdDxJbnRlZ2Vy
PiwgSW50ZWdlcj4gV0hBVEVWRVIgPSBMaXN0PEludGVnZXI+OjpzaXplOworCisJcHVibGljIHZv
aWQgcmVmZXJlbmNlRXhwcmVzc2lvbigpIHsKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywg
SW50ZWdlcj4gZnVuYyA9IEtsYXp6OjptZXRob2Q7CisJfQorCit9ClwgTm8gbmV3bGluZSBhdCBl
bmQgb2YgZmlsZQ==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>228329</attachid>
            <date>2013-03-13 05:12:00 -0400</date>
            <delta_ts>2013-03-14 04:52:25 -0400</delta_ts>
            <desc>Patch for all 1.8 formatter work</desc>
            <filename>patch-formatter.txt</filename>
            <type>text/plain</type>
            <size>54500</size>
            <attacher name="Jesper Moller">jesper</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpk
aWZmIC0tZ2l0IGNvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3Qv
TGFtYmRhRXhwcmVzc2lvbi5qYXZhIGNvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9hc3QvTGFtYmRhRXhwcmVzc2lvbi5qYXZhCmluZGV4IDk2YWYwZTIuLjIxYmQzZWIg
MTAwNjQ0Ci0tLSBjb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0
L0xhbWJkYUV4cHJlc3Npb24uamF2YQorKysgY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2FzdC9MYW1iZGFFeHByZXNzaW9uLmphdmEKQEAgLTQyMiw2ICs0MjIsMTAg
QEAKIAkJCXZpc2l0b3IuZW5kVmlzaXQodGhpcywgYmxvY2tTY29wZSk7CiAJfQogCQorCXB1Ymxp
YyBNZXRob2RTY29wZSBnZXRTY29wZSgpIHsKKwkJcmV0dXJuIHRoaXMuc2NvcGU7CisJfQorCQog
CXByb3RlY3RlZCBib29sZWFuIHNoYXBlQW5hbHlzaXNDb21wbGV0ZSgpIHsKIAkJcmV0dXJuIHRo
aXMuc2hhcGVBbmFseXNpc0NvbXBsZXRlOwogCX0KZGlmZiAtLWdpdCBjb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcGFyc2VyL1NjYW5uZXIuamF2YSBjb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcGFyc2VyL1NjYW5uZXIuamF2YQppbmRl
eCBhZGU2MGM5Li44ZTk0OGJlIDEwMDY0NAotLS0gY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL3BhcnNlci9TY2FubmVyLmphdmEKKysrIGNvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wYXJzZXIvU2Nhbm5lci5qYXZhCkBAIC0xLDUgKzEs
NSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
MiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
MyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRo
aXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2
YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEu
MAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFi
bGUgYXQKQEAgLTEyLDYgKzEyLDcgQEAKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29y
cG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqICAgICBTdGVwaGFu
IEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvciBidWcgMTg2MzQyIC0gW2NvbXBpbGVyXVtudWxs
XSBVc2luZyBhbm5vdGF0aW9ucyBmb3IgbnVsbCBjaGVja2luZworICogICAgIEplc3BlciBTIE1v
bGxlciAgLS4gQ29udHJpYnV0aW9uIGZvciBidWcgNDAwODMwOiBbMS44XVtmb3JtYXR0ZXJdIENv
ZGUgZm9ybWF0dGVyIGZvciBKYXZhIDgKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2Fn
ZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIucGFyc2VyOwogCkBAIC0zODM3LDcg
KzM4MzgsNyBAQAogCWlmICh0aGlzLmN1cnJlbnRQb3NpdGlvbiA+IHRoaXMuZW9mUG9zaXRpb24p
CiAJCXJldHVybiAiYmVoaW5kIHRoZSBFT0ZcblxuIiArIG5ldyBTdHJpbmcodGhpcy5zb3VyY2Up
OyAvLyROT04tTkxTLTEkCiAJaWYgKHRoaXMuY3VycmVudFBvc2l0aW9uIDw9IDApCi0JCXJldHVy
biAiTk9UIHN0YXJ0ZWQhXG5cbiIrIG5ldyBTdHJpbmcodGhpcy5zb3VyY2UpOyAvLyROT04tTkxT
LTEkCisJCXJldHVybiAiTk9UIHN0YXJ0ZWQhXG5cbiIrICh0aGlzLnNvdXJjZSAhPSBudWxsID8g
bmV3IFN0cmluZyh0aGlzLnNvdXJjZSkgOiAiIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAogCiAJU3RyaW5nQnVmZmVyIGJ1ZmZlciA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKIAlpZiAodGhp
cy5zdGFydFBvc2l0aW9uIDwgMTAwMCkgewpkaWZmIC0tZ2l0IGZvcm1hdHRlci9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9mb3JtYXR0ZXIvRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuamF2YSBm
b3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2NvcmUvZm9ybWF0dGVyL0RlZmF1bHRDb2RlRm9ybWF0
dGVyQ29uc3RhbnRzLmphdmEKaW5kZXggMTY5NGI0OC4uN2I5OTk2NyAxMDA2NDQKLS0tIGZvcm1h
dHRlci9vcmcvZWNsaXBzZS9qZHQvY29yZS9mb3JtYXR0ZXIvRGVmYXVsdENvZGVGb3JtYXR0ZXJD
b25zdGFudHMuamF2YQorKysgZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9jb3JlL2Zvcm1hdHRl
ci9EZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5qYXZhCkBAIC0xLDE0ICsxLDE5IEBACiAv
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElCTSBD
b3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBD
b3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9n
cmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxl
IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3
aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAog
ICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqCisgKiBUaGlz
IGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2
ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMg
bWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9u
bHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2Yg
dGhlIEpDUC4KKyAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAg
LSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqICAgICBCcm9jayBKYW5pY3phayAg
IC0gQ29udHJpYnV0aW9uIGZvciBidWcgMTUwNzQxCiAgKiAgICAgUmF5IFYuICh2b2lkc3RhckBn
bWFpbC5jb20pIC0gQ29udHJpYnV0aW9uIGZvciBidWcgMjgyOTg4CisgKiAgICAgSmVzcGVyIFMg
TW9sbGVyIC0gQ29udHJpYnV0aW9uIGZvciBidWcgNDAwODMwCiAgKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUuZm9ybWF0dGVyOwogCkBAIC02MDYs
NiArNjExLDIxIEBACiAJICogQHNpbmNlIDMuMAogCSAqLwogCXB1YmxpYyBzdGF0aWMgZmluYWwg
U3RyaW5nIEZPUk1BVFRFUl9CUkFDRV9QT1NJVElPTl9GT1JfVFlQRV9ERUNMQVJBVElPTiA9IEph
dmFDb3JlLlBMVUdJTl9JRCArICIuZm9ybWF0dGVyLmJyYWNlX3Bvc2l0aW9uX2Zvcl90eXBlX2Rl
Y2xhcmF0aW9uIjsJLy8kTk9OLU5MUy0xJAorCisJLyoqCisJICogPHByZT4KKwkgKiBGT1JNQVRU
RVIgLyBPcHRpb24gdG8gcG9zaXRpb24gdGhlIGJyYWNlcyBvZiBhIGxhbWJkYSBibG9jaworCSAq
ICAgICAtIG9wdGlvbiBpZDogICAgICAgICAib3JnLmVjbGlwc2UuamR0LmNvcmUuZm9ybWF0dGVy
LmJyYWNlX3Bvc2l0aW9uX2Zvcl9sYW1iZGFfYm9keSIKKwkgKiAgICAgLSBwb3NzaWJsZSB2YWx1
ZXM6ICAgeyBFTkRfT0ZfTElORSwgTkVYVF9MSU5FLCBORVhUX0xJTkVfU0hJRlRFRCwgTkVYVF9M
SU5FX09OX1dSQVAgfQorCSAqICAgICAtIGRlZmF1bHQ6ICAgICAgICAgICBFTkRfT0ZfTElORQor
CSAqIDwvcHJlPgorCSAqIEBzZWUgI0VORF9PRl9MSU5FCisJICogQHNlZSAjTkVYVF9MSU5FCisJ
ICogQHNlZSAjTkVYVF9MSU5FX1NISUZURUQKKwkgKiBAc2VlICNORVhUX0xJTkVfT05fV1JBUAor
CSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBGT1JNQVRU
RVJfQlJBQ0VfUE9TSVRJT05fRk9SX0xBTUJEQV9CT0RZID0gSmF2YUNvcmUuUExVR0lOX0lEICsg
Ii5mb3JtYXR0ZXIuYnJhY2VfcG9zaXRpb25fZm9yX2xhbWJkYV9ib2R5IjsJLy8kTk9OLU5MUy0x
JAogCiAJLyoqCiAJICogPHByZT4KQEAgLTIwMDIsNiArMjAyMiwxOCBAQAogCXB1YmxpYyBzdGF0
aWMgZmluYWwgU3RyaW5nIEZPUk1BVFRFUl9JTlNFUlRfU1BBQ0VfQUZURVJfRUxMSVBTSVMgID0g
SmF2YUNvcmUuUExVR0lOX0lEICsgIi5mb3JtYXR0ZXIuaW5zZXJ0X3NwYWNlX2FmdGVyX2VsbGlw
c2lzIjsJLy8kTk9OLU5MUy0xJAogCS8qKgogCSAqIDxwcmU+CisJICogRk9STUFUVEVSIC8gT3B0
aW9uIHRvIGluc2VydCBhIHNwYWNlIGFmdGVyIHRoZSAtPiBpbiBsYW1iZGEgZXhwcmVzc2lvbnMK
KwkgKiAgICAgLSBvcHRpb24gaWQ6ICAgICAgICAgIm9yZy5lY2xpcHNlLmpkdC5jb3JlLmZvcm1h
dHRlci5pbnNlcnRfc3BhY2VfYWZ0ZXJfbGFtYmRhX2Fycm93IgorCSAqICAgICAtIHBvc3NpYmxl
IHZhbHVlczogICB7IElOU0VSVCwgRE9fTk9UX0lOU0VSVCB9CisJICogICAgIC0gZGVmYXVsdDog
ICAgICAgICAgIElOU0VSVAorCSAqIDwvcHJlPgorCSAqIEBzZWUgSmF2YUNvcmUjSU5TRVJUCisJ
ICogQHNlZSBKYXZhQ29yZSNET19OT1RfSU5TRVJUCisJICogQHNpbmNlIDMuOQorCSAqLworCXB1
YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEZPUk1BVFRFUl9JTlNFUlRfU1BBQ0VfQUZURVJfTEFN
QkRBX0FSUk9XICA9IEphdmFDb3JlLlBMVUdJTl9JRCArICIuZm9ybWF0dGVyLmluc2VydF9zcGFj
ZV9hZnRlcl9sYW1iZGFfYXJyb3ciOwkvLyROT04tTkxTLTEkCisJLyoqCisJICogPHByZT4KIAkg
KiBGT1JNQVRURVIgLyBPcHRpb24gdG8gaW5zZXJ0IGEgc3BhY2UgYWZ0ZXIgdGhlIG9wZW5pbmcg
YW5nbGUgYnJhY2tldCBpbiBwYXJhbWV0ZXJpemVkIHR5cGUgcmVmZXJlbmNlCiAJICogICAgIC0g
b3B0aW9uIGlkOiAgICAgICAgICJvcmcuZWNsaXBzZS5qZHQuY29yZS5mb3JtYXR0ZXIuaW5zZXJ0
X3NwYWNlX2FmdGVyX29wZW5pbmdfYW5nbGVfYnJhY2tldF9pbl9wYXJhbWV0ZXJpemVkX3R5cGVf
cmVmZXJlbmNlIgogCSAqICAgICAtIHBvc3NpYmxlIHZhbHVlczogICB7IElOU0VSVCwgRE9fTk9U
X0lOU0VSVCB9CkBAIC0yOTI3LDYgKzI5NTksMTggQEAKIAlwdWJsaWMgc3RhdGljIGZpbmFsIFN0
cmluZyBGT1JNQVRURVJfSU5TRVJUX1NQQUNFX0JFRk9SRV9FTExJUFNJUyAgPSBKYXZhQ29yZS5Q
TFVHSU5fSUQgKyAiLmZvcm1hdHRlci5pbnNlcnRfc3BhY2VfYmVmb3JlX2VsbGlwc2lzIjsJLy8k
Tk9OLU5MUy0xJAogCS8qKgogCSAqIDxwcmU+CisJICogRk9STUFUVEVSIC8gT3B0aW9uIHRvIGlu
c2VydCBhIHNwYWNlIGJlZm9yZSBsYW1iZGEgLT4KKwkgKiAgICAgLSBvcHRpb24gaWQ6ICAgICAg
ICAgIm9yZy5lY2xpcHNlLmpkdC5jb3JlLmZvcm1hdHRlci5pbnNlcnRfc3BhY2VfYmVmb3JlX2xh
bWJkYV9hcnJvdyIKKwkgKiAgICAgLSBwb3NzaWJsZSB2YWx1ZXM6ICAgeyBJTlNFUlQsIERPX05P
VF9JTlNFUlQgfQorCSAqICAgICAtIGRlZmF1bHQ6ICAgICAgICAgICBJTlNFUlQKKwkgKiA8L3By
ZT4KKwkgKiBAc2VlIEphdmFDb3JlI0lOU0VSVAorCSAqIEBzZWUgSmF2YUNvcmUjRE9fTk9UX0lO
U0VSVAorCSAqIEBzaW5jZSAzLjkKKwkgKi8KKwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBG
T1JNQVRURVJfSU5TRVJUX1NQQUNFX0JFRk9SRV9MQU1CREFfQVJST1cgPSBKYXZhQ29yZS5QTFVH
SU5fSUQgKyAiLmZvcm1hdHRlci5pbnNlcnRfc3BhY2VfYmVmb3JlX2xhbWJkYV9hcnJvdyI7CS8v
JE5PTi1OTFMtMSQKKwkvKioKKwkgKiA8cHJlPgogCSAqIEZPUk1BVFRFUiAvIE9wdGlvbiB0byBp
bnNlcnQgYSBzcGFjZSBiZWZvcmUgdGhlIG9wZW5pbmcgYW5nbGUgYnJhY2tldCBpbiBwYXJhbWV0
ZXJpemVkIHR5cGUgcmVmZXJlbmNlCiAJICogICAgIC0gb3B0aW9uIGlkOiAgICAgICAgICJvcmcu
ZWNsaXBzZS5qZHQuY29yZS5mb3JtYXR0ZXIuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2Fu
Z2xlX2JyYWNrZXRfaW5fcGFyYW1ldGVyaXplZF90eXBlX3JlZmVyZW5jZSIKIAkgKiAgICAgLSBw
b3NzaWJsZSB2YWx1ZXM6ICAgeyBJTlNFUlQsIERPX05PVF9JTlNFUlQgfQpkaWZmIC0tZ2l0IGZv
cm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3JtYXR0ZXJW
aXNpdG9yLmphdmEgZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIv
Q29kZUZvcm1hdHRlclZpc2l0b3IuamF2YQppbmRleCAzMGE4ZmNlLi45ZTU2NzI0IDEwMDY0NAot
LS0gZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZvcm1h
dHRlclZpc2l0b3IuamF2YQorKysgZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9m
b3JtYXR0ZXIvQ29kZUZvcm1hdHRlclZpc2l0b3IuamF2YQpAQCAtMSwxNCArMSwxOSBAQAogLyoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMiwgMjAxMiBJQk0gQ29y
cG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMiwgMjAxMyBJQk0gQ29y
cG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3Jh
bSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1
bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hp
Y2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAq
IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKiAKKyAqIFRoaXMg
aXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBkZXZl
bG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBpcyBt
YWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcworICogb25s
eS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBvZiB0
aGUgSkNQLgorICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0g
aW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAgQnJvY2sgSmFuaWN6YWsgLSBD
b250cmlidXRpb24gZm9yIGJ1ZyAxNTA3NDEKICAqICAgICBOYW5kYSBGaXJkYXVzaSAtIENvbnRy
aWJ1dGlvbiBmb3IgYnVnIDI5ODg0NAorICogICAgIEplc3BlciBTIE1vbGxlciAtIENvbnRyaWJ1
dGlvbiBmb3IgYnVnIDQwMDgzMAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7CiAKQEAgLTI2LDYgKzMxLDcgQEAKIGlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFic3RyYWN0TWV0aG9k
RGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFz
dC5BYnN0cmFjdFZhcmlhYmxlRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0Lmlu
dGVybmFsLmNvbXBpbGVyLmFzdC5BbGxvY2F0aW9uRXhwcmVzc2lvbjsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb247CiBpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uTWV0aG9kRGVjbGFyYXRp
b247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bcmd1bWVu
dDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFycmF5QWxs
b2NhdGlvbkV4cHJlc3Npb247CkBAIC00OSw2ICs1NSw3IEBACiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Db25kaXRpb25hbEV4cHJlc3Npb247CiBpbXBvcnQg
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Db25zdHJ1Y3RvckRlY2xhcmF0
aW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQ29udGlu
dWVTdGF0ZW1lbnQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFz
dC5MYW1iZGFFeHByZXNzaW9uOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5hc3QuVW5pb25UeXBlUmVmZXJlbmNlOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb21waWxlci5hc3QuRG9TdGF0ZW1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0Lmlu
dGVybmFsLmNvbXBpbGVyLmFzdC5Eb3VibGVMaXRlcmFsOwpAQCAtNjI3LDE2ICs2MzQsNyBAQAog
CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlk
ZW50aWZpZXIsIHRydWUpOwogCi0JCS8qCi0JCSAqIENoZWNrIGZvciBleHRyYSBkaW1lbnNpb25z
Ci0JCSAqLwotCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAo
ZXh0cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGlt
ZW5zaW9uczsgaSsrKSB7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFs
VG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9r
ZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJIH0KLQkJfQorCQlmb3Jt
YXRFeHRyYURpbWVuc2lvbnMoZmllbGREZWNsYXJhdGlvbi50eXBlKTsKIAogCQkvKgogCQkgKiBG
aWVsZCBpbml0aWFsaXphdGlvbgpAQCAtNjc2LDYgKzY3NCw0MSBAQAogCQl9IGVsc2UgewogCQkJ
dGhpcy5zY3JpYmUuc3BhY2UoKTsKIAkJCXRoaXMuc2NyaWJlLnByaW50Q29tbWVudChDb2RlRm9y
bWF0dGVyLktfVU5LTk9XTiwgU2NyaWJlLkJBU0lDX1RSQUlMSU5HX0NPTU1FTlQpOworCQl9CisJ
fQorCisJcHJpdmF0ZSB2b2lkIGZvcm1hdEV4dHJhRGltZW5zaW9ucyhUeXBlUmVmZXJlbmNlIHR5
cGVSZWZlcmVuY2UpIHsKKwkJLyoKKwkJICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKKwkJ
ICovCisJCWludCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7CisJCWludCBhbmNo
b3IgPSB0eXBlUmVmZXJlbmNlICE9IG51bGwgPyAodHlwZVJlZmVyZW5jZS5kaW1lbnNpb25zKCkg
LSBleHRyYURpbWVuc2lvbnMpIDogMDsKKwkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSBmb3Jt
YXREaW1lbnNpb25zKHR5cGVSZWZlcmVuY2UsIGFuY2hvciwgZXh0cmFEaW1lbnNpb25zLCB0cnVl
KTsKKwl9CisKKwlwcml2YXRlIHZvaWQgZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMoVHlwZVJlZmVy
ZW5jZSB0eXBlUmVmZXJlbmNlLCBib29sZWFuIHNwYWNlQmVmb3JlQW5ub3RhdGlvbikgeworCQlp
bnQgbGVhZGluZ0RpbWVuc2lvbnMgPSBNYXRoLm1pbihnZXREaW1lbnNpb25zKCksIHR5cGVSZWZl
cmVuY2UgIT0gbnVsbCA/IHR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpIDogMCk7CisJCWlmIChs
ZWFkaW5nRGltZW5zaW9ucyAhPSAwKSBmb3JtYXREaW1lbnNpb25zKHR5cGVSZWZlcmVuY2UsIDAs
IGxlYWRpbmdEaW1lbnNpb25zLCBzcGFjZUJlZm9yZUFubm90YXRpb24pOworCX0KKworCXByaXZh
dGUgdm9pZCBmb3JtYXREaW1lbnNpb25zKFR5cGVSZWZlcmVuY2UgdHlwZVJlZmVyZW5jZSwgaW50
IGFuY2hvciwgaW50IGNvdW50LCBib29sZWFuIHNwYWNlQmVmb3JlQW5ub3RhdGlvbikgeworCQlp
ZiAoY291bnQgIT0gMCkgeworCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2Jl
Zm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKKwkJCQl0aGlz
LnNjcmliZS5zcGFjZSgpOworCQkJfQorCQkJQW5ub3RhdGlvbltdW10gYW5ub3RhdGlvbnNPbkRp
bWVuc2lvbnMgPSB0eXBlUmVmZXJlbmNlICE9IG51bGwgPyB0eXBlUmVmZXJlbmNlLmdldEFubm90
YXRpb25zT25EaW1lbnNpb25zKCkgOiBudWxsOworCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgY291
bnQ7IGkrKykgeworCQkJCWludCBkaW1lbnNpb25JbmRleCA9IGFuY2hvciArIGk7CisJCQkJaWYg
KGFubm90YXRpb25zT25EaW1lbnNpb25zICE9IG51bGwgJiYgYW5ub3RhdGlvbnNPbkRpbWVuc2lv
bnMubGVuZ3RoID4gZGltZW5zaW9uSW5kZXgpIHsKKwkJCQkJYm9vbGVhbiBoYWRBbm5vdGF0aW9u
cyA9IGZvcm1hdElubGluZUFubm90YXRpb25zKGFubm90YXRpb25zT25EaW1lbnNpb25zW2RpbWVu
c2lvbkluZGV4XSwgc3BhY2VCZWZvcmVBbm5vdGF0aW9uICYmIGkgPT0gMCk7CisJCQkJCWlmICho
YWRBbm5vdGF0aW9ucyAmJiB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3Bl
bmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB0aGlzLnNjcmliZS5zcGFjZSgp
OworCQkJCX0KKwkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lTEJSQUNLRVQpOworCQkJIAlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3Bh
Y2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJIAkJdGhp
cy5zY3JpYmUuc3BhY2UoKTsKKwkJCSAJfQorCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tl
bihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7CisJCQkgfQogCQl9CiAJfQogCkBA
IC03NTYsMTYgKzc4OSw3IEBACiAJCQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJt
aW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyLCBmYWxzZSk7CiAJCQkJCX0KIAotCQkJCQkv
KgotCQkJCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwotCQkJCQkgKi8KLQkJCQkJaW50
IGV4dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCQkJaWYgKGV4dHJhRGltZW5z
aW9ucyAhPSAwKSB7Ci0JCQkJCQkgZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IGV4dHJhRGlt
ZW5zaW9uczsgaW5kZXgrKykgewotCQkJCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihU
ZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJCQkgCXRoaXMuc2NyaWJlLnBy
aW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCQkJCSB9
Ci0JCQkJCX0KKwkJCQkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKGZpZWxkRGVjbGFyYXRpb24udHlw
ZSk7CiAKIAkJCQkJLyoKIAkJCQkJICogRmllbGQgaW5pdGlhbGl6YXRpb24KQEAgLTE2NzAsMTYg
KzE2OTQsNyBAQAogCQkgCSovCiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5h
bFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyLCBmYWxzZSk7CiAJCX0KLQkJLyoKLQkJICogQ2hl
Y2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKLQkJICovCi0JCWludCBleHRyYURpbWVuc2lvbnMgPSBn
ZXREaW1lbnNpb25zKCk7Ci0JCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewotCQkJIGZvciAo
aW50IGluZGV4ID0gMDsgaW5kZXggPCBleHRyYURpbWVuc2lvbnM7IGluZGV4KyspIHsKLQkJCSAJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNL
RVQpOwotCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tl
bk5hbWVSQlJBQ0tFVCk7Ci0JCQkgfQotCQl9CisJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhsb2Nh
bERlY2xhcmF0aW9uLnR5cGUpOwogCiAJCWZpbmFsIEV4cHJlc3Npb24gaW5pdGlhbGl6YXRpb24g
PSBsb2NhbERlY2xhcmF0aW9uLmluaXRpYWxpemF0aW9uOwogCQlpZiAoaW5pdGlhbGl6YXRpb24g
IT0gbnVsbCkgewpAQCAtMTg5OCwxMCArMTkxMywzMCBAQAogCQkJYm9vbGVhbiBzcGFjZUJlZm9y
ZUNvbW1hLAogCQkJYm9vbGVhbiBzcGFjZUFmdGVyQ29tbWEsCiAJCQlpbnQgbWV0aG9kRGVjbGFy
YXRpb25QYXJhbWV0ZXJzQWxpZ25tZW50KSB7CisJCWZvcm1hdE1ldGhvZEFyZ3VtZW50cygKKwkJ
CQltZXRob2REZWNsYXJhdGlvbi5hcmd1bWVudHMsCisJCQkJbWV0aG9kRGVjbGFyYXRpb24uc2Nv
cGUsCisJCQkJc3BhY2VCZWZvcmVPcGVuUGFyZW4sCisJCQkJc3BhY2VCZXR3ZWVuRW1wdHlQYXJh
bWV0ZXJzLAorCQkJCXNwYWNlQmVmb3JlQ2xvc2luZ1BhcmVuLAorCQkJCXNwYWNlQmVmb3JlRmly
c3RQYXJhbWV0ZXIsCisJCQkJc3BhY2VCZWZvcmVDb21tYSwKKwkJCQlzcGFjZUFmdGVyQ29tbWEs
CisJCQkJbWV0aG9kRGVjbGFyYXRpb25QYXJhbWV0ZXJzQWxpZ25tZW50KTsKKwl9CisJcHJpdmF0
ZSB2b2lkIGZvcm1hdE1ldGhvZEFyZ3VtZW50cygKKwkJCWZpbmFsIEFyZ3VtZW50W10gYXJndW1l
bnRzLAorCQkJTWV0aG9kU2NvcGUgc2NvcGUsCisJCQlib29sZWFuIHNwYWNlQmVmb3JlT3BlblBh
cmVuLAorCQkJYm9vbGVhbiBzcGFjZUJldHdlZW5FbXB0eVBhcmFtZXRlcnMsCisJCQlib29sZWFu
IHNwYWNlQmVmb3JlQ2xvc2luZ1BhcmVuLAorCQkJYm9vbGVhbiBzcGFjZUJlZm9yZUZpcnN0UGFy
YW1ldGVyLAorCQkJYm9vbGVhbiBzcGFjZUJlZm9yZUNvbW1hLAorCQkJYm9vbGVhbiBzcGFjZUFm
dGVyQ29tbWEsCisJCQlpbnQgbWV0aG9kRGVjbGFyYXRpb25QYXJhbWV0ZXJzQWxpZ25tZW50KSB7
CiAKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
TFBBUkVOLCBzcGFjZUJlZm9yZU9wZW5QYXJlbik7CiAKLQkJZmluYWwgQXJndW1lbnRbXSBhcmd1
bWVudHMgPSBtZXRob2REZWNsYXJhdGlvbi5hcmd1bWVudHM7CiAJCWlmIChhcmd1bWVudHMgIT0g
bnVsbCkgewogCQkJaWYgKHNwYWNlQmVmb3JlRmlyc3RQYXJhbWV0ZXIpIHsKIAkJCQl0aGlzLnNj
cmliZS5zcGFjZSgpOwpAQCAtMTk0MSw3ICsxOTc2LDcgQEAKIAkJCQkJCX0gZWxzZSBpZiAoc3Bh
Y2VBZnRlckNvbW1hKSB7CiAJCQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKIAkJCQkJCX0KLQkJ
CQkJCWFyZ3VtZW50c1tpXS50cmF2ZXJzZSh0aGlzLCBtZXRob2REZWNsYXJhdGlvbi5zY29wZSk7
CisJCQkJCQlhcmd1bWVudHNbaV0udHJhdmVyc2UodGhpcywgc2NvcGUpOwogCQkJCQkJYXJndW1l
bnRzQWxpZ25tZW50LnN0YXJ0aW5nQ29sdW1uID0gLTE7CiAJCQkJCX0KIAkJCQkJb2sgPSB0cnVl
OwpAQCAtMjMxMyw2ICsyMzQ4LDggQEAKIAkJdGhpcy5sb2NhbFNjYW5uZXIucmVzZXRUbyh0aGlz
LnNjcmliZS5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbiwgdGhpcy5zY3JpYmUuc2Nhbm5lckVuZFBv
c2l0aW9uIC0gMSk7CiAJCWludCBkaW1lbnNpb25zID0gMDsKIAkJaW50IGJhbGFuY2UgPSAwOwor
CQlib29sZWFuIGluQW5ub3RhdGlvbiA9IGZhbHNlOworCQlpbnQgcGFyZW5CYWxhbmNlID0gMDsg
Ly8gZm9yIGlubGluZSBhbm5vdGF0aW9ucwogCQl0cnkgewogCQkJaW50IHRva2VuOwogCQkJbG9v
cDogd2hpbGUgKCh0b2tlbiA9IHRoaXMubG9jYWxTY2FubmVyLmdldE5leHRUb2tlbigpKSAhPSBU
ZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVFT0YpIHsKQEAgLTIzMjAsNiArMjM1NywyMCBAQAogCQkJ
CQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUOgogCQkJCQkJZGltZW5zaW9u
cysrOwogCQkJCQkJYmFsYW5jZS0tOworCQkJCQkJYnJlYWs7CisJCQkJCWNhc2UgVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTFBBUkVOOgorCQkJCQkJcGFyZW5CYWxhbmNlKys7CisJCQkJCQlicmVh
azsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSUEFSRU46CisJCQkJCQlpZiAo
ISBpbkFubm90YXRpb24pIGJyZWFrIGxvb3A7CisJCQkJCQlpZiAoLS1wYXJlbkJhbGFuY2UgPT0g
MCkgaW5Bbm5vdGF0aW9uID0gZmFsc2U7CisJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5h
bFRva2Vucy5Ub2tlbk5hbWVBVCA6CisJCQkJCQlpbkFubm90YXRpb24gPSB0cnVlOworCQkJCQkJ
YnJlYWs7CisJCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciA6CisJ
CQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRVFVQUwgOgorCQkJCQkJaWYgKHBhcmVu
QmFsYW5jZSA9PSAwICYmICEgaW5Bbm5vdGF0aW9uKSBicmVhayBsb29wOwogCQkJCQkJYnJlYWs7
CiAJCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9DSyA6CiAJCQkJ
CWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoKQEAgLTIzMjks
NyArMjM4MCw3IEBACiAJCQkJCQliYWxhbmNlKys7CiAJCQkJCQlicmVhazsKIAkJCQkJZGVmYXVs
dDoKLQkJCQkJCWJyZWFrIGxvb3A7CisJCQkJCQlpZiAocGFyZW5CYWxhbmNlID09IDApIGJyZWFr
IGxvb3A7CiAJCQkJfQogCQkJfQogCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7
CkBAIC0yMzczLDYgKzI0MjQsMjggQEAKIAkJCQl9CiAJCQl9CiAJCQlyZXR1cm4gIHRva2VuID09
IHRva2VuTmFtZTsKKwkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgeworCQkJLy8g
aWdub3JlCisJCX0KKwkJcmV0dXJuIGZhbHNlOworCX0KKworCXByaXZhdGUgYm9vbGVhbiBpc05l
eHRUb2tlblB1bmN0dWF0aW9uKCkgeworCQl0aGlzLmxvY2FsU2Nhbm5lci5yZXNldFRvKHRoaXMu
c2NyaWJlLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uLCB0aGlzLnNjcmliZS5zY2FubmVyRW5kUG9z
aXRpb24gLSAxKTsKKwkJdHJ5IHsKKwkJCWludCB0b2tlbiA9IHRoaXMubG9jYWxTY2FubmVyLmdl
dE5leHRUb2tlbigpOworCQkJbG9vcDogd2hpbGUodHJ1ZSkgeworCQkJCXN3aXRjaCh0b2tlbikg
eworCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfQkxPQ0sgOgorCQkJ
CQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfSkFWQURPQyA6CisJCQkJCWNh
c2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9MSU5FIDoKKwkJCQkJCXRva2VuID0g
dGhpcy5sb2NhbFNjYW5uZXIuZ2V0TmV4dFRva2VuKCk7CisJCQkJCQljb250aW51ZSBsb29wOwor
CQkJCQlkZWZhdWx0OgorCQkJCQkJYnJlYWsgbG9vcDsKKwkJCQl9CisJCQl9CisJCQlyZXR1cm4g
ISAoU2Nhbm5lci5pc0xpdGVyYWwodG9rZW4pIHx8IFNjYW5uZXIuaXNLZXl3b3JkKHRva2VuKSB8
fCBTY2FubmVyLmlzSWRlbnRpZmllcih0b2tlbikpOwogCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4
Y2VwdGlvbiBlKSB7CiAJCQkvLyBpZ25vcmUKIAkJfQpAQCAtMjU5Nyw4ICsyNjcwLDE1IEBACiAJ
CSAqLwogCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gYW5ub3RhdGlvblR5cGVNZW1iZXJEZWNsYXJh
dGlvbi5leHRlbmRlZERpbWVuc2lvbnM7CiAJCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewor
CQkJCisJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdf
YnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJCXRoaXMuc2NyaWJlLnNwYWNl
KCk7CisJCQl9CiAJCQkgZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lvbnM7IGkrKykg
ewogCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVMQlJBQ0tFVCk7CisJCQkgCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3
ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkgCQl0aGlzLnNjcmli
ZS5zcGFjZSgpOworCQkJIAl9CiAJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKIAkJCSB9CiAJCX0KQEAgLTI2NTQsMTggKzI3
MzQsNyBAQAogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lSWRlbnRpZmllciwgdHJ1ZSk7CiAJCX0KIAotCi0JCS8qCi0JCSAqIENoZWNrIGZvciBl
eHRyYSBkaW1lbnNpb25zCi0JCSAqLwotCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5z
aW9ucygpOwotCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpID0g
MDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4
dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCSAJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJ
IH0KLQkJfQotCisJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhhcmd1bWVudC50eXBlKTsKIAkJcmV0
dXJuIGZhbHNlOwogCX0KIApAQCAtMjY4Nyw2ICsyNzU2LDkgQEAKIAkJCWZpbmFsIEV4cHJlc3Np
b25bXSBkaW1lbnNpb25zID0gYXJyYXlBbGxvY2F0aW9uRXhwcmVzc2lvbi5kaW1lbnNpb25zOwog
CQkJaW50IGRpbWVuc2lvbnNMZW5ndGggPSBkaW1lbnNpb25zLmxlbmd0aDsKIAkJCWZvciAoaW50
IGkgPSAwOyBpIDwgZGltZW5zaW9uc0xlbmd0aDsgaSsrKSB7CisJCQkJaWYgKGFycmF5QWxsb2Nh
dGlvbkV4cHJlc3Npb24uYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMgIT0gbnVsbCkgeworCQkJCQlm
b3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhcnJheUFsbG9jYXRpb25FeHByZXNzaW9uLmFubm90YXRp
b25zT25EaW1lbnNpb25zW2ldLCBpID09IDApOworCQkJCX0KIAkJCQlpZiAodGhpcy5wcmVmZXJl
bmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV9hbGxvY2F0
aW9uX2V4cHJlc3Npb24pIHsKIAkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKIAkJCQl9CkBAIC0y
ODY5LDMxICsyOTQxLDI5IEBACiAJCXJldHVybiBmYWxzZTsKIAl9CiAKKwlwcml2YXRlIHZvaWQg
Zm9ybWF0QXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKEFycmF5UXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHsKKwkJZmluYWwgaW50IG51bWJlck9m
UGFyZW5zID0gKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJl
bnRoZXNpemVkTUFTSykgPj4gQVNUTm9kZS5QYXJlbnRoZXNpemVkU0hJRlQ7CisJCWlmIChudW1i
ZXJPZlBhcmVucyA+IDApIHsKKwkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lv
bihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKKwkJfQorCQlm
b3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7
CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwg
dHJ1ZSk7CisJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKKwkJCW1hbmFnZUNsb3NpbmdQYXJl
bnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9m
UGFyZW5zKTsKKwkJfQorCX0KKwogCS8qKgogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvbXBpbGVyLkFTVFZpc2l0b3IjdmlzaXQob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLmFzdC5BcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5sb29rdXAuQmxvY2tTY29wZSkKIAkgKi8KIAlwdWJsaWMgYm9vbGVh
biB2aXNpdCgKLQkJQXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIGFycmF5UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSwKLQkJQmxvY2tTY29wZSBzY29wZSkgeworCQkJQXJyYXlRdWFsaWZpZWRUeXBl
UmVmZXJlbmNlIGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwKKwkJCUJsb2NrU2NvcGUgc2Nv
cGUpIHsKIAotCQkJZmluYWwgaW50IG51bWJlck9mUGFyZW5zID0gKGFycmF5UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJlbnRoZXNpemVkTUFTSykgPj4gQVNUTm9kZS5Q
YXJlbnRoZXNpemVkU0hJRlQ7Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7Ci0JCQkJbWFu
YWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQotCQkJdGhpcy5zY3JpYmUucHJpbnRBcnJheVF1
YWxpZmllZFJlZmVyZW5jZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zLmxlbmd0
aCwgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCk7Ci0JCQlpbnQgZGltZW5z
aW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCWlmIChkaW1lbnNpb25zICE9IDApIHsKLQkJCQlm
b3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJCXRo
aXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VU
KTsKLQkJCQl9Ci0JCQl9Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7Ci0JCQkJbWFuYWdl
Q2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQorCQkJZm9ybWF0QXJyYXlRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7CiAJCQlyZXR1cm4gZmFsc2U7CiAJ
fQotCisJCiAJLyoqCiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIu
QVNUVmlzaXRvciN2aXNpdChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmxvb2t1cC5DbGFzc1Njb3BlKQogCSAqLwpAQCAtMjkwMSwyNCArMjk3MSw5IEBACiAJCUFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsCiAJ
CUNsYXNzU2NvcGUgc2NvcGUpIHsKIAotCQkJZmluYWwgaW50IG51bWJlck9mUGFyZW5zID0gKGFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJlbnRoZXNpemVkTUFT
SykgPj4gQVNUTm9kZS5QYXJlbnRoZXNpemVkU0hJRlQ7Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMg
PiAwKSB7Ci0JCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQotCQkJdGhpcy5zY3Jp
YmUucHJpbnRBcnJheVF1YWxpZmllZFJlZmVyZW5jZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UudG9rZW5zLmxlbmd0aCwgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCk7
Ci0JCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCWlmIChkaW1lbnNpb25z
ICE9IDApIHsKLQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJ
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJB
Q0tFVCk7Ci0JCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZVJCUkFDS0VUKTsKLQkJCQl9Ci0JCQl9Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAw
KSB7Ci0JCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlm
aWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQorCQkJZm9ybWF0QXJyYXlR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7CiAJCQly
ZXR1cm4gZmFsc2U7CiAJfQotCiAKIAkvKioKIAkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb21waWxlci5BU1RWaXNpdG9yI3Zpc2l0KG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5hc3QuQXJyYXlSZWZlcmVuY2UsIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5sb29rdXAuQmxvY2tTY29wZSkKQEAgLTI5NTQsMjAgKzMwMDksMTggQEAKIAkJaWYgKG51
bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNz
aW9uKGFycmF5VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChhcnJh
eVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlv
bnMoYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFNJTkdMRVRZUEVSRUZFUkVOQ0VfRVhQRUNURURUT0tFTlMpOwog
CiAJCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwogCQlpZiAoZGltZW5zaW9ucyAh
PSAwKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNw
YWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewot
CQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxC
UkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9i
cmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFj
ZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQl9CisJCQlmb3JtYXREaW1lbnNpb25zKGFycmF5VHlw
ZVJlZmVyZW5jZSwgMCwgZGltZW5zaW9ucywgdHJ1ZSk7CisJCX0KKwkJLy8gZGltZW5zaW9ucyB0
aGUgbnVtYmVyIG9mIHZpc2libGUgYnJhY2tldC1wYWlycy4gRWxsaXBzaXMgaXMgYW4gZXh0cmEg
ZGltZW5zaW9uCisJCWlmICgoYXJyYXlUeXBlUmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLklzVmFy
QXJncykgIT0gMAorCQkJCSYmIGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09uRGltZW5z
aW9ucyAhPSBudWxsCisJCQkJJiYgYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zT25EaW1l
bnNpb25zLmxlbmd0aCA+IGRpbWVuc2lvbnMpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9u
cyhhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnNbZGltZW5zaW9uc10s
IHRydWUpOwogCQl9CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3Np
bmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFy
ZW5zKTsKQEAgLTI5ODYsMTkgKzMwMzksMTcgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkg
ewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5VHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChhcnJheVR5cGVSZWZlcmVuY2UuYW5u
b3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYXJyYXlUeXBlUmVmZXJl
bmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFNJTkdMRVRZUEVSRUZFUkVOQ0VfRVhQRUNURURUT0tFTlMpOwogCQlpbnQgZGltZW5zaW9ucyA9
IGdldERpbWVuc2lvbnMoKTsKIAkJaWYgKGRpbWVuc2lvbnMgIT0gMCkgewotCQkJaWYgKHRoaXMu
cHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlf
dHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJZm9y
IChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5wcmlu
dE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYgKHRo
aXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlfdHlw
ZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJdGhp
cy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQp
OwotCQkJfQorCQkJZm9ybWF0RGltZW5zaW9ucyhhcnJheVR5cGVSZWZlcmVuY2UsIDAsIGRpbWVu
c2lvbnMsIHRydWUpOworCQl9CisJCS8vIGRpbWVuc2lvbnMgdGhlIG51bWJlciBvZiB2aXNpYmxl
IGJyYWNrZXQtcGFpcnMuIEVsbGlwc2lzIGlzIGFuIGV4dHJhIGRpbWVuc2lvbgorCQlpZiAoKGFy
cmF5VHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5Jc1ZhckFyZ3MpICE9IDAKKwkJCQkmJiBh
cnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMgIT0gbnVsbAorCQkJCSYm
IGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09uRGltZW5zaW9ucy5sZW5ndGggPiBkaW1l
bnNpb25zKSB7CisJCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYXJyYXlUeXBlUmVmZXJlbmNl
LmFubm90YXRpb25zT25EaW1lbnNpb25zW2RpbWVuc2lvbnNdLCB0cnVlKTsKIAkJfQogCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJl
c3Npb24oYXJyYXlUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CkBAIC00MjQwLDYgKzQy
OTEsNDYgQEAKIAl9CiAKIAkvKioKKwkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5BU1RWaXNpdG9yI3Zpc2l0KG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5hc3QuTGFtYmRhRXhwcmVzc2lvbiwgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
Lmxvb2t1cC5CbG9ja1Njb3BlKQorCSAqLworCXB1YmxpYyBib29sZWFuIHZpc2l0KExhbWJkYUV4
cHJlc3Npb24gbGFtYmRhRXhwcmVzc2lvbiwgQmxvY2tTY29wZSBzY29wZSkgeworCQkKKwkJZmlu
YWwgaW50IG51bWJlck9mUGFyZW5zID0gKGxhbWJkYUV4cHJlc3Npb24uYml0cyAmIEFTVE5vZGUu
UGFyZW50aGVzaXplZE1BU0spID4+IEFTVE5vZGUuUGFyZW50aGVzaXplZFNISUZUOworCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7CisJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJl
c3Npb24obGFtYmRhRXhwcmVzc2lvbiwgbnVtYmVyT2ZQYXJlbnMpOworCQl9CisJCWlmIChpc05l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMUEFSRU4pKSB7CisJCQkvLyBGb3JtYXQg
YXJndW1lbnRzCisJCQlmb3JtYXRNZXRob2RBcmd1bWVudHMoCisJCQkJbGFtYmRhRXhwcmVzc2lv
bi5hcmd1bWVudHMsCisJCQkJbGFtYmRhRXhwcmVzc2lvbi5nZXRTY29wZSgpLAorCQkJCXRoaXMu
cHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX3BhcmVuX2luX21ldGhvZF9k
ZWNsYXJhdGlvbiwKKwkJCQl0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVuX2Vt
cHR5X3BhcmVuc19pbl9tZXRob2RfZGVjbGFyYXRpb24sCisJCQkJdGhpcy5wcmVmZXJlbmNlcy5p
bnNlcnRfc3BhY2VfYmVmb3JlX2Nsb3NpbmdfcGFyZW5faW5fbWV0aG9kX2RlY2xhcmF0aW9uLAor
CQkJCXRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2FmdGVyX29wZW5pbmdfcGFyZW5faW5f
bWV0aG9kX2RlY2xhcmF0aW9uLAorCQkJCXRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2Jl
Zm9yZV9jb21tYV9pbl9tZXRob2RfZGVjbGFyYXRpb25fcGFyYW1ldGVycywKKwkJCQl0aGlzLnBy
ZWZlcmVuY2VzLmluc2VydF9zcGFjZV9hZnRlcl9jb21tYV9pbl9tZXRob2RfZGVjbGFyYXRpb25f
cGFyYW1ldGVycywKKwkJCQl0aGlzLnByZWZlcmVuY2VzLmFsaWdubWVudF9mb3JfcGFyYW1ldGVy
c19pbl9tZXRob2RfZGVjbGFyYXRpb24pOworCQl9IGVsc2UgeworCQkJLy8gVGhpcyBNVVNUIGJl
IGEgc2luZ2xlLCB1bnR5cGVkIHBhcmFtZXRlcgorCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9r
ZW4oU0lOR0xFVFlQRVJFRkVSRU5DRV9FWFBFQ1RFRFRPS0VOUyk7CisJCX0KKwkJaWYgKHRoaXMu
cHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9sYW1iZGFfYXJyb3cpIHRoaXMuc2NyaWJl
LnNwYWNlKCk7CisJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZUFSUk9XKTsKKwkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2FmdGVy
X2xhbWJkYV9hcnJvdykgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJaWYgKGxhbWJkYUV4cHJlc3Np
b24uYm9keSBpbnN0YW5jZW9mIEJsb2NrKSB7CisJCQlmb3JtYXRCbG9jaygoQmxvY2spIGxhbWJk
YUV4cHJlc3Npb24uYm9keSwgc2NvcGUsIHRoaXMucHJlZmVyZW5jZXMuYnJhY2VfcG9zaXRpb25f
Zm9yX2xhbWJkYV9ib2R5LCB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3Bl
bmluZ19icmFjZV9pbl9ibG9jayk7CisJCX0gZWxzZSB7CisJCQlsYW1iZGFFeHByZXNzaW9uLmJv
ZHkudHJhdmVyc2UodGhpcywgc2NvcGUpOworCQl9CisKKwkJaWYgKG51bWJlck9mUGFyZW5zID4g
MCkgeworCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGxhbWJkYUV4cHJl
c3Npb24sIG51bWJlck9mUGFyZW5zKTsKKwkJfQorCQlyZXR1cm4gZmFsc2U7CisJfQorCQorCS8q
KgogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLkFTVFZpc2l0b3Ij
dmlzaXQob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Mb2NhbERlY2xhcmF0
aW9uLCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJsb2NrU2NvcGUp
CiAJICovCiAJcHVibGljIGJvb2xlYW4gdmlzaXQoTG9jYWxEZWNsYXJhdGlvbiBsb2NhbERlY2xh
cmF0aW9uLCBCbG9ja1Njb3BlIHNjb3BlKSB7CkBAIC00NDUzLDE2ICs0NTQ0LDcgQEAKIAkJCQkJ
dGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfY29tbWFfaW5fbWV0aG9kX2RlY2xh
cmF0aW9uX3BhcmFtZXRlcnMsCiAJCQkJCXRoaXMucHJlZmVyZW5jZXMuYWxpZ25tZW50X2Zvcl9w
YXJhbWV0ZXJzX2luX21ldGhvZF9kZWNsYXJhdGlvbik7CiAKLQkJCQkvKgotCQkJCSAqIENoZWNr
IGZvciBleHRyYSBkaW1lbnNpb25zCi0JCQkJICovCi0JCQkJaW50IGV4dHJhRGltZW5zaW9ucyA9
IGdldERpbWVuc2lvbnMoKTsKLQkJCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCQkJ
IGZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKyspIHsKLQkJCQkJIAl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7
Ci0JCQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lUkJSQUNLRVQpOwotCQkJCQkgfQotCQkJCX0KKwkJCQlmb3JtYXRFeHRyYURpbWVuc2lvbnMo
bWV0aG9kRGVjbGFyYXRpb24ucmV0dXJuVHlwZSk7CiAKIAkJCQkvLyBGb3JtYXQgdGhyb3dzCiAJ
CQkJZm9ybWF0VGhyb3dzQ2xhdXNlKApAQCAtNDU5OCw2ICs0NjgwLDcgQEAKIAkJaWYgKG51bWJl
ck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9u
KHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJ
CX0KKwkJaWYgKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25z
ICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCVR5cGVSZWZlcmVuY2VbXVtd
IHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50eXBl
QXJndW1lbnRzOwogCQlpbnQgbGVuZ3RoID0gdHlwZUFyZ3VtZW50cy5sZW5ndGg7CiAJCWZvciAo
aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKQEAgLTQ2MjgsMjEgKzQ3MTEsMTIgQEAKIAkJ
CX0KIAkJCWlmIChpIDwgbGVuZ3RoIC0gMSkgewogCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZURPVCk7Ci0JCQl9Ci0JCX0KLQkJaW50IGRpbWVu
c2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChkaW1lbnNpb25zICE9IDAgJiYgZGltZW5z
aW9ucyA8PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5kaW1lbnNpb25zKCkp
IHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19i
cmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJdGhpcy5zY3JpYmUuc3BhY2Uo
KTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNL
RVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVuX2JyYWNr
ZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7
CisJCQkJaWYgKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25z
ICE9IG51bGwgJiYgcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlv
bnMubGVuZ3RoID4gaSsxKSB7CisJCQkJCWZvcm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRl
cml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2krMV0sIGZhbHNlKTsKIAkJ
CQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lUkJSQUNLRVQpOwogCQkJfQogCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKHBhcmFt
ZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVlKTsKIAkJaWYgKG51bWJlck9mUGFy
ZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFt
ZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KQEAg
LTQ2NTUsNiArNDcyOSw3IEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFn
ZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChwYXJhbWV0ZXJpemVkUXVh
bGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5v
dGF0aW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1sw
XSwgZmFsc2UpOwogCQlUeXBlUmVmZXJlbmNlW11bXSB0eXBlQXJndW1lbnRzID0gcGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50czsKIAkJaW50IGxlbmd0aCA9
IHR5cGVBcmd1bWVudHMubGVuZ3RoOwogCQlmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsr
KSB7CkBAIC00Njg2LDIwICs0NzYxLDExIEBACiAJCQlpZiAoaSA8IGxlbmd0aCAtIDEpIHsKIAkJ
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVET1Qp
OwogCQkJfQotCQl9Ci0JCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAo
ZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNl
cnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkg
ewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8
IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5p
bnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewot
CQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmliZS5wcmludE5l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7CisJCQlpZiAocGFyYW1l
dGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiBwYXJh
bWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucy5sZW5ndGggPiBpKzEp
IHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpKzFdLCBmYWxzZSk7CiAJCQl9CiAJCX0KKwkJZm9ybWF0
TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIHRy
dWUpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50
aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51
bWJlck9mUGFyZW5zKTsKIAkJfQpAQCAtNDcxMiw2ICs0Nzc4LDcgQEAKIAkJaWYgKG51bWJlck9m
UGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBh
cmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJ
aWYgKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwp
IGZvcm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNl
LmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRl
cm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCiAJCVR5cGVSZWZlcmVuY2VbXSB0
eXBlQXJndW1lbnRzID0gcGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UudHlwZUFyZ3Vt
ZW50czsKQEAgLTQ3MzcsMTkgKzQ4MDQsNyBAQAogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9r
ZW4oQ0xPU0lOR19HRU5FUklDU19FWFBFQ1RFRFRPS0VOUyk7CiAJCX0KIAotCQlpbnQgZGltZW5z
aW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNp
b25zIDw9IHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSkgewot
CQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNr
ZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwot
CQkJfQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7
Ci0JCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNf
aW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJ
CQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lUkJSQUNLRVQpOwotCQkJfQotCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKHBhcmFt
ZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBmYWxzZSk7CiAJCWlmIChudW1iZXJPZlBhcmVu
cyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0
ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CkBAIC00NzYy
LDYgKzQ4MTcsNyBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVu
aW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVu
Y2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMocGFy
YW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRp
Zmllcik7CiAKIAkJVHlwZVJlZmVyZW5jZVtdIHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVk
U2luZ2xlVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOwpAQCAtNDc4NywxOSArNDg0Myw3IEBA
CiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihDTE9TSU5HX0dFTkVSSUNTX0VYUEVDVEVE
VE9LRU5TKTsKIAkJfQogCi0JCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlp
ZiAoZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0gcGFyYW1ldGVyaXplZFNpbmdsZVR5
cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNl
cnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkg
ewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8
IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5p
bnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewot
CQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmliZS5wcmludE5l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQl9Ci0JCX0KKwkJ
Zm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2Us
IGZhbHNlKTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1Bh
cmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBu
dW1iZXJPZlBhcmVucyk7CiAJCX0KQEAgLTUwMjAsMTIgKzUwNjQsMjUgQEAKIAkJaWYgKG51bWJl
ck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9u
KHF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQotCQl0aGlzLnNj
cmliZS5wcmludFF1YWxpZmllZFJlZmVyZW5jZShxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJj
ZUVuZCwgbnVtYmVyT2ZQYXJlbnM+PTAvKmV4cGVjdCBwYXJlbnRoZXNpcyovKTsKLQorCQlmb3Jt
YXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJl
c3Npb24ocXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CiAJCXJl
dHVybiBmYWxzZTsKKwl9CisKKwlwcml2YXRlIHZvaWQgZm9ybWF0UXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZShRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHsKKwkJ
Zm9yIChpbnQgaSA9IDA7IGkgPCBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnRva2Vucy5sZW5ndGg7
ICsraSkgeworCQkJaWYgKGkgIT0gMCkgdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lRE9ULCBmYWxzZSk7CisJCQlpZiAocXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsCisJCQkJCSYmIHF1YWxpZmllZFR5cGVSZWZlcmVuY2Uu
YW5ub3RhdGlvbnMubGVuZ3RoID4gaQorCQkJCQkmJiBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFu
bm90YXRpb25zW2ldICE9IG51bGwpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhxdWFs
aWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2ldLCBmYWxzZSk7CisJCQkJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciwgdHJ1
ZSk7CisJCQl9IGVsc2UgeworCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFs
VG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIsIGZhbHNlKTsKKwkJCX0KKwkJfQogCX0KIAogCS8q
KgpAQCAtNTAzOSw3ICs1MDk2LDcgQEAKIAkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJ
CQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQkJfQotCQkJdGhpcy5zY3JpYmUucHJpbnRRdWFsaWZp
ZWRSZWZlcmVuY2UocXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5zb3VyY2VFbmQsIG51bWJlck9mUGFy
ZW5zPj0wLypleHBlY3QgcGFyZW50aGVzaXMqLyk7CisJCQlmb3JtYXRRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCiAJCQlpZiAobnVtYmVyT2ZQYXJlbnMg
PiAwKSB7CiAJCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHF1YWxpZmll
ZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKQEAgLTUwNDcsNiArNTEwNCw0MSBAQAog
CQkJcmV0dXJuIGZhbHNlOwogCX0KIAorCS8qKgorCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0Lmlu
dGVybmFsLmNvbXBpbGVyLkFTVFZpc2l0b3IjdmlzaXQob3JnLmVjbGlwc2UuamR0LmludGVybmFs
LmNvbXBpbGVyLmFzdC5SZWZlcmVuY2VFeHByZXNzaW9uLCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIubG9va3VwLkJsb2NrU2NvcGUpCisJICovCisJcHVibGljIGJvb2xlYW4gdmlz
aXQob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5SZWZlcmVuY2VFeHByZXNz
aW9uIHJlZmVyZW5jZUV4cHJlc3Npb24sIEJsb2NrU2NvcGUgYmxvY2tTY29wZSkgeworCQlyZWZl
cmVuY2VFeHByZXNzaW9uLmxocy50cmF2ZXJzZSh0aGlzLCBibG9ja1Njb3BlKTsKKwkJdGhpcy5z
Y3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09MT05fQ09MT04p
OworCQkKKwkJVHlwZVJlZmVyZW5jZVtdIHR5cGVBcmd1bWVudHMgPSByZWZlcmVuY2VFeHByZXNz
aW9uLnR5cGVBcmd1bWVudHM7CisJCWludCB0eXBlQXJndW1lbnRzTGVuZ3RoID0gdHlwZUFyZ3Vt
ZW50cyAhPSBudWxsID8gdHlwZUFyZ3VtZW50cy5sZW5ndGggOiAwOworCQlpZiAodHlwZUFyZ3Vt
ZW50c0xlbmd0aCA+IDApIHsKKwkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFs
VG9rZW5zLlRva2VuTmFtZUxFU1MsIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9y
ZV9vcGVuaW5nX2FuZ2xlX2JyYWNrZXRfaW5fcGFyYW1ldGVyaXplZF90eXBlX3JlZmVyZW5jZSk7
CisJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfb3BlbmluZ19hbmds
ZV9icmFja2V0X2luX3BhcmFtZXRlcml6ZWRfdHlwZV9yZWZlcmVuY2UpIHsKKwkJCQl0aGlzLnNj
cmliZS5zcGFjZSgpOworCQkJfQorCQkJZm9yIChpbnQgaSA9IDA7IGkgPCB0eXBlQXJndW1lbnRz
TGVuZ3RoIC0gMTsgaSsrKSB7CisJCQkJdHlwZUFyZ3VtZW50c1tpXS50cmF2ZXJzZSh0aGlzLCBi
bG9ja1Njb3BlKTsKKwkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVDT01NQSwgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX2Nv
bW1hX2luX3BhcmFtZXRlcml6ZWRfdHlwZV9yZWZlcmVuY2UpOworCQkJCWlmICh0aGlzLnByZWZl
cmVuY2VzLmluc2VydF9zcGFjZV9hZnRlcl9jb21tYV9pbl9wYXJhbWV0ZXJpemVkX3R5cGVfcmVm
ZXJlbmNlKSB7CisJCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCQkJfQorCQkJfQorCQkJdHlw
ZUFyZ3VtZW50c1t0eXBlQXJndW1lbnRzTGVuZ3RoIC0gMV0udHJhdmVyc2UodGhpcywgYmxvY2tT
Y29wZSk7CisJCQlpZiAoaXNDbG9zaW5nR2VuZXJpY1Rva2VuKCkpIHsKKwkJCQl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihDTE9TSU5HX0dFTkVSSUNTX0VYUEVDVEVEVE9LRU5TLCB0aGlzLnBy
ZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfY2xvc2luZ19hbmdsZV9icmFja2V0X2luX3Bh
cmFtZXRlcml6ZWRfdHlwZV9yZWZlcmVuY2UpOworCQkJfQorCQl9CisKKwkJaWYgKHJlZmVyZW5j
ZUV4cHJlc3Npb24uaXNDb25zdHJ1Y3RvclJlZmVyZW5jZSgpKSB7CisJCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVuZXcpOworCQl9IGVsc2Ugewor
CQkJcmVmZXJlbmNlRXhwcmVzc2lvbi5tZXRob2QudHJhdmVyc2UodGhpcywgYmxvY2tTY29wZSk7
CisJCX0KKwkJcmV0dXJuIGZhbHNlOworCX0KKwkKIAkvKioKIAkgKiBAc2VlIG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5BU1RWaXNpdG9yI3Zpc2l0KG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5hc3QuUmV0dXJuU3RhdGVtZW50LCBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIubG9va3VwLkJsb2NrU2NvcGUpCiAJICovCkBAIC01MDgzLDYgKzUxNzUs
NyBAQAogCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVSUEFSRU4sIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9jbG9zaW5nX3Bh
cmVuX2luX2Fubm90YXRpb24pOwogCQlyZXR1cm4gZmFsc2U7CiAJfQorCQogCS8qKgogCSAqIEBz
ZWUgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLkFTVFZpc2l0b3IjdmlzaXQob3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5TaW5nbGVOYW1lUmVmZXJlbmNlLCBv
cmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJsb2NrU2NvcGUpCiAJICov
CkBAIC01MTExLDEyICs1MjA0LDMwIEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJ
CW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihzaW5nbGVUeXBlUmVmZXJlbmNl
LCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKHNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoc2luZ2xlVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihT
SU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVEVE9LRU5TKTsKIAogCQlpZiAobnVtYmVyT2ZQYXJl
bnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oc2luZ2xl
VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CiAJCXJldHVybiBmYWxzZTsKKwl9
CisKKwlwcml2YXRlIGJvb2xlYW4gZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoZmluYWwgQW5ub3Rh
dGlvbltdIGFubm90YXRpb25zLCBib29sZWFuIHNwYWNlQmVmb3JlKSB7CisJCWlmIChhbm5vdGF0
aW9ucyAhPSBudWxsICkgeworCQkJaWYgKHNwYWNlQmVmb3JlKSB0aGlzLnNjcmliZS5zcGFjZSgp
OworCisJCQlmb3IgKGludCBpID0gMDsgaSA8IGFubm90YXRpb25zLmxlbmd0aDsgKytpKSB7CisJ
CQkJaWYgKGkgIT0gMCkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCQlhbm5vdGF0aW9uc1tpXS50
cmF2ZXJzZSh0aGlzLCAoQmxvY2tTY29wZSludWxsKTsKKwkJCX0KKwkJCWlmIChhbm5vdGF0aW9u
cy5sZW5ndGggPiAwICYmICEgdGhpcy5pc05leHRUb2tlblB1bmN0dWF0aW9uKCkpIHsKKwkJCQl0
aGlzLnNjcmliZS5zcGFjZSgpOworCQkJfQorCQkJcmV0dXJuIHRydWU7CisJCX0gZWxzZSB7CisJ
CQlyZXR1cm4gZmFsc2U7CisJCX0KIAl9CiAKIAkvKioKQEAgLTUxMzAsNiArNTI0MSw3IEBACiAJ
CWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVk
RXhwcmVzc2lvbihzaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJ
aWYgKHNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5l
QW5ub3RhdGlvbnMoc2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwog
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVE
VE9LRU5TKTsKIAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CkBAIC01NTg3LDYgKzU2OTks
NyBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFR5cGVQYXJh
bWV0ZXIgdHlwZVBhcmFtZXRlciwgQmxvY2tTY29wZSBzY29wZSkgeworCQlpZiAodHlwZVBhcmFt
ZXRlci5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh0eXBlUGFy
YW1ldGVyLmFubm90YXRpb25zLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCQlpZiAodHlwZVBhcmFtZXRl
ci50eXBlICE9IG51bGwpIHsKIAkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CkBAIC01NjEzLDYgKzU3
MjYsNyBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFR5cGVQ
YXJhbWV0ZXIgdHlwZVBhcmFtZXRlciwgQ2xhc3NTY29wZSBzY29wZSkgeworCQlpZiAodHlwZVBh
cmFtZXRlci5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh0eXBl
UGFyYW1ldGVyLmFubm90YXRpb25zLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCQlpZiAodHlwZVBhcmFt
ZXRlci50eXBlICE9IG51bGwpIHsKIAkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CkBAIC01Nzk5LDYg
KzU5MTMsOSBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFdp
bGRjYXJkIHdpbGRjYXJkLCBCbG9ja1Njb3BlIHNjb3BlKSB7CisJCWlmICh3aWxkY2FyZC5hbm5v
dGF0aW9ucyAhPSBudWxsKSB7CisJCQlpZiAoZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMod2lsZGNh
cmQuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJfQogCQl0
aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVRVUVTVElP
TiwgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX3F1ZXN0aW9uX2luX3dpbGNh
cmQpOwogCQlzd2l0Y2god2lsZGNhcmQua2luZCkgewogCQkJY2FzZSBXaWxkY2FyZC5TVVBFUiA6
CkBAIC01ODE5LDYgKzU5MzYsOSBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29s
ZWFuIHZpc2l0KFdpbGRjYXJkIHdpbGRjYXJkLCBDbGFzc1Njb3BlIHNjb3BlKSB7CisJCWlmICh3
aWxkY2FyZC5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQlpZiAoZm9ybWF0SW5saW5lQW5ub3Rh
dGlvbnMod2lsZGNhcmQuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKSkgdGhpcy5zY3JpYmUuc3BhY2Uo
KTsKKwkJfQogCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tl
bk5hbWVRVUVTVElPTiwgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX3F1ZXN0
aW9uX2luX3dpbGNhcmQpOwogCQlzd2l0Y2god2lsZGNhcmQua2luZCkgewogCQkJY2FzZSBXaWxk
Y2FyZC5TVVBFUiA6CmRpZmYgLS1naXQgZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9mb3JtYXR0ZXIvRGVmYXVsdENvZGVGb3JtYXR0ZXJPcHRpb25zLmphdmEgZm9ybWF0dGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvRGVmYXVsdENvZGVGb3JtYXR0ZXJPcHRp
b25zLmphdmEKaW5kZXggNmMzNTc5Yy4uMTExOTczMyAxMDA2NDQKLS0tIGZvcm1hdHRlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0RlZmF1bHRDb2RlRm9ybWF0dGVyT3B0aW9u
cy5qYXZhCisrKyBmb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9E
ZWZhdWx0Q29kZUZvcm1hdHRlck9wdGlvbnMuamF2YQpAQCAtMSwxNCArMSwxOSBAQAogLyoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9y
YXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9y
YXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBh
bmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRl
ciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2gg
YWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0
dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKgorICogVGhpcyBpcyBh
biBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3Bl
ZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUg
YXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBU
aGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBK
Q1AuCisgKiAKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0
aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqICAgICBCcm9jayBKYW5pY3phayAtIENvbnRy
aWJ1dGlvbiBmb3IgYnVnIDE1MDc0MQogICogICAgIFJheSBWLiAodm9pZHN0YXJAZ21haWwuY29t
KSAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDI4Mjk4OAorICogICAgIEplc3BlciBTIE1vbGxlciAt
IENvbnRyaWJ1dGlvbiBmb3IgYnVnIDQwMDgzMAogICoqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBw
YWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7CiAKQEAgLTgzLDYgKzg4
LDcgQEAKIAlwdWJsaWMgU3RyaW5nIGJyYWNlX3Bvc2l0aW9uX2Zvcl9jb25zdHJ1Y3Rvcl9kZWNs
YXJhdGlvbjsKIAlwdWJsaWMgU3RyaW5nIGJyYWNlX3Bvc2l0aW9uX2Zvcl9lbnVtX2NvbnN0YW50
OwogCXB1YmxpYyBTdHJpbmcgYnJhY2VfcG9zaXRpb25fZm9yX2VudW1fZGVjbGFyYXRpb247CisJ
cHVibGljIFN0cmluZyBicmFjZV9wb3NpdGlvbl9mb3JfbGFtYmRhX2JvZHk7CiAJcHVibGljIFN0
cmluZyBicmFjZV9wb3NpdGlvbl9mb3JfbWV0aG9kX2RlY2xhcmF0aW9uOwogCXB1YmxpYyBTdHJp
bmcgYnJhY2VfcG9zaXRpb25fZm9yX3R5cGVfZGVjbGFyYXRpb247CiAJcHVibGljIFN0cmluZyBi
cmFjZV9wb3NpdGlvbl9mb3Jfc3dpdGNoOwpAQCAtMTk0LDYgKzIwMCw3IEBACiAJcHVibGljIGJv
b2xlYW4gaW5zZXJ0X3NwYWNlX2FmdGVyX2NvbW1hX2luX3R5cGVfYXJndW1lbnRzOwogCXB1Ymxp
YyBib29sZWFuIGluc2VydF9zcGFjZV9hZnRlcl9jb21tYV9pbl90eXBlX3BhcmFtZXRlcnM7CiAJ
cHVibGljIGJvb2xlYW4gaW5zZXJ0X3NwYWNlX2FmdGVyX2VsbGlwc2lzOworCXB1YmxpYyBib29s
ZWFuIGluc2VydF9zcGFjZV9hZnRlcl9sYW1iZGFfYXJyb3c7CiAJcHVibGljIGJvb2xlYW4gaW5z
ZXJ0X3NwYWNlX2FmdGVyX29wZW5pbmdfYW5nbGVfYnJhY2tldF9pbl9wYXJhbWV0ZXJpemVkX3R5
cGVfcmVmZXJlbmNlOwogCXB1YmxpYyBib29sZWFuIGluc2VydF9zcGFjZV9hZnRlcl9vcGVuaW5n
X2FuZ2xlX2JyYWNrZXRfaW5fdHlwZV9hcmd1bWVudHM7CiAJcHVibGljIGJvb2xlYW4gaW5zZXJ0
X3NwYWNlX2FmdGVyX29wZW5pbmdfYW5nbGVfYnJhY2tldF9pbl90eXBlX3BhcmFtZXRlcnM7CkBA
IC0yNzEsNiArMjc4LDcgQEAKIAlwdWJsaWMgYm9vbGVhbiBpbnNlcnRfc3BhY2VfYmVmb3JlX2Nv
bW1hX2luX3R5cGVfYXJndW1lbnRzOwogCXB1YmxpYyBib29sZWFuIGluc2VydF9zcGFjZV9iZWZv
cmVfY29tbWFfaW5fdHlwZV9wYXJhbWV0ZXJzOwogCXB1YmxpYyBib29sZWFuIGluc2VydF9zcGFj
ZV9iZWZvcmVfZWxsaXBzaXM7CisJcHVibGljIGJvb2xlYW4gaW5zZXJ0X3NwYWNlX2JlZm9yZV9s
YW1iZGFfYXJyb3c7CiAJcHVibGljIGJvb2xlYW4gaW5zZXJ0X3NwYWNlX2JlZm9yZV9wYXJlbnRo
ZXNpemVkX2V4cHJlc3Npb25faW5fcmV0dXJuOwogCXB1YmxpYyBib29sZWFuIGluc2VydF9zcGFj
ZV9iZWZvcmVfcGFyZW50aGVzaXplZF9leHByZXNzaW9uX2luX3Rocm93OwogCXB1YmxpYyBib29s
ZWFuIGluc2VydF9zcGFjZV9iZWZvcmVfcXVlc3Rpb25faW5fd2lsY2FyZDsKQEAgLTM5NCw2ICs0
MDIsNyBAQAogCQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5GT1JN
QVRURVJfQlJBQ0VfUE9TSVRJT05fRk9SX0VOVU1fREVDTEFSQVRJT04sIHRoaXMuYnJhY2VfcG9z
aXRpb25fZm9yX2VudW1fZGVjbGFyYXRpb24pOwogCQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZv
cm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfQlJBQ0VfUE9TSVRJT05fRk9SX01FVEhPRF9ERUNM
QVJBVElPTiwgdGhpcy5icmFjZV9wb3NpdGlvbl9mb3JfbWV0aG9kX2RlY2xhcmF0aW9uKTsKIAkJ
b3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRk9STUFUVEVSX0JSQUNF
X1BPU0lUSU9OX0ZPUl9UWVBFX0RFQ0xBUkFUSU9OLCB0aGlzLmJyYWNlX3Bvc2l0aW9uX2Zvcl90
eXBlX2RlY2xhcmF0aW9uKTsKKwkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25z
dGFudHMuRk9STUFUVEVSX0JSQUNFX1BPU0lUSU9OX0ZPUl9MQU1CREFfQk9EWSwgdGhpcy5icmFj
ZV9wb3NpdGlvbl9mb3JfbGFtYmRhX2JvZHkpOwogCQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZv
cm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfQlJBQ0VfUE9TSVRJT05fRk9SX1NXSVRDSCwgdGhp
cy5icmFjZV9wb3NpdGlvbl9mb3Jfc3dpdGNoKTsKIAkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVG
b3JtYXR0ZXJDb25zdGFudHMuRk9STUFUVEVSX0NPTU1FTlRfQ0xFQVJfQkxBTktfTElORVNfSU5f
QkxPQ0tfQ09NTUVOVCwgdGhpcy5jb21tZW50X2NsZWFyX2JsYW5rX2xpbmVzX2luX2Jsb2NrX2Nv
bW1lbnQgPyBEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5UUlVFIDogRGVmYXVsdENvZGVG
b3JtYXR0ZXJDb25zdGFudHMuRkFMU0UpOwogCQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZvcm1h
dHRlckNvbnN0YW50cy5GT1JNQVRURVJfQ09NTUVOVF9DTEVBUl9CTEFOS19MSU5FU19JTl9KQVZB
RE9DX0NPTU1FTlQsIHRoaXMuY29tbWVudF9jbGVhcl9ibGFua19saW5lc19pbl9qYXZhZG9jX2Nv
bW1lbnQgPyBEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5UUlVFIDogRGVmYXVsdENvZGVG
b3JtYXR0ZXJDb25zdGFudHMuRkFMU0UpOwpAQCAtNDkzLDYgKzUwMiw3IEBACiAJCW9wdGlvbnMu
cHV0KERlZmF1bHRDb2RlRm9ybWF0dGVyQ29uc3RhbnRzLkZPUk1BVFRFUl9JTlNFUlRfU1BBQ0Vf
QUZURVJfQ09NTUFfSU5fVFlQRV9QQVJBTUVURVJTLCB0aGlzLmluc2VydF9zcGFjZV9hZnRlcl9j
b21tYV9pbl90eXBlX3BhcmFtZXRlcnMgPyBKYXZhQ29yZS5JTlNFUlQgOiBKYXZhQ29yZS5ET19O
T1RfSU5TRVJUKTsKIAkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMu
Rk9STUFUVEVSX0lOU0VSVF9TUEFDRV9BRlRFUl9PUEVOSU5HX0JSQUNLRVRfSU5fQVJSQVlfQUxM
T0NBVElPTl9FWFBSRVNTSU9OLCB0aGlzLmluc2VydF9zcGFjZV9hZnRlcl9vcGVuaW5nX2JyYWNr
ZXRfaW5fYXJyYXlfYWxsb2NhdGlvbl9leHByZXNzaW9uPyBKYXZhQ29yZS5JTlNFUlQgOiBKYXZh
Q29yZS5ET19OT1RfSU5TRVJUKTsKIAkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJD
b25zdGFudHMuRk9STUFUVEVSX0lOU0VSVF9TUEFDRV9BRlRFUl9FTExJUFNJUywgdGhpcy5pbnNl
cnRfc3BhY2VfYWZ0ZXJfZWxsaXBzaXMgPyBKYXZhQ29yZS5JTlNFUlQgOiBKYXZhQ29yZS5ET19O
T1RfSU5TRVJUKTsKKwkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMu
Rk9STUFUVEVSX0lOU0VSVF9TUEFDRV9BRlRFUl9MQU1CREFfQVJST1csIHRoaXMuaW5zZXJ0X3Nw
YWNlX2FmdGVyX2xhbWJkYV9hcnJvdyA/IEphdmFDb3JlLklOU0VSVCA6IEphdmFDb3JlLkRPX05P
VF9JTlNFUlQpOwogCQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5G
T1JNQVRURVJfSU5TRVJUX1NQQUNFX0FGVEVSX09QRU5JTkdfQU5HTEVfQlJBQ0tFVF9JTl9QQVJB
TUVURVJJWkVEX1RZUEVfUkVGRVJFTkNFLCB0aGlzLmluc2VydF9zcGFjZV9hZnRlcl9vcGVuaW5n
X2FuZ2xlX2JyYWNrZXRfaW5fcGFyYW1ldGVyaXplZF90eXBlX3JlZmVyZW5jZT8gSmF2YUNvcmUu
SU5TRVJUIDogSmF2YUNvcmUuRE9fTk9UX0lOU0VSVCk7CiAJCW9wdGlvbnMucHV0KERlZmF1bHRD
b2RlRm9ybWF0dGVyQ29uc3RhbnRzLkZPUk1BVFRFUl9JTlNFUlRfU1BBQ0VfQUZURVJfT1BFTklO
R19BTkdMRV9CUkFDS0VUX0lOX1RZUEVfQVJHVU1FTlRTLCB0aGlzLmluc2VydF9zcGFjZV9hZnRl
cl9vcGVuaW5nX2FuZ2xlX2JyYWNrZXRfaW5fdHlwZV9hcmd1bWVudHM/IEphdmFDb3JlLklOU0VS
VCA6IEphdmFDb3JlLkRPX05PVF9JTlNFUlQpOwogCQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZv
cm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfSU5TRVJUX1NQQUNFX0FGVEVSX09QRU5JTkdfQU5H
TEVfQlJBQ0tFVF9JTl9UWVBFX1BBUkFNRVRFUlMsIHRoaXMuaW5zZXJ0X3NwYWNlX2FmdGVyX29w
ZW5pbmdfYW5nbGVfYnJhY2tldF9pbl90eXBlX3BhcmFtZXRlcnM/IEphdmFDb3JlLklOU0VSVCA6
IEphdmFDb3JlLkRPX05PVF9JTlNFUlQpOwpAQCAtNTY5LDYgKzU3OSw3IEBACiAJCW9wdGlvbnMu
cHV0KERlZmF1bHRDb2RlRm9ybWF0dGVyQ29uc3RhbnRzLkZPUk1BVFRFUl9JTlNFUlRfU1BBQ0Vf
QkVGT1JFX0NPTU1BX0lOX1RZUEVfUEFSQU1FVEVSUywgdGhpcy5pbnNlcnRfc3BhY2VfYmVmb3Jl
X2NvbW1hX2luX3R5cGVfcGFyYW1ldGVycz8gSmF2YUNvcmUuSU5TRVJUIDogSmF2YUNvcmUuRE9f
Tk9UX0lOU0VSVCk7CiAJCW9wdGlvbnMucHV0KERlZmF1bHRDb2RlRm9ybWF0dGVyQ29uc3RhbnRz
LkZPUk1BVFRFUl9JTlNFUlRfU1BBQ0VfQkVGT1JFX0NPTU1BX0lOX1BBUkFNRVRFUklaRURfVFlQ
RV9SRUZFUkVOQ0UsIHRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9jb21tYV9pbl9wYXJhbWV0ZXJp
emVkX3R5cGVfcmVmZXJlbmNlPyBKYXZhQ29yZS5JTlNFUlQgOiBKYXZhQ29yZS5ET19OT1RfSU5T
RVJUKTsKIAkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRk9STUFU
VEVSX0lOU0VSVF9TUEFDRV9CRUZPUkVfRUxMSVBTSVMsIHRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9y
ZV9lbGxpcHNpcyA/IEphdmFDb3JlLklOU0VSVCA6IEphdmFDb3JlLkRPX05PVF9JTlNFUlQpOwor
CQlvcHRpb25zLnB1dChEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfSU5T
RVJUX1NQQUNFX0JFRk9SRV9MQU1CREFfQVJST1csIHRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9s
YW1iZGFfYXJyb3cgPyBKYXZhQ29yZS5JTlNFUlQgOiBKYXZhQ29yZS5ET19OT1RfSU5TRVJUKTsK
IAkJb3B0aW9ucy5wdXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRk9STUFUVEVSX0lO
U0VSVF9TUEFDRV9CRUZPUkVfT1BFTklOR19BTkdMRV9CUkFDS0VUX0lOX1BBUkFNRVRFUklaRURf
VFlQRV9SRUZFUkVOQ0UsIHRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2FuZ2xlX2Jy
YWNrZXRfaW5fcGFyYW1ldGVyaXplZF90eXBlX3JlZmVyZW5jZT8gSmF2YUNvcmUuSU5TRVJUIDog
SmF2YUNvcmUuRE9fTk9UX0lOU0VSVCk7CiAJCW9wdGlvbnMucHV0KERlZmF1bHRDb2RlRm9ybWF0
dGVyQ29uc3RhbnRzLkZPUk1BVFRFUl9JTlNFUlRfU1BBQ0VfQkVGT1JFX09QRU5JTkdfQU5HTEVf
QlJBQ0tFVF9JTl9UWVBFX0FSR1VNRU5UUywgdGhpcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYW5nbGVfYnJhY2tldF9pbl90eXBlX2FyZ3VtZW50cz8gSmF2YUNvcmUuSU5TRVJUIDogSmF2
YUNvcmUuRE9fTk9UX0lOU0VSVCk7CiAJCW9wdGlvbnMucHV0KERlZmF1bHRDb2RlRm9ybWF0dGVy
Q29uc3RhbnRzLkZPUk1BVFRFUl9JTlNFUlRfU1BBQ0VfQkVGT1JFX09QRU5JTkdfQU5HTEVfQlJB
Q0tFVF9JTl9UWVBFX1BBUkFNRVRFUlMsIHRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5n
X2FuZ2xlX2JyYWNrZXRfaW5fdHlwZV9wYXJhbWV0ZXJzPyBKYXZhQ29yZS5JTlNFUlQgOiBKYXZh
Q29yZS5ET19OT1RfSU5TRVJUKTsKQEAgLTk1OSw2ICs5NzAsMTQgQEAKIAkJCQl0aGlzLmJyYWNl
X3Bvc2l0aW9uX2Zvcl9lbnVtX2RlY2xhcmF0aW9uID0gKFN0cmluZykgYnJhY2VQb3NpdGlvbkZv
ckVudW1EZWNsYXJhdGlvbk9wdGlvbjsKIAkJCX0gY2F0Y2goQ2xhc3NDYXN0RXhjZXB0aW9uIGUp
IHsKIAkJCQl0aGlzLmJyYWNlX3Bvc2l0aW9uX2Zvcl9lbnVtX2RlY2xhcmF0aW9uID0gRGVmYXVs
dENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRU5EX09GX0xJTkU7CisJCQl9CisJCX0KKwkJZmluYWwg
T2JqZWN0IGJyYWNlUG9zaXRpb25Gb3JMYW1iZGFEZWNsYXJhdGlvbk9wdGlvbiA9IHNldHRpbmdz
LmdldChEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfQlJBQ0VfUE9TSVRJ
T05fRk9SX0xBTUJEQV9CT0RZKTsKKwkJaWYgKGJyYWNlUG9zaXRpb25Gb3JMYW1iZGFEZWNsYXJh
dGlvbk9wdGlvbiAhPSBudWxsKSB7CisJCQl0cnkgeworCQkJCXRoaXMuYnJhY2VfcG9zaXRpb25f
Zm9yX2xhbWJkYV9ib2R5ID0gKFN0cmluZykgYnJhY2VQb3NpdGlvbkZvckxhbWJkYURlY2xhcmF0
aW9uT3B0aW9uOworCQkJfSBjYXRjaChDbGFzc0Nhc3RFeGNlcHRpb24gZSkgeworCQkJCXRoaXMu
YnJhY2VfcG9zaXRpb25fZm9yX2xhbWJkYV9ib2R5ID0gRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25z
dGFudHMuRU5EX09GX0xJTkU7CiAJCQl9CiAJCX0KIAkJZmluYWwgT2JqZWN0IGJyYWNlUG9zaXRp
b25Gb3JNZXRob2REZWNsYXJhdGlvbk9wdGlvbiA9IHNldHRpbmdzLmdldChEZWZhdWx0Q29kZUZv
cm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfQlJBQ0VfUE9TSVRJT05fRk9SX01FVEhPRF9ERUNM
QVJBVElPTik7CkBAIC0xNDM4LDYgKzE0NTcsMTAgQEAKIAkJaWYgKGluc2VydFNwYWNlQWZ0ZXJF
bGxpcHNpc09wdGlvbiAhPSBudWxsKSB7CiAJCQl0aGlzLmluc2VydF9zcGFjZV9hZnRlcl9lbGxp
cHNpcyA9IEphdmFDb3JlLklOU0VSVC5lcXVhbHMoaW5zZXJ0U3BhY2VBZnRlckVsbGlwc2lzT3B0
aW9uKTsKIAkJfQorCQlmaW5hbCBPYmplY3QgaW5zZXJ0U3BhY2VBZnRlckxhbWJkYUFycm93T3B0
aW9uID0gc2V0dGluZ3MuZ2V0KERlZmF1bHRDb2RlRm9ybWF0dGVyQ29uc3RhbnRzLkZPUk1BVFRF
Ul9JTlNFUlRfU1BBQ0VfQUZURVJfTEFNQkRBX0FSUk9XKTsKKwkJaWYgKGluc2VydFNwYWNlQWZ0
ZXJMYW1iZGFBcnJvd09wdGlvbiAhPSBudWxsKSB7CisJCQl0aGlzLmluc2VydF9zcGFjZV9hZnRl
cl9sYW1iZGFfYXJyb3cgPSBKYXZhQ29yZS5JTlNFUlQuZXF1YWxzKGluc2VydFNwYWNlQWZ0ZXJM
YW1iZGFBcnJvd09wdGlvbik7CisJCX0KIAkJZmluYWwgT2JqZWN0IGluc2VydFNwYWNlQWZ0ZXJP
cGVuaW5nQW5nbGVCcmFja2V0SW5QYXJhbWV0ZXJpemVkVHlwZVJlZmVyZW5jZU9wdGlvbiA9IHNl
dHRpbmdzLmdldChEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5GT1JNQVRURVJfSU5TRVJU
X1NQQUNFX0FGVEVSX09QRU5JTkdfQU5HTEVfQlJBQ0tFVF9JTl9QQVJBTUVURVJJWkVEX1RZUEVf
UkVGRVJFTkNFKTsKIAkJaWYgKGluc2VydFNwYWNlQWZ0ZXJPcGVuaW5nQW5nbGVCcmFja2V0SW5Q
YXJhbWV0ZXJpemVkVHlwZVJlZmVyZW5jZU9wdGlvbiAhPSBudWxsKSB7CiAJCQl0aGlzLmluc2Vy
dF9zcGFjZV9hZnRlcl9vcGVuaW5nX2FuZ2xlX2JyYWNrZXRfaW5fcGFyYW1ldGVyaXplZF90eXBl
X3JlZmVyZW5jZSA9IEphdmFDb3JlLklOU0VSVC5lcXVhbHMoaW5zZXJ0U3BhY2VBZnRlck9wZW5p
bmdBbmdsZUJyYWNrZXRJblBhcmFtZXRlcml6ZWRUeXBlUmVmZXJlbmNlT3B0aW9uKTsKQEAgLTE3
NDUsNiArMTc2OCwxMCBAQAogCQlmaW5hbCBPYmplY3QgaW5zZXJ0U3BhY2VCZWZvcmVFbGxpcHNp
c09wdGlvbiA9IHNldHRpbmdzLmdldChEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5GT1JN
QVRURVJfSU5TRVJUX1NQQUNFX0JFRk9SRV9FTExJUFNJUyk7CiAJCWlmIChpbnNlcnRTcGFjZUJl
Zm9yZUVsbGlwc2lzT3B0aW9uICE9IG51bGwpIHsKIAkJCXRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9y
ZV9lbGxpcHNpcyA9IEphdmFDb3JlLklOU0VSVC5lcXVhbHMoaW5zZXJ0U3BhY2VCZWZvcmVFbGxp
cHNpc09wdGlvbik7CisJCX0KKwkJZmluYWwgT2JqZWN0IGluc2VydFNwYWNlQmVmb3JlTGFtYmRh
QXJyb3dPcHRpb24gPSBzZXR0aW5ncy5nZXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMu
Rk9STUFUVEVSX0lOU0VSVF9TUEFDRV9CRUZPUkVfTEFNQkRBX0FSUk9XKTsKKwkJaWYgKGluc2Vy
dFNwYWNlQmVmb3JlTGFtYmRhQXJyb3dPcHRpb24gIT0gbnVsbCkgeworCQkJdGhpcy5pbnNlcnRf
c3BhY2VfYmVmb3JlX2xhbWJkYV9hcnJvdyA9IEphdmFDb3JlLklOU0VSVC5lcXVhbHMoaW5zZXJ0
U3BhY2VCZWZvcmVMYW1iZGFBcnJvd09wdGlvbik7CiAJCX0KIAkJZmluYWwgT2JqZWN0IGluc2Vy
dFNwYWNlQmVmb3JlT3BlbmluZ0FuZ2xlQnJhY2tlckluUGFyYW1ldGVyaXplZFR5cGVSZWZlcmVu
Y2VPcHRpb24gPSBzZXR0aW5ncy5nZXQoRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRk9S
TUFUVEVSX0lOU0VSVF9TUEFDRV9CRUZPUkVfT1BFTklOR19BTkdMRV9CUkFDS0VUX0lOX1BBUkFN
RVRFUklaRURfVFlQRV9SRUZFUkVOQ0UpOwogCQlpZiAoaW5zZXJ0U3BhY2VCZWZvcmVPcGVuaW5n
QW5nbGVCcmFja2VySW5QYXJhbWV0ZXJpemVkVHlwZVJlZmVyZW5jZU9wdGlvbiAhPSBudWxsKSB7
CkBAIC0yMjA0LDYgKzIyMzEsNyBAQAogCQl0aGlzLmJyYWNlX3Bvc2l0aW9uX2Zvcl9jb25zdHJ1
Y3Rvcl9kZWNsYXJhdGlvbiA9IERlZmF1bHRDb2RlRm9ybWF0dGVyQ29uc3RhbnRzLkVORF9PRl9M
SU5FOwogCQl0aGlzLmJyYWNlX3Bvc2l0aW9uX2Zvcl9lbnVtX2NvbnN0YW50ID0gRGVmYXVsdENv
ZGVGb3JtYXR0ZXJDb25zdGFudHMuRU5EX09GX0xJTkU7CiAJCXRoaXMuYnJhY2VfcG9zaXRpb25f
Zm9yX2VudW1fZGVjbGFyYXRpb24gPSBEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5FTkRf
T0ZfTElORTsKKwkJdGhpcy5icmFjZV9wb3NpdGlvbl9mb3JfbGFtYmRhX2JvZHkgPSBEZWZhdWx0
Q29kZUZvcm1hdHRlckNvbnN0YW50cy5FTkRfT0ZfTElORTsKIAkJdGhpcy5icmFjZV9wb3NpdGlv
bl9mb3JfbWV0aG9kX2RlY2xhcmF0aW9uID0gRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMu
RU5EX09GX0xJTkU7CiAJCXRoaXMuYnJhY2VfcG9zaXRpb25fZm9yX3R5cGVfZGVjbGFyYXRpb24g
PSBEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5FTkRfT0ZfTElORTsKIAkJdGhpcy5icmFj
ZV9wb3NpdGlvbl9mb3Jfc3dpdGNoID0gRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRU5E
X09GX0xJTkU7CkBAIC0yMzAzLDYgKzIzMzEsNyBAQAogCQl0aGlzLmluc2VydF9zcGFjZV9hZnRl
cl9jb21tYV9pbl90eXBlX2FyZ3VtZW50cyA9IHRydWU7CiAJCXRoaXMuaW5zZXJ0X3NwYWNlX2Fm
dGVyX2NvbW1hX2luX3R5cGVfcGFyYW1ldGVycyA9IHRydWU7CiAJCXRoaXMuaW5zZXJ0X3NwYWNl
X2FmdGVyX2VsbGlwc2lzID0gdHJ1ZTsKKwkJdGhpcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfbGFtYmRh
X2Fycm93ID0gdHJ1ZTsKIAkJdGhpcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfb3BlbmluZ19hbmdsZV9i
cmFja2V0X2luX3BhcmFtZXRlcml6ZWRfdHlwZV9yZWZlcmVuY2UgPSBmYWxzZTsKIAkJdGhpcy5p
bnNlcnRfc3BhY2VfYWZ0ZXJfb3BlbmluZ19hbmdsZV9icmFja2V0X2luX3R5cGVfYXJndW1lbnRz
ID0gZmFsc2U7CiAJCXRoaXMuaW5zZXJ0X3NwYWNlX2FmdGVyX29wZW5pbmdfYW5nbGVfYnJhY2tl
dF9pbl90eXBlX3BhcmFtZXRlcnMgPSBmYWxzZTsKQEAgLTIzNzksNiArMjQwOCw3IEBACiAJCXRo
aXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9jb21tYV9pbl90eXBlX2FyZ3VtZW50cyA9IGZhbHNlOwog
CQl0aGlzLmluc2VydF9zcGFjZV9iZWZvcmVfY29tbWFfaW5fdHlwZV9wYXJhbWV0ZXJzID0gZmFs
c2U7CiAJCXRoaXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9lbGxpcHNpcyA9IGZhbHNlOworCQl0aGlz
Lmluc2VydF9zcGFjZV9iZWZvcmVfbGFtYmRhX2Fycm93ID0gdHJ1ZTsKIAkJdGhpcy5pbnNlcnRf
c3BhY2VfYmVmb3JlX3BhcmVudGhlc2l6ZWRfZXhwcmVzc2lvbl9pbl9yZXR1cm4gPSB0cnVlOwog
CQl0aGlzLmluc2VydF9zcGFjZV9iZWZvcmVfcGFyZW50aGVzaXplZF9leHByZXNzaW9uX2luX3Ro
cm93ID0gdHJ1ZTsKIAkJdGhpcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYW5nbGVfYnJh
Y2tldF9pbl9wYXJhbWV0ZXJpemVkX3R5cGVfcmVmZXJlbmNlID0gZmFsc2U7CkBAIC0yNDkxLDYg
KzI1MjEsNyBAQAogCQl0aGlzLmJyYWNlX3Bvc2l0aW9uX2Zvcl9jb25zdHJ1Y3Rvcl9kZWNsYXJh
dGlvbiA9IERlZmF1bHRDb2RlRm9ybWF0dGVyQ29uc3RhbnRzLkVORF9PRl9MSU5FOwogCQl0aGlz
LmJyYWNlX3Bvc2l0aW9uX2Zvcl9lbnVtX2NvbnN0YW50ID0gRGVmYXVsdENvZGVGb3JtYXR0ZXJD
b25zdGFudHMuRU5EX09GX0xJTkU7CiAJCXRoaXMuYnJhY2VfcG9zaXRpb25fZm9yX2VudW1fZGVj
bGFyYXRpb24gPSBEZWZhdWx0Q29kZUZvcm1hdHRlckNvbnN0YW50cy5FTkRfT0ZfTElORTsKKwkJ
dGhpcy5icmFjZV9wb3NpdGlvbl9mb3JfbGFtYmRhX2JvZHkgPSBEZWZhdWx0Q29kZUZvcm1hdHRl
ckNvbnN0YW50cy5FTkRfT0ZfTElORTsKIAkJdGhpcy5icmFjZV9wb3NpdGlvbl9mb3JfbWV0aG9k
X2RlY2xhcmF0aW9uID0gRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRU5EX09GX0xJTkU7
CiAJCXRoaXMuYnJhY2VfcG9zaXRpb25fZm9yX3R5cGVfZGVjbGFyYXRpb24gPSBEZWZhdWx0Q29k
ZUZvcm1hdHRlckNvbnN0YW50cy5FTkRfT0ZfTElORTsKIAkJdGhpcy5icmFjZV9wb3NpdGlvbl9m
b3Jfc3dpdGNoID0gRGVmYXVsdENvZGVGb3JtYXR0ZXJDb25zdGFudHMuRU5EX09GX0xJTkU7CkBA
IC0yNTkwLDYgKzI2MjEsNyBAQAogCQl0aGlzLmluc2VydF9zcGFjZV9hZnRlcl9jb21tYV9pbl90
eXBlX2FyZ3VtZW50cyA9IHRydWU7CiAJCXRoaXMuaW5zZXJ0X3NwYWNlX2FmdGVyX2NvbW1hX2lu
X3R5cGVfcGFyYW1ldGVycyA9IHRydWU7CiAJCXRoaXMuaW5zZXJ0X3NwYWNlX2FmdGVyX2VsbGlw
c2lzID0gdHJ1ZTsKKwkJdGhpcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfbGFtYmRhX2Fycm93ID0gdHJ1
ZTsKIAkJdGhpcy5pbnNlcnRfc3BhY2VfYWZ0ZXJfb3BlbmluZ19hbmdsZV9icmFja2V0X2luX3Bh
cmFtZXRlcml6ZWRfdHlwZV9yZWZlcmVuY2UgPSBmYWxzZTsKIAkJdGhpcy5pbnNlcnRfc3BhY2Vf
YWZ0ZXJfb3BlbmluZ19hbmdsZV9icmFja2V0X2luX3R5cGVfYXJndW1lbnRzID0gZmFsc2U7CiAJ
CXRoaXMuaW5zZXJ0X3NwYWNlX2FmdGVyX29wZW5pbmdfYW5nbGVfYnJhY2tldF9pbl90eXBlX3Bh
cmFtZXRlcnMgPSBmYWxzZTsKQEAgLTI2NjYsNiArMjY5OCw3IEBACiAJCXRoaXMuaW5zZXJ0X3Nw
YWNlX2JlZm9yZV9jb21tYV9pbl90eXBlX2FyZ3VtZW50cyA9IGZhbHNlOwogCQl0aGlzLmluc2Vy
dF9zcGFjZV9iZWZvcmVfY29tbWFfaW5fdHlwZV9wYXJhbWV0ZXJzID0gZmFsc2U7CiAJCXRoaXMu
aW5zZXJ0X3NwYWNlX2JlZm9yZV9lbGxpcHNpcyA9IGZhbHNlOworCQl0aGlzLmluc2VydF9zcGFj
ZV9iZWZvcmVfbGFtYmRhX2Fycm93ID0gdHJ1ZTsKIAkJdGhpcy5pbnNlcnRfc3BhY2VfYmVmb3Jl
X3BhcmVudGhlc2l6ZWRfZXhwcmVzc2lvbl9pbl9yZXR1cm4gPSB0cnVlOwogCQl0aGlzLmluc2Vy
dF9zcGFjZV9iZWZvcmVfcGFyZW50aGVzaXplZF9leHByZXNzaW9uX2luX3Rocm93ID0gdHJ1ZTsK
IAkJdGhpcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYW5nbGVfYnJhY2tldF9pbl9wYXJh
bWV0ZXJpemVkX3R5cGVfcmVmZXJlbmNlID0gZmFsc2U7CmRpZmYgLS1naXQgZm9ybWF0dGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmphdmEgZm9ybWF0dGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmphdmEKaW5kZXggY2VkNTY4
Ni4uYWMwZTNiZCAxMDA2NDQKLS0tIGZvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Zm9ybWF0dGVyL1NjcmliZS5qYXZhCisrKyBmb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2Zvcm1hdHRlci9TY3JpYmUuamF2YQpAQCAtNSw5ICs1LDE0IEBACiAgKiB3aGljaCBhY2Nv
bXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDov
L3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqIAorICogVGhpcyBpcyBhbiBp
bXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1
bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZh
aWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUg
Y29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1Au
CisgKiAKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFs
IEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqICAgICBSYXkgVi4gKHZvaWRzdGFyQGdtYWlsLmNv
bSkgLSBDb250cmlidXRpb24gZm9yIGJ1ZyAyODI5ODgKKyAqICAgICBKZXNwZXIgUyBNb2xsZXIg
LSBDb250cmlidXRpb24gZm9yIGJ1ZyA0MDA4MzAKICAqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwog
cGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuZm9ybWF0dGVyOwogCkBAIC00OTIzLDUz
ICs0OTI4LDYgQEAKIAkJCX0KIAkJCXByaW50KHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24g
LSB0aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlvbiwgY29uc2lkZXJTcGFjZUlmQW55KTsKIAkJfSBj
YXRjaCAoSW52YWxpZElucHV0RXhjZXB0aW9uIGUpIHsKLQkJCXRocm93IG5ldyBBYm9ydEZvcm1h
dHRpbmcoZSk7Ci0JCX0KLQl9Ci0KLQlwdWJsaWMgdm9pZCBwcmludEFycmF5UXVhbGlmaWVkUmVm
ZXJlbmNlKGludCBudW1iZXJPZlRva2VucywgaW50IHNvdXJjZUVuZCkgewotCQlpbnQgY3VycmVu
dFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb247Ci0JCWlu
dCBudW1iZXJPZklkZW50aWZpZXJzID0gMDsKLQkJdHJ5IHsKLQkJCWRvIHsKLQkJCQlwcmludENv
bW1lbnQoQ29kZUZvcm1hdHRlci5LX1VOS05PV04sIE5PX1RSQUlMSU5HX0NPTU1FTlQpOwotCQkJ
CXN3aXRjaCh0aGlzLmN1cnJlbnRUb2tlbiA9IHRoaXMuc2Nhbm5lci5nZXROZXh0VG9rZW4oKSkg
ewotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUVPRiA6Ci0JCQkJCQlyZXR1cm47
Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lV0hJVEVTUEFDRSA6Ci0JCQkJCQlh
ZGREZWxldGVFZGl0KHRoaXMuc2Nhbm5lci5nZXRDdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uKCks
IHRoaXMuc2Nhbm5lci5nZXRDdXJyZW50VG9rZW5FbmRQb3NpdGlvbigpKTsKLQkJCQkJCWN1cnJl
bnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJ
CQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9D
SyA6Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoK
LQkJCQkJCXByaW50QmxvY2tDb21tZW50KGZhbHNlKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0
UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7Ci0J
CQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9MSU5FIDoKLQkJCQkJCXBy
aW50TGluZUNvbW1lbnQoKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlz
LnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciA6Ci0JCQkJCQlwcmludCh0aGlzLnNjYW5uZXIu
Y3VycmVudFBvc2l0aW9uIC0gdGhpcy5zY2FubmVyLnN0YXJ0UG9zaXRpb24sIGZhbHNlKTsKLQkJ
CQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0
aW9uOwotCQkJCQkJaWYgKCsrIG51bWJlck9mSWRlbnRpZmllcnMgPT0gbnVtYmVyT2ZUb2tlbnMp
IHsKLQkJCQkJCQl0aGlzLnNjYW5uZXIucmVzZXRUbyhjdXJyZW50VG9rZW5TdGFydFBvc2l0aW9u
LCB0aGlzLnNjYW5uZXJFbmRQb3NpdGlvbiAtIDEpOwotCQkJCQkJCXJldHVybjsKLQkJCQkJCX0K
LQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZURPVCA6Ci0J
CQkJCQlwcmludCh0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uIC0gdGhpcy5zY2FubmVyLnN0
YXJ0UG9zaXRpb24sIGZhbHNlKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0
aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lUlBBUkVOOgotCQkJCQkJY3VycmVudFRva2VuU3RhcnRQb3Np
dGlvbiA9IHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0aW9uOwotCQkJCQkJLy8gJEZBTEwtVEhST1VH
SCQgLSBmYWxsIHRocm91Z2ggZGVmYXVsdCBjYXNlLi4uCi0JCQkJCWRlZmF1bHQ6Ci0JCQkJCQl0
aGlzLnNjYW5uZXIucmVzZXRUbyhjdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uLCB0aGlzLnNjYW5u
ZXJFbmRQb3NpdGlvbiAtIDEpOwotCQkJCQkJcmV0dXJuOwotCQkJCX0KLQkJCX0gd2hpbGUgKHRo
aXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24gPD0gc291cmNlRW5kKTsKLQkJfSBjYXRjaChJbnZh
bGlkSW5wdXRFeGNlcHRpb24gZSkgewogCQkJdGhyb3cgbmV3IEFib3J0Rm9ybWF0dGluZyhlKTsK
IAkJfQogCX0=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>228406</attachid>
            <date>2013-03-14 04:53:00 -0400</date>
            <delta_ts>2013-03-15 02:06:23 -0400</delta_ts>
            <desc>Jesper&apos;s patch for format support for 308 annotations - up to date</desc>
            <filename>Formatter308.patch</filename>
            <type>text/plain</type>
            <size>86434</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuQWxs
SmF2YThUZXN0cy5qYXZhCmluZGV4IGNkMTExMmUuLjNiZDU0ZjYgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkFsbEphdmE4VGVzdHMuamF2
YQpAQCAtNDQsNiArNDQsNyBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmRv
bS5BU1RDb252ZXJ0ZXJUZXN0QVNUOF8yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLmRvbS5Db252ZXJ0ZXJUZXN0U2V0dXA7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuZG9tLlR5cGVBbm5vdGF0aW9uc0NvbnZlcnRlclRlc3Q7CitpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyLkZvcm1hdHRlckpTUjMwOFRlc3RzOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmZvcm1hdHRlci5Gb3JtYXR0ZXJKU1IzMzVUZXN0
czsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5yZXdyaXRlLmRlc2NyaWJpbmcu
QVNUUmV3cml0aW5nVGVzdDsKIApAQCAtNjcsNiArNjgsNyBAQAogCQkJRXhwcmVzc2lvbkNvbnRl
eHRUZXN0cy5jbGFzcywKIAkJCUZsb3dBbmFseXNpc1Rlc3Q4LmNsYXNzLAogCQkJRm9ybWF0dGVy
SlNSMzM1VGVzdHMuY2xhc3MsCisJCQlGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcywKIAkJfTsK
IAl9CiAJCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuRm9ybWF0dGVyVGVzdHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCmluZGV4IDIwZGE0ZDkuLmU4ZTZhYmEgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3JtYXR0
ZXJUZXN0cy5qYXZhCkBAIC0xMiw2ICsxMiw3IEBACiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAg
SUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAg
SmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9uIGZvciBidWcgNDAyMTczCisgKiAgICAgICAg
ICAgICAgICAgICAgICAgQ29udHJpYnV0aW9uIGZvciBidWcgNDAyODkyCiAgKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHM7CiAKQEAgLTM3
LDYgKzM4LDcgQEAKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckNvbW1lbnRzQnVnc1Rlc3Qu
Y2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVyQ29tbWVudHNUZXN0cy5jbGFzcyk7
CiAJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMzVUZXN0cy5jbGFzcyk7CisJCVRFU1Rf
U1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcyk7CiAJCVRFU1RfU1VJVEVTLmFk
ZChGb3JtYXR0ZXJDb21tZW50c0NsZWFyQmxhbmtMaW5lc1Rlc3RzLmNsYXNzKTsKIAkJVEVTVF9T
VUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc1Rlc3RzLmNsYXNzKTsKIAkJ
VEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc0Rlc2NyaXB0aW9u
VGVzdHMuY2xhc3MpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1Iz
MDhUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1IzMDhUZXN0cy5qYXZh
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjY3NmQ5YmYKLS0tIC9kZXYvbnVs
bAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvZm9ybWF0dGVyL0Zvcm1hdHRlckpTUjMwOFRlc3RzLmphdmEKQEAgLTAs
MCArMSwzNDMgQEAKKy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIw
MTMgSmVzcGVyIFN0ZWVuIE1vbGxlciBhbmQgb3RoZXJzLgorICogQWxsIHJpZ2h0cyByZXNlcnZl
ZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscworICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2
YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwK
KyAqIAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVj
aWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3Mg
KEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1
cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVj
aWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRyaWJ1dG9yczoKKyAqICAgICBKZXNw
ZXIgU3RlZW4gTW9sbGVyIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uICovCisKK3Bh
Y2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyOworCitpbXBvcnQgamF2
YS51dGlsLk1hcDsKKworaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3Jn
LmVjbGlwc2UuY29yZS5yZXNvdXJjZXMuSVdvcmtzcGFjZURlc2NyaXB0aW9uOworaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5jb3JlLklDb21waWxhdGlvblVuaXQ7CitpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmNvcmUuSUphdmFQcm9qZWN0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFN
b2RlbEV4Y2VwdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5mb3JtYXR0ZXIuQ29k
ZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC5BYnN0
cmFjdEphdmFNb2RlbFRlc3RzOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLnV0
aWwuVXRpbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5D
b21waWxlck9wdGlvbnM7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZvcm1hdHRl
ci5EZWZhdWx0Q29kZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Zm9ybWF0dGVyLkRlZmF1bHRDb2RlRm9ybWF0dGVyT3B0aW9uczsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS50ZXh0LmVkaXRzLlRleHRFZGl0OworCitwdWJsaWMgY2xhc3MgRm9ybWF0dGVySlNSMzA4VGVz
dHMgZXh0ZW5kcyBBYnN0cmFjdEphdmFNb2RlbFRlc3RzIHsKKworCXByb3RlY3RlZCBzdGF0aWMg
SUphdmFQcm9qZWN0IEpBVkFfUFJPSkVDVDsKKworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVO
S05PV05fS0lORCA9IDA7CisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU4gPSAiX2luIjsK
KwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBPVVQgPSAiX291dCI7CisJcHVibGljIHN0YXRp
YyBmaW5hbCBib29sZWFuIERFQlVHID0gZmFsc2U7CisJc3RhdGljIGZpbmFsIFN0cmluZyBMSU5F
X1NFUEFSQVRPUiA9IFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKTsKKwlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJPSkVDVF9OQU1FID0gIkZvcm1hdHRlckpTUjMwOCI7
IAorCXByaXZhdGUgbG9uZyB0aW1lOworCisJRGVmYXVsdENvZGVGb3JtYXR0ZXJPcHRpb25zIGZv
cm1hdHRlclByZWZzOworCU1hcCBmb3JtYXR0ZXJPcHRpb25zOworCisJc3RhdGljIHsKKy8vCQlU
RVNUU19OVU1CRVJTID0gbmV3IGludFtdIHsgNzgzIH07CisvLwkJVEVTVFNfUkFOR0UgPSBuZXcg
aW50W10geyA3MzQsIC0xIH07CisvLwkJVEVTVFNfTkFNRVMgPSBuZXcgU3RyaW5nIFtdIHsgInRl
c3QwMDAiIH07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgpIHsKKwkJcmV0dXJuIGJ1
aWxkTW9kZWxUZXN0U3VpdGUoRm9ybWF0dGVySlNSMzA4VGVzdHMuY2xhc3MpOworCX0KKworCXB1
YmxpYyBGb3JtYXR0ZXJKU1IzMDhUZXN0cyhTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1lKTsK
Kwl9CisKKwlTdHJpbmcgcnVuRm9ybWF0dGVyKENvZGVGb3JtYXR0ZXIgY29kZUZvcm1hdHRlciwg
U3RyaW5nIHNvdXJjZSwgaW50IGtpbmQsIGludCBpbmRlbnRhdGlvbkxldmVsLCBpbnQgb2Zmc2V0
LCBpbnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvciwgYm9vbGVhbiByZXBlYXQpIHsKKy8v
CQlsb25nIHRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKKwkJVGV4dEVkaXQgZWRp
dCA9IGNvZGVGb3JtYXR0ZXIuZm9ybWF0KGtpbmQsIHNvdXJjZSwgb2Zmc2V0LCBsZW5ndGgsIGlu
ZGVudGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQlTeXN0ZW0u
b3V0LnByaW50bG4oKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGltZSkgKyAiIG1zIik7
CisJCWlmIChlZGl0ID09IG51bGwpIHJldHVybiBudWxsOworLy8JCVN5c3RlbS5vdXQucHJpbnRs
bihlZGl0LmdldENoaWxkcmVuU2l6ZSgpICsgIiBlZGl0cyIpOworCQlTdHJpbmcgcmVzdWx0ID0g
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUudXRpbC5VdGlsLmVkaXRlZFN0cmluZyhzb3Vy
Y2UsIGVkaXQpOworCisJCWlmIChyZXBlYXQgJiYgbGVuZ3RoID09IHNvdXJjZS5sZW5ndGgoKSkg
eworLy8JCQl0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CisJCQllZGl0ID0gY29k
ZUZvcm1hdHRlci5mb3JtYXQoa2luZCwgcmVzdWx0LCAwLCByZXN1bHQubGVuZ3RoKCksIGluZGVu
dGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQkJU3lzdGVtLm91
dC5wcmludGxuKChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIHRpbWUpICsgIiBtcyIpOwor
CQkJaWYgKGVkaXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CisvLwkJCWFzc2VydEVxdWFscygiU2hv
dWxkIG5vdCBoYXZlIGVkaXRzIiwgMCwgZWRpdC5nZXRDaGlsZHJlbigpLmxlbmd0aCk7CisJCQlm
aW5hbCBTdHJpbmcgcmVzdWx0MiA9IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwu
VXRpbC5lZGl0ZWRTdHJpbmcocmVzdWx0LCBlZGl0KTsKKwkJCWlmICghcmVzdWx0LmVxdWFscyhy
ZXN1bHQyKSkgeworCQkJCWFzc2VydFNvdXJjZUVxdWFscygiU2Vjb25kIGZvcm1hdHRpbmcgaXMg
ZGlmZmVyZW50IGZyb20gZmlyc3Qgb25lISIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5l
RGVsaW1pdGVyKHJlc3VsdCksIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVy
KHJlc3VsdDIpKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4gcmVzdWx0OworCX0KKworCS8qKgorCSAq
IEluaXQgZm9ybWF0dGVyIHByZWZlcmVuY2VzIHdpdGggRWNsaXBzZSBkZWZhdWx0IHNldHRpbmdz
LgorCSAqLworCXByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJICAg
IHN1cGVyLnNldFVwKCk7CisJCXRoaXMuZm9ybWF0dGVyUHJlZnMgPSBEZWZhdWx0Q29kZUZvcm1h
dHRlck9wdGlvbnMuZ2V0RWNsaXBzZURlZmF1bHRTZXR0aW5ncygpOworCQlpZiAoSkFWQV9QUk9K
RUNUICE9IG51bGwpIHsKKwkJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucyA9IEpBVkFfUFJPSkVDVC5n
ZXRPcHRpb25zKHRydWUpOworCQl9CisJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucy5wdXQoQ29tcGls
ZXJPcHRpb25zLk9QVElPTl9Db21wbGlhbmNlLCBDb21waWxlck9wdGlvbnMuVkVSU0lPTl8xXzgp
OworCQl0aGlzLmZvcm1hdHRlck9wdGlvbnMucHV0KENvbXBpbGVyT3B0aW9ucy5PUFRJT05fVGFy
Z2V0UGxhdGZvcm0sIENvbXBpbGVyT3B0aW9ucy5WRVJTSU9OXzFfOCk7CisJCXRoaXMuZm9ybWF0
dGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9QVElPTl9Tb3VyY2UsIENvbXBpbGVyT3B0
aW9ucy5WRVJTSU9OXzFfOCk7CisJfQorCisJLyoqCisJICogQ3JlYXRlIHByb2plY3QgYW5kIHNl
dCB0aGUgamFyIHBsYWNlaG9sZGVyLgorCSAqLworCXB1YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0
aHJvd3MgRXhjZXB0aW9uIHsKKwkJLy8gZW5zdXJlIGF1dG9idWlsZGluZyBpcyB0dXJuZWQgb2Zm
CisJCUlXb3Jrc3BhY2VEZXNjcmlwdGlvbiBkZXNjcmlwdGlvbiA9IGdldFdvcmtzcGFjZSgpLmdl
dERlc2NyaXB0aW9uKCk7CisJCWlmIChkZXNjcmlwdGlvbi5pc0F1dG9CdWlsZGluZygpKSB7CisJ
CQlkZXNjcmlwdGlvbi5zZXRBdXRvQnVpbGRpbmcoZmFsc2UpOworCQkJZ2V0V29ya3NwYWNlKCku
c2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pOworCQl9CisKKwkJaWYgKEpBVkFfUFJPSkVDVCA9
PSBudWxsKSB7CisJCQlKQVZBX1BST0pFQ1QgPSBzZXRVcEphdmFQcm9qZWN0KFBST0pFQ1RfTkFN
RSwgIjEuOCIpOyAvLyROT04tTkxTLTEkCisJCX0KKworCQlpZiAoREVCVUcpIHsKKwkJCXRoaXMu
dGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOworCQl9CisJfQorCisJLyoqCisJICog
UmVzZXQgdGhlIGphciBwbGFjZWhvbGRlciBhbmQgZGVsZXRlIHByb2plY3QuCisJICovCisJcHVi
bGljIHZvaWQgdGVhckRvd25TdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlkZWxldGVQcm9q
ZWN0KEpBVkFfUFJPSkVDVCk7IC8vJE5PTi1OTFMtMSQKKwkJSkFWQV9QUk9KRUNUID0gbnVsbDsK
KwkJaWYgKERFQlVHKSB7CisJCQlTeXN0ZW0ub3V0LnByaW50bG4oIlRpbWUgc3BlbnQgPSAiICsg
KFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGhpcy50aW1lKSk7Ly8kTk9OLU5MUy0xJAor
CQl9CisJCXN1cGVyLnRlYXJEb3duU3VpdGUoKTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRJ
bihTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlhc3NlcnROb3ROdWxsKGNvbXBpbGF0
aW9uVW5pdE5hbWUpOworCQlpbnQgZG90SW5kZXggPSBjb21waWxhdGlvblVuaXROYW1lLmluZGV4
T2YoJy4nKTsKKwkJYXNzZXJ0VHJ1ZShkb3RJbmRleCAhPSAtMSk7CisJCXJldHVybiBjb21waWxh
dGlvblVuaXROYW1lLnN1YnN0cmluZygwLCBkb3RJbmRleCkgKyBJTiArIGNvbXBpbGF0aW9uVW5p
dE5hbWUuc3Vic3RyaW5nKGRvdEluZGV4KTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRPdXQo
U3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUpIHsKKwkJYXNzZXJ0Tm90TnVsbChjb21waWxhdGlv
blVuaXROYW1lKTsKKwkJaW50IGRvdEluZGV4ID0gY29tcGlsYXRpb25Vbml0TmFtZS5pbmRleE9m
KCcuJyk7CisJCWFzc2VydFRydWUoZG90SW5kZXggIT0gLTEpOworCQlyZXR1cm4gY29tcGlsYXRp
b25Vbml0TmFtZS5zdWJzdHJpbmcoMCwgZG90SW5kZXgpICsgT1VUICsgY29tcGlsYXRpb25Vbml0
TmFtZS5zdWJzdHJpbmcoZG90SW5kZXgpOworCX0KKworCXZvaWQgYXNzZXJ0TGluZUVxdWFscyhT
dHJpbmcgYWN0dWFsQ29udGVudHMsIFN0cmluZyBvcmlnaW5hbFNvdXJjZSwgU3RyaW5nIGV4cGVj
dGVkQ29udGVudHMsIGJvb2xlYW4gY2hlY2tOdWxsKSB7CisJCWlmIChhY3R1YWxDb250ZW50cyA9
PSBudWxsKSB7CisJCQlhc3NlcnRUcnVlKCJhY3R1YWxDb250ZW50cyBpcyBudWxsIiwgY2hlY2tO
dWxsKTsKKwkJCWFzc2VydEVxdWFscyhleHBlY3RlZENvbnRlbnRzLCBvcmlnaW5hbFNvdXJjZSk7
CisJCQlyZXR1cm47CisJCX0KKwkJYXNzZXJ0U291cmNlRXF1YWxzKCJEaWZmZXJlbnQgbnVtYmVy
IG9mIGxlbmd0aCIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVyKGV4cGVj
dGVkQ29udGVudHMpLCBhY3R1YWxDb250ZW50cyk7CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRl
c3QoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlE
ZWZhdWx0Q29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVyID0gbmV3IERlZmF1bHRDb2RlRm9ybWF0
dGVyKHRoaXMuZm9ybWF0dGVyUHJlZnMsIHRoaXMuZm9ybWF0dGVyT3B0aW9ucyk7CisJCXJ1blRl
c3QoY29kZUZvcm1hdHRlciwgcGFja2FnZU5hbWUsIGNvbXBpbGF0aW9uVW5pdE5hbWUsIENvZGVG
b3JtYXR0ZXIuS19DT01QSUxBVElPTl9VTklULCAwKTsKKwl9CisKKwlwcml2YXRlIHZvaWQgcnVu
VGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdlTmFtZSwgU3Ry
aW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRpb25MZXZlbCkg
eworCQlydW5UZXN0KGNvZGVGb3JtYXR0ZXIsIHBhY2thZ2VOYW1lLCBjb21waWxhdGlvblVuaXRO
YW1lLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBmYWxzZSwgMCwgLTEpOworCX0KKwlwcml2YXRl
IHZvaWQgcnVuVGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdl
TmFtZSwgU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRp
b25MZXZlbCwgYm9vbGVhbiBjaGVja051bGwsIGludCBvZmZzZXQsIGludCBsZW5ndGgpIHsKKwkJ
cnVuVGVzdChjb2RlRm9ybWF0dGVyLCBwYWNrYWdlTmFtZSwgY29tcGlsYXRpb25Vbml0TmFtZSwg
a2luZCwgaW5kZW50YXRpb25MZXZlbCwgY2hlY2tOdWxsLCBvZmZzZXQsIGxlbmd0aCwgbnVsbCk7
CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRlc3QoQ29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVy
LCBTdHJpbmcgcGFja2FnZU5hbWUsIFN0cmluZyBjb21waWxhdGlvblVuaXROYW1lLCBpbnQga2lu
ZCwgaW50IGluZGVudGF0aW9uTGV2ZWwsIGJvb2xlYW4gY2hlY2tOdWxsLCBpbnQgb2Zmc2V0LCBp
bnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvcikgeworCQl0cnkgeworCQkJSUNvbXBpbGF0
aW9uVW5pdCBzb3VyY2VVbml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIi
LCBwYWNrYWdlTmFtZSwgZ2V0SW4oY29tcGlsYXRpb25Vbml0TmFtZSkpOyAvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwkJCVN0cmluZyBzb3VyY2UgPSBzb3VyY2VVbml0LmdldFNvdXJjZSgp
OworCQkJYXNzZXJ0Tm90TnVsbChzb3VyY2UpOworCQkJSUNvbXBpbGF0aW9uVW5pdCBvdXRwdXRV
bml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIiLCBwYWNrYWdlTmFtZSwg
Z2V0T3V0KGNvbXBpbGF0aW9uVW5pdE5hbWUpKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJCQlhc3NlcnROb3ROdWxsKG91dHB1dFVuaXQpOworCQkJU3RyaW5nIHJlc3VsdDsKKwkJCWlm
IChsZW5ndGggPT0gLTEpIHsKKwkJCQlyZXN1bHQgPSBydW5Gb3JtYXR0ZXIoY29kZUZvcm1hdHRl
ciwgc291cmNlLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBvZmZzZXQsIHNvdXJjZS5sZW5ndGgo
KSwgbGluZVNlcGFyYXRvciwgdHJ1ZSk7CisJCQl9IGVsc2UgeworCQkJCXJlc3VsdCA9IHJ1bkZv
cm1hdHRlcihjb2RlRm9ybWF0dGVyLCBzb3VyY2UsIGtpbmQsIGluZGVudGF0aW9uTGV2ZWwsIG9m
ZnNldCwgbGVuZ3RoLCBsaW5lU2VwYXJhdG9yLCB0cnVlKTsKKwkJCX0KKwkJCWFzc2VydExpbmVF
cXVhbHMocmVzdWx0LCBzb3VyY2UsIG91dHB1dFVuaXQuZ2V0U291cmNlKCksIGNoZWNrTnVsbCk7
CisJCX0gY2F0Y2ggKEphdmFNb2RlbEV4Y2VwdGlvbiBlKSB7CisJCQllLnByaW50U3RhY2tUcmFj
ZSgpOworCQkJYXNzZXJ0VHJ1ZShmYWxzZSk7CisJCX0KKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0
MDAwKCkgeworCQlydW5UZXN0KCJ0ZXN0MDAwIiwgIkkuamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8k
Tk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDEoKSB7CisJCXJ1blRlc3QoInRl
c3QwMDEiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVi
bGljIHZvaWQgdGVzdDAwMigpIHsKKwkJcnVuVGVzdCgidGVzdDAwMiIsICJYLmphdmEiKTsvLyRO
T04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDAzKCkgewor
CQlydW5UZXN0KCJ0ZXN0MDAzIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDQoKSB7CisJCXJ1blRlc3QoInRlc3QwMDQiLCAi
WC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQg
dGVzdDAwNSgpIHsKKwkJcnVuVGVzdCgidGVzdDAwNSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDA2KCkgeworCQlydW5UZXN0
KCJ0ZXN0MDA2IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKwor
CXB1YmxpYyB2b2lkIHRlc3QwMDcoKSB7CisJCXJ1blRlc3QoInRlc3QwMDciLCAiWC5qYXZhIik7
Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAwOCgp
IHsKKwkJcnVuVGVzdCgidGVzdDAwOCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1O
TFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDA5KCkgeworCQlydW5UZXN0KCJ0ZXN0MDA5
IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2
b2lkIHRlc3QwMTAoKSB7CisJCXJ1blRlc3QoInRlc3QwMTAiLCAiWC5qYXZhIik7Ly8kTk9OLU5M
Uy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxMSgpIHsKKwkJcnVu
VGVzdCgidGVzdDAxMSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9
CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDEyKCkgeworCQlydW5UZXN0KCJ0ZXN0MDEyIiwgIlguamF2
YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3Qw
MTMoKSB7CisJCXJ1blRlc3QoInRlc3QwMTMiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyRO
T04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxNCgpIHsKKwkJcnVuVGVzdCgidGVz
dDAxNCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJs
aWMgdm9pZCB0ZXN0MDE1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE1IiwgIlguamF2YSIpOy8vJE5P
Ti1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMTYoKSB7CisJ
CXJ1blRlc3QoInRlc3QwMTYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxNygpIHsKKwkJcnVuVGVzdCgidGVzdDAxNyIsICJY
LmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0
ZXN0MDE4KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE4IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQg
Ly8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMTkoKSB7CisJCXJ1blRlc3Qo
InRlc3QwMTkiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJ
cHVibGljIHZvaWQgdGVzdDAyMCgpIHsKKwkJcnVuVGVzdCgidGVzdDAyMCIsICJYLmphdmEiKTsv
LyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDIxKCkg
eworCQlydW5UZXN0KCJ0ZXN0MDIxIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5M
Uy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjIoKSB7CisJCXJ1blRlc3QoInRlc3QwMjIi
LCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZv
aWQgdGVzdDAyMygpIHsKKwkJcnVuVGVzdCgidGVzdDAyMyIsICJYLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI0KCkgeworCQlydW5U
ZXN0KCJ0ZXN0MDI0IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0K
KworCXB1YmxpYyB2b2lkIHRlc3QwMjUoKSB7CisJCXJ1blRlc3QoInRlc3QwMjUiLCAiWC5qYXZh
Iik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAy
NigpIHsKKwkJcnVuVGVzdCgidGVzdDAyNiIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5P
Ti1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI3KCkgeworCQlydW5UZXN0KCJ0ZXN0
MDI3IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1Ymxp
YyB2b2lkIHRlc3QwMjgoKSB7CisJCXJ1blRlc3QoInRlc3QwMjgiLCAiWC5qYXZhIik7Ly8kTk9O
LU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyOSgpIHsKKwkJ
cnVuVGVzdCgidGVzdDAyOSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQK
Kwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDMwKCkgeworCQlydW5UZXN0KCJ0ZXN0MDMwIiwgIlgu
amF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRl
c3QwMzEoKSB7CisJCXJ1blRlc3QoInRlc3QwMzEiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzMigpIHsKKwkJcnVuVGVzdCgi
dGVzdDAzMiIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlw
dWJsaWMgdm9pZCB0ZXN0MDMzKCkgeworCQlydW5UZXN0KCJ0ZXN0MDMzIiwgIlguamF2YSIpOy8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzQoKSB7
CisJCXJ1blRlc3QoInRlc3QwMzQiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxT
LTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNSgpIHsKKwkJcnVuVGVzdCgidGVzdDAzNSIs
ICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9p
ZCB0ZXN0MDM2KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM2IiwgIlguamF2YSIpOy8vJE5PTi1OTFMt
MSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzcoKSB7CisJCXJ1blRl
c3QoInRlc3QwMzciLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQor
CisJcHVibGljIHZvaWQgdGVzdDAzOCgpIHsKKwkJcnVuVGVzdCgidGVzdDAzOCIsICJYLmphdmEi
KTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDM5
KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM5IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9O
LU5MUy0yJAorCX0KK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4
Ly5jbGFzc3BhdGggYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySlNSMzA4Ly5jbGFzc3BhdGgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMC4uZTRhYzYxMQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvLmNsYXNzcGF0aApAQCAtMCwwICsx
LDYgQEAKKzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+Cis8Y2xhc3NwYXRo
PgorICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPSJzcmMiIHBhdGg9IiIvPgorICAgIDxjbGFzc3Bh
dGhlbnRyeSBraW5kPSJ2YXIiIHBhdGg9IkpDTDE4X0xJQiIgc291cmNlcGF0aD0iSkNMMThfU1JD
IiByb290cGF0aD0iSkNMX1NSQzE4Uk9PVCIvPgorICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPSJv
dXRwdXQiIHBhdGg9ImJpbiIvPgorPC9jbGFzc3BhdGg+ClwgTm8gbmV3bGluZSBhdCBlbmQgb2Yg
ZmlsZQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpTUjMwOC8ucHJvamVjdCBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvLnByb2plY3QKbmV3IGZpbGUgbW9kZSAx
MDA2NDQKaW5kZXggMDAwMDAwMC4uODk5OWFkMQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvLnByb2pl
Y3QKQEAgLTAsMCArMSwxNyBAQAorPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgi
Pz4KKzxwcm9qZWN0RGVzY3JpcHRpb24+CisJPG5hbWU+Rm9ybWF0dGVySlNSMzA4PC9uYW1lPgor
CTxjb21tZW50PjwvY29tbWVudD4KKwk8cHJvamVjdHM+CisJPC9wcm9qZWN0cz4KKwk8YnVpbGRT
cGVjPgorCQk8YnVpbGRDb21tYW5kPgorCQkJPG5hbWU+b3JnLmVjbGlwc2UuamR0LmNvcmUuamF2
YWJ1aWxkZXI8L25hbWU+CisJCQk8YXJndW1lbnRzPgorCQkJPC9hcmd1bWVudHM+CisJCTwvYnVp
bGRDb21tYW5kPgorCTwvYnVpbGRTcGVjPgorCTxuYXR1cmVzPgorCQk8bmF0dXJlPm9yZy5lY2xp
cHNlLmpkdC5jb3JlLmphdmFuYXR1cmU8L25hdHVyZT4KKwk8L25hdHVyZXM+Cis8L3Byb2plY3RE
ZXNjcmlwdGlvbj4KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwMC9JX2luLmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDAv
SV9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjA0YzdjOGEKLS0t
IC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDAvSV9pbi5qYXZhCkBAIC0wLDAgKzEsMTIgQEAKK3B1
YmxpYyBpbnRlcmZhY2UgSTxVIGV4dGVuZHMgSjw/IGV4dGVuZHMgSTxVPj4+IHsKK30KK2ludGVy
ZmFjZSBKPFQgZXh0ZW5kcyBJPD8gZXh0ZW5kcyBKPFQ+Pj4geworfQorY2xhc3MgQ0k8VSBleHRl
bmRzIENKPFQsIFU+ICYgQE1hcmtlciBKPEBNYXJrZXIgVD4sCisJCQlUIGV4dGVuZHMgQ0k8VSwg
VD4gJiBATWFya2VyIEk8VT4+CisJaW1wbGVtZW50cyBJPFU+IHsKK30KK2NsYXNzIENKPFQgZXh0
ZW5kcyBDSTxVLCBUPiAmIEBNYXJrZXIgSTxATWFya2VyIFU+LAorCQkJVSBleHRlbmRzIENKPFQs
IFU+ICYgSjxUPj4KKwlpbXBsZW1lbnRzIEo8VD4geworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDAw
L0lfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySlNSMzA4L3Rlc3QwMDAvSV9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwLi4yMmY1NjA0Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDAwL0lfb3V0
LmphdmEKQEAgLTAsMCArMSwxMyBAQAorcHVibGljIGludGVyZmFjZSBJPFUgZXh0ZW5kcyBKPD8g
ZXh0ZW5kcyBJPFU+Pj4geworfQorCitpbnRlcmZhY2UgSjxUIGV4dGVuZHMgSTw/IGV4dGVuZHMg
SjxUPj4+IHsKK30KKworY2xhc3MgQ0k8VSBleHRlbmRzIENKPFQsIFU+ICYgQE1hcmtlciBKPEBN
YXJrZXIgVD4sIFQgZXh0ZW5kcyBDSTxVLCBUPiAmIEBNYXJrZXIgSTxVPj4KKwkJaW1wbGVtZW50
cyBJPFU+IHsKK30KKworY2xhc3MgQ0o8VCBleHRlbmRzIENJPFUsIFQ+ICYgQE1hcmtlciBJPEBN
YXJrZXIgVT4sIFUgZXh0ZW5kcyBDSjxULCBVPiAmIEo8VD4+CisJCWltcGxlbWVudHMgSjxUPiB7
Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDEvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDAxL1hfaW4uamF2
YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5hMjdmZDkyCi0tLSAvZGV2L251
bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpTUjMwOC90ZXN0MDAxL1hfaW4uamF2YQpAQCAtMCwwICsxLDkgQEAKK3B1YmxpYyBjbGFz
cyBYPEU+IHsKKyAgY2xhc3MgWSB7CisgICAgRSBlOworICAgIEUgZ2V0T3RoZXJFbGVtZW50KE9i
amVjdCBvdGhlcikgeworICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBATWFya2VyIFg8Pz4u
WSkpIHt9OworICAgICAgcmV0dXJuIG51bGw7CisgICAgfQorICB9Cit9CmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4
L3Rlc3QwMDEvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwMS9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLmEyODNiODcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3Qw
MDEvWF9vdXQuamF2YQpAQCAtMCwwICsxLDEyIEBACitwdWJsaWMgY2xhc3MgWDxFPiB7CisJY2xh
c3MgWSB7CisJCUUgZTsKKworCQlFIGdldE90aGVyRWxlbWVudChPYmplY3Qgb3RoZXIpIHsKKwkJ
CWlmICghKG90aGVyIGluc3RhbmNlb2YgQE1hcmtlciBYPD8+LlkpKSB7CisJCQl9CisJCQk7CisJ
CQlyZXR1cm4gbnVsbDsKKwkJfQorCX0KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwMi9YX2luLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SlNSMzA4L3Rlc3QwMDIvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLmI5ZmRjZDIKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDIvWF9pbi5qYXZhCkBAIC0w
LDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIEBNYXJrZXIgaW50IHg7CisgICAgWm9y
ayB6OworfQorQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCAoamF2YS5sYW5nLmFubm90YXRp
b24uRWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtlciB7fQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpTUjMwOC90ZXN0MDAyL1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDIvWF9vdXQuamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kYTlhZDUxCi0tLSAvZGV2L251bGwKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDAyL1hfb3V0LmphdmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7
CisJQE1hcmtlcgorCWludCB4OworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9u
LlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikK
K0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwMy9YX2luLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNS
MzA4L3Rlc3QwMDMvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjMzYTk5NmYKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDMvWF9pbi5qYXZhCkBAIC0wLDAg
KzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIEBNYXJrZXIgPFQ+IGludCB4KCkgeyByZXR1
cm4gMTA7IH07CisgICAgWm9yayB6OworfQoraW50ZXJmYWNlIFpvcmsge30KK0BpbnRlcmZhY2Ug
TWFya2VyIHt9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDMvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwMy9Y
X291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmQwMjQyNzcKLS0t
IC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDMvWF9vdXQuamF2YQpAQCAtMCwwICsxLDE0IEBACitw
dWJsaWMgY2xhc3MgWCB7CisJQE1hcmtlcgorCTxUPiBpbnQgeCgpIHsKKwkJcmV0dXJuIDEwOwor
CX07CisKKwlab3JrIHo7Cit9CisKK2ludGVyZmFjZSBab3JrIHsKK30KKworQGludGVyZmFjZSBN
YXJrZXIgeworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
d29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDA0L1hfaW4uamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwNC9Y
X2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uY2ZmMzg4NAotLS0g
L2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwNC9YX2luLmphdmEKQEAgLTAsMCArMSw4IEBACitwdWJs
aWMgY2xhc3MgWCB7CisgICAgaW50IHgoQE1hcmtlcjEgaW50IFtdIEBNYXJrZXIyIC4uLiBwKSB7
IHJldHVybiAxMDsgfTsKKyAgICBab3JrIHo7Cit9CitpbnRlcmZhY2UgWm9yayB7fQorQGludGVy
ZmFjZSBNYXJrZXIxIHt9CitAaW50ZXJmYWNlIE1hcmtlcjIge30KKwpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDA0L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDQvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwLi4zYmYzODUzCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDA0
L1hfb3V0LmphdmEKQEAgLTAsMCArMSwxNiBAQAorcHVibGljIGNsYXNzIFggeworCWludCB4KEBN
YXJrZXIxIGludFtdIEBNYXJrZXIyLi4uIHApIHsKKwkJcmV0dXJuIDEwOworCX07CisKKwlab3Jr
IHo7Cit9CisKK2ludGVyZmFjZSBab3JrIHsKK30KKworQGludGVyZmFjZSBNYXJrZXIxIHsKK30K
KworQGludGVyZmFjZSBNYXJrZXIyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwNS9YX2luLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SlNSMzA4L3Rlc3QwMDUvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLmI0NTI5ZGIKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDUvWF9pbi5qYXZhCkBAIC0w
LDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIGludCB4KEBNYXJrZXIgaW50IC4uLiBw
KSB7IHJldHVybiAxMDsgfTsKKyAgICBab3JrIHo7Cit9CitAamF2YS5sYW5nLmFubm90YXRpb24u
VGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikK
K0BpbnRlcmZhY2UgTWFya2VyIHt9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDUvWF9vdXQuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1Iz
MDgvdGVzdDAwNS9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LmViYzE5YTMKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDUvWF9vdXQuamF2YQpAQCAtMCww
ICsxLDExIEBACitwdWJsaWMgY2xhc3MgWCB7CisJaW50IHgoQE1hcmtlciBpbnQuLi4gcCkgewor
CQlyZXR1cm4gMTA7CisJfTsKKworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9u
LlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikK
K0BpbnRlcmZhY2UgTWFya2VyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwNi9YX2luLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNS
MzA4L3Rlc3QwMDYvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjBiNDNlOTYKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDYvWF9pbi5qYXZhCkBAIC0wLDAg
KzEsNiBAQAorcHVibGljIGNsYXNzIFggeworICAgIEBNYXJrZXIgaW50IHgoKSB7IHJldHVybiAx
MDsgfTsKKyAgICBab3JrIHo7Cit9CitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZh
LmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2Ug
TWFya2VyIHt9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDYvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwNi9Y
X291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjc3MTg4YzcKLS0t
IC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDYvWF9vdXQuamF2YQpAQCAtMCwwICsxLDEyIEBACitw
dWJsaWMgY2xhc3MgWCB7CisJQE1hcmtlcgorCWludCB4KCkgeworCQlyZXR1cm4gMTA7CisJfTsK
KworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcu
YW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2Vy
IHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwNy9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDcvWF9pbi5q
YXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmQ3ZDVjNmIKLS0tIC9kZXYv
bnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySlNSMzA4L3Rlc3QwMDcvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNs
YXNzIFggeworICAgIGludCB4KEBNYXJrZXIgaW50IHApIHsgcmV0dXJuIDEwOyB9OworICAgIFpv
cmsgejsKK30KK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0
aW9uLkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIge30KZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKU1IzMDgvdGVzdDAwNy9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDA3L1hfb3V0LmphdmEKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMmRlMWQ3YQotLS0gL2Rldi9udWxsCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJK
U1IzMDgvdGVzdDAwNy9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTEgQEAKK3B1YmxpYyBjbGFzcyBY
IHsKKwlpbnQgeChATWFya2VyIGludCBwKSB7CisJCXJldHVybiAxMDsKKwl9OworCisJWm9yayB6
OworfQorCitAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KGphdmEubGFuZy5hbm5vdGF0aW9u
LkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBNYXJrZXIgeworfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpTUjMwOC90ZXN0MDA4L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwOC9YX2luLmphdmEKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYzgxNDJiOAotLS0gL2Rldi9udWxsCisrKyBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1Iz
MDgvdGVzdDAwOC9YX2luLmphdmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7Cisg
ICAgaW50IHgoKSB7CisgICAgICAgIHRyeSB7CisgICAgICAgIH0gY2F0Y2ggKEBNYXJrZXIgTnVs
bFBvaW50ZXJFeGNlcHRpb24gfCBATWFya2VyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlv
biBlKSB7CisgICAgICAgIH0KKyAgICAgICAgcmV0dXJuIDEwOworICAgIH0KKyAgICBab3JrIHo7
Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMDgvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwOC9YX291dC5q
YXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmM5OTQzYmQKLS0tIC9kZXYv
bnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySlNSMzA4L3Rlc3QwMDgvWF9vdXQuamF2YQpAQCAtMCwwICsxLDExIEBACitwdWJsaWMg
Y2xhc3MgWCB7CisJaW50IHgoKSB7CisJCXRyeSB7CisJCX0gY2F0Y2ggKEBNYXJrZXIgTnVsbFBv
aW50ZXJFeGNlcHRpb24KKwkJCQl8IEBNYXJrZXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0
aW9uIGUpIHsKKwkJfQorCQlyZXR1cm4gMTA7CisJfQorCisJWm9yayB6OworfQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDA5L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwOS9YX2luLmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYmUwYjZhNAotLS0gL2Rldi9udWxsCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dDAwOS9YX2luLmphdmEKQEAgLTAsMCArMSwxMSBAQAorcHVibGljIGNsYXNzIFggeworICAgIGlu
dCB4KCkgeworICAgICAgICBATWFya2VyIGludCBwOworICAgICAgICBmaW5hbCBATWFya2VyIGlu
dCBxOworICAgICAgICBATWFya2VyIGZpbmFsIGludCByOworICAgICAgICByZXR1cm4gMTA7Cisg
ICAgfQorICAgIFpvcmsgejsKK30KK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEu
bGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVSKQorQGludGVyZmFjZSBN
YXJrZXIge30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwOS9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDA5L1hf
b3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMDIxYzA4NQotLS0g
L2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAwOS9YX291dC5qYXZhCkBAIC0wLDAgKzEsMTcgQEAKK3B1
YmxpYyBjbGFzcyBYIHsKKwlpbnQgeCgpIHsKKwkJQE1hcmtlcgorCQlpbnQgcDsKKwkJZmluYWwg
QE1hcmtlcgorCQlpbnQgcTsKKwkJQE1hcmtlcgorCQlmaW5hbCBpbnQgcjsKKwkJcmV0dXJuIDEw
OworCX0KKworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZh
LmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2Ug
TWFya2VyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxMC9YX2luLmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTAv
WF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjhiNDZlNGYKLS0t
IC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3Bh
Y2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTAvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMiBAQAorcHVi
bGljIGNsYXNzIFggZXh0ZW5kcyBATWFya2VyIEBTaW5nbGVNZW1iZXIoMCkgQE5vcm1hbChWYWx1
ZSA9IDApIE9iamVjdCB7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTAvWF9vdXQuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgv
dGVzdDAxMC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjhi
NDZlNGYKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTAvWF9vdXQuamF2YQpAQCAtMCwwICsx
LDIgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgQE1hcmtlciBAU2luZ2xlTWVtYmVyKDApIEBO
b3JtYWwoVmFsdWUgPSAwKSBPYmplY3QgeworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDExL1hfaW4u
amF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0
ZXJKU1IzMDgvdGVzdDAxMS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMC4uNTExOWMzMgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxMS9YX2luLmphdmEKQEAg
LTAsMCArMSwxMCBAQAorcHVibGljIGNsYXNzIFggeworICAgIGludCB4KCkgeworICAgICAgICB0
cnkgKEBNYXJrZXIgSW50ZWdlciBwID0gbnVsbDsgZmluYWwgQE1hcmtlciBJbnRlZ2VyIHEgPSBu
dWxsOyBATWFya2VyIGZpbmFsIEludGVnZXIgciA9IG51bGwpIHsKKyAgICAgICAgfQorICAgICAg
ICByZXR1cm4gMTA7CisgICAgfQorICAgIFpvcmsgejsKK30KK0BqYXZhLmxhbmcuYW5ub3RhdGlv
bi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfUEFSQU1FVEVS
KQorQGludGVyZmFjZSBNYXJrZXIge30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxMS9YX291dC5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDExL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MC4uMmI1NDJlOAotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxMS9YX291dC5qYXZhCkBAIC0w
LDAgKzEsMTYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlpbnQgeCgpIHsKKwkJdHJ5IChATWFya2Vy
CisJCUludGVnZXIgcCA9IG51bGw7IGZpbmFsIEBNYXJrZXIKKwkJSW50ZWdlciBxID0gbnVsbDsg
QE1hcmtlcgorCQlmaW5hbCBJbnRlZ2VyIHIgPSBudWxsKSB7CisJCX0KKwkJcmV0dXJuIDEwOwor
CX0KKworCVpvcmsgejsKK30KKworQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxh
bmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BBUkFNRVRFUikKK0BpbnRlcmZhY2UgTWFy
a2VyIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxMi9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTIvWF9p
bi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjVhNzU4OWYKLS0tIC9k
ZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySlNSMzA4L3Rlc3QwMTIvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMTEgQEAKK3B1Ymxp
YyBjbGFzcyBYIHsKKyAgICBpbnQgeCgpIHsKKyAgICAgICAgZm9yIChATWFya2VyIGludCBpOiBu
ZXcgaW50WzNdKSB7fQorICAgICAgICBmb3IgKGZpbmFsIEBNYXJrZXIgaW50IGk6IG5ldyBpbnRb
M10pIHt9CisgICAgICAgIGZvciAoQE1hcmtlciBmaW5hbCBpbnQgaTogbmV3IGludFszXSkge30K
KyAgICAgICAgcmV0dXJuIDEwOworICAgIH0KKyAgICBab3JrIHo7Cit9CitAamF2YS5sYW5nLmFu
bm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1BB
UkFNRVRFUikKK0BpbnRlcmZhY2UgTWFya2VyIHt9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTIvWF9v
dXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKU1IzMDgvdGVzdDAxMi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAuLmY3ZjAzYjcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTIvWF9vdXQuamF2
YQpAQCAtMCwwICsxLDIwIEBACitwdWJsaWMgY2xhc3MgWCB7CisJaW50IHgoKSB7CisJCWZvciAo
QE1hcmtlcgorCQlpbnQgaSA6IG5ldyBpbnRbM10pIHsKKwkJfQorCQlmb3IgKGZpbmFsIEBNYXJr
ZXIKKwkJaW50IGkgOiBuZXcgaW50WzNdKSB7CisJCX0KKwkJZm9yIChATWFya2VyCisJCWZpbmFs
IGludCBpIDogbmV3IGludFszXSkgeworCQl9CisJCXJldHVybiAxMDsKKwl9CisKKwlab3JrIHo7
Cit9CisKK0BqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQoamF2YS5sYW5nLmFubm90YXRpb24u
RWxlbWVudFR5cGUuVFlQRV9QQVJBTUVURVIpCitAaW50ZXJmYWNlIE1hcmtlciB7Cit9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySlNSMzA4L3Rlc3QwMTMvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDEzL1hfaW4uamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kZGQ5NjI1Ci0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMw
OC90ZXN0MDEzL1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBAaW50ZXJmYWNlIFgg
eyAKKwlwdWJsaWMgQE1hcmtlciBTdHJpbmcgdmFsdWUoKTsgCisJQE1hcmtlciBTdHJpbmcgdmFs
dWUyKCk7IAorCUBNYXJrZXIgcHVibGljIFN0cmluZyB2YWx1ZTMoKTsgCit9CitAaW50ZXJmYWNl
IE1hcmtlciB7fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
d29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDEzL1hfb3V0LmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTMv
WF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4yMTQzYTA3Ci0t
LSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDEzL1hfb3V0LmphdmEKQEAgLTAsMCArMSwxMyBAQAor
cHVibGljIEBpbnRlcmZhY2UgWCB7CisJcHVibGljIEBNYXJrZXIKKwlTdHJpbmcgdmFsdWUoKTsK
KworCUBNYXJrZXIKKwlTdHJpbmcgdmFsdWUyKCk7CisKKwlATWFya2VyCisJcHVibGljIFN0cmlu
ZyB2YWx1ZTMoKTsKK30KKworQGludGVyZmFjZSBNYXJrZXIgeworfQpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDE0L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNC9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMC4uNjcxNTEwNgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNC9Y
X2luLmphdmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgY2xhc3MgWCB7IAorCXB1YmxpYyB2b2lk
IHZhbHVlKCkgeworCQlPYmplY3QgbyA9IEBNYXJrZXIgaW50LmNsYXNzOworCQlPYmplY3QgbzIg
PSBATWFya2VyIGludCBATWFya2VyW10gW10gQE1hcmtlcltdLmNsYXNzOworICAgfQorfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpTUjMwOC90ZXN0MDE0L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTQvWF9vdXQuamF2YQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5lOGEzYzAwCi0tLSAvZGV2L251bGwKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDE0L1hfb3V0LmphdmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgY2xhc3MgWCB7
CisJcHVibGljIHZvaWQgdmFsdWUoKSB7CisJCU9iamVjdCBvID0gQE1hcmtlciBpbnQuY2xhc3M7
CisJCU9iamVjdCBvMiA9IEBNYXJrZXIgaW50IEBNYXJrZXJbXSBbXSBATWFya2VyW10uY2xhc3M7
CisgICB9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTUvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE1L1hf
aW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4zMjRhMTU3Ci0tLSAv
ZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE1L1hfaW4uamF2YQpAQCAtMCwwICsxLDkgQEAKK2ludGVy
ZmFjZSBJIHsKKyAgICBPYmplY3QgY29weShpbnQgW10gaWEpOworfQorcHVibGljIGNsYXNzIFgg
IHsKKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykgeworICAgICAg
ICBJIGkgPSBATWFya2VyIGludCBATWFya2VyIFtdOjo8U3RyaW5nPmNsb25lOworICAgICAgICBa
b3JrIHo7CisgICAgfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE1L1hfb3V0LmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3QwMTUvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43MGZl
NWEwCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
d29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE1L1hfb3V0LmphdmEKQEAgLTAsMCArMSwx
MCBAQAoraW50ZXJmYWNlIEkgeworCU9iamVjdCBjb3B5KGludFtdIGlhKTsKK30KKworcHVibGlj
IGNsYXNzIFggeworCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKKwkJ
SSBpID0gQE1hcmtlciBpbnQgQE1hcmtlcltdOjo8U3RyaW5nPiBjbG9uZTsKKwkJWm9yayB6Owor
CX0KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNi9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTYvWF9pbi5q
YXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmQ5ZjkzOWIKLS0tIC9kZXYv
bnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySlNSMzA4L3Rlc3QwMTYvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNyBAQAorcHVibGljIGNs
YXNzIFggIHsKKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykgewor
ICAgICAgICBpbnQgaSBbXSA9IG5ldyBATWFya2VyIGludCBATWFya2VyIFs0XTsKKyAgICAgICAg
aW50IGogW10gPSBuZXcgQE1hcmtlciBpbnQgQE1hcmtlciBbXSB7IDEwIH07CisgICAgICAgIFpv
cmsgejsKKyAgICB9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTYvWF9vdXQuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dDAxNi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmM1OGRh
NGEKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTYvWF9vdXQuamF2YQpAQCAtMCwwICsxLDcg
QEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBh
cmdzKSB7CisJCWludCBpW10gPSBuZXcgQE1hcmtlciBpbnQgQE1hcmtlcls0XTsKKwkJaW50IGpb
XSA9IG5ldyBATWFya2VyIGludCBATWFya2VyW10geyAxMCB9OworCQlab3JrIHo7CisJfQorfQpk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpTUjMwOC90ZXN0MDE3L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxNy9YX2luLmphdmEKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYWU0ZTlhZgotLS0gL2Rldi9udWxsCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJK
U1IzMDgvdGVzdDAxNy9YX2luLmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCAg
eworICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7CisgICAgICAg
IGludCBpID0gKEBNYXJrZXIgaW50KSAwOworICAgICAgICBpbnQgaiBbXSA9IChATWFya2VyIGlu
dCBATWFya2VyIFtdKSBudWxsOworICAgICAgICBab3JrIHo7CisgICAgfQorfQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDE3L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTcvWF9vdXQuamF2YQpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kOTE3YjA5Ci0tLSAvZGV2L251bGwKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDE3L1hfb3V0LmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCB7CisJcHVi
bGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgeworCQlpbnQgaSA9IChATWFya2Vy
IGludCkgMDsKKwkJaW50IGpbXSA9IChATWFya2VyIGludCBATWFya2VyW10pIG51bGw7CisJCVpv
cmsgejsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTgvWF9pbi5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE4
L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4xMTAyOGYxCi0t
LSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE4L1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1
YmxpYyBjbGFzcyBYICB7CisgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFy
Z3MpIHsKKyAgICAgICAgaWYgKGFyZ3MgaW5zdGFuY2VvZiBAUmVhZG9ubHkgU3RyaW5nKSB7Cisg
ICAgICAgIH0KKyAgICB9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTgvWF9vdXQuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgv
dGVzdDAxOC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjQy
Yzg5MDUKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTgvWF9vdXQuamF2YQpAQCAtMCwwICsx
LDYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdb
XSBhcmdzKSB7CisJCWlmIChhcmdzIGluc3RhbmNlb2YgQFJlYWRvbmx5IFN0cmluZykgeworCQl9
CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29y
a3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDE5L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAxOS9YX2lu
LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYTY2NWVjYwotLS0gL2Rl
di9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKU1IzMDgvdGVzdDAxOS9YX2luLmphdmEKQEAgLTAsMCArMSw0IEBACitwdWJsaWMg
Y2xhc3MgWCBleHRlbmRzIFk8QE1hcmtlciBJbnRlZ2VyLCBTdHJpbmc+IHt9CitjbGFzcyBZPFQs
IFY+IHsKKyAgICBab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTkvWF9vdXQuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1Iz
MDgvdGVzdDAxOS9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjYwNjIxNTIKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMTkvWF9vdXQuamF2YQpAQCAtMCww
ICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWTxATWFya2VyIEludGVnZXIsIFN0cmlu
Zz4geworfQorCitjbGFzcyBZPFQsIFY+IHsKKwlab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3QwMjAvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDIwL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwLi4wZTFjZWQ3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDIwL1hf
aW4uamF2YQpAQCAtMCwwICsxLDQgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWTxATWFya2Vy
IEludGVnZXI+IHt9CitjbGFzcyBZPFQ+IHsKKyAgICBab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4
L3Rlc3QwMjAvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyMC9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLjY3MmI5YzUKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3Qw
MjAvWF9vdXQuamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgWTxA
TWFya2VyIEludGVnZXI+IHsKK30KKworY2xhc3MgWTxUPiB7CisJWm9yayB6OworfQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpTUjMwOC90ZXN0MDIxL1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyMS9YX2luLmphdmEKbmV3IGZpbGUg
bW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYzZhNDkxZQotLS0gL2Rldi9udWxsCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgv
dGVzdDAyMS9YX2luLmphdmEKQEAgLTAsMCArMSw0IEBACitwdWJsaWMgY2xhc3MgWDxUIGV4dGVu
ZHMgT2JqZWN0ICYgQ29tcGFyYWJsZTw/IHN1cGVyIEBNYXJrZXIgU3RyaW5nPj4ge30KK2NsYXNz
IFk8VD4geworICAgIFpvcmsgejsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyMS9YX291dC5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDIxL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MC4uN2FmOTA5NwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyMS9YX291dC5qYXZhCkBAIC0w
LDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFg8VCBleHRlbmRzIE9iamVjdCAmIENvbXBhcmFibGU8
PyBzdXBlciBATWFya2VyIFN0cmluZz4+IHsKK30KKworY2xhc3MgWTxUPiB7CisJWm9yayB6Owor
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0MDIyL1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyMi9YX2luLmphdmEK
bmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNjU1MzI3MAotLS0gL2Rldi9udWxs
CisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0
ZXJKU1IzMDgvdGVzdDAyMi9YX2luLmphdmEKQEAgLTAsMCArMSw0IEBACitwdWJsaWMgY2xhc3Mg
WDxBIGV4dGVuZHMgWDxYPFg8QE1hcmtlciBTdHJpbmc+Pj4+IHt9CitjbGFzcyBZPFQ+IHsKKyAg
ICBab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjIvWF9vdXQuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAy
Mi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmNlZWNhOWUK
LS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjIvWF9vdXQuamF2YQpAQCAtMCwwICsxLDYgQEAK
K3B1YmxpYyBjbGFzcyBYPEEgZXh0ZW5kcyBYPFg8WDxATWFya2VyIFN0cmluZz4+Pj4geworfQor
CitjbGFzcyBZPFQ+IHsKKwlab3JrIHo7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjMvWF9pbi5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpTUjMwOC90ZXN0MDIzL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwLi44ODM0ZGQxCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVz
dHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDIzL1hfaW4uamF2YQpAQCAt
MCwwICsxLDQgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwl2b2lkIGZvbyhNYXA8QE1hcmtlciA/IHN1
cGVyIEBNYXJrZXIgT2JqZWN0LCBATWFya2VyID8gZXh0ZW5kcyBATWFya2VyIFN0cmluZz4gbSl7
fQorICAgdm9pZCBnb28oTWFwPEBNYXJrZXIgPyBleHRlbmRzIEBNYXJrZXIgT2JqZWN0LCBATWFy
a2VyID8gc3VwZXIgQE1hcmtlciBTdHJpbmc+IG0pe30KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAy
My9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0MDIzL1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMC4uNDg0OTVmMQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyMy9YX291
dC5qYXZhCkBAIC0wLDAgKzEsOSBAQAorcHVibGljIGNsYXNzIFggeworCXZvaWQgZm9vKAorCQkJ
TWFwPEBNYXJrZXIgPyBzdXBlciBATWFya2VyIE9iamVjdCwgQE1hcmtlciA/IGV4dGVuZHMgQE1h
cmtlciBTdHJpbmc+IG0pIHsKKwl9CisKKwl2b2lkIGdvbygKKwkJCU1hcDxATWFya2VyID8gZXh0
ZW5kcyBATWFya2VyIE9iamVjdCwgQE1hcmtlciA/IHN1cGVyIEBNYXJrZXIgU3RyaW5nPiBtKSB7
CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29y
a3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI0L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyNC9YX2lu
LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNDI1ZDg3OAotLS0gL2Rl
di9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKU1IzMDgvdGVzdDAyNC9YX2luLmphdmEKQEAgLTAsMCArMSwzIEBACitwdWJsaWMg
Y2xhc3MgWCA8QE1hcmtlciBUIGV4dGVuZHMgQE1hcmtlciBZPEBNYXJrZXIgPz4sIEBNYXJrZXIg
USBleHRlbmRzIEBNYXJrZXIgSW50ZWdlcj4geworfQorY2xhc3MgWTxUPiB7fQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDI0L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjQvWF9vdXQuamF2YQpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi44MDg4M2Q5Ci0tLSAvZGV2L251bGwKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDI0L1hfb3V0LmphdmEKQEAgLTAsMCArMSw1IEBACitwdWJsaWMgY2xhc3MgWDxATWFya2Vy
IFQgZXh0ZW5kcyBATWFya2VyIFk8QE1hcmtlciA/PiwgQE1hcmtlciBRIGV4dGVuZHMgQE1hcmtl
ciBJbnRlZ2VyPiB7Cit9CisKK2NsYXNzIFk8VD4geworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI1
L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKU1IzMDgvdGVzdDAyNS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMC4uZjQ0OTE4MQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyNS9YX2luLmph
dmEKQEAgLTAsMCArMSw1IEBACitwdWJsaWMgY2xhc3MgWDxQLCBDPiB7CisgIHB1YmxpYyBYKCkg
eworICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBATWFya2VyIFgpKSB7fQorICB9Cit9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySlNSMzA4L3Rlc3QwMjUvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyNS9YX291dC5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjhlODIwOTQKLS0tIC9kZXYvbnVsbAorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNS
MzA4L3Rlc3QwMjUvWF9vdXQuamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYPFAs
IEM+IHsKKwlwdWJsaWMgWCgpIHsKKwkJaWYgKCEodGhpcyBpbnN0YW5jZW9mIEBNYXJrZXIgWCkp
IHsKKwkJfQorCX0KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyNi9YX2luLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3Qw
MjYvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjVhYzc3YzEK
LS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjYvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMTcgQEAK
K2ludGVyZmFjZSBJIHsKKyAgICB2b2lkIGZvbyhZPFN0cmluZz4uWiB6LCBpbnQgeCk7Cit9Citw
dWJsaWMgY2xhc3MgWCAgeworICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBh
cmdzKSB7CisgICAgICAgIEkgaSA9IFk8U3RyaW5nPi5ATWFya2VyIFo6OmZvbzsKKyAgICAgICAg
aS5mb28obmV3IFk8U3RyaW5nPigpLm5ldyBaKCksIDEwKTsgCisgICAgICAgIFpvcmsgejsKKyAg
ICB9Cit9CitjbGFzcyBZPFQ+IHsKKyAgICBjbGFzcyBaIHsKKyAgICAgICAgdm9pZCBmb28oaW50
IHgpIHsKKwkgICAgU3lzdGVtLm91dC5wcmludGxuKHgpOworICAgICAgICB9CisgICAgfQorfQpk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpTUjMwOC90ZXN0MDI2L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjYvWF9vdXQuamF2YQpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5kNWI5NDgzCi0tLSAvZGV2L251bGwK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpTUjMwOC90ZXN0MDI2L1hfb3V0LmphdmEKQEAgLTAsMCArMSwxOSBAQAoraW50ZXJmYWNlIEkg
eworCXZvaWQgZm9vKFk8U3RyaW5nPi5aIHosIGludCB4KTsKK30KKworcHVibGljIGNsYXNzIFgg
eworCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKKwkJSSBpID0gWTxT
dHJpbmc+LkBNYXJrZXIgWjo6Zm9vOworCQlpLmZvbyhuZXcgWTxTdHJpbmc+KCkubmV3IFooKSwg
MTApOworCQlab3JrIHo7CisJfQorfQorCitjbGFzcyBZPFQ+IHsKKwljbGFzcyBaIHsKKwkJdm9p
ZCBmb28oaW50IHgpIHsKKwkJCVN5c3RlbS5vdXQucHJpbnRsbih4KTsKKwkJfQorCX0KK30KZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKU1IzMDgvdGVzdDAyNy9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjcvWF9pbi5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjdmNWQ5OTAKLS0tIC9kZXYvbnVsbAorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNS
MzA4L3Rlc3QwMjcvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNyBAQAorcHVibGljIGNsYXNzIFggIHsK
KyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykgeworICAgICAgICBY
IFtdIHggPSBuZXcgQE1hcmtlciBYIEBNYXJrZXIgWzVdOworICAgICAgICBYIFtdIHgyID0gbmV3
IEBNYXJrZXIgWCBATWFya2VyIFtdIHsgbnVsbCB9OworICAgICAgICBab3JrIHo7CisgICAgfQor
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI3L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjcvWF9vdXQuamF2
YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43MTgxOTBhCi0tLSAvZGV2L251
bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpTUjMwOC90ZXN0MDI3L1hfb3V0LmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xh
c3MgWCB7CisJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgeworCQlYW10g
eCA9IG5ldyBATWFya2VyIFggQE1hcmtlcls1XTsKKwkJWFtdIHgyID0gbmV3IEBNYXJrZXIgWCBA
TWFya2VyW10geyBudWxsIH07CisJCVpvcmsgejsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3Qw
MjgvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI4L1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwLi4xMjI3YTYyCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI4L1hfaW4u
amF2YQpAQCAtMCwwICsxLDUgQEAKK3B1YmxpYyBjbGFzcyBYICB7CisgICAgcHVibGljIHN0YXRp
YyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHsKKyAgICAgICAgamF2YS51dGlsLk1hcC5FbnRy
eSBbXSBlID0gKGphdmEudXRpbC5NYXA8U3RyaW5nLCBTdHJpbmc+LkBNYXJrZXIgRW50cnkgW10p
IG51bGw7CisgICAgfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI4L1hfb3V0LmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3QwMjgvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4zNTQz
MzRkCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
d29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDI4L1hfb3V0LmphdmEKQEAgLTAsMCArMSw1
IEBACitwdWJsaWMgY2xhc3MgWCB7CisJcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10g
YXJncykgeworCQlqYXZhLnV0aWwuTWFwLkVudHJ5W10gZSA9IChqYXZhLnV0aWwuTWFwPFN0cmlu
ZywgU3RyaW5nPi5ATWFya2VyIEVudHJ5W10pIG51bGw7CisJfQorfQpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDI5L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyOS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMC4uN2QwNDgwZgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAyOS9Y
X2luLmphdmEKQEAgLTAsMCArMSw1IEBACitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Citp
bXBvcnQgamF2YS51dGlsLkxpc3Q7CitwdWJsaWMgY2xhc3MgWDxUIGV4dGVuZHMgQ29tcGFyYWJs
ZTxUPiAmIFNlcmlhbGl6YWJsZT4geworCXZvaWQgZm9vKExpc3Q8PyBleHRlbmRzIEBNYXJrZXIg
Q29tcGFyYWJsZTxUPj4gcCkge30gCit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjkvWF9vdXQuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJK
U1IzMDgvdGVzdDAyOS9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLjg1OTU2MTQKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMjkvWF9vdXQuamF2YQpAQCAt
MCwwICsxLDcgQEAKK2ltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2ltcG9ydCBqYXZhLnV0
aWwuTGlzdDsKKworcHVibGljIGNsYXNzIFg8VCBleHRlbmRzIENvbXBhcmFibGU8VD4gJiBTZXJp
YWxpemFibGU+IHsKKwl2b2lkIGZvbyhMaXN0PD8gZXh0ZW5kcyBATWFya2VyIENvbXBhcmFibGU8
VD4+IHApIHsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzAvWF9pbi5qYXZhIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0
MDMwL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi42OGQxOWU2
Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29y
a3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDMwL1hfaW4uamF2YQpAQCAtMCwwICsxLDYgQEAK
K2NsYXNzIEJhc2UgeworfQorY2xhc3MgRm9vPFUgZXh0ZW5kcyBCYXNlLCBWIGV4dGVuZHMgQmFy
PFUsIEBNYXJrZXIgRm9vPFUsIFY+Pj4geworfQorY2xhc3MgQmFyPEUgZXh0ZW5kcyBCYXNlLCBG
IGV4dGVuZHMgRm9vPEUsIEBNYXJrZXIgQmFyPEUsIEY+Pj4geworfQpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDMwL1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzAvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwLi4zYzNlMmMyCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDMw
L1hfb3V0LmphdmEKQEAgLTAsMCArMSw4IEBACitjbGFzcyBCYXNlIHsKK30KKworY2xhc3MgRm9v
PFUgZXh0ZW5kcyBCYXNlLCBWIGV4dGVuZHMgQmFyPFUsIEBNYXJrZXIgRm9vPFUsIFY+Pj4gewor
fQorCitjbGFzcyBCYXI8RSBleHRlbmRzIEJhc2UsIEYgZXh0ZW5kcyBGb288RSwgQE1hcmtlciBC
YXI8RSwgRj4+PiB7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzEvWF9pbi5qYXZhIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0
MDMxL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi43NjNiNmEx
Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29y
a3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDMxL1hfaW4uamF2YQpAQCAtMCwwICsxLDIgQEAK
K3B1YmxpYyBjbGFzcyBYIGV4dGVuZHMgQE1hcmtlciBPYmplY3QgeworfQpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMw
OC90ZXN0MDMxL1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzEvWF9vdXQuamF2YQpuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwLi43NjNiNmExCi0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0
MDMxL1hfb3V0LmphdmEKQEAgLTAsMCArMSwyIEBACitwdWJsaWMgY2xhc3MgWCBleHRlbmRzIEBN
YXJrZXIgT2JqZWN0IHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzMi9YX2luLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3QwMzIvWF9pbi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjMwNmZi
NjMKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93
b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzIvWF9pbi5qYXZhCkBAIC0wLDAgKzEsNCBA
QAorcHVibGljIGNsYXNzIFggeworICAgIFggeCA9IG5ldyBATWFya2VyIFgoKTsKKyAgICBYIHkg
PSBuZXcgPFN0cmluZz4gQE1hcmtlciBYKCk7Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzIvWF9v
dXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKU1IzMDgvdGVzdDAzMi9YX291dC5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAuLmZiMWVhNDgKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzIvWF9vdXQuamF2
YQpAQCAtMCwwICsxLDQgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKwlYIHggPSBuZXcgQE1hcmtlciBY
KCk7CisJWCB5ID0gbmV3PFN0cmluZz4gQE1hcmtlciBYKCk7Cit9CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3QwMzMvWF9pbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDMzL1hfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwLi4yNmIxZmE3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDMzL1hf
aW4uamF2YQpAQCAtMCwwICsxLDYgQEAKK3B1YmxpYyBjbGFzcyBYIHsKKyAgICBjbGFzcyBZIHsK
KyAgICB9CisgICAgWSB5MSA9IG5ldyBATWFya2VyIFgoKS5uZXcgQE1hcmtlciBZKCk7CisgICAg
WSB5MiA9IG5ldyBATWFya2VyIFgoKS5uZXcgPFN0cmluZz4gQE1hcmtlciBZKCk7Cit9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0
dGVySlNSMzA4L3Rlc3QwMzMvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3Rz
Lm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzMy9YX291dC5qYXZhCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjBhOGYwY2MKLS0tIC9kZXYvbnVsbAorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNS
MzA4L3Rlc3QwMzMvWF9vdXQuamF2YQpAQCAtMCwwICsxLDcgQEAKK3B1YmxpYyBjbGFzcyBYIHsK
KwljbGFzcyBZIHsKKwl9CisKKwlZIHkxID0gbmV3IEBNYXJrZXIgWCgpLm5ldyBATWFya2VyIFko
KTsKKwlZIHkyID0gbmV3IEBNYXJrZXIgWCgpLm5ldzxTdHJpbmc+IEBNYXJrZXIgWSgpOworfQpk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zv
cm1hdHRlckpTUjMwOC90ZXN0MDM0L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNC9YX2luLmphdmEKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uYjRiYzQ0MwotLS0gL2Rldi9udWxsCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJK
U1IzMDgvdGVzdDAzNC9YX2luLmphdmEKQEAgLTAsMCArMSw3IEBACitwdWJsaWMgY2xhc3MgWCB7
CisgICAgWCB4OworICAgIGNsYXNzIFkgeworICAgIH0KKyAgICBZIHkxID0geC5uZXcgQE1hcmtl
ciBZKCk7CisgICAgWSB5MiA9IHgubmV3IDxTdHJpbmc+IEBNYXJrZXIgWSgpOworfQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRl
ckpTUjMwOC90ZXN0MDM0L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5t
b2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzQvWF9vdXQuamF2YQpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi4wNWI4YmQ3Ci0tLSAvZGV2L251bGwKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMw
OC90ZXN0MDM0L1hfb3V0LmphdmEKQEAgLTAsMCArMSw5IEBACitwdWJsaWMgY2xhc3MgWCB7CisJ
WCB4OworCisJY2xhc3MgWSB7CisJfQorCisJWSB5MSA9IHgubmV3IEBNYXJrZXIgWSgpOworCVkg
eTIgPSB4Lm5ldzxTdHJpbmc+IEBNYXJrZXIgWSgpOworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDM1
L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9G
b3JtYXR0ZXJKU1IzMDgvdGVzdDAzNS9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMC4uOTFhY2JjMwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNS9YX2luLmph
dmEKQEAgLTAsMCArMSwzIEBACitwdWJsaWMgY2xhc3MgWCB7CisgICAgdm9pZCBmb28oKSB0aHJv
d3MgQE1hcmtlciBOdWxsUG9pbnRlckV4Y2VwdGlvbiwgQE1hcmtlciBBcnJheUluZGV4T3V0T2ZC
b3VuZHNFeGNlcHRpb24ge30KK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNS9YX291dC5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMw
OC90ZXN0MDM1L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4u
Nzk5NGI0ZQotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1v
ZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNS9YX291dC5qYXZhCkBAIC0wLDAg
KzEsNSBAQAorcHVibGljIGNsYXNzIFggeworCXZvaWQgZm9vKCkgdGhyb3dzIEBNYXJrZXIgTnVs
bFBvaW50ZXJFeGNlcHRpb24sCisJCQlATWFya2VyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2Vw
dGlvbiB7CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDM2L1hfaW4uamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAz
Ni9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZmIwODQzOQot
LS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNi9YX2luLmphdmEKQEAgLTAsMCArMSw2IEBACitp
bnRlcmZhY2UgSSB7fQoraW50ZXJmYWNlIEoge30KK2ludGVyZmFjZSBLIGV4dGVuZHMgQE1hcmtl
ciBJLCBATWFya2VyIEoge30KK2ludGVyZmFjZSBMIHt9CitwdWJsaWMgY2xhc3MgWCBpbXBsZW1l
bnRzIEBNYXJrZXIgSywgQE1hcmtlciBMIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNi9YX291
dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1h
dHRlckpTUjMwOC90ZXN0MDM2L1hfb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMC4uYjEwNGUzMwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNi9YX291dC5qYXZh
CkBAIC0wLDAgKzEsMTQgQEAKK2ludGVyZmFjZSBJIHsKK30KKworaW50ZXJmYWNlIEogeworfQor
CitpbnRlcmZhY2UgSyBleHRlbmRzIEBNYXJrZXIgSSwgQE1hcmtlciBKIHsKK30KKworaW50ZXJm
YWNlIEwgeworfQorCitwdWJsaWMgY2xhc3MgWCBpbXBsZW1lbnRzIEBNYXJrZXIgSywgQE1hcmtl
ciBMIHsKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNy9YX2luLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzcvWF9p
bi5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjAzNGZjOGUKLS0tIC9k
ZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2Uv
Rm9ybWF0dGVySlNSMzA4L3Rlc3QwMzcvWF9pbi5qYXZhCkBAIC0wLDAgKzEsMTkgQEAKK2ludGVy
ZmFjZSBJIHsKKyAgICB2b2lkIGZvbyhpbnQgeCk7Cit9CitwdWJsaWMgY2xhc3MgWCAgeworICAg
IHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBbXSBhcmdzKSB7CisgICAgICAgIEkgaSA9
IEBNYXJrZXIgWS4gQE1hcmtlciBaIEBNYXJrZXIgW10gW10gQE1hcmtlciBbXSA6OmZvbzsKKyAg
ICAgICAgSSBpMiA9IEBWYWx1ZSgiSm9lIikgWS4gQFZhbHVlMihAVmFsdWUoIkpvZSIpKSBATWFy
a2VyIFogQE1hcmtlciBbXSBbXSBATWFya2VyIFtdIDo6Zm9vOworICAgICAgICBJIGkzID0gQFZh
bHVlKCJEdW8iKSBZLiBAVmFsdWUyKEBWYWx1ZSgiSm9lIikpIEBNYXJrZXIgWiA6OmZvbzsKKyAg
ICAgICAgaS5mb28oMTApOyAKKyAgICAgICAgWm9yayB6OworICAgIH0KK30KK2NsYXNzIFkgewor
ICAgIHN0YXRpYyBjbGFzcyBaIHsKKyAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIGZvbyhpbnQg
eCkgeworCSAgICBTeXN0ZW0ub3V0LnByaW50bG4oeCk7CisgICAgICAgIH0KKyAgICB9Cit9CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9y
bWF0dGVySlNSMzA4L3Rlc3QwMzcvWF9vdXQuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzNy9YX291dC5qYXZhCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjc3N2E4NWQKLS0tIC9kZXYvbnVsbAor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVy
SlNSMzA4L3Rlc3QwMzcvWF9vdXQuamF2YQpAQCAtMCwwICsxLDIxIEBACitpbnRlcmZhY2UgSSB7
CisJdm9pZCBmb28oaW50IHgpOworfQorCitwdWJsaWMgY2xhc3MgWCB7CisJcHVibGljIHN0YXRp
YyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgeworCQlJIGkgPSBATWFya2VyIFkuQE1hcmtlciBa
IEBNYXJrZXJbXVtdQE1hcmtlcltdOjpmb287CisJCUkgaTIgPSBAVmFsdWUoIkpvZSIpIFkuQFZh
bHVlMihAVmFsdWUoIkpvZSIpKSBATWFya2VyIFogQE1hcmtlcltdW11ATWFya2VyW106OmZvbzsK
KwkJSSBpMyA9IEBWYWx1ZSgiRHVvIikgWS5AVmFsdWUyKEBWYWx1ZSgiSm9lIikpIEBNYXJrZXIg
Wjo6Zm9vOworCQlpLmZvbygxMCk7CisJCVpvcmsgejsKKwl9Cit9CisKK2NsYXNzIFkgeworCXN0
YXRpYyBjbGFzcyBaIHsKKwkJcHVibGljIHN0YXRpYyB2b2lkIGZvbyhpbnQgeCkgeworCQkJU3lz
dGVtLm91dC5wcmludGxuKHgpOworCQl9CisJfQorfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDM4L1hf
aW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3Jt
YXR0ZXJKU1IzMDgvdGVzdDAzOC9YX2luLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMC4uOGU1ZDFiMwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzOC9YX2luLmphdmEK
QEAgLTAsMCArMSwyNSBAQAoraW50ZXJmYWNlIEkgeworICAgIFkgZm9vKGludCB4KTsKK30KK3B1
YmxpYyBjbGFzcyBYICB7CisgICAgY2xhc3MgWiBleHRlbmRzIFkgeworICAgICAgICBwdWJsaWMg
WihpbnQgeCkgeworICAgICAgICAgICAgc3VwZXIoeCk7CisgICAgICAgICAgICBTeXN0ZW0ub3V0
LnByaW50bG4oKTsKKyAgICAgICAgfQorICAgIH0KKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFp
bihTdHJpbmcgW10gYXJncykgeworICAgICAgICBpID0gQE1hcmtlciBXPEBNYXJrZXIgSW50ZWdl
cj46OjxATWFya2VyIFN0cmluZz4gbmV3OworICAgIH0KK30KK2NsYXNzIFc8VD4gZXh0ZW5kcyBZ
IHsKKyAgICBwdWJsaWMgVyhUIHgpIHsKKyAgICAgICAgc3VwZXIoMCk7CisgICAgICAgIFN5c3Rl
bS5vdXQucHJpbnRsbih4KTsKKyAgICB9Cit9CitjbGFzcyBZIHsKKyAgICBwdWJsaWMgWShpbnQg
eCkgeworICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oeCk7CisgICAgfQorfQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDM4L1hfb3V0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3QwMzgvWF9vdXQuamF2YQpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5lODU4NDdjCi0tLSAvZGV2L251bGwKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90
ZXN0MDM4L1hfb3V0LmphdmEKQEAgLTAsMCArMSwyOSBAQAoraW50ZXJmYWNlIEkgeworCVkgZm9v
KGludCB4KTsKK30KKworcHVibGljIGNsYXNzIFggeworCWNsYXNzIFogZXh0ZW5kcyBZIHsKKwkJ
cHVibGljIFooaW50IHgpIHsKKwkJCXN1cGVyKHgpOworCQkJU3lzdGVtLm91dC5wcmludGxuKCk7
CisJCX0KKwl9CisKKwlwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CisJ
CWkgPSBATWFya2VyIFc8QE1hcmtlciBJbnRlZ2VyPjo6PEBNYXJrZXIgU3RyaW5nPiBuZXc7CisJ
fQorfQorCitjbGFzcyBXPFQ+IGV4dGVuZHMgWSB7CisJcHVibGljIFcoVCB4KSB7CisJCXN1cGVy
KDApOworCQlTeXN0ZW0ub3V0LnByaW50bG4oeCk7CisJfQorfQorCitjbGFzcyBZIHsKKwlwdWJs
aWMgWShpbnQgeCkgeworCQlTeXN0ZW0ub3V0LnByaW50bG4oeCk7CisJfQorfQpkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpT
UjMwOC90ZXN0MDM5L1hfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdDAzOS9YX2luLmphdmEKbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uZjhmZjVmYgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dDAzOS9YX2luLmphdmEKQEAgLTAsMCArMSw2IEBACitwdWJsaWMgY2xhc3MgWCAgeworICAgIE9i
amVjdCBvID0gKEBNYXJrZXIgWCkgbnVsbDsKKyAgICBPYmplY3QgcCA9IChATWFya2VyIFggQE1h
cmtlciBbXSkgbnVsbDsKKyAgICBPYmplY3QgcSA9IChATWFya2VyIGphdmEuIEBNYXJrZXIgdXRp
bC4gQE1hcmtlciBMaXN0PEBNYXJrZXIgU3RyaW5nPiBbXSkgbnVsbDsKKyAgICBPYmplY3QgciA9
IChATWFya2VyIGphdmEuIEBNYXJrZXIgdXRpbC5ATWFya2VyIE1hcDxATWFya2VyIFN0cmluZywg
QE1hcmtlciBTdHJpbmc+LkBNYXJrZXIgRW50cnkgQE1hcmtlciBbXSkgbnVsbDsKK30KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0
ZXJKU1IzMDgvdGVzdDAzOS9YX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0MDM5L1hfb3V0LmphdmEKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMjdhNjI5YQotLS0gL2Rldi9udWxsCisrKyBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1Iz
MDgvdGVzdDAzOS9YX291dC5qYXZhCkBAIC0wLDAgKzEsNiBAQAorcHVibGljIGNsYXNzIFggewor
CU9iamVjdCBvID0gKEBNYXJrZXIgWCkgbnVsbDsKKwlPYmplY3QgcCA9IChATWFya2VyIFggQE1h
cmtlcltdKSBudWxsOworCU9iamVjdCBxID0gKEBNYXJrZXIgamF2YS5ATWFya2VyIHV0aWwuQE1h
cmtlciBMaXN0PEBNYXJrZXIgU3RyaW5nPltdKSBudWxsOworCU9iamVjdCByID0gKEBNYXJrZXIg
amF2YS5ATWFya2VyIHV0aWwuQE1hcmtlciBNYXA8QE1hcmtlciBTdHJpbmcsIEBNYXJrZXIgU3Ry
aW5nPi5ATWFya2VyIEVudHJ5IEBNYXJrZXJbXSkgbnVsbDsKK30KZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dFNtb2tlL0FfaW4uamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtz
cGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdFNtb2tlL0FfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwLi44NDI2YTU4Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0U21v
a2UvQV9pbi5qYXZhCkBAIC0wLDAgKzEsNDggQEAKKy8qKgorICogVGVzdAorICoKKyAqLworcGFj
a2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQg
amF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5kcyBq
YXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsIENsb25lYWJsZSwgU2VyaWFsaXph
YmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCQorCXB1YmxpYyBzdGF0aWMgdm9pZCBm
b28oKSB0aHJvd3MgQEJvcmluZworCSBARHJlYWRmdWwoInJlYWxseSEiKSBJT0V4Y2VwdGlvbiB7
CisJCUBOb25OdWxsIEludGVnZXIgYSA9IGNhbGxNZSgpOworCX0KKworCXB1YmxpYyB2b2lkIGxh
bWJkYXMoKSB7CisJCVJ1bm5hYmxlIGEgPSAoKSAtPiB7CisJCQl0aGlzSXNDcmF6eSgpOworCQkJ
aUp1c3RNZXQoeW91KTsKKwkJCWhlcmUubnVtYmVyLmNhbGxNZSgpOworCQl9OworCisJCUZ1bmMg
aWRBID0geCAtPiB4OworCisJCUZ1bmMgaWRCID0geCAtPiB7IHJldHVybiB4OyB9OworCQkKKwkJ
RnVuYyBpZEMgPSB4ICAgLT4gICB4OworCisJCUZ1bmMgaWQyID0geCAtPiB7CisJCQlpZiAoeCA9
PSBudWxsKQorCQkJeworCQkJCXJldHVybiBudWxsOworCQkJfQorCQkJZWxzZQorCQkJCXJldHVy
biB4OworCQl9OworCQkKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPEBOb25OdWxsIFN0cmluZywgSW50
ZWdlcj4gZiA9CisJCQkoQE5vbk51bGwgU3RyaW5nIGlucHV0KSAtPiBpbnB1dC5sZW5ndGgoKTsK
KworCQlJbWFnaW5hYmxlRnVuY3Rpb248QE5vbk51bGwgU3RyaW5nLCBATm9uTnVsbCBJbnRlZ2Vy
PiBmMiA9CisJCQkoU3RyaW5nIGlucHV0KSAtPiB7IHJldHVybiBpbnB1dC5sZW5ndGgoKTsgfTsK
Kwl9CisKK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RT
bW9rZS9BX291dC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3Nw
YWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0U21va2UvQV9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwLi41NTI1NjI5Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0U21v
a2UvQV9vdXQuamF2YQpAQCAtMCwwICsxLDUwIEBACisvKioKKyAqIFRlc3QKKyAqCisgKi8KK3Bh
Y2thZ2UgcDEucDIudGVzdDsKKworaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOworaW1wb3J0
IGphdmEuaW8uSU9FeGNlcHRpb247CisKK3B1YmxpYyBhYnN0cmFjdCBjbGFzcyBBIGV4dGVuZHMg
amF2YS5sYW5nLk9iamVjdCBpbXBsZW1lbnRzIFJ1bm5hYmxlLAorCQlDbG9uZWFibGUsIFNlcmlh
bGl6YWJsZSB7CisJcHVibGljIHZvaWQgcnVuKCkgeworCX0KKworCXB1YmxpYyBzdGF0aWMgdm9p
ZCBmb28oKSB0aHJvd3MgQEJvcmluZyBARHJlYWRmdWwoInJlYWxseSEiKSBJT0V4Y2VwdGlvbiB7
CisJCUBOb25OdWxsCisJCUludGVnZXIgYSA9IGNhbGxNZSgpOworCX0KKworCXB1YmxpYyB2b2lk
IGxhbWJkYXMoKSB7CisJCVJ1bm5hYmxlIGEgPSAoKSAtPiB7CisJCQl0aGlzSXNDcmF6eSgpOwor
CQkJaUp1c3RNZXQoeW91KTsKKwkJCWhlcmUubnVtYmVyLmNhbGxNZSgpOworCQl9OworCisJCUZ1
bmMgaWRBID0geCAtPiB4OworCisJCUZ1bmMgaWRCID0geCAtPiB7CisJCQlyZXR1cm4geDsKKwkJ
fTsKKworCQlGdW5jIGlkQyA9IHggLT4geDsKKworCQlGdW5jIGlkMiA9IHggLT4geworCQkJaWYg
KHggPT0gbnVsbCkgeworCQkJCXJldHVybiBudWxsOworCQkJfSBlbHNlCisJCQkJcmV0dXJuIHg7
CisJCX07CisKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPEBOb25OdWxsIFN0cmluZywgSW50ZWdlcj4g
ZiA9IChATm9uTnVsbCBTdHJpbmcgaW5wdXQpIC0+IGlucHV0CisJCQkJLmxlbmd0aCgpOworCisJ
CUltYWdpbmFibGVGdW5jdGlvbjxATm9uTnVsbCBTdHJpbmcsIEBOb25OdWxsIEludGVnZXI+IGYy
ID0gKFN0cmluZyBpbnB1dCkgLT4geworCQkJcmV0dXJuIGlucHV0Lmxlbmd0aCgpOworCQl9Owor
CX0KKworfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVy
L0NvZGVGb3JtYXR0ZXJWaXNpdG9yLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRv
ci5qYXZhCmluZGV4IDNiNDlkM2QuLjQwZDU4NTggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVG
b3JtYXR0ZXJWaXNpdG9yLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZvcm1hdHRlclZpc2l0b3Iu
amF2YQpAQCAtMTUsNiArMTUsNyBAQAogICogICAgIE5hbmRhIEZpcmRhdXNpIC0gQ29udHJpYnV0
aW9uIGZvciBidWcgMjk4ODQ0CiAgKiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9u
IGZvciBidWcgNDAyMTczCiAgKiAgICAgICAgICAgICAgICAgICAgICAgQ29udHJpYnV0aW9uIGZv
ciBidWcgNDAyMTc0CisgKiAgICAgICAgICAgICAgICAgICAgICAgQ29udHJpYnV0aW9uIGZvciBi
dWcgNDAyODkyCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmZvcm1hdHRlcjsKIApAQCAtMzIsNiArMzMsNyBAQAogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQWJzdHJhY3RNZXRob2REZWNsYXJhdGlv
bjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFic3RyYWN0
VmFyaWFibGVEZWNsYXJhdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29t
cGlsZXIuYXN0LkFsbG9jYXRpb25FeHByZXNzaW9uOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQu
aW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb25NZXRob2REZWNsYXJhdGlvbjsKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFyZ3VtZW50OwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQXJyYXlBbGxvY2F0aW9uRXhw
cmVzc2lvbjsKQEAgLTYzNCwxNiArNjM2LDcgQEAKIAogCQl0aGlzLnNjcmliZS5wcmludE5leHRU
b2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyLCB0cnVlKTsKIAotCQkvKgot
CQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwotCQkgKi8KLQkJaW50IGV4dHJhRGltZW5z
aW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7Ci0J
CQkgZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lvbnM7IGkrKykgewotCQkJIAl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7
Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZVJCUkFDS0VUKTsKLQkJCSB9Ci0JCX0KKwkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKGZpZWxkRGVj
bGFyYXRpb24udHlwZSk7CiAKIAkJLyoKIAkJICogRmllbGQgaW5pdGlhbGl6YXRpb24KQEAgLTY4
Myw2ICs2NzYsNDEgQEAKIAkJfSBlbHNlIHsKIAkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CiAJCQl0
aGlzLnNjcmliZS5wcmludENvbW1lbnQoQ29kZUZvcm1hdHRlci5LX1VOS05PV04sIFNjcmliZS5C
QVNJQ19UUkFJTElOR19DT01NRU5UKTsKKwkJfQorCX0KKworCXByaXZhdGUgdm9pZCBmb3JtYXRF
eHRyYURpbWVuc2lvbnMoVHlwZVJlZmVyZW5jZSB0eXBlUmVmZXJlbmNlKSB7CisJCS8qCisJCSAq
IENoZWNrIGZvciBleHRyYSBkaW1lbnNpb25zCisJCSAqLworCQlpbnQgZXh0cmFEaW1lbnNpb25z
ID0gZ2V0RGltZW5zaW9ucygpOworCQlpbnQgYW5jaG9yID0gdHlwZVJlZmVyZW5jZSAhPSBudWxs
ID8gKHR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpIC0gZXh0cmFEaW1lbnNpb25zKSA6IDA7CisJ
CWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgZm9ybWF0RGltZW5zaW9ucyh0eXBlUmVmZXJlbmNl
LCBhbmNob3IsIGV4dHJhRGltZW5zaW9ucywgdHJ1ZSk7CisJfQorCisJcHJpdmF0ZSB2b2lkIGZv
cm1hdExlYWRpbmdEaW1lbnNpb25zKFR5cGVSZWZlcmVuY2UgdHlwZVJlZmVyZW5jZSwgYm9vbGVh
biBzcGFjZUJlZm9yZUFubm90YXRpb24pIHsKKwkJaW50IGxlYWRpbmdEaW1lbnNpb25zID0gTWF0
aC5taW4oZ2V0RGltZW5zaW9ucygpLCB0eXBlUmVmZXJlbmNlICE9IG51bGwgPyB0eXBlUmVmZXJl
bmNlLmRpbWVuc2lvbnMoKSA6IDApOworCQlpZiAobGVhZGluZ0RpbWVuc2lvbnMgIT0gMCkgZm9y
bWF0RGltZW5zaW9ucyh0eXBlUmVmZXJlbmNlLCAwLCBsZWFkaW5nRGltZW5zaW9ucywgc3BhY2VC
ZWZvcmVBbm5vdGF0aW9uKTsKKwl9CisKKwlwcml2YXRlIHZvaWQgZm9ybWF0RGltZW5zaW9ucyhU
eXBlUmVmZXJlbmNlIHR5cGVSZWZlcmVuY2UsIGludCBhbmNob3IsIGludCBjb3VudCwgYm9vbGVh
biBzcGFjZUJlZm9yZUFubm90YXRpb24pIHsKKwkJaWYgKGNvdW50ICE9IDApIHsKKwkJCWlmICh0
aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0X2luX2Fy
cmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCX0KKwkJ
CUFubm90YXRpb25bXVtdIGFubm90YXRpb25zT25EaW1lbnNpb25zID0gdHlwZVJlZmVyZW5jZSAh
PSBudWxsID8gdHlwZVJlZmVyZW5jZS5nZXRBbm5vdGF0aW9uc09uRGltZW5zaW9ucygpIDogbnVs
bDsKKwkJCSBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKKwkJCQlpbnQgZGltZW5z
aW9uSW5kZXggPSBhbmNob3IgKyBpOworCQkJCWlmIChhbm5vdGF0aW9uc09uRGltZW5zaW9ucyAh
PSBudWxsICYmIGFubm90YXRpb25zT25EaW1lbnNpb25zLmxlbmd0aCA+IGRpbWVuc2lvbkluZGV4
KSB7CisJCQkJCWJvb2xlYW4gaGFkQW5ub3RhdGlvbnMgPSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9u
cyhhbm5vdGF0aW9uc09uRGltZW5zaW9uc1tkaW1lbnNpb25JbmRleF0sIHNwYWNlQmVmb3JlQW5u
b3RhdGlvbiAmJiBpID09IDApOworCQkJCQlpZiAoaGFkQW5ub3RhdGlvbnMgJiYgdGhpcy5wcmVm
ZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBl
X3JlZmVyZW5jZSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCQl9CisJCQkgCXRoaXMuc2NyaWJl
LnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKKwkJCSAJ
aWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJy
YXlfdHlwZV9yZWZlcmVuY2UpIHsKKwkJCSAJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCQkgCX0K
KwkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
UkJSQUNLRVQpOworCQkJIH0KIAkJfQogCX0KIApAQCAtNzYzLDE2ICs3OTEsNyBAQAogCQkJCQkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRp
ZmllciwgZmFsc2UpOwogCQkJCQl9CiAKLQkJCQkJLyoKLQkJCQkJICogQ2hlY2sgZm9yIGV4dHJh
IGRpbWVuc2lvbnMKLQkJCQkJICovCi0JCQkJCWludCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1l
bnNpb25zKCk7Ci0JCQkJCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewotCQkJCQkJIGZvciAo
aW50IGluZGV4ID0gMDsgaW5kZXggPCBleHRyYURpbWVuc2lvbnM7IGluZGV4KyspIHsKLQkJCQkJ
CSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJS
QUNLRVQpOwotCQkJCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJCQkgfQotCQkJCQl9CisJCQkJCWZvcm1hdEV4dHJh
RGltZW5zaW9ucyhmaWVsZERlY2xhcmF0aW9uLnR5cGUpOwogCiAJCQkJCS8qCiAJCQkJCSAqIEZp
ZWxkIGluaXRpYWxpemF0aW9uCkBAIC0xNjc3LDE2ICsxNjk2LDcgQEAKIAkJIAkqLwogCQkJdGhp
cy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmll
ciwgZmFsc2UpOwogCQl9Ci0JCS8qCi0JCSAqIENoZWNrIGZvciBleHRyYSBkaW1lbnNpb25zCi0J
CSAqLwotCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAoZXh0
cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgZXh0
cmFEaW1lbnNpb25zOyBpbmRleCsrKSB7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCSAJdGhpcy5zY3JpYmUucHJp
bnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJIH0KLQkJ
fQorCQlmb3JtYXRFeHRyYURpbWVuc2lvbnMobG9jYWxEZWNsYXJhdGlvbi50eXBlKTsKIAogCQlm
aW5hbCBFeHByZXNzaW9uIGluaXRpYWxpemF0aW9uID0gbG9jYWxEZWNsYXJhdGlvbi5pbml0aWFs
aXphdGlvbjsKIAkJaWYgKGluaXRpYWxpemF0aW9uICE9IG51bGwpIHsKQEAgLTIzNDAsNiArMjM1
MCw4IEBACiAJCXRoaXMubG9jYWxTY2FubmVyLnJlc2V0VG8odGhpcy5zY3JpYmUuc2Nhbm5lci5j
dXJyZW50UG9zaXRpb24sIHRoaXMuc2NyaWJlLnNjYW5uZXJFbmRQb3NpdGlvbiAtIDEpOwogCQlp
bnQgZGltZW5zaW9ucyA9IDA7CiAJCWludCBiYWxhbmNlID0gMDsKKwkJYm9vbGVhbiBpbkFubm90
YXRpb24gPSBmYWxzZTsKKwkJaW50IHBhcmVuQmFsYW5jZSA9IDA7IC8vIGZvciBpbmxpbmUgYW5u
b3RhdGlvbnMKIAkJdHJ5IHsKIAkJCWludCB0b2tlbjsKIAkJCWxvb3A6IHdoaWxlICgodG9rZW4g
PSB0aGlzLmxvY2FsU2Nhbm5lci5nZXROZXh0VG9rZW4oKSkgIT0gVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lRU9GKSB7CkBAIC0yMzQ3LDYgKzIzNTksMjAgQEAKIAkJCQkJY2FzZSBUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVDoKIAkJCQkJCWRpbWVuc2lvbnMrKzsKIAkJCQkJCWJhbGFu
Y2UtLTsKKwkJCQkJCWJyZWFrOworCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxQ
QVJFTjoKKwkJCQkJCXBhcmVuQmFsYW5jZSsrOworCQkJCQkJYnJlYWs7CisJCQkJCWNhc2UgVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lUlBBUkVOOgorCQkJCQkJaWYgKCEgaW5Bbm5vdGF0aW9uKSBi
cmVhayBsb29wOworCQkJCQkJaWYgKC0tcGFyZW5CYWxhbmNlID09IDApIGluQW5ub3RhdGlvbiA9
IGZhbHNlOworCQkJCQkJYnJlYWs7CisJCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
QVQgOgorCQkJCQkJaW5Bbm5vdGF0aW9uID0gdHJ1ZTsKKwkJCQkJCWJyZWFrOworCQkJCQljYXNl
IFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIgOgorCQkJCQljYXNlIFRlcm1pbmFs
VG9rZW5zLlRva2VuTmFtZUVRVUFMIDoKKwkJCQkJCWlmIChwYXJlbkJhbGFuY2UgPT0gMCAmJiAh
IGluQW5ub3RhdGlvbikgYnJlYWsgbG9vcDsKIAkJCQkJCWJyZWFrOwogCQkJCQljYXNlIFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfQkxPQ0sgOgogCQkJCQljYXNlIFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZUNPTU1FTlRfSkFWQURPQyA6CkBAIC0yMzU2LDcgKzIzODIsNyBAQAogCQkJ
CQkJYmFsYW5jZSsrOwogCQkJCQkJYnJlYWs7CiAJCQkJCWRlZmF1bHQ6Ci0JCQkJCQlicmVhayBs
b29wOworCQkJCQkJaWYgKHBhcmVuQmFsYW5jZSA9PSAwKSBicmVhayBsb29wOwogCQkJCX0KIAkJ
CX0KIAkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgewpAQCAtMjQwMCw2ICsyNDI2
LDI4IEBACiAJCQkJfQogCQkJfQogCQkJcmV0dXJuICB0b2tlbiA9PSB0b2tlbk5hbWU7CisJCX0g
Y2F0Y2goSW52YWxpZElucHV0RXhjZXB0aW9uIGUpIHsKKwkJCS8vIGlnbm9yZQorCQl9CisJCXJl
dHVybiBmYWxzZTsKKwl9CisKKwlwcml2YXRlIGJvb2xlYW4gaXNOZXh0VG9rZW5QdW5jdHVhdGlv
bigpIHsKKwkJdGhpcy5sb2NhbFNjYW5uZXIucmVzZXRUbyh0aGlzLnNjcmliZS5zY2FubmVyLmN1
cnJlbnRQb3NpdGlvbiwgdGhpcy5zY3JpYmUuc2Nhbm5lckVuZFBvc2l0aW9uIC0gMSk7CisJCXRy
eSB7CisJCQlpbnQgdG9rZW4gPSB0aGlzLmxvY2FsU2Nhbm5lci5nZXROZXh0VG9rZW4oKTsKKwkJ
CWxvb3A6IHdoaWxlKHRydWUpIHsKKwkJCQlzd2l0Y2godG9rZW4pIHsKKwkJCQkJY2FzZSBUZXJt
aW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0JMT0NLIDoKKwkJCQkJY2FzZSBUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVDT01NRU5UX0pBVkFET0MgOgorCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZUNPTU1FTlRfTElORSA6CisJCQkJCQl0b2tlbiA9IHRoaXMubG9jYWxTY2FubmVy
LmdldE5leHRUb2tlbigpOworCQkJCQkJY29udGludWUgbG9vcDsKKwkJCQkJZGVmYXVsdDoKKwkJ
CQkJCWJyZWFrIGxvb3A7CisJCQkJfQorCQkJfQorCQkJcmV0dXJuICEgKFNjYW5uZXIuaXNMaXRl
cmFsKHRva2VuKSB8fCBTY2FubmVyLmlzS2V5d29yZCh0b2tlbikgfHwgU2Nhbm5lci5pc0lkZW50
aWZpZXIodG9rZW4pKTsKIAkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgewogCQkJ
Ly8gaWdub3JlCiAJCX0KQEAgLTI2MjQsOCArMjY3MiwxNSBAQAogCQkgKi8KIAkJaW50IGV4dHJh
RGltZW5zaW9ucyA9IGFubm90YXRpb25UeXBlTWVtYmVyRGVjbGFyYXRpb24uZXh0ZW5kZWREaW1l
bnNpb25zOwogCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKKwkJCQorCQkJaWYgKHRoaXMu
cHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlf
dHlwZV9yZWZlcmVuY2UpIHsKKwkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOworCQkJfQogCQkJIGZv
ciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKyspIHsKIAkJCSAJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOworCQkJ
IAlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9h
cnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJIAkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCSAJ
fQogCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVSQlJBQ0tFVCk7CiAJCQkgfQogCQl9CkBAIC0yNjgxLDE4ICsyNzM2LDcgQEAKIAkJCXRoaXMu
c2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIs
IHRydWUpOwogCQl9CiAKLQotCQkvKgotCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwot
CQkgKi8KLQkJaW50IGV4dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGV4
dHJhRGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkgZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVu
c2lvbnM7IGkrKykgewotCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCSB9Ci0JCX0KLQorCQlmb3Jt
YXRFeHRyYURpbWVuc2lvbnMoYXJndW1lbnQudHlwZSk7CiAJCXJldHVybiBmYWxzZTsKIAl9CiAK
QEAgLTI3MTQsNiArMjc1OCw5IEBACiAJCQlmaW5hbCBFeHByZXNzaW9uW10gZGltZW5zaW9ucyA9
IGFycmF5QWxsb2NhdGlvbkV4cHJlc3Npb24uZGltZW5zaW9uczsKIAkJCWludCBkaW1lbnNpb25z
TGVuZ3RoID0gZGltZW5zaW9ucy5sZW5ndGg7CiAJCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVu
c2lvbnNMZW5ndGg7IGkrKykgeworCQkJCWlmIChhcnJheUFsbG9jYXRpb25FeHByZXNzaW9uLmFu
bm90YXRpb25zT25EaW1lbnNpb25zICE9IG51bGwpIHsKKwkJCQkJZm9ybWF0SW5saW5lQW5ub3Rh
dGlvbnMoYXJyYXlBbGxvY2F0aW9uRXhwcmVzc2lvbi5hbm5vdGF0aW9uc09uRGltZW5zaW9uc1tp
XSwgaSA9PSAwKTsKKwkJCQl9CiAJCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNl
X2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfYWxsb2NhdGlvbl9leHByZXNzaW9uKSB7
CiAJCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CiAJCQkJfQpAQCAtMjg5NiwyOCArMjk0MywyNiBA
QAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCisJcHJpdmF0ZSB2b2lkIGZvcm1hdEFycmF5UXVhbGlm
aWVkVHlwZVJlZmVyZW5jZShBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UgYXJyYXlRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlKSB7CisJCWZpbmFsIGludCBudW1iZXJPZlBhcmVucyA9IChhcnJheVF1
YWxpZmllZFR5cGVSZWZlcmVuY2UuYml0cyAmIEFTVE5vZGUuUGFyZW50aGVzaXplZE1BU0spID4+
IEFTVE5vZGUuUGFyZW50aGVzaXplZFNISUZUOworCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7
CisJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CisJCX0KKwkJZm9ybWF0UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOworCQlmb3JtYXRMZWFkaW5n
RGltZW5zaW9ucyhhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIHRydWUpOworCQlpZiAobnVt
YmVyT2ZQYXJlbnMgPiAwKSB7CisJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Np
b24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CisJCX0KKwl9
CisKIAkvKioKIAkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5BU1RW
aXNpdG9yI3Zpc2l0KG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQXJyYXlR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIu
bG9va3VwLkJsb2NrU2NvcGUpCiAJICovCiAJcHVibGljIGJvb2xlYW4gdmlzaXQoCi0JCUFycmF5
UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsCi0JCUJs
b2NrU2NvcGUgc2NvcGUpIHsKKwkJCUFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBhcnJheVF1
YWxpZmllZFR5cGVSZWZlcmVuY2UsCisJCQlCbG9ja1Njb3BlIHNjb3BlKSB7CiAKLQkJCWZpbmFs
IGludCBudW1iZXJPZlBhcmVucyA9IChhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYml0cyAm
IEFTVE5vZGUuUGFyZW50aGVzaXplZE1BU0spID4+IEFTVE5vZGUuUGFyZW50aGVzaXplZFNISUZU
OwotCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewotCQkJCW1hbmFnZU9wZW5pbmdQYXJlbnRo
ZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFy
ZW5zKTsKLQkJCX0KLQkJCXRoaXMuc2NyaWJlLnByaW50QXJyYXlRdWFsaWZpZWRSZWZlcmVuY2Uo
YXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnRva2Vucy5sZW5ndGgsIGFycmF5UXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5zb3VyY2VFbmQpOwotCQkJaW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNp
b25zKCk7Ci0JCQlpZiAoZGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkJZm9yIChpbnQgaSA9IDA7IGkg
PCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQl0aGlzLnNjcmliZS5wcmludE5l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJfQotCQkJfQot
CQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewotCQkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNp
emVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5z
KTsKLQkJCX0KKwkJCWZvcm1hdEFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShhcnJheVF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UpOwogCQkJcmV0dXJuIGZhbHNlOwogCX0KIApAQCAtMjkyOCwyMSAr
Mjk3Myw3IEBACiAJCUFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBhcnJheVF1YWxpZmllZFR5
cGVSZWZlcmVuY2UsCiAJCUNsYXNzU2NvcGUgc2NvcGUpIHsKIAotCQkJZmluYWwgaW50IG51bWJl
ck9mUGFyZW5zID0gKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5Q
YXJlbnRoZXNpemVkTUFTSykgPj4gQVNUTm9kZS5QYXJlbnRoZXNpemVkU0hJRlQ7Ci0JCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7Ci0JCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHBy
ZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJ
fQotCQkJdGhpcy5zY3JpYmUucHJpbnRBcnJheVF1YWxpZmllZFJlZmVyZW5jZShhcnJheVF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zLmxlbmd0aCwgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLnNvdXJjZUVuZCk7Ci0JCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJ
CWlmIChkaW1lbnNpb25zICE9IDApIHsKLQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lv
bnM7IGkrKykgewotCQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRl
cm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCQl9Ci0JCQl9Ci0JCQlpZiAobnVt
YmVyT2ZQYXJlbnMgPiAwKSB7Ci0JCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNz
aW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQor
CQkJZm9ybWF0QXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZSk7CiAJCQlyZXR1cm4gZmFsc2U7CiAJfQogCkBAIC0yOTgxLDIwICszMDEyLDE4IEBA
CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNp
emVkRXhwcmVzc2lvbihhcnJheVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQor
CQlpZiAoYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGlu
ZUFubm90YXRpb25zKGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwog
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVE
VE9LRU5TKTsKIAogCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKIAkJaWYgKGRp
bWVuc2lvbnMgIT0gMCkgewotCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2Jl
Zm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlz
LnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25z
OyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5U
b2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNl
X2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5z
Y3JpYmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJfQorCQkJZm9ybWF0RGltZW5zaW9u
cyhhcnJheVR5cGVSZWZlcmVuY2UsIDAsIGRpbWVuc2lvbnMsIHRydWUpOworCQl9CisJCS8vIGRp
bWVuc2lvbnMgdGhlIG51bWJlciBvZiB2aXNpYmxlIGJyYWNrZXQtcGFpcnMuIEVsbGlwc2lzIGlz
IGFuIGV4dHJhIGRpbWVuc2lvbgorCQlpZiAoKGFycmF5VHlwZVJlZmVyZW5jZS5iaXRzICYgQVNU
Tm9kZS5Jc1ZhckFyZ3MpICE9IDAKKwkJCQkmJiBhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlv
bnNPbkRpbWVuc2lvbnMgIT0gbnVsbAorCQkJCSYmIGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0
aW9uc09uRGltZW5zaW9ucy5sZW5ndGggPiBkaW1lbnNpb25zKSB7CisJCQkJZm9ybWF0SW5saW5l
QW5ub3RhdGlvbnMoYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zT25EaW1lbnNpb25zW2Rp
bWVuc2lvbnNdLCB0cnVlKTsKIAkJfQogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQlt
YW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlUeXBlUmVmZXJlbmNlLCBu
dW1iZXJPZlBhcmVucyk7CkBAIC0zMDEzLDE5ICszMDQyLDE3IEBACiAJCWlmIChudW1iZXJPZlBh
cmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJh
eVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAoYXJyYXlUeXBlUmVm
ZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25zKGFycmF5
VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5wcmlu
dE5leHRUb2tlbihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVEVE9LRU5TKTsKIAkJaW50IGRp
bWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7CiAJCWlmIChkaW1lbnNpb25zICE9IDApIHsKLQkJ
CWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0
X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJ
CX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJdGhpcy5z
Y3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwot
CQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVuX2JyYWNrZXRzX2lu
X2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQkJ
fQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZVJCUkFDS0VUKTsKLQkJCX0KKwkJCWZvcm1hdERpbWVuc2lvbnMoYXJyYXlUeXBlUmVmZXJlbmNl
LCAwLCBkaW1lbnNpb25zLCB0cnVlKTsKKwkJfQorCQkvLyBkaW1lbnNpb25zIHRoZSBudW1iZXIg
b2YgdmlzaWJsZSBicmFja2V0LXBhaXJzLiBFbGxpcHNpcyBpcyBhbiBleHRyYSBkaW1lbnNpb24K
KwkJaWYgKChhcnJheVR5cGVSZWZlcmVuY2UuYml0cyAmIEFTVE5vZGUuSXNWYXJBcmdzKSAhPSAw
CisJCQkJJiYgYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zT25EaW1lbnNpb25zICE9IG51
bGwKKwkJCQkmJiBhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMubGVu
Z3RoID4gZGltZW5zaW9ucykgeworCQkJCWZvcm1hdElubGluZUFubm90YXRpb25zKGFycmF5VHlw
ZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09uRGltZW5zaW9uc1tkaW1lbnNpb25zXSwgdHJ1ZSk7CiAJ
CX0KIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhl
c2l6ZWRFeHByZXNzaW9uKGFycmF5VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwpAQCAt
NDUyMCwxNiArNDU0Nyw3IEBACiAJCQkJCXRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2Fm
dGVyX2NvbW1hX2luX21ldGhvZF9kZWNsYXJhdGlvbl9wYXJhbWV0ZXJzLAogCQkJCQl0aGlzLnBy
ZWZlcmVuY2VzLmFsaWdubWVudF9mb3JfcGFyYW1ldGVyc19pbl9tZXRob2RfZGVjbGFyYXRpb24p
OwogCi0JCQkJLyoKLQkJCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwotCQkJCSAqLwot
CQkJCWludCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCQkJaWYgKGV4dHJh
RGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkJCSBmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5z
aW9uczsgaSsrKSB7Ci0JCQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCQkJIH0KLQkJCQl9CisJ
CQkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKG1ldGhvZERlY2xhcmF0aW9uLnJldHVyblR5cGUpOwog
CiAJCQkJLy8gRm9ybWF0IHRocm93cwogCQkJCWZvcm1hdFRocm93c0NsYXVzZSgKQEAgLTQ2NjUs
NiArNDY4Myw3IEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5p
bmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChwYXJhbWV0ZXJpemVkUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9u
cyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFs
c2UpOwogCQlUeXBlUmVmZXJlbmNlW11bXSB0eXBlQXJndW1lbnRzID0gcGFyYW1ldGVyaXplZFF1
YWxpZmllZFR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50czsKIAkJaW50IGxlbmd0aCA9IHR5cGVB
cmd1bWVudHMubGVuZ3RoOwogCQlmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CkBA
IC00Njk1LDIxICs0NzE0LDEyIEBACiAJCQl9CiAJCQlpZiAoaSA8IGxlbmd0aCAtIDEpIHsKIAkJ
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVET1Qp
OwotCQkJfQotCQl9Ci0JCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAo
ZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNl
cnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkg
ewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8
IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5p
bnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewot
CQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOworCQkJCWlmIChwYXJhbWV0ZXJpemVkUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIHBhcmFtZXRlcml6ZWRRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCA+IGkrMSkgeworCQkJCQlmb3JtYXRJ
bmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5v
dGF0aW9uc1tpKzFdLCBmYWxzZSk7CiAJCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKIAkJCX0KIAkJfQorCQlmb3Jt
YXRMZWFkaW5nRGltZW5zaW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwg
dHJ1ZSk7CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJl
bnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwg
bnVtYmVyT2ZQYXJlbnMpOwogCQl9CkBAIC00NzIyLDYgKzQ3MzIsNyBAQAogCQlpZiAobnVtYmVy
T2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24o
cGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJ
fQorCQlpZiAocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMg
IT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJVHlwZVJlZmVyZW5jZVtdW10g
dHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnR5cGVB
cmd1bWVudHM7CiAJCWludCBsZW5ndGggPSB0eXBlQXJndW1lbnRzLmxlbmd0aDsKIAkJZm9yIChp
bnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewpAQCAtNDc1MywyMCArNDc2NCwxMSBAQAogCQkJ
aWYgKGkgPCBsZW5ndGggLSAxKSB7CiAJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lRE9UKTsKIAkJCX0KLQkJfQotCQlpbnQgZGltZW5zaW9ucyA9
IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNpb25zIDw9
IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSkgewotCQkJ
aWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRf
aW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJ
fQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNj
cmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0J
CQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5f
YXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9
Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
UkJSQUNLRVQpOworCQkJaWYgKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFu
bm90YXRpb25zICE9IG51bGwgJiYgcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2Uu
YW5ub3RhdGlvbnMubGVuZ3RoID4gaSsxKSB7CisJCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMo
cGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbaSsxXSwgZmFs
c2UpOwogCQkJfQogCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKHBhcmFtZXRlcml6ZWRR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVlKTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkg
ewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KQEAgLTQ3NzksNiAr
NDc4MSw3IEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQ
YXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwg
bnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVy
ZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0
ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVy
KTsKIAogCQlUeXBlUmVmZXJlbmNlW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6ZWRTaW5n
bGVUeXBlUmVmZXJlbmNlLnR5cGVBcmd1bWVudHM7CkBAIC00ODA0LDE5ICs0ODA3LDcgQEAKIAkJ
CXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKENMT1NJTkdfR0VORVJJQ1NfRVhQRUNURURUT0tF
TlMpOwogCQl9CiAKLQkJaW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChk
aW1lbnNpb25zICE9IDAgJiYgZGltZW5zaW9ucyA8PSBwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJl
ZmVyZW5jZS5kaW1lbnNpb25zKCkpIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9z
cGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0J
CQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGlt
ZW5zaW9uczsgaSsrKSB7Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2Vy
dF9zcGFjZV9iZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJ
CXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCX0KLQkJfQorCQlmb3Jt
YXRMZWFkaW5nRGltZW5zaW9ucyhwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgZmFs
c2UpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50
aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJl
ck9mUGFyZW5zKTsKIAkJfQpAQCAtNDgyOSw2ICs0ODIwLDcgQEAKIAkJaWYgKG51bWJlck9mUGFy
ZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFt
ZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYg
KHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpIGZv
cm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmFu
bm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCiAJCVR5cGVSZWZlcmVuY2VbXSB0eXBl
QXJndW1lbnRzID0gcGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UudHlwZUFyZ3VtZW50
czsKQEAgLTQ4NTQsMTkgKzQ4NDYsNyBAQAogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4o
Q0xPU0lOR19HRU5FUklDU19FWFBFQ1RFRFRPS0VOUyk7CiAJCX0KIAotCQlpbnQgZGltZW5zaW9u
cyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNpb25z
IDw9IHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSkgewotCQkJ
aWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRf
aW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJ
fQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNj
cmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0J
CQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5f
YXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9
Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
UkJSQUNLRVQpOwotCQkJfQotCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKHBhcmFtZXRl
cml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBmYWxzZSk7CiAJCWlmIChudW1iZXJPZlBhcmVucyA+
IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJp
emVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CkBAIC01MDg3LDEy
ICs1MDY3LDI1IEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5p
bmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJP
ZlBhcmVucyk7CiAJCX0KLQkJdGhpcy5zY3JpYmUucHJpbnRRdWFsaWZpZWRSZWZlcmVuY2UocXVh
bGlmaWVkVHlwZVJlZmVyZW5jZS5zb3VyY2VFbmQsIG51bWJlck9mUGFyZW5zPj0wLypleHBlY3Qg
cGFyZW50aGVzaXMqLyk7Ci0KKwkJZm9ybWF0UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShxdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlKTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdl
Q2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51
bWJlck9mUGFyZW5zKTsKIAkJfQogCQlyZXR1cm4gZmFsc2U7CisJfQorCisJcHJpdmF0ZSB2b2lk
IGZvcm1hdFF1YWxpZmllZFR5cGVSZWZlcmVuY2UoUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSBxdWFs
aWZpZWRUeXBlUmVmZXJlbmNlKSB7CisJCWZvciAoaW50IGkgPSAwOyBpIDwgcXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZS50b2tlbnMubGVuZ3RoOyArK2kpIHsKKwkJCWlmIChpICE9IDApIHRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZURPVCwgZmFsc2UpOwor
CQkJaWYgKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbAorCQkJCQkm
JiBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCA+IGkKKwkJCQkJJiYg
cXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpXSAhPSBudWxsKSB7CisJCQkJZm9y
bWF0SW5saW5lQW5ub3RhdGlvbnMocXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tp
XSwgZmFsc2UpOworCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZUlkZW50aWZpZXIsIHRydWUpOworCQkJfSBlbHNlIHsKKwkJCQl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyLCBmYWxz
ZSk7CisJCQl9CisJCX0KIAl9CiAKIAkvKioKQEAgLTUxMDYsNyArNTA5OSw3IEBACiAJCQlpZiAo
bnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHBy
ZXNzaW9uKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJCX0KLQkJ
CXRoaXMuc2NyaWJlLnByaW50UXVhbGlmaWVkUmVmZXJlbmNlKHF1YWxpZmllZFR5cGVSZWZlcmVu
Y2Uuc291cmNlRW5kLCBudW1iZXJPZlBhcmVucz49MC8qZXhwZWN0IHBhcmVudGhlc2lzKi8pOwor
CQkJZm9ybWF0UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShxdWFsaWZpZWRUeXBlUmVmZXJlbmNlKTsK
IAogCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJCW1hbmFnZUNsb3NpbmdQYXJlbnRo
ZXNpemVkRXhwcmVzc2lvbihxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7
CkBAIC01MjEyLDEyICs1MjA1LDMwIEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJ
CW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihzaW5nbGVUeXBlUmVmZXJlbmNl
LCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKHNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoc2luZ2xlVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihT
SU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVEVE9LRU5TKTsKIAogCQlpZiAobnVtYmVyT2ZQYXJl
bnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oc2luZ2xl
VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CiAJCXJldHVybiBmYWxzZTsKKwl9
CisKKwlwcml2YXRlIGJvb2xlYW4gZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoZmluYWwgQW5ub3Rh
dGlvbltdIGFubm90YXRpb25zLCBib29sZWFuIHNwYWNlQmVmb3JlKSB7CisJCWlmIChhbm5vdGF0
aW9ucyAhPSBudWxsICkgeworCQkJaWYgKHNwYWNlQmVmb3JlKSB0aGlzLnNjcmliZS5zcGFjZSgp
OworCisJCQlmb3IgKGludCBpID0gMDsgaSA8IGFubm90YXRpb25zLmxlbmd0aDsgKytpKSB7CisJ
CQkJaWYgKGkgIT0gMCkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCQlhbm5vdGF0aW9uc1tpXS50
cmF2ZXJzZSh0aGlzLCAoQmxvY2tTY29wZSludWxsKTsKKwkJCX0KKwkJCWlmIChhbm5vdGF0aW9u
cy5sZW5ndGggPiAwICYmICEgdGhpcy5pc05leHRUb2tlblB1bmN0dWF0aW9uKCkpIHsKKwkJCQl0
aGlzLnNjcmliZS5zcGFjZSgpOworCQkJfQorCQkJcmV0dXJuIHRydWU7CisJCX0gZWxzZSB7CisJ
CQlyZXR1cm4gZmFsc2U7CisJCX0KIAl9CiAKIAkvKioKQEAgLTUyMzEsNiArNTI0Miw3IEBACiAJ
CWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVk
RXhwcmVzc2lvbihzaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJ
aWYgKHNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5l
QW5ub3RhdGlvbnMoc2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwog
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVE
VE9LRU5TKTsKIAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CkBAIC01Njg4LDYgKzU3MDAs
NyBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFR5cGVQYXJh
bWV0ZXIgdHlwZVBhcmFtZXRlciwgQmxvY2tTY29wZSBzY29wZSkgeworCQlpZiAodHlwZVBhcmFt
ZXRlci5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh0eXBlUGFy
YW1ldGVyLmFubm90YXRpb25zLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCQlpZiAodHlwZVBhcmFtZXRl
ci50eXBlICE9IG51bGwpIHsKIAkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CkBAIC01NzE0LDYgKzU3
MjcsNyBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFR5cGVQ
YXJhbWV0ZXIgdHlwZVBhcmFtZXRlciwgQ2xhc3NTY29wZSBzY29wZSkgeworCQlpZiAodHlwZVBh
cmFtZXRlci5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh0eXBl
UGFyYW1ldGVyLmFubm90YXRpb25zLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCQlpZiAodHlwZVBhcmFt
ZXRlci50eXBlICE9IG51bGwpIHsKIAkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CkBAIC01OTAwLDYg
KzU5MTQsOSBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFdp
bGRjYXJkIHdpbGRjYXJkLCBCbG9ja1Njb3BlIHNjb3BlKSB7CisJCWlmICh3aWxkY2FyZC5hbm5v
dGF0aW9ucyAhPSBudWxsKSB7CisJCQlpZiAoZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMod2lsZGNh
cmQuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJfQogCQl0
aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVRVUVTVElP
TiwgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX3F1ZXN0aW9uX2luX3dpbGNh
cmQpOwogCQlzd2l0Y2god2lsZGNhcmQua2luZCkgewogCQkJY2FzZSBXaWxkY2FyZC5TVVBFUiA6
CkBAIC01OTIwLDYgKzU5MzcsOSBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1YmxpYyBib29s
ZWFuIHZpc2l0KFdpbGRjYXJkIHdpbGRjYXJkLCBDbGFzc1Njb3BlIHNjb3BlKSB7CisJCWlmICh3
aWxkY2FyZC5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQlpZiAoZm9ybWF0SW5saW5lQW5ub3Rh
dGlvbnMod2lsZGNhcmQuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKSkgdGhpcy5zY3JpYmUuc3BhY2Uo
KTsKKwkJfQogCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tl
bk5hbWVRVUVTVElPTiwgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX3F1ZXN0
aW9uX2luX3dpbGNhcmQpOwogCQlzd2l0Y2god2lsZGNhcmQua2luZCkgewogCQkJY2FzZSBXaWxk
Y2FyZC5TVVBFUiA6CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9TY3JpYmUuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVy
L1NjcmliZS5qYXZhCmluZGV4IGNlZDU2ODYuLjM4YWMzODkgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVy
L1NjcmliZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL1NjcmliZS5qYXZhCkBAIC01LDkgKzUsMTQgQEAK
ICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxl
IGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAogICogCisg
KiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRp
b24gZGV2ZWxvcGVkIHVuZGVyIHRoZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBh
bmQgaXMgbWFkZSBhdmFpbGFibGUgZm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMK
KyAqIG9ubHkuIFRoZSBjb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRp
b24gb2YgdGhlIEpDUC4KKyAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3Jh
dGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICogICAgIFJheSBWLiAodm9p
ZHN0YXJAZ21haWwuY29tKSAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDI4Mjk4OAorICogICAgIEpl
c3BlciBTIE1vbGxlciAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjg5MgogICoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7
CiAKQEAgLTQ5MjMsNTMgKzQ5MjgsNiBAQAogCQkJfQogCQkJcHJpbnQodGhpcy5zY2FubmVyLmN1
cnJlbnRQb3NpdGlvbiAtIHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0aW9uLCBjb25zaWRlclNwYWNl
SWZBbnkpOwogCQl9IGNhdGNoIChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgewotCQkJdGhyb3cg
bmV3IEFib3J0Rm9ybWF0dGluZyhlKTsKLQkJfQotCX0KLQotCXB1YmxpYyB2b2lkIHByaW50QXJy
YXlRdWFsaWZpZWRSZWZlcmVuY2UoaW50IG51bWJlck9mVG9rZW5zLCBpbnQgc291cmNlRW5kKSB7
Ci0JCWludCBjdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQ
b3NpdGlvbjsKLQkJaW50IG51bWJlck9mSWRlbnRpZmllcnMgPSAwOwotCQl0cnkgewotCQkJZG8g
ewotCQkJCXByaW50Q29tbWVudChDb2RlRm9ybWF0dGVyLktfVU5LTk9XTiwgTk9fVFJBSUxJTkdf
Q09NTUVOVCk7Ci0JCQkJc3dpdGNoKHRoaXMuY3VycmVudFRva2VuID0gdGhpcy5zY2FubmVyLmdl
dE5leHRUb2tlbigpKSB7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRU9GIDoK
LQkJCQkJCXJldHVybjsKLQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVXSElURVNQ
QUNFIDoKLQkJCQkJCWFkZERlbGV0ZUVkaXQodGhpcy5zY2FubmVyLmdldEN1cnJlbnRUb2tlblN0
YXJ0UG9zaXRpb24oKSwgdGhpcy5zY2FubmVyLmdldEN1cnJlbnRUb2tlbkVuZFBvc2l0aW9uKCkp
OwotCQkJCQkJY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5jdXJyZW50
UG9zaXRpb247Ci0JCQkJCQlicmVhazsKLQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVDT01NRU5UX0JMT0NLIDoKLQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVDT01N
RU5UX0pBVkFET0MgOgotCQkJCQkJcHJpbnRCbG9ja0NvbW1lbnQoZmFsc2UpOwotCQkJCQkJY3Vy
cmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb247Ci0J
CQkJCQlicmVhazsKLQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0xJ
TkUgOgotCQkJCQkJcHJpbnRMaW5lQ29tbWVudCgpOwotCQkJCQkJY3VycmVudFRva2VuU3RhcnRQ
b3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb247Ci0JCQkJCQlicmVhazsKLQkJ
CQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyIDoKLQkJCQkJCXByaW50
KHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24gLSB0aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlv
biwgZmFsc2UpOwotCQkJCQkJY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5l
ci5jdXJyZW50UG9zaXRpb247Ci0JCQkJCQlpZiAoKysgbnVtYmVyT2ZJZGVudGlmaWVycyA9PSBu
dW1iZXJPZlRva2VucykgewotCQkJCQkJCXRoaXMuc2Nhbm5lci5yZXNldFRvKGN1cnJlbnRUb2tl
blN0YXJ0UG9zaXRpb24sIHRoaXMuc2Nhbm5lckVuZFBvc2l0aW9uIC0gMSk7Ci0JCQkJCQkJcmV0
dXJuOwotCQkJCQkJfQotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lRE9UIDoKLQkJCQkJCXByaW50KHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24gLSB0
aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlvbiwgZmFsc2UpOwotCQkJCQkJY3VycmVudFRva2VuU3Rh
cnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb247Ci0JCQkJCQlicmVhazsK
LQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSUEFSRU46Ci0JCQkJCQljdXJyZW50
VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLnN0YXJ0UG9zaXRpb247Ci0JCQkJCQkv
LyAkRkFMTC1USFJPVUdIJCAtIGZhbGwgdGhyb3VnaCBkZWZhdWx0IGNhc2UuLi4KLQkJCQkJZGVm
YXVsdDoKLQkJCQkJCXRoaXMuc2Nhbm5lci5yZXNldFRvKGN1cnJlbnRUb2tlblN0YXJ0UG9zaXRp
b24sIHRoaXMuc2Nhbm5lckVuZFBvc2l0aW9uIC0gMSk7Ci0JCQkJCQlyZXR1cm47Ci0JCQkJfQot
CQkJfSB3aGlsZSAodGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbiA8PSBzb3VyY2VFbmQpOwot
CQl9IGNhdGNoKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7CiAJCQl0aHJvdyBuZXcgQWJvcnRG
b3JtYXR0aW5nKGUpOwogCQl9CiAJfQ==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>228457</attachid>
            <date>2013-03-15 02:08:00 -0400</date>
            <delta_ts>2013-03-17 15:50:36 -0400</delta_ts>
            <desc>Jesper&apos;s patch for formatting 308 style annotations.</desc>
            <filename>Formatter308.patch</filename>
            <type>text/plain</type>
            <size>46376</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuQWxs
SmF2YThUZXN0cy5qYXZhCmluZGV4IGNkMTExMmUuLjNiZDU0ZjYgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkFsbEphdmE4VGVzdHMuamF2
YQpAQCAtNDQsNiArNDQsNyBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmRv
bS5BU1RDb252ZXJ0ZXJUZXN0QVNUOF8yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLmRvbS5Db252ZXJ0ZXJUZXN0U2V0dXA7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuZG9tLlR5cGVBbm5vdGF0aW9uc0NvbnZlcnRlclRlc3Q7CitpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyLkZvcm1hdHRlckpTUjMwOFRlc3RzOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmZvcm1hdHRlci5Gb3JtYXR0ZXJKU1IzMzVUZXN0
czsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5yZXdyaXRlLmRlc2NyaWJpbmcu
QVNUUmV3cml0aW5nVGVzdDsKIApAQCAtNjcsNiArNjgsNyBAQAogCQkJRXhwcmVzc2lvbkNvbnRl
eHRUZXN0cy5jbGFzcywKIAkJCUZsb3dBbmFseXNpc1Rlc3Q4LmNsYXNzLAogCQkJRm9ybWF0dGVy
SlNSMzM1VGVzdHMuY2xhc3MsCisJCQlGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcywKIAkJfTsK
IAl9CiAJCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuRm9ybWF0dGVyVGVzdHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCmluZGV4IDIwZGE0ZDkuLmU4ZTZhYmEgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3JtYXR0
ZXJUZXN0cy5qYXZhCkBAIC0xMiw2ICsxMiw3IEBACiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAg
SUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAg
SmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9uIGZvciBidWcgNDAyMTczCisgKiAgICAgICAg
ICAgICAgICAgICAgICAgQ29udHJpYnV0aW9uIGZvciBidWcgNDAyODkyCiAgKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHM7CiAKQEAgLTM3
LDYgKzM4LDcgQEAKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckNvbW1lbnRzQnVnc1Rlc3Qu
Y2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVyQ29tbWVudHNUZXN0cy5jbGFzcyk7
CiAJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMzVUZXN0cy5jbGFzcyk7CisJCVRFU1Rf
U1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcyk7CiAJCVRFU1RfU1VJVEVTLmFk
ZChGb3JtYXR0ZXJDb21tZW50c0NsZWFyQmxhbmtMaW5lc1Rlc3RzLmNsYXNzKTsKIAkJVEVTVF9T
VUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc1Rlc3RzLmNsYXNzKTsKIAkJ
VEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc0Rlc2NyaXB0aW9u
VGVzdHMuY2xhc3MpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1Iz
MDhUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1IzMDhUZXN0cy5qYXZh
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjY5OWJiZTMKLS0tIC9kZXYvbnVs
bAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvZm9ybWF0dGVyL0Zvcm1hdHRlckpTUjMwOFRlc3RzLmphdmEKQEAgLTAs
MCArMSwzNTEgQEAKKy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIw
MTMgSmVzcGVyIFN0ZWVuIE1vbGxlciBhbmQgb3RoZXJzLgorICogQWxsIHJpZ2h0cyByZXNlcnZl
ZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscworICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2
YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwK
KyAqIAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVj
aWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3Mg
KEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1
cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVj
aWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRyaWJ1dG9yczoKKyAqICAgICBKZXNw
ZXIgU3RlZW4gTW9sbGVyIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uICovCisKK3Bh
Y2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyOworCitpbXBvcnQgamF2
YS51dGlsLk1hcDsKKworaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3Jn
LmVjbGlwc2UuY29yZS5yZXNvdXJjZXMuSVdvcmtzcGFjZURlc2NyaXB0aW9uOworaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5jb3JlLklDb21waWxhdGlvblVuaXQ7CitpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmNvcmUuSUphdmFQcm9qZWN0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFN
b2RlbEV4Y2VwdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5mb3JtYXR0ZXIuQ29k
ZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC5BYnN0
cmFjdEphdmFNb2RlbFRlc3RzOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLnV0
aWwuVXRpbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5D
b21waWxlck9wdGlvbnM7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZvcm1hdHRl
ci5EZWZhdWx0Q29kZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Zm9ybWF0dGVyLkRlZmF1bHRDb2RlRm9ybWF0dGVyT3B0aW9uczsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS50ZXh0LmVkaXRzLlRleHRFZGl0OworCitwdWJsaWMgY2xhc3MgRm9ybWF0dGVySlNSMzA4VGVz
dHMgZXh0ZW5kcyBBYnN0cmFjdEphdmFNb2RlbFRlc3RzIHsKKworCXByb3RlY3RlZCBzdGF0aWMg
SUphdmFQcm9qZWN0IEpBVkFfUFJPSkVDVDsKKworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVO
S05PV05fS0lORCA9IDA7CisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU4gPSAiX2luIjsK
KwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBPVVQgPSAiX291dCI7CisJcHVibGljIHN0YXRp
YyBmaW5hbCBib29sZWFuIERFQlVHID0gZmFsc2U7CisJc3RhdGljIGZpbmFsIFN0cmluZyBMSU5F
X1NFUEFSQVRPUiA9IFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKTsKKwlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJPSkVDVF9OQU1FID0gIkZvcm1hdHRlckpTUjMwOCI7
IAorCXByaXZhdGUgbG9uZyB0aW1lOworCisJRGVmYXVsdENvZGVGb3JtYXR0ZXJPcHRpb25zIGZv
cm1hdHRlclByZWZzOworCU1hcCBmb3JtYXR0ZXJPcHRpb25zOworCisJc3RhdGljIHsKKy8vCQlU
RVNUU19OVU1CRVJTID0gbmV3IGludFtdIHsgNzgzIH07CisvLwkJVEVTVFNfUkFOR0UgPSBuZXcg
aW50W10geyA3MzQsIC0xIH07CisvLwkJVEVTVFNfTkFNRVMgPSBuZXcgU3RyaW5nIFtdIHsgInRl
c3QwMDAiIH07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgpIHsKKwkJcmV0dXJuIGJ1
aWxkTW9kZWxUZXN0U3VpdGUoRm9ybWF0dGVySlNSMzA4VGVzdHMuY2xhc3MpOworCX0KKworCXB1
YmxpYyBGb3JtYXR0ZXJKU1IzMDhUZXN0cyhTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1lKTsK
Kwl9CisKKwlTdHJpbmcgcnVuRm9ybWF0dGVyKENvZGVGb3JtYXR0ZXIgY29kZUZvcm1hdHRlciwg
U3RyaW5nIHNvdXJjZSwgaW50IGtpbmQsIGludCBpbmRlbnRhdGlvbkxldmVsLCBpbnQgb2Zmc2V0
LCBpbnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvciwgYm9vbGVhbiByZXBlYXQpIHsKKy8v
CQlsb25nIHRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKKwkJVGV4dEVkaXQgZWRp
dCA9IGNvZGVGb3JtYXR0ZXIuZm9ybWF0KGtpbmQsIHNvdXJjZSwgb2Zmc2V0LCBsZW5ndGgsIGlu
ZGVudGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQlTeXN0ZW0u
b3V0LnByaW50bG4oKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGltZSkgKyAiIG1zIik7
CisJCWlmIChlZGl0ID09IG51bGwpIHJldHVybiBudWxsOworLy8JCVN5c3RlbS5vdXQucHJpbnRs
bihlZGl0LmdldENoaWxkcmVuU2l6ZSgpICsgIiBlZGl0cyIpOworCQlTdHJpbmcgcmVzdWx0ID0g
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUudXRpbC5VdGlsLmVkaXRlZFN0cmluZyhzb3Vy
Y2UsIGVkaXQpOworCisJCWlmIChyZXBlYXQgJiYgbGVuZ3RoID09IHNvdXJjZS5sZW5ndGgoKSkg
eworLy8JCQl0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CisJCQllZGl0ID0gY29k
ZUZvcm1hdHRlci5mb3JtYXQoa2luZCwgcmVzdWx0LCAwLCByZXN1bHQubGVuZ3RoKCksIGluZGVu
dGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQkJU3lzdGVtLm91
dC5wcmludGxuKChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIHRpbWUpICsgIiBtcyIpOwor
CQkJaWYgKGVkaXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CisvLwkJCWFzc2VydEVxdWFscygiU2hv
dWxkIG5vdCBoYXZlIGVkaXRzIiwgMCwgZWRpdC5nZXRDaGlsZHJlbigpLmxlbmd0aCk7CisJCQlm
aW5hbCBTdHJpbmcgcmVzdWx0MiA9IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwu
VXRpbC5lZGl0ZWRTdHJpbmcocmVzdWx0LCBlZGl0KTsKKwkJCWlmICghcmVzdWx0LmVxdWFscyhy
ZXN1bHQyKSkgeworCQkJCWFzc2VydFNvdXJjZUVxdWFscygiU2Vjb25kIGZvcm1hdHRpbmcgaXMg
ZGlmZmVyZW50IGZyb20gZmlyc3Qgb25lISIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5l
RGVsaW1pdGVyKHJlc3VsdCksIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVy
KHJlc3VsdDIpKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4gcmVzdWx0OworCX0KKworCS8qKgorCSAq
IEluaXQgZm9ybWF0dGVyIHByZWZlcmVuY2VzIHdpdGggRWNsaXBzZSBkZWZhdWx0IHNldHRpbmdz
LgorCSAqLworCXByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJICAg
IHN1cGVyLnNldFVwKCk7CisJCXRoaXMuZm9ybWF0dGVyUHJlZnMgPSBEZWZhdWx0Q29kZUZvcm1h
dHRlck9wdGlvbnMuZ2V0RWNsaXBzZURlZmF1bHRTZXR0aW5ncygpOworCQlpZiAoSkFWQV9QUk9K
RUNUICE9IG51bGwpIHsKKwkJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucyA9IEpBVkFfUFJPSkVDVC5n
ZXRPcHRpb25zKHRydWUpOworCQl9CisJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucy5wdXQoQ29tcGls
ZXJPcHRpb25zLk9QVElPTl9Db21wbGlhbmNlLCBDb21waWxlck9wdGlvbnMuVkVSU0lPTl8xXzgp
OworCQl0aGlzLmZvcm1hdHRlck9wdGlvbnMucHV0KENvbXBpbGVyT3B0aW9ucy5PUFRJT05fVGFy
Z2V0UGxhdGZvcm0sIENvbXBpbGVyT3B0aW9ucy5WRVJTSU9OXzFfOCk7CisJCXRoaXMuZm9ybWF0
dGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9QVElPTl9Tb3VyY2UsIENvbXBpbGVyT3B0
aW9ucy5WRVJTSU9OXzFfOCk7CisJfQorCisJLyoqCisJICogQ3JlYXRlIHByb2plY3QgYW5kIHNl
dCB0aGUgamFyIHBsYWNlaG9sZGVyLgorCSAqLworCXB1YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0
aHJvd3MgRXhjZXB0aW9uIHsKKwkJLy8gZW5zdXJlIGF1dG9idWlsZGluZyBpcyB0dXJuZWQgb2Zm
CisJCUlXb3Jrc3BhY2VEZXNjcmlwdGlvbiBkZXNjcmlwdGlvbiA9IGdldFdvcmtzcGFjZSgpLmdl
dERlc2NyaXB0aW9uKCk7CisJCWlmIChkZXNjcmlwdGlvbi5pc0F1dG9CdWlsZGluZygpKSB7CisJ
CQlkZXNjcmlwdGlvbi5zZXRBdXRvQnVpbGRpbmcoZmFsc2UpOworCQkJZ2V0V29ya3NwYWNlKCku
c2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pOworCQl9CisKKwkJaWYgKEpBVkFfUFJPSkVDVCA9
PSBudWxsKSB7CisJCQlKQVZBX1BST0pFQ1QgPSBzZXRVcEphdmFQcm9qZWN0KFBST0pFQ1RfTkFN
RSwgIjEuOCIpOyAvLyROT04tTkxTLTEkCisJCX0KKworCQlpZiAoREVCVUcpIHsKKwkJCXRoaXMu
dGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOworCQl9CisJfQorCisJLyoqCisJICog
UmVzZXQgdGhlIGphciBwbGFjZWhvbGRlciBhbmQgZGVsZXRlIHByb2plY3QuCisJICovCisJcHVi
bGljIHZvaWQgdGVhckRvd25TdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlkZWxldGVQcm9q
ZWN0KEpBVkFfUFJPSkVDVCk7IC8vJE5PTi1OTFMtMSQKKwkJSkFWQV9QUk9KRUNUID0gbnVsbDsK
KwkJaWYgKERFQlVHKSB7CisJCQlTeXN0ZW0ub3V0LnByaW50bG4oIlRpbWUgc3BlbnQgPSAiICsg
KFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGhpcy50aW1lKSk7Ly8kTk9OLU5MUy0xJAor
CQl9CisJCXN1cGVyLnRlYXJEb3duU3VpdGUoKTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRJ
bihTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlhc3NlcnROb3ROdWxsKGNvbXBpbGF0
aW9uVW5pdE5hbWUpOworCQlpbnQgZG90SW5kZXggPSBjb21waWxhdGlvblVuaXROYW1lLmluZGV4
T2YoJy4nKTsKKwkJYXNzZXJ0VHJ1ZShkb3RJbmRleCAhPSAtMSk7CisJCXJldHVybiBjb21waWxh
dGlvblVuaXROYW1lLnN1YnN0cmluZygwLCBkb3RJbmRleCkgKyBJTiArIGNvbXBpbGF0aW9uVW5p
dE5hbWUuc3Vic3RyaW5nKGRvdEluZGV4KTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRPdXQo
U3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUpIHsKKwkJYXNzZXJ0Tm90TnVsbChjb21waWxhdGlv
blVuaXROYW1lKTsKKwkJaW50IGRvdEluZGV4ID0gY29tcGlsYXRpb25Vbml0TmFtZS5pbmRleE9m
KCcuJyk7CisJCWFzc2VydFRydWUoZG90SW5kZXggIT0gLTEpOworCQlyZXR1cm4gY29tcGlsYXRp
b25Vbml0TmFtZS5zdWJzdHJpbmcoMCwgZG90SW5kZXgpICsgT1VUICsgY29tcGlsYXRpb25Vbml0
TmFtZS5zdWJzdHJpbmcoZG90SW5kZXgpOworCX0KKworCXZvaWQgYXNzZXJ0TGluZUVxdWFscyhT
dHJpbmcgYWN0dWFsQ29udGVudHMsIFN0cmluZyBvcmlnaW5hbFNvdXJjZSwgU3RyaW5nIGV4cGVj
dGVkQ29udGVudHMsIGJvb2xlYW4gY2hlY2tOdWxsKSB7CisJCWlmIChhY3R1YWxDb250ZW50cyA9
PSBudWxsKSB7CisJCQlhc3NlcnRUcnVlKCJhY3R1YWxDb250ZW50cyBpcyBudWxsIiwgY2hlY2tO
dWxsKTsKKwkJCWFzc2VydEVxdWFscyhleHBlY3RlZENvbnRlbnRzLCBvcmlnaW5hbFNvdXJjZSk7
CisJCQlyZXR1cm47CisJCX0KKwkJYXNzZXJ0U291cmNlRXF1YWxzKCJEaWZmZXJlbnQgbnVtYmVy
IG9mIGxlbmd0aCIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVyKGV4cGVj
dGVkQ29udGVudHMpLCBhY3R1YWxDb250ZW50cyk7CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRl
c3QoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlE
ZWZhdWx0Q29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVyID0gbmV3IERlZmF1bHRDb2RlRm9ybWF0
dGVyKHRoaXMuZm9ybWF0dGVyUHJlZnMsIHRoaXMuZm9ybWF0dGVyT3B0aW9ucyk7CisJCXJ1blRl
c3QoY29kZUZvcm1hdHRlciwgcGFja2FnZU5hbWUsIGNvbXBpbGF0aW9uVW5pdE5hbWUsIENvZGVG
b3JtYXR0ZXIuS19DT01QSUxBVElPTl9VTklULCAwKTsKKwl9CisKKwlwcml2YXRlIHZvaWQgcnVu
VGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdlTmFtZSwgU3Ry
aW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRpb25MZXZlbCkg
eworCQlydW5UZXN0KGNvZGVGb3JtYXR0ZXIsIHBhY2thZ2VOYW1lLCBjb21waWxhdGlvblVuaXRO
YW1lLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBmYWxzZSwgMCwgLTEpOworCX0KKwlwcml2YXRl
IHZvaWQgcnVuVGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdl
TmFtZSwgU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRp
b25MZXZlbCwgYm9vbGVhbiBjaGVja051bGwsIGludCBvZmZzZXQsIGludCBsZW5ndGgpIHsKKwkJ
cnVuVGVzdChjb2RlRm9ybWF0dGVyLCBwYWNrYWdlTmFtZSwgY29tcGlsYXRpb25Vbml0TmFtZSwg
a2luZCwgaW5kZW50YXRpb25MZXZlbCwgY2hlY2tOdWxsLCBvZmZzZXQsIGxlbmd0aCwgbnVsbCk7
CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRlc3QoQ29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVy
LCBTdHJpbmcgcGFja2FnZU5hbWUsIFN0cmluZyBjb21waWxhdGlvblVuaXROYW1lLCBpbnQga2lu
ZCwgaW50IGluZGVudGF0aW9uTGV2ZWwsIGJvb2xlYW4gY2hlY2tOdWxsLCBpbnQgb2Zmc2V0LCBp
bnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvcikgeworCQl0cnkgeworCQkJSUNvbXBpbGF0
aW9uVW5pdCBzb3VyY2VVbml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIi
LCBwYWNrYWdlTmFtZSwgZ2V0SW4oY29tcGlsYXRpb25Vbml0TmFtZSkpOyAvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwkJCVN0cmluZyBzb3VyY2UgPSBzb3VyY2VVbml0LmdldFNvdXJjZSgp
OworCQkJYXNzZXJ0Tm90TnVsbChzb3VyY2UpOworCQkJSUNvbXBpbGF0aW9uVW5pdCBvdXRwdXRV
bml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIiLCBwYWNrYWdlTmFtZSwg
Z2V0T3V0KGNvbXBpbGF0aW9uVW5pdE5hbWUpKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJCQlhc3NlcnROb3ROdWxsKG91dHB1dFVuaXQpOworCQkJU3RyaW5nIHJlc3VsdDsKKwkJCWlm
IChsZW5ndGggPT0gLTEpIHsKKwkJCQlyZXN1bHQgPSBydW5Gb3JtYXR0ZXIoY29kZUZvcm1hdHRl
ciwgc291cmNlLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBvZmZzZXQsIHNvdXJjZS5sZW5ndGgo
KSwgbGluZVNlcGFyYXRvciwgdHJ1ZSk7CisJCQl9IGVsc2UgeworCQkJCXJlc3VsdCA9IHJ1bkZv
cm1hdHRlcihjb2RlRm9ybWF0dGVyLCBzb3VyY2UsIGtpbmQsIGluZGVudGF0aW9uTGV2ZWwsIG9m
ZnNldCwgbGVuZ3RoLCBsaW5lU2VwYXJhdG9yLCB0cnVlKTsKKwkJCX0KKwkJCWFzc2VydExpbmVF
cXVhbHMocmVzdWx0LCBzb3VyY2UsIG91dHB1dFVuaXQuZ2V0U291cmNlKCksIGNoZWNrTnVsbCk7
CisJCX0gY2F0Y2ggKEphdmFNb2RlbEV4Y2VwdGlvbiBlKSB7CisJCQllLnByaW50U3RhY2tUcmFj
ZSgpOworCQkJYXNzZXJ0VHJ1ZShmYWxzZSk7CisJCX0KKwl9CisJCisJcHVibGljIHZvaWQgdGVz
dExhbWJkYSgpIHsKKwkJcnVuVGVzdCgidGVzdExhbWJkYSIsICJBLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisJCisJcHVibGljIHZvaWQgdGVzdFJlZmVyZW5jZUV4cHJl
c3Npb24oKSB7CisJCXJ1blRlc3QoInRlc3RSZWZlcmVuY2VFeHByZXNzaW9uIiwgIkEuamF2YSIp
Oy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDAo
KSB7CisJCXJ1blRlc3QoInRlc3QwMDAiLCAiSS5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04t
TkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAwMSgpIHsKKwkJcnVuVGVzdCgidGVzdDAw
MSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMg
dm9pZCB0ZXN0MDAyKCkgeworCQlydW5UZXN0KCJ0ZXN0MDAyIiwgIlguamF2YSIpOy8vJE5PTi1O
TFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDMoKSB7CisJCXJ1
blRlc3QoInRlc3QwMDMiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJ
fQorCisJcHVibGljIHZvaWQgdGVzdDAwNCgpIHsKKwkJcnVuVGVzdCgidGVzdDAwNCIsICJYLmph
dmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0
MDA1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDA1IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8k
Tk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDYoKSB7CisJCXJ1blRlc3QoInRl
c3QwMDYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVi
bGljIHZvaWQgdGVzdDAwNygpIHsKKwkJcnVuVGVzdCgidGVzdDAwNyIsICJYLmphdmEiKTsvLyRO
T04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDA4KCkgewor
CQlydW5UZXN0KCJ0ZXN0MDA4IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDkoKSB7CisJCXJ1blRlc3QoInRlc3QwMDkiLCAi
WC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQg
dGVzdDAxMCgpIHsKKwkJcnVuVGVzdCgidGVzdDAxMCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDExKCkgeworCQlydW5UZXN0
KCJ0ZXN0MDExIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKwor
CXB1YmxpYyB2b2lkIHRlc3QwMTIoKSB7CisJCXJ1blRlc3QoInRlc3QwMTIiLCAiWC5qYXZhIik7
Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxMygp
IHsKKwkJcnVuVGVzdCgidGVzdDAxMyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1O
TFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE0KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE0
IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2
b2lkIHRlc3QwMTUoKSB7CisJCXJ1blRlc3QoInRlc3QwMTUiLCAiWC5qYXZhIik7Ly8kTk9OLU5M
Uy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxNigpIHsKKwkJcnVu
VGVzdCgidGVzdDAxNiIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9
CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE3KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE3IiwgIlguamF2
YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3Qw
MTgoKSB7CisJCXJ1blRlc3QoInRlc3QwMTgiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyRO
T04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxOSgpIHsKKwkJcnVuVGVzdCgidGVz
dDAxOSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJs
aWMgdm9pZCB0ZXN0MDIwKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIwIiwgIlguamF2YSIpOy8vJE5P
Ti1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjEoKSB7CisJ
CXJ1blRlc3QoInRlc3QwMjEiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyMigpIHsKKwkJcnVuVGVzdCgidGVzdDAyMiIsICJY
LmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0
ZXN0MDIzKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIzIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQg
Ly8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjQoKSB7CisJCXJ1blRlc3Qo
InRlc3QwMjQiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJ
cHVibGljIHZvaWQgdGVzdDAyNSgpIHsKKwkJcnVuVGVzdCgidGVzdDAyNSIsICJYLmphdmEiKTsv
LyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI2KCkg
eworCQlydW5UZXN0KCJ0ZXN0MDI2IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5M
Uy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjcoKSB7CisJCXJ1blRlc3QoInRlc3QwMjci
LCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZv
aWQgdGVzdDAyOCgpIHsKKwkJcnVuVGVzdCgidGVzdDAyOCIsICJYLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI5KCkgeworCQlydW5U
ZXN0KCJ0ZXN0MDI5IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0K
KworCXB1YmxpYyB2b2lkIHRlc3QwMzAoKSB7CisJCXJ1blRlc3QoInRlc3QwMzAiLCAiWC5qYXZh
Iik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAz
MSgpIHsKKwkJcnVuVGVzdCgidGVzdDAzMSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5P
Ti1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDMyKCkgeworCQlydW5UZXN0KCJ0ZXN0
MDMyIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1Ymxp
YyB2b2lkIHRlc3QwMzMoKSB7CisJCXJ1blRlc3QoInRlc3QwMzMiLCAiWC5qYXZhIik7Ly8kTk9O
LU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNCgpIHsKKwkJ
cnVuVGVzdCgidGVzdDAzNCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQK
Kwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDM1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM1IiwgIlgu
amF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRl
c3QwMzYoKSB7CisJCXJ1blRlc3QoInRlc3QwMzYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNygpIHsKKwkJcnVuVGVzdCgi
dGVzdDAzNyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlw
dWJsaWMgdm9pZCB0ZXN0MDM4KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM4IiwgIlguamF2YSIpOy8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzkoKSB7
CisJCXJ1blRlc3QoInRlc3QwMzkiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxT
LTIkCisJfQorfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dExhbWJkYS9BX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RMYW1iZGEvQV9pbi5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLjM5NzQ0ZDcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RM
YW1iZGEvQV9pbi5qYXZhCkBAIC0wLDAgKzEsNDQgQEAKKy8qKgorICogVGVzdAorICoKKyAqLwor
cGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBv
cnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5k
cyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsIENsb25lYWJsZSwgU2VyaWFs
aXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRh
cygpIHsKKwkJUnVubmFibGUgYSA9ICgpIC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVz
dE1ldCh5b3UpOworCQkJaGVyZS5udW1iZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEg
PSB4IC0+IHg7CisKKwkJRnVuYyBpZEIgPSB4IC0+IHsgcmV0dXJuIHg7IH07CisJCQorCQlGdW5j
IGlkQyA9IHggICAtPiAgIHg7CisKKwkJRnVuYyBpZDIgPSB4IC0+IHsKKwkJCWlmICh4ID09IG51
bGwpCisJCQl7CisJCQkJcmV0dXJuIG51bGw7CisJCQl9CisJCQllbHNlCisJCQkJcmV0dXJuIHg7
CisJCX07CisJCQorCQlJbWFnaW5hYmxlRnVuY3Rpb248U3RyaW5nLCBJbnRlZ2VyPiBmID0KKwkJ
CShTdHJpbmcgaW5wdXQpIC0+IGlucHV0Lmxlbmd0aCgpOworCisJCQlJbWFnaW5hYmxlRnVuY3Rp
b248U3RyaW5nLCBJbnRlZ2VyPiBmMiA9IChTdHJpbmcgaW5wdXQpIC0+IHsgcmV0dXJuIGlucHV0
Lmxlbmd0aCgpICsgbmV3IExldHNQcmV0ZW5kKCkgeyBpbnQgaG93TWFueSgpIHsgcmV0dXJuIDQy
OyB9IH0KKwkJCQkJCisuaG93TWFueSgpOyB9OworCX0KKworfQpcIE5vIG5ld2xpbmUgYXQgZW5k
IG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdExhbWJkYS9BX291dC5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0TGFt
YmRhL0Ffb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMWJjZDdj
MwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdExhbWJkYS9BX291dC5qYXZhCkBAIC0wLDAgKzEs
NTEgQEAKKy8qKgorICogVGVzdAorICoKKyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBv
cnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKwor
cHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVu
dHMgUnVubmFibGUsCisJCUNsb25lYWJsZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBy
dW4oKSB7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRhcygpIHsKKwkJUnVubmFibGUgYSA9ICgp
IC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVzdE1ldCh5b3UpOworCQkJaGVyZS5udW1i
ZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEgPSB4IC0+IHg7CisKKwkJRnVuYyBpZEIg
PSB4IC0+IHsKKwkJCXJldHVybiB4OworCQl9OworCisJCUZ1bmMgaWRDID0geCAtPiB4OworCisJ
CUZ1bmMgaWQyID0geCAtPiB7CisJCQlpZiAoeCA9PSBudWxsKSB7CisJCQkJcmV0dXJuIG51bGw7
CisJCQl9IGVsc2UKKwkJCQlyZXR1cm4geDsKKwkJfTsKKworCQlJbWFnaW5hYmxlRnVuY3Rpb248
U3RyaW5nLCBJbnRlZ2VyPiBmID0gKFN0cmluZyBpbnB1dCkgLT4gaW5wdXQKKwkJCQkubGVuZ3Ro
KCk7CisKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZjIgPSAoU3RyaW5n
IGlucHV0KSAtPiB7CisJCQlyZXR1cm4gaW5wdXQubGVuZ3RoKCkgKyBuZXcgTGV0c1ByZXRlbmQo
KSB7CisJCQkJaW50IGhvd01hbnkoKSB7CisJCQkJCXJldHVybiA0MjsKKwkJCQl9CisJCQl9CisK
KwkJCS5ob3dNYW55KCk7CisJCX07CisJfQorCit9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmls
ZQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNlRXhwcmVzc2lvbi9BX2luLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3RSZWZlcmVuY2VFeHByZXNzaW9uL0FfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi40NDk5NDY3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNlRXhw
cmVzc2lvbi9BX2luLmphdmEKQEAgLTAsMCArMSwyMSBAQAorLyoqCisgKiBUZXN0CisgKgorICov
CitwYWNrYWdlIHAxLnAyLnRlc3Q7CisKK2ltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2lt
cG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOworCitwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQSBleHRl
bmRzIGphdmEubGFuZy5PYmplY3QgaW1wbGVtZW50cyBSdW5uYWJsZSwgQ2xvbmVhYmxlLCBTZXJp
YWxpemFibGUgeworCXB1YmxpYyB2b2lkIHJ1bigpIHsKKwl9CisKKwlwcml2YXRlIHN0YXRpYyBm
aW5hbCAgIEZ1bmN0aW9uYWxpc2g8TGlzdDxJbnRlZ2VyPiwgSW50ZWdlcj4gV0hBVEVWRVIgPSBM
aXN0PCBJbnRlZ2VyID4gOjogc2l6ZSA7CisJCisJcHVibGljIHZvaWQgcmVmZXJlbmNlRXhwcmVz
c2lvbigpIHsKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZnVuYyA9IEts
YXp6CisJCQkJOjogIG1ldGhvZDsgCisJfQkKKworfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZp
bGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgv
dGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwLi4yNjUyNDA0Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNl
RXhwcmVzc2lvbi9BX291dC5qYXZhCkBAIC0wLDAgKzEsMjEgQEAKKy8qKgorICogVGVzdAorICoK
KyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7
CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEg
ZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsCisJCUNsb25lYWJs
ZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCisJcHJpdmF0ZSBz
dGF0aWMgZmluYWwgRnVuY3Rpb25hbGlzaDxMaXN0PEludGVnZXI+LCBJbnRlZ2VyPiBXSEFURVZF
UiA9IExpc3Q8SW50ZWdlcj46OnNpemU7CisKKwlwdWJsaWMgdm9pZCByZWZlcmVuY2VFeHByZXNz
aW9uKCkgeworCQlJbWFnaW5hYmxlRnVuY3Rpb248U3RyaW5nLCBJbnRlZ2VyPiBmdW5jID0gS2xh
eno6Om1ldGhvZDsKKwl9CisKK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2Zvcm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZv
cm1hdHRlclZpc2l0b3IuamF2YQppbmRleCAzYjQ5ZDNkLi40MGQ1ODU4IDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zv
cm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3Jt
YXR0ZXJWaXNpdG9yLmphdmEKQEAgLTE1LDYgKzE1LDcgQEAKICAqICAgICBOYW5kYSBGaXJkYXVz
aSAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDI5ODg0NAogICogICAgIEplc3BlciBTIE1vbGxlciAt
IENvbnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjE3MwogICogICAgICAgICAgICAgICAgICAgICAgIENv
bnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjE3NAorICogICAgICAgICAgICAgICAgICAgICAgIENvbnRy
aWJ1dGlvbiBmb3IgYnVnIDQwMjg5MgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdl
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7CiAKQEAgLTMyLDYgKzMzLDcgQEAK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFic3RyYWN0TWV0
aG9kRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmFzdC5BYnN0cmFjdFZhcmlhYmxlRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvbXBpbGVyLmFzdC5BbGxvY2F0aW9uRXhwcmVzc2lvbjsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb247CiBpbXBvcnQgb3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uTWV0aG9kRGVjbGFy
YXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bcmd1
bWVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFycmF5
QWxsb2NhdGlvbkV4cHJlc3Npb247CkBAIC02MzQsMTYgKzYzNiw3IEBACiAKIAkJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciwgdHJ1
ZSk7CiAKLQkJLyoKLQkJICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKLQkJICovCi0JCWlu
dCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChleHRyYURpbWVuc2lv
bnMgIT0gMCkgewotCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKysp
IHsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lTEJSQUNLRVQpOwotCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkgfQotCQl9CisJCWZvcm1hdEV4dHJhRGltZW5z
aW9ucyhmaWVsZERlY2xhcmF0aW9uLnR5cGUpOwogCiAJCS8qCiAJCSAqIEZpZWxkIGluaXRpYWxp
emF0aW9uCkBAIC02ODMsNiArNjc2LDQxIEBACiAJCX0gZWxzZSB7CiAJCQl0aGlzLnNjcmliZS5z
cGFjZSgpOwogCQkJdGhpcy5zY3JpYmUucHJpbnRDb21tZW50KENvZGVGb3JtYXR0ZXIuS19VTktO
T1dOLCBTY3JpYmUuQkFTSUNfVFJBSUxJTkdfQ09NTUVOVCk7CisJCX0KKwl9CisKKwlwcml2YXRl
IHZvaWQgZm9ybWF0RXh0cmFEaW1lbnNpb25zKFR5cGVSZWZlcmVuY2UgdHlwZVJlZmVyZW5jZSkg
eworCQkvKgorCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucworCQkgKi8KKwkJaW50IGV4
dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKKwkJaW50IGFuY2hvciA9IHR5cGVSZWZl
cmVuY2UgIT0gbnVsbCA/ICh0eXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSAtIGV4dHJhRGltZW5z
aW9ucykgOiAwOworCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIGZvcm1hdERpbWVuc2lvbnMo
dHlwZVJlZmVyZW5jZSwgYW5jaG9yLCBleHRyYURpbWVuc2lvbnMsIHRydWUpOworCX0KKworCXBy
aXZhdGUgdm9pZCBmb3JtYXRMZWFkaW5nRGltZW5zaW9ucyhUeXBlUmVmZXJlbmNlIHR5cGVSZWZl
cmVuY2UsIGJvb2xlYW4gc3BhY2VCZWZvcmVBbm5vdGF0aW9uKSB7CisJCWludCBsZWFkaW5nRGlt
ZW5zaW9ucyA9IE1hdGgubWluKGdldERpbWVuc2lvbnMoKSwgdHlwZVJlZmVyZW5jZSAhPSBudWxs
ID8gdHlwZVJlZmVyZW5jZS5kaW1lbnNpb25zKCkgOiAwKTsKKwkJaWYgKGxlYWRpbmdEaW1lbnNp
b25zICE9IDApIGZvcm1hdERpbWVuc2lvbnModHlwZVJlZmVyZW5jZSwgMCwgbGVhZGluZ0RpbWVu
c2lvbnMsIHNwYWNlQmVmb3JlQW5ub3RhdGlvbik7CisJfQorCisJcHJpdmF0ZSB2b2lkIGZvcm1h
dERpbWVuc2lvbnMoVHlwZVJlZmVyZW5jZSB0eXBlUmVmZXJlbmNlLCBpbnQgYW5jaG9yLCBpbnQg
Y291bnQsIGJvb2xlYW4gc3BhY2VCZWZvcmVBbm5vdGF0aW9uKSB7CisJCWlmIChjb3VudCAhPSAw
KSB7CisJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdf
YnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJCXRoaXMuc2NyaWJlLnNwYWNl
KCk7CisJCQl9CisJCQlBbm5vdGF0aW9uW11bXSBhbm5vdGF0aW9uc09uRGltZW5zaW9ucyA9IHR5
cGVSZWZlcmVuY2UgIT0gbnVsbCA/IHR5cGVSZWZlcmVuY2UuZ2V0QW5ub3RhdGlvbnNPbkRpbWVu
c2lvbnMoKSA6IG51bGw7CisJCQkgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CisJ
CQkJaW50IGRpbWVuc2lvbkluZGV4ID0gYW5jaG9yICsgaTsKKwkJCQlpZiAoYW5ub3RhdGlvbnNP
bkRpbWVuc2lvbnMgIT0gbnVsbCAmJiBhbm5vdGF0aW9uc09uRGltZW5zaW9ucy5sZW5ndGggPiBk
aW1lbnNpb25JbmRleCkgeworCQkJCQlib29sZWFuIGhhZEFubm90YXRpb25zID0gZm9ybWF0SW5s
aW5lQW5ub3RhdGlvbnMoYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnNbZGltZW5zaW9uSW5kZXhdLCBz
cGFjZUJlZm9yZUFubm90YXRpb24gJiYgaSA9PSAwKTsKKwkJCQkJaWYgKGhhZEFubm90YXRpb25z
ICYmIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRf
aW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCQkJfQorCQkJ
IAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJB
Q0tFVCk7CisJCQkgCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVuX2Jy
YWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkgCQl0aGlzLnNjcmliZS5zcGFj
ZSgpOworCQkJIAl9CisJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKKwkJCSB9CiAJCX0KIAl9CiAKQEAgLTc2MywxNiArNzkx
LDcgQEAKIAkJCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZUlkZW50aWZpZXIsIGZhbHNlKTsKIAkJCQkJfQogCi0JCQkJCS8qCi0JCQkJCSAqIENo
ZWNrIGZvciBleHRyYSBkaW1lbnNpb25zCi0JCQkJCSAqLwotCQkJCQlpbnQgZXh0cmFEaW1lbnNp
b25zID0gZ2V0RGltZW5zaW9ucygpOwotCQkJCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsK
LQkJCQkJCSBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgZXh0cmFEaW1lbnNpb25zOyBpbmRl
eCsrKSB7Ci0JCQkJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4o
VGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJCQkJIH0KLQkJCQkJfQorCQkJ
CQlmb3JtYXRFeHRyYURpbWVuc2lvbnMoZmllbGREZWNsYXJhdGlvbi50eXBlKTsKIAogCQkJCQkv
KgogCQkJCQkgKiBGaWVsZCBpbml0aWFsaXphdGlvbgpAQCAtMTY3NywxNiArMTY5Niw3IEBACiAJ
CSAJKi8KIAkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2Vu
TmFtZUlkZW50aWZpZXIsIGZhbHNlKTsKIAkJfQotCQkvKgotCQkgKiBDaGVjayBmb3IgZXh0cmEg
ZGltZW5zaW9ucwotCQkgKi8KLQkJaW50IGV4dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMo
KTsKLQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkgZm9yIChpbnQgaW5kZXggPSAw
OyBpbmRleCA8IGV4dHJhRGltZW5zaW9uczsgaW5kZXgrKykgewotCQkJIAl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkgCXRo
aXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VU
KTsKLQkJCSB9Ci0JCX0KKwkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKGxvY2FsRGVjbGFyYXRpb24u
dHlwZSk7CiAKIAkJZmluYWwgRXhwcmVzc2lvbiBpbml0aWFsaXphdGlvbiA9IGxvY2FsRGVjbGFy
YXRpb24uaW5pdGlhbGl6YXRpb247CiAJCWlmIChpbml0aWFsaXphdGlvbiAhPSBudWxsKSB7CkBA
IC0yMzQwLDYgKzIzNTAsOCBAQAogCQl0aGlzLmxvY2FsU2Nhbm5lci5yZXNldFRvKHRoaXMuc2Ny
aWJlLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uLCB0aGlzLnNjcmliZS5zY2FubmVyRW5kUG9zaXRp
b24gLSAxKTsKIAkJaW50IGRpbWVuc2lvbnMgPSAwOwogCQlpbnQgYmFsYW5jZSA9IDA7CisJCWJv
b2xlYW4gaW5Bbm5vdGF0aW9uID0gZmFsc2U7CisJCWludCBwYXJlbkJhbGFuY2UgPSAwOyAvLyBm
b3IgaW5saW5lIGFubm90YXRpb25zCiAJCXRyeSB7CiAJCQlpbnQgdG9rZW47CiAJCQlsb29wOiB3
aGlsZSAoKHRva2VuID0gdGhpcy5sb2NhbFNjYW5uZXIuZ2V0TmV4dFRva2VuKCkpICE9IFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZUVPRikgewpAQCAtMjM0Nyw2ICsyMzU5LDIwIEBACiAJCQkJCWNh
c2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQ6CiAJCQkJCQlkaW1lbnNpb25zKys7
CiAJCQkJCQliYWxhbmNlLS07CisJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVMUEFSRU46CisJCQkJCQlwYXJlbkJhbGFuY2UrKzsKKwkJCQkJCWJyZWFrOwor
CQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJQQVJFTjoKKwkJCQkJCWlmICghIGlu
QW5ub3RhdGlvbikgYnJlYWsgbG9vcDsKKwkJCQkJCWlmICgtLXBhcmVuQmFsYW5jZSA9PSAwKSBp
bkFubm90YXRpb24gPSBmYWxzZTsKKwkJCQkJCWJyZWFrOworCQkJCQljYXNlIFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZUFUIDoKKwkJCQkJCWluQW5ub3RhdGlvbiA9IHRydWU7CisJCQkJCQlicmVh
azsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyIDoKKwkJCQkJ
Y2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVFUVVBTCA6CisJCQkJCQlpZiAocGFyZW5CYWxh
bmNlID09IDAgJiYgISBpbkFubm90YXRpb24pIGJyZWFrIGxvb3A7CiAJCQkJCQlicmVhazsKIAkJ
CQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0JMT0NLIDoKIAkJCQkJY2Fz
ZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0pBVkFET0MgOgpAQCAtMjM1Niw3ICsy
MzgyLDcgQEAKIAkJCQkJCWJhbGFuY2UrKzsKIAkJCQkJCWJyZWFrOwogCQkJCQlkZWZhdWx0Ogot
CQkJCQkJYnJlYWsgbG9vcDsKKwkJCQkJCWlmIChwYXJlbkJhbGFuY2UgPT0gMCkgYnJlYWsgbG9v
cDsKIAkJCQl9CiAJCQl9CiAJCX0gY2F0Y2goSW52YWxpZElucHV0RXhjZXB0aW9uIGUpIHsKQEAg
LTI0MDAsNiArMjQyNiwyOCBAQAogCQkJCX0KIAkJCX0KIAkJCXJldHVybiAgdG9rZW4gPT0gdG9r
ZW5OYW1lOworCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7CisJCQkvLyBpZ25v
cmUKKwkJfQorCQlyZXR1cm4gZmFsc2U7CisJfQorCisJcHJpdmF0ZSBib29sZWFuIGlzTmV4dFRv
a2VuUHVuY3R1YXRpb24oKSB7CisJCXRoaXMubG9jYWxTY2FubmVyLnJlc2V0VG8odGhpcy5zY3Jp
YmUuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24sIHRoaXMuc2NyaWJlLnNjYW5uZXJFbmRQb3NpdGlv
biAtIDEpOworCQl0cnkgeworCQkJaW50IHRva2VuID0gdGhpcy5sb2NhbFNjYW5uZXIuZ2V0TmV4
dFRva2VuKCk7CisJCQlsb29wOiB3aGlsZSh0cnVlKSB7CisJCQkJc3dpdGNoKHRva2VuKSB7CisJ
CQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9DSyA6CisJCQkJCWNh
c2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoKKwkJCQkJY2FzZSBU
ZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0xJTkUgOgorCQkJCQkJdG9rZW4gPSB0aGlz
LmxvY2FsU2Nhbm5lci5nZXROZXh0VG9rZW4oKTsKKwkJCQkJCWNvbnRpbnVlIGxvb3A7CisJCQkJ
CWRlZmF1bHQ6CisJCQkJCQlicmVhayBsb29wOworCQkJCX0KKwkJCX0KKwkJCXJldHVybiAhIChT
Y2FubmVyLmlzTGl0ZXJhbCh0b2tlbikgfHwgU2Nhbm5lci5pc0tleXdvcmQodG9rZW4pIHx8IFNj
YW5uZXIuaXNJZGVudGlmaWVyKHRva2VuKSk7CiAJCX0gY2F0Y2goSW52YWxpZElucHV0RXhjZXB0
aW9uIGUpIHsKIAkJCS8vIGlnbm9yZQogCQl9CkBAIC0yNjI0LDggKzI2NzIsMTUgQEAKIAkJICov
CiAJCWludCBleHRyYURpbWVuc2lvbnMgPSBhbm5vdGF0aW9uVHlwZU1lbWJlckRlY2xhcmF0aW9u
LmV4dGVuZGVkRGltZW5zaW9uczsKIAkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7CisJCQkK
KwkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFj
a2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsK
KwkJCX0KIAkJCSBmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7CiAJ
CQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxC
UkFDS0VUKTsKKwkJCSAJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5f
YnJhY2tldHNfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKKwkJCSAJCXRoaXMuc2NyaWJlLnNw
YWNlKCk7CisJCQkgCX0KIAkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwogCQkJIH0KIAkJfQpAQCAtMjY4MSwxOCArMjczNiw3
IEBACiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5h
bWVJZGVudGlmaWVyLCB0cnVlKTsKIAkJfQogCi0KLQkJLyoKLQkJICogQ2hlY2sgZm9yIGV4dHJh
IGRpbWVuc2lvbnMKLQkJICovCi0JCWludCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25z
KCk7Ci0JCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewotCQkJIGZvciAoaW50IGkgPSAwOyBp
IDwgZXh0cmFEaW1lbnNpb25zOyBpKyspIHsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9r
ZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJIAl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkgfQot
CQl9Ci0KKwkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKGFyZ3VtZW50LnR5cGUpOwogCQlyZXR1cm4g
ZmFsc2U7CiAJfQogCkBAIC0yNzE0LDYgKzI3NTgsOSBAQAogCQkJZmluYWwgRXhwcmVzc2lvbltd
IGRpbWVuc2lvbnMgPSBhcnJheUFsbG9jYXRpb25FeHByZXNzaW9uLmRpbWVuc2lvbnM7CiAJCQlp
bnQgZGltZW5zaW9uc0xlbmd0aCA9IGRpbWVuc2lvbnMubGVuZ3RoOwogCQkJZm9yIChpbnQgaSA9
IDA7IGkgPCBkaW1lbnNpb25zTGVuZ3RoOyBpKyspIHsKKwkJCQlpZiAoYXJyYXlBbGxvY2F0aW9u
RXhwcmVzc2lvbi5hbm5vdGF0aW9uc09uRGltZW5zaW9ucyAhPSBudWxsKSB7CisJCQkJCWZvcm1h
dElubGluZUFubm90YXRpb25zKGFycmF5QWxsb2NhdGlvbkV4cHJlc3Npb24uYW5ub3RhdGlvbnNP
bkRpbWVuc2lvbnNbaV0sIGkgPT0gMCk7CisJCQkJfQogCQkJCWlmICh0aGlzLnByZWZlcmVuY2Vz
Lmluc2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0X2luX2FycmF5X2FsbG9jYXRpb25f
ZXhwcmVzc2lvbikgewogCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwogCQkJCX0KQEAgLTI4OTYs
MjggKzI5NDMsMjYgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAorCXByaXZhdGUgdm9pZCBmb3Jt
YXRBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UoQXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
IGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgeworCQlmaW5hbCBpbnQgbnVtYmVyT2ZQYXJl
bnMgPSAoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLlBhcmVudGhl
c2l6ZWRNQVNLKSA+PiBBU1ROb2RlLlBhcmVudGhlc2l6ZWRTSElGVDsKKwkJaWYgKG51bWJlck9m
UGFyZW5zID4gMCkgeworCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOworCQl9CisJCWZvcm1h
dFF1YWxpZmllZFR5cGVSZWZlcmVuY2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKTsKKwkJ
Zm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVl
KTsKKwkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgeworCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhl
c2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJl
bnMpOworCQl9CisJfQorCiAJLyoqCiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIuQVNUVmlzaXRvciN2aXNpdChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGls
ZXIuYXN0LkFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvbXBpbGVyLmxvb2t1cC5CbG9ja1Njb3BlKQogCSAqLwogCXB1YmxpYyBib29sZWFuIHZp
c2l0KAotCQlBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UgYXJyYXlRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlLAotCQlCbG9ja1Njb3BlIHNjb3BlKSB7CisJCQlBcnJheVF1YWxpZmllZFR5cGVSZWZl
cmVuY2UgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLAorCQkJQmxvY2tTY29wZSBzY29wZSkg
ewogCi0JCQlmaW5hbCBpbnQgbnVtYmVyT2ZQYXJlbnMgPSAoYXJyYXlRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlLmJpdHMgJiBBU1ROb2RlLlBhcmVudGhlc2l6ZWRNQVNLKSA+PiBBU1ROb2RlLlBhcmVu
dGhlc2l6ZWRTSElGVDsKLQkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKLQkJCQltYW5hZ2VP
cGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LCBudW1iZXJPZlBhcmVucyk7Ci0JCQl9Ci0JCQl0aGlzLnNjcmliZS5wcmludEFycmF5UXVhbGlm
aWVkUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50b2tlbnMubGVuZ3RoLCBh
cnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlRW5kKTsKLQkJCWludCBkaW1lbnNpb25z
ID0gZ2V0RGltZW5zaW9ucygpOwotCQkJaWYgKGRpbWVuc2lvbnMgIT0gMCkgewotCQkJCWZvciAo
aW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJCXRoaXMuc2NyaWJlLnByaW50
TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQkJdGhpcy5z
Y3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwot
CQkJCX0KLQkJCX0KLQkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKLQkJCQltYW5hZ2VDbG9z
aW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBu
dW1iZXJPZlBhcmVucyk7Ci0JCQl9CisJCQlmb3JtYXRBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKTsKIAkJCXJldHVybiBmYWxzZTsKIAl9CiAK
QEAgLTI5MjgsMjEgKzI5NzMsNyBAQAogCQlBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UgYXJy
YXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLAogCQlDbGFzc1Njb3BlIHNjb3BlKSB7CiAKLQkJCWZp
bmFsIGludCBudW1iZXJPZlBhcmVucyA9IChhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYml0
cyAmIEFTVE5vZGUuUGFyZW50aGVzaXplZE1BU0spID4+IEFTVE5vZGUuUGFyZW50aGVzaXplZFNI
SUZUOwotCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewotCQkJCW1hbmFnZU9wZW5pbmdQYXJl
bnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9m
UGFyZW5zKTsKLQkJCX0KLQkJCXRoaXMuc2NyaWJlLnByaW50QXJyYXlRdWFsaWZpZWRSZWZlcmVu
Y2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnRva2Vucy5sZW5ndGgsIGFycmF5UXVhbGlm
aWVkVHlwZVJlZmVyZW5jZS5zb3VyY2VFbmQpOwotCQkJaW50IGRpbWVuc2lvbnMgPSBnZXREaW1l
bnNpb25zKCk7Ci0JCQlpZiAoZGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkJZm9yIChpbnQgaSA9IDA7
IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4o
VGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQl0aGlzLnNjcmliZS5wcmlu
dE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJfQotCQkJ
fQotCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewotCQkJCW1hbmFnZUNsb3NpbmdQYXJlbnRo
ZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFy
ZW5zKTsKLQkJCX0KKwkJCWZvcm1hdEFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShhcnJheVF1
YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCQkJcmV0dXJuIGZhbHNlOwogCX0KIApAQCAtMjk4MSwy
MCArMzAxMiwxOCBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVu
aW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBh
cmVucyk7CiAJCX0KKwkJaWYgKGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxs
KSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNb
MF0sIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVS
RU5DRV9FWFBFQ1RFRFRPS0VOUyk7CiAKIAkJaW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25z
KCk7CiAJCWlmIChkaW1lbnNpb25zICE9IDApIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmlu
c2VydF9zcGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNl
KSB7Ci0JCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBp
IDwgZGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2Vz
Lmluc2VydF9zcGFjZV9iZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7
Ci0JCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50
TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCX0KKwkJCWZv
cm1hdERpbWVuc2lvbnMoYXJyYXlUeXBlUmVmZXJlbmNlLCAwLCBkaW1lbnNpb25zLCB0cnVlKTsK
KwkJfQorCQkvLyBkaW1lbnNpb25zIHRoZSBudW1iZXIgb2YgdmlzaWJsZSBicmFja2V0LXBhaXJz
LiBFbGxpcHNpcyBpcyBhbiBleHRyYSBkaW1lbnNpb24KKwkJaWYgKChhcnJheVR5cGVSZWZlcmVu
Y2UuYml0cyAmIEFTVE5vZGUuSXNWYXJBcmdzKSAhPSAwCisJCQkJJiYgYXJyYXlUeXBlUmVmZXJl
bmNlLmFubm90YXRpb25zT25EaW1lbnNpb25zICE9IG51bGwKKwkJCQkmJiBhcnJheVR5cGVSZWZl
cmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMubGVuZ3RoID4gZGltZW5zaW9ucykgeworCQkJ
CWZvcm1hdElubGluZUFubm90YXRpb25zKGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09u
RGltZW5zaW9uc1tkaW1lbnNpb25zXSwgdHJ1ZSk7CiAJCX0KIAkJaWYgKG51bWJlck9mUGFyZW5z
ID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5VHlw
ZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwpAQCAtMzAxMywxOSArMzA0MiwxNyBAQAogCQlp
ZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4
cHJlc3Npb24oYXJyYXlUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYg
KGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5v
dGF0aW9ucyhhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJdGhp
cy5zY3JpYmUucHJpbnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVSRU5DRV9FWFBFQ1RFRFRPS0VO
Uyk7CiAJCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwogCQlpZiAoZGltZW5zaW9u
cyAhPSAwKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29w
ZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJl
LnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykg
ewotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vl
bl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5z
cGFjZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQl9CisJCQlmb3JtYXREaW1lbnNpb25zKGFycmF5
VHlwZVJlZmVyZW5jZSwgMCwgZGltZW5zaW9ucywgdHJ1ZSk7CisJCX0KKwkJLy8gZGltZW5zaW9u
cyB0aGUgbnVtYmVyIG9mIHZpc2libGUgYnJhY2tldC1wYWlycy4gRWxsaXBzaXMgaXMgYW4gZXh0
cmEgZGltZW5zaW9uCisJCWlmICgoYXJyYXlUeXBlUmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLklz
VmFyQXJncykgIT0gMAorCQkJCSYmIGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc09uRGlt
ZW5zaW9ucyAhPSBudWxsCisJCQkJJiYgYXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zT25E
aW1lbnNpb25zLmxlbmd0aCA+IGRpbWVuc2lvbnMpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0
aW9ucyhhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnNbZGltZW5zaW9u
c10sIHRydWUpOwogCQl9CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNs
b3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVR5cGVSZWZlcmVuY2UsIG51bWJlck9m
UGFyZW5zKTsKQEAgLTQ1MjAsMTYgKzQ1NDcsNyBAQAogCQkJCQl0aGlzLnByZWZlcmVuY2VzLmlu
c2VydF9zcGFjZV9hZnRlcl9jb21tYV9pbl9tZXRob2RfZGVjbGFyYXRpb25fcGFyYW1ldGVycywK
IAkJCQkJdGhpcy5wcmVmZXJlbmNlcy5hbGlnbm1lbnRfZm9yX3BhcmFtZXRlcnNfaW5fbWV0aG9k
X2RlY2xhcmF0aW9uKTsKIAotCQkJCS8qCi0JCQkJICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lv
bnMKLQkJCQkgKi8KLQkJCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwot
CQkJCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgewotCQkJCQkgZm9yIChpbnQgaSA9IDA7IGkg
PCBleHRyYURpbWVuc2lvbnM7IGkrKykgewotCQkJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQkJIAl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJ
CSB9Ci0JCQkJfQorCQkJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhtZXRob2REZWNsYXJhdGlvbi5y
ZXR1cm5UeXBlKTsKIAogCQkJCS8vIEZvcm1hdCB0aHJvd3MKIAkJCQlmb3JtYXRUaHJvd3NDbGF1
c2UoCkBAIC00NjY1LDYgKzQ2ODMsNyBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJ
CQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAocGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5s
aW5lQW5ub3RhdGlvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnNbMF0sIGZhbHNlKTsKIAkJVHlwZVJlZmVyZW5jZVtdW10gdHlwZUFyZ3VtZW50cyA9IHBh
cmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnR5cGVBcmd1bWVudHM7CiAJCWludCBs
ZW5ndGggPSB0eXBlQXJndW1lbnRzLmxlbmd0aDsKIAkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5n
dGg7IGkrKykgewpAQCAtNDY5NSwyMSArNDcxNCwxMiBAQAogCQkJfQogCQkJaWYgKGkgPCBsZW5n
dGggLSAxKSB7CiAJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lRE9UKTsKLQkJCX0KLQkJfQotCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lv
bnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNpb25zIDw9IHBhcmFtZXRlcml6
ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSkgewotCQkJaWYgKHRoaXMucHJl
ZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlw
ZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJZm9yIChp
bnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5wcmludE5l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYgKHRoaXMu
cHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlfdHlwZV9y
ZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCQlpZiAocGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCAmJiBwYXJhbWV0
ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucy5sZW5ndGggPiBpKzEpIHsK
KwkJCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnNbaSsxXSwgZmFsc2UpOwogCQkJCX0KLQkJCQl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7CiAJCQl9
CiAJCX0KKwkJZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UsIHRydWUpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5h
Z2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQpAQCAtNDcyMiw2ICs0NzMyLDcgQEAK
IAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6
ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJP
ZlBhcmVucyk7CiAJCX0KKwkJaWYgKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25zKHBhcmFtZXRlcml6
ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCVR5cGVS
ZWZlcmVuY2VbXVtdIHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZS50eXBlQXJndW1lbnRzOwogCQlpbnQgbGVuZ3RoID0gdHlwZUFyZ3VtZW50cy5sZW5n
dGg7CiAJCWZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKQEAgLTQ3NTMsMjAgKzQ3
NjQsMTEgQEAKIAkJCWlmIChpIDwgbGVuZ3RoIC0gMSkgewogCQkJCXRoaXMuc2NyaWJlLnByaW50
TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZURPVCk7CiAJCQl9Ci0JCX0KLQkJaW50
IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChkaW1lbnNpb25zICE9IDAgJiYg
ZGltZW5zaW9ucyA8PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5kaW1lbnNp
b25zKCkpIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3Bl
bmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJdGhpcy5zY3JpYmUu
c3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7
Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
TEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVu
X2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJCXRoaXMuc2NyaWJlLnNw
YWNlKCk7Ci0JCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKKwkJCWlmIChwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCA+IGkrMSkgeworCQkJCWZvcm1hdElubGlu
ZUFubm90YXRpb25zKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRp
b25zW2krMV0sIGZhbHNlKTsKIAkJCX0KIAkJfQorCQlmb3JtYXRMZWFkaW5nRGltZW5zaW9ucyhw
YXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgdHJ1ZSk7CiAJCWlmIChudW1iZXJP
ZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihw
YXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9
CkBAIC00Nzc5LDYgKzQ3ODEsNyBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQlt
YW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXplZFNpbmdsZVR5
cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAocGFyYW1ldGVyaXplZFNp
bmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3Rh
dGlvbnMocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZh
bHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lSWRlbnRpZmllcik7CiAKIAkJVHlwZVJlZmVyZW5jZVtdIHR5cGVBcmd1bWVudHMgPSBwYXJh
bWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOwpAQCAtNDgwNCwxOSAr
NDgwNyw3IEBACiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihDTE9TSU5HX0dFTkVSSUNT
X0VYUEVDVEVEVE9LRU5TKTsKIAkJfQogCi0JCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9u
cygpOwotCQlpZiAoZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0gcGFyYW1ldGVyaXpl
ZFNpbmdsZVR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJl
bmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3Jl
ZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBp
ID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVm
ZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVy
ZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQl9
Ci0JCX0KKwkJZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVS
ZWZlcmVuY2UsIGZhbHNlKTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdl
Q2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVm
ZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KQEAgLTQ4MjksNiArNDgyMCw3IEBACiAJCWlm
IChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhw
cmVzc2lvbihwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMp
OwogCQl9CisJCWlmIChwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9u
cyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJpemVkU2luZ2xlVHlw
ZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5wcmludE5l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyKTsKIAogCQlUeXBlUmVm
ZXJlbmNlW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNl
LnR5cGVBcmd1bWVudHM7CkBAIC00ODU0LDE5ICs0ODQ2LDcgQEAKIAkJCXRoaXMuc2NyaWJlLnBy
aW50TmV4dFRva2VuKENMT1NJTkdfR0VORVJJQ1NfRVhQRUNURURUT0tFTlMpOwogCQl9CiAKLQkJ
aW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChkaW1lbnNpb25zICE9IDAg
JiYgZGltZW5zaW9ucyA8PSBwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5kaW1lbnNp
b25zKCkpIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3Bl
bmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJdGhpcy5zY3JpYmUu
c3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7
Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
TEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVu
X2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJCXRoaXMuc2NyaWJlLnNw
YWNlKCk7Ci0JCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCX0KLQkJfQorCQlmb3JtYXRMZWFkaW5nRGltZW5z
aW9ucyhwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgZmFsc2UpOwogCQlpZiAobnVt
YmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Np
b24ocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJ
fQpAQCAtNTA4NywxMiArNTA2NywyNSBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJ
CQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9Ci0JCXRoaXMuc2NyaWJlLnByaW50UXVhbGlmaWVk
UmVmZXJlbmNlKHF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlRW5kLCBudW1iZXJPZlBhcmVu
cz49MC8qZXhwZWN0IHBhcmVudGhlc2lzKi8pOwotCisJCWZvcm1hdFF1YWxpZmllZFR5cGVSZWZl
cmVuY2UocXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDAp
IHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihxdWFsaWZpZWRUeXBl
UmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KIAkJcmV0dXJuIGZhbHNlOworCX0KKwor
CXByaXZhdGUgdm9pZCBmb3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKFF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UgcXVhbGlmaWVkVHlwZVJlZmVyZW5jZSkgeworCQlmb3IgKGludCBpID0gMDsgaSA8
IHF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zLmxlbmd0aDsgKytpKSB7CisJCQlpZiAoaSAh
PSAwKSB0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVE
T1QsIGZhbHNlKTsKKwkJCWlmIChxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9
IG51bGwKKwkJCQkJJiYgcXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucy5sZW5ndGgg
PiBpCisJCQkJCSYmIHF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbaV0gIT0gbnVs
bCkgeworCQkJCWZvcm1hdElubGluZUFubm90YXRpb25zKHF1YWxpZmllZFR5cGVSZWZlcmVuY2Uu
YW5ub3RhdGlvbnNbaV0sIGZhbHNlKTsKKwkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihU
ZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyLCB0cnVlKTsKKwkJCX0gZWxzZSB7CisJ
CQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRl
bnRpZmllciwgZmFsc2UpOworCQkJfQorCQl9CiAJfQogCiAJLyoqCkBAIC01MTA2LDcgKzUwOTks
NyBAQAogCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJCW1hbmFnZU9wZW5pbmdQYXJl
bnRoZXNpemVkRXhwcmVzc2lvbihxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVu
cyk7CiAJCQl9Ci0JCQl0aGlzLnNjcmliZS5wcmludFF1YWxpZmllZFJlZmVyZW5jZShxdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCwgbnVtYmVyT2ZQYXJlbnM+PTAvKmV4cGVjdCBwYXJl
bnRoZXNpcyovKTsKKwkJCWZvcm1hdFF1YWxpZmllZFR5cGVSZWZlcmVuY2UocXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSk7CiAKIAkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCQltYW5hZ2VD
bG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVt
YmVyT2ZQYXJlbnMpOwpAQCAtNTIxMiwxMiArNTIwNSwzMCBAQAogCQlpZiAobnVtYmVyT2ZQYXJl
bnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oc2luZ2xl
VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChzaW5nbGVUeXBlUmVm
ZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElubGluZUFubm90YXRpb25zKHNpbmds
ZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJp
bnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVSRU5DRV9FWFBFQ1RFRFRPS0VOUyk7CiAKIAkJaWYg
KG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHBy
ZXNzaW9uKHNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQogCQlyZXR1
cm4gZmFsc2U7CisJfQorCisJcHJpdmF0ZSBib29sZWFuIGZvcm1hdElubGluZUFubm90YXRpb25z
KGZpbmFsIEFubm90YXRpb25bXSBhbm5vdGF0aW9ucywgYm9vbGVhbiBzcGFjZUJlZm9yZSkgewor
CQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCApIHsKKwkJCWlmIChzcGFjZUJlZm9yZSkgdGhpcy5z
Y3JpYmUuc3BhY2UoKTsKKworCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBhbm5vdGF0aW9ucy5sZW5n
dGg7ICsraSkgeworCQkJCWlmIChpICE9IDApIHRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCQkJYW5u
b3RhdGlvbnNbaV0udHJhdmVyc2UodGhpcywgKEJsb2NrU2NvcGUpbnVsbCk7CisJCQl9CisJCQlp
ZiAoYW5ub3RhdGlvbnMubGVuZ3RoID4gMCAmJiAhIHRoaXMuaXNOZXh0VG9rZW5QdW5jdHVhdGlv
bigpKSB7CisJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCX0KKwkJCXJldHVybiB0cnVlOwor
CQl9IGVsc2UgeworCQkJcmV0dXJuIGZhbHNlOworCQl9CiAJfQogCiAJLyoqCkBAIC01MjMxLDYg
KzUyNDIsNyBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5n
UGFyZW50aGVzaXplZEV4cHJlc3Npb24oc2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJl
bnMpOwogCQl9CisJCWlmIChzaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwp
IGZvcm1hdElubGluZUFubm90YXRpb25zKHNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNb
MF0sIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVS
RU5DRV9FWFBFQ1RFRFRPS0VOUyk7CiAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewpAQCAt
NTY4OCw2ICs1NzAwLDcgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9vbGVhbiB2
aXNpdChUeXBlUGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXIsIEJsb2NrU2NvcGUgc2NvcGUpIHsKKwkJ
aWYgKHR5cGVQYXJhbWV0ZXIuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3Rh
dGlvbnModHlwZVBhcmFtZXRlci5hbm5vdGF0aW9ucywgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyKTsKIAkJaWYg
KHR5cGVQYXJhbWV0ZXIudHlwZSAhPSBudWxsKSB7CiAJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwpA
QCAtNTcxNCw2ICs1NzI3LDcgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9vbGVh
biB2aXNpdChUeXBlUGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXIsIENsYXNzU2NvcGUgc2NvcGUpIHsK
KwkJaWYgKHR5cGVQYXJhbWV0ZXIuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5u
b3RhdGlvbnModHlwZVBhcmFtZXRlci5hbm5vdGF0aW9ucywgZmFsc2UpOwogCQl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyKTsKIAkJ
aWYgKHR5cGVQYXJhbWV0ZXIudHlwZSAhPSBudWxsKSB7CiAJCQl0aGlzLnNjcmliZS5zcGFjZSgp
OwpAQCAtNTkwMCw2ICs1OTE0LDkgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9v
bGVhbiB2aXNpdChXaWxkY2FyZCB3aWxkY2FyZCwgQmxvY2tTY29wZSBzY29wZSkgeworCQlpZiAo
d2lsZGNhcmQuYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJaWYgKGZvcm1hdElubGluZUFubm90
YXRpb25zKHdpbGRjYXJkLmFubm90YXRpb25zWzBdLCBmYWxzZSkpIHRoaXMuc2NyaWJlLnNwYWNl
KCk7CisJCX0KIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lUVVFU1RJT04sIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9xdWVz
dGlvbl9pbl93aWxjYXJkKTsKIAkJc3dpdGNoKHdpbGRjYXJkLmtpbmQpIHsKIAkJCWNhc2UgV2ls
ZGNhcmQuU1VQRVIgOgpAQCAtNTkyMCw2ICs1OTM3LDkgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0K
IAlwdWJsaWMgYm9vbGVhbiB2aXNpdChXaWxkY2FyZCB3aWxkY2FyZCwgQ2xhc3NTY29wZSBzY29w
ZSkgeworCQlpZiAod2lsZGNhcmQuYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJaWYgKGZvcm1h
dElubGluZUFubm90YXRpb25zKHdpbGRjYXJkLmFubm90YXRpb25zWzBdLCBmYWxzZSkpIHRoaXMu
c2NyaWJlLnNwYWNlKCk7CisJCX0KIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lUVVFU1RJT04sIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNl
X2JlZm9yZV9xdWVzdGlvbl9pbl93aWxjYXJkKTsKIAkJc3dpdGNoKHdpbGRjYXJkLmtpbmQpIHsK
IAkJCWNhc2UgV2lsZGNhcmQuU1VQRVIgOgpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2Zvcm1hdHRlci9TY3JpYmUuamF2YQppbmRleCBjZWQ1Njg2Li4zOGFjMzg5IDEwMDY0NAot
LS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2Zvcm1hdHRlci9TY3JpYmUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3Jt
YXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9TY3JpYmUuamF2YQpAQCAt
NSw5ICs1LDE0IEBACiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5k
IGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEw
Lmh0bWwKICAqIAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFm
dCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFBy
b2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0
aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFu
eSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKICAqIENvbnRyaWJ1dG9yczoKICAqICAg
ICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqICAg
ICBSYXkgVi4gKHZvaWRzdGFyQGdtYWlsLmNvbSkgLSBDb250cmlidXRpb24gZm9yIGJ1ZyAyODI5
ODgKKyAqICAgICBKZXNwZXIgUyBNb2xsZXIgLSBDb250cmlidXRpb24gZm9yIGJ1ZyA0MDI4OTIK
ICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuZm9ybWF0dGVyOwogCkBAIC00OTIzLDUzICs0OTI4LDYgQEAKIAkJCX0KIAkJCXByaW50KHRo
aXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24gLSB0aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlvbiwg
Y29uc2lkZXJTcGFjZUlmQW55KTsKIAkJfSBjYXRjaCAoSW52YWxpZElucHV0RXhjZXB0aW9uIGUp
IHsKLQkJCXRocm93IG5ldyBBYm9ydEZvcm1hdHRpbmcoZSk7Ci0JCX0KLQl9Ci0KLQlwdWJsaWMg
dm9pZCBwcmludEFycmF5UXVhbGlmaWVkUmVmZXJlbmNlKGludCBudW1iZXJPZlRva2VucywgaW50
IHNvdXJjZUVuZCkgewotCQlpbnQgY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nh
bm5lci5jdXJyZW50UG9zaXRpb247Ci0JCWludCBudW1iZXJPZklkZW50aWZpZXJzID0gMDsKLQkJ
dHJ5IHsKLQkJCWRvIHsKLQkJCQlwcmludENvbW1lbnQoQ29kZUZvcm1hdHRlci5LX1VOS05PV04s
IE5PX1RSQUlMSU5HX0NPTU1FTlQpOwotCQkJCXN3aXRjaCh0aGlzLmN1cnJlbnRUb2tlbiA9IHRo
aXMuc2Nhbm5lci5nZXROZXh0VG9rZW4oKSkgewotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZUVPRiA6Ci0JCQkJCQlyZXR1cm47Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lV0hJVEVTUEFDRSA6Ci0JCQkJCQlhZGREZWxldGVFZGl0KHRoaXMuc2Nhbm5lci5nZXRD
dXJyZW50VG9rZW5TdGFydFBvc2l0aW9uKCksIHRoaXMuc2Nhbm5lci5nZXRDdXJyZW50VG9rZW5F
bmRQb3NpdGlvbigpKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNj
YW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9DSyA6Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoKLQkJCQkJCXByaW50QmxvY2tDb21tZW50KGZhbHNl
KTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVu
dFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lQ09NTUVOVF9MSU5FIDoKLQkJCQkJCXByaW50TGluZUNvbW1lbnQoKTsKLQkJCQkJCWN1cnJl
bnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJ
CQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciA6
Ci0JCQkJCQlwcmludCh0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uIC0gdGhpcy5zY2FubmVy
LnN0YXJ0UG9zaXRpb24sIGZhbHNlKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24g
PSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJaWYgKCsrIG51bWJlck9mSWRl
bnRpZmllcnMgPT0gbnVtYmVyT2ZUb2tlbnMpIHsKLQkJCQkJCQl0aGlzLnNjYW5uZXIucmVzZXRU
byhjdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uLCB0aGlzLnNjYW5uZXJFbmRQb3NpdGlvbiAtIDEp
OwotCQkJCQkJCXJldHVybjsKLQkJCQkJCX0KLQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZURPVCA6Ci0JCQkJCQlwcmludCh0aGlzLnNjYW5uZXIuY3VycmVu
dFBvc2l0aW9uIC0gdGhpcy5zY2FubmVyLnN0YXJ0UG9zaXRpb24sIGZhbHNlKTsKLQkJCQkJCWN1
cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwot
CQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUlBBUkVOOgot
CQkJCQkJY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0
aW9uOwotCQkJCQkJLy8gJEZBTEwtVEhST1VHSCQgLSBmYWxsIHRocm91Z2ggZGVmYXVsdCBjYXNl
Li4uCi0JCQkJCWRlZmF1bHQ6Ci0JCQkJCQl0aGlzLnNjYW5uZXIucmVzZXRUbyhjdXJyZW50VG9r
ZW5TdGFydFBvc2l0aW9uLCB0aGlzLnNjYW5uZXJFbmRQb3NpdGlvbiAtIDEpOwotCQkJCQkJcmV0
dXJuOwotCQkJCX0KLQkJCX0gd2hpbGUgKHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24gPD0g
c291cmNlRW5kKTsKLQkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgewogCQkJdGhy
b3cgbmV3IEFib3J0Rm9ybWF0dGluZyhlKTsKIAkJfQogCX0=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>228546</attachid>
            <date>2013-03-17 15:55:00 -0400</date>
            <delta_ts>2013-03-18 05:41:20 -0400</delta_ts>
            <desc>Jesper&apos;s patch with corrections from code review.</desc>
            <filename>Formatter308.patch2</filename>
            <type>text/plain</type>
            <size>46367</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuQWxs
SmF2YThUZXN0cy5qYXZhCmluZGV4IGNkMTExMmUuLjNiZDU0ZjYgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkFsbEphdmE4VGVzdHMuamF2
YQpAQCAtNDQsNiArNDQsNyBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmRv
bS5BU1RDb252ZXJ0ZXJUZXN0QVNUOF8yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLmRvbS5Db252ZXJ0ZXJUZXN0U2V0dXA7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuZG9tLlR5cGVBbm5vdGF0aW9uc0NvbnZlcnRlclRlc3Q7CitpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyLkZvcm1hdHRlckpTUjMwOFRlc3RzOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmZvcm1hdHRlci5Gb3JtYXR0ZXJKU1IzMzVUZXN0
czsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5yZXdyaXRlLmRlc2NyaWJpbmcu
QVNUUmV3cml0aW5nVGVzdDsKIApAQCAtNjcsNiArNjgsNyBAQAogCQkJRXhwcmVzc2lvbkNvbnRl
eHRUZXN0cy5jbGFzcywKIAkJCUZsb3dBbmFseXNpc1Rlc3Q4LmNsYXNzLAogCQkJRm9ybWF0dGVy
SlNSMzM1VGVzdHMuY2xhc3MsCisJCQlGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcywKIAkJfTsK
IAl9CiAJCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuRm9ybWF0dGVyVGVzdHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCmluZGV4IDIwZGE0ZDkuLmU4ZTZhYmEgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3JtYXR0
ZXJUZXN0cy5qYXZhCkBAIC0xMiw2ICsxMiw3IEBACiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAg
SUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAg
SmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9uIGZvciBidWcgNDAyMTczCisgKiAgICAgICAg
ICAgICAgICAgICAgICAgQ29udHJpYnV0aW9uIGZvciBidWcgNDAyODkyCiAgKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHM7CiAKQEAgLTM3
LDYgKzM4LDcgQEAKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckNvbW1lbnRzQnVnc1Rlc3Qu
Y2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVyQ29tbWVudHNUZXN0cy5jbGFzcyk7
CiAJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMzVUZXN0cy5jbGFzcyk7CisJCVRFU1Rf
U1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcyk7CiAJCVRFU1RfU1VJVEVTLmFk
ZChGb3JtYXR0ZXJDb21tZW50c0NsZWFyQmxhbmtMaW5lc1Rlc3RzLmNsYXNzKTsKIAkJVEVTVF9T
VUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc1Rlc3RzLmNsYXNzKTsKIAkJ
VEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc0Rlc2NyaXB0aW9u
VGVzdHMuY2xhc3MpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1Iz
MDhUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1IzMDhUZXN0cy5qYXZh
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmZkYTFhNmYKLS0tIC9kZXYvbnVs
bAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvZm9ybWF0dGVyL0Zvcm1hdHRlckpTUjMwOFRlc3RzLmphdmEKQEAgLTAs
MCArMSwzNTEgQEAKKy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIw
MTMgSmVzcGVyIFN0ZWVuIE1vbGxlciBhbmQgb3RoZXJzLgorICogQWxsIHJpZ2h0cyByZXNlcnZl
ZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscworICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2
YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwK
KyAqIAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVj
aWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3Mg
KEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1
cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVj
aWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRyaWJ1dG9yczoKKyAqICAgICBKZXNw
ZXIgU3RlZW4gTW9sbGVyIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uICovCisKK3Bh
Y2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyOworCitpbXBvcnQgamF2
YS51dGlsLk1hcDsKKworaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3Jn
LmVjbGlwc2UuY29yZS5yZXNvdXJjZXMuSVdvcmtzcGFjZURlc2NyaXB0aW9uOworaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5jb3JlLklDb21waWxhdGlvblVuaXQ7CitpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmNvcmUuSUphdmFQcm9qZWN0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFN
b2RlbEV4Y2VwdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5mb3JtYXR0ZXIuQ29k
ZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC5BYnN0
cmFjdEphdmFNb2RlbFRlc3RzOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLnV0
aWwuVXRpbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5D
b21waWxlck9wdGlvbnM7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZvcm1hdHRl
ci5EZWZhdWx0Q29kZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Zm9ybWF0dGVyLkRlZmF1bHRDb2RlRm9ybWF0dGVyT3B0aW9uczsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS50ZXh0LmVkaXRzLlRleHRFZGl0OworCitwdWJsaWMgY2xhc3MgRm9ybWF0dGVySlNSMzA4VGVz
dHMgZXh0ZW5kcyBBYnN0cmFjdEphdmFNb2RlbFRlc3RzIHsKKworCXByb3RlY3RlZCBzdGF0aWMg
SUphdmFQcm9qZWN0IEpBVkFfUFJPSkVDVDsKKworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVO
S05PV05fS0lORCA9IDA7CisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU4gPSAiX2luIjsK
KwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBPVVQgPSAiX291dCI7CisJcHVibGljIHN0YXRp
YyBmaW5hbCBib29sZWFuIERFQlVHID0gZmFsc2U7CisJc3RhdGljIGZpbmFsIFN0cmluZyBMSU5F
X1NFUEFSQVRPUiA9IFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKTsKKwlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJPSkVDVF9OQU1FID0gIkZvcm1hdHRlckpTUjMwOCI7
IAorCXByaXZhdGUgbG9uZyB0aW1lOworCisJRGVmYXVsdENvZGVGb3JtYXR0ZXJPcHRpb25zIGZv
cm1hdHRlclByZWZzOworCU1hcCBmb3JtYXR0ZXJPcHRpb25zOworCisJc3RhdGljIHsKKy8vCQlU
RVNUU19OVU1CRVJTID0gbmV3IGludFtdIHsgNzgzIH07CisvLwkJVEVTVFNfUkFOR0UgPSBuZXcg
aW50W10geyA3MzQsIC0xIH07CisvLwkJVEVTVFNfTkFNRVMgPSBuZXcgU3RyaW5nIFtdIHsgInRl
c3QwMTUiIH07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgpIHsKKwkJcmV0dXJuIGJ1
aWxkTW9kZWxUZXN0U3VpdGUoRm9ybWF0dGVySlNSMzA4VGVzdHMuY2xhc3MpOworCX0KKworCXB1
YmxpYyBGb3JtYXR0ZXJKU1IzMDhUZXN0cyhTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1lKTsK
Kwl9CisKKwlTdHJpbmcgcnVuRm9ybWF0dGVyKENvZGVGb3JtYXR0ZXIgY29kZUZvcm1hdHRlciwg
U3RyaW5nIHNvdXJjZSwgaW50IGtpbmQsIGludCBpbmRlbnRhdGlvbkxldmVsLCBpbnQgb2Zmc2V0
LCBpbnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvciwgYm9vbGVhbiByZXBlYXQpIHsKKy8v
CQlsb25nIHRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKKwkJVGV4dEVkaXQgZWRp
dCA9IGNvZGVGb3JtYXR0ZXIuZm9ybWF0KGtpbmQsIHNvdXJjZSwgb2Zmc2V0LCBsZW5ndGgsIGlu
ZGVudGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQlTeXN0ZW0u
b3V0LnByaW50bG4oKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGltZSkgKyAiIG1zIik7
CisJCWlmIChlZGl0ID09IG51bGwpIHJldHVybiBudWxsOworLy8JCVN5c3RlbS5vdXQucHJpbnRs
bihlZGl0LmdldENoaWxkcmVuU2l6ZSgpICsgIiBlZGl0cyIpOworCQlTdHJpbmcgcmVzdWx0ID0g
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUudXRpbC5VdGlsLmVkaXRlZFN0cmluZyhzb3Vy
Y2UsIGVkaXQpOworCisJCWlmIChyZXBlYXQgJiYgbGVuZ3RoID09IHNvdXJjZS5sZW5ndGgoKSkg
eworLy8JCQl0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CisJCQllZGl0ID0gY29k
ZUZvcm1hdHRlci5mb3JtYXQoa2luZCwgcmVzdWx0LCAwLCByZXN1bHQubGVuZ3RoKCksIGluZGVu
dGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQkJU3lzdGVtLm91
dC5wcmludGxuKChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIHRpbWUpICsgIiBtcyIpOwor
CQkJaWYgKGVkaXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CisvLwkJCWFzc2VydEVxdWFscygiU2hv
dWxkIG5vdCBoYXZlIGVkaXRzIiwgMCwgZWRpdC5nZXRDaGlsZHJlbigpLmxlbmd0aCk7CisJCQlm
aW5hbCBTdHJpbmcgcmVzdWx0MiA9IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwu
VXRpbC5lZGl0ZWRTdHJpbmcocmVzdWx0LCBlZGl0KTsKKwkJCWlmICghcmVzdWx0LmVxdWFscyhy
ZXN1bHQyKSkgeworCQkJCWFzc2VydFNvdXJjZUVxdWFscygiU2Vjb25kIGZvcm1hdHRpbmcgaXMg
ZGlmZmVyZW50IGZyb20gZmlyc3Qgb25lISIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5l
RGVsaW1pdGVyKHJlc3VsdCksIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVy
KHJlc3VsdDIpKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4gcmVzdWx0OworCX0KKworCS8qKgorCSAq
IEluaXQgZm9ybWF0dGVyIHByZWZlcmVuY2VzIHdpdGggRWNsaXBzZSBkZWZhdWx0IHNldHRpbmdz
LgorCSAqLworCXByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJICAg
IHN1cGVyLnNldFVwKCk7CisJCXRoaXMuZm9ybWF0dGVyUHJlZnMgPSBEZWZhdWx0Q29kZUZvcm1h
dHRlck9wdGlvbnMuZ2V0RWNsaXBzZURlZmF1bHRTZXR0aW5ncygpOworCQlpZiAoSkFWQV9QUk9K
RUNUICE9IG51bGwpIHsKKwkJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucyA9IEpBVkFfUFJPSkVDVC5n
ZXRPcHRpb25zKHRydWUpOworCQl9CisJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucy5wdXQoQ29tcGls
ZXJPcHRpb25zLk9QVElPTl9Db21wbGlhbmNlLCBDb21waWxlck9wdGlvbnMuVkVSU0lPTl8xXzgp
OworCQl0aGlzLmZvcm1hdHRlck9wdGlvbnMucHV0KENvbXBpbGVyT3B0aW9ucy5PUFRJT05fVGFy
Z2V0UGxhdGZvcm0sIENvbXBpbGVyT3B0aW9ucy5WRVJTSU9OXzFfOCk7CisJCXRoaXMuZm9ybWF0
dGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9QVElPTl9Tb3VyY2UsIENvbXBpbGVyT3B0
aW9ucy5WRVJTSU9OXzFfOCk7CisJfQorCisJLyoqCisJICogQ3JlYXRlIHByb2plY3QgYW5kIHNl
dCB0aGUgamFyIHBsYWNlaG9sZGVyLgorCSAqLworCXB1YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0
aHJvd3MgRXhjZXB0aW9uIHsKKwkJLy8gZW5zdXJlIGF1dG9idWlsZGluZyBpcyB0dXJuZWQgb2Zm
CisJCUlXb3Jrc3BhY2VEZXNjcmlwdGlvbiBkZXNjcmlwdGlvbiA9IGdldFdvcmtzcGFjZSgpLmdl
dERlc2NyaXB0aW9uKCk7CisJCWlmIChkZXNjcmlwdGlvbi5pc0F1dG9CdWlsZGluZygpKSB7CisJ
CQlkZXNjcmlwdGlvbi5zZXRBdXRvQnVpbGRpbmcoZmFsc2UpOworCQkJZ2V0V29ya3NwYWNlKCku
c2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pOworCQl9CisKKwkJaWYgKEpBVkFfUFJPSkVDVCA9
PSBudWxsKSB7CisJCQlKQVZBX1BST0pFQ1QgPSBzZXRVcEphdmFQcm9qZWN0KFBST0pFQ1RfTkFN
RSwgIjEuOCIpOyAvLyROT04tTkxTLTEkCisJCX0KKworCQlpZiAoREVCVUcpIHsKKwkJCXRoaXMu
dGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOworCQl9CisJfQorCisJLyoqCisJICog
UmVzZXQgdGhlIGphciBwbGFjZWhvbGRlciBhbmQgZGVsZXRlIHByb2plY3QuCisJICovCisJcHVi
bGljIHZvaWQgdGVhckRvd25TdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlkZWxldGVQcm9q
ZWN0KEpBVkFfUFJPSkVDVCk7IC8vJE5PTi1OTFMtMSQKKwkJSkFWQV9QUk9KRUNUID0gbnVsbDsK
KwkJaWYgKERFQlVHKSB7CisJCQlTeXN0ZW0ub3V0LnByaW50bG4oIlRpbWUgc3BlbnQgPSAiICsg
KFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGhpcy50aW1lKSk7Ly8kTk9OLU5MUy0xJAor
CQl9CisJCXN1cGVyLnRlYXJEb3duU3VpdGUoKTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRJ
bihTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlhc3NlcnROb3ROdWxsKGNvbXBpbGF0
aW9uVW5pdE5hbWUpOworCQlpbnQgZG90SW5kZXggPSBjb21waWxhdGlvblVuaXROYW1lLmluZGV4
T2YoJy4nKTsKKwkJYXNzZXJ0VHJ1ZShkb3RJbmRleCAhPSAtMSk7CisJCXJldHVybiBjb21waWxh
dGlvblVuaXROYW1lLnN1YnN0cmluZygwLCBkb3RJbmRleCkgKyBJTiArIGNvbXBpbGF0aW9uVW5p
dE5hbWUuc3Vic3RyaW5nKGRvdEluZGV4KTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRPdXQo
U3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUpIHsKKwkJYXNzZXJ0Tm90TnVsbChjb21waWxhdGlv
blVuaXROYW1lKTsKKwkJaW50IGRvdEluZGV4ID0gY29tcGlsYXRpb25Vbml0TmFtZS5pbmRleE9m
KCcuJyk7CisJCWFzc2VydFRydWUoZG90SW5kZXggIT0gLTEpOworCQlyZXR1cm4gY29tcGlsYXRp
b25Vbml0TmFtZS5zdWJzdHJpbmcoMCwgZG90SW5kZXgpICsgT1VUICsgY29tcGlsYXRpb25Vbml0
TmFtZS5zdWJzdHJpbmcoZG90SW5kZXgpOworCX0KKworCXZvaWQgYXNzZXJ0TGluZUVxdWFscyhT
dHJpbmcgYWN0dWFsQ29udGVudHMsIFN0cmluZyBvcmlnaW5hbFNvdXJjZSwgU3RyaW5nIGV4cGVj
dGVkQ29udGVudHMsIGJvb2xlYW4gY2hlY2tOdWxsKSB7CisJCWlmIChhY3R1YWxDb250ZW50cyA9
PSBudWxsKSB7CisJCQlhc3NlcnRUcnVlKCJhY3R1YWxDb250ZW50cyBpcyBudWxsIiwgY2hlY2tO
dWxsKTsKKwkJCWFzc2VydEVxdWFscyhleHBlY3RlZENvbnRlbnRzLCBvcmlnaW5hbFNvdXJjZSk7
CisJCQlyZXR1cm47CisJCX0KKwkJYXNzZXJ0U291cmNlRXF1YWxzKCJEaWZmZXJlbnQgbnVtYmVy
IG9mIGxlbmd0aCIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVyKGV4cGVj
dGVkQ29udGVudHMpLCBhY3R1YWxDb250ZW50cyk7CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRl
c3QoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlE
ZWZhdWx0Q29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVyID0gbmV3IERlZmF1bHRDb2RlRm9ybWF0
dGVyKHRoaXMuZm9ybWF0dGVyUHJlZnMsIHRoaXMuZm9ybWF0dGVyT3B0aW9ucyk7CisJCXJ1blRl
c3QoY29kZUZvcm1hdHRlciwgcGFja2FnZU5hbWUsIGNvbXBpbGF0aW9uVW5pdE5hbWUsIENvZGVG
b3JtYXR0ZXIuS19DT01QSUxBVElPTl9VTklULCAwKTsKKwl9CisKKwlwcml2YXRlIHZvaWQgcnVu
VGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdlTmFtZSwgU3Ry
aW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRpb25MZXZlbCkg
eworCQlydW5UZXN0KGNvZGVGb3JtYXR0ZXIsIHBhY2thZ2VOYW1lLCBjb21waWxhdGlvblVuaXRO
YW1lLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBmYWxzZSwgMCwgLTEpOworCX0KKwlwcml2YXRl
IHZvaWQgcnVuVGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdl
TmFtZSwgU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRp
b25MZXZlbCwgYm9vbGVhbiBjaGVja051bGwsIGludCBvZmZzZXQsIGludCBsZW5ndGgpIHsKKwkJ
cnVuVGVzdChjb2RlRm9ybWF0dGVyLCBwYWNrYWdlTmFtZSwgY29tcGlsYXRpb25Vbml0TmFtZSwg
a2luZCwgaW5kZW50YXRpb25MZXZlbCwgY2hlY2tOdWxsLCBvZmZzZXQsIGxlbmd0aCwgbnVsbCk7
CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRlc3QoQ29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVy
LCBTdHJpbmcgcGFja2FnZU5hbWUsIFN0cmluZyBjb21waWxhdGlvblVuaXROYW1lLCBpbnQga2lu
ZCwgaW50IGluZGVudGF0aW9uTGV2ZWwsIGJvb2xlYW4gY2hlY2tOdWxsLCBpbnQgb2Zmc2V0LCBp
bnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvcikgeworCQl0cnkgeworCQkJSUNvbXBpbGF0
aW9uVW5pdCBzb3VyY2VVbml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIi
LCBwYWNrYWdlTmFtZSwgZ2V0SW4oY29tcGlsYXRpb25Vbml0TmFtZSkpOyAvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwkJCVN0cmluZyBzb3VyY2UgPSBzb3VyY2VVbml0LmdldFNvdXJjZSgp
OworCQkJYXNzZXJ0Tm90TnVsbChzb3VyY2UpOworCQkJSUNvbXBpbGF0aW9uVW5pdCBvdXRwdXRV
bml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIiLCBwYWNrYWdlTmFtZSwg
Z2V0T3V0KGNvbXBpbGF0aW9uVW5pdE5hbWUpKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJCQlhc3NlcnROb3ROdWxsKG91dHB1dFVuaXQpOworCQkJU3RyaW5nIHJlc3VsdDsKKwkJCWlm
IChsZW5ndGggPT0gLTEpIHsKKwkJCQlyZXN1bHQgPSBydW5Gb3JtYXR0ZXIoY29kZUZvcm1hdHRl
ciwgc291cmNlLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBvZmZzZXQsIHNvdXJjZS5sZW5ndGgo
KSwgbGluZVNlcGFyYXRvciwgdHJ1ZSk7CisJCQl9IGVsc2UgeworCQkJCXJlc3VsdCA9IHJ1bkZv
cm1hdHRlcihjb2RlRm9ybWF0dGVyLCBzb3VyY2UsIGtpbmQsIGluZGVudGF0aW9uTGV2ZWwsIG9m
ZnNldCwgbGVuZ3RoLCBsaW5lU2VwYXJhdG9yLCB0cnVlKTsKKwkJCX0KKwkJCWFzc2VydExpbmVF
cXVhbHMocmVzdWx0LCBzb3VyY2UsIG91dHB1dFVuaXQuZ2V0U291cmNlKCksIGNoZWNrTnVsbCk7
CisJCX0gY2F0Y2ggKEphdmFNb2RlbEV4Y2VwdGlvbiBlKSB7CisJCQllLnByaW50U3RhY2tUcmFj
ZSgpOworCQkJYXNzZXJ0VHJ1ZShmYWxzZSk7CisJCX0KKwl9CisJCisJcHVibGljIHZvaWQgdGVz
dExhbWJkYSgpIHsKKwkJcnVuVGVzdCgidGVzdExhbWJkYSIsICJBLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisJCisJcHVibGljIHZvaWQgdGVzdFJlZmVyZW5jZUV4cHJl
c3Npb24oKSB7CisJCXJ1blRlc3QoInRlc3RSZWZlcmVuY2VFeHByZXNzaW9uIiwgIkEuamF2YSIp
Oy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDAo
KSB7CisJCXJ1blRlc3QoInRlc3QwMDAiLCAiSS5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04t
TkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAwMSgpIHsKKwkJcnVuVGVzdCgidGVzdDAw
MSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMg
dm9pZCB0ZXN0MDAyKCkgeworCQlydW5UZXN0KCJ0ZXN0MDAyIiwgIlguamF2YSIpOy8vJE5PTi1O
TFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDMoKSB7CisJCXJ1
blRlc3QoInRlc3QwMDMiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJ
fQorCisJcHVibGljIHZvaWQgdGVzdDAwNCgpIHsKKwkJcnVuVGVzdCgidGVzdDAwNCIsICJYLmph
dmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0
MDA1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDA1IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8k
Tk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDYoKSB7CisJCXJ1blRlc3QoInRl
c3QwMDYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVi
bGljIHZvaWQgdGVzdDAwNygpIHsKKwkJcnVuVGVzdCgidGVzdDAwNyIsICJYLmphdmEiKTsvLyRO
T04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDA4KCkgewor
CQlydW5UZXN0KCJ0ZXN0MDA4IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDkoKSB7CisJCXJ1blRlc3QoInRlc3QwMDkiLCAi
WC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQg
dGVzdDAxMCgpIHsKKwkJcnVuVGVzdCgidGVzdDAxMCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDExKCkgeworCQlydW5UZXN0
KCJ0ZXN0MDExIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKwor
CXB1YmxpYyB2b2lkIHRlc3QwMTIoKSB7CisJCXJ1blRlc3QoInRlc3QwMTIiLCAiWC5qYXZhIik7
Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxMygp
IHsKKwkJcnVuVGVzdCgidGVzdDAxMyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1O
TFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE0KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE0
IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2
b2lkIHRlc3QwMTUoKSB7CisJCXJ1blRlc3QoInRlc3QwMTUiLCAiWC5qYXZhIik7Ly8kTk9OLU5M
Uy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxNigpIHsKKwkJcnVu
VGVzdCgidGVzdDAxNiIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9
CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE3KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE3IiwgIlguamF2
YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3Qw
MTgoKSB7CisJCXJ1blRlc3QoInRlc3QwMTgiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyRO
T04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxOSgpIHsKKwkJcnVuVGVzdCgidGVz
dDAxOSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJs
aWMgdm9pZCB0ZXN0MDIwKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIwIiwgIlguamF2YSIpOy8vJE5P
Ti1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjEoKSB7CisJ
CXJ1blRlc3QoInRlc3QwMjEiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyMigpIHsKKwkJcnVuVGVzdCgidGVzdDAyMiIsICJY
LmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0
ZXN0MDIzKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIzIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQg
Ly8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjQoKSB7CisJCXJ1blRlc3Qo
InRlc3QwMjQiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJ
cHVibGljIHZvaWQgdGVzdDAyNSgpIHsKKwkJcnVuVGVzdCgidGVzdDAyNSIsICJYLmphdmEiKTsv
LyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI2KCkg
eworCQlydW5UZXN0KCJ0ZXN0MDI2IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5M
Uy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjcoKSB7CisJCXJ1blRlc3QoInRlc3QwMjci
LCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZv
aWQgdGVzdDAyOCgpIHsKKwkJcnVuVGVzdCgidGVzdDAyOCIsICJYLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI5KCkgeworCQlydW5U
ZXN0KCJ0ZXN0MDI5IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0K
KworCXB1YmxpYyB2b2lkIHRlc3QwMzAoKSB7CisJCXJ1blRlc3QoInRlc3QwMzAiLCAiWC5qYXZh
Iik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAz
MSgpIHsKKwkJcnVuVGVzdCgidGVzdDAzMSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5P
Ti1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDMyKCkgeworCQlydW5UZXN0KCJ0ZXN0
MDMyIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1Ymxp
YyB2b2lkIHRlc3QwMzMoKSB7CisJCXJ1blRlc3QoInRlc3QwMzMiLCAiWC5qYXZhIik7Ly8kTk9O
LU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNCgpIHsKKwkJ
cnVuVGVzdCgidGVzdDAzNCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQK
Kwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDM1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM1IiwgIlgu
amF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRl
c3QwMzYoKSB7CisJCXJ1blRlc3QoInRlc3QwMzYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNygpIHsKKwkJcnVuVGVzdCgi
dGVzdDAzNyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlw
dWJsaWMgdm9pZCB0ZXN0MDM4KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM4IiwgIlguamF2YSIpOy8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzkoKSB7
CisJCXJ1blRlc3QoInRlc3QwMzkiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxT
LTIkCisJfQorfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dExhbWJkYS9BX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RMYW1iZGEvQV9pbi5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLjM5NzQ0ZDcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RM
YW1iZGEvQV9pbi5qYXZhCkBAIC0wLDAgKzEsNDQgQEAKKy8qKgorICogVGVzdAorICoKKyAqLwor
cGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBv
cnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5k
cyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsIENsb25lYWJsZSwgU2VyaWFs
aXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRh
cygpIHsKKwkJUnVubmFibGUgYSA9ICgpIC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVz
dE1ldCh5b3UpOworCQkJaGVyZS5udW1iZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEg
PSB4IC0+IHg7CisKKwkJRnVuYyBpZEIgPSB4IC0+IHsgcmV0dXJuIHg7IH07CisJCQorCQlGdW5j
IGlkQyA9IHggICAtPiAgIHg7CisKKwkJRnVuYyBpZDIgPSB4IC0+IHsKKwkJCWlmICh4ID09IG51
bGwpCisJCQl7CisJCQkJcmV0dXJuIG51bGw7CisJCQl9CisJCQllbHNlCisJCQkJcmV0dXJuIHg7
CisJCX07CisJCQorCQlJbWFnaW5hYmxlRnVuY3Rpb248U3RyaW5nLCBJbnRlZ2VyPiBmID0KKwkJ
CShTdHJpbmcgaW5wdXQpIC0+IGlucHV0Lmxlbmd0aCgpOworCisJCQlJbWFnaW5hYmxlRnVuY3Rp
b248U3RyaW5nLCBJbnRlZ2VyPiBmMiA9IChTdHJpbmcgaW5wdXQpIC0+IHsgcmV0dXJuIGlucHV0
Lmxlbmd0aCgpICsgbmV3IExldHNQcmV0ZW5kKCkgeyBpbnQgaG93TWFueSgpIHsgcmV0dXJuIDQy
OyB9IH0KKwkJCQkJCisuaG93TWFueSgpOyB9OworCX0KKworfQpcIE5vIG5ld2xpbmUgYXQgZW5k
IG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdExhbWJkYS9BX291dC5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0TGFt
YmRhL0Ffb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMWJjZDdj
MwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdExhbWJkYS9BX291dC5qYXZhCkBAIC0wLDAgKzEs
NTEgQEAKKy8qKgorICogVGVzdAorICoKKyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBv
cnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKwor
cHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVu
dHMgUnVubmFibGUsCisJCUNsb25lYWJsZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBy
dW4oKSB7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRhcygpIHsKKwkJUnVubmFibGUgYSA9ICgp
IC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVzdE1ldCh5b3UpOworCQkJaGVyZS5udW1i
ZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEgPSB4IC0+IHg7CisKKwkJRnVuYyBpZEIg
PSB4IC0+IHsKKwkJCXJldHVybiB4OworCQl9OworCisJCUZ1bmMgaWRDID0geCAtPiB4OworCisJ
CUZ1bmMgaWQyID0geCAtPiB7CisJCQlpZiAoeCA9PSBudWxsKSB7CisJCQkJcmV0dXJuIG51bGw7
CisJCQl9IGVsc2UKKwkJCQlyZXR1cm4geDsKKwkJfTsKKworCQlJbWFnaW5hYmxlRnVuY3Rpb248
U3RyaW5nLCBJbnRlZ2VyPiBmID0gKFN0cmluZyBpbnB1dCkgLT4gaW5wdXQKKwkJCQkubGVuZ3Ro
KCk7CisKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZjIgPSAoU3RyaW5n
IGlucHV0KSAtPiB7CisJCQlyZXR1cm4gaW5wdXQubGVuZ3RoKCkgKyBuZXcgTGV0c1ByZXRlbmQo
KSB7CisJCQkJaW50IGhvd01hbnkoKSB7CisJCQkJCXJldHVybiA0MjsKKwkJCQl9CisJCQl9CisK
KwkJCS5ob3dNYW55KCk7CisJCX07CisJfQorCit9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmls
ZQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNlRXhwcmVzc2lvbi9BX2luLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3RSZWZlcmVuY2VFeHByZXNzaW9uL0FfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi40NDk5NDY3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNlRXhw
cmVzc2lvbi9BX2luLmphdmEKQEAgLTAsMCArMSwyMSBAQAorLyoqCisgKiBUZXN0CisgKgorICov
CitwYWNrYWdlIHAxLnAyLnRlc3Q7CisKK2ltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2lt
cG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOworCitwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQSBleHRl
bmRzIGphdmEubGFuZy5PYmplY3QgaW1wbGVtZW50cyBSdW5uYWJsZSwgQ2xvbmVhYmxlLCBTZXJp
YWxpemFibGUgeworCXB1YmxpYyB2b2lkIHJ1bigpIHsKKwl9CisKKwlwcml2YXRlIHN0YXRpYyBm
aW5hbCAgIEZ1bmN0aW9uYWxpc2g8TGlzdDxJbnRlZ2VyPiwgSW50ZWdlcj4gV0hBVEVWRVIgPSBM
aXN0PCBJbnRlZ2VyID4gOjogc2l6ZSA7CisJCisJcHVibGljIHZvaWQgcmVmZXJlbmNlRXhwcmVz
c2lvbigpIHsKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZnVuYyA9IEts
YXp6CisJCQkJOjogIG1ldGhvZDsgCisJfQkKKworfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZp
bGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgv
dGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwLi4yNjUyNDA0Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNl
RXhwcmVzc2lvbi9BX291dC5qYXZhCkBAIC0wLDAgKzEsMjEgQEAKKy8qKgorICogVGVzdAorICoK
KyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7
CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEg
ZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsCisJCUNsb25lYWJs
ZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCisJcHJpdmF0ZSBz
dGF0aWMgZmluYWwgRnVuY3Rpb25hbGlzaDxMaXN0PEludGVnZXI+LCBJbnRlZ2VyPiBXSEFURVZF
UiA9IExpc3Q8SW50ZWdlcj46OnNpemU7CisKKwlwdWJsaWMgdm9pZCByZWZlcmVuY2VFeHByZXNz
aW9uKCkgeworCQlJbWFnaW5hYmxlRnVuY3Rpb248U3RyaW5nLCBJbnRlZ2VyPiBmdW5jID0gS2xh
eno6Om1ldGhvZDsKKwl9CisKK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2Zvcm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZv
cm1hdHRlclZpc2l0b3IuamF2YQppbmRleCAzYjQ5ZDNkLi4zODk5MDAwIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zv
cm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3Jt
YXR0ZXJWaXNpdG9yLmphdmEKQEAgLTE1LDYgKzE1LDcgQEAKICAqICAgICBOYW5kYSBGaXJkYXVz
aSAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDI5ODg0NAogICogICAgIEplc3BlciBTIE1vbGxlciAt
IENvbnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjE3MwogICogICAgICAgICAgICAgICAgICAgICAgIENv
bnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjE3NAorICogICAgICAgICAgICAgICAgICAgICAgIENvbnRy
aWJ1dGlvbiBmb3IgYnVnIDQwMjg5MgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdl
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7CiAKQEAgLTMyLDYgKzMzLDcgQEAK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFic3RyYWN0TWV0
aG9kRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmFzdC5BYnN0cmFjdFZhcmlhYmxlRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvbXBpbGVyLmFzdC5BbGxvY2F0aW9uRXhwcmVzc2lvbjsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb247CiBpbXBvcnQgb3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uTWV0aG9kRGVjbGFy
YXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bcmd1
bWVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFycmF5
QWxsb2NhdGlvbkV4cHJlc3Npb247CkBAIC02MzQsMTYgKzYzNiw3IEBACiAKIAkJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciwgdHJ1
ZSk7CiAKLQkJLyoKLQkJICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKLQkJICovCi0JCWlu
dCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChleHRyYURpbWVuc2lv
bnMgIT0gMCkgewotCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKysp
IHsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lTEJSQUNLRVQpOwotCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkgfQotCQl9CisJCWZvcm1hdEV4dHJhRGltZW5z
aW9ucyhmaWVsZERlY2xhcmF0aW9uLnR5cGUpOwogCiAJCS8qCiAJCSAqIEZpZWxkIGluaXRpYWxp
emF0aW9uCkBAIC02ODMsNiArNjc2LDQzIEBACiAJCX0gZWxzZSB7CiAJCQl0aGlzLnNjcmliZS5z
cGFjZSgpOwogCQkJdGhpcy5zY3JpYmUucHJpbnRDb21tZW50KENvZGVGb3JtYXR0ZXIuS19VTktO
T1dOLCBTY3JpYmUuQkFTSUNfVFJBSUxJTkdfQ09NTUVOVCk7CisJCX0KKwl9CisKKwlwcml2YXRl
IHZvaWQgZm9ybWF0RXh0cmFEaW1lbnNpb25zKFR5cGVSZWZlcmVuY2UgdHlwZVJlZmVyZW5jZSkg
eworCQkvKgorCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucworCQkgKi8KKwkJaW50IGV4
dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKKwkJaWYgKGV4dHJhRGltZW5zaW9ucyAh
PSAwKSB7CisJCQlpbnQgYW5jaG9yID0gdHlwZVJlZmVyZW5jZSAhPSBudWxsID8gKHR5cGVSZWZl
cmVuY2UuZGltZW5zaW9ucygpIC0gZXh0cmFEaW1lbnNpb25zKSA6IDA7CisJCQlmb3JtYXREaW1l
bnNpb25zKHR5cGVSZWZlcmVuY2UsIGFuY2hvciwgZXh0cmFEaW1lbnNpb25zLCB0cnVlKTsKKwkJ
fQorCX0KKworCXByaXZhdGUgdm9pZCBmb3JtYXRMZWFkaW5nRGltZW5zaW9ucyhUeXBlUmVmZXJl
bmNlIHR5cGVSZWZlcmVuY2UsIGJvb2xlYW4gc3BhY2VCZWZvcmVBbm5vdGF0aW9uKSB7CisJCWlu
dCBsZWFkaW5nRGltZW5zaW9ucyA9IE1hdGgubWluKGdldERpbWVuc2lvbnMoKSwgdHlwZVJlZmVy
ZW5jZSAhPSBudWxsID8gdHlwZVJlZmVyZW5jZS5kaW1lbnNpb25zKCkgOiAwKTsKKwkJaWYgKGxl
YWRpbmdEaW1lbnNpb25zICE9IDApIGZvcm1hdERpbWVuc2lvbnModHlwZVJlZmVyZW5jZSwgMCwg
bGVhZGluZ0RpbWVuc2lvbnMsIHNwYWNlQmVmb3JlQW5ub3RhdGlvbik7CisJfQorCisJcHJpdmF0
ZSB2b2lkIGZvcm1hdERpbWVuc2lvbnMoVHlwZVJlZmVyZW5jZSB0eXBlUmVmZXJlbmNlLCBpbnQg
YW5jaG9yLCBpbnQgY291bnQsIGJvb2xlYW4gc3BhY2VCZWZvcmVBbm5vdGF0aW9uKSB7CisJCWlm
IChjb3VudCAhPSAwKSB7CisJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVm
b3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJCXRoaXMu
c2NyaWJlLnNwYWNlKCk7CisJCQl9CisJCQlBbm5vdGF0aW9uW11bXSBhbm5vdGF0aW9uc09uRGlt
ZW5zaW9ucyA9IHR5cGVSZWZlcmVuY2UgIT0gbnVsbCA/IHR5cGVSZWZlcmVuY2UuZ2V0QW5ub3Rh
dGlvbnNPbkRpbWVuc2lvbnMoKSA6IG51bGw7CisJCQlmb3IgKGludCBpID0gMDsgaSA8IGNvdW50
OyBpKyspIHsKKwkJCQlpbnQgZGltZW5zaW9uSW5kZXggPSBhbmNob3IgKyBpOworCQkJCWlmIChh
bm5vdGF0aW9uc09uRGltZW5zaW9ucyAhPSBudWxsICYmIGFubm90YXRpb25zT25EaW1lbnNpb25z
Lmxlbmd0aCA+IGRpbWVuc2lvbkluZGV4KSB7CisJCQkJCWJvb2xlYW4gaGFkQW5ub3RhdGlvbnMg
PSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhbm5vdGF0aW9uc09uRGltZW5zaW9uc1tkaW1lbnNp
b25JbmRleF0sIHNwYWNlQmVmb3JlQW5ub3RhdGlvbiAmJiBpID09IDApOworCQkJCQlpZiAoaGFk
QW5ub3RhdGlvbnMgJiYgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsK
KwkJCQl9CisJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lTEJSQUNLRVQpOworCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9i
ZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkJCXRoaXMuc2Ny
aWJlLnNwYWNlKCk7CisJCQkJfQorCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKKwkJCX0KIAkJfQogCX0KIApAQCAtNzYzLDE2
ICs3OTMsNyBAQAogCQkJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tl
bnMuVG9rZW5OYW1lSWRlbnRpZmllciwgZmFsc2UpOwogCQkJCQl9CiAKLQkJCQkJLyoKLQkJCQkJ
ICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKLQkJCQkJICovCi0JCQkJCWludCBleHRyYURp
bWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCQkJCWlmIChleHRyYURpbWVuc2lvbnMgIT0g
MCkgewotCQkJCQkJIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCBleHRyYURpbWVuc2lvbnM7
IGluZGV4KyspIHsKLQkJCQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRU
b2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJCQkgfQotCQkJCQl9
CisJCQkJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhmaWVsZERlY2xhcmF0aW9uLnR5cGUpOwogCiAJ
CQkJCS8qCiAJCQkJCSAqIEZpZWxkIGluaXRpYWxpemF0aW9uCkBAIC0xNjc3LDE2ICsxNjk4LDcg
QEAKIAkJIAkqLwogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lSWRlbnRpZmllciwgZmFsc2UpOwogCQl9Ci0JCS8qCi0JCSAqIENoZWNrIGZvciBl
eHRyYSBkaW1lbnNpb25zCi0JCSAqLwotCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5z
aW9ucygpOwotCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpbmRl
eCA9IDA7IGluZGV4IDwgZXh0cmFEaW1lbnNpb25zOyBpbmRleCsrKSB7Ci0JCQkgCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJ
CSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJS
QUNLRVQpOwotCQkJIH0KLQkJfQorCQlmb3JtYXRFeHRyYURpbWVuc2lvbnMobG9jYWxEZWNsYXJh
dGlvbi50eXBlKTsKIAogCQlmaW5hbCBFeHByZXNzaW9uIGluaXRpYWxpemF0aW9uID0gbG9jYWxE
ZWNsYXJhdGlvbi5pbml0aWFsaXphdGlvbjsKIAkJaWYgKGluaXRpYWxpemF0aW9uICE9IG51bGwp
IHsKQEAgLTIzNDgsNiArMjM2MCw5IEBACiAJCQkJCQlkaW1lbnNpb25zKys7CiAJCQkJCQliYWxh
bmNlLS07CiAJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVB
VCA6CisJCQkJCQlza2lwUGFzdFR5cGVBbm5vdGF0aW9ucygpOworCQkJCQkJYnJlYWs7CiAJCQkJ
CWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9DSyA6CiAJCQkJCWNhc2Ug
VGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoKIAkJCQkJY2FzZSBUZXJt
aW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0xJTkUgOgpAQCAtMjM2Niw2ICsyMzgxLDQxIEBA
CiAJCQlyZXR1cm4gZGltZW5zaW9uczsKIAkJfQogCQlyZXR1cm4gMDsKKwl9CisKKwkJcHJpdmF0
ZSB2b2lkIHNraXBQYXN0VHlwZUFubm90YXRpb25zKCkgeyAgLy8gd2UgZ2V0IGhlcmUgaGF2aW5n
IHNlZW4gQAorCQlpbnQgYmFsYW5jZSA9IDA7CisJCWludCBjdXJyZW50VG9rZW5TdGFydFBvc2l0
aW9uID0gdGhpcy5sb2NhbFNjYW5uZXIuY3VycmVudFBvc2l0aW9uOworCQl0cnkgeworCQkJaW50
IHRva2VuOworCQkJbG9vcDogd2hpbGUgKHRydWUpIHsKKwkJCQljdXJyZW50VG9rZW5TdGFydFBv
c2l0aW9uID0gdGhpcy5sb2NhbFNjYW5uZXIuY3VycmVudFBvc2l0aW9uOworCQkJCXRva2VuID0g
dGhpcy5sb2NhbFNjYW5uZXIuZ2V0TmV4dFRva2VuKCk7CisJCQkJc3dpdGNoKHRva2VuKSB7CisJ
CQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRU9GOgorCQkJCQkJYnJlYWsgbG9vcDsK
KwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyIDoKKwkJCQkJY2Fz
ZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVET1QgOgorCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZUNPTU1FTlRfQkxPQ0sgOgorCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2Vu
TmFtZUNPTU1FTlRfSkFWQURPQyA6CisJCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
Q09NTUVOVF9MSU5FIDoKKwkJCQkJCWJyZWFrOworCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZUxQQVJFTjoKKwkJCQkJCWJhbGFuY2UrKzsKKwkJCQkJCWJyZWFrOworCQkJCQljYXNl
IFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJQQVJFTjoKKwkJCQkJCS0tYmFsYW5jZTsgCisJCQkJ
CQkvLyRGQUxMLVRIUk9VR0gkCisJCQkJCWRlZmF1bHQ6CisJCQkJCQlpZiAoYmFsYW5jZSA8PSAw
KQorCQkJCQkJCWJyZWFrIGxvb3A7CisJCQkJfQorCQkJfQorCQl9IGNhdGNoKEludmFsaWRJbnB1
dEV4Y2VwdGlvbiBlKSB7CisJCQkvLyBpZ25vcmUKKwkJfSBmaW5hbGx5IHsKKwkJCXRoaXMubG9j
YWxTY2FubmVyLnJlc2V0VG8oY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiwgdGhpcy5zY3JpYmUu
c2Nhbm5lckVuZFBvc2l0aW9uIC0gMSk7CisJCX0KIAl9CiAKIAlwcml2YXRlIGJvb2xlYW4gaGFz
Q29tbWVudHMoKSB7CkBAIC0yNDAwLDYgKzI0NTAsMTcgQEAKIAkJCQl9CiAJCQl9CiAJCQlyZXR1
cm4gIHRva2VuID09IHRva2VuTmFtZTsKKwkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24g
ZSkgeworCQkJLy8gaWdub3JlCisJCX0KKwkJcmV0dXJuIGZhbHNlOworCX0KKworCXByaXZhdGUg
Ym9vbGVhbiBpc05leHRUb2tlblB1bmN0dWF0aW9uKCkgeworCQl0aGlzLmxvY2FsU2Nhbm5lci5y
ZXNldFRvKHRoaXMuc2NyaWJlLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uLCB0aGlzLnNjcmliZS5z
Y2FubmVyRW5kUG9zaXRpb24gLSAxKTsKKwkJdHJ5IHsKKwkJCWludCB0b2tlbiA9IHRoaXMubG9j
YWxTY2FubmVyLmdldE5leHRUb2tlbigpOworCQkJcmV0dXJuICEoU2Nhbm5lci5pc0xpdGVyYWwo
dG9rZW4pIHx8IFNjYW5uZXIuaXNLZXl3b3JkKHRva2VuKSB8fCBTY2FubmVyLmlzSWRlbnRpZmll
cih0b2tlbikpOwogCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7CiAJCQkvLyBp
Z25vcmUKIAkJfQpAQCAtMjYyNCw4ICsyNjg1LDE1IEBACiAJCSAqLwogCQlpbnQgZXh0cmFEaW1l
bnNpb25zID0gYW5ub3RhdGlvblR5cGVNZW1iZXJEZWNsYXJhdGlvbi5leHRlbmRlZERpbWVuc2lv
bnM7CiAJCWlmIChleHRyYURpbWVuc2lvbnMgIT0gMCkgeworCQkJCisJCQlpZiAodGhpcy5wcmVm
ZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBl
X3JlZmVyZW5jZSkgeworCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCQl9CiAJCQkgZm9yIChp
bnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lvbnM7IGkrKykgewogCQkJIAl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7CisJCQkgCWlm
ICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5
X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkgCQl0aGlzLnNjcmliZS5zcGFjZSgpOworCQkJIAl9CiAJ
CQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJC
UkFDS0VUKTsKIAkJCSB9CiAJCX0KQEAgLTI2NTUsOCArMjcyMyw5IEBACiAJCS8qCiAJCSAqIEFy
Z3VtZW50IHR5cGUKIAkJICovCi0JCWlmIChhcmd1bWVudC50eXBlICE9IG51bGwpIHsKLQkJCWlm
IChhcmd1bWVudC50eXBlIGluc3RhbmNlb2YgVW5pb25UeXBlUmVmZXJlbmNlKSB7CisJCVR5cGVS
ZWZlcmVuY2UgYXJndW1lbnRUeXBlID0gYXJndW1lbnQudHlwZTsKKwkJaWYgKGFyZ3VtZW50VHlw
ZSAhPSBudWxsKSB7CisJCQlpZiAoYXJndW1lbnRUeXBlIGluc3RhbmNlb2YgVW5pb25UeXBlUmVm
ZXJlbmNlKSB7CiAJCQkJZm9ybWF0TXVsdGlDYXRjaEFyZ3VtZW50cygKIAkJCQkJCWFyZ3VtZW50
LCAKIAkJCQkJCXRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9iaW5hcnlfb3Bl
cmF0b3IsIApAQCAtMjY2NCwxMSArMjczMywxOCBAQAogCQkJCQkJdGhpcy5wcmVmZXJlbmNlcy5h
bGlnbm1lbnRfZm9yX3VuaW9uX3R5cGVfaW5fbXVsdGljYXRjaCwKIAkJCQkJCXNjb3BlKTsKIAkJ
CX0gZWxzZSB7Ci0JCQkJYXJndW1lbnQudHlwZS50cmF2ZXJzZSh0aGlzLCBzY29wZSk7CisJCQkJ
YXJndW1lbnRUeXBlLnRyYXZlcnNlKHRoaXMsIHNjb3BlKTsKIAkJCX0KIAkJfQogCiAJCWlmIChh
cmd1bWVudC5pc1ZhckFyZ3MoKSkgeworCQkJQW5ub3RhdGlvbiBbXVtdIGFubm90YXRpb25zT25E
aW1lbnNpb25zID0gYXJndW1lbnRUeXBlLmdldEFubm90YXRpb25zT25EaW1lbnNpb25zKCk7CisJ
CQlpZiAoYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMgIT0gbnVsbCAmJiBhbm5vdGF0aW9uc09uRGlt
ZW5zaW9ucy5sZW5ndGggPiAwKSB7CisJCQkJQW5ub3RhdGlvbiBbXSB2YXJhcmdBbm5vdGF0aW9u
cyA9IGFubm90YXRpb25zT25EaW1lbnNpb25zW2Fubm90YXRpb25zT25EaW1lbnNpb25zLmxlbmd0
aCAtIDFdOworCQkJCWlmICh2YXJhcmdBbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQkJCWZvcm1h
dElubGluZUFubm90YXRpb25zKHZhcmFyZ0Fubm90YXRpb25zLCB0cnVlKTsKKwkJCQl9CisJCQl9
CiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVF
TExJUFNJUywgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX2VsbGlwc2lzKTsK
IAkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9hZnRlcl9lbGxpcHNpcykgewog
CQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7CkBAIC0yNjgxLDE4ICsyNzU3LDcgQEAKIAkJCXRoaXMu
c2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIs
IHRydWUpOwogCQl9CiAKLQotCQkvKgotCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwot
CQkgKi8KLQkJaW50IGV4dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGV4
dHJhRGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkgZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVu
c2lvbnM7IGkrKykgewotCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCSB9Ci0JCX0KLQorCQlmb3Jt
YXRFeHRyYURpbWVuc2lvbnMoYXJndW1lbnRUeXBlKTsKIAkJcmV0dXJuIGZhbHNlOwogCX0KIApA
QCAtMjcxNCw2ICsyNzc5LDkgQEAKIAkJCWZpbmFsIEV4cHJlc3Npb25bXSBkaW1lbnNpb25zID0g
YXJyYXlBbGxvY2F0aW9uRXhwcmVzc2lvbi5kaW1lbnNpb25zOwogCQkJaW50IGRpbWVuc2lvbnNM
ZW5ndGggPSBkaW1lbnNpb25zLmxlbmd0aDsKIAkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5z
aW9uc0xlbmd0aDsgaSsrKSB7CisJCQkJaWYgKGFycmF5QWxsb2NhdGlvbkV4cHJlc3Npb24uYW5u
b3RhdGlvbnNPbkRpbWVuc2lvbnMgIT0gbnVsbCkgeworCQkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0
aW9ucyhhcnJheUFsbG9jYXRpb25FeHByZXNzaW9uLmFubm90YXRpb25zT25EaW1lbnNpb25zW2ld
LCBpID09IDApOworCQkJCX0KIAkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2Vf
YmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV9hbGxvY2F0aW9uX2V4cHJlc3Npb24pIHsK
IAkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKIAkJCQl9CkBAIC0yODk2LDYgKzI5NjQsMTggQEAK
IAkJcmV0dXJuIGZhbHNlOwogCX0KIAorCXByaXZhdGUgdm9pZCBmb3JtYXRBcnJheVF1YWxpZmll
ZFR5cGVSZWZlcmVuY2UoQXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlIGFycmF5UXVhbGlmaWVk
VHlwZVJlZmVyZW5jZSkgeworCQlmaW5hbCBpbnQgbnVtYmVyT2ZQYXJlbnMgPSAoYXJyYXlRdWFs
aWZpZWRUeXBlUmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLlBhcmVudGhlc2l6ZWRNQVNLKSA+PiBB
U1ROb2RlLlBhcmVudGhlc2l6ZWRTSElGVDsKKwkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewor
CQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOworCQl9CisJCWZvcm1hdFF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKTsKKwkJZm9ybWF0TGVhZGluZ0Rp
bWVuc2lvbnMoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVlKTsKKwkJaWYgKG51bWJl
ck9mUGFyZW5zID4gMCkgeworCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9u
KGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOworCQl9CisJfQor
CiAJLyoqCiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuQVNUVmlz
aXRvciN2aXNpdChvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFycmF5UXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSwgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxv
b2t1cC5CbG9ja1Njb3BlKQogCSAqLwpAQCAtMjkwMywyMSArMjk4Myw3IEBACiAJCUFycmF5UXVh
bGlmaWVkVHlwZVJlZmVyZW5jZSBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsCiAJCUJsb2Nr
U2NvcGUgc2NvcGUpIHsKIAotCQkJZmluYWwgaW50IG51bWJlck9mUGFyZW5zID0gKGFycmF5UXVh
bGlmaWVkVHlwZVJlZmVyZW5jZS5iaXRzICYgQVNUTm9kZS5QYXJlbnRoZXNpemVkTUFTSykgPj4g
QVNUTm9kZS5QYXJlbnRoZXNpemVkU0hJRlQ7Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7
Ci0JCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVk
VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQotCQkJdGhpcy5zY3JpYmUucHJp
bnRBcnJheVF1YWxpZmllZFJlZmVyZW5jZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9r
ZW5zLmxlbmd0aCwgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCk7Ci0JCQlp
bnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJCWlmIChkaW1lbnNpb25zICE9IDAp
IHsKLQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7
Ci0JCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZVJCUkFDS0VUKTsKLQkJCQl9Ci0JCQl9Ci0JCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7Ci0J
CQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5UXVhbGlmaWVkVHlw
ZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwotCQkJfQorCQkJZm9ybWF0QXJyYXlRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSk7CiAJCQlyZXR1cm4g
ZmFsc2U7CiAJfQogCkBAIC0yOTI4LDIxICsyOTk0LDcgQEAKIAkJQXJyYXlRdWFsaWZpZWRUeXBl
UmVmZXJlbmNlIGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwKIAkJQ2xhc3NTY29wZSBzY29w
ZSkgewogCi0JCQlmaW5hbCBpbnQgbnVtYmVyT2ZQYXJlbnMgPSAoYXJyYXlRdWFsaWZpZWRUeXBl
UmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLlBhcmVudGhlc2l6ZWRNQVNLKSA+PiBBU1ROb2RlLlBh
cmVudGhlc2l6ZWRTSElGVDsKLQkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKLQkJCQltYW5h
Z2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLCBudW1iZXJPZlBhcmVucyk7Ci0JCQl9Ci0JCQl0aGlzLnNjcmliZS5wcmludEFycmF5UXVh
bGlmaWVkUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50b2tlbnMubGVuZ3Ro
LCBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlRW5kKTsKLQkJCWludCBkaW1lbnNp
b25zID0gZ2V0RGltZW5zaW9ucygpOwotCQkJaWYgKGRpbWVuc2lvbnMgIT0gMCkgewotCQkJCWZv
ciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJCXRoaXMuc2NyaWJlLnBy
aW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQkJdGhp
cy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQp
OwotCQkJCX0KLQkJCX0KLQkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKLQkJCQltYW5hZ2VD
bG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
LCBudW1iZXJPZlBhcmVucyk7Ci0JCQl9CisJCQlmb3JtYXRBcnJheVF1YWxpZmllZFR5cGVSZWZl
cmVuY2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKTsKIAkJCXJldHVybiBmYWxzZTsKIAl9
CiAKQEAgLTI5ODEsMjAgKzMwMzMsMTIgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewog
CQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5VHlwZVJlZmVyZW5j
ZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChhcnJheVR5cGVSZWZlcmVuY2UuYW5ub3Rh
dGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoYXJyYXlUeXBlUmVmZXJlbmNl
LmFubm90YXRpb25zWzBdLCBmYWxzZSk7CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFNJ
TkdMRVRZUEVSRUZFUkVOQ0VfRVhQRUNURURUT0tFTlMpOwogCiAJCWludCBkaW1lbnNpb25zID0g
Z2V0RGltZW5zaW9ucygpOwogCQlpZiAoZGltZW5zaW9ucyAhPSAwKSB7Ci0JCQlpZiAodGhpcy5w
cmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90
eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0JCQlmb3Ig
KGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJlLnByaW50
TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlpZiAodGhp
cy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBl
X3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7
Ci0JCQl9CisJCQlmb3JtYXREaW1lbnNpb25zKGFycmF5VHlwZVJlZmVyZW5jZSwgMCwgZGltZW5z
aW9ucywgdHJ1ZSk7CiAJCX0KIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdl
Q2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5VHlwZVJlZmVyZW5jZSwgbnVtYmVy
T2ZQYXJlbnMpOwpAQCAtMzAxMywxOSArMzA1NywxMSBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMg
PiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlUeXBl
UmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKGFycmF5VHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhcnJheVR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0
VG9rZW4oU0lOR0xFVFlQRVJFRkVSRU5DRV9FWFBFQ1RFRFRPS0VOUyk7CiAJCWludCBkaW1lbnNp
b25zID0gZ2V0RGltZW5zaW9ucygpOwogCQlpZiAoZGltZW5zaW9ucyAhPSAwKSB7Ci0JCQlpZiAo
dGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9pbl9h
cnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9Ci0J
CQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2NyaWJl
LnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQlp
ZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJh
eV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0KLQkJ
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJB
Q0tFVCk7Ci0JCQl9CisJCQlmb3JtYXREaW1lbnNpb25zKGFycmF5VHlwZVJlZmVyZW5jZSwgMCwg
ZGltZW5zaW9ucywgdHJ1ZSk7CiAJCX0KIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJ
bWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5VHlwZVJlZmVyZW5jZSwg
bnVtYmVyT2ZQYXJlbnMpOwpAQCAtNDUyMCwxNiArNDU1Niw3IEBACiAJCQkJCXRoaXMucHJlZmVy
ZW5jZXMuaW5zZXJ0X3NwYWNlX2FmdGVyX2NvbW1hX2luX21ldGhvZF9kZWNsYXJhdGlvbl9wYXJh
bWV0ZXJzLAogCQkJCQl0aGlzLnByZWZlcmVuY2VzLmFsaWdubWVudF9mb3JfcGFyYW1ldGVyc19p
bl9tZXRob2RfZGVjbGFyYXRpb24pOwogCi0JCQkJLyoKLQkJCQkgKiBDaGVjayBmb3IgZXh0cmEg
ZGltZW5zaW9ucwotCQkJCSAqLwotCQkJCWludCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNp
b25zKCk7Ci0JCQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkJCSBmb3IgKGludCBp
ID0gMDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJCSAJdGhpcy5zY3JpYmUucHJp
bnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQkgCXRo
aXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VU
KTsKLQkJCQkJIH0KLQkJCQl9CisJCQkJZm9ybWF0RXh0cmFEaW1lbnNpb25zKG1ldGhvZERlY2xh
cmF0aW9uLnJldHVyblR5cGUpOwogCiAJCQkJLy8gRm9ybWF0IHRocm93cwogCQkJCWZvcm1hdFRo
cm93c0NsYXVzZSgKQEAgLTQ2NjgsNiArNDY5NSw5IEBACiAJCVR5cGVSZWZlcmVuY2VbXVtdIHR5
cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50eXBlQXJn
dW1lbnRzOwogCQlpbnQgbGVuZ3RoID0gdHlwZUFyZ3VtZW50cy5sZW5ndGg7CiAJCWZvciAoaW50
IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKKwkJCWlmIChwYXJhbWV0ZXJpemVkUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIHBhcmFtZXRlcml6ZWRRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0aCA+IGkpIHsKKwkJCQlmb3JtYXRJbmxp
bmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0
aW9uc1tpXSwgZmFsc2UpOworCQkJfQogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllcik7CiAJCQlUeXBlUmVmZXJlbmNlW10gdHlw
ZUFyZ3VtZW50ID0gdHlwZUFyZ3VtZW50c1tpXTsKIAkJCWlmICh0eXBlQXJndW1lbnQgIT0gbnVs
bCkgewpAQCAtNDY5NywxOSArNDcyNyw3IEBACiAJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9r
ZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRE9UKTsKIAkJCX0KIAkJfQotCQlpbnQgZGltZW5z
aW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNp
b25zIDw9IHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSkg
ewotCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2Jy
YWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgp
OwotCQkJfQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0
aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tF
VCk7Ci0JCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tl
dHNfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsK
LQkJCQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lUkJSQUNLRVQpOwotCQkJfQotCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKHBh
cmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVlKTsKIAkJaWYgKG51bWJlck9m
UGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBh
cmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0K
QEAgLTQ3MjUsNiArNDc0Myw5IEBACiAJCVR5cGVSZWZlcmVuY2VbXVtdIHR5cGVBcmd1bWVudHMg
PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOwogCQlp
bnQgbGVuZ3RoID0gdHlwZUFyZ3VtZW50cy5sZW5ndGg7CiAJCWZvciAoaW50IGkgPSAwOyBpIDwg
bGVuZ3RoOyBpKyspIHsKKwkJCWlmIChwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9ucyAhPSBudWxsICYmIHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLmFubm90YXRpb25zLmxlbmd0aCA+IGkpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9u
cyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpXSwgZmFs
c2UpOworCQkJfQogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lSWRlbnRpZmllcik7CiAJCQlUeXBlUmVmZXJlbmNlW10gdHlwZUFyZ3VtZW50ID0g
dHlwZUFyZ3VtZW50c1tpXTsKIAkJCWlmICh0eXBlQXJndW1lbnQgIT0gbnVsbCkgewpAQCAtNDc1
NCwxOSArNDc3NSw3IEBACiAJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lRE9UKTsKIAkJCX0KIAkJfQotCQlpbnQgZGltZW5zaW9ucyA9IGdldERp
bWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNpb25zIDw9IHBhcmFt
ZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMoKSkgewotCQkJaWYgKHRo
aXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJy
YXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJ
Zm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYg
KHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlf
dHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNL
RVQpOwotCQkJfQotCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25zKHBhcmFtZXRlcml6ZWRR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlLCB0cnVlKTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkg
ewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KQEAgLTQ3NzksNiAr
NDc4OCw3IEBACiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQ
YXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwg
bnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVy
ZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0
ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlz
LnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVy
KTsKIAogCQlUeXBlUmVmZXJlbmNlW10gdHlwZUFyZ3VtZW50cyA9IHBhcmFtZXRlcml6ZWRTaW5n
bGVUeXBlUmVmZXJlbmNlLnR5cGVBcmd1bWVudHM7CkBAIC00ODA0LDE5ICs0ODE0LDcgQEAKIAkJ
CXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKENMT1NJTkdfR0VORVJJQ1NfRVhQRUNURURUT0tF
TlMpOwogCQl9CiAKLQkJaW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChk
aW1lbnNpb25zICE9IDAgJiYgZGltZW5zaW9ucyA8PSBwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJl
ZmVyZW5jZS5kaW1lbnNpb25zKCkpIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9z
cGFjZV9iZWZvcmVfb3BlbmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0J
CQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGlt
ZW5zaW9uczsgaSsrKSB7Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2Vy
dF9zcGFjZV9iZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJ
CXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCX0KLQkJfQorCQlmb3Jt
YXRMZWFkaW5nRGltZW5zaW9ucyhwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgdHJ1
ZSk7CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRo
ZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVy
T2ZQYXJlbnMpOwogCQl9CkBAIC00ODI5LDYgKzQ4MjcsNyBAQAogCQlpZiAobnVtYmVyT2ZQYXJl
bnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1l
dGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlpZiAo
cGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9y
bWF0SW5saW5lQW5ub3RhdGlvbnMocGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuYW5u
b3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllcik7CiAKIAkJVHlwZVJlZmVyZW5jZVtdIHR5cGVB
cmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRz
OwpAQCAtNDg1NCwxOSArNDg1Myw3IEBACiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihD
TE9TSU5HX0dFTkVSSUNTX0VYUEVDVEVEVE9LRU5TKTsKIAkJfQogCi0JCWludCBkaW1lbnNpb25z
ID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAoZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMg
PD0gcGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlp
ZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9p
bl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9
Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJ
CQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9h
cnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0K
LQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVS
QlJBQ0tFVCk7Ci0JCQl9Ci0JCX0KKwkJZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVy
aXplZFNpbmdsZVR5cGVSZWZlcmVuY2UsIHRydWUpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAw
KSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVyaXpl
ZFNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQpAQCAtNTA4NywxMiAr
NTA3NCwyNSBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5n
UGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQ
YXJlbnMpOwogCQl9Ci0JCXRoaXMuc2NyaWJlLnByaW50UXVhbGlmaWVkUmVmZXJlbmNlKHF1YWxp
ZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlRW5kLCBudW1iZXJPZlBhcmVucz49MC8qZXhwZWN0IHBh
cmVudGhlc2lzKi8pOwotCisJCWZvcm1hdFF1YWxpZmllZFR5cGVSZWZlcmVuY2UocXVhbGlmaWVk
VHlwZVJlZmVyZW5jZSk7CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNs
b3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1i
ZXJPZlBhcmVucyk7CiAJCX0KIAkJcmV0dXJuIGZhbHNlOworCX0KKworCXByaXZhdGUgdm9pZCBm
b3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKFF1YWxpZmllZFR5cGVSZWZlcmVuY2UgcXVhbGlm
aWVkVHlwZVJlZmVyZW5jZSkgeworCQlmb3IgKGludCBpID0gMCwgbGVuZ3RoID0gcXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS50b2tlbnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyArK2kpIHsKKwkJCWlmIChp
ICE9IDApIHRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFt
ZURPVCwgZmFsc2UpOworCQkJaWYgKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMg
IT0gbnVsbAorCQkJCQkmJiBxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zLmxlbmd0
aCA+IGkKKwkJCQkJJiYgcXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1tpXSAhPSBu
dWxsKSB7CisJCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMocXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9uc1tpXSwgZmFsc2UpOworCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2Vu
KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIsIHRydWUpOworCQkJfSBlbHNlIHsK
KwkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJ
ZGVudGlmaWVyLCBmYWxzZSk7CisJCQl9CisJCX0KIAl9CiAKIAkvKioKQEAgLTUxMDYsNyArNTEw
Niw3IEBACiAJCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQkJbWFuYWdlT3BlbmluZ1Bh
cmVudGhlc2l6ZWRFeHByZXNzaW9uKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFy
ZW5zKTsKIAkJCX0KLQkJCXRoaXMuc2NyaWJlLnByaW50UXVhbGlmaWVkUmVmZXJlbmNlKHF1YWxp
ZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlRW5kLCBudW1iZXJPZlBhcmVucz49MC8qZXhwZWN0IHBh
cmVudGhlc2lzKi8pOworCQkJZm9ybWF0UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShxdWFsaWZpZWRU
eXBlUmVmZXJlbmNlKTsKIAogCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJCW1hbmFn
ZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBu
dW1iZXJPZlBhcmVucyk7CkBAIC01MjEyLDEwICs1MjEyLDI3IEBACiAJCWlmIChudW1iZXJPZlBh
cmVucyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihzaW5n
bGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKHNpbmdsZVR5cGVS
ZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMoc2lu
Z2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVEVE9LRU5TKTsKIAogCQlp
ZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4
cHJlc3Npb24oc2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOworCQl9CisJCXJl
dHVybiBmYWxzZTsKKwl9CisKKwlwcml2YXRlIGJvb2xlYW4gZm9ybWF0SW5saW5lQW5ub3RhdGlv
bnMoZmluYWwgQW5ub3RhdGlvbltdIGFubm90YXRpb25zLCBib29sZWFuIHNwYWNlQmVmb3JlKSB7
CisJCWlmIChhbm5vdGF0aW9ucyAhPSBudWxsICkgeworCQkJaWYgKHNwYWNlQmVmb3JlKSB0aGlz
LnNjcmliZS5zcGFjZSgpOworCQkJaW50IGxlbmd0aCA9IGFubm90YXRpb25zLmxlbmd0aDsKKwkJ
CWZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKKwkJCQlpZiAoaSAhPSAwKSB0aGlz
LnNjcmliZS5zcGFjZSgpOworCQkJCWFubm90YXRpb25zW2ldLnRyYXZlcnNlKHRoaXMsIChCbG9j
a1Njb3BlKW51bGwpOworCQkJfQorCQkJaWYgKGxlbmd0aCA+IDAgJiYgIXRoaXMuaXNOZXh0VG9r
ZW5QdW5jdHVhdGlvbigpKSB7CisJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCX0KKwkJCXJl
dHVybiB0cnVlOwogCQl9CiAJCXJldHVybiBmYWxzZTsKIAl9CkBAIC01MjMxLDYgKzUyNDgsNyBA
QAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVz
aXplZEV4cHJlc3Npb24oc2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9
CisJCWlmIChzaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpIGZvcm1hdElu
bGluZUFubm90YXRpb25zKHNpbmdsZVR5cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNl
KTsKIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVSRU5DRV9FWFBF
Q1RFRFRPS0VOUyk7CiAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewpAQCAtNTY4OCw2ICs1
NzA2LDcgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChUeXBl
UGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXIsIEJsb2NrU2NvcGUgc2NvcGUpIHsKKwkJaWYgKHR5cGVQ
YXJhbWV0ZXIuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnModHlw
ZVBhcmFtZXRlci5hbm5vdGF0aW9ucywgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5wcmludE5leHRU
b2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyKTsKIAkJaWYgKHR5cGVQYXJh
bWV0ZXIudHlwZSAhPSBudWxsKSB7CiAJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwpAQCAtNTcxNCw2
ICs1NzMzLDcgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChU
eXBlUGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXIsIENsYXNzU2NvcGUgc2NvcGUpIHsKKwkJaWYgKHR5
cGVQYXJhbWV0ZXIuYW5ub3RhdGlvbnMgIT0gbnVsbCkgZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMo
dHlwZVBhcmFtZXRlci5hbm5vdGF0aW9ucywgZmFsc2UpOwogCQl0aGlzLnNjcmliZS5wcmludE5l
eHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyKTsKIAkJaWYgKHR5cGVQ
YXJhbWV0ZXIudHlwZSAhPSBudWxsKSB7CiAJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwpAQCAtNTkw
MCw2ICs1OTIwLDkgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9vbGVhbiB2aXNp
dChXaWxkY2FyZCB3aWxkY2FyZCwgQmxvY2tTY29wZSBzY29wZSkgeworCQlpZiAod2lsZGNhcmQu
YW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJaWYgKGZvcm1hdElubGluZUFubm90YXRpb25zKHdp
bGRjYXJkLmFubm90YXRpb25zWzBdLCBmYWxzZSkpIHRoaXMuc2NyaWJlLnNwYWNlKCk7CisJCX0K
IAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUVVF
U1RJT04sIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9xdWVzdGlvbl9pbl93
aWxjYXJkKTsKIAkJc3dpdGNoKHdpbGRjYXJkLmtpbmQpIHsKIAkJCWNhc2UgV2lsZGNhcmQuU1VQ
RVIgOgpAQCAtNTkyMCw2ICs1OTQzLDkgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMg
Ym9vbGVhbiB2aXNpdChXaWxkY2FyZCB3aWxkY2FyZCwgQ2xhc3NTY29wZSBzY29wZSkgeworCQlp
ZiAod2lsZGNhcmQuYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJaWYgKGZvcm1hdElubGluZUFu
bm90YXRpb25zKHdpbGRjYXJkLmFubm90YXRpb25zWzBdLCBmYWxzZSkpIHRoaXMuc2NyaWJlLnNw
YWNlKCk7CisJCX0KIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lUVVFU1RJT04sIHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9x
dWVzdGlvbl9pbl93aWxjYXJkKTsKIAkJc3dpdGNoKHdpbGRjYXJkLmtpbmQpIHsKIAkJCWNhc2Ug
V2lsZGNhcmQuU1VQRVIgOgpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0
dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1h
dHRlci9TY3JpYmUuamF2YQppbmRleCBjZWQ1Njg2Li4zOGFjMzg5IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1h
dHRlci9TY3JpYmUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9TY3JpYmUuamF2YQpAQCAtNSw5ICs1LDE0
IEBACiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWls
YWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAq
IAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZp
Y2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpD
UCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBv
c2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZp
Y2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29y
cG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KICAqICAgICBSYXkgVi4g
KHZvaWRzdGFyQGdtYWlsLmNvbSkgLSBDb250cmlidXRpb24gZm9yIGJ1ZyAyODI5ODgKKyAqICAg
ICBKZXNwZXIgUyBNb2xsZXIgLSBDb250cmlidXRpb24gZm9yIGJ1ZyA0MDI4OTIKICAqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuZm9ybWF0
dGVyOwogCkBAIC00OTIzLDUzICs0OTI4LDYgQEAKIAkJCX0KIAkJCXByaW50KHRoaXMuc2Nhbm5l
ci5jdXJyZW50UG9zaXRpb24gLSB0aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlvbiwgY29uc2lkZXJT
cGFjZUlmQW55KTsKIAkJfSBjYXRjaCAoSW52YWxpZElucHV0RXhjZXB0aW9uIGUpIHsKLQkJCXRo
cm93IG5ldyBBYm9ydEZvcm1hdHRpbmcoZSk7Ci0JCX0KLQl9Ci0KLQlwdWJsaWMgdm9pZCBwcmlu
dEFycmF5UXVhbGlmaWVkUmVmZXJlbmNlKGludCBudW1iZXJPZlRva2VucywgaW50IHNvdXJjZUVu
ZCkgewotCQlpbnQgY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5jdXJy
ZW50UG9zaXRpb247Ci0JCWludCBudW1iZXJPZklkZW50aWZpZXJzID0gMDsKLQkJdHJ5IHsKLQkJ
CWRvIHsKLQkJCQlwcmludENvbW1lbnQoQ29kZUZvcm1hdHRlci5LX1VOS05PV04sIE5PX1RSQUlM
SU5HX0NPTU1FTlQpOwotCQkJCXN3aXRjaCh0aGlzLmN1cnJlbnRUb2tlbiA9IHRoaXMuc2Nhbm5l
ci5nZXROZXh0VG9rZW4oKSkgewotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUVP
RiA6Ci0JCQkJCQlyZXR1cm47Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lV0hJ
VEVTUEFDRSA6Ci0JCQkJCQlhZGREZWxldGVFZGl0KHRoaXMuc2Nhbm5lci5nZXRDdXJyZW50VG9r
ZW5TdGFydFBvc2l0aW9uKCksIHRoaXMuc2Nhbm5lci5nZXRDdXJyZW50VG9rZW5FbmRQb3NpdGlv
bigpKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3Vy
cmVudFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lQ09NTUVOVF9CTE9DSyA6Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
Q09NTUVOVF9KQVZBRE9DIDoKLQkJCQkJCXByaW50QmxvY2tDb21tZW50KGZhbHNlKTsKLQkJCQkJ
CWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9u
OwotCQkJCQkJYnJlYWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVO
VF9MSU5FIDoKLQkJCQkJCXByaW50TGluZUNvbW1lbnQoKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0
YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJYnJlYWs7
Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciA6Ci0JCQkJCQlw
cmludCh0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uIC0gdGhpcy5zY2FubmVyLnN0YXJ0UG9z
aXRpb24sIGZhbHNlKTsKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0aGlzLnNj
YW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJaWYgKCsrIG51bWJlck9mSWRlbnRpZmllcnMg
PT0gbnVtYmVyT2ZUb2tlbnMpIHsKLQkJCQkJCQl0aGlzLnNjYW5uZXIucmVzZXRUbyhjdXJyZW50
VG9rZW5TdGFydFBvc2l0aW9uLCB0aGlzLnNjYW5uZXJFbmRQb3NpdGlvbiAtIDEpOwotCQkJCQkJ
CXJldHVybjsKLQkJCQkJCX0KLQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZURPVCA6Ci0JCQkJCQlwcmludCh0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9u
IC0gdGhpcy5zY2FubmVyLnN0YXJ0UG9zaXRpb24sIGZhbHNlKTsKLQkJCQkJCWN1cnJlbnRUb2tl
blN0YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQkJCQkJYnJl
YWs7Ci0JCQkJCWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUlBBUkVOOgotCQkJCQkJY3Vy
cmVudFRva2VuU3RhcnRQb3NpdGlvbiA9IHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0aW9uOwotCQkJ
CQkJLy8gJEZBTEwtVEhST1VHSCQgLSBmYWxsIHRocm91Z2ggZGVmYXVsdCBjYXNlLi4uCi0JCQkJ
CWRlZmF1bHQ6Ci0JCQkJCQl0aGlzLnNjYW5uZXIucmVzZXRUbyhjdXJyZW50VG9rZW5TdGFydFBv
c2l0aW9uLCB0aGlzLnNjYW5uZXJFbmRQb3NpdGlvbiAtIDEpOwotCQkJCQkJcmV0dXJuOwotCQkJ
CX0KLQkJCX0gd2hpbGUgKHRoaXMuc2Nhbm5lci5jdXJyZW50UG9zaXRpb24gPD0gc291cmNlRW5k
KTsKLQkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgewogCQkJdGhyb3cgbmV3IEFi
b3J0Rm9ybWF0dGluZyhlKTsKIAkJfQogCX0=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>228555</attachid>
            <date>2013-03-18 05:41:00 -0400</date>
            <delta_ts>2013-03-18 05:41:20 -0400</delta_ts>
            <desc>Jesper&apos;s patch in final form after 2 rounds of review</desc>
            <filename>Formatter-for-308.patch</filename>
            <type>text/plain</type>
            <size>46398</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuQWxs
SmF2YThUZXN0cy5qYXZhCmluZGV4IGNkMTExMmUuLjNiZDU0ZjYgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5BbGxKYXZhOFRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL1J1bkFsbEphdmE4VGVzdHMuamF2
YQpAQCAtNDQsNiArNDQsNyBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmRv
bS5BU1RDb252ZXJ0ZXJUZXN0QVNUOF8yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLmRvbS5Db252ZXJ0ZXJUZXN0U2V0dXA7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMuZG9tLlR5cGVBbm5vdGF0aW9uc0NvbnZlcnRlclRlc3Q7CitpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyLkZvcm1hdHRlckpTUjMwOFRlc3RzOwogaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmZvcm1hdHRlci5Gb3JtYXR0ZXJKU1IzMzVUZXN0
czsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5yZXdyaXRlLmRlc2NyaWJpbmcu
QVNUUmV3cml0aW5nVGVzdDsKIApAQCAtNjcsNiArNjgsNyBAQAogCQkJRXhwcmVzc2lvbkNvbnRl
eHRUZXN0cy5jbGFzcywKIAkJCUZsb3dBbmFseXNpc1Rlc3Q4LmNsYXNzLAogCQkJRm9ybWF0dGVy
SlNSMzM1VGVzdHMuY2xhc3MsCisJCQlGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcywKIAkJfTsK
IAl9CiAJCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvUnVuRm9ybWF0dGVyVGVzdHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCmluZGV4IDIwZGE0ZDkuLmU4ZTZhYmEgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9SdW5Gb3JtYXR0ZXJUZXN0cy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9SdW5Gb3JtYXR0
ZXJUZXN0cy5qYXZhCkBAIC0xMiw2ICsxMiw3IEBACiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAg
SUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAg
SmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9uIGZvciBidWcgNDAyMTczCisgKiAgICAgICAg
ICAgICAgICAgICAgICAgQ29udHJpYnV0aW9uIGZvciBidWcgNDAyODkyCiAgKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHM7CiAKQEAgLTM3
LDYgKzM4LDcgQEAKIAkJVEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckNvbW1lbnRzQnVnc1Rlc3Qu
Y2xhc3MpOwogCQlURVNUX1NVSVRFUy5hZGQoRm9ybWF0dGVyQ29tbWVudHNUZXN0cy5jbGFzcyk7
CiAJCVRFU1RfU1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMzVUZXN0cy5jbGFzcyk7CisJCVRFU1Rf
U1VJVEVTLmFkZChGb3JtYXR0ZXJKU1IzMDhUZXN0cy5jbGFzcyk7CiAJCVRFU1RfU1VJVEVTLmFk
ZChGb3JtYXR0ZXJDb21tZW50c0NsZWFyQmxhbmtMaW5lc1Rlc3RzLmNsYXNzKTsKIAkJVEVTVF9T
VUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc1Rlc3RzLmNsYXNzKTsKIAkJ
VEVTVF9TVUlURVMuYWRkKEZvcm1hdHRlckphdmFkb2NEb250SW5kZW50VGFnc0Rlc2NyaXB0aW9u
VGVzdHMuY2xhc3MpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9k
ZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1Iz
MDhUZXN0cy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJKU1IzMDhUZXN0cy5qYXZh
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmZkYTFhNmYKLS0tIC9kZXYvbnVs
bAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvZm9ybWF0dGVyL0Zvcm1hdHRlckpTUjMwOFRlc3RzLmphdmEKQEAgLTAs
MCArMSwzNTEgQEAKKy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIw
MTMgSmVzcGVyIFN0ZWVuIE1vbGxlciBhbmQgb3RoZXJzLgorICogQWxsIHJpZ2h0cyByZXNlcnZl
ZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscworICogYXJlIG1h
ZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5z
ZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2
YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwK
KyAqIAorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVj
aWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3Mg
KEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1
cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVj
aWZpY2F0aW9uIG9mIHRoZSBKQ1AuCisgKiAKKyAqIENvbnRyaWJ1dG9yczoKKyAqICAgICBKZXNw
ZXIgU3RlZW4gTW9sbGVyIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uICovCisKK3Bh
Y2thZ2Ugb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuZm9ybWF0dGVyOworCitpbXBvcnQgamF2
YS51dGlsLk1hcDsKKworaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OworCitpbXBvcnQgb3Jn
LmVjbGlwc2UuY29yZS5yZXNvdXJjZXMuSVdvcmtzcGFjZURlc2NyaXB0aW9uOworaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5jb3JlLklDb21waWxhdGlvblVuaXQ7CitpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmNvcmUuSUphdmFQcm9qZWN0OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLkphdmFN
b2RlbEV4Y2VwdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5mb3JtYXR0ZXIuQ29k
ZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC5BYnN0
cmFjdEphdmFNb2RlbFRlc3RzOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLnV0
aWwuVXRpbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5D
b21waWxlck9wdGlvbnM7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZvcm1hdHRl
ci5EZWZhdWx0Q29kZUZvcm1hdHRlcjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Zm9ybWF0dGVyLkRlZmF1bHRDb2RlRm9ybWF0dGVyT3B0aW9uczsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS50ZXh0LmVkaXRzLlRleHRFZGl0OworCitwdWJsaWMgY2xhc3MgRm9ybWF0dGVySlNSMzA4VGVz
dHMgZXh0ZW5kcyBBYnN0cmFjdEphdmFNb2RlbFRlc3RzIHsKKworCXByb3RlY3RlZCBzdGF0aWMg
SUphdmFQcm9qZWN0IEpBVkFfUFJPSkVDVDsKKworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVO
S05PV05fS0lORCA9IDA7CisJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU4gPSAiX2luIjsK
KwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBPVVQgPSAiX291dCI7CisJcHVibGljIHN0YXRp
YyBmaW5hbCBib29sZWFuIERFQlVHID0gZmFsc2U7CisJc3RhdGljIGZpbmFsIFN0cmluZyBMSU5F
X1NFUEFSQVRPUiA9IFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKTsKKwlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJPSkVDVF9OQU1FID0gIkZvcm1hdHRlckpTUjMwOCI7
IAorCXByaXZhdGUgbG9uZyB0aW1lOworCisJRGVmYXVsdENvZGVGb3JtYXR0ZXJPcHRpb25zIGZv
cm1hdHRlclByZWZzOworCU1hcCBmb3JtYXR0ZXJPcHRpb25zOworCisJc3RhdGljIHsKKy8vCQlU
RVNUU19OVU1CRVJTID0gbmV3IGludFtdIHsgNzgzIH07CisvLwkJVEVTVFNfUkFOR0UgPSBuZXcg
aW50W10geyA3MzQsIC0xIH07CisvLwkJVEVTVFNfTkFNRVMgPSBuZXcgU3RyaW5nIFtdIHsgInRl
c3QwMTUiIH07CisJfQorCXB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgpIHsKKwkJcmV0dXJuIGJ1
aWxkTW9kZWxUZXN0U3VpdGUoRm9ybWF0dGVySlNSMzA4VGVzdHMuY2xhc3MpOworCX0KKworCXB1
YmxpYyBGb3JtYXR0ZXJKU1IzMDhUZXN0cyhTdHJpbmcgbmFtZSkgeworCQlzdXBlcihuYW1lKTsK
Kwl9CisKKwlTdHJpbmcgcnVuRm9ybWF0dGVyKENvZGVGb3JtYXR0ZXIgY29kZUZvcm1hdHRlciwg
U3RyaW5nIHNvdXJjZSwgaW50IGtpbmQsIGludCBpbmRlbnRhdGlvbkxldmVsLCBpbnQgb2Zmc2V0
LCBpbnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvciwgYm9vbGVhbiByZXBlYXQpIHsKKy8v
CQlsb25nIHRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKKwkJVGV4dEVkaXQgZWRp
dCA9IGNvZGVGb3JtYXR0ZXIuZm9ybWF0KGtpbmQsIHNvdXJjZSwgb2Zmc2V0LCBsZW5ndGgsIGlu
ZGVudGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQlTeXN0ZW0u
b3V0LnByaW50bG4oKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGltZSkgKyAiIG1zIik7
CisJCWlmIChlZGl0ID09IG51bGwpIHJldHVybiBudWxsOworLy8JCVN5c3RlbS5vdXQucHJpbnRs
bihlZGl0LmdldENoaWxkcmVuU2l6ZSgpICsgIiBlZGl0cyIpOworCQlTdHJpbmcgcmVzdWx0ID0g
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUudXRpbC5VdGlsLmVkaXRlZFN0cmluZyhzb3Vy
Y2UsIGVkaXQpOworCisJCWlmIChyZXBlYXQgJiYgbGVuZ3RoID09IHNvdXJjZS5sZW5ndGgoKSkg
eworLy8JCQl0aW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CisJCQllZGl0ID0gY29k
ZUZvcm1hdHRlci5mb3JtYXQoa2luZCwgcmVzdWx0LCAwLCByZXN1bHQubGVuZ3RoKCksIGluZGVu
dGF0aW9uTGV2ZWwsIGxpbmVTZXBhcmF0b3IpOy8vJE5PTi1OTFMtMSQKKy8vCQkJU3lzdGVtLm91
dC5wcmludGxuKChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIHRpbWUpICsgIiBtcyIpOwor
CQkJaWYgKGVkaXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CisvLwkJCWFzc2VydEVxdWFscygiU2hv
dWxkIG5vdCBoYXZlIGVkaXRzIiwgMCwgZWRpdC5nZXRDaGlsZHJlbigpLmxlbmd0aCk7CisJCQlm
aW5hbCBTdHJpbmcgcmVzdWx0MiA9IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwu
VXRpbC5lZGl0ZWRTdHJpbmcocmVzdWx0LCBlZGl0KTsKKwkJCWlmICghcmVzdWx0LmVxdWFscyhy
ZXN1bHQyKSkgeworCQkJCWFzc2VydFNvdXJjZUVxdWFscygiU2Vjb25kIGZvcm1hdHRpbmcgaXMg
ZGlmZmVyZW50IGZyb20gZmlyc3Qgb25lISIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5l
RGVsaW1pdGVyKHJlc3VsdCksIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVy
KHJlc3VsdDIpKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4gcmVzdWx0OworCX0KKworCS8qKgorCSAq
IEluaXQgZm9ybWF0dGVyIHByZWZlcmVuY2VzIHdpdGggRWNsaXBzZSBkZWZhdWx0IHNldHRpbmdz
LgorCSAqLworCXByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJICAg
IHN1cGVyLnNldFVwKCk7CisJCXRoaXMuZm9ybWF0dGVyUHJlZnMgPSBEZWZhdWx0Q29kZUZvcm1h
dHRlck9wdGlvbnMuZ2V0RWNsaXBzZURlZmF1bHRTZXR0aW5ncygpOworCQlpZiAoSkFWQV9QUk9K
RUNUICE9IG51bGwpIHsKKwkJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucyA9IEpBVkFfUFJPSkVDVC5n
ZXRPcHRpb25zKHRydWUpOworCQl9CisJCXRoaXMuZm9ybWF0dGVyT3B0aW9ucy5wdXQoQ29tcGls
ZXJPcHRpb25zLk9QVElPTl9Db21wbGlhbmNlLCBDb21waWxlck9wdGlvbnMuVkVSU0lPTl8xXzgp
OworCQl0aGlzLmZvcm1hdHRlck9wdGlvbnMucHV0KENvbXBpbGVyT3B0aW9ucy5PUFRJT05fVGFy
Z2V0UGxhdGZvcm0sIENvbXBpbGVyT3B0aW9ucy5WRVJTSU9OXzFfOCk7CisJCXRoaXMuZm9ybWF0
dGVyT3B0aW9ucy5wdXQoQ29tcGlsZXJPcHRpb25zLk9QVElPTl9Tb3VyY2UsIENvbXBpbGVyT3B0
aW9ucy5WRVJTSU9OXzFfOCk7CisJfQorCisJLyoqCisJICogQ3JlYXRlIHByb2plY3QgYW5kIHNl
dCB0aGUgamFyIHBsYWNlaG9sZGVyLgorCSAqLworCXB1YmxpYyB2b2lkIHNldFVwU3VpdGUoKSB0
aHJvd3MgRXhjZXB0aW9uIHsKKwkJLy8gZW5zdXJlIGF1dG9idWlsZGluZyBpcyB0dXJuZWQgb2Zm
CisJCUlXb3Jrc3BhY2VEZXNjcmlwdGlvbiBkZXNjcmlwdGlvbiA9IGdldFdvcmtzcGFjZSgpLmdl
dERlc2NyaXB0aW9uKCk7CisJCWlmIChkZXNjcmlwdGlvbi5pc0F1dG9CdWlsZGluZygpKSB7CisJ
CQlkZXNjcmlwdGlvbi5zZXRBdXRvQnVpbGRpbmcoZmFsc2UpOworCQkJZ2V0V29ya3NwYWNlKCku
c2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pOworCQl9CisKKwkJaWYgKEpBVkFfUFJPSkVDVCA9
PSBudWxsKSB7CisJCQlKQVZBX1BST0pFQ1QgPSBzZXRVcEphdmFQcm9qZWN0KFBST0pFQ1RfTkFN
RSwgIjEuOCIpOyAvLyROT04tTkxTLTEkCisJCX0KKworCQlpZiAoREVCVUcpIHsKKwkJCXRoaXMu
dGltZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOworCQl9CisJfQorCisJLyoqCisJICog
UmVzZXQgdGhlIGphciBwbGFjZWhvbGRlciBhbmQgZGVsZXRlIHByb2plY3QuCisJICovCisJcHVi
bGljIHZvaWQgdGVhckRvd25TdWl0ZSgpIHRocm93cyBFeGNlcHRpb24geworCQlkZWxldGVQcm9q
ZWN0KEpBVkFfUFJPSkVDVCk7IC8vJE5PTi1OTFMtMSQKKwkJSkFWQV9QUk9KRUNUID0gbnVsbDsK
KwkJaWYgKERFQlVHKSB7CisJCQlTeXN0ZW0ub3V0LnByaW50bG4oIlRpbWUgc3BlbnQgPSAiICsg
KFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC0gdGhpcy50aW1lKSk7Ly8kTk9OLU5MUy0xJAor
CQl9CisJCXN1cGVyLnRlYXJEb3duU3VpdGUoKTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRJ
bihTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlhc3NlcnROb3ROdWxsKGNvbXBpbGF0
aW9uVW5pdE5hbWUpOworCQlpbnQgZG90SW5kZXggPSBjb21waWxhdGlvblVuaXROYW1lLmluZGV4
T2YoJy4nKTsKKwkJYXNzZXJ0VHJ1ZShkb3RJbmRleCAhPSAtMSk7CisJCXJldHVybiBjb21waWxh
dGlvblVuaXROYW1lLnN1YnN0cmluZygwLCBkb3RJbmRleCkgKyBJTiArIGNvbXBpbGF0aW9uVW5p
dE5hbWUuc3Vic3RyaW5nKGRvdEluZGV4KTsKKwl9CisKKwlwcml2YXRlIFN0cmluZyBnZXRPdXQo
U3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUpIHsKKwkJYXNzZXJ0Tm90TnVsbChjb21waWxhdGlv
blVuaXROYW1lKTsKKwkJaW50IGRvdEluZGV4ID0gY29tcGlsYXRpb25Vbml0TmFtZS5pbmRleE9m
KCcuJyk7CisJCWFzc2VydFRydWUoZG90SW5kZXggIT0gLTEpOworCQlyZXR1cm4gY29tcGlsYXRp
b25Vbml0TmFtZS5zdWJzdHJpbmcoMCwgZG90SW5kZXgpICsgT1VUICsgY29tcGlsYXRpb25Vbml0
TmFtZS5zdWJzdHJpbmcoZG90SW5kZXgpOworCX0KKworCXZvaWQgYXNzZXJ0TGluZUVxdWFscyhT
dHJpbmcgYWN0dWFsQ29udGVudHMsIFN0cmluZyBvcmlnaW5hbFNvdXJjZSwgU3RyaW5nIGV4cGVj
dGVkQ29udGVudHMsIGJvb2xlYW4gY2hlY2tOdWxsKSB7CisJCWlmIChhY3R1YWxDb250ZW50cyA9
PSBudWxsKSB7CisJCQlhc3NlcnRUcnVlKCJhY3R1YWxDb250ZW50cyBpcyBudWxsIiwgY2hlY2tO
dWxsKTsKKwkJCWFzc2VydEVxdWFscyhleHBlY3RlZENvbnRlbnRzLCBvcmlnaW5hbFNvdXJjZSk7
CisJCQlyZXR1cm47CisJCX0KKwkJYXNzZXJ0U291cmNlRXF1YWxzKCJEaWZmZXJlbnQgbnVtYmVy
IG9mIGxlbmd0aCIsIFV0aWwuY29udmVydFRvSW5kZXBlbmRhbnRMaW5lRGVsaW1pdGVyKGV4cGVj
dGVkQ29udGVudHMpLCBhY3R1YWxDb250ZW50cyk7CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRl
c3QoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcgY29tcGlsYXRpb25Vbml0TmFtZSkgeworCQlE
ZWZhdWx0Q29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVyID0gbmV3IERlZmF1bHRDb2RlRm9ybWF0
dGVyKHRoaXMuZm9ybWF0dGVyUHJlZnMsIHRoaXMuZm9ybWF0dGVyT3B0aW9ucyk7CisJCXJ1blRl
c3QoY29kZUZvcm1hdHRlciwgcGFja2FnZU5hbWUsIGNvbXBpbGF0aW9uVW5pdE5hbWUsIENvZGVG
b3JtYXR0ZXIuS19DT01QSUxBVElPTl9VTklULCAwKTsKKwl9CisKKwlwcml2YXRlIHZvaWQgcnVu
VGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdlTmFtZSwgU3Ry
aW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRpb25MZXZlbCkg
eworCQlydW5UZXN0KGNvZGVGb3JtYXR0ZXIsIHBhY2thZ2VOYW1lLCBjb21waWxhdGlvblVuaXRO
YW1lLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBmYWxzZSwgMCwgLTEpOworCX0KKwlwcml2YXRl
IHZvaWQgcnVuVGVzdChDb2RlRm9ybWF0dGVyIGNvZGVGb3JtYXR0ZXIsIFN0cmluZyBwYWNrYWdl
TmFtZSwgU3RyaW5nIGNvbXBpbGF0aW9uVW5pdE5hbWUsIGludCBraW5kLCBpbnQgaW5kZW50YXRp
b25MZXZlbCwgYm9vbGVhbiBjaGVja051bGwsIGludCBvZmZzZXQsIGludCBsZW5ndGgpIHsKKwkJ
cnVuVGVzdChjb2RlRm9ybWF0dGVyLCBwYWNrYWdlTmFtZSwgY29tcGlsYXRpb25Vbml0TmFtZSwg
a2luZCwgaW5kZW50YXRpb25MZXZlbCwgY2hlY2tOdWxsLCBvZmZzZXQsIGxlbmd0aCwgbnVsbCk7
CisJfQorCisJcHJpdmF0ZSB2b2lkIHJ1blRlc3QoQ29kZUZvcm1hdHRlciBjb2RlRm9ybWF0dGVy
LCBTdHJpbmcgcGFja2FnZU5hbWUsIFN0cmluZyBjb21waWxhdGlvblVuaXROYW1lLCBpbnQga2lu
ZCwgaW50IGluZGVudGF0aW9uTGV2ZWwsIGJvb2xlYW4gY2hlY2tOdWxsLCBpbnQgb2Zmc2V0LCBp
bnQgbGVuZ3RoLCBTdHJpbmcgbGluZVNlcGFyYXRvcikgeworCQl0cnkgeworCQkJSUNvbXBpbGF0
aW9uVW5pdCBzb3VyY2VVbml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIi
LCBwYWNrYWdlTmFtZSwgZ2V0SW4oY29tcGlsYXRpb25Vbml0TmFtZSkpOyAvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwkJCVN0cmluZyBzb3VyY2UgPSBzb3VyY2VVbml0LmdldFNvdXJjZSgp
OworCQkJYXNzZXJ0Tm90TnVsbChzb3VyY2UpOworCQkJSUNvbXBpbGF0aW9uVW5pdCBvdXRwdXRV
bml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KFBST0pFQ1RfTkFNRSAsICIiLCBwYWNrYWdlTmFtZSwg
Z2V0T3V0KGNvbXBpbGF0aW9uVW5pdE5hbWUpKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJCQlhc3NlcnROb3ROdWxsKG91dHB1dFVuaXQpOworCQkJU3RyaW5nIHJlc3VsdDsKKwkJCWlm
IChsZW5ndGggPT0gLTEpIHsKKwkJCQlyZXN1bHQgPSBydW5Gb3JtYXR0ZXIoY29kZUZvcm1hdHRl
ciwgc291cmNlLCBraW5kLCBpbmRlbnRhdGlvbkxldmVsLCBvZmZzZXQsIHNvdXJjZS5sZW5ndGgo
KSwgbGluZVNlcGFyYXRvciwgdHJ1ZSk7CisJCQl9IGVsc2UgeworCQkJCXJlc3VsdCA9IHJ1bkZv
cm1hdHRlcihjb2RlRm9ybWF0dGVyLCBzb3VyY2UsIGtpbmQsIGluZGVudGF0aW9uTGV2ZWwsIG9m
ZnNldCwgbGVuZ3RoLCBsaW5lU2VwYXJhdG9yLCB0cnVlKTsKKwkJCX0KKwkJCWFzc2VydExpbmVF
cXVhbHMocmVzdWx0LCBzb3VyY2UsIG91dHB1dFVuaXQuZ2V0U291cmNlKCksIGNoZWNrTnVsbCk7
CisJCX0gY2F0Y2ggKEphdmFNb2RlbEV4Y2VwdGlvbiBlKSB7CisJCQllLnByaW50U3RhY2tUcmFj
ZSgpOworCQkJYXNzZXJ0VHJ1ZShmYWxzZSk7CisJCX0KKwl9CisJCisJcHVibGljIHZvaWQgdGVz
dExhbWJkYSgpIHsKKwkJcnVuVGVzdCgidGVzdExhbWJkYSIsICJBLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisJCisJcHVibGljIHZvaWQgdGVzdFJlZmVyZW5jZUV4cHJl
c3Npb24oKSB7CisJCXJ1blRlc3QoInRlc3RSZWZlcmVuY2VFeHByZXNzaW9uIiwgIkEuamF2YSIp
Oy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDAo
KSB7CisJCXJ1blRlc3QoInRlc3QwMDAiLCAiSS5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04t
TkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAwMSgpIHsKKwkJcnVuVGVzdCgidGVzdDAw
MSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMg
dm9pZCB0ZXN0MDAyKCkgeworCQlydW5UZXN0KCJ0ZXN0MDAyIiwgIlguamF2YSIpOy8vJE5PTi1O
TFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDMoKSB7CisJCXJ1
blRlc3QoInRlc3QwMDMiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJ
fQorCisJcHVibGljIHZvaWQgdGVzdDAwNCgpIHsKKwkJcnVuVGVzdCgidGVzdDAwNCIsICJYLmph
dmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0
MDA1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDA1IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8k
Tk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDYoKSB7CisJCXJ1blRlc3QoInRl
c3QwMDYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVi
bGljIHZvaWQgdGVzdDAwNygpIHsKKwkJcnVuVGVzdCgidGVzdDAwNyIsICJYLmphdmEiKTsvLyRO
T04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDA4KCkgewor
CQlydW5UZXN0KCJ0ZXN0MDA4IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMDkoKSB7CisJCXJ1blRlc3QoInRlc3QwMDkiLCAi
WC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQg
dGVzdDAxMCgpIHsKKwkJcnVuVGVzdCgidGVzdDAxMCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDExKCkgeworCQlydW5UZXN0
KCJ0ZXN0MDExIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKwor
CXB1YmxpYyB2b2lkIHRlc3QwMTIoKSB7CisJCXJ1blRlc3QoInRlc3QwMTIiLCAiWC5qYXZhIik7
Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxMygp
IHsKKwkJcnVuVGVzdCgidGVzdDAxMyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1O
TFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE0KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE0
IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2
b2lkIHRlc3QwMTUoKSB7CisJCXJ1blRlc3QoInRlc3QwMTUiLCAiWC5qYXZhIik7Ly8kTk9OLU5M
Uy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxNigpIHsKKwkJcnVu
VGVzdCgidGVzdDAxNiIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9
CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDE3KCkgeworCQlydW5UZXN0KCJ0ZXN0MDE3IiwgIlguamF2
YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3Qw
MTgoKSB7CisJCXJ1blRlc3QoInRlc3QwMTgiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyRO
T04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAxOSgpIHsKKwkJcnVuVGVzdCgidGVz
dDAxOSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJs
aWMgdm9pZCB0ZXN0MDIwKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIwIiwgIlguamF2YSIpOy8vJE5P
Ti1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjEoKSB7CisJ
CXJ1blRlc3QoInRlc3QwMjEiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CisJfQorCisJcHVibGljIHZvaWQgdGVzdDAyMigpIHsKKwkJcnVuVGVzdCgidGVzdDAyMiIsICJY
LmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0
ZXN0MDIzKCkgeworCQlydW5UZXN0KCJ0ZXN0MDIzIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQg
Ly8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjQoKSB7CisJCXJ1blRlc3Qo
InRlc3QwMjQiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJ
cHVibGljIHZvaWQgdGVzdDAyNSgpIHsKKwkJcnVuVGVzdCgidGVzdDAyNSIsICJYLmphdmEiKTsv
LyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI2KCkg
eworCQlydW5UZXN0KCJ0ZXN0MDI2IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5M
Uy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMjcoKSB7CisJCXJ1blRlc3QoInRlc3QwMjci
LCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZv
aWQgdGVzdDAyOCgpIHsKKwkJcnVuVGVzdCgidGVzdDAyOCIsICJYLmphdmEiKTsvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDI5KCkgeworCQlydW5U
ZXN0KCJ0ZXN0MDI5IiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0K
KworCXB1YmxpYyB2b2lkIHRlc3QwMzAoKSB7CisJCXJ1blRlc3QoInRlc3QwMzAiLCAiWC5qYXZh
Iik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAz
MSgpIHsKKwkJcnVuVGVzdCgidGVzdDAzMSIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5P
Ti1OTFMtMiQKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDMyKCkgeworCQlydW5UZXN0KCJ0ZXN0
MDMyIiwgIlguamF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1Ymxp
YyB2b2lkIHRlc3QwMzMoKSB7CisJCXJ1blRlc3QoInRlc3QwMzMiLCAiWC5qYXZhIik7Ly8kTk9O
LU5MUy0xJCAvLyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNCgpIHsKKwkJ
cnVuVGVzdCgidGVzdDAzNCIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQK
Kwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0MDM1KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM1IiwgIlgu
amF2YSIpOy8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRl
c3QwMzYoKSB7CisJCXJ1blRlc3QoInRlc3QwMzYiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAv
LyROT04tTkxTLTIkCisJfQorCisJcHVibGljIHZvaWQgdGVzdDAzNygpIHsKKwkJcnVuVGVzdCgi
dGVzdDAzNyIsICJYLmphdmEiKTsvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwl9CisKKwlw
dWJsaWMgdm9pZCB0ZXN0MDM4KCkgeworCQlydW5UZXN0KCJ0ZXN0MDM4IiwgIlguamF2YSIpOy8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCX0KKworCXB1YmxpYyB2b2lkIHRlc3QwMzkoKSB7
CisJCXJ1blRlc3QoInRlc3QwMzkiLCAiWC5qYXZhIik7Ly8kTk9OLU5MUy0xJCAvLyROT04tTkxT
LTIkCisJfQorfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVz
dExhbWJkYS9BX2luLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jr
c3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RMYW1iZGEvQV9pbi5qYXZhCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAuLjM5NzQ0ZDcKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rlc3RM
YW1iZGEvQV9pbi5qYXZhCkBAIC0wLDAgKzEsNDQgQEAKKy8qKgorICogVGVzdAorICoKKyAqLwor
cGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBv
cnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5k
cyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsIENsb25lYWJsZSwgU2VyaWFs
aXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRh
cygpIHsKKwkJUnVubmFibGUgYSA9ICgpIC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVz
dE1ldCh5b3UpOworCQkJaGVyZS5udW1iZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEg
PSB4IC0+IHg7CisKKwkJRnVuYyBpZEIgPSB4IC0+IHsgcmV0dXJuIHg7IH07CisJCQorCQlGdW5j
IGlkQyA9IHggICAtPiAgIHg7CisKKwkJRnVuYyBpZDIgPSB4IC0+IHsKKwkJCWlmICh4ID09IG51
bGwpCisJCQl7CisJCQkJcmV0dXJuIG51bGw7CisJCQl9CisJCQllbHNlCisJCQkJcmV0dXJuIHg7
CisJCX07CisJCQorCQlJbWFnaW5hYmxlRnVuY3Rpb248U3RyaW5nLCBJbnRlZ2VyPiBmID0KKwkJ
CShTdHJpbmcgaW5wdXQpIC0+IGlucHV0Lmxlbmd0aCgpOworCisJCQlJbWFnaW5hYmxlRnVuY3Rp
b248U3RyaW5nLCBJbnRlZ2VyPiBmMiA9IChTdHJpbmcgaW5wdXQpIC0+IHsgcmV0dXJuIGlucHV0
Lmxlbmd0aCgpICsgbmV3IExldHNQcmV0ZW5kKCkgeyBpbnQgaG93TWFueSgpIHsgcmV0dXJuIDQy
OyB9IH0KKwkJCQkJCisuaG93TWFueSgpOyB9OworCX0KKworfQpcIE5vIG5ld2xpbmUgYXQgZW5k
IG9mIGZpbGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdExhbWJkYS9BX291dC5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0TGFt
YmRhL0Ffb3V0LmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uMWJjZDdj
MwotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dv
cmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdExhbWJkYS9BX291dC5qYXZhCkBAIC0wLDAgKzEs
NTEgQEAKKy8qKgorICogVGVzdAorICoKKyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBv
cnQgamF2YS5pby5TZXJpYWxpemFibGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKwor
cHVibGljIGFic3RyYWN0IGNsYXNzIEEgZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVu
dHMgUnVubmFibGUsCisJCUNsb25lYWJsZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBy
dW4oKSB7CisJfQorCisJcHVibGljIHZvaWQgbGFtYmRhcygpIHsKKwkJUnVubmFibGUgYSA9ICgp
IC0+IHsKKwkJCXRoaXNJc0NyYXp5KCk7CisJCQlpSnVzdE1ldCh5b3UpOworCQkJaGVyZS5udW1i
ZXIuY2FsbE1lKCk7CisJCX07CisKKwkJRnVuYyBpZEEgPSB4IC0+IHg7CisKKwkJRnVuYyBpZEIg
PSB4IC0+IHsKKwkJCXJldHVybiB4OworCQl9OworCisJCUZ1bmMgaWRDID0geCAtPiB4OworCisJ
CUZ1bmMgaWQyID0geCAtPiB7CisJCQlpZiAoeCA9PSBudWxsKSB7CisJCQkJcmV0dXJuIG51bGw7
CisJCQl9IGVsc2UKKwkJCQlyZXR1cm4geDsKKwkJfTsKKworCQlJbWFnaW5hYmxlRnVuY3Rpb248
U3RyaW5nLCBJbnRlZ2VyPiBmID0gKFN0cmluZyBpbnB1dCkgLT4gaW5wdXQKKwkJCQkubGVuZ3Ro
KCk7CisKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZjIgPSAoU3RyaW5n
IGlucHV0KSAtPiB7CisJCQlyZXR1cm4gaW5wdXQubGVuZ3RoKCkgKyBuZXcgTGV0c1ByZXRlbmQo
KSB7CisJCQkJaW50IGhvd01hbnkoKSB7CisJCQkJCXJldHVybiA0MjsKKwkJCQl9CisJCQl9CisK
KwkJCS5ob3dNYW55KCk7CisJCX07CisJfQorCit9ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmls
ZQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNl
L0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNlRXhwcmVzc2lvbi9BX2luLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC93b3Jrc3BhY2UvRm9ybWF0dGVySlNSMzA4L3Rl
c3RSZWZlcmVuY2VFeHByZXNzaW9uL0FfaW4uamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwLi40NDk5NDY3Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNlRXhw
cmVzc2lvbi9BX2luLmphdmEKQEAgLTAsMCArMSwyMSBAQAorLyoqCisgKiBUZXN0CisgKgorICov
CitwYWNrYWdlIHAxLnAyLnRlc3Q7CisKK2ltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKK2lt
cG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOworCitwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQSBleHRl
bmRzIGphdmEubGFuZy5PYmplY3QgaW1wbGVtZW50cyBSdW5uYWJsZSwgQ2xvbmVhYmxlLCBTZXJp
YWxpemFibGUgeworCXB1YmxpYyB2b2lkIHJ1bigpIHsKKwl9CisKKwlwcml2YXRlIHN0YXRpYyBm
aW5hbCAgIEZ1bmN0aW9uYWxpc2g8TGlzdDxJbnRlZ2VyPiwgSW50ZWdlcj4gV0hBVEVWRVIgPSBM
aXN0PCBJbnRlZ2VyID4gOjogc2l6ZSA7CisJCisJcHVibGljIHZvaWQgcmVmZXJlbmNlRXhwcmVz
c2lvbigpIHsKKwkJSW1hZ2luYWJsZUZ1bmN0aW9uPFN0cmluZywgSW50ZWdlcj4gZnVuYyA9IEts
YXp6CisJCQkJOjogIG1ldGhvZDsgCisJfQkKKworfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZp
bGUKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFj
ZS9Gb3JtYXR0ZXJKU1IzMDgvdGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3dvcmtzcGFjZS9Gb3JtYXR0ZXJKU1IzMDgv
dGVzdFJlZmVyZW5jZUV4cHJlc3Npb24vQV9vdXQuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwLi4yNjUyNDA0Ci0tLSAvZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvd29ya3NwYWNlL0Zvcm1hdHRlckpTUjMwOC90ZXN0UmVmZXJlbmNl
RXhwcmVzc2lvbi9BX291dC5qYXZhCkBAIC0wLDAgKzEsMjEgQEAKKy8qKgorICogVGVzdAorICoK
KyAqLworcGFja2FnZSBwMS5wMi50ZXN0OworCitpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7
CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKKworcHVibGljIGFic3RyYWN0IGNsYXNzIEEg
ZXh0ZW5kcyBqYXZhLmxhbmcuT2JqZWN0IGltcGxlbWVudHMgUnVubmFibGUsCisJCUNsb25lYWJs
ZSwgU2VyaWFsaXphYmxlIHsKKwlwdWJsaWMgdm9pZCBydW4oKSB7CisJfQorCisJcHJpdmF0ZSBz
dGF0aWMgZmluYWwgRnVuY3Rpb25hbGlzaDxMaXN0PEludGVnZXI+LCBJbnRlZ2VyPiBXSEFURVZF
UiA9IExpc3Q8SW50ZWdlcj46OnNpemU7CisKKwlwdWJsaWMgdm9pZCByZWZlcmVuY2VFeHByZXNz
aW9uKCkgeworCQlJbWFnaW5hYmxlRnVuY3Rpb248U3RyaW5nLCBJbnRlZ2VyPiBmdW5jID0gS2xh
eno6Om1ldGhvZDsKKwl9CisKK30KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2Zvcm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29kZUZv
cm1hdHRlclZpc2l0b3IuamF2YQppbmRleCAzYjQ5ZDNkLi5lMTIxZjRhIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zv
cm1hdHRlci9Db2RlRm9ybWF0dGVyVmlzaXRvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0NvZGVGb3Jt
YXR0ZXJWaXNpdG9yLmphdmEKQEAgLTE1LDYgKzE1LDcgQEAKICAqICAgICBOYW5kYSBGaXJkYXVz
aSAtIENvbnRyaWJ1dGlvbiBmb3IgYnVnIDI5ODg0NAogICogICAgIEplc3BlciBTIE1vbGxlciAt
IENvbnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjE3MwogICogICAgICAgICAgICAgICAgICAgICAgIENv
bnRyaWJ1dGlvbiBmb3IgYnVnIDQwMjE3NAorICogICAgICAgICAgICAgICAgICAgICAgIENvbnRy
aWJ1dGlvbiBmb3IgYnVnIDQwMjg5MgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdl
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7CiAKQEAgLTMyLDYgKzMzLDcgQEAK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFic3RyYWN0TWV0
aG9kRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmFzdC5BYnN0cmFjdFZhcmlhYmxlRGVjbGFyYXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvbXBpbGVyLmFzdC5BbGxvY2F0aW9uRXhwcmVzc2lvbjsKK2ltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFubm90YXRpb247CiBpbXBvcnQgb3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bbm5vdGF0aW9uTWV0aG9kRGVjbGFy
YXRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5Bcmd1
bWVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkFycmF5
QWxsb2NhdGlvbkV4cHJlc3Npb247CkBAIC02MzQsMTYgKzYzNiw3IEBACiAKIAkJdGhpcy5zY3Jp
YmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciwgdHJ1
ZSk7CiAKLQkJLyoKLQkJICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKLQkJICovCi0JCWlu
dCBleHRyYURpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChleHRyYURpbWVuc2lv
bnMgIT0gMCkgewotCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKysp
IHsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lTEJSQUNLRVQpOwotCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkgfQotCQl9CisJCWZvcm1hdEV4dHJhRGltZW5z
aW9ucyhmaWVsZERlY2xhcmF0aW9uLnR5cGUpOwogCiAJCS8qCiAJCSAqIEZpZWxkIGluaXRpYWxp
emF0aW9uCkBAIC02ODMsNiArNjc2LDQzIEBACiAJCX0gZWxzZSB7CiAJCQl0aGlzLnNjcmliZS5z
cGFjZSgpOwogCQkJdGhpcy5zY3JpYmUucHJpbnRDb21tZW50KENvZGVGb3JtYXR0ZXIuS19VTktO
T1dOLCBTY3JpYmUuQkFTSUNfVFJBSUxJTkdfQ09NTUVOVCk7CisJCX0KKwl9CisKKwlwcml2YXRl
IHZvaWQgZm9ybWF0RXh0cmFEaW1lbnNpb25zKFR5cGVSZWZlcmVuY2UgdHlwZVJlZmVyZW5jZSkg
eworCQkvKgorCQkgKiBDaGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucworCQkgKi8KKwkJaW50IGV4
dHJhRGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKKwkJaWYgKGV4dHJhRGltZW5zaW9ucyAh
PSAwKSB7CisJCQlpbnQgYW5jaG9yID0gdHlwZVJlZmVyZW5jZSAhPSBudWxsID8gKHR5cGVSZWZl
cmVuY2UuZGltZW5zaW9ucygpIC0gZXh0cmFEaW1lbnNpb25zKSA6IDA7CisJCQlmb3JtYXREaW1l
bnNpb25zKHR5cGVSZWZlcmVuY2UsIGFuY2hvciwgZXh0cmFEaW1lbnNpb25zLCB0cnVlKTsKKwkJ
fQorCX0KKworCXByaXZhdGUgdm9pZCBmb3JtYXRMZWFkaW5nRGltZW5zaW9ucyhUeXBlUmVmZXJl
bmNlIHR5cGVSZWZlcmVuY2UsIGJvb2xlYW4gc3BhY2VCZWZvcmVBbm5vdGF0aW9uKSB7CisJCWlu
dCBsZWFkaW5nRGltZW5zaW9ucyA9IE1hdGgubWluKGdldERpbWVuc2lvbnMoKSwgdHlwZVJlZmVy
ZW5jZSAhPSBudWxsID8gdHlwZVJlZmVyZW5jZS5kaW1lbnNpb25zKCkgOiAwKTsKKwkJaWYgKGxl
YWRpbmdEaW1lbnNpb25zICE9IDApIGZvcm1hdERpbWVuc2lvbnModHlwZVJlZmVyZW5jZSwgMCwg
bGVhZGluZ0RpbWVuc2lvbnMsIHNwYWNlQmVmb3JlQW5ub3RhdGlvbik7CisJfQorCisJcHJpdmF0
ZSB2b2lkIGZvcm1hdERpbWVuc2lvbnMoVHlwZVJlZmVyZW5jZSB0eXBlUmVmZXJlbmNlLCBpbnQg
YW5jaG9yLCBpbnQgY291bnQsIGJvb2xlYW4gc3BhY2VCZWZvcmVBbm5vdGF0aW9uKSB7CisJCWlm
IChjb3VudCAhPSAwKSB7CisJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVm
b3JlX29wZW5pbmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJCXRoaXMu
c2NyaWJlLnNwYWNlKCk7CisJCQl9CisJCQlBbm5vdGF0aW9uW11bXSBhbm5vdGF0aW9uc09uRGlt
ZW5zaW9ucyA9IHR5cGVSZWZlcmVuY2UgIT0gbnVsbCA/IHR5cGVSZWZlcmVuY2UuZ2V0QW5ub3Rh
dGlvbnNPbkRpbWVuc2lvbnMoKSA6IG51bGw7CisJCQlmb3IgKGludCBpID0gMDsgaSA8IGNvdW50
OyBpKyspIHsKKwkJCQlpbnQgZGltZW5zaW9uSW5kZXggPSBhbmNob3IgKyBpOworCQkJCWlmIChh
bm5vdGF0aW9uc09uRGltZW5zaW9ucyAhPSBudWxsICYmIGFubm90YXRpb25zT25EaW1lbnNpb25z
Lmxlbmd0aCA+IGRpbWVuc2lvbkluZGV4KSB7CisJCQkJCWJvb2xlYW4gaGFkQW5ub3RhdGlvbnMg
PSBmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhbm5vdGF0aW9uc09uRGltZW5zaW9uc1tkaW1lbnNp
b25JbmRleF0sIHNwYWNlQmVmb3JlQW5ub3RhdGlvbiAmJiBpID09IDApOworCQkJCQlpZiAoaGFk
QW5ub3RhdGlvbnMgJiYgdGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsK
KwkJCQl9CisJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lTEJSQUNLRVQpOworCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9i
ZXR3ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7CisJCQkJCXRoaXMuc2Ny
aWJlLnNwYWNlKCk7CisJCQkJfQorCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1p
bmFsVG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKKwkJCX0KIAkJfQogCX0KIApAQCAtNzYzLDE2
ICs3OTMsNyBAQAogCQkJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tl
bnMuVG9rZW5OYW1lSWRlbnRpZmllciwgZmFsc2UpOwogCQkJCQl9CiAKLQkJCQkJLyoKLQkJCQkJ
ICogQ2hlY2sgZm9yIGV4dHJhIGRpbWVuc2lvbnMKLQkJCQkJICovCi0JCQkJCWludCBleHRyYURp
bWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCQkJCWlmIChleHRyYURpbWVuc2lvbnMgIT0g
MCkgewotCQkJCQkJIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCBleHRyYURpbWVuc2lvbnM7
IGluZGV4KyspIHsKLQkJCQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRU
b2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJCQkgfQotCQkJCQl9
CisJCQkJCWZvcm1hdEV4dHJhRGltZW5zaW9ucyhmaWVsZERlY2xhcmF0aW9uLnR5cGUpOwogCiAJ
CQkJCS8qCiAJCQkJCSAqIEZpZWxkIGluaXRpYWxpemF0aW9uCkBAIC0xNjc3LDE2ICsxNjk4LDcg
QEAKIAkJIAkqLwogCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lSWRlbnRpZmllciwgZmFsc2UpOwogCQl9Ci0JCS8qCi0JCSAqIENoZWNrIGZvciBl
eHRyYSBkaW1lbnNpb25zCi0JCSAqLwotCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5z
aW9ucygpOwotCQlpZiAoZXh0cmFEaW1lbnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpbmRl
eCA9IDA7IGluZGV4IDwgZXh0cmFEaW1lbnNpb25zOyBpbmRleCsrKSB7Ci0JCQkgCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJ
CSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJS
QUNLRVQpOwotCQkJIH0KLQkJfQorCQlmb3JtYXRFeHRyYURpbWVuc2lvbnMobG9jYWxEZWNsYXJh
dGlvbi50eXBlKTsKIAogCQlmaW5hbCBFeHByZXNzaW9uIGluaXRpYWxpemF0aW9uID0gbG9jYWxE
ZWNsYXJhdGlvbi5pbml0aWFsaXphdGlvbjsKIAkJaWYgKGluaXRpYWxpemF0aW9uICE9IG51bGwp
IHsKQEAgLTIzNDgsNiArMjM2MCw5IEBACiAJCQkJCQlkaW1lbnNpb25zKys7CiAJCQkJCQliYWxh
bmNlLS07CiAJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVB
VCA6CisJCQkJCQlza2lwUGFzdFR5cGVBbm5vdGF0aW9ucygpOworCQkJCQkJYnJlYWs7CiAJCQkJ
CWNhc2UgVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9CTE9DSyA6CiAJCQkJCWNhc2Ug
VGVybWluYWxUb2tlbnMuVG9rZW5OYW1lQ09NTUVOVF9KQVZBRE9DIDoKIAkJCQkJY2FzZSBUZXJt
aW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5UX0xJTkUgOgpAQCAtMjM2Niw2ICsyMzgxLDQwIEBA
CiAJCQlyZXR1cm4gZGltZW5zaW9uczsKIAkJfQogCQlyZXR1cm4gMDsKKwl9CisKKwkJcHJpdmF0
ZSB2b2lkIHNraXBQYXN0VHlwZUFubm90YXRpb25zKCkgeyAgLy8gd2UgZ2V0IGhlcmUgaGF2aW5n
IHNlZW4gQAorCQlpbnQgYmFsYW5jZSA9IDA7CisJCWludCBjdXJyZW50VG9rZW5TdGFydFBvc2l0
aW9uID0gdGhpcy5sb2NhbFNjYW5uZXIuY3VycmVudFBvc2l0aW9uOworCQl0cnkgeworCQkJbG9v
cDogd2hpbGUgKHRydWUpIHsKKwkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5s
b2NhbFNjYW5uZXIuY3VycmVudFBvc2l0aW9uOworCQkJCWludCB0b2tlbiA9IHRoaXMubG9jYWxT
Y2FubmVyLmdldE5leHRUb2tlbigpOworCQkJCXN3aXRjaCh0b2tlbikgeworCQkJCQljYXNlIFRl
cm1pbmFsVG9rZW5zLlRva2VuTmFtZUVPRjoKKwkJCQkJCWJyZWFrIGxvb3A7CisJCQkJCWNhc2Ug
VGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciA6CisJCQkJCWNhc2UgVGVybWluYWxU
b2tlbnMuVG9rZW5OYW1lRE9UIDoKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVD
T01NRU5UX0JMT0NLIDoKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVDT01NRU5U
X0pBVkFET0MgOgorCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfTElO
RSA6CisJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMUEFS
RU46CisJCQkJCQliYWxhbmNlKys7CisJCQkJCQlicmVhazsKKwkJCQkJY2FzZSBUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVSUEFSRU46CisJCQkJCQktLWJhbGFuY2U7IAorCQkJCQkJYnJlYWs7CisJ
CQkJCWRlZmF1bHQ6CisJCQkJCQlpZiAoYmFsYW5jZSA8PSAwKQorCQkJCQkJCWJyZWFrIGxvb3A7
CisJCQkJfQorCQkJfQorCQl9IGNhdGNoKEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7CisJCQkv
LyBpZ25vcmUKKwkJfSBmaW5hbGx5IHsKKwkJCXRoaXMubG9jYWxTY2FubmVyLnJlc2V0VG8oY3Vy
cmVudFRva2VuU3RhcnRQb3NpdGlvbiwgdGhpcy5zY3JpYmUuc2Nhbm5lckVuZFBvc2l0aW9uIC0g
MSk7CisJCX0KIAl9CiAKIAlwcml2YXRlIGJvb2xlYW4gaGFzQ29tbWVudHMoKSB7CkBAIC0yNDAw
LDYgKzI0NDksMTcgQEAKIAkJCQl9CiAJCQl9CiAJCQlyZXR1cm4gIHRva2VuID09IHRva2VuTmFt
ZTsKKwkJfSBjYXRjaChJbnZhbGlkSW5wdXRFeGNlcHRpb24gZSkgeworCQkJLy8gaWdub3JlCisJ
CX0KKwkJcmV0dXJuIGZhbHNlOworCX0KKworCXByaXZhdGUgYm9vbGVhbiBpc05leHRUb2tlblB1
bmN0dWF0aW9uKCkgeworCQl0aGlzLmxvY2FsU2Nhbm5lci5yZXNldFRvKHRoaXMuc2NyaWJlLnNj
YW5uZXIuY3VycmVudFBvc2l0aW9uLCB0aGlzLnNjcmliZS5zY2FubmVyRW5kUG9zaXRpb24gLSAx
KTsKKwkJdHJ5IHsKKwkJCWludCB0b2tlbiA9IHRoaXMubG9jYWxTY2FubmVyLmdldE5leHRUb2tl
bigpOworCQkJcmV0dXJuICEoU2Nhbm5lci5pc0xpdGVyYWwodG9rZW4pIHx8IFNjYW5uZXIuaXNL
ZXl3b3JkKHRva2VuKSB8fCBTY2FubmVyLmlzSWRlbnRpZmllcih0b2tlbikpOwogCQl9IGNhdGNo
KEludmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7CiAJCQkvLyBpZ25vcmUKIAkJfQpAQCAtMjYyNCw4
ICsyNjg0LDE0IEBACiAJCSAqLwogCQlpbnQgZXh0cmFEaW1lbnNpb25zID0gYW5ub3RhdGlvblR5
cGVNZW1iZXJEZWNsYXJhdGlvbi5leHRlbmRlZERpbWVuc2lvbnM7CiAJCWlmIChleHRyYURpbWVu
c2lvbnMgIT0gMCkgeworCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9y
ZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKKwkJCQl0aGlzLnNj
cmliZS5zcGFjZSgpOworCQkJfQogCQkJIGZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNp
b25zOyBpKyspIHsKIAkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tl
bnMuVG9rZW5OYW1lTEJSQUNLRVQpOworCQkJIAlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRf
c3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgeworCQkJIAkJ
dGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCSAJfQogCQkJIAl0aGlzLnNjcmliZS5wcmludE5leHRU
b2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7CiAJCQkgfQogCQl9CkBAIC0y
NjU1LDggKzI3MjEsOSBAQAogCQkvKgogCQkgKiBBcmd1bWVudCB0eXBlCiAJCSAqLwotCQlpZiAo
YXJndW1lbnQudHlwZSAhPSBudWxsKSB7Ci0JCQlpZiAoYXJndW1lbnQudHlwZSBpbnN0YW5jZW9m
IFVuaW9uVHlwZVJlZmVyZW5jZSkgeworCQlUeXBlUmVmZXJlbmNlIGFyZ3VtZW50VHlwZSA9IGFy
Z3VtZW50LnR5cGU7CisJCWlmIChhcmd1bWVudFR5cGUgIT0gbnVsbCkgeworCQkJaWYgKGFyZ3Vt
ZW50VHlwZSBpbnN0YW5jZW9mIFVuaW9uVHlwZVJlZmVyZW5jZSkgewogCQkJCWZvcm1hdE11bHRp
Q2F0Y2hBcmd1bWVudHMoCiAJCQkJCQlhcmd1bWVudCwgCiAJCQkJCQl0aGlzLnByZWZlcmVuY2Vz
Lmluc2VydF9zcGFjZV9iZWZvcmVfYmluYXJ5X29wZXJhdG9yLCAKQEAgLTI2NjQsMTEgKzI3MzEs
MTggQEAKIAkJCQkJCXRoaXMucHJlZmVyZW5jZXMuYWxpZ25tZW50X2Zvcl91bmlvbl90eXBlX2lu
X211bHRpY2F0Y2gsCiAJCQkJCQlzY29wZSk7CiAJCQl9IGVsc2UgewotCQkJCWFyZ3VtZW50LnR5
cGUudHJhdmVyc2UodGhpcywgc2NvcGUpOworCQkJCWFyZ3VtZW50VHlwZS50cmF2ZXJzZSh0aGlz
LCBzY29wZSk7CiAJCQl9CiAJCX0KIAogCQlpZiAoYXJndW1lbnQuaXNWYXJBcmdzKCkpIHsKKwkJ
CUFubm90YXRpb24gW11bXSBhbm5vdGF0aW9uc09uRGltZW5zaW9ucyA9IGFyZ3VtZW50VHlwZS5n
ZXRBbm5vdGF0aW9uc09uRGltZW5zaW9ucygpOworCQkJaWYgKGFubm90YXRpb25zT25EaW1lbnNp
b25zICE9IG51bGwpIHsKKwkJCQlBbm5vdGF0aW9uIFtdIHZhcmFyZ0Fubm90YXRpb25zID0gYW5u
b3RhdGlvbnNPbkRpbWVuc2lvbnNbYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnMubGVuZ3RoIC0gMV07
CisJCQkJaWYgKHZhcmFyZ0Fubm90YXRpb25zICE9IG51bGwpIHsKKwkJCQkJZm9ybWF0SW5saW5l
QW5ub3RhdGlvbnModmFyYXJnQW5ub3RhdGlvbnMsIHRydWUpOworCQkJCX0KKwkJCX0KIAkJCXRo
aXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUVMTElQU0lT
LCB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfZWxsaXBzaXMpOwogCQkJaWYg
KHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2FmdGVyX2VsbGlwc2lzKSB7CiAJCQkJdGhp
cy5zY3JpYmUuc3BhY2UoKTsKQEAgLTI2ODEsMTggKzI3NTUsNyBAQAogCQkJdGhpcy5zY3JpYmUu
cHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciwgdHJ1ZSk7
CiAJCX0KIAotCi0JCS8qCi0JCSAqIENoZWNrIGZvciBleHRyYSBkaW1lbnNpb25zCi0JCSAqLwot
CQlpbnQgZXh0cmFEaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQlpZiAoZXh0cmFEaW1l
bnNpb25zICE9IDApIHsKLQkJCSBmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5zaW9uczsg
aSsrKSB7Ci0JCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZUxCUkFDS0VUKTsKLQkJCSAJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWlu
YWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJIH0KLQkJfQotCisJCWZvcm1hdEV4dHJh
RGltZW5zaW9ucyhhcmd1bWVudFR5cGUpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQogCkBAIC0yNzE0
LDYgKzI3NzcsOSBAQAogCQkJZmluYWwgRXhwcmVzc2lvbltdIGRpbWVuc2lvbnMgPSBhcnJheUFs
bG9jYXRpb25FeHByZXNzaW9uLmRpbWVuc2lvbnM7CiAJCQlpbnQgZGltZW5zaW9uc0xlbmd0aCA9
IGRpbWVuc2lvbnMubGVuZ3RoOwogCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zTGVu
Z3RoOyBpKyspIHsKKwkJCQlpZiAoYXJyYXlBbGxvY2F0aW9uRXhwcmVzc2lvbi5hbm5vdGF0aW9u
c09uRGltZW5zaW9ucyAhPSBudWxsKSB7CisJCQkJCWZvcm1hdElubGluZUFubm90YXRpb25zKGFy
cmF5QWxsb2NhdGlvbkV4cHJlc3Npb24uYW5ub3RhdGlvbnNPbkRpbWVuc2lvbnNbaV0sIGkgPT0g
MCk7CisJCQkJfQogCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVf
b3BlbmluZ19icmFja2V0X2luX2FycmF5X2FsbG9jYXRpb25fZXhwcmVzc2lvbikgewogCQkJCQl0
aGlzLnNjcmliZS5zcGFjZSgpOwogCQkJCX0KQEAgLTI4OTYsNiArMjk2MiwxOCBAQAogCQlyZXR1
cm4gZmFsc2U7CiAJfQogCisJcHJpdmF0ZSB2b2lkIGZvcm1hdEFycmF5UXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZShBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UgYXJyYXlRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlKSB7CisJCWZpbmFsIGludCBudW1iZXJPZlBhcmVucyA9IChhcnJheVF1YWxpZmllZFR5
cGVSZWZlcmVuY2UuYml0cyAmIEFTVE5vZGUuUGFyZW50aGVzaXplZE1BU0spID4+IEFTVE5vZGUu
UGFyZW50aGVzaXplZFNISUZUOworCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CisJCQltYW5h
Z2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLCBudW1iZXJPZlBhcmVucyk7CisJCX0KKwkJZm9ybWF0UXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZShhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOworCQlmb3JtYXRMZWFkaW5nRGltZW5zaW9u
cyhhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIHRydWUpOworCQlpZiAobnVtYmVyT2ZQYXJl
bnMgPiAwKSB7CisJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlR
dWFsaWZpZWRUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CisJCX0KKwl9CisKIAkvKioK
IAkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5BU1RWaXNpdG9yI3Zp
c2l0KG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQXJyYXlRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJs
b2NrU2NvcGUpCiAJICovCkBAIC0yOTAzLDIxICsyOTgxLDcgQEAKIAkJQXJyYXlRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlIGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwKIAkJQmxvY2tTY29wZSBz
Y29wZSkgewogCi0JCQlmaW5hbCBpbnQgbnVtYmVyT2ZQYXJlbnMgPSAoYXJyYXlRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLmJpdHMgJiBBU1ROb2RlLlBhcmVudGhlc2l6ZWRNQVNLKSA+PiBBU1ROb2Rl
LlBhcmVudGhlc2l6ZWRTSElGVDsKLQkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKLQkJCQlt
YW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVm
ZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7Ci0JCQl9Ci0JCQl0aGlzLnNjcmliZS5wcmludEFycmF5
UXVhbGlmaWVkUmVmZXJlbmNlKGFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS50b2tlbnMubGVu
Z3RoLCBhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2Uuc291cmNlRW5kKTsKLQkJCWludCBkaW1l
bnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwotCQkJaWYgKGRpbWVuc2lvbnMgIT0gMCkgewotCQkJ
CWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJCXRoaXMuc2NyaWJl
LnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJCQkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNL
RVQpOwotCQkJCX0KLQkJCX0KLQkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKLQkJCQltYW5h
Z2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLCBudW1iZXJPZlBhcmVucyk7Ci0JCQl9CisJCQlmb3JtYXRBcnJheVF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlKTsKIAkJCXJldHVybiBmYWxzZTsK
IAl9CiAKQEAgLTI5MjgsMjEgKzI5OTIsNyBAQAogCQlBcnJheVF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UgYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLAogCQlDbGFzc1Njb3BlIHNjb3BlKSB7CiAK
LQkJCWZpbmFsIGludCBudW1iZXJPZlBhcmVucyA9IChhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UuYml0cyAmIEFTVE5vZGUuUGFyZW50aGVzaXplZE1BU0spID4+IEFTVE5vZGUuUGFyZW50aGVz
aXplZFNISUZUOwotCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewotCQkJCW1hbmFnZU9wZW5p
bmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51
bWJlck9mUGFyZW5zKTsKLQkJCX0KLQkJCXRoaXMuc2NyaWJlLnByaW50QXJyYXlRdWFsaWZpZWRS
ZWZlcmVuY2UoYXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnRva2Vucy5sZW5ndGgsIGFycmF5
UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5zb3VyY2VFbmQpOwotCQkJaW50IGRpbWVuc2lvbnMgPSBn
ZXREaW1lbnNpb25zKCk7Ci0JCQlpZiAoZGltZW5zaW9ucyAhPSAwKSB7Ci0JCQkJZm9yIChpbnQg
aSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0
VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNLRVQpOwotCQkJCQl0aGlzLnNjcmli
ZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQkJ
fQotCQkJfQotCQkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewotCQkJCW1hbmFnZUNsb3NpbmdQ
YXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJl
ck9mUGFyZW5zKTsKLQkJCX0KKwkJCWZvcm1hdEFycmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShh
cnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCQkJcmV0dXJuIGZhbHNlOwogCX0KIApAQCAt
Mjk4MSwyMCArMzAzMSwxNCBAQAogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJCQltYW5h
Z2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oYXJyYXlUeXBlUmVmZXJlbmNlLCBudW1i
ZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKGFycmF5VHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAh
PSBudWxsKSB7CisJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhhcnJheVR5cGVSZWZlcmVuY2Uu
YW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKKwkJfQogCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tl
bihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVEVE9LRU5TKTsKIAogCQlpbnQgZGltZW5zaW9u
cyA9IGdldERpbWVuc2lvbnMoKTsKIAkJaWYgKGRpbWVuc2lvbnMgIT0gMCkgewotCQkJaWYgKHRo
aXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJy
YXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJ
Zm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYg
KHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlf
dHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNL
RVQpOwotCQkJfQorCQkJZm9ybWF0RGltZW5zaW9ucyhhcnJheVR5cGVSZWZlcmVuY2UsIDAsIGRp
bWVuc2lvbnMsIHRydWUpOwogCQl9CiAJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1h
bmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihhcnJheVR5cGVSZWZlcmVuY2UsIG51
bWJlck9mUGFyZW5zKTsKQEAgLTMwMTMsMTkgKzMwNTcsMTMgQEAKIAkJaWYgKG51bWJlck9mUGFy
ZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5
VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChhcnJheVR5cGVSZWZl
cmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJZm9ybWF0SW5saW5lQW5ub3RhdGlvbnMo
YXJyYXlUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxzZSk7CisJCX0KIAkJdGhpcy5z
Y3JpYmUucHJpbnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVSRU5DRV9FWFBFQ1RFRFRPS0VOUyk7
CiAJCWludCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9ucygpOwogCQlpZiAoZGltZW5zaW9ucyAh
PSAwKSB7Ci0JCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5p
bmdfYnJhY2tldF9pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNw
YWNlKCk7Ci0JCQl9Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewot
CQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxC
UkFDS0VUKTsKLQkJCQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9i
cmFja2V0c19pbl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFj
ZSgpOwotCQkJCX0KLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVSQlJBQ0tFVCk7Ci0JCQl9CisJCQlmb3JtYXREaW1lbnNpb25zKGFycmF5VHlw
ZVJlZmVyZW5jZSwgMCwgZGltZW5zaW9ucywgdHJ1ZSk7CiAJCX0KIAkJaWYgKG51bWJlck9mUGFy
ZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGFycmF5
VHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwpAQCAtNDUyMCwxNiArNDU1OCw3IEBACiAJ
CQkJCXRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2FmdGVyX2NvbW1hX2luX21ldGhvZF9k
ZWNsYXJhdGlvbl9wYXJhbWV0ZXJzLAogCQkJCQl0aGlzLnByZWZlcmVuY2VzLmFsaWdubWVudF9m
b3JfcGFyYW1ldGVyc19pbl9tZXRob2RfZGVjbGFyYXRpb24pOwogCi0JCQkJLyoKLQkJCQkgKiBD
aGVjayBmb3IgZXh0cmEgZGltZW5zaW9ucwotCQkJCSAqLwotCQkJCWludCBleHRyYURpbWVuc2lv
bnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCQkJaWYgKGV4dHJhRGltZW5zaW9ucyAhPSAwKSB7Ci0J
CQkJCSBmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7Ci0JCQkJCSAJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lTEJSQUNL
RVQpOwotCQkJCQkgCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRv
a2VuTmFtZVJCUkFDS0VUKTsKLQkJCQkJIH0KLQkJCQl9CisJCQkJZm9ybWF0RXh0cmFEaW1lbnNp
b25zKG1ldGhvZERlY2xhcmF0aW9uLnJldHVyblR5cGUpOwogCiAJCQkJLy8gRm9ybWF0IHRocm93
cwogCQkJCWZvcm1hdFRocm93c0NsYXVzZSgKQEAgLTQ2NjgsNiArNDY5Nyw5IEBACiAJCVR5cGVS
ZWZlcmVuY2VbXVtdIHR5cGVBcmd1bWVudHMgPSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZS50eXBlQXJndW1lbnRzOwogCQlpbnQgbGVuZ3RoID0gdHlwZUFyZ3VtZW50cy5sZW5n
dGg7CiAJCWZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKKwkJCWlmIChwYXJhbWV0
ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQkJ
Zm9ybWF0SW5saW5lQW5ub3RhdGlvbnMocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UuYW5ub3RhdGlvbnNbaV0sIGZhbHNlKTsKKwkJCX0KIAkJCXRoaXMuc2NyaWJlLnByaW50TmV4
dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCQkJVHlwZVJlZmVy
ZW5jZVtdIHR5cGVBcmd1bWVudCA9IHR5cGVBcmd1bWVudHNbaV07CiAJCQlpZiAodHlwZUFyZ3Vt
ZW50ICE9IG51bGwpIHsKQEAgLTQ2OTcsMTkgKzQ3MjksNyBAQAogCQkJCXRoaXMuc2NyaWJlLnBy
aW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZURPVCk7CiAJCQl9CiAJCX0KLQkJ
aW50IGRpbWVuc2lvbnMgPSBnZXREaW1lbnNpb25zKCk7Ci0JCWlmIChkaW1lbnNpb25zICE9IDAg
JiYgZGltZW5zaW9ucyA8PSBwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5kaW1l
bnNpb25zKCkpIHsKLQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVf
b3BlbmluZ19icmFja2V0X2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJdGhpcy5zY3Jp
YmUuc3BhY2UoKTsKLQkJCX0KLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGltZW5zaW9uczsgaSsr
KSB7Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5O
YW1lTEJSQUNLRVQpOwotCQkJCWlmICh0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZXR3
ZWVuX2JyYWNrZXRzX2luX2FycmF5X3R5cGVfcmVmZXJlbmNlKSB7Ci0JCQkJCXRoaXMuc2NyaWJl
LnNwYWNlKCk7Ci0JCQkJfQotCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFs
VG9rZW5zLlRva2VuTmFtZVJCUkFDS0VUKTsKLQkJCX0KLQkJfQorCQlmb3JtYXRMZWFkaW5nRGlt
ZW5zaW9ucyhwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgdHJ1ZSk7CiAJCWlm
IChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCW1hbmFnZUNsb3NpbmdQYXJlbnRoZXNpemVkRXhw
cmVzc2lvbihwYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJl
bnMpOwogCQl9CkBAIC00NzI1LDYgKzQ3NDUsOSBAQAogCQlUeXBlUmVmZXJlbmNlW11bXSB0eXBl
QXJndW1lbnRzID0gcGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UudHlwZUFyZ3Vt
ZW50czsKIAkJaW50IGxlbmd0aCA9IHR5cGVBcmd1bWVudHMubGVuZ3RoOwogCQlmb3IgKGludCBp
ID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CisJCQlpZiAocGFyYW1ldGVyaXplZFF1YWxpZmllZFR5
cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJCWZvcm1hdElubGluZUFubm90
YXRpb25zKHBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2ld
LCBmYWxzZSk7CisJCQl9CiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVJZGVudGlmaWVyKTsKIAkJCVR5cGVSZWZlcmVuY2VbXSB0eXBlQXJndW1l
bnQgPSB0eXBlQXJndW1lbnRzW2ldOwogCQkJaWYgKHR5cGVBcmd1bWVudCAhPSBudWxsKSB7CkBA
IC00NzU0LDE5ICs0Nzc3LDcgQEAKIAkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJt
aW5hbFRva2Vucy5Ub2tlbk5hbWVET1QpOwogCQkJfQogCQl9Ci0JCWludCBkaW1lbnNpb25zID0g
Z2V0RGltZW5zaW9ucygpOwotCQlpZiAoZGltZW5zaW9ucyAhPSAwICYmIGRpbWVuc2lvbnMgPD0g
cGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuZGltZW5zaW9ucygpKSB7Ci0JCQlp
ZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmVmb3JlX29wZW5pbmdfYnJhY2tldF9p
bl9hcnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCXRoaXMuc2NyaWJlLnNwYWNlKCk7Ci0JCQl9
Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGRpbWVuc2lvbnM7IGkrKykgewotCQkJCXRoaXMuc2Ny
aWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VUKTsKLQkJ
CQlpZiAodGhpcy5wcmVmZXJlbmNlcy5pbnNlcnRfc3BhY2VfYmV0d2Vlbl9icmFja2V0c19pbl9h
cnJheV90eXBlX3JlZmVyZW5jZSkgewotCQkJCQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJCX0K
LQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVS
QlJBQ0tFVCk7Ci0JCQl9Ci0JCX0KKwkJZm9ybWF0TGVhZGluZ0RpbWVuc2lvbnMocGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIHRydWUpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMg
PiAwKSB7CiAJCQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocGFyYW1ldGVy
aXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQpAQCAtNDc3
OSw2ICs0NzkwLDkgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3Bl
bmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJl
bmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KKwkJaWYgKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBl
UmVmZXJlbmNlLmFubm90YXRpb25zICE9IG51bGwpIHsKKwkJCWZvcm1hdElubGluZUFubm90YXRp
b25zKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxz
ZSk7CisJCX0KIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lSWRlbnRpZmllcik7CiAKIAkJVHlwZVJlZmVyZW5jZVtdIHR5cGVBcmd1bWVudHMgPSBw
YXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS50eXBlQXJndW1lbnRzOwpAQCAtNDgwMywy
MCArNDgxNyw3IEBACiAJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVMRVNTLCB0aGlzLnByZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfb3Bl
bmluZ19hbmdsZV9icmFja2V0X2luX3BhcmFtZXRlcml6ZWRfdHlwZV9yZWZlcmVuY2UpOwogCQkJ
dGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oQ0xPU0lOR19HRU5FUklDU19FWFBFQ1RFRFRPS0VO
Uyk7CiAJCX0KLQotCQlpbnQgZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRp
bWVuc2lvbnMgIT0gMCAmJiBkaW1lbnNpb25zIDw9IHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVm
ZXJlbmNlLmRpbWVuc2lvbnMoKSkgewotCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3Nw
YWNlX2JlZm9yZV9vcGVuaW5nX2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJ
CQl0aGlzLnNjcmliZS5zcGFjZSgpOwotCQkJfQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1l
bnNpb25zOyBpKyspIHsKLQkJCQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRv
a2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCk7Ci0JCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0
X3NwYWNlX2JldHdlZW5fYnJhY2tldHNfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJ
dGhpcy5zY3JpYmUuc3BhY2UoKTsKLQkJCQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9r
ZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJfQotCQl9CisJCWZvcm1h
dExlYWRpbmdEaW1lbnNpb25zKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCB0cnVl
KTsKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhl
c2l6ZWRFeHByZXNzaW9uKHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJP
ZlBhcmVucyk7CiAJCX0KQEAgLTQ4MjksNiArNDgzMCw5IEBACiAJCWlmIChudW1iZXJPZlBhcmVu
cyA+IDApIHsKIAkJCW1hbmFnZU9wZW5pbmdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihwYXJhbWV0
ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CisJCWlmIChw
YXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJ
CQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhwYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5j
ZS5hbm5vdGF0aW9uc1swXSwgZmFsc2UpOworCQl9CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZpZXIpOwogCiAJCVR5cGVSZWZlcmVu
Y2VbXSB0eXBlQXJndW1lbnRzID0gcGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UudHlw
ZUFyZ3VtZW50czsKQEAgLTQ4NTQsMTkgKzQ4NTgsNyBAQAogCQkJdGhpcy5zY3JpYmUucHJpbnRO
ZXh0VG9rZW4oQ0xPU0lOR19HRU5FUklDU19FWFBFQ1RFRFRPS0VOUyk7CiAJCX0KIAotCQlpbnQg
ZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoKTsKLQkJaWYgKGRpbWVuc2lvbnMgIT0gMCAmJiBk
aW1lbnNpb25zIDw9IHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmRpbWVuc2lvbnMo
KSkgewotCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JlZm9yZV9vcGVuaW5n
X2JyYWNrZXRfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQl0aGlzLnNjcmliZS5zcGFj
ZSgpOwotCQkJfQotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBkaW1lbnNpb25zOyBpKyspIHsKLQkJ
CQl0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJB
Q0tFVCk7Ci0JCQkJaWYgKHRoaXMucHJlZmVyZW5jZXMuaW5zZXJ0X3NwYWNlX2JldHdlZW5fYnJh
Y2tldHNfaW5fYXJyYXlfdHlwZV9yZWZlcmVuY2UpIHsKLQkJCQkJdGhpcy5zY3JpYmUuc3BhY2Uo
KTsKLQkJCQl9Ci0JCQkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMu
VG9rZW5OYW1lUkJSQUNLRVQpOwotCQkJfQotCQl9CisJCWZvcm1hdExlYWRpbmdEaW1lbnNpb25z
KHBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCB0cnVlKTsKIAkJaWYgKG51bWJlck9m
UGFyZW5zID4gMCkgewogCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHBh
cmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLCBudW1iZXJPZlBhcmVucyk7CiAJCX0KQEAg
LTUwODcsMTIgKzUwNzksMjMgQEAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFu
YWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHF1YWxpZmllZFR5cGVSZWZlcmVuY2Us
IG51bWJlck9mUGFyZW5zKTsKIAkJfQotCQl0aGlzLnNjcmliZS5wcmludFF1YWxpZmllZFJlZmVy
ZW5jZShxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLnNvdXJjZUVuZCwgbnVtYmVyT2ZQYXJlbnM+PTAv
KmV4cGVjdCBwYXJlbnRoZXNpcyovKTsKLQorCQlmb3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJlbmNl
KHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7CiAJ
CQltYW5hZ2VDbG9zaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQl9CiAJCXJldHVybiBmYWxzZTsKKwl9CisKKwlwcml2
YXRlIHZvaWQgZm9ybWF0UXVhbGlmaWVkVHlwZVJlZmVyZW5jZShRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlIHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpIHsKKwkJZm9yIChpbnQgaSA9IDAsIGxlbmd0aCA9
IHF1YWxpZmllZFR5cGVSZWZlcmVuY2UudG9rZW5zLmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKSB7
CisJCQlpZiAoaSAhPSAwKSB0aGlzLnNjcmliZS5wcmludE5leHRUb2tlbihUZXJtaW5hbFRva2Vu
cy5Ub2tlbk5hbWVET1QsIGZhbHNlKTsKKwkJCWlmIChxdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmFu
bm90YXRpb25zICE9IG51bGwpIHsKKwkJCQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyhxdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zW2ldLCBmYWxzZSk7CisJCQkJdGhpcy5zY3JpYmUu
cHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lSWRlbnRpZmllciwgdHJ1ZSk7
CisJCQl9IGVsc2UgeworCQkJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZUlkZW50aWZpZXIsIGZhbHNlKTsKKwkJCX0KKwkJfQogCX0KIAogCS8qKgpA
QCAtNTEwNiw3ICs1MTA5LDcgQEAKIAkJCWlmIChudW1iZXJPZlBhcmVucyA+IDApIHsKIAkJCQlt
YW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24ocXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZSwgbnVtYmVyT2ZQYXJlbnMpOwogCQkJfQotCQkJdGhpcy5zY3JpYmUucHJpbnRRdWFsaWZpZWRS
ZWZlcmVuY2UocXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5zb3VyY2VFbmQsIG51bWJlck9mUGFyZW5z
Pj0wLypleHBlY3QgcGFyZW50aGVzaXMqLyk7CisJCQlmb3JtYXRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlKHF1YWxpZmllZFR5cGVSZWZlcmVuY2UpOwogCiAJCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAw
KSB7CiAJCQkJbWFuYWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHF1YWxpZmllZFR5
cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKQEAgLTUyMTIsMTAgKzUyMTUsMjkgQEAKIAkJ
aWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFuYWdlT3BlbmluZ1BhcmVudGhlc2l6ZWRF
eHByZXNzaW9uKHNpbmdsZVR5cGVSZWZlcmVuY2UsIG51bWJlck9mUGFyZW5zKTsKIAkJfQorCQlp
ZiAoc2luZ2xlVHlwZVJlZmVyZW5jZS5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQlmb3JtYXRJ
bmxpbmVBbm5vdGF0aW9ucyhzaW5nbGVUeXBlUmVmZXJlbmNlLmFubm90YXRpb25zWzBdLCBmYWxz
ZSk7CisJCX0KIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oU0lOR0xFVFlQRVJFRkVSRU5D
RV9FWFBFQ1RFRFRPS0VOUyk7CiAKIAkJaWYgKG51bWJlck9mUGFyZW5zID4gMCkgewogCQkJbWFu
YWdlQ2xvc2luZ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHNpbmdsZVR5cGVSZWZlcmVuY2UsIG51
bWJlck9mUGFyZW5zKTsKKwkJfQorCQlyZXR1cm4gZmFsc2U7CisJfQorCisJcHJpdmF0ZSBib29s
ZWFuIGZvcm1hdElubGluZUFubm90YXRpb25zKGZpbmFsIEFubm90YXRpb25bXSBhbm5vdGF0aW9u
cywgYm9vbGVhbiBzcGFjZUJlZm9yZSkgeworCQlpZiAoYW5ub3RhdGlvbnMgIT0gbnVsbCApIHsK
KwkJCWlmIChzcGFjZUJlZm9yZSkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCWludCBsZW5ndGgg
PSBhbm5vdGF0aW9ucy5sZW5ndGg7CisJCQlmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgKytp
KSB7CisJCQkJaWYgKGkgIT0gMCkgdGhpcy5zY3JpYmUuc3BhY2UoKTsKKwkJCQlhbm5vdGF0aW9u
c1tpXS50cmF2ZXJzZSh0aGlzLCAoQmxvY2tTY29wZSludWxsKTsKKwkJCX0KKwkJCWlmIChsZW5n
dGggPiAwICYmICF0aGlzLmlzTmV4dFRva2VuUHVuY3R1YXRpb24oKSkgeworCQkJCXRoaXMuc2Ny
aWJlLnNwYWNlKCk7CisJCQl9CisJCQlyZXR1cm4gdHJ1ZTsKIAkJfQogCQlyZXR1cm4gZmFsc2U7
CiAJfQpAQCAtNTIzMCw2ICs1MjUyLDkgQEAKIAkJZmluYWwgaW50IG51bWJlck9mUGFyZW5zID0g
KHNpbmdsZVR5cGVSZWZlcmVuY2UuYml0cyAmIEFTVE5vZGUuUGFyZW50aGVzaXplZE1BU0spID4+
IEFTVE5vZGUuUGFyZW50aGVzaXplZFNISUZUOwogCQlpZiAobnVtYmVyT2ZQYXJlbnMgPiAwKSB7
CiAJCQltYW5hZ2VPcGVuaW5nUGFyZW50aGVzaXplZEV4cHJlc3Npb24oc2luZ2xlVHlwZVJlZmVy
ZW5jZSwgbnVtYmVyT2ZQYXJlbnMpOworCQl9CisJCWlmIChzaW5nbGVUeXBlUmVmZXJlbmNlLmFu
bm90YXRpb25zICE9IG51bGwpIHsKKwkJCWZvcm1hdElubGluZUFubm90YXRpb25zKHNpbmdsZVR5
cGVSZWZlcmVuY2UuYW5ub3RhdGlvbnNbMF0sIGZhbHNlKTsKIAkJfQogCQl0aGlzLnNjcmliZS5w
cmludE5leHRUb2tlbihTSU5HTEVUWVBFUkVGRVJFTkNFX0VYUEVDVEVEVE9LRU5TKTsKIApAQCAt
NTY4OCw2ICs1NzEzLDkgQEAKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAlwdWJsaWMgYm9vbGVhbiB2
aXNpdChUeXBlUGFyYW1ldGVyIHR5cGVQYXJhbWV0ZXIsIEJsb2NrU2NvcGUgc2NvcGUpIHsKKwkJ
aWYgKHR5cGVQYXJhbWV0ZXIuYW5ub3RhdGlvbnMgIT0gbnVsbCkgeworCQkJZm9ybWF0SW5saW5l
QW5ub3RhdGlvbnModHlwZVBhcmFtZXRlci5hbm5vdGF0aW9ucywgZmFsc2UpOworCQl9CiAJCXRo
aXMuc2NyaWJlLnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUlkZW50aWZp
ZXIpOwogCQlpZiAodHlwZVBhcmFtZXRlci50eXBlICE9IG51bGwpIHsKIAkJCXRoaXMuc2NyaWJl
LnNwYWNlKCk7CkBAIC01NzE0LDYgKzU3NDIsOSBAQAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCXB1
YmxpYyBib29sZWFuIHZpc2l0KFR5cGVQYXJhbWV0ZXIgdHlwZVBhcmFtZXRlciwgQ2xhc3NTY29w
ZSBzY29wZSkgeworCQlpZiAodHlwZVBhcmFtZXRlci5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJ
CQlmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh0eXBlUGFyYW1ldGVyLmFubm90YXRpb25zLCBmYWxz
ZSk7CisJCX0KIAkJdGhpcy5zY3JpYmUucHJpbnROZXh0VG9rZW4oVGVybWluYWxUb2tlbnMuVG9r
ZW5OYW1lSWRlbnRpZmllcik7CiAJCWlmICh0eXBlUGFyYW1ldGVyLnR5cGUgIT0gbnVsbCkgewog
CQkJdGhpcy5zY3JpYmUuc3BhY2UoKTsKQEAgLTU5MDAsNiArNTkzMSw5IEBACiAJCXJldHVybiBm
YWxzZTsKIAl9CiAJcHVibGljIGJvb2xlYW4gdmlzaXQoV2lsZGNhcmQgd2lsZGNhcmQsIEJsb2Nr
U2NvcGUgc2NvcGUpIHsKKwkJaWYgKHdpbGRjYXJkLmFubm90YXRpb25zICE9IG51bGwpIHsKKwkJ
CWlmIChmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh3aWxkY2FyZC5hbm5vdGF0aW9uc1swXSwgZmFs
c2UpKSB0aGlzLnNjcmliZS5zcGFjZSgpOworCQl9CiAJCXRoaXMuc2NyaWJlLnByaW50TmV4dFRv
a2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVFVRVNUSU9OLCB0aGlzLnByZWZlcmVuY2VzLmlu
c2VydF9zcGFjZV9iZWZvcmVfcXVlc3Rpb25faW5fd2lsY2FyZCk7CiAJCXN3aXRjaCh3aWxkY2Fy
ZC5raW5kKSB7CiAJCQljYXNlIFdpbGRjYXJkLlNVUEVSIDoKQEAgLTU5MjAsNiArNTk1NCw5IEBA
CiAJCXJldHVybiBmYWxzZTsKIAl9CiAJcHVibGljIGJvb2xlYW4gdmlzaXQoV2lsZGNhcmQgd2ls
ZGNhcmQsIENsYXNzU2NvcGUgc2NvcGUpIHsKKwkJaWYgKHdpbGRjYXJkLmFubm90YXRpb25zICE9
IG51bGwpIHsKKwkJCWlmIChmb3JtYXRJbmxpbmVBbm5vdGF0aW9ucyh3aWxkY2FyZC5hbm5vdGF0
aW9uc1swXSwgZmFsc2UpKSB0aGlzLnNjcmliZS5zcGFjZSgpOworCQl9CiAJCXRoaXMuc2NyaWJl
LnByaW50TmV4dFRva2VuKFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVFVRVNUSU9OLCB0aGlzLnBy
ZWZlcmVuY2VzLmluc2VydF9zcGFjZV9iZWZvcmVfcXVlc3Rpb25faW5fd2lsY2FyZCk7CiAJCXN3
aXRjaCh3aWxkY2FyZC5raW5kKSB7CiAJCQljYXNlIFdpbGRjYXJkLlNVUEVSIDoKZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvZm9ybWF0dGVyL1NjcmliZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmphdmEKaW5kZXggY2Vk
NTY4Ni4uMzhhYzM4OSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU2NyaWJlLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3Jt
YXR0ZXIvU2NyaWJlLmphdmEKQEAgLTUsOSArNSwxNCBAQAogICogd2hpY2ggYWNjb21wYW5pZXMg
dGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNs
aXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCiAgKiAKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50
YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhl
IEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBm
b3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMg
bm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgorICogCiAg
KiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5k
IGltcGxlbWVudGF0aW9uCiAgKiAgICAgUmF5IFYuICh2b2lkc3RhckBnbWFpbC5jb20pIC0gQ29u
dHJpYnV0aW9uIGZvciBidWcgMjgyOTg4CisgKiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJp
YnV0aW9uIGZvciBidWcgNDAyODkyCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ug
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZvcm1hdHRlcjsKIApAQCAtNDkyMyw1MyArNDkyOCw2
IEBACiAJCQl9CiAJCQlwcmludCh0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uIC0gdGhpcy5z
Y2FubmVyLnN0YXJ0UG9zaXRpb24sIGNvbnNpZGVyU3BhY2VJZkFueSk7CiAJCX0gY2F0Y2ggKElu
dmFsaWRJbnB1dEV4Y2VwdGlvbiBlKSB7Ci0JCQl0aHJvdyBuZXcgQWJvcnRGb3JtYXR0aW5nKGUp
OwotCQl9Ci0JfQotCi0JcHVibGljIHZvaWQgcHJpbnRBcnJheVF1YWxpZmllZFJlZmVyZW5jZShp
bnQgbnVtYmVyT2ZUb2tlbnMsIGludCBzb3VyY2VFbmQpIHsKLQkJaW50IGN1cnJlbnRUb2tlblN0
YXJ0UG9zaXRpb24gPSB0aGlzLnNjYW5uZXIuY3VycmVudFBvc2l0aW9uOwotCQlpbnQgbnVtYmVy
T2ZJZGVudGlmaWVycyA9IDA7Ci0JCXRyeSB7Ci0JCQlkbyB7Ci0JCQkJcHJpbnRDb21tZW50KENv
ZGVGb3JtYXR0ZXIuS19VTktOT1dOLCBOT19UUkFJTElOR19DT01NRU5UKTsKLQkJCQlzd2l0Y2go
dGhpcy5jdXJyZW50VG9rZW4gPSB0aGlzLnNjYW5uZXIuZ2V0TmV4dFRva2VuKCkpIHsKLQkJCQkJ
Y2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVFT0YgOgotCQkJCQkJcmV0dXJuOwotCQkJCQlj
YXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZVdISVRFU1BBQ0UgOgotCQkJCQkJYWRkRGVsZXRl
RWRpdCh0aGlzLnNjYW5uZXIuZ2V0Q3VycmVudFRva2VuU3RhcnRQb3NpdGlvbigpLCB0aGlzLnNj
YW5uZXIuZ2V0Q3VycmVudFRva2VuRW5kUG9zaXRpb24oKSk7Ci0JCQkJCQljdXJyZW50VG9rZW5T
dGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWJyZWFr
OwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfQkxPQ0sgOgotCQkJ
CQljYXNlIFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfSkFWQURPQyA6Ci0JCQkJCQlw
cmludEJsb2NrQ29tbWVudChmYWxzZSk7Ci0JCQkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9u
ID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWJyZWFrOwotCQkJCQljYXNl
IFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUNPTU1FTlRfTElORSA6Ci0JCQkJCQlwcmludExpbmVD
b21tZW50KCk7Ci0JCQkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVy
LmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9rZW5z
LlRva2VuTmFtZUlkZW50aWZpZXIgOgotCQkJCQkJcHJpbnQodGhpcy5zY2FubmVyLmN1cnJlbnRQ
b3NpdGlvbiAtIHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0aW9uLCBmYWxzZSk7Ci0JCQkJCQljdXJy
ZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJ
CQkJCWlmICgrKyBudW1iZXJPZklkZW50aWZpZXJzID09IG51bWJlck9mVG9rZW5zKSB7Ci0JCQkJ
CQkJdGhpcy5zY2FubmVyLnJlc2V0VG8oY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiwgdGhpcy5z
Y2FubmVyRW5kUG9zaXRpb24gLSAxKTsKLQkJCQkJCQlyZXR1cm47Ci0JCQkJCQl9Ci0JCQkJCQli
cmVhazsKLQkJCQkJY2FzZSBUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVET1QgOgotCQkJCQkJcHJp
bnQodGhpcy5zY2FubmVyLmN1cnJlbnRQb3NpdGlvbiAtIHRoaXMuc2Nhbm5lci5zdGFydFBvc2l0
aW9uLCBmYWxzZSk7Ci0JCQkJCQljdXJyZW50VG9rZW5TdGFydFBvc2l0aW9uID0gdGhpcy5zY2Fu
bmVyLmN1cnJlbnRQb3NpdGlvbjsKLQkJCQkJCWJyZWFrOwotCQkJCQljYXNlIFRlcm1pbmFsVG9r
ZW5zLlRva2VuTmFtZVJQQVJFTjoKLQkJCQkJCWN1cnJlbnRUb2tlblN0YXJ0UG9zaXRpb24gPSB0
aGlzLnNjYW5uZXIuc3RhcnRQb3NpdGlvbjsKLQkJCQkJCS8vICRGQUxMLVRIUk9VR0gkIC0gZmFs
bCB0aHJvdWdoIGRlZmF1bHQgY2FzZS4uLgotCQkJCQlkZWZhdWx0OgotCQkJCQkJdGhpcy5zY2Fu
bmVyLnJlc2V0VG8oY3VycmVudFRva2VuU3RhcnRQb3NpdGlvbiwgdGhpcy5zY2FubmVyRW5kUG9z
aXRpb24gLSAxKTsKLQkJCQkJCXJldHVybjsKLQkJCQl9Ci0JCQl9IHdoaWxlICh0aGlzLnNjYW5u
ZXIuY3VycmVudFBvc2l0aW9uIDw9IHNvdXJjZUVuZCk7Ci0JCX0gY2F0Y2goSW52YWxpZElucHV0
RXhjZXB0aW9uIGUpIHsKIAkJCXRocm93IG5ldyBBYm9ydEZvcm1hdHRpbmcoZSk7CiAJCX0KIAl9
</data>

          </attachment>
      

    </bug>

</bugzilla>