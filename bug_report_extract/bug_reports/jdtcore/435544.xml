<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>435544</bug_id>
          
          <creation_ts>2014-05-22 12:50:00 -0400</creation_ts>
          <short_desc>[compiler][null] Enum constants not recognised as being NonNull (take2)</short_desc>
          <delta_ts>2015-05-05 12:09:42 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Mac OS X</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4.1</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Thomas Schindl">tom.schindl</reporter>
          <assigned_to name="shankha banerjee">shankhba</assigned_to>
          <cc>billc.cn</cc>
    
    <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>shankhba</cc>
    
    <cc>stephan.herrmann</cc>
    
    <cc>tobias.gierke</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="62953"
          type_id="1"
          status="+"
          setter="stephan.herrmann"
    />
    <flag name="review"
          id="63035"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2405765</commentid>
    <comment_count>0</comment_count>
    <who name="Thomas Schindl">tom.schindl</who>
    <bug_when>2014-05-22 12:50:27 -0400</bug_when>
    <thetext>According to bug 411771 enum constants should not lead to warnings but it looks like this only works when the enum is declared in the same class as the usage happens.

package bla;

public enum Bla {
	A,
	B
}


package bla;

import org.eclipse.jdt.annotation.NonNull;

public class Blo {
	public enum Bli {
		A,
		B
	}
	
	@NonNull
	public Bla bla = Bla.A; // warning
	
	@NonNull
	public Bli bli = Bli.A; // no warning
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2405812</commentid>
    <comment_count>1</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-05-22 14:04:13 -0400</bug_when>
    <thetext>Enum declaration in the same file does not lead to any warning messages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2405813</commentid>
    <comment_count>2</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-05-22 14:05:31 -0400</bug_when>
    <thetext>(In reply to shankha banerjee from comment #1)
&gt; Enum declaration in the same file does not lead to any warning messages.

Sorry. Ignore this comment. The user has already specified so.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2421269</commentid>
    <comment_count>3</comment_count>
      <attachid>244576</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-06-27 02:56:12 -0400</bug_when>
    <thetext>Created attachment 244576
Patch

This Bug is related to handling Enum constants for 1.8. Bug 411771 was related to handling enums pre 1.8.

The correct solution would have been 

BTB#scanFieldForNullAnnotation

if (this.environment.globalOptions.sourceLevel &gt;= ClassFileConstants.JDK1_8) {


if (isEnum &amp;&amp; (field.getModifiers() &amp; ClassFileConstants.AccEnum) != 0) {

---&gt;	fieldBinding.type = this.environment.createAnnotatedType(fieldType, new AnnotationBinding[]{this.environment.getNonNullAnnotation()});
}

...

The reason why we cannot associated annotation (null) with the type is, there will be scenarios where Null Analysis is enabled but null annotations have not been configured.

See comment:

BTB#scanFieldForNullAnnotation

Line No: 1477
return; // not using fieldBinding.tagBits when we have type annotations.

---

Hi Stephan,

Could you please review and let me know if this deviation for 1.8 Enum is fine
with you? 

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2426845</commentid>
    <comment_count>4</comment_count>
    <who name="Tobias Gierke">tobias.gierke</who>
    <bug_when>2014-07-11 04:12:16 -0400</bug_when>
    <thetext>Any news on this ? Null analysis is a really cool feature and I&apos;d love to use it but on my current project I just get too many false warnings because of this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2427147</commentid>
    <comment_count>5</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-07-12 05:13:47 -0400</bug_when>
    <thetext>(In reply to shankha banerjee from comment #3)
&gt; Created attachment 244576 [details]
&gt; Patch

The test is OK (although I prefer to keep things in the appropriate suite according to the primary concern, here null analysis, not incremental compilation, see also bug 411771 comment 7). Still, I&apos;ll leave it as is.

The fix introduces some unnecessary and confusing code duplication. I think it&apos;s better to simply pull the existing check up into the common branch (independent of compliance level).

To be released after one final round of testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2427187</commentid>
    <comment_count>6</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-07-12 13:46:55 -0400</bug_when>
    <thetext>Released for 4.5 M1 in these parts:

Test (from attachment 244576) via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=a34a6a0ba4a1353d99ccd1ab5ffa346abf5dc5a5

Fix via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=a9a682e2620a7d259588cf514f2222df31cd2757 (see comment 5).


Leaving this bug open for release towards 4.4.1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2430067</commentid>
    <comment_count>7</comment_count>
      <attachid>245254</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-07-22 04:46:05 -0400</bug_when>
    <thetext>Created attachment 245254
Patch : R4_4_maintenance Branch

Patch ported to R4_4_maintenance. All Test Case results are good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2430592</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-07-23 02:19:34 -0400</bug_when>
    <thetext>Released in R4_4_maintenance with the following commits:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=R4_4_maintenance&amp;id=63b1612a3a4d1f80f95b2401e912b059aded26fb

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=R4_4_maintenance&amp;id=4d008e9caeb80011222116acbc0cc4d684b8e9b0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2436042</commentid>
    <comment_count>9</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-08-06 00:20:48 -0400</bug_when>
    <thetext>Verified for 4.5 M1 with build I20140804-2000</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2444649</commentid>
    <comment_count>10</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-08-28 02:10:38 -0400</bug_when>
    <thetext>Verified for Eclipse Luna SR1 4.4.1 Build id: M20140827-0800</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2557035</commentid>
    <comment_count>11</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2015-05-05 12:09:42 -0400</bug_when>
    <thetext>*** Bug 466457 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>244576</attachid>
            <date>2014-06-27 02:56:00 -0400</date>
            <delta_ts>2014-06-27 02:56:12 -0400</delta_ts>
            <desc>Patch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>4838</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2J1aWxkZXIvSW5jcmVtZW50YWxUZXN0czE4LmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5idWlsZGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29y
ZS90ZXN0cy9idWlsZGVyL0luY3JlbWVudGFsVGVzdHMxOC5qYXZhCmluZGV4IGUxZTkxNzYuLmMx
MzYwMTQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXIvc3Jj
L29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2J1aWxkZXIvSW5jcmVtZW50YWxUZXN0czE4Lmph
dmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuYnVpbGRlci9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvYnVpbGRlci9JbmNyZW1lbnRhbFRlc3RzMTguamF2YQpAQCAtMTEs
MTQgKzExLDIxIEBACiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXI7
CiAKIGltcG9ydCBqYXZhLmlvLkZpbGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKIAog
aW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OwogCitpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5y
dW50aW1lLkZpbGVMb2NhdG9yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5JUGF0
aDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUuUGF0aDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5jb3JlLnJ1bnRpbWUuUGxhdGZvcm07CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
SUNsYXNzcGF0aEVudHJ5OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklKYXZhUHJvamVj
dDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhQ29yZTsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMudXRpbC5BYnN0cmFjdENvbXBpbGVyVGVzdDsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy51dGlsLlV0aWw7CitpbXBvcnQgb3JnLm9zZ2kuZnJhbWV3b3JrLkJ1
bmRsZTsKIAogcHVibGljIGNsYXNzIEluY3JlbWVudGFsVGVzdHMxOCBleHRlbmRzIEJ1aWxkZXJU
ZXN0cyB7CiAJCkBAIC0yOSw2ICszNiwyMSBAQCBwdWJsaWMgY2xhc3MgSW5jcmVtZW50YWxUZXN0
czE4IGV4dGVuZHMgQnVpbGRlclRlc3RzIHsKIAlwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7
CiAJCXJldHVybiBBYnN0cmFjdENvbXBpbGVyVGVzdC5idWlsZE1pbmltYWxDb21wbGlhbmNlVGVz
dFN1aXRlKEluY3JlbWVudGFsVGVzdHMxOC5jbGFzcywgQWJzdHJhY3RDb21waWxlclRlc3QuRl8x
XzgpOwogCX0KKworCXByaXZhdGUgdm9pZCBzZXR1cFByb2plY3RGb3JOdWxsQW5ub3RhdGlvbnMo
KSB0aHJvd3MgSU9FeGNlcHRpb24sIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCS8vIGFkZCB0aGUg
b3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24gbGlicmFyeSAoYmluLyBmb2xkZXIgb3IgamFyKSB0
byB0aGUgcHJvamVjdDoKKwkJQnVuZGxlW10gYnVuZGxlcyA9IFBsYXRmb3JtLmdldEJ1bmRsZXMo
Im9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uIiwiWzIuMC4wLDMuMC4wKSIpOworCQlGaWxlIGJ1
bmRsZUZpbGUgPSBGaWxlTG9jYXRvci5nZXRCdW5kbGVGaWxlKGJ1bmRsZXNbMF0pOworCQlTdHJp
bmcgYW5ub3RhdGlvbnNMaWIgPSBidW5kbGVGaWxlLmlzRGlyZWN0b3J5KCkgPyBidW5kbGVGaWxl
LmdldFBhdGgoKSsiL2JpbiIgOiBidW5kbGVGaWxlLmdldFBhdGgoKTsKKwkJSUphdmFQcm9qZWN0
IGphdmFQcm9qZWN0ID0gZW52LmdldEphdmFQcm9qZWN0KCJQcm9qZWN0Iik7CisJCUlDbGFzc3Bh
dGhFbnRyeVtdIHJhd0NsYXNzcGF0aCA9IGphdmFQcm9qZWN0LmdldFJhd0NsYXNzcGF0aCgpOwor
CQlpbnQgbGVuID0gcmF3Q2xhc3NwYXRoLmxlbmd0aDsKKwkJU3lzdGVtLmFycmF5Y29weShyYXdD
bGFzc3BhdGgsIDAsIHJhd0NsYXNzcGF0aCA9IG5ldyBJQ2xhc3NwYXRoRW50cnlbbGVuKzFdLCAw
LCBsZW4pOworCQlyYXdDbGFzc3BhdGhbbGVuXSA9IEphdmFDb3JlLm5ld0xpYnJhcnlFbnRyeShu
ZXcgUGF0aChhbm5vdGF0aW9uc0xpYiksIG51bGwsIG51bGwpOworCQlqYXZhUHJvamVjdC5zZXRS
YXdDbGFzc3BhdGgocmF3Q2xhc3NwYXRoLCBudWxsKTsKKworCQlqYXZhUHJvamVjdC5zZXRPcHRp
b24oSmF2YUNvcmUuQ09NUElMRVJfQU5OT1RBVElPTl9OVUxMX0FOQUxZU0lTLCBKYXZhQ29yZS5F
TkFCTEVEKTsKKwl9CiAJCiAJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19i
dWcuY2dpP2lkPTQyMzEyMiwgWzEuOF0gTWlzc2luZyBpbmNyZW1lbnRhbCBidWlsZCBkZXBlbmRl
bmN5IGZyb20gbGFtYmRhIGV4cHJlc3Npb24gdG8gZnVuY3Rpb25hbCBpbnRlcmZhY2UuCiAJcHVi
bGljIHZvaWQgdGVzdDQyMzEyMigpIHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24gewpAQCAtMzM3
LDQgKzM1OSw0NSBAQCBwdWJsaWMgY2xhc3MgSW5jcmVtZW50YWxUZXN0czE4IGV4dGVuZHMgQnVp
bGRlclRlc3RzIHsKIAkJaW5jcmVtZW50YWxCdWlsZChwcm9qZWN0UGF0aCk7CiAJCWV4cGVjdGlu
Z05vUHJvYmxlbXMoKTsKIAl9CQorCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mv
c2hvd19idWcuY2dpP2lkPTQzNTU0NCwgW2NvbXBpbGVyXVtudWxsXSBFbnVtIGNvbnN0YW50cyBu
b3QgcmVjb2duaXNlZCBhcyBiZWluZyBOb25OdWxsICh0YWtlMikKKwlwdWJsaWMgdm9pZCB0ZXN0
NDM1NTQ0KCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24geworCQlJUGF0
aCBwcm9qZWN0UGF0aCA9IGVudi5hZGRQcm9qZWN0KCJQcm9qZWN0IiwgIjEuOCIpOworCQllbnYu
YWRkRXh0ZXJuYWxKYXJzKHByb2plY3RQYXRoLCBVdGlsLmdldEphdmFDbGFzc0xpYnMoKSk7CisK
KwkJLy8gcmVtb3ZlIG9sZCBwYWNrYWdlIGZyYWdtZW50IHJvb3Qgc28gdGhhdCBuYW1lcyBkb24n
dCBjb2xsaWRlCisJCWVudi5yZW1vdmVQYWNrYWdlRnJhZ21lbnRSb290KHByb2plY3RQYXRoLCAi
Iik7CisKKwkJSVBhdGggcm9vdCA9IGVudi5hZGRQYWNrYWdlRnJhZ21lbnRSb290KHByb2plY3RQ
YXRoLCAic3JjIik7CisJCWVudi5zZXRPdXRwdXRGb2xkZXIocHJvamVjdFBhdGgsICJiaW4iKTsK
KworCQlzZXR1cFByb2plY3RGb3JOdWxsQW5ub3RhdGlvbnMoKTsKKwkJZW52LmFkZENsYXNzKHJv
b3QsICJwIiwgIlkiLAorCQkJCSJwYWNrYWdlIHA7CVxuIiArCisJCQkJICJwdWJsaWMgZW51bSBZ
IHtcbiIgKworCQkJCSAiCUEsXG4iICsKKwkJCQkgIglCXG4iICsKKwkJCQkgIn1cbiIgKworCQkJ
CSAiXG4iCisJCSk7CisKKwkJZnVsbEJ1aWxkKHByb2plY3RQYXRoKTsKKwkJZXhwZWN0aW5nTm9Q
cm9ibGVtcygpOworCisJCWVudi5hZGRDbGFzcyhyb290LCAicCIsICJYIiwKKwkJCQkicGFja2Fn
ZSBwOwlcbiIgKworCQkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uTm9uTnVs
bDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCQkiCUBOb25OdWxsXG4iICsK
KwkJCQkiCXB1YmxpYyBZIHkgPSBZLkE7IC8vIHdhcm5pbmcgd2l0aG91dCBmaXhcbiIgKworCQkJ
CSIJdm9pZCBmb28oQE5vbk51bGwgWSB5KSB7fVxuIiArCisJCQkJIiAgIHZvaWQgYmFyKCkge1xu
IiArCisJCQkJIgkJZm9vKFkuQSk7IC8vIHdhcm5pbmcgd2l0aG91dCBmaXhcbiIgKworCQkJCSIg
ICB9XG4iICsKKwkJCQkifVxuIgorCQkpOworCisJCWluY3JlbWVudGFsQnVpbGQocHJvamVjdFBh
dGgpOworCQlleHBlY3RpbmdOb1Byb2JsZW1zKCk7CisJfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9CaW5hcnlUeXBlQmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CaW5hcnlUeXBl
QmluZGluZy5qYXZhCmluZGV4IDI1N2YwOTguLmQ5MjMzNzQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvQmluYXJ5VHlwZUJpbmRpbmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9j
b21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0JpbmFyeVR5
cGVCaW5kaW5nLmphdmEKQEAgLTE0NjgsNiArMTQ2OCwxMSBAQCBwcml2YXRlIHZvaWQgc2NhbkZp
ZWxkRm9yTnVsbEFubm90YXRpb24oSUJpbmFyeUZpZWxkIGZpZWxkLCBGaWVsZEJpbmRpbmcgZmll
bGRCaQogCWlmICghaXNQcm90b3R5cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlv
bigpOwogCWlmICh0aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuc291cmNlTGV2ZWwgPj0g
Q2xhc3NGaWxlQ29uc3RhbnRzLkpESzFfOCkgewogCQlUeXBlQmluZGluZyBmaWVsZFR5cGUgPSBm
aWVsZEJpbmRpbmcudHlwZTsKKworCQlpZiAoaXNFbnVtICYmIChmaWVsZC5nZXRNb2RpZmllcnMo
KSAmIENsYXNzRmlsZUNvbnN0YW50cy5BY2NFbnVtKSAhPSAwKSB7CisJCQlmaWVsZEJpbmRpbmcu
dGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsOworCQl9CisKIAkJaWYgKGZpZWxk
VHlwZSAhPSBudWxsCiAJCQkJJiYgIWZpZWxkVHlwZS5pc0Jhc2VUeXBlKCkKIAkJCQkmJiAoZmll
bGRUeXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsTUFTSykgPT0gMAo=
</data>
<flag name="review"
          id="62952"
          type_id="6"
          status="?"
          setter="shankhba"
    />
          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>245254</attachid>
            <date>2014-07-22 04:46:00 -0400</date>
            <delta_ts>2014-07-22 04:46:05 -0400</delta_ts>
            <desc>Patch : R4_4_maintenance Branch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>5487</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2J1aWxkZXIvSW5jcmVtZW50YWxUZXN0czE4LmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5idWlsZGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29y
ZS90ZXN0cy9idWlsZGVyL0luY3JlbWVudGFsVGVzdHMxOC5qYXZhCmluZGV4IGUxZTkxNzYuLjdh
ZjA5ZTYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXIvc3Jj
L29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2J1aWxkZXIvSW5jcmVtZW50YWxUZXN0czE4Lmph
dmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuYnVpbGRlci9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvYnVpbGRlci9JbmNyZW1lbnRhbFRlc3RzMTguamF2YQpAQCAtMTEs
MTQgKzExLDIxIEBACiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXI7
CiAKIGltcG9ydCBqYXZhLmlvLkZpbGU7CitpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKIAog
aW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0OwogCitpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5y
dW50aW1lLkZpbGVMb2NhdG9yOwogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGltZS5JUGF0
aDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5jb3JlLnJ1bnRpbWUuUGF0aDsKK2ltcG9ydCBvcmcuZWNs
aXBzZS5jb3JlLnJ1bnRpbWUuUGxhdGZvcm07CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
SUNsYXNzcGF0aEVudHJ5OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLklKYXZhUHJvamVj
dDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5KYXZhQ29yZTsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuY29yZS5KYXZhTW9kZWxFeGNlcHRpb247CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMudXRpbC5BYnN0cmFjdENvbXBpbGVyVGVzdDsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy51dGlsLlV0aWw7CitpbXBvcnQgb3JnLm9zZ2kuZnJhbWV3b3JrLkJ1
bmRsZTsKIAogcHVibGljIGNsYXNzIEluY3JlbWVudGFsVGVzdHMxOCBleHRlbmRzIEJ1aWxkZXJU
ZXN0cyB7CiAJCkBAIC0zMCw2ICszNywyMSBAQCBwdWJsaWMgY2xhc3MgSW5jcmVtZW50YWxUZXN0
czE4IGV4dGVuZHMgQnVpbGRlclRlc3RzIHsKIAkJcmV0dXJuIEFic3RyYWN0Q29tcGlsZXJUZXN0
LmJ1aWxkTWluaW1hbENvbXBsaWFuY2VUZXN0U3VpdGUoSW5jcmVtZW50YWxUZXN0czE4LmNsYXNz
LCBBYnN0cmFjdENvbXBpbGVyVGVzdC5GXzFfOCk7CiAJfQogCQorCXByaXZhdGUgdm9pZCBzZXR1
cFByb2plY3RGb3JOdWxsQW5ub3RhdGlvbnMoKSB0aHJvd3MgSU9FeGNlcHRpb24sIEphdmFNb2Rl
bEV4Y2VwdGlvbiB7CisJCS8vIGFkZCB0aGUgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24gbGli
cmFyeSAoYmluLyBmb2xkZXIgb3IgamFyKSB0byB0aGUgcHJvamVjdDoKKwkJQnVuZGxlW10gYnVu
ZGxlcyA9IFBsYXRmb3JtLmdldEJ1bmRsZXMoIm9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uIiwi
WzIuMC4wLDMuMC4wKSIpOworCQlGaWxlIGJ1bmRsZUZpbGUgPSBGaWxlTG9jYXRvci5nZXRCdW5k
bGVGaWxlKGJ1bmRsZXNbMF0pOworCQlTdHJpbmcgYW5ub3RhdGlvbnNMaWIgPSBidW5kbGVGaWxl
LmlzRGlyZWN0b3J5KCkgPyBidW5kbGVGaWxlLmdldFBhdGgoKSsiL2JpbiIgOiBidW5kbGVGaWxl
LmdldFBhdGgoKTsKKwkJSUphdmFQcm9qZWN0IGphdmFQcm9qZWN0ID0gZW52LmdldEphdmFQcm9q
ZWN0KCJQcm9qZWN0Iik7CisJCUlDbGFzc3BhdGhFbnRyeVtdIHJhd0NsYXNzcGF0aCA9IGphdmFQ
cm9qZWN0LmdldFJhd0NsYXNzcGF0aCgpOworCQlpbnQgbGVuID0gcmF3Q2xhc3NwYXRoLmxlbmd0
aDsKKwkJU3lzdGVtLmFycmF5Y29weShyYXdDbGFzc3BhdGgsIDAsIHJhd0NsYXNzcGF0aCA9IG5l
dyBJQ2xhc3NwYXRoRW50cnlbbGVuKzFdLCAwLCBsZW4pOworCQlyYXdDbGFzc3BhdGhbbGVuXSA9
IEphdmFDb3JlLm5ld0xpYnJhcnlFbnRyeShuZXcgUGF0aChhbm5vdGF0aW9uc0xpYiksIG51bGws
IG51bGwpOworCQlqYXZhUHJvamVjdC5zZXRSYXdDbGFzc3BhdGgocmF3Q2xhc3NwYXRoLCBudWxs
KTsKKworCQlqYXZhUHJvamVjdC5zZXRPcHRpb24oSmF2YUNvcmUuQ09NUElMRVJfQU5OT1RBVElP
Tl9OVUxMX0FOQUxZU0lTLCBKYXZhQ29yZS5FTkFCTEVEKTsKKwl9CisKIAkvLyBodHRwczovL2J1
Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDIzMTIyLCBbMS44XSBNaXNzaW5n
IGluY3JlbWVudGFsIGJ1aWxkIGRlcGVuZGVuY3kgZnJvbSBsYW1iZGEgZXhwcmVzc2lvbiB0byBm
dW5jdGlvbmFsIGludGVyZmFjZS4KIAlwdWJsaWMgdm9pZCB0ZXN0NDIzMTIyKCkgdGhyb3dzIEph
dmFNb2RlbEV4Y2VwdGlvbiB7CiAJCUlQYXRoIHByb2plY3RQYXRoID0gZW52LmFkZFByb2plY3Qo
IlByb2plY3QiLCAiMS44Iik7CkBAIC0zMzcsNCArMzU5LDQ0IEBAIHB1YmxpYyBjbGFzcyBJbmNy
ZW1lbnRhbFRlc3RzMTggZXh0ZW5kcyBCdWlsZGVyVGVzdHMgewogCQlpbmNyZW1lbnRhbEJ1aWxk
KHByb2plY3RQYXRoKTsKIAkJZXhwZWN0aW5nTm9Qcm9ibGVtcygpOwogCX0JCisJLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQzNTU0NCwgW2NvbXBpbGVy
XVtudWxsXSBFbnVtIGNvbnN0YW50cyBub3QgcmVjb2duaXNlZCBhcyBiZWluZyBOb25OdWxsICh0
YWtlMikKKwlwdWJsaWMgdm9pZCB0ZXN0NDM1NTQ0KCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlv
biwgSU9FeGNlcHRpb24geworCQlJUGF0aCBwcm9qZWN0UGF0aCA9IGVudi5hZGRQcm9qZWN0KCJQ
cm9qZWN0IiwgIjEuOCIpOworCQllbnYuYWRkRXh0ZXJuYWxKYXJzKHByb2plY3RQYXRoLCBVdGls
LmdldEphdmFDbGFzc0xpYnMoKSk7CisKKwkJLy8gcmVtb3ZlIG9sZCBwYWNrYWdlIGZyYWdtZW50
IHJvb3Qgc28gdGhhdCBuYW1lcyBkb24ndCBjb2xsaWRlCisJCWVudi5yZW1vdmVQYWNrYWdlRnJh
Z21lbnRSb290KHByb2plY3RQYXRoLCAiIik7CisKKwkJSVBhdGggcm9vdCA9IGVudi5hZGRQYWNr
YWdlRnJhZ21lbnRSb290KHByb2plY3RQYXRoLCAic3JjIik7CisJCWVudi5zZXRPdXRwdXRGb2xk
ZXIocHJvamVjdFBhdGgsICJiaW4iKTsKKworCQlzZXR1cFByb2plY3RGb3JOdWxsQW5ub3RhdGlv
bnMoKTsKKwkJZW52LmFkZENsYXNzKHJvb3QsICJwIiwgIlkiLAorCQkJCSJwYWNrYWdlIHA7CVxu
IiArCisJCQkJICJwdWJsaWMgZW51bSBZIHtcbiIgKworCQkJCSAiCUEsXG4iICsKKwkJCQkgIglC
XG4iICsKKwkJCQkgIn1cbiIgKworCQkJCSAiXG4iCisJCSk7CisKKwkJZnVsbEJ1aWxkKHByb2pl
Y3RQYXRoKTsKKwkJZXhwZWN0aW5nTm9Qcm9ibGVtcygpOworCisJCWVudi5hZGRDbGFzcyhyb290
LCAicCIsICJYIiwKKwkJCQkicGFja2FnZSBwOwlcbiIgKworCQkJCSJpbXBvcnQgb3JnLmVjbGlw
c2UuamR0LmFubm90YXRpb24uTm9uTnVsbDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4i
ICsKKwkJCQkiCUBOb25OdWxsXG4iICsKKwkJCQkiCXB1YmxpYyBZIHkgPSBZLkE7IC8vIHdhcm5p
bmcgd2l0aG91dCBmaXhcbiIgKworCQkJCSIJdm9pZCBmb28oQE5vbk51bGwgWSB5KSB7fVxuIiAr
CisJCQkJIiAgIHZvaWQgYmFyKCkge1xuIiArCisJCQkJIgkJZm9vKFkuQSk7IC8vIHdhcm5pbmcg
d2l0aG91dCBmaXhcbiIgKworCQkJCSIgICB9XG4iICsKKwkJCQkifVxuIgorCQkpOworCisJCWlu
Y3JlbWVudGFsQnVpbGQocHJvamVjdFBhdGgpOworCQlleHBlY3RpbmdOb1Byb2JsZW1zKCk7CisJ
fQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CaW5hcnlUeXBlQmluZGluZy5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9CaW5hcnlUeXBlQmluZGluZy5qYXZhCmluZGV4IDI1N2YwOTguLmYzNTdh
M2QgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmluYXJ5VHlwZUJpbmRpbmcuamF2YQorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29tcGlsZXIvbG9va3VwL0JpbmFyeVR5cGVCaW5kaW5nLmphdmEKQEAgLTE0NjYsNiArMTQ2Niwx
MiBAQCBTaW1wbGVMb29rdXBUYWJsZSBzdG9yZWRBbm5vdGF0aW9ucyhib29sZWFuIGZvcmNlSW5p
dGlhbGl6ZSkgewogLy9wcmU6IG51bGwgYW5ub3RhdGlvbiBhbmFseXNpcyBpcyBlbmFibGVkCiBw
cml2YXRlIHZvaWQgc2NhbkZpZWxkRm9yTnVsbEFubm90YXRpb24oSUJpbmFyeUZpZWxkIGZpZWxk
LCBGaWVsZEJpbmRpbmcgZmllbGRCaW5kaW5nLCBib29sZWFuIGlzRW51bSkgewogCWlmICghaXNQ
cm90b3R5cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOworCisJaWYgKGlz
RW51bSAmJiAoZmllbGQuZ2V0TW9kaWZpZXJzKCkgJiBDbGFzc0ZpbGVDb25zdGFudHMuQWNjRW51
bSkgIT0gMCkgeworCQlmaWVsZEJpbmRpbmcudGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25O
b25OdWxsOworCQlyZXR1cm47IC8vIHdlIGtub3cgaXQncyBub25udWxsLCBubyBuZWVkIHRvIGxv
b2sgZm9yIG51bGwgKmFubm90YXRpb25zKiBvbiBlbnVtIGNvbnN0YW50cy4KKwl9CisKIAlpZiAo
dGhpcy5lbnZpcm9ubWVudC5nbG9iYWxPcHRpb25zLnNvdXJjZUxldmVsID49IENsYXNzRmlsZUNv
bnN0YW50cy5KREsxXzgpIHsKIAkJVHlwZUJpbmRpbmcgZmllbGRUeXBlID0gZmllbGRCaW5kaW5n
LnR5cGU7CiAJCWlmIChmaWVsZFR5cGUgIT0gbnVsbApAQCAtMTUwOSwxMSArMTUxNSw2IEBAIHBy
aXZhdGUgdm9pZCBzY2FuRmllbGRGb3JOdWxsQW5ub3RhdGlvbihJQmluYXJ5RmllbGQgZmllbGQs
IEZpZWxkQmluZGluZyBmaWVsZEJpCiAJaWYgKCFleHBsaWNpdE51bGxuZXNzICYmICh0aGlzLnRh
Z0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKSB7CiAJCWZp
ZWxkQmluZGluZy50YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGw7CiAJfQotCWlm
IChpc0VudW0pIHsKLQkJaWYgKChmaWVsZC5nZXRNb2RpZmllcnMoKSAmIENsYXNzRmlsZUNvbnN0
YW50cy5BY2NFbnVtKSAhPSAwKSB7Ci0JCQlmaWVsZEJpbmRpbmcudGFnQml0cyB8PSBUYWdCaXRz
LkFubm90YXRpb25Ob25OdWxsOwotCQl9Ci0JfQogfQogCiBwcml2YXRlIHZvaWQgc2Nhbk1ldGhv
ZEZvck51bGxBbm5vdGF0aW9uKElCaW5hcnlNZXRob2QgbWV0aG9kLCBNZXRob2RCaW5kaW5nIG1l
dGhvZEJpbmRpbmcpIHsK
</data>
<flag name="review"
          id="63034"
          type_id="6"
          status="?"
          setter="shankhba"
    />
          </attachment>
      

    </bug>

</bugzilla>