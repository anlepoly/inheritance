<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>332838</bug_id>
          
          <creation_ts>2010-12-17 07:24:00 -0500</creation_ts>
          <short_desc>Bogus potential null pointer access warning (regression; works with 3.6)</short_desc>
          <delta_ts>2011-03-07 11:22:54 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.7 M6</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Markus Schorn">markus.schorn</reporter>
          <assigned_to name="Ayushman Jain">amj87.iitr</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>daniel_megert</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1858306</commentid>
    <comment_count>0</comment_count>
    <who name="Markus Schorn">markus.schorn</who>
    <bug_when>2010-12-17 07:24:26 -0500</bug_when>
    <thetext>Eclipse SDK, Version: 3.7.0, Build id: I20101208-1300

public class Info {
  public void test(Info[] infos)  {
    for (final Info info : infos) {
      if (info != null) {
        assert info.checkSomething();
        info.doSomething();             // Potential NPA warning here!
      }
    }
  }

  void doSomething()  {}
  boolean checkSomething() {return true;}
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1858308</commentid>
    <comment_count>1</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2010-12-17 07:42:11 -0500</bug_when>
    <thetext>I&apos;ll investigate</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1873323</commentid>
    <comment_count>2</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-01-26 10:42:08 -0500</bug_when>
    <thetext>Ayush, please fix this for M6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1879017</commentid>
    <comment_count>3</comment_count>
      <attachid>188421</attachid>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-02-07 02:24:23 -0500</bug_when>
    <thetext>Created attachment 188421
proposed fix v1.0 + regression tests

The problem is in the incorrect merging of null info when the option &quot;include null info from asserts&quot; is disabled. 

This has been corrected in the above fix.

This also now gives a NPE warning instead of pot. NPE warning for the case:
for (final Info info : infos) {
      if (info == null) {   
          assert info.checkSomething();
          info.doSomething();             // NPE
        }
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1879277</commentid>
    <comment_count>4</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-02-07 11:18:28 -0500</bug_when>
    <thetext>Released in HEAD for 3.7 M6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1894310</commentid>
    <comment_count>5</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-03-07 11:22:54 -0500</bug_when>
    <thetext>Verified for 3.7M6.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>188421</attachid>
            <date>2011-02-07 02:24:00 -0500</date>
            <delta_ts>2011-02-07 02:24:23 -0500</delta_ts>
            <desc>proposed fix v1.0 + regression tests</desc>
            <filename>patch332838.txt</filename>
            <type>text/plain</type>
            <size>4127</size>
            <attacher name="Ayushman Jain">amj87.iitr</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBjb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fz
c2VydFN0YXRlbWVudC5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBz
ZS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29tcGlsZXIvYXN0L0Fzc2VydFN0YXRlbWVudC5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24g
MS42Ng0KZGlmZiAtdSAtcjEuNjYgQXNzZXJ0U3RhdGVtZW50LmphdmENCi0tLSBjb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fzc2VydFN0YXRlbWVudC5qYXZh
CTIyIE9jdCAyMDEwIDA0OjE1OjE1IC0wMDAwCTEuNjYNCisrKyBjb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fzc2VydFN0YXRlbWVudC5qYXZhCTcgRmViIDIw
MTEgMDc6MjE6NTAgLTAwMDANCkBAIC0xLDUgKzEsNSBAQA0KIC8qKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqDQotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEwIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLg0KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90
aGVycy4NCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2Nv
bXBhbnlpbmcgbWF0ZXJpYWxzDQogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wDQogICogd2hpY2ggYWNjb21wYW5p
ZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQNCkBAIC04Niw3ICs4Niw5
IEBADQogCQlDb21waWxlck9wdGlvbnMgY29tcGlsZXJPcHRpb25zID0gY3VycmVudFNjb3BlLmNv
bXBpbGVyT3B0aW9ucygpOw0KIAkJaWYgKCFjb21waWxlck9wdGlvbnMuaW5jbHVkZU51bGxJbmZv
RnJvbUFzc2VydHMpIHsNCiAJCQkvLyBrZWVwIGp1c3QgdGhlIGluaXRpYWxpemF0aW9ucyBpbmZv
LCBkb24ndCBpbmNsdWRlIGFzc2VydCdzIG51bGwgaW5mbw0KLQkJCXJldHVybiBmbG93SW5mby5t
ZXJnZWRXaXRoKGFzc2VydEluZm8ubnVsbEluZm9MZXNzVW5jb25kaXRpb25hbENvcHkoKSk7DQor
CQkJLy8gbWVyZ2UgaW5pdGlhbGl6YXRpb24gaW5mbydzIGFuZCB0aGVuIGFkZCBiYWNrIHRoZSBu
dWxsIGluZm8gZnJvbSBmbG93SW5mbyB0bw0KKwkJCS8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBlbXB0
eSBudWxsIGluZm8gb2YgYXNzZXJ0SW5mbyBkb2VzbnQgY2hhbmdlIGZsb3dJbmZvJ3MgbnVsbCBp
bmZvLg0KKwkJCXJldHVybiAoKGZsb3dJbmZvLm51bGxJbmZvTGVzc1VuY29uZGl0aW9uYWxDb3B5
KCkpLm1lcmdlZFdpdGgoYXNzZXJ0SW5mby5udWxsSW5mb0xlc3NVbmNvbmRpdGlvbmFsQ29weSgp
KSkuYWRkTnVsbEluZm9Gcm9tKGZsb3dJbmZvKTsNCiAJCX0NCiAJCXJldHVybiBmbG93SW5mby5t
ZXJnZWRXaXRoKGFzc2VydEluZm8ubnVsbEluZm9MZXNzVW5jb25kaXRpb25hbENvcHkoKSkuDQog
CQkJYWRkSW5pdGlhbGl6YXRpb25zRnJvbShhc3NlcnRXaGVuVHJ1ZUluZm8uZGlzY2FyZEluaXRp
YWxpemF0aW9uSW5mbygpKTsNCiNQIG9yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVy
DQpJbmRleDogc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Np
b24vTnVsbFJlZmVyZW5jZVRlc3QuamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290
L2VjbGlwc2Uvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xp
cHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbFJlZmVyZW5jZVRlc3Qu
amF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMTA5DQpkaWZmIC11IC1yMS4xMDkgTnVsbFJl
ZmVyZW5jZVRlc3QuamF2YQ0KLS0tIHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21w
aWxlci9yZWdyZXNzaW9uL051bGxSZWZlcmVuY2VUZXN0LmphdmEJMTkgSmFuIDIwMTEgMDU6Mjk6
NTcgLTAwMDAJMS4xMDkNCisrKyBzcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGls
ZXIvcmVncmVzc2lvbi9OdWxsUmVmZXJlbmNlVGVzdC5qYXZhCTcgRmViIDIwMTEgMDc6MjE6NTIg
LTAwMDANCkBAIC0xMzgzMiw0ICsxMzgzMiw0OSBAQA0KIAkJCSJ9In0sDQogCQkiIik7DQogfQ0K
Kw0KKy8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zMzI4
MzgNCisvLyBOdWxsIGluZm8gb2YgYXNzZXJ0IHN0YXRlbWVudHMgc2hvdWxkIG5vdCBhZmZlY3Qg
ZmxvdyBpbmZvDQorLy8gd2hlbiBDb21waWxlck9wdGlvbnMuT1BUSU9OX0luY2x1ZGVOdWxsSW5m
b0Zyb21Bc3NlcnRzIGlzIGRpc2FibGVkLg0KK3B1YmxpYyB2b2lkIHRlc3RCdWczMzI4MzgoKSB7
DQorCWlmICh0aGlzLmNvbXBsaWFuY2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRLMV81
KSB7DQorCQlNYXAgY29tcGlsZXJPcHRpb25zID0gZ2V0Q29tcGlsZXJPcHRpb25zKCk7DQorCQlj
b21waWxlck9wdGlvbnMucHV0KENvbXBpbGVyT3B0aW9ucy5PUFRJT05fSW5jbHVkZU51bGxJbmZv
RnJvbUFzc2VydHMsIENvbXBpbGVyT3B0aW9ucy5ESVNBQkxFRCk7DQorCQl0aGlzLnJ1bk5lZ2F0
aXZlVGVzdCgNCisJCQluZXcgU3RyaW5nW10gew0KKwkJCQkiSW5mby5qYXZhIiwNCisJCQkJInB1
YmxpYyBjbGFzcyBJbmZvIHtcbiIgKw0KKwkJCQkiCXB1YmxpYyB2b2lkIHRlc3QoSW5mb1tdIGlu
Zm9zKSB7XG4iICsNCisJCQkJIgkJZm9yIChmaW5hbCBJbmZvIGluZm8gOiBpbmZvcykge1xuICIg
Kw0KKwkJCQkiCQkJaWYgKGluZm8gIT0gbnVsbCkge1xuIiArDQorCQkJCSIJCQkJYXNzZXJ0IGlu
Zm8uY2hlY2tTb21ldGhpbmcoKTtcbiIgKw0KKwkJCQkiCQkgCQlpbmZvLmRvU29tZXRoaW5nKCk7
XG4iICsJLy8gbm8gd2FybmluZw0KKwkJCQkiCQkJfVxuIiArDQorCQkJCSIJCSB9XG4iICsNCisJ
CQkJIgkJZm9yIChmaW5hbCBJbmZvIGluZm8gOiBpbmZvcykge1xuICIgKw0KKwkJCQkiCQkJaWYg
KGluZm8gPT0gbnVsbCkge1xuIiArDQorCQkJCSIJCQkJYXNzZXJ0IGluZm8uY2hlY2tTb21ldGhp
bmcoKTtcbiIgKw0KKwkJCQkiCQkgCQlpbmZvLmRvU29tZXRoaW5nKCk7XG4iICsJLy8gd2FybiBO
UEUsIG5vdCBwb3QuIE5QRQ0KKwkJCQkiCQkJfVxuIiArDQorCQkJCSIJCSB9XG4iICsNCisJCQkJ
Igl9XG4iICsNCisJCQkJIgl2b2lkIGRvU29tZXRoaW5nKCkgIHt9XG4iICsNCisJCQkJIglib29s
ZWFuIGNoZWNrU29tZXRoaW5nKCkge3JldHVybiB0cnVlO31cbiIgKw0KKwkJCQkifVxuIn0sDQor
CQkJIi0tLS0tLS0tLS1cbiIgKyANCisJCQkiMS4gRVJST1IgaW4gSW5mby5qYXZhIChhdCBsaW5l
IDExKVxuIiArIA0KKwkJCSIJYXNzZXJ0IGluZm8uY2hlY2tTb21ldGhpbmcoKTtcbiIgKyANCisJ
CQkiCSAgICAgICBeXl5eXG4iICsgDQorCQkJIk51bGwgcG9pbnRlciBhY2Nlc3M6IFRoZSB2YXJp
YWJsZSBpbmZvIGNhbiBvbmx5IGJlIG51bGwgYXQgdGhpcyBsb2NhdGlvblxuIiArIA0KKwkJCSIt
LS0tLS0tLS0tXG4iICsgDQorCQkJIjIuIEVSUk9SIGluIEluZm8uamF2YSAoYXQgbGluZSAxMilc
biIgKyANCisJCQkiCWluZm8uZG9Tb21ldGhpbmcoKTtcbiIgKyANCisJCQkiCV5eXl5cbiIgKyAN
CisJCQkiTnVsbCBwb2ludGVyIGFjY2VzczogVGhlIHZhcmlhYmxlIGluZm8gY2FuIG9ubHkgYmUg
bnVsbCBhdCB0aGlzIGxvY2F0aW9uXG4iICsgDQorCQkJIi0tLS0tLS0tLS1cbiIsDQorCQkJbnVs
bCwNCisJCQl0cnVlLA0KKwkJCWNvbXBpbGVyT3B0aW9ucyk7DQorCX0NCit9DQogfQ0KXCBObyBu
ZXdsaW5lIGF0IGVuZCBvZiBmaWxlDQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>