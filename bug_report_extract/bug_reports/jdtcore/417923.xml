<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>417923</bug_id>
          
          <creation_ts>2013-09-24 10:00:00 -0400</creation_ts>
          <short_desc>[1.8][dom ast] white space requirements for ArrayType NASTFlattener and ASTRFlattener</short_desc>
          <delta_ts>2013-11-24 04:03:40 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          <dependson>413569</dependson>
    
    <dependson>422259</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Manoj Palat Away Until May 11 2015">manpalat</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="59877"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2310258</commentid>
    <comment_count>0</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-24 10:00:28 -0400</bug_when>
    <thetext>In the ArrayType implementation specify the white space requirements

Ref bug 413569 comment 18 last two items (reproduced below)

- ASTRewritingStatementsTest file, testBug400568_a_since_8 has two additional white spaced after removal of annotations on dimensions. To be changed?

- TypeAnnotationsConverterTest -  String [] [] [] [] - do we need these spaces if there are no annotations on dimensions?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2318540</commentid>
    <comment_count>1</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-10-15 15:58:09 -0400</bug_when>
    <thetext>We should not have any whitespace between an ArrayType&apos;s element type and its dimensions. String[][][][] is the common formatting.

Spaces can be used when there are annotations on dimensions, but if in doubt, better leave them out (especially if spaces could otherwise appear in non-annotated array types).

(from bug 413569 comment #29)
&gt; a) ASTRewriteAnalyzer#visit(ArrayType): The rewriteNodeList(..., &quot; &quot;) call
&gt; looks fishy. In the normal case (no annotations on dimensions), I wouldn&apos;t
&gt; expect a space between consecutive [], e.g.: int[][]. No DOM test failed
&gt; when I changed the last argument to &quot;&quot;.
&gt; ASTRewriteFlattener#visit(ArrayType) looks similar: I&apos;d expect the separator
&gt; to be &quot;&quot;, not &quot; &quot;.
&gt; 
&gt; Please write two ASTRewrite tests that don&apos;t use any annotations:
&gt; - create a new ArrayType with n &gt; 1 dimensions
&gt; - rewrite an existing ArrayType and insert a dimension</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2325453</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-01 02:37:30 -0400</bug_when>
    <thetext>In conversations with Markus, this was called out as something the UI
team would like to see cleaned up fast.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327026</commentid>
    <comment_count>3</comment_count>
      <attachid>237222</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-06 01:33:48 -0500</bug_when>
    <thetext>Created attachment 237222
Proposed Patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327220</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-11-06 10:11:40 -0500</bug_when>
    <thetext>I see couple of issues with the fix (ref: the following code from ASTRewritingStatementsTest) :

int [] i []@Annot1 @Annot2 [] @Annot1 @Annot3 [] = new int @Annot1 @Annot2  [2] @Annot2 @Annot3 [size()] @Annot2 @Annot1 [][]@Annot3 @Annot2 @Annot1 [];\n&quot;);

1. Shouldn&apos;t we have a space between [] and the following annotation if any? In fact, in the tests in TypeAnnotationsConverterTest, we have examples of both kinds. We need to make them appear consistent.


2. &quot;@Annot2  [2]&quot; - There are two spaces between the annotation and [2]. Agree this was an existing code and not an extra dimension, but shouldn&apos;t we extend this fix to array initializers too?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327319</commentid>
    <comment_count>5</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-11-06 14:36:49 -0500</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #4)

&gt; 1. Shouldn&apos;t we have a space between [] and the following annotation if any?

I&apos;ve read the 308 documents more closely, and I think the convention is to
(a) generally keep the terse notation without any spaces (e.g. int[][]), and
(b) if there are type annotations on a dimension, insert a space on both sides of the annotations list (e.g. int[] @A []).

I&apos;ve asked on the spec list for confirmation.


&gt; 2. &quot;@Annot2  [2]&quot; - There are two spaces between the annotation and [2].
&gt; Agree this was an existing code and not an extra dimension, but shouldn&apos;t we
&gt; extend this fix to array initializers too?

Yes, it should work the same for array initializers. In ASTRewritingStatementsTest.java on line 6042, I would expect &quot;@Annot2 [2]&quot; instead of &quot;@Annot2  [2]&quot;, since newArrayType is initialized with ASTNode.copySubtree(..), which doesn&apos;t preserve formatting.

But on line 6123, it should stay &quot;@Annot2  [2]&quot;, because that part of the array type is not modified. The
    rewrite.set(creation, ArrayCreation.TYPE_PROPERTY, arrayType, null);
at the end of the first block is a no-op, since arrayType is still the original node.


In general, ASTRewrite should not touch unaffected code. When type annotations are added/removed on a dimension, it should insert/remove adjacent spaces when inserting/removing the first/last annotation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327523</commentid>
    <comment_count>6</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-11-07 05:46:43 -0500</bug_when>
    <thetext>&gt; I&apos;ve asked on the spec list for confirmation.

Has been confirmed, so we&apos;ll also use spaces iff a dimension is annotated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2328529</commentid>
    <comment_count>7</comment_count>
      <attachid>237347</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-10 16:56:47 -0500</bug_when>
    <thetext>Created attachment 237347
Work in Progress patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2332119</commentid>
    <comment_count>8</comment_count>
      <attachid>237568</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-19 23:35:51 -0500</bug_when>
    <thetext>Created attachment 237568
Proposed Patch

 - Fixed the space issue
 - Revamped the relevant code.
 - Added a lot more testcases as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2332889</commentid>
    <comment_count>9</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-11-21 08:11:32 -0500</bug_when>
    <thetext>I quickly skimmed over the new tests and had two observations:

1. You always seem to use ast.newMarkerAnnotation(). Would be good to have a NormalAnnotation or a SingleMemberAnnotation once in a while, just to ensure it also works fine if an annotation has actual members with possibly nasty values like int[].class.

2. I didn&apos;t spot a test case that creates a new ArrayType, adds a new annotation to a dimension and then serializes the new array type node with an ASTRewrite.
I.e. create this variable declaration from scratch:

String[] @Anno [] var = new String[1] @Anno [2];

I suspect that the change in ASTRewriteFlattener could make this result in missing space, e.g. &quot;int[]@Anno[]&quot; instead of the correct &quot;int[] @Anno []&quot;. Disclaimer: This is just a guess I didn&apos;t actually test. I could very well be totally wrong. But a having a test case with this scenario would still be good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2332988</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-11-21 10:22:34 -0500</bug_when>
    <thetext>I went through the patch and test cases and it appears to me that we are not consistent when it comes to removing the leading and trailing white spaces of an annotation. For e.g, consider the following two cases:


int[] @A   @B [][] - removing @B produces

            int[] @A [][]

int[] @A   @B @C [][] - removing @B produces

            int[] @A   @C [][]

And I am not sure if we should keep those spaces between @A and @C in the second case. I think, whenever we get an opportunity, i.e. we remove any of the annotations, we should try to keep exactly one space on either side of an annotation. That is, if that&apos;s not too much of work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2332993</commentid>
    <comment_count>11</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-21 10:29:34 -0500</bug_when>
    <thetext>(In reply to Markus Keller from comment #9)

Thanks Markus for the comments
&gt; 
&gt; 1.  Would be good to have a
&gt; NormalAnnotation or a SingleMemberAnnotation once in a while, just to ensure
&gt; it also works fine if an annotation has actual members with possibly nasty
&gt; values like int[].class.
Will update the patch with such a test case.
&gt; 
&gt; 2. 
&gt; I suspect that the change in ASTRewriteFlattener could make this result in
&gt; missing space, e.g. &quot;int[]@Anno[]&quot; instead of the correct &quot;int[] @Anno []&quot;.
This issue does happen but is agnostic to the change in ASTRFlattener, and happens due to formatting. Bug 422259 has been raised to track this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333001</commentid>
    <comment_count>12</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-21 10:37:41 -0500</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #10)
&gt; 
&gt; And I am not sure if we should keep those spaces between @A and @C in the
&gt; second case. I think, whenever we get an opportunity, i.e. we remove any of
&gt; the annotations, we should try to keep exactly one space on either side of
&gt; an annotation. That is, if that&apos;s not too much of work.

Jay, Thanks for the comments. In fact, the special cases that we take care are the pre &amp; post deletions of spaces if we are removing the &quot;last&quot; annotation (and similarly the first annotation insertion) as Markus pointed out in comment 5 last para. In case of other annotation removals we pass it through the standard rewriteNodeList() since it may involve too many special cases which require special treatment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333010</commentid>
    <comment_count>13</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-11-21 10:44:35 -0500</bug_when>
    <thetext>(In reply to Manoj Palat from comment #12)
&gt; Jay, Thanks for the comments. In fact, the special cases that we take care
&gt; are the pre &amp; post deletions of spaces if we are removing the &quot;last&quot;
&gt; annotation (and similarly the first annotation insertion) as Markus pointed
&gt; out in comment 5 last para. In case of other annotation removals we pass it
&gt; through the standard rewriteNodeList() since it may involve too many special
&gt; cases which require special treatment.

If we are sure that rewriteNodeList() is what produces the output mentioned in comment #10, then I am fine with what we have. Please release after incorporating the changes suggested so far.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333011</commentid>
    <comment_count>14</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-11-21 10:45:56 -0500</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #10)
These examples look fine to me, but changing the implementation to &quot;one space on each side of a touched node&quot; would also be OK.

If the given formatting doesn&apos;t match what the formatter would produce, then we&apos;re operating by the &quot;garbage in -&gt; garbage out&quot; principle. I.e. keep changes minimal, and choose the solution that is easiest to implement/understand in code. Avoid adding special cases just to &quot;improve&quot; behavior with strange input.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333254</commentid>
    <comment_count>15</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-21 23:55:34 -0500</bug_when>
    <thetext>(In reply to Markus Keller from comment #14)
&gt; (In reply to Jayaprakash Arthanareeswaran from comment #10)
..
&gt; I.e. keep changes minimal, and choose the solution that is easiest to
&gt; implement/understand in code. Avoid adding special cases just to &quot;improve&quot;
&gt; behavior with strange input.

Thanks Markus &amp; Jay. Changes committed via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=cd7ab76e97bbde2dfa388ac94141efed3a1c5385

Will resolve the bug post bug 422259 closure and test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2333741</commentid>
    <comment_count>16</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-24 04:03:40 -0500</bug_when>
    <thetext>(In reply to Manoj Palat from comment #15)

&gt; Will resolve the bug post bug 422259 closure and test.

Fixed</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237222</attachid>
            <date>2013-11-06 01:33:00 -0500</date>
            <delta_ts>2013-11-19 23:35:51 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-417923-18dom-ast-white-space-requirement.patch</filename>
            <type>text/plain</type>
            <size>13839</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGQyZDdkNWUuLjUwMDM4ZDEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTY1NywxNCArMTY1NywxNCBAQAogCQlFeHBy
ZXNzaW9uIGV4cHJlc3Npb24gPSBmcmFnbWVudC5nZXRJbml0aWFsaXplcigpOwogCQlhc3NlcnRU
cnVlKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBMYW1iZGFFeHByZXNzaW9uKTsKIAkJTGFtYmRhRXhw
cmVzc2lvbiBsYW1iZGFFeHByZXNzaW9uID0gKExhbWJkYUV4cHJlc3Npb24pZXhwcmVzc2lvbjsK
LQkJYXNzZXJ0RXF1YWxzKCIoaW50IFtdIGlhKSAtPiB7XG4gIHJldHVybiBpYS5jbG9uZSgpO1xu
fVxuIiwgbGFtYmRhRXhwcmVzc2lvbi50b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCIoaW50
W10gaWEpIC0+IHtcbiAgcmV0dXJuIGlhLmNsb25lKCk7XG59XG4iLCBsYW1iZGFFeHByZXNzaW9u
LnRvU3RyaW5nKCkpOwogCQlJTWV0aG9kQmluZGluZyBiaW5kaW5nID0gbGFtYmRhRXhwcmVzc2lv
bi5yZXNvbHZlTWV0aG9kQmluZGluZygpOwogCQlhc3NlcnRFcXVhbHMoInByaXZhdGUgc3RhdGlj
IGphdmEubGFuZy5PYmplY3QgbGFtYmRhJDAoaW50W10pICIsIGJpbmRpbmcudG9TdHJpbmcoKSk7
CiAJCWFzc2VydFRydWUobGFtYmRhRXhwcmVzc2lvbi5wYXJhbWV0ZXJzKCkuc2l6ZSgpID09IDEp
OwogCQlWYXJpYWJsZURlY2xhcmF0aW9uIHZhcmlhYmxlRGVjbGFyYXRpb24gPSAoVmFyaWFibGVE
ZWNsYXJhdGlvbikgbGFtYmRhRXhwcmVzc2lvbi5wYXJhbWV0ZXJzKCkuZ2V0KDApOwogCQlhc3Nl
cnRUcnVlKHZhcmlhYmxlRGVjbGFyYXRpb24gaW5zdGFuY2VvZiBTaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uKTsKIAkJU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbiBzaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pdmFyaWFibGVEZWNsYXJhdGlvbjsK
LQkJYXNzZXJ0RXF1YWxzKCJpbnQgW10gaWEiLCBzaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLnRv
U3RyaW5nKCkpOwkJCisJCWFzc2VydEVxdWFscygiaW50W10gaWEiLCBzaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uLnRvU3RyaW5nKCkpOwogCX0KIAogCS8qKgpAQCAtMzM0Miw3ICszMzQyLDcgQEAK
IAkJYXNzZXJ0RXF1YWxzKCJJbmNvcnJlY3Qgbm8gb2YgZnJhZ21lbnRzIiwgMSwgZnJhZ21lbnRz
LnNpemUoKSk7CiAJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9IChWYXJp
YWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CiAJCWFzc2VydEVxdWFs
cygiVW5leHBlY3RlZCB0eXBlIiwgZnJhZ21lbnQucmVzb2x2ZUJpbmRpbmcoKS5nZXRUeXBlKCku
dG9TdHJpbmcoKSwgIlN0cmluZyBATWFya2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJFeHRlbmRlZFwi
fSBbXSBATWFya2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJpMFwifSBATWFya2VyMiBbXSBbXSBATWFy
a2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJpMVwifSBbXSIpOwotCQlhc3NlcnRFcXVhbHMoIlVuZXhw
ZWN0ZWQgdHlwZSIsIGZpZWxkLmdldFR5cGUoKS50b1N0cmluZygpLCAiU3RyaW5nIEBNYXJrZXIo
XCJpMFwiKSBATWFya2VyMiBbXSBbXSBATWFya2VyKFwiaTFcIikgW10iKTsKKwkJYXNzZXJ0RXF1
YWxzKCJVbmV4cGVjdGVkIHR5cGUiLCAiU3RyaW5nIEBNYXJrZXIoXCJpMFwiKSBATWFya2VyMiBb
XVtdIEBNYXJrZXIoXCJpMVwiKSBbXSIsIGZpZWxkLmdldFR5cGUoKS50b1N0cmluZygpKTsKIAl9
CiAJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQxNzY2
OQogCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTc2NjkoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9u
IHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vVHlwZUFubm90YXRpb25zQ29udmVydGVyVGVzdC5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnNDb252ZXJ0ZXJUZXN0LmphdmEKaW5kZXgg
ZjgwMTVjYy4uZTMzMGU1NCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnND
b252ZXJ0ZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnNDb252ZXJ0
ZXJUZXN0LmphdmEKQEAgLTIwNCw3ICsyMDQsNyBAQAogCQkJIiAgICAgICAgY2xhc3MgWjxRPiB7
XG4iICsKIAkJICAgICIgICAgICAgIH1cbiIgKwogCQkJIiAgICB9XG4iICsKLQkJCSIgICAgaW50
IFtdIFtdIFtdIFtdIG8gPSAoQE9uZSBpbnQgW10gQFR3byBbXSBbXSBAVGhyZWUgW10pIG51bGw7
XG4iICsKKwkJCSIgICAgaW50W11bXVtdW10gbyA9IChAT25lIGludFtdIEBUd28gW11bXSBAVGhy
ZWUgW10pIG51bGw7XG4iICsKIAkJCQogCQkJIiAgICBAamF2YS5sYW5nLmFubm90YXRpb24uVGFy
Z2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIgKwogCQkJ
IiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKQEAgLTIyMCw3ICsyMjAsNyBAQAogCQkJCSJj
bGFzcyBaPFE+IHtcbiIgKyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsgCi0JCQkJ
IiAgaW50IFtdIFtdIFtdIFtdIG89KEBPbmUgaW50IFtdIEBUd28gW10gW10gQFRocmVlIFtdKW51
bGw7XG4iICsgCisJCQkJIiAgaW50W11bXVtdW10gbz0oQE9uZSBpbnRbXSBAVHdvIFtdW10gQFRo
cmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSkgQGludGVyZmFjZSBNYXJr
ZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNzZXJ0QVNUTm9kZUVxdWFscyhleHBlY3RlZE91
dHB1dCwgbm9kZSk7CkBAIC0yMzMsNyArMjMzLDcgQEAKIAkJCSIgICAgICAgIGNsYXNzIFo8UT4g
e1xuIiArCiAJCSAgICAiICAgICAgICB9XG4iICsKIAkJCSIgICAgfVxuIiArCi0JCQkiICAgIFN0
cmluZyBbXSBbXSBbXSBbXSBvID0gKEBPbmUgU3RyaW5nIFtdIEBUd28gW10gW10gQFRocmVlIFtd
KSBudWxsO1xuIiArCisJCQkiICAgIFN0cmluZyBbXVtdW11bXSBvID0gKEBPbmUgU3RyaW5nW11A
VHdvIFtdW11AVGhyZWUgW10pIG51bGw7XG4iICsKIAkJCQogCQkJIiAgICBAamF2YS5sYW5nLmFu
bm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VT
RSlcbiIgKwogCQkJIiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKQEAgLTI0OSw3ICsyNDks
NyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9
XG4iICsgCi0JCQkJIiAgU3RyaW5nIFtdIFtdIFtdIFtdIG89KEBPbmUgU3RyaW5nIFtdIEBUd28g
W10gW10gQFRocmVlIFtdKW51bGw7XG4iICsgCisJCQkJIiAgU3RyaW5nW11bXVtdW10gbz0oQE9u
ZSBTdHJpbmdbXSBAVHdvIFtdW10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGphdmEu
bGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSkgQGludGVyZmFjZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNzZXJ0
QVNUTm9kZUVxdWFscyhleHBlY3RlZE91dHB1dCwgbm9kZSk7CkBAIC0yNjIsNyArMjYyLDcgQEAK
IAkJCSIgICAgICAgIGNsYXNzIFo8UT4ge1xuIiArCiAJCSAgICAiICAgICAgICB9XG4iICsKIAkJ
CSIgICAgfVxuIiArCi0JCQkiICAgIE9iamVjdCBvID0gKEBPbmUgWDxTdHJpbmc+IFtdIEBUd28g
W10gW10gQFRocmVlIFtdKSBudWxsO1xuIiArCisJCQkiICAgIE9iamVjdCBvID0gKEBPbmUgWDxT
dHJpbmc+IFtdIEBUd28gW11bXUBUaHJlZSBbXSkgbnVsbDtcbiIgKwogCQkJCiAJCQkiICAgIEBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlLlRZUEVfVVNFKVxuIiArCiAJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIgKwpAQCAt
Mjc4LDcgKzI3OCw3IEBACiAJCQkJImNsYXNzIFo8UT4ge1xuIiArIAogCQkJCSIgICAgfVxuIiAr
IAogCQkJCSIgIH1cbiIgKyAKLQkJCQkiICBPYmplY3Qgbz0oQE9uZSBYPFN0cmluZz4gW10gQFR3
byBbXSBbXSBAVGhyZWUgW10pbnVsbDtcbiIgKyAKKwkJCQkiICBPYmplY3Qgbz0oQE9uZSBYPFN0
cmluZz5bXSBAVHdvIFtdW10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGphdmEubGFu
Zy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBF
X1VTRSkgQGludGVyZmFjZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNzZXJ0QVNU
Tm9kZUVxdWFscyhleHBlY3RlZE91dHB1dCwgbm9kZSk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3
cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
cmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEKaW5kZXgg
YzkyMzEzYS4uYTNmNGEwMCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9B
U1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
LnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2Ny
aWJpbmcvQVNUUmV3cml0aW5nTWV0aG9kRGVjbFRlc3QuamF2YQpAQCAtMzI0OCw5ICszMjQ4LDkg
QEAKIAkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOwogCQlidWYuYXBwZW5kKCJpbXBv
cnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKIAkJYnVmLmFwcGVuZCgi
cHVibGljIGFic3RyYWN0IGNsYXNzIEUge1xuIik7Ci0JCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMg
T2JqZWN0IGZvbzEoKVtdIEBBbm5vdDEgW10gQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9XG4i
KTsKLQkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMigpW10gQEFubm90MSBbXSB0
aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKLQkJYnVmLmFw
cGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90MSBAQW5ub3Qy
IFtdIEBBbm5vdDIgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBw
dWJsaWMgT2JqZWN0IGZvbzEoKVtdQEFubm90MSBbXUBBbm5vdDIgW10geyByZXR1cm4gbnVsbDsg
fVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzIoKVtdQEFubm90MSBb
XSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVm
LmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90MSBAQW5u
b3QyIFtdQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAg
IHB1YmxpYyBPYmplY3QgZm9vNCgpQEFubm90MiBAQW5ub3QxIFtdIEBBbm5vdDIgQEFubm90MSBb
XSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1cbiIpOwog
CQlidWYuYXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb281KCkgIFtdICAgQEFubm90MiBAQW5u
b3QxIFtdIHsgcmV0dXJuIG51bGw7IH1cbiIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVibGljIE9i
amVjdCBmb282KGludCBpKSAgIFtdICBbXSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u
IHsgcmV0dXJuIG51bGw7IH1cbiIpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3Jp
YmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVz
Y3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5qYXZhCmluZGV4IGZlMTMxNTAuLjc2
M2JmNDQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5n
U3RhdGVtZW50c1Rlc3QuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJl
d3JpdGluZ1N0YXRlbWVudHNUZXN0LmphdmEKQEAgLTYwMzksNyArNjAzOSw3IEBACiAJCWJ1Zi5h
cHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOwogCQli
dWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIHB1Ymxp
YyB2b2lkIGZvbygpIHtcbiIpOwotCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdIEBBbm5v
dDEgQEFubm90MiBbXSBAQW5ub3QxIEBBbm5vdDMgW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90
MiAgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZSgpXSBAQW5ub3QyIEBBbm5vdDEgW11bXUBBbm5v
dDMgQEFubm90MiBAQW5ub3QxIFtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGkg
W11AQW5ub3QxIEBBbm5vdDIgW10gQEFubm90MSBAQW5ub3QzIFtdID0gbmV3IGludCBAQW5ub3Qx
IEBBbm5vdDIgIFsyXSBAQW5ub3QyIEBBbm5vdDMgW3NpemUoKV0gQEFubm90MiBAQW5ub3QxIFtd
W11AQW5ub3QzIEBBbm5vdDIgQEFubm90MSBbXTtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgCWlu
dCBbXSBqIFtdW10gPSBuZXcgaW50IEBBbm5vdDIgWzJdIEBBbm5vdDIgW10gQEFubm90MSBbXSwg
ayBbXVtdID0gbmV3IGludCBbMl0gWzEwXSBbc2l6ZSgpXTtcbiIpOwogCQlidWYuYXBwZW5kKCIg
ICAgfVxuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgaW50IHNpemUoKSB7IHJldHVybiAy
OyB9XG4iKTsKQEAgLTYwNTksNyArNjA1OSw3IEBACiAJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZh
LmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOwogCQlidWYuYXBwZW5kKCJwdWJsaWMg
Y2xhc3MgRSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIp
OwotCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFu
bm90MiAgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZShuZXcgaW50W11bXXt9KV0gW107XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0gbmV3IGludCBAQW5ub3QxIEBBbm5v
dDIgIFsyXUBBbm5vdDIgQEFubm90M1tzaXplKG5ldyBpbnRbXVtde30pXSBbXTtcbiIpOwogCQli
dWYuYXBwZW5kKCIgICAgCWludCBbXSBqIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90MiBb
Ml0gQEFubm90MiBAQW5ub3QzIFtzaXplKG5ldyBpbnRbXXt9KV0gQEFubm90MSBAQW5ub3QzIFtd
LCBrIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90MiBbMl0gQEFubm90MiBAQW5ub3QzIFsx
MF0gQEFubm90MSBAQW5ub3QzIFtzaXplKG5ldyBpbnRbXVtde30pXTtcbiIpOwogCQlidWYuYXBw
ZW5kKCIgICAgfVxuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgaW50IHNpemUoT2JqZWN0
IG9iaikgeyByZXR1cm4gMjsgfVxuIik7CkBAIC02MTIwLDcgKzYxMjAsNyBAQAogCQlidWYuYXBw
ZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKIAkJYnVm
LmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMg
dm9pZCBmb28oKSB7XG4iKTsKLQkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0gbmV3
IGludCBAQW5ub3QxIEBBbm5vdDIgIFsyXSAgW3NpemUobmV3IGludFtdW117fSldIFtdO1xuIik7
CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGkgW11bXSA9IG5ldyBpbnQgQEFubm90MSBAQW5u
b3QyICBbMl1bc2l6ZShuZXcgaW50W11bXXt9KV0gW107XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAg
IAlpbnQgW10gaiBbXVtdID0gbmV3IGludCBAQW5ub3QxIEBBbm5vdDIgWzJdIEBBbm5vdDIgQEFu
bm90MyBbc2l6ZShuZXcgaW50W117fSldLCBrIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90
MiBbMl0gQEFubm90MiBAQW5ub3QzIFsxMF07XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIH1cbiIp
OwogCQlidWYuYXBwZW5kKCIgICAgcHVibGljIGludCBzaXplKE9iamVjdCBvYmopIHsgcmV0dXJu
IDI7IH1cbiIpOwpAQCAtNjE1NSw2ICs2MTU1LDUzIEBACiAJCWVkaXQuYXBwbHkoZG9jKTsKIAkJ
YXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0IEZvcm1hdHRpbmciLCBkb2MuZ2V0KCkuZXF1YWxzKGZvcm1h
dHRlZFN0cmluZykpOwogCX0KKwlwdWJsaWMgdm9pZCB0ZXN0QnVnNDE5NzIzYV9zaW5jZV84KCkg
dGhyb3dzIEV4Y2VwdGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291cmNl
Rm9sZGVyLmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJCVN0
cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2Fn
ZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24u
RWxlbWVudFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CisJ
CWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIAlpbnQgaSBbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFw
cGVuZCgifVxuIik7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0
aW9uVW5pdCgiRS5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKworCQlDb21w
aWxhdGlvblVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUKGN1KTsKKwkJQVNUIGFzdD0gYXN0Um9vdC5n
ZXRBU1QoKTsKKwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3RSb290
LmdldEFTVCgpKTsKKworCQkvLyBHZXQgd2hpbGUgc3RhdGVtZW50IGJsb2NrCisJCVR5cGVEZWNs
YXJhdGlvbiB0eXBlRGVjbCA9IChUeXBlRGVjbGFyYXRpb24pIGFzdFJvb3QudHlwZXMoKS5nZXQo
MCk7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IHR5cGVEZWNsLmdldE1ldGhvZHMo
KVswXTsKKwkJQmxvY2sgYmxvY2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRl
bWVudHM9IGJsb2NrLnN0YXRlbWVudHMoKTsKKworCQlWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50IHN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRz
LmdldCgwKTsKKwkJTGlzdCBmcmFnbWVudHMgPSBzdGF0ZW1lbnQuZnJhZ21lbnRzKCk7CisJCVZh
cmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CisKKwkJeworCQkJLy8gQWRkIG5ldyBkaW1lbnNp
b24gd2l0aCBhbmQgd2l0aG91dCBhbm5vdGF0aW9ucworCisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3
cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShmcmFnbWVudCwgVmFyaWFibGVEZWNsYXJhdGlv
bkZyYWdtZW50LkVYVFJBX0RJTUVOU0lPTlMyX1BST1BFUlRZKTsKKwkJCURpbWVuc2lvbiBkaW0g
PSBhc3QubmV3RGltZW5zaW9uKCk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRGaXJzdChkaW0sIG51
bGwpOworCQkJCisJCX0KKwkJLy8gR2V0IG5ldyBjb2RlCisJCVN0cmluZyBwcmV2aWV3PSBldmFs
dWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOwor
CQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJs
aWMgY2xhc3MgRSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBpIFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlhc3NlcnRFcXVhbFN0cmluZyhw
cmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQogCiB9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVB
U1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQppbmRleCBhMDlmMGE0
Li5jMzE0NjY2IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9O
YWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC02MjAsOCArNjIwLDEwIEBACiAJfQogCiAJcHVibGlj
IGJvb2xlYW4gdmlzaXQoRGltZW5zaW9uIG5vZGUpIHsKLQkJdGhpcy5idWZmZXIuYXBwZW5kKCIg
Iik7Ly8kTk9OLU5MUy0xJAotCQl2aXNpdEFubm90YXRpb25zTGlzdChub2RlLmFubm90YXRpb25z
KCkpOworCQlMaXN0IGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9ucygpOworCQlpZiAoYW5u
b3RhdGlvbnMuc2l6ZSgpID4gMCkKKwkJCXRoaXMuYnVmZmVyLmFwcGVuZCgnICcpOworCQl2aXNp
dEFubm90YXRpb25zTGlzdChhbm5vdGF0aW9ucyk7CiAJCXRoaXMuYnVmZmVyLmFwcGVuZCgiW10i
KTsgLy8kTk9OLU5MUy0xJAogCQlyZXR1cm4gZmFsc2U7CiAJfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXpl
ci5qYXZhCmluZGV4IDllYjBmYzEuLmEyNjFkY2EgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RS
ZXdyaXRlQW5hbHl6ZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmph
dmEKQEAgLTEyNjYsNyArMTI2Niw3IEBACiAJfQogCiAJcHJvdGVjdGVkIGludCByZXdyaXRlRXh0
cmFEaW1lbnNpb25zSW5mbyhBU1ROb2RlIG5vZGUsIGludCBwb3MsIENoaWxkTGlzdFByb3BlcnR5
RGVzY3JpcHRvciBwcm9wZXJ0eSkgewotCQlyZXR1cm4gcmV3cml0ZU5vZGVMaXN0KG5vZGUsIHBy
b3BlcnR5LCBwb3MsICIgIiwgIiAiKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJCXJl
dHVybiByZXdyaXRlTm9kZUxpc3Qobm9kZSwgcHJvcGVydHksIHBvcywgIiAiLCAiIik7IC8vJE5P
Ti1OTFMtMSQgLy8kTk9OLU5MUy0yJAogCX0KIAogCXByaXZhdGUgaW50IHJld3JpdGVFeHRyYURp
bWVuc2lvbnMoQVNUTm9kZSBwYXJlbnQsIFN0cnVjdHVyYWxQcm9wZXJ0eURlc2NyaXB0b3IgcHJv
cGVydHksIGludCBwb3MpIHsKQEAgLTIyNTQsNyArMjI1NCw3IEBACiAJCQlyZXdyaXRlUmVxdWly
ZWROb2RlKG5vZGUsIElOVEVSTkFMX0FSUkFZX0NPTVBPTkVOVF9UWVBFX1BST1BFUlRZKTsKIAkJ
fSBlbHNlIHsKIAkJCWludCBwb3MgPSByZXdyaXRlUmVxdWlyZWROb2RlKG5vZGUsIEFycmF5VHlw
ZS5FTEVNRU5UX1RZUEVfUFJPUEVSVFkpOwotCQkJcmV3cml0ZU5vZGVMaXN0KG5vZGUsIEFycmF5
VHlwZS5ESU1FTlNJT05TX1BST1BFUlRZLCBwb3MsIFV0aWwuRU1QVFlfU1RSSU5HLCAiICIpOyAv
LyROT04tTkxTLTEkCisJCQlyZXdyaXRlTm9kZUxpc3Qobm9kZSwgQXJyYXlUeXBlLkRJTUVOU0lP
TlNfUFJPUEVSVFksIHBvcywgVXRpbC5FTVBUWV9TVFJJTkcsICIiKTsgLy8kTk9OLU5MUy0xJAog
CQl9CiAJCXJldHVybiBmYWxzZTsKIAl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0
ZUZsYXR0ZW5lci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQppbmRl
eCA3NGYwYjIzLi4wOWZkYTMzIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0
ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKQEAgLTMw
NSw3ICszMDUsNyBAQAogCQkJdGhpcy5yZXN1bHQuYXBwZW5kKCJbXSIpOyAvLyROT04tTkxTLTEk
CiAJCX0gZWxzZSB7CiAJCQlnZXRDaGlsZE5vZGUobm9kZSwgQXJyYXlUeXBlLkVMRU1FTlRfVFlQ
RV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwotCQkJdmlzaXRMaXN0KG5vZGUsIEFycmF5VHlwZS5E
SU1FTlNJT05TX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZignICcpLCBVdGlsLkVNUFRZX1NUUklO
RywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7CisJCQl2aXNpdExpc3Qobm9kZSwgQXJyYXlUeXBlLkRJ
TUVOU0lPTlNfUFJPUEVSVFksIFV0aWwuRU1QVFlfU1RSSU5HLCBVdGlsLkVNUFRZX1NUUklORywg
VXRpbC5FTVBUWV9TVFJJTkcpOwogCQl9CiAJCXJldHVybiBmYWxzZTsKIAl9
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237347</attachid>
            <date>2013-11-10 16:56:00 -0500</date>
            <delta_ts>2013-11-19 23:35:51 -0500</delta_ts>
            <desc>Work in Progress patch</desc>
            <filename>417923wipspace.patch</filename>
            <type>text/plain</type>
            <size>24066</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGQyZDdkNWUuLjUwMDM4ZDEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTY1NywxNCArMTY1NywxNCBAQAogCQlFeHBy
ZXNzaW9uIGV4cHJlc3Npb24gPSBmcmFnbWVudC5nZXRJbml0aWFsaXplcigpOwogCQlhc3NlcnRU
cnVlKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBMYW1iZGFFeHByZXNzaW9uKTsKIAkJTGFtYmRhRXhw
cmVzc2lvbiBsYW1iZGFFeHByZXNzaW9uID0gKExhbWJkYUV4cHJlc3Npb24pZXhwcmVzc2lvbjsK
LQkJYXNzZXJ0RXF1YWxzKCIoaW50IFtdIGlhKSAtPiB7XG4gIHJldHVybiBpYS5jbG9uZSgpO1xu
fVxuIiwgbGFtYmRhRXhwcmVzc2lvbi50b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCIoaW50
W10gaWEpIC0+IHtcbiAgcmV0dXJuIGlhLmNsb25lKCk7XG59XG4iLCBsYW1iZGFFeHByZXNzaW9u
LnRvU3RyaW5nKCkpOwogCQlJTWV0aG9kQmluZGluZyBiaW5kaW5nID0gbGFtYmRhRXhwcmVzc2lv
bi5yZXNvbHZlTWV0aG9kQmluZGluZygpOwogCQlhc3NlcnRFcXVhbHMoInByaXZhdGUgc3RhdGlj
IGphdmEubGFuZy5PYmplY3QgbGFtYmRhJDAoaW50W10pICIsIGJpbmRpbmcudG9TdHJpbmcoKSk7
CiAJCWFzc2VydFRydWUobGFtYmRhRXhwcmVzc2lvbi5wYXJhbWV0ZXJzKCkuc2l6ZSgpID09IDEp
OwogCQlWYXJpYWJsZURlY2xhcmF0aW9uIHZhcmlhYmxlRGVjbGFyYXRpb24gPSAoVmFyaWFibGVE
ZWNsYXJhdGlvbikgbGFtYmRhRXhwcmVzc2lvbi5wYXJhbWV0ZXJzKCkuZ2V0KDApOwogCQlhc3Nl
cnRUcnVlKHZhcmlhYmxlRGVjbGFyYXRpb24gaW5zdGFuY2VvZiBTaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uKTsKIAkJU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbiBzaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pdmFyaWFibGVEZWNsYXJhdGlvbjsK
LQkJYXNzZXJ0RXF1YWxzKCJpbnQgW10gaWEiLCBzaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLnRv
U3RyaW5nKCkpOwkJCisJCWFzc2VydEVxdWFscygiaW50W10gaWEiLCBzaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uLnRvU3RyaW5nKCkpOwogCX0KIAogCS8qKgpAQCAtMzM0Miw3ICszMzQyLDcgQEAK
IAkJYXNzZXJ0RXF1YWxzKCJJbmNvcnJlY3Qgbm8gb2YgZnJhZ21lbnRzIiwgMSwgZnJhZ21lbnRz
LnNpemUoKSk7CiAJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9IChWYXJp
YWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CiAJCWFzc2VydEVxdWFs
cygiVW5leHBlY3RlZCB0eXBlIiwgZnJhZ21lbnQucmVzb2x2ZUJpbmRpbmcoKS5nZXRUeXBlKCku
dG9TdHJpbmcoKSwgIlN0cmluZyBATWFya2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJFeHRlbmRlZFwi
fSBbXSBATWFya2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJpMFwifSBATWFya2VyMiBbXSBbXSBATWFy
a2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJpMVwifSBbXSIpOwotCQlhc3NlcnRFcXVhbHMoIlVuZXhw
ZWN0ZWQgdHlwZSIsIGZpZWxkLmdldFR5cGUoKS50b1N0cmluZygpLCAiU3RyaW5nIEBNYXJrZXIo
XCJpMFwiKSBATWFya2VyMiBbXSBbXSBATWFya2VyKFwiaTFcIikgW10iKTsKKwkJYXNzZXJ0RXF1
YWxzKCJVbmV4cGVjdGVkIHR5cGUiLCAiU3RyaW5nIEBNYXJrZXIoXCJpMFwiKSBATWFya2VyMiBb
XVtdIEBNYXJrZXIoXCJpMVwiKSBbXSIsIGZpZWxkLmdldFR5cGUoKS50b1N0cmluZygpKTsKIAl9
CiAJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQxNzY2
OQogCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTc2NjkoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9u
IHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vVHlwZUFubm90YXRpb25zQ29udmVydGVyVGVzdC5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnNDb252ZXJ0ZXJUZXN0LmphdmEKaW5kZXgg
YzdlZmViMC4uYzVkNGM3NSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnND
b252ZXJ0ZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnNDb252ZXJ0
ZXJUZXN0LmphdmEKQEAgLTE2Miw3ICsxNjIsNyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAK
IAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsgCi0JCQkJIiAgT2JqZWN0IG89KEBNYXJr
ZXIgWDxATWFya2VyIFN0cmluZz4uQE1hcmtlciBZPEBNYXJrZXIgSW50ZWdlcj4uQE1hcmtlciBa
PEBNYXJrZXIgT2JqZWN0PiBATWFya2VyIFtdIFtdIEBNYXJrZXIgW10gW10pbnVsbDtcbiIgKyAK
KwkJCQkiICBPYmplY3Qgbz0oQE1hcmtlciBYPEBNYXJrZXIgU3RyaW5nPi5ATWFya2VyIFk8QE1h
cmtlciBJbnRlZ2VyPi5ATWFya2VyIFo8QE1hcmtlciBPYmplY3Q+IEBNYXJrZXIgW11bXSBATWFy
a2VyIFtdW10pbnVsbDtcbiIgKyAKIAkJCQkiICBAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
KGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKSBAaW50ZXJmYWNlIE1h
cmtlciB7fVxuIiArIAogCQkJCSJ9XG4iOwogCQlhc3NlcnRBU1ROb2RlRXF1YWxzKGV4cGVjdGVk
T3V0cHV0LCBub2RlKTsKQEAgLTE5MSw3ICsxOTEsNyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIg
KyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsgCi0JCQkJIiAgT2JqZWN0IG89KEBN
YXJrZXIgWDxATWFya2VyIFN0cmluZz4uQE1hcmtlciBZPEBNYXJrZXIgSW50ZWdlcj4uQE1hcmtl
ciBaPEBNYXJrZXIgT2JqZWN0PiBbXSBATWFya2VyIFtdIFtdIEBNYXJrZXIgW10pbnVsbDtcbiIg
KyAKKwkJCQkiICBPYmplY3Qgbz0oQE1hcmtlciBYPEBNYXJrZXIgU3RyaW5nPi5ATWFya2VyIFk8
QE1hcmtlciBJbnRlZ2VyPi5ATWFya2VyIFo8QE1hcmtlciBPYmplY3Q+W10gQE1hcmtlciBbXVtd
IEBNYXJrZXIgW10pbnVsbDtcbiIgKyAKIAkJCQkiICBAamF2YS5sYW5nLmFubm90YXRpb24uVGFy
Z2V0KGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKSBAaW50ZXJmYWNl
IE1hcmtlciB7fVxuIiArIAogCQkJCSJ9XG4iOwogCQlhc3NlcnRBU1ROb2RlRXF1YWxzKGV4cGVj
dGVkT3V0cHV0LCBub2RlKTsKQEAgLTIwNCw3ICsyMDQsNyBAQAogCQkJIiAgICAgICAgY2xhc3Mg
WjxRPiB7XG4iICsKIAkJICAgICIgICAgICAgIH1cbiIgKwogCQkJIiAgICB9XG4iICsKLQkJCSIg
ICAgaW50IFtdIFtdIFtdIFtdIG8gPSAoQE9uZSBpbnQgW10gQFR3byBbXSBbXSBAVGhyZWUgW10p
IG51bGw7XG4iICsKKwkJCSIgICAgaW50W11bXVtdW10gbyA9IChAT25lIGludFtdIEBUd28gW11b
XSBAVGhyZWUgW10pIG51bGw7XG4iICsKIAkJCQogCQkJIiAgICBAamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIg
KwogCQkJIiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKQEAgLTIyMCw3ICsyMjAsNyBAQAog
CQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsg
Ci0JCQkJIiAgaW50IFtdIFtdIFtdIFtdIG89KEBPbmUgaW50IFtdIEBUd28gW10gW10gQFRocmVl
IFtdKW51bGw7XG4iICsgCisJCQkJIiAgaW50W11bXVtdW10gbz0oQE9uZSBpbnRbXSBAVHdvIFtd
W10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGphdmEubGFuZy5hbm5vdGF0aW9uLlRh
cmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSkgQGludGVyZmFj
ZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNzZXJ0QVNUTm9kZUVxdWFscyhleHBl
Y3RlZE91dHB1dCwgbm9kZSk7CkBAIC0yMzMsNyArMjMzLDcgQEAKIAkJCSIgICAgICAgIGNsYXNz
IFo8UT4ge1xuIiArCiAJCSAgICAiICAgICAgICB9XG4iICsKIAkJCSIgICAgfVxuIiArCi0JCQki
ICAgIFN0cmluZyBbXSBbXSBbXSBbXSBvID0gKEBPbmUgU3RyaW5nIFtdIEBUd28gW10gW10gQFRo
cmVlIFtdKSBudWxsO1xuIiArCisJCQkiICAgIFN0cmluZyBbXVtdW11bXSBvID0gKEBPbmUgU3Ry
aW5nW11AVHdvIFtdW11AVGhyZWUgW10pIG51bGw7XG4iICsKIAkJCQogCQkJIiAgICBAamF2YS5s
YW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSlcbiIgKwogCQkJIiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKQEAgLTI0OSw3
ICsyNDksNyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJ
CQkiICB9XG4iICsgCi0JCQkJIiAgU3RyaW5nIFtdIFtdIFtdIFtdIG89KEBPbmUgU3RyaW5nIFtd
IEBUd28gW10gW10gQFRocmVlIFtdKW51bGw7XG4iICsgCisJCQkJIiAgU3RyaW5nW11bXVtdW10g
bz0oQE9uZSBTdHJpbmdbXSBAVHdvIFtdW10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAg
QGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50
VHlwZS5UWVBFX1VTRSkgQGludGVyZmFjZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJ
YXNzZXJ0QVNUTm9kZUVxdWFscyhleHBlY3RlZE91dHB1dCwgbm9kZSk7CkBAIC0yNjIsNyArMjYy
LDcgQEAKIAkJCSIgICAgICAgIGNsYXNzIFo8UT4ge1xuIiArCiAJCSAgICAiICAgICAgICB9XG4i
ICsKIAkJCSIgICAgfVxuIiArCi0JCQkiICAgIE9iamVjdCBvID0gKEBPbmUgWDxTdHJpbmc+IFtd
IEBUd28gW10gW10gQFRocmVlIFtdKSBudWxsO1xuIiArCisJCQkiICAgIE9iamVjdCBvID0gKEBP
bmUgWDxTdHJpbmc+IFtdIEBUd28gW11bXUBUaHJlZSBbXSkgbnVsbDtcbiIgKwogCQkJCiAJCQki
ICAgIEBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVs
ZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCiAJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIg
KwpAQCAtMjc4LDcgKzI3OCw3IEBACiAJCQkJImNsYXNzIFo8UT4ge1xuIiArIAogCQkJCSIgICAg
fVxuIiArIAogCQkJCSIgIH1cbiIgKyAKLQkJCQkiICBPYmplY3Qgbz0oQE9uZSBYPFN0cmluZz4g
W10gQFR3byBbXSBbXSBAVGhyZWUgW10pbnVsbDtcbiIgKyAKKwkJCQkiICBPYmplY3Qgbz0oQE9u
ZSBYPFN0cmluZz5bXSBAVHdvIFtdW10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGph
dmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlw
ZS5UWVBFX1VTRSkgQGludGVyZmFjZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNz
ZXJ0QVNUTm9kZUVxdWFscyhleHBlY3RlZE91dHB1dCwgbm9kZSk7CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEK
aW5kZXggYzkyMzEzYS4uYTNmNGEwMCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3Jp
YmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRl
L2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9kRGVjbFRlc3QuamF2YQpAQCAtMzI0OCw5ICsz
MjQ4LDkgQEAKIAkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOwogCQlidWYuYXBwZW5k
KCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKIAkJYnVmLmFw
cGVuZCgicHVibGljIGFic3RyYWN0IGNsYXNzIEUge1xuIik7Ci0JCWJ1Zi5hcHBlbmQoIiAgICBw
dWJsaWMgT2JqZWN0IGZvbzEoKVtdIEBBbm5vdDEgW10gQEFubm90MiBbXSB7IHJldHVybiBudWxs
OyB9XG4iKTsKLQkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMigpW10gQEFubm90
MSBbXSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKLQkJ
YnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90MSBA
QW5ub3QyIFtdIEBBbm5vdDIgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICBwdWJsaWMgT2JqZWN0IGZvbzEoKVtdQEFubm90MSBbXUBBbm5vdDIgW10geyByZXR1cm4g
bnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzIoKVtdQEFu
bm90MSBbXSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90
MSBAQW5ub3QyIFtdQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9XG4iKTsKIAkJYnVmLmFwcGVu
ZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vNCgpQEFubm90MiBAQW5ub3QxIFtdIEBBbm5vdDIgQEFu
bm90MSBbXSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1c
biIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb281KCkgIFtdICAgQEFubm90
MiBAQW5ub3QxIFtdIHsgcmV0dXJuIG51bGw7IH1cbiIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVi
bGljIE9iamVjdCBmb282KGludCBpKSAgIFtdICBbXSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhj
ZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1cbiIpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUv
ZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3Jp
dGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5qYXZhCmluZGV4IGZlMTMx
NTAuLjVjODY5N2EgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nU3RhdGVtZW50c1Rlc3QuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5n
L0FTVFJld3JpdGluZ1N0YXRlbWVudHNUZXN0LmphdmEKQEAgLTYwMzksNyArNjAzOSw3IEBACiAJ
CWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIp
OwogCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAg
IHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOwotCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtd
IEBBbm5vdDEgQEFubm90MiBbXSBAQW5ub3QxIEBBbm5vdDMgW10gPSBuZXcgaW50IEBBbm5vdDEg
QEFubm90MiAgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZSgpXSBAQW5ub3QyIEBBbm5vdDEgW11b
XUBBbm5vdDMgQEFubm90MiBAQW5ub3QxIFtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50
IFtdIGkgW11AQW5ub3QxIEBBbm5vdDIgW10gQEFubm90MSBAQW5ub3QzIFtdID0gbmV3IGludCBA
QW5ub3QxIEBBbm5vdDIgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZSgpXSBAQW5ub3QyIEBBbm5v
dDEgW11bXSBAQW5ub3QzIEBBbm5vdDIgQEFubm90MSBbXTtcbiIpOwogCQlidWYuYXBwZW5kKCIg
ICAgCWludCBbXSBqIFtdW10gPSBuZXcgaW50IEBBbm5vdDIgWzJdIEBBbm5vdDIgW10gQEFubm90
MSBbXSwgayBbXVtdID0gbmV3IGludCBbMl0gWzEwXSBbc2l6ZSgpXTtcbiIpOwogCQlidWYuYXBw
ZW5kKCIgICAgfVxuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgaW50IHNpemUoKSB7IHJl
dHVybiAyOyB9XG4iKTsKQEAgLTYwNTksNyArNjA1OSw3IEBACiAJCWJ1Zi5hcHBlbmQoImltcG9y
dCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOwogCQlidWYuYXBwZW5kKCJw
dWJsaWMgY2xhc3MgRSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygp
IHtcbiIpOwotCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdW10gPSBuZXcgaW50IEBBbm5v
dDEgQEFubm90MiAgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZShuZXcgaW50W11bXXt9KV0gW107
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0gbmV3IGludCBAQW5ub3Qx
IEBBbm5vdDIgIFsyXUBBbm5vdDIgQEFubm90M1tzaXplKG5ldyBpbnRbXVtde30pXSBbXTtcbiIp
OwogCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBqIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFu
bm90MiBbMl0gQEFubm90MiBAQW5ub3QzIFtzaXplKG5ldyBpbnRbXXt9KV0gQEFubm90MSBAQW5u
b3QzIFtdLCBrIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90MiBbMl0gQEFubm90MiBAQW5u
b3QzIFsxMF0gQEFubm90MSBAQW5ub3QzIFtzaXplKG5ldyBpbnRbXVtde30pXTtcbiIpOwogCQli
dWYuYXBwZW5kKCIgICAgfVxuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgaW50IHNpemUo
T2JqZWN0IG9iaikgeyByZXR1cm4gMjsgfVxuIik7CkBAIC02MDk0LDcgKzYwOTQsNiBAQAogCQkJ
TGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBEaW1l
bnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOwogCQkJbGlzdFJld3JpdGUucmVtb3ZlKChBU1RO
b2RlKWRpbS5hbm5vdGF0aW9ucygpLmdldCgwKSwgbnVsbCk7CiAJCQlsaXN0UmV3cml0ZS5yZW1v
dmUoKEFTVE5vZGUpZGltLmFubm90YXRpb25zKCkuZ2V0KDEpLCBudWxsKTsKLQkJCXJld3JpdGUu
c2V0KGNyZWF0aW9uLCBBcnJheUNyZWF0aW9uLlRZUEVfUFJPUEVSVFksIGFycmF5VHlwZSwgbnVs
bCk7CiAJCX0KIAkJewogCQkJc3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1l
bnQpIHN0YXRlbWVudHMuZ2V0KDEpOwpAQCAtNjEyMCw3ICs2MTE5LDcgQEAKIAkJYnVmLmFwcGVu
ZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CiAJCWJ1Zi5h
cHBlbmQoInB1YmxpYyBjbGFzcyBFIHtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZv
aWQgZm9vKCkge1xuIik7Ci0JCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGkgW11bXSA9IG5ldyBp
bnQgQEFubm90MSBAQW5ub3QyICBbMl0gIFtzaXplKG5ldyBpbnRbXVtde30pXSBbXTtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90
MiAgWzJdW3NpemUobmV3IGludFtdW117fSldIFtdO1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50IFtdIGogW11bXSA9IG5ldyBpbnQgQEFubm90MSBAQW5ub3QyIFsyXSBAQW5ub3QyIEBBbm5v
dDMgW3NpemUobmV3IGludFtde30pXSwgayBbXVtdID0gbmV3IGludCBAQW5ub3QxIEBBbm5vdDIg
WzJdIEBBbm5vdDIgQEFubm90MyBbMTBdO1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsK
IAkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBpbnQgc2l6ZShPYmplY3Qgb2JqKSB7IHJldHVybiAy
OyB9XG4iKTsKQEAgLTYxNTUsNiArNjE1NCwxMDYgQEAKIAkJZWRpdC5hcHBseShkb2MpOwogCQlh
c3NlcnRUcnVlKCJJbmNvcnJlY3QgRm9ybWF0dGluZyIsIGRvYy5nZXQoKS5lcXVhbHMoZm9ybWF0
dGVkU3RyaW5nKSk7CiAJfQorCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTk3MjNhX3NpbmNlXzgoKSB0
aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VG
b2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3Ry
aW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdl
IHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5F
bGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgCWludCBpIFtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBw
ZW5kKCJ9XG4iKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRp
b25Vbml0KCJFLmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNvbXBp
bGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1QoY3UpOworCQlBU1QgYXN0PSBhc3RSb290Lmdl
dEFTVCgpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFzdFJvb3Qu
Z2V0QVNUKCkpOworCisJCS8vIEdldCB3aGlsZSBzdGF0ZW1lbnQgYmxvY2sKKwkJVHlwZURlY2xh
cmF0aW9uIHR5cGVEZWNsID0gKFR5cGVEZWNsYXJhdGlvbikgYXN0Um9vdC50eXBlcygpLmdldCgw
KTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0gdHlwZURlY2wuZ2V0TWV0aG9kcygp
WzBdOworCQlCbG9jayBibG9jaz0gbWV0aG9kRGVjbC5nZXRCb2R5KCk7CisJCUxpc3Qgc3RhdGVt
ZW50cz0gYmxvY2suc3RhdGVtZW50cygpOworCisJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1l
bnQgc3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMu
Z2V0KDApOworCQlMaXN0IGZyYWdtZW50cyA9IHN0YXRlbWVudC5mcmFnbWVudHMoKTsKKwkJVmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25G
cmFnbWVudCkgZnJhZ21lbnRzLmdldCgwKTsKKworCQl7CisJCQkvLyBBZGQgbmV3IGRpbWVuc2lv
biB3aXRoIGFuZCB3aXRob3V0IGFubm90YXRpb25zCisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdy
aXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGZyYWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQuRVhUUkFfRElNRU5TSU9OUzJfUFJPUEVSVFkpOworCQkJRGltZW5zaW9uIGRpbSA9
IGFzdC5uZXdEaW1lbnNpb24oKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEZpcnN0KGRpbSwgbnVs
bCk7CisJCQkKKwkJfQorCQkvLyBHZXQgbmV3IGNvZGUKKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1
YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJ
CWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGph
dmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1Ymxp
YyBjbGFzcyBFIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xu
Iik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IGkgW11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHBy
ZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsKKwl9CisJcHVibGljIHZvaWQgdGVzdEJ1ZzQxOTcyM2Jf
c2luY2VfOCgpIHRocm93cyBFeGNlcHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0
aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJhZ21lbnQoInRlc3QxIiwgZmFsc2UsIG51
bGwpOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBl
bmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5h
bm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBF
IHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1
Zi5hcHBlbmQoIiAgICAJaW50IFtdIGkgW11bXSA9IG5ldyBpbnQgQEFubm90MSBbXUBBbm5vdDEg
W10gW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxu
Iik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBpbGF0
aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJFLmphdmEiLCBidWYudG9T
dHJpbmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVh
dGVBU1QoY3UpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFzdFJv
b3QuZ2V0QVNUKCkpOworCisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlRGVjbCA9IChUeXBlRGVjbGFy
YXRpb24pIGFzdFJvb3QudHlwZXMoKS5nZXQoMCk7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhv
ZERlY2w9IHR5cGVEZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJQmxvY2sgYmxvY2s9IG1ldGhvZERl
Y2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRlbWVudHM9IGJsb2NrLnN0YXRlbWVudHMoKTsKKwor
CQlWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50IHN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xh
cmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldCgwKTsKKwkJTGlzdCBmcmFnbWVudHMgPSBz
dGF0ZW1lbnQuZnJhZ21lbnRzKCk7CisJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFn
bWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CisJ
CVR5cGUgdHlwZSA9IHN0YXRlbWVudC5nZXRUeXBlKCk7CisKKwkJeworCQkJYXNzZXJ0RXF1YWxz
KCJJbmNvcnJlY3QgdHlwZSIsIEFTVE5vZGUuQVJSQVlfVFlQRSwgdHlwZS5nZXROb2RlVHlwZSgp
KTsKKwkJCUFycmF5Q3JlYXRpb24gY3JlYXRpb24gPSAoQXJyYXlDcmVhdGlvbikgZnJhZ21lbnQu
Z2V0SW5pdGlhbGl6ZXIoKTsKKworCQkJQXJyYXlUeXBlIGFycmF5VHlwZSA9IGNyZWF0aW9uLmdl
dFR5cGUoKTsKKwkJCURpbWVuc2lvbiBkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5z
aW9ucygpLmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExp
c3RSZXdyaXRlKGRpbSwgRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RS
ZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSlkaW0uYW5ub3RhdGlvbnMoKS5nZXQoMCksIG51bGwpOwor
CisJCQlkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5zaW9ucygpLmdldCgxKTsKKwkJ
CWxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRGltZW5zaW9uLkFOTk9U
QVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSlkaW0uYW5u
b3RhdGlvbnMoKS5nZXQoMCksIG51bGwpOworCQl9CisJCS8vIEdldCBuZXcgY29kZQorCQlTdHJp
bmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKworCQlidWY9IG5ldyBT
dHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYu
YXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJs
aWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0g
bmV3IGludFtdW10gW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBw
ZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQ
RV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJ
YXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOworCX0KIAogfQogCmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1R5cGVEZWNs
VGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xp
cHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUeXBlRGVj
bFRlc3QuamF2YQppbmRleCBlYWNiMTMwLi5jNWIyOGU5IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3
cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1R5cGVEZWNsVGVzdC5qYXZhCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nVHlwZURlY2xUZXN0LmphdmEKQEAgLTE3
MzcsNyArMTczNyw3IEBACiAJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlv
bi5FbGVtZW50VHlwZTtcbiIpOwogCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsK
IAkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOwotCQlidWYuYXBwZW5k
KCIgICAgICAgIGludCBpLCBqLCBrID0gMCwgeCwgeSBbXSBbXSBbXSwgeiBAQW5ub3QxIFtdLCB6
eiBAQW5ub3QyIEBBbm5vdDJbXSA9IHswLCAxfTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgICAg
IGludCBpLCBqLCBrID0gMCwgeCwgeVtdW11bXSwgeiBAQW5ub3QxIFtdLCB6eiBAQW5ub3QyIEBB
bm5vdDJbXSA9IHswLCAxfTtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CiAJCWJ1Zi5h
cHBlbmQoIn1cbiIpOwogCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CkBAIC0xODQ4LDcgKzE4NDgsNyBA
QAogCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7
XG4iKTsKIAkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CiAJCWJ1Zi5hcHBlbmQo
IiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKLQkJYnVmLmFwcGVuZCgiICAgICAgICBpbnQg
YSBAQW5ub3QxIEBBbm5vdDIgW10sIGogPSAxLCBrIEBBbm5vdDEgQEFubm90MiBbXSwgeCBAQW5u
b3QxIEBBbm5vdDIgW10gPSBudWxsLCB5IEBBbm5vdDFbXSBAQW5ub3QyW10sIHp6IEBBbm5vdDIg
QEFubm90MltdID0gezAsIDF9O1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAgICAgaW50IGEgQEFu
bm90MSBAQW5ub3QyIFtdLCBqID0gMSwgayBAQW5ub3QxIEBBbm5vdDIgW10sIHggQEFubm90MSBA
QW5ub3QyIFtdID0gbnVsbCwgeSBAQW5ub3QxIFtdIEBBbm5vdDIgW10sIHp6IEBBbm5vdDIgQEFu
bm90MltdID0gezAsIDF9O1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKIAkJYnVmLmFw
cGVuZCgifVxuIik7CiAJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQo
dmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVB
U1RGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQppbmRleCBhMDlmMGE0
Li5jMzE0NjY2IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9O
YWl2ZUFTVEZsYXR0ZW5lci5qYXZhCkBAIC02MjAsOCArNjIwLDEwIEBACiAJfQogCiAJcHVibGlj
IGJvb2xlYW4gdmlzaXQoRGltZW5zaW9uIG5vZGUpIHsKLQkJdGhpcy5idWZmZXIuYXBwZW5kKCIg
Iik7Ly8kTk9OLU5MUy0xJAotCQl2aXNpdEFubm90YXRpb25zTGlzdChub2RlLmFubm90YXRpb25z
KCkpOworCQlMaXN0IGFubm90YXRpb25zID0gbm9kZS5hbm5vdGF0aW9ucygpOworCQlpZiAoYW5u
b3RhdGlvbnMuc2l6ZSgpID4gMCkKKwkJCXRoaXMuYnVmZmVyLmFwcGVuZCgnICcpOworCQl2aXNp
dEFubm90YXRpb25zTGlzdChhbm5vdGF0aW9ucyk7CiAJCXRoaXMuYnVmZmVyLmFwcGVuZCgiW10i
KTsgLy8kTk9OLU5MUy0xJAogCQlyZXR1cm4gZmFsc2U7CiAJfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXpl
ci5qYXZhCmluZGV4IDllYjBmYzEuLjFkYjUzZDggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RS
ZXdyaXRlQW5hbHl6ZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmph
dmEKQEAgLTEyNjYsNyArMTI2Niw3IEBACiAJfQogCiAJcHJvdGVjdGVkIGludCByZXdyaXRlRXh0
cmFEaW1lbnNpb25zSW5mbyhBU1ROb2RlIG5vZGUsIGludCBwb3MsIENoaWxkTGlzdFByb3BlcnR5
RGVzY3JpcHRvciBwcm9wZXJ0eSkgewotCQlyZXR1cm4gcmV3cml0ZU5vZGVMaXN0KG5vZGUsIHBy
b3BlcnR5LCBwb3MsICIgIiwgIiAiKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJCXJl
dHVybiByZXdyaXRlTm9kZUxpc3Qobm9kZSwgcHJvcGVydHksIHBvcywgIiAiLCAiIik7IC8vJE5P
Ti1OTFMtMSQgLy8kTk9OLU5MUy0yJAogCX0KIAogCXByaXZhdGUgaW50IHJld3JpdGVFeHRyYURp
bWVuc2lvbnMoQVNUTm9kZSBwYXJlbnQsIFN0cnVjdHVyYWxQcm9wZXJ0eURlc2NyaXB0b3IgcHJv
cGVydHksIGludCBwb3MpIHsKQEAgLTE5MTcsNyArMTkxNyw3IEBACiAJCWlmICghaGFzQ2hpbGRy
ZW5DaGFuZ2VzKG5vZGUpKSB7CiAJCQlyZXR1cm4gZG9WaXNpdFVuY2hhbmdlZENoaWxkcmVuKG5v
ZGUpOwogCQl9Ci0JCXJld3JpdGVOb2RlTGlzdChub2RlLCBEaW1lbnNpb24uQU5OT1RBVElPTlNf
UFJPUEVSVFksIG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpLCBVdGlsLkVNUFRZX1NUUklORywgIiAi
KTsgLy8kTk9OLU5MUy0xJAorCQlyZXdyaXRlTm9kZUxpc3Qobm9kZSwgRGltZW5zaW9uLkFOTk9U
QVRJT05TX1BST1BFUlRZLCBub2RlLmdldFN0YXJ0UG9zaXRpb24oKSwgU3RyaW5nLnZhbHVlT2Yo
JyAnKSwgU3RyaW5nLnZhbHVlT2YoJyAnKSwgU3RyaW5nLnZhbHVlT2YoJyAnKSk7CiAJCXJldHVy
biBmYWxzZTsKIAl9CiAKQEAgLTIwNTgsMTAgKzIwNTgsMTMgQEAKIAkJQXJyYXlUeXBlIGFycmF5
VHlwZT0gKEFycmF5VHlwZSkgZ2V0T3JpZ2luYWxWYWx1ZShub2RlLCBBcnJheUNyZWF0aW9uLlRZ
UEVfUFJPUEVSVFkpOwogCQlBcnJheVR5cGUgcmVwbGFjaW5nVHlwZT0gYXJyYXlUeXBlOwogCQlp
bnQgbk9sZEJyYWNrZXRzPSBnZXREaW1lbnNpb25zKGFycmF5VHlwZSk7IC8vIG51bWJlciBvZiB0
b3RhbCBicmFja2V0cworCQlib29sZWFuIGFzdExldmVsR1RFOCA9IG5vZGUuZ2V0QVNUKCkuYXBp
TGV2ZWwoKSA+PSBBU1QuSkxTODsKKwkJYm9vbGVhbiB0eXBlUmVwbGFjZWQgPSBmYWxzZTsKIAog
CQlUZXh0RWRpdEdyb3VwIGVkaXRHcm91cD0gbnVsbDsKIAkJUmV3cml0ZUV2ZW50IHR5cGVFdmVu
dD0gZ2V0RXZlbnQobm9kZSwgQXJyYXlDcmVhdGlvbi5UWVBFX1BST1BFUlRZKTsKIAkJaWYgKHR5
cGVFdmVudCAhPSBudWxsICYmIHR5cGVFdmVudC5nZXRDaGFuZ2VLaW5kKCkgPT0gUmV3cml0ZUV2
ZW50LlJFUExBQ0VEKSB7IC8vIGNoYW5nZWQgYXJyYXl0eXBlIGNhbiBoYXZlIGRpZmZlcmVudCBk
aW1lbnNpb24gb3IgdHlwZSBuYW1lCisJCQl0eXBlUmVwbGFjZWQgPSB0cnVlOwogCQkJcmVwbGFj
aW5nVHlwZT0gKEFycmF5VHlwZSkgdHlwZUV2ZW50LmdldE5ld1ZhbHVlKCk7CiAJCQllZGl0R3Jv
dXA9IGdldEVkaXRHcm91cCh0eXBlRXZlbnQpOwogCQkJVHlwZSBuZXdUeXBlPSByZXBsYWNpbmdU
eXBlLmdldEVsZW1lbnRUeXBlKCk7CkBAIC0yMDgwLDE1ICsyMDgzLDE2IEBACiAJCQlSZXdyaXRl
RXZlbnQgZGltRXZlbnQ9IGdldEV2ZW50KG5vZGUsIEFycmF5Q3JlYXRpb24uRElNRU5TSU9OU19Q
Uk9QRVJUWSk7CiAJCQlib29sZWFuIGhhc0RpbWVuc2lvbkNoYW5nZXM9IChkaW1FdmVudCAhPSBu
dWxsICYmIGRpbUV2ZW50LmdldENoYW5nZUtpbmQoKSAhPSBSZXdyaXRlRXZlbnQuVU5DSEFOR0VE
KTsKIAkJCVJld3JpdGVFdmVudFtdIGV2ZW50cz0gaGFzRGltZW5zaW9uQ2hhbmdlcyA/IGRpbUV2
ZW50LmdldENoaWxkcmVuKCkgOiBudWxsOwotCQkJYm9vbGVhbiBhc3RMZXZlbEdURTggPSBub2Rl
LmdldEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzg7CiAJCQlBcnJheVR5cGUgY3VycmVudExl
dmVsID0gYXN0TGV2ZWxHVEU4ID8gbnVsbCA6IChBcnJheVR5cGUpIHJlcGxhY2luZ1R5cGUuZ2V0
RWxlbWVudFR5cGUoKS5nZXRQYXJlbnQoKTsKIAkJCWludCByZXBsYWNpbmdUeXBlRGltZW5zaW9u
cyA9IHJlcGxhY2luZ1R5cGUuZ2V0RGltZW5zaW9ucygpOwogCQkJaW50IGk9MCwgZGltU2l6ZT0g
KGV2ZW50cyA9PSBudWxsKSA/IDAgOiBldmVudHMubGVuZ3RoOwogCQkJVHlwZSBlbGVtZW50VHlw
ZT0gYXJyYXlUeXBlLmdldEVsZW1lbnRUeXBlKCk7CiAJCQlpbnQgb2Zmc2V0PSBlbGVtZW50VHlw
ZS5nZXRTdGFydFBvc2l0aW9uKCkgKyBlbGVtZW50VHlwZS5nZXRMZW5ndGgoKTsKKwkJCWVkaXRH
cm91cCA9IG51bGw7CiAJCQl3aGlsZShjdXJyZW50TGV2ZWwgIT0gbnVsbCB8fCBhc3RMZXZlbEdU
RTgpIHsKIAkJCQlpZiAoaSA8IGRpbVNpemUpIHsKLQkJCQkJaWYgKGFzdExldmVsR1RFOCkgcmV3
cml0ZUFubm90YXRpb25zT25EaW1lbnNpb24ocmVwbGFjaW5nVHlwZSwgaSwgb2Zmc2V0KTsKKwkJ
CQkJaWYgKGFzdExldmVsR1RFOCkKKwkJCQkJCXJld3JpdGVBbm5vdGF0aW9uc09uRGltZW5zaW9u
KGFycmF5VHlwZSwgcmVwbGFjaW5nVHlwZSwgaSwgb2Zmc2V0LCB0eXBlUmVwbGFjZWQsIGVkaXRH
cm91cCk7CiAJCQkJCSBvZmZzZXQ9IGdldFNjYW5uZXIoKS5nZXRUb2tlbkVuZE9mZnNldChUZXJt
aW5hbFRva2Vucy5Ub2tlbk5hbWVMQlJBQ0tFVCwgb2Zmc2V0KTsKIAkJCQkJaWYgKGhhc0RpbWVu
c2lvbkNoYW5nZXMpIHsKIAkJCQkJCVJld3JpdGVFdmVudCBldmVudD0gZXZlbnRzW2ldOwpAQCAt
MjEyMyw3ICsyMTI3LDggQEAKIAkJCQkJCW9mZnNldD0gcmV0cmlldmVSaWdodEJyYWNrZXRFbmRQ
b3NpdGlvbihvZmZzZXQsIDEsIHRydWUpOwogCQkJCQl9CiAJCQkJfSBlbHNlIGlmIChpIDwgbk9s
ZEJyYWNrZXRzKSB7Ci0JCQkJCWlmIChhc3RMZXZlbEdURTgpIHJld3JpdGVBbm5vdGF0aW9uc09u
RGltZW5zaW9uKHJlcGxhY2luZ1R5cGUsIGksIG9mZnNldCk7CisJCQkJCWlmIChhc3RMZXZlbEdU
RTgpCisJCQkJCQlyZXdyaXRlQW5ub3RhdGlvbnNPbkRpbWVuc2lvbihhcnJheVR5cGUsIHJlcGxh
Y2luZ1R5cGUsIGksIG9mZnNldCwgdHlwZVJlcGxhY2VkLCBlZGl0R3JvdXApOwogCQkJCQlvZmZz
ZXQ9IHJldHJpZXZlUmlnaHRCcmFja2V0RW5kUG9zaXRpb24ob2Zmc2V0LCAxLCBmYWxzZSk7CiAJ
CQkJfSBlbHNlIHsKIAkJCQkJaW5zZXJ0QW5ub3RhdGlvbnNPbkRpbWVuc2lvbihyZXBsYWNpbmdU
eXBlLCBpLCBvZmZzZXQsIGVkaXRHcm91cCwgYXN0TGV2ZWxHVEU4KTsKQEAgLTIxNjIsMTggKzIx
NjcsMzYgQEAKIAkJCUxpc3QgYW5ub3RhdGlvbnMgPSBkaW0uYW5ub3RhdGlvbnMoKTsKIAkJCWlm
IChhbm5vdGF0aW9ucyAhPSBudWxsKSB7CiAJCQkJaW50IHNpemUgPSBhbm5vdGF0aW9ucy5zaXpl
KCk7Ci0JCQkJZm9yIChpbnQgaiA9IDA7IGogPCBzaXplOyBqKyspIHsKLQkJCQkJQW5ub3RhdGlv
biBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldChqKTsKLQkJCQkJZG9U
ZXh0SW5zZXJ0KHBvcywgYW5ub3RhdGlvbi50b1N0cmluZygpICsgIiAiLCBlZGl0R3JvdXApOyAv
LyROT04tTkxTLTEkCisJCQkJaWYgKHNpemUgPiAwKSB7CisJCQkJCWRvVGV4dEluc2VydChwb3Ms
ICIgIiwgZWRpdEdyb3VwKTsgLy8kTk9OLU5MUy0xJAorCQkJCQlmb3IgKGludCBqID0gMDsgaiA8
IHNpemU7IGorKykgeworCQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24p
IGFubm90YXRpb25zLmdldChqKTsKKwkJCQkJCWRvVGV4dEluc2VydChwb3MsIGFubm90YXRpb24u
dG9TdHJpbmcoKSArICIgIiwgZWRpdEdyb3VwKTsgLy8kTk9OLU5MUy0xJAorCQkJCQl9CiAJCQkJ
fQotCQkJCQogCQkJfQogCQl9CiAJfQogCi0JcHJpdmF0ZSB2b2lkIHJld3JpdGVBbm5vdGF0aW9u
c09uRGltZW5zaW9uKEFycmF5VHlwZSByZXBsYWNpbmdUeXBlLCBpbnQgaW5kZXgsIGludCBwb3Mp
IHsKLQkJRGltZW5zaW9uIGRpbSA9IChEaW1lbnNpb24pIHJlcGxhY2luZ1R5cGUuZGltZW5zaW9u
cygpLmdldChpbmRleCk7Ci0JCXJld3JpdGVUeXBlQW5ub3RhdGlvbnMoZGltLCBEaW1lbnNpb24u
QU5OT1RBVElPTlNfUFJPUEVSVFksIHBvcyk7CisJcHJpdmF0ZSB2b2lkIHJld3JpdGVBbm5vdGF0
aW9uc09uRGltZW5zaW9uKEFycmF5VHlwZSBvbGRBcnJheVR5cGUsIEFycmF5VHlwZSByZXBsYWNp
bmdUeXBlLCBpbnQgaW5kZXgsIGludCBwb3MsIGJvb2xlYW4gdHlwZVJlcGxhY2VkLCBUZXh0RWRp
dEdyb3VwIGVkaXRHcm91cCkgdGhyb3dzIENvcmVFeGNlcHRpb24geworCQlpZiAodHlwZVJlcGxh
Y2VkKSB7CisJCQlMaXN0IGRpbWVuc2lvbnMgPSBvbGRBcnJheVR5cGUuZGltZW5zaW9ucygpOwor
CQkJRGltZW5zaW9uIG9sZERpbSA9IGluZGV4IDwgZGltZW5zaW9ucy5zaXplKCkgPyAoRGltZW5z
aW9uKSBkaW1lbnNpb25zLmdldChpbmRleCkgOiBudWxsOworCQkJaWYgKG9sZERpbSAhPSBudWxs
KSB7CisJCQkJTGlzdCBhbm5vdGF0aW9ucyA9IG9sZERpbS5hbm5vdGF0aW9ucygpOworCQkJCWlu
dCBzaXplID0gYW5ub3RhdGlvbnMuc2l6ZSgpOworCQkJCWlmIChzaXplID4gMCkgeworCQkJCQlB
bm5vdGF0aW9uIGFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgYW5ub3RhdGlvbnMuZ2V0KHNpemUg
LSAxKTsKKwkJCQkJaW50IGVuZCA9IGFubm90YXRpb24uZ2V0U3RhcnRQb3NpdGlvbigpICsgYW5u
b3RhdGlvbi5nZXRMZW5ndGgoKTsKKwkJCQkJZW5kID0gZ2V0U2Nhbm5lcigpLmdldFRva2VuRW5k
T2Zmc2V0KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VULCBlbmQpIC0gMTsKKwkJCQkJ
ZG9UZXh0UmVtb3ZlKHBvcywgZW5kIC0gb2xkRGltLmdldFN0YXJ0UG9zaXRpb24oKSArIDEsIGVk
aXRHcm91cCk7CisJCQkJfQorCQkJfQorCQkJaW5zZXJ0QW5ub3RhdGlvbnNPbkRpbWVuc2lvbihy
ZXBsYWNpbmdUeXBlLCBpbmRleCwgcG9zLCBlZGl0R3JvdXAsIHRydWUpOworCQl9IGVsc2Ugewor
CQkJRGltZW5zaW9uIGRpbSA9IChEaW1lbnNpb24pIHJlcGxhY2luZ1R5cGUuZGltZW5zaW9ucygp
LmdldChpbmRleCk7CisJCQlyZXdyaXRlTm9kZUxpc3QoZGltLCBEaW1lbnNpb24uQU5OT1RBVElP
TlNfUFJPUEVSVFksIHBvcywgU3RyaW5nLnZhbHVlT2YoJyAnKSwgU3RyaW5nLnZhbHVlT2YoJyAn
KSwgU3RyaW5nLnZhbHVlT2YoJyAnKSk7CisJCX0KIAl9CiAKIAkvKioKQEAgLTIyNTQsNyArMjI3
Nyw3IEBACiAJCQlyZXdyaXRlUmVxdWlyZWROb2RlKG5vZGUsIElOVEVSTkFMX0FSUkFZX0NPTVBP
TkVOVF9UWVBFX1BST1BFUlRZKTsKIAkJfSBlbHNlIHsKIAkJCWludCBwb3MgPSByZXdyaXRlUmVx
dWlyZWROb2RlKG5vZGUsIEFycmF5VHlwZS5FTEVNRU5UX1RZUEVfUFJPUEVSVFkpOwotCQkJcmV3
cml0ZU5vZGVMaXN0KG5vZGUsIEFycmF5VHlwZS5ESU1FTlNJT05TX1BST1BFUlRZLCBwb3MsIFV0
aWwuRU1QVFlfU1RSSU5HLCAiICIpOyAvLyROT04tTkxTLTEkCisJCQlyZXdyaXRlTm9kZUxpc3Qo
bm9kZSwgQXJyYXlUeXBlLkRJTUVOU0lPTlNfUFJPUEVSVFksIHBvcywgVXRpbC5FTVBUWV9TVFJJ
TkcsICIiKTsgLy8kTk9OLU5MUy0xJAogCQl9CiAJCXJldHVybiBmYWxzZTsKIAl9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJl
d3JpdGVGbGF0dGVuZXIuamF2YQppbmRleCA3NGYwYjIzLi4wOWZkYTMzIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9t
L3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdy
aXRlRmxhdHRlbmVyLmphdmEKQEAgLTMwNSw3ICszMDUsNyBAQAogCQkJdGhpcy5yZXN1bHQuYXBw
ZW5kKCJbXSIpOyAvLyROT04tTkxTLTEkCiAJCX0gZWxzZSB7CiAJCQlnZXRDaGlsZE5vZGUobm9k
ZSwgQXJyYXlUeXBlLkVMRU1FTlRfVFlQRV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwotCQkJdmlz
aXRMaXN0KG5vZGUsIEFycmF5VHlwZS5ESU1FTlNJT05TX1BST1BFUlRZLCBTdHJpbmcudmFsdWVP
ZignICcpLCBVdGlsLkVNUFRZX1NUUklORywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7CisJCQl2aXNp
dExpc3Qobm9kZSwgQXJyYXlUeXBlLkRJTUVOU0lPTlNfUFJPUEVSVFksIFV0aWwuRU1QVFlfU1RS
SU5HLCBVdGlsLkVNUFRZX1NUUklORywgVXRpbC5FTVBUWV9TVFJJTkcpOwogCQl9CiAJCXJldHVy
biBmYWxzZTsKIAl9
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237568</attachid>
            <date>2013-11-19 23:35:00 -0500</date>
            <delta_ts>2013-11-19 23:35:51 -0500</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>417923fix.patch</filename>
            <type>text/plain</type>
            <size>59015</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDFiNTM1NTUuLmJlYjEzZTUgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMTY1NywxNCArMTY1NywxNCBAQAogCQlFeHBy
ZXNzaW9uIGV4cHJlc3Npb24gPSBmcmFnbWVudC5nZXRJbml0aWFsaXplcigpOwogCQlhc3NlcnRU
cnVlKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBMYW1iZGFFeHByZXNzaW9uKTsKIAkJTGFtYmRhRXhw
cmVzc2lvbiBsYW1iZGFFeHByZXNzaW9uID0gKExhbWJkYUV4cHJlc3Npb24pZXhwcmVzc2lvbjsK
LQkJYXNzZXJ0RXF1YWxzKCIoaW50IFtdIGlhKSAtPiB7XG4gIHJldHVybiBpYS5jbG9uZSgpO1xu
fVxuIiwgbGFtYmRhRXhwcmVzc2lvbi50b1N0cmluZygpKTsKKwkJYXNzZXJ0RXF1YWxzKCIoaW50
W10gaWEpIC0+IHtcbiAgcmV0dXJuIGlhLmNsb25lKCk7XG59XG4iLCBsYW1iZGFFeHByZXNzaW9u
LnRvU3RyaW5nKCkpOwogCQlJTWV0aG9kQmluZGluZyBiaW5kaW5nID0gbGFtYmRhRXhwcmVzc2lv
bi5yZXNvbHZlTWV0aG9kQmluZGluZygpOwogCQlhc3NlcnRFcXVhbHMoInByaXZhdGUgc3RhdGlj
IGphdmEubGFuZy5PYmplY3QgbGFtYmRhJDAoaW50W10pICIsIGJpbmRpbmcudG9TdHJpbmcoKSk7
CiAJCWFzc2VydFRydWUobGFtYmRhRXhwcmVzc2lvbi5wYXJhbWV0ZXJzKCkuc2l6ZSgpID09IDEp
OwogCQlWYXJpYWJsZURlY2xhcmF0aW9uIHZhcmlhYmxlRGVjbGFyYXRpb24gPSAoVmFyaWFibGVE
ZWNsYXJhdGlvbikgbGFtYmRhRXhwcmVzc2lvbi5wYXJhbWV0ZXJzKCkuZ2V0KDApOwogCQlhc3Nl
cnRUcnVlKHZhcmlhYmxlRGVjbGFyYXRpb24gaW5zdGFuY2VvZiBTaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uKTsKIAkJU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbiBzaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uID0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pdmFyaWFibGVEZWNsYXJhdGlvbjsK
LQkJYXNzZXJ0RXF1YWxzKCJpbnQgW10gaWEiLCBzaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLnRv
U3RyaW5nKCkpOwkJCisJCWFzc2VydEVxdWFscygiaW50W10gaWEiLCBzaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uLnRvU3RyaW5nKCkpOwogCX0KIAogCS8qKgpAQCAtMzM0Miw3ICszMzQyLDcgQEAK
IAkJYXNzZXJ0RXF1YWxzKCJJbmNvcnJlY3Qgbm8gb2YgZnJhZ21lbnRzIiwgMSwgZnJhZ21lbnRz
LnNpemUoKSk7CiAJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9IChWYXJp
YWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CiAJCWFzc2VydEVxdWFs
cygiVW5leHBlY3RlZCB0eXBlIiwgZnJhZ21lbnQucmVzb2x2ZUJpbmRpbmcoKS5nZXRUeXBlKCku
dG9TdHJpbmcoKSwgIlN0cmluZyBATWFya2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJFeHRlbmRlZFwi
fSBbXSBATWFya2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJpMFwifSBATWFya2VyMiBbXSBbXSBATWFy
a2VyeyB2YWx1ZSA9IChTdHJpbmcpXCJpMVwifSBbXSIpOwotCQlhc3NlcnRFcXVhbHMoIlVuZXhw
ZWN0ZWQgdHlwZSIsIGZpZWxkLmdldFR5cGUoKS50b1N0cmluZygpLCAiU3RyaW5nIEBNYXJrZXIo
XCJpMFwiKSBATWFya2VyMiBbXSBbXSBATWFya2VyKFwiaTFcIikgW10iKTsKKwkJYXNzZXJ0RXF1
YWxzKCJVbmV4cGVjdGVkIHR5cGUiLCAiU3RyaW5nIEBNYXJrZXIoXCJpMFwiKSBATWFya2VyMiBb
XVtdIEBNYXJrZXIoXCJpMVwiKSBbXSIsIGZpZWxkLmdldFR5cGUoKS50b1N0cmluZygpKTsKIAl9
CiAJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQxNzY2
OQogCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTc2NjkoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9u
IHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9kb20vVHlwZUFubm90YXRpb25zQ29udmVydGVyVGVzdC5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnNDb252ZXJ0ZXJUZXN0LmphdmEKaW5kZXgg
YzdlZmViMC4uYzVkNGM3NSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMu
bW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnND
b252ZXJ0ZXJUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2RvbS9UeXBlQW5ub3RhdGlvbnNDb252ZXJ0
ZXJUZXN0LmphdmEKQEAgLTE2Miw3ICsxNjIsNyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAK
IAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsgCi0JCQkJIiAgT2JqZWN0IG89KEBNYXJr
ZXIgWDxATWFya2VyIFN0cmluZz4uQE1hcmtlciBZPEBNYXJrZXIgSW50ZWdlcj4uQE1hcmtlciBa
PEBNYXJrZXIgT2JqZWN0PiBATWFya2VyIFtdIFtdIEBNYXJrZXIgW10gW10pbnVsbDtcbiIgKyAK
KwkJCQkiICBPYmplY3Qgbz0oQE1hcmtlciBYPEBNYXJrZXIgU3RyaW5nPi5ATWFya2VyIFk8QE1h
cmtlciBJbnRlZ2VyPi5ATWFya2VyIFo8QE1hcmtlciBPYmplY3Q+IEBNYXJrZXIgW11bXSBATWFy
a2VyIFtdW10pbnVsbDtcbiIgKyAKIAkJCQkiICBAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
KGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKSBAaW50ZXJmYWNlIE1h
cmtlciB7fVxuIiArIAogCQkJCSJ9XG4iOwogCQlhc3NlcnRBU1ROb2RlRXF1YWxzKGV4cGVjdGVk
T3V0cHV0LCBub2RlKTsKQEAgLTE5MSw3ICsxOTEsNyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIg
KyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsgCi0JCQkJIiAgT2JqZWN0IG89KEBN
YXJrZXIgWDxATWFya2VyIFN0cmluZz4uQE1hcmtlciBZPEBNYXJrZXIgSW50ZWdlcj4uQE1hcmtl
ciBaPEBNYXJrZXIgT2JqZWN0PiBbXSBATWFya2VyIFtdIFtdIEBNYXJrZXIgW10pbnVsbDtcbiIg
KyAKKwkJCQkiICBPYmplY3Qgbz0oQE1hcmtlciBYPEBNYXJrZXIgU3RyaW5nPi5ATWFya2VyIFk8
QE1hcmtlciBJbnRlZ2VyPi5ATWFya2VyIFo8QE1hcmtlciBPYmplY3Q+W10gQE1hcmtlciBbXVtd
IEBNYXJrZXIgW10pbnVsbDtcbiIgKyAKIAkJCQkiICBAamF2YS5sYW5nLmFubm90YXRpb24uVGFy
Z2V0KGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLlRZUEVfVVNFKSBAaW50ZXJmYWNl
IE1hcmtlciB7fVxuIiArIAogCQkJCSJ9XG4iOwogCQlhc3NlcnRBU1ROb2RlRXF1YWxzKGV4cGVj
dGVkT3V0cHV0LCBub2RlKTsKQEAgLTIwNCw3ICsyMDQsNyBAQAogCQkJIiAgICAgICAgY2xhc3Mg
WjxRPiB7XG4iICsKIAkJICAgICIgICAgICAgIH1cbiIgKwogCQkJIiAgICB9XG4iICsKLQkJCSIg
ICAgaW50IFtdIFtdIFtdIFtdIG8gPSAoQE9uZSBpbnQgW10gQFR3byBbXSBbXSBAVGhyZWUgW10p
IG51bGw7XG4iICsKKwkJCSIgICAgaW50W11bXVtdW10gbyA9IChAT25lIGludFtdIEBUd28gW11b
XSBAVGhyZWUgW10pIG51bGw7XG4iICsKIAkJCQogCQkJIiAgICBAamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSlcbiIg
KwogCQkJIiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKQEAgLTIyMCw3ICsyMjAsNyBAQAog
CQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJCQkiICB9XG4iICsg
Ci0JCQkJIiAgaW50IFtdIFtdIFtdIFtdIG89KEBPbmUgaW50IFtdIEBUd28gW10gW10gQFRocmVl
IFtdKW51bGw7XG4iICsgCisJCQkJIiAgaW50W11bXVtdW10gbz0oQE9uZSBpbnRbXSBAVHdvIFtd
W10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGphdmEubGFuZy5hbm5vdGF0aW9uLlRh
cmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5UWVBFX1VTRSkgQGludGVyZmFj
ZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNzZXJ0QVNUTm9kZUVxdWFscyhleHBl
Y3RlZE91dHB1dCwgbm9kZSk7CkBAIC0yMzMsNyArMjMzLDcgQEAKIAkJCSIgICAgICAgIGNsYXNz
IFo8UT4ge1xuIiArCiAJCSAgICAiICAgICAgICB9XG4iICsKIAkJCSIgICAgfVxuIiArCi0JCQki
ICAgIFN0cmluZyBbXSBbXSBbXSBbXSBvID0gKEBPbmUgU3RyaW5nIFtdIEBUd28gW10gW10gQFRo
cmVlIFtdKSBudWxsO1xuIiArCisJCQkiICAgIFN0cmluZyBbXVtdW11bXSBvID0gKEBPbmUgU3Ry
aW5nW11AVHdvIFtdW11AVGhyZWUgW10pIG51bGw7XG4iICsKIAkJCQogCQkJIiAgICBAamF2YS5s
YW5nLmFubm90YXRpb24uVGFyZ2V0IChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS5U
WVBFX1VTRSlcbiIgKwogCQkJIiAgICBAaW50ZXJmYWNlIE1hcmtlciB7XG4iICsKQEAgLTI0OSw3
ICsyNDksNyBAQAogCQkJCSJjbGFzcyBaPFE+IHtcbiIgKyAKIAkJCQkiICAgIH1cbiIgKyAKIAkJ
CQkiICB9XG4iICsgCi0JCQkJIiAgU3RyaW5nIFtdIFtdIFtdIFtdIG89KEBPbmUgU3RyaW5nIFtd
IEBUd28gW10gW10gQFRocmVlIFtdKW51bGw7XG4iICsgCisJCQkJIiAgU3RyaW5nW11bXVtdW10g
bz0oQE9uZSBTdHJpbmdbXSBAVHdvIFtdW10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAg
QGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50
VHlwZS5UWVBFX1VTRSkgQGludGVyZmFjZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJ
YXNzZXJ0QVNUTm9kZUVxdWFscyhleHBlY3RlZE91dHB1dCwgbm9kZSk7CkBAIC0yNjIsNyArMjYy
LDcgQEAKIAkJCSIgICAgICAgIGNsYXNzIFo8UT4ge1xuIiArCiAJCSAgICAiICAgICAgICB9XG4i
ICsKIAkJCSIgICAgfVxuIiArCi0JCQkiICAgIE9iamVjdCBvID0gKEBPbmUgWDxTdHJpbmc+IFtd
IEBUd28gW10gW10gQFRocmVlIFtdKSBudWxsO1xuIiArCisJCQkiICAgIE9iamVjdCBvID0gKEBP
bmUgWDxTdHJpbmc+IFtdIEBUd28gW11bXUBUaHJlZSBbXSkgbnVsbDtcbiIgKwogCQkJCiAJCQki
ICAgIEBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQgKGphdmEubGFuZy5hbm5vdGF0aW9uLkVs
ZW1lbnRUeXBlLlRZUEVfVVNFKVxuIiArCiAJCQkiICAgIEBpbnRlcmZhY2UgTWFya2VyIHtcbiIg
KwpAQCAtMjc4LDcgKzI3OCw3IEBACiAJCQkJImNsYXNzIFo8UT4ge1xuIiArIAogCQkJCSIgICAg
fVxuIiArIAogCQkJCSIgIH1cbiIgKyAKLQkJCQkiICBPYmplY3Qgbz0oQE9uZSBYPFN0cmluZz4g
W10gQFR3byBbXSBbXSBAVGhyZWUgW10pbnVsbDtcbiIgKyAKKwkJCQkiICBPYmplY3Qgbz0oQE9u
ZSBYPFN0cmluZz5bXSBAVHdvIFtdW10gQFRocmVlIFtdKW51bGw7XG4iICsgCiAJCQkJIiAgQGph
dmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldChqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlw
ZS5UWVBFX1VTRSkgQGludGVyZmFjZSBNYXJrZXIge31cbiIgKyAKIAkJCQkifVxuIjsKIAkJYXNz
ZXJ0QVNUTm9kZUVxdWFscyhleHBlY3RlZE91dHB1dCwgbm9kZSk7CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEK
aW5kZXggYzkyMzEzYS4uYTNmNGEwMCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUu
dGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3Jp
YmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRl
L2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9kRGVjbFRlc3QuamF2YQpAQCAtMzI0OCw5ICsz
MjQ4LDkgQEAKIAkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOwogCQlidWYuYXBwZW5k
KCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKIAkJYnVmLmFw
cGVuZCgicHVibGljIGFic3RyYWN0IGNsYXNzIEUge1xuIik7Ci0JCWJ1Zi5hcHBlbmQoIiAgICBw
dWJsaWMgT2JqZWN0IGZvbzEoKVtdIEBBbm5vdDEgW10gQEFubm90MiBbXSB7IHJldHVybiBudWxs
OyB9XG4iKTsKLQkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMigpW10gQEFubm90
MSBbXSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKLQkJ
YnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90MSBA
QW5ub3QyIFtdIEBBbm5vdDIgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICBwdWJsaWMgT2JqZWN0IGZvbzEoKVtdQEFubm90MSBbXUBBbm5vdDIgW10geyByZXR1cm4g
bnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzIoKVtdQEFu
bm90MSBbXSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90
MSBAQW5ub3QyIFtdQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9XG4iKTsKIAkJYnVmLmFwcGVu
ZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vNCgpQEFubm90MiBAQW5ub3QxIFtdIEBBbm5vdDIgQEFu
bm90MSBbXSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1c
biIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb281KCkgIFtdICAgQEFubm90
MiBAQW5ub3QxIFtdIHsgcmV0dXJuIG51bGw7IH1cbiIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVi
bGljIE9iamVjdCBmb282KGludCBpKSAgIFtdICBbXSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhj
ZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1cbiIpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUv
ZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3Jp
dGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdTdGF0ZW1lbnRzVGVzdC5qYXZhCmluZGV4IGZlMTMx
NTAuLjhiODI5NTQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nU3RhdGVtZW50c1Rlc3QuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0
cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5n
L0FTVFJld3JpdGluZ1N0YXRlbWVudHNUZXN0LmphdmEKQEAgLTYwMzksNyArNjAzOSw3IEBACiAJ
CWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIp
OwogCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAg
IHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOwotCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtd
IEBBbm5vdDEgQEFubm90MiBbXSBAQW5ub3QxIEBBbm5vdDMgW10gPSBuZXcgaW50IEBBbm5vdDEg
QEFubm90MiAgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZSgpXSBAQW5ub3QyIEBBbm5vdDEgW11b
XUBBbm5vdDMgQEFubm90MiBAQW5ub3QxIFtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50
IFtdIGkgW11AQW5ub3QxIEBBbm5vdDIgW10gQEFubm90MSBAQW5ub3QzIFtdID0gbmV3IGludCBA
QW5ub3QxIEBBbm5vdDIgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZSgpXSBAQW5ub3QyIEBBbm5v
dDEgW11bXSBAQW5ub3QzIEBBbm5vdDIgQEFubm90MSBbXTtcbiIpOwogCQlidWYuYXBwZW5kKCIg
ICAgCWludCBbXSBqIFtdW10gPSBuZXcgaW50IEBBbm5vdDIgWzJdIEBBbm5vdDIgW10gQEFubm90
MSBbXSwgayBbXVtdID0gbmV3IGludCBbMl0gWzEwXSBbc2l6ZSgpXTtcbiIpOwogCQlidWYuYXBw
ZW5kKCIgICAgfVxuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgaW50IHNpemUoKSB7IHJl
dHVybiAyOyB9XG4iKTsKQEAgLTYwNTksNyArNjA1OSw3IEBACiAJCWJ1Zi5hcHBlbmQoImltcG9y
dCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOwogCQlidWYuYXBwZW5kKCJw
dWJsaWMgY2xhc3MgRSB7XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygp
IHtcbiIpOwotCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdW10gPSBuZXcgaW50IEBBbm5v
dDEgQEFubm90MiAgWzJdIEBBbm5vdDIgQEFubm90MyBbc2l6ZShuZXcgaW50W11bXXt9KV0gW107
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0gbmV3IGludCBAQW5ub3Qx
IEBBbm5vdDIgIFsyXUBBbm5vdDIgQEFubm90M1tzaXplKG5ldyBpbnRbXVtde30pXSBbXTtcbiIp
OwogCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBqIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFu
bm90MiBbMl0gQEFubm90MiBAQW5ub3QzIFtzaXplKG5ldyBpbnRbXXt9KV0gQEFubm90MSBAQW5u
b3QzIFtdLCBrIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90MiBbMl0gQEFubm90MiBAQW5u
b3QzIFsxMF0gQEFubm90MSBAQW5ub3QzIFtzaXplKG5ldyBpbnRbXVtde30pXTtcbiIpOwogCQli
dWYuYXBwZW5kKCIgICAgfVxuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgaW50IHNpemUo
T2JqZWN0IG9iaikgeyByZXR1cm4gMjsgfVxuIik7CkBAIC02MDk0LDcgKzYwOTQsNiBAQAogCQkJ
TGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBEaW1l
bnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOwogCQkJbGlzdFJld3JpdGUucmVtb3ZlKChBU1RO
b2RlKWRpbS5hbm5vdGF0aW9ucygpLmdldCgwKSwgbnVsbCk7CiAJCQlsaXN0UmV3cml0ZS5yZW1v
dmUoKEFTVE5vZGUpZGltLmFubm90YXRpb25zKCkuZ2V0KDEpLCBudWxsKTsKLQkJCXJld3JpdGUu
c2V0KGNyZWF0aW9uLCBBcnJheUNyZWF0aW9uLlRZUEVfUFJPUEVSVFksIGFycmF5VHlwZSwgbnVs
bCk7CiAJCX0KIAkJewogCQkJc3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1l
bnQpIHN0YXRlbWVudHMuZ2V0KDEpOwpAQCAtNjEyMCw3ICs2MTE5LDcgQEAKIAkJYnVmLmFwcGVu
ZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CiAJCWJ1Zi5h
cHBlbmQoInB1YmxpYyBjbGFzcyBFIHtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZv
aWQgZm9vKCkge1xuIik7Ci0JCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGkgW11bXSA9IG5ldyBp
bnQgQEFubm90MSBAQW5ub3QyICBbMl0gIFtzaXplKG5ldyBpbnRbXVtde30pXSBbXTtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdW10gPSBuZXcgaW50IEBBbm5vdDEgQEFubm90
MiAgWzJdW3NpemUobmV3IGludFtdW117fSldIFtdO1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50IFtdIGogW11bXSA9IG5ldyBpbnQgQEFubm90MSBAQW5ub3QyIFsyXSBAQW5ub3QyIEBBbm5v
dDMgW3NpemUobmV3IGludFtde30pXSwgayBbXVtdID0gbmV3IGludCBAQW5ub3QxIEBBbm5vdDIg
WzJdIEBBbm5vdDIgQEFubm90MyBbMTBdO1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsK
IAkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBpbnQgc2l6ZShPYmplY3Qgb2JqKSB7IHJldHVybiAy
OyB9XG4iKTsKQEAgLTYxNTYsNyArNjE1NSw3MzUgQEAKIAkJYXNzZXJ0VHJ1ZSgiSW5jb3JyZWN0
IEZvcm1hdHRpbmciLCBkb2MuZ2V0KCkuZXF1YWxzKGZvcm1hdHRlZFN0cmluZykpOwogCX0KIAot
fQorCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTc5MjNhX3NpbmNlXzgoKSB0aHJvd3MgRXhjZXB0aW9u
IHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFj
a2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0g
bmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJ
CWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIp
OworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAg
IHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtd
W10gPSBuZXcgaW50IEBBbm5vdDFbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQg
W10gaiBbXVtdID0gbmV3IGludCBAQW5ub3QxIFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgCWludCBbXSBrIFtdW10gPSBuZXcgaW50ICAgQEFubm90MSBbXVtdW107XG4iKTsKKwkJYnVm
LmFwcGVuZCgiICAgIAlpbnQgW10gbCBbXVtdID0gbmV3IGludCAvKiBjb21tZW50IEAgW10gKi9A
QW5ub3QxW11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIG0gW11bXSA9IG5l
dyBpbnQgLyogY29tbWVudCBAIFtdICovIEBBbm5vdDFbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIAlpbnQgW10gbiBbXVtdID0gbmV3IGludCAvKiBjb21tZW50IEAgW10gKi8gQEFubm90
MSAgIFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBvIFtdW10gPSBuZXcg
aW50IEBBbm5vdDEvKiBjb21tZW50IEAgW10gKi9bXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIAlpbnQgW10gcCBbXVtdID0gbmV3IGludCBAQW5ub3QxIC8qIGNvbW1lbnQgQCBbXSAqLyAg
W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIHEgW11bXSA9IG5ldyBpbnQg
QEFubm90MSAgIC8qIGNvbW1lbnQgQCBbXSAqL1tdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5n
LmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJ
CWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBpbGF0aW9uVW5p
dCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJYLmphdmEiLCBidWYudG9TdHJpbmco
KSwgZmFsc2UsIG51bGwpOwogCisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1Qo
Y3UpOworCQlBU1QgYXN0ID0gYXN0Um9vdC5nZXRBU1QoKTsKKwkJQVNUUmV3cml0ZSByZXdyaXRl
PSBBU1RSZXdyaXRlLmNyZWF0ZShhc3QpOwogCisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlRGVjbCA9
IChUeXBlRGVjbGFyYXRpb24pIGFzdFJvb3QudHlwZXMoKS5nZXQoMCk7CisJCU1ldGhvZERlY2xh
cmF0aW9uIG1ldGhvZERlY2w9IHR5cGVEZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJQmxvY2sgYmxv
Y2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRlbWVudHM9IGJsb2NrLnN0YXRl
bWVudHMoKTsKIAorCQlmb3IgKGludCBpID0gMDsgaSA8IDk7ICsraSkgeworCQkJVmFyaWFibGVE
ZWNsYXJhdGlvblN0YXRlbWVudCBzdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRl
bWVudCkgc3RhdGVtZW50cy5nZXQoaSk7CisJCQlMaXN0IGZyYWdtZW50cyA9IHN0YXRlbWVudC5m
cmFnbWVudHMoKTsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9IChW
YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CisJCQlBcnJheUNy
ZWF0aW9uIGNyZWF0aW9uID0gKEFycmF5Q3JlYXRpb24pIGZyYWdtZW50LmdldEluaXRpYWxpemVy
KCk7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gYXN0Lm5ld0FycmF5VHlwZShhc3QubmV3UHJp
bWl0aXZlVHlwZShQcmltaXRpdmVUeXBlLklOVCksIDMpOworCQkJcmV3cml0ZS5zZXQoY3JlYXRp
b24sIEFycmF5Q3JlYXRpb24uVFlQRV9QUk9QRVJUWSwgYXJyYXlUeXBlLCBudWxsKTsKKwkJfQor
CisJCVN0cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCQlidWY9
IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOwor
CQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4i
KTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBb
XVtdID0gbmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBqIFtd
W10gPSBuZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGsgW11b
XSA9IG5ldyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbCBbXVtd
ID0gbmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBtIFtdW10g
PSBuZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIG4gW11bXSA9
IG5ldyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbyBbXVtdID0g
bmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBwIFtdW10gPSBu
ZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIHEgW11bXSA9IG5l
dyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5k
KCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1
ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNl
IEFubm90MSB7fVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmlu
ZygpKTsKKwl9CisJcHVibGljIHZvaWQgdGVzdEJ1ZzQxNzkyM2Jfc2luY2VfOCgpIHRocm93cyBF
eGNlcHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxID0gdGhpcy5zb3VyY2VGb2xkZXIu
Y3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3RyaW5nQnVm
ZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3Qx
O1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50
VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFw
cGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dCBbXSBpIFtdW10gPSBuZXcgaW50W10gQEFubm90MVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIAlpbnQgW10gaiBbXVtdID0gbmV3IGludFtdIEBBbm5vdDEgW11bXTtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgCWludCBbXSBrIFtdW10gPSBuZXcgaW50W10gICBAQW5ub3QxIFtdW107XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbCBbXVtdID0gbmV3IGludFtdIC8qIGNvbW1l
bnQgQCBbXSAqL0BBbm5vdDFbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIG0g
W11bXSA9IG5ldyBpbnRbXSAvKiBjb21tZW50IEAgW10gKi8gQEFubm90MVtdW107XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbiBbXVtdID0gbmV3IGludFtdIC8qIGNvbW1lbnQgQCBb
XSAqLyBAQW5ub3QxICAgW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBvIFtd
W10gPSBuZXcgaW50W10gQEFubm90MS8qIGNvbW1lbnQgQCBbXSAqL1tdW107XG4iKTsKKwkJYnVm
LmFwcGVuZCgiICAgIAlpbnQgW10gcCBbXVtdID0gbmV3IGludFtdIEBBbm5vdDEgLyogY29tbWVu
dCBAIFtdICovICBbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIHEgW11bXSA9
IG5ldyBpbnRbXSBAQW5ub3QxICAgLyogY29tbWVudCBAIFtdICovW11bXTtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJA
amF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9
KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBp
bGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJYLmphdmEiLCBidWYu
dG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBj
cmVhdGVBU1QoY3UpOworCQlBU1QgYXN0ID0gYXN0Um9vdC5nZXRBU1QoKTsKKwkJQVNUUmV3cml0
ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3QpOworCisJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlRGVjbCA9IChUeXBlRGVjbGFyYXRpb24pIGFzdFJvb3QudHlwZXMoKS5nZXQoMCk7CisJCU1l
dGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IHR5cGVEZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJ
QmxvY2sgYmxvY2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRlbWVudHM9IGJs
b2NrLnN0YXRlbWVudHMoKTsKKworCQlmb3IgKGludCBpID0gMDsgaSA8IDk7ICsraSkgeworCQkJ
VmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCBzdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJh
dGlvblN0YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoaSk7CisJCQlMaXN0IGZyYWdtZW50cyA9IHN0
YXRlbWVudC5mcmFnbWVudHMoKTsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFn
bWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CisJ
CQlBcnJheUNyZWF0aW9uIGNyZWF0aW9uID0gKEFycmF5Q3JlYXRpb24pIGZyYWdtZW50LmdldElu
aXRpYWxpemVyKCk7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gYXN0Lm5ld0FycmF5VHlwZShh
c3QubmV3UHJpbWl0aXZlVHlwZShQcmltaXRpdmVUeXBlLklOVCksIDMpOworCQkJcmV3cml0ZS5z
ZXQoY3JlYXRpb24sIEFycmF5Q3JlYXRpb24uVFlQRV9QUk9QRVJUWSwgYXJyYXlUeXBlLCBudWxs
KTsKKwkJfQorCisJCVN0cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUp
OworCQlidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0
MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlp
bnQgW10gaSBbXVtdID0gbmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dCBbXSBqIFtdW10gPSBuZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50
IFtdIGsgW11bXSA9IG5ldyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQg
W10gbCBbXVtdID0gbmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBb
XSBtIFtdW10gPSBuZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtd
IG4gW11bXSA9IG5ldyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10g
byBbXVtdID0gbmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBw
IFtdW10gPSBuZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIHEg
W11bXSA9IG5ldyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQli
dWYuYXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRh
cmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJA
aW50ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1
Zi50b1N0cmluZygpKTsKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0QnVnNDE3OTIzY19zaW5jZV84
KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291
cmNlRm9sZGVyLmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJ
CVN0cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFj
a2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uRWxlbWVudFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7
CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIAlpbnQgW10gaSBbXVtdID0gbmV3IGludCBAQW5ub3QxW11bXVtdO1xuIik7CisJCWJ1
Zi5hcHBlbmQoIiAgICAJaW50IFtdIGogW11bXSA9IG5ldyBpbnQgQEFubm90MSBbXVtdW107XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gayBbXVtdID0gbmV3IGludCAgIEBBbm5vdDEg
IFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBsIFtdW10gPSBuZXcgaW50
IC8qIGNvbW1lbnQgQCBbXSAqL0BBbm5vdDFbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAg
IAlpbnQgW10gbSBbXVtdID0gbmV3IGludCAvKiBjb21tZW50IEAgW10gKi8gQEFubm90MVtdW11b
XTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBuIFtdW10gPSBuZXcgaW50IC8qIGNv
bW1lbnQgQCBbXSAqLyBAQW5ub3QxICAgW11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50IFtdIG8gW11bXSA9IG5ldyBpbnQgQEFubm90MS8qIGNvbW1lbnQgQCBbXSAqL1tdW11bXTtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBwIFtdW10gPSBuZXcgaW50IEBBbm5vdDEg
LyogY29tbWVudCBAIFtdICovICBbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQg
W10gcSBbXVtdID0gbmV3IGludCBAQW5ub3QxICAgLyogY29tbWVudCBAIFtdICovW11bXVtdO1xu
Iik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1
Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlw
ZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIp
OworCQlJQ29tcGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlgu
amF2YSIsIGJ1Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7CisKKwkJQ29tcGlsYXRpb25Vbml0
IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVCBhc3QgPSBhc3RSb290LmdldEFTVCgpOwor
CQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFzdCk7CisKKwkJVHlwZURl
Y2xhcmF0aW9uIHR5cGVEZWNsID0gKFR5cGVEZWNsYXJhdGlvbikgYXN0Um9vdC50eXBlcygpLmdl
dCgwKTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0gdHlwZURlY2wuZ2V0TWV0aG9k
cygpWzBdOworCQlCbG9jayBibG9jaz0gbWV0aG9kRGVjbC5nZXRCb2R5KCk7CisJCUxpc3Qgc3Rh
dGVtZW50cz0gYmxvY2suc3RhdGVtZW50cygpOworCisJCWZvciAoaW50IGkgPSAwOyBpIDwgOTsg
KytpKSB7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50IHN0YXRlbWVudCA9IChWYXJp
YWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChpKTsKKwkJCUxpc3QgZnJh
Z21lbnRzID0gc3RhdGVtZW50LmZyYWdtZW50cygpOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZy
YWdtZW50IGZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgZnJhZ21lbnRz
LmdldCgwKTsKKwkJCUFycmF5Q3JlYXRpb24gY3JlYXRpb24gPSAoQXJyYXlDcmVhdGlvbikgZnJh
Z21lbnQuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJCUFycmF5VHlwZSBhcnJheVR5cGUgPSBjcmVhdGlv
bi5nZXRUeXBlKCk7CisKKwkJCURpbWVuc2lvbiBkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUu
ZGltZW5zaW9ucygpLmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRl
LmdldExpc3RSZXdyaXRlKGRpbSwgRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJ
CWxpc3RSZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSlkaW0uYW5ub3RhdGlvbnMoKS5nZXQoMCksIG51
bGwpOworCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0
ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRl
c3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVt
ZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVm
LmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
CWludCBbXSBpIFtdW10gPSBuZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50IFtdIGogW11bXSA9IG5ldyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlp
bnQgW10gayBbXVtdID0gbmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dCBbXSBsIFtdW10gPSBuZXcgaW50IFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dCBbXSBtIFtdW10gPSBuZXcgaW50IC8qIGNvbW1lbnQgQCBbXSAqL1tdW11bXTtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgCWludCBbXSBuIFtdW10gPSBuZXcgaW50IC8qIGNvbW1lbnQgQCBbXSAq
L1tdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBvIFtdW10gPSBuZXcgaW50
LyogY29tbWVudCBAIFtdICovW11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtd
IHAgW11bXSA9IG5ldyBpbnQvKiBjb21tZW50IEAgW10gKi8gIFtdW11bXTtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgCWludCBbXSBxIFtdW10gPSBuZXcgaW50LyogY29tbWVudCBAIFtdICovW11b
XVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7
CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVt
ZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEg
e31cbiIpOworCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJ
fQorCisJcHVibGljIHZvaWQgdGVzdEJ1ZzQxNzkyM2Rfc2luY2VfOCgpIHRocm93cyBFeGNlcHRp
b24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQ
YWNrYWdlRnJhZ21lbnQoInRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmdCdWZmZXIgYnVm
PSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsK
KwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xu
Iik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGkg
W11bXSA9IG5ldyBpbnRbXSBAQW5ub3QxW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dCBbXSBqIFtdW10gPSBuZXcgaW50W10gQEFubm90MSBbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50IFtdIGsgW11bXSA9IG5ldyBpbnRbXSAgIEBBbm5vdDEgIFtdW107XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbCBbXVtdID0gbmV3IGludFtdIC8qIGNvbW1lbnQgQCBb
XSAqL0BBbm5vdDFbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIG0gW11bXSA9
IG5ldyBpbnRbXSAvKiBjb21tZW50IEAgW10gKi8gQEFubm90MVtdW107XG4iKTsKKwkJYnVmLmFw
cGVuZCgiICAgIAlpbnQgW10gbiBbXVtdID0gbmV3IGludFtdIC8qIGNvbW1lbnQgQCBbXSAqLyBA
QW5ub3QxICAgW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBvIFtdW10gPSBu
ZXcgaW50W10gQEFubm90MS8qIGNvbW1lbnQgQCBbXSAqL1tdW107XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIAlpbnQgW10gcCBbXVtdID0gbmV3IGludFtdIEBBbm5vdDEgLyogY29tbWVudCBAIFtd
ICovICBbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIHEgW11bXSA9IG5ldyBp
bnRbXSBAQW5ub3QxICAgLyogY29tbWVudCBAIFtdICovW11bXTtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5s
YW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7
CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBpbGF0aW9u
VW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJYLmphdmEiLCBidWYudG9TdHJp
bmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVB
U1QoY3UpOworCQlBU1QgYXN0ID0gYXN0Um9vdC5nZXRBU1QoKTsKKwkJQVNUUmV3cml0ZSByZXdy
aXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3QpOworCisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlRGVj
bCA9IChUeXBlRGVjbGFyYXRpb24pIGFzdFJvb3QudHlwZXMoKS5nZXQoMCk7CisJCU1ldGhvZERl
Y2xhcmF0aW9uIG1ldGhvZERlY2w9IHR5cGVEZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJQmxvY2sg
YmxvY2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRlbWVudHM9IGJsb2NrLnN0
YXRlbWVudHMoKTsKKworCQlmb3IgKGludCBpID0gMDsgaSA8IDk7ICsraSkgeworCQkJVmFyaWFi
bGVEZWNsYXJhdGlvblN0YXRlbWVudCBzdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0
YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoaSk7CisJCQlMaXN0IGZyYWdtZW50cyA9IHN0YXRlbWVu
dC5mcmFnbWVudHMoKTsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVudCA9
IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CisJCQlBcnJh
eUNyZWF0aW9uIGNyZWF0aW9uID0gKEFycmF5Q3JlYXRpb24pIGZyYWdtZW50LmdldEluaXRpYWxp
emVyKCk7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gY3JlYXRpb24uZ2V0VHlwZSgpOworCisJ
CQlEaW1lbnNpb24gZGltID0gKERpbWVuc2lvbikgYXJyYXlUeXBlLmRpbWVuc2lvbnMoKS5nZXQo
MSk7CisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShk
aW0sIERpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5yZW1v
dmUoKEFTVE5vZGUpZGltLmFubm90YXRpb25zKCkuZ2V0KDApLCBudWxsKTsKKwkJfQorCisJCVN0
cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUoY3UsIHJld3JpdGUpOworCQlidWY9IG5ldyBT
dHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYu
YXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJs
aWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0g
bmV3IGludFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBqIFtdW10gPSBu
ZXcgaW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGsgW11bXSA9IG5l
dyBpbnRbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbCBbXVtdID0gbmV3
IGludFtdIFtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbSBbXVtdID0gbmV3
IGludFtdIC8qIGNvbW1lbnQgQCBbXSAqL1tdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlp
bnQgW10gbiBbXVtdID0gbmV3IGludFtdIC8qIGNvbW1lbnQgQCBbXSAqL1tdW107XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbyBbXVtdID0gbmV3IGludFtdLyogY29tbWVudCBAIFtd
ICovW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBwIFtdW10gPSBuZXcgaW50
W10vKiBjb21tZW50IEAgW10gKi8gIFtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQg
W10gcSBbXVtdID0gbmV3IGludFtdLyogY29tbWVudCBAIFtdICovW11bXTtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJA
amF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9
KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYXNzZXJ0
RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOworCX0KKworCXB1YmxpYyB2b2lk
IHRlc3RCdWc0MTc5MjNlX3NpbmNlXzgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VG
cmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0
ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZl
cigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImlt
cG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5k
KCJwdWJsaWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZv
bygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBpID0gbmV3IGludFtdW11b
XTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBqID0gbmV3IGludCBbXVtdW107
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtdW10gayA9IG5ldyBpbnQgIFtdW11bXTtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBsID0gbmV3IGludC8qIGNvbW1lbnQg
Ki9bXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtdW10gbSA9IG5ldyBpbnQg
LyogY29tbWVudCBbXSAqLyBbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtd
W10gbiA9IG5ldyBpbnQgIC8qIGNvbW1lbnQgW10gKi8gIFtdW11bXTtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxu
Iik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBpbGF0
aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJYLmphdmEiLCBidWYudG9T
dHJpbmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVh
dGVBU1QoY3UpOworCQlBU1QgYXN0ID0gYXN0Um9vdC5nZXRBU1QoKTsKKwkJQVNUUmV3cml0ZSBy
ZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3QpOworCisJCVR5cGVEZWNsYXJhdGlvbiB0eXBl
RGVjbCA9IChUeXBlRGVjbGFyYXRpb24pIGFzdFJvb3QudHlwZXMoKS5nZXQoMCk7CisJCU1ldGhv
ZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IHR5cGVEZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJQmxv
Y2sgYmxvY2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRlbWVudHM9IGJsb2Nr
LnN0YXRlbWVudHMoKTsKKworCQlmb3IgKGludCBpID0gMDsgaSA8IDY7ICsraSkgeworCQkJVmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCBzdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlv
blN0YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoaSk7CisJCQlMaXN0IGZyYWdtZW50cyA9IHN0YXRl
bWVudC5mcmFnbWVudHMoKTsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCBmcmFnbWVu
dCA9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMCk7CisJCQlB
cnJheUNyZWF0aW9uIGNyZWF0aW9uID0gKEFycmF5Q3JlYXRpb24pIGZyYWdtZW50LmdldEluaXRp
YWxpemVyKCk7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gY3JlYXRpb24uZ2V0VHlwZSgpOwor
CisJCQlEaW1lbnNpb24gZGltID0gKERpbWVuc2lvbikgYXJyYXlUeXBlLmRpbWVuc2lvbnMoKS5n
ZXQoMCk7CisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0
ZShkaW0sIERpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlNYXJrZXJBbm5vdGF0
aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJr
ZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJ
CQlsaXN0UmV3cml0ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBudWxsKTsKKwkJfQor
CQkKKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWJ1
Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7
CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtc
biIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11b
XSBpID0gbmV3IGludCBAQW5ub3QxIFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dFtdW11bXSBqID0gbmV3IGludCBAQW5ub3QxIFtdW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgCWludFtdW11bXSBrID0gbmV3IGludCAgQEFubm90MSBbXVtdW107XG4iKTsKKwkJYnVmLmFw
cGVuZCgiICAgIAlpbnRbXVtdW10gbCA9IG5ldyBpbnQgQEFubm90MSAvKiBjb21tZW50ICovW11b
XVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W11bXVtdIG0gPSBuZXcgaW50IEBBbm5v
dDEgLyogY29tbWVudCBbXSAqLyBbXVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRb
XVtdW10gbiA9IG5ldyBpbnQgIEBBbm5vdDEgLyogY29tbWVudCBbXSAqLyAgW11bXVtdO1xuIik7
CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5h
cHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5U
WVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOwor
CQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCisJcHVi
bGljIHZvaWQgdGVzdEJ1ZzQxNzkyM2Zfc2luY2VfOCgpIHRocm93cyBFeGNlcHRpb24geworCQlJ
UGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJh
Z21lbnQoInRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3Ry
aW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFw
cGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1
Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGlj
IHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W11bXVtdIGkgPSBuZXcg
aW50W11bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W11bXVtdIGogPSBuZXcgaW50
W10gW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBrID0gbmV3IGludFtd
ICBbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W11bXVtdIGwgPSBuZXcgaW50W10v
KiBjb21tZW50ICovW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBtID0g
bmV3IGludFtdIC8qIGNvbW1lbnQgW10gKi8gW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
CWludFtdW11bXSBuID0gbmV3IGludFtdICAvKiBjb21tZW50IFtdICovICBbXVtdO1xuIik7CisJ
CWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBl
bmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBF
X1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQlJ
Q29tcGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlguamF2YSIs
IGJ1Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7CisKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJv
b3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFTVCBhc3QgPSBhc3RSb290LmdldEFTVCgpOworCQlBU1RS
ZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFzdCk7CisKKwkJVHlwZURlY2xhcmF0
aW9uIHR5cGVEZWNsID0gKFR5cGVEZWNsYXJhdGlvbikgYXN0Um9vdC50eXBlcygpLmdldCgwKTsK
KwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0gdHlwZURlY2wuZ2V0TWV0aG9kcygpWzBd
OworCQlCbG9jayBibG9jaz0gbWV0aG9kRGVjbC5nZXRCb2R5KCk7CisJCUxpc3Qgc3RhdGVtZW50
cz0gYmxvY2suc3RhdGVtZW50cygpOworCisJCWZvciAoaW50IGkgPSAwOyBpIDwgNjsgKytpKSB7
CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50IHN0YXRlbWVudCA9IChWYXJpYWJsZURl
Y2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldChpKTsKKwkJCUxpc3QgZnJhZ21lbnRz
ID0gc3RhdGVtZW50LmZyYWdtZW50cygpOworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
IGZyYWdtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgZnJhZ21lbnRzLmdldCgw
KTsKKwkJCUFycmF5Q3JlYXRpb24gY3JlYXRpb24gPSAoQXJyYXlDcmVhdGlvbikgZnJhZ21lbnQu
Z2V0SW5pdGlhbGl6ZXIoKTsKKwkJCUFycmF5VHlwZSBhcnJheVR5cGUgPSBjcmVhdGlvbi5nZXRU
eXBlKCk7CisKKwkJCURpbWVuc2lvbiBkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5z
aW9ucygpLmdldCgxKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExp
c3RSZXdyaXRlKGRpbSwgRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCU1hcmtl
ckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsK
KwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90
MSIpKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEF0KG1hcmtlckFubm90YXRpb24sIDAsIG51bGwp
OworCQl9CisJCQorCQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRl
KTsKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVz
dDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1l
bnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50W11bXVtdIGkgPSBuZXcgaW50W10gQEFubm90MSBbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W11bXVtdIGogPSBuZXcgaW50W10gQEFubm90MSBbXVtdO1xuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICAJaW50W11bXVtdIGsgPSBuZXcgaW50W10gIEBBbm5vdDEgW11bXTtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBsID0gbmV3IGludFtdIEBBbm5vdDEgLyogY29t
bWVudCAqL1tdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtdW10gbSA9IG5ldyBp
bnRbXSBAQW5ub3QxIC8qIGNvbW1lbnQgW10gKi8gW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgCWludFtdW11bXSBuID0gbmV3IGludFtdICBAQW5ub3QxIC8qIGNvbW1lbnQgW10gKi8gIFtd
W107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1l
bnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MSB7
fVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsKKwl9
CisKKwlwdWJsaWMgdm9pZCB0ZXN0QnVnNDE3OTIzZ19zaW5jZV84KCkgdGhyb3dzIEV4Y2VwdGlv
biB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291cmNlRm9sZGVyLmNyZWF0ZVBh
Y2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZ0J1ZmZlciBidWY9
IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOwor
CQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4i
KTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtdW10g
aTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXVtdW10gajtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgCWludCAgW11bXVtdIGs7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQvKiBj
b21tZW50ICovW11bXVtdIGw7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgLyogY29tbWVu
dCBbXSAqLyBbXVtdW10gbTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCAgLyogY29tbWVu
dCBbXSAqLyAgW11bXVtdIG47XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYu
YXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdl
dCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50
ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0
ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsK
KworCQlDb21waWxhdGlvblVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUKGN1KTsKKwkJQVNUIGFzdCA9
IGFzdFJvb3QuZ2V0QVNUKCk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVh
dGUoYXN0KTsKKworCQlUeXBlRGVjbGFyYXRpb24gdHlwZURlY2wgPSAoVHlwZURlY2xhcmF0aW9u
KSBhc3RSb290LnR5cGVzKCkuZ2V0KDApOworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNs
PSB0eXBlRGVjbC5nZXRNZXRob2RzKClbMF07CisJCUJsb2NrIGJsb2NrPSBtZXRob2REZWNsLmdl
dEJvZHkoKTsKKwkJTGlzdCBzdGF0ZW1lbnRzPSBibG9jay5zdGF0ZW1lbnRzKCk7CisKKwkJZm9y
IChpbnQgaSA9IDA7IGkgPCA2OyArK2kpIHsKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1l
bnQgc3RhdGVtZW50ID0gKFZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMu
Z2V0KGkpOworCQkJQXJyYXlUeXBlIGFycmF5VHlwZSA9IChBcnJheVR5cGUpIHN0YXRlbWVudC5n
ZXRUeXBlKCk7CisJCQlEaW1lbnNpb24gZGltID0gKERpbWVuc2lvbikgYXJyYXlUeXBlLmRpbWVu
c2lvbnMoKS5nZXQoMCk7CisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRM
aXN0UmV3cml0ZShkaW0sIERpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlNYXJr
ZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7
CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5v
dDEiKSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBudWxs
KTsKKwkJfQorCQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsK
KwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRU
eXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50
IEBBbm5vdDEgW11bXVtdIGk7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgQEFubm90MSBb
XVtdW10gajtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCAgQEFubm90MSBbXVtdW10gaztc
biIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBAQW5ub3QxIC8qIGNvbW1lbnQgKi9bXVtdW10g
bDtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBAQW5ub3QxIC8qIGNvbW1lbnQgW10gKi8g
W11bXVtdIG07XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgIEBBbm5vdDEgLyogY29tbWVu
dCBbXSAqLyAgW11bXVtdIG47XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYu
YXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdl
dCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50
ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50
b1N0cmluZygpKTsKKwl9CisJcHVibGljIHZvaWQgdGVzdEJ1ZzQxNzkyM2hfc2luY2VfOCgpIHRo
cm93cyBFeGNlcHRpb24geworCQlJUGFja2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZv
bGRlci5jcmVhdGVQYWNrYWdlRnJhZ21lbnQoInRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJp
bmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2Ug
dGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVs
ZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICAJaW50W11bXVtdIGk7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBbXVtdIGo7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSAgW11bXSBrO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W10vKiBjb21tZW50ICovW11bXSBsO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50W10gLyogY29tbWVudCBbXSAqLyBbXVtdIG07XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlp
bnRbXSAgLyogY29tbWVudCBbXSAqLyAgW11bXSBuO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9
XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVm
LmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQlJQ29tcGlsYXRpb25Vbml0IGN1
PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlguamF2YSIsIGJ1Zi50b1N0cmluZygpLCBm
YWxzZSwgbnVsbCk7CisKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7
CisJCUFTVCBhc3QgPSBhc3RSb290LmdldEFTVCgpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFT
VFJld3JpdGUuY3JlYXRlKGFzdCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVEZWNsID0gKFR5
cGVEZWNsYXJhdGlvbikgYXN0Um9vdC50eXBlcygpLmdldCgwKTsKKwkJTWV0aG9kRGVjbGFyYXRp
b24gbWV0aG9kRGVjbD0gdHlwZURlY2wuZ2V0TWV0aG9kcygpWzBdOworCQlCbG9jayBibG9jaz0g
bWV0aG9kRGVjbC5nZXRCb2R5KCk7CisJCUxpc3Qgc3RhdGVtZW50cz0gYmxvY2suc3RhdGVtZW50
cygpOworCisJCWZvciAoaW50IGkgPSAwOyBpIDwgNjsgKytpKSB7CisJCQlWYXJpYWJsZURlY2xh
cmF0aW9uU3RhdGVtZW50IHN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50
KSBzdGF0ZW1lbnRzLmdldChpKTsKKwkJCUFycmF5VHlwZSBhcnJheVR5cGUgPSAoQXJyYXlUeXBl
KSBzdGF0ZW1lbnQuZ2V0VHlwZSgpOworCQkJRGltZW5zaW9uIGRpbSA9IChEaW1lbnNpb24pIGFy
cmF5VHlwZS5kaW1lbnNpb25zKCkuZ2V0KDEpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9
IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVS
VFkpOworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2Vy
QW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiQW5ub3QxIikpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQobWFya2VyQW5ub3Rh
dGlvbiwgMCwgbnVsbCk7CisJCX0KKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1YXRlUmV3cml0ZShj
dSwgcmV3cml0ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJw
YWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3Rh
dGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgWCB7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgCWludFtdIEBBbm5vdDEgW11bXSBpO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJ
aW50W10gQEFubm90MSBbXVtdIGo7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSAgQEFu
bm90MSBbXVtdIGs7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBAQW5ub3QxIC8qIGNv
bW1lbnQgKi9bXVtdIGw7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBAQW5ub3QxIC8q
IGNvbW1lbnQgW10gKi8gW11bXSBtO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10gIEBB
bm5vdDEgLyogY29tbWVudCBbXSAqLyAgW11bXSBuO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9
XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVm
LmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQlhc3NlcnRFcXVhbFN0cmluZyhw
cmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCQorCXB1YmxpYyB2b2lkIHRlc3RCdWc0MTc5
MjNpX3NpbmNlXzgoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNr
MT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNl
LCBudWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYu
YXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxh
bmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xh
c3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgCWludCBAQW5ub3QxW11bXVtdIGk7XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIAlpbnQgQEFubm90MSBbXVtdW10gajtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWlu
dCAgIEBBbm5vdDEgIFtdW11bXSBrO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50LyogY29t
bWVudCBAIFtdICovQEFubm90MVtdW11bXSBsO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50
IC8qIGNvbW1lbnQgQCBbXSAqLyBAQW5ub3QxW11bXVtdIG07XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIAlpbnQgLyogY29tbWVudCBAIFtdICovIEBBbm5vdDEgICBbXVtdW10gbjtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgCWludCBAQW5ub3QxLyogY29tbWVudCBAIFtdICovW11bXVtdIG87XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgQEFubm90MSAvKiBjb21tZW50IEAgW10gKi8gIFtd
W11bXSBwO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IEBBbm5vdDEgICAvKiBjb21tZW50
IEAgW10gKi9bXVtdW10gcTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5h
cHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRl
cmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRl
Q29tcGlsYXRpb25Vbml0KCJYLmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOwor
CisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1QoY3UpOworCQlBU1QgYXN0ID0g
YXN0Um9vdC5nZXRBU1QoKTsKKwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0
ZShhc3QpOworCisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlRGVjbCA9IChUeXBlRGVjbGFyYXRpb24p
IGFzdFJvb3QudHlwZXMoKS5nZXQoMCk7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9
IHR5cGVEZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJQmxvY2sgYmxvY2s9IG1ldGhvZERlY2wuZ2V0
Qm9keSgpOworCQlMaXN0IHN0YXRlbWVudHM9IGJsb2NrLnN0YXRlbWVudHMoKTsKKworCQlmb3Ig
KGludCBpID0gMDsgaSA8IDk7ICsraSkgeworCQkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVu
dCBzdGF0ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgc3RhdGVtZW50cy5n
ZXQoaSk7CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gKEFycmF5VHlwZSkgc3RhdGVtZW50Lmdl
dFR5cGUoKTsKKwkJCURpbWVuc2lvbiBkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5z
aW9ucygpLmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExp
c3RSZXdyaXRlKGRpbSwgRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RS
ZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSkgZGltLmFubm90YXRpb25zKCkuZ2V0KDApLCBudWxsKTsK
KwkJfQorCQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKwkJ
YnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBl
O1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W11b
XVtdIGk7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtdW10gajtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgCWludFtdW11bXSBrO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W11b
XVtdIGw7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgLyogY29tbWVudCBAIFtdICovW11b
XVtdIG07XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgLyogY29tbWVudCBAIFtdICovW11b
XVtdIG47XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQvKiBjb21tZW50IEAgW10gKi9bXVtd
W10gbztcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludC8qIGNvbW1lbnQgQCBbXSAqLyAgW11b
XVtdIHA7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQvKiBjb21tZW50IEAgW10gKi9bXVtd
W10gcTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIp
OworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxl
bWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3Qx
IHt9XG4iKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOwor
CX0KKwkKKwlwdWJsaWMgdm9pZCB0ZXN0QnVnNDE3OTIzal9zaW5jZV84KCkgdGhyb3dzIEV4Y2Vw
dGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291cmNlRm9sZGVyLmNyZWF0
ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZ0J1ZmZlciBi
dWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIp
OworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7
XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBA
QW5ub3QxW11bXSBpO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10gQEFubm90MSBbXVtd
IGo7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSAgIEBBbm5vdDEgIFtdW10gaztcbiIp
OworCQlidWYuYXBwZW5kKCIgICAgCWludFtdLyogY29tbWVudCBAIFtdICovQEFubm90MVtdW10g
bDtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdIC8qIGNvbW1lbnQgQCBbXSAqLyBAQW5u
b3QxW11bXSBtO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10gLyogY29tbWVudCBAIFtd
ICovIEBBbm5vdDEgICBbXVtdIG47XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBAQW5u
b3QxLyogY29tbWVudCBAIFtdICovW11bXSBvO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50
W10gQEFubm90MSAvKiBjb21tZW50IEAgW10gKi8gIFtdW10gcDtcbiIpOworCQlidWYuYXBwZW5k
KCIgICAgCWludFtdIEBBbm5vdDEgICAvKiBjb21tZW50IEAgW10gKi9bXVtdIHE7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVf
VVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCUlD
b21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiWC5qYXZhIiwg
YnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKworCQlDb21waWxhdGlvblVuaXQgYXN0Um9v
dD0gY3JlYXRlQVNUKGN1KTsKKwkJQVNUIGFzdCA9IGFzdFJvb3QuZ2V0QVNUKCk7CisJCUFTVFJl
d3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0KTsKKworCQlUeXBlRGVjbGFyYXRp
b24gdHlwZURlY2wgPSAoVHlwZURlY2xhcmF0aW9uKSBhc3RSb290LnR5cGVzKCkuZ2V0KDApOwor
CQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSB0eXBlRGVjbC5nZXRNZXRob2RzKClbMF07
CisJCUJsb2NrIGJsb2NrPSBtZXRob2REZWNsLmdldEJvZHkoKTsKKwkJTGlzdCBzdGF0ZW1lbnRz
PSBibG9jay5zdGF0ZW1lbnRzKCk7CisKKwkJZm9yIChpbnQgaSA9IDA7IGkgPCA5OyArK2kpIHsK
KwkJCVZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQgc3RhdGVtZW50ID0gKFZhcmlhYmxlRGVj
bGFyYXRpb25TdGF0ZW1lbnQpIHN0YXRlbWVudHMuZ2V0KGkpOworCQkJQXJyYXlUeXBlIGFycmF5
VHlwZSA9IChBcnJheVR5cGUpIHN0YXRlbWVudC5nZXRUeXBlKCk7CisJCQlEaW1lbnNpb24gZGlt
ID0gKERpbWVuc2lvbikgYXJyYXlUeXBlLmRpbWVuc2lvbnMoKS5nZXQoMSk7CisJCQlMaXN0UmV3
cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkaW0sIERpbWVuc2lvbi5B
Tk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5yZW1vdmUoKEFTVE5vZGUpIGRp
bS5hbm5vdGF0aW9ucygpLmdldCgwKSwgbnVsbCk7CisJCX0KKwkJU3RyaW5nIHByZXZpZXc9IGV2
YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOwor
CQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJs
aWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtc
biIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBpO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W11bXVtdIGo7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXVtdW10gaztc
biIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdW11bXSBsO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W10gLyogY29tbWVudCBAIFtdICovW11bXSBtO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W10gLyogY29tbWVudCBAIFtdICovW11bXSBuO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W10vKiBjb21tZW50IEAgW10gKi9bXVtdIG87XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIAlpbnRbXS8qIGNvbW1lbnQgQCBbXSAqLyAgW11bXSBwO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAJaW50W10vKiBjb21tZW50IEAgW10gKi9bXVtdIHE7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFu
Zy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOwor
CQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCWFzc2VydEVxdWFsU3Ry
aW5nKHByZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0QnVn
NDE3OTIza19zaW5jZV84KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQg
cGFjazE9IHRoaXMuc291cmNlRm9sZGVyLmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBm
YWxzZSwgbnVsbCk7CisJCVN0cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJ
YnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2
YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGlj
IGNsYXNzIFgge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaSBbXVtdID0gbmV3IGludFtdIEBBbm5vdDEg
QEFubm90MltdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaiBbXVtdID0gbmV3
IGludFtdIEBBbm5vdDEgQEFubm90MltdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQg
W10gayBbXVtdID0gbmV3IGludFtdICAgQEFubm90MSAgQEFubm90MiBbXVtdO1xuIik7CisJCWJ1
Zi5hcHBlbmQoIiAgICAJaW50IFtdIGwgW11bXSA9IG5ldyBpbnRbXSAvKiBjb21tZW50IEAgW10g
Ki9AQW5ub3QxIEBBbm5vdDJbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIG0g
W11bXSA9IG5ldyBpbnRbXSAvKiBjb21tZW50IEAgW10gKi8gQEFubm90MSBAQW5ub3QyIFtdW107
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbiBbXVtdID0gbmV3IGludFtdIC8qIGNv
bW1lbnQgQCBbXSAqLyBAQW5ub3QxIEBBbm5vdDIgIFtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIAlpbnQgW10gbyBbXVtdID0gbmV3IGludFtdIEBBbm5vdDEgQEFubm90Mi8qIGNvbW1lbnQg
QCBbXSAqL1tdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gcCBbXVtdID0gbmV3
IGludFtdIEBBbm5vdDEgQEFubm90Mi8qIGNvbW1lbnQgQCBbXSAqLyAgW11bXTtcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgCWludCBbXSBxIFtdW10gPSBuZXcgaW50W10gQEFubm90MSAgIEBBbm5v
dDIvKiBjb21tZW50IEAgW10gKi9bXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlv
bi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVu
ZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQlJQ29tcGlsYXRpb25Vbml0IGN1PSBwYWNr
MS5jcmVhdGVDb21waWxhdGlvblVuaXQoIlguamF2YSIsIGJ1Zi50b1N0cmluZygpLCBmYWxzZSwg
bnVsbCk7CisKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVChjdSk7CisJCUFT
VCBhc3QgPSBhc3RSb290LmdldEFTVCgpOworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3Jp
dGUuY3JlYXRlKGFzdCk7CisKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGVEZWNsID0gKFR5cGVEZWNs
YXJhdGlvbikgYXN0Um9vdC50eXBlcygpLmdldCgwKTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0
aG9kRGVjbD0gdHlwZURlY2wuZ2V0TWV0aG9kcygpWzBdOworCQlCbG9jayBibG9jaz0gbWV0aG9k
RGVjbC5nZXRCb2R5KCk7CisJCUxpc3Qgc3RhdGVtZW50cz0gYmxvY2suc3RhdGVtZW50cygpOwor
CisJCWZvciAoaW50IGkgPSAwOyBpIDwgOTsgKytpKSB7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9u
U3RhdGVtZW50IHN0YXRlbWVudCA9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0
ZW1lbnRzLmdldChpKTsKKwkJCUxpc3QgZnJhZ21lbnRzID0gc3RhdGVtZW50LmZyYWdtZW50cygp
OworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdtZW50ID0gKFZhcmlhYmxlRGVj
bGFyYXRpb25GcmFnbWVudCkgZnJhZ21lbnRzLmdldCgwKTsKKwkJCUFycmF5Q3JlYXRpb24gY3Jl
YXRpb24gPSAoQXJyYXlDcmVhdGlvbikgZnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKTsKKwkJCUFy
cmF5VHlwZSBhcnJheVR5cGUgPSBjcmVhdGlvbi5nZXRUeXBlKCk7CisKKwkJCURpbWVuc2lvbiBk
aW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5zaW9ucygpLmdldCgxKTsKKwkJCUxpc3RS
ZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRGltZW5zaW9u
LkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZSgoQVNUTm9kZSlk
aW0uYW5ub3RhdGlvbnMoKS5nZXQoMSksIG51bGwpOworCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9
IGV2YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigp
OworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9y
dCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJw
dWJsaWMgY2xhc3MgWCB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygp
IHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBpIFtdW10gPSBuZXcgaW50W10gQEFu
bm90MVtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gaiBbXVtdID0gbmV3IGlu
dFtdIEBBbm5vdDFbXVtdO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIGsgW11bXSA9
IG5ldyBpbnRbXSAgIEBBbm5vdDEgW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBb
XSBsIFtdW10gPSBuZXcgaW50W10gLyogY29tbWVudCBAIFtdICovQEFubm90MVtdW107XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbSBbXVtdID0gbmV3IGludFtdIC8qIGNvbW1lbnQg
QCBbXSAqLyBAQW5ub3QxIFtdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnQgW10gbiBb
XVtdID0gbmV3IGludFtdIC8qIGNvbW1lbnQgQCBbXSAqLyBAQW5ub3QxICBbXVtdO1xuIik7CisJ
CWJ1Zi5hcHBlbmQoIiAgICAJaW50IFtdIG8gW11bXSA9IG5ldyBpbnRbXSBAQW5ub3QxLyogY29t
bWVudCBAIFtdICovW11bXTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludCBbXSBwIFtdW10g
PSBuZXcgaW50W10gQEFubm90MS8qIGNvbW1lbnQgQCBbXSAqLyAgW11bXTtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgCWludCBbXSBxIFtdW10gPSBuZXcgaW50W10gQEFubm90MS8qIGNvbW1lbnQg
QCBbXSAqL1tdW107XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5k
KCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1
ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNl
IEFubm90MSB7fVxuIik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmlu
ZygpKTsKKwl9CisKKwlwdWJsaWMgdm9pZCB0ZXN0QnVnNDE3OTIzbF9zaW5jZV84KCkgdGhyb3dz
IEV4Y2VwdGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291cmNlRm9sZGVy
LmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZ0J1
ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0
MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIFgge1xuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlp
bnRbXSBAQW5ub3QxIEBBbm5vdDJbXVtdIGk7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRb
XSBAQW5ub3QxIEBBbm5vdDIgW11bXSBqO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10g
ICBAQW5ub3QxICBAQW5ub3QyIFtdW10gaztcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtd
LyogY29tbWVudCBAIFtdICovQEFubm90MSBAQW5ub3QyW11bXSBsO1xuIik7CisJCWJ1Zi5hcHBl
bmQoIiAgICAJaW50W10gLyogY29tbWVudCBAIFtdICovIEBBbm5vdDEgQEFubm90MiBbXVtdIG07
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSAvKiBjb21tZW50IEAgW10gKi8gQEFubm90
MSAgIEBBbm5vdDIgW11bXSBuO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10gQEFubm90
MSBAQW5ub3QyLyogY29tbWVudCBAIFtdICovW11bXSBvO1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAg
ICAJaW50W10gQEFubm90MSBAQW5ub3QyLyogY29tbWVudCBAIFtdICovICBbXVtdIHA7XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBAQW5ub3QxICAgQEFubm90Mi8qIGNvbW1lbnQgQCBb
XSAqL1tdW10gcTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQo
In1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVl
PSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2Ug
QW5ub3QxIHt9XG4iKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGls
YXRpb25Vbml0KCJYLmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2UsIG51bGwpOworCisJCUNv
bXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1QoY3UpOworCQlBU1QgYXN0ID0gYXN0Um9v
dC5nZXRBU1QoKTsKKwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3Qp
OworCisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlRGVjbCA9IChUeXBlRGVjbGFyYXRpb24pIGFzdFJv
b3QudHlwZXMoKS5nZXQoMCk7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IHR5cGVE
ZWNsLmdldE1ldGhvZHMoKVswXTsKKwkJQmxvY2sgYmxvY2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgp
OworCQlMaXN0IHN0YXRlbWVudHM9IGJsb2NrLnN0YXRlbWVudHMoKTsKKworCQlmb3IgKGludCBp
ID0gMDsgaSA8IDk7ICsraSkgeworCQkJVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCBzdGF0
ZW1lbnQgPSAoVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoaSk7
CisJCQlBcnJheVR5cGUgYXJyYXlUeXBlID0gKEFycmF5VHlwZSkgc3RhdGVtZW50LmdldFR5cGUo
KTsKKwkJCURpbWVuc2lvbiBkaW0gPSAoRGltZW5zaW9uKSBhcnJheVR5cGUuZGltZW5zaW9ucygp
LmdldCgxKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdy
aXRlKGRpbSwgRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRl
LnJlbW92ZSgoQVNUTm9kZSkgZGltLmFubm90YXRpb25zKCkuZ2V0KDEpLCBudWxsKTsKKwkJfQor
CQlTdHJpbmcgcHJldmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKwkJYnVmPSBu
ZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7
CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBYIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
cHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10gQEFubm90
MVtdW10gaTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdIEBBbm5vdDEgW11bXSBqO1xu
Iik7CisJCWJ1Zi5hcHBlbmQoIiAgICAJaW50W10gICBAQW5ub3QxIFtdW10gaztcbiIpOworCQli
dWYuYXBwZW5kKCIgICAgCWludFtdLyogY29tbWVudCBAIFtdICovQEFubm90MVtdW10gbDtcbiIp
OworCQlidWYuYXBwZW5kKCIgICAgCWludFtdIC8qIGNvbW1lbnQgQCBbXSAqLyBAQW5ub3QxIFtd
W10gbTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdIC8qIGNvbW1lbnQgQCBbXSAqLyBA
QW5ub3QxIFtdW10gbjtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgCWludFtdIEBBbm5vdDEvKiBj
b21tZW50IEAgW10gKi9bXVtdIG87XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlpbnRbXSBAQW5u
b3QxLyogY29tbWVudCBAIFtdICovICBbXVtdIHA7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIAlp
bnRbXSBAQW5ub3QxLyogY29tbWVudCBAIFtdICovW11bXSBxO1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICB9XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxh
bmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEge31cbiIpOworCQlhc3NlcnRFcXVhbFN0
cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCit9ClwgTm8gbmV3bGluZSBhdCBl
bmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwv
c3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdy
aXRpbmdUeXBlRGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nVHlwZURlY2xUZXN0LmphdmEKaW5kZXggOWNhNDBjNS4uYWY1MWQ4YyAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUeXBlRGVjbFRlc3QuamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2Uv
amR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1R5cGVEZWNsVGVz
dC5qYXZhCkBAIC0xNzM4LDcgKzE3MzgsNyBAQAogCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5s
YW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKIAkJYnVmLmFwcGVuZCgicHVibGljIGNs
YXNzIEUge1xuIik7CiAJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsK
LQkJYnVmLmFwcGVuZCgiICAgICAgICBpbnQgaSwgaiwgayA9IDAsIHgsIHkgW10gW10gW10sIHog
QEFubm90MSBbXSwgenogQEFubm90MiBAQW5ub3QyW10gPSB7MCwgMX07XG4iKTsKKwkJYnVmLmFw
cGVuZCgiICAgICAgICBpbnQgaSwgaiwgayA9IDAsIHgsIHlbXVtdW10sIHogQEFubm90MSBbXSwg
enogQEFubm90MiBAQW5ub3QyW10gPSB7MCwgMX07XG4iKTsKIAkJYnVmLmFwcGVuZCgiICAgIH1c
biIpOwogCQlidWYuYXBwZW5kKCJ9XG4iKTsKIAkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5v
dGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOwpAQCAtMTg0
OSw3ICsxODQ5LDcgQEAKIAkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9u
LkVsZW1lbnRUeXBlO1xuIik7CiAJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBFIHtcbiIpOwog
CQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7Ci0JCWJ1Zi5hcHBlbmQo
IiAgICAgICAgaW50IGEgQEFubm90MSBAQW5ub3QyIFtdLCBqID0gMSwgayBAQW5ub3QxIEBBbm5v
dDIgW10sIHggQEFubm90MSBAQW5ub3QyIFtdID0gbnVsbCwgeSBAQW5ub3QxW10gQEFubm90Mltd
LCB6eiBAQW5ub3QyIEBBbm5vdDJbXSA9IHswLCAxfTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
ICAgIGludCBhIEBBbm5vdDEgQEFubm90MiBbXSwgaiA9IDEsIGsgQEFubm90MSBAQW5ub3QyIFtd
LCB4IEBBbm5vdDEgQEFubm90MiBbXSA9IG51bGwsIHkgQEFubm90MSBbXSBAQW5ub3QyIFtdLCB6
eiBAQW5ub3QyIEBBbm5vdDJbXSA9IHswLCAxfTtcbiIpOwogCQlidWYuYXBwZW5kKCIgICAgfVxu
Iik7CiAJCWJ1Zi5hcHBlbmQoIn1cbiIpOwogCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90
YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20v
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL05haXZlQVNURmxhdHRlbmVyLmphdmEK
aW5kZXggYTA5ZjBhNC4uYzMxNDY2NiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
ZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9OYWl2ZUFTVEZsYXR0ZW5lci5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9kb20vTmFpdmVBU1RGbGF0dGVuZXIuamF2YQpAQCAtNjIwLDggKzYyMCwxMCBAQAog
CX0KIAogCXB1YmxpYyBib29sZWFuIHZpc2l0KERpbWVuc2lvbiBub2RlKSB7Ci0JCXRoaXMuYnVm
ZmVyLmFwcGVuZCgiICIpOy8vJE5PTi1OTFMtMSQKLQkJdmlzaXRBbm5vdGF0aW9uc0xpc3Qobm9k
ZS5hbm5vdGF0aW9ucygpKTsKKwkJTGlzdCBhbm5vdGF0aW9ucyA9IG5vZGUuYW5ub3RhdGlvbnMo
KTsKKwkJaWYgKGFubm90YXRpb25zLnNpemUoKSA+IDApCisJCQl0aGlzLmJ1ZmZlci5hcHBlbmQo
JyAnKTsKKwkJdmlzaXRBbm5vdGF0aW9uc0xpc3QoYW5ub3RhdGlvbnMpOwogCQl0aGlzLmJ1ZmZl
ci5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQKIAkJcmV0dXJuIGZhbHNlOwogCX0KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RS
ZXdyaXRlQW5hbHl6ZXIuamF2YQppbmRleCA2NjllNGM0Li5jNzNmOGIzIDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9t
L3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3Jp
dGVBbmFseXplci5qYXZhCkBAIC0xMjY2LDcgKzEyNjYsNyBAQAogCX0KIAogCXByb3RlY3RlZCBp
bnQgcmV3cml0ZUV4dHJhRGltZW5zaW9uc0luZm8oQVNUTm9kZSBub2RlLCBpbnQgcG9zLCBDaGls
ZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgcHJvcGVydHkpIHsKLQkJcmV0dXJuIHJld3JpdGVOb2Rl
TGlzdChub2RlLCBwcm9wZXJ0eSwgcG9zLCAiICIsICIgIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9O
LU5MUy0yJAorCQlyZXR1cm4gcmV3cml0ZU5vZGVMaXN0KG5vZGUsIHByb3BlcnR5LCBwb3MsICIg
IiwgIiIpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAl9CiAKIAlwcml2YXRlIGludCBy
ZXdyaXRlRXh0cmFEaW1lbnNpb25zKEFTVE5vZGUgcGFyZW50LCBTdHJ1Y3R1cmFsUHJvcGVydHlE
ZXNjcmlwdG9yIHByb3BlcnR5LCBpbnQgcG9zKSB7CkBAIC0xOTEzLDExICsxOTEzLDY5IEBACiAJ
CXJldHVybiBvZmZzZXQ7CiAJfQogCisJcHJpdmF0ZSBBU1ROb2RlIGdldFByZXZpb3VzTm9kZShB
U1ROb2RlIG5vZGUpIHsKKwkJQXJyYXlUeXBlIGFycmF5VHlwZSA9IChBcnJheVR5cGUpIG5vZGUu
Z2V0UGFyZW50KCk7CisJCUFTVE5vZGUgcHJldiA9IGFycmF5VHlwZS5nZXRFbGVtZW50VHlwZSgp
OworCQlMaXN0IGwgPSAoTGlzdCkgbm9kZS5nZXRQYXJlbnQoKS5nZXRTdHJ1Y3R1cmFsUHJvcGVy
dHkobm9kZS5nZXRMb2NhdGlvbkluUGFyZW50KCkpOworCQlpbnQgc2l6ZSA9IGwuc2l6ZSgpOwor
CQlpbnQgaSA9IDA7CisJCWZvciAoOyBpIDwgc2l6ZTsgaSsrKSB7CisJCQlBU1ROb2RlIGN1cnJO
b2RlID0gKEFTVE5vZGUpIGwuZ2V0KGkpOworCQkJaWYgKG5vZGUuZXF1YWxzKGN1cnJOb2RlKSkK
KwkJCQlicmVhazsKKwkJCXByZXYgPSBjdXJyTm9kZTsKKwkJfQorCQlyZXR1cm4gaSA8IHNpemUg
PyBwcmV2IDogbnVsbDsKKwl9CisJCisJcHJpdmF0ZSBpbnQgZ2V0UHJldmlvdXNUb2tlbkVuZE9m
ZnNldChBU1ROb2RlIG5vZGUsIGludCB0b2tlbikgeworCQlpbnQgb2Zmc2V0ID0gLTE7CisJCUFT
VE5vZGUgcHJldiA9IGdldFByZXZpb3VzTm9kZShub2RlKTsKKwkJaWYgKHByZXYgIT0gbnVsbCkg
eworCQkJb2Zmc2V0ID0gcHJldi5nZXRTdGFydFBvc2l0aW9uKCkgKyBwcmV2LmdldExlbmd0aCgp
OworCQkJdHJ5IHsKKwkJCQlvZmZzZXQgPSBnZXRTY2FubmVyKCkuZ2V0UHJldmlvdXNUb2tlbkVu
ZE9mZnNldCh0b2tlbiwgb2Zmc2V0KTsKKwkJCX0gY2F0Y2ggKENvcmVFeGNlcHRpb24gZTEpIHsK
KwkJCQllMS5wcmludFN0YWNrVHJhY2UoKTsKKwkJCX0KKwkJfQorCQlyZXR1cm4gb2Zmc2V0Owor
CX0KKwkKIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChEaW1lbnNpb24gbm9kZSkgewogCQlpZiAoIWhh
c0NoaWxkcmVuQ2hhbmdlcyhub2RlKSkgewogCQkJcmV0dXJuIGRvVmlzaXRVbmNoYW5nZWRDaGls
ZHJlbihub2RlKTsKIAkJfQotCQlyZXdyaXRlTm9kZUxpc3Qobm9kZSwgRGltZW5zaW9uLkFOTk9U
QVRJT05TX1BST1BFUlRZLCBub2RlLmdldFN0YXJ0UG9zaXRpb24oKSwgVXRpbC5FTVBUWV9TVFJJ
TkcsICIgIik7IC8vJE5PTi1OTFMtMSQKKwkJCisJCWJvb2xlYW4ga2V5d29yZFNwYWNlID0gdHJ1
ZTsKKwkJQVNUTm9kZSBwYXJlbnQgPSBub2RlLmdldFBhcmVudCgpOworCQlpZiAocGFyZW50Lmdl
dE5vZGVUeXBlKCkgPT0gQVNUTm9kZS5BUlJBWV9UWVBFKSB7CisJCQlMaXN0IG9sZEFubm90YXRp
b25zID0gKExpc3QpIGdldE9yaWdpbmFsVmFsdWUobm9kZSwgRGltZW5zaW9uLkFOTk9UQVRJT05T
X1BST1BFUlRZKTsKKwkJCUxpc3QgbmV3QW5ub3RhdGlvbnMgPSAoTGlzdCkgZ2V0TmV3VmFsdWUo
bm9kZSwgRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWludCBvbGRBbm5vdGF0
aW9uU2l6ZSA9IG9sZEFubm90YXRpb25zLnNpemUoKTsKKwkJCWludCBuZXdBbm5vdGF0aW9uU2l6
ZSA9IG5ld0Fubm90YXRpb25zLnNpemUoKTsKKwkJCWlmIChvbGRBbm5vdGF0aW9uU2l6ZSA+IDAg
JiYgbmV3QW5ub3RhdGlvblNpemUgPT0gMCkgeyAvKiByZW1vdmVkIGFsbCBhbm5vdGF0aW9ucyAq
LworCQkJCWludCBkZWxTdGFydCA9IGdldFByZXZpb3VzVG9rZW5FbmRPZmZzZXQobm9kZSwgVGVy
bWluYWxUb2tlbnMuVG9rZW5OYW1lQVQpOworCQkJCWludCBkZWxFbmQgPSAoKEFTVE5vZGUpIG9s
ZEFubm90YXRpb25zLmdldCgwKSkuZ2V0U3RhcnRQb3NpdGlvbigpOworCQkJCWlmIChkZWxTdGFy
dCA+PSAwICYmIGRlbEVuZCA+IGRlbFN0YXJ0KSB7CisJCQkJCWRvVGV4dFJlbW92ZShkZWxTdGFy
dCwgZGVsRW5kIC0gZGVsU3RhcnQsIG51bGwpOyAvKiByZW1vdmUgc3BhY2VzIGJlZm9yZSB0aGUg
YW5ub3RhdGlvbiAqLworCQkJCX0KKworCQkJCUFTVE5vZGUgY3Vyck5vZGUgPSAoQVNUTm9kZSkg
b2xkQW5ub3RhdGlvbnMuZ2V0KG9sZEFubm90YXRpb25TaXplIC0gMSk7CisJCQkJZGVsU3RhcnQg
PSBjdXJyTm9kZS5nZXRTdGFydFBvc2l0aW9uKCkgKyBjdXJyTm9kZS5nZXRMZW5ndGgoKTsKKwkJ
CQl0cnkgeworCQkJCQlkZWxFbmQgPSBnZXRTY2FubmVyKCkuZ2V0TmV4dFN0YXJ0T2Zmc2V0KGRl
bFN0YXJ0LCBmYWxzZSk7CisJCQkJCWRvVGV4dFJlbW92ZShkZWxTdGFydCwgZGVsRW5kIC0gZGVs
U3RhcnQsIG51bGwpOyAvKiByZW1vdmUgc3BhY2VzIGFmdGVyIHRoZSBhbm5vdGF0aW9uICovCisJ
CQkJfSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7CisJCQkJCWUucHJpbnRTdGFja1RyYWNlKCk7
CisJCQkJfQorCQkJfSBlbHNlIGlmIChvbGRBbm5vdGF0aW9uU2l6ZSA9PSAwICYmIG5ld0Fubm90
YXRpb25TaXplID4gMCkgeyAvKiBpbnNlcnRpbmcgZmlyc3QgYW5ub3RhdGlvbiAqLworCQkJCWlm
IChTY2FubmVySGVscGVyLmlzV2hpdGVzcGFjZSh0aGlzLmNvbnRlbnRbbm9kZS5nZXRTdGFydFBv
c2l0aW9uKCkgLSAxXSkpIHsKKwkJCQkJa2V5d29yZFNwYWNlID0gZmFsc2U7IC8qIHNwYWNlIGV4
aXN0cyBhbHJlYWR5ICovCisJCQkJfQorCQkJfQorCQl9CisJCXJld3JpdGVOb2RlTGlzdChub2Rl
LCBEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigp
LCBrZXl3b3JkU3BhY2UgPyBTdHJpbmcudmFsdWVPZignICcpIDogVXRpbC5FTVBUWV9TVFJJTkcs
IFN0cmluZy52YWx1ZU9mKCcgJyksIFN0cmluZy52YWx1ZU9mKCcgJykpOwogCQlyZXR1cm4gZmFs
c2U7CiAJfQogCkBAIC0yMDU4LDEwICsyMTE2LDEzIEBACiAJCUFycmF5VHlwZSBhcnJheVR5cGU9
IChBcnJheVR5cGUpIGdldE9yaWdpbmFsVmFsdWUobm9kZSwgQXJyYXlDcmVhdGlvbi5UWVBFX1BS
T1BFUlRZKTsKIAkJQXJyYXlUeXBlIHJlcGxhY2luZ1R5cGU9IGFycmF5VHlwZTsKIAkJaW50IG5P
bGRCcmFja2V0cz0gZ2V0RGltZW5zaW9ucyhhcnJheVR5cGUpOyAvLyBudW1iZXIgb2YgdG90YWwg
YnJhY2tldHMKKwkJYm9vbGVhbiBhc3RMZXZlbEdURTggPSBub2RlLmdldEFTVCgpLmFwaUxldmVs
KCkgPj0gQVNULkpMUzg7CisJCWJvb2xlYW4gdHlwZVJlcGxhY2VkID0gZmFsc2U7CiAKIAkJVGV4
dEVkaXRHcm91cCBlZGl0R3JvdXA9IG51bGw7CiAJCVJld3JpdGVFdmVudCB0eXBlRXZlbnQ9IGdl
dEV2ZW50KG5vZGUsIEFycmF5Q3JlYXRpb24uVFlQRV9QUk9QRVJUWSk7CiAJCWlmICh0eXBlRXZl
bnQgIT0gbnVsbCAmJiB0eXBlRXZlbnQuZ2V0Q2hhbmdlS2luZCgpID09IFJld3JpdGVFdmVudC5S
RVBMQUNFRCkgeyAvLyBjaGFuZ2VkIGFycmF5dHlwZSBjYW4gaGF2ZSBkaWZmZXJlbnQgZGltZW5z
aW9uIG9yIHR5cGUgbmFtZQorCQkJdHlwZVJlcGxhY2VkID0gdHJ1ZTsKIAkJCXJlcGxhY2luZ1R5
cGU9IChBcnJheVR5cGUpIHR5cGVFdmVudC5nZXROZXdWYWx1ZSgpOwogCQkJZWRpdEdyb3VwPSBn
ZXRFZGl0R3JvdXAodHlwZUV2ZW50KTsKIAkJCVR5cGUgbmV3VHlwZT0gcmVwbGFjaW5nVHlwZS5n
ZXRFbGVtZW50VHlwZSgpOwpAQCAtMjA4MCwxNiArMjE0MSwxNyBAQAogCQkJUmV3cml0ZUV2ZW50
IGRpbUV2ZW50PSBnZXRFdmVudChub2RlLCBBcnJheUNyZWF0aW9uLkRJTUVOU0lPTlNfUFJPUEVS
VFkpOwogCQkJYm9vbGVhbiBoYXNEaW1lbnNpb25DaGFuZ2VzPSAoZGltRXZlbnQgIT0gbnVsbCAm
JiBkaW1FdmVudC5nZXRDaGFuZ2VLaW5kKCkgIT0gUmV3cml0ZUV2ZW50LlVOQ0hBTkdFRCk7CiAJ
CQlSZXdyaXRlRXZlbnRbXSBldmVudHM9IGhhc0RpbWVuc2lvbkNoYW5nZXMgPyBkaW1FdmVudC5n
ZXRDaGlsZHJlbigpIDogbnVsbDsKLQkJCWJvb2xlYW4gYXN0TGV2ZWxHVEU4ID0gbm9kZS5nZXRB
U1QoKS5hcGlMZXZlbCgpID49IEFTVC5KTFM4OwogCQkJQXJyYXlUeXBlIGN1cnJlbnRMZXZlbCA9
IGFzdExldmVsR1RFOCA/IG51bGwgOiAoQXJyYXlUeXBlKSByZXBsYWNpbmdUeXBlLmdldEVsZW1l
bnRUeXBlKCkuZ2V0UGFyZW50KCk7CiAJCQlpbnQgcmVwbGFjaW5nVHlwZURpbWVuc2lvbnMgPSBy
ZXBsYWNpbmdUeXBlLmdldERpbWVuc2lvbnMoKTsKIAkJCWludCBpPTAsIGRpbVNpemU9IChldmVu
dHMgPT0gbnVsbCkgPyAwIDogZXZlbnRzLmxlbmd0aDsKIAkJCVR5cGUgZWxlbWVudFR5cGU9IGFy
cmF5VHlwZS5nZXRFbGVtZW50VHlwZSgpOwogCQkJaW50IG9mZnNldD0gZWxlbWVudFR5cGUuZ2V0
U3RhcnRQb3NpdGlvbigpICsgZWxlbWVudFR5cGUuZ2V0TGVuZ3RoKCk7CisJCQllZGl0R3JvdXAg
PSBudWxsOwogCQkJd2hpbGUoY3VycmVudExldmVsICE9IG51bGwgfHwgYXN0TGV2ZWxHVEU4KSB7
CiAJCQkJaWYgKGkgPCBkaW1TaXplKSB7Ci0JCQkJCWlmIChhc3RMZXZlbEdURTgpIHJld3JpdGVB
bm5vdGF0aW9uc09uRGltZW5zaW9uKHJlcGxhY2luZ1R5cGUsIGksIG9mZnNldCk7Ci0JCQkJCSBv
ZmZzZXQ9IGdldFNjYW5uZXIoKS5nZXRUb2tlbkVuZE9mZnNldChUZXJtaW5hbFRva2Vucy5Ub2tl
bk5hbWVMQlJBQ0tFVCwgb2Zmc2V0KTsKKwkJCQkJaWYgKGFzdExldmVsR1RFOCkKKwkJCQkJCXJl
d3JpdGVBbm5vdGF0aW9uc09uRGltZW5zaW9uKGFycmF5VHlwZSwgcmVwbGFjaW5nVHlwZSwgaSwg
b2Zmc2V0LCB0eXBlUmVwbGFjZWQsIGVkaXRHcm91cCk7CisJCQkJCW9mZnNldD0gZ2V0U2Nhbm5l
cigpLmdldFRva2VuRW5kT2Zmc2V0KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VULCBv
ZmZzZXQpOwogCQkJCQlpZiAoaGFzRGltZW5zaW9uQ2hhbmdlcykgewogCQkJCQkJUmV3cml0ZUV2
ZW50IGV2ZW50PSBldmVudHNbaV07CiAJCQkJCQlpbnQgY2hhbmdlS2luZD0gZXZlbnQuZ2V0Q2hh
bmdlS2luZCgpOwpAQCAtMjEyMyw3ICsyMTg1LDggQEAKIAkJCQkJCW9mZnNldD0gcmV0cmlldmVS
aWdodEJyYWNrZXRFbmRQb3NpdGlvbihvZmZzZXQsIDEsIHRydWUpOwogCQkJCQl9CiAJCQkJfSBl
bHNlIGlmIChpIDwgbk9sZEJyYWNrZXRzKSB7Ci0JCQkJCWlmIChhc3RMZXZlbEdURTgpIHJld3Jp
dGVBbm5vdGF0aW9uc09uRGltZW5zaW9uKHJlcGxhY2luZ1R5cGUsIGksIG9mZnNldCk7CisJCQkJ
CWlmIChhc3RMZXZlbEdURTgpCisJCQkJCQlyZXdyaXRlQW5ub3RhdGlvbnNPbkRpbWVuc2lvbihh
cnJheVR5cGUsIHJlcGxhY2luZ1R5cGUsIGksIG9mZnNldCwgdHlwZVJlcGxhY2VkLCBlZGl0R3Jv
dXApOwogCQkJCQlvZmZzZXQ9IHJldHJpZXZlUmlnaHRCcmFja2V0RW5kUG9zaXRpb24ob2Zmc2V0
LCAxLCBmYWxzZSk7CiAJCQkJfSBlbHNlIHsKIAkJCQkJaW5zZXJ0QW5ub3RhdGlvbnNPbkRpbWVu
c2lvbihyZXBsYWNpbmdUeXBlLCBpLCBvZmZzZXQsIGVkaXRHcm91cCwgYXN0TGV2ZWxHVEU4KTsK
QEAgLTIxNjIsMTggKzIyMjUsMzkgQEAKIAkJCUxpc3QgYW5ub3RhdGlvbnMgPSBkaW0uYW5ub3Rh
dGlvbnMoKTsKIAkJCWlmIChhbm5vdGF0aW9ucyAhPSBudWxsKSB7CiAJCQkJaW50IHNpemUgPSBh
bm5vdGF0aW9ucy5zaXplKCk7Ci0JCQkJZm9yIChpbnQgaiA9IDA7IGogPCBzaXplOyBqKyspIHsK
LQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdl
dChqKTsKLQkJCQkJZG9UZXh0SW5zZXJ0KHBvcywgYW5ub3RhdGlvbi50b1N0cmluZygpICsgIiAi
LCBlZGl0R3JvdXApOyAvLyROT04tTkxTLTEkCisJCQkJaWYgKHNpemUgPiAwKSB7CisJCQkJCWRv
VGV4dEluc2VydChwb3MsICIgIiwgZWRpdEdyb3VwKTsgLy8kTk9OLU5MUy0xJAorCQkJCQlmb3Ig
KGludCBqID0gMDsgaiA8IHNpemU7IGorKykgeworCQkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9u
ID0gKEFubm90YXRpb24pIGFubm90YXRpb25zLmdldChqKTsKKwkJCQkJCWRvVGV4dEluc2VydChw
b3MsIGFubm90YXRpb24udG9TdHJpbmcoKSArICIgIiwgZWRpdEdyb3VwKTsgLy8kTk9OLU5MUy0x
JAorCQkJCQl9CiAJCQkJfQotCQkJCQogCQkJfQogCQl9CiAJfQogCi0JcHJpdmF0ZSB2b2lkIHJl
d3JpdGVBbm5vdGF0aW9uc09uRGltZW5zaW9uKEFycmF5VHlwZSByZXBsYWNpbmdUeXBlLCBpbnQg
aW5kZXgsIGludCBwb3MpIHsKLQkJRGltZW5zaW9uIGRpbSA9IChEaW1lbnNpb24pIHJlcGxhY2lu
Z1R5cGUuZGltZW5zaW9ucygpLmdldChpbmRleCk7Ci0JCXJld3JpdGVUeXBlQW5ub3RhdGlvbnMo
ZGltLCBEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIHBvcyk7CisJcHJpdmF0ZSB2b2lk
IHJld3JpdGVBbm5vdGF0aW9uc09uRGltZW5zaW9uKEFycmF5VHlwZSBvbGRBcnJheVR5cGUsIEFy
cmF5VHlwZSByZXBsYWNpbmdUeXBlLCBpbnQgaW5kZXgsIGludCBwb3MsIGJvb2xlYW4gdHlwZVJl
cGxhY2VkLCBUZXh0RWRpdEdyb3VwIGVkaXRHcm91cCkgdGhyb3dzIENvcmVFeGNlcHRpb24gewor
CQlpZiAodHlwZVJlcGxhY2VkKSB7CisJCQlMaXN0IGRpbWVuc2lvbnMgPSBvbGRBcnJheVR5cGUu
ZGltZW5zaW9ucygpOworCQkJRGltZW5zaW9uIG9sZERpbSA9IGluZGV4IDwgZGltZW5zaW9ucy5z
aXplKCkgPyAoRGltZW5zaW9uKSBkaW1lbnNpb25zLmdldChpbmRleCkgOiBudWxsOworCQkJaWYg
KG9sZERpbSAhPSBudWxsKSB7CisJCQkJTGlzdCBvbGRBbm5vdGF0aW9ucyA9IG9sZERpbS5hbm5v
dGF0aW9ucygpOworCQkJCWludCBzaXplID0gb2xkQW5ub3RhdGlvbnMuc2l6ZSgpOworCQkJCWlm
IChzaXplID4gMCkgeworCQkJCQlBU1ROb2RlIHByZXYgPSBnZXRQcmV2aW91c05vZGUob2xkRGlt
KTsKKwkJCQkJQW5ub3RhdGlvbiBhbm5vdGF0aW9uID0gKEFubm90YXRpb24pIG9sZEFubm90YXRp
b25zLmdldCgwKTsKKwkJCQkJaW50IHN0YXJ0ID0gcHJldiAhPSBudWxsID8gcHJldi5nZXRTdGFy
dFBvc2l0aW9uKCkgKyBwcmV2LmdldExlbmd0aCgpIDogYW5ub3RhdGlvbi5nZXRTdGFydFBvc2l0
aW9uKCk7CisJCQkJCWFubm90YXRpb24gPSAoQW5ub3RhdGlvbikgb2xkQW5ub3RhdGlvbnMuZ2V0
KHNpemUgLSAxKTsKKwkJCQkJaW50IGVuZCA9IGFubm90YXRpb24uZ2V0U3RhcnRQb3NpdGlvbigp
ICsgYW5ub3RhdGlvbi5nZXRMZW5ndGgoKTsKKwkJCQkJZW5kID0gZ2V0U2Nhbm5lcigpLmdldFRv
a2VuRW5kT2Zmc2V0KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUxCUkFDS0VULCBlbmQpIC0gMTsK
KwkJCQkJZG9UZXh0UmVtb3ZlKHN0YXJ0LCBlbmQgLSBzdGFydCwgZWRpdEdyb3VwKTsKKwkJCQl9
CisJCQl9CisJCQlpbnNlcnRBbm5vdGF0aW9uc09uRGltZW5zaW9uKHJlcGxhY2luZ1R5cGUsIGlu
ZGV4LCBwb3MsIGVkaXRHcm91cCwgdHJ1ZSk7CisJCX0gZWxzZSB7CisJCQlEaW1lbnNpb24gZGlt
ID0gKERpbWVuc2lvbikgcmVwbGFjaW5nVHlwZS5kaW1lbnNpb25zKCkuZ2V0KGluZGV4KTsKKwkJ
CXJld3JpdGVOb2RlTGlzdChkaW0sIERpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSwgcG9z
LCBTdHJpbmcudmFsdWVPZignICcpLCBTdHJpbmcudmFsdWVPZignICcpLCBTdHJpbmcudmFsdWVP
ZignICcpKTsKKwkJfQogCX0KIAogCS8qKgpAQCAtMjI0MSw3ICsyMzI1LDkgQEAKIAkJcmV0dXJu
IGZhbHNlOwogCX0KIAotCisJcHJpdmF0ZSBpbnQgcmV3cml0ZUFycmF5VHlwZURpbWVuc2lvbnMo
QXJyYXlUeXBlIG5vZGUsIGludCBwb3MpIHsKKwkJcmV0dXJuIHJld3JpdGVOb2RlTGlzdChub2Rl
LCBBcnJheVR5cGUuRElNRU5TSU9OU19QUk9QRVJUWSwgcG9zLCBVdGlsLkVNUFRZX1NUUklORywg
IiIpOyAvLyROT04tTkxTLTEkCisJfQogCiAJLyogKG5vbi1KYXZhZG9jKQogCSAqIEBzZWUgb3Jn
LmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFZpc2l0b3IjdmlzaXQoQXJyYXlUeXBlKQpAQCAtMjI1
NCw3ICsyMzQwLDcgQEAKIAkJCXJld3JpdGVSZXF1aXJlZE5vZGUobm9kZSwgSU5URVJOQUxfQVJS
QVlfQ09NUE9ORU5UX1RZUEVfUFJPUEVSVFkpOwogCQl9IGVsc2UgewogCQkJaW50IHBvcyA9IHJl
d3JpdGVSZXF1aXJlZE5vZGUobm9kZSwgQXJyYXlUeXBlLkVMRU1FTlRfVFlQRV9QUk9QRVJUWSk7
Ci0JCQlyZXdyaXRlTm9kZUxpc3Qobm9kZSwgQXJyYXlUeXBlLkRJTUVOU0lPTlNfUFJPUEVSVFks
IHBvcywgVXRpbC5FTVBUWV9TVFJJTkcsICIgIik7IC8vJE5PTi1OTFMtMSQKKwkJCXJld3JpdGVB
cnJheVR5cGVEaW1lbnNpb25zKG5vZGUsIHBvcyk7CiAJCX0KIAkJcmV0dXJuIGZhbHNlOwogCX0K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3Jp
dGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCmluZGV4IDc0ZjBiMjMuLjA5ZmRhMzMgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRl
L0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQpAQCAtMzA1LDcgKzMwNSw3IEBACiAJCQl0aGlzLnJl
c3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQKIAkJfSBlbHNlIHsKIAkJCWdldENoaWxk
Tm9kZShub2RlLCBBcnJheVR5cGUuRUxFTUVOVF9UWVBFX1BST1BFUlRZKS5hY2NlcHQodGhpcyk7
Ci0JCQl2aXNpdExpc3Qobm9kZSwgQXJyYXlUeXBlLkRJTUVOU0lPTlNfUFJPUEVSVFksIFN0cmlu
Zy52YWx1ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignICcpKTsK
KwkJCXZpc2l0TGlzdChub2RlLCBBcnJheVR5cGUuRElNRU5TSU9OU19QUk9QRVJUWSwgVXRpbC5F
TVBUWV9TVFJJTkcsIFV0aWwuRU1QVFlfU1RSSU5HLCBVdGlsLkVNUFRZX1NUUklORyk7CiAJCX0K
IAkJcmV0dXJuIGZhbHNlOwogCX0=
</data>

          </attachment>
      

    </bug>

</bugzilla>