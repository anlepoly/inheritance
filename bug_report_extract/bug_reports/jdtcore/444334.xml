<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>444334</bug_id>
          
          <creation_ts>2014-09-17 04:30:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Compiler generates error instead of warning on unchecked conversion</short_desc>
          <delta_ts>2015-02-04 07:17:38 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>4.4.2 candidate</status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M3</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Zender">michael.zender</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>b.michael</cc>
    
    <cc>hstaudacher</cc>
    
    <cc>jarthana</cc>
    
    <cc>king</cc>
    
    <cc>pavageau</cc>
    
    <cc>pbielicki</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="63689"
          type_id="1"
          status="+"
          setter="stephan.herrmann"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2452915</commentid>
    <comment_count>0</comment_count>
      <attachid>247143</attachid>
    <who name="Michael Zender">michael.zender</who>
    <bug_when>2014-09-17 04:30:51 -0400</bug_when>
    <thetext>Created attachment 247143
Testproject reproducing the described behavior

Consider the following Code:

public class TestGenericUncheckedConversion {
    public static void main(String[] args) {
        doSomething(returnClassType(Class.class));
        doSomething(returnListType(new ArrayList&lt;List&gt;()));
    }

    public static &lt;T&gt; void doSomething(Class&lt;T&gt; clazz) {
        System.out.println(clazz.getSimpleName());
    }
    public static &lt;T&gt; T returnClassType(Class&lt;T&gt; clazz) {
        return null;
    }
    public static &lt;T&gt; void doSomething(List&lt;T&gt; list) {
        System.out.println(list.getClass().getSimpleName());
    }
    public static &lt;T&gt; T returnListType(List&lt;T&gt; list) {
        return null;
    }
}

The Eclipse JavaSE-1.7 compiler issues warnings for both doSomething() calls in the class&apos;s main method which can be suppressed by adding the @SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot; }) annotation to the method:

- Type safety: The expression of type Class needs unchecked conversion to conform to Class&lt;Object&gt;
- Type safety: The expression of type List needs unchecked conversion to conform to List&lt;Object&gt;
- Type safety: Unchecked invocation doSomething(Class) of the generic method doSomething(Class&lt;T&gt;) of type TestGenericUncheckedConversion
- Type safety: Unchecked invocation doSomething(List) of the generic method doSomething(List&lt;T&gt;) of type TestGenericUncheckedConversion
- (List is a raw type. References to generic type List&lt;E&gt; should be parameterized)

Using the JavaSE-1.8 compiler however instead of the warnings mentioned above an error is generated for each doSomething() call:

- The method doSomething(Class&lt;T&gt;) in the type TestGenericUncheckedConversion is not applicable for the arguments (Class)
- The method doSomething(Class&lt;T&gt;) in the type TestGenericUncheckedConversion is not applicable for the arguments (List)

Using Java8&apos;s javac, the code just compiles fine.

On the second invocation of doSomething(), the error goes away when the generic type argument for List is specified. However in the first example, this solution is not possible because the generic type argument for Class.class is just Class and not Class&lt;Class&gt; (which would be recursive :D).

Although this seems like a bit of a constructed example, we are actually facing this problem during transition from JavaSE-1.7 to JavaSE-1.8. Many of our unit tests for a registry like object contain jMock code similar to the following example:

allowing(registry).getObject(with(any(Class.class));

I tested this with the following Eclipse releases all yielding the same result:
- Kepler with Java8 Support Patch applied
- Luna 4.4
- Luna 4.4 SR1 RC3
- Mars 4.5 M1

I also checked the Java - Compiler - Errors/Warnings Preferences but no option in the &quot;Generic types&quot; section is set to &quot;Error&quot;.

You can find my test project attached to this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452942</commentid>
    <comment_count>1</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-09-17 05:06:15 -0400</bug_when>
    <thetext>Sounds familiar. But can&apos;t figure out an existing bug if any.

Stephan, please take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2453439</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-18 00:00:12 -0400</bug_when>
    <thetext>Targetting for 4.5 M3. While ATM ownership is left unchanged, Stephan is under
time constraint during this window, so I will likely take this over or assign to someone else to load balance later on.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2467645</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-19 00:31:25 -0400</bug_when>
    <thetext>I&apos;ll take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2467669</commentid>
    <comment_count>4</comment_count>
      <attachid>247993</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-19 07:29:50 -0400</bug_when>
    <thetext>Created attachment 247993
Proposed patch

This patch also fixes https://bugs.eclipse.org/bugs/show_bug.cgi?id=438246 and
https://bugs.eclipse.org/bugs/show_bug.cgi?id=430987 and has tests for them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2467670</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-19 07:31:30 -0400</bug_when>
    <thetext>Stephan, thanks for a review (after F &amp; G work). This may need some
discussion because the spec does not delineate when and where exactly
type argument constraints should be deemed soft and we have only vaguish
recommendations to go by.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2467672</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-19 07:35:25 -0400</bug_when>
    <thetext>See also https://bugs.eclipse.org/bugs/show_bug.cgi?id=430987#c8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2467770</commentid>
    <comment_count>7</comment_count>
      <attachid>247998</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-19 22:09:57 -0400</bug_when>
    <thetext>Created attachment 247998
Revised patch.

See also https://bugs.eclipse.org/bugs/show_bug.cgi?id=430987#c13

Stephan, please take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2467957</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-20 07:32:44 -0400</bug_when>
    <thetext>The patch is on top of

   - the 4 patches at https://bugs.eclipse.org/bugs/show_bug.cgi?id=437444
   - the patch at https://bugs.eclipse.org/bugs/show_bug.cgi?id=430686

applied in that order.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2468068</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-20 10:08:34 -0400</bug_when>
    <thetext>For the record: A query has been raised with the spec author for 
clarifications. It does appear this program is illegal according
to literal application of JLS8 rules. So ATM, it could be a bug
against JLS8 or javac or ECJ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2468577</commentid>
    <comment_count>10</comment_count>
      <attachid>247998</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-21 06:52:30 -0400</bug_when>
    <thetext>Comment on attachment 247998
Revised patch.

Will repost after hearing from spec author.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2470887</commentid>
    <comment_count>11</comment_count>
      <attachid>248148</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-24 04:33:07 -0400</bug_when>
    <thetext>Created attachment 248148
Proposed patch

Take 3 - we are good this time !</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2470890</commentid>
    <comment_count>12</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-24 04:38:37 -0400</bug_when>
    <thetext>I believe this is the real fix. Thanks for a review Stephan.

This patch is on top of

    - The &quot;Correct merged patch&quot; for bug 437444
    - the patch at https://bugs.eclipse.org/bugs/show_bug.cgi?id=430686
    - the patch at https://bugs.eclipse.org/bugs/show_bug.cgi?id=440019
    - the patch at https://bugs.eclipse.org/bugs/show_bug.cgi?id=448028

applied in that order.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2471796</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-25 12:56:21 -0400</bug_when>
    <thetext>*** Bug 430987 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2471800</commentid>
    <comment_count>14</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-25 12:59:54 -0400</bug_when>
    <thetext>*** Bug 438246 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2472093</commentid>
    <comment_count>15</comment_count>
      <attachid>248191</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-26 22:38:03 -0400</bug_when>
    <thetext>Created attachment 248191
Same patch synched with master</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2472135</commentid>
    <comment_count>16</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-27 02:40:14 -0400</bug_when>
    <thetext>Per https://bugs.eclipse.org/bugs/show_bug.cgi?id=430987#c28, I&apos;ll be
leaving in a couple of methods that are unused at this point, but may
be put to use at a later point in time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2472363</commentid>
    <comment_count>17</comment_count>
      <attachid>248205</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-27 08:55:10 -0400</bug_when>
    <thetext>Created attachment 248205
Revised patch.

Same patch as before - with a few methods relating to unchecked conversion
reporting restored for potential future use.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2472668</commentid>
    <comment_count>18</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-27 18:03:55 -0400</bug_when>
    <thetext>Stephan is out of time this week and offered to review next week.

Fix and tests released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=ec64763fa4e57b4943311ee555e5ddce81854cf2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2472682</commentid>
    <comment_count>19</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-10-27 18:35:33 -0400</bug_when>
    <thetext>*** Bug 434118 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2473183</commentid>
    <comment_count>20</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-10-29 01:05:57 -0400</bug_when>
    <thetext>Verified for 4.5 M3 using I20141028-2000 build</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2475101</commentid>
    <comment_count>21</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-11-01 10:02:40 -0400</bug_when>
    <thetext>For posterity: changes inside CExprF.inferPolyInvocationType() seem to be related to https://bugs.openjdk.java.net/browse/JDK-8062082 right?


Patch looks good to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2488694</commentid>
    <comment_count>22</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-11-25 05:15:31 -0500</bug_when>
    <thetext>This is proving to be too much work as the original fix is depending on bug 437444 code wise. I think that is the case with bug 443596 as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2507031</commentid>
    <comment_count>23</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2015-01-18 08:31:11 -0500</bug_when>
    <thetext>*** Bug 457791 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>247143</attachid>
            <date>2014-09-17 04:30:00 -0400</date>
            <delta_ts>2014-09-17 04:30:51 -0400</delta_ts>
            <desc>Testproject reproducing the described behavior</desc>
            <filename>Java8CompileTest.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>2501</size>
            <attacher name="Michael Zender">michael.zender</attacher>
            
              <data encoding="base64">UEsDBBQAAAAAAKZTMUUAAAAAAAAAAAAAAAARAAAASmF2YThDb21waWxlVGVzdC9QSwMEFAAAAAgA
NFIxRQ2aJEK3AAAALQEAABsAAABKYXZhOENvbXBpbGVUZXN0Ly5jbGFzc3BhdGh9j80KwjAQhM8K
vkPJ3a3ePLSKSAUFFbR6lZgsNRo3JT+ib2/9KYqgt53lG2YmGVxOOjqjdcpQyrrQYRGSMFJRkbJ1
Pm732KDfaiZCc+dK7veVaLwVkrfX6KhIpsxZwaL783nGv0lhqCaNLQCFVqVDOEgPmgcS+yodpsts
O1rM8+Fkni3jb06RR0tcg8RdKCColxMtrDwnya3czPJrifGUn/kqa3eh96+SCb4Mvm61U/SAk/hz
9w1QSwMEFAAAAAgADk0xRdaW+mHEAAAAiAEAABkAAABKYXZhOENvbXBpbGVUZXN0Ly5wcm9qZWN0
fZC7DoIwGIVnTXwHwi7VjaHAgHFwFR+glj+khF7SFuLj25vBS+LUfue/nNPi5sGnbAFtmBRVfiwO
eQaCyp6Jocpv3Xlf5k2922Kl5QjUnsBQzZR13U7dYEE41BeykLKVXLEJOjAWIy+HOpWcg7A1Runm
1dcyEwB90H1mU39VQD0lbN0oEX1QkqXUQwF0YspAMfa2oFK7i8sRBkDHCGmC6GH23iYxehc8f7kE
ZY3hLe2sIXQn+JMg1jGKZ1y3LgjP/f3JJ1BLAwQUAAAAAAAOTTFFAAAAAAAAAAAAAAAAGwAAAEph
dmE4Q29tcGlsZVRlc3QvLnNldHRpbmdzL1BLAwQUAAAACAA0UjFFOdZRF9EAAACeAgAANQAAAEph
dmE4Q29tcGlsZVRlc3QvLnNldHRpbmdzL29yZy5lY2xpcHNlLmpkdC5jb3JlLnByZWZzlZCxagMx
DIb3Qt8hT2DI1sVLh0JLKZm6+87/XV1sychyIG8fGZLdtxhh+9MvfVhzqg2uCjYIaEVzV0hLTP78
+sKyu+eX/6huZYEdpaYMsSJiB7lEORG+mrzfFOPSg8KSEWcbFOgfx0uQYJWl+8gnYj3ZGyQoZvto
kB16yUE3luLP7m2W7NQb4jevIXtz0SDXidRScwrmbCYpYum7G6J+elkgfna5BzhG+w2ShtiDbOMu
Kz7SAbAKW05xoZkK/YwgTVuyqSHCMkuDejnKjmGfRu9QSwMEFAAAAAAAplMxRQAAAAAAAAAAAAAA
ABUAAABKYXZhOENvbXBpbGVUZXN0L2Jpbi9QSwMEFAAAAAAAGU0xRQAAAAAAAAAAAAAAABUAAABK
YXZhOENvbXBpbGVUZXN0L3NyYy9QSwMEFAAAAAAAo1MxRQAAAAAAAAAAAAAAACYAAABKYXZhOENv
bXBpbGVUZXN0L3NyYy9qYXZhOGNvbXBpbGV0ZXN0L1BLAwQUAAAACACmUjFFTMhdShcBAADRAgAA
SQAAAEphdmE4Q29tcGlsZVRlc3Qvc3JjL2phdmE4Y29tcGlsZXRlc3QvVGVzdEdlbmVyaWNVbmNo
ZWNrZWRDb252ZXJzaW9uLmphdmGdUT1PwzAU3CPlP3h0Fs9IrSqhDiyIJWFCDMZ5Sk39Jfs5KEX8
d2w3LZSKFuFEtuV79+7Odlxs+QDklY/8RljtpAKEgIu6qiupnfVYMBZRKnbrPZ/uZYbPwXS+p7n4
oqQgQvEQSJea3YEBL8WjERsQW+jX1ozgg7SGvNcVSWOmBOSYltHKnmguDW3RSzM8PRPuh9CU6nn0
trUacJNg6gGjN+us100OaNmxot80i0uc7LlQDLyRY7plnla0OZI/cqxzn8tuVbx+b7wXz0jS3+1O
PLdTQNDMRmQu5UJlaCliA2Cb7lPBA9dAv2R/E+3Ij8gXVOdSYqJSh75/DpMvIgMqrdei5JqcpFih
zb9DHd7kRPx6ovTn7xNQSwECPwAUAAAAAACmUzFFAAAAAAAAAAAAAAAAEQAkAAAAAAAAABAAAAAA
AAAASmF2YThDb21waWxlVGVzdC8KACAAAAAAAAEAGADdu0x1UdLPAd27THVR0s8BW74tpkrSzwFQ
SwECPwAUAAAACAA0UjFFDZokQrcAAAAtAQAAGwAkAAAAAAAAACAAAAAvAAAASmF2YThDb21waWxl
VGVzdC8uY2xhc3NwYXRoCgAgAAAAAAABABgADYF92E/SzwEdgTKmStLPAR2BMqZK0s8BUEsBAj8A
FAAAAAgADk0xRdaW+mHEAAAAiAEAABkAJAAAAAAAAAAgAAAAHwEAAEphdmE4Q29tcGlsZVRlc3Qv
LnByb2plY3QKACAAAAAAAAEAGABbvi2mStLPAVu+LaZK0s8BW74tpkrSzwFQSwECPwAUAAAAAAAO
TTFFAAAAAAAAAAAAAAAAGwAkAAAAAAAAABAAAAAaAgAASmF2YThDb21waWxlVGVzdC8uc2V0dGlu
Z3MvCgAgAAAAAAABABgAvB8wpkrSzwG8HzCmStLPAbwfMKZK0s8BUEsBAj8AFAAAAAgANFIxRTnW
URfRAAAAngIAADUAJAAAAAAAAAAgAAAAUwIAAEphdmE4Q29tcGlsZVRlc3QvLnNldHRpbmdzL29y
Zy5lY2xpcHNlLmpkdC5jb3JlLnByZWZzCgAgAAAAAAABABgADYF92E/SzwG8HzCmStLPAbwfMKZK
0s8BUEsBAj8AFAAAAAAAplMxRQAAAAAAAAAAAAAAABUAJAAAAAAAAAAQAAAAdwMAAEphdmE4Q29t
cGlsZVRlc3QvYmluLwoAIAAAAAAAAQAYAN27THVR0s8B3btMdVHSzwHdu0x1UdLPAVBLAQI/ABQA
AAAAABlNMUUAAAAAAAAAAAAAAAAVACQAAAAAAAAAEAAAAKoDAABKYXZhOENvbXBpbGVUZXN0L3Ny
Yy8KACAAAAAAAAEAGABEwFqzStLPAUTAWrNK0s8BW74tpkrSzwFQSwECPwAUAAAAAACjUzFFAAAA
AAAAAAAAAAAAJgAkAAAAAAAAABAAAADdAwAASmF2YThDb21waWxlVGVzdC9zcmMvamF2YThjb21w
aWxldGVzdC8KACAAAAAAAAEAGAD9cD9xUdLPAf1wP3FR0s8BRMBas0rSzwFQSwECPwAUAAAACACm
UjFFTMhdShcBAADRAgAASQAkAAAAAAAAACAAAAAhBAAASmF2YThDb21waWxlVGVzdC9zcmMvamF2
YThjb21waWxldGVzdC9UZXN0R2VuZXJpY1VuY2hlY2tlZENvbnZlcnNpb24uamF2YQoAIAAAAAAA
AQAYAL1zKVdQ0s8Bz5Z9u0rSzwHPln27StLPAVBLBQYAAAAACQAJABAEAACfBQAAAAA=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>247993</attachid>
            <date>2014-10-19 07:29:00 -0400</date>
            <delta_ts>2014-10-19 22:09:57 -0400</delta_ts>
            <desc>Proposed patch</desc>
            <filename>Rawtypefix.patch</filename>
            <type>text/plain</type>
            <size>11083</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVncmVz
c2lvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVn
cmVzc2lvblRlc3QuamF2YQppbmRleCBhNTExYjRiLi5iNGZkMzcwIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9HZW5lcmljc1JlZ3Jlc3Npb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR2VuZXJpY3NSZWdyZXNzaW9uVGVzdC5q
YXZhCkBAIC00NTcxLDYwICs0NTcxLDYzIEBACiAJCQkiICB9XG4iICsgCiAJCQkiXG4iICsgCiAJ
CQkifVxuIjsKLQlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0ZpbGVDb25zdGFudHMu
SkRLMV84KSB7Ci0JCXJ1bkNvbmZvcm1UZXN0KAotCQkJbmV3IFN0cmluZ1tdIHsKLQkJCQkiWC5q
YXZhIiwKLQkJCQlzb3VyY2UKLQkJCX0pOwotCX0gZWxzZSB7CisJCiAJCXJ1bk5lZ2F0aXZlVGVz
dCgKIAkJCW5ldyBTdHJpbmdbXSB7CiAJCQkJIlguamF2YSIsCiAJCQkJc291cmNlCiAJCQl9LAog
CQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClc
biIgKyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAogCQkJIglk
b1NvbWV0aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtc
biIgKyAKLQkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCi0JCQkiVGhlIG1ldGhvZCBkb1Nv
bWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBpbiB0aGUgdHlwZSBYIGlzIG5vdCBh
cHBsaWNhYmxlIGZvciB0aGUgYXJndW1lbnRzIChYLkZvbywgWC5Gb28pXG4iICsgCisJCQkiCV5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4i
ICsgCisJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRvU29tZXRoaW5nV2l0
aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZ1dpdGhG
b28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4i
ICsgCi0JCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTIpXG4iICsgCisJCQkiMi4g
V0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmdXaXRo
Rm9vKCBhbnkoIEZvby5jbGFzcyApLCBhbnkoIEZvby5jbGFzcyApICk7XG4iICsgCisJCQkiCSAg
ICAgICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5
OiBUaGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9u
IHRvIGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAK
KwkJCSIzLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAorCQkJIglkb1NvbWV0
aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIgKyAK
KwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5e
Xl5eXG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5Gb28g
bmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+XG4i
ICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBs
aW5lIDEyKVxuIiArIAogCQkJIglGb28gZm9vID0gYW55KCBGb28uY2xhc3MgKTtcbiIgKyAKIAkJ
CSIJXl5eXG4iICsgCiAJCQkiWC5Gb28gaXMgYSByYXcgdHlwZS4gUmVmZXJlbmNlcyB0byBnZW5l
cmljIHR5cGUgWC5Gb288VD4gc2hvdWxkIGJlIHBhcmFtZXRlcml6ZWRcbiIgKyAKIAkJCSItLS0t
LS0tLS0tXG4iICsgCi0JCQkiMy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsg
CisJCQkiNS4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRvU29t
ZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9u
IGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBk
b1NvbWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJ
CSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNC4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMp
XG4iICsgCisJCQkiNi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQki
CWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJICAgICAgICAgICAg
ICAgICAgICBeXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Npb24gb2YgdHlw
ZSBYLkZvbyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFguRm9vPE9i
amVjdD5cbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNS4gV0FSTklORyBpbiBYLmph
dmEgKGF0IGxpbmUgMTMpXG4iICsgCisJCQkiNy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUg
MTMpXG4iICsgCiAJCQkiCWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJ
CSIJICAgICAgICAgICAgICAgICAgICAgICAgIF5eXlxuIiArIAogCQkJIlR5cGUgc2FmZXR5OiBU
aGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRv
IGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJ
CSI2LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKKwkJCSI4LiBXQVJOSU5H
IGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRo
aW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAog
CQkJIgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9j
YXRpb24gZG9Tb21ldGhpbmdXaXRoRm9vKFguRm9vLCBYLkZvbykgb2YgdGhlIGdlbmVyaWMgbWV0
aG9kIGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbzxUPiwgWC5Gb288VD4pIG9mIHR5cGUgWFxuIiAr
IAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI3LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGlu
ZSAxNylcbiIgKyAKKwkJCSI5LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAK
IAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwg
YW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHBy
ZXNzaW9uIG9mIHR5cGUgWC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9y
bSB0byBYLkZvbzxPYmplY3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIiArIAotCQkJIjguIFdB
Uk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDE3KVxuIiArIAorCQkJIjEwLiBXQVJOSU5HIGluIFgu
amF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0
aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5e
Xl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUg
WC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmpl
Y3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7Ci0JfQogfQogcHVibGljIHZvaWQgdGVzdEJ1
ZzQzMDY4NigpIHsKIAlydW5Db25mb3JtVGVzdCgKQEAgLTU1MDMsNSArNTUwNiw4NSBAQAogCQkJ
IlR5cGUgc2FmZXR5OiBQb3RlbnRpYWwgaGVhcCBwb2xsdXRpb24gdmlhIHZhcmFyZ3MgcGFyYW1l
dGVyIGFyZ1xuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIpOwogfQorLy8gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQ0NDMzNCwgIFsxLjhdW2NvbXBpbGVyXSBD
b21waWxlciBnZW5lcmF0ZXMgZXJyb3IgaW5zdGVhZCBvZiB3YXJuaW5nIG9uIHVuY2hlY2tlZCBj
b252ZXJzaW9uIAorcHVibGljIHZvaWQgdGVzdDQ0NDMzNCgpIHsKKwkJdGhpcy5ydW5OZWdhdGl2
ZVRlc3QoCisJCSAgIG5ldyBTdHJpbmdbXSB7CisJCQkgICAiWC5qYXZhIiwKKwkJCSAgICJpbXBv
cnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiIgKworCQkJICAgImltcG9ydCBqYXZhLnV0aWwuTGlz
dDtcbiIgKworCQkJICAgInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJICAgIiAgICBwdWJsaWMg
c3RhdGljIHZvaWQgTWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCSAgICIgICAgICAgIGRv
U29tZXRoaW5nKHJldHVybkNsYXNzVHlwZShDbGFzcy5jbGFzcykpO1xuIiArCisJCQkgICAiICAg
ICAgICBkb1NvbWV0aGluZyhyZXR1cm5MaXN0VHlwZShuZXcgQXJyYXlMaXN0PExpc3Q+KCkpKTtc
biIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gdm9p
ZCBkb1NvbWV0aGluZyhDbGFzczxUPiBjbGF6eikge1xuIiArCisJCQkgICAiICAgICAgICBTeXN0
ZW0ub3V0LnByaW50bG4oY2xhenouZ2V0U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9
XG4iICsKKwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gVCByZXR1cm5DbGFzc1R5cGUoQ2xh
c3M8VD4gY2xhenopIHtcbiIgKworCQkJICAgIiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJ
CSAgICIgICAgfVxuIiArCisJCQkgICAiICAgIHB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgZG9Tb21l
dGhpbmcoTGlzdDxUPiBsaXN0KSB7XG4iICsKKwkJCSAgICIgICAgICAgIFN5c3RlbS5vdXQucHJp
bnRsbihsaXN0LmdldENsYXNzKCkuZ2V0U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9
XG4iICsKKwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gVCByZXR1cm5MaXN0VHlwZShMaXN0
PFQ+IGxpc3QpIHtcbiIgKworCQkJICAgIiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJCSAg
ICIgICAgfVxuIiArCisJCQkgICAifVxuIiwKKwkJICAgfSwKKwkJICAgIi0tLS0tLS0tLS1cbiIg
KyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA1KVxuIiArIAorCQkJIglkb1Nv
bWV0aGluZyhyZXR1cm5DbGFzc1R5cGUoQ2xhc3MuY2xhc3MpKTtcbiIgKyAKKwkJCSIJXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCSJUeXBlIHNhZmV0
eTogVW5jaGVja2VkIGludm9jYXRpb24gZG9Tb21ldGhpbmcoQ2xhc3MpIG9mIHRoZSBnZW5lcmlj
IG1ldGhvZCBkb1NvbWV0aGluZyhDbGFzczxUPikgb2YgdHlwZSBYXG4iICsgCisJCQkiLS0tLS0t
LS0tLVxuIiArIAorCQkJIjIuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDUpXG4iICsgCisJ
CQkiCWRvU29tZXRoaW5nKHJldHVybkNsYXNzVHlwZShDbGFzcy5jbGFzcykpO1xuIiArIAorCQkJ
IgkgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlw
ZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgQ2xhc3MgbmVlZHMgdW5jaGVja2VkIGNv
bnZlcnNpb24gdG8gY29uZm9ybSB0byBDbGFzczxPYmplY3Q+XG4iICsgCisJCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkJIjMuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCQki
CWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiAr
IAorCQkJIgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBVbmNoZWNrZWQgaW52b2NhdGlvbiBkb1NvbWV0aGlu
ZyhMaXN0KSBvZiB0aGUgZ2VuZXJpYyBtZXRob2QgZG9Tb21ldGhpbmcoTGlzdDxUPikgb2YgdHlw
ZSBYXG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZh
IChhdCBsaW5lIDYpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBB
cnJheUxpc3Q8TGlzdD4oKSkpO1xuIiArIAorCQkJIgkgICAgICAgICAgICBeXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHBy
ZXNzaW9uIG9mIHR5cGUgTGlzdCBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3Jt
IHRvIExpc3Q8T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJCSI1LiBXQVJO
SU5HIGluIFguamF2YSAoYXQgbGluZSA2KVxuIiArIAorCQkJIglkb1NvbWV0aGluZyhyZXR1cm5M
aXN0VHlwZShuZXcgQXJyYXlMaXN0PExpc3Q+KCkpKTtcbiIgKyAKKwkJCSIJICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXG4iICsgCisJCQkiTGlzdCBpcyBhIHJh
dyB0eXBlLiBSZWZlcmVuY2VzIHRvIGdlbmVyaWMgdHlwZSBMaXN0PEU+IHNob3VsZCBiZSBwYXJh
bWV0ZXJpemVkXG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIik7Cit9CisvLyBodHRwczovL2J1Z3Mu
ZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDM4MjQ2LCBbMS44XVtjb21waWxlcl0g
SmF2YSA4IHN0YXRpYyBtZXRob2RzIGNvbXBpbGF0aW9uIGVycm9yICAKK3B1YmxpYyB2b2lkIHRl
c3Q0MzgyNDYoKSB7CisJCWlmICh0aGlzLmNvbXBsaWFuY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0
YW50cy5KREsxXzcpCisJCQlyZXR1cm47CisJCXRoaXMucnVuTmVnYXRpdmVUZXN0KAorCQkgICBu
ZXcgU3RyaW5nW10geworCQkJICAgIkZvby5qYXZhIiwKKwkJCSAgICJpbXBvcnQgamF2YS51dGls
Lkxpc3Q7XG4iICsKKwkJCSAgICJwdWJsaWMgYWJzdHJhY3QgY2xhc3MgRm9vPEM+XG4iICsKKwkJ
CSAgICJ7XG4iICsKKwkJCSAgICIgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4i
ICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0aWMgPEM+IHZvaWQgZG9pdCggTGlzdDxGb288Qz4+IHdv
cmtlcnMgKVxuIiArCisJCQkgICAiICB7XG4iICsKKwkJCSAgICIgICAgZG9pdCggIHdvcmtlcnMu
dG9BcnJheSggbmV3IEZvb1t3b3JrZXJzLnNpemUoKV0gKSApO1xuIiArCisJCQkgICAiICB9XG4i
ICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0aWMgPEM+IHZvaWQgZG9pdCggRm9vPEM+Li4uIHdvcmtl
cnMgKVxuIiArCisJCQkgICAiICB7XG4iICsKKwkJCSAgICIgIH1cbiIgKworCQkJICAgIn1cbiIs
CisJCSAgIH0sCisJCSAgICItLS0tLS0tLS0tXG4iICsgCisJCQkiMS4gV0FSTklORyBpbiBGb28u
amF2YSAoYXQgbGluZSA5KVxuIiArIAorCQkJIglwdWJsaWMgc3RhdGljIDxDPiB2b2lkIGRvaXQo
IEZvbzxDPi4uLiB3b3JrZXJzIClcbiIgKyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBQb3RlbnRpYWwg
aGVhcCBwb2xsdXRpb24gdmlhIHZhcmFyZ3MgcGFyYW1ldGVyIHdvcmtlcnNcbiIgKyAKKwkJCSIt
LS0tLS0tLS0tXG4iKTsKK30KIH0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
Y29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db25zdHJh
aW50RXhwcmVzc2lvbkZvcm11bGEuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29uc3RyYWludEV4cHJl
c3Npb25Gb3JtdWxhLmphdmEKaW5kZXggMjgyMDYzOC4uNDQ0MmNiMCAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2xvb2t1cC9Db25zdHJhaW50RXhwcmVzc2lvbkZvcm11bGEuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL0NvbnN0cmFpbnRFeHByZXNzaW9uRm9ybXVsYS5qYXZhCkBAIC0zNDksNyArMzQ5LDcg
QEAKIAkJCQlQYXJhbWV0ZXJpemVkVHlwZUJpbmRpbmcgZ2JldGEgPSBpbmZlcmVuY2VDb250ZXh0
LmVudmlyb25tZW50LmNyZWF0ZVBhcmFtZXRlcml6ZWRUeXBlKAogCQkJCQkJcGFyYW1ldGVyaXpl
ZFR5cGUuZ2VuZXJpY1R5cGUoKSwgYmV0YXMsIHBhcmFtZXRlcml6ZWRUeXBlLmVuY2xvc2luZ1R5
cGUoKSwgcGFyYW1ldGVyaXplZFR5cGUuZ2V0VHlwZUFubm90YXRpb25zKCkpOwogCQkJCWluZmVy
ZW5jZUNvbnRleHQuY3VycmVudEJvdW5kcy5jYXB0dXJlcy5wdXQoZ2JldGEsIHBhcmFtZXRlcml6
ZWRUeXBlLmNhcHR1cmUoaW5mZXJlbmNlQ29udGV4dC5zY29wZSwgaW52b2NhdGlvblNpdGUuc291
cmNlRW5kKCkpKTsgLy8gZXN0YWJsaXNoZWQ6IGJvdGggdHlwZXMgaGF2ZSBub25udWxsIGFyZ3Vt
ZW50cwotCQkJCUNvbnN0cmFpbnRUeXBlRm9ybXVsYSBuZXdDb25zdHJhaW50ID0gQ29uc3RyYWlu
dFR5cGVGb3JtdWxhLmNyZWF0ZShnYmV0YSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSk7CisJCQkJ
Q29uc3RyYWludFR5cGVGb3JtdWxhIG5ld0NvbnN0cmFpbnQgPSBDb25zdHJhaW50VHlwZUZvcm11
bGEuY3JlYXRlKGdiZXRhLCB0YXJnZXRUeXBlLCBDT01QQVRJQkxFLCB0cnVlKTsKIAkJCQlyZXR1
cm4gaW5mZXJlbmNlQ29udGV4dC5yZWR1Y2VBbmRJbmNvcnBvcmF0ZShuZXdDb25zdHJhaW50KTsK
IAkJCX0KIAkJCWlmIChyVGhldGEgaW5zdGFuY2VvZiBJbmZlcmVuY2VWYXJpYWJsZSkgewpAQCAt
MzY5LDExICszNjksMTEgQEAKIAkJCQkJaWYgKHNvbHV0aW9uID09IG51bGwpCiAJCQkJCQlyZXR1
cm4gZmFsc2U7CiAJCQkJCVR5cGVCaW5kaW5nIHUgPSBzb2x1dGlvbi5nZXRJbnN0YW50aWF0aW9u
KGFscGhhLCBudWxsKS5jYXB0dXJlKGluZmVyZW5jZUNvbnRleHQuc2NvcGUsIGludm9jYXRpb25T
aXRlLnNvdXJjZUVuZCgpKTsKLQkJCQkJQ29uc3RyYWludFR5cGVGb3JtdWxhIG5ld0NvbnN0cmFp
bnQgPSBDb25zdHJhaW50VHlwZUZvcm11bGEuY3JlYXRlKHUsIHRhcmdldFR5cGUsIENPTVBBVElC
TEUpOworCQkJCQlDb25zdHJhaW50VHlwZUZvcm11bGEgbmV3Q29uc3RyYWludCA9IENvbnN0cmFp
bnRUeXBlRm9ybXVsYS5jcmVhdGUodSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSwgdHJ1ZSk7CiAJ
CQkJCXJldHVybiBpbmZlcmVuY2VDb250ZXh0LnJlZHVjZUFuZEluY29ycG9yYXRlKG5ld0NvbnN0
cmFpbnQpOwogCQkJCX0KIAkJCX0KLQkJCUNvbnN0cmFpbnRUeXBlRm9ybXVsYSBuZXdDb25zdHJh
aW50ID0gQ29uc3RyYWludFR5cGVGb3JtdWxhLmNyZWF0ZShyVGhldGEsIHRhcmdldFR5cGUsIENP
TVBBVElCTEUpOworCQkJQ29uc3RyYWludFR5cGVGb3JtdWxhIG5ld0NvbnN0cmFpbnQgPSBDb25z
dHJhaW50VHlwZUZvcm11bGEuY3JlYXRlKHJUaGV0YSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSwg
dHJ1ZSk7CiAJCQlpZiAoIWluZmVyZW5jZUNvbnRleHQucmVkdWNlQW5kSW5jb3Jwb3JhdGUobmV3
Q29uc3RyYWludCkpCiAJCQkJcmV0dXJuIGZhbHNlOwogCQl9CmRpZmYgLS1naXQgYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL0NvbnN0cmFpbnRUeXBlRm9ybXVsYS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUv
Y29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db25zdHJh
aW50VHlwZUZvcm11bGEuamF2YQppbmRleCAyMGJhOTVlLi5mNmIzZmQ5IDEwMDY0NAotLS0gYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvbG9va3VwL0NvbnN0cmFpbnRUeXBlRm9ybXVsYS5qYXZhCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29r
dXAvQ29uc3RyYWludFR5cGVGb3JtdWxhLmphdmEKQEAgLTM1OSw3ICszNTksNyBAQAogCQl9CiAJ
CVR5cGVCaW5kaW5nW10gYmkgPSAoKFBhcmFtZXRlcml6ZWRUeXBlQmluZGluZykgY2IpLmFyZ3Vt
ZW50czsKIAkJaWYgKGNiLmlzUmF3VHlwZSgpIHx8IGJpID09IG51bGwgfHwgYmkubGVuZ3RoID09
IDApCi0JCQlyZXR1cm4gKHRoaXMuaXNTb2Z0ICYmIEluZmVyZW5jZUNvbnRleHQxOC5TSU1VTEFU
RV9CVUdfSkRLXzgwMjY1MjcpID8gdHJ1ZSA6IGZhbHNlOyAvLyBGQUxTRSB3b3VsZCBjb25mb3Jt
IHRvIHRoZSBzcGVjIAorCQkJcmV0dXJuIHRoaXMuaXNTb2Z0OyAKIAkJZm9yIChpbnQgaSA9IDA7
IGkgPCBhaS5sZW5ndGg7IGkrKykKIAkJCWNvbnN0cmFpbnRzLmFkZChDb25zdHJhaW50VHlwZUZv
cm11bGEuY3JlYXRlKGJpW2ldLCBhaVtpXSwgVFlQRV9BUkdVTUVOVF9DT05UQUlORUQsIHRoaXMu
aXNTb2Z0KSk7CiAJCXJldHVybiB0cnVlOw==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>247998</attachid>
            <date>2014-10-19 22:09:00 -0400</date>
            <delta_ts>2014-10-21 06:52:30 -0400</delta_ts>
            <desc>Revised patch.</desc>
            <filename>Rawtype-fix.patch</filename>
            <type>text/plain</type>
            <size>9103</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVncmVz
c2lvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVn
cmVzc2lvblRlc3QuamF2YQppbmRleCBhNTExYjRiLi5iNGZkMzcwIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9HZW5lcmljc1JlZ3Jlc3Npb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR2VuZXJpY3NSZWdyZXNzaW9uVGVzdC5q
YXZhCkBAIC00NTcxLDYwICs0NTcxLDYzIEBACiAJCQkiICB9XG4iICsgCiAJCQkiXG4iICsgCiAJ
CQkifVxuIjsKLQlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0ZpbGVDb25zdGFudHMu
SkRLMV84KSB7Ci0JCXJ1bkNvbmZvcm1UZXN0KAotCQkJbmV3IFN0cmluZ1tdIHsKLQkJCQkiWC5q
YXZhIiwKLQkJCQlzb3VyY2UKLQkJCX0pOwotCX0gZWxzZSB7CisJCiAJCXJ1bk5lZ2F0aXZlVGVz
dCgKIAkJCW5ldyBTdHJpbmdbXSB7CiAJCQkJIlguamF2YSIsCiAJCQkJc291cmNlCiAJCQl9LAog
CQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClc
biIgKyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAogCQkJIglk
b1NvbWV0aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtc
biIgKyAKLQkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCi0JCQkiVGhlIG1ldGhvZCBkb1Nv
bWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBpbiB0aGUgdHlwZSBYIGlzIG5vdCBh
cHBsaWNhYmxlIGZvciB0aGUgYXJndW1lbnRzIChYLkZvbywgWC5Gb28pXG4iICsgCisJCQkiCV5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4i
ICsgCisJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRvU29tZXRoaW5nV2l0
aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZ1dpdGhG
b28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4i
ICsgCi0JCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTIpXG4iICsgCisJCQkiMi4g
V0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmdXaXRo
Rm9vKCBhbnkoIEZvby5jbGFzcyApLCBhbnkoIEZvby5jbGFzcyApICk7XG4iICsgCisJCQkiCSAg
ICAgICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5
OiBUaGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9u
IHRvIGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAK
KwkJCSIzLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAorCQkJIglkb1NvbWV0
aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIgKyAK
KwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5e
Xl5eXG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5Gb28g
bmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+XG4i
ICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBs
aW5lIDEyKVxuIiArIAogCQkJIglGb28gZm9vID0gYW55KCBGb28uY2xhc3MgKTtcbiIgKyAKIAkJ
CSIJXl5eXG4iICsgCiAJCQkiWC5Gb28gaXMgYSByYXcgdHlwZS4gUmVmZXJlbmNlcyB0byBnZW5l
cmljIHR5cGUgWC5Gb288VD4gc2hvdWxkIGJlIHBhcmFtZXRlcml6ZWRcbiIgKyAKIAkJCSItLS0t
LS0tLS0tXG4iICsgCi0JCQkiMy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsg
CisJCQkiNS4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRvU29t
ZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9u
IGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBk
b1NvbWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJ
CSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNC4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMp
XG4iICsgCisJCQkiNi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQki
CWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJICAgICAgICAgICAg
ICAgICAgICBeXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Npb24gb2YgdHlw
ZSBYLkZvbyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFguRm9vPE9i
amVjdD5cbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNS4gV0FSTklORyBpbiBYLmph
dmEgKGF0IGxpbmUgMTMpXG4iICsgCisJCQkiNy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUg
MTMpXG4iICsgCiAJCQkiCWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJ
CSIJICAgICAgICAgICAgICAgICAgICAgICAgIF5eXlxuIiArIAogCQkJIlR5cGUgc2FmZXR5OiBU
aGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRv
IGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJ
CSI2LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKKwkJCSI4LiBXQVJOSU5H
IGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRo
aW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAog
CQkJIgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9j
YXRpb24gZG9Tb21ldGhpbmdXaXRoRm9vKFguRm9vLCBYLkZvbykgb2YgdGhlIGdlbmVyaWMgbWV0
aG9kIGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbzxUPiwgWC5Gb288VD4pIG9mIHR5cGUgWFxuIiAr
IAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI3LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGlu
ZSAxNylcbiIgKyAKKwkJCSI5LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAK
IAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwg
YW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHBy
ZXNzaW9uIG9mIHR5cGUgWC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9y
bSB0byBYLkZvbzxPYmplY3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIiArIAotCQkJIjguIFdB
Uk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDE3KVxuIiArIAorCQkJIjEwLiBXQVJOSU5HIGluIFgu
amF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0
aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5e
Xl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUg
WC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmpl
Y3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7Ci0JfQogfQogcHVibGljIHZvaWQgdGVzdEJ1
ZzQzMDY4NigpIHsKIAlydW5Db25mb3JtVGVzdCgKQEAgLTU1MDMsNSArNTUwNiw4NSBAQAogCQkJ
IlR5cGUgc2FmZXR5OiBQb3RlbnRpYWwgaGVhcCBwb2xsdXRpb24gdmlhIHZhcmFyZ3MgcGFyYW1l
dGVyIGFyZ1xuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIpOwogfQorLy8gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQ0NDMzNCwgIFsxLjhdW2NvbXBpbGVyXSBD
b21waWxlciBnZW5lcmF0ZXMgZXJyb3IgaW5zdGVhZCBvZiB3YXJuaW5nIG9uIHVuY2hlY2tlZCBj
b252ZXJzaW9uIAorcHVibGljIHZvaWQgdGVzdDQ0NDMzNCgpIHsKKwkJdGhpcy5ydW5OZWdhdGl2
ZVRlc3QoCisJCSAgIG5ldyBTdHJpbmdbXSB7CisJCQkgICAiWC5qYXZhIiwKKwkJCSAgICJpbXBv
cnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiIgKworCQkJICAgImltcG9ydCBqYXZhLnV0aWwuTGlz
dDtcbiIgKworCQkJICAgInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJICAgIiAgICBwdWJsaWMg
c3RhdGljIHZvaWQgTWFpbihTdHJpbmdbXSBhcmdzKSB7XG4iICsKKwkJCSAgICIgICAgICAgIGRv
U29tZXRoaW5nKHJldHVybkNsYXNzVHlwZShDbGFzcy5jbGFzcykpO1xuIiArCisJCQkgICAiICAg
ICAgICBkb1NvbWV0aGluZyhyZXR1cm5MaXN0VHlwZShuZXcgQXJyYXlMaXN0PExpc3Q+KCkpKTtc
biIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gdm9p
ZCBkb1NvbWV0aGluZyhDbGFzczxUPiBjbGF6eikge1xuIiArCisJCQkgICAiICAgICAgICBTeXN0
ZW0ub3V0LnByaW50bG4oY2xhenouZ2V0U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9
XG4iICsKKwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gVCByZXR1cm5DbGFzc1R5cGUoQ2xh
c3M8VD4gY2xhenopIHtcbiIgKworCQkJICAgIiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJ
CSAgICIgICAgfVxuIiArCisJCQkgICAiICAgIHB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgZG9Tb21l
dGhpbmcoTGlzdDxUPiBsaXN0KSB7XG4iICsKKwkJCSAgICIgICAgICAgIFN5c3RlbS5vdXQucHJp
bnRsbihsaXN0LmdldENsYXNzKCkuZ2V0U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9
XG4iICsKKwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gVCByZXR1cm5MaXN0VHlwZShMaXN0
PFQ+IGxpc3QpIHtcbiIgKworCQkJICAgIiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJCSAg
ICIgICAgfVxuIiArCisJCQkgICAifVxuIiwKKwkJICAgfSwKKwkJICAgIi0tLS0tLS0tLS1cbiIg
KyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA1KVxuIiArIAorCQkJIglkb1Nv
bWV0aGluZyhyZXR1cm5DbGFzc1R5cGUoQ2xhc3MuY2xhc3MpKTtcbiIgKyAKKwkJCSIJXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCSJUeXBlIHNhZmV0
eTogVW5jaGVja2VkIGludm9jYXRpb24gZG9Tb21ldGhpbmcoQ2xhc3MpIG9mIHRoZSBnZW5lcmlj
IG1ldGhvZCBkb1NvbWV0aGluZyhDbGFzczxUPikgb2YgdHlwZSBYXG4iICsgCisJCQkiLS0tLS0t
LS0tLVxuIiArIAorCQkJIjIuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDUpXG4iICsgCisJ
CQkiCWRvU29tZXRoaW5nKHJldHVybkNsYXNzVHlwZShDbGFzcy5jbGFzcykpO1xuIiArIAorCQkJ
IgkgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlw
ZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgQ2xhc3MgbmVlZHMgdW5jaGVja2VkIGNv
bnZlcnNpb24gdG8gY29uZm9ybSB0byBDbGFzczxPYmplY3Q+XG4iICsgCisJCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkJIjMuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCQki
CWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiAr
IAorCQkJIgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBVbmNoZWNrZWQgaW52b2NhdGlvbiBkb1NvbWV0aGlu
ZyhMaXN0KSBvZiB0aGUgZ2VuZXJpYyBtZXRob2QgZG9Tb21ldGhpbmcoTGlzdDxUPikgb2YgdHlw
ZSBYXG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZh
IChhdCBsaW5lIDYpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBB
cnJheUxpc3Q8TGlzdD4oKSkpO1xuIiArIAorCQkJIgkgICAgICAgICAgICBeXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHBy
ZXNzaW9uIG9mIHR5cGUgTGlzdCBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3Jt
IHRvIExpc3Q8T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJCSI1LiBXQVJO
SU5HIGluIFguamF2YSAoYXQgbGluZSA2KVxuIiArIAorCQkJIglkb1NvbWV0aGluZyhyZXR1cm5M
aXN0VHlwZShuZXcgQXJyYXlMaXN0PExpc3Q+KCkpKTtcbiIgKyAKKwkJCSIJICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXG4iICsgCisJCQkiTGlzdCBpcyBhIHJh
dyB0eXBlLiBSZWZlcmVuY2VzIHRvIGdlbmVyaWMgdHlwZSBMaXN0PEU+IHNob3VsZCBiZSBwYXJh
bWV0ZXJpemVkXG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIik7Cit9CisvLyBodHRwczovL2J1Z3Mu
ZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDM4MjQ2LCBbMS44XVtjb21waWxlcl0g
SmF2YSA4IHN0YXRpYyBtZXRob2RzIGNvbXBpbGF0aW9uIGVycm9yICAKK3B1YmxpYyB2b2lkIHRl
c3Q0MzgyNDYoKSB7CisJCWlmICh0aGlzLmNvbXBsaWFuY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0
YW50cy5KREsxXzcpCisJCQlyZXR1cm47CisJCXRoaXMucnVuTmVnYXRpdmVUZXN0KAorCQkgICBu
ZXcgU3RyaW5nW10geworCQkJICAgIkZvby5qYXZhIiwKKwkJCSAgICJpbXBvcnQgamF2YS51dGls
Lkxpc3Q7XG4iICsKKwkJCSAgICJwdWJsaWMgYWJzdHJhY3QgY2xhc3MgRm9vPEM+XG4iICsKKwkJ
CSAgICJ7XG4iICsKKwkJCSAgICIgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4i
ICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0aWMgPEM+IHZvaWQgZG9pdCggTGlzdDxGb288Qz4+IHdv
cmtlcnMgKVxuIiArCisJCQkgICAiICB7XG4iICsKKwkJCSAgICIgICAgZG9pdCggIHdvcmtlcnMu
dG9BcnJheSggbmV3IEZvb1t3b3JrZXJzLnNpemUoKV0gKSApO1xuIiArCisJCQkgICAiICB9XG4i
ICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0aWMgPEM+IHZvaWQgZG9pdCggRm9vPEM+Li4uIHdvcmtl
cnMgKVxuIiArCisJCQkgICAiICB7XG4iICsKKwkJCSAgICIgIH1cbiIgKworCQkJICAgIn1cbiIs
CisJCSAgIH0sCisJCSAgICItLS0tLS0tLS0tXG4iICsgCisJCQkiMS4gV0FSTklORyBpbiBGb28u
amF2YSAoYXQgbGluZSA5KVxuIiArIAorCQkJIglwdWJsaWMgc3RhdGljIDxDPiB2b2lkIGRvaXQo
IEZvbzxDPi4uLiB3b3JrZXJzIClcbiIgKyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBQb3RlbnRpYWwg
aGVhcCBwb2xsdXRpb24gdmlhIHZhcmFyZ3MgcGFyYW1ldGVyIHdvcmtlcnNcbiIgKyAKKwkJCSIt
LS0tLS0tLS0tXG4iKTsKK30KIH0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
Y29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9NZXNzYWdlU2Vu
ZC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2FzdC9NZXNzYWdlU2VuZC5qYXZhCmluZGV4IDcyOTUyZjguLjc2MzU1
MWMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvTWVzc2FnZVNlbmQuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
YXN0L01lc3NhZ2VTZW5kLmphdmEKQEAgLTEwMTIsNyArMTAxMiw3IEBACiAJCQlpZiAocGdtYi5p
bmZlcnJlZFJldHVyblR5cGUpCiAJCQkJcmV0dXJuIHRydWU7IC8vIGlmIGFscmVhZHkgZGV0ZXJt
aW5lZAogCQl9IAotCQlpZiAocmVzb2x1dGlvbkNhbmRpZGF0ZS5yZXR1cm5UeXBlICE9IG51bGwp
IHsKKwkJaWYgKHJlc29sdXRpb25DYW5kaWRhdGUucmV0dXJuVHlwZSAhPSBudWxsICYmICFyZXNv
bHV0aW9uQ2FuZGlkYXRlLnJldHVyblR5cGUubGVhZkNvbXBvbmVudFR5cGUoKS5pc1Jhd1R5cGUo
KSkgewogCQkJLy8gcmVzb2x1dGlvbiBtYXkgaGF2ZSBwcmVtYXR1cmVseSBpbnN0YW50aWF0ZWQg
dGhlIGdlbmVyaWMgbWV0aG9kLCB3ZSBuZWVkIHRoZSBvcmlnaW5hbCwgdGhvdWdoOgogCQkJTWV0
aG9kQmluZGluZyBjYW5kaWRhdGVPcmlnaW5hbCA9IHJlc29sdXRpb25DYW5kaWRhdGUub3JpZ2lu
YWwoKTsKIAkJCXJldHVybiBjYW5kaWRhdGVPcmlnaW5hbC5yZXR1cm5UeXBlLm1lbnRpb25zQW55
KGNhbmRpZGF0ZU9yaWdpbmFsLnR5cGVWYXJpYWJsZXMoKSwgLTEpOw==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>248148</attachid>
            <date>2014-10-24 04:33:00 -0400</date>
            <delta_ts>2014-10-26 22:38:03 -0400</delta_ts>
            <desc>Proposed patch</desc>
            <filename>444334.patch</filename>
            <type>text/plain</type>
            <size>27238</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVncmVz
c2lvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVn
cmVzc2lvblRlc3QuamF2YQppbmRleCAwZTZiNDlhLi45ZmVjNWQwIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9HZW5lcmljc1JlZ3Jlc3Npb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR2VuZXJpY3NSZWdyZXNzaW9uVGVzdC5q
YXZhCkBAIC00NTcxLDYwICs0NTcxLDYyIEBACiAJCQkiICB9XG4iICsgCiAJCQkiXG4iICsgCiAJ
CQkifVxuIjsKLQlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0ZpbGVDb25zdGFudHMu
SkRLMV84KSB7Ci0JCXJ1bkNvbmZvcm1UZXN0KAotCQkJbmV3IFN0cmluZ1tdIHsKLQkJCQkiWC5q
YXZhIiwKLQkJCQlzb3VyY2UKLQkJCX0pOwotCX0gZWxzZSB7CiAJCXJ1bk5lZ2F0aXZlVGVzdCgK
IAkJCW5ldyBTdHJpbmdbXSB7CiAJCQkJIlguamF2YSIsCiAJCQkJc291cmNlCiAJCQl9LAogCQkJ
Ii0tLS0tLS0tLS1cbiIgKyAKLQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIg
KyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAogCQkJIglkb1Nv
bWV0aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIg
KyAKLQkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCi0JCQkiVGhlIG1ldGhvZCBkb1NvbWV0
aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBpbiB0aGUgdHlwZSBYIGlzIG5vdCBhcHBs
aWNhYmxlIGZvciB0aGUgYXJndW1lbnRzIChYLkZvbywgWC5Gb28pXG4iICsgCisJCQkiCV5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsg
CisJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRvU29tZXRoaW5nV2l0aEZv
byhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZ1dpdGhGb28o
WC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsg
Ci0JCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTIpXG4iICsgCisJCQkiMi4gV0FS
TklORyBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmdXaXRoRm9v
KCBhbnkoIEZvby5jbGFzcyApLCBhbnkoIEZvby5jbGFzcyApICk7XG4iICsgCisJCQkiCSAgICAg
ICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBU
aGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRv
IGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJ
CSIzLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAorCQkJIglkb1NvbWV0aGlu
Z1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIgKyAKKwkJ
CSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5Gb28gbmVl
ZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+XG4iICsg
CisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5l
IDEyKVxuIiArIAogCQkJIglGb28gZm9vID0gYW55KCBGb28uY2xhc3MgKTtcbiIgKyAKIAkJCSIJ
Xl5eXG4iICsgCiAJCQkiWC5Gb28gaXMgYSByYXcgdHlwZS4gUmVmZXJlbmNlcyB0byBnZW5lcmlj
IHR5cGUgWC5Gb288VD4gc2hvdWxkIGJlIHBhcmFtZXRlcml6ZWRcbiIgKyAKIAkJCSItLS0tLS0t
LS0tXG4iICsgCi0JCQkiMy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCisJ
CQkiNS4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRvU29tZXRo
aW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRv
U29tZXRoaW5nV2l0aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1Nv
bWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSIt
LS0tLS0tLS0tXG4iICsgCi0JCQkiNC4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4i
ICsgCisJCQkiNi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRv
U29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJICAgICAgICAgICAgICAg
ICAgICBeXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Npb24gb2YgdHlwZSBY
LkZvbyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFguRm9vPE9iamVj
dD5cbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNS4gV0FSTklORyBpbiBYLmphdmEg
KGF0IGxpbmUgMTMpXG4iICsgCisJCQkiNy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMp
XG4iICsgCiAJCQkiCWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJ
ICAgICAgICAgICAgICAgICAgICAgICAgIF5eXlxuIiArIAogCQkJIlR5cGUgc2FmZXR5OiBUaGUg
ZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRvIGNv
bmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI2
LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKKwkJCSI4LiBXQVJOSU5HIGlu
IFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5n
V2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJ
IgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9jYXRp
b24gZG9Tb21ldGhpbmdXaXRoRm9vKFguRm9vLCBYLkZvbykgb2YgdGhlIGdlbmVyaWMgbWV0aG9k
IGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbzxUPiwgWC5Gb288VD4pIG9mIHR5cGUgWFxuIiArIAog
CQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI3LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAx
NylcbiIgKyAKKwkJCSI5LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJ
CSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55
KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNz
aW9uIG9mIHR5cGUgWC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0
byBYLkZvbzxPYmplY3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIiArIAotCQkJIjguIFdBUk5J
TkcgaW4gWC5qYXZhIChhdCBsaW5lIDE3KVxuIiArIAorCQkJIjEwLiBXQVJOSU5HIGluIFguamF2
YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZv
byggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5G
b28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+
XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7Ci0JfQogfQogcHVibGljIHZvaWQgdGVzdEJ1ZzQz
MDY4NigpIHsKIAlydW5Db25mb3JtVGVzdCgKQEAgLTU1MjAsNSArNTUyMiw4NSBAQAogCQkgICB9
LAogCQkgICAiIik7CiB9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1
Zy5jZ2k/aWQ9NDQ0MzM0LCAgWzEuOF1bY29tcGlsZXJdIENvbXBpbGVyIGdlbmVyYXRlcyBlcnJv
ciBpbnN0ZWFkIG9mIHdhcm5pbmcgb24gdW5jaGVja2VkIGNvbnZlcnNpb24gCitwdWJsaWMgdm9p
ZCB0ZXN0NDQ0MzM0KCkgeworCQl0aGlzLnJ1bk5lZ2F0aXZlVGVzdCgKKwkJICAgbmV3IFN0cmlu
Z1tdIHsKKwkJCSAgICJYLmphdmEiLAorCQkJICAgImltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0
O1xuIiArCisJCQkgICAiaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuIiArCisJCQkgICAicHVibGlj
IGNsYXNzIFgge1xuIiArCisJCQkgICAiICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKFN0cmlu
Z1tdIGFyZ3MpIHtcbiIgKworCQkJICAgIiAgICAgICAgZG9Tb21ldGhpbmcocmV0dXJuQ2xhc3NU
eXBlKENsYXNzLmNsYXNzKSk7XG4iICsKKwkJCSAgICIgICAgICAgIGRvU29tZXRoaW5nKHJldHVy
bkxpc3RUeXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiArCisJCQkgICAiICAgIH1cbiIg
KworCQkJICAgIiAgICBwdWJsaWMgc3RhdGljIDxUPiB2b2lkIGRvU29tZXRoaW5nKENsYXNzPFQ+
IGNsYXp6KSB7XG4iICsKKwkJCSAgICIgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihjbGF6ei5n
ZXRTaW1wbGVOYW1lKCkpO1xuIiArCisJCQkgICAiICAgIH1cbiIgKworCQkJICAgIiAgICBwdWJs
aWMgc3RhdGljIDxUPiBUIHJldHVybkNsYXNzVHlwZShDbGFzczxUPiBjbGF6eikge1xuIiArCisJ
CQkgICAiICAgICAgICByZXR1cm4gbnVsbDtcbiIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAg
ICIgICAgcHVibGljIHN0YXRpYyA8VD4gdm9pZCBkb1NvbWV0aGluZyhMaXN0PFQ+IGxpc3QpIHtc
biIgKworCQkJICAgIiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKGxpc3QuZ2V0Q2xhc3MoKS5n
ZXRTaW1wbGVOYW1lKCkpO1xuIiArCisJCQkgICAiICAgIH1cbiIgKworCQkJICAgIiAgICBwdWJs
aWMgc3RhdGljIDxUPiBUIHJldHVybkxpc3RUeXBlKExpc3Q8VD4gbGlzdCkge1xuIiArCisJCQkg
ICAiICAgICAgICByZXR1cm4gbnVsbDtcbiIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICJ9
XG4iLAorCQkgICB9LAorCQkgICAiLS0tLS0tLS0tLVxuIiArIAorCQkJIjEuIFdBUk5JTkcgaW4g
WC5qYXZhIChhdCBsaW5lIDUpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkNsYXNzVHlw
ZShDbGFzcy5jbGFzcykpO1xuIiArIAorCQkJIgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBVbmNoZWNrZWQgaW52b2NhdGlv
biBkb1NvbWV0aGluZyhDbGFzcykgb2YgdGhlIGdlbmVyaWMgbWV0aG9kIGRvU29tZXRoaW5nKENs
YXNzPFQ+KSBvZiB0eXBlIFhcbiIgKyAKKwkJCSItLS0tLS0tLS0tXG4iICsgCisJCQkiMi4gV0FS
TklORyBpbiBYLmphdmEgKGF0IGxpbmUgNSlcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmcocmV0dXJu
Q2xhc3NUeXBlKENsYXNzLmNsYXNzKSk7XG4iICsgCisJCQkiCSAgICAgICAgICAgIF5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Np
b24gb2YgdHlwZSBDbGFzcyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRv
IENsYXNzPE9iamVjdD5cbiIgKyAKKwkJCSItLS0tLS0tLS0tXG4iICsgCisJCQkiMy4gV0FSTklO
RyBpbiBYLmphdmEgKGF0IGxpbmUgNilcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmcocmV0dXJuTGlz
dFR5cGUobmV3IEFycmF5TGlzdDxMaXN0PigpKSk7XG4iICsgCisJCQkiCV5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlwZSBzYWZl
dHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRvU29tZXRoaW5nKExpc3QpIG9mIHRoZSBnZW5lcmlj
IG1ldGhvZCBkb1NvbWV0aGluZyhMaXN0PFQ+KSBvZiB0eXBlIFhcbiIgKyAKKwkJCSItLS0tLS0t
LS0tXG4iICsgCisJCQkiNC4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgNilcbiIgKyAKKwkJ
CSIJZG9Tb21ldGhpbmcocmV0dXJuTGlzdFR5cGUobmV3IEFycmF5TGlzdDxMaXN0PigpKSk7XG4i
ICsgCisJCQkiCSAgICAgICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5cbiIgKyAKKwkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Npb24gb2YgdHlwZSBMaXN0IG5l
ZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRvIGNvbmZvcm0gdG8gTGlzdDxPYmplY3Q+XG4iICsg
CisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjUuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5l
IDYpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBBcnJheUxpc3Q8
TGlzdD4oKSkpO1xuIiArIAorCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIF5eXl5cbiIgKyAKKwkJCSJMaXN0IGlzIGEgcmF3IHR5cGUuIFJlZmVyZW5jZXMgdG8g
Z2VuZXJpYyB0eXBlIExpc3Q8RT4gc2hvdWxkIGJlIHBhcmFtZXRlcml6ZWRcbiIgKyAKKwkJCSIt
LS0tLS0tLS0tXG4iKTsKK30KKy8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3df
YnVnLmNnaT9pZD00MzgyNDYsIFsxLjhdW2NvbXBpbGVyXSBKYXZhIDggc3RhdGljIG1ldGhvZHMg
Y29tcGlsYXRpb24gZXJyb3IgIAorcHVibGljIHZvaWQgdGVzdDQzODI0NigpIHsKKwkJaWYgKHRo
aXMuY29tcGxpYW5jZUxldmVsIDwgQ2xhc3NGaWxlQ29uc3RhbnRzLkpESzFfNykKKwkJCXJldHVy
bjsKKwkJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoCisJCSAgIG5ldyBTdHJpbmdbXSB7CisJCQkgICAi
Rm9vLmphdmEiLAorCQkJICAgImltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiIgKworCQkJICAgInB1
YmxpYyBhYnN0cmFjdCBjbGFzcyBGb288Qz5cbiIgKworCQkJICAgIntcbiIgKworCQkJICAgIiAg
QFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiIgKworCQkJICAgIiAgcHVibGljIHN0
YXRpYyA8Qz4gdm9pZCBkb2l0KCBMaXN0PEZvbzxDPj4gd29ya2VycyApXG4iICsKKwkJCSAgICIg
IHtcbiIgKworCQkJICAgIiAgICBkb2l0KCAgd29ya2Vycy50b0FycmF5KCBuZXcgRm9vW3dvcmtl
cnMuc2l6ZSgpXSApICk7XG4iICsKKwkJCSAgICIgIH1cbiIgKworCQkJICAgIiAgcHVibGljIHN0
YXRpYyA8Qz4gdm9pZCBkb2l0KCBGb288Qz4uLi4gd29ya2VycyApXG4iICsKKwkJCSAgICIgIHtc
biIgKworCQkJICAgIiAgfVxuIiArCisJCQkgICAifVxuIiwKKwkJICAgfSwKKwkJICAgIi0tLS0t
LS0tLS1cbiIgKyAKKwkJCSIxLiBXQVJOSU5HIGluIEZvby5qYXZhIChhdCBsaW5lIDkpXG4iICsg
CisJCQkiCXB1YmxpYyBzdGF0aWMgPEM+IHZvaWQgZG9pdCggRm9vPEM+Li4uIHdvcmtlcnMgKVxu
IiArIAorCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5e
XG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFBvdGVudGlhbCBoZWFwIHBvbGx1dGlvbiB2aWEgdmFy
YXJncyBwYXJhbWV0ZXIgd29ya2Vyc1xuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIpOworfQogfQog
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0JvdW5kU2V0LmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3Vw
L0JvdW5kU2V0LmphdmEKaW5kZXggYzFjYTljNi4uMzBjOTlkMSAxMDA2NDQKLS0tIGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9Cb3VuZFNldC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQm91bmRTZXQuamF2YQpA
QCAtNDA5LDcgKzQwOSwxMyBAQAogCQl9CiAJCXJldHVybiBoYXNQcm9wZXJCb3VuZDsKIAl9Ci0K
KwkKKwlwdWJsaWMgdm9pZCBhZGRCb3VuZHMoQm91bmRTZXQgdGhhdCwgTG9va3VwRW52aXJvbm1l
bnQgZW52aXJvbm1lbnQpIHsKKwkJaWYgKHRoYXQgPT0gbnVsbCB8fCBlbnZpcm9ubWVudCA9PSBu
dWxsKQorCQkJcmV0dXJuOworCQlhZGRCb3VuZHModGhhdC5mbGF0dGVuKCksIGVudmlyb25tZW50
KTsKKwl9CisJCiAJcHVibGljIGJvb2xlYW4gaXNJbnN0YW50aWF0ZWQoSW5mZXJlbmNlVmFyaWFi
bGUgaW5mZXJlbmNlVmFyaWFibGUpIHsKIAkJVGhyZWVTZXRzIHRocmVlID0gdGhpcy5ib3VuZHNQ
ZXJWYXJpYWJsZS5nZXQoaW5mZXJlbmNlVmFyaWFibGUucHJvdG90eXBlKCkpOwogCQlpZiAodGhy
ZWUgIT0gbnVsbCkKQEAgLTEwNjIsNyArMTA2OCw4IEBACiAJcHJpdmF0ZSBib29sZWFuIHN1cGVy
T25seVJhdyhUeXBlQmluZGluZyBnLCBUeXBlQmluZGluZyBzLCBMb29rdXBFbnZpcm9ubWVudCBl
bnYpIHsKIAkJaWYgKHMgaW5zdGFuY2VvZiBJbmZlcmVuY2VWYXJpYWJsZSkKIAkJCXJldHVybiBm
YWxzZTsgLy8gaW5mZXJlbmNlIGhhcyBubyBzdXBlciB0eXBlcwotCQlpZiAocy5maW5kU3VwZXJU
eXBlT3JpZ2luYXRpbmdGcm9tKGcpID09IG51bGwpCisJCWZpbmFsIFR5cGVCaW5kaW5nIHN1cGVy
VHlwZSA9IHMuZmluZFN1cGVyVHlwZU9yaWdpbmF0aW5nRnJvbShnKTsKKwkJaWYgKHN1cGVyVHlw
ZSAhPSBudWxsICYmICFzdXBlclR5cGUuaXNQYXJhbWV0ZXJpemVkVHlwZSgpKQogCQkJcmV0dXJu
IHMuaXNDb21wYXRpYmxlV2l0aChlbnYuY29udmVydFRvUmF3VHlwZShnLCBmYWxzZSkpOwogCQly
ZXR1cm4gZmFsc2U7CiAJfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db25zdHJhaW50RXhw
cmVzc2lvbkZvcm11bGEuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29uc3RyYWludEV4cHJlc3Npb25G
b3JtdWxhLmphdmEKaW5kZXggYTNiNTY0NS4uYmNlODRiMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xv
b2t1cC9Db25zdHJhaW50RXhwcmVzc2lvbkZvcm11bGEuamF2YQorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3Vw
L0NvbnN0cmFpbnRFeHByZXNzaW9uRm9ybXVsYS5qYXZhCkBAIC05MSwxNCArOTEsMjQgQEAKIAkJ
CQkJCX0KIAkJCQkJCWlmIChpbm5lckN0eC5zdGVwQ29tcGxldGVkID49IEluZmVyZW5jZUNvbnRl
eHQxOC5UWVBFX0lORkVSUkVEKSB7CiAJCQkJCQkJLy8gVGhlIGNvbnN0cmFpbnRzIGFuZCBpbml0
aWFsIGJvdW5kcyB0aGF0IHdvdWxkIGVmZmVjdGl2ZWx5IHJlZHVjZSB0byBiMyBhcmUgYWxyZWFk
eSB0cmFuc2ZlcnJlZCB0byBjdXJyZW50IGNvbnRleHQgZHVyaW5nIEMgU2V0IGNvbnN0cnVjdGlv
bi4KKwkJCQkJCQkvLyBUaGlzIHNob3VsZCByZWFsbHkgYmUgZG9uZSBvbmx5IGZvciBwb2x5IGlu
dm9jYXRpb25zIGludGVybGVhdmVkIGJ5IGEgbGFtYmRhIHRoYXQgaXMgbm90IHBlcnRpbmVudCB0
byBhcHBsaWNhYmlsaXR5LiBGSVhNRS4KIAkJCQkJCQlyZXR1cm4gVFJVRTsKIAkJCQkJCX0KLQkJ
CQkJCWluZmVyZW5jZUNvbnRleHQuaW5mZXJlbmNlS2luZCA9IGlubmVyQ3R4LmluZmVyZW5jZUtp
bmQ7CisJCQkJCQlpZiAoaW5uZXJDdHguc3RlcENvbXBsZXRlZCA+PSBJbmZlcmVuY2VDb250ZXh0
MTguQVBQTElDQUJJTElUWV9JTkZFUlJFRCkgeworCQkJCQkJCWluZmVyZW5jZUNvbnRleHQuY3Vy
cmVudEJvdW5kcy5hZGRCb3VuZHMoaW5uZXJDdHguYjIsIGluZmVyZW5jZUNvbnRleHQuZW52aXJv
bm1lbnQpOworCQkJCQkJCWluZmVyZW5jZUNvbnRleHQuaW5mZXJlbmNlVmFyaWFibGVzID0gaW5u
ZXJDdHguaW5mZXJlbmNlVmFyaWFibGVzOworCQkJCQkJCWluZmVyZW5jZUNvbnRleHQuaW5mZXJl
bmNlS2luZCA9IGlubmVyQ3R4LmluZmVyZW5jZUtpbmQ7CisJCQkJCQkJaW5mZXJlbmNlQ29udGV4
dC51c2VzVW5jaGVja2VkQ29udmVyc2lvbiA9IGlubmVyQ3R4LnVzZXNVbmNoZWNrZWRDb252ZXJz
aW9uOworCQkJCQkJfSBlbHNlIHsKKwkJCQkJCQlyZXR1cm4gRkFMU0U7IC8vIHNob3VsZCBub3Qg
cmVhY2ggaGVyZS4KKwkJCQkJCX0KKwkJCQkJCS8vIGIyIGhhcyBiZWVuIGxpZnRlZCwgaW5mZXJy
aW5nIHBvbHkgaW52b2NhdGlvbiB0eXBlIGFtb3VudHMgdG8gbGlmdGluZyBiMy4KIAkJCQkJfSBl
bHNlIHsKIAkJCQkJCWluZmVyZW5jZUNvbnRleHQuaW5mZXJlbmNlS2luZCA9IGluZmVyZW5jZUNv
bnRleHQuZ2V0SW5mZXJlbmNlS2luZChwcmV2aW91c01ldGhvZCwgYXJndW1lbnRUeXBlcyk7CisJ
CQkJCQlib29sZWFuIGlzRGlhbW9uZCA9IG1ldGhvZC5pc0NvbnN0cnVjdG9yKCkgJiYgdGhpcy5s
ZWZ0LmlzUG9seUV4cHJlc3Npb24obWV0aG9kKTsKKwkJCQkJCWluZmVySW52b2NhdGlvbkFwcGxp
Y2FiaWxpdHkoaW5mZXJlbmNlQ29udGV4dCwgbWV0aG9kLCBhcmd1bWVudFR5cGVzLCBpc0RpYW1v
bmQsIGluZmVyZW5jZUNvbnRleHQuaW5mZXJlbmNlS2luZCk7CisJCQkJCQkvLyBiMiBoYXMgYmVl
biBsaWZ0ZWQsIGluZmVycmluZyBwb2x5IGludm9jYXRpb24gdHlwZSBhbW91bnRzIHRvIGxpZnRp
bmcgYjMuCiAJCQkJCX0KLQkJCQkJYm9vbGVhbiBpc0RpYW1vbmQgPSBtZXRob2QuaXNDb25zdHJ1
Y3RvcigpICYmIHRoaXMubGVmdC5pc1BvbHlFeHByZXNzaW9uKG1ldGhvZCk7Ci0JCQkJCWluZmVy
SW52b2NhdGlvbkFwcGxpY2FiaWxpdHkoaW5mZXJlbmNlQ29udGV4dCwgbWV0aG9kLCBhcmd1bWVu
dFR5cGVzLCBpc0RpYW1vbmQsIGluZmVyZW5jZUNvbnRleHQuaW5mZXJlbmNlS2luZCk7CiAJCQkJ
CWlmICghaW5mZXJQb2x5SW52b2NhdGlvblR5cGUoaW5mZXJlbmNlQ29udGV4dCwgaW52b2NhdGlv
biwgdGhpcy5yaWdodCwgbWV0aG9kKSkKIAkJCQkJCXJldHVybiBGQUxTRTsKIAkJCQkJcmV0dXJu
IG51bGw7IC8vIGFscmVhZHkgaW5jb3Jwb3JhdGVkCkBAIC0zMzMsNyArMzQzLDcgQEAKIAkJCWlm
IChyZXR1cm5UeXBlID09IFR5cGVCaW5kaW5nLlZPSUQpCiAJCQkJdGhyb3cgbmV3IEluZmVyZW5j
ZUZhaWx1cmVFeGNlcHRpb24oImV4cHJlc3Npb24gaGFzIG5vIHZhbHVlIik7IC8vJE5PTi1OTFMt
MSQKIAotCQkJaWYgKGluZmVyZW5jZUNvbnRleHQudXNlc1VuY2hlY2tlZENvbnZlcnNpb24oKSkg
eworCQkJaWYgKGluZmVyZW5jZUNvbnRleHQudXNlc1VuY2hlY2tlZENvbnZlcnNpb24pIHsKIAkJ
CQkvLyBzcGVjIHNheXMgZXJhc3VyZSwgYnV0IHdlIGRvbid0IHJlYWxseSBoYXZlIGNvbXBhdGli
aWxpdHkgcnVsZXMgZm9yIGVyYXN1cmUsIHVzZSByYXcgdHlwZSBpbnN0ZWFkOgogCQkJCVR5cGVC
aW5kaW5nIGVyYXN1cmUgPSBpbmZlcmVuY2VDb250ZXh0LmVudmlyb25tZW50LmNvbnZlcnRUb1Jh
d1R5cGUocmV0dXJuVHlwZSwgZmFsc2UpOwogCQkJCUNvbnN0cmFpbnRUeXBlRm9ybXVsYSBuZXdD
b25zdHJhaW50ID0gQ29uc3RyYWludFR5cGVGb3JtdWxhLmNyZWF0ZShlcmFzdXJlLCB0YXJnZXRU
eXBlLCBDT01QQVRJQkxFKTsKQEAgLTM1NCwxNCArMzY0LDE1IEBACiAJCQkJQ29uc3RyYWludFR5
cGVGb3JtdWxhIG5ld0NvbnN0cmFpbnQgPSBDb25zdHJhaW50VHlwZUZvcm11bGEuY3JlYXRlKGdi
ZXRhLCB0YXJnZXRUeXBlLCBDT01QQVRJQkxFKTsKIAkJCQlyZXR1cm4gaW5mZXJlbmNlQ29udGV4
dC5yZWR1Y2VBbmRJbmNvcnBvcmF0ZShuZXdDb25zdHJhaW50KTsKIAkJCX0KLQkJCWlmIChyVGhl
dGEgaW5zdGFuY2VvZiBJbmZlcmVuY2VWYXJpYWJsZSkgewotCQkJCUluZmVyZW5jZVZhcmlhYmxl
IGFscGhhID0gKEluZmVyZW5jZVZhcmlhYmxlKSByVGhldGE7CisJCQlpZiAoclRoZXRhLmxlYWZD
b21wb25lbnRUeXBlKCkgaW5zdGFuY2VvZiBJbmZlcmVuY2VWYXJpYWJsZSkgeworCQkJCUluZmVy
ZW5jZVZhcmlhYmxlIGFscGhhID0gKEluZmVyZW5jZVZhcmlhYmxlKSByVGhldGEubGVhZkNvbXBv
bmVudFR5cGUoKTsKKwkJCQlUeXBlQmluZGluZyB0YXJnZXRMZWFmVHlwZSA9IHRhcmdldFR5cGUu
bGVhZkNvbXBvbmVudFR5cGUoKTsKIAkJCQlib29sZWFuIHRvUmVzb2x2ZSA9IGZhbHNlOwotCQkJ
CWlmIChpbmZlcmVuY2VDb250ZXh0LmN1cnJlbnRCb3VuZHMuY29uZGl0aW9uMThfNV8yX2J1bGxl
dF8zXzNfMShhbHBoYSwgdGFyZ2V0VHlwZSkpIHsKKwkJCQlpZiAoaW5mZXJlbmNlQ29udGV4dC5j
dXJyZW50Qm91bmRzLmNvbmRpdGlvbjE4XzVfMl9idWxsZXRfM18zXzEoYWxwaGEsIHRhcmdldExl
YWZUeXBlKSkgewogCQkJCQl0b1Jlc29sdmUgPSB0cnVlOwotCQkJCX0gZWxzZSBpZiAoaW5mZXJl
bmNlQ29udGV4dC5jdXJyZW50Qm91bmRzLmNvbmRpdGlvbjE4XzVfMl9idWxsZXRfM18zXzIoYWxw
aGEsIHRhcmdldFR5cGUsIGluZmVyZW5jZUNvbnRleHQpKSB7CisJCQkJfSBlbHNlIGlmIChpbmZl
cmVuY2VDb250ZXh0LmN1cnJlbnRCb3VuZHMuY29uZGl0aW9uMThfNV8yX2J1bGxldF8zXzNfMihh
bHBoYSwgdGFyZ2V0TGVhZlR5cGUsIGluZmVyZW5jZUNvbnRleHQpKSB7CiAJCQkJCXRvUmVzb2x2
ZSA9IHRydWU7Ci0JCQkJfSBlbHNlIGlmICh0YXJnZXRUeXBlLmlzUHJpbWl0aXZlVHlwZSgpKSB7
CisJCQkJfSBlbHNlIGlmICh0YXJnZXRMZWFmVHlwZS5pc1ByaW1pdGl2ZVR5cGUoKSkgewogCQkJ
CQlUeXBlQmluZGluZyB3cmFwcGVyID0gaW5mZXJlbmNlQ29udGV4dC5jdXJyZW50Qm91bmRzLmZp
bmRXcmFwcGVyVHlwZUJvdW5kKGFscGhhKTsKIAkJCQkJaWYgKHdyYXBwZXIgIT0gbnVsbCkKIAkJ
CQkJCXRvUmVzb2x2ZSA9IHRydWU7CkBAIC0zNzEsNiArMzgyLDkgQEAKIAkJCQkJaWYgKHNvbHV0
aW9uID09IG51bGwpCiAJCQkJCQlyZXR1cm4gZmFsc2U7CiAJCQkJCVR5cGVCaW5kaW5nIHUgPSBz
b2x1dGlvbi5nZXRJbnN0YW50aWF0aW9uKGFscGhhLCBudWxsKS5jYXB0dXJlKGluZmVyZW5jZUNv
bnRleHQuc2NvcGUsIGludm9jYXRpb25TaXRlLnNvdXJjZUVuZCgpKTsKKwkJCQkJaWYgKHJUaGV0
YS5kaW1lbnNpb25zKCkgIT0gMCkgeworCQkJCQkJdSA9IGluZmVyZW5jZUNvbnRleHQuZW52aXJv
bm1lbnQuY3JlYXRlQXJyYXlUeXBlKHUsIHJUaGV0YS5kaW1lbnNpb25zKCkpOworCQkJCQl9CiAJ
CQkJCUNvbnN0cmFpbnRUeXBlRm9ybXVsYSBuZXdDb25zdHJhaW50ID0gQ29uc3RyYWludFR5cGVG
b3JtdWxhLmNyZWF0ZSh1LCB0YXJnZXRUeXBlLCBDT01QQVRJQkxFKTsKIAkJCQkJcmV0dXJuIGlu
ZmVyZW5jZUNvbnRleHQucmVkdWNlQW5kSW5jb3Jwb3JhdGUobmV3Q29uc3RyYWludCk7CiAJCQkJ
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db25zdHJhaW50VHlwZUZvcm11bGEuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9sb29rdXAvQ29uc3RyYWludFR5cGVGb3JtdWxhLmphdmEKaW5kZXggZmQ5ODg0My4u
YWMyY2JhMCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db25zdHJhaW50VHlwZUZvcm11bGEu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0NvbnN0cmFpbnRUeXBlRm9ybXVsYS5qYXZhCkBAIC04
MSw3ICs4MSw3IEBACiAJCQkJCS8vCQkJCQkJCQkJCQkJCQkJICB0aGlzLnJpZ2h0ID0gRzxUMSxU
MiwuLi4+IG9yIEc8VDEsVDIsLi4uPltdawogCQkJCQlUeXBlQmluZGluZyBncyA9IHRoaXMubGVm
dC5maW5kU3VwZXJUeXBlT3JpZ2luYXRpbmdGcm9tKHRoaXMucmlnaHQpOwkvLyBHPFMxLFMyLC4u
Lj4gb3IgRzxTMSxTMiwuLi4+W11rCiAJCQkJCWlmIChncyAhPSBudWxsICYmIGdzLmxlYWZDb21w
b25lbnRUeXBlKCkuaXNSYXdUeXBlKCkpIHsKLQkJCQkJCWluZmVyZW5jZUNvbnRleHQucmVjb3Jk
VW5jaGVja2VkQ29udmVyc2lvbih0aGlzKTsKKwkJCQkJCWluZmVyZW5jZUNvbnRleHQudXNlc1Vu
Y2hlY2tlZENvbnZlcnNpb24gPSB0cnVlOwogCQkJCQkJcmV0dXJuIFRSVUU7CiAJCQkJCX0KIAkJ
CQkJYnJlYWs7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0luZmVyZW5jZUNvbnRleHQxOC5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9JbmZlcmVuY2VDb250ZXh0MTguamF2YQppbmRleCA4OTJlMzg3
Li5iN2Y4YmJhIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0luZmVyZW5jZUNvbnRleHQxOC5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9sb29rdXAvSW5mZXJlbmNlQ29udGV4dDE4LmphdmEKQEAgLTExLDE0
ICsxMSwxMiBAQAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXA7CiAKLWltcG9ydCBqYXZhLnV0aWwuQXJyYXlM
aXN0OwogaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CiBpbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rp
b247CiBpbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7CiBpbXBvcnQgamF2YS51dGlsLkhhc2hN
YXA7CiBpbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CiBpbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y
OwotaW1wb3J0IGphdmEudXRpbC5MaXN0OwogaW1wb3J0IGphdmEudXRpbC5NYXA7CiBpbXBvcnQg
amF2YS51dGlsLlNldDsKIApAQCAtNzgsMTEgKzc2LDExIEBACiAgKiA8ZHQ+MTguNS4xIEludm9j
YXRpb24gQXBwbGljYWJpbGl0eSBJbmZlcmVuY2U8L2R0PgogICogPGRkPntAbGluayAjaW5mZXJJ
bnZvY2F0aW9uQXBwbGljYWJpbGl0eShNZXRob2RCaW5kaW5nLCBUeXBlQmluZGluZ1tdLCBib29s
ZWFuKX0uIFByZXBhcmUgdGhlIGluaXRpYWwgc3RhdGUgZm9yCiAgKiAJaW5mZXJlbmNlIG9mIGEg
Z2VuZXJpYyBpbnZvY2F0aW9uIC0gbm8gdGFyZ2V0IHR5cGUgdXNlZCBhdCB0aGlzIHBvaW50Lgot
ICogIE5lZWQgdG8gY2FsbCB7QGxpbmsgI3NvbHZlKCl9IGFmdGVyd2FyZHMgdG8gcHJvZHVjZSB0
aGUgaW50ZXJtZWRpYXRlIHJlc3VsdC48YnIvPgorICogIE5lZWQgdG8gY2FsbCB7QGxpbmsgI3Nv
bHZlKGJvb2xlYW4pfSB3aXRoIHRydWUgYWZ0ZXJ3YXJkcyB0byBwcm9kdWNlIHRoZSBpbnRlcm1l
ZGlhdGUgcmVzdWx0Ljxici8+CiAgKiAgQ2FsbGVkIGluZGlyZWN0bHkgZnJvbSB7QGxpbmsgU2Nv
cGUjZmluZE1ldGhvZChSZWZlcmVuY2VCaW5kaW5nLCBjaGFyW10sIFR5cGVCaW5kaW5nW10sIElu
dm9jYXRpb25TaXRlLCBib29sZWFuKX0gZXQgYWwKICAqICB0byBzZWxlY3QgYXBwbGljYWJsZSBt
ZXRob2RzIGludG8gb3ZlcmxvYWQgcmVzb2x1dGlvbi48L2RkPgogICogPGR0PjE4LjUuMiBJbnZv
Y2F0aW9uIFR5cGUgSW5mZXJlbmNlPC9kdD4KLSAqIDxkZD57QGxpbmsgSW5mZXJlbmNlQ29udGV4
dDE4I2luZmVySW52b2NhdGlvblR5cGUoQm91bmRTZXQsIFR5cGVCaW5kaW5nLCBJbnZvY2F0aW9u
U2l0ZSwgTWV0aG9kQmluZGluZyl9LiBBZnRlciBhCisgKiA8ZGQ+e0BsaW5rIEluZmVyZW5jZUNv
bnRleHQxOCNpbmZlckludm9jYXRpb25UeXBlKFR5cGVCaW5kaW5nLCBJbnZvY2F0aW9uU2l0ZSwg
TWV0aG9kQmluZGluZyl9LiBBZnRlciBhCiAgKiAJbW9zdCBzcGVjaWZpYyBtZXRob2QgaGFzIGJl
ZW4gcGlja2VkLCBhbmQgZ2l2ZW4gYSB0YXJnZXQgdHlwZSBkZXRlcm1pbmUgdGhlIGZpbmFsIGdl
bmVyaWMgaW5zdGFudGlhdGlvbi4KICAqICBBcyBsb25nIGFzIGEgdGFyZ2V0IHR5cGUgaXMgc3Rp
bGwgdW5hdmFpbGFibGUgdGhpcyBwaGFzZSBrZWVwcyBnZXR0aW5nIGRlZmVycmVkLjwvYnI+CiAg
KiAgRGlmZmVyZW50IHdyYXBwZXJzIGV4aXN0IGZvciB0aGUgY29udmVuaWVuY2Ugb2YgZGlmZmVy
ZW50IGNhbGxlcnMuPC9kZD4KQEAgLTE0NiwxMSArMTQ0LDEyIEBACiAJcHVibGljIHN0YXRpYyBm
aW5hbCBpbnQgQklORElOR1NfVVBEQVRFRCA9IDM7CiAJCiAJLyoqIFNpZ25hbHMgd2hldGhlciBh
bnkgdHlwZSBjb21wYXRpYmlsaXR5IG1ha2VzIHVzZSBvZiB1bmNoZWNrZWQgY29udmVyc2lvbi4g
Ki8KLQlwdWJsaWMgTGlzdDxDb25zdHJhaW50Rm9ybXVsYT4gY29uc3RyYWludHNXaXRoVW5jaGVj
a2VkQ29udmVyc2lvbjsKKwlwdWJsaWMgYm9vbGVhbiB1c2VzVW5jaGVja2VkQ29udmVyc2lvbjsK
IAogCVNjb3BlIHNjb3BlOwogCUxvb2t1cEVudmlyb25tZW50IGVudmlyb25tZW50OwogCVJlZmVy
ZW5jZUJpbmRpbmcgb2JqZWN0OyAvLyBqYXZhLmxhbmcuT2JqZWN0CisJcHVibGljIEJvdW5kU2V0
IGIyOwogCQogCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IENIRUNLX1NUUklDVCA9IDE7CiAJcHVi
bGljIHN0YXRpYyBmaW5hbCBpbnQgQ0hFQ0tfTE9PU0UgPSAyOwpAQCAtMTYxLDExICsxNjAsMTMg
QEAKIAkJRXhwcmVzc2lvbltdIGludm9jYXRpb25Bcmd1bWVudHM7CiAJCUluZmVyZW5jZVZhcmlh
YmxlW10gaW5mZXJlbmNlVmFyaWFibGVzOwogCQlpbnQgaW5mZXJlbmNlS2luZDsKLQkJU3VzcGVu
ZGVkSW5mZXJlbmNlUmVjb3JkKEludm9jYXRpb25TaXRlIHNpdGUsIEV4cHJlc3Npb25bXSBpbnZv
Y2F0aW9uQXJndW1lbnRzLCBJbmZlcmVuY2VWYXJpYWJsZVtdIGluZmVyZW5jZVZhcmlhYmxlcywg
aW50IGluZmVyZW5jZUtpbmQpIHsKKwkJYm9vbGVhbiB1c2VzVW5jaGVja2VkQ29udmVyc2lvbjsK
KwkJU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkKEludm9jYXRpb25TaXRlIHNpdGUsIEV4cHJlc3Np
b25bXSBpbnZvY2F0aW9uQXJndW1lbnRzLCBJbmZlcmVuY2VWYXJpYWJsZVtdIGluZmVyZW5jZVZh
cmlhYmxlcywgaW50IGluZmVyZW5jZUtpbmQsIGJvb2xlYW4gdXNlc1VuY2hlY2tlZENvbnZlcnNp
b24pIHsKIAkJCXRoaXMuc2l0ZSA9IHNpdGU7CiAJCQl0aGlzLmludm9jYXRpb25Bcmd1bWVudHMg
PSBpbnZvY2F0aW9uQXJndW1lbnRzOwogCQkJdGhpcy5pbmZlcmVuY2VWYXJpYWJsZXMgPSBpbmZl
cmVuY2VWYXJpYWJsZXM7CiAJCQl0aGlzLmluZmVyZW5jZUtpbmQgPSBpbmZlcmVuY2VLaW5kOwor
CQkJdGhpcy51c2VzVW5jaGVja2VkQ29udmVyc2lvbiA9IHVzZXNVbmNoZWNrZWRDb252ZXJzaW9u
OwogCQl9CiAJfQogCQpAQCAtMzI1LDE3ICszMjYsMTQgQEAKIAl9CiAKIAkvKiogSkxTIDE4LjUu
MiBJbnZvY2F0aW9uIFR5cGUgSW5mZXJlbmNlIAotCSAqIEBwYXJhbSBiMSAidGhlIGJvdW5kIHNl
dCBwcm9kdWNlZCBieSByZWR1Y3Rpb24gaW4gb3JkZXIgdG8gZGVtb25zdHJhdGUgdGhhdCBtIGlz
IGFwcGxpY2FibGUgaW4gMTguNS4xIgogCSAqLwotCXB1YmxpYyBCb3VuZFNldCBpbmZlckludm9j
YXRpb25UeXBlKEJvdW5kU2V0IGIxLCBUeXBlQmluZGluZyBleHBlY3RlZFR5cGUsIEludm9jYXRp
b25TaXRlIGludm9jYXRpb25TaXRlLCBNZXRob2RCaW5kaW5nIG1ldGhvZCkKLQkJCXRocm93cyBJ
bmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9uIAorCXB1YmxpYyBCb3VuZFNldCBpbmZlckludm9jYXRp
b25UeXBlKFR5cGVCaW5kaW5nIGV4cGVjdGVkVHlwZSwgSW52b2NhdGlvblNpdGUgaW52b2NhdGlv
blNpdGUsIE1ldGhvZEJpbmRpbmcgbWV0aG9kKSB0aHJvd3MgSW5mZXJlbmNlRmFpbHVyZUV4Y2Vw
dGlvbiAKIAl7CiAJCS8vIG5vdCBKTFM6IHNpbXBseSBlbnN1cmUgdGhhdCBudWxsIGhpbnRzIGZy
b20gdGhlIHJldHVybiB0eXBlIGhhdmUgYmVlbiBzZWVuIGV2ZW4gaW4gc3RhbmRhbG9uZSBjb250
ZXh0czoKIAkJaWYgKGV4cGVjdGVkVHlwZSA9PSBudWxsICYmIG1ldGhvZC5yZXR1cm5UeXBlICE9
IG51bGwpCiAJCQlzdWJzdGl0dXRlKG1ldGhvZC5yZXR1cm5UeXBlKTsgLy8gcmVzdWx0IGlzIGln
bm9yZSwgdGhlIG9ubHkgZWZmZWN0IGlzIG9uIEluZmVyZW5jZVZhcmlhYmxlLm51bGxIaW50cwot
CQkvLwotCQlCb3VuZFNldCBwcmV2aW91cyA9IHRoaXMuY3VycmVudEJvdW5kcy5jb3B5KCk7Ci0J
CXRoaXMuY3VycmVudEJvdW5kcyA9IGIxOworCQkKKwkJdGhpcy5jdXJyZW50Qm91bmRzID0gdGhp
cy5iMi5jb3B5KCk7CiAJCXRyeSB7CiAJCQkvLyBidWxsZXRzIDEmMjogZGVmaW5pdGlvbnMgb25s
eS4KIAkJCWlmIChleHBlY3RlZFR5cGUgIT0gbnVsbApAQCAtMzkxLDExICszODksOSBAQAogCQkJ
Ly8gNi4gYnVsbGV0OiBzb2x2ZQogCQkJQm91bmRTZXQgc29sdXRpb24gPSBzb2x2ZSgpOwogCQkJ
aWYgKHNvbHV0aW9uID09IG51bGwgfHwgIWlzUmVzb2x2ZWQoc29sdXRpb24pKSB7Ci0JCQkJdGhp
cy5jdXJyZW50Qm91bmRzID0gcHJldmlvdXM7IC8vIGRvbid0IGxldCBib3VuZHMgZnJvbSB1bnN1
Y2Nlc3NmdWwgYXR0ZW1wdCBsZWFrIGludG8gc3Vic2VxdWVudCBhdHRlbXB0cworCQkJCXRoaXMu
Y3VycmVudEJvdW5kcyA9IHRoaXMuYjI7IC8vIGRvbid0IGxldCBib3VuZHMgZnJvbSB1bnN1Y2Nl
c3NmdWwgYXR0ZW1wdCBsZWFrIGludG8gc3Vic2VxdWVudCBhdHRlbXB0cwogCQkJCXJldHVybiBu
dWxsOwogCQkJfQotCQkJLy8gd2UncmUgZG9uZSwgc3RhcnQgcmVwb3J0aW5nOgotCQkJcmVwb3J0
VW5jaGVja2VkQ29udmVyc2lvbnMoc29sdXRpb24pOwogCQkJcmV0dXJuIHRoaXMuY3VycmVudEJv
dW5kcyA9IHNvbHV0aW9uOyAvLyB0aGlzIGlzIGZpbmFsLCBrZWVwIHRoZSByZXN1bHQ6CiAJCX0g
ZmluYWxseSB7CiAJCQl0aGlzLnN0ZXBDb21wbGV0ZWQgPSBUWVBFX0lORkVSUkVEOwpAQCAtNzc2
LDEzICs3NzIsMTkgQEAKIAkgKiBAcmV0dXJuIGEgYm91bmQgc2V0IHJlcHJlc2VudGluZyB0aGUg
c29sdXRpb24sIG9yIG51bGwgaWYgaW5mZXJlbmNlIGZhaWxlZAogCSAqIEB0aHJvd3MgSW5mZXJl
bmNlRmFpbHVyZUV4Y2VwdGlvbiBhIGNvbXBpbGUgZXJyb3IgaGFzIGJlZW4gZGV0ZWN0ZWQgZHVy
aW5nIGluZmVyZW5jZQogCSAqLwotCXB1YmxpYyAvKkBOdWxsYWJsZSovIEJvdW5kU2V0IHNvbHZl
KCkgdGhyb3dzIEluZmVyZW5jZUZhaWx1cmVFeGNlcHRpb24geworCXB1YmxpYyAvKkBOdWxsYWJs
ZSovIEJvdW5kU2V0IHNvbHZlKGJvb2xlYW4gaW5mZXJyaW5nQXBwbGljYWJpbGl0eSkgdGhyb3dz
IEluZmVyZW5jZUZhaWx1cmVFeGNlcHRpb24gewogCQlpZiAoIXJlZHVjZSgpKQogCQkJcmV0dXJu
IG51bGw7CiAJCWlmICghdGhpcy5jdXJyZW50Qm91bmRzLmluY29ycG9yYXRlKHRoaXMpKQogCQkJ
cmV0dXJuIG51bGw7CisJCWlmIChpbmZlcnJpbmdBcHBsaWNhYmlsaXR5KQorCQkJdGhpcy5iMiA9
IHRoaXMuY3VycmVudEJvdW5kcy5jb3B5KCk7IC8vIFByZXNlcnZlIHRoZSByZXN1bHQgYWZ0ZXIg
cmVkdWN0aW9uLCB3aXRob3V0IGVmZmVjdHMgb2YgcmVzb2x2ZSgpIGZvciBsYXRlciB1c2UgaW4g
aW52b2NhdGlvbiB0eXBlIGluZmVyZW5jZS4KIAogCQlyZXR1cm4gcmVzb2x2ZSh0aGlzLmluZmVy
ZW5jZVZhcmlhYmxlcyk7CisJfQorCQorCXB1YmxpYyAvKkBOdWxsYWJsZSovIEJvdW5kU2V0IHNv
bHZlKCkgdGhyb3dzIEluZmVyZW5jZUZhaWx1cmVFeGNlcHRpb24geworCQlyZXR1cm4gc29sdmUo
ZmFsc2UpOwogCX0KIAkKIAlwdWJsaWMgLypATnVsbGFibGUqLyBCb3VuZFNldCBzb2x2ZShJbmZl
cmVuY2VWYXJpYWJsZVtdIHRvUmVzb2x2ZSkgdGhyb3dzIEluZmVyZW5jZUZhaWx1cmVFeGNlcHRp
b24gewpAQCAtNzk5LDExICs4MDEsMTQgQEAKIAkgKiBAdGhyb3dzIEluZmVyZW5jZUZhaWx1cmVF
eGNlcHRpb24gCiAJICovCiAJcHJpdmF0ZSBib29sZWFuIHJlZHVjZSgpIHRocm93cyBJbmZlcmVu
Y2VGYWlsdXJlRXhjZXB0aW9uIHsKLQkJaWYgKHRoaXMuaW5pdGlhbENvbnN0cmFpbnRzICE9IG51
bGwpIHsKLQkJCWZvciAoaW50IGkgPSAwOyBpIDwgdGhpcy5pbml0aWFsQ29uc3RyYWludHMubGVu
Z3RoOyBpKyspIHsKLQkJCQlpZiAoIXRoaXMuY3VycmVudEJvdW5kcy5yZWR1Y2VPbmVDb25zdHJh
aW50KHRoaXMsIHRoaXMuaW5pdGlhbENvbnN0cmFpbnRzW2ldKSkKLQkJCQkJcmV0dXJuIGZhbHNl
OwotCQkJfQorCQkvLyBDYXV0aW9uOiBUaGlzIGNhbiBiZSByZWVudGVyZWQgcmVjdXJzaXZlbHkg
ZXZlbiBhcyBhbiBlYXJsaWVyIGNhbGwgaXMgbXVuY2hpbmcgdGhyb3VnaCB0aGUgY29uc3RyYWlu
dHMgIQorCQlmb3IgKGludCBpID0gMDsgdGhpcy5pbml0aWFsQ29uc3RyYWludHMgIT0gbnVsbCAm
JiBpIDwgdGhpcy5pbml0aWFsQ29uc3RyYWludHMubGVuZ3RoOyBpKyspIHsKKwkJCWZpbmFsIENv
bnN0cmFpbnRGb3JtdWxhIGN1cnJlbnRDb25zdHJhaW50ID0gdGhpcy5pbml0aWFsQ29uc3RyYWlu
dHNbaV07CisJCQlpZiAoY3VycmVudENvbnN0cmFpbnQgPT0gbnVsbCkKKwkJCQljb250aW51ZTsK
KwkJCXRoaXMuaW5pdGlhbENvbnN0cmFpbnRzW2ldID0gbnVsbDsKKwkJCWlmICghdGhpcy5jdXJy
ZW50Qm91bmRzLnJlZHVjZU9uZUNvbnN0cmFpbnQodGhpcywgY3VycmVudENvbnN0cmFpbnQpKQor
CQkJCXJldHVybiBmYWxzZTsKIAkJfQogCQl0aGlzLmluaXRpYWxDb25zdHJhaW50cyA9IG51bGw7
CiAJCXJldHVybiB0cnVlOwpAQCAtMTMwMiwxOSArMTMwNywyMCBAQAogCX0KIAkKIAlwdWJsaWMg
U3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkIGVudGVyUG9seUludm9jYXRpb24oSW52b2NhdGlvblNp
dGUgaW52b2NhdGlvbiwgRXhwcmVzc2lvbltdIGlubmVyQXJndW1lbnRzKSB7Ci0JCVN1c3BlbmRl
ZEluZmVyZW5jZVJlY29yZCByZWNvcmQgPSBuZXcgU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkKHRo
aXMuY3VycmVudEludm9jYXRpb24sIHRoaXMuaW52b2NhdGlvbkFyZ3VtZW50cywgdGhpcy5pbmZl
cmVuY2VWYXJpYWJsZXMsIHRoaXMuaW5mZXJlbmNlS2luZCk7CisJCVN1c3BlbmRlZEluZmVyZW5j
ZVJlY29yZCByZWNvcmQgPSBuZXcgU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkKHRoaXMuY3VycmVu
dEludm9jYXRpb24sIHRoaXMuaW52b2NhdGlvbkFyZ3VtZW50cywgdGhpcy5pbmZlcmVuY2VWYXJp
YWJsZXMsIHRoaXMuaW5mZXJlbmNlS2luZCwgdGhpcy51c2VzVW5jaGVja2VkQ29udmVyc2lvbik7
CiAJCXRoaXMuaW5mZXJlbmNlVmFyaWFibGVzID0gbnVsbDsKIAkJdGhpcy5pbnZvY2F0aW9uQXJn
dW1lbnRzID0gaW5uZXJBcmd1bWVudHM7CiAJCXRoaXMuY3VycmVudEludm9jYXRpb24gPSBpbnZv
Y2F0aW9uOwotCQkKKwkJdGhpcy51c2VzVW5jaGVja2VkQ29udmVyc2lvbiA9IGZhbHNlOwogCQly
ZXR1cm4gcmVjb3JkOwogCX0KIAkKIAlwdWJsaWMgU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkIGVu
dGVyTGFtYmRhKExhbWJkYUV4cHJlc3Npb24gbGFtYmRhKSB7Ci0JCVN1c3BlbmRlZEluZmVyZW5j
ZVJlY29yZCByZWNvcmQgPSBuZXcgU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkKHRoaXMuY3VycmVu
dEludm9jYXRpb24sIHRoaXMuaW52b2NhdGlvbkFyZ3VtZW50cywgdGhpcy5pbmZlcmVuY2VWYXJp
YWJsZXMsIHRoaXMuaW5mZXJlbmNlS2luZCk7CisJCVN1c3BlbmRlZEluZmVyZW5jZVJlY29yZCBy
ZWNvcmQgPSBuZXcgU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkKHRoaXMuY3VycmVudEludm9jYXRp
b24sIHRoaXMuaW52b2NhdGlvbkFyZ3VtZW50cywgdGhpcy5pbmZlcmVuY2VWYXJpYWJsZXMsIHRo
aXMuaW5mZXJlbmNlS2luZCwgdGhpcy51c2VzVW5jaGVja2VkQ29udmVyc2lvbik7CiAJCXRoaXMu
aW5mZXJlbmNlVmFyaWFibGVzID0gbnVsbDsKIAkJdGhpcy5pbnZvY2F0aW9uQXJndW1lbnRzID0g
bnVsbDsKIAkJdGhpcy5jdXJyZW50SW52b2NhdGlvbiA9IG51bGw7CisJCXRoaXMudXNlc1VuY2hl
Y2tlZENvbnZlcnNpb24gPSBmYWxzZTsKIAkJcmV0dXJuIHJlY29yZDsKIAl9CiAKQEAgLTEzMzQs
MjMgKzEzNDAsNyBAQAogCQl0aGlzLmN1cnJlbnRJbnZvY2F0aW9uID0gcmVjb3JkLnNpdGU7CiAJ
CXRoaXMuaW52b2NhdGlvbkFyZ3VtZW50cyA9IHJlY29yZC5pbnZvY2F0aW9uQXJndW1lbnRzOwog
CQl0aGlzLmluZmVyZW5jZUtpbmQgPSByZWNvcmQuaW5mZXJlbmNlS2luZDsKLQl9Ci0KLQlwcml2
YXRlIFN1YnN0aXR1dGlvbiBnZXRSZXN1bHRTdWJzdGl0dXRpb24oZmluYWwgQm91bmRTZXQgcmVz
dWx0KSB7Ci0JCXJldHVybiBuZXcgU3Vic3RpdHV0aW9uKCkgewotCQkJcHVibGljIExvb2t1cEVu
dmlyb25tZW50IGVudmlyb25tZW50KCkgeyAKLQkJCQlyZXR1cm4gSW5mZXJlbmNlQ29udGV4dDE4
LnRoaXMuZW52aXJvbm1lbnQ7Ci0JCQl9Ci0JCQlwdWJsaWMgYm9vbGVhbiBpc1Jhd1N1YnN0aXR1
dGlvbigpIHsKLQkJCQlyZXR1cm4gZmFsc2U7Ci0JCQl9Ci0JCQlwdWJsaWMgVHlwZUJpbmRpbmcg
c3Vic3RpdHV0ZShUeXBlVmFyaWFibGVCaW5kaW5nIHR5cGVWYXJpYWJsZSkgewotCQkJCWlmICh0
eXBlVmFyaWFibGUgaW5zdGFuY2VvZiBJbmZlcmVuY2VWYXJpYWJsZSkgewotCQkJCQlyZXR1cm4g
cmVzdWx0LmdldEluc3RhbnRpYXRpb24oKEluZmVyZW5jZVZhcmlhYmxlKSB0eXBlVmFyaWFibGUs
IEluZmVyZW5jZUNvbnRleHQxOC50aGlzLmVudmlyb25tZW50KTsKLQkJCQl9Ci0JCQkJcmV0dXJu
IHR5cGVWYXJpYWJsZTsKLQkJCX0KLQkJfTsKKwkJdGhpcy51c2VzVW5jaGVja2VkQ29udmVyc2lv
biA9IHJlY29yZC51c2VzVW5jaGVja2VkQ29udmVyc2lvbjsKIAl9CiAKIAlwdWJsaWMgYm9vbGVh
biBpc1ZhckFyZ3MoKSB7CkBAIC0xNDU5LDQyICsxNDQ5LDYgQEAKIAkJCQlhcHJpbWVbaV0gPSBh
W2ldOwogCQl9CiAJCXJldHVybiBhcHJpbWU7Ci0JfQotCi0JLyoqIFJlY29yZCB0aGUgZmFjdCB0
aGF0IHRoZSBnaXZlbiBjb25zdHJhaW50IHJlcXVpcmVzIHVuY2hlY2tlZCBjb252ZXJzaW9uLiAq
LwotCXB1YmxpYyB2b2lkIHJlY29yZFVuY2hlY2tlZENvbnZlcnNpb24oQ29uc3RyYWludFR5cGVG
b3JtdWxhIGNvbnN0cmFpbnQpIHsKLQkJaWYgKHRoaXMuY29uc3RyYWludHNXaXRoVW5jaGVja2Vk
Q29udmVyc2lvbiA9PSBudWxsKQotCQkJdGhpcy5jb25zdHJhaW50c1dpdGhVbmNoZWNrZWRDb252
ZXJzaW9uID0gbmV3IEFycmF5TGlzdDxDb25zdHJhaW50Rm9ybXVsYT4oKTsKLQkJdGhpcy5jb25z
dHJhaW50c1dpdGhVbmNoZWNrZWRDb252ZXJzaW9uLmFkZChjb25zdHJhaW50KTsKLQl9Ci0JCi0J
dm9pZCByZXBvcnRVbmNoZWNrZWRDb252ZXJzaW9ucyhCb3VuZFNldCBzb2x1dGlvbikgewotCQlp
ZiAodGhpcy5jb25zdHJhaW50c1dpdGhVbmNoZWNrZWRDb252ZXJzaW9uICE9IG51bGwpIHsKLQkJ
CWludCBsZW4gPSB0aGlzLmNvbnN0cmFpbnRzV2l0aFVuY2hlY2tlZENvbnZlcnNpb24uc2l6ZSgp
OwotCQkJU3Vic3RpdHV0aW9uIHN1YnN0aXR1dGlvbiA9IGdldFJlc3VsdFN1YnN0aXR1dGlvbihz
b2x1dGlvbik7Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7Ci0JCQkJQ29uc3Ry
YWludFR5cGVGb3JtdWxhIGNvbnN0cmFpbnQgPSAoQ29uc3RyYWludFR5cGVGb3JtdWxhKSB0aGlz
LmNvbnN0cmFpbnRzV2l0aFVuY2hlY2tlZENvbnZlcnNpb24uZ2V0KGkpOwotCQkJCVR5cGVCaW5k
aW5nIGV4cGVjdGVkVHlwZSA9IGNvbnN0cmFpbnQucmlnaHQ7Ci0JCQkJVHlwZUJpbmRpbmcgcHJv
dmlkZWRUeXBlID0gY29uc3RyYWludC5sZWZ0OwotCQkJCWlmICghZXhwZWN0ZWRUeXBlLmlzUHJv
cGVyVHlwZSh0cnVlKSkgewotCQkJCQlleHBlY3RlZFR5cGUgPSBTY29wZS5zdWJzdGl0dXRlKHN1
YnN0aXR1dGlvbiwgZXhwZWN0ZWRUeXBlKTsKLQkJCQl9Ci0JCQkJaWYgKCFwcm92aWRlZFR5cGUu
aXNQcm9wZXJUeXBlKHRydWUpKSB7Ci0JCQkJCXByb3ZpZGVkVHlwZSA9IFNjb3BlLnN1YnN0aXR1
dGUoc3Vic3RpdHV0aW9uLCBwcm92aWRlZFR5cGUpOwotCQkJCX0KLS8qIEZJWE1FKHN0ZXBoYW4p
OiBlbmFibGUgb25jZSB3ZSBzb2x2ZWQ6Ci0gICAgICAgICAgICAgICAgICAgIChhKSBhdm9pZCBk
dXBsaWNhdGlvbiB3aXRoIHRyYWRpdGlvbmFsIHJlcG9ydGluZwotICAgICAgICAgICAgICAgICAg
ICAoYikgaW1wcm92ZSBsb2NhdGlvbiB0byByZXBvcnQgYWdhaW5zdAotCQkJCWlmICh0aGlzLmN1
cnJlbnRJbnZvY2F0aW9uIGluc3RhbmNlb2YgRXhwcmVzc2lvbikKLQkJCQkJdGhpcy5zY29wZS5w
cm9ibGVtUmVwb3J0ZXIoKS51bnNhZmVUeXBlQ29udmVyc2lvbigoRXhwcmVzc2lvbikgdGhpcy5j
dXJyZW50SW52b2NhdGlvbiwgcHJvdmlkZWRUeXBlLCBleHBlY3RlZFR5cGUpOwotICovCi0JCQl9
Ci0JCX0KLQl9Ci0JCi0JLyoqIEZvciB1c2UgYnkgMTUuMTIuMi42IE1ldGhvZCBJbnZvY2F0aW9u
IFR5cGUgKi8KLQlwdWJsaWMgYm9vbGVhbiB1c2VzVW5jaGVja2VkQ29udmVyc2lvbigpIHsKLQkJ
cmV0dXJuIHRoaXMuY29uc3RyYWludHNXaXRoVW5jaGVja2VkQ29udmVyc2lvbiAhPSBudWxsOwog
CX0KIAogCS8vIElOVEVSSU06IGluZnJhc3RydWN0dXJlIGZvciBkZXRlY3RpbmcgZmFpbHVyZXMg
Y2F1c2VkIGJ5IHNwZWNpZmljIGtub3duIGluY29tcGxldGVuZXNzOgpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVkR2VuZXJpY01ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9sb29rdXAvUGFyYW1ldGVyaXplZEdlbmVyaWNNZXRob2RCaW5kaW5nLmphdmEKaW5kZXggZjM3
MDNlNS4uMzgzMTc0MyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVkR2Vu
ZXJpY01ldGhvZEJpbmRpbmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRH
ZW5lcmljTWV0aG9kQmluZGluZy5qYXZhCkBAIC0xNzYsMTQgKzE3NiwxNCBAQAogCQkJaWYgKGFy
Z3VtZW50cy5sZW5ndGggPT0gcGFyYW1ldGVycy5sZW5ndGgpIHsKIAkJCQlpbmZDdHgxOC5pbmZl
cmVuY2VLaW5kID0gSW5mZXJlbmNlQ29udGV4dDE4LkNIRUNLX0xPT1NFOyAvLyBUT0RPOiB2YWxp
ZGF0ZSBpZiAyIHBoYXNlIGNoZWNraW5nIChzdHJpY3QvbG9vc2UgKyB2YXJhcmcpIGlzIHN1ZmZp
Y2llbnQuCiAJCQkJaW5mQ3R4MTguaW5mZXJJbnZvY2F0aW9uQXBwbGljYWJpbGl0eShvcmlnaW5h
bE1ldGhvZCwgYXJndW1lbnRzLCBpc0RpYW1vbmQpOwotCQkJCXJlc3VsdCA9IGluZkN0eDE4LnNv
bHZlKCk7CisJCQkJcmVzdWx0ID0gaW5mQ3R4MTguc29sdmUodHJ1ZSk7CiAJCQl9CiAJCQlpZiAo
cmVzdWx0ID09IG51bGwgJiYgb3JpZ2luYWxNZXRob2QuaXNWYXJhcmdzKCkpIHsKIAkJCQkvLyBj
aGVjayBmb3IgdmFyaWFibGUtYXJpdHkgYXBwbGljYWJpbGl0eQogCQkJCWluZkN0eDE4ID0gaW52
b2NhdGlvblNpdGUuZnJlc2hJbmZlcmVuY2VDb250ZXh0KHNjb3BlKTsgLy8gc3RhcnQgb3Zlcgog
CQkJCWluZkN0eDE4LmluZmVyZW5jZUtpbmQgPSBJbmZlcmVuY2VDb250ZXh0MTguQ0hFQ0tfVkFS
QVJHOwogCQkJCWluZkN0eDE4LmluZmVySW52b2NhdGlvbkFwcGxpY2FiaWxpdHkob3JpZ2luYWxN
ZXRob2QsIGFyZ3VtZW50cywgaXNEaWFtb25kKTsKLQkJCQlyZXN1bHQgPSBpbmZDdHgxOC5zb2x2
ZSgpOworCQkJCXJlc3VsdCA9IGluZkN0eDE4LnNvbHZlKHRydWUpOwogCQkJfQogCQkJaWYgKHJl
c3VsdCA9PSBudWxsKQogCQkJCXJldHVybiBudWxsOwpAQCAtMjAwLDggKzIwMCw3IEBACiAJCQlp
ZiAoZXhwZWN0ZWRUeXBlICE9IG51bGwgfHwgIWludm9jYXRpb25TaXRlLmdldEV4cHJlc3Npb25D
b250ZXh0KCkuZGVmaW5lc1RhcmdldFR5cGUoKSkgewogCQkJCS8vIC0tLS0gMTguNS4yIChJbnZv
Y2F0aW9uIHR5cGUpOiAtLS0tCiAJCQkJcHJvdmlzaW9uYWxSZXN1bHQgPSByZXN1bHQ7Ci0JCQkJ
cmVzdWx0ID0gaW5mQ3R4MTguY3VycmVudEJvdW5kcy5jb3B5KCk7IC8vIHRoZSByZXN1bHQgYWZ0
ZXIgcmVkdWN0aW9uLCB3aXRob3V0IGVmZmVjdHMgb2YgcmVzb2x2ZSgpCi0JCQkJcmVzdWx0ID0g
aW5mQ3R4MTguaW5mZXJJbnZvY2F0aW9uVHlwZShyZXN1bHQsIGV4cGVjdGVkVHlwZSwgaW52b2Nh
dGlvblNpdGUsIG9yaWdpbmFsTWV0aG9kKTsKKwkJCQlyZXN1bHQgPSBpbmZDdHgxOC5pbmZlcklu
dm9jYXRpb25UeXBlKGV4cGVjdGVkVHlwZSwgaW52b2NhdGlvblNpdGUsIG9yaWdpbmFsTWV0aG9k
KTsKIAkJCQlpbnZvY2F0aW9uVHlwZUluZmVycmVkID0gdHJ1ZTsKIAkJCQloYXNSZXR1cm5Qcm9i
bGVtIHw9IHJlc3VsdCA9PSBudWxsOwogCQkJCWlmIChoYXNSZXR1cm5Qcm9ibGVtKQ==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>248191</attachid>
            <date>2014-10-26 22:38:00 -0400</date>
            <delta_ts>2014-10-27 08:55:10 -0400</delta_ts>
            <desc>Same patch synched with master</desc>
            <filename>444334.patch</filename>
            <type>text/plain</type>
            <size>27293</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVncmVz
c2lvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVn
cmVzc2lvblRlc3QuamF2YQppbmRleCBiMjRlODFlLi5kMTYyYTVmIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9HZW5lcmljc1JlZ3Jlc3Npb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR2VuZXJpY3NSZWdyZXNzaW9uVGVzdC5q
YXZhCkBAIC00NTcxLDYwICs0NTcxLDYyIEBACiAJCQkiICB9XG4iICsgCiAJCQkiXG4iICsgCiAJ
CQkifVxuIjsKLQlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0ZpbGVDb25zdGFudHMu
SkRLMV84KSB7Ci0JCXJ1bkNvbmZvcm1UZXN0KAotCQkJbmV3IFN0cmluZ1tdIHsKLQkJCQkiWC5q
YXZhIiwKLQkJCQlzb3VyY2UKLQkJCX0pOwotCX0gZWxzZSB7CiAJCXJ1bk5lZ2F0aXZlVGVzdCgK
IAkJCW5ldyBTdHJpbmdbXSB7CiAJCQkJIlguamF2YSIsCiAJCQkJc291cmNlCiAJCQl9LAogCQkJ
Ii0tLS0tLS0tLS1cbiIgKyAKLQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIg
KyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAogCQkJIglkb1Nv
bWV0aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIg
KyAKLQkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCi0JCQkiVGhlIG1ldGhvZCBkb1NvbWV0
aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBpbiB0aGUgdHlwZSBYIGlzIG5vdCBhcHBs
aWNhYmxlIGZvciB0aGUgYXJndW1lbnRzIChYLkZvbywgWC5Gb28pXG4iICsgCisJCQkiCV5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsg
CisJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRvU29tZXRoaW5nV2l0aEZv
byhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZ1dpdGhGb28o
WC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsg
Ci0JCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTIpXG4iICsgCisJCQkiMi4gV0FS
TklORyBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmdXaXRoRm9v
KCBhbnkoIEZvby5jbGFzcyApLCBhbnkoIEZvby5jbGFzcyApICk7XG4iICsgCisJCQkiCSAgICAg
ICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBU
aGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRv
IGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJ
CSIzLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAorCQkJIglkb1NvbWV0aGlu
Z1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIgKyAKKwkJ
CSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5Gb28gbmVl
ZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+XG4iICsg
CisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5l
IDEyKVxuIiArIAogCQkJIglGb28gZm9vID0gYW55KCBGb28uY2xhc3MgKTtcbiIgKyAKIAkJCSIJ
Xl5eXG4iICsgCiAJCQkiWC5Gb28gaXMgYSByYXcgdHlwZS4gUmVmZXJlbmNlcyB0byBnZW5lcmlj
IHR5cGUgWC5Gb288VD4gc2hvdWxkIGJlIHBhcmFtZXRlcml6ZWRcbiIgKyAKIAkJCSItLS0tLS0t
LS0tXG4iICsgCi0JCQkiMy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCisJ
CQkiNS4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRvU29tZXRo
aW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRv
U29tZXRoaW5nV2l0aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1Nv
bWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSIt
LS0tLS0tLS0tXG4iICsgCi0JCQkiNC4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4i
ICsgCisJCQkiNi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRv
U29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJICAgICAgICAgICAgICAg
ICAgICBeXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Npb24gb2YgdHlwZSBY
LkZvbyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFguRm9vPE9iamVj
dD5cbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNS4gV0FSTklORyBpbiBYLmphdmEg
KGF0IGxpbmUgMTMpXG4iICsgCisJCQkiNy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMp
XG4iICsgCiAJCQkiCWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJ
ICAgICAgICAgICAgICAgICAgICAgICAgIF5eXlxuIiArIAogCQkJIlR5cGUgc2FmZXR5OiBUaGUg
ZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRvIGNv
bmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI2
LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKKwkJCSI4LiBXQVJOSU5HIGlu
IFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5n
V2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJ
IgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9jYXRp
b24gZG9Tb21ldGhpbmdXaXRoRm9vKFguRm9vLCBYLkZvbykgb2YgdGhlIGdlbmVyaWMgbWV0aG9k
IGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbzxUPiwgWC5Gb288VD4pIG9mIHR5cGUgWFxuIiArIAog
CQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI3LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAx
NylcbiIgKyAKKwkJCSI5LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJ
CSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55
KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNz
aW9uIG9mIHR5cGUgWC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0
byBYLkZvbzxPYmplY3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIiArIAotCQkJIjguIFdBUk5J
TkcgaW4gWC5qYXZhIChhdCBsaW5lIDE3KVxuIiArIAorCQkJIjEwLiBXQVJOSU5HIGluIFguamF2
YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZv
byggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5G
b28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+
XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7Ci0JfQogfQogcHVibGljIHZvaWQgX3Rlc3RCdWc0
MzA2ODYoKSB7CiAJcnVuQ29uZm9ybVRlc3QoCkBAIC01NTc0LDUgKzU1NzYsODUgQEAKIAkJCSJU
aGUgdHlwZSBwYXJhbWV0ZXIgWCBpcyBoaWRpbmcgdGhlIHR5cGUgWFxuIiArIAogCQkJIi0tLS0t
LS0tLS1cbiIpOwogfQorLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTQ0NDMzNCwgIFsxLjhdW2NvbXBpbGVyXSBDb21waWxlciBnZW5lcmF0ZXMgZXJyb3Ig
aW5zdGVhZCBvZiB3YXJuaW5nIG9uIHVuY2hlY2tlZCBjb252ZXJzaW9uIAorcHVibGljIHZvaWQg
dGVzdDQ0NDMzNCgpIHsKKwkJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoCisJCSAgIG5ldyBTdHJpbmdb
XSB7CisJCQkgICAiWC5qYXZhIiwKKwkJCSAgICJpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtc
biIgKworCQkJICAgImltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiIgKworCQkJICAgInB1YmxpYyBj
bGFzcyBYIHtcbiIgKworCQkJICAgIiAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWFpbihTdHJpbmdb
XSBhcmdzKSB7XG4iICsKKwkJCSAgICIgICAgICAgIGRvU29tZXRoaW5nKHJldHVybkNsYXNzVHlw
ZShDbGFzcy5jbGFzcykpO1xuIiArCisJCQkgICAiICAgICAgICBkb1NvbWV0aGluZyhyZXR1cm5M
aXN0VHlwZShuZXcgQXJyYXlMaXN0PExpc3Q+KCkpKTtcbiIgKworCQkJICAgIiAgICB9XG4iICsK
KwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gdm9pZCBkb1NvbWV0aGluZyhDbGFzczxUPiBj
bGF6eikge1xuIiArCisJCQkgICAiICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oY2xhenouZ2V0
U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICIgICAgcHVibGlj
IHN0YXRpYyA8VD4gVCByZXR1cm5DbGFzc1R5cGUoQ2xhc3M8VD4gY2xhenopIHtcbiIgKworCQkJ
ICAgIiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJCSAgICIgICAgfVxuIiArCisJCQkgICAi
ICAgIHB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgZG9Tb21ldGhpbmcoTGlzdDxUPiBsaXN0KSB7XG4i
ICsKKwkJCSAgICIgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihsaXN0LmdldENsYXNzKCkuZ2V0
U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICIgICAgcHVibGlj
IHN0YXRpYyA8VD4gVCByZXR1cm5MaXN0VHlwZShMaXN0PFQ+IGxpc3QpIHtcbiIgKworCQkJICAg
IiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJCSAgICIgICAgfVxuIiArCisJCQkgICAifVxu
IiwKKwkJICAgfSwKKwkJICAgIi0tLS0tLS0tLS1cbiIgKyAKKwkJCSIxLiBXQVJOSU5HIGluIFgu
amF2YSAoYXQgbGluZSA1KVxuIiArIAorCQkJIglkb1NvbWV0aGluZyhyZXR1cm5DbGFzc1R5cGUo
Q2xhc3MuY2xhc3MpKTtcbiIgKyAKKwkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5cbiIgKyAKKwkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9jYXRpb24g
ZG9Tb21ldGhpbmcoQ2xhc3MpIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZyhDbGFz
czxUPikgb2YgdHlwZSBYXG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjIuIFdBUk5J
TkcgaW4gWC5qYXZhIChhdCBsaW5lIDUpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkNs
YXNzVHlwZShDbGFzcy5jbGFzcykpO1xuIiArIAorCQkJIgkgICAgICAgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9u
IG9mIHR5cGUgQ2xhc3MgbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBD
bGFzczxPYmplY3Q+XG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjMuIFdBUk5JTkcg
aW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkxpc3RU
eXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiArIAorCQkJIgleXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5
OiBVbmNoZWNrZWQgaW52b2NhdGlvbiBkb1NvbWV0aGluZyhMaXN0KSBvZiB0aGUgZ2VuZXJpYyBt
ZXRob2QgZG9Tb21ldGhpbmcoTGlzdDxUPikgb2YgdHlwZSBYXG4iICsgCisJCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCQki
CWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiAr
IAorCQkJIgkgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgTGlzdCBuZWVk
cyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIExpc3Q8T2JqZWN0PlxuIiArIAor
CQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJCSI1LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA2
KVxuIiArIAorCQkJIglkb1NvbWV0aGluZyhyZXR1cm5MaXN0VHlwZShuZXcgQXJyYXlMaXN0PExp
c3Q+KCkpKTtcbiIgKyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXG4iICsgCisJCQkiTGlzdCBpcyBhIHJhdyB0eXBlLiBSZWZlcmVuY2VzIHRvIGdl
bmVyaWMgdHlwZSBMaXN0PEU+IHNob3VsZCBiZSBwYXJhbWV0ZXJpemVkXG4iICsgCisJCQkiLS0t
LS0tLS0tLVxuIik7Cit9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1
Zy5jZ2k/aWQ9NDM4MjQ2LCBbMS44XVtjb21waWxlcl0gSmF2YSA4IHN0YXRpYyBtZXRob2RzIGNv
bXBpbGF0aW9uIGVycm9yICAKK3B1YmxpYyB2b2lkIHRlc3Q0MzgyNDYoKSB7CisJCWlmICh0aGlz
LmNvbXBsaWFuY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0YW50cy5KREsxXzcpCisJCQlyZXR1cm47
CisJCXRoaXMucnVuTmVnYXRpdmVUZXN0KAorCQkgICBuZXcgU3RyaW5nW10geworCQkJICAgIkZv
by5qYXZhIiwKKwkJCSAgICJpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4iICsKKwkJCSAgICJwdWJs
aWMgYWJzdHJhY3QgY2xhc3MgRm9vPEM+XG4iICsKKwkJCSAgICJ7XG4iICsKKwkJCSAgICIgIEBT
dXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4iICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0
aWMgPEM+IHZvaWQgZG9pdCggTGlzdDxGb288Qz4+IHdvcmtlcnMgKVxuIiArCisJCQkgICAiICB7
XG4iICsKKwkJCSAgICIgICAgZG9pdCggIHdvcmtlcnMudG9BcnJheSggbmV3IEZvb1t3b3JrZXJz
LnNpemUoKV0gKSApO1xuIiArCisJCQkgICAiICB9XG4iICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0
aWMgPEM+IHZvaWQgZG9pdCggRm9vPEM+Li4uIHdvcmtlcnMgKVxuIiArCisJCQkgICAiICB7XG4i
ICsKKwkJCSAgICIgIH1cbiIgKworCQkJICAgIn1cbiIsCisJCSAgIH0sCisJCSAgICItLS0tLS0t
LS0tXG4iICsgCisJCQkiMS4gV0FSTklORyBpbiBGb28uamF2YSAoYXQgbGluZSA5KVxuIiArIAor
CQkJIglwdWJsaWMgc3RhdGljIDxDPiB2b2lkIGRvaXQoIEZvbzxDPi4uLiB3b3JrZXJzIClcbiIg
KyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXlxu
IiArIAorCQkJIlR5cGUgc2FmZXR5OiBQb3RlbnRpYWwgaGVhcCBwb2xsdXRpb24gdmlhIHZhcmFy
Z3MgcGFyYW1ldGVyIHdvcmtlcnNcbiIgKyAKKwkJCSItLS0tLS0tLS0tXG4iKTsKK30KIH0KIApk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Cb3VuZFNldC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9C
b3VuZFNldC5qYXZhCmluZGV4IDliMDk4OWYuLjA0YTE0YjIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvQm91bmRTZXQuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0JvdW5kU2V0LmphdmEKQEAg
LTQyMiw3ICs0MjIsMTMgQEAKIAkJfQogCQlyZXR1cm4gaGFzUHJvcGVyQm91bmQ7CiAJfQotCisJ
CisJcHVibGljIHZvaWQgYWRkQm91bmRzKEJvdW5kU2V0IHRoYXQsIExvb2t1cEVudmlyb25tZW50
IGVudmlyb25tZW50KSB7CisJCWlmICh0aGF0ID09IG51bGwgfHwgZW52aXJvbm1lbnQgPT0gbnVs
bCkKKwkJCXJldHVybjsKKwkJYWRkQm91bmRzKHRoYXQuZmxhdHRlbigpLCBlbnZpcm9ubWVudCk7
CisJfQorCQogCXB1YmxpYyBib29sZWFuIGlzSW5zdGFudGlhdGVkKEluZmVyZW5jZVZhcmlhYmxl
IGluZmVyZW5jZVZhcmlhYmxlKSB7CiAJCVRocmVlU2V0cyB0aHJlZSA9IHRoaXMuYm91bmRzUGVy
VmFyaWFibGUuZ2V0KGluZmVyZW5jZVZhcmlhYmxlLnByb3RvdHlwZSgpKTsKIAkJaWYgKHRocmVl
ICE9IG51bGwpCkBAIC0xMDY5LDcgKzEwNzUsOCBAQAogCXByaXZhdGUgYm9vbGVhbiBzdXBlck9u
bHlSYXcoVHlwZUJpbmRpbmcgZywgVHlwZUJpbmRpbmcgcywgTG9va3VwRW52aXJvbm1lbnQgZW52
KSB7CiAJCWlmIChzIGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpCiAJCQlyZXR1cm4gZmFs
c2U7IC8vIGluZmVyZW5jZSBoYXMgbm8gc3VwZXIgdHlwZXMKLQkJaWYgKHMuZmluZFN1cGVyVHlw
ZU9yaWdpbmF0aW5nRnJvbShnKSA9PSBudWxsKQorCQlmaW5hbCBUeXBlQmluZGluZyBzdXBlclR5
cGUgPSBzLmZpbmRTdXBlclR5cGVPcmlnaW5hdGluZ0Zyb20oZyk7CisJCWlmIChzdXBlclR5cGUg
IT0gbnVsbCAmJiAhc3VwZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSkKIAkJCXJldHVybiBz
LmlzQ29tcGF0aWJsZVdpdGgoZW52LmNvbnZlcnRUb1Jhd1R5cGUoZywgZmFsc2UpKTsKIAkJcmV0
dXJuIGZhbHNlOwogCX0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29uc3RyYWludEV4cHJl
c3Npb25Gb3JtdWxhLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0NvbnN0cmFpbnRFeHByZXNzaW9uRm9y
bXVsYS5qYXZhCmluZGV4IDU0Y2VhN2MuLjZlM2Q1NGMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29r
dXAvQ29uc3RyYWludEV4cHJlc3Npb25Gb3JtdWxhLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9D
b25zdHJhaW50RXhwcmVzc2lvbkZvcm11bGEuamF2YQpAQCAtOTIsMTQgKzkyLDI0IEBACiAJCQkJ
CQl9CiAJCQkJCQlpZiAoaW5uZXJDdHguc3RlcENvbXBsZXRlZCA+PSBJbmZlcmVuY2VDb250ZXh0
MTguVFlQRV9JTkZFUlJFRCkgewogCQkJCQkJCS8vIFRoZSBjb25zdHJhaW50cyBhbmQgaW5pdGlh
bCBib3VuZHMgdGhhdCB3b3VsZCBlZmZlY3RpdmVseSByZWR1Y2UgdG8gYjMgYXJlIGFscmVhZHkg
dHJhbnNmZXJyZWQgdG8gY3VycmVudCBjb250ZXh0IGR1cmluZyBDIFNldCBjb25zdHJ1Y3Rpb24u
CisJCQkJCQkJLy8gVGhpcyBzaG91bGQgcmVhbGx5IGJlIGRvbmUgb25seSBmb3IgcG9seSBpbnZv
Y2F0aW9ucyBpbnRlcmxlYXZlZCBieSBhIGxhbWJkYSB0aGF0IGlzIG5vdCBwZXJ0aW5lbnQgdG8g
YXBwbGljYWJpbGl0eS4gRklYTUUuCiAJCQkJCQkJcmV0dXJuIFRSVUU7CiAJCQkJCQl9Ci0JCQkJ
CQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQgPSBpbm5lckN0eC5pbmZlcmVuY2VLaW5k
OworCQkJCQkJaWYgKGlubmVyQ3R4LnN0ZXBDb21wbGV0ZWQgPj0gSW5mZXJlbmNlQ29udGV4dDE4
LkFQUExJQ0FCSUxJVFlfSU5GRVJSRUQpIHsKKwkJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmN1cnJl
bnRCb3VuZHMuYWRkQm91bmRzKGlubmVyQ3R4LmIyLCBpbmZlcmVuY2VDb250ZXh0LmVudmlyb25t
ZW50KTsKKwkJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZVZhcmlhYmxlcyA9IGlubmVy
Q3R4LmluZmVyZW5jZVZhcmlhYmxlczsKKwkJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5j
ZUtpbmQgPSBpbm5lckN0eC5pbmZlcmVuY2VLaW5kOworCQkJCQkJCWluZmVyZW5jZUNvbnRleHQu
dXNlc1VuY2hlY2tlZENvbnZlcnNpb24gPSBpbm5lckN0eC51c2VzVW5jaGVja2VkQ29udmVyc2lv
bjsKKwkJCQkJCX0gZWxzZSB7CisJCQkJCQkJcmV0dXJuIEZBTFNFOyAvLyBzaG91bGQgbm90IHJl
YWNoIGhlcmUuCisJCQkJCQl9CisJCQkJCQkvLyBiMiBoYXMgYmVlbiBsaWZ0ZWQsIGluZmVycmlu
ZyBwb2x5IGludm9jYXRpb24gdHlwZSBhbW91bnRzIHRvIGxpZnRpbmcgYjMuCiAJCQkJCX0gZWxz
ZSB7CiAJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQgPSBpbmZlcmVuY2VDb250
ZXh0LmdldEluZmVyZW5jZUtpbmQocHJldmlvdXNNZXRob2QsIGFyZ3VtZW50VHlwZXMpOworCQkJ
CQkJYm9vbGVhbiBpc0RpYW1vbmQgPSBtZXRob2QuaXNDb25zdHJ1Y3RvcigpICYmIHRoaXMubGVm
dC5pc1BvbHlFeHByZXNzaW9uKG1ldGhvZCk7CisJCQkJCQlpbmZlckludm9jYXRpb25BcHBsaWNh
YmlsaXR5KGluZmVyZW5jZUNvbnRleHQsIG1ldGhvZCwgYXJndW1lbnRUeXBlcywgaXNEaWFtb25k
LCBpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQpOworCQkJCQkJLy8gYjIgaGFzIGJlZW4g
bGlmdGVkLCBpbmZlcnJpbmcgcG9seSBpbnZvY2F0aW9uIHR5cGUgYW1vdW50cyB0byBsaWZ0aW5n
IGIzLgogCQkJCQl9Ci0JCQkJCWJvb2xlYW4gaXNEaWFtb25kID0gbWV0aG9kLmlzQ29uc3RydWN0
b3IoKSAmJiB0aGlzLmxlZnQuaXNQb2x5RXhwcmVzc2lvbihtZXRob2QpOwotCQkJCQlpbmZlcklu
dm9jYXRpb25BcHBsaWNhYmlsaXR5KGluZmVyZW5jZUNvbnRleHQsIG1ldGhvZCwgYXJndW1lbnRU
eXBlcywgaXNEaWFtb25kLCBpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQpOwogCQkJCQlp
ZiAoIWluZmVyUG9seUludm9jYXRpb25UeXBlKGluZmVyZW5jZUNvbnRleHQsIGludm9jYXRpb24s
IHRoaXMucmlnaHQsIG1ldGhvZCkpCiAJCQkJCQlyZXR1cm4gRkFMU0U7CiAJCQkJCXJldHVybiBu
dWxsOyAvLyBhbHJlYWR5IGluY29ycG9yYXRlZApAQCAtMzM0LDcgKzM0NCw3IEBACiAJCQlpZiAo
cmV0dXJuVHlwZSA9PSBUeXBlQmluZGluZy5WT0lEKQogCQkJCXRocm93IG5ldyBJbmZlcmVuY2VG
YWlsdXJlRXhjZXB0aW9uKCJleHByZXNzaW9uIGhhcyBubyB2YWx1ZSIpOyAvLyROT04tTkxTLTEk
CiAKLQkJCWlmIChpbmZlcmVuY2VDb250ZXh0LnVzZXNVbmNoZWNrZWRDb252ZXJzaW9uKCkpIHsK
KwkJCWlmIChpbmZlcmVuY2VDb250ZXh0LnVzZXNVbmNoZWNrZWRDb252ZXJzaW9uKSB7CiAJCQkJ
Ly8gc3BlYyBzYXlzIGVyYXN1cmUsIGJ1dCB3ZSBkb24ndCByZWFsbHkgaGF2ZSBjb21wYXRpYmls
aXR5IHJ1bGVzIGZvciBlcmFzdXJlLCB1c2UgcmF3IHR5cGUgaW5zdGVhZDoKIAkJCQlUeXBlQmlu
ZGluZyBlcmFzdXJlID0gaW5mZXJlbmNlQ29udGV4dC5lbnZpcm9ubWVudC5jb252ZXJ0VG9SYXdU
eXBlKHJldHVyblR5cGUsIGZhbHNlKTsKIAkJCQlDb25zdHJhaW50VHlwZUZvcm11bGEgbmV3Q29u
c3RyYWludCA9IENvbnN0cmFpbnRUeXBlRm9ybXVsYS5jcmVhdGUoZXJhc3VyZSwgdGFyZ2V0VHlw
ZSwgQ09NUEFUSUJMRSk7CkBAIC0zNjksMTQgKzM3OSwxNSBAQAogCQkJCUNvbnN0cmFpbnRUeXBl
Rm9ybXVsYSBuZXdDb25zdHJhaW50ID0gQ29uc3RyYWludFR5cGVGb3JtdWxhLmNyZWF0ZShnYmV0
YSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSk7CiAJCQkJcmV0dXJuIGluZmVyZW5jZUNvbnRleHQu
cmVkdWNlQW5kSW5jb3Jwb3JhdGUobmV3Q29uc3RyYWludCk7CiAJCQl9Ci0JCQlpZiAoclRoZXRh
IGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpIHsKLQkJCQlJbmZlcmVuY2VWYXJpYWJsZSBh
bHBoYSA9IChJbmZlcmVuY2VWYXJpYWJsZSkgclRoZXRhOworCQkJaWYgKHJUaGV0YS5sZWFmQ29t
cG9uZW50VHlwZSgpIGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpIHsKKwkJCQlJbmZlcmVu
Y2VWYXJpYWJsZSBhbHBoYSA9IChJbmZlcmVuY2VWYXJpYWJsZSkgclRoZXRhLmxlYWZDb21wb25l
bnRUeXBlKCk7CisJCQkJVHlwZUJpbmRpbmcgdGFyZ2V0TGVhZlR5cGUgPSB0YXJnZXRUeXBlLmxl
YWZDb21wb25lbnRUeXBlKCk7CiAJCQkJYm9vbGVhbiB0b1Jlc29sdmUgPSBmYWxzZTsKLQkJCQlp
ZiAoaW5mZXJlbmNlQ29udGV4dC5jdXJyZW50Qm91bmRzLmNvbmRpdGlvbjE4XzVfMl9idWxsZXRf
M18zXzEoYWxwaGEsIHRhcmdldFR5cGUpKSB7CisJCQkJaWYgKGluZmVyZW5jZUNvbnRleHQuY3Vy
cmVudEJvdW5kcy5jb25kaXRpb24xOF81XzJfYnVsbGV0XzNfM18xKGFscGhhLCB0YXJnZXRMZWFm
VHlwZSkpIHsKIAkJCQkJdG9SZXNvbHZlID0gdHJ1ZTsKLQkJCQl9IGVsc2UgaWYgKGluZmVyZW5j
ZUNvbnRleHQuY3VycmVudEJvdW5kcy5jb25kaXRpb24xOF81XzJfYnVsbGV0XzNfM18yKGFscGhh
LCB0YXJnZXRUeXBlLCBpbmZlcmVuY2VDb250ZXh0KSkgeworCQkJCX0gZWxzZSBpZiAoaW5mZXJl
bmNlQ29udGV4dC5jdXJyZW50Qm91bmRzLmNvbmRpdGlvbjE4XzVfMl9idWxsZXRfM18zXzIoYWxw
aGEsIHRhcmdldExlYWZUeXBlLCBpbmZlcmVuY2VDb250ZXh0KSkgewogCQkJCQl0b1Jlc29sdmUg
PSB0cnVlOwotCQkJCX0gZWxzZSBpZiAodGFyZ2V0VHlwZS5pc1ByaW1pdGl2ZVR5cGUoKSkgewor
CQkJCX0gZWxzZSBpZiAodGFyZ2V0TGVhZlR5cGUuaXNQcmltaXRpdmVUeXBlKCkpIHsKIAkJCQkJ
VHlwZUJpbmRpbmcgd3JhcHBlciA9IGluZmVyZW5jZUNvbnRleHQuY3VycmVudEJvdW5kcy5maW5k
V3JhcHBlclR5cGVCb3VuZChhbHBoYSk7CiAJCQkJCWlmICh3cmFwcGVyICE9IG51bGwpCiAJCQkJ
CQl0b1Jlc29sdmUgPSB0cnVlOwpAQCAtMzg2LDYgKzM5Nyw5IEBACiAJCQkJCWlmIChzb2x1dGlv
biA9PSBudWxsKQogCQkJCQkJcmV0dXJuIGZhbHNlOwogCQkJCQlUeXBlQmluZGluZyB1ID0gc29s
dXRpb24uZ2V0SW5zdGFudGlhdGlvbihhbHBoYSwgbnVsbCkuY2FwdHVyZShpbmZlcmVuY2VDb250
ZXh0LnNjb3BlLCBpbnZvY2F0aW9uU2l0ZS5zb3VyY2VFbmQoKSk7CisJCQkJCWlmIChyVGhldGEu
ZGltZW5zaW9ucygpICE9IDApIHsKKwkJCQkJCXUgPSBpbmZlcmVuY2VDb250ZXh0LmVudmlyb25t
ZW50LmNyZWF0ZUFycmF5VHlwZSh1LCByVGhldGEuZGltZW5zaW9ucygpKTsKKwkJCQkJfQogCQkJ
CQlDb25zdHJhaW50VHlwZUZvcm11bGEgbmV3Q29uc3RyYWludCA9IENvbnN0cmFpbnRUeXBlRm9y
bXVsYS5jcmVhdGUodSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSk7CiAJCQkJCXJldHVybiBpbmZl
cmVuY2VDb250ZXh0LnJlZHVjZUFuZEluY29ycG9yYXRlKG5ld0NvbnN0cmFpbnQpOwogCQkJCX0K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29uc3RyYWludFR5cGVGb3JtdWxhLmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvbG9va3VwL0NvbnN0cmFpbnRUeXBlRm9ybXVsYS5qYXZhCmluZGV4IGZkOTg4NDMuLmFj
MmNiYTAgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29uc3RyYWludFR5cGVGb3JtdWxhLmph
dmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db25zdHJhaW50VHlwZUZvcm11bGEuamF2YQpAQCAtODEs
NyArODEsNyBAQAogCQkJCQkvLwkJCQkJCQkJCQkJCQkJCSAgdGhpcy5yaWdodCA9IEc8VDEsVDIs
Li4uPiBvciBHPFQxLFQyLC4uLj5bXWsKIAkJCQkJVHlwZUJpbmRpbmcgZ3MgPSB0aGlzLmxlZnQu
ZmluZFN1cGVyVHlwZU9yaWdpbmF0aW5nRnJvbSh0aGlzLnJpZ2h0KTsJLy8gRzxTMSxTMiwuLi4+
IG9yIEc8UzEsUzIsLi4uPltdawogCQkJCQlpZiAoZ3MgIT0gbnVsbCAmJiBncy5sZWFmQ29tcG9u
ZW50VHlwZSgpLmlzUmF3VHlwZSgpKSB7Ci0JCQkJCQlpbmZlcmVuY2VDb250ZXh0LnJlY29yZFVu
Y2hlY2tlZENvbnZlcnNpb24odGhpcyk7CisJCQkJCQlpbmZlcmVuY2VDb250ZXh0LnVzZXNVbmNo
ZWNrZWRDb252ZXJzaW9uID0gdHJ1ZTsKIAkJCQkJCXJldHVybiBUUlVFOwogCQkJCQl9CiAJCQkJ
CWJyZWFrOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9JbmZlcmVuY2VDb250ZXh0MTguamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9sb29rdXAvSW5mZXJlbmNlQ29udGV4dDE4LmphdmEKaW5kZXggZDYxMGY4NC4u
ZDI4NjM5MiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9JbmZlcmVuY2VDb250ZXh0MTguamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29tcGlsZXIvbG9va3VwL0luZmVyZW5jZUNvbnRleHQxOC5qYXZhCkBAIC0xMSwxNCAr
MTEsMTIgQEAKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwOwogCi1pbXBvcnQgamF2YS51dGlsLkFycmF5TGlz
dDsKIGltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwogaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u
OwogaW1wb3J0IGphdmEudXRpbC5Db21wYXJhdG9yOwogaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw
OwogaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwogaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsK
LWltcG9ydCBqYXZhLnV0aWwuTGlzdDsKIGltcG9ydCBqYXZhLnV0aWwuTWFwOwogaW1wb3J0IGph
dmEudXRpbC5TZXQ7CiAKQEAgLTc4LDExICs3NiwxMSBAQAogICogPGR0PjE4LjUuMSBJbnZvY2F0
aW9uIEFwcGxpY2FiaWxpdHkgSW5mZXJlbmNlPC9kdD4KICAqIDxkZD57QGxpbmsgI2luZmVySW52
b2NhdGlvbkFwcGxpY2FiaWxpdHkoTWV0aG9kQmluZGluZywgVHlwZUJpbmRpbmdbXSwgYm9vbGVh
bil9LiBQcmVwYXJlIHRoZSBpbml0aWFsIHN0YXRlIGZvcgogICogCWluZmVyZW5jZSBvZiBhIGdl
bmVyaWMgaW52b2NhdGlvbiAtIG5vIHRhcmdldCB0eXBlIHVzZWQgYXQgdGhpcyBwb2ludC4KLSAq
ICBOZWVkIHRvIGNhbGwge0BsaW5rICNzb2x2ZSgpfSBhZnRlcndhcmRzIHRvIHByb2R1Y2UgdGhl
IGludGVybWVkaWF0ZSByZXN1bHQuPGJyLz4KKyAqICBOZWVkIHRvIGNhbGwge0BsaW5rICNzb2x2
ZShib29sZWFuKX0gd2l0aCB0cnVlIGFmdGVyd2FyZHMgdG8gcHJvZHVjZSB0aGUgaW50ZXJtZWRp
YXRlIHJlc3VsdC48YnIvPgogICogIENhbGxlZCBpbmRpcmVjdGx5IGZyb20ge0BsaW5rIFNjb3Bl
I2ZpbmRNZXRob2QoUmVmZXJlbmNlQmluZGluZywgY2hhcltdLCBUeXBlQmluZGluZ1tdLCBJbnZv
Y2F0aW9uU2l0ZSwgYm9vbGVhbil9IGV0IGFsCiAgKiAgdG8gc2VsZWN0IGFwcGxpY2FibGUgbWV0
aG9kcyBpbnRvIG92ZXJsb2FkIHJlc29sdXRpb24uPC9kZD4KICAqIDxkdD4xOC41LjIgSW52b2Nh
dGlvbiBUeXBlIEluZmVyZW5jZTwvZHQ+Ci0gKiA8ZGQ+e0BsaW5rIEluZmVyZW5jZUNvbnRleHQx
OCNpbmZlckludm9jYXRpb25UeXBlKEJvdW5kU2V0LCBUeXBlQmluZGluZywgSW52b2NhdGlvblNp
dGUsIE1ldGhvZEJpbmRpbmcpfS4gQWZ0ZXIgYQorICogPGRkPntAbGluayBJbmZlcmVuY2VDb250
ZXh0MTgjaW5mZXJJbnZvY2F0aW9uVHlwZShUeXBlQmluZGluZywgSW52b2NhdGlvblNpdGUsIE1l
dGhvZEJpbmRpbmcpfS4gQWZ0ZXIgYQogICogCW1vc3Qgc3BlY2lmaWMgbWV0aG9kIGhhcyBiZWVu
IHBpY2tlZCwgYW5kIGdpdmVuIGEgdGFyZ2V0IHR5cGUgZGV0ZXJtaW5lIHRoZSBmaW5hbCBnZW5l
cmljIGluc3RhbnRpYXRpb24uCiAgKiAgQXMgbG9uZyBhcyBhIHRhcmdldCB0eXBlIGlzIHN0aWxs
IHVuYXZhaWxhYmxlIHRoaXMgcGhhc2Uga2VlcHMgZ2V0dGluZyBkZWZlcnJlZC48L2JyPgogICog
IERpZmZlcmVudCB3cmFwcGVycyBleGlzdCBmb3IgdGhlIGNvbnZlbmllbmNlIG9mIGRpZmZlcmVu
dCBjYWxsZXJzLjwvZGQ+CkBAIC0xNTIsMTEgKzE1MCwxMiBAQAogCXB1YmxpYyBzdGF0aWMgZmlu
YWwgaW50IEJJTkRJTkdTX1VQREFURUQgPSAzOwogCQogCS8qKiBTaWduYWxzIHdoZXRoZXIgYW55
IHR5cGUgY29tcGF0aWJpbGl0eSBtYWtlcyB1c2Ugb2YgdW5jaGVja2VkIGNvbnZlcnNpb24uICov
Ci0JcHVibGljIExpc3Q8Q29uc3RyYWludEZvcm11bGE+IGNvbnN0cmFpbnRzV2l0aFVuY2hlY2tl
ZENvbnZlcnNpb247CisJcHVibGljIGJvb2xlYW4gdXNlc1VuY2hlY2tlZENvbnZlcnNpb247CiAK
IAlTY29wZSBzY29wZTsKIAlMb29rdXBFbnZpcm9ubWVudCBlbnZpcm9ubWVudDsKIAlSZWZlcmVu
Y2VCaW5kaW5nIG9iamVjdDsgLy8gamF2YS5sYW5nLk9iamVjdAorCXB1YmxpYyBCb3VuZFNldCBi
MjsKIAkKIAlwdWJsaWMgc3RhdGljIGZpbmFsIGludCBDSEVDS19TVFJJQ1QgPSAxOwogCXB1Ymxp
YyBzdGF0aWMgZmluYWwgaW50IENIRUNLX0xPT1NFID0gMjsKQEAgLTE2NywxMSArMTY2LDEzIEBA
CiAJCUV4cHJlc3Npb25bXSBpbnZvY2F0aW9uQXJndW1lbnRzOwogCQlJbmZlcmVuY2VWYXJpYWJs
ZVtdIGluZmVyZW5jZVZhcmlhYmxlczsKIAkJaW50IGluZmVyZW5jZUtpbmQ7Ci0JCVN1c3BlbmRl
ZEluZmVyZW5jZVJlY29yZChJbnZvY2F0aW9uU2l0ZSBzaXRlLCBFeHByZXNzaW9uW10gaW52b2Nh
dGlvbkFyZ3VtZW50cywgSW5mZXJlbmNlVmFyaWFibGVbXSBpbmZlcmVuY2VWYXJpYWJsZXMsIGlu
dCBpbmZlcmVuY2VLaW5kKSB7CisJCWJvb2xlYW4gdXNlc1VuY2hlY2tlZENvbnZlcnNpb247CisJ
CVN1c3BlbmRlZEluZmVyZW5jZVJlY29yZChJbnZvY2F0aW9uU2l0ZSBzaXRlLCBFeHByZXNzaW9u
W10gaW52b2NhdGlvbkFyZ3VtZW50cywgSW5mZXJlbmNlVmFyaWFibGVbXSBpbmZlcmVuY2VWYXJp
YWJsZXMsIGludCBpbmZlcmVuY2VLaW5kLCBib29sZWFuIHVzZXNVbmNoZWNrZWRDb252ZXJzaW9u
KSB7CiAJCQl0aGlzLnNpdGUgPSBzaXRlOwogCQkJdGhpcy5pbnZvY2F0aW9uQXJndW1lbnRzID0g
aW52b2NhdGlvbkFyZ3VtZW50czsKIAkJCXRoaXMuaW5mZXJlbmNlVmFyaWFibGVzID0gaW5mZXJl
bmNlVmFyaWFibGVzOwogCQkJdGhpcy5pbmZlcmVuY2VLaW5kID0gaW5mZXJlbmNlS2luZDsKKwkJ
CXRoaXMudXNlc1VuY2hlY2tlZENvbnZlcnNpb24gPSB1c2VzVW5jaGVja2VkQ29udmVyc2lvbjsK
IAkJfQogCX0KIAkKQEAgLTMzMSwxNyArMzMyLDE0IEBACiAJfQogCiAJLyoqIEpMUyAxOC41LjIg
SW52b2NhdGlvbiBUeXBlIEluZmVyZW5jZSAKLQkgKiBAcGFyYW0gYjEgInRoZSBib3VuZCBzZXQg
cHJvZHVjZWQgYnkgcmVkdWN0aW9uIGluIG9yZGVyIHRvIGRlbW9uc3RyYXRlIHRoYXQgbSBpcyBh
cHBsaWNhYmxlIGluIDE4LjUuMSIKIAkgKi8KLQlwdWJsaWMgQm91bmRTZXQgaW5mZXJJbnZvY2F0
aW9uVHlwZShCb3VuZFNldCBiMSwgVHlwZUJpbmRpbmcgZXhwZWN0ZWRUeXBlLCBJbnZvY2F0aW9u
U2l0ZSBpbnZvY2F0aW9uU2l0ZSwgTWV0aG9kQmluZGluZyBtZXRob2QpCi0JCQl0aHJvd3MgSW5m
ZXJlbmNlRmFpbHVyZUV4Y2VwdGlvbiAKKwlwdWJsaWMgQm91bmRTZXQgaW5mZXJJbnZvY2F0aW9u
VHlwZShUeXBlQmluZGluZyBleHBlY3RlZFR5cGUsIEludm9jYXRpb25TaXRlIGludm9jYXRpb25T
aXRlLCBNZXRob2RCaW5kaW5nIG1ldGhvZCkgdGhyb3dzIEluZmVyZW5jZUZhaWx1cmVFeGNlcHRp
b24gCiAJewogCQkvLyBub3QgSkxTOiBzaW1wbHkgZW5zdXJlIHRoYXQgbnVsbCBoaW50cyBmcm9t
IHRoZSByZXR1cm4gdHlwZSBoYXZlIGJlZW4gc2VlbiBldmVuIGluIHN0YW5kYWxvbmUgY29udGV4
dHM6CiAJCWlmIChleHBlY3RlZFR5cGUgPT0gbnVsbCAmJiBtZXRob2QucmV0dXJuVHlwZSAhPSBu
dWxsKQogCQkJc3Vic3RpdHV0ZShtZXRob2QucmV0dXJuVHlwZSk7IC8vIHJlc3VsdCBpcyBpZ25v
cmUsIHRoZSBvbmx5IGVmZmVjdCBpcyBvbiBJbmZlcmVuY2VWYXJpYWJsZS5udWxsSGludHMKLQkJ
Ly8KLQkJQm91bmRTZXQgcHJldmlvdXMgPSB0aGlzLmN1cnJlbnRCb3VuZHMuY29weSgpOwotCQl0
aGlzLmN1cnJlbnRCb3VuZHMgPSBiMTsKKwkJCisJCXRoaXMuY3VycmVudEJvdW5kcyA9IHRoaXMu
YjIuY29weSgpOwogCQl0cnkgewogCQkJLy8gYnVsbGV0cyAxJjI6IGRlZmluaXRpb25zIG9ubHku
CiAJCQlpZiAoZXhwZWN0ZWRUeXBlICE9IG51bGwKQEAgLTM5NywxMSArMzk1LDkgQEAKIAkJCS8v
IDYuIGJ1bGxldDogc29sdmUKIAkJCUJvdW5kU2V0IHNvbHV0aW9uID0gc29sdmUoKTsKIAkJCWlm
IChzb2x1dGlvbiA9PSBudWxsIHx8ICFpc1Jlc29sdmVkKHNvbHV0aW9uKSkgewotCQkJCXRoaXMu
Y3VycmVudEJvdW5kcyA9IHByZXZpb3VzOyAvLyBkb24ndCBsZXQgYm91bmRzIGZyb20gdW5zdWNj
ZXNzZnVsIGF0dGVtcHQgbGVhayBpbnRvIHN1YnNlcXVlbnQgYXR0ZW1wdHMKKwkJCQl0aGlzLmN1
cnJlbnRCb3VuZHMgPSB0aGlzLmIyOyAvLyBkb24ndCBsZXQgYm91bmRzIGZyb20gdW5zdWNjZXNz
ZnVsIGF0dGVtcHQgbGVhayBpbnRvIHN1YnNlcXVlbnQgYXR0ZW1wdHMKIAkJCQlyZXR1cm4gbnVs
bDsKIAkJCX0KLQkJCS8vIHdlJ3JlIGRvbmUsIHN0YXJ0IHJlcG9ydGluZzoKLQkJCXJlcG9ydFVu
Y2hlY2tlZENvbnZlcnNpb25zKHNvbHV0aW9uKTsKIAkJCXJldHVybiB0aGlzLmN1cnJlbnRCb3Vu
ZHMgPSBzb2x1dGlvbjsgLy8gdGhpcyBpcyBmaW5hbCwga2VlcCB0aGUgcmVzdWx0OgogCQl9IGZp
bmFsbHkgewogCQkJdGhpcy5zdGVwQ29tcGxldGVkID0gVFlQRV9JTkZFUlJFRDsKQEAgLTc4Miwx
MyArNzc4LDE5IEBACiAJICogQHJldHVybiBhIGJvdW5kIHNldCByZXByZXNlbnRpbmcgdGhlIHNv
bHV0aW9uLCBvciBudWxsIGlmIGluZmVyZW5jZSBmYWlsZWQKIAkgKiBAdGhyb3dzIEluZmVyZW5j
ZUZhaWx1cmVFeGNlcHRpb24gYSBjb21waWxlIGVycm9yIGhhcyBiZWVuIGRldGVjdGVkIGR1cmlu
ZyBpbmZlcmVuY2UKIAkgKi8KLQlwdWJsaWMgLypATnVsbGFibGUqLyBCb3VuZFNldCBzb2x2ZSgp
IHRocm93cyBJbmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9uIHsKKwlwdWJsaWMgLypATnVsbGFibGUq
LyBCb3VuZFNldCBzb2x2ZShib29sZWFuIGluZmVycmluZ0FwcGxpY2FiaWxpdHkpIHRocm93cyBJ
bmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9uIHsKIAkJaWYgKCFyZWR1Y2UoKSkKIAkJCXJldHVybiBu
dWxsOwogCQlpZiAoIXRoaXMuY3VycmVudEJvdW5kcy5pbmNvcnBvcmF0ZSh0aGlzKSkKIAkJCXJl
dHVybiBudWxsOworCQlpZiAoaW5mZXJyaW5nQXBwbGljYWJpbGl0eSkKKwkJCXRoaXMuYjIgPSB0
aGlzLmN1cnJlbnRCb3VuZHMuY29weSgpOyAvLyBQcmVzZXJ2ZSB0aGUgcmVzdWx0IGFmdGVyIHJl
ZHVjdGlvbiwgd2l0aG91dCBlZmZlY3RzIG9mIHJlc29sdmUoKSBmb3IgbGF0ZXIgdXNlIGluIGlu
dm9jYXRpb24gdHlwZSBpbmZlcmVuY2UuCiAKIAkJcmV0dXJuIHJlc29sdmUodGhpcy5pbmZlcmVu
Y2VWYXJpYWJsZXMpOworCX0KKwkKKwlwdWJsaWMgLypATnVsbGFibGUqLyBCb3VuZFNldCBzb2x2
ZSgpIHRocm93cyBJbmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9uIHsKKwkJcmV0dXJuIHNvbHZlKGZh
bHNlKTsKIAl9CiAJCiAJcHVibGljIC8qQE51bGxhYmxlKi8gQm91bmRTZXQgc29sdmUoSW5mZXJl
bmNlVmFyaWFibGVbXSB0b1Jlc29sdmUpIHRocm93cyBJbmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9u
IHsKQEAgLTgwNSwxMSArODA3LDE0IEBACiAJICogQHRocm93cyBJbmZlcmVuY2VGYWlsdXJlRXhj
ZXB0aW9uIAogCSAqLwogCXByaXZhdGUgYm9vbGVhbiByZWR1Y2UoKSB0aHJvd3MgSW5mZXJlbmNl
RmFpbHVyZUV4Y2VwdGlvbiB7Ci0JCWlmICh0aGlzLmluaXRpYWxDb25zdHJhaW50cyAhPSBudWxs
KSB7Ci0JCQlmb3IgKGludCBpID0gMDsgaSA8IHRoaXMuaW5pdGlhbENvbnN0cmFpbnRzLmxlbmd0
aDsgaSsrKSB7Ci0JCQkJaWYgKCF0aGlzLmN1cnJlbnRCb3VuZHMucmVkdWNlT25lQ29uc3RyYWlu
dCh0aGlzLCB0aGlzLmluaXRpYWxDb25zdHJhaW50c1tpXSkpCi0JCQkJCXJldHVybiBmYWxzZTsK
LQkJCX0KKwkJLy8gQ2F1dGlvbjogVGhpcyBjYW4gYmUgcmVlbnRlcmVkIHJlY3Vyc2l2ZWx5IGV2
ZW4gYXMgYW4gZWFybGllciBjYWxsIGlzIG11bmNoaW5nIHRocm91Z2ggdGhlIGNvbnN0cmFpbnRz
ICEKKwkJZm9yIChpbnQgaSA9IDA7IHRoaXMuaW5pdGlhbENvbnN0cmFpbnRzICE9IG51bGwgJiYg
aSA8IHRoaXMuaW5pdGlhbENvbnN0cmFpbnRzLmxlbmd0aDsgaSsrKSB7CisJCQlmaW5hbCBDb25z
dHJhaW50Rm9ybXVsYSBjdXJyZW50Q29uc3RyYWludCA9IHRoaXMuaW5pdGlhbENvbnN0cmFpbnRz
W2ldOworCQkJaWYgKGN1cnJlbnRDb25zdHJhaW50ID09IG51bGwpCisJCQkJY29udGludWU7CisJ
CQl0aGlzLmluaXRpYWxDb25zdHJhaW50c1tpXSA9IG51bGw7CisJCQlpZiAoIXRoaXMuY3VycmVu
dEJvdW5kcy5yZWR1Y2VPbmVDb25zdHJhaW50KHRoaXMsIGN1cnJlbnRDb25zdHJhaW50KSkKKwkJ
CQlyZXR1cm4gZmFsc2U7CiAJCX0KIAkJdGhpcy5pbml0aWFsQ29uc3RyYWludHMgPSBudWxsOwog
CQlyZXR1cm4gdHJ1ZTsKQEAgLTEzMDgsMTkgKzEzMTMsMjAgQEAKIAl9CiAJCiAJcHVibGljIFN1
c3BlbmRlZEluZmVyZW5jZVJlY29yZCBlbnRlclBvbHlJbnZvY2F0aW9uKEludm9jYXRpb25TaXRl
IGludm9jYXRpb24sIEV4cHJlc3Npb25bXSBpbm5lckFyZ3VtZW50cykgewotCQlTdXNwZW5kZWRJ
bmZlcmVuY2VSZWNvcmQgcmVjb3JkID0gbmV3IFN1c3BlbmRlZEluZmVyZW5jZVJlY29yZCh0aGlz
LmN1cnJlbnRJbnZvY2F0aW9uLCB0aGlzLmludm9jYXRpb25Bcmd1bWVudHMsIHRoaXMuaW5mZXJl
bmNlVmFyaWFibGVzLCB0aGlzLmluZmVyZW5jZUtpbmQpOworCQlTdXNwZW5kZWRJbmZlcmVuY2VS
ZWNvcmQgcmVjb3JkID0gbmV3IFN1c3BlbmRlZEluZmVyZW5jZVJlY29yZCh0aGlzLmN1cnJlbnRJ
bnZvY2F0aW9uLCB0aGlzLmludm9jYXRpb25Bcmd1bWVudHMsIHRoaXMuaW5mZXJlbmNlVmFyaWFi
bGVzLCB0aGlzLmluZmVyZW5jZUtpbmQsIHRoaXMudXNlc1VuY2hlY2tlZENvbnZlcnNpb24pOwog
CQl0aGlzLmluZmVyZW5jZVZhcmlhYmxlcyA9IG51bGw7CiAJCXRoaXMuaW52b2NhdGlvbkFyZ3Vt
ZW50cyA9IGlubmVyQXJndW1lbnRzOwogCQl0aGlzLmN1cnJlbnRJbnZvY2F0aW9uID0gaW52b2Nh
dGlvbjsKLQkJCisJCXRoaXMudXNlc1VuY2hlY2tlZENvbnZlcnNpb24gPSBmYWxzZTsKIAkJcmV0
dXJuIHJlY29yZDsKIAl9CiAJCiAJcHVibGljIFN1c3BlbmRlZEluZmVyZW5jZVJlY29yZCBlbnRl
ckxhbWJkYShMYW1iZGFFeHByZXNzaW9uIGxhbWJkYSkgewotCQlTdXNwZW5kZWRJbmZlcmVuY2VS
ZWNvcmQgcmVjb3JkID0gbmV3IFN1c3BlbmRlZEluZmVyZW5jZVJlY29yZCh0aGlzLmN1cnJlbnRJ
bnZvY2F0aW9uLCB0aGlzLmludm9jYXRpb25Bcmd1bWVudHMsIHRoaXMuaW5mZXJlbmNlVmFyaWFi
bGVzLCB0aGlzLmluZmVyZW5jZUtpbmQpOworCQlTdXNwZW5kZWRJbmZlcmVuY2VSZWNvcmQgcmVj
b3JkID0gbmV3IFN1c3BlbmRlZEluZmVyZW5jZVJlY29yZCh0aGlzLmN1cnJlbnRJbnZvY2F0aW9u
LCB0aGlzLmludm9jYXRpb25Bcmd1bWVudHMsIHRoaXMuaW5mZXJlbmNlVmFyaWFibGVzLCB0aGlz
LmluZmVyZW5jZUtpbmQsIHRoaXMudXNlc1VuY2hlY2tlZENvbnZlcnNpb24pOwogCQl0aGlzLmlu
ZmVyZW5jZVZhcmlhYmxlcyA9IG51bGw7CiAJCXRoaXMuaW52b2NhdGlvbkFyZ3VtZW50cyA9IG51
bGw7CiAJCXRoaXMuY3VycmVudEludm9jYXRpb24gPSBudWxsOworCQl0aGlzLnVzZXNVbmNoZWNr
ZWRDb252ZXJzaW9uID0gZmFsc2U7CiAJCXJldHVybiByZWNvcmQ7CiAJfQogCkBAIC0xMzQwLDIz
ICsxMzQ2LDcgQEAKIAkJdGhpcy5jdXJyZW50SW52b2NhdGlvbiA9IHJlY29yZC5zaXRlOwogCQl0
aGlzLmludm9jYXRpb25Bcmd1bWVudHMgPSByZWNvcmQuaW52b2NhdGlvbkFyZ3VtZW50czsKIAkJ
dGhpcy5pbmZlcmVuY2VLaW5kID0gcmVjb3JkLmluZmVyZW5jZUtpbmQ7Ci0JfQotCi0JcHJpdmF0
ZSBTdWJzdGl0dXRpb24gZ2V0UmVzdWx0U3Vic3RpdHV0aW9uKGZpbmFsIEJvdW5kU2V0IHJlc3Vs
dCkgewotCQlyZXR1cm4gbmV3IFN1YnN0aXR1dGlvbigpIHsKLQkJCXB1YmxpYyBMb29rdXBFbnZp
cm9ubWVudCBlbnZpcm9ubWVudCgpIHsgCi0JCQkJcmV0dXJuIEluZmVyZW5jZUNvbnRleHQxOC50
aGlzLmVudmlyb25tZW50OwotCQkJfQotCQkJcHVibGljIGJvb2xlYW4gaXNSYXdTdWJzdGl0dXRp
b24oKSB7Ci0JCQkJcmV0dXJuIGZhbHNlOwotCQkJfQotCQkJcHVibGljIFR5cGVCaW5kaW5nIHN1
YnN0aXR1dGUoVHlwZVZhcmlhYmxlQmluZGluZyB0eXBlVmFyaWFibGUpIHsKLQkJCQlpZiAodHlw
ZVZhcmlhYmxlIGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpIHsKLQkJCQkJcmV0dXJuIHJl
c3VsdC5nZXRJbnN0YW50aWF0aW9uKChJbmZlcmVuY2VWYXJpYWJsZSkgdHlwZVZhcmlhYmxlLCBJ
bmZlcmVuY2VDb250ZXh0MTgudGhpcy5lbnZpcm9ubWVudCk7Ci0JCQkJfQotCQkJCXJldHVybiB0
eXBlVmFyaWFibGU7Ci0JCQl9Ci0JCX07CisJCXRoaXMudXNlc1VuY2hlY2tlZENvbnZlcnNpb24g
PSByZWNvcmQudXNlc1VuY2hlY2tlZENvbnZlcnNpb247CiAJfQogCiAJcHVibGljIGJvb2xlYW4g
aXNWYXJBcmdzKCkgewpAQCAtMTQ2NSw0MiArMTQ1NSw2IEBACiAJCQkJYXByaW1lW2ldID0gYVtp
XTsKIAkJfQogCQlyZXR1cm4gYXByaW1lOwotCX0KLQotCS8qKiBSZWNvcmQgdGhlIGZhY3QgdGhh
dCB0aGUgZ2l2ZW4gY29uc3RyYWludCByZXF1aXJlcyB1bmNoZWNrZWQgY29udmVyc2lvbi4gKi8K
LQlwdWJsaWMgdm9pZCByZWNvcmRVbmNoZWNrZWRDb252ZXJzaW9uKENvbnN0cmFpbnRUeXBlRm9y
bXVsYSBjb25zdHJhaW50KSB7Ci0JCWlmICh0aGlzLmNvbnN0cmFpbnRzV2l0aFVuY2hlY2tlZENv
bnZlcnNpb24gPT0gbnVsbCkKLQkJCXRoaXMuY29uc3RyYWludHNXaXRoVW5jaGVja2VkQ29udmVy
c2lvbiA9IG5ldyBBcnJheUxpc3Q8Q29uc3RyYWludEZvcm11bGE+KCk7Ci0JCXRoaXMuY29uc3Ry
YWludHNXaXRoVW5jaGVja2VkQ29udmVyc2lvbi5hZGQoY29uc3RyYWludCk7Ci0JfQotCQotCXZv
aWQgcmVwb3J0VW5jaGVja2VkQ29udmVyc2lvbnMoQm91bmRTZXQgc29sdXRpb24pIHsKLQkJaWYg
KHRoaXMuY29uc3RyYWludHNXaXRoVW5jaGVja2VkQ29udmVyc2lvbiAhPSBudWxsKSB7Ci0JCQlp
bnQgbGVuID0gdGhpcy5jb25zdHJhaW50c1dpdGhVbmNoZWNrZWRDb252ZXJzaW9uLnNpemUoKTsK
LQkJCVN1YnN0aXR1dGlvbiBzdWJzdGl0dXRpb24gPSBnZXRSZXN1bHRTdWJzdGl0dXRpb24oc29s
dXRpb24pOwotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW47IGkrKykgewotCQkJCUNvbnN0cmFp
bnRUeXBlRm9ybXVsYSBjb25zdHJhaW50ID0gKENvbnN0cmFpbnRUeXBlRm9ybXVsYSkgdGhpcy5j
b25zdHJhaW50c1dpdGhVbmNoZWNrZWRDb252ZXJzaW9uLmdldChpKTsKLQkJCQlUeXBlQmluZGlu
ZyBleHBlY3RlZFR5cGUgPSBjb25zdHJhaW50LnJpZ2h0OwotCQkJCVR5cGVCaW5kaW5nIHByb3Zp
ZGVkVHlwZSA9IGNvbnN0cmFpbnQubGVmdDsKLQkJCQlpZiAoIWV4cGVjdGVkVHlwZS5pc1Byb3Bl
clR5cGUodHJ1ZSkpIHsKLQkJCQkJZXhwZWN0ZWRUeXBlID0gU2NvcGUuc3Vic3RpdHV0ZShzdWJz
dGl0dXRpb24sIGV4cGVjdGVkVHlwZSk7Ci0JCQkJfQotCQkJCWlmICghcHJvdmlkZWRUeXBlLmlz
UHJvcGVyVHlwZSh0cnVlKSkgewotCQkJCQlwcm92aWRlZFR5cGUgPSBTY29wZS5zdWJzdGl0dXRl
KHN1YnN0aXR1dGlvbiwgcHJvdmlkZWRUeXBlKTsKLQkJCQl9Ci0vKiBGSVhNRShzdGVwaGFuKTog
ZW5hYmxlIG9uY2Ugd2Ugc29sdmVkOgotICAgICAgICAgICAgICAgICAgICAoYSkgYXZvaWQgZHVw
bGljYXRpb24gd2l0aCB0cmFkaXRpb25hbCByZXBvcnRpbmcKLSAgICAgICAgICAgICAgICAgICAg
KGIpIGltcHJvdmUgbG9jYXRpb24gdG8gcmVwb3J0IGFnYWluc3QKLQkJCQlpZiAodGhpcy5jdXJy
ZW50SW52b2NhdGlvbiBpbnN0YW5jZW9mIEV4cHJlc3Npb24pCi0JCQkJCXRoaXMuc2NvcGUucHJv
YmxlbVJlcG9ydGVyKCkudW5zYWZlVHlwZUNvbnZlcnNpb24oKEV4cHJlc3Npb24pIHRoaXMuY3Vy
cmVudEludm9jYXRpb24sIHByb3ZpZGVkVHlwZSwgZXhwZWN0ZWRUeXBlKTsKLSAqLwotCQkJfQot
CQl9Ci0JfQotCQotCS8qKiBGb3IgdXNlIGJ5IDE1LjEyLjIuNiBNZXRob2QgSW52b2NhdGlvbiBU
eXBlICovCi0JcHVibGljIGJvb2xlYW4gdXNlc1VuY2hlY2tlZENvbnZlcnNpb24oKSB7Ci0JCXJl
dHVybiB0aGlzLmNvbnN0cmFpbnRzV2l0aFVuY2hlY2tlZENvbnZlcnNpb24gIT0gbnVsbDsKIAl9
CiAKIAkvLyBJTlRFUklNOiBpbmZyYXN0cnVjdHVyZSBmb3IgZGV0ZWN0aW5nIGZhaWx1cmVzIGNh
dXNlZCBieSBzcGVjaWZpYyBrbm93biBpbmNvbXBsZXRlbmVzczoKZGlmZiAtLWdpdCBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9sb29rdXAvUGFyYW1ldGVyaXplZEdlbmVyaWNNZXRob2RCaW5kaW5nLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL1BhcmFtZXRlcml6ZWRHZW5lcmljTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IGYzNzAz
ZTUuLjM4MzE3NDMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1ldGVyaXplZEdlbmVy
aWNNZXRob2RCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVkR2Vu
ZXJpY01ldGhvZEJpbmRpbmcuamF2YQpAQCAtMTc2LDE0ICsxNzYsMTQgQEAKIAkJCWlmIChhcmd1
bWVudHMubGVuZ3RoID09IHBhcmFtZXRlcnMubGVuZ3RoKSB7CiAJCQkJaW5mQ3R4MTguaW5mZXJl
bmNlS2luZCA9IEluZmVyZW5jZUNvbnRleHQxOC5DSEVDS19MT09TRTsgLy8gVE9ETzogdmFsaWRh
dGUgaWYgMiBwaGFzZSBjaGVja2luZyAoc3RyaWN0L2xvb3NlICsgdmFyYXJnKSBpcyBzdWZmaWNp
ZW50LgogCQkJCWluZkN0eDE4LmluZmVySW52b2NhdGlvbkFwcGxpY2FiaWxpdHkob3JpZ2luYWxN
ZXRob2QsIGFyZ3VtZW50cywgaXNEaWFtb25kKTsKLQkJCQlyZXN1bHQgPSBpbmZDdHgxOC5zb2x2
ZSgpOworCQkJCXJlc3VsdCA9IGluZkN0eDE4LnNvbHZlKHRydWUpOwogCQkJfQogCQkJaWYgKHJl
c3VsdCA9PSBudWxsICYmIG9yaWdpbmFsTWV0aG9kLmlzVmFyYXJncygpKSB7CiAJCQkJLy8gY2hl
Y2sgZm9yIHZhcmlhYmxlLWFyaXR5IGFwcGxpY2FiaWxpdHkKIAkJCQlpbmZDdHgxOCA9IGludm9j
YXRpb25TaXRlLmZyZXNoSW5mZXJlbmNlQ29udGV4dChzY29wZSk7IC8vIHN0YXJ0IG92ZXIKIAkJ
CQlpbmZDdHgxOC5pbmZlcmVuY2VLaW5kID0gSW5mZXJlbmNlQ29udGV4dDE4LkNIRUNLX1ZBUkFS
RzsKIAkJCQlpbmZDdHgxOC5pbmZlckludm9jYXRpb25BcHBsaWNhYmlsaXR5KG9yaWdpbmFsTWV0
aG9kLCBhcmd1bWVudHMsIGlzRGlhbW9uZCk7Ci0JCQkJcmVzdWx0ID0gaW5mQ3R4MTguc29sdmUo
KTsKKwkJCQlyZXN1bHQgPSBpbmZDdHgxOC5zb2x2ZSh0cnVlKTsKIAkJCX0KIAkJCWlmIChyZXN1
bHQgPT0gbnVsbCkKIAkJCQlyZXR1cm4gbnVsbDsKQEAgLTIwMCw4ICsyMDAsNyBAQAogCQkJaWYg
KGV4cGVjdGVkVHlwZSAhPSBudWxsIHx8ICFpbnZvY2F0aW9uU2l0ZS5nZXRFeHByZXNzaW9uQ29u
dGV4dCgpLmRlZmluZXNUYXJnZXRUeXBlKCkpIHsKIAkJCQkvLyAtLS0tIDE4LjUuMiAoSW52b2Nh
dGlvbiB0eXBlKTogLS0tLQogCQkJCXByb3Zpc2lvbmFsUmVzdWx0ID0gcmVzdWx0OwotCQkJCXJl
c3VsdCA9IGluZkN0eDE4LmN1cnJlbnRCb3VuZHMuY29weSgpOyAvLyB0aGUgcmVzdWx0IGFmdGVy
IHJlZHVjdGlvbiwgd2l0aG91dCBlZmZlY3RzIG9mIHJlc29sdmUoKQotCQkJCXJlc3VsdCA9IGlu
ZkN0eDE4LmluZmVySW52b2NhdGlvblR5cGUocmVzdWx0LCBleHBlY3RlZFR5cGUsIGludm9jYXRp
b25TaXRlLCBvcmlnaW5hbE1ldGhvZCk7CisJCQkJcmVzdWx0ID0gaW5mQ3R4MTguaW5mZXJJbnZv
Y2F0aW9uVHlwZShleHBlY3RlZFR5cGUsIGludm9jYXRpb25TaXRlLCBvcmlnaW5hbE1ldGhvZCk7
CiAJCQkJaW52b2NhdGlvblR5cGVJbmZlcnJlZCA9IHRydWU7CiAJCQkJaGFzUmV0dXJuUHJvYmxl
bSB8PSByZXN1bHQgPT0gbnVsbDsKIAkJCQlpZiAoaGFzUmV0dXJuUHJvYmxlbSk=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>248205</attachid>
            <date>2014-10-27 08:55:00 -0400</date>
            <delta_ts>2014-10-27 08:55:10 -0400</delta_ts>
            <desc>Revised patch.</desc>
            <filename>444334.patch</filename>
            <type>text/plain</type>
            <size>23798</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVncmVz
c2lvblRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9v
cmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0dlbmVyaWNzUmVn
cmVzc2lvblRlc3QuamF2YQppbmRleCBiMjRlODFlLi5kMTYyYTVmIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9HZW5lcmljc1JlZ3Jlc3Npb25UZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vR2VuZXJpY3NSZWdyZXNzaW9uVGVzdC5q
YXZhCkBAIC00NTcxLDYwICs0NTcxLDYyIEBACiAJCQkiICB9XG4iICsgCiAJCQkiXG4iICsgCiAJ
CQkifVxuIjsKLQlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0ZpbGVDb25zdGFudHMu
SkRLMV84KSB7Ci0JCXJ1bkNvbmZvcm1UZXN0KAotCQkJbmV3IFN0cmluZ1tdIHsKLQkJCQkiWC5q
YXZhIiwKLQkJCQlzb3VyY2UKLQkJCX0pOwotCX0gZWxzZSB7CiAJCXJ1bk5lZ2F0aXZlVGVzdCgK
IAkJCW5ldyBTdHJpbmdbXSB7CiAJCQkJIlguamF2YSIsCiAJCQkJc291cmNlCiAJCQl9LAogCQkJ
Ii0tLS0tLS0tLS1cbiIgKyAKLQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIg
KyAKKwkJCSIxLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAogCQkJIglkb1Nv
bWV0aGluZ1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIg
KyAKLQkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCi0JCQkiVGhlIG1ldGhvZCBkb1NvbWV0
aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBpbiB0aGUgdHlwZSBYIGlzIG5vdCBhcHBs
aWNhYmxlIGZvciB0aGUgYXJndW1lbnRzIChYLkZvbywgWC5Gb28pXG4iICsgCisJCQkiCV5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsg
CisJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRvU29tZXRoaW5nV2l0aEZv
byhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZ1dpdGhGb28o
WC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsg
Ci0JCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTIpXG4iICsgCisJCQkiMi4gV0FS
TklORyBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyAKKwkJCSIJZG9Tb21ldGhpbmdXaXRoRm9v
KCBhbnkoIEZvby5jbGFzcyApLCBhbnkoIEZvby5jbGFzcyApICk7XG4iICsgCisJCQkiCSAgICAg
ICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5OiBU
aGUgZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRv
IGNvbmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAorCQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJ
CSIzLiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA4KVxuIiArIAorCQkJIglkb1NvbWV0aGlu
Z1dpdGhGb28oIGFueSggRm9vLmNsYXNzICksIGFueSggRm9vLmNsYXNzICkgKTtcbiIgKyAKKwkJ
CSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5Gb28gbmVl
ZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+XG4iICsg
CisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5l
IDEyKVxuIiArIAogCQkJIglGb28gZm9vID0gYW55KCBGb28uY2xhc3MgKTtcbiIgKyAKIAkJCSIJ
Xl5eXG4iICsgCiAJCQkiWC5Gb28gaXMgYSByYXcgdHlwZS4gUmVmZXJlbmNlcyB0byBnZW5lcmlj
IHR5cGUgWC5Gb288VD4gc2hvdWxkIGJlIHBhcmFtZXRlcml6ZWRcbiIgKyAKIAkJCSItLS0tLS0t
LS0tXG4iICsgCi0JCQkiMy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCisJ
CQkiNS4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRvU29tZXRo
aW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFVuY2hlY2tlZCBpbnZvY2F0aW9uIGRv
U29tZXRoaW5nV2l0aEZvbyhYLkZvbywgWC5Gb28pIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1Nv
bWV0aGluZ1dpdGhGb28oWC5Gb288VD4sIFguRm9vPFQ+KSBvZiB0eXBlIFhcbiIgKyAKIAkJCSIt
LS0tLS0tLS0tXG4iICsgCi0JCQkiNC4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4i
ICsgCisJCQkiNi4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCiAJCQkiCWRv
U29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJICAgICAgICAgICAgICAg
ICAgICBeXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVGhlIGV4cHJlc3Npb24gb2YgdHlwZSBY
LkZvbyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFguRm9vPE9iamVj
dD5cbiIgKyAKIAkJCSItLS0tLS0tLS0tXG4iICsgCi0JCQkiNS4gV0FSTklORyBpbiBYLmphdmEg
KGF0IGxpbmUgMTMpXG4iICsgCisJCQkiNy4gV0FSTklORyBpbiBYLmphdmEgKGF0IGxpbmUgMTMp
XG4iICsgCiAJCQkiCWRvU29tZXRoaW5nV2l0aEZvbyggZm9vLCBmb28gKTtcbiIgKyAKIAkJCSIJ
ICAgICAgICAgICAgICAgICAgICAgICAgIF5eXlxuIiArIAogCQkJIlR5cGUgc2FmZXR5OiBUaGUg
ZXhwcmVzc2lvbiBvZiB0eXBlIFguRm9vIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRvIGNv
bmZvcm0gdG8gWC5Gb288T2JqZWN0PlxuIiArIAogCQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI2
LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKKwkJCSI4LiBXQVJOSU5HIGlu
IFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5n
V2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJ
IgleXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5cbiIgKyAKIAkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9jYXRp
b24gZG9Tb21ldGhpbmdXaXRoRm9vKFguRm9vLCBYLkZvbykgb2YgdGhlIGdlbmVyaWMgbWV0aG9k
IGRvU29tZXRoaW5nV2l0aEZvbyhYLkZvbzxUPiwgWC5Gb288VD4pIG9mIHR5cGUgWFxuIiArIAog
CQkJIi0tLS0tLS0tLS1cbiIgKyAKLQkJCSI3LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAx
NylcbiIgKyAKKwkJCSI5LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJ
CSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZvbyggYW55KCBGb28uY2xhc3MgKSwgYW55
KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXl5eXl5eXl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNz
aW9uIG9mIHR5cGUgWC5Gb28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0
byBYLkZvbzxPYmplY3Q+XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIiArIAotCQkJIjguIFdBUk5J
TkcgaW4gWC5qYXZhIChhdCBsaW5lIDE3KVxuIiArIAorCQkJIjEwLiBXQVJOSU5HIGluIFguamF2
YSAoYXQgbGluZSAxNylcbiIgKyAKIAkJCSIJdGhpcy48T2JqZWN0PmRvU29tZXRoaW5nV2l0aEZv
byggYW55KCBGb28uY2xhc3MgKSwgYW55KCBGb28uY2xhc3MgKSApO1xuIiArIAogCQkJIgkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXG4iICsgCiAJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgWC5G
b28gbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBYLkZvbzxPYmplY3Q+
XG4iICsgCiAJCQkiLS0tLS0tLS0tLVxuIik7Ci0JfQogfQogcHVibGljIHZvaWQgX3Rlc3RCdWc0
MzA2ODYoKSB7CiAJcnVuQ29uZm9ybVRlc3QoCkBAIC01NTc0LDUgKzU1NzYsODUgQEAKIAkJCSJU
aGUgdHlwZSBwYXJhbWV0ZXIgWCBpcyBoaWRpbmcgdGhlIHR5cGUgWFxuIiArIAogCQkJIi0tLS0t
LS0tLS1cbiIpOwogfQorLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcu
Y2dpP2lkPTQ0NDMzNCwgIFsxLjhdW2NvbXBpbGVyXSBDb21waWxlciBnZW5lcmF0ZXMgZXJyb3Ig
aW5zdGVhZCBvZiB3YXJuaW5nIG9uIHVuY2hlY2tlZCBjb252ZXJzaW9uIAorcHVibGljIHZvaWQg
dGVzdDQ0NDMzNCgpIHsKKwkJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoCisJCSAgIG5ldyBTdHJpbmdb
XSB7CisJCQkgICAiWC5qYXZhIiwKKwkJCSAgICJpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtc
biIgKworCQkJICAgImltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiIgKworCQkJICAgInB1YmxpYyBj
bGFzcyBYIHtcbiIgKworCQkJICAgIiAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWFpbihTdHJpbmdb
XSBhcmdzKSB7XG4iICsKKwkJCSAgICIgICAgICAgIGRvU29tZXRoaW5nKHJldHVybkNsYXNzVHlw
ZShDbGFzcy5jbGFzcykpO1xuIiArCisJCQkgICAiICAgICAgICBkb1NvbWV0aGluZyhyZXR1cm5M
aXN0VHlwZShuZXcgQXJyYXlMaXN0PExpc3Q+KCkpKTtcbiIgKworCQkJICAgIiAgICB9XG4iICsK
KwkJCSAgICIgICAgcHVibGljIHN0YXRpYyA8VD4gdm9pZCBkb1NvbWV0aGluZyhDbGFzczxUPiBj
bGF6eikge1xuIiArCisJCQkgICAiICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oY2xhenouZ2V0
U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICIgICAgcHVibGlj
IHN0YXRpYyA8VD4gVCByZXR1cm5DbGFzc1R5cGUoQ2xhc3M8VD4gY2xhenopIHtcbiIgKworCQkJ
ICAgIiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJCSAgICIgICAgfVxuIiArCisJCQkgICAi
ICAgIHB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgZG9Tb21ldGhpbmcoTGlzdDxUPiBsaXN0KSB7XG4i
ICsKKwkJCSAgICIgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihsaXN0LmdldENsYXNzKCkuZ2V0
U2ltcGxlTmFtZSgpKTtcbiIgKworCQkJICAgIiAgICB9XG4iICsKKwkJCSAgICIgICAgcHVibGlj
IHN0YXRpYyA8VD4gVCByZXR1cm5MaXN0VHlwZShMaXN0PFQ+IGxpc3QpIHtcbiIgKworCQkJICAg
IiAgICAgICAgcmV0dXJuIG51bGw7XG4iICsKKwkJCSAgICIgICAgfVxuIiArCisJCQkgICAifVxu
IiwKKwkJICAgfSwKKwkJICAgIi0tLS0tLS0tLS1cbiIgKyAKKwkJCSIxLiBXQVJOSU5HIGluIFgu
amF2YSAoYXQgbGluZSA1KVxuIiArIAorCQkJIglkb1NvbWV0aGluZyhyZXR1cm5DbGFzc1R5cGUo
Q2xhc3MuY2xhc3MpKTtcbiIgKyAKKwkJCSIJXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5cbiIgKyAKKwkJCSJUeXBlIHNhZmV0eTogVW5jaGVja2VkIGludm9jYXRpb24g
ZG9Tb21ldGhpbmcoQ2xhc3MpIG9mIHRoZSBnZW5lcmljIG1ldGhvZCBkb1NvbWV0aGluZyhDbGFz
czxUPikgb2YgdHlwZSBYXG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjIuIFdBUk5J
TkcgaW4gWC5qYXZhIChhdCBsaW5lIDUpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkNs
YXNzVHlwZShDbGFzcy5jbGFzcykpO1xuIiArIAorCQkJIgkgICAgICAgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9u
IG9mIHR5cGUgQ2xhc3MgbmVlZHMgdW5jaGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBD
bGFzczxPYmplY3Q+XG4iICsgCisJCQkiLS0tLS0tLS0tLVxuIiArIAorCQkJIjMuIFdBUk5JTkcg
aW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCQkiCWRvU29tZXRoaW5nKHJldHVybkxpc3RU
eXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiArIAorCQkJIgleXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkJIlR5cGUgc2FmZXR5
OiBVbmNoZWNrZWQgaW52b2NhdGlvbiBkb1NvbWV0aGluZyhMaXN0KSBvZiB0aGUgZ2VuZXJpYyBt
ZXRob2QgZG9Tb21ldGhpbmcoTGlzdDxUPikgb2YgdHlwZSBYXG4iICsgCisJCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkJIjQuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCQki
CWRvU29tZXRoaW5nKHJldHVybkxpc3RUeXBlKG5ldyBBcnJheUxpc3Q8TGlzdD4oKSkpO1xuIiAr
IAorCQkJIgkgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCQkiVHlwZSBzYWZldHk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgTGlzdCBuZWVk
cyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIExpc3Q8T2JqZWN0PlxuIiArIAor
CQkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJCSI1LiBXQVJOSU5HIGluIFguamF2YSAoYXQgbGluZSA2
KVxuIiArIAorCQkJIglkb1NvbWV0aGluZyhyZXR1cm5MaXN0VHlwZShuZXcgQXJyYXlMaXN0PExp
c3Q+KCkpKTtcbiIgKyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXG4iICsgCisJCQkiTGlzdCBpcyBhIHJhdyB0eXBlLiBSZWZlcmVuY2VzIHRvIGdl
bmVyaWMgdHlwZSBMaXN0PEU+IHNob3VsZCBiZSBwYXJhbWV0ZXJpemVkXG4iICsgCisJCQkiLS0t
LS0tLS0tLVxuIik7Cit9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1
Zy5jZ2k/aWQ9NDM4MjQ2LCBbMS44XVtjb21waWxlcl0gSmF2YSA4IHN0YXRpYyBtZXRob2RzIGNv
bXBpbGF0aW9uIGVycm9yICAKK3B1YmxpYyB2b2lkIHRlc3Q0MzgyNDYoKSB7CisJCWlmICh0aGlz
LmNvbXBsaWFuY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0YW50cy5KREsxXzcpCisJCQlyZXR1cm47
CisJCXRoaXMucnVuTmVnYXRpdmVUZXN0KAorCQkgICBuZXcgU3RyaW5nW10geworCQkJICAgIkZv
by5qYXZhIiwKKwkJCSAgICJpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4iICsKKwkJCSAgICJwdWJs
aWMgYWJzdHJhY3QgY2xhc3MgRm9vPEM+XG4iICsKKwkJCSAgICJ7XG4iICsKKwkJCSAgICIgIEBT
dXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4iICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0
aWMgPEM+IHZvaWQgZG9pdCggTGlzdDxGb288Qz4+IHdvcmtlcnMgKVxuIiArCisJCQkgICAiICB7
XG4iICsKKwkJCSAgICIgICAgZG9pdCggIHdvcmtlcnMudG9BcnJheSggbmV3IEZvb1t3b3JrZXJz
LnNpemUoKV0gKSApO1xuIiArCisJCQkgICAiICB9XG4iICsKKwkJCSAgICIgIHB1YmxpYyBzdGF0
aWMgPEM+IHZvaWQgZG9pdCggRm9vPEM+Li4uIHdvcmtlcnMgKVxuIiArCisJCQkgICAiICB7XG4i
ICsKKwkJCSAgICIgIH1cbiIgKworCQkJICAgIn1cbiIsCisJCSAgIH0sCisJCSAgICItLS0tLS0t
LS0tXG4iICsgCisJCQkiMS4gV0FSTklORyBpbiBGb28uamF2YSAoYXQgbGluZSA5KVxuIiArIAor
CQkJIglwdWJsaWMgc3RhdGljIDxDPiB2b2lkIGRvaXQoIEZvbzxDPi4uLiB3b3JrZXJzIClcbiIg
KyAKKwkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXlxu
IiArIAorCQkJIlR5cGUgc2FmZXR5OiBQb3RlbnRpYWwgaGVhcCBwb2xsdXRpb24gdmlhIHZhcmFy
Z3MgcGFyYW1ldGVyIHdvcmtlcnNcbiIgKyAKKwkJCSItLS0tLS0tLS0tXG4iKTsKK30KIH0KIApk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Cb3VuZFNldC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9C
b3VuZFNldC5qYXZhCmluZGV4IDliMDk4OWYuLjA0YTE0YjIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvQm91bmRTZXQuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0JvdW5kU2V0LmphdmEKQEAg
LTQyMiw3ICs0MjIsMTMgQEAKIAkJfQogCQlyZXR1cm4gaGFzUHJvcGVyQm91bmQ7CiAJfQotCisJ
CisJcHVibGljIHZvaWQgYWRkQm91bmRzKEJvdW5kU2V0IHRoYXQsIExvb2t1cEVudmlyb25tZW50
IGVudmlyb25tZW50KSB7CisJCWlmICh0aGF0ID09IG51bGwgfHwgZW52aXJvbm1lbnQgPT0gbnVs
bCkKKwkJCXJldHVybjsKKwkJYWRkQm91bmRzKHRoYXQuZmxhdHRlbigpLCBlbnZpcm9ubWVudCk7
CisJfQorCQogCXB1YmxpYyBib29sZWFuIGlzSW5zdGFudGlhdGVkKEluZmVyZW5jZVZhcmlhYmxl
IGluZmVyZW5jZVZhcmlhYmxlKSB7CiAJCVRocmVlU2V0cyB0aHJlZSA9IHRoaXMuYm91bmRzUGVy
VmFyaWFibGUuZ2V0KGluZmVyZW5jZVZhcmlhYmxlLnByb3RvdHlwZSgpKTsKIAkJaWYgKHRocmVl
ICE9IG51bGwpCkBAIC0xMDY5LDcgKzEwNzUsOCBAQAogCXByaXZhdGUgYm9vbGVhbiBzdXBlck9u
bHlSYXcoVHlwZUJpbmRpbmcgZywgVHlwZUJpbmRpbmcgcywgTG9va3VwRW52aXJvbm1lbnQgZW52
KSB7CiAJCWlmIChzIGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpCiAJCQlyZXR1cm4gZmFs
c2U7IC8vIGluZmVyZW5jZSBoYXMgbm8gc3VwZXIgdHlwZXMKLQkJaWYgKHMuZmluZFN1cGVyVHlw
ZU9yaWdpbmF0aW5nRnJvbShnKSA9PSBudWxsKQorCQlmaW5hbCBUeXBlQmluZGluZyBzdXBlclR5
cGUgPSBzLmZpbmRTdXBlclR5cGVPcmlnaW5hdGluZ0Zyb20oZyk7CisJCWlmIChzdXBlclR5cGUg
IT0gbnVsbCAmJiAhc3VwZXJUeXBlLmlzUGFyYW1ldGVyaXplZFR5cGUoKSkKIAkJCXJldHVybiBz
LmlzQ29tcGF0aWJsZVdpdGgoZW52LmNvbnZlcnRUb1Jhd1R5cGUoZywgZmFsc2UpKTsKIAkJcmV0
dXJuIGZhbHNlOwogCX0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29uc3RyYWludEV4cHJl
c3Npb25Gb3JtdWxhLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0NvbnN0cmFpbnRFeHByZXNzaW9uRm9y
bXVsYS5qYXZhCmluZGV4IDU0Y2VhN2MuLjZlM2Q1NGMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29r
dXAvQ29uc3RyYWludEV4cHJlc3Npb25Gb3JtdWxhLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9D
b25zdHJhaW50RXhwcmVzc2lvbkZvcm11bGEuamF2YQpAQCAtOTIsMTQgKzkyLDI0IEBACiAJCQkJ
CQl9CiAJCQkJCQlpZiAoaW5uZXJDdHguc3RlcENvbXBsZXRlZCA+PSBJbmZlcmVuY2VDb250ZXh0
MTguVFlQRV9JTkZFUlJFRCkgewogCQkJCQkJCS8vIFRoZSBjb25zdHJhaW50cyBhbmQgaW5pdGlh
bCBib3VuZHMgdGhhdCB3b3VsZCBlZmZlY3RpdmVseSByZWR1Y2UgdG8gYjMgYXJlIGFscmVhZHkg
dHJhbnNmZXJyZWQgdG8gY3VycmVudCBjb250ZXh0IGR1cmluZyBDIFNldCBjb25zdHJ1Y3Rpb24u
CisJCQkJCQkJLy8gVGhpcyBzaG91bGQgcmVhbGx5IGJlIGRvbmUgb25seSBmb3IgcG9seSBpbnZv
Y2F0aW9ucyBpbnRlcmxlYXZlZCBieSBhIGxhbWJkYSB0aGF0IGlzIG5vdCBwZXJ0aW5lbnQgdG8g
YXBwbGljYWJpbGl0eS4gRklYTUUuCiAJCQkJCQkJcmV0dXJuIFRSVUU7CiAJCQkJCQl9Ci0JCQkJ
CQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQgPSBpbm5lckN0eC5pbmZlcmVuY2VLaW5k
OworCQkJCQkJaWYgKGlubmVyQ3R4LnN0ZXBDb21wbGV0ZWQgPj0gSW5mZXJlbmNlQ29udGV4dDE4
LkFQUExJQ0FCSUxJVFlfSU5GRVJSRUQpIHsKKwkJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmN1cnJl
bnRCb3VuZHMuYWRkQm91bmRzKGlubmVyQ3R4LmIyLCBpbmZlcmVuY2VDb250ZXh0LmVudmlyb25t
ZW50KTsKKwkJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZVZhcmlhYmxlcyA9IGlubmVy
Q3R4LmluZmVyZW5jZVZhcmlhYmxlczsKKwkJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5j
ZUtpbmQgPSBpbm5lckN0eC5pbmZlcmVuY2VLaW5kOworCQkJCQkJCWluZmVyZW5jZUNvbnRleHQu
dXNlc1VuY2hlY2tlZENvbnZlcnNpb24gPSBpbm5lckN0eC51c2VzVW5jaGVja2VkQ29udmVyc2lv
bjsKKwkJCQkJCX0gZWxzZSB7CisJCQkJCQkJcmV0dXJuIEZBTFNFOyAvLyBzaG91bGQgbm90IHJl
YWNoIGhlcmUuCisJCQkJCQl9CisJCQkJCQkvLyBiMiBoYXMgYmVlbiBsaWZ0ZWQsIGluZmVycmlu
ZyBwb2x5IGludm9jYXRpb24gdHlwZSBhbW91bnRzIHRvIGxpZnRpbmcgYjMuCiAJCQkJCX0gZWxz
ZSB7CiAJCQkJCQlpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQgPSBpbmZlcmVuY2VDb250
ZXh0LmdldEluZmVyZW5jZUtpbmQocHJldmlvdXNNZXRob2QsIGFyZ3VtZW50VHlwZXMpOworCQkJ
CQkJYm9vbGVhbiBpc0RpYW1vbmQgPSBtZXRob2QuaXNDb25zdHJ1Y3RvcigpICYmIHRoaXMubGVm
dC5pc1BvbHlFeHByZXNzaW9uKG1ldGhvZCk7CisJCQkJCQlpbmZlckludm9jYXRpb25BcHBsaWNh
YmlsaXR5KGluZmVyZW5jZUNvbnRleHQsIG1ldGhvZCwgYXJndW1lbnRUeXBlcywgaXNEaWFtb25k
LCBpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQpOworCQkJCQkJLy8gYjIgaGFzIGJlZW4g
bGlmdGVkLCBpbmZlcnJpbmcgcG9seSBpbnZvY2F0aW9uIHR5cGUgYW1vdW50cyB0byBsaWZ0aW5n
IGIzLgogCQkJCQl9Ci0JCQkJCWJvb2xlYW4gaXNEaWFtb25kID0gbWV0aG9kLmlzQ29uc3RydWN0
b3IoKSAmJiB0aGlzLmxlZnQuaXNQb2x5RXhwcmVzc2lvbihtZXRob2QpOwotCQkJCQlpbmZlcklu
dm9jYXRpb25BcHBsaWNhYmlsaXR5KGluZmVyZW5jZUNvbnRleHQsIG1ldGhvZCwgYXJndW1lbnRU
eXBlcywgaXNEaWFtb25kLCBpbmZlcmVuY2VDb250ZXh0LmluZmVyZW5jZUtpbmQpOwogCQkJCQlp
ZiAoIWluZmVyUG9seUludm9jYXRpb25UeXBlKGluZmVyZW5jZUNvbnRleHQsIGludm9jYXRpb24s
IHRoaXMucmlnaHQsIG1ldGhvZCkpCiAJCQkJCQlyZXR1cm4gRkFMU0U7CiAJCQkJCXJldHVybiBu
dWxsOyAvLyBhbHJlYWR5IGluY29ycG9yYXRlZApAQCAtMzM0LDcgKzM0NCw3IEBACiAJCQlpZiAo
cmV0dXJuVHlwZSA9PSBUeXBlQmluZGluZy5WT0lEKQogCQkJCXRocm93IG5ldyBJbmZlcmVuY2VG
YWlsdXJlRXhjZXB0aW9uKCJleHByZXNzaW9uIGhhcyBubyB2YWx1ZSIpOyAvLyROT04tTkxTLTEk
CiAKLQkJCWlmIChpbmZlcmVuY2VDb250ZXh0LnVzZXNVbmNoZWNrZWRDb252ZXJzaW9uKCkpIHsK
KwkJCWlmIChpbmZlcmVuY2VDb250ZXh0LnVzZXNVbmNoZWNrZWRDb252ZXJzaW9uKSB7CiAJCQkJ
Ly8gc3BlYyBzYXlzIGVyYXN1cmUsIGJ1dCB3ZSBkb24ndCByZWFsbHkgaGF2ZSBjb21wYXRpYmls
aXR5IHJ1bGVzIGZvciBlcmFzdXJlLCB1c2UgcmF3IHR5cGUgaW5zdGVhZDoKIAkJCQlUeXBlQmlu
ZGluZyBlcmFzdXJlID0gaW5mZXJlbmNlQ29udGV4dC5lbnZpcm9ubWVudC5jb252ZXJ0VG9SYXdU
eXBlKHJldHVyblR5cGUsIGZhbHNlKTsKIAkJCQlDb25zdHJhaW50VHlwZUZvcm11bGEgbmV3Q29u
c3RyYWludCA9IENvbnN0cmFpbnRUeXBlRm9ybXVsYS5jcmVhdGUoZXJhc3VyZSwgdGFyZ2V0VHlw
ZSwgQ09NUEFUSUJMRSk7CkBAIC0zNjksMTQgKzM3OSwxNSBAQAogCQkJCUNvbnN0cmFpbnRUeXBl
Rm9ybXVsYSBuZXdDb25zdHJhaW50ID0gQ29uc3RyYWludFR5cGVGb3JtdWxhLmNyZWF0ZShnYmV0
YSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSk7CiAJCQkJcmV0dXJuIGluZmVyZW5jZUNvbnRleHQu
cmVkdWNlQW5kSW5jb3Jwb3JhdGUobmV3Q29uc3RyYWludCk7CiAJCQl9Ci0JCQlpZiAoclRoZXRh
IGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpIHsKLQkJCQlJbmZlcmVuY2VWYXJpYWJsZSBh
bHBoYSA9IChJbmZlcmVuY2VWYXJpYWJsZSkgclRoZXRhOworCQkJaWYgKHJUaGV0YS5sZWFmQ29t
cG9uZW50VHlwZSgpIGluc3RhbmNlb2YgSW5mZXJlbmNlVmFyaWFibGUpIHsKKwkJCQlJbmZlcmVu
Y2VWYXJpYWJsZSBhbHBoYSA9IChJbmZlcmVuY2VWYXJpYWJsZSkgclRoZXRhLmxlYWZDb21wb25l
bnRUeXBlKCk7CisJCQkJVHlwZUJpbmRpbmcgdGFyZ2V0TGVhZlR5cGUgPSB0YXJnZXRUeXBlLmxl
YWZDb21wb25lbnRUeXBlKCk7CiAJCQkJYm9vbGVhbiB0b1Jlc29sdmUgPSBmYWxzZTsKLQkJCQlp
ZiAoaW5mZXJlbmNlQ29udGV4dC5jdXJyZW50Qm91bmRzLmNvbmRpdGlvbjE4XzVfMl9idWxsZXRf
M18zXzEoYWxwaGEsIHRhcmdldFR5cGUpKSB7CisJCQkJaWYgKGluZmVyZW5jZUNvbnRleHQuY3Vy
cmVudEJvdW5kcy5jb25kaXRpb24xOF81XzJfYnVsbGV0XzNfM18xKGFscGhhLCB0YXJnZXRMZWFm
VHlwZSkpIHsKIAkJCQkJdG9SZXNvbHZlID0gdHJ1ZTsKLQkJCQl9IGVsc2UgaWYgKGluZmVyZW5j
ZUNvbnRleHQuY3VycmVudEJvdW5kcy5jb25kaXRpb24xOF81XzJfYnVsbGV0XzNfM18yKGFscGhh
LCB0YXJnZXRUeXBlLCBpbmZlcmVuY2VDb250ZXh0KSkgeworCQkJCX0gZWxzZSBpZiAoaW5mZXJl
bmNlQ29udGV4dC5jdXJyZW50Qm91bmRzLmNvbmRpdGlvbjE4XzVfMl9idWxsZXRfM18zXzIoYWxw
aGEsIHRhcmdldExlYWZUeXBlLCBpbmZlcmVuY2VDb250ZXh0KSkgewogCQkJCQl0b1Jlc29sdmUg
PSB0cnVlOwotCQkJCX0gZWxzZSBpZiAodGFyZ2V0VHlwZS5pc1ByaW1pdGl2ZVR5cGUoKSkgewor
CQkJCX0gZWxzZSBpZiAodGFyZ2V0TGVhZlR5cGUuaXNQcmltaXRpdmVUeXBlKCkpIHsKIAkJCQkJ
VHlwZUJpbmRpbmcgd3JhcHBlciA9IGluZmVyZW5jZUNvbnRleHQuY3VycmVudEJvdW5kcy5maW5k
V3JhcHBlclR5cGVCb3VuZChhbHBoYSk7CiAJCQkJCWlmICh3cmFwcGVyICE9IG51bGwpCiAJCQkJ
CQl0b1Jlc29sdmUgPSB0cnVlOwpAQCAtMzg2LDYgKzM5Nyw5IEBACiAJCQkJCWlmIChzb2x1dGlv
biA9PSBudWxsKQogCQkJCQkJcmV0dXJuIGZhbHNlOwogCQkJCQlUeXBlQmluZGluZyB1ID0gc29s
dXRpb24uZ2V0SW5zdGFudGlhdGlvbihhbHBoYSwgbnVsbCkuY2FwdHVyZShpbmZlcmVuY2VDb250
ZXh0LnNjb3BlLCBpbnZvY2F0aW9uU2l0ZS5zb3VyY2VFbmQoKSk7CisJCQkJCWlmIChyVGhldGEu
ZGltZW5zaW9ucygpICE9IDApIHsKKwkJCQkJCXUgPSBpbmZlcmVuY2VDb250ZXh0LmVudmlyb25t
ZW50LmNyZWF0ZUFycmF5VHlwZSh1LCByVGhldGEuZGltZW5zaW9ucygpKTsKKwkJCQkJfQogCQkJ
CQlDb25zdHJhaW50VHlwZUZvcm11bGEgbmV3Q29uc3RyYWludCA9IENvbnN0cmFpbnRUeXBlRm9y
bXVsYS5jcmVhdGUodSwgdGFyZ2V0VHlwZSwgQ09NUEFUSUJMRSk7CiAJCQkJCXJldHVybiBpbmZl
cmVuY2VDb250ZXh0LnJlZHVjZUFuZEluY29ycG9yYXRlKG5ld0NvbnN0cmFpbnQpOwogCQkJCX0K
ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvSW5mZXJlbmNlQ29udGV4dDE4LmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvbG9va3VwL0luZmVyZW5jZUNvbnRleHQxOC5qYXZhCmluZGV4IGQ2MTBmODQuLmYwYTY3NTQg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvSW5mZXJlbmNlQ29udGV4dDE4LmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9JbmZlcmVuY2VDb250ZXh0MTguamF2YQpAQCAtNzgsMTEgKzc4LDExIEBA
CiAgKiA8ZHQ+MTguNS4xIEludm9jYXRpb24gQXBwbGljYWJpbGl0eSBJbmZlcmVuY2U8L2R0Pgog
ICogPGRkPntAbGluayAjaW5mZXJJbnZvY2F0aW9uQXBwbGljYWJpbGl0eShNZXRob2RCaW5kaW5n
LCBUeXBlQmluZGluZ1tdLCBib29sZWFuKX0uIFByZXBhcmUgdGhlIGluaXRpYWwgc3RhdGUgZm9y
CiAgKiAJaW5mZXJlbmNlIG9mIGEgZ2VuZXJpYyBpbnZvY2F0aW9uIC0gbm8gdGFyZ2V0IHR5cGUg
dXNlZCBhdCB0aGlzIHBvaW50LgotICogIE5lZWQgdG8gY2FsbCB7QGxpbmsgI3NvbHZlKCl9IGFm
dGVyd2FyZHMgdG8gcHJvZHVjZSB0aGUgaW50ZXJtZWRpYXRlIHJlc3VsdC48YnIvPgorICogIE5l
ZWQgdG8gY2FsbCB7QGxpbmsgI3NvbHZlKGJvb2xlYW4pfSB3aXRoIHRydWUgYWZ0ZXJ3YXJkcyB0
byBwcm9kdWNlIHRoZSBpbnRlcm1lZGlhdGUgcmVzdWx0Ljxici8+CiAgKiAgQ2FsbGVkIGluZGly
ZWN0bHkgZnJvbSB7QGxpbmsgU2NvcGUjZmluZE1ldGhvZChSZWZlcmVuY2VCaW5kaW5nLCBjaGFy
W10sIFR5cGVCaW5kaW5nW10sIEludm9jYXRpb25TaXRlLCBib29sZWFuKX0gZXQgYWwKICAqICB0
byBzZWxlY3QgYXBwbGljYWJsZSBtZXRob2RzIGludG8gb3ZlcmxvYWQgcmVzb2x1dGlvbi48L2Rk
PgogICogPGR0PjE4LjUuMiBJbnZvY2F0aW9uIFR5cGUgSW5mZXJlbmNlPC9kdD4KLSAqIDxkZD57
QGxpbmsgSW5mZXJlbmNlQ29udGV4dDE4I2luZmVySW52b2NhdGlvblR5cGUoQm91bmRTZXQsIFR5
cGVCaW5kaW5nLCBJbnZvY2F0aW9uU2l0ZSwgTWV0aG9kQmluZGluZyl9LiBBZnRlciBhCisgKiA8
ZGQ+e0BsaW5rIEluZmVyZW5jZUNvbnRleHQxOCNpbmZlckludm9jYXRpb25UeXBlKFR5cGVCaW5k
aW5nLCBJbnZvY2F0aW9uU2l0ZSwgTWV0aG9kQmluZGluZyl9LiBBZnRlciBhCiAgKiAJbW9zdCBz
cGVjaWZpYyBtZXRob2QgaGFzIGJlZW4gcGlja2VkLCBhbmQgZ2l2ZW4gYSB0YXJnZXQgdHlwZSBk
ZXRlcm1pbmUgdGhlIGZpbmFsIGdlbmVyaWMgaW5zdGFudGlhdGlvbi4KICAqICBBcyBsb25nIGFz
IGEgdGFyZ2V0IHR5cGUgaXMgc3RpbGwgdW5hdmFpbGFibGUgdGhpcyBwaGFzZSBrZWVwcyBnZXR0
aW5nIGRlZmVycmVkLjwvYnI+CiAgKiAgRGlmZmVyZW50IHdyYXBwZXJzIGV4aXN0IGZvciB0aGUg
Y29udmVuaWVuY2Ugb2YgZGlmZmVyZW50IGNhbGxlcnMuPC9kZD4KQEAgLTE1MywxMCArMTUzLDEy
IEBACiAJCiAJLyoqIFNpZ25hbHMgd2hldGhlciBhbnkgdHlwZSBjb21wYXRpYmlsaXR5IG1ha2Vz
IHVzZSBvZiB1bmNoZWNrZWQgY29udmVyc2lvbi4gKi8KIAlwdWJsaWMgTGlzdDxDb25zdHJhaW50
Rm9ybXVsYT4gY29uc3RyYWludHNXaXRoVW5jaGVja2VkQ29udmVyc2lvbjsKKwlwdWJsaWMgYm9v
bGVhbiB1c2VzVW5jaGVja2VkQ29udmVyc2lvbjsKIAogCVNjb3BlIHNjb3BlOwogCUxvb2t1cEVu
dmlyb25tZW50IGVudmlyb25tZW50OwogCVJlZmVyZW5jZUJpbmRpbmcgb2JqZWN0OyAvLyBqYXZh
LmxhbmcuT2JqZWN0CisJcHVibGljIEJvdW5kU2V0IGIyOwogCQogCXB1YmxpYyBzdGF0aWMgZmlu
YWwgaW50IENIRUNLX1NUUklDVCA9IDE7CiAJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQ0hFQ0tf
TE9PU0UgPSAyOwpAQCAtMTY3LDExICsxNjksMTMgQEAKIAkJRXhwcmVzc2lvbltdIGludm9jYXRp
b25Bcmd1bWVudHM7CiAJCUluZmVyZW5jZVZhcmlhYmxlW10gaW5mZXJlbmNlVmFyaWFibGVzOwog
CQlpbnQgaW5mZXJlbmNlS2luZDsKLQkJU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkKEludm9jYXRp
b25TaXRlIHNpdGUsIEV4cHJlc3Npb25bXSBpbnZvY2F0aW9uQXJndW1lbnRzLCBJbmZlcmVuY2VW
YXJpYWJsZVtdIGluZmVyZW5jZVZhcmlhYmxlcywgaW50IGluZmVyZW5jZUtpbmQpIHsKKwkJYm9v
bGVhbiB1c2VzVW5jaGVja2VkQ29udmVyc2lvbjsKKwkJU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3Jk
KEludm9jYXRpb25TaXRlIHNpdGUsIEV4cHJlc3Npb25bXSBpbnZvY2F0aW9uQXJndW1lbnRzLCBJ
bmZlcmVuY2VWYXJpYWJsZVtdIGluZmVyZW5jZVZhcmlhYmxlcywgaW50IGluZmVyZW5jZUtpbmQs
IGJvb2xlYW4gdXNlc1VuY2hlY2tlZENvbnZlcnNpb24pIHsKIAkJCXRoaXMuc2l0ZSA9IHNpdGU7
CiAJCQl0aGlzLmludm9jYXRpb25Bcmd1bWVudHMgPSBpbnZvY2F0aW9uQXJndW1lbnRzOwogCQkJ
dGhpcy5pbmZlcmVuY2VWYXJpYWJsZXMgPSBpbmZlcmVuY2VWYXJpYWJsZXM7CiAJCQl0aGlzLmlu
ZmVyZW5jZUtpbmQgPSBpbmZlcmVuY2VLaW5kOworCQkJdGhpcy51c2VzVW5jaGVja2VkQ29udmVy
c2lvbiA9IHVzZXNVbmNoZWNrZWRDb252ZXJzaW9uOwogCQl9CiAJfQogCQpAQCAtMzMxLDE3ICsz
MzUsMTQgQEAKIAl9CiAKIAkvKiogSkxTIDE4LjUuMiBJbnZvY2F0aW9uIFR5cGUgSW5mZXJlbmNl
IAotCSAqIEBwYXJhbSBiMSAidGhlIGJvdW5kIHNldCBwcm9kdWNlZCBieSByZWR1Y3Rpb24gaW4g
b3JkZXIgdG8gZGVtb25zdHJhdGUgdGhhdCBtIGlzIGFwcGxpY2FibGUgaW4gMTguNS4xIgogCSAq
LwotCXB1YmxpYyBCb3VuZFNldCBpbmZlckludm9jYXRpb25UeXBlKEJvdW5kU2V0IGIxLCBUeXBl
QmluZGluZyBleHBlY3RlZFR5cGUsIEludm9jYXRpb25TaXRlIGludm9jYXRpb25TaXRlLCBNZXRo
b2RCaW5kaW5nIG1ldGhvZCkKLQkJCXRocm93cyBJbmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9uIAor
CXB1YmxpYyBCb3VuZFNldCBpbmZlckludm9jYXRpb25UeXBlKFR5cGVCaW5kaW5nIGV4cGVjdGVk
VHlwZSwgSW52b2NhdGlvblNpdGUgaW52b2NhdGlvblNpdGUsIE1ldGhvZEJpbmRpbmcgbWV0aG9k
KSB0aHJvd3MgSW5mZXJlbmNlRmFpbHVyZUV4Y2VwdGlvbiAKIAl7CiAJCS8vIG5vdCBKTFM6IHNp
bXBseSBlbnN1cmUgdGhhdCBudWxsIGhpbnRzIGZyb20gdGhlIHJldHVybiB0eXBlIGhhdmUgYmVl
biBzZWVuIGV2ZW4gaW4gc3RhbmRhbG9uZSBjb250ZXh0czoKIAkJaWYgKGV4cGVjdGVkVHlwZSA9
PSBudWxsICYmIG1ldGhvZC5yZXR1cm5UeXBlICE9IG51bGwpCiAJCQlzdWJzdGl0dXRlKG1ldGhv
ZC5yZXR1cm5UeXBlKTsgLy8gcmVzdWx0IGlzIGlnbm9yZSwgdGhlIG9ubHkgZWZmZWN0IGlzIG9u
IEluZmVyZW5jZVZhcmlhYmxlLm51bGxIaW50cwotCQkvLwotCQlCb3VuZFNldCBwcmV2aW91cyA9
IHRoaXMuY3VycmVudEJvdW5kcy5jb3B5KCk7Ci0JCXRoaXMuY3VycmVudEJvdW5kcyA9IGIxOwor
CQkKKwkJdGhpcy5jdXJyZW50Qm91bmRzID0gdGhpcy5iMi5jb3B5KCk7CiAJCXRyeSB7CiAJCQkv
LyBidWxsZXRzIDEmMjogZGVmaW5pdGlvbnMgb25seS4KIAkJCWlmIChleHBlY3RlZFR5cGUgIT0g
bnVsbApAQCAtMzk3LDcgKzM5OCw3IEBACiAJCQkvLyA2LiBidWxsZXQ6IHNvbHZlCiAJCQlCb3Vu
ZFNldCBzb2x1dGlvbiA9IHNvbHZlKCk7CiAJCQlpZiAoc29sdXRpb24gPT0gbnVsbCB8fCAhaXNS
ZXNvbHZlZChzb2x1dGlvbikpIHsKLQkJCQl0aGlzLmN1cnJlbnRCb3VuZHMgPSBwcmV2aW91czsg
Ly8gZG9uJ3QgbGV0IGJvdW5kcyBmcm9tIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0IGxlYWsgaW50byBz
dWJzZXF1ZW50IGF0dGVtcHRzCisJCQkJdGhpcy5jdXJyZW50Qm91bmRzID0gdGhpcy5iMjsgLy8g
ZG9uJ3QgbGV0IGJvdW5kcyBmcm9tIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0IGxlYWsgaW50byBzdWJz
ZXF1ZW50IGF0dGVtcHRzCiAJCQkJcmV0dXJuIG51bGw7CiAJCQl9CiAJCQkvLyB3ZSdyZSBkb25l
LCBzdGFydCByZXBvcnRpbmc6CkBAIC03ODIsMTMgKzc4MywxOSBAQAogCSAqIEByZXR1cm4gYSBi
b3VuZCBzZXQgcmVwcmVzZW50aW5nIHRoZSBzb2x1dGlvbiwgb3IgbnVsbCBpZiBpbmZlcmVuY2Ug
ZmFpbGVkCiAJICogQHRocm93cyBJbmZlcmVuY2VGYWlsdXJlRXhjZXB0aW9uIGEgY29tcGlsZSBl
cnJvciBoYXMgYmVlbiBkZXRlY3RlZCBkdXJpbmcgaW5mZXJlbmNlCiAJICovCi0JcHVibGljIC8q
QE51bGxhYmxlKi8gQm91bmRTZXQgc29sdmUoKSB0aHJvd3MgSW5mZXJlbmNlRmFpbHVyZUV4Y2Vw
dGlvbiB7CisJcHVibGljIC8qQE51bGxhYmxlKi8gQm91bmRTZXQgc29sdmUoYm9vbGVhbiBpbmZl
cnJpbmdBcHBsaWNhYmlsaXR5KSB0aHJvd3MgSW5mZXJlbmNlRmFpbHVyZUV4Y2VwdGlvbiB7CiAJ
CWlmICghcmVkdWNlKCkpCiAJCQlyZXR1cm4gbnVsbDsKIAkJaWYgKCF0aGlzLmN1cnJlbnRCb3Vu
ZHMuaW5jb3Jwb3JhdGUodGhpcykpCiAJCQlyZXR1cm4gbnVsbDsKKwkJaWYgKGluZmVycmluZ0Fw
cGxpY2FiaWxpdHkpCisJCQl0aGlzLmIyID0gdGhpcy5jdXJyZW50Qm91bmRzLmNvcHkoKTsgLy8g
UHJlc2VydmUgdGhlIHJlc3VsdCBhZnRlciByZWR1Y3Rpb24sIHdpdGhvdXQgZWZmZWN0cyBvZiBy
ZXNvbHZlKCkgZm9yIGxhdGVyIHVzZSBpbiBpbnZvY2F0aW9uIHR5cGUgaW5mZXJlbmNlLgogCiAJ
CXJldHVybiByZXNvbHZlKHRoaXMuaW5mZXJlbmNlVmFyaWFibGVzKTsKKwl9CisJCisJcHVibGlj
IC8qQE51bGxhYmxlKi8gQm91bmRTZXQgc29sdmUoKSB0aHJvd3MgSW5mZXJlbmNlRmFpbHVyZUV4
Y2VwdGlvbiB7CisJCXJldHVybiBzb2x2ZShmYWxzZSk7CiAJfQogCQogCXB1YmxpYyAvKkBOdWxs
YWJsZSovIEJvdW5kU2V0IHNvbHZlKEluZmVyZW5jZVZhcmlhYmxlW10gdG9SZXNvbHZlKSB0aHJv
d3MgSW5mZXJlbmNlRmFpbHVyZUV4Y2VwdGlvbiB7CkBAIC04MDUsMTEgKzgxMiwxNCBAQAogCSAq
IEB0aHJvd3MgSW5mZXJlbmNlRmFpbHVyZUV4Y2VwdGlvbiAKIAkgKi8KIAlwcml2YXRlIGJvb2xl
YW4gcmVkdWNlKCkgdGhyb3dzIEluZmVyZW5jZUZhaWx1cmVFeGNlcHRpb24gewotCQlpZiAodGhp
cy5pbml0aWFsQ29uc3RyYWludHMgIT0gbnVsbCkgewotCQkJZm9yIChpbnQgaSA9IDA7IGkgPCB0
aGlzLmluaXRpYWxDb25zdHJhaW50cy5sZW5ndGg7IGkrKykgewotCQkJCWlmICghdGhpcy5jdXJy
ZW50Qm91bmRzLnJlZHVjZU9uZUNvbnN0cmFpbnQodGhpcywgdGhpcy5pbml0aWFsQ29uc3RyYWlu
dHNbaV0pKQotCQkJCQlyZXR1cm4gZmFsc2U7Ci0JCQl9CisJCS8vIENhdXRpb246IFRoaXMgY2Fu
IGJlIHJlZW50ZXJlZCByZWN1cnNpdmVseSBldmVuIGFzIGFuIGVhcmxpZXIgY2FsbCBpcyBtdW5j
aGluZyB0aHJvdWdoIHRoZSBjb25zdHJhaW50cyAhCisJCWZvciAoaW50IGkgPSAwOyB0aGlzLmlu
aXRpYWxDb25zdHJhaW50cyAhPSBudWxsICYmIGkgPCB0aGlzLmluaXRpYWxDb25zdHJhaW50cy5s
ZW5ndGg7IGkrKykgeworCQkJZmluYWwgQ29uc3RyYWludEZvcm11bGEgY3VycmVudENvbnN0cmFp
bnQgPSB0aGlzLmluaXRpYWxDb25zdHJhaW50c1tpXTsKKwkJCWlmIChjdXJyZW50Q29uc3RyYWlu
dCA9PSBudWxsKQorCQkJCWNvbnRpbnVlOworCQkJdGhpcy5pbml0aWFsQ29uc3RyYWludHNbaV0g
PSBudWxsOworCQkJaWYgKCF0aGlzLmN1cnJlbnRCb3VuZHMucmVkdWNlT25lQ29uc3RyYWludCh0
aGlzLCBjdXJyZW50Q29uc3RyYWludCkpCisJCQkJcmV0dXJuIGZhbHNlOwogCQl9CiAJCXRoaXMu
aW5pdGlhbENvbnN0cmFpbnRzID0gbnVsbDsKIAkJcmV0dXJuIHRydWU7CkBAIC0xMzA4LDE5ICsx
MzE4LDIwIEBACiAJfQogCQogCXB1YmxpYyBTdXNwZW5kZWRJbmZlcmVuY2VSZWNvcmQgZW50ZXJQ
b2x5SW52b2NhdGlvbihJbnZvY2F0aW9uU2l0ZSBpbnZvY2F0aW9uLCBFeHByZXNzaW9uW10gaW5u
ZXJBcmd1bWVudHMpIHsKLQkJU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkIHJlY29yZCA9IG5ldyBT
dXNwZW5kZWRJbmZlcmVuY2VSZWNvcmQodGhpcy5jdXJyZW50SW52b2NhdGlvbiwgdGhpcy5pbnZv
Y2F0aW9uQXJndW1lbnRzLCB0aGlzLmluZmVyZW5jZVZhcmlhYmxlcywgdGhpcy5pbmZlcmVuY2VL
aW5kKTsKKwkJU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkIHJlY29yZCA9IG5ldyBTdXNwZW5kZWRJ
bmZlcmVuY2VSZWNvcmQodGhpcy5jdXJyZW50SW52b2NhdGlvbiwgdGhpcy5pbnZvY2F0aW9uQXJn
dW1lbnRzLCB0aGlzLmluZmVyZW5jZVZhcmlhYmxlcywgdGhpcy5pbmZlcmVuY2VLaW5kLCB0aGlz
LnVzZXNVbmNoZWNrZWRDb252ZXJzaW9uKTsKIAkJdGhpcy5pbmZlcmVuY2VWYXJpYWJsZXMgPSBu
dWxsOwogCQl0aGlzLmludm9jYXRpb25Bcmd1bWVudHMgPSBpbm5lckFyZ3VtZW50czsKIAkJdGhp
cy5jdXJyZW50SW52b2NhdGlvbiA9IGludm9jYXRpb247Ci0JCQorCQl0aGlzLnVzZXNVbmNoZWNr
ZWRDb252ZXJzaW9uID0gZmFsc2U7CiAJCXJldHVybiByZWNvcmQ7CiAJfQogCQogCXB1YmxpYyBT
dXNwZW5kZWRJbmZlcmVuY2VSZWNvcmQgZW50ZXJMYW1iZGEoTGFtYmRhRXhwcmVzc2lvbiBsYW1i
ZGEpIHsKLQkJU3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkIHJlY29yZCA9IG5ldyBTdXNwZW5kZWRJ
bmZlcmVuY2VSZWNvcmQodGhpcy5jdXJyZW50SW52b2NhdGlvbiwgdGhpcy5pbnZvY2F0aW9uQXJn
dW1lbnRzLCB0aGlzLmluZmVyZW5jZVZhcmlhYmxlcywgdGhpcy5pbmZlcmVuY2VLaW5kKTsKKwkJ
U3VzcGVuZGVkSW5mZXJlbmNlUmVjb3JkIHJlY29yZCA9IG5ldyBTdXNwZW5kZWRJbmZlcmVuY2VS
ZWNvcmQodGhpcy5jdXJyZW50SW52b2NhdGlvbiwgdGhpcy5pbnZvY2F0aW9uQXJndW1lbnRzLCB0
aGlzLmluZmVyZW5jZVZhcmlhYmxlcywgdGhpcy5pbmZlcmVuY2VLaW5kLCB0aGlzLnVzZXNVbmNo
ZWNrZWRDb252ZXJzaW9uKTsKIAkJdGhpcy5pbmZlcmVuY2VWYXJpYWJsZXMgPSBudWxsOwogCQl0
aGlzLmludm9jYXRpb25Bcmd1bWVudHMgPSBudWxsOwogCQl0aGlzLmN1cnJlbnRJbnZvY2F0aW9u
ID0gbnVsbDsKKwkJdGhpcy51c2VzVW5jaGVja2VkQ29udmVyc2lvbiA9IGZhbHNlOwogCQlyZXR1
cm4gcmVjb3JkOwogCX0KIApAQCAtMTM0MCw2ICsxMzUxLDcgQEAKIAkJdGhpcy5jdXJyZW50SW52
b2NhdGlvbiA9IHJlY29yZC5zaXRlOwogCQl0aGlzLmludm9jYXRpb25Bcmd1bWVudHMgPSByZWNv
cmQuaW52b2NhdGlvbkFyZ3VtZW50czsKIAkJdGhpcy5pbmZlcmVuY2VLaW5kID0gcmVjb3JkLmlu
ZmVyZW5jZUtpbmQ7CisJCXRoaXMudXNlc1VuY2hlY2tlZENvbnZlcnNpb24gPSByZWNvcmQudXNl
c1VuY2hlY2tlZENvbnZlcnNpb247CiAJfQogCiAJcHJpdmF0ZSBTdWJzdGl0dXRpb24gZ2V0UmVz
dWx0U3Vic3RpdHV0aW9uKGZpbmFsIEJvdW5kU2V0IHJlc3VsdCkgewpAQCAtMTQ3Miw2ICsxNDg0
LDcgQEAKIAkJaWYgKHRoaXMuY29uc3RyYWludHNXaXRoVW5jaGVja2VkQ29udmVyc2lvbiA9PSBu
dWxsKQogCQkJdGhpcy5jb25zdHJhaW50c1dpdGhVbmNoZWNrZWRDb252ZXJzaW9uID0gbmV3IEFy
cmF5TGlzdDxDb25zdHJhaW50Rm9ybXVsYT4oKTsKIAkJdGhpcy5jb25zdHJhaW50c1dpdGhVbmNo
ZWNrZWRDb252ZXJzaW9uLmFkZChjb25zdHJhaW50KTsKKwkJdGhpcy51c2VzVW5jaGVja2VkQ29u
dmVyc2lvbiA9IHRydWU7CiAJfQogCQogCXZvaWQgcmVwb3J0VW5jaGVja2VkQ29udmVyc2lvbnMo
Qm91bmRTZXQgc29sdXRpb24pIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1ldGVy
aXplZEdlbmVyaWNNZXRob2RCaW5kaW5nLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6
ZWRHZW5lcmljTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IGYzNzAzZTUuLjM4MzE3NDMgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1ldGVyaXplZEdlbmVyaWNNZXRob2RCaW5kaW5nLmph
dmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVkR2VuZXJpY01ldGhvZEJpbmRpbmcu
amF2YQpAQCAtMTc2LDE0ICsxNzYsMTQgQEAKIAkJCWlmIChhcmd1bWVudHMubGVuZ3RoID09IHBh
cmFtZXRlcnMubGVuZ3RoKSB7CiAJCQkJaW5mQ3R4MTguaW5mZXJlbmNlS2luZCA9IEluZmVyZW5j
ZUNvbnRleHQxOC5DSEVDS19MT09TRTsgLy8gVE9ETzogdmFsaWRhdGUgaWYgMiBwaGFzZSBjaGVj
a2luZyAoc3RyaWN0L2xvb3NlICsgdmFyYXJnKSBpcyBzdWZmaWNpZW50LgogCQkJCWluZkN0eDE4
LmluZmVySW52b2NhdGlvbkFwcGxpY2FiaWxpdHkob3JpZ2luYWxNZXRob2QsIGFyZ3VtZW50cywg
aXNEaWFtb25kKTsKLQkJCQlyZXN1bHQgPSBpbmZDdHgxOC5zb2x2ZSgpOworCQkJCXJlc3VsdCA9
IGluZkN0eDE4LnNvbHZlKHRydWUpOwogCQkJfQogCQkJaWYgKHJlc3VsdCA9PSBudWxsICYmIG9y
aWdpbmFsTWV0aG9kLmlzVmFyYXJncygpKSB7CiAJCQkJLy8gY2hlY2sgZm9yIHZhcmlhYmxlLWFy
aXR5IGFwcGxpY2FiaWxpdHkKIAkJCQlpbmZDdHgxOCA9IGludm9jYXRpb25TaXRlLmZyZXNoSW5m
ZXJlbmNlQ29udGV4dChzY29wZSk7IC8vIHN0YXJ0IG92ZXIKIAkJCQlpbmZDdHgxOC5pbmZlcmVu
Y2VLaW5kID0gSW5mZXJlbmNlQ29udGV4dDE4LkNIRUNLX1ZBUkFSRzsKIAkJCQlpbmZDdHgxOC5p
bmZlckludm9jYXRpb25BcHBsaWNhYmlsaXR5KG9yaWdpbmFsTWV0aG9kLCBhcmd1bWVudHMsIGlz
RGlhbW9uZCk7Ci0JCQkJcmVzdWx0ID0gaW5mQ3R4MTguc29sdmUoKTsKKwkJCQlyZXN1bHQgPSBp
bmZDdHgxOC5zb2x2ZSh0cnVlKTsKIAkJCX0KIAkJCWlmIChyZXN1bHQgPT0gbnVsbCkKIAkJCQly
ZXR1cm4gbnVsbDsKQEAgLTIwMCw4ICsyMDAsNyBAQAogCQkJaWYgKGV4cGVjdGVkVHlwZSAhPSBu
dWxsIHx8ICFpbnZvY2F0aW9uU2l0ZS5nZXRFeHByZXNzaW9uQ29udGV4dCgpLmRlZmluZXNUYXJn
ZXRUeXBlKCkpIHsKIAkJCQkvLyAtLS0tIDE4LjUuMiAoSW52b2NhdGlvbiB0eXBlKTogLS0tLQog
CQkJCXByb3Zpc2lvbmFsUmVzdWx0ID0gcmVzdWx0OwotCQkJCXJlc3VsdCA9IGluZkN0eDE4LmN1
cnJlbnRCb3VuZHMuY29weSgpOyAvLyB0aGUgcmVzdWx0IGFmdGVyIHJlZHVjdGlvbiwgd2l0aG91
dCBlZmZlY3RzIG9mIHJlc29sdmUoKQotCQkJCXJlc3VsdCA9IGluZkN0eDE4LmluZmVySW52b2Nh
dGlvblR5cGUocmVzdWx0LCBleHBlY3RlZFR5cGUsIGludm9jYXRpb25TaXRlLCBvcmlnaW5hbE1l
dGhvZCk7CisJCQkJcmVzdWx0ID0gaW5mQ3R4MTguaW5mZXJJbnZvY2F0aW9uVHlwZShleHBlY3Rl
ZFR5cGUsIGludm9jYXRpb25TaXRlLCBvcmlnaW5hbE1ldGhvZCk7CiAJCQkJaW52b2NhdGlvblR5
cGVJbmZlcnJlZCA9IHRydWU7CiAJCQkJaGFzUmV0dXJuUHJvYmxlbSB8PSByZXN1bHQgPT0gbnVs
bDsKIAkJCQlpZiAoaGFzUmV0dXJuUHJvYmxlbSk=
</data>

          </attachment>
      

    </bug>

</bugzilla>