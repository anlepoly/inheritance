<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>403414</bug_id>
          
          <creation_ts>2013-03-15 04:38:00 -0400</creation_ts>
          <short_desc>Error from JavaProjectTests.testRootGetPackageFragments3</short_desc>
          <delta_ts>2014-05-14 08:07:54 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc>http://download.eclipse.org/eclipse/downloads/drops4/I20130314-1330/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>test</keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dani Megert">daniel_megert</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>jarthana</cc>
    
    <cc>mamatha.jv</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2231774</commentid>
    <comment_count>0</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-03-15 04:38:04 -0400</bug_when>
    <thetext>I20130314-1330.

JavaProjectTests.testRootGetPackageFragments3 fails with an error.

/P1 [in P2] is not on its project&apos;s build path

Java Model Exception: Java Model Status [/P1 [in P2] is not on its project&apos;s build path]
at org.eclipse.jdt.internal.core.JavaElement.newJavaModelException(JavaElement.java:508)
at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:246)
at org.eclipse.jdt.internal.core.Openable.openAncestors(Openable.java:504)
at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:240)
at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:521)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:258)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:244)
at org.eclipse.jdt.internal.core.JavaElement.getChildren(JavaElement.java:199)
at org.eclipse.jdt.core.tests.model.JavaProjectTests.testRootGetPackageFragments3(JavaProjectTests.java:2244)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.runTest(SuiteOfTestCases.java:104)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.superRun(SuiteOfTestCases.java:88)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$1.protect(SuiteOfTestCases.java:76)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.run(SuiteOfTestCases.java:85)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:655)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:310)
at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:36)
at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:32)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)
at org.eclipse.equinox.launcher.Main.run(Main.java:1450)
at org.eclipse.equinox.launcher.Main.main(Main.java:1426)
at org.eclipse.core.launcher.Main.main(Main.java:34)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2231775</commentid>
    <comment_count>1</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-03-15 04:39:55 -0400</bug_when>
    <thetext>Jay, please take a look and add another comment to bug 403321, where you already declared the GO for JDT Core.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234062</commentid>
    <comment_count>2</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-03-20 04:03:28 -0400</bug_when>
    <thetext>Failed again in N20130319-2000 [1].


[1] http://download.eclipse.org/eclipse/downloads/drops4/N20130319-2000/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234377</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-03-20 13:00:19 -0400</bug_when>
    <thetext>Just by looking at the test case, I don&apos;t think there is anything that would cause this failure. Perhaps some multi threading is going on here. Having some other tests using the same project name and deleting them could be interfering here too.

To rule that out, I will fix the test project names to being unique and see if that helps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234647</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-03-21 00:02:31 -0400</bug_when>
    <thetext>It&apos;s possible that there is some delay in deletion in of some resources. I have made some minor adjustments in the failing test to avoid the name conflicts. Will wait and see how this helps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2236028</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-03-25 00:58:08 -0400</bug_when>
    <thetext>(In reply to comment #4)
&gt; It&apos;s possible that there is some delay in deletion in of some resources. I
&gt; have made some minor adjustments in the failing test to avoid the name
&gt; conflicts. Will wait and see how this helps.

Apparently not. This happened again:

http://download.eclipse.org/eclipse/downloads/drops4/N20130322-2000/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2247749</commentid>
    <comment_count>6</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-04-24 05:03:21 -0400</bug_when>
    <thetext>It happened two times in a row now:

http://download.eclipse.org/eclipse/downloads/drops4/I20130423-0800/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html

http://download.eclipse.org/eclipse/downloads/drops4/N20130423-2000/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2247879</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-04-24 09:36:25 -0400</bug_when>
    <thetext>(In reply to comment #6)
&gt; It happened two times in a row now:
&gt; 
&gt; http://download.eclipse.org/eclipse/downloads/drops4/I20130423-0800/
&gt; testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html
&gt; 
&gt; http://download.eclipse.org/eclipse/downloads/drops4/N20130423-2000/
&gt; testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html

Looking at the PackageFragmentRoot#validateExistence(), the error could occur if the project entry is not in the classpath or if the project resource is not accessible for some reason.

However, the .classpath modification, reading classpath and updating the classpath of a project all happen at the same thread and I can&apos;t possibly imagine why it won&apos;t be part of the classpath. So, that possibly means the project is not accessible/open for some reason. I will try and see if I can simulate such a scenario.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250402</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-04-30 08:44:59 -0400</bug_when>
    <thetext>Haven&apos;t made any breakthrough on this yet. I will have to disable the test for the time being and take a fresh look at it post Kepler time frame.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250406</commentid>
    <comment_count>9</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-04-30 08:56:54 -0400</bug_when>
    <thetext>Disabled the test for windows. The tests will continue to run for other OS configurations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2257859</commentid>
    <comment_count>10</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-05-16 03:35:46 -0400</bug_when>
    <thetext>(In reply to comment #9)
&gt; Disabled the test for windows. The tests will continue to run for other OS
&gt; configurations.

Failed on Linux this time:
http://download.eclipse.org/eclipse/downloads/drops4/I20130515-2000/testresults/html/org.eclipse.jdt.core.tests.model_linux.gtk.x86_6.0.html


==&gt; let&apos;s disable it on all platforms for Kepler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2257928</commentid>
    <comment_count>11</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-05-16 05:50:31 -0400</bug_when>
    <thetext>(In reply to comment #10)
&gt; ==&gt; let&apos;s disable it on all platforms for Kepler.

Done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2368919</commentid>
    <comment_count>12</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-02-26 11:37:53 -0500</bug_when>
    <thetext>Manoj, can you see if the failing test can be fixed and enabled again? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2401520</commentid>
    <comment_count>13</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-05-14 08:07:54 -0400</bug_when>
    <thetext>So well in to RCs, and no fix or possible theories available, I don&apos;t want to enable the tests with trouble shooting codes. But during early 4.5, we should do that.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>