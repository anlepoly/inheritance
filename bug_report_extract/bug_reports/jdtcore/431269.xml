<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>431269</bug_id>
          
          <creation_ts>2014-03-26 13:17:00 -0400</creation_ts>
          <short_desc>[1.8][compiler][null] StackOverflow in nullAnnotatedReadableName</short_desc>
          <delta_ts>2014-05-01 12:16:46 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Frits Jalvingh">jal</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>dobesv</cc>
    
    <cc>jarthana</cc>
    
    <cc>nospamplease</cc>
    
    <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
    
    <cc>the.ubik</cc>
    
    <cc>www.marktiedemann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2380587</commentid>
    <comment_count>0</comment_count>
    <who name="Frits Jalvingh">jal</who>
    <bug_when>2014-03-26 13:17:47 -0400</bug_when>
    <thetext>Eclipse Kepler with Java 8 compiler installed. Changing an annotation threw:

java.lang.StackOverflowError
        at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:130)
        at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:114)
        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:505)
        at java.lang.StringBuffer.append(StringBuffer.java:314)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1099)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)
        at org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding.nullAnnotatedReadableName(TypeVariableBinding.java:728)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1116)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)
        at org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding.nullAnnotatedReadableName(TypeVariableBinding.java:728)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1116)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)
        at org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding.nullAnnotatedReadableName(TypeVariableBinding.java:728)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1116)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)
        at org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding.nullAnnotatedReadableName(TypeVariableBinding.java:728)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1116)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)
        at org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding.nullAnnotatedReadableName(TypeVariableBinding.java:728)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1116)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)
        at org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding.nullAnnotatedReadableName(TypeVariableBinding.java:728)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1116)
        at org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.nullAnnotatedReadableName(ParameterizedTypeBinding.java:1085)

etc. The annotation that was changed during the save was the @Nonnull annotation also configured to do null checking.

After restart the problem persists, with the problems log showing:
Description	Resource	Path	Location	Type
Internal compiler error: java.lang.StackOverflowError at org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.appendNullAnnotation(ReferenceBinding.java:1593)	ConfigNodeFragment.java	/to.etc.saram.core/src/to/etc/saram/xtool/ui	line 0	Java Problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2380689</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-26 15:50:58 -0400</bug_when>
    <thetext>Thanks for the report.
Can you please try to extract a small reproducing example?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2380690</commentid>
    <comment_count>2</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-26 15:51:40 -0400</bug_when>
    <thetext>I also meant to ask if perhaps a recursive generic type was involved?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2380754</commentid>
    <comment_count>3</comment_count>
    <who name="Frits Jalvingh">jal</who>
    <bug_when>2014-03-26 18:57:38 -0400</bug_when>
    <thetext>Hmmm, yes, I got the error on two separate classes, both of which contain recursive definitions. I will try if I can concoct a simple test case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2380757</commentid>
    <comment_count>4</comment_count>
      <attachid>241291</attachid>
    <who name="Frits Jalvingh">jal</who>
    <bug_when>2014-03-26 19:09:25 -0400</bug_when>
    <thetext>Created attachment 241291
Dying example

This extracts the recursive definition that causes the error. Notice that the Nullity annotations used are part of the example, and they should be configured as such in Eclipse.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2384124</commentid>
    <comment_count>5</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-04-03 09:56:15 -0400</bug_when>
    <thetext>Thanks for extracting the test case!

Test &amp; fix released for 4.4 M7 via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=d95feda7fc2f9a6563596c0e4c31ae322f705773</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2384421</commentid>
    <comment_count>6</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-04-03 16:19:45 -0400</bug_when>
    <thetext>*** Bug 431956 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2390715</commentid>
    <comment_count>7</comment_count>
    <who name="Dobes Vandermeer">dobesv</who>
    <bug_when>2014-04-19 01:08:50 -0400</bug_when>
    <thetext>*** Bug 433063 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2390903</commentid>
    <comment_count>8</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-04-21 06:50:15 -0400</bug_when>
    <thetext>*** Bug 433119 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2394412</commentid>
    <comment_count>9</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-04-29 02:55:16 -0400</bug_when>
    <thetext>Verified for 4.4 M7 using I20140427-2030 build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2395897</commentid>
    <comment_count>10</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-05-01 12:16:46 -0400</bug_when>
    <thetext>*** Bug 433927 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>241291</attachid>
            <date>2014-03-26 19:09:00 -0400</date>
            <delta_ts>2014-03-26 19:09:25 -0400</delta_ts>
            <desc>Dying example</desc>
            <filename>stackoverflow.zip</filename>
            <type>application/zip</type>
            <size>4101</size>
            <attacher name="Frits Jalvingh">jal</attacher>
            
              <data encoding="base64">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
</data>

          </attachment>
      

    </bug>

</bugzilla>