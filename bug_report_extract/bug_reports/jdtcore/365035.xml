<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>365035</bug_id>
          
          <creation_ts>2011-11-29 05:20:00 -0500</creation_ts>
          <short_desc>include new bundle org.eclipse.jdt.annotation in build and packaging</short_desc>
          <delta_ts>2011-12-01 11:23:15 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>Platform</product>
          <component>Releng</component>
          <version>3.8</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.8 M4</target_milestone>
          
          <blocked>186342</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Dani Megert">daniel_megert</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>kim.moir</cc>
    
    <cc>markus_keller</cc>
    
    <cc>satyam.kandula</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2033091</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-11-29 05:20:47 -0500</bug_when>
    <thetext>Hi Kim,

I just pushed a new tiny plugin project to JDT/Core&apos;s git:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/tree/org.eclipse.jdt.annotation

This is supposed to be shipped together with the patch for bug 186342.
That bug is currently in its end game, and if nothing bad is detected
during the next few days we will want to include this like in Friday&apos;s
warm-up build towards M4.

Could you please coordinate with Satyam and Srikanth the necessary steps
to include this bundle in the build as part of the jdt feature?

Is it just adding entries to feature.xml and jdtcore.map?
How must the entry to the map file be initialized to participate in
automatic tagging?

TIA</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033219</commentid>
    <comment_count>1</comment_count>
    <who name="John Arthorne">john_arthorne</who>
    <bug_when>2011-11-29 09:07:14 -0500</bug_when>
    <thetext>Was there some discussion already about what namespace to use for these annotations? It would be interesting to be able to use these annotations in the Platform but being in the JDT feature would prevent that. I suspect other potential consumers would also not like the apparent JDT dependency in their runtime code (even though it is a single project that could be consumed independently from the JDT feature). I wonder if they should be placed in a core or equinox namespace and put into the RCP feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033224</commentid>
    <comment_count>2</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-11-29 09:17:41 -0500</bug_when>
    <thetext>(In reply to comment #1)
&gt; Was there some discussion already about what namespace to use for these
&gt; annotations? It would be interesting to be able to use these annotations in the
&gt; Platform but being in the JDT feature would prevent that. I suspect other
&gt; potential consumers would also not like the apparent JDT dependency in their
&gt; runtime code (even though it is a single project that could be consumed
&gt; independently from the JDT feature). I wonder if they should be placed in a
&gt; core or equinox namespace and put into the RCP feature.

Good point, though I&apos;m not sure why people would prefer &quot;equinox&quot; over &quot;jdt&quot; or the other way around unless they don&apos;t get any additional stuff besides the annotations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033225</commentid>
    <comment_count>3</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-11-29 09:19:38 -0500</bug_when>
    <thetext>&gt; Good point, though I&apos;m not sure why people would prefer &quot;equinox&quot; over &quot;jdt&quot; or
&gt; the other way around unless they don&apos;t get any additional stuff besides the
&gt; annotations.
Also note that the annotations are Java specific i.e. they are not applicable for e.g. CDT developers. Hence a &quot;jdt&quot; or &quot;java&quot; should probably be in the name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033235</commentid>
    <comment_count>4</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-11-29 09:27:27 -0500</bug_when>
    <thetext>(In reply to comment #1)
&gt; Was there some discussion already about what namespace to use for these
&gt; annotations? 

Discussion was held within JDT, not with eclipse at large.

&gt; It would be interesting to be able to use these annotations in the
&gt; Platform

glad to here that from you :)

&gt; but being in the JDT feature would prevent that.

Why do you think so? The new bundle has no dependencies (except BREE-1.5)
so what exactly should prevent platform components from compiling against 
this bundle?

&gt; I suspect other
&gt; potential consumers would also not like the apparent JDT dependency in their
&gt; runtime code

Well, it&apos;s not strictly a runtime dependency.
BTW: would this work?
  Import-Package: org.eclipse.jdt.annotation;resolution=&quot;optional&quot;
This could help the compiler and still allow to run any bundle referencing
the annotations without having the annotations at runtime?

&gt; (even though it is a single project that could be consumed
&gt; independently from the JDT feature)

my point exactly.

&gt; I wonder if they should be placed in a
&gt; core or equinox namespace and put into the RCP feature.

Maybe from a build/packaging perspective there are good reasons for this
but I think process is be much easier if JDT keeps ownership of this bundle.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033318</commentid>
    <comment_count>5</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-11-29 10:58:01 -0500</bug_when>
    <thetext>John, I&apos;d like to go with the proposed bundle / name space. Note that those who don&apos;t like the name can simply use their own annotations and configure JDT accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033472</commentid>
    <comment_count>6</comment_count>
    <who name="John Arthorne">john_arthorne</who>
    <bug_when>2011-11-29 14:17:07 -0500</bug_when>
    <thetext>Ok, I buy the argument that since this is a source annotation that won&apos;t be retained at runtime, we should be able to use these annotations in our source without adding a JDT dependency in our bundles. So, the current name is ok with me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033760</commentid>
    <comment_count>7</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-11-30 04:36:27 -0500</bug_when>
    <thetext>Kim, is there anything else to do than adding it to the feature and the map file?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033820</commentid>
    <comment_count>8</comment_count>
    <who name="Kim Moir">kim.moir</who>
    <bug_when>2011-11-30 07:49:57 -0500</bug_when>
    <thetext>That should do it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033845</commentid>
    <comment_count>9</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-11-30 08:11:25 -0500</bug_when>
    <thetext>(In reply to comment #7)
&gt; Kim, is there anything else to do than adding it to the feature and the map
&gt; file?

OK, then I can take care of this myself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033853</commentid>
    <comment_count>10</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2011-11-30 08:26:40 -0500</bug_when>
    <thetext>The feature and the map file have been updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2033931</commentid>
    <comment_count>11</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2011-11-30 10:28:02 -0500</bug_when>
    <thetext>(In reply to comment #10)
&gt; The feature and the map file have been updated.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2034523</commentid>
    <comment_count>12</comment_count>
    <who name="Kim Moir">kim.moir</who>
    <bug_when>2011-12-01 11:05:12 -0500</bug_when>
    <thetext>The jdt.annotation.source bundle is missing the license files.  Please add them and update the build.properties.  From N20111130-2000

Plugin directory missing required files: /buildtest/N20111130-2000/eclipse-testing/test-eclipse/eclipse/plugins/org.eclipse.jdt.annotation.source_1.0.0.N20111130-2000.jar;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2034539</commentid>
    <comment_count>13</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2011-12-01 11:23:15 -0500</bug_when>
    <thetext>(In reply to comment #12)
&gt; The jdt.annotation.source bundle is missing the license files.  Please add them
&gt; and update the build.properties.  From N20111130-2000

Thanks, I&apos;ve added the about.html to the source build.

commit 476fcf718e0e7f9c1d93eac18e530f17ac58b00f</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>