<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>417659</bug_id>
          
          <creation_ts>2013-09-19 22:23:00 -0400</creation_ts>
          <short_desc>[dom][ast][1.8] test failures - ast structure - when debug tracing is on</short_desc>
          <delta_ts>2013-11-25 23:58:18 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Manoj Palat Away Until May 11 2015">manpalat</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2309057</commentid>
    <comment_count>0</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-19 22:23:40 -0400</bug_when>
    <thetext>Following tests fail when the following debug options are on:

org.eclipse.jdt.core/debug/dom/ast=true
org.eclipse.jdt.core/debug/dom/ast/throw= true
org.eclipse.jdt.core/debug/dom/ast/rewrite = true

The failures are listed below:

TypeAnnotationsConverterTests : test0003, test0004, test0005, test0008.
ASTConverter18Test : test0004, test0006, test0015, test399794.
ASTRewritingMethodDeclTest: testListInserts(JLS8), TestMethodReturnTypeChanges2_only_2(
JLS2),TestMethodReturnTypeChanges_only_2 (JLS2).
ASTRewritingTypeAnnotationsTest: testClassInheritenceAnnotations(JLS8).
ASTRewritingReferenceExpressionsTest:
4 failures testRE_test00{1,3,4,5}_since_8


This may be converted to an umbrella bug for better tracking if the patches are grouped for particular sets.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310539</commentid>
    <comment_count>1</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-24 20:05:37 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #0)
&gt; ASTRewritingMethodDeclTest: testListInserts(JLS8),
&gt; 4 failures testRE_test00{1,3,4,5}_since_8
5 rewrite failures listed above are fixed via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=b42e8d4e3737175b925c20ff2d83cccd857d4944</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310633</commentid>
    <comment_count>2</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-25 05:38:48 -0400</bug_when>
    <thetext>
The following were addressed as part of bug 413569 fix
TypeAnnotationsConverterTests : test0008.
ASTConverter18Test :test0015, test399794.

currently these are the remaining failures:

TypeAnnotationsConverterTests : test0003, test0004, test0005.
ASTConverter18Test : test0004, test0006.
ASTRewritingMethodDeclTest: TestMethodReturnTypeChanges2_only_2(JLS2), TestMethodReturnTypeChanges_only_2 (JLS2).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310659</commentid>
    <comment_count>3</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-09-25 06:28:35 -0400</bug_when>
    <thetext>Just to reduce confusion: The commit message for http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=b3031b3455034eac76b444fd20cbebeea6a2f5ff says it&apos;s for this bug, but the commit is really for bug 413569 comment 22:
[1.8][dom ast] AST for annotated multi-dimensional array type is not well-formed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310661</commentid>
    <comment_count>4</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-09-25 06:34:16 -0400</bug_when>
    <thetext>&gt; org.eclipse.jdt.core/debug/dom/ast/rewrite

Note that not all of these are necessarily real bugs (but all the fixes from comment 1 are indeed good).

Once the other tests are green, we should add this to AbstractASTTests to enable the first two options out of the box:

	public void setUpSuite() throws Exception {
		super.setUpSuite();
		
		SourceRangeVerifier.DEBUG = true;
		SourceRangeVerifier.DEBUG_THROW = true;
	}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2310663</commentid>
    <comment_count>5</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-09-25 06:37:34 -0400</bug_when>
    <thetext>(In reply to Markus Keller from comment #3)
&gt; Just to reduce confusion: The commit message for
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
&gt; ?id=b3031b3455034eac76b444fd20cbebeea6a2f5ff says it&apos;s for this bug, but the
&gt; commit is really for bug 413569 comment 22:
&gt; [1.8][dom ast] AST for annotated multi-dimensional array type is not
&gt; well-formed

Oops.. Thanks for correcting this, Markus.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315951</commentid>
    <comment_count>6</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-10-08 23:14:24 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #2)
&gt; test0006.

Issue captured in bug 418979</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2318775</commentid>
    <comment_count>7</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-10-16 06:26:22 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #2)

&gt; currently these are the remaining failures:
&gt; 
&gt; TypeAnnotationsConverterTests : test0003, test0004, test0005.
&gt; ASTConverter18Test : test0004, test0006.
&gt; ASTRewritingMethodDeclTest: TestMethodReturnTypeChanges2_only_2(JLS2),
&gt; TestMethodReturnTypeChanges_only_2 (JLS2).

Temporarily disabled these tests via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=a38d26ea4f2f03195744026af44f070900d21cea</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2319426</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-10-17 07:29:48 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #7)
&gt; (In reply to Manoj Palat from comment #2)
&gt; 
&gt; &gt; currently these are the remaining failures:
&gt; &gt; 
&gt; &gt; TypeAnnotationsConverterTests : test0003, test0004, test0005.
&gt; &gt; ASTConverter18Test : test0004, test0006.
&gt; &gt; ASTRewritingMethodDeclTest: TestMethodReturnTypeChanges2_only_2(JLS2),
&gt; &gt; TestMethodReturnTypeChanges_only_2 (JLS2).
&gt; 
&gt; Temporarily disabled these tests via
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
&gt; ?h=BETA_JAVA8&amp;id=a38d26ea4f2f03195744026af44f070900d21cea

Another bunch of tests Manoj missed are disabled here:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=d18a6738cbd421cd821f056cabd3de07c564f224

Please remember to reenable after the fix. TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327239</commentid>
    <comment_count>9</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-06 10:44:26 -0500</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #8)

&gt; Please remember to reenable after the fix. TIA.
TypeBindingTests308.java:test016 enabled via commit http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=2077a29bc8cfe42c01e5c07aa5d0c90e2eceb36b

test018 and test020 pending in TypeBindingTests308.java.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327581</commentid>
    <comment_count>10</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-07 07:53:29 -0500</bug_when>
    <thetext>(In reply to Manoj Palat from comment #9)

&gt; TypeBindingTests308.java:test016 enabled via commit ...

which actually fixed the following three tests as well.
TypeAnnotationsConverterTests : test0003, test0004, test0005.

Enabled the above tests and fixed TypeBindingTests308.java:test018 via commit http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=ba2b33c0750d6d7311c1eadcadc15015d0ae8f36

Following Tests have the same issue as listed in bug 418979 comment 4
ASTConverter18Test : test0006
TypeBindingTests308 : test020

Tests to be tracked in this bug is listed below:
ASTConverter18Test : test0004.
ASTRewritingMethodDeclTest: TestMethodReturnTypeChanges2_only_2(JLS2), TestMethodReturnTypeChanges_only_2 (JLS2).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2334325</commentid>
    <comment_count>11</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-11-25 23:58:18 -0500</bug_when>
    <thetext>(In reply to Manoj Palat from comment #10)

&gt; Tests to be tracked in this bug is listed below:
&gt; ASTConverter18Test : test0004.
&gt; ASTRewritingMethodDeclTest: TestMethodReturnTypeChanges2_only_2(JLS2),
&gt; TestMethodReturnTypeChanges_only_2 (JLS2).

Fixed via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=bea7b508525f70d680963772996546f2bcf8018f</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>