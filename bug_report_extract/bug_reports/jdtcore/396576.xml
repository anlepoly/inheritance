<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>396576</bug_id>
          
          <creation_ts>2012-12-14 01:16:00 -0500</creation_ts>
          <short_desc>[1.8] Implement AST Rewrite extended dimensions</short_desc>
          <delta_ts>2013-02-20 04:51:35 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          <dependson>391895</dependson>
          <blocked>398940</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Jay Arthanareeswaran">jarthana</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2194447</commentid>
    <comment_count>0</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-12-14 01:16:45 -0500</bug_when>
    <thetext>AST/DOM support for extended dimensions are being added via bug 391895.
This bug is to track the AST rewrite part for the extended dimensions for SingleVariableDeclaration and VariableDeclarationFragment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2207828</commentid>
    <comment_count>1</comment_count>
      <attachid>226115</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-25 11:34:58 -0500</bug_when>
    <thetext>Created attachment 226115
WIP

Only the the ast rewrite flattener part. Originally part of fix for bug 391895 but being moved here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2213495</commentid>
    <comment_count>2</comment_count>
      <attachid>226689</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-07 06:34:52 -0500</bug_when>
    <thetext>Created attachment 226689
Updated patch

Patch with tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215135</commentid>
    <comment_count>3</comment_count>
      <attachid>226893</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-11 23:20:45 -0500</bug_when>
    <thetext>Created attachment 226893
Updated patch

In the previous patch, I had to make some changes around thrown exception types to stop my tests from failing. Now that fix for bug 395658 covers that, I had removed that changes from this patch.

The patch also includes tests.

Markus, the tests I have added are specifically written for JLS8. Please let me know what you said in bug 395658, comment #12 applies for these too. Also let me know if we write things in a different way to accommodate what you suggested there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2216839</commentid>
    <comment_count>4</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-02-14 09:54:37 -0500</bug_when>
    <thetext>(In reply to comment #3)
I didn&apos;t test the patch, but a cursory look didn&apos;t reveal problems in the implementations.

After bug 395658 comment 18/19 is done, the tests don&apos;t need the createAST8(..) method any more, but should use the infrastructure to only run for JLS8 and later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218380</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-19 01:39:44 -0500</bug_when>
    <thetext>(In reply to comment #4)
&gt; After bug 395658 comment 18/19 is done, the tests don&apos;t need the
&gt; createAST8(..) method any more, but should use the infrastructure to only
&gt; run for JLS8 and later.

Markus, I have updated the updated proposed framework changes to bug 395658. I intend release only the fix first for this bug, which is required for all tests to be passing with the new framework in place. Once framework is in place, I will alter the new tests accordingly and release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218591</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-19 09:25:26 -0500</bug_when>
    <thetext>(In reply to comment #4)
&gt; (In reply to comment #3)
&gt; I didn&apos;t test the patch, but a cursory look didn&apos;t reveal problems in the
&gt; implementations.

Thanks, Markus. Apart from the unit tests, I also tested a bit with code refactoring. I couldn&apos;t test the annotations rewrite part, but I can confirm most scenarios around extended dimensions are working as expected, such as method signature change, parameter change/shuffling, rename of method/variable/fragment etc.

Only existing issue I came across is, there doesn&apos;t seem to be a way to alter just the extended dimensions. Any change to the dimensions moves all the extended dimensions to the type. For e.g.

int[] i [][]; becomes int[][][] i;

and public int [] foo() [][]{ return null;}
becomes public int[][] foo(){ return null;}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218677</commentid>
    <comment_count>7</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-02-19 10:52:31 -0500</bug_when>
    <thetext>Yes, Change Method Signature moves all extra dimensions to the parameter type. We didn&apos;t want to complicate the UI just to support an obsolete notation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218751</commentid>
    <comment_count>8</comment_count>
      <attachid>227269</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-19 11:55:01 -0500</bug_when>
    <thetext>Created attachment 227269
Updated tests

I have tweaked the tests to include changes to throws section of a method declaration with extended dimensions.

And I have released the fix alone via the following commit. The commit includes few refactoring changes since the last patch.

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=073c195d4829bd3ee6e06c1d3c0bfc4a1c7046ee</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2219130</commentid>
    <comment_count>9</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-20 04:51:35 -0500</bug_when>
    <thetext>I have released the tests also into BETA_JAVA:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=694668a21861591196de0e8883d136f0c4cf5c1d

I have also hooked the ASTRewritingTest into RunAllJava8Tests.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>226115</attachid>
            <date>2013-01-25 11:34:00 -0500</date>
            <delta_ts>2013-02-07 06:34:52 -0500</delta_ts>
            <desc>WIP</desc>
            <filename>Fix-for-bug-396576.patch</filename>
            <type>text/plain</type>
            <size>3035</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3Jp
dGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhDQppbmRleCBjZWYwMzAxLi5iZjExZWVhIDEwMDY0
NA0KLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQ0KKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdy
aXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQ0KQEAgLTIyNiw5ICsyMjYsMTkgQEANCiAJcHVi
bGljIGJvb2xlYW4gdmlzaXQoQXJyYXlUeXBlIG5vZGUpIHsNCiAJCWdldENoaWxkTm9kZShub2Rl
LCBBcnJheVR5cGUuQ09NUE9ORU5UX1RZUEVfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsNCiAJCWlm
IChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsNCi0JCQl2aXNpdExpc3Qo
bm9kZSwgQXJyYXlUeXBlLkFOTk9UQVRJT05TX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZignICcp
LCBVdGlsLkVNUFRZX1NUUklORywgU3RyaW5nLnZhbHVlT2YoJyAnKSk7DQorCQkJdmlzaXRMaXN0
KG5vZGUsIEFycmF5VHlwZS5BTk5PVEFUSU9OU19QUk9QRVJUWSwgU3RyaW5nLnZhbHVlT2YoJyAn
KSwgVXRpbC5FTVBUWV9TVFJJTkcsIFV0aWwuRU1QVFlfU1RSSU5HKTsNCiAJCX0NCiAJCXRoaXMu
cmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5MUy0xJA0KKwkJcmV0dXJuIGZhbHNlOw0KKwl9
DQorDQorCXB1YmxpYyBib29sZWFuIHZpc2l0KERpbWVuc2lvblR5cGUgbm9kZSkgew0KKwkJdmlz
aXRMaXN0KG5vZGUsIEFycmF5VHlwZS5BTk5PVEFUSU9OU19QUk9QRVJUWSwgU3RyaW5nLnZhbHVl
T2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcsIFV0aWwuRU1QVFlfU1RSSU5HKTsNCisJCXRoaXMu
cmVzdWx0LmFwcGVuZCgiWyIpOyAvLyROT04tTkxTLTEkDQorCQlpZiAobm9kZS5leHByZXNzaW9u
KCkgIT0gbnVsbCkgew0KKwkJCW5vZGUuZXhwcmVzc2lvbigpLmFjY2VwdCh0aGlzKTsNCisJCX0N
CisJCXRoaXMucmVzdWx0LmFwcGVuZCgiXSIpOyAvLyROT04tTkxTLTEkDQogCQlyZXR1cm4gZmFs
c2U7DQogCX0NCiANCkBAIC03ODgsOSArNzk4LDEzIEBADQogCQl9DQogCQl0aGlzLnJlc3VsdC5h
cHBlbmQoJyAnKTsNCiAJCWdldENoaWxkTm9kZShub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0
aW9uLk5BTUVfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsNCi0JCWludCBleHRyYURpbWVuc2lvbnM9
IGdldEludEF0dHJpYnV0ZShub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJ
TUVOU0lPTlNfUFJPUEVSVFkpOw0KLQkJZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lv
bnM7IGkrKykgew0KLQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5MUy0xJA0K
KwkJaWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA+PSBBU1QuSkxTOCkgew0KKwkJCXZpc2l0
TGlzdChub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9UWVBF
U19QUk9QRVJUWSwgU3RyaW5nLnZhbHVlT2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcsIFV0aWwu
RU1QVFlfU1RSSU5HKTsNCisJCX0gZWxzZSB7DQorCQkJaW50IGV4dHJhRGltZW5zaW9ucz0gZ2V0
SW50QXR0cmlidXRlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uRVhUUkFfRElNRU5T
SU9OU19QUk9QRVJUWSk7DQorCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lvbnM7
IGkrKykgew0KKwkJCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQNCisJ
CQl9DQogCQl9DQogCQlBU1ROb2RlIGluaXRpYWxpemVyPSBnZXRDaGlsZE5vZGUobm9kZSwgU2lu
Z2xlVmFyaWFibGVEZWNsYXJhdGlvbi5JTklUSUFMSVpFUl9QUk9QRVJUWSk7DQogCQlpZiAoaW5p
dGlhbGl6ZXIgIT0gbnVsbCkgew0KQEAgLTEwMzMsOSArMTA0NywxMyBAQA0KIAkgKi8NCiAJcHVi
bGljIGJvb2xlYW4gdmlzaXQoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IG5vZGUpIHsNCiAJ
CWdldENoaWxkTm9kZShub2RlLCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuTkFNRV9QUk9Q
RVJUWSkuYWNjZXB0KHRoaXMpOw0KLQkJaW50IGV4dHJhRGltZW5zaW9ucz0gZ2V0SW50QXR0cmli
dXRlKG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05TX1BS
T1BFUlRZKTsNCi0JCWZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKyspIHsN
Ci0JCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQNCisJCWlmIChub2Rl
LmdldEFTVCgpLmFwaUxldmVsKCkgPj0gQVNULkpMUzgpIHsNCisJCQl2aXNpdExpc3Qobm9kZSwg
VmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LkVYVFJBX0RJTUVOU0lPTl9UWVBFU19QUk9QRVJU
WSwgU3RyaW5nLnZhbHVlT2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcsIFV0aWwuRU1QVFlfU1RS
SU5HKTsNCisJCX0gZWxzZSB7DQorCQkJaW50IGV4dHJhRGltZW5zaW9ucz0gZ2V0SW50QXR0cmli
dXRlKG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05TX1BS
T1BFUlRZKTsNCisJCQlmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7
DQorCQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5MUy0xJA0KKwkJCX0NCiAJ
CX0NCiAJCUFTVE5vZGUgaW5pdGlhbGl6ZXI9IGdldENoaWxkTm9kZShub2RlLCBWYXJpYWJsZURl
Y2xhcmF0aW9uRnJhZ21lbnQuSU5JVElBTElaRVJfUFJPUEVSVFkpOw0KIAkJaWYgKGluaXRpYWxp
emVyICE9IG51bGwpIHs=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>226689</attachid>
            <date>2013-02-07 06:34:00 -0500</date>
            <delta_ts>2013-02-11 23:20:45 -0500</delta_ts>
            <desc>Updated patch</desc>
            <filename>Fix-for-bug-396576.patch</filename>
            <type>text/plain</type>
            <size>32039</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9k
RGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0
aG9kRGVjbFRlc3QuamF2YQppbmRleCAxMTM2NDJhLi5kNWJlNzc0IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5q
YXZhCkBAIC0yODgxLDYgKzI4ODEsMTM3IEBACiAJCWJ1Zi5hcHBlbmQoIn1cbiIpOwogCQlhc3Nl
cnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CiAJfQorCXB1YmxpYyB2b2lk
IHRlc3RFeHRyYURpbXdpdGhBbm5vdGF0aW9ucygpIHRocm93cyBFeGNlcHRpb24geworCQlJUGFj
a2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJhZ21l
bnQoInRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5n
QnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5h
cHBlbmQoInB1YmxpYyBhYnN0cmFjdCBjbGFzcyBFIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
cHVibGljIE9iamVjdCBmb28xKClbXSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVy
biBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMigpW10g
eyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZv
bzMoKSBAQW5ub3QxIFtdIEBBbm5vdDIgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzQoKUBBbm5vdDEgW10gQEFubm90MiBbXSB0aHJv
d3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYu
YXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb281KCkgQEFubm90MSBbXSAgIEBBbm5vdDIgW10g
eyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZv
bzYoaW50IGkpICBAQW5ub3QxIFtdIEBBbm5vdDIgW10gdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4
Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBP
YmplY3QgZm9vNyhpbnQgaSkgQEFubm90MSBbXSAgQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9
XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsgCisJCWJ1
Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEu
bGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIp
OworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CiAKKwkJSUNvbXBpbGF0
aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJFLmphdmEiLCBidWYudG9T
dHJpbmcoKSwgZmFsc2UsIG51bGwpOworCQlDb21waWxhdGlvblVuaXQgYXN0Um9vdD0gY3JlYXRl
QVNUOChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9v
dC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisJCVR5cGVEZWNsYXJh
dGlvbiB0eXBlPSBmaW5kVHlwZURlY2xhcmF0aW9uKGFzdFJvb3QsICJFIik7CiAKKwkJeworCQkJ
TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUs
ICJmb28xIik7CisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhvZERlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZP
U19QUk9QRVJUWSk7CisJCQlFeHRyYURpbWVuc2lvbiBkaW09IGFzdC5uZXdFeHRyYURpbWVuc2lv
bigpOworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2Vy
QW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiQW5ub3QxIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90
YXRpb24pOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAxLCBudWxsKTsKKworCQkJZGlt
PSBhc3QubmV3RXh0cmFEaW1lbnNpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdN
YXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5u
ZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2Vy
QW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDIsIG51bGwpOworCQl9
CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJh
dGlvbih0eXBlLCAiZm9vMiIpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUu
Z2V0TGlzdFJld3JpdGUobWV0aG9kRGVjbCwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFfRElNRU5T
SU9OX0lORk9TX1BST1BFUlRZKTsKKworCQkJRXh0cmFEaW1lbnNpb24gZGltPSBhc3QubmV3RXh0
cmFEaW1lbnNpb24oKTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0gYXN0
Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUo
YXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MSIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZCht
YXJrZXJBbm5vdGF0aW9uKTsKKworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAxLCBudWxs
KTsKKwkJfQorCQl7CisJCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9k
RGVjbGFyYXRpb24odHlwZSwgImZvbzMiKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSBy
ZXdyaXRlLmdldExpc3RSZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhvZERlY2xhcmF0aW9uLkVYVFJB
X0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gYXN0
Lm5ld0V4dHJhRGltZW5zaW9uKCk7CisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRp
b249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5
cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMo
KS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdN
YXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5u
ZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2Vy
QW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDEsIG51bGwpOworCQl9
CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJh
dGlvbih0eXBlLCAiZm9vNCIpOworCQkJRXh0cmFEaW1lbnNpb24gZGltPSAoRXh0cmFEaW1lbnNp
b24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgwKTsKKwkJCUxpc3RSZXdy
aXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNp
b24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFu
bm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9u
LnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlsaXN0UmV3cml0
ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBudWxsKTsKKworCQkJZGltPSAoRXh0cmFE
aW1lbnNpb24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgxKTsKKwkJCWxp
c3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5O
T1RBVElPTlNfUFJPUEVSVFkpOworCisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2Vy
QW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiQW5ub3QxIikpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQobWFya2VyQW5ub3Rh
dGlvbiwgMSwgbnVsbCk7CisJCX0KKwkJeworCQkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVj
bD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb281Iik7CisJCQlFeHRyYURpbWVuc2lv
biBkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURpbWVuc2lvbkluZm9zKCku
Z2V0KDApOworCQkJQW5ub3RhdGlvbiBhbm5vdD0gKEFubm90YXRpb24pIGRpbS5hbm5vdGF0aW9u
cygpLmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlz
dFJld3JpdGUucmVtb3ZlKGFubm90LCBudWxsKTsKKworCQkJZGltPSAoRXh0cmFEaW1lbnNpb24p
IG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgxKTsKKwkJCWxpc3RSZXdyaXRl
PSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNf
UFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoYW5ub3QsIDEsIG51bGwpOworCQl9
CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJh
dGlvbih0eXBlLCAiZm9vNiIpOworCQkJRXh0cmFEaW1lbnNpb24gZGltPSAoRXh0cmFEaW1lbnNp
b24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgwKTsKKwkJCUFubm90YXRp
b24gYW5ub3Q9IChBbm5vdGF0aW9uKSBkaW0uYW5ub3RhdGlvbnMoKS5nZXQoMCk7CisJCQlMaXN0
UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkaW0sIEV4dHJhRGlt
ZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZShhbm5v
dCwgbnVsbCk7CisKKwkJCWRpbT0gKEV4dHJhRGltZW5zaW9uKSBtZXRob2REZWNsLmV4dHJhRGlt
ZW5zaW9uSW5mb3MoKS5nZXQoMSk7CisJCQlhbm5vdD0gKEFubm90YXRpb24pIGRpbS5hbm5vdGF0
aW9ucygpLmdldCgwKTsKKwkJCWxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRp
bSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUu
cmVtb3ZlKGFubm90LCBudWxsKTsKKwkJfQorCQl7CisJCQlNZXRob2REZWNsYXJhdGlvbiBtZXRo
b2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzciKTsKKwkJCUxpc3RSZXdy
aXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhv
ZERlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisJCQlFeHRyYURp
bWVuc2lvbiBkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURpbWVuc2lvbklu
Zm9zKCkuZ2V0KDApOworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGRpbSwgbnVsbCk7CisJCQlkaW09
IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDEp
OworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGRpbSwgbnVsbCk7CisJCX0KKworCQlTdHJpbmcgcHJl
dmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKwkJYnVmPSBuZXcgU3RyaW5nQnVm
ZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
aW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBl
bmQoInB1YmxpYyBhYnN0cmFjdCBjbGFzcyBFIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVi
bGljIE9iamVjdCBmb28xKClbXSBAQW5ub3QxIFtdIEBBbm5vdDIgW10gdGhyb3dzIEFycmF5U3Rv
cmVFeGNlcHRpb24geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJs
aWMgT2JqZWN0IGZvbzIoKVtdIEBBbm5vdDEgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1
Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzMoKSBAQW5ub3QxIFtdIEBBbm5vdDEgQEFu
bm90MiBbXSBAQW5ub3QyIFtdIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgcHVibGljIE9iamVjdCBmb280KClAQW5ub3QyIEBBbm5vdDEgW10gQEFubm90MiBAQW5ub3Qx
IFtdIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24geyByZXR1cm4gbnVsbDsgfVxuIik7
CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzUoKSAgW10gICBAQW5ub3QyIEBB
bm5vdDEgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMg
T2JqZWN0IGZvbzYoaW50IGkpICAgW10gIFtdIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp
b24geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0
IGZvbzcoaW50IGkpIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1l
bnRUeXBlLlRZUEVfVVNFfSlcbiIpOyAKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEg
e31cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVl
PSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2Ug
QW5ub3QyIHt9XG4iKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5n
KCkpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdU
ZXN0LmphdmEKaW5kZXggYTRkODkyZC4uNzA3NTRjZiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3Jp
dGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUv
ZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEKQEAgLTEsOSArMSwxMyBAQAogLyoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMiBJQk0gQ29ycG9y
YXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9y
YXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBh
bmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRl
ciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2gg
YWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0
dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYxMC5odG1sCisgKgorICogVGhpcyBpcyBh
biBpbXBsZW1lbnRhdGlvbiBvZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3Bl
ZCB1bmRlciB0aGUgSmF2YQorICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUg
YXZhaWxhYmxlIGZvciB0ZXN0aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBU
aGUgY29kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBK
Q1AuCiAgKgogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRp
YWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgpAQCAtMTE1LDYgKzExOSw5IEBACiAJcHJvdGVjdGVk
IENvbXBpbGF0aW9uVW5pdCBjcmVhdGVBU1QzKElDb21waWxhdGlvblVuaXQgY3UsIGJvb2xlYW4g
c3RhdGVtZW50c1JlY292ZXJ5KSB7CiAJCXJldHVybiBjcmVhdGVBU1QoSkxTM19JTlRFUk5BTCwg
Y3UsIHN0YXRlbWVudHNSZWNvdmVyeSk7CiAJfQorCXByb3RlY3RlZCBDb21waWxhdGlvblVuaXQg
Y3JlYXRlQVNUOChJQ29tcGlsYXRpb25Vbml0IGN1KSB7CisJCXJldHVybiBjcmVhdGVBU1QoQVNU
LkpMUzgsIGN1LCBmYWxzZSk7CisJfQogCXByb3RlY3RlZCBDb21waWxhdGlvblVuaXQgY3JlYXRl
QVNUKGludCBKTFNMZXZlbCwgSUNvbXBpbGF0aW9uVW5pdCBjdSwgYm9vbGVhbiBzdGF0ZW1lbnRz
UmVjb3ZlcnkpIHsKIAkJcmV0dXJuIGNyZWF0ZUFTVChKTFNMZXZlbCwgY3UsIGZhbHNlLCBzdGF0
ZW1lbnRzUmVjb3ZlcnkpOwogCX0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRl
c3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJp
bmcvQVNUUmV3cml0aW5nVHlwZURlY2xUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50
ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmli
aW5nL0FTVFJld3JpdGluZ1R5cGVEZWNsVGVzdC5qYXZhCmluZGV4IGYyNmQ1YjEuLmUxMjY0ZDEg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nVHlwZURl
Y2xUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdU
eXBlRGVjbFRlc3QuamF2YQpAQCAtMTY5Myw3ICsxNjkzLDIwOSBAQAogCQlhc3NlcnRFcXVhbFN0
cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CiAKIAl9CisJLy8gaHR0cHM6Ly9idWdzLmVj
bGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NjU3NgorCXB1YmxpYyB2b2lkIHRlc3RW
YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnRXaXRoQW5ub3QoKSB0aHJvd3MgRXhjZXB0aW9uIHsK
KwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRlUGFja2Fn
ZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3
IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1
Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOwor
CQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1
YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgICAgIGludCBpLCBqLCBr
ID0gMCwgeCwgeSBbXSBbXSBbXSwgeiBAQW5ub3QxIFtdLCB6eiBAQW5ub3QyIEBBbm5vdDJbXSA9
IHswLCAxfTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1c
biIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7
RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5u
b3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2
YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJm
YWNlIEFubm90MiB7fVxuIik7CisJCUlDb21waWxhdGlvblVuaXQgY3U9IHBhY2sxLmNyZWF0ZUNv
bXBpbGF0aW9uVW5pdCgiRS5qYXZhIiwgYnVmLnRvU3RyaW5nKCksIGZhbHNlLCBudWxsKTsKKwkJ
Q29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVDgoY3UpOworCQlBU1RSZXdyaXRlIHJl
d3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFzdFJvb3QuZ2V0QVNUKCkpOworCQlBU1QgYXN0PSBh
c3RSb290LmdldEFTVCgpOwogCisJCWFzc2VydFRydWUoIlBhcnNlIGVycm9ycyIsIChhc3RSb290
LmdldEZsYWdzKCkgJiBBU1ROb2RlLk1BTEZPUk1FRCk9PSAwKTsKKwkJVHlwZURlY2xhcmF0aW9u
IHR5cGU9IGZpbmRUeXBlRGVjbGFyYXRpb24oYXN0Um9vdCwgIkUiKTsKKworCQlNZXRob2REZWNs
YXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbyIpOwor
CQlCbG9jayBibG9jaz0gbWV0aG9kRGVjbC5nZXRCb2R5KCk7CisJCUxpc3Qgc3RhdGVtZW50cz0g
YmxvY2suc3RhdGVtZW50cygpOworCQlhc3NlcnRUcnVlKCJOdW1iZXIgb2Ygc3RhdGVtZW50cyBu
b3QgMSIsIHN0YXRlbWVudHMuc2l6ZSgpPT0gMSk7CisKKwkJVmFyaWFibGVEZWNsYXJhdGlvblN0
YXRlbWVudCB2YXJpYWJsZURlY2xTdGF0ZW1lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVt
ZW50KSBzdGF0ZW1lbnRzLmdldCgwKTsKKwkJTGlzdCBmcmFnbWVudHM9IHZhcmlhYmxlRGVjbFN0
YXRlbWVudC5mcmFnbWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSgiTnVtYmVyIG9mIGZyYWdtZW50cyBu
b3QgNyIsIGZyYWdtZW50cy5zaXplKCk9PSA3KTsKKworCQl7IC8vIHJlbmFtZSB2YXIsIGFkZCBk
aW1lbnNpb24gd2l0aCBhbm5vdGF0aW9ucworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
IGZyYWdtZW50PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSBmcmFnbWVudHMuZ2V0KDAp
OworCQkJQVNUTm9kZSBuYW1lPSBhc3QubmV3U2ltcGxlTmFtZSgiYSIpOworCQkJcmV3cml0ZS5y
ZXBsYWNlKGZyYWdtZW50LmdldE5hbWUoKSwgbmFtZSwgbnVsbCk7CisKKwkJCUxpc3RSZXdyaXRl
IGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGZyYWdtZW50LCBWYXJpYWJsZURl
Y2xhcmF0aW9uRnJhZ21lbnQuRVhUUkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCUV4
dHJhRGltZW5zaW9uIGRpbT0gYXN0Lm5ld0V4dHJhRGltZW5zaW9uKCk7CisJCQlNYXJrZXJBbm5v
dGF0aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQlt
YXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7
CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisKKwkJCW1hcmtl
ckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0
aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5u
b3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRB
dChkaW0sIDAsIG51bGwpOworCQl9CisJCXsgLy8gYWRkIGluaXRpYWxpemVyCisJCQlWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21l
bnQpIGZyYWdtZW50cy5nZXQoMSk7CisJCQlhc3NlcnRUcnVlKCJIYXMgaW5pdGlhbGl6ZXIiLCBm
cmFnbWVudC5nZXRJbml0aWFsaXplcigpPT0gbnVsbCk7CisJCQlFeHByZXNzaW9uIGluaXRpYWxp
emVyPSBhc3QubmV3TnVtYmVyTGl0ZXJhbCgiMSIpOworCQkJcmV3cml0ZS5zZXQoZnJhZ21lbnQs
IFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5JTklUSUFMSVpFUl9QUk9QRVJUWSwgaW5pdGlh
bGl6ZXIsIG51bGwpOworCQl9CisJCXsgLy8gcmVtb3ZlIGluaXRpYWxpemVyIGFuZCBhZGQgZXh0
cmEgZGltZW5zaW9ucyB3aXRoIGFubm90YXRpb25zCisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJh
Z21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5n
ZXQoMik7CisJCQlhc3NlcnRUcnVlKCJIYXMgbm8gaW5pdGlhbGl6ZXIiLCBmcmFnbWVudC5nZXRJ
bml0aWFsaXplcigpICE9IG51bGwpOworCQkJcmV3cml0ZS5yZW1vdmUoZnJhZ21lbnQuZ2V0SW5p
dGlhbGl6ZXIoKSwgbnVsbCk7CisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRl
LmdldExpc3RSZXdyaXRlKGZyYWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuRVhU
UkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gYXN0
Lm5ld0V4dHJhRGltZW5zaW9uKCk7CisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRp
b249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5
cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMo
KS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisJCQkKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5u
ZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFz
dC5uZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFy
a2VyQW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDAsIG51bGwpOwor
CQl9CisJCXsgLy8gYWRkIGRpbWVuc2lvbiwgYWRkIGluaXRpYWxpemVyCisJCQlWYXJpYWJsZURl
Y2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQp
IGZyYWdtZW50cy5nZXQoMyk7CisJCQlhc3NlcnRUcnVlKCJIYXMgaW5pdGlhbGl6ZXIiLCBmcmFn
bWVudC5nZXRJbml0aWFsaXplcigpPT0gbnVsbCk7CisJCQlFeHByZXNzaW9uIGluaXRpYWxpemVy
PSBhc3QubmV3TnVsbExpdGVyYWwoKTsKKwkJCXJld3JpdGUuc2V0KGZyYWdtZW50LCBWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQuSU5JVElBTElaRVJfUFJPUEVSVFksIGluaXRpYWxpemVyLCBu
dWxsKTsKKworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3Jp
dGUoZnJhZ21lbnQsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05f
SU5GT1NfUFJPUEVSVFkpOworCisJCQlFeHRyYURpbWVuc2lvbiBkaW09IGFzdC5uZXdFeHRyYURp
bWVuc2lvbigpOworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3
TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3Qu
bmV3U2ltcGxlTmFtZSgiQW5ub3QxIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtl
ckFubm90YXRpb24pOworCisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3Rh
dGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFt
ZSgiQW5ub3QyIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24p
OworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAwLCBudWxsKTsKKwkJfQorCQl7IC8vIHJl
bW92ZSBvbmUgZGltZW5zaW9uIGFuZCBhZGQgYW5ub3RhdGlvbnMgZm9yIHRoZSByZXN0IG9mIHRo
ZSBkaW1lbnNpb25zCisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChW
YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoNCk7CisKKwkJCUV4dHJh
RGltZW5zaW9uIGRpbT0gKEV4dHJhRGltZW5zaW9uKSBmcmFnbWVudC5leHRyYURpbWVuc2lvbklu
Zm9zKCkuZ2V0KDEpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlz
dFJld3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlN
YXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9u
KCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJB
bm5vdDEiKSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBu
dWxsKTsKKworCQkJZGltPSAoRXh0cmFEaW1lbnNpb24pIGZyYWdtZW50LmV4dHJhRGltZW5zaW9u
SW5mb3MoKS5nZXQoMik7CisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3Rh
dGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFt
ZSgiQW5ub3QyIikpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGlt
LCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5p
bnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBudWxsKTsKKworCQkJbGlzdFJld3JpdGU9IHJl
d3JpdGUuZ2V0TGlzdFJld3JpdGUoZnJhZ21lbnQsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVu
dC5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUucmVtb3Zl
KChFeHRyYURpbWVuc2lvbikgZnJhZ21lbnQuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgwKSwg
bnVsbCk7CisJCX0KKwkJeyAvLyByZW1vdmUgYSBmcmFnbWVudAorCQkJTGlzdFJld3JpdGUgbGlz
dFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUodmFyaWFibGVEZWNsU3RhdGVtZW50LCBW
YXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LkZSQUdNRU5UU19QUk9QRVJUWSk7CisJCQlWYXJp
YWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJh
Z21lbnQpIGZyYWdtZW50cy5nZXQoNSk7CisJCQlsaXN0UmV3cml0ZS5yZW1vdmUoZnJhZ21lbnQs
IG51bGwpOworCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1YXRlUmV3cml0ZShjdSwgcmV3
cml0ZSk7CisKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2th
Z2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9u
LkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1YmxpYyBjbGFzcyBFIHtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICAgICAgaW50IGEgQEFubm90MSBAQW5ub3QyIFtdLCBqID0gMSwgayBAQW5ub3QxIEBBbm5v
dDIgW10sIHggQEFubm90MSBAQW5ub3QyIFtdID0gbnVsbCwgeSBAQW5ub3QxW10gQEFubm90Mltd
LCB6eiBAQW5ub3QyIEBBbm5vdDJbXSA9IHswLCAxfTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
fVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFu
bm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1
Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEu
bGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIp
OworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CisJCWFzc2VydEVxdWFs
U3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsKKwl9CisKKwkvLyBodHRwczovL2J1Z3Mu
ZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk2NTc2CisJcHVibGljIHZvaWQgdGVz
dFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb25XaXRoQW5ub3RhdGlvbnMoKSB0aHJvd3MgRXhjZXB0
aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VGb2xkZXIuY3JlYXRl
UGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3RyaW5nQnVmZmVyIGJ1
Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7
CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtc
biIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
ICAgIHB1YmxpYyB2b2lkIGZvbyhpbnQgaSwgZmluYWwgaW50W10gaiBAQW5ub3QxIEBBbm5vdDIg
W10sIGludFtdIGsgQEFubm90MSBAQW5ub3QzIFtdIEBBbm5vdDIgQEFubm90MyBbXSwgaW50IGwg
W10pIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIp
OworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxl
bWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3Qx
IHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1
ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNl
IEFubm90MiB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJn
ZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGlu
dGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlJQ29tcGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVh
dGVDb21waWxhdGlvblVuaXQoIkUuamF2YSIsIGJ1Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7
CisJCVN5c3RlbS5vdXQucHJpbnRsbihidWYudG9TdHJpbmcoKSk7CisJCUNvbXBpbGF0aW9uVW5p
dCBhc3RSb290PSBjcmVhdGVBU1Q4KGN1KTsKKwkJQVNUUmV3cml0ZSByZXdyaXRlPSBBU1RSZXdy
aXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgpKTsKKwkJQVNUIGFzdD0gYXN0Um9vdC5nZXRBU1Qo
KTsKKworCQlhc3NlcnRUcnVlKCJQYXJzZSBlcnJvcnMiLCAoYXN0Um9vdC5nZXRGbGFncygpICYg
QVNUTm9kZS5NQUxGT1JNRUQpPT0gMCk7CisJCVR5cGVEZWNsYXJhdGlvbiB0eXBlPSBmaW5kVHlw
ZURlY2xhcmF0aW9uKGFzdFJvb3QsICJFIik7CisJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERl
Y2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vIik7CisJCUxpc3QgYXJndW1lbnRz
PSBtZXRob2REZWNsLnBhcmFtZXRlcnMoKTsKKworCQl7IC8vIGFkZCBtb2RpZmllciwgbW92ZSBl
eHRyYSBkaW1lbnNpb25zIGZyb20gb25lIHZhcmlhYmxlIHRvIGFub3RoZXIKKwkJCVNpbmdsZVZh
cmlhYmxlRGVjbGFyYXRpb24gZGVjbD0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIGFyZ3Vt
ZW50cy5nZXQoMCk7CisJCQlTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uIGRlY2wyPSAoU2luZ2xl
VmFyaWFibGVEZWNsYXJhdGlvbikgYXJndW1lbnRzLmdldCgxKTsKKwkJCUV4dHJhRGltZW5zaW9u
IGRpbT0gKEV4dHJhRGltZW5zaW9uKSBkZWNsMi5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDAp
OworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGVj
bCwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5NT0RJRklFUlMyX1BST1BFUlRZKTsKKwkJCWxp
c3RSZXdyaXRlLmluc2VydEZpcnN0KGFzdC5uZXdNb2RpZmllcihNb2RpZmllci5Nb2RpZmllcktl
eXdvcmQuRklOQUxfS0VZV09SRCksIG51bGwpOworCisJCQlsaXN0UmV3cml0ZT0gcmV3cml0ZS5n
ZXRMaXN0UmV3cml0ZShkZWNsMiwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5FWFRSQV9ESU1F
TlNJT05fSU5GT1NfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGRpbSwgbnVsbCk7
CisJCQlsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkZWNsLCBTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisJCQlsaXN0
UmV3cml0ZS5pbnNlcnRBdChkaW0sIDAsIG51bGwpOworCQl9CisJCXsgLy8gbW92ZSBhbm5vdGF0
aW9ucyBmcm9tIG9uZSBkaW0gdG8gYW5vdGhlcgorCQkJU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
biBkZWNsPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgYXJndW1lbnRzLmdldCgyKTsKKwkJ
CUV4dHJhRGltZW5zaW9uIGRpbTE9IChFeHRyYURpbWVuc2lvbikgZGVjbC5leHRyYURpbWVuc2lv
bkluZm9zKCkuZ2V0KDApOworCQkJRXh0cmFEaW1lbnNpb24gZGltMj0gKEV4dHJhRGltZW5zaW9u
KSBkZWNsLmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQoMSk7CisJCQlBbm5vdGF0aW9uIGFubm90
MT0gKEFubm90YXRpb24pIGRpbTEuYW5ub3RhdGlvbnMoKS5nZXQoMCk7CisJCQlBbm5vdGF0aW9u
IGFubm90Mj0gKEFubm90YXRpb24pIGRpbTIuYW5ub3RhdGlvbnMoKS5nZXQoMCk7CisKKwkJCUxp
c3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbTEsIEV4dHJh
RGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlcGxhY2Uo
YW5ub3QxLCBhbm5vdDIsIG51bGwpOworCisJCQlsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0
UmV3cml0ZShkaW0yLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQls
aXN0UmV3cml0ZS5yZXBsYWNlKGFubm90MiwgYW5ub3QxLCBudWxsKTsKKwkJfQorCQl7IC8vIHJl
bW92ZSBleHRyYSBkaW0KKwkJCVNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24gZGVjbD0gKFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb24pIGFyZ3VtZW50cy5nZXQoMyk7CisJCQlMaXN0UmV3cml0ZSBs
aXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkZWNsLCBTaW5nbGVWYXJpYWJsZURl
Y2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0
ZS5yZW1vdmUoKEV4dHJhRGltZW5zaW9uKSBkZWNsLmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQo
MCksIG51bGwpOworCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1YXRlUmV3cml0ZShjdSwg
cmV3cml0ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNr
YWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlv
bi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbyhmaW5hbCBpbnQgaSBAQW5ub3QxIEBB
bm5vdDIgW10sIGZpbmFsIGludFtdIGosIGludFtdIGsgQEFubm90MiBAQW5ub3QzIFtdIEBBbm5v
dDEgQEFubm90MyBbXSwgaW50IGwpIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJ
CWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24u
VGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQo
IkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5v
dGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYu
YXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxh
bmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlhc3NlcnRFcXVhbFN0
cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQogCiAKIH0KZGlmZiAtLWdpdCBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20v
cmV3cml0ZS9BU1RSZXdyaXRlQW5hbHl6ZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Rv
bS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlQW5h
bHl6ZXIuamF2YQppbmRleCAyNmI3MjNkLi5iYTU1M2NkIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUv
QVNUUmV3cml0ZUFuYWx5emVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVBbmFseXpl
ci5qYXZhCkBAIC0xODE2LDYgKzE4MTYsMTYgQEAKIAkJfQogCX0KIAorCXB1YmxpYyBib29sZWFu
IHZpc2l0KEV4dHJhRGltZW5zaW9uIG5vZGUpIHsKKwkJaWYgKCFoYXNDaGlsZHJlbkNoYW5nZXMo
bm9kZSkpIHsKKwkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7CisJCX0K
KwkJaW50IHBvcyA9IG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpOworCQlpZiAoaXNDaGFuZ2VkKG5v
ZGUsIEV4dHJhRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKSkgeworCQkJcmV3cml0ZU5v
ZGVMaXN0KG5vZGUsIEV4dHJhRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZLCBwb3MsIFV0
aWwuRU1QVFlfU1RSSU5HLCAiICIpOyAvLyROT04tTkxTLTEkCisJCX0KKwkJcmV0dXJuIGZhbHNl
OworCX0KIAogCS8qIChub24tSmF2YWRvYykKIAkgKiBAc2VlIG9yZy5lY2xpcHNlLmpkdC5jb3Jl
LmRvbS5BU1RWaXNpdG9yI3Zpc2l0KE1ldGhvZERlY2xhcmF0aW9uKQpAQCAtMTgyNSw3ICsxODM1
LDggQEAKIAkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4obm9kZSk7CiAJCX0KIAkJ
aW50IHBvcz0gcmV3cml0ZUphdmFkb2Mobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uSkFWQURPQ19Q
Uk9QRVJUWSk7Ci0JCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPT0gSkxTMl9JTlRFUk5B
TCkgeworCQlpbnQgYXBpTGV2ZWwgPSBub2RlLmdldEFTVCgpLmFwaUxldmVsKCk7CisJCWlmIChh
cGlMZXZlbCA9PSBKTFMyX0lOVEVSTkFMKSB7CiAJCQlyZXdyaXRlTW9kaWZpZXJzKG5vZGUsIE1l
dGhvZERlY2xhcmF0aW9uLk1PRElGSUVSU19QUk9QRVJUWSwgcG9zKTsKIAkJfSBlbHNlIHsKIAkJ
CXBvcz0gcmV3cml0ZU1vZGlmaWVyczIobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uTU9ESUZJRVJT
Ml9QUk9QRVJUWSwgcG9zKTsKQEAgLTE4NTEsOSArMTg2MiwyNCBAQAogCiAJCQlwb3M9IGdldFNj
YW5uZXIoKS5nZXRUb2tlbkVuZE9mZnNldChUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVSUEFSRU4s
IHBvcyk7CiAKLQkJCWludCBleHRyYURpbXM9IHJld3JpdGVFeHRyYURpbWVuc2lvbnMobm9kZSwg
SU5URVJOQUxfTUVUSE9EX0VYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHBvcyk7Ci0KLQkJCWJv
b2xlYW4gaGFzRXhjZXB0aW9uQ2hhbmdlcz0gaXNDaGFuZ2VkKG5vZGUsIE1ldGhvZERlY2xhcmF0
aW9uLlRIUk9XTl9FWENFUFRJT05TX1BST1BFUlRZKTsKKwkJCWludCBleHRyYURpbXMgPSAwOwor
CQkJYm9vbGVhbiBoYXNFeGNlcHRpb25DaGFuZ2VzOworCQkJaWYgKGFwaUxldmVsIDwgQVNULkpM
UzgpIHsKKwkJCQlleHRyYURpbXM9IHJld3JpdGVFeHRyYURpbWVuc2lvbnMobm9kZSwgSU5URVJO
QUxfTUVUSE9EX0VYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHBvcyk7CisJCQkJaGFzRXhjZXB0
aW9uQ2hhbmdlcyA9IGlzQ2hhbmdlZChub2RlLCBNZXRob2REZWNsYXJhdGlvbi5USFJPV05fRVhD
RVBUSU9OU19QUk9QRVJUWSk7CisJCQl9IGVsc2UgeworCQkJCWludCBuZXdQb3M7CisJCQkJaWYg
KGlzQ2hhbmdlZChub2RlLCBNZXRob2REZWNsYXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1Nf
UFJPUEVSVFkpKSB7CisJCQkJCW5ld1BvcyA9IHJld3JpdGVOb2RlTGlzdChub2RlLCBNZXRob2RE
ZWNsYXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIHBvcywgIiAiLCAiICIp
OyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKKwkJCQl9IGVsc2UgeworCQkJCQluZXdQb3M9
IGRvVmlzaXQobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFfRElNRU5TSU9OX0lORk9TX1BS
T1BFUlRZLCBwb3MpOworCQkJCX0KKwkJCQlpZiAocG9zICE9IG5ld1BvcykgeworCQkJCQlleHRy
YURpbXMgPSAxOworCQkJCQlwb3MgPSBuZXdQb3M7CisJCQkJfQorCQkJCWhhc0V4Y2VwdGlvbkNo
YW5nZXMgPSBpc0NoYW5nZWQobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uVEhST1dOX0VYQ0VQVElP
Tl9UWVBFU19QUk9QRVJUWSk7CisJCQl9CiAKIAkJCWludCBib2R5Q2hhbmdlS2luZD0gZ2V0Q2hh
bmdlS2luZChub2RlLCBNZXRob2REZWNsYXJhdGlvbi5CT0RZX1BST1BFUlRZKTsKIApAQCAtMTg2
NCw4ICsxODkwLDExIEBACiAJCQkJCWRpbS0tOwogCQkJCX0KIAkJCX0KLQotCQkJcG9zPSByZXdy
aXRlTm9kZUxpc3Qobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uVEhST1dOX0VYQ0VQVElPTlNfUFJP
UEVSVFksIHBvcywgIiB0aHJvd3MgIiwgIiwgIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0y
JAorCQkJaWYgKGFwaUxldmVsIDwgQVNULkpMUzgpIHsKKwkJCQlwb3M9IHJld3JpdGVOb2RlTGlz
dChub2RlLCBNZXRob2REZWNsYXJhdGlvbi5USFJPV05fRVhDRVBUSU9OU19QUk9QRVJUWSwgcG9z
LCAiIHRocm93cyAiLCAiLCAiKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIkCisJCQl9IGVs
c2UgeworCQkJCXBvcz0gcmV3cml0ZU5vZGVMaXN0KG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLlRI
Uk9XTl9FWENFUFRJT05fVFlQRVNfUFJPUEVSVFksIHBvcywgIiB0aHJvd3MgIiwgIiwgIik7IC8v
JE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCQkJfQogCQkJcmV3cml0ZU1ldGhvZEJvZHkobm9k
ZSwgcG9zKTsKIAkJfSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7CiAJCQkvLyBpZ25vcmUKQEAg
LTI4MzYsMTMgKzI4NjUsMTQgQEAKIAkJCXJldHVybiBkb1Zpc2l0VW5jaGFuZ2VkQ2hpbGRyZW4o
bm9kZSk7CiAJCX0KIAkJaW50IHBvcz0gbm9kZS5nZXRTdGFydFBvc2l0aW9uKCk7Ci0JCWlmIChu
b2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPT0gSkxTMl9JTlRFUk5BTCkgeworCQlpbnQgYXBpTGV2
ZWwgPSBub2RlLmdldEFTVCgpLmFwaUxldmVsKCk7CisJCWlmIChhcGlMZXZlbCA9PSBKTFMyX0lO
VEVSTkFMKSB7CiAJCQlyZXdyaXRlTW9kaWZpZXJzKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFy
YXRpb24uTU9ESUZJRVJTX1BST1BFUlRZLCBwb3MpOwogCQl9IGVsc2UgewogCQkJcmV3cml0ZU1v
ZGlmaWVyczIobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5NT0RJRklFUlMyX1BST1BF
UlRZLCBwb3MpOwogCQl9CiAJCXBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLlRZUEVfUFJPUEVSVFkpOwotCQlpZiAobm9kZS5nZXRBU1QoKS5h
cGlMZXZlbCgpID49IEpMUzNfSU5URVJOQUwpIHsKKwkJaWYgKGFwaUxldmVsID49IEpMUzNfSU5U
RVJOQUwpIHsKIAkJCWlmIChpc0NoYW5nZWQobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlv
bi5WQVJBUkdTX1BST1BFUlRZKSkgewogCQkJCWlmIChnZXROZXdWYWx1ZShub2RlLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpLmVxdWFscyhCb29sZWFuLlRSVUUp
KSB7CiAJCQkJCWRvVGV4dEluc2VydChwb3MsICIuLi4iLCBnZXRFZGl0R3JvdXAobm9kZSwgU2lu
Z2xlVmFyaWFibGVEZWNsYXJhdGlvbi5WQVJBUkdTX1BST1BFUlRZKSk7IC8vJE5PTi1OTFMtMSQK
QEAgLTI4NjMsMTggKzI4OTMsMjUgQEAKIAkJfQogCiAJCXBvcz0gcmV3cml0ZVJlcXVpcmVkTm9k
ZShub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLk5BTUVfUFJPUEVSVFkpOwotCQlpbnQg
ZXh0cmFEaW1zPSByZXdyaXRlRXh0cmFEaW1lbnNpb25zKG5vZGUsIElOVEVSTkFMX1ZBUklBQkxF
X0VYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIHBvcyk7Ci0KLQkJaWYgKGV4dHJhRGltcyA+IDAp
IHsKLQkJCWludCBraW5kPSBnZXRDaGFuZ2VLaW5kKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFy
YXRpb24uSU5JVElBTElaRVJfUFJPUEVSVFkpOwotCQkJaWYgKGtpbmQgPT0gUmV3cml0ZUV2ZW50
LlJFTU9WRUQpIHsKLQkJCQl0cnkgewotCQkJCQlwb3M9IGdldFNjYW5uZXIoKS5nZXRQcmV2aW91
c1Rva2VuRW5kT2Zmc2V0KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUVRVUFMLCBwb3MpOwotCQkJ
CX0gY2F0Y2ggKENvcmVFeGNlcHRpb24gZSkgewotCQkJCQloYW5kbGVFeGNlcHRpb24oZSk7CisJ
CWlmIChhcGlMZXZlbCA8IEFTVC5KTFM4KSB7CisJCQlpbnQgZXh0cmFEaW1zPSByZXdyaXRlRXh0
cmFEaW1lbnNpb25zKG5vZGUsIElOVEVSTkFMX1ZBUklBQkxFX0VYVFJBX0RJTUVOU0lPTlNfUFJP
UEVSVFksIHBvcyk7CisJCQlpZiAoZXh0cmFEaW1zID4gMCkgeworCQkJCWludCBraW5kPSBnZXRD
aGFuZ2VLaW5kKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uSU5JVElBTElaRVJfUFJP
UEVSVFkpOworCQkJCWlmIChraW5kID09IFJld3JpdGVFdmVudC5SRU1PVkVEKSB7CisJCQkJCXRy
eSB7CisJCQkJCQlwb3M9IGdldFNjYW5uZXIoKS5nZXRQcmV2aW91c1Rva2VuRW5kT2Zmc2V0KFRl
cm1pbmFsVG9rZW5zLlRva2VuTmFtZUVRVUFMLCBwb3MpOworCQkJCQl9IGNhdGNoIChDb3JlRXhj
ZXB0aW9uIGUpIHsKKwkJCQkJCWhhbmRsZUV4Y2VwdGlvbihlKTsKKwkJCQkJfQorCQkJCX0gZWxz
ZSB7CisJCQkJCXBvcz0gbm9kZS5nZXRTdGFydFBvc2l0aW9uKCkgKyBub2RlLmdldExlbmd0aCgp
OyAvLyBpbnNlcnQgcG9zCiAJCQkJfQorCQkJfQorCQl9IGVsc2UgeworCQkJaWYgKGlzQ2hhbmdl
ZChub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19Q
Uk9QRVJUWSkpIHsKKwkJCQlwb3MgPSByZXdyaXRlTm9kZUxpc3Qobm9kZSwgU2luZ2xlVmFyaWFi
bGVEZWNsYXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIHBvcywgIiAiLCAi
ICIpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAkJCX0gZWxzZSB7Ci0JCQkJcG9zPSBu
b2RlLmdldFN0YXJ0UG9zaXRpb24oKSArIG5vZGUuZ2V0TGVuZ3RoKCk7IC8vIGluc2VydCBwb3MK
KwkJCQlwb3M9IGRvVmlzaXQobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5FWFRSQV9E
SU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIHBvcyk7CiAJCQl9CiAJCX0KIApAQCAtMzI2MywyMCAr
MzMwMCwyOSBAQAogCiAJCWludCBwb3M9IHJld3JpdGVSZXF1aXJlZE5vZGUobm9kZSwgVmFyaWFi
bGVEZWNsYXJhdGlvbkZyYWdtZW50Lk5BTUVfUFJPUEVSVFkpOwogCi0JCWludCBleHRyYURpbXM9
IHJld3JpdGVFeHRyYURpbWVuc2lvbnMobm9kZSwgSU5URVJOQUxfRlJBR01FTlRfRVhUUkFfRElN
RU5TSU9OU19QUk9QRVJUWSwgcG9zKTsKLQotCQlpZiAoZXh0cmFEaW1zID4gMCkgewotCQkJaW50
IGtpbmQ9IGdldENoYW5nZUtpbmQobm9kZSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LklO
SVRJQUxJWkVSX1BST1BFUlRZKTsKLQkJCWlmIChraW5kID09IFJld3JpdGVFdmVudC5SRU1PVkVE
KSB7Ci0JCQkJdHJ5IHsKLQkJCQkJcG9zPSBnZXRTY2FubmVyKCkuZ2V0UHJldmlvdXNUb2tlbkVu
ZE9mZnNldChUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVFUVVBTCwgcG9zKTsKLQkJCQl9IGNhdGNo
IChDb3JlRXhjZXB0aW9uIGUpIHsKLQkJCQkJaGFuZGxlRXhjZXB0aW9uKGUpOworCQlpZiAobm9k
ZS5nZXRBU1QoKS5hcGlMZXZlbCgpIDwgQVNULkpMUzgpIHsKKwkJCWludCBleHRyYURpbXMgPSBy
ZXdyaXRlRXh0cmFEaW1lbnNpb25zKG5vZGUsIElOVEVSTkFMX0ZSQUdNRU5UX0VYVFJBX0RJTUVO
U0lPTlNfUFJPUEVSVFksIHBvcyk7CisJCQlpZiAoZXh0cmFEaW1zID4gMCkgeworCQkJCWludCBr
aW5kPSBnZXRDaGFuZ2VLaW5kKG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5JTklU
SUFMSVpFUl9QUk9QRVJUWSk7CisJCQkJaWYgKGtpbmQgPT0gUmV3cml0ZUV2ZW50LlJFTU9WRUQp
IHsKKwkJCQkJdHJ5IHsKKwkJCQkJCXBvcz0gZ2V0U2Nhbm5lcigpLmdldFByZXZpb3VzVG9rZW5F
bmRPZmZzZXQoVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRVFVQUwsIHBvcyk7CisJCQkJCX0gY2F0
Y2ggKENvcmVFeGNlcHRpb24gZSkgeworCQkJCQkJaGFuZGxlRXhjZXB0aW9uKGUpOworCQkJCQl9
CisJCQkJfSBlbHNlIHsKKwkJCQkJcG9zPSBub2RlLmdldFN0YXJ0UG9zaXRpb24oKSArIG5vZGUu
Z2V0TGVuZ3RoKCk7IC8vIGluc2VydCBwb3MKIAkJCQl9Ci0JCQl9IGVsc2UgewotCQkJCXBvcz0g
bm9kZS5nZXRTdGFydFBvc2l0aW9uKCkgKyBub2RlLmdldExlbmd0aCgpOyAvLyBpbnNlcnQgcG9z
CiAJCQl9CisJCX0gZWxzZSB7CisJCQlpZiAoaXNDaGFuZ2VkKG5vZGUsIFZhcmlhYmxlRGVjbGFy
YXRpb25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpKSB7CisJCQkJcG9z
ID0gcmV3cml0ZU5vZGVMaXN0KG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5FWFRS
QV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIHBvcywgIiAiLCAiICIpOyAvLyROT04tTkxTLTEk
IC8vJE5PTi1OTFMtMiQKKwkJCX0gZWxzZSB7CisJCQkJcG9zPSBkb1Zpc2l0KG5vZGUsIFZhcmlh
YmxlRGVjbGFyYXRpb25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIHBv
cyk7CisJCQl9CisKIAkJfQorCiAJCXJld3JpdGVOb2RlKG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRp
b25GcmFnbWVudC5JTklUSUFMSVpFUl9QUk9QRVJUWSwgcG9zLCB0aGlzLmZvcm1hdHRlci5WQVJf
SU5JVElBTElaRVIpOwogCQlyZXR1cm4gZmFsc2U7CiAJfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRl
L0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVy
LmphdmEKaW5kZXggZmNhOTU3Mi4uZmYyOGZhOCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJl
d3JpdGVGbGF0dGVuZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5q
YXZhCkBAIC0yMjgsNyArMjI4LDExIEBACiAJCX0KIAkJcmV0dXJuIGZhbHNlOwogCX0KLQorCXB1
YmxpYyBib29sZWFuIHZpc2l0KEV4dHJhRGltZW5zaW9uIG5vZGUpIHsKKwkJdmlzaXRMaXN0KG5v
ZGUsIEV4dHJhRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZLCBTdHJpbmcudmFsdWVPZign
ICcpLCBTdHJpbmcudmFsdWVPZignICcpLCBTdHJpbmcudmFsdWVPZignICcpKTsKKwkJdGhpcy5y
ZXN1bHQuYXBwZW5kKCJbXSIpOyAvLyROT04tTkxTLTEkCisJCXJldHVybiBmYWxzZTsKKwl9CiAJ
LyoKIAkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoQXJyYXlJbml0aWFsaXplcikKIAkgKi8KQEAg
LTYyMiw5ICs2MjYsOSBAQAogCQkJdmlzaXRMaXN0KG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLk1P
RElGSUVSUzJfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5H
LCBTdHJpbmcudmFsdWVPZignICcpKTsKIAkJCXZpc2l0TGlzdChub2RlLCBNZXRob2REZWNsYXJh
dGlvbi5UWVBFX1BBUkFNRVRFUlNfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcsJyksIFN0cmlu
Zy52YWx1ZU9mKCc8JyksIFN0cmluZy52YWx1ZU9mKCc+JykpOwogCQl9Ci0KKwkJaW50IGFwaUxl
dmVsID0gbm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpOwogCQlpZiAoIWdldEJvb2xlYW5BdHRyaWJ1
dGUobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uQ09OU1RSVUNUT1JfUFJPUEVSVFkpKSB7Ci0JCQlp
ZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID09IEpMUzJfSU5URVJOQUwpIHsKKwkJCWlmIChh
cGlMZXZlbCA9PSBKTFMyX0lOVEVSTkFMKSB7CiAJCQkJZ2V0Q2hpbGROb2RlKG5vZGUsIE1ldGhv
ZERlY2xhcmF0aW9uLlJFVFVSTl9UWVBFX1BST1BFUlRZKS5hY2NlcHQodGhpcyk7CiAJCQl9IGVs
c2UgewogCQkJCUFTVE5vZGUgcmV0dXJuVHlwZSA9IGdldENoaWxkTm9kZShub2RlLCBNZXRob2RE
ZWNsYXJhdGlvbi5SRVRVUk5fVFlQRTJfUFJPUEVSVFkpOwpAQCAtNjQxLDkgKzY0NSwxMyBAQAog
CQl0aGlzLnJlc3VsdC5hcHBlbmQoJygnKTsKIAkJdmlzaXRMaXN0KG5vZGUsIE1ldGhvZERlY2xh
cmF0aW9uLlBBUkFNRVRFUlNfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcsJykpOwogCQl0aGlz
LnJlc3VsdC5hcHBlbmQoJyknKTsKLQkJaW50IGV4dHJhRGltcz0gZ2V0SW50QXR0cmlidXRlKG5v
ZGUsIElOVEVSTkFMX01FVEhPRF9FWFRSQV9ESU1FTlNJT05TX1BST1BFUlRZKTsKLQkJZm9yIChp
bnQgaSA9IDA7IGkgPCBleHRyYURpbXM7IGkrKykgewotCQkJdGhpcy5yZXN1bHQuYXBwZW5kKCJb
XSIpOyAvLyROT04tTkxTLTEkCisJCWlmIChhcGlMZXZlbCA8IEFTVC5KTFM4KSB7CisJCQlpbnQg
ZXh0cmFEaW1zPSBnZXRJbnRBdHRyaWJ1dGUobm9kZSwgSU5URVJOQUxfTUVUSE9EX0VYVFJBX0RJ
TUVOU0lPTlNfUFJPUEVSVFkpOworCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbXM7IGkr
KykgeworCQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5MUy0xJAorCQkJfQor
CQl9IGVsc2UgeworCQkJdmlzaXRMaXN0KG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLkVYVFJBX0RJ
TUVOU0lPTl9JTkZPU19QUk9QRVJUWSwgU3RyaW5nLnZhbHVlT2YoJyAnKSwgU3RyaW5nLnZhbHVl
T2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcpOwogCQl9CiAJCXZpc2l0TGlzdChub2RlLCBNZXRo
b2REZWNsYXJhdGlvbi5USFJPV05fRVhDRVBUSU9OU19QUk9QRVJUWSwgU3RyaW5nLnZhbHVlT2Yo
JywnKSwgIiB0aHJvd3MgIiwgVXRpbC5FTVBUWV9TVFJJTkcpOyAvLyROT04tTkxTLTEkCiAJCUFT
VE5vZGUgYm9keT0gZ2V0Q2hpbGROb2RlKG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLkJPRFlfUFJP
UEVSVFkpOwpAQCAtODAwLDE2ICs4MDgsMjEgQEAKIAkJCXZpc2l0TGlzdChub2RlLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLk1PRElGSUVSUzJfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcg
JyksIFV0aWwuRU1QVFlfU1RSSU5HLCBTdHJpbmcudmFsdWVPZignICcpKTsKIAkJfQogCQlnZXRD
aGlsZE5vZGUobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5UWVBFX1BST1BFUlRZKS5h
Y2NlcHQodGhpcyk7Ci0JCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPj0gSkxTM19JTlRF
Uk5BTCkgeworCQlpbnQgYXBpTGV2ZWwgPSBub2RlLmdldEFTVCgpLmFwaUxldmVsKCk7CisJCWlm
IChhcGlMZXZlbCA+PSBKTFMzX0lOVEVSTkFMKSB7CiAJCQlpZiAoZ2V0Qm9vbGVhbkF0dHJpYnV0
ZShub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpKSB7CiAJ
CQkJdGhpcy5yZXN1bHQuYXBwZW5kKCIuLi4iKTsvLyROT04tTkxTLTEkCiAJCQl9CiAJCX0KIAkJ
dGhpcy5yZXN1bHQuYXBwZW5kKCcgJyk7CiAJCWdldENoaWxkTm9kZShub2RlLCBTaW5nbGVWYXJp
YWJsZURlY2xhcmF0aW9uLk5BTUVfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsKLQkJaW50IGV4dHJh
RGltZW5zaW9ucz0gZ2V0SW50QXR0cmlidXRlKG5vZGUsIElOVEVSTkFMX1ZBUklBQkxFX0VYVFJB
X0RJTUVOU0lPTlNfUFJPUEVSVFkpOwotCQlmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5z
aW9uczsgaSsrKSB7Ci0JCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQK
KwkJaWYgKGFwaUxldmVsIDwgQVNULkpMUzgpIHsKKwkJCWludCBleHRyYURpbWVuc2lvbnM9IGdl
dEludEF0dHJpYnV0ZShub2RlLCBJTlRFUk5BTF9WQVJJQUJMRV9FWFRSQV9ESU1FTlNJT05TX1BS
T1BFUlRZKTsKKwkJCWZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1lbnNpb25zOyBpKyspIHsK
KwkJCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQKKwkJCX0KKwkJfSBl
bHNlIHsgCisJCQl2aXNpdExpc3Qobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5FWFRS
QV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9mKCcgJyksIFN0cmluZy52
YWx1ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5HKTsKIAkJfQogCQlBU1ROb2RlIGluaXRpYWxp
emVyPSBnZXRDaGlsZE5vZGUobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5JTklUSUFM
SVpFUl9QUk9QRVJUWSk7CiAJCWlmIChpbml0aWFsaXplciAhPSBudWxsKSB7CkBAIC0xMDUyLDkg
KzEwNjUsMTMgQEAKIAkgKi8KIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChWYXJpYWJsZURlY2xhcmF0
aW9uRnJhZ21lbnQgbm9kZSkgewogCQlnZXRDaGlsZE5vZGUobm9kZSwgVmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50Lk5BTUVfUFJPUEVSVFkpLmFjY2VwdCh0aGlzKTsKLQkJaW50IGV4dHJhRGlt
ZW5zaW9ucz0gZ2V0SW50QXR0cmlidXRlKG5vZGUsIElOVEVSTkFMX0ZSQUdNRU5UX0VYVFJBX0RJ
TUVOU0lPTlNfUFJPUEVSVFkpOwotCQlmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5zaW9u
czsgaSsrKSB7Ci0JCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQKKwkJ
aWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA8IEFTVC5KTFM4KSB7CisJCQlpbnQgZXh0cmFE
aW1lbnNpb25zPSBnZXRJbnRBdHRyaWJ1dGUobm9kZSwgSU5URVJOQUxfRlJBR01FTlRfRVhUUkFf
RElNRU5TSU9OU19QUk9QRVJUWSk7CisJCQlmb3IgKGludCBpID0gMDsgaSA8IGV4dHJhRGltZW5z
aW9uczsgaSsrKSB7CisJCQkJdGhpcy5yZXN1bHQuYXBwZW5kKCJbXSIpOyAvLyROT04tTkxTLTEk
CisJCQl9CisJCX0gZWxzZSB7IAorCQkJdmlzaXRMaXN0KG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRp
b25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFksIFN0cmluZy52YWx1ZU9m
KCcgJyksIFN0cmluZy52YWx1ZU9mKCcgJyksIFV0aWwuRU1QVFlfU1RSSU5HKTsKIAkJfQogCQlB
U1ROb2RlIGluaXRpYWxpemVyPSBnZXRDaGlsZE5vZGUobm9kZSwgVmFyaWFibGVEZWNsYXJhdGlv
bkZyYWdtZW50LklOSVRJQUxJWkVSX1BST1BFUlRZKTsKIAkJaWYgKGluaXRpYWxpemVyICE9IG51
bGwpIHs=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>226893</attachid>
            <date>2013-02-11 23:20:00 -0500</date>
            <delta_ts>2013-02-19 11:55:01 -0500</delta_ts>
            <desc>Updated patch</desc>
            <filename>Fix-for-bug-396576.patch</filename>
            <type>text/plain</type>
            <size>29582</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9k
RGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0
aG9kRGVjbFRlc3QuamF2YQppbmRleCAxMTM2NDJhLi5kNWJlNzc0IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5q
YXZhCkBAIC0yODgxLDYgKzI4ODEsMTM3IEBACiAJCWJ1Zi5hcHBlbmQoIn1cbiIpOwogCQlhc3Nl
cnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CiAJfQorCXB1YmxpYyB2b2lk
IHRlc3RFeHRyYURpbXdpdGhBbm5vdGF0aW9ucygpIHRocm93cyBFeGNlcHRpb24geworCQlJUGFj
a2FnZUZyYWdtZW50IHBhY2sxPSB0aGlzLnNvdXJjZUZvbGRlci5jcmVhdGVQYWNrYWdlRnJhZ21l
bnQoInRlc3QxIiwgZmFsc2UsIG51bGwpOworCQlTdHJpbmdCdWZmZXIgYnVmPSBuZXcgU3RyaW5n
QnVmZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5h
cHBlbmQoInB1YmxpYyBhYnN0cmFjdCBjbGFzcyBFIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAg
cHVibGljIE9iamVjdCBmb28xKClbXSB0aHJvd3MgQXJyYXlTdG9yZUV4Y2VwdGlvbiB7IHJldHVy
biBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMigpW10g
eyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZv
bzMoKSBAQW5ub3QxIFtdIEBBbm5vdDIgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzQoKUBBbm5vdDEgW10gQEFubm90MiBbXSB0aHJv
d3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYu
YXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb281KCkgQEFubm90MSBbXSAgIEBBbm5vdDIgW10g
eyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZv
bzYoaW50IGkpICBAQW5ub3QxIFtdIEBBbm5vdDIgW10gdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4
Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBP
YmplY3QgZm9vNyhpbnQgaSkgQEFubm90MSBbXSAgQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9
XG4iKTsKKwkJYnVmLmFwcGVuZCgifVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsgCisJCWJ1
Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEu
bGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIp
OworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CiAKKwkJSUNvbXBpbGF0
aW9uVW5pdCBjdT0gcGFjazEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJFLmphdmEiLCBidWYudG9T
dHJpbmcoKSwgZmFsc2UsIG51bGwpOworCQlDb21waWxhdGlvblVuaXQgYXN0Um9vdD0gY3JlYXRl
QVNUOChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0gQVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9v
dC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3QuZ2V0QVNUKCk7CisJCVR5cGVEZWNsYXJh
dGlvbiB0eXBlPSBmaW5kVHlwZURlY2xhcmF0aW9uKGFzdFJvb3QsICJFIik7CiAKKwkJeworCQkJ
TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUs
ICJmb28xIik7CisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhvZERlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZP
U19QUk9QRVJUWSk7CisJCQlFeHRyYURpbWVuc2lvbiBkaW09IGFzdC5uZXdFeHRyYURpbWVuc2lv
bigpOworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2Vy
QW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiQW5ub3QxIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90
YXRpb24pOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAxLCBudWxsKTsKKworCQkJZGlt
PSBhc3QubmV3RXh0cmFEaW1lbnNpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdN
YXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5u
ZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2Vy
QW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDIsIG51bGwpOworCQl9
CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJh
dGlvbih0eXBlLCAiZm9vMiIpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUu
Z2V0TGlzdFJld3JpdGUobWV0aG9kRGVjbCwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFfRElNRU5T
SU9OX0lORk9TX1BST1BFUlRZKTsKKworCQkJRXh0cmFEaW1lbnNpb24gZGltPSBhc3QubmV3RXh0
cmFEaW1lbnNpb24oKTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0gYXN0
Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUo
YXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MSIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZCht
YXJrZXJBbm5vdGF0aW9uKTsKKworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAxLCBudWxs
KTsKKwkJfQorCQl7CisJCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9k
RGVjbGFyYXRpb24odHlwZSwgImZvbzMiKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSBy
ZXdyaXRlLmdldExpc3RSZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhvZERlY2xhcmF0aW9uLkVYVFJB
X0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gYXN0
Lm5ld0V4dHJhRGltZW5zaW9uKCk7CisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRp
b249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5
cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMo
KS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdN
YXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5u
ZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2Vy
QW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDEsIG51bGwpOworCQl9
CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJh
dGlvbih0eXBlLCAiZm9vNCIpOworCQkJRXh0cmFEaW1lbnNpb24gZGltPSAoRXh0cmFEaW1lbnNp
b24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgwKTsKKwkJCUxpc3RSZXdy
aXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNp
b24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFu
bm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9u
LnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlsaXN0UmV3cml0
ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBudWxsKTsKKworCQkJZGltPSAoRXh0cmFE
aW1lbnNpb24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgxKTsKKwkJCWxp
c3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5O
T1RBVElPTlNfUFJPUEVSVFkpOworCisJCQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2Vy
QW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2lt
cGxlTmFtZSgiQW5ub3QxIikpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQobWFya2VyQW5ub3Rh
dGlvbiwgMSwgbnVsbCk7CisJCX0KKwkJeworCQkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVj
bD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb281Iik7CisJCQlFeHRyYURpbWVuc2lv
biBkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURpbWVuc2lvbkluZm9zKCku
Z2V0KDApOworCQkJQW5ub3RhdGlvbiBhbm5vdD0gKEFubm90YXRpb24pIGRpbS5hbm5vdGF0aW9u
cygpLmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlz
dFJld3JpdGUucmVtb3ZlKGFubm90LCBudWxsKTsKKworCQkJZGltPSAoRXh0cmFEaW1lbnNpb24p
IG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgxKTsKKwkJCWxpc3RSZXdyaXRl
PSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNf
UFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoYW5ub3QsIDEsIG51bGwpOworCQl9
CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJh
dGlvbih0eXBlLCAiZm9vNiIpOworCQkJRXh0cmFEaW1lbnNpb24gZGltPSAoRXh0cmFEaW1lbnNp
b24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgwKTsKKwkJCUFubm90YXRp
b24gYW5ub3Q9IChBbm5vdGF0aW9uKSBkaW0uYW5ub3RhdGlvbnMoKS5nZXQoMCk7CisJCQlMaXN0
UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkaW0sIEV4dHJhRGlt
ZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZShhbm5v
dCwgbnVsbCk7CisKKwkJCWRpbT0gKEV4dHJhRGltZW5zaW9uKSBtZXRob2REZWNsLmV4dHJhRGlt
ZW5zaW9uSW5mb3MoKS5nZXQoMSk7CisJCQlhbm5vdD0gKEFubm90YXRpb24pIGRpbS5hbm5vdGF0
aW9ucygpLmdldCgwKTsKKwkJCWxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRp
bSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUu
cmVtb3ZlKGFubm90LCBudWxsKTsKKwkJfQorCQl7CisJCQlNZXRob2REZWNsYXJhdGlvbiBtZXRo
b2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzciKTsKKwkJCUxpc3RSZXdy
aXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhv
ZERlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisJCQlFeHRyYURp
bWVuc2lvbiBkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURpbWVuc2lvbklu
Zm9zKCkuZ2V0KDApOworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGRpbSwgbnVsbCk7CisJCQlkaW09
IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDEp
OworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGRpbSwgbnVsbCk7CisJCX0KKworCQlTdHJpbmcgcHJl
dmlldz0gZXZhbHVhdGVSZXdyaXRlKGN1LCByZXdyaXRlKTsKKwkJYnVmPSBuZXcgU3RyaW5nQnVm
ZmVyKCk7CisJCWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgi
aW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBl
bmQoInB1YmxpYyBhYnN0cmFjdCBjbGFzcyBFIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVi
bGljIE9iamVjdCBmb28xKClbXSBAQW5ub3QxIFtdIEBBbm5vdDIgW10gdGhyb3dzIEFycmF5U3Rv
cmVFeGNlcHRpb24geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJs
aWMgT2JqZWN0IGZvbzIoKVtdIEBBbm5vdDEgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1
Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzMoKSBAQW5ub3QxIFtdIEBBbm5vdDEgQEFu
bm90MiBbXSBAQW5ub3QyIFtdIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgcHVibGljIE9iamVjdCBmb280KClAQW5ub3QyIEBBbm5vdDEgW10gQEFubm90MiBAQW5ub3Qx
IFtdIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24geyByZXR1cm4gbnVsbDsgfVxuIik7
CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzUoKSAgW10gICBAQW5ub3QyIEBB
bm5vdDEgW10geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMg
T2JqZWN0IGZvbzYoaW50IGkpICAgW10gIFtdIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp
b24geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0
IGZvbzcoaW50IGkpIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1l
bnRUeXBlLlRZUEVfVVNFfSlcbiIpOyAKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDEg
e31cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVl
PSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2Ug
QW5ub3QyIHt9XG4iKTsKKwkJYXNzZXJ0RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5n
KCkpOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdU
ZXN0LmphdmEKaW5kZXggYjNkMTM2Ni4uYjVhODU1MyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3Jp
dGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUv
ZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEKQEAgLTExNSw2ICsxMTUsOSBAQAogCXBy
b3RlY3RlZCBDb21waWxhdGlvblVuaXQgY3JlYXRlQVNUMyhJQ29tcGlsYXRpb25Vbml0IGN1LCBi
b29sZWFuIHN0YXRlbWVudHNSZWNvdmVyeSkgewogCQlyZXR1cm4gY3JlYXRlQVNUKEpMUzNfSU5U
RVJOQUwsIGN1LCBzdGF0ZW1lbnRzUmVjb3ZlcnkpOwogCX0KKwlwcm90ZWN0ZWQgQ29tcGlsYXRp
b25Vbml0IGNyZWF0ZUFTVDgoSUNvbXBpbGF0aW9uVW5pdCBjdSkgeworCQlyZXR1cm4gY3JlYXRl
QVNUKEFTVC5KTFM4LCBjdSwgZmFsc2UpOworCX0KIAlwcm90ZWN0ZWQgQ29tcGlsYXRpb25Vbml0
IGNyZWF0ZUFTVChpbnQgSkxTTGV2ZWwsIElDb21waWxhdGlvblVuaXQgY3UsIGJvb2xlYW4gc3Rh
dGVtZW50c1JlY292ZXJ5KSB7CiAJCXJldHVybiBjcmVhdGVBU1QoSkxTTGV2ZWwsIGN1LCBmYWxz
ZSwgc3RhdGVtZW50c1JlY292ZXJ5KTsKIAl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9k
ZXNjcmliaW5nL0FTVFJld3JpdGluZ1R5cGVEZWNsVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUv
ZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUeXBlRGVjbFRlc3QuamF2YQppbmRleCBmMjZkNWIxLi5l
MTI2NGQxIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMv
b3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGlu
Z1R5cGVEZWNsVGVzdC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3
cml0aW5nVHlwZURlY2xUZXN0LmphdmEKQEAgLTE2OTMsNyArMTY5MywyMDkgQEAKIAkJYXNzZXJ0
RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOwogCiAJfQorCS8vIGh0dHBzOi8v
YnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTY1NzYKKwlwdWJsaWMgdm9p
ZCB0ZXN0VmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50V2l0aEFubm90KCkgdGhyb3dzIEV4Y2Vw
dGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291cmNlRm9sZGVyLmNyZWF0
ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZ0J1ZmZlciBi
dWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0MTtcbiIp
OworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGU7
XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CisJCWJ1Zi5hcHBlbmQo
IiAgICBwdWJsaWMgdm9pZCBmb28oKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgICAgICBpbnQg
aSwgaiwgayA9IDAsIHgsIHkgW10gW10gW10sIHogQEFubm90MSBbXSwgenogQEFubm90MiBAQW5u
b3QyW10gPSB7MCwgMX07XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBw
ZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2
YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJm
YWNlIEFubm90MSB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5U
YXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgi
QGludGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlJQ29tcGlsYXRpb25Vbml0IGN1PSBwYWNrMS5j
cmVhdGVDb21waWxhdGlvblVuaXQoIkUuamF2YSIsIGJ1Zi50b1N0cmluZygpLCBmYWxzZSwgbnVs
bCk7CisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1Q4KGN1KTsKKwkJQVNUUmV3
cml0ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgpKTsKKwkJQVNU
IGFzdD0gYXN0Um9vdC5nZXRBU1QoKTsKIAorCQlhc3NlcnRUcnVlKCJQYXJzZSBlcnJvcnMiLCAo
YXN0Um9vdC5nZXRGbGFncygpICYgQVNUTm9kZS5NQUxGT1JNRUQpPT0gMCk7CisJCVR5cGVEZWNs
YXJhdGlvbiB0eXBlPSBmaW5kVHlwZURlY2xhcmF0aW9uKGFzdFJvb3QsICJFIik7CisKKwkJTWV0
aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJm
b28iKTsKKwkJQmxvY2sgYmxvY2s9IG1ldGhvZERlY2wuZ2V0Qm9keSgpOworCQlMaXN0IHN0YXRl
bWVudHM9IGJsb2NrLnN0YXRlbWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSgiTnVtYmVyIG9mIHN0YXRl
bWVudHMgbm90IDEiLCBzdGF0ZW1lbnRzLnNpemUoKT09IDEpOworCisJCVZhcmlhYmxlRGVjbGFy
YXRpb25TdGF0ZW1lbnQgdmFyaWFibGVEZWNsU3RhdGVtZW50PSAoVmFyaWFibGVEZWNsYXJhdGlv
blN0YXRlbWVudCkgc3RhdGVtZW50cy5nZXQoMCk7CisJCUxpc3QgZnJhZ21lbnRzPSB2YXJpYWJs
ZURlY2xTdGF0ZW1lbnQuZnJhZ21lbnRzKCk7CisJCWFzc2VydFRydWUoIk51bWJlciBvZiBmcmFn
bWVudHMgbm90IDciLCBmcmFnbWVudHMuc2l6ZSgpPT0gNyk7CisKKwkJeyAvLyByZW5hbWUgdmFy
LCBhZGQgZGltZW5zaW9uIHdpdGggYW5ub3RhdGlvbnMKKwkJCVZhcmlhYmxlRGVjbGFyYXRpb25G
cmFnbWVudCBmcmFnbWVudD0gKFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudCkgZnJhZ21lbnRz
LmdldCgwKTsKKwkJCUFTVE5vZGUgbmFtZT0gYXN0Lm5ld1NpbXBsZU5hbWUoImEiKTsKKwkJCXJl
d3JpdGUucmVwbGFjZShmcmFnbWVudC5nZXROYW1lKCksIG5hbWUsIG51bGwpOworCisJCQlMaXN0
UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShmcmFnbWVudCwgVmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7
CisJCQlFeHRyYURpbWVuc2lvbiBkaW09IGFzdC5uZXdFeHRyYURpbWVuc2lvbigpOworCQkJTWFy
a2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigp
OworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5u
b3QxIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCisJ
CQltYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2Vy
QW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QyIikpOworCQkJ
ZGltLmFubm90YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCQkJbGlzdFJld3JpdGUu
aW5zZXJ0QXQoZGltLCAwLCBudWxsKTsKKwkJfQorCQl7IC8vIGFkZCBpbml0aWFsaXplcgorCQkJ
VmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdtZW50PSAoVmFyaWFibGVEZWNsYXJhdGlv
bkZyYWdtZW50KSBmcmFnbWVudHMuZ2V0KDEpOworCQkJYXNzZXJ0VHJ1ZSgiSGFzIGluaXRpYWxp
emVyIiwgZnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKT09IG51bGwpOworCQkJRXhwcmVzc2lvbiBp
bml0aWFsaXplcj0gYXN0Lm5ld051bWJlckxpdGVyYWwoIjEiKTsKKwkJCXJld3JpdGUuc2V0KGZy
YWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuSU5JVElBTElaRVJfUFJPUEVSVFks
IGluaXRpYWxpemVyLCBudWxsKTsKKwkJfQorCQl7IC8vIHJlbW92ZSBpbml0aWFsaXplciBhbmQg
YWRkIGV4dHJhIGRpbWVuc2lvbnMgd2l0aCBhbm5vdGF0aW9ucworCQkJVmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50IGZyYWdtZW50PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSBmcmFn
bWVudHMuZ2V0KDIpOworCQkJYXNzZXJ0VHJ1ZSgiSGFzIG5vIGluaXRpYWxpemVyIiwgZnJhZ21l
bnQuZ2V0SW5pdGlhbGl6ZXIoKSAhPSBudWxsKTsKKwkJCXJld3JpdGUucmVtb3ZlKGZyYWdtZW50
LmdldEluaXRpYWxpemVyKCksIG51bGwpOworCisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0g
cmV3cml0ZS5nZXRMaXN0UmV3cml0ZShmcmFnbWVudCwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdt
ZW50LkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CisJCQlFeHRyYURpbWVuc2lvbiBk
aW09IGFzdC5uZXdFeHRyYURpbWVuc2lvbigpOworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJB
bm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlv
bi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QxIikpOworCQkJZGltLmFubm90
YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCQkJCisJCQltYXJrZXJBbm5vdGF0aW9u
PSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBl
TmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QyIikpOworCQkJZGltLmFubm90YXRpb25zKCku
YWRkKG1hcmtlckFubm90YXRpb24pOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAwLCBu
dWxsKTsKKwkJfQorCQl7IC8vIGFkZCBkaW1lbnNpb24sIGFkZCBpbml0aWFsaXplcgorCQkJVmFy
aWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdtZW50PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZy
YWdtZW50KSBmcmFnbWVudHMuZ2V0KDMpOworCQkJYXNzZXJ0VHJ1ZSgiSGFzIGluaXRpYWxpemVy
IiwgZnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKT09IG51bGwpOworCQkJRXhwcmVzc2lvbiBpbml0
aWFsaXplcj0gYXN0Lm5ld051bGxMaXRlcmFsKCk7CisJCQlyZXdyaXRlLnNldChmcmFnbWVudCwg
VmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LklOSVRJQUxJWkVSX1BST1BFUlRZLCBpbml0aWFs
aXplciwgbnVsbCk7CisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExp
c3RSZXdyaXRlKGZyYWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuRVhUUkFfRElN
RU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKworCQkJRXh0cmFEaW1lbnNpb24gZGltPSBhc3QubmV3
RXh0cmFEaW1lbnNpb24oKTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0g
YXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5h
bWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MSIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFk
ZChtYXJrZXJBbm5vdGF0aW9uKTsKKworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtl
ckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1Np
bXBsZU5hbWUoIkFubm90MiIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZChtYXJrZXJBbm5v
dGF0aW9uKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEF0KGRpbSwgMCwgbnVsbCk7CisJCX0KKwkJ
eyAvLyByZW1vdmUgb25lIGRpbWVuc2lvbiBhbmQgYWRkIGFubm90YXRpb25zIGZvciB0aGUgcmVz
dCBvZiB0aGUgZGltZW5zaW9ucworCQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdt
ZW50PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50KSBmcmFnbWVudHMuZ2V0KDQpOworCisJ
CQlFeHRyYURpbWVuc2lvbiBkaW09IChFeHRyYURpbWVuc2lvbikgZnJhZ21lbnQuZXh0cmFEaW1l
bnNpb25JbmZvcygpLmdldCgxKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRl
LmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkp
OworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJBbm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5u
b3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxl
TmFtZSgiQW5ub3QxIikpOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQobWFya2VyQW5ub3RhdGlv
biwgMCwgbnVsbCk7CisKKwkJCWRpbT0gKEV4dHJhRGltZW5zaW9uKSBmcmFnbWVudC5leHRyYURp
bWVuc2lvbkluZm9zKCkuZ2V0KDIpOworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtl
ckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1Np
bXBsZU5hbWUoIkFubm90MiIpKTsKKwkJCWxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdy
aXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkpOworCQkJbGlzdFJl
d3JpdGUuaW5zZXJ0QXQobWFya2VyQW5ub3RhdGlvbiwgMCwgbnVsbCk7CisKKwkJCWxpc3RSZXdy
aXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGZyYWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9u
RnJhZ21lbnQuRVhUUkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRl
LnJlbW92ZSgoRXh0cmFEaW1lbnNpb24pIGZyYWdtZW50LmV4dHJhRGltZW5zaW9uSW5mb3MoKS5n
ZXQoMCksIG51bGwpOworCQl9CisJCXsgLy8gcmVtb3ZlIGEgZnJhZ21lbnQKKwkJCUxpc3RSZXdy
aXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKHZhcmlhYmxlRGVjbFN0YXRl
bWVudCwgVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudC5GUkFHTUVOVFNfUFJPUEVSVFkpOwor
CQkJVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdtZW50PSAoVmFyaWFibGVEZWNsYXJh
dGlvbkZyYWdtZW50KSBmcmFnbWVudHMuZ2V0KDUpOworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGZy
YWdtZW50LCBudWxsKTsKKwkJfQorCisJCVN0cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3JpdGUo
Y3UsIHJld3JpdGUpOworCisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5k
KCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5u
b3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYu
YXBwZW5kKCIgICAgICAgIGludCBhIEBBbm5vdDEgQEFubm90MiBbXSwgaiA9IDEsIGsgQEFubm90
MSBAQW5ub3QyIFtdLCB4IEBBbm5vdDEgQEFubm90MiBbXSA9IG51bGwsIHkgQEFubm90MVtdIEBB
bm5vdDJbXSwgenogQEFubm90MiBAQW5ub3QyW10gPSB7MCwgMX07XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEu
bGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIp
OworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCWJ1Zi5hcHBlbmQo
IkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VT
RX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlhc3Nl
cnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQorCisJLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NjU3NgorCXB1YmxpYyB2
b2lkIHRlc3RTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uV2l0aEFubm90YXRpb25zKCkgdGhyb3dz
IEV4Y2VwdGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRoaXMuc291cmNlRm9sZGVy
LmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVsbCk7CisJCVN0cmluZ0J1
ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVuZCgicGFja2FnZSB0ZXN0
MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVu
dFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUge1xuIik7CisJCWJ1Zi5h
cHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oaW50IGksIGZpbmFsIGludFtdIGogQEFubm90MSBA
QW5ub3QyIFtdLCBpbnRbXSBrIEBBbm5vdDEgQEFubm90MyBbXSBAQW5ub3QyIEBBbm5vdDMgW10s
IGludCBsIFtdKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1cbiIpOworCQlidWYuYXBwZW5k
KCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1
ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNl
IEFubm90MSB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJn
ZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGlu
dGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBl
bmQoIkBpbnRlcmZhY2UgQW5ub3QyIHt9XG4iKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCBjdT0gcGFj
azEuY3JlYXRlQ29tcGlsYXRpb25Vbml0KCJFLmphdmEiLCBidWYudG9TdHJpbmcoKSwgZmFsc2Us
IG51bGwpOworCQlTeXN0ZW0ub3V0LnByaW50bG4oYnVmLnRvU3RyaW5nKCkpOworCQlDb21waWxh
dGlvblVuaXQgYXN0Um9vdD0gY3JlYXRlQVNUOChjdSk7CisJCUFTVFJld3JpdGUgcmV3cml0ZT0g
QVNUUmV3cml0ZS5jcmVhdGUoYXN0Um9vdC5nZXRBU1QoKSk7CisJCUFTVCBhc3Q9IGFzdFJvb3Qu
Z2V0QVNUKCk7CisKKwkJYXNzZXJ0VHJ1ZSgiUGFyc2UgZXJyb3JzIiwgKGFzdFJvb3QuZ2V0Rmxh
Z3MoKSAmIEFTVE5vZGUuTUFMRk9STUVEKT09IDApOworCQlUeXBlRGVjbGFyYXRpb24gdHlwZT0g
ZmluZFR5cGVEZWNsYXJhdGlvbihhc3RSb290LCAiRSIpOworCQlNZXRob2REZWNsYXJhdGlvbiBt
ZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbyIpOworCQlMaXN0IGFy
Z3VtZW50cz0gbWV0aG9kRGVjbC5wYXJhbWV0ZXJzKCk7CisKKwkJeyAvLyBhZGQgbW9kaWZpZXIs
IG1vdmUgZXh0cmEgZGltZW5zaW9ucyBmcm9tIG9uZSB2YXJpYWJsZSB0byBhbm90aGVyCisJCQlT
aW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uIGRlY2w9IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9u
KSBhcmd1bWVudHMuZ2V0KDApOworCQkJU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbiBkZWNsMj0g
KFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIGFyZ3VtZW50cy5nZXQoMSk7CisJCQlFeHRyYURp
bWVuc2lvbiBkaW09IChFeHRyYURpbWVuc2lvbikgZGVjbDIuZXh0cmFEaW1lbnNpb25JbmZvcygp
LmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdy
aXRlKGRlY2wsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uTU9ESUZJRVJTMl9QUk9QRVJUWSk7
CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRGaXJzdChhc3QubmV3TW9kaWZpZXIoTW9kaWZpZXIuTW9k
aWZpZXJLZXl3b3JkLkZJTkFMX0tFWVdPUkQpLCBudWxsKTsKKworCQkJbGlzdFJld3JpdGU9IHJl
d3JpdGUuZ2V0TGlzdFJld3JpdGUoZGVjbDIsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uRVhU
UkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLnJlbW92ZShkaW0s
IG51bGwpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGVjbCwgU2lu
Z2xlVmFyaWFibGVEZWNsYXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpOwor
CQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAwLCBudWxsKTsKKwkJfQorCQl7IC8vIG1vdmUg
YW5ub3RhdGlvbnMgZnJvbSBvbmUgZGltIHRvIGFub3RoZXIKKwkJCVNpbmdsZVZhcmlhYmxlRGVj
bGFyYXRpb24gZGVjbD0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIGFyZ3VtZW50cy5nZXQo
Mik7CisJCQlFeHRyYURpbWVuc2lvbiBkaW0xPSAoRXh0cmFEaW1lbnNpb24pIGRlY2wuZXh0cmFE
aW1lbnNpb25JbmZvcygpLmdldCgwKTsKKwkJCUV4dHJhRGltZW5zaW9uIGRpbTI9IChFeHRyYURp
bWVuc2lvbikgZGVjbC5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDEpOworCQkJQW5ub3RhdGlv
biBhbm5vdDE9IChBbm5vdGF0aW9uKSBkaW0xLmFubm90YXRpb25zKCkuZ2V0KDApOworCQkJQW5u
b3RhdGlvbiBhbm5vdDI9IChBbm5vdGF0aW9uKSBkaW0yLmFubm90YXRpb25zKCkuZ2V0KDApOwor
CisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkaW0x
LCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5y
ZXBsYWNlKGFubm90MSwgYW5ub3QyLCBudWxsKTsKKworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUu
Z2V0TGlzdFJld3JpdGUoZGltMiwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFkp
OworCQkJbGlzdFJld3JpdGUucmVwbGFjZShhbm5vdDIsIGFubm90MSwgbnVsbCk7CisJCX0KKwkJ
eyAvLyByZW1vdmUgZXh0cmEgZGltCisJCQlTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uIGRlY2w9
IChTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uKSBhcmd1bWVudHMuZ2V0KDMpOworCQkJTGlzdFJl
d3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGVjbCwgU2luZ2xlVmFy
aWFibGVEZWNsYXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpOworCQkJbGlz
dFJld3JpdGUucmVtb3ZlKChFeHRyYURpbWVuc2lvbikgZGVjbC5leHRyYURpbWVuc2lvbkluZm9z
KCkuZ2V0KDApLCBudWxsKTsKKwkJfQorCisJCVN0cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3Jp
dGUoY3UsIHJld3JpdGUpOworCQlidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVu
ZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFu
bm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGNsYXNzIEUg
e1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgdm9pZCBmb28oZmluYWwgaW50IGkgQEFu
bm90MSBAQW5ub3QyIFtdLCBmaW5hbCBpbnRbXSBqLCBpbnRbXSBrIEBBbm5vdDIgQEFubm90MyBb
XSBAQW5ub3QxIEBBbm5vdDMgW10sIGludCBsKSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIH1c
biIpOworCQlidWYuYXBwZW5kKCJ9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5v
dGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYu
YXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxh
bmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlidWYuYXBwZW5kKCJA
amF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9
KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QyIHt9XG4iKTsKKwkJYXNzZXJ0
RXF1YWxTdHJpbmcocHJldmlldywgYnVmLnRvU3RyaW5nKCkpOworCX0KIAogCiB9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvZG9tL3Jld3JpdGUvQVNUUmV3cml0ZUFuYWx5emVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3JpdGUvQVNUUmV3
cml0ZUFuYWx5emVyLmphdmEKaW5kZXggODkyYzA2OC4uZjA0OGQwZSAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2RvbS9y
ZXdyaXRlL0FTVFJld3JpdGVBbmFseXplci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3cml0ZS9BU1RSZXdyaXRl
QW5hbHl6ZXIuamF2YQpAQCAtMTgxNiw2ICsxODE2LDE2IEBACiAJCX0KIAl9CiAKKwlwdWJsaWMg
Ym9vbGVhbiB2aXNpdChFeHRyYURpbWVuc2lvbiBub2RlKSB7CisJCWlmICghaGFzQ2hpbGRyZW5D
aGFuZ2VzKG5vZGUpKSB7CisJCQlyZXR1cm4gZG9WaXNpdFVuY2hhbmdlZENoaWxkcmVuKG5vZGUp
OworCQl9CisJCWludCBwb3MgPSBub2RlLmdldFN0YXJ0UG9zaXRpb24oKTsKKwkJaWYgKGlzQ2hh
bmdlZChub2RlLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSkpIHsKKwkJCXJl
d3JpdGVOb2RlTGlzdChub2RlLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSwg
cG9zLCBVdGlsLkVNUFRZX1NUUklORywgIiAiKTsgLy8kTk9OLU5MUy0xJAorCQl9CisJCXJldHVy
biBmYWxzZTsKKwl9CiAKIAkvKiAobm9uLUphdmFkb2MpCiAJICogQHNlZSBvcmcuZWNsaXBzZS5q
ZHQuY29yZS5kb20uQVNUVmlzaXRvciN2aXNpdChNZXRob2REZWNsYXJhdGlvbikKQEAgLTE4MjUs
NyArMTgzNSw4IEBACiAJCQlyZXR1cm4gZG9WaXNpdFVuY2hhbmdlZENoaWxkcmVuKG5vZGUpOwog
CQl9CiAJCWludCBwb3M9IHJld3JpdGVKYXZhZG9jKG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLkpB
VkFET0NfUFJPUEVSVFkpOwotCQlpZiAobm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpID09IEpMUzJf
SU5URVJOQUwpIHsKKwkJaW50IGFwaUxldmVsID0gbm9kZS5nZXRBU1QoKS5hcGlMZXZlbCgpOwor
CQlpZiAoYXBpTGV2ZWwgPT0gSkxTMl9JTlRFUk5BTCkgewogCQkJcmV3cml0ZU1vZGlmaWVycyhu
b2RlLCBNZXRob2REZWNsYXJhdGlvbi5NT0RJRklFUlNfUFJPUEVSVFksIHBvcyk7CiAJCX0gZWxz
ZSB7CiAJCQlwb3M9IHJld3JpdGVNb2RpZmllcnMyKG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLk1P
RElGSUVSUzJfUFJPUEVSVFksIHBvcyk7CkBAIC0xODUxLDkgKzE4NjIsMjIgQEAKIAogCQkJcG9z
PSBnZXRTY2FubmVyKCkuZ2V0VG9rZW5FbmRPZmZzZXQoVGVybWluYWxUb2tlbnMuVG9rZW5OYW1l
UlBBUkVOLCBwb3MpOwogCi0JCQlpbnQgZXh0cmFEaW1zPSByZXdyaXRlRXh0cmFEaW1lbnNpb25z
KG5vZGUsIElOVEVSTkFMX01FVEhPRF9FWFRSQV9ESU1FTlNJT05TX1BST1BFUlRZLCBwb3MpOwot
Ci0JCQlDaGlsZExpc3RQcm9wZXJ0eURlc2NyaXB0b3IgZXhjZXB0aW9uc1Byb3BlcnR5ID0gbm9k
ZS5nZXRBU1QoKS5hcGlMZXZlbCgpIDwgQVNULkpMUzggPyBNZXRob2REZWNsYXJhdGlvbi5USFJP
V05fRVhDRVBUSU9OU19QUk9QRVJUWSA6IE1ldGhvZERlY2xhcmF0aW9uLlRIUk9XTl9FWENFUFRJ
T05fVFlQRVNfUFJPUEVSVFk7CisJCQlpbnQgZXh0cmFEaW1zID0gMDsKKwkJCWlmIChhcGlMZXZl
bCA8IEFTVC5KTFM4KSB7CisJCQkJZXh0cmFEaW1zPSByZXdyaXRlRXh0cmFEaW1lbnNpb25zKG5v
ZGUsIElOVEVSTkFMX01FVEhPRF9FWFRSQV9ESU1FTlNJT05TX1BST1BFUlRZLCBwb3MpOworCQkJ
fSBlbHNlIHsKKwkJCQlpbnQgbmV3UG9zOworCQkJCWlmIChpc0NoYW5nZWQobm9kZSwgTWV0aG9k
RGVjbGFyYXRpb24uRVhUUkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKSkgeworCQkJCQluZXdQ
b3MgPSByZXdyaXRlTm9kZUxpc3Qobm9kZSwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFfRElNRU5T
SU9OX0lORk9TX1BST1BFUlRZLCBwb3MsICIgIiwgIiAiKTsgLy8kTk9OLU5MUy0xJCAvLyROT04t
TkxTLTIkCisJCQkJfSBlbHNlIHsKKwkJCQkJbmV3UG9zPSBkb1Zpc2l0KG5vZGUsIE1ldGhvZERl
Y2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSwgcG9zKTsKKwkJCQl9CisJ
CQkJaWYgKHBvcyAhPSBuZXdQb3MpIHsKKwkJCQkJZXh0cmFEaW1zID0gMTsKKwkJCQkJcG9zID0g
bmV3UG9zOworCQkJCX0KKwkJCX0KKwkJCUNoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBleGNl
cHRpb25zUHJvcGVydHkgPSBhcGlMZXZlbCA8IEFTVC5KTFM4ID8gTWV0aG9kRGVjbGFyYXRpb24u
VEhST1dOX0VYQ0VQVElPTlNfUFJPUEVSVFkgOiBNZXRob2REZWNsYXJhdGlvbi5USFJPV05fRVhD
RVBUSU9OX1RZUEVTX1BST1BFUlRZOwogCQkJYm9vbGVhbiBoYXNFeGNlcHRpb25DaGFuZ2VzPSBp
c0NoYW5nZWQobm9kZSwgZXhjZXB0aW9uc1Byb3BlcnR5KTsKIAogCQkJaW50IGJvZHlDaGFuZ2VL
aW5kPSBnZXRDaGFuZ2VLaW5kKG5vZGUsIE1ldGhvZERlY2xhcmF0aW9uLkJPRFlfUFJPUEVSVFkp
OwpAQCAtMjgzOCwxMyArMjg2MiwxNCBAQAogCQkJcmV0dXJuIGRvVmlzaXRVbmNoYW5nZWRDaGls
ZHJlbihub2RlKTsKIAkJfQogCQlpbnQgcG9zPSBub2RlLmdldFN0YXJ0UG9zaXRpb24oKTsKLQkJ
aWYgKG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKSA9PSBKTFMyX0lOVEVSTkFMKSB7CisJCWludCBh
cGlMZXZlbCA9IG5vZGUuZ2V0QVNUKCkuYXBpTGV2ZWwoKTsKKwkJaWYgKGFwaUxldmVsID09IEpM
UzJfSU5URVJOQUwpIHsKIAkJCXJld3JpdGVNb2RpZmllcnMobm9kZSwgU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5NT0RJRklFUlNfUFJPUEVSVFksIHBvcyk7CiAJCX0gZWxzZSB7CiAJCQlyZXdy
aXRlTW9kaWZpZXJzMihub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLk1PRElGSUVSUzJf
UFJPUEVSVFksIHBvcyk7CiAJCX0KIAkJcG9zPSByZXdyaXRlUmVxdWlyZWROb2RlKG5vZGUsIFNp
bmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVFlQRV9QUk9QRVJUWSk7Ci0JCWlmIChub2RlLmdldEFT
VCgpLmFwaUxldmVsKCkgPj0gSkxTM19JTlRFUk5BTCkgeworCQlpZiAoYXBpTGV2ZWwgPj0gSkxT
M19JTlRFUk5BTCkgewogCQkJaWYgKGlzQ2hhbmdlZChub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xh
cmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpKSB7CiAJCQkJaWYgKGdldE5ld1ZhbHVlKG5vZGUsIFNp
bmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uVkFSQVJHU19QUk9QRVJUWSkuZXF1YWxzKEJvb2xlYW4u
VFJVRSkpIHsKIAkJCQkJZG9UZXh0SW5zZXJ0KHBvcywgIi4uLiIsIGdldEVkaXRHcm91cChub2Rl
LCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLlZBUkFSR1NfUFJPUEVSVFkpKTsgLy8kTk9OLU5M
Uy0xJApAQCAtMjg2NSwxOCArMjg5MCwyNSBAQAogCQl9CiAKIAkJcG9zPSByZXdyaXRlUmVxdWly
ZWROb2RlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uTkFNRV9QUk9QRVJUWSk7Ci0J
CWludCBleHRyYURpbXM9IHJld3JpdGVFeHRyYURpbWVuc2lvbnMobm9kZSwgSU5URVJOQUxfVkFS
SUFCTEVfRVhUUkFfRElNRU5TSU9OU19QUk9QRVJUWSwgcG9zKTsKLQotCQlpZiAoZXh0cmFEaW1z
ID4gMCkgewotCQkJaW50IGtpbmQ9IGdldENoYW5nZUtpbmQobm9kZSwgU2luZ2xlVmFyaWFibGVE
ZWNsYXJhdGlvbi5JTklUSUFMSVpFUl9QUk9QRVJUWSk7Ci0JCQlpZiAoa2luZCA9PSBSZXdyaXRl
RXZlbnQuUkVNT1ZFRCkgewotCQkJCXRyeSB7Ci0JCQkJCXBvcz0gZ2V0U2Nhbm5lcigpLmdldFBy
ZXZpb3VzVG9rZW5FbmRPZmZzZXQoVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRVFVQUwsIHBvcyk7
Ci0JCQkJfSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7Ci0JCQkJCWhhbmRsZUV4Y2VwdGlvbihl
KTsKKwkJaWYgKGFwaUxldmVsIDwgQVNULkpMUzgpIHsKKwkJCWludCBleHRyYURpbXM9IHJld3Jp
dGVFeHRyYURpbWVuc2lvbnMobm9kZSwgSU5URVJOQUxfVkFSSUFCTEVfRVhUUkFfRElNRU5TSU9O
U19QUk9QRVJUWSwgcG9zKTsKKwkJCWlmIChleHRyYURpbXMgPiAwKSB7CisJCQkJaW50IGtpbmQ9
IGdldENoYW5nZUtpbmQobm9kZSwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5JTklUSUFMSVpF
Ul9QUk9QRVJUWSk7CisJCQkJaWYgKGtpbmQgPT0gUmV3cml0ZUV2ZW50LlJFTU9WRUQpIHsKKwkJ
CQkJdHJ5IHsKKwkJCQkJCXBvcz0gZ2V0U2Nhbm5lcigpLmdldFByZXZpb3VzVG9rZW5FbmRPZmZz
ZXQoVGVybWluYWxUb2tlbnMuVG9rZW5OYW1lRVFVQUwsIHBvcyk7CisJCQkJCX0gY2F0Y2ggKENv
cmVFeGNlcHRpb24gZSkgeworCQkJCQkJaGFuZGxlRXhjZXB0aW9uKGUpOworCQkJCQl9CisJCQkJ
fSBlbHNlIHsKKwkJCQkJcG9zPSBub2RlLmdldFN0YXJ0UG9zaXRpb24oKSArIG5vZGUuZ2V0TGVu
Z3RoKCk7IC8vIGluc2VydCBwb3MKIAkJCQl9CisJCQl9CisJCX0gZWxzZSB7CisJCQlpZiAoaXND
aGFuZ2VkKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uRVhUUkFfRElNRU5TSU9OX0lO
Rk9TX1BST1BFUlRZKSkgeworCQkJCXBvcyA9IHJld3JpdGVOb2RlTGlzdChub2RlLCBTaW5nbGVW
YXJpYWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSwgcG9zLCAi
ICIsICIgIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAogCQkJfSBlbHNlIHsKLQkJCQlw
b3M9IG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpICsgbm9kZS5nZXRMZW5ndGgoKTsgLy8gaW5zZXJ0
IHBvcworCQkJCXBvcz0gZG9WaXNpdChub2RlLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkVY
VFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSwgcG9zKTsKIAkJCX0KIAkJfQogCkBAIC0zMjY1
LDE4ICszMjk3LDI1IEBACiAKIAkJaW50IHBvcz0gcmV3cml0ZVJlcXVpcmVkTm9kZShub2RlLCBW
YXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuTkFNRV9QUk9QRVJUWSk7CiAKLQkJaW50IGV4dHJh
RGltcz0gcmV3cml0ZUV4dHJhRGltZW5zaW9ucyhub2RlLCBJTlRFUk5BTF9GUkFHTUVOVF9FWFRS
QV9ESU1FTlNJT05TX1BST1BFUlRZLCBwb3MpOwotCi0JCWlmIChleHRyYURpbXMgPiAwKSB7Ci0J
CQlpbnQga2luZD0gZ2V0Q2hhbmdlS2luZChub2RlLCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21l
bnQuSU5JVElBTElaRVJfUFJPUEVSVFkpOwotCQkJaWYgKGtpbmQgPT0gUmV3cml0ZUV2ZW50LlJF
TU9WRUQpIHsKLQkJCQl0cnkgewotCQkJCQlwb3M9IGdldFNjYW5uZXIoKS5nZXRQcmV2aW91c1Rv
a2VuRW5kT2Zmc2V0KFRlcm1pbmFsVG9rZW5zLlRva2VuTmFtZUVRVUFMLCBwb3MpOwotCQkJCX0g
Y2F0Y2ggKENvcmVFeGNlcHRpb24gZSkgewotCQkJCQloYW5kbGVFeGNlcHRpb24oZSk7CisJCWlm
IChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPCBBU1QuSkxTOCkgeworCQkJaW50IGV4dHJhRGlt
cyA9IHJld3JpdGVFeHRyYURpbWVuc2lvbnMobm9kZSwgSU5URVJOQUxfRlJBR01FTlRfRVhUUkFf
RElNRU5TSU9OU19QUk9QRVJUWSwgcG9zKTsKKwkJCWlmIChleHRyYURpbXMgPiAwKSB7CisJCQkJ
aW50IGtpbmQ9IGdldENoYW5nZUtpbmQobm9kZSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
LklOSVRJQUxJWkVSX1BST1BFUlRZKTsKKwkJCQlpZiAoa2luZCA9PSBSZXdyaXRlRXZlbnQuUkVN
T1ZFRCkgeworCQkJCQl0cnkgeworCQkJCQkJcG9zPSBnZXRTY2FubmVyKCkuZ2V0UHJldmlvdXNU
b2tlbkVuZE9mZnNldChUZXJtaW5hbFRva2Vucy5Ub2tlbk5hbWVFUVVBTCwgcG9zKTsKKwkJCQkJ
fSBjYXRjaCAoQ29yZUV4Y2VwdGlvbiBlKSB7CisJCQkJCQloYW5kbGVFeGNlcHRpb24oZSk7CisJ
CQkJCX0KKwkJCQl9IGVsc2UgeworCQkJCQlwb3M9IG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpICsg
bm9kZS5nZXRMZW5ndGgoKTsgLy8gaW5zZXJ0IHBvcwogCQkJCX0KKwkJCX0KKwkJfSBlbHNlIHsK
KwkJCWlmIChpc0NoYW5nZWQobm9kZSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LkVYVFJB
X0RJTUVOU0lPTl9JTkZPU19QUk9QRVJUWSkpIHsKKwkJCQlwb3MgPSByZXdyaXRlTm9kZUxpc3Qo
bm9kZSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LkVYVFJBX0RJTUVOU0lPTl9JTkZPU19Q
Uk9QRVJUWSwgcG9zLCAiICIsICIgIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAogCQkJ
fSBlbHNlIHsKLQkJCQlwb3M9IG5vZGUuZ2V0U3RhcnRQb3NpdGlvbigpICsgbm9kZS5nZXRMZW5n
dGgoKTsgLy8gaW5zZXJ0IHBvcworCQkJCXBvcz0gZG9WaXNpdChub2RlLCBWYXJpYWJsZURlY2xh
cmF0aW9uRnJhZ21lbnQuRVhUUkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZLCBwb3MpOwogCQkJ
fQogCQl9CiAJCXJld3JpdGVOb2RlKG5vZGUsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5J
TklUSUFMSVpFUl9QUk9QRVJUWSwgcG9zLCB0aGlzLmZvcm1hdHRlci5WQVJfSU5JVElBTElaRVIp
OwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9kb20vcmV3
cml0ZS9BU1RSZXdyaXRlRmxhdHRlbmVyLmphdmEKaW5kZXggZWQ1MjFkMS4uMDZmYjAyYyAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb3JlL2RvbS9yZXdyaXRlL0FTVFJld3JpdGVGbGF0dGVuZXIuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvZG9tL3Jld3Jp
dGUvQVNUUmV3cml0ZUZsYXR0ZW5lci5qYXZhCkBAIC0xNzEsNiArMTcxLDE2IEBACiAJCX0KIAl9
CiAKKwlwcml2YXRlIHZvaWQgdmlzaXRFeHRyYURpbWVuc2lvbnMoQVNUTm9kZSBub2RlLCBTaW1w
bGVQcm9wZXJ0eURlc2NyaXB0b3IgZGltZW5zaW9ucywgQ2hpbGRMaXN0UHJvcGVydHlEZXNjcmlw
dG9yIGRpbWVuc2lvbnNJbmZvKSB7CisJCWlmIChub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPCBB
U1QuSkxTOCkgeworCQkJaW50IGV4dHJhRGltZW5zaW9ucz0gZ2V0SW50QXR0cmlidXRlKG5vZGUs
IGRpbWVuc2lvbnMpOworCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBleHRyYURpbWVuc2lvbnM7IGkr
KykgeworCQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5MUy0xJAorCQkJfQor
CQl9IGVsc2UgeyAKKwkJCXZpc2l0TGlzdChub2RlLCBkaW1lbnNpb25zSW5mbywgU3RyaW5nLnZh
bHVlT2YoJyAnKSwgU3RyaW5nLnZhbHVlT2YoJyAnKSwgVXRpbC5FTVBUWV9TVFJJTkcpOworCQl9
CisJfQogCiAJLyoKIAkgKiBAc2VlIEFTVFZpc2l0b3IjdmlzaXQoQW5vbnltb3VzQ2xhc3NEZWNs
YXJhdGlvbikKQEAgLTYwNyw3ICs2MTcsMTEgQEAKIAkJZ2V0Q2hpbGROb2RlKG5vZGUsIExhYmVs
ZWRTdGF0ZW1lbnQuQk9EWV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwogCQlyZXR1cm4gZmFsc2U7
CiAJfQotCisJcHVibGljIGJvb2xlYW4gdmlzaXQoRXh0cmFEaW1lbnNpb24gbm9kZSkgeworCQl2
aXNpdExpc3Qobm9kZSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNfUFJPUEVSVFksIFN0cmlu
Zy52YWx1ZU9mKCcgJyksIFN0cmluZy52YWx1ZU9mKCcgJyksIFN0cmluZy52YWx1ZU9mKCcgJykp
OworCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltdIik7IC8vJE5PTi1OTFMtMSQKKwkJcmV0dXJuIGZh
bHNlOworCX0KIAkvKgogCSAqIEBzZWUgQVNUVmlzaXRvciN2aXNpdChNZXRob2REZWNsYXJhdGlv
bikKIAkgKi8KQEAgLTY0MSwxMCArNjU1LDcgQEAKIAkJdGhpcy5yZXN1bHQuYXBwZW5kKCcoJyk7
CiAJCXZpc2l0TGlzdChub2RlLCBNZXRob2REZWNsYXJhdGlvbi5QQVJBTUVURVJTX1BST1BFUlRZ
LCBTdHJpbmcudmFsdWVPZignLCcpKTsKIAkJdGhpcy5yZXN1bHQuYXBwZW5kKCcpJyk7Ci0JCWlu
dCBleHRyYURpbXM9IGdldEludEF0dHJpYnV0ZShub2RlLCBJTlRFUk5BTF9NRVRIT0RfRVhUUkFf
RElNRU5TSU9OU19QUk9QRVJUWSk7Ci0JCWZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFEaW1zOyBp
KyspIHsKLQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5MUy0xJAotCQl9CisJ
CXZpc2l0RXh0cmFEaW1lbnNpb25zKG5vZGUsIElOVEVSTkFMX01FVEhPRF9FWFRSQV9ESU1FTlNJ
T05TX1BST1BFUlRZLCBNZXRob2REZWNsYXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJP
UEVSVFkpOwogCiAJCUNoaWxkTGlzdFByb3BlcnR5RGVzY3JpcHRvciBleGNlcHRpb25zUHJvcGVy
dHkgPSBub2RlLmdldEFTVCgpLmFwaUxldmVsKCkgPAlBU1QuSkxTOCA/IAogCQkJCU1ldGhvZERl
Y2xhcmF0aW9uLlRIUk9XTl9FWENFUFRJT05TX1BST1BFUlRZIDogTWV0aG9kRGVjbGFyYXRpb24u
VEhST1dOX0VYQ0VQVElPTl9UWVBFU19QUk9QRVJUWTsKQEAgLTgxMCwxMCArODIxLDcgQEAKIAkJ
fQogCQl0aGlzLnJlc3VsdC5hcHBlbmQoJyAnKTsKIAkJZ2V0Q2hpbGROb2RlKG5vZGUsIFNpbmds
ZVZhcmlhYmxlRGVjbGFyYXRpb24uTkFNRV9QUk9QRVJUWSkuYWNjZXB0KHRoaXMpOwotCQlpbnQg
ZXh0cmFEaW1lbnNpb25zPSBnZXRJbnRBdHRyaWJ1dGUobm9kZSwgSU5URVJOQUxfVkFSSUFCTEVf
RVhUUkFfRElNRU5TSU9OU19QUk9QRVJUWSk7Ci0JCWZvciAoaW50IGkgPSAwOyBpIDwgZXh0cmFE
aW1lbnNpb25zOyBpKyspIHsKLQkJCXRoaXMucmVzdWx0LmFwcGVuZCgiW10iKTsgLy8kTk9OLU5M
Uy0xJAotCQl9CisJCXZpc2l0RXh0cmFEaW1lbnNpb25zKG5vZGUsIElOVEVSTkFMX1ZBUklBQkxF
X0VYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFksIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uRVhU
UkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKIAkJQVNUTm9kZSBpbml0aWFsaXplcj0gZ2V0
Q2hpbGROb2RlKG5vZGUsIFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24uSU5JVElBTElaRVJfUFJP
UEVSVFkpOwogCQlpZiAoaW5pdGlhbGl6ZXIgIT0gbnVsbCkgewogCQkJdGhpcy5yZXN1bHQuYXBw
ZW5kKCc9Jyk7CkBAIC0xMDU1LDExICsxMDYzLDggQEAKIAkgKi8KIAlwdWJsaWMgYm9vbGVhbiB2
aXNpdChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgbm9kZSkgewogCQlnZXRDaGlsZE5vZGUo
bm9kZSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50Lk5BTUVfUFJPUEVSVFkpLmFjY2VwdCh0
aGlzKTsKLQkJaW50IGV4dHJhRGltZW5zaW9ucz0gZ2V0SW50QXR0cmlidXRlKG5vZGUsIElOVEVS
TkFMX0ZSQUdNRU5UX0VYVFJBX0RJTUVOU0lPTlNfUFJPUEVSVFkpOwotCQlmb3IgKGludCBpID0g
MDsgaSA8IGV4dHJhRGltZW5zaW9uczsgaSsrKSB7Ci0JCQl0aGlzLnJlc3VsdC5hcHBlbmQoIltd
Iik7IC8vJE5PTi1OTFMtMSQKLQkJfQogCQlBU1ROb2RlIGluaXRpYWxpemVyPSBnZXRDaGlsZE5v
ZGUobm9kZSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LklOSVRJQUxJWkVSX1BST1BFUlRZ
KTsKKwkJdmlzaXRFeHRyYURpbWVuc2lvbnMobm9kZSwgSU5URVJOQUxfRlJBR01FTlRfRVhUUkFf
RElNRU5TSU9OU19QUk9QRVJUWSwgVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50LkVYVFJBX0RJ
TUVOU0lPTl9JTkZPU19QUk9QRVJUWSk7CiAJCWlmIChpbml0aWFsaXplciAhPSBudWxsKSB7CiAJ
CQl0aGlzLnJlc3VsdC5hcHBlbmQoJz0nKTsKIAkJCWluaXRpYWxpemVyLmFjY2VwdCh0aGlzKTs=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>227269</attachid>
            <date>2013-02-19 11:55:00 -0500</date>
            <delta_ts>2013-02-19 11:55:01 -0500</delta_ts>
            <desc>Updated tests</desc>
            <filename>Fix-for-bug-396576--Tests.patch</filename>
            <type>text/plain</type>
            <size>19949</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0aG9k
RGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRlL2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nTWV0
aG9kRGVjbFRlc3QuamF2YQppbmRleCBlMDljYjdmLi5jZjY1NmQ0IDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVz
dHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ01ldGhvZERlY2xUZXN0LmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdNZXRob2REZWNsVGVzdC5q
YXZhCkBAIC0yODg3LDUgKzI4ODcsMTQyIEBACiAJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcs
IGJ1Zi50b1N0cmluZygpKTsKIAl9CisJcHVibGljIHZvaWQgdGVzdEV4dHJhRGltd2l0aEFubm90
YXRpb25zKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CisJCUlQYWNrYWdlRnJhZ21lbnQgcGFjazE9IHRo
aXMuc291cmNlRm9sZGVyLmNyZWF0ZVBhY2thZ2VGcmFnbWVudCgidGVzdDEiLCBmYWxzZSwgbnVs
bCk7CisJCVN0cmluZ0J1ZmZlciBidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVu
ZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFu
bm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGFic3RyYWN0
IGNsYXNzIEUge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzEoKVtd
IHRocm93cyBBcnJheVN0b3JlRXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYu
YXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb28yKClbXSB7IHJldHVybiBudWxsOyB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90
MiBbXSB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmpl
Y3QgZm9vNCgpQEFubm90MSBbXSBAQW5ub3QyIFtdIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNl
cHRpb24geyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2Jq
ZWN0IGZvbzUoKSBAQW5ub3QxIFtdICAgQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9XG4iKTsK
KwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vNihpbnQgaSkgIEBBbm5vdDEgW10g
QEFubm90MiBbXSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsgcmV0dXJuIG51bGw7
IH1cbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIE9iamVjdCBmb283KGludCBpKSBAQW5u
b3QxIFtdICBAQW5ub3QyIFtdIHsgcmV0dXJuIG51bGw7IH1cbiIpOworCQlidWYuYXBwZW5kKCJ9
XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0g
e0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOyAKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBB
bm5vdDEge31cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0
KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRl
cmZhY2UgQW5ub3QyIHt9XG4iKTsKIAorCQlJQ29tcGlsYXRpb25Vbml0IGN1PSBwYWNrMS5jcmVh
dGVDb21waWxhdGlvblVuaXQoIkUuamF2YSIsIGJ1Zi50b1N0cmluZygpLCBmYWxzZSwgbnVsbCk7
CisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1Q4KGN1KTsKKwkJQVNUUmV3cml0
ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgpKTsKKwkJQVNUIGFz
dD0gYXN0Um9vdC5nZXRBU1QoKTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGU9IGZpbmRUeXBlRGVj
bGFyYXRpb24oYXN0Um9vdCwgIkUiKTsKIAorCQl7CisJCQlNZXRob2REZWNsYXJhdGlvbiBtZXRo
b2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRpb24odHlwZSwgImZvbzEiKTsKKworCQkJTGlzdFJl
d3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUobWV0aG9kRGVjbCwgTWV0
aG9kRGVjbGFyYXRpb24uRVhUUkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCUV4dHJh
RGltZW5zaW9uIGRpbT0gYXN0Lm5ld0V4dHJhRGltZW5zaW9uKCk7CisJCQlNYXJrZXJBbm5vdGF0
aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJr
ZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJ
CQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0
ZS5pbnNlcnRBdChkaW0sIDEsIG51bGwpOworCisJCQlkaW09IGFzdC5uZXdFeHRyYURpbWVuc2lv
bigpOworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJ
CW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MiIp
KTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZChtYXJrZXJBbm5vdGF0aW9uKTsKKwkJCWxpc3RS
ZXdyaXRlLmluc2VydEF0KGRpbSwgMiwgbnVsbCk7CisJCQkKKwkJCUFTVE5vZGUgZXhjZXB0aW9u
ID0gKEFTVE5vZGUpIG1ldGhvZERlY2wudGhyb3duRXhjZXB0aW9uVHlwZXMoKS5nZXQoMCk7CisJ
CQlyZXdyaXRlLmdldExpc3RSZXdyaXRlKG1ldGhvZERlY2wsIE1ldGhvZERlY2xhcmF0aW9uLlRI
Uk9XTl9FWENFUFRJT05fVFlQRVNfUFJPUEVSVFkpLnJlbW92ZShleGNlcHRpb24sIG51bGwpOwor
CQl9CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNs
YXJhdGlvbih0eXBlLCAiZm9vMiIpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3Jp
dGUuZ2V0TGlzdFJld3JpdGUobWV0aG9kRGVjbCwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFfRElN
RU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKworCQkJRXh0cmFEaW1lbnNpb24gZGltPSBhc3QubmV3
RXh0cmFEaW1lbnNpb24oKTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0g
YXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5h
bWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90MSIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFk
ZChtYXJrZXJBbm5vdGF0aW9uKTsKKworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAxLCBu
dWxsKTsKKwkJCQorCQkJVHlwZSBleGNlcHRpb249IGFzdC5uZXdTaW1wbGVUeXBlKGFzdC5uZXdT
aW1wbGVOYW1lKCJBcnJheVN0b3JlRXhjZXB0aW9uIikpOworCQkJcmV3cml0ZS5nZXRMaXN0UmV3
cml0ZShtZXRob2REZWNsLCBNZXRob2REZWNsYXJhdGlvbi5USFJPV05fRVhDRVBUSU9OX1RZUEVT
X1BST1BFUlRZKS5pbnNlcnRGaXJzdChleGNlcHRpb24sIG51bGwpOworCQl9CisJCXsKKwkJCU1l
dGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAi
Zm9vMyIpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3Jp
dGUobWV0aG9kRGVjbCwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFfRElNRU5TSU9OX0lORk9TX1BS
T1BFUlRZKTsKKworCQkJRXh0cmFEaW1lbnNpb24gZGltPSBhc3QubmV3RXh0cmFEaW1lbnNpb24o
KTsKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFu
bm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBs
ZU5hbWUoIkFubm90MSIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZChtYXJrZXJBbm5vdGF0
aW9uKTsKKworCQkJbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01hcmtlckFubm90YXRpb24oKTsK
KwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5ld1NpbXBsZU5hbWUoIkFubm90
MiIpKTsKKwkJCWRpbS5hbm5vdGF0aW9ucygpLmFkZChtYXJrZXJBbm5vdGF0aW9uKTsKKwkJCWxp
c3RSZXdyaXRlLmluc2VydEF0KGRpbSwgMSwgbnVsbCk7CisJCX0KKwkJeworCQkJTWV0aG9kRGVj
bGFyYXRpb24gbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb280Iik7
CisJCQlFeHRyYURpbWVuc2lvbiBkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRy
YURpbWVuc2lvbkluZm9zKCkuZ2V0KDApOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJl
d3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9Q
RVJUWSk7CisKKwkJCU1hcmtlckFubm90YXRpb24gbWFya2VyQW5ub3RhdGlvbj0gYXN0Lm5ld01h
cmtlckFubm90YXRpb24oKTsKKwkJCW1hcmtlckFubm90YXRpb24uc2V0VHlwZU5hbWUoYXN0Lm5l
d1NpbXBsZU5hbWUoIkFubm90MiIpKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEF0KG1hcmtlckFu
bm90YXRpb24sIDAsIG51bGwpOworCisJCQlkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVj
bC5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDEpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUu
Z2V0TGlzdFJld3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7
CisKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQlt
YXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7
CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAxLCBudWxsKTsKKwkJ
fQorCQl7CisJCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFy
YXRpb24odHlwZSwgImZvbzUiKTsKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gKEV4dHJhRGltZW5z
aW9uKSBtZXRob2REZWNsLmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQoMCk7CisJCQlBbm5vdGF0
aW9uIGFubm90PSAoQW5ub3RhdGlvbikgZGltLmFubm90YXRpb25zKCkuZ2V0KDApOworCQkJTGlz
dFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBFeHRyYURp
bWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5yZW1vdmUoYW5u
b3QsIG51bGwpOworCisJCQlkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRyYURp
bWVuc2lvbkluZm9zKCkuZ2V0KDEpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJl
d3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0
UmV3cml0ZS5pbnNlcnRBdChhbm5vdCwgMSwgbnVsbCk7CisJCX0KKwkJeworCQkJTWV0aG9kRGVj
bGFyYXRpb24gbWV0aG9kRGVjbD0gZmluZE1ldGhvZERlY2xhcmF0aW9uKHR5cGUsICJmb282Iik7
CisJCQlFeHRyYURpbWVuc2lvbiBkaW09IChFeHRyYURpbWVuc2lvbikgbWV0aG9kRGVjbC5leHRy
YURpbWVuc2lvbkluZm9zKCkuZ2V0KDApOworCQkJQW5ub3RhdGlvbiBhbm5vdD0gKEFubm90YXRp
b24pIGRpbS5hbm5vdGF0aW9ucygpLmdldCgwKTsKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRl
PSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGRpbSwgRXh0cmFEaW1lbnNpb24uQU5OT1RBVElPTlNf
UFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUucmVtb3ZlKGFubm90LCBudWxsKTsKKworCQkJZGlt
PSAoRXh0cmFEaW1lbnNpb24pIG1ldGhvZERlY2wuZXh0cmFEaW1lbnNpb25JbmZvcygpLmdldCgx
KTsKKwkJCWFubm90PSAoQW5ub3RhdGlvbikgZGltLmFubm90YXRpb25zKCkuZ2V0KDApOworCQkJ
bGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5B
Tk5PVEFUSU9OU19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5yZW1vdmUoYW5ub3QsIG51bGwp
OworCQl9CisJCXsKKwkJCU1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2RE
ZWNsYXJhdGlvbih0eXBlLCAiZm9vNyIpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJl
d3JpdGUuZ2V0TGlzdFJld3JpdGUobWV0aG9kRGVjbCwgTWV0aG9kRGVjbGFyYXRpb24uRVhUUkFf
RElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gKEV4dHJh
RGltZW5zaW9uKSBtZXRob2REZWNsLmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQoMCk7CisJCQls
aXN0UmV3cml0ZS5yZW1vdmUoZGltLCBudWxsKTsKKwkJCWRpbT0gKEV4dHJhRGltZW5zaW9uKSBt
ZXRob2REZWNsLmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQoMSk7CisJCQlsaXN0UmV3cml0ZS5y
ZW1vdmUoZGltLCBudWxsKTsKKwkJfQorCisJCVN0cmluZyBwcmV2aWV3PSBldmFsdWF0ZVJld3Jp
dGUoY3UsIHJld3JpdGUpOworCQlidWY9IG5ldyBTdHJpbmdCdWZmZXIoKTsKKwkJYnVmLmFwcGVu
ZCgicGFja2FnZSB0ZXN0MTtcbiIpOworCQlidWYuYXBwZW5kKCJpbXBvcnQgamF2YS5sYW5nLmFu
bm90YXRpb24uRWxlbWVudFR5cGU7XG4iKTsKKwkJYnVmLmFwcGVuZCgicHVibGljIGFic3RyYWN0
IGNsYXNzIEUge1xuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZvbzEoKVtd
IEBBbm5vdDEgW10gQEFubm90MiBbXSB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vMigpW10gQEFubm90MSBbXSB0aHJvd3MgQXJyYXlTdG9y
ZUV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1Ymxp
YyBPYmplY3QgZm9vMygpIEBBbm5vdDEgW10gQEFubm90MSBAQW5ub3QyIFtdIEBBbm5vdDIgW10g
eyByZXR1cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIiAgICBwdWJsaWMgT2JqZWN0IGZv
bzQoKUBBbm5vdDIgQEFubm90MSBbXSBAQW5ub3QyIEBBbm5vdDEgW10gdGhyb3dzIElsbGVnYWxB
cmd1bWVudEV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAg
IHB1YmxpYyBPYmplY3QgZm9vNSgpICBbXSAgIEBBbm5vdDIgQEFubm90MSBbXSB7IHJldHVybiBu
dWxsOyB9XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vNihpbnQgaSkg
ICBbXSAgW10gdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7IHJldHVybiBudWxsOyB9
XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyBPYmplY3QgZm9vNyhpbnQgaSkgeyByZXR1
cm4gbnVsbDsgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxu
Iik7IAorCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MSB7fVxuIik7CisJCWJ1Zi5hcHBl
bmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBF
X1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlh
c3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQogfQpkaWZmIC0t
Z2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pk
dC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUZXN0LmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3JpdGluZ1Rlc3QuamF2YQppbmRleCBiM2Qx
MzY2Li5iNWE4NTUzIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJl
d3JpdGluZ1Rlc3QuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJld3Jp
dGluZ1Rlc3QuamF2YQpAQCAtMTE2LDQgKzExNiw3IEBACiAJCXJldHVybiBjcmVhdGVBU1QoSkxT
M19JTlRFUk5BTCwgY3UsIHN0YXRlbWVudHNSZWNvdmVyeSk7CiAJfQorCXByb3RlY3RlZCBDb21w
aWxhdGlvblVuaXQgY3JlYXRlQVNUOChJQ29tcGlsYXRpb25Vbml0IGN1KSB7CisJCXJldHVybiBj
cmVhdGVBU1QoQVNULkpMUzgsIGN1LCBmYWxzZSk7CisJfQogCXByb3RlY3RlZCBDb21waWxhdGlv
blVuaXQgY3JlYXRlQVNUKGludCBKTFNMZXZlbCwgSUNvbXBpbGF0aW9uVW5pdCBjdSwgYm9vbGVh
biBzdGF0ZW1lbnRzUmVjb3ZlcnkpIHsKIAkJcmV0dXJuIGNyZWF0ZUFTVChKTFNMZXZlbCwgY3Us
IGZhbHNlLCBzdGF0ZW1lbnRzUmVjb3ZlcnkpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUv
ZGVzY3JpYmluZy9BU1RSZXdyaXRpbmdUeXBlRGVjbFRlc3QuamF2YSBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9yZXdyaXRl
L2Rlc2NyaWJpbmcvQVNUUmV3cml0aW5nVHlwZURlY2xUZXN0LmphdmEKaW5kZXggZjI2ZDViMS4u
ZTEyNjRkMSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3Jj
L29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL3Jld3JpdGUvZGVzY3JpYmluZy9BU1RSZXdyaXRp
bmdUeXBlRGVjbFRlc3QuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2Rl
bC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvcmV3cml0ZS9kZXNjcmliaW5nL0FTVFJl
d3JpdGluZ1R5cGVEZWNsVGVzdC5qYXZhCkBAIC0xNjk0LDUgKzE2OTQsMjA3IEBACiAKIAl9CisJ
Ly8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5NjU3Ngor
CXB1YmxpYyB2b2lkIHRlc3RWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnRXaXRoQW5ub3QoKSB0
aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5zb3VyY2VG
b2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsKKwkJU3Ry
aW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJwYWNrYWdl
IHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5F
bGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbygpIHtcbiIpOworCQlidWYuYXBwZW5kKCIg
ICAgICAgIGludCBpLCBqLCBrID0gMCwgeCwgeSBbXSBbXSBbXSwgeiBAQW5ub3QxIFtdLCB6eiBA
QW5ub3QyIEBBbm5vdDJbXSA9IHswLCAxfTtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7
CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRp
b24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBl
bmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5h
bm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQli
dWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CisJCUlDb21waWxhdGlvblVuaXQg
Y3U9IHBhY2sxLmNyZWF0ZUNvbXBpbGF0aW9uVW5pdCgiRS5qYXZhIiwgYnVmLnRvU3RyaW5nKCks
IGZhbHNlLCBudWxsKTsKKwkJQ29tcGlsYXRpb25Vbml0IGFzdFJvb3Q9IGNyZWF0ZUFTVDgoY3Up
OworCQlBU1RSZXdyaXRlIHJld3JpdGU9IEFTVFJld3JpdGUuY3JlYXRlKGFzdFJvb3QuZ2V0QVNU
KCkpOworCQlBU1QgYXN0PSBhc3RSb290LmdldEFTVCgpOwogCisJCWFzc2VydFRydWUoIlBhcnNl
IGVycm9ycyIsIChhc3RSb290LmdldEZsYWdzKCkgJiBBU1ROb2RlLk1BTEZPUk1FRCk9PSAwKTsK
KwkJVHlwZURlY2xhcmF0aW9uIHR5cGU9IGZpbmRUeXBlRGVjbGFyYXRpb24oYXN0Um9vdCwgIkUi
KTsKKworCQlNZXRob2REZWNsYXJhdGlvbiBtZXRob2REZWNsPSBmaW5kTWV0aG9kRGVjbGFyYXRp
b24odHlwZSwgImZvbyIpOworCQlCbG9jayBibG9jaz0gbWV0aG9kRGVjbC5nZXRCb2R5KCk7CisJ
CUxpc3Qgc3RhdGVtZW50cz0gYmxvY2suc3RhdGVtZW50cygpOworCQlhc3NlcnRUcnVlKCJOdW1i
ZXIgb2Ygc3RhdGVtZW50cyBub3QgMSIsIHN0YXRlbWVudHMuc2l6ZSgpPT0gMSk7CisKKwkJVmFy
aWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCB2YXJpYWJsZURlY2xTdGF0ZW1lbnQ9IChWYXJpYWJs
ZURlY2xhcmF0aW9uU3RhdGVtZW50KSBzdGF0ZW1lbnRzLmdldCgwKTsKKwkJTGlzdCBmcmFnbWVu
dHM9IHZhcmlhYmxlRGVjbFN0YXRlbWVudC5mcmFnbWVudHMoKTsKKwkJYXNzZXJ0VHJ1ZSgiTnVt
YmVyIG9mIGZyYWdtZW50cyBub3QgNyIsIGZyYWdtZW50cy5zaXplKCk9PSA3KTsKKworCQl7IC8v
IHJlbmFtZSB2YXIsIGFkZCBkaW1lbnNpb24gd2l0aCBhbm5vdGF0aW9ucworCQkJVmFyaWFibGVE
ZWNsYXJhdGlvbkZyYWdtZW50IGZyYWdtZW50PSAoVmFyaWFibGVEZWNsYXJhdGlvbkZyYWdtZW50
KSBmcmFnbWVudHMuZ2V0KDApOworCQkJQVNUTm9kZSBuYW1lPSBhc3QubmV3U2ltcGxlTmFtZSgi
YSIpOworCQkJcmV3cml0ZS5yZXBsYWNlKGZyYWdtZW50LmdldE5hbWUoKSwgbmFtZSwgbnVsbCk7
CisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGZy
YWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuRVhUUkFfRElNRU5TSU9OX0lORk9T
X1BST1BFUlRZKTsKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gYXN0Lm5ld0V4dHJhRGltZW5zaW9u
KCk7CisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJB
bm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1w
bGVOYW1lKCJBbm5vdDEiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3Rh
dGlvbik7CisKKwkJCW1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7
CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5v
dDIiKSk7CisJCQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisJCQls
aXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDAsIG51bGwpOworCQl9CisJCXsgLy8gYWRkIGluaXRp
YWxpemVyCisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJpYWJs
ZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMSk7CisJCQlhc3NlcnRUcnVlKCJI
YXMgaW5pdGlhbGl6ZXIiLCBmcmFnbWVudC5nZXRJbml0aWFsaXplcigpPT0gbnVsbCk7CisJCQlF
eHByZXNzaW9uIGluaXRpYWxpemVyPSBhc3QubmV3TnVtYmVyTGl0ZXJhbCgiMSIpOworCQkJcmV3
cml0ZS5zZXQoZnJhZ21lbnQsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVudC5JTklUSUFMSVpF
Ul9QUk9QRVJUWSwgaW5pdGlhbGl6ZXIsIG51bGwpOworCQl9CisJCXsgLy8gcmVtb3ZlIGluaXRp
YWxpemVyIGFuZCBhZGQgZXh0cmEgZGltZW5zaW9ucyB3aXRoIGFubm90YXRpb25zCisJCQlWYXJp
YWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJh
Z21lbnQpIGZyYWdtZW50cy5nZXQoMik7CisJCQlhc3NlcnRUcnVlKCJIYXMgbm8gaW5pdGlhbGl6
ZXIiLCBmcmFnbWVudC5nZXRJbml0aWFsaXplcigpICE9IG51bGwpOworCQkJcmV3cml0ZS5yZW1v
dmUoZnJhZ21lbnQuZ2V0SW5pdGlhbGl6ZXIoKSwgbnVsbCk7CisKKwkJCUxpc3RSZXdyaXRlIGxp
c3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RSZXdyaXRlKGZyYWdtZW50LCBWYXJpYWJsZURlY2xh
cmF0aW9uRnJhZ21lbnQuRVhUUkFfRElNRU5TSU9OX0lORk9TX1BST1BFUlRZKTsKKwkJCUV4dHJh
RGltZW5zaW9uIGRpbT0gYXN0Lm5ld0V4dHJhRGltZW5zaW9uKCk7CisJCQlNYXJrZXJBbm5vdGF0
aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJr
ZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJ
CQlkaW0uYW5ub3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisJCQkKKwkJCW1hcmtl
ckFubm90YXRpb249IGFzdC5uZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0
aW9uLnNldFR5cGVOYW1lKGFzdC5uZXdTaW1wbGVOYW1lKCJBbm5vdDIiKSk7CisJCQlkaW0uYW5u
b3RhdGlvbnMoKS5hZGQobWFya2VyQW5ub3RhdGlvbik7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRB
dChkaW0sIDAsIG51bGwpOworCQl9CisJCXsgLy8gYWRkIGRpbWVuc2lvbiwgYWRkIGluaXRpYWxp
emVyCisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURl
Y2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoMyk7CisJCQlhc3NlcnRUcnVlKCJIYXMg
aW5pdGlhbGl6ZXIiLCBmcmFnbWVudC5nZXRJbml0aWFsaXplcigpPT0gbnVsbCk7CisJCQlFeHBy
ZXNzaW9uIGluaXRpYWxpemVyPSBhc3QubmV3TnVsbExpdGVyYWwoKTsKKwkJCXJld3JpdGUuc2V0
KGZyYWdtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQuSU5JVElBTElaRVJfUFJPUEVS
VFksIGluaXRpYWxpemVyLCBudWxsKTsKKworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJl
d3JpdGUuZ2V0TGlzdFJld3JpdGUoZnJhZ21lbnQsIFZhcmlhYmxlRGVjbGFyYXRpb25GcmFnbWVu
dC5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpOworCisJCQlFeHRyYURpbWVuc2lvbiBk
aW09IGFzdC5uZXdFeHRyYURpbWVuc2lvbigpOworCQkJTWFya2VyQW5ub3RhdGlvbiBtYXJrZXJB
bm5vdGF0aW9uPSBhc3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlv
bi5zZXRUeXBlTmFtZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QxIikpOworCQkJZGltLmFubm90
YXRpb25zKCkuYWRkKG1hcmtlckFubm90YXRpb24pOworCisJCQltYXJrZXJBbm5vdGF0aW9uPSBh
c3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFt
ZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QyIikpOworCQkJZGltLmFubm90YXRpb25zKCkuYWRk
KG1hcmtlckFubm90YXRpb24pOworCQkJbGlzdFJld3JpdGUuaW5zZXJ0QXQoZGltLCAwLCBudWxs
KTsKKwkJfQorCQl7IC8vIHJlbW92ZSBvbmUgZGltZW5zaW9uIGFuZCBhZGQgYW5ub3RhdGlvbnMg
Zm9yIHRoZSByZXN0IG9mIHRoZSBkaW1lbnNpb25zCisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJh
Z21lbnQgZnJhZ21lbnQ9IChWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5n
ZXQoNCk7CisKKwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gKEV4dHJhRGltZW5zaW9uKSBmcmFnbWVu
dC5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDEpOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3Jp
dGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9O
U19QUk9QRVJUWSk7CisJCQlNYXJrZXJBbm5vdGF0aW9uIG1hcmtlckFubm90YXRpb249IGFzdC5u
ZXdNYXJrZXJBbm5vdGF0aW9uKCk7CisJCQltYXJrZXJBbm5vdGF0aW9uLnNldFR5cGVOYW1lKGFz
dC5uZXdTaW1wbGVOYW1lKCJBbm5vdDEiKSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChtYXJr
ZXJBbm5vdGF0aW9uLCAwLCBudWxsKTsKKworCQkJZGltPSAoRXh0cmFEaW1lbnNpb24pIGZyYWdt
ZW50LmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQoMik7CisJCQltYXJrZXJBbm5vdGF0aW9uPSBh
c3QubmV3TWFya2VyQW5ub3RhdGlvbigpOworCQkJbWFya2VyQW5ub3RhdGlvbi5zZXRUeXBlTmFt
ZShhc3QubmV3U2ltcGxlTmFtZSgiQW5ub3QyIikpOworCQkJbGlzdFJld3JpdGU9IHJld3JpdGUu
Z2V0TGlzdFJld3JpdGUoZGltLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9OU19QUk9QRVJUWSk7
CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChtYXJrZXJBbm5vdGF0aW9uLCAwLCBudWxsKTsKKwor
CQkJbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUoZnJhZ21lbnQsIFZhcmlhYmxl
RGVjbGFyYXRpb25GcmFnbWVudC5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpOworCQkJ
bGlzdFJld3JpdGUucmVtb3ZlKChFeHRyYURpbWVuc2lvbikgZnJhZ21lbnQuZXh0cmFEaW1lbnNp
b25JbmZvcygpLmdldCgwKSwgbnVsbCk7CisJCX0KKwkJeyAvLyByZW1vdmUgYSBmcmFnbWVudAor
CQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUuZ2V0TGlzdFJld3JpdGUodmFyaWFi
bGVEZWNsU3RhdGVtZW50LCBWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50LkZSQUdNRU5UU19Q
Uk9QRVJUWSk7CisJCQlWYXJpYWJsZURlY2xhcmF0aW9uRnJhZ21lbnQgZnJhZ21lbnQ9IChWYXJp
YWJsZURlY2xhcmF0aW9uRnJhZ21lbnQpIGZyYWdtZW50cy5nZXQoNSk7CisJCQlsaXN0UmV3cml0
ZS5yZW1vdmUoZnJhZ21lbnQsIG51bGwpOworCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9IGV2YWx1
YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisKKwkJYnVmPSBuZXcgU3RyaW5nQnVmZmVyKCk7CisJ
CWJ1Zi5hcHBlbmQoInBhY2thZ2UgdGVzdDE7XG4iKTsKKwkJYnVmLmFwcGVuZCgiaW1wb3J0IGph
dmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlO1xuIik7CisJCWJ1Zi5hcHBlbmQoInB1Ymxp
YyBjbGFzcyBFIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgcHVibGljIHZvaWQgZm9vKCkge1xu
Iik7CisJCWJ1Zi5hcHBlbmQoIiAgICAgICAgaW50IGEgQEFubm90MSBAQW5ub3QyIFtdLCBqID0g
MSwgayBAQW5ub3QxIEBBbm5vdDIgW10sIHggQEFubm90MSBAQW5ub3QyIFtdID0gbnVsbCwgeSBA
QW5ub3QxW10gQEFubm90MltdLCB6eiBAQW5ub3QyIEBBbm5vdDJbXSA9IHswLCAxfTtcbiIpOwor
CQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBw
ZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQ
RV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJ
YnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRU
eXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxu
Iik7CisJCWFzc2VydEVxdWFsU3RyaW5nKHByZXZpZXcsIGJ1Zi50b1N0cmluZygpKTsKKwl9CisK
KwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk2NTc2
CisJcHVibGljIHZvaWQgdGVzdFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb25XaXRoQW5ub3RhdGlv
bnMoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJSVBhY2thZ2VGcmFnbWVudCBwYWNrMT0gdGhpcy5z
b3VyY2VGb2xkZXIuY3JlYXRlUGFja2FnZUZyYWdtZW50KCJ0ZXN0MSIsIGZhbHNlLCBudWxsKTsK
KwkJU3RyaW5nQnVmZmVyIGJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOworCQlidWYuYXBwZW5kKCJw
YWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBqYXZhLmxhbmcuYW5ub3Rh
dGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJsaWMgY2xhc3MgRSB7XG4i
KTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbyhpbnQgaSwgZmluYWwgaW50W10g
aiBAQW5ub3QxIEBBbm5vdDIgW10sIGludFtdIGsgQEFubm90MSBAQW5ub3QzIFtdIEBBbm5vdDIg
QEFubm90MyBbXSwgaW50IGwgW10pIHtcbiIpOworCQlidWYuYXBwZW5kKCIgICAgfVxuIik7CisJ
CWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2YS5sYW5nLmFubm90YXRpb24u
VGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxuIik7CisJCWJ1Zi5hcHBlbmQo
IkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVuZCgiQGphdmEubGFuZy5hbm5v
dGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVfVVNFfSlcbiIpOworCQlidWYu
YXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CisJCWJ1Zi5hcHBlbmQoIkBqYXZhLmxh
bmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlwZS5UWVBFX1VTRX0pXG4iKTsK
KwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDIge31cbiIpOworCQlJQ29tcGlsYXRpb25V
bml0IGN1PSBwYWNrMS5jcmVhdGVDb21waWxhdGlvblVuaXQoIkUuamF2YSIsIGJ1Zi50b1N0cmlu
ZygpLCBmYWxzZSwgbnVsbCk7CisJCVN5c3RlbS5vdXQucHJpbnRsbihidWYudG9TdHJpbmcoKSk7
CisJCUNvbXBpbGF0aW9uVW5pdCBhc3RSb290PSBjcmVhdGVBU1Q4KGN1KTsKKwkJQVNUUmV3cml0
ZSByZXdyaXRlPSBBU1RSZXdyaXRlLmNyZWF0ZShhc3RSb290LmdldEFTVCgpKTsKKwkJQVNUIGFz
dD0gYXN0Um9vdC5nZXRBU1QoKTsKKworCQlhc3NlcnRUcnVlKCJQYXJzZSBlcnJvcnMiLCAoYXN0
Um9vdC5nZXRGbGFncygpICYgQVNUTm9kZS5NQUxGT1JNRUQpPT0gMCk7CisJCVR5cGVEZWNsYXJh
dGlvbiB0eXBlPSBmaW5kVHlwZURlY2xhcmF0aW9uKGFzdFJvb3QsICJFIik7CisJCU1ldGhvZERl
Y2xhcmF0aW9uIG1ldGhvZERlY2w9IGZpbmRNZXRob2REZWNsYXJhdGlvbih0eXBlLCAiZm9vIik7
CisJCUxpc3QgYXJndW1lbnRzPSBtZXRob2REZWNsLnBhcmFtZXRlcnMoKTsKKworCQl7IC8vIGFk
ZCBtb2RpZmllciwgbW92ZSBleHRyYSBkaW1lbnNpb25zIGZyb20gb25lIHZhcmlhYmxlIHRvIGFu
b3RoZXIKKwkJCVNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24gZGVjbD0gKFNpbmdsZVZhcmlhYmxl
RGVjbGFyYXRpb24pIGFyZ3VtZW50cy5nZXQoMCk7CisJCQlTaW5nbGVWYXJpYWJsZURlY2xhcmF0
aW9uIGRlY2wyPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgYXJndW1lbnRzLmdldCgxKTsK
KwkJCUV4dHJhRGltZW5zaW9uIGRpbT0gKEV4dHJhRGltZW5zaW9uKSBkZWNsMi5leHRyYURpbWVu
c2lvbkluZm9zKCkuZ2V0KDApOworCQkJTGlzdFJld3JpdGUgbGlzdFJld3JpdGU9IHJld3JpdGUu
Z2V0TGlzdFJld3JpdGUoZGVjbCwgU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbi5NT0RJRklFUlMy
X1BST1BFUlRZKTsKKwkJCWxpc3RSZXdyaXRlLmluc2VydEZpcnN0KGFzdC5uZXdNb2RpZmllcihN
b2RpZmllci5Nb2RpZmllcktleXdvcmQuRklOQUxfS0VZV09SRCksIG51bGwpOworCisJCQlsaXN0
UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkZWNsMiwgU2luZ2xlVmFyaWFibGVEZWNs
YXJhdGlvbi5FWFRSQV9ESU1FTlNJT05fSU5GT1NfUFJPUEVSVFkpOworCQkJbGlzdFJld3JpdGUu
cmVtb3ZlKGRpbSwgbnVsbCk7CisJCQlsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0
ZShkZWNsLCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19Q
Uk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5pbnNlcnRBdChkaW0sIDAsIG51bGwpOworCQl9CisJ
CXsgLy8gbW92ZSBhbm5vdGF0aW9ucyBmcm9tIG9uZSBkaW0gdG8gYW5vdGhlcgorCQkJU2luZ2xl
VmFyaWFibGVEZWNsYXJhdGlvbiBkZWNsPSAoU2luZ2xlVmFyaWFibGVEZWNsYXJhdGlvbikgYXJn
dW1lbnRzLmdldCgyKTsKKwkJCUV4dHJhRGltZW5zaW9uIGRpbTE9IChFeHRyYURpbWVuc2lvbikg
ZGVjbC5leHRyYURpbWVuc2lvbkluZm9zKCkuZ2V0KDApOworCQkJRXh0cmFEaW1lbnNpb24gZGlt
Mj0gKEV4dHJhRGltZW5zaW9uKSBkZWNsLmV4dHJhRGltZW5zaW9uSW5mb3MoKS5nZXQoMSk7CisJ
CQlBbm5vdGF0aW9uIGFubm90MT0gKEFubm90YXRpb24pIGRpbTEuYW5ub3RhdGlvbnMoKS5nZXQo
MCk7CisJCQlBbm5vdGF0aW9uIGFubm90Mj0gKEFubm90YXRpb24pIGRpbTIuYW5ub3RhdGlvbnMo
KS5nZXQoMCk7CisKKwkJCUxpc3RSZXdyaXRlIGxpc3RSZXdyaXRlPSByZXdyaXRlLmdldExpc3RS
ZXdyaXRlKGRpbTEsIEV4dHJhRGltZW5zaW9uLkFOTk9UQVRJT05TX1BST1BFUlRZKTsKKwkJCWxp
c3RSZXdyaXRlLnJlcGxhY2UoYW5ub3QxLCBhbm5vdDIsIG51bGwpOworCisJCQlsaXN0UmV3cml0
ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkaW0yLCBFeHRyYURpbWVuc2lvbi5BTk5PVEFUSU9O
U19QUk9QRVJUWSk7CisJCQlsaXN0UmV3cml0ZS5yZXBsYWNlKGFubm90MiwgYW5ub3QxLCBudWxs
KTsKKwkJfQorCQl7IC8vIHJlbW92ZSBleHRyYSBkaW0KKwkJCVNpbmdsZVZhcmlhYmxlRGVjbGFy
YXRpb24gZGVjbD0gKFNpbmdsZVZhcmlhYmxlRGVjbGFyYXRpb24pIGFyZ3VtZW50cy5nZXQoMyk7
CisJCQlMaXN0UmV3cml0ZSBsaXN0UmV3cml0ZT0gcmV3cml0ZS5nZXRMaXN0UmV3cml0ZShkZWNs
LCBTaW5nbGVWYXJpYWJsZURlY2xhcmF0aW9uLkVYVFJBX0RJTUVOU0lPTl9JTkZPU19QUk9QRVJU
WSk7CisJCQlsaXN0UmV3cml0ZS5yZW1vdmUoKEV4dHJhRGltZW5zaW9uKSBkZWNsLmV4dHJhRGlt
ZW5zaW9uSW5mb3MoKS5nZXQoMCksIG51bGwpOworCQl9CisKKwkJU3RyaW5nIHByZXZpZXc9IGV2
YWx1YXRlUmV3cml0ZShjdSwgcmV3cml0ZSk7CisJCWJ1Zj0gbmV3IFN0cmluZ0J1ZmZlcigpOwor
CQlidWYuYXBwZW5kKCJwYWNrYWdlIHRlc3QxO1xuIik7CisJCWJ1Zi5hcHBlbmQoImltcG9ydCBq
YXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZTtcbiIpOworCQlidWYuYXBwZW5kKCJwdWJs
aWMgY2xhc3MgRSB7XG4iKTsKKwkJYnVmLmFwcGVuZCgiICAgIHB1YmxpYyB2b2lkIGZvbyhmaW5h
bCBpbnQgaSBAQW5ub3QxIEBBbm5vdDIgW10sIGZpbmFsIGludFtdIGosIGludFtdIGsgQEFubm90
MiBAQW5ub3QzIFtdIEBBbm5vdDEgQEFubm90MyBbXSwgaW50IGwpIHtcbiIpOworCQlidWYuYXBw
ZW5kKCIgICAgfVxuIik7CisJCWJ1Zi5hcHBlbmQoIn1cbiIpOworCQlidWYuYXBwZW5kKCJAamF2
YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0KHZhbHVlPSB7RWxlbWVudFR5cGUuVFlQRV9VU0V9KVxu
Iik7CisJCWJ1Zi5hcHBlbmQoIkBpbnRlcmZhY2UgQW5ub3QxIHt9XG4iKTsKKwkJYnVmLmFwcGVu
ZCgiQGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldCh2YWx1ZT0ge0VsZW1lbnRUeXBlLlRZUEVf
VVNFfSlcbiIpOworCQlidWYuYXBwZW5kKCJAaW50ZXJmYWNlIEFubm90MiB7fVxuIik7CisJCWJ1
Zi5hcHBlbmQoIkBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQodmFsdWU9IHtFbGVtZW50VHlw
ZS5UWVBFX1VTRX0pXG4iKTsKKwkJYnVmLmFwcGVuZCgiQGludGVyZmFjZSBBbm5vdDIge31cbiIp
OworCQlhc3NlcnRFcXVhbFN0cmluZyhwcmV2aWV3LCBidWYudG9TdHJpbmcoKSk7CisJfQogCiA=
</data>

          </attachment>
      

    </bug>

</bugzilla>