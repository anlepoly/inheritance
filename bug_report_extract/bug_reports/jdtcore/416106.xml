<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>416106</bug_id>
          
          <creation_ts>2013-08-29 02:48:00 -0400</creation_ts>
          <short_desc>I build failure - testPackageFragmentRootNonJavaResources3</short_desc>
          <delta_ts>2013-09-02 00:33:12 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4 M2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Manoj Palat Away Until May 11 2015">manpalat</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>thanh.ha</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2300389</commentid>
    <comment_count>0</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-08-29 02:48:13 -0400</bug_when>
    <thetext>Failed at http://download.eclipse.org/eclipse/downloads/drops4/I20130828-1800/testresults/html/org.eclipse.jdt.core.tests.model_linux.gtk.x86_6.0.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2300390</commentid>
    <comment_count>1</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-08-29 02:50:21 -0400</bug_when>
    <thetext>unexpected non java resources. ----------- Expected ------------ META-INF\n MANIFEST.MF ------------ but was ------------ META-INF\n MANIFEST.MF\n ECLIPSE_.SF\n ECLIPSE_.RSA --------- Difference is ---------- expected:&lt;...-INF\n MANIFEST.MF[]&gt; but was:&lt;...-INF\n MANIFEST.MF[\n ECLIPSE_.SF\n ECLIPSE_.RSA]&gt; 

junit.framework.ComparisonFailure: unexpected non java resources.
----------- Expected ------------
META-INF\n
MANIFEST.MF
------------ but was ------------
META-INF\n
MANIFEST.MF\n
ECLIPSE_.SF\n
ECLIPSE_.RSA
--------- Difference is ----------
expected:&lt;...-INF\n
MANIFEST.MF[]&gt; but was:&lt;...-INF\n
MANIFEST.MF[\n
ECLIPSE_.SF\n
ECLIPSE_.RSA]&gt;
at org.eclipse.jdt.core.tests.junit.extension.TestCase.assertStringEquals(TestCase.java:238)
at org.eclipse.jdt.core.tests.junit.extension.TestCase.assertEquals(TestCase.java:214)
at org.eclipse.jdt.core.tests.model.AbstractJavaModelTests.assertResourceTreeEquals(AbstractJavaModelTests.java:588)
at org.eclipse.jdt.core.tests.model.JavaProjectTests.testPackageFragmentRootNonJavaResources3(JavaProjectTests.java:1498)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.runTest(SuiteOfTestCases.java:104)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.superRun(SuiteOfTestCases.java:88)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$1.protect(SuiteOfTestCases.java:76)
at org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.run(SuiteOfTestCases.java:85)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:655)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:310)
at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:36)
at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:32)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:109)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:80)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:372)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:226)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)
at org.eclipse.equinox.launcher.Main.run(Main.java:1450)
at org.eclipse.equinox.launcher.Main.main(Main.java:1426)
at org.eclipse.core.launcher.Main.main(Main.java:34)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2300392</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-08-29 02:51:52 -0400</bug_when>
    <thetext>This occurs only in the nightly build and looks related to the signing of the JAR files. I will take a look at this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2300511</commentid>
    <comment_count>3</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-08-29 07:00:56 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; This occurs only in the nightly build and looks related to the signing of
&gt; the JAR files. I will take a look at this.

It&apos;s the other way around, since N-builds aren&apos;t signed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2300522</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-08-29 07:22:12 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; (In reply to comment #2)
&gt; &gt; This occurs only in the nightly build and looks related to the signing of
&gt; &gt; the JAR files. I will take a look at this.
&gt; 
&gt; It&apos;s the other way around, since N-builds aren&apos;t signed.

Yes, that&apos;s what I meant. Anyway, looks like we already made a fix to the eclipse.inf in the corresponding project via bug 401141. But I don&apos;t know why it came back.

Thanh, I see this in the eclipse.inf:

jarprocessor.exclude.pack=true
jarprocessor.exclude.children=true

This should have been enough, right?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2300632</commentid>
    <comment_count>5</comment_count>
    <who name="Thanh Ha">thanh.ha</who>
    <bug_when>2013-08-29 09:39:27 -0400</bug_when>
    <thetext>(In reply to comment #4)
&gt; (In reply to comment #3)
&gt; &gt; (In reply to comment #2)
&gt; &gt; &gt; This occurs only in the nightly build and looks related to the signing of
&gt; &gt; &gt; the JAR files. I will take a look at this.
&gt; &gt; 
&gt; &gt; It&apos;s the other way around, since N-builds aren&apos;t signed.
&gt; 
&gt; Yes, that&apos;s what I meant. Anyway, looks like we already made a fix to the
&gt; eclipse.inf in the corresponding project via bug 401141. But I don&apos;t know
&gt; why it came back.
&gt; 
&gt; Thanh, I see this in the eclipse.inf:
&gt; 
&gt; jarprocessor.exclude.pack=true
&gt; jarprocessor.exclude.children=true
&gt; 
&gt; This should have been enough, right?

Jay, see David&apos;s comment in Bug 401098 comment 13.

Basically as we found out Bug 412850 Tycho does not support the eclipse.inf file settings and according to Tycho developers it would be difficult for them to support this so we decided to implement this in a different way inside the jarsigner plugin.


You will need to add additional pom.xml changes which David explains your options in Bug 401098 comment 13. Let me know if anything can be clarified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2301087</commentid>
    <comment_count>6</comment_count>
      <attachid>235002</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-08-30 01:16:16 -0400</bug_when>
    <thetext>Created attachment 235002
Patch with pom changes

There were two bundles that required this:

org.eclipse.jdt.core.tests.compiler
org.eclipse.jdt.core.tests.model
org.eclipse.jdt.core

I know it shouldn&apos;t matter, but just to make sure that nightly builds won&apos;t be broken, I will build it locally before pushing it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2301143</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-08-30 03:30:58 -0400</bug_when>
    <thetext>The local build went alright and released the pom changes here:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=3d56013cb187944d7b87c9178836e465733a4159

Will have to wait for the next I build to see the results, though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2301688</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-09-02 00:33:12 -0400</bug_when>
    <thetext>Test have been passing in the last two I builds and I have also verified that ecj.jar is not signed in build I20130830-2000.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>235002</attachid>
            <date>2013-08-30 01:16:00 -0400</date>
            <delta_ts>2013-08-30 01:16:16 -0400</delta_ts>
            <desc>Patch with pom changes</desc>
            <filename>FIx-for-bug-416106.patch</filename>
            <type>text/plain</type>
            <size>1258</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3BvbS54bWwg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9wb20ueG1sCmluZGV4IDA4MGEz
NTAuLmQzNjM5MWIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBp
bGVyL3BvbS54bWwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvcG9t
LnhtbApAQCAtMjIsMyArMjIsOCBAQAogICA8dmVyc2lvbj4zLjkuMC1TTkFQU0hPVDwvdmVyc2lv
bj4KICAgPHBhY2thZ2luZz5lY2xpcHNlLXRlc3QtcGx1Z2luPC9wYWNrYWdpbmc+CisgIAorICA8
cHJvcGVydGllcz4KKyAgICA8ZGVmYXVsdFNpZ25pbmctZXhjbHVkZUlubmVySmFycz50cnVlPC9k
ZWZhdWx0U2lnbmluZy1leGNsdWRlSW5uZXJKYXJzPgorICA8L3Byb3BlcnRpZXM+CisKIDwvcHJv
amVjdD4KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3BvbS54
bWwgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9wb20ueG1sCmluZGV4IDVhZDY0
N2QuLjYxMWE5NjMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVs
L3BvbS54bWwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvcG9tLnhtbApA
QCAtMjMsNCArMjMsOCBAQAogICA8cGFja2FnaW5nPmVjbGlwc2UtdGVzdC1wbHVnaW48L3BhY2th
Z2luZz4KIAorICA8cHJvcGVydGllcz4KKyAgICA8ZGVmYXVsdFNpZ25pbmctZXhjbHVkZUlubmVy
SmFycz50cnVlPC9kZWZhdWx0U2lnbmluZy1leGNsdWRlSW5uZXJKYXJzPgorICA8L3Byb3BlcnRp
ZXM+CisKICAgPGJ1aWxkPgogICAgIDxwbHVnaW5zPgpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvcG9tLnhtbCBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL3BvbS54bWwKaW5kZXggNGU5
MDhiZi4uMWNkMmI5YyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvcG9tLnhtbAor
KysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9wb20ueG1sCkBAIC0yMiw0ICsyMiw4IEBACiAgIDxw
YWNrYWdpbmc+ZWNsaXBzZS1wbHVnaW48L3BhY2thZ2luZz4KIAorICA8cHJvcGVydGllcz4KKyAg
ICA8ZGVmYXVsdFNpZ25pbmctZXhjbHVkZUlubmVySmFycz50cnVlPC9kZWZhdWx0U2lnbmluZy1l
eGNsdWRlSW5uZXJKYXJzPgorICA8L3Byb3BlcnRpZXM+CisKICAgPGJ1aWxkPgogICAgIDxwbHVn
aW5zPg==
</data>

          </attachment>
      

    </bug>

</bugzilla>