<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>438012</bug_id>
          
          <creation_ts>2014-06-24 05:32:00 -0400</creation_ts>
          <short_desc>[1.8][null] Bogus Warning: The nullness annotation is redundant with a default that applies to this location</short_desc>
          <delta_ts>2014-08-05 05:20:30 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M1</target_milestone>
          
          <blocked>438458</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Clovis Seragiotto">clovis.seragiotto</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>clovis.seragiotto</cc>
    
    <cc>srikanth_sankaran</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2419716</commentid>
    <comment_count>0</comment_count>
    <who name="Clovis Seragiotto">clovis.seragiotto</who>
    <bug_when>2014-06-24 05:32:22 -0400</bug_when>
    <thetext>For the program below (which has no nullness annotation except for @NonNullByDefault), the compiler issues the warning &quot;The nullness annotation is redundant with a default that applies to this location&quot;

import org.eclipse.jdt.annotation.NonNullByDefault;
import static org.eclipse.jdt.annotation.DefaultLocation.*;

@NonNullByDefault({ PARAMETER, RETURN_TYPE, FIELD, TYPE_BOUND, TYPE_ARGUMENT, TYPE_PARAMETER })
interface Bar&lt;V&gt; {
    V getV();
}

By choosing the quick fix &quot;remove redundant nullness annotation&quot;, one gets:
An exception occurred while applying the quick fix: The fix &apos;Remove redundant nullness annotation&apos; generated a null change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2421317</commentid>
    <comment_count>1</comment_count>
    <who name="Clovis Seragiotto">clovis.seragiotto</who>
    <bug_when>2014-06-27 04:20:03 -0400</bug_when>
    <thetext>In fact, 
@NonNullByDefault({ RETURN_TYPE, TYPE_PARAMETER })
suffices to reproduce the error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2430239</commentid>
    <comment_count>2</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-07-22 09:56:04 -0400</bug_when>
    <thetext>I have a fix under test:

By using a default for TYPE_PARAMETER, V is a nonnull type. When we fill in the defaults for the signature of getV() we find:
- the return type is already nonnull
- a nonnull default shall be applied to the return type
This _looks_ like redundant specification.

Fixed by checking whether the method return has an explicit annotation (AST). Since the parser associates top-level return annotations to the method, that&apos;s where we actually look.
Similar change is also made for parameters.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2430375</commentid>
    <comment_count>3</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-07-22 11:57:35 -0400</bug_when>
    <thetext>Released for 4.5 M1 via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=68b132a771077222c8a489923225ada23ba86a6a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2435557</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-08-05 05:20:30 -0400</bug_when>
    <thetext>Verified for 4.5 M1 using 
Version: Mars (4.5)
Build id: I20140804-2000</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>