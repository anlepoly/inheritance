<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>396299</bug_id>
          
          <creation_ts>2012-12-11 12:01:00 -0500</creation_ts>
          <short_desc>Incompatible required libraries problem is not updated when compliance changes</short_desc>
          <delta_ts>2013-01-29 06:01:17 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>4.3 M5</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dani Megert">daniel_megert</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>jarthana</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2193136</commentid>
    <comment_count>0</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2012-12-11 12:01:54 -0500</bug_when>
    <thetext>I20121210-2000.

1. start new workspace with a JRE 7
2. create a Java project
3. on the project set &apos;Incompatible required libraries&apos; to &apos;Error&apos;
4. change the compliance to something lower, e.g. 1.6
   ==&gt;  Bug: no error appears
5. Clean and rebuild
   ==&gt;  even worse: no error appears

Only closing and reopening the project makes the error appear.


I did  not check whether this is a regression.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2193445</commentid>
    <comment_count>1</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-12-12 03:43:36 -0500</bug_when>
    <thetext>The classpath validation is triggered only during the resource change event or the classpath has changed. May be we should trigger a validation for this particular preference change also. Will investigate for M5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2208369</commentid>
    <comment_count>2</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-28 01:54:56 -0500</bug_when>
    <thetext>(In reply to comment #0)
&gt; I20121210-2000.
&gt; 
&gt; 1. start new workspace with a JRE 7
&gt; 2. create a Java project
&gt; 3. on the project set &apos;Incompatible required libraries&apos; to &apos;Error&apos;
&gt; 4. change the compliance to something lower, e.g. 1.6
&gt;    ==&gt;  Bug: no error appears
&gt; 5. Clean and rebuild
&gt;    ==&gt;  even worse: no error appears

Just to clarify and confirm, only the compliance level should be considered for the validation and NOT the source compatibility, right?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2208408</commentid>
    <comment_count>3</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-01-28 04:17:46 -0500</bug_when>
    <thetext>(In reply to comment #2)
&gt; (In reply to comment #0)
&gt; &gt; I20121210-2000.
&gt; &gt; 
&gt; &gt; 1. start new workspace with a JRE 7
&gt; &gt; 2. create a Java project
&gt; &gt; 3. on the project set &apos;Incompatible required libraries&apos; to &apos;Error&apos;
&gt; &gt; 4. change the compliance to something lower, e.g. 1.6
&gt; &gt;    ==&gt;  Bug: no error appears
&gt; &gt; 5. Clean and rebuild
&gt; &gt;    ==&gt;  even worse: no error appears
&gt; 
&gt; Just to clarify and confirm, only the compliance level should be considered
&gt; for the validation and NOT the source compatibility, right?

This bug here is just about the fact that it doesn&apos;t update the markers. What this warning should do is under constructions, see bug 390446 for details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2209057</commentid>
    <comment_count>4</comment_count>
      <attachid>226236</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-29 00:08:28 -0500</bug_when>
    <thetext>Created attachment 226236
Patch with test

This could have been a good bug for Shanka on work on, but I already had a patch lying around. Added a test too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2209064</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-29 01:47:39 -0500</bug_when>
    <thetext>Released in master for 4.3 M5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2209148</commentid>
    <comment_count>6</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-01-29 06:01:17 -0500</bug_when>
    <thetext>Verified in &apos;master&apos;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>226236</attachid>
            <date>2013-01-29 00:08:00 -0500</date>
            <delta_ts>2013-01-29 00:08:28 -0500</delta_ts>
            <desc>Patch with test</desc>
            <filename>Fix-for-bug-396299.patch</filename>
            <type>text/plain</type>
            <size>4985</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9DbGFzc3BhdGhUZXN0cy5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21v
ZGVsL0NsYXNzcGF0aFRlc3RzLmphdmEKaW5kZXggYzAwY2FkMi4uZWNkMDIxZiAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL21vZGVsL0NsYXNzcGF0aFRlc3RzLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL21vZGVsL0Ns
YXNzcGF0aFRlc3RzLmphdmEKQEAgLTEsNCArMSw0IEBACiAvKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
LgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
LgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55
aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0
aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCkBAIC0zNDUsNCArMzQ1LDUgQEAKIAlzdWl0
ZS5hZGRUZXN0KG5ldyBDbGFzc3BhdGhUZXN0cygidGVzdEJ1ZzIyMDkyOGEiKSk7CiAJc3VpdGUu
YWRkVGVzdChuZXcgQ2xhc3NwYXRoVGVzdHMoInRlc3RCdWcyMjA5MjhiIikpOworCXN1aXRlLmFk
ZFRlc3QobmV3IENsYXNzcGF0aFRlc3RzKCJ0ZXN0QnVnMzk2Mjk5IikpOwogCXJldHVybiBzdWl0
ZTsKIH0KQEAgLTc0MjEsMyArNzQyMiw0MiBAQAogCX0KIH0KKy8vIGh0dHBzOi8vYnVncy5lY2xp
cHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zOTYyOTkKK3B1YmxpYyB2b2lkIHRlc3RCdWcz
OTYyOTkoKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwlib29sZWFuIGF1dG9CdWlsZCA9IGdldFdvcmtz
cGFjZSgpLmlzQXV0b0J1aWxkaW5nKCk7CisJSVdvcmtzcGFjZURlc2NyaXB0aW9uIHByZWZlcmVu
Y2VzID0gZ2V0V29ya3NwYWNlKCkuZ2V0RGVzY3JpcHRpb24oKTsKKwl0cnkgeworCQlKYXZhTW9k
ZWxNYW5hZ2VyLkVjbGlwc2VQcmVmZXJlbmNlc0xpc3RlbmVyIHByZWZMaXN0ZW5lciA9IG5ldyBK
YXZhTW9kZWxNYW5hZ2VyLkVjbGlwc2VQcmVmZXJlbmNlc0xpc3RlbmVyKCk7CisJCXByZWZlcmVu
Y2VzLnNldEF1dG9CdWlsZGluZyh0cnVlKTsKKwkJZ2V0V29ya3NwYWNlKCkuc2V0RGVzY3JpcHRp
b24ocHJlZmVyZW5jZXMpOworCisJCUphdmFQcm9qZWN0IHByb2oxID0gIChKYXZhUHJvamVjdCkg
dGhpcy5jcmVhdGVKYXZhUHJvamVjdCgiUDEiLCBuZXcgU3RyaW5nW10ge30sICIiKTsKKwkJYWRk
TGlicmFyeShwcm9qMSwgImFiYy5qYXIiLCBudWxsLCBuZXcgU3RyaW5nW10geworCQkJCSJwL1gu
amF2YSIsCisJCQkJInBhY2thZ2UgcDtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7fVxuIn0s
CisJCQkJSmF2YUNvcmUuVkVSU0lPTl8xXzQpOworCQlwcm9qMS5zZXRPcHRpb24oSmF2YUNvcmUu
Q09NUElMRVJfQ09ERUdFTl9UQVJHRVRfUExBVEZPUk0sIEphdmFDb3JlLlZFUlNJT05fMV80KTsK
KworCQlNYXAgbWFwID0gcHJvajEuZ2V0T3B0aW9ucyhmYWxzZSk7CisJCW1hcC5wdXQoSmF2YUNv
cmUuQ09SRV9JTkNPTVBBVElCTEVfSkRLX0xFVkVMLCBKYXZhQ29yZS5XQVJOSU5HKTsKKwkJcHJv
ajEuc2V0T3B0aW9ucyhtYXApOworCisJCUlFY2xpcHNlUHJlZmVyZW5jZXMgZWNsaXBzZVByZWZl
cmVuY2VzID0gcHJvajEuZ2V0RWNsaXBzZVByZWZlcmVuY2VzKCk7CisJCWVjbGlwc2VQcmVmZXJl
bmNlcy5hZGRQcmVmZXJlbmNlQ2hhbmdlTGlzdGVuZXIocHJlZkxpc3RlbmVyKTsKKwkJc2ltdWxh
dGVFeGl0UmVzdGFydCgpOworCQl3YWl0Rm9yQXV0b0J1aWxkKCk7CisJCWFzc2VydE1hcmtlcnMo
IlVuZXhwZWN0ZWQgbWFya2VycyIsICIiLCBwcm9qMSk7CisJCW1hcCA9IHByb2oxLmdldE9wdGlv
bnMoZmFsc2UpOworCQltYXAucHV0KEphdmFDb3JlLkNPTVBJTEVSX0NPREVHRU5fVEFSR0VUX1BM
QVRGT1JNLCBKYXZhQ29yZS5WRVJTSU9OXzFfMSk7CisJCXByb2oxLnNldE9wdGlvbnMobWFwKTsK
KworCQlhc3NlcnRNYXJrZXJzKCJVbmV4cGVjdGVkIG1hcmtlcnMiLAorCQkJCSJJbmNvbXBhdGli
bGUgLmNsYXNzIGZpbGVzIHZlcnNpb24gaW4gcmVxdWlyZWQgYmluYXJpZXMuIFByb2plY3QgXCdQ
MVwnIGlzIHRhcmdldGluZyBhIDEuMSBydW50aW1lLCBidXQgaXMgY29tcGlsZWQgYWdhaW5zdCBc
J1AxL2FiYy5qYXJcJyB3aGljaCByZXF1aXJlcyBhIDEuNCBydW50aW1lIiwgcHJvajEpOworCQkg
ZWNsaXBzZVByZWZlcmVuY2VzLnJlbW92ZVByZWZlcmVuY2VDaGFuZ2VMaXN0ZW5lcihwcmVmTGlz
dGVuZXIpOworCX0gZmluYWxseSB7CisJCXByZWZlcmVuY2VzLnNldEF1dG9CdWlsZGluZyhhdXRv
QnVpbGQpOworCQlnZXRXb3Jrc3BhY2UoKS5zZXREZXNjcmlwdGlvbihwcmVmZXJlbmNlcyk7CisJ
CWRlbGV0ZVByb2plY3QoIlAxIik7CisJfQorfQogfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvSmF2YU1vZGVsTWFu
YWdlci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvcmUvSmF2YU1vZGVsTWFuYWdlci5qYXZhCmluZGV4IDU3YWE5NGMuLjE5MWU1ZWMg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL0phdmFNb2RlbE1hbmFnZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhTW9kZWxNYW5hZ2Vy
LmphdmEKQEAgLTEsNCArMSw0IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJp
Z2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJp
Z2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJp
Z2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFs
cwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQ
dWJsaWMgTGljZW5zZSB2MS4wCkBAIC0xNDgyLDQgKzE0ODIsNSBAQAogCQkJCQlwcm9wZXJ0eU5h
bWUuZXF1YWxzKEphdmFDb3JlLkNPUkVfQ0lSQ1VMQVJfQ0xBU1NQQVRIKSB8fAogCQkJCQlwcm9w
ZXJ0eU5hbWUuZXF1YWxzKEphdmFDb3JlLkNPUkVfSU5DT01QQVRJQkxFX0pES19MRVZFTCkgfHwK
KwkJCQkJcHJvcGVydHlOYW1lLmVxdWFscyhKYXZhQ29yZS5DT01QSUxFUl9DT0RFR0VOX1RBUkdF
VF9QTEFURk9STSkgfHwKIAkJCQkJcHJvcGVydHlOYW1lLmVxdWFscyhKYXZhQ29yZS5DT1JFX09V
VFBVVF9MT0NBVElPTl9PVkVSTEFQUElOR19BTk9USEVSX1NPVVJDRSkpIHsKIAkJCQkJSmF2YU1v
ZGVsTWFuYWdlciBtYW5hZ2VyID0gSmF2YU1vZGVsTWFuYWdlci5nZXRKYXZhTW9kZWxNYW5hZ2Vy
KCk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29yZS9KYXZhUHJvamVjdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUv
bW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvSmF2YVByb2plY3QuamF2YQppbmRl
eCBjNzhjNjk3Li40YWMyZWQ3IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2Rl
bC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhUHJvamVjdC5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0ph
dmFQcm9qZWN0LmphdmEKQEAgLTEsNCArMSw0IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgot
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgor
ICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgog
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCkBAIC0xNTI5LDUgKzE1MjksNiBAQAogCQkJCQkJ
cHJvcGVydHlOYW1lLmVxdWFscyhKYXZhQ29yZS5DT1JFX0NJUkNVTEFSX0NMQVNTUEFUSCkgfHwK
IAkJCQkJCXByb3BlcnR5TmFtZS5lcXVhbHMoSmF2YUNvcmUuQ09SRV9PVVRQVVRfTE9DQVRJT05f
T1ZFUkxBUFBJTkdfQU5PVEhFUl9TT1VSQ0UpIHx8Ci0JCQkJCQlwcm9wZXJ0eU5hbWUuZXF1YWxz
KEphdmFDb3JlLkNPUkVfSU5DT01QQVRJQkxFX0pES19MRVZFTCkpCisJCQkJCQlwcm9wZXJ0eU5h
bWUuZXF1YWxzKEphdmFDb3JlLkNPUkVfSU5DT01QQVRJQkxFX0pES19MRVZFTCkgfHwKKwkJCQkJ
CXByb3BlcnR5TmFtZS5lcXVhbHMoSmF2YUNvcmUuQ09NUElMRVJfQ09ERUdFTl9UQVJHRVRfUExB
VEZPUk0pKQogCQkJCQl7CiAJCQkJCQltYW5hZ2VyLmRlbHRhU3RhdGUuYWRkQ2xhc3NwYXRoVmFs
aWRhdGlvbihKYXZhUHJvamVjdC50aGlzKTs=
</data>

          </attachment>
      

    </bug>

</bugzilla>