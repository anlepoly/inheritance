<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>400060</bug_id>
          
          <creation_ts>2013-02-06 03:24:00 -0500</creation_ts>
          <short_desc>[misc] Errors in log from fetching Javadoc when working disconnected</short_desc>
          <delta_ts>2013-03-12 06:21:57 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.5</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.3 M6</target_milestone>
          <dependson>247845</dependson>
    
    <dependson>400062</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dani Megert">daniel_megert</reporter>
          <assigned_to name="Manju Mathew">manju656</assigned_to>
          <cc>anchakrk</cc>
    
    <cc>daniel_megert</cc>
    
    <cc>david_audel</cc>
    
    <cc>jarthana</cc>
    
    <cc>john_arthorne</cc>
    
    <cc>manju656</cc>
    
    <cc>Olivier_Thomann</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="55768"
          type_id="1"
          status="+"
          setter="daniel_megert"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2212772</commentid>
    <comment_count>0</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-06 03:24:43 -0500</bug_when>
    <thetext>+++ This bug was initially created as a clone of Bug #247845 +++

While it is good that JDT Core does not log those exceptions, it should pass them back to the client.

Currently, we can&apos;t show the user that the attached Javadoc could not be accessed.


This part of &apos;JavaElement.getURLContents(String)&apos; needs to be changed:

		} catch (FileNotFoundException e) {
			// ignore. see bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=120559
		} catch(SocketException e) {
			// ignore. see bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=247845
		} catch(UnknownHostException e) {
			// ignore. see bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=247845
		} catch(ProtocolException e) {
			// ignore. see bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=247845</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2212775</commentid>
    <comment_count>1</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-06 03:29:45 -0500</bug_when>
    <thetext>Manju will prepare a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2220751</commentid>
    <comment_count>2</comment_count>
      <attachid>227455</attachid>
    <who name="Manju Mathew">manju656</who>
    <bug_when>2013-02-22 07:47:58 -0500</bug_when>
    <thetext>Created attachment 227455
Fix.

Previously ignored exceptions in JavaElement is now thrown using =&gt;
throw new JavaModelException(e, IJavaModelStatusConstants.CANNOT_RETRIEVE_ATTACHED_JAVADOC);

Clients will have to handle these exceptions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2220928</commentid>
    <comment_count>3</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-22 12:25:35 -0500</bug_when>
    <thetext>Jay, the patch is good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222194</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-26 12:49:24 -0500</bug_when>
    <thetext>This fix breaks couple of existing tests, one of them added as part of bug 398272. Both the failures are about JME being thrown for packages that don&apos;t have a javadoc file. In other words, package fragment is not handling the exception. Perhaps we should leave out the FileNotFoundException or mark the JME in case of FNFE in a way PackageFragment could recognize and handle it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222402</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-27 01:47:09 -0500</bug_when>
    <thetext>(In reply to comment #4)
&gt; Perhaps we should leave out the FileNotFoundException or mark the
&gt; JME in case of FNFE in a way PackageFragment could recognize and handle it?

Sorry, I didn&apos;t look at the patch close enough. The JME indeed wraps the original exception and that should allow clients to handle accordingly to the the cause.

I will fix the failing code to handle FileNotFoundException.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222410</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-27 02:18:09 -0500</bug_when>
    <thetext>I have released the patch and the other changes required. The current HEAD is here:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=843baf8e7455ebd3d6835c29e35eba1ff6fd62f0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222436</commentid>
    <comment_count>7</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-27 03:20:17 -0500</bug_when>
    <thetext>(In reply to comment #5)
&gt; (In reply to comment #4)
&gt; &gt; Perhaps we should leave out the FileNotFoundException or mark the
&gt; &gt; JME in case of FNFE in a way PackageFragment could recognize and handle it?
&gt; 
&gt; Sorry, I didn&apos;t look at the patch close enough. The JME indeed wraps the
&gt; original exception and that should allow clients to handle accordingly to
&gt; the the cause.
&gt; 
&gt; I will fix the failing code to handle FileNotFoundException.

The code you added in PackageFragment is wrong and destroys the purpose of the fix. With that change we again do not get the exception on the client side and this is  wrong. If that lets a test fail, then you need to adjust the test, not the code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222454</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-27 03:56:42 -0500</bug_when>
    <thetext>So, it looks like we are revisiting the fix for bug 398272 and moving the fix to the client. I thought I should preserve the fix made for aforementioned fix but this bug was actually trying to roll back it in a way.

I have reverted the changes to the PackageFragment and introduced new changes to the tests now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222455</commentid>
    <comment_count>9</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-27 04:00:16 -0500</bug_when>
    <thetext>(In reply to comment #8)
&gt; So, it looks like we are revisiting the fix for bug 398272 and moving the
&gt; fix to the client. I thought I should preserve the fix made for
&gt; aforementioned fix but this bug was actually trying to roll back it in a way.
&gt; 
&gt; I have reverted the changes to the PackageFragment and introduced new
&gt; changes to the tests now.

The Javadoc says it all. There are two cases:
1. there *is* no Javadoc (e.g. no URL specified) ==&gt; &apos;null&apos;
2. then there is the case when an exception happens, and this must be reported
   to the client as specified</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222460</commentid>
    <comment_count>10</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-27 04:13:53 -0500</bug_when>
    <thetext>(In reply to comment #8)
&gt; I have reverted the changes to the PackageFragment and introduced new
&gt; changes to the tests now.

Thanks Jay. All our old and new tests pass now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2226008</commentid>
    <comment_count>11</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-03-05 00:49:14 -0500</bug_when>
    <thetext>Marking as Resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2229362</commentid>
    <comment_count>12</comment_count>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2013-03-12 05:13:58 -0400</bug_when>
    <thetext>Verified for M6 build eclipse-SDK-I20130310-2000</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>227455</attachid>
            <date>2013-02-22 07:47:00 -0500</date>
            <delta_ts>2013-02-22 12:25:57 -0500</delta_ts>
            <desc>Fix.</desc>
            <filename>400060_ThrowPreviouslyIgnoredExceptions_20130222.patch</filename>
            <type>text/plain</type>
            <size>2585</size>
            <attacher name="Manju Mathew">manju656</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb3JlL0phdmFFbGVtZW50LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2Rl
bC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhRWxlbWVudC5qYXZhCmluZGV4IDlh
NTgwZTcuLjlhMDk4OWEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0phdmFFbGVtZW50LmphdmEKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvSmF2YUVs
ZW1lbnQuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBD
b3B5cmlnaHQgKGMpIDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBD
b3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBB
bGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0
ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xp
cHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJp
YnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC04MTYsMTQgKzgxNiwyMiBAQAogCQl9IGNh
dGNoIChNYWxmb3JtZWRVUkxFeGNlcHRpb24gZSkgewogCQkJdGhyb3cgbmV3IEphdmFNb2RlbEV4
Y2VwdGlvbihuZXcgSmF2YU1vZGVsU3RhdHVzKElKYXZhTW9kZWxTdGF0dXNDb25zdGFudHMuQ0FO
Tk9UX1JFVFJJRVZFX0FUVEFDSEVEX0pBVkFET0MsIHRoaXMpKTsKIAkJfSBjYXRjaCAoRmlsZU5v
dEZvdW5kRXhjZXB0aW9uIGUpIHsKLQkJCS8vIGlnbm9yZS4gc2VlIGJ1ZyBodHRwczovL2J1Z3Mu
ZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MTIwNTU5Ci0JCX0gY2F0Y2goU29ja2V0
RXhjZXB0aW9uIGUpIHsKLQkJCS8vIGlnbm9yZS4gc2VlIGJ1ZyBodHRwczovL2J1Z3MuZWNsaXBz
ZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MjQ3ODQ1Ci0JCX0gY2F0Y2goVW5rbm93bkhvc3RF
eGNlcHRpb24gZSkgewotCQkJLy8gaWdub3JlLiBzZWUgYnVnIGh0dHBzOi8vYnVncy5lY2xpcHNl
Lm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0yNDc4NDUKLQkJfSBjYXRjaChQcm90b2NvbEV4Y2Vw
dGlvbiBlKSB7Ci0JCQkvLyBpZ25vcmUuIHNlZSBidWcgaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTI0Nzg0NQotCQl9IGNhdGNoKElPRXhjZXB0aW9uIGUpIHsK
KwkJCS8vIHNlZSBidWcgaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dp
P2lkPTEyMDU1OSAmCisJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1
Zy5jZ2k/aWQ9NDAwMDYwCisJCQl0aHJvdyBuZXcgSmF2YU1vZGVsRXhjZXB0aW9uKGUsIElKYXZh
TW9kZWxTdGF0dXNDb25zdGFudHMuQ0FOTk9UX1JFVFJJRVZFX0FUVEFDSEVEX0pBVkFET0MpOwor
CQl9IGNhdGNoIChTb2NrZXRFeGNlcHRpb24gZSkgeworCQkJLy8gc2VlIGJ1ZyBodHRwczovL2J1
Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9MjQ3ODQ1ICYKKwkJCS8vIGh0dHBz
Oi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00MDAwNjAKKwkJCXRocm93
IG5ldyBKYXZhTW9kZWxFeGNlcHRpb24oZSwgSUphdmFNb2RlbFN0YXR1c0NvbnN0YW50cy5DQU5O
T1RfUkVUUklFVkVfQVRUQUNIRURfSkFWQURPQyk7CisJCX0gY2F0Y2ggKFVua25vd25Ib3N0RXhj
ZXB0aW9uIGUpIHsKKwkJCS8vIHNlZSBidWcgaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mv
c2hvd19idWcuY2dpP2lkPTI0Nzg0NSAmCisJCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcv
YnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDAwMDYwCisJCQl0aHJvdyBuZXcgSmF2YU1vZGVsRXhjZXB0
aW9uKGUsIElKYXZhTW9kZWxTdGF0dXNDb25zdGFudHMuQ0FOTk9UX1JFVFJJRVZFX0FUVEFDSEVE
X0pBVkFET0MpOworCQl9IGNhdGNoIChQcm90b2NvbEV4Y2VwdGlvbiBlKSB7CisJCQkvLyBzZWUg
YnVnIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0yNDc4NDUg
JgorCQkJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTQw
MDA2MAorCQkJdGhyb3cgbmV3IEphdmFNb2RlbEV4Y2VwdGlvbihlLCBJSmF2YU1vZGVsU3RhdHVz
Q29uc3RhbnRzLkNBTk5PVF9SRVRSSUVWRV9BVFRBQ0hFRF9KQVZBRE9DKTsKKwkJfSBjYXRjaCAo
SU9FeGNlcHRpb24gZSkgewogCQkJdGhyb3cgbmV3IEphdmFNb2RlbEV4Y2VwdGlvbihlLCBJSmF2
YU1vZGVsU3RhdHVzQ29uc3RhbnRzLklPX0VYQ0VQVElPTik7CiAJCX0gZmluYWxseSB7CiAJCQlp
ZiAoc3RyZWFtICE9IG51bGwpIHs=
</data>
<flag name="review"
          id="55774"
          type_id="6"
          status="+"
          setter="daniel_megert"
    />
          </attachment>
      

    </bug>

</bugzilla>