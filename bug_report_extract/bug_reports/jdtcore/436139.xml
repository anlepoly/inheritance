<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>436139</bug_id>
          
          <creation_ts>2014-05-29 02:30:00 -0400</creation_ts>
          <short_desc>[1.8][search][model] Hierarchy search involving lambda and anonymous class do not find the anonymous class</short_desc>
          <delta_ts>2015-01-28 02:54:16 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>4.4.2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Manju Mathew">manju656</reporter>
          <assigned_to name="Manoj Palat Away Until May 11 2015">manpalat</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>noopur_gupta</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="63012"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2409613</commentid>
    <comment_count>0</comment_count>
    <who name="Manju Mathew">manju656</who>
    <bug_when>2014-05-29 02:30:40 -0400</bug_when>
    <thetext>Tested using Build id: I20140522-1330
Consider the below code snippet:

package p1;
interface FI {
	void foo(ArrayList&lt;IOException&gt; x); // Invoke F4 on foo
}

package p3;

import java.io.IOException;
import java.util.ArrayList;

public class C1 {

	private Object patternChanged(ArrayList&lt;IOException&gt; x1) {

		FI f1 = new FI() {

			public void foo(ArrayList&lt;IOException&gt; x) {
			}
		};
		return null;
	}

	private void someOtherMethod() {
		FI f2 = (x) -&gt; {
			patternChanged(x);
		};

		FI f3 = new FI() {
			public void foo(ArrayList&lt;IOException&gt; x) {
			}
		};
	}
}

Invoking &apos;F4&apos; to compute the Type Hierarchy of &apos;FI#foo&apos; returns only 2 implementation, expected was 3.
If &apos;f2&apos; is commented out then &apos;f3&apos; is revealed in the search.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2417630</commentid>
    <comment_count>1</comment_count>
    <who name="Manju Mathew">manju656</who>
    <bug_when>2014-06-17 05:48:23 -0400</bug_when>
    <thetext>*** Bug 437476 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2428587</commentid>
    <comment_count>2</comment_count>
      <attachid>245128</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-07-17 00:26:43 -0400</bug_when>
    <thetext>Created attachment 245128
Proposed Patch

Search returns the probable candidates correctly, ie the two anonymous expressions and the one lambda expression. Post search, in the model, the probable candidates are collated with an equality function. Issue is at the time of comparison one of them is mistakenly equated to the other. Specifically, a ResolvedSourceType.equals(ResolvedLambdaExpression) call happens which degenerates to SourceType.equals(RLE) which returns true. The given patch does some extra amount of work by doing a a.equals(b) &amp;&amp;  b.equals(a) comparisons. 

An alternative approach may be to define an equals in RST itself, but this resulted in test failures - have not investigated in that direction.

With the current uploaded patch, all the ui tests also ran successfully.

Jay: Comments?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2428923</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-07-17 11:05:15 -0400</bug_when>
    <thetext>Manoj, it would be nice if we can get rid of the additional equals check. I think we have scope for improving the SourceType#equals(), perhaps by comparing isLambda() of the types being compared.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2429306</commentid>
    <comment_count>4</comment_count>
      <attachid>245189</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-07-18 10:42:14 -0400</bug_when>
    <thetext>Created attachment 245189
Proposed Patch - alternate

As per comment 3, an alternate solution with isLambda() flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2429307</commentid>
    <comment_count>5</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-07-18 10:45:49 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #4)
&gt; Created attachment 245189 [details]
&gt; Proposed Patch - alternate
&gt; 
&gt; As per comment 3, an alternate solution with isLambda() flag.

Fix committed via: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=e52667a2f75989a9365399a97143f06e9f238b04</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2444637</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-08-28 01:36:28 -0400</bug_when>
    <thetext>Dani, looks like the fix didn&apos;t make it to 4.4.1. Can you please approve it for 4.4.1 RC3?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2444726</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-08-28 04:39:38 -0400</bug_when>
    <thetext>(In reply to Manoj Palat from comment #5)
&gt; (In reply to Manoj Palat from comment #4)
&gt; &gt; Created attachment 245189 [details]
&gt; &gt; Proposed Patch - alternate
&gt; &gt; 
&gt; &gt; As per comment 3, an alternate solution with isLambda() flag.
&gt; 
&gt; Fix committed via:
&gt; http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
&gt; ?id=e52667a2f75989a9365399a97143f06e9f238b04

Manoj, this is different from what comment 3 says. TypeVector should/need not know about the elements it is dealing with. My suggestion was to put handle the issue in SourceType#equals(). Did you face any issues with that?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2444727</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-08-28 04:40:50 -0400</bug_when>
    <thetext>Given this bug and its duplicate are internally reported and we haven&apos;t seen
any external folks chiming in, I wonder if we should wait until for SR2 - A quick
look at the patch makes me a bit uncomfortable - A general purpose data structure
like Vector should not be using a call to isLambda() - I suspect perhaps not all
review comments and discussion points made it to the fix ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2444743</commentid>
    <comment_count>9</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2014-08-28 05:06:03 -0400</bug_when>
    <thetext>I agree with Srikanth. We can consider for SR2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2477710</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-11-06 04:01:38 -0500</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #8)
&gt; Given this bug and its duplicate are internally reported and we haven&apos;t seen
&gt; any external folks chiming in, I wonder if we should wait until for SR2 - A
&gt; quick
&gt; look at the patch makes me a bit uncomfortable - A general purpose data
&gt; structure
&gt; like Vector should not be using a call to isLambda() - I suspect perhaps not
&gt; all
&gt; review comments and discussion points made it to the fix ?

Manoj, can you amend the fix with this suggestion in master before we can back port for 4.4.2? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2478433</commentid>
    <comment_count>11</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-11-06 22:18:40 -0500</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #10)
&gt; 
&gt; Manoj, can you amend the fix with this suggestion in master before we can
&gt; back port for 4.4.2? Thanks!

Done Jay - commit done to master by http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=caad60d9b7772e3fe7e4cc9da5c6ace1a71de6dd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2491392</commentid>
    <comment_count>12</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-12-01 22:40:31 -0500</bug_when>
    <thetext>moving to resolved (moving to CLOSED was by mistake - need to be verified for 4.5M4 and backport to 4.4.2)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2507838</commentid>
    <comment_count>13</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-01-20 09:08:12 -0500</bug_when>
    <thetext>This hasn&apos;t made it to 4.4.2 yet. Manoj, please back port.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2507944</commentid>
    <comment_count>14</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-01-20 11:35:50 -0500</bug_when>
    <thetext>(In reply to Jay Arthanareeswaran from comment #13)
&gt; This hasn&apos;t made it to 4.4.2 yet. Manoj, please back port.

Done via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=R4_4_maintenance&amp;id=960798e16a7918e1d1ed1c67404eace672fe5461</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2511133</commentid>
    <comment_count>15</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-01-28 01:52:56 -0500</bug_when>
    <thetext>While the fix seems to work, I find a problem, which may not be related to this.

After invoking F4 and seeing 3 valid results, I comment out f2 and tryout F4 again. I still see 3 results including f2. If I comment out the non-lambda implementation, things are okay, though.

Manoj, is this related or should raise a separate bug?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2511137</commentid>
    <comment_count>16</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-01-28 02:11:10 -0500</bug_when>
    <thetext>(In reply to Jay Arthanareeswaran from comment #15)
&gt; While the fix seems to work, I find a problem, which may not be related to
&gt; this.
&gt; Manoj, is this related or should raise a separate bug?

Raised bug 458608 to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2511150</commentid>
    <comment_count>17</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-01-28 02:54:16 -0500</bug_when>
    <thetext>Verified for 4.5 M5 with build I20150127-0900

and 

Verified for 4.4.2 RC2 with build M20150122-0430</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>245128</attachid>
            <date>2014-07-17 00:26:00 -0400</date>
            <delta_ts>2014-07-17 00:26:43 -0400</delta_ts>
            <desc>Proposed Patch</desc>
            <filename>Fix-for-Bug-436139-18search-Hierarchy-search-involvi.patch</filename>
            <type>text/plain</type>
            <size>3731</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9UeXBlSGllcmFyY2h5VGVzdHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9tb2RlbC9UeXBlSGllcmFyY2h5VGVzdHMuamF2YQppbmRleCA4MzgyNDc3Li4xMmQzZWEwIDEw
MDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvVHlwZUhpZXJhcmNoeVRlc3RzLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL21vZGVsL1R5cGVIaWVyYXJjaHlUZXN0cy5qYXZhCkBAIC0yNzQ5LDQgKzI3NDksNjUgQEAK
IAkJZGVsZXRlUHJvamVjdCgiUCIpOwogCX0KIH0KK3B1YmxpYyB2b2lkIHRlc3RCdWc0MzYxMzko
KSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiwgSU9FeGNlcHRpb24geworCUlKYXZhUHJvamVjdCBwcmog
PSBudWxsOworCXRyeSB7CisJCXByaiA9IGNyZWF0ZUphdmFQcm9qZWN0KCJCdWc0MzYxMzkiLCBu
ZXcgU3RyaW5nW10geyJzcmMifSwgbmV3IFN0cmluZ1tdIHsiSkNMX0xJQiJ9LCAiYmluIiwgIjEu
OCIpOworCQljcmVhdGVGb2xkZXIoIi9CdWc0MzYxMzkvc3JjL3AxIik7CisJCVN0cmluZyBpU291
cmNlID0gInBhY2thZ2UgcDE7XG4iICsKKwkJCQkicHVibGljIGludGVyZmFjZSBJIHtcbiIgKwor
CQkJCSIgICAgdm9pZCBmb28oQTxCPiB4KTtcbiIgKworCQkJCSJ9IjsKKwkJY3JlYXRlRmlsZSgi
L0J1ZzQzNjEzOS9zcmMvcDEvSS5qYXZhIiwgaVNvdXJjZSk7CisJCWNyZWF0ZUZpbGUoIi9CdWc0
MzYxMzkvc3JjL3AxL0EuamF2YSIsICJwYWNrYWdlIHAxO1xuIiArInB1YmxpYyBjbGFzcyBBPFQ+
IHt9Iik7CisJCWNyZWF0ZUZpbGUoIi9CdWc0MzYxMzkvc3JjL3AxL0IuamF2YSIsICJwYWNrYWdl
IHAxO1xuIiArInB1YmxpYyBjbGFzcyBCIHt9Iik7CisKKwkJCisJCWNyZWF0ZUZvbGRlcigiL0J1
ZzQzNjEzOS9zcmMvcDIiKTsKKwkJU3RyaW5nIHNvdXJjZSA9ICJwYWNrYWdlIHAyO1xuIiArCisJ
CQkJImltcG9ydCBwMS4qO1xuIiArCisJCQkJIlxuIiArCisJCQkJIkBTdXBwcmVzc1dhcm5pbmdz
KFwidW51c2VkXCIpXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIlxuIiAr
CisJCQkJIglwcml2YXRlIE9iamVjdCBwYXR0ZXJuQ2hhbmdlZChBPEI+IHgxKSB7XG4iICsKKwkJ
CQkiXG4iICsKKwkJCQkiCQlJIGYxID0gbmV3IEkoKSB7XG4iICsKKwkJCQkiCQkJcHVibGljIHZv
aWQgZm9vKEE8Qj4geCkge31cbiIgKworCQkJCSIJCX07XG4iICsKKwkJCQkiCQlyZXR1cm4gbnVs
bDtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIlxuIiArCisJCQkJIglwcml2YXRlIHZvaWQgc29t
ZU90aGVyTWV0aG9kKCkge1xuIiArCisJCQkJIgkJSSBmMiA9ICh4KSAtPiB7CXBhdHRlcm5DaGFu
Z2VkKHgpO307XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiCQlJIGYzID0gbmV3IEkoKSB7XG4iICsK
KwkJCQkiCQkJcHVibGljIHZvaWQgZm9vKEE8Qj4geCkge31cbiIgKworCQkJCSIJCX07XG4iICsK
KwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iOworCQljcmVhdGVGaWxlKCIvQnVnNDM2MTM5L3NyYy9w
Mi9YLmphdmEiLCBzb3VyY2UpOworCisJCWludCBzdGFydCA9IGlTb3VyY2UubGFzdEluZGV4T2Yo
IkkiKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCB1bml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KCJCdWc0
MzYxMzkiLCAic3JjIiwgInAxIiwgIkkuamF2YSIpOworCQl1bml0LmJlY29tZVdvcmtpbmdDb3B5
KG51bGwpOworICAgICAgICB1bml0LmdldEJ1ZmZlcigpLnNldENvbnRlbnRzKGlTb3VyY2UpOwor
ICAgICAgICB1bml0Lm1ha2VDb25zaXN0ZW50KG51bGwpOworCisJCUlKYXZhRWxlbWVudFtdIGVs
ZW1lbnRzID0gdW5pdC5jb2RlU2VsZWN0KHN0YXJ0LCAiSSIubGVuZ3RoKCkpOworCQlJVHlwZSBm
b2N1cyA9IChJVHlwZSkgZWxlbWVudHNbMF07CisJCUlUeXBlSGllcmFyY2h5IGhpZXJhcmNoeSA9
IGZvY3VzLm5ld1R5cGVIaWVyYXJjaHkobnVsbCk7CisJCWFzc2VydEhpZXJhcmNoeUVxdWFscygK
KwkJCQkiRm9jdXM6IEkgW2luIFtXb3JraW5nIGNvcHldIEkuamF2YSBbaW4gcDEgW2luIHNyYyBb
aW4gQnVnNDM2MTM5XV1dXVxuIiArIAorCQkJCSJTdXBlciB0eXBlczpcbiIgKyAKKwkJCQkiU3Vi
IHR5cGVzOlxuIiArIAorCQkJCSIgIDxhbm9ueW1vdXMgIzE+IFtpbiBwYXR0ZXJuQ2hhbmdlZChB
PEI+KSBbaW4gWCBbaW4gWC5qYXZhIFtpbiBwMiBbaW4gc3JjIFtpbiBCdWc0MzYxMzldXV1dXV1c
biIgKyAKKwkJCQkiICA8YW5vbnltb3VzICMxPiBbaW4gc29tZU90aGVyTWV0aG9kKCkgW2luIFgg
W2luIFguamF2YSBbaW4gcDIgW2luIHNyYyBbaW4gQnVnNDM2MTM5XV1dXV1dXG4iICsKKwkJCQki
ICA8bGFtYmRhICMxPiBbaW4gc29tZU90aGVyTWV0aG9kKCkgW2luIFggW2luIFguamF2YSBbaW4g
cDIgW2luIHNyYyBbaW4gQnVnNDM2MTM5XV1dXV1dXG4iLAorCQkJCWhpZXJhcmNoeSk7CisJfSBm
aW5hbGx5IHsKKwkJaWYgKHByaiAhPSBudWxsKQorCQkJZGVsZXRlUHJvamVjdChwcmopOworCX0K
K30KIH0KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9UeXBlVmVjdG9y
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9UeXBlVmVjdG9yLmphdmEKaW5kZXggMWM4NzFiYS4uYTY3NWM3NCAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvVHlwZVZlY3Rvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1R5cGVWZWN0b3IuamF2YQpAQCAtMSw1ICsxLDUgQEAK
IC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMDkgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFi
bGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CkBAIC01Myw3ICs1Myw3IEBACiB9CiBwdWJsaWMgYm9vbGVhbiBjb250YWlucyhJVHlwZSBlbGVt
ZW50KSB7CiAJZm9yIChpbnQgaSA9IHRoaXMuc2l6ZTsgLS1pID49IDA7KQotCQlpZiAoZWxlbWVu
dC5lcXVhbHModGhpcy5lbGVtZW50c1tpXSkpCisJCWlmIChlbGVtZW50LmVxdWFscyh0aGlzLmVs
ZW1lbnRzW2ldKSAmJiB0aGlzLmVsZW1lbnRzW2ldLmVxdWFscyhlbGVtZW50KSkKIAkJCXJldHVy
biB0cnVlOwogCXJldHVybiBmYWxzZTsKIH0=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>245189</attachid>
            <date>2014-07-18 10:42:00 -0400</date>
            <delta_ts>2014-07-18 10:42:14 -0400</delta_ts>
            <desc>Proposed Patch - alternate</desc>
            <filename>Fix-for-Bug-436139-18search-Hierarchy-search-involvi.fix2.patch</filename>
            <type>text/plain</type>
            <size>4434</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9UeXBlSGllcmFyY2h5VGVzdHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0
cy9tb2RlbC9UeXBlSGllcmFyY2h5VGVzdHMuamF2YQppbmRleCA4MzgyNDc3Li4xMmQzZWEwIDEw
MDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvVHlwZUhpZXJhcmNoeVRlc3RzLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL21vZGVsL1R5cGVIaWVyYXJjaHlUZXN0cy5qYXZhCkBAIC0yNzQ5LDQgKzI3NDksNjUgQEAK
IAkJZGVsZXRlUHJvamVjdCgiUCIpOwogCX0KIH0KK3B1YmxpYyB2b2lkIHRlc3RCdWc0MzYxMzko
KSB0aHJvd3MgQ29yZUV4Y2VwdGlvbiwgSU9FeGNlcHRpb24geworCUlKYXZhUHJvamVjdCBwcmog
PSBudWxsOworCXRyeSB7CisJCXByaiA9IGNyZWF0ZUphdmFQcm9qZWN0KCJCdWc0MzYxMzkiLCBu
ZXcgU3RyaW5nW10geyJzcmMifSwgbmV3IFN0cmluZ1tdIHsiSkNMX0xJQiJ9LCAiYmluIiwgIjEu
OCIpOworCQljcmVhdGVGb2xkZXIoIi9CdWc0MzYxMzkvc3JjL3AxIik7CisJCVN0cmluZyBpU291
cmNlID0gInBhY2thZ2UgcDE7XG4iICsKKwkJCQkicHVibGljIGludGVyZmFjZSBJIHtcbiIgKwor
CQkJCSIgICAgdm9pZCBmb28oQTxCPiB4KTtcbiIgKworCQkJCSJ9IjsKKwkJY3JlYXRlRmlsZSgi
L0J1ZzQzNjEzOS9zcmMvcDEvSS5qYXZhIiwgaVNvdXJjZSk7CisJCWNyZWF0ZUZpbGUoIi9CdWc0
MzYxMzkvc3JjL3AxL0EuamF2YSIsICJwYWNrYWdlIHAxO1xuIiArInB1YmxpYyBjbGFzcyBBPFQ+
IHt9Iik7CisJCWNyZWF0ZUZpbGUoIi9CdWc0MzYxMzkvc3JjL3AxL0IuamF2YSIsICJwYWNrYWdl
IHAxO1xuIiArInB1YmxpYyBjbGFzcyBCIHt9Iik7CisKKwkJCisJCWNyZWF0ZUZvbGRlcigiL0J1
ZzQzNjEzOS9zcmMvcDIiKTsKKwkJU3RyaW5nIHNvdXJjZSA9ICJwYWNrYWdlIHAyO1xuIiArCisJ
CQkJImltcG9ydCBwMS4qO1xuIiArCisJCQkJIlxuIiArCisJCQkJIkBTdXBwcmVzc1dhcm5pbmdz
KFwidW51c2VkXCIpXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkJIlxuIiAr
CisJCQkJIglwcml2YXRlIE9iamVjdCBwYXR0ZXJuQ2hhbmdlZChBPEI+IHgxKSB7XG4iICsKKwkJ
CQkiXG4iICsKKwkJCQkiCQlJIGYxID0gbmV3IEkoKSB7XG4iICsKKwkJCQkiCQkJcHVibGljIHZv
aWQgZm9vKEE8Qj4geCkge31cbiIgKworCQkJCSIJCX07XG4iICsKKwkJCQkiCQlyZXR1cm4gbnVs
bDtcbiIgKworCQkJCSIJfVxuIiArCisJCQkJIlxuIiArCisJCQkJIglwcml2YXRlIHZvaWQgc29t
ZU90aGVyTWV0aG9kKCkge1xuIiArCisJCQkJIgkJSSBmMiA9ICh4KSAtPiB7CXBhdHRlcm5DaGFu
Z2VkKHgpO307XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiCQlJIGYzID0gbmV3IEkoKSB7XG4iICsK
KwkJCQkiCQkJcHVibGljIHZvaWQgZm9vKEE8Qj4geCkge31cbiIgKworCQkJCSIJCX07XG4iICsK
KwkJCQkiCX1cbiIgKworCQkJCSJ9XG4iOworCQljcmVhdGVGaWxlKCIvQnVnNDM2MTM5L3NyYy9w
Mi9YLmphdmEiLCBzb3VyY2UpOworCisJCWludCBzdGFydCA9IGlTb3VyY2UubGFzdEluZGV4T2Yo
IkkiKTsKKwkJSUNvbXBpbGF0aW9uVW5pdCB1bml0ID0gZ2V0Q29tcGlsYXRpb25Vbml0KCJCdWc0
MzYxMzkiLCAic3JjIiwgInAxIiwgIkkuamF2YSIpOworCQl1bml0LmJlY29tZVdvcmtpbmdDb3B5
KG51bGwpOworICAgICAgICB1bml0LmdldEJ1ZmZlcigpLnNldENvbnRlbnRzKGlTb3VyY2UpOwor
ICAgICAgICB1bml0Lm1ha2VDb25zaXN0ZW50KG51bGwpOworCisJCUlKYXZhRWxlbWVudFtdIGVs
ZW1lbnRzID0gdW5pdC5jb2RlU2VsZWN0KHN0YXJ0LCAiSSIubGVuZ3RoKCkpOworCQlJVHlwZSBm
b2N1cyA9IChJVHlwZSkgZWxlbWVudHNbMF07CisJCUlUeXBlSGllcmFyY2h5IGhpZXJhcmNoeSA9
IGZvY3VzLm5ld1R5cGVIaWVyYXJjaHkobnVsbCk7CisJCWFzc2VydEhpZXJhcmNoeUVxdWFscygK
KwkJCQkiRm9jdXM6IEkgW2luIFtXb3JraW5nIGNvcHldIEkuamF2YSBbaW4gcDEgW2luIHNyYyBb
aW4gQnVnNDM2MTM5XV1dXVxuIiArIAorCQkJCSJTdXBlciB0eXBlczpcbiIgKyAKKwkJCQkiU3Vi
IHR5cGVzOlxuIiArIAorCQkJCSIgIDxhbm9ueW1vdXMgIzE+IFtpbiBwYXR0ZXJuQ2hhbmdlZChB
PEI+KSBbaW4gWCBbaW4gWC5qYXZhIFtpbiBwMiBbaW4gc3JjIFtpbiBCdWc0MzYxMzldXV1dXV1c
biIgKyAKKwkJCQkiICA8YW5vbnltb3VzICMxPiBbaW4gc29tZU90aGVyTWV0aG9kKCkgW2luIFgg
W2luIFguamF2YSBbaW4gcDIgW2luIHNyYyBbaW4gQnVnNDM2MTM5XV1dXV1dXG4iICsKKwkJCQki
ICA8bGFtYmRhICMxPiBbaW4gc29tZU90aGVyTWV0aG9kKCkgW2luIFggW2luIFguamF2YSBbaW4g
cDIgW2luIHNyYyBbaW4gQnVnNDM2MTM5XV1dXV1dXG4iLAorCQkJCWhpZXJhcmNoeSk7CisJfSBm
aW5hbGx5IHsKKwkJaWYgKHByaiAhPSBudWxsKQorCQkJZGVsZXRlUHJvamVjdChwcmopOworCX0K
K30KIH0KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9UeXBlVmVjdG9y
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9UeXBlVmVjdG9yLmphdmEKaW5kZXggMWM4NzFiYS4uYWExNThjMiAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
cmUvVHlwZVZlY3Rvci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL1R5cGVWZWN0b3IuamF2YQpAQCAtMSw1ICsxLDUgQEAK
IC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMDkgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJN
IENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFi
bGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAq
IHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CkBAIC01Miw5ICs1MiwyNSBAQAogCXRoaXMuc2l6ZSArPSBuZXdFbGVtZW50cy5sZW5ndGg7CiB9
CiBwdWJsaWMgYm9vbGVhbiBjb250YWlucyhJVHlwZSBlbGVtZW50KSB7Ci0JZm9yIChpbnQgaSA9
IHRoaXMuc2l6ZTsgLS1pID49IDA7KQotCQlpZiAoZWxlbWVudC5lcXVhbHModGhpcy5lbGVtZW50
c1tpXSkpCisJZm9yIChpbnQgaSA9IHRoaXMuc2l6ZTsgLS1pID49IDA7KSB7CisJCS8qIE5vdGU6
IFdoZW4gY3JlYXRpbmcgbmV3IHN1YnR5cGVzIG9mIFJTVCwgbmVlZCB0byBjaGVjayB3aGV0aGVy
IHRoaXMgY29kZQorCQkgKiB3aGljaCBnaXZlcyBzcGVjaWFsIHRyZWF0bWVudCB0byBsYW1iZGEg
bmVlZHMgbW9kaWZpY2F0aW9uIG9yIG5vdCAtIHJlZmVyIHRvIGJ1ZyA0MzYxMzkKKwkJICogQW4g
YWx0ZXJuYXRlIGNvdWxkIGhhdmUgYmVlbiB0aGUgZm9sbG93aW5nOgorCQkgKiBpZiAoZWxlbWVu
dC5lcXVhbHModGhpcy5lbGVtZW50c1tpKSAmJiB0aGlzLmVsZW1lbnRzW2ldLmVxdWFscyhlbGVt
ZW50KSkgcmV0dXJuIHRydWU7CisJCSAqIGJ1dCB0aGUgYWJvdmUgaGFzIHRoZSBpc3N1ZSBvZiBy
ZXBlYXRpbmcgdGhlIHN0ZXBzIGluIG1vc3Qgb2YgdGhlIGNhc2VzLgorCQkgKi8KKwkJSVR5cGUg
Zmlyc3RFbGVtZW50ID0gbnVsbDsKKwkJSVR5cGUgc2Vjb25kRWxlbWVudCA9IG51bGw7CisJCWlm
IChlbGVtZW50LmlzTGFtYmRhKCkpIHsKKwkJCWZpcnN0RWxlbWVudCA9IGVsZW1lbnQ7CisJCQlz
ZWNvbmRFbGVtZW50ID0gZWxlbWVudHNbaV07CisJCX0gZWxzZSB7CisJCQlmaXJzdEVsZW1lbnQg
PSBlbGVtZW50c1tpXTsKKwkJCXNlY29uZEVsZW1lbnQgPSBlbGVtZW50OworCQl9CisJCWlmIChm
aXJzdEVsZW1lbnQuZXF1YWxzKHNlY29uZEVsZW1lbnQpKQogCQkJcmV0dXJuIHRydWU7CisJfQog
CXJldHVybiBmYWxzZTsKIH0KIHB1YmxpYyBUeXBlVmVjdG9yIGNvcHkoKSB7
</data>

          </attachment>
      

    </bug>

</bugzilla>