<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>343607</bug_id>
          
          <creation_ts>2011-04-21 14:10:00 -0400</creation_ts>
          <short_desc>[APT] Improve output for javax.annotation.processing.Messager problems</short_desc>
          <delta_ts>2011-04-27 05:43:09 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.7 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Olivier Thomann">Olivier_Thomann</reporter>
          <assigned_to name="Olivier Thomann">Olivier_Thomann</assigned_to>
          <cc>satyam.kandula</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1917659</commentid>
    <comment_count>0</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-21 14:10:50 -0400</bug_when>
    <thetext>The output for the messages is too verbose. Most of the time we don&apos;t have a compilation unit source to report error/warnings against.
This is used only for apt message reporting and is also related to bug 342600 where we could take advantage of a new info severity.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1917661</commentid>
    <comment_count>1</comment_count>
      <attachid>193868</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-21 14:12:01 -0400</bug_when>
    <thetext>Created attachment 193868
Proposed fix

annotation processing with message logging is required to check this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1917708</commentid>
    <comment_count>2</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-21 15:16:17 -0400</bug_when>
    <thetext>Released for 3.7M7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918809</commentid>
    <comment_count>3</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2011-04-26 04:55:37 -0400</bug_when>
    <thetext>The output message is definitely better now. However, APT messages that doesn&apos;t have the file name is being reported as Error instead of ERROR. Here is the message that shows up now. 
##########
1. ERROR in pkg\Test1.java (at line 8)
        int
        ^^^
Syntax error on token &quot;int&quot;, delete this token
----------
2. Error: Annotation annots.annot1 should not be used
2 problems (2 errors)
############
Olivier, was there any specific reason for using Error instead of ERROR?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918900</commentid>
    <comment_count>4</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-26 08:15:31 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; Olivier, was there any specific reason for using Error instead of ERROR?
I wanted an easy way to distinguish between apt and compiler error reporting.
If you believe it is easier and more consistent to use ERROR all the time, it is trivial to change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918923</commentid>
    <comment_count>5</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2011-04-26 08:40:37 -0400</bug_when>
    <thetext>I personally prefer to have a consistent message unless the difference is really useful. I leave the decision to you :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918948</commentid>
    <comment_count>6</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-04-26 09:11:00 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; I personally prefer to have a consistent message unless the difference is
&gt; really useful. I leave the decision to you :)
Fixed for next build. It will use ERROR in all cases now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1919579</commentid>
    <comment_count>7</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-04-27 05:43:09 -0400</bug_when>
    <thetext>Per comment# 3, this bug fix was already verified by Satyam
using build id: I20110421-1800 

Agree with the subsequent change to diagnostic string.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>193868</attachid>
            <date>2011-04-21 14:12:00 -0400</date>
            <delta_ts>2011-04-21 14:12:01 -0400</delta_ts>
            <desc>Proposed fix</desc>
            <filename>patch_343607.txt</filename>
            <type>text/plain</type>
            <size>4727</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBiYXRjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYmF0Y2gvTWFp
bi5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9iYXRjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYmF0Y2gv
TWFpbi5qYXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS4zNjMNCmRpZmYgLXUgLXIxLjM2MyBN
YWluLmphdmENCi0tLSBiYXRjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYmF0
Y2gvTWFpbi5qYXZhCTE1IEFwciAyMDExIDE3OjQ3OjQ5IC0wMDAwCTEuMzYzDQorKysgYmF0Y2gv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2JhdGNoL01haW4uamF2YQkyMSBBcHIg
MjAxMSAxODoxMTozMSAtMDAwMA0KQEAgLTU2OSwzOCArNTY5LDUxIEBADQogDQogCQlwcml2YXRl
IHZvaWQgbG9nRXh0cmFQcm9ibGVtKENhdGVnb3JpemVkUHJvYmxlbSBwcm9ibGVtLCBpbnQgbG9j
YWxFcnJvckNvdW50LCBpbnQgZ2xvYmFsRXJyb3JDb3VudCkgew0KIAkJCWNoYXJbXSBvcmlnaW5h
dGluZ0ZpbGVOYW1lID0gcHJvYmxlbS5nZXRPcmlnaW5hdGluZ0ZpbGVOYW1lKCk7DQotCQkJU3Ry
aW5nIGZpbGVOYW1lID0NCi0JCQkJb3JpZ2luYXRpbmdGaWxlTmFtZSA9PSBudWxsDQotCQkJCT8g
dGhpcy5tYWluLmJpbmQoInJlcXVlc3Rvci5ub0ZpbGVOYW1lU3BlY2lmaWVkIikvLyROT04tTkxT
LTEkDQotCQkJCTogbmV3IFN0cmluZyhvcmlnaW5hdGluZ0ZpbGVOYW1lKTsNCi0JCQlpZiAoKHRo
aXMudGFnQml0cyAmIExvZ2dlci5FTUFDUykgIT0gMCkgew0KLQkJCQlTdHJpbmcgcmVzdWx0ID0g
ZmlsZU5hbWUNCi0JCQkJCQkrICI6IiAvLyROT04tTkxTLTEkDQotCQkJCQkJKyBwcm9ibGVtLmdl
dFNvdXJjZUxpbmVOdW1iZXIoKQ0KLQkJCQkJCSsgIjogIiAvLyROT04tTkxTLTEkDQotCQkJCQkJ
KyAocHJvYmxlbS5pc0Vycm9yKCkgPyB0aGlzLm1haW4uYmluZCgib3V0cHV0LmVtYWNzLmVycm9y
IikgOiB0aGlzLm1haW4uYmluZCgib3V0cHV0LmVtYWNzLndhcm5pbmciKSkgLy8kTk9OLU5MUy0x
JCAvLyROT04tTkxTLTIkDQotCQkJCQkJKyAiOiAiIC8vJE5PTi1OTFMtMSQNCi0JCQkJCQkrIHBy
b2JsZW0uZ2V0TWVzc2FnZSgpOw0KLQkJCQl0aGlzLnByaW50bG5FcnIocmVzdWx0KTsNCi0JCQkJ
ZmluYWwgU3RyaW5nIGVycm9yUmVwb3J0U291cmNlID0gZXJyb3JSZXBvcnRTb3VyY2UocHJvYmxl
bSwgbnVsbCwgdGhpcy50YWdCaXRzKTsNCi0JCQkJdGhpcy5wcmludGxuRXJyKGVycm9yUmVwb3J0
U291cmNlKTsNCisJCQlpZiAob3JpZ2luYXRpbmdGaWxlTmFtZSA9PSBudWxsKSB7DQorCQkJCS8v
IHNpbXBsaWZpZWQgbWVzc2FnZSBvdXRwdXQNCisJCQkJaWYgKHByb2JsZW0uaXNFcnJvcigpKSB7
DQorCQkJCQlwcmludEVycih0aGlzLm1haW4uYmluZCgNCisJCQkJCQkJCSJyZXF1ZXN0b3IuZXh0
cmFlcnJvciIsIC8vJE5PTi1OTFMtMSQNCisJCQkJCQkJCUludGVnZXIudG9TdHJpbmcoZ2xvYmFs
RXJyb3JDb3VudCkpKTsNCisJCQkJfSBlbHNlIHsNCisJCQkJCS8vIHdhcm5pbmcgLyBtYW5kYXRv
cnkgd2FybmluZyAvIG90aGVyDQorCQkJCQlwcmludEVycih0aGlzLm1haW4uYmluZCgNCisJCQkJ
CQkJInJlcXVlc3Rvci5leHRyYXdhcm5pbmciLCAvLyROT04tTkxTLTEkDQorCQkJCQkJCUludGVn
ZXIudG9TdHJpbmcoZ2xvYmFsRXJyb3JDb3VudCkpKTsNCisJCQkJfQ0KKwkJCQlwcmludEVycigi
ICIpOyAvLyROT04tTkxTLTEkDQorCQkJCXRoaXMucHJpbnRsbkVycihwcm9ibGVtLmdldE1lc3Nh
Z2UoKSk7DQogCQkJfSBlbHNlIHsNCi0JCQkJaWYgKGxvY2FsRXJyb3JDb3VudCA9PSAwKSB7DQor
CQkJCVN0cmluZyBmaWxlTmFtZSA9IG5ldyBTdHJpbmcob3JpZ2luYXRpbmdGaWxlTmFtZSk7DQor
CQkJCWlmICgodGhpcy50YWdCaXRzICYgTG9nZ2VyLkVNQUNTKSAhPSAwKSB7DQorCQkJCQlTdHJp
bmcgcmVzdWx0ID0gZmlsZU5hbWUNCisJCQkJCQkJKyAiOiIgLy8kTk9OLU5MUy0xJA0KKwkJCQkJ
CQkrIHByb2JsZW0uZ2V0U291cmNlTGluZU51bWJlcigpDQorCQkJCQkJCSsgIjogIiAvLyROT04t
TkxTLTEkDQorCQkJCQkJCSsgKHByb2JsZW0uaXNFcnJvcigpID8gdGhpcy5tYWluLmJpbmQoIm91
dHB1dC5lbWFjcy5lcnJvciIpIDogdGhpcy5tYWluLmJpbmQoIm91dHB1dC5lbWFjcy53YXJuaW5n
IikpIC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJA0KKwkJCQkJCQkrICI6ICIgLy8kTk9OLU5M
Uy0xJA0KKwkJCQkJCQkrIHByb2JsZW0uZ2V0TWVzc2FnZSgpOw0KKwkJCQkJdGhpcy5wcmludGxu
RXJyKHJlc3VsdCk7DQorCQkJCQlmaW5hbCBTdHJpbmcgZXJyb3JSZXBvcnRTb3VyY2UgPSBlcnJv
clJlcG9ydFNvdXJjZShwcm9ibGVtLCBudWxsLCB0aGlzLnRhZ0JpdHMpOw0KKwkJCQkJdGhpcy5w
cmludGxuRXJyKGVycm9yUmVwb3J0U291cmNlKTsNCisJCQkJfSBlbHNlIHsNCisJCQkJCWlmIChs
b2NhbEVycm9yQ291bnQgPT0gMCkgew0KKwkJCQkJCXRoaXMucHJpbnRsbkVycigiLS0tLS0tLS0t
LSIpOyAvLyROT04tTkxTLTEkDQorCQkJCQl9DQorCQkJCQlwcmludEVycihwcm9ibGVtLmlzRXJy
b3IoKSA/DQorCQkJCQkJCXRoaXMubWFpbi5iaW5kKA0KKwkJCQkJCQkJCSJyZXF1ZXN0b3IuZXJy
b3IiLCAvLyROT04tTkxTLTEkDQorCQkJCQkJCQkJSW50ZWdlci50b1N0cmluZyhnbG9iYWxFcnJv
ckNvdW50KSwNCisJCQkJCQkJCQluZXcgU3RyaW5nKGZpbGVOYW1lKSkNCisJCQkJCQkJCQk6IHRo
aXMubWFpbi5iaW5kKA0KKwkJCQkJCQkJCQkJInJlcXVlc3Rvci53YXJuaW5nIiwgLy8kTk9OLU5M
Uy0xJA0KKwkJCQkJCQkJCQkJSW50ZWdlci50b1N0cmluZyhnbG9iYWxFcnJvckNvdW50KSwNCisJ
CQkJCQkJCQkJCW5ldyBTdHJpbmcoZmlsZU5hbWUpKSk7DQorCQkJCQlmaW5hbCBTdHJpbmcgZXJy
b3JSZXBvcnRTb3VyY2UgPSBlcnJvclJlcG9ydFNvdXJjZShwcm9ibGVtLCBudWxsLCAwKTsNCisJ
CQkJCXRoaXMucHJpbnRsbkVycihlcnJvclJlcG9ydFNvdXJjZSk7DQorCQkJCQl0aGlzLnByaW50
bG5FcnIocHJvYmxlbS5nZXRNZXNzYWdlKCkpOw0KIAkJCQkJdGhpcy5wcmludGxuRXJyKCItLS0t
LS0tLS0tIik7IC8vJE5PTi1OTFMtMSQNCiAJCQkJfQ0KLQkJCQlwcmludEVycihwcm9ibGVtLmlz
RXJyb3IoKSA/DQotCQkJCQkJdGhpcy5tYWluLmJpbmQoDQotCQkJCQkJCQkicmVxdWVzdG9yLmVy
cm9yIiwgLy8kTk9OLU5MUy0xJA0KLQkJCQkJCQkJSW50ZWdlci50b1N0cmluZyhnbG9iYWxFcnJv
ckNvdW50KSwNCi0JCQkJCQkJCW5ldyBTdHJpbmcoZmlsZU5hbWUpKQ0KLQkJCQkJCQkJOiB0aGlz
Lm1haW4uYmluZCgNCi0JCQkJCQkJCQkJInJlcXVlc3Rvci53YXJuaW5nIiwgLy8kTk9OLU5MUy0x
JA0KLQkJCQkJCQkJCQlJbnRlZ2VyLnRvU3RyaW5nKGdsb2JhbEVycm9yQ291bnQpLA0KLQkJCQkJ
CQkJCQluZXcgU3RyaW5nKGZpbGVOYW1lKSkpOw0KLQkJCQlmaW5hbCBTdHJpbmcgZXJyb3JSZXBv
cnRTb3VyY2UgPSBlcnJvclJlcG9ydFNvdXJjZShwcm9ibGVtLCBudWxsLCAwKTsNCi0JCQkJdGhp
cy5wcmludGxuRXJyKGVycm9yUmVwb3J0U291cmNlKTsNCi0JCQkJdGhpcy5wcmludGxuRXJyKHBy
b2JsZW0uZ2V0TWVzc2FnZSgpKTsNCi0JCQkJdGhpcy5wcmludGxuRXJyKCItLS0tLS0tLS0tIik7
IC8vJE5PTi1OTFMtMSQNCiAJCQl9DQogCQl9DQogDQpJbmRleDogYmF0Y2gvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2JhdGNoL21lc3NhZ2VzLnByb3BlcnRpZXMNCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC9lY2xpcHNlL29yZy5lY2xpcHNlLmpkdC5jb3JlL2JhdGNo
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9iYXRjaC9tZXNzYWdlcy5wcm9wZXJ0
aWVzLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS45NzINCmRpZmYgLXUgLXIxLjk3MiBtZXNzYWdl
cy5wcm9wZXJ0aWVzDQotLS0gYmF0Y2gvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2JhdGNoL21lc3NhZ2VzLnByb3BlcnRpZXMJMjEgQXByIDIwMTEgMDU6NDM6MTMgLTAwMDAJMS45
NzINCisrKyBiYXRjaC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYmF0Y2gvbWVz
c2FnZXMucHJvcGVydGllcwkyMSBBcHIgMjAxMSAxODoxMTozMSAtMDAwMA0KQEAgLTEwNCw2ICsx
MDQsOCBAQA0KICMjIyByZXF1ZXN0b3INCiByZXF1ZXN0b3IuZXJyb3IgPSB7MH0uIEVSUk9SIGlu
IHsxfQ0KIHJlcXVlc3Rvci53YXJuaW5nID0gezB9LiBXQVJOSU5HIGluIHsxfQ0KK3JlcXVlc3Rv
ci5leHRyYWVycm9yID0gezB9LiBFcnJvcjoNCityZXF1ZXN0b3IuZXh0cmF3YXJuaW5nID0gezB9
LiBXYXJuaW5nOg0KIHJlcXVlc3Rvci5ub3RSZXRyaWV2ZUVycm9yTWVzc2FnZSA9IENhbm5vdCBy
ZXRyaWV2ZSB0aGUgZXJyb3IgbWVzc2FnZSBmb3IgezB9DQogcmVxdWVzdG9yLm5vRmlsZU5hbWVT
cGVjaWZpZWQgPSAob3JpZ2luYWwgZmlsZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUpDQogDQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>