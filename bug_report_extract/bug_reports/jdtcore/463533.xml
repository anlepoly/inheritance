<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>463533</bug_id>
          
          <creation_ts>2015-03-30 21:35:00 -0400</creation_ts>
          <short_desc>Signature.getSignatureSimpleName() returns different results for resolved and unresolved extends</short_desc>
          <delta_ts>2015-04-27 04:22:09 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.5</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://git.eclipse.org/r/44931</see_also>
    
    <see_also>https://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=01fe9b211e794ff01834ebe0e40bd02cb1110d75</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M7</target_milestone>
          
          <blocked>334281</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian de Alwis">bsd</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>jarthana</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="64390"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2539732</commentid>
    <comment_count>0</comment_count>
    <who name="Brian de Alwis">bsd</who>
    <bug_when>2015-03-30 21:35:29 -0400</bug_when>
    <thetext>4.5 M6

I&apos;m seeing different results from Signature.getSignatureSimpleName() when called with an extends type signature.

From a display page:

    Signature.getSignatureSimpleName(&quot;+Ljava.lang.CharSequence;&quot;)
	 (java.lang.String) CharSequence

    Signature.getSignatureSimpleName(&quot;+QCharSequence;&quot;)
	 (java.lang.String) ? extends CharSequence

This came about from bug 334281c4 where we&apos;re trying to determine if two method signatures, one resolved and the other unresolved, are the same:

   (Ljava.lang.Iterable&lt;+Ljava.lang.CharSequence;&gt;;Lorg.eclipse.xtext.util.IAcceptor&lt;Lorg.eclipse.xtext.xbase.compiler.CompilationTestHelper$Result;&gt;;)V

   (QIterable&lt;+QCharSequence;&gt;;QIAcceptor&lt;QResult;&gt;;)V</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2540199</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2015-03-31 12:05:21 -0400</bug_when>
    <thetext>I can see that org.eclipse.jdt.core.Signature.getSignatureSimpleName(char[]) is inconsistent between the two given examples. When simplifying the resolved variant we drop the &quot;? extends&quot; prefix.

Given that Signature is API with lots of clients I&apos;m reluctant, however, to make a call which version is correct, or even: whether the given input should be accepted.

The javadoc requires a &quot;type signature&quot; as input. Strictly speaking, a wildcard in Java is not a type. OTOH, I can see that getTypeSignatureKind(char[]) does accept wildcards (and will answer WILDCARD_TYPE_SIGNATURE).

Adjusting the resolved case to what we already answer in the unresolved case seems to make sense, but deciding either way feels like an API change to me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2540223</commentid>
    <comment_count>2</comment_count>
    <who name="Eclipse Genie">genie</who>
    <bug_when>2015-03-31 12:30:14 -0400</bug_when>
    <thetext>New Gerrit change created: https://git.eclipse.org/r/44931</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2540232</commentid>
    <comment_count>3</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2015-03-31 12:33:45 -0400</bug_when>
    <thetext>(In reply to Eclipse Genie from comment #2)
&gt; New Gerrit change created: https://git.eclipse.org/r/44931

@Jay, the proposed fix is straight-forward, but I&apos;d still like a second and third opinion before releasing (including Hudson).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2540493</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-04-01 02:40:08 -0400</bug_when>
    <thetext>Patch looks good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2541079</commentid>
    <comment_count>5</comment_count>
    <who name="Eclipse Genie">genie</who>
    <bug_when>2015-04-01 14:57:45 -0400</bug_when>
    <thetext>Gerrit change https://git.eclipse.org/r/44931 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=01fe9b211e794ff01834ebe0e40bd02cb1110d75</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2541080</commentid>
    <comment_count>6</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2015-04-01 14:58:35 -0400</bug_when>
    <thetext>(In reply to Jay Arthanareeswaran from comment #4)
&gt; Patch looks good.

thanks, released for 4.5 M7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2552023</commentid>
    <comment_count>7</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-04-27 04:22:09 -0400</bug_when>
    <thetext>Verified for 4.5 M7 with build I20150426-2000.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>