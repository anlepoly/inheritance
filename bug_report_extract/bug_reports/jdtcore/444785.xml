<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>444785</bug_id>
          
          <creation_ts>2014-09-22 18:22:00 -0400</creation_ts>
          <short_desc>[1.8] Error in JDT Core during reconcile</short_desc>
          <delta_ts>2014-10-29 02:25:31 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Mac OS X</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M3</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Daniel Dietrich">daniel.dietrich</reporter>
          <assigned_to name="shankha banerjee">shankhba</assigned_to>
          <cc>jarthana</cc>
    
    <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="63550"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2455069</commentid>
    <comment_count>0</comment_count>
      <attachid>247290</attachid>
    <who name="Daniel Dietrich">daniel.dietrich</who>
    <bug_when>2014-09-22 18:22:38 -0400</bug_when>
    <thetext>Created attachment 247290
This file causes problems in Eclipse

Eclipse does not finish the compilation of the attached java file (javac does compile it).

The error log contains several of these messages:
* Problems occurred when invoking code from plug-in: &quot;org.eclipse.jdt.ui&quot;.
* Error in JDT Core during AST creation
* Error in JDT Core during reconcile
* etc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455082</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-22 20:37:35 -0400</bug_when>
    <thetext>Can you copy + paste the stack trace - this is not reproducible on HEAD.

What is the build id of eclipse ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455101</commentid>
    <comment_count>2</comment_count>
    <who name="Daniel Dietrich">daniel.dietrich</who>
    <bug_when>2014-09-23 00:47:42 -0400</bug_when>
    <thetext>Version: Luna Release (4.4.0)
Build id: 20140612-0600

Stack Trace:
============
java.lang.ArrayIndexOutOfBoundsException: 1600
	at org.eclipse.jdt.internal.compiler.ClassFile.generateBootstrapMethods(ClassFile.java:2943)
	at org.eclipse.jdt.internal.compiler.ClassFile.addAttributes(ClassFile.java:385)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:577)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:628)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:559)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:635)
	at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode(CompilationUnitDeclaration.java:368)
	at org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:935)
	at org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:197)
	at org.eclipse.jdt.internal.core.CompilationUnit.buildStructure(CompilationUnit.java:194)
	at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:259)
	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:557)
	at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:1082)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:171)
	at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:90)
	at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:729)
	at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:789)
	at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1247)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:126)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:108)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:89)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
	at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:151)
	at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)
	at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:104)
	at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:77)
	at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:206)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455139</commentid>
    <comment_count>3</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-09-23 03:40:13 -0400</bug_when>
    <thetext>The stack trace looks similar to:
Bug 435869. 

Will it be possible for you to upgrade to 4.5 M2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455209</commentid>
    <comment_count>4</comment_count>
    <who name="Daniel Dietrich">daniel.dietrich</who>
    <bug_when>2014-09-23 06:48:15 -0400</bug_when>
    <thetext>(In reply to shankha banerjee from comment #3)
&gt; The stack trace looks similar to: Bug 435869. 
&gt; Will it be possible for you to upgrade to 4.5 M2.

Yes, I will upgrade later today and test it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455213</commentid>
    <comment_count>5</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-09-23 07:02:35 -0400</bug_when>
    <thetext>(In reply to shankha banerjee from comment #3)
Sorry. Looks like not related to Bug 435869.

The following commit solves the exception mentioned in the Bug 436542:
8bd886e250da1d7ba05246af4bcb8cd1f0eb1b1d. (Bug 436542 Comment 6)

(In reply to Daniel Dietrich from comment #4)
&gt; Yes, I will upgrade later today and test it.

This bug is fixed for Luna. So if you wish to remain on Luna you can try out 4.4.1.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455225</commentid>
    <comment_count>6</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-09-23 07:24:42 -0400</bug_when>
    <thetext>(In reply to shankha banerjee from comment #5)
&gt; The following commit solves the exception mentioned in the Bug 436542:
&gt; 8bd886e250da1d7ba05246af4bcb8cd1f0eb1b1d. (Bug 436542 Comment 6)
&gt; 

The following commit is partially reverted through:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=436542#c10

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455271</commentid>
    <comment_count>7</comment_count>
      <attachid>247296</attachid>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-09-23 08:41:23 -0400</bug_when>
    <thetext>Created attachment 247296
Patch

Test Case.

Please review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455331</commentid>
    <comment_count>8</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-09-23 09:56:11 -0400</bug_when>
    <thetext>Sorry for the multiple updates.

This is regarding Comment 3, Comment 5, Comment 6.

This bug is a duplicate of Bug 435869.

Steps to reproduce:

1) Revert to commit 70c8245b6347e2f711f3e53a216dadae773b6920. This is one before the commit 8bd886e250da1d7ba05246af4bcb8cd1f0eb1b1d (Bug 436542 Comment 6).

2) The test case mentioned in Comment 0 fails with the error mentioned in Comment 2.

3) Apply the fix: Bug 435869 Comment 10.

Code in Comment 0 compiles fine without any issues. 

-------------------------------------------------------------

Daniel,

Please ignore Comment 5.

This fix (Bug 435869) has not been ported to Luna. So 4.4.1 would not work for you. Please use 4.5 M1.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455335</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-23 09:59:23 -0400</bug_when>
    <thetext>(In reply to shankha banerjee from comment #8)

&gt; This fix (Bug 435869) has not been ported to Luna. So 4.4.1 would not work
&gt; for you. Please use 4.5 M1.

If you are willing to upgrade to M1, you should upgrade to M2 instead, We closed
100+ defects for M2, ~60% were fixes with many duplicates.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455382</commentid>
    <comment_count>10</comment_count>
    <who name="Daniel Dietrich">daniel.dietrich</who>
    <bug_when>2014-09-23 11:56:10 -0400</bug_when>
    <thetext>(In reply to Srikanth Sankaran from comment #9)
&gt; If you are willing to upgrade to M1, you should upgrade to M2 instead, We
&gt; closed
&gt; 100+ defects for M2, ~60% were fixes with many duplicates.

This makes absolutely sense, I will install 4.5 M2.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2455484</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-09-23 15:25:42 -0400</bug_when>
    <thetext>Thanks Shankha, released the test here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=44b2ae0b9ea2797846c8f36e5cf3be1acaab875d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2473203</commentid>
    <comment_count>12</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-10-29 02:25:31 -0400</bug_when>
    <thetext>Verified for 4.5 M3 using I20141028-2000 build</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>247290</attachid>
            <date>2014-09-22 18:22:00 -0400</date>
            <delta_ts>2014-09-22 18:22:38 -0400</delta_ts>
            <desc>This file causes problems in Eclipse</desc>
            <filename>Functions.java</filename>
            <type>application/octet-stream</type>
            <size>1070</size>
            <attacher name="Daniel Dietrich">daniel.dietrich</attacher>
            
              <data encoding="base64">CmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0IGphdmEudXRpbC5mdW5jdGlvbi5G
dW5jdGlvbjsKCnB1YmxpYyBpbnRlcmZhY2UgRnVuY3Rpb25zIHsKCglARnVuY3Rpb25hbEludGVy
ZmFjZQoJc3RhdGljIGludGVyZmFjZSBGdW5jdGlvbjE8VDEsIFI+IGV4dGVuZHMgRnVuY3Rpb248
VDEsIFI+LCBTZXJpYWxpemFibGUgewoKCQlAT3ZlcnJpZGUKCQlSIGFwcGx5KFQxIHQxKTsKCX0K
CglARnVuY3Rpb25hbEludGVyZmFjZQoJc3RhdGljIGludGVyZmFjZSBGdW5jdGlvbjY8VDEsIFQy
LCBUMywgVDQsIFQ1LCBUNiwgUj4gZXh0ZW5kcyBTZXJpYWxpemFibGUgewoKCQlSIGFwcGx5KFQx
IHQxLCBUMiB0MiwgVDMgdDMsIFQ0IHQ0LCBUNSB0NSwgVDYgdDYpOwoKCQlkZWZhdWx0IEZ1bmN0
aW9uMTxUMSwgRnVuY3Rpb24xPFQyLCBGdW5jdGlvbjE8VDMsIEZ1bmN0aW9uMTxUNCwgRnVuY3Rp
b24xPFQ1LCBGdW5jdGlvbjE8VDYsIFI+Pj4+Pj4gY3VycmllZCgpIHsKCQkJcmV0dXJuIHQxIC0+
IHQyIC0+IHQzIC0+IHQ0IC0+IHQ1IC0+IHQ2IC0+IGFwcGx5KHQxLCB0MiwgdDMsIHQ0LCB0NSwg
dDYpOwoJCX0KCgkJZGVmYXVsdCBGdW5jdGlvbjE8VHVwbGU2PFQxLCBUMiwgVDMsIFQ0LCBUNSwg
VDY+LCBSPiB0dXBsZWQoKSB7CgkJCXJldHVybiB0IC0+IGFwcGx5KHQuXzEsIHQuXzIsIHQuXzMs
IHQuXzQsIHQuXzUsIHQuXzYpOwoJCX0KCX0KCglzdGF0aWMgZmluYWwgY2xhc3MgVHVwbGU2PFQx
LCBUMiwgVDMsIFQ0LCBUNSwgVDY+IHsKCgkJcHVibGljIGZpbmFsIFQxIF8xOwoJCXB1YmxpYyBm
aW5hbCBUMiBfMjsKCQlwdWJsaWMgZmluYWwgVDMgXzM7CgkJcHVibGljIGZpbmFsIFQ0IF80OwoJ
CXB1YmxpYyBmaW5hbCBUNSBfNTsKCQlwdWJsaWMgZmluYWwgVDYgXzY7CgoJCXB1YmxpYyBUdXBs
ZTYoVDEgdDEsIFQyIHQyLCBUMyB0MywgVDQgdDQsIFQ1IHQ1LCBUNiB0NikgewoJCQl0aGlzLl8x
ID0gdDE7CgkJCXRoaXMuXzIgPSB0MjsKCQkJdGhpcy5fMyA9IHQzOwoJCQl0aGlzLl80ID0gdDQ7
CgkJCXRoaXMuXzUgPSB0NTsKCQkJdGhpcy5fNiA9IHQ2OwoJCX0KCX0KfQo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>247296</attachid>
            <date>2014-09-23 08:41:00 -0400</date>
            <delta_ts>2014-09-23 08:41:23 -0400</delta_ts>
            <desc>Patch</desc>
            <filename>patch.patch</filename>
            <type>text/plain</type>
            <size>2254</size>
            <attacher name="shankha banerjee">shankhba</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL0xhbWJkYUV4cHJlc3Np
b25zVGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTGFtYmRhRXhwcmVz
c2lvbnNUZXN0LmphdmEKaW5kZXggZWUxZjE0ZS4uYjA1OTg1YiAxMDA2NDQKLS0tIGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rl
c3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9j
b3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmphdmEK
QEAgLTQ4MzksNiArNDgzOSw0OSBAQCBwdWJsaWMgdm9pZCB0ZXN0NDQ0ODAzKCkgewogCQl9LAog
CQkiIik7CiB9CisvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/
aWQ9NDQ0Nzg1LCBbMS44XSBFcnJvciBpbiBKRFQgQ29yZSBkdXJpbmcgcmVjb25jaWxlCitwdWJs
aWMgdm9pZCB0ZXN0NDQ0Nzg1KCkgeworCXRoaXMucnVuQ29uZm9ybVRlc3QoCisJCW5ldyBTdHJp
bmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7XG4i
ICsKKwkJCSJpbXBvcnQgamF2YS51dGlsLmZ1bmN0aW9uLkZ1bmN0aW9uO1xuIiArCisJCQkicHVi
bGljIGludGVyZmFjZSBYIHtcbiIgKworCQkJIglARnVuY3Rpb25hbEludGVyZmFjZVxuIiArCisJ
CQkiCXN0YXRpYyBpbnRlcmZhY2UgRnVuY3Rpb24xPFQxLCBSPiBleHRlbmRzIEZ1bmN0aW9uPFQx
LCBSPiwgU2VyaWFsaXphYmxlIHtcbiIgKworCQkJIgkJQE92ZXJyaWRlXG4iICsKKwkJCSIJCVIg
YXBwbHkoVDEgdDEpO1xuIiArCisJCQkiCX1cbiIgKworCQkJIglARnVuY3Rpb25hbEludGVyZmFj
ZVxuIiArCisJCQkiCXN0YXRpYyBpbnRlcmZhY2UgRnVuY3Rpb242PFQxLCBUMiwgVDMsIFQ0LCBU
NSwgVDYsIFI+IGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiIgKworCQkJIgkJUiBhcHBseShUMSB0
MSwgVDIgdDIsIFQzIHQzLCBUNCB0NCwgVDUgdDUsIFQ2IHQ2KTtcbiIgKworCQkJIgkJZGVmYXVs
dCBGdW5jdGlvbjE8VDEsIEZ1bmN0aW9uMTxUMiwgRnVuY3Rpb24xPFQzLCBGdW5jdGlvbjE8VDQs
IEZ1bmN0aW9uMTxUNSwgRnVuY3Rpb24xPFQ2LCBSPj4+Pj4+IGN1cnJpZWQoKSB7XG4iICsKKwkJ
CSIJCQlyZXR1cm4gdDEgLT4gdDIgLT4gdDMgLT4gdDQgLT4gdDUgLT4gdDYgLT4gYXBwbHkodDEs
IHQyLCB0MywgdDQsIHQ1LCB0Nik7XG4iICsKKwkJCSIJCX1cbiIgKworCQkJIgkJZGVmYXVsdCBG
dW5jdGlvbjE8VHVwbGU2PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDY+LCBSPiB0dXBsZWQoKSB7XG4i
ICsKKwkJCSIJCQlyZXR1cm4gdCAtPiBhcHBseSh0Ll8xLCB0Ll8yLCB0Ll8zLCB0Ll80LCB0Ll81
LCB0Ll82KTtcbiIgKworCQkJIgkJfVxuIiArCisJCQkiCX1cbiIgKworCQkJIglzdGF0aWMgZmlu
YWwgY2xhc3MgVHVwbGU2PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDY+IHtcbiIgKworCQkJIgkJcHVi
bGljIGZpbmFsIFQxIF8xO1xuIiArCisJCQkiCQlwdWJsaWMgZmluYWwgVDIgXzI7XG4iICsKKwkJ
CSIJCXB1YmxpYyBmaW5hbCBUMyBfMztcbiIgKworCQkJIgkJcHVibGljIGZpbmFsIFQ0IF80O1xu
IiArCisJCQkiCQlwdWJsaWMgZmluYWwgVDUgXzU7XG4iICsKKwkJCSIJCXB1YmxpYyBmaW5hbCBU
NiBfNjtcbiIgKworCQkJIgkJcHVibGljIFR1cGxlNihUMSB0MSwgVDIgdDIsIFQzIHQzLCBUNCB0
NCwgVDUgdDUsIFQ2IHQ2KSB7XG4iICsKKwkJCSIJCQl0aGlzLl8xID0gdDE7XG4iICsKKwkJCSIJ
CQl0aGlzLl8yID0gdDI7XG4iICsKKwkJCSIJCQl0aGlzLl8zID0gdDM7XG4iICsKKwkJCSIJCQl0
aGlzLl80ID0gdDQ7XG4iICsKKwkJCSIJCQl0aGlzLl81ID0gdDU7XG4iICsKKwkJCSIJCQl0aGlz
Ll82ID0gdDY7XG4iICsKKwkJCSIJCX1cbiIgKworCQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0s
CisJCSIiKTsKK30KIHB1YmxpYyBzdGF0aWMgQ2xhc3MgdGVzdENsYXNzKCkgewogCXJldHVybiBM
YW1iZGFFeHByZXNzaW9uc1Rlc3QuY2xhc3M7CiB9Cg==
</data>

          </attachment>
      

    </bug>

</bugzilla>