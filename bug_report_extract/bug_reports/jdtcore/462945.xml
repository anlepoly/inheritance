<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>462945</bug_id>
          
          <creation_ts>2015-03-24 08:00:00 -0400</creation_ts>
          <short_desc>[formatter] IndexOutOfBoundsException in TokenManager</short_desc>
          <delta_ts>2015-05-08 06:14:43 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.5</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://git.eclipse.org/r/46658</see_also>
    
    <see_also>https://git.eclipse.org/r/46659</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M7</target_milestone>
          
          <blocked>458208</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Noopur Gupta">noopur_gupta</reporter>
          <assigned_to name="Mateusz Matela">mateusz.matela</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>error-reports-inbox</cc>
    
    <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>mateusz.matela</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="64467"
          type_id="1"
          status="+"
          setter="manpalat"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2536558</commentid>
    <comment_count>0</comment_count>
      <attachid>251861</attachid>
    <who name="Noopur Gupta">noopur_gupta</who>
    <bug_when>2015-03-24 08:00:56 -0400</bug_when>
    <thetext>Created attachment 251861
Example project

- In the attached project, open the file &quot;ReviewResult&quot;.
- Edit anything and Save.
- Or press Ctrl+Shift+F.

It results in IndexOutOfBoundsException. 
There was no exception earlier before bug 303519 was fixed.

java.lang.IndexOutOfBoundsException: Index: 11, Size: 11
	at java.util.ArrayList.rangeCheck(ArrayList.java:604)
	at java.util.ArrayList.get(ArrayList.java:382)
	at org.eclipse.jdt.internal.formatter.TokenManager.get(TokenManager.java:68)
	at org.eclipse.jdt.internal.formatter.LineBreaksPreparator.visit(LineBreaksPreparator.java:189)
	at org.eclipse.jdt.core.dom.EnumDeclaration.accept0(EnumDeclaration.java:274)
	at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)
	at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2782)
	at org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:212)
	at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2711)
	at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.prepareLineBreaks(DefaultCodeFormatter.java:355)
	at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.prepareFormattedCode(DefaultCodeFormatter.java:193)
	at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.format(DefaultCodeFormatter.java:154)
	at org.eclipse.jdt.internal.formatter.DefaultCodeFormatter.format(DefaultCodeFormatter.java:138)
	at org.eclipse.jdt.internal.corext.util.CodeFormatterUtil.reformat(CodeFormatterUtil.java:288)
...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2536979</commentid>
    <comment_count>1</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-03-24 22:45:07 -0400</bug_when>
    <thetext>Mateusz : please take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2537956</commentid>
    <comment_count>2</comment_count>
      <attachid>251929</attachid>
    <who name="Mateusz Matela">mateusz.matela</who>
    <bug_when>2015-03-26 09:59:36 -0400</bug_when>
    <thetext>Created attachment 251929
fixing patch

I&apos;ve usually assumed the code is valid while writing the formatter, so there&apos;s probably a large number of potential syntax errors that would cause an exception. So instead for fixing a problem for this particular case, this fix is a more general approach: AST visitors will never touch a node that is malformed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2549763</commentid>
    <comment_count>3</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-04-22 01:18:58 -0400</bug_when>
    <thetext>(In reply to Mateusz Matela from comment #2)
&gt; Created attachment 251929 [details]
&gt; fixing patch
&gt; 
&gt; I&apos;ve usually assumed the code is valid while writing the formatter, so
&gt; there&apos;s probably a large number of potential syntax errors that would cause
&gt; an exception. So instead for fixing a problem for this particular case, this
&gt; fix is a more general approach: AST visitors will never touch a node that is
&gt; malformed.

+1 from the code perspective, the fix is simple and straightforward. I ran the tests as well successfully. However, the basic assumption  - that the code to be formatted will always be valid - may hit some rough weather depending on the clients. 

Markus:  Can you please comment on the nature of clients - whether some clients have code with compilation errors and use for formatting?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2550220</commentid>
    <comment_count>4</comment_count>
    <who name="Mateusz Matela">mateusz.matela</who>
    <bug_when>2015-04-22 12:27:14 -0400</bug_when>
    <thetext>Just to be clear: this patch doesn&apos;t change the behavior regarding invalid code - the formatter already makes sure that malformed elements are not modified in the end (as discussed in bug 303519 comment 129), it&apos;s just that they are still processed by AST visitors because I hadn&apos;t realise it would cause problems.

I find it bewildering that someone might work with a code that can&apos;t even compile, and still care about code formatting. So it would be interesting to hear about some real life use cases :)

IMO if we aimed to handle any possible syntax error in some sensible way (what does it even mean?), the formatter would take at least 2 times as much code and 4 times as much time to make and test. So again, if this is a big issue for anyone, the best solution would probably be to take the old formatter&apos;s code and use it as a plugin.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2552757</commentid>
    <comment_count>5</comment_count>
    <who name="Eclipse Genie">genie</who>
    <bug_when>2015-04-28 05:36:11 -0400</bug_when>
    <thetext>New Gerrit change created: https://git.eclipse.org/r/46658</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2552760</commentid>
    <comment_count>6</comment_count>
    <who name="Eclipse Genie">genie</who>
    <bug_when>2015-04-28 05:39:56 -0400</bug_when>
    <thetext>New Gerrit change created: https://git.eclipse.org/r/46659</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2552766</commentid>
    <comment_count>7</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2015-04-28 05:45:48 -0400</bug_when>
    <thetext>Fixed via commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=56d7656cc17c95305e774fce01c5f22681a6c31a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2553490</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2015-04-29 01:25:52 -0400</bug_when>
    <thetext>Verified for 4.5 M7 with build I20150428-2000.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2560513</commentid>
    <comment_count>9</comment_count>
    <who name="Sasikanth Bharadwaj">saammana</who>
    <bug_when>2015-05-08 06:05:36 -0400</bug_when>
    <thetext>*** Bug 466378 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2560518</commentid>
    <comment_count>10</comment_count>
    <who name="Sasikanth Bharadwaj">saammana</who>
    <bug_when>2015-05-08 06:14:43 -0400</bug_when>
    <thetext>*** Bug 466376 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>251861</attachid>
            <date>2015-03-24 08:00:00 -0400</date>
            <delta_ts>2015-03-24 08:00:56 -0400</delta_ts>
            <desc>Example project</desc>
            <filename>Bx.zip</filename>
            <type>application/zip</type>
            <size>5053</size>
            <attacher name="Noopur Gupta">noopur_gupta</attacher>
            
              <data encoding="base64">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
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>251929</attachid>
            <date>2015-03-26 09:59:00 -0400</date>
            <delta_ts>2015-03-26 09:59:36 -0400</delta_ts>
            <desc>fixing patch</desc>
            <filename>462945.patch</filename>
            <type>text/plain</type>
            <size>5539</size>
            <attacher name="Mateusz Matela">mateusz.matela</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9mb3JtYXR0ZXIvRm9ybWF0dGVyQnVnc1Rlc3RzLmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUv
dGVzdHMvZm9ybWF0dGVyL0Zvcm1hdHRlckJ1Z3NUZXN0cy5qYXZhDQppbmRleCBjMzJkNDhhLi40
ODUzZjcxIDEwMDY0NA0KLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3Jj
L29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJCdWdzVGVzdHMu
amF2YQ0KKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xp
cHNlL2pkdC9jb3JlL3Rlc3RzL2Zvcm1hdHRlci9Gb3JtYXR0ZXJCdWdzVGVzdHMuamF2YQ0KQEAg
LTEwLDYgKzEwLDcgQEANCiAgKiAgICAgUmF5IFYuICh2b2lkc3RhckBnbWFpbC5jb20pIC0gQ29u
dHJpYnV0aW9uIGZvciBidWcgMjgyOTg4DQogICogICAgIFJvYmluIFN0b2NrZXIgLSBCdWcgNDk2
MTkgLSBbZm9ybWF0dGluZ10gY29tbWVudCBmb3JtYXR0ZXIgbGVhdmVzIHdoaXRlc3BhY2UgaW4g
Y29tbWVudHMNCiAgKiAgICAgTWF0ZXVzeiBNYXRlbGEgPG1hdGV1c3oubWF0ZWxhQGdtYWlsLmNv
bT4gLSBbZm9ybWF0dGVyXSBGb3JtYXR0ZXIgZG9lcyBub3QgZm9ybWF0IEphdmEgY29kZSBjb3Jy
ZWN0bHksIGVzcGVjaWFsbHkgd2hlbiBtYXggbGluZSB3aWR0aCBpcyBzZXQgLSBodHRwczovL2J1
Z3MuZWNsaXBzZS5vcmcvMzAzNTE5DQorICogICAgIE1hdGV1c3ogTWF0ZWxhIDxtYXRldXN6Lm1h
dGVsYUBnbWFpbC5jb20+IC0gW2Zvcm1hdHRlcl0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiBp
biBUb2tlbk1hbmFnZXIgLSBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvNDYyOTQ1DQogICoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKiovDQogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5m
b3JtYXR0ZXI7DQogDQpAQCAtMTA2NDAsNCArMTA2NDEsMjMgQEANCiAJDQogCS8vIEtfQ09NUElM
QVRJT05fVU5JVCBpcyB0ZXN0ZWQgYnkgRm9ybWF0dGVyUmVncmVzc2lvblRlc3RzI3Rlc3Q1MTIo
KSBhbmQgI3Rlc3Q2NDMoKQ0KIH0NCisvKioNCisgKiBAYnVnIDQ2Mjk0NSAtIFtmb3JtYXR0ZXJd
IEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24gaW4gVG9rZW5NYW5hZ2VyDQorICogQHRlc3Qgbm8g
ZXhjZXB0aW9uIGlzIHRocm93biBmb3IgbWFsZm9ybWVkIGNvZGUNCisgKiBAc2VlICJodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDYyOTQ1Ig0KKyAqLw0KK3B1
YmxpYyB2b2lkIHRlc3RCdWc0NjI5NDUoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCisJU3RyaW5nIHNv
dXJjZSA9DQorCQkicGFja2FnZSBwMTtcbiIgKyANCisJCSJlbnVtIFJldmlld1Jlc3VsdCB7XG4i
ICsgDQorCQkiCUdvb2R7LCBCYWRcbiIgKyANCisJCSJ9XG4iOw0KKwlmb3JtYXRTb3VyY2Uoc291
cmNlLA0KKwkJInBhY2thZ2UgcDE7XG4iICsgDQorCQkiXG4iICsgDQorCQkiZW51bSBSZXZpZXdS
ZXN1bHQge1xuIiArIA0KKwkJIglHb29keywgQmFkXG4iICsgDQorCQkifVxuIg0KKwkpOw0KK30N
CiB9DQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvQ29tbWVudHNQcmVwYXJhdG9yLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1h
dHRlci9Db21tZW50c1ByZXBhcmF0b3IuamF2YQ0KaW5kZXggOWRhYWU2Yy4uMDI3MTMyNyAxMDA2
NDQNCi0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvZm9ybWF0dGVyL0NvbW1lbnRzUHJlcGFyYXRvci5qYXZhDQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRl
ci9Db21tZW50c1ByZXBhcmF0b3IuamF2YQ0KQEAgLTcsNiArNyw3IEBADQogICoNCiAgKiBDb250
cmlidXRvcnM6DQogICogICAgIE1hdGV1c3ogTWF0ZWxhIDxtYXRldXN6Lm1hdGVsYUBnbWFpbC5j
b20+IC0gW2Zvcm1hdHRlcl0gRm9ybWF0dGVyIGRvZXMgbm90IGZvcm1hdCBKYXZhIGNvZGUgY29y
cmVjdGx5LCBlc3BlY2lhbGx5IHdoZW4gbWF4IGxpbmUgd2lkdGggaXMgc2V0IC0gaHR0cHM6Ly9i
dWdzLmVjbGlwc2Uub3JnLzMwMzUxOQ0KKyAqICAgICBNYXRldXN6IE1hdGVsYSA8bWF0ZXVzei5t
YXRlbGFAZ21haWwuY29tPiAtIFtmb3JtYXR0ZXJdIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24g
aW4gVG9rZW5NYW5hZ2VyIC0gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnLzQ2Mjk0NQ0KICAqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqLw0KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmZv
cm1hdHRlcjsNCiANCkBAIC0xMTksNiArMTIwLDEyIEBADQogCX0NCiANCiAJQE92ZXJyaWRlDQor
CXB1YmxpYyBib29sZWFuIHByZVZpc2l0MihBU1ROb2RlIG5vZGUpIHsNCisJCWJvb2xlYW4gaXNN
YWxmb3JtZWQgPSAobm9kZS5nZXRGbGFncygpICYgQVNUTm9kZS5NQUxGT1JNRUQpICE9IDA7DQor
CQlyZXR1cm4gIWlzTWFsZm9ybWVkOw0KKwl9DQorDQorCUBPdmVycmlkZQ0KIAlwdWJsaWMgYm9v
bGVhbiB2aXNpdChMaW5lQ29tbWVudCBub2RlKSB7DQogCQlpbnQgY29tbWVudEluZGV4ID0gdGhp
cy50bS5maXJzdEluZGV4SW4obm9kZSwgVG9rZW5OYW1lQ09NTUVOVF9MSU5FKTsNCiAJCWhhbmRs
ZUxpbmVDb21tZW50KGNvbW1lbnRJbmRleCk7DQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvTGluZUJy
ZWFrc1ByZXBhcmF0b3IuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVyL0xpbmVCcmVha3NQcmVwYXJhdG9yLmphdmEN
CmluZGV4IDc4NWE4MTUuLmY3ZmYwMDMgMTAwNjQ0DQotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9mb3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9MaW5lQnJlYWtz
UHJlcGFyYXRvci5qYXZhDQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9mb3JtYXR0ZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9MaW5lQnJlYWtzUHJlcGFyYXRvci5qYXZh
DQpAQCAtNyw2ICs3LDcgQEANCiAgKg0KICAqIENvbnRyaWJ1dG9yczoNCiAgKiAgICAgTWF0ZXVz
eiBNYXRlbGEgPG1hdGV1c3oubWF0ZWxhQGdtYWlsLmNvbT4gLSBbZm9ybWF0dGVyXSBGb3JtYXR0
ZXIgZG9lcyBub3QgZm9ybWF0IEphdmEgY29kZSBjb3JyZWN0bHksIGVzcGVjaWFsbHkgd2hlbiBt
YXggbGluZSB3aWR0aCBpcyBzZXQgLSBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvMzAzNTE5DQor
ICogICAgIE1hdGV1c3ogTWF0ZWxhIDxtYXRldXN6Lm1hdGVsYUBnbWFpbC5jb20+IC0gW2Zvcm1h
dHRlcl0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiBpbiBUb2tlbk1hbmFnZXIgLSBodHRwczov
L2J1Z3MuZWNsaXBzZS5vcmcvNDYyOTQ1DQogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQogcGFj
a2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuZm9ybWF0dGVyOw0KIA0KQEAgLTc3LDYgKzc4
LDEyIEBADQogCX0NCiANCiAJQE92ZXJyaWRlDQorCXB1YmxpYyBib29sZWFuIHByZVZpc2l0MihB
U1ROb2RlIG5vZGUpIHsNCisJCWJvb2xlYW4gaXNNYWxmb3JtZWQgPSAobm9kZS5nZXRGbGFncygp
ICYgQVNUTm9kZS5NQUxGT1JNRUQpICE9IDA7DQorCQlyZXR1cm4gIWlzTWFsZm9ybWVkOw0KKwl9
DQorDQorCUBPdmVycmlkZQ0KIAlwdWJsaWMgYm9vbGVhbiB2aXNpdChDb21waWxhdGlvblVuaXQg
bm9kZSkgew0KIAkJTGlzdDxJbXBvcnREZWNsYXJhdGlvbj4gaW1wb3J0cyA9IG5vZGUuaW1wb3J0
cygpOw0KIAkJaWYgKCFpbXBvcnRzLmlzRW1wdHkoKSkgew0KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2Zvcm1hdHRlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZm9ybWF0dGVy
L1NwYWNlUHJlcGFyYXRvci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU3BhY2VQcmVwYXJhdG9yLmphdmENCmlu
ZGV4IDUzODEyNzIuLjc1NTFlOWUgMTAwNjQ0DQotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9m
b3JtYXR0ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Zvcm1hdHRlci9TcGFjZVByZXBhcmF0
b3IuamF2YQ0KKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZm9ybWF0dGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9mb3JtYXR0ZXIvU3BhY2VQcmVwYXJhdG9yLmphdmENCkBAIC03LDYgKzcs
NyBAQA0KICAqDQogICogQ29udHJpYnV0b3JzOg0KICAqICAgICBNYXRldXN6IE1hdGVsYSA8bWF0
ZXVzei5tYXRlbGFAZ21haWwuY29tPiAtIFtmb3JtYXR0ZXJdIEZvcm1hdHRlciBkb2VzIG5vdCBm
b3JtYXQgSmF2YSBjb2RlIGNvcnJlY3RseSwgZXNwZWNpYWxseSB3aGVuIG1heCBsaW5lIHdpZHRo
IGlzIHNldCAtIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy8zMDM1MTkNCisgKiAgICAgTWF0ZXVz
eiBNYXRlbGEgPG1hdGV1c3oubWF0ZWxhQGdtYWlsLmNvbT4gLSBbZm9ybWF0dGVyXSBJbmRleE91
dE9mQm91bmRzRXhjZXB0aW9uIGluIFRva2VuTWFuYWdlciAtIGh0dHBzOi8vYnVncy5lY2xpcHNl
Lm9yZy80NjI5NDUNCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCiBwYWNrYWdlIG9yZy5lY2xp
cHNlLmpkdC5pbnRlcm5hbC5mb3JtYXR0ZXI7DQogDQpAQCAtOTQsNiArOTUsMTIgQEANCiAJfQ0K
IA0KIAlAT3ZlcnJpZGUNCisJcHVibGljIGJvb2xlYW4gcHJlVmlzaXQyKEFTVE5vZGUgbm9kZSkg
ew0KKwkJYm9vbGVhbiBpc01hbGZvcm1lZCA9IChub2RlLmdldEZsYWdzKCkgJiBBU1ROb2RlLk1B
TEZPUk1FRCkgIT0gMDsNCisJCXJldHVybiAhaXNNYWxmb3JtZWQ7DQorCX0NCisNCisJQE92ZXJy
aWRlDQogCXB1YmxpYyBib29sZWFuIHZpc2l0KFR5cGVEZWNsYXJhdGlvbiBub2RlKSB7DQogCQlp
ZiAobm9kZS5nZXROYW1lKCkuZ2V0U3RhcnRQb3NpdGlvbigpID09IC0xKQ0KIAkJCXJldHVybiB0
cnVlOyAvLyB0aGlzIGlzIGEgZmFrZSB0eXBlIGNyZWF0ZWQgYnkgcGFyc2luZyBpbiBjbGFzcyBi
b2R5IG1vZGUNCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>