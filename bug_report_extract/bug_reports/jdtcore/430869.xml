<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>430869</bug_id>
          
          <creation_ts>2014-03-21 07:28:00 -0400</creation_ts>
          <short_desc>Model Tests, Apt Tests, Compiler Apt Tests, Performance Tests: Failed to run</short_desc>
          <delta_ts>2014-04-29 03:59:17 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugs.eclipse.org/bugs/show_bug.cgi?id=430482</see_also>
          <bug_file_loc>http://download.eclipse.org/eclipse/downloads/drops4/N20140320-2000/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.4 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="shankha banerjee">shankhba</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>jarthana</cc>
    
    <cc>markus_keller</cc>
    
    <cc>shankhba</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2378439</commentid>
    <comment_count>0</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-03-21 07:28:30 -0400</bug_when>
    <thetext>Build ID: N20140320-2000
Test Results: http://download.eclipse.org/eclipse/downloads/drops4/N20140320-2000/testresults/html/org.eclipse.jdt.core.tests.model_win32.win32.x86_7.0.html

http://download.eclipse.org/eclipse/downloads/drops4/N20140320-2000/testresults/html/org.eclipse.jdt.core.tests.model_macosx.cocoa.x86_5.0.html

TestCase AllJavaModelTests
TestCase RunAllTests
TestCase RunFormatterTests

java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.core.tests.model&quot;

org.eclipse.test.EclipseTestRunner$TestFailedException: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.core.tests.model&quot;
at org.eclipse.test.EclipseTestRunner.runFailed(EclipseTestRunner.java:587)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:516)
at org.eclipse.test.EclipseTestRunner.&lt;init&gt;(EclipseTestRunner.java:496)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:308)
at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:36)
at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:32)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:133)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:103)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:378)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:232)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603)
at org.eclipse.equinox.launcher.Main.run(Main.java:1462)
at org.eclipse.equinox.launcher.Main.main(Main.java:1438)
at org.eclipse.core.launcher.Main.main(Main.java:34)
Caused by: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.core.tests.model&quot;
at org.eclipse.test.EclipseTestRunner.loadSuiteClass(EclipseTestRunner.java:604)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:513)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2378441</commentid>
    <comment_count>1</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-03-21 07:32:57 -0400</bug_when>
    <thetext>org.eclipse.jdt.apt.tests:

java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.apt.tests&quot;

java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.apt.tests&quot;

org.eclipse.test.EclipseTestRunner$TestFailedException: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.apt.tests&quot;
at org.eclipse.test.EclipseTestRunner.runFailed(EclipseTestRunner.java:587)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:516)
at org.eclipse.test.EclipseTestRunner.&lt;init&gt;(EclipseTestRunner.java:496)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:308)
at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:36)
at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:32)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:133)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:103)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:378)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:232)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603)
at org.eclipse.equinox.launcher.Main.run(Main.java:1462)
at org.eclipse.equinox.launcher.Main.main(Main.java:1438)
at org.eclipse.core.launcher.Main.main(Main.java:34)
Caused by: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.apt.tests&quot;
at org.eclipse.test.EclipseTestRunner.loadSuiteClass(EclipseTestRunner.java:604)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:513)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2378443</commentid>
    <comment_count>2</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-03-21 07:35:47 -0400</bug_when>
    <thetext>org.eclipse.jdt.compiler.apt.tests

java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.compiler.apt.tests&quot;

org.eclipse.test.EclipseTestRunner$TestFailedException: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.compiler.apt.tests&quot;
at org.eclipse.test.EclipseTestRunner.runFailed(EclipseTestRunner.java:587)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:516)
at org.eclipse.test.EclipseTestRunner.&lt;init&gt;(EclipseTestRunner.java:496)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:308)
at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:36)
at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:32)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:133)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:103)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:378)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:232)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603)
at org.eclipse.equinox.launcher.Main.run(Main.java:1462)
at org.eclipse.equinox.launcher.Main.main(Main.java:1438)
at org.eclipse.core.launcher.Main.main(Main.java:34)
Caused by: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.compiler.apt.tests&quot;
at org.eclipse.test.EclipseTestRunner.loadSuiteClass(EclipseTestRunner.java:604)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:513)


==========================================================================

org.eclipse.jdt.core.tests.performance

java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.core.tests.performance&quot;

org.eclipse.test.EclipseTestRunner$TestFailedException: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.core.tests.performance&quot;
at org.eclipse.test.EclipseTestRunner.runFailed(EclipseTestRunner.java:587)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:516)
at org.eclipse.test.EclipseTestRunner.&lt;init&gt;(EclipseTestRunner.java:496)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:308)
at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:36)
at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:32)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:587)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:198)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:133)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:103)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:378)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:232)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:648)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:603)
at org.eclipse.equinox.launcher.Main.run(Main.java:1462)
at org.eclipse.equinox.launcher.Main.main(Main.java:1438)
at org.eclipse.core.launcher.Main.main(Main.java:34)
Caused by: java.lang.Exception: Could not find plugin &quot;org.eclipse.jdt.core.tests.performance&quot;
at org.eclipse.test.EclipseTestRunner.loadSuiteClass(EclipseTestRunner.java:604)
at org.eclipse.test.EclipseTestRunner.getTest(EclipseTestRunner.java:513)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2378450</commentid>
    <comment_count>3</comment_count>
    <who name="shankha banerjee">shankhba</who>
    <bug_when>2014-03-21 07:46:52 -0400</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 430482 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379201</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-24 09:30:53 -0400</bug_when>
    <thetext>Reopening, so we can have a discussion on alternate solutions to get our tests running again. 

1. Obviously, the first option is to run these tests with a 1.8 JRE. The second option is:

2. The reason the org.eclipse.jdt.compiler.apt.tests project is set up with 1.8 BREE and 1.8 JRE in it&apos;s build path is because the project is referencing some 1.8 specific annotation APIs (mostly in java.lang.annotation package). If we are to get rid of the dependency on 1.8 JRE, we should include those APIs, either source or library form, in the test project. This is no big deal as long we work out the legal aspect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379585</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-25 00:42:33 -0400</bug_when>
    <thetext>This is fixed through commit:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=a1b73ab4292b1a5c4bee65eb3b80141d6400d5c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379666</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-25 05:47:52 -0400</bug_when>
    <thetext>Okay, this will make the model and other tests run again with 1.7 JRE. But there will be some failures (as many as 33) in compiler.apt.tests suite with windows and mac. This is because the classes were compiled with 1.8 compiler and won&apos;t be loaded with 1.7 JVM. I am looking at options to work around this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379690</commentid>
    <comment_count>7</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-03-25 06:25:19 -0400</bug_when>
    <thetext>It&apos;s OK to just skip Java-8-specific tests when running on an older JRE.

The cleanest solution would be to extract tests that depend on Java 8 into a separate test bundle, which is just not loaded in test runs on older JREs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379696</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-25 06:31:32 -0400</bug_when>
    <thetext>(In reply to Markus Keller from comment #7)
&gt; It&apos;s OK to just skip Java-8-specific tests when running on an older JRE.
&gt; 
&gt; The cleanest solution would be to extract tests that depend on Java 8 into a
&gt; separate test bundle, which is just not loaded in test runs on older JREs.

Unfortunately, the failing ones would be non Java 8 tests. These are affected because we try to load all the Java 8 and non Java 8 test annotation processors with the same JVM. If there&apos;s no easy way out, we will have to split the test framework itself into two sets of tests or worst case have a separate bundle for Java 8 tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379899</commentid>
    <comment_count>9</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-25 11:19:04 -0400</bug_when>
    <thetext>Reopening to fix the failing compiler.apt.tests with JRE 1.7 and below.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379923</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-25 11:59:59 -0400</bug_when>
    <thetext>Fix being considered:

https://git.eclipse.org/r/#/c/23868/

I was hoping to have some backing from the Hudson job. As it turns out, it&apos;s still failing with compiling the 1.8 annotation bundle.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2379944</commentid>
    <comment_count>11</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-25 12:38:45 -0400</bug_when>
    <thetext>(In reply to Jayaprakash Arthanareeswaran from comment #8)
&gt; we will
&gt; have to split the test framework itself into two sets of tests or worst case
&gt; have a separate bundle for Java 8 tests.

I have done this via commit:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=0baf29c6e5669fd5c3e5f5cbc326d201ccdc5b3c

It appears that we framework is using a different class loader than the current JRE run for the test. So, my efforts to squeeze in the stub as a endorsed dir didn&apos;t work. Hence, I have separated the Java 8 specific test processors and related files into a separate source folder and created a new jar desc for them. Now the JLS 8 tests can simply choose to run or return depending on the JRE used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2380827</commentid>
    <comment_count>12</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-27 02:49:40 -0400</bug_when>
    <thetext>http://download.eclipse.org/eclipse/downloads/drops4/N20140326-2000/testResults.php

The tests are running again on Mac and windows. There is one known failure in jdt.apt.tests, which is being tracked by bug 431253.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2394440</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-04-29 03:59:17 -0400</bug_when>
    <thetext>Verified for 4.4 M7</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>