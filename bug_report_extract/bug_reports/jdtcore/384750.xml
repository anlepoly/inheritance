<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>384750</bug_id>
          
          <creation_ts>2012-07-10 11:56:00 -0400</creation_ts>
          <short_desc>[1.8] Compiler should reject invalid method reference expressions</short_desc>
          <delta_ts>2013-02-18 14:40:11 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>382701</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Ayushman Jain">amj87.iitr</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>anchakrk</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2135174</commentid>
    <comment_count>0</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-07-10 11:56:11 -0400</bug_when>
    <thetext>BETA_JAVA8

The following invalid reference expressions are currently accepted
interface I {
	
}
public class Action&lt;T&gt; {
	class Inner {
		
	}
	
	
	public void f1(Object[] o[][]) {}
    public void foo() {
    	I len = Action()::bar;
    	I len2 = foo()::bar;
    	I len3 = Action.class::bar; 
    	I len5 = foo(Action&lt;i)::bar;
    	I len6 = foo()[]::bar;
}
}

Basically, any kind of expression is accepted on LHS. The first two expressions can be eliminated during semantic analysis depending on what they return, but the third one should be rejected by the parser I think. Or is it actually valid?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2135418</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-07-11 00:52:12 -0400</bug_when>
    <thetext>These problems show up because there is no semantic analysis and symbol/type 
resolution code in place today. The new AST nodes LambdaExpression and ReferenceExpression are for the time being (deliberately) subclassed from NullLiteral and so inherit the resolve* behavior from NullLiteral.

All code examples in comment#0 are *syntactically* legal: akin to how both
&quot;Elephants  love to eat sugarcane&quot; and &quot;Elephants love to eat chairs&quot; are
*grammatically* correct, with &quot;sugarcane&quot; and &quot;chairs&quot; both belonging to 
the sane syntactic category viz the non terminal &quot;noun&quot;. Likewise, everything
to the left of :: is a  Primary expression and hence can be derived from 
the rule:

ReferenceExpression ::= Primary &apos;::&apos; NonWildTypeArgumentsopt Identifier

so there is no issue with the grammar/parser per se.

I&apos;ll add this as a blocker for bug 382701 so we can verify that these
are appropriately rejected when semantic analysis and resolution are
fully in place. Changed title accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2135442</commentid>
    <comment_count>2</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-07-11 03:11:21 -0400</bug_when>
    <thetext>Ah ok, i didn&apos;t see that &apos;type&apos; &apos;.&apos; &apos;class&apos; derives from &apos;Primary&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2216511</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-13 18:55:12 -0500</bug_when>
    <thetext>I am working on this now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217687</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-16 14:27:16 -0500</bug_when>
    <thetext>First batch of changes released here:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=1eeba055c4a858ddea83f6c85864678280808173</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217859</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-18 00:16:31 -0500</bug_when>
    <thetext>Second installment constituting near complete implementation released here:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=6574ecf5c4b5647220e5c6028073411e3f107ad7

I&apos;ll add tests and close a few loose ends before resolving.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218095</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-18 08:20:52 -0500</bug_when>
    <thetext>Complete implementation released here:http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=4316c760d5aabce67e5ab83fef96d7ef0cdbee57.

I&apos;ll add tests and polish a few things and then resolve.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2218269</commentid>
    <comment_count>7</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-02-18 14:40:11 -0500</bug_when>
    <thetext>Tests and bug fixes released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=dff8c6a289a7b5116b7d5b64b00c639d5d108195</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>