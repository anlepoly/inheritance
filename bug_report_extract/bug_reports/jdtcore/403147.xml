<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>403147</bug_id>
          
          <creation_ts>2013-03-13 04:29:00 -0400</creation_ts>
          <short_desc>[compiler][null] FUP of bug 400761: consolidate interaction between unboxing, NPE, and deferred checking</short_desc>
          <delta_ts>2013-04-30 07:36:20 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.3 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2230178</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-03-13 04:29:57 -0400</bug_when>
    <thetext>Bug 400761 has introduced some more diagnostics for NPE due auto-unboxing.
This solution should be checked for completeness in two dimensions:
- are all relevant AST nodes covered?
- does the analysis create correct results within (nested) control structures that demand deferred checking?
Hopefully, this will also simplify the code a bit, by reducing code duplication.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234853</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-03-21 08:30:26 -0400</bug_when>
    <thetext>Ack</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2245803</commentid>
    <comment_count>2</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-04-19 02:37:44 -0400</bug_when>
    <thetext>The two dimensions mentioned in comment 0 are fixed by two subsequent changes:

(1) Indeed integrate unboxing analysis with deferred checking. Expression.checkNPEbyUnboxing may now delegate to flowContext.recordUnboxing. Inside FlowContext the new IN_UNBOXING case is handled similar to MAY_NULL, ASSIGN_TO_NONNULL etc. (but not like the analysis for redundant checks, like (CAN_ONLY_NULL | IN_COMPARISON_NULL)). This handling properly delegates to parent contexts if no conclusive null status is found.
This integration introduces another constellation for recorded null references: if checkType==IN_BOXING the corresponding slot in nullLocals will be null. All access to nullLocals is already protected by checking the corresponding checkType.

(2) Migrate many existing checks to using the new checkNPEbyUnboxing. While cleaning up I found one AST node which had slipped unboxing analysis all these years: ArrayReference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2245806</commentid>
    <comment_count>3</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-04-19 02:45:56 -0400</bug_when>
    <thetext>Released for 4.3 M7 via 
(1) commit 6959c7be7767b62f5fa53e20bd2cfda242ece473
(2) commit a13c822f6e072c300a8032fb994879857c034ca1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250333</commentid>
    <comment_count>4</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-04-30 06:36:45 -0400</bug_when>
    <thetext>Verified for 4.3 M7 Build id: I20130428-2000</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>