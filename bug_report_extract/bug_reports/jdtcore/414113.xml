<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>414113</bug_id>
          
          <creation_ts>2013-07-31 06:11:00 -0400</creation_ts>
          <short_desc>[1.8] Method Binding for default method has abstract modifier instead of default</short_desc>
          <delta_ts>2014-02-21 05:07:49 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>414100</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Noopur Gupta">noopur_gupta</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>anchakrk</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="59861"
          type_id="1"
          status="?"
          setter="anchakrk"
          requestee="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2290096</commentid>
    <comment_count>0</comment_count>
    <who name="Noopur Gupta">noopur_gupta</who>
    <bug_when>2013-07-31 06:11:20 -0400</bug_when>
    <thetext>interface A_test109 {
	int i = foo(); // Error
	default int foo() {
		return 0;
	}
}

Add a breakpoint in method: org.eclipse.jdt.internal.ui.text.correction.ModifierCorrectionSubProcessor#addNonAccessibleReferenceProposal(..)

Hover on the error in the above example.

The method binding for &apos;selectedNode&apos; (case: ASTNode.SIMPLE_NAME) contains &apos;abstract&apos; modifier instead of &apos;default&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315522</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-10-08 08:12:23 -0400</bug_when>
    <thetext>Manoj, Anirban is looking for tasks to work on. I am reassigning this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315529</commentid>
    <comment_count>2</comment_count>
      <attachid>236210</attachid>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-10-08 08:20:47 -0400</bug_when>
    <thetext>Created attachment 236210
wip patch

(In reply to Srikanth Sankaran from comment #1)
&gt; Manoj, Anirban is looking for tasks to work on. I am reassigning this.

Sure. 
anirban: you can use at least parts (testcase may be)of the attached wip patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2325806</commentid>
    <comment_count>3</comment_count>
      <attachid>237140</attachid>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2013-11-01 19:46:32 -0400</bug_when>
    <thetext>Created attachment 237140
Solution and testcase

Solution and testcase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2326564</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-05 03:13:46 -0500</bug_when>
    <thetext>(1) I don&apos;t think we should add a new API getRawModifiers() for this. In general,
adding new API needs discussion with the UI team articulating why the existing
API will not do and a new one is required. What is the reason you
think ITypeBinding.getModifiers() will not do ? 

(2) Let us take this opportunity to study the use of AccJustFlag - this
was called out as a potential problem spot in https://bugs.eclipse.org/bugs/show_bug.cgi?id=399791#c13 and https://bugs.eclipse.org/bugs/show_bug.cgi?id=399791#c14, but I don&apos;t think
we quite followed up on that thread.

(3) Does the same problem affect static methods ? This fix is all about
default methods - Just checking.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327374</commentid>
    <comment_count>5</comment_count>
      <attachid>237251</attachid>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2013-11-06 19:02:45 -0500</bug_when>
    <thetext>Created attachment 237251
patch, review comments taken

getModifiers() made to return default method bit.
static methods are handled in the same scenario.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2327407</commentid>
    <comment_count>6</comment_count>
      <attachid>237254</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-11-07 00:58:11 -0500</bug_when>
    <thetext>Created attachment 237254
Alternate patch

(In reply to ANIRBAN CHAKRABORTY from comment #5)
&gt; Created attachment 237251 [details]
&gt; patch, review comments taken
&gt; 
&gt; getModifiers() made to return default method bit.
&gt; static methods are handled in the same scenario.

I fixed a bunch of issues with this patch:

1. (existing problem). We should never generate problem constructors
for interfaces.

2. The snippet:

method.modifiers = ClassFileConstants.AccPublic | (method.modifiers &amp; ExtraCompilerModifiers.AccDefaultMethod) | (method.modifiers &amp; ClassFileConstants.AccAbstract) | (method.modifiers &amp; ClassFileConstants.AccStatic);

     is not quite correct, default methods don&apos;t have a bit in the class file, 
so no need to set it on method modifiers for problem methods. Setting both
abstract and static/default is just plain wrong - (though the abstract bit is
correctly cleared subsequently by the existing code in addProblemMethod)

3. The comment:

// we cannot create problem methods for an interface for levels. 
// So we have to generate a clinit
// which should contain all the problem

is stale and needs to be massaged. Just 5 lines below this comment, you
are creating problem methods :)

4. typeBinding.scope.compilerOptions().sourceLevel &lt; ClassFileConstants.JDK1_8
is loop invariant code. Should be hoisted out of the loop.

5. I also merged the two for loops into one.

6. CodeSnippetClassFile needs similar changes.

Anirban, please review this patch closely and if you agree, please release.

Confirm on the bug that (a) you have studied all uses of JustFlags and that
no other issues exist pertaining to that and (b) that it solves the problem
reported in comment#0. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2328721</commentid>
    <comment_count>7</comment_count>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2013-11-11 09:16:13 -0500</bug_when>
    <thetext>Hello,
After reviewing and agreeing with the patch, released here:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=b19e9753b2440fbc565e94b25c4419c1ce3ce1f2
Thanks
Anirban</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2328723</commentid>
    <comment_count>8</comment_count>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2013-11-11 09:17:24 -0500</bug_when>
    <thetext>Fixed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2358131</commentid>
    <comment_count>9</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-02-03 13:35:08 -0500</bug_when>
    <thetext>Before you touch an API-facing method, you always have to consult the API specification. In this case, adding &apos;default&apos; broke the API in IBinding#getModifiers() that was established with bug 405517:

 * Note that &apos;default&apos; is not included among the modifiers.
 * Default methods are interface methods that are neither abstract nor static.

It&apos;s still not necessary to include &apos;default&apos; here, but I also don&apos;t have a problem with including it. Nevertheless, implementation and API need to agree.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2358279</commentid>
    <comment_count>10</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-02-03 19:56:08 -0500</bug_when>
    <thetext>Thanks for catching this, I have adjusted the javadoc comment here:
http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=63ea92c6bca7bc4fd0ef97c7dc77b0ebedb8c05e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2366620</commentid>
    <comment_count>11</comment_count>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2014-02-21 05:07:29 -0500</bug_when>
    <thetext>Verified as working for Eclipse + Java 8 RC1 using Kepler SR1 + Eclipse Java Development Tools Patch for Java 8 Support (BETA) 1.0.0.v20140220-2054</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2366621</commentid>
    <comment_count>12</comment_count>
    <who name="ANIRBAN CHAKRABORTY">anchakrk</who>
    <bug_when>2014-02-21 05:07:49 -0500</bug_when>
    <thetext>Verified as working for Eclipse + Java 8 RC1 using Kepler SR1 + Eclipse Java Development Tools Patch for Java 8 Support (BETA) 1.0.0.v20140220-2054</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>236210</attachid>
            <date>2013-10-08 08:20:00 -0400</date>
            <delta_ts>2013-10-08 08:20:47 -0400</delta_ts>
            <desc>wip patch</desc>
            <filename>414113-WIP.patch</filename>
            <type>text/plain</type>
            <size>2749</size>
            <attacher name="Manoj Palat Away Until May 11 2015">manpalat</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IDA2NTI2YzkuLjA4ZmJkMmUgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtNTIsNyArNTIsNyBAQAogCXN0YXRpYyB7CiAv
LwkJVEVTVFNfTlVNQkVSUyA9IG5ldyBpbnRbXSB7IDE5IH07CiAvLwkJVEVTVFNfUkFOR0UgPSBu
ZXcgaW50W10geyAxLCAtMSB9OwotLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsidGVz
dDAwMDEifTsKKwkJVEVTVFNfTkFNRVMgPSBuZXcgU3RyaW5nW10geyJ0ZXN0QnVnNDE0MTEzIn07
CiAJfQogCXB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgpIHsKIAkJcmV0dXJuIGJ1aWxkTW9kZWxU
ZXN0U3VpdGUoQVNUQ29udmVydGVyMThUZXN0LmNsYXNzKTsKQEAgLTY2LDYgKzY2LDIyIEBACiAJ
CX0KIAl9CiAKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/
aWQ9NDE0MTEzCisJcHVibGljIHZvaWQgdGVzdEJ1ZzQxNDExMygpIHRocm93cyBKYXZhTW9kZWxF
eGNlcHRpb24geworCQlTdHJpbmcgY29udGVudHMgPQorCQkJInB1YmxpYyBpbnRlcmZhY2UgWCB7
XG4iICsKKwkJCSIJaW50IGkgPSBmb28oKTtcbiIgKworCQkJIglkZWZhdWx0IGludCBmb28oKSB7
IHJldHVybiAxO31cbiIgKworCQkJIn1cbiI7CisJCXRoaXMud29ya2luZ0NvcHkgPSBnZXRXb3Jr
aW5nQ29weSgiL0NvbnZlcnRlcjE4L3NyYy9YLmphdmEiLCB0cnVlKTsKKwkJQVNUTm9kZSBub2Rl
ID0gYnVpbGRBU1QoY29udGVudHMsIHRoaXMud29ya2luZ0NvcHksIHRydWUpOworCQlhc3NlcnRF
cXVhbHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVuaXQiLCBBU1ROb2RlLkNPTVBJTEFUSU9OX1VOSVQs
IG5vZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCUNvbXBpbGF0aW9uVW5pdCB1bml0ID0gKENvbXBpbGF0
aW9uVW5pdCkgbm9kZTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGUgPSAgKFR5cGVEZWNsYXJhdGlv
bikgdW5pdC50eXBlcygpLmdldCgwKTsKKwkJTWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kID0gKE1l
dGhvZERlY2xhcmF0aW9uKSB0eXBlLmJvZHlEZWNsYXJhdGlvbnMoKS5nZXQoMCk7CisJCUlNZXRo
b2RCaW5kaW5nIGJpbmRpbmcgPSAgbWV0aG9kLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydFRy
dWUoImJpbmRpbmcgaXMgYWJzdHJhY3QiLCAoYmluZGluZy5nZXRNb2RpZmllcnMoKSAmIE1vZGlm
aWVyLkFCU1RSQUNUKSA9PSAwKTsKKwl9CiAJLyoKIAkgKiBUeXBlIEFubm90YXRpb25zIG9uIFZh
cmlhYmxlIEFyZ3VtZW50cwogCSAqLwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
Y29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZhCmluZGV4IGE3ZDNiNjEuLjc5YzI1M2UgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9DbGFzc0ZpbGUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvQ2xhc3NGaWxlLmphdmEKQEAg
LTIxMyw4ICsyMTMsMTMgQEAKIAkJCQkJQWJzdHJhY3RNZXRob2REZWNsYXJhdGlvbiBtZXRob2RE
ZWNsID0gbWV0aG9kRGVjbHNbaV07CiAJCQkJCU1ldGhvZEJpbmRpbmcgbWV0aG9kID0gbWV0aG9k
RGVjbC5iaW5kaW5nOwogCQkJCQlpZiAobWV0aG9kID09IG51bGwgfHwgbWV0aG9kLmlzQ29uc3Ry
dWN0b3IoKSkgY29udGludWU7Ci0JCQkJCW1ldGhvZC5tb2RpZmllcnMgPSBDbGFzc0ZpbGVDb25z
dGFudHMuQWNjUHVibGljIHwgQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY0Fic3RyYWN0OwotCQkJCQlj
bGFzc0ZpbGUuYWRkQWJzdHJhY3RNZXRob2QobWV0aG9kRGVjbCwgbWV0aG9kKTsKKwkJCQkJbWV0
aG9kLm1vZGlmaWVycyA9IENsYXNzRmlsZUNvbnN0YW50cy5BY2NQdWJsaWM7CisJCQkJCWlmICht
ZXRob2QuaXNBYnN0cmFjdCgpKSB7CisJCQkJCQljbGFzc0ZpbGUuYWRkQWJzdHJhY3RNZXRob2Qo
bWV0aG9kRGVjbCwgbWV0aG9kKTsKKwkJCQkJfSBlbHNlIHsKKwkJCQkJCWNsYXNzRmlsZS5hZGRQ
cm9ibGVtTWV0aG9kKG1ldGhvZERlY2wsIG1ldGhvZCwgcHJvYmxlbXNDb3B5KTsKKwkJCQkJfS8v
aWYgKCl8IENsYXNzRmlsZUNvbnN0YW50cy5BY2NBYnN0cmFjdDsKKwkJCS8vCQljbGFzc0ZpbGUu
YWRkQWJzdHJhY3RNZXRob2QobWV0aG9kRGVjbCwgbWV0aG9kKTsKIAkJCQl9CiAJCQl9IGVsc2Ug
ewogCQkJCWZvciAoaW50IGkgPSAwLCBsZW5ndGggPSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBs
ZW5ndGg7IGkrKykgew==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237140</attachid>
            <date>2013-11-01 19:46:00 -0400</date>
            <delta_ts>2013-11-06 19:02:45 -0500</delta_ts>
            <desc>Solution and testcase</desc>
            <filename>Bug-414113.patch</filename>
            <type>text/plain</type>
            <size>6070</size>
            <attacher name="ANIRBAN CHAKRABORTY">anchakrk</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGJkZjYzYjcuLjIwOGE5OTggMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMzMyMyw0ICszMzIzLDIyIEBACiAJCWNoZWNr
U291cmNlUmFuZ2UoY2FzdFR5cGUsICJATWFya2VyIFc8U3RyaW5nPiIsIGNvbnRlbnRzKTsKIAkJ
Y2hlY2tTb3VyY2VSYW5nZSh0eXBlLCAiQE1hcmtlciBXIiwgY29udGVudHMpOwogCX0KKworCS8v
IEJ1ZyA0MTQxMTMgLSBbMS44XSBNZXRob2QgQmluZGluZyBmb3IgZGVmYXVsdCBtZXRob2QgaGFz
IGFic3RyYWN0IG1vZGlmaWVyIGluc3RlYWQgb2YgZGVmYXVsdAorCS8vIGh0dHBzOi8vYnVncy5l
Y2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00MTQxMTMKKwlwdWJsaWMgdm9pZCB0ZXN0
QnVnNDE0MTEzKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50
cyA9CisJCQkicHVibGljIGludGVyZmFjZSBYIHtcbiIgKworCQkJIglpbnQgaSA9IGZvbygpO1xu
IiArCisJCQkiCWRlZmF1bHQgaW50IGZvbygpIHsgcmV0dXJuIDE7fVxuIiArCisJCQkifVxuIjsK
KwkJdGhpcy53b3JraW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL1gu
amF2YSIsIHRydWUpOworCQlBU1ROb2RlIG5vZGUgPSBidWlsZEFTVChjb250ZW50cywgdGhpcy53
b3JraW5nQ29weSwgZmFsc2UpOworCQlhc3NlcnRFcXVhbHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVu
aXQiLCBBU1ROb2RlLkNPTVBJTEFUSU9OX1VOSVQsIG5vZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCUNv
bXBpbGF0aW9uVW5pdCB1bml0ID0gKENvbXBpbGF0aW9uVW5pdCkgbm9kZTsKKwkJVHlwZURlY2xh
cmF0aW9uIHR5cGUgPSAgKFR5cGVEZWNsYXJhdGlvbikgdW5pdC50eXBlcygpLmdldCgwKTsKKwkJ
TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kID0gKE1ldGhvZERlY2xhcmF0aW9uKSB0eXBlLmJvZHlE
ZWNsYXJhdGlvbnMoKS5nZXQoMSk7CisJCUlNZXRob2RCaW5kaW5nIGJpbmRpbmcgPSAgbWV0aG9k
LnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydFRydWUoImJpbmRpbmcgaXMgZGVmYXVsdCIsIChi
aW5kaW5nLmdldFJhd01vZGlmaWVycygpICYgTW9kaWZpZXIuREVGQVVMVCkgIT0gMCk7CisJfQog
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5q
YXZhCmluZGV4IDc3NDM3N2YuLmQ5OTJjNjQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvQ2xhc3NGaWxlLmphdmEKQEAgLTgxLDYgKzgxLDcgQEAKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5Db25zdGFudDsKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5TdHJpbmdDb25zdGFudDsK
IGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJpbmRpbmc7
CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5FeHRyYUNv
bXBpbGVyTW9kaWZpZXJzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5sb29rdXAuRmllbGRCaW5kaW5nOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5sb29rdXAuTG9jYWxUeXBlQmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQu
aW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkxvY2FsVmFyaWFibGVCaW5kaW5nOwpAQCAtMjE5LDgg
KzIyMCwxNyBAQAogCQkJCQlBYnN0cmFjdE1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2wgPSBt
ZXRob2REZWNsc1tpXTsKIAkJCQkJTWV0aG9kQmluZGluZyBtZXRob2QgPSBtZXRob2REZWNsLmJp
bmRpbmc7CiAJCQkJCWlmIChtZXRob2QgPT0gbnVsbCB8fCBtZXRob2QuaXNDb25zdHJ1Y3Rvcigp
KSBjb250aW51ZTsKLQkJCQkJbWV0aG9kLm1vZGlmaWVycyA9IENsYXNzRmlsZUNvbnN0YW50cy5B
Y2NQdWJsaWMgfCBDbGFzc0ZpbGVDb25zdGFudHMuQWNjQWJzdHJhY3Q7Ci0JCQkJCWNsYXNzRmls
ZS5hZGRBYnN0cmFjdE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOworCQkJCQlpZiAodHlwZUJp
bmRpbmcuc2NvcGUuY29tcGlsZXJPcHRpb25zKCkuc291cmNlTGV2ZWwgPCBDbGFzc0ZpbGVDb25z
dGFudHMuSkRLMV84KSB7CisJCQkJCQltZXRob2QubW9kaWZpZXJzID0gQ2xhc3NGaWxlQ29uc3Rh
bnRzLkFjY1B1YmxpYyB8IENsYXNzRmlsZUNvbnN0YW50cy5BY2NBYnN0cmFjdDsKKwkJCQkJCWNs
YXNzRmlsZS5hZGRBYnN0cmFjdE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOworCQkJCQl9IGVs
c2UgeworCQkJCQkJbWV0aG9kLm1vZGlmaWVycyA9IENsYXNzRmlsZUNvbnN0YW50cy5BY2NQdWJs
aWMgfCAobWV0aG9kLm1vZGlmaWVycyAmIEV4dHJhQ29tcGlsZXJNb2RpZmllcnMuQWNjRGVmYXVs
dE1ldGhvZCkgfCAobWV0aG9kLm1vZGlmaWVycyAmIENsYXNzRmlsZUNvbnN0YW50cy5BY2NBYnN0
cmFjdCk7CisJCQkJCQlpZiAobWV0aG9kLmlzQWJzdHJhY3QoKSkgeworCQkJCQkJCWNsYXNzRmls
ZS5hZGRBYnN0cmFjdE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOworCQkJCQkJfSBlbHNlIHsK
KwkJCQkJCQljbGFzc0ZpbGUuYWRkUHJvYmxlbU1ldGhvZChtZXRob2REZWNsLCBtZXRob2QsIHBy
b2JsZW1zQ29weSk7CisJCQkJCQl9CisJCQkJCX0KIAkJCQl9CiAJCQl9IGVsc2UgewogCQkJCWZv
ciAoaW50IGkgPSAwLCBsZW5ndGggPSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkr
KykgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pk
dC9jb3JlL2RvbS9JTWV0aG9kQmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9t
L29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9JTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IDU2NGIy
YTcuLjJjYmZjYmUgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNs
aXBzZS9qZHQvY29yZS9kb20vSU1ldGhvZEJpbmRpbmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0lNZXRob2RCaW5kaW5nLmphdmEK
QEAgLTEsOSArMSwxMyBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAo
YykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAo
YykgMjAwMCwgMjAxMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRz
IHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAg
KiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1Ymxp
YyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBh
bmQgaXMgYXZhaWxhYmxlIGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12
MTAuaHRtbAorICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJh
ZnQgc3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQ
cm9jZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVh
dGlvbiBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBh
bnkgc3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAg
ICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KQEAgLTMy
Niw0ICszMzAsMTMgQEAKIAkgKiBAc2luY2UgMy4xCiAJICovCiAJcHVibGljIGJvb2xlYW4gb3Zl
cnJpZGVzKElNZXRob2RCaW5kaW5nIG1ldGhvZCk7CisJCisJLyoqCisJICogUmV0dXJucyB0aGUg
cmF3IG1vZGlmaWVycyBmb3IgdGhpcyBiaW5kaW5nLgorCSAqCisJICogQHJldHVybiB0aGUgcmF3
IG1vZGlmaWVyIGJpdCBwYXR0ZXJuIGZvciB0aGlzIGJpbmRpbmcKKwkgKiBAc2luY2UgMy45IEJF
VEFfSkFWQTgKKwkgKi8KKwlwdWJsaWMgaW50IGdldFJhd01vZGlmaWVycygpOworCiB9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9t
L01ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBz
ZS9qZHQvY29yZS9kb20vTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IDUzNDk4NGQuLjRiMGE4ZGQg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29y
ZS9kb20vTWV0aG9kQmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9v
cmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9kQmluZGluZy5qYXZhCkBAIC0xLDkgKzEsMTMg
QEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTEg
SUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMg
SUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlz
IHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFp
bGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAK
ICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxl
IGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAorICoKKyAq
IFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlv
biBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFu
ZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3Nlcwor
ICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlv
biBvZiB0aGUgSkNQLgogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRp
b24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KQEAgLTQ0NCw0ICs0NDgsOCBAQAog
CXB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAJCXJldHVybiB0aGlzLmJpbmRpbmcudG9TdHJp
bmcoKTsKIAl9CisKKwlwdWJsaWMgaW50IGdldFJhd01vZGlmaWVycygpIHsKKwkJcmV0dXJuIHRo
aXMuYmluZGluZy5tb2RpZmllcnM7CisJfQogfQ==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237251</attachid>
            <date>2013-11-06 19:02:00 -0500</date>
            <delta_ts>2013-11-06 19:02:45 -0500</delta_ts>
            <desc>patch, review comments taken</desc>
            <filename>Bug-414113--review.patch</filename>
            <type>text/plain</type>
            <size>6982</size>
            <attacher name="ANIRBAN CHAKRABORTY">anchakrk</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGQyZDdkNWUuLjVkZmI0NDQgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMzM3Myw2ICszMzczLDI4IEBACiAJCVBhcmFt
ZXRlcml6ZWRUeXBlIGNhc3RUeXBlID0gKFBhcmFtZXRlcml6ZWRUeXBlKSBjYXN0LmdldFR5cGUo
KTsKIAkJVHlwZSB0eXBlID0gY2FzdFR5cGUuZ2V0VHlwZSgpOwogCQljaGVja1NvdXJjZVJhbmdl
KGNhc3RUeXBlLCAiQE1hcmtlciBXPFN0cmluZz4iLCBjb250ZW50cyk7CiAJCWNoZWNrU291cmNl
UmFuZ2UodHlwZSwgIkBNYXJrZXIgVyIsIGNvbnRlbnRzKTsKIAl9CisKKwkvLyBCdWcgNDE0MTEz
IC0gWzEuOF0gTWV0aG9kIEJpbmRpbmcgZm9yIGRlZmF1bHQgbWV0aG9kIGhhcyBhYnN0cmFjdCBt
b2RpZmllciBpbnN0ZWFkIG9mIGRlZmF1bHQKKwkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcv
YnVncy9zaG93X2J1Zy5jZ2k/aWQ9NDE0MTEzCisJcHVibGljIHZvaWQgdGVzdEJ1ZzQxNDExMygp
IHRocm93cyBKYXZhTW9kZWxFeGNlcHRpb24geworCQlTdHJpbmcgY29udGVudHMgPQorCQkJInB1
YmxpYyBpbnRlcmZhY2UgWCB7XG4iICsKKwkJCSIJaW50IGkgPSBmb28oKTtcbiIgKworCQkJIglk
ZWZhdWx0IGludCBmb29fZGVmYXVsdCgpIHsgcmV0dXJuIDE7fVxuIiArCisJCQkiCXN0YXRpYyBp
bnQgZm9vX3N0YXRpYygpIHsgcmV0dXJuIDE7fVxuIiArCisJCQkifVxuIjsKKwkJdGhpcy53b3Jr
aW5nQ29weSA9IGdldFdvcmtpbmdDb3B5KCIvQ29udmVydGVyMTgvc3JjL1guamF2YSIsIHRydWUp
OworCQlBU1ROb2RlIG5vZGUgPSBidWlsZEFTVChjb250ZW50cywgdGhpcy53b3JraW5nQ29weSwg
ZmFsc2UpOworCQlhc3NlcnRFcXVhbHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVuaXQiLCBBU1ROb2Rl
LkNPTVBJTEFUSU9OX1VOSVQsIG5vZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCUNvbXBpbGF0aW9uVW5p
dCB1bml0ID0gKENvbXBpbGF0aW9uVW5pdCkgbm9kZTsKKwkJVHlwZURlY2xhcmF0aW9uIHR5cGUg
PSAgKFR5cGVEZWNsYXJhdGlvbikgdW5pdC50eXBlcygpLmdldCgwKTsKKwkJTWV0aG9kRGVjbGFy
YXRpb24gbWV0aG9kID0gKE1ldGhvZERlY2xhcmF0aW9uKSB0eXBlLmJvZHlEZWNsYXJhdGlvbnMo
KS5nZXQoMSk7CisJCUlNZXRob2RCaW5kaW5nIGJpbmRpbmcgPSAgbWV0aG9kLnJlc29sdmVCaW5k
aW5nKCk7CisJCWFzc2VydFRydWUoImJpbmRpbmcgaXMgZGVmYXVsdCIsIChiaW5kaW5nLmdldE1v
ZGlmaWVycygpICYgTW9kaWZpZXIuREVGQVVMVCkgIT0gMCk7CisJCW1ldGhvZCA9IChNZXRob2RE
ZWNsYXJhdGlvbikgdHlwZS5ib2R5RGVjbGFyYXRpb25zKCkuZ2V0KDIpOworCQliaW5kaW5nID0g
IG1ldGhvZC5yZXNvbHZlQmluZGluZygpOworCQlhc3NlcnRUcnVlKCJiaW5kaW5nIGlzIHN0YXRp
YyIsIChiaW5kaW5nLmdldE1vZGlmaWVycygpICYgTW9kaWZpZXIuU1RBVElDKSAhPSAwKTsKKwl9
CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvQ2xhc3NGaWxlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvQ2xhc3NGaWxl
LmphdmEKaW5kZXggOGZjNThhMS4uMjhmZThhZCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmls
ZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2YQpAQCAtNzksMTAgKzc5LDExIEBACiBp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmNvZGVnZW4uVmVyaWZpY2F0
aW9uVHlwZUluZm87CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmlt
cGwuQ29tcGlsZXJPcHRpb25zOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5pbXBsLkNvbnN0YW50OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5pbXBsLlN0cmluZ0NvbnN0YW50OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5sb29rdXAuQmluZGluZzsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIubG9va3VwLkV4dHJhQ29tcGlsZXJNb2RpZmllcnM7CiBpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5GaWVsZEJpbmRpbmc7CiBpbXBvcnQg
b3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5Mb2NhbFR5cGVCaW5kaW5n
OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuTG9jYWxW
YXJpYWJsZUJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
Lmxvb2t1cC5Mb29rdXBFbnZpcm9ubWVudDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIubG9va3VwLk1ldGhvZEJpbmRpbmc7CkBAIC0yMTcsMTIgKzIxOCwyMSBAQAog
CQkJCWNsYXNzRmlsZS5hZGRQcm9ibGVtQ2xpbml0KHByb2JsZW1zQ29weSk7CiAJCQkJZm9yIChp
bnQgaSA9IDAsIGxlbmd0aCA9IG1ldGhvZERlY2xzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7
CiAJCQkJCUFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbCA9IG1ldGhvZERlY2xz
W2ldOwogCQkJCQlNZXRob2RCaW5kaW5nIG1ldGhvZCA9IG1ldGhvZERlY2wuYmluZGluZzsKIAkJ
CQkJaWYgKG1ldGhvZCA9PSBudWxsIHx8IG1ldGhvZC5pc0NvbnN0cnVjdG9yKCkpIGNvbnRpbnVl
OwotCQkJCQltZXRob2QubW9kaWZpZXJzID0gQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1B1YmxpYyB8
IENsYXNzRmlsZUNvbnN0YW50cy5BY2NBYnN0cmFjdDsKLQkJCQkJY2xhc3NGaWxlLmFkZEFic3Ry
YWN0TWV0aG9kKG1ldGhvZERlY2wsIG1ldGhvZCk7CisJCQkJCWlmICh0eXBlQmluZGluZy5zY29w
ZS5jb21waWxlck9wdGlvbnMoKS5zb3VyY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0YW50cy5KREsx
XzgpIHsKKwkJCQkJCW1ldGhvZC5tb2RpZmllcnMgPSBDbGFzc0ZpbGVDb25zdGFudHMuQWNjUHVi
bGljIHwgQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY0Fic3RyYWN0OworCQkJCQkJY2xhc3NGaWxlLmFk
ZEFic3RyYWN0TWV0aG9kKG1ldGhvZERlY2wsIG1ldGhvZCk7CisJCQkJCX0gZWxzZSB7CisJCQkJ
CQltZXRob2QubW9kaWZpZXJzID0gQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1B1YmxpYyB8IChtZXRo
b2QubW9kaWZpZXJzICYgRXh0cmFDb21waWxlck1vZGlmaWVycy5BY2NEZWZhdWx0TWV0aG9kKSB8
IChtZXRob2QubW9kaWZpZXJzICYgQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY0Fic3RyYWN0KSB8ICht
ZXRob2QubW9kaWZpZXJzICYgQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1N0YXRpYyk7CisJCQkJCQlp
ZiAobWV0aG9kLmlzQWJzdHJhY3QoKSkgeworCQkJCQkJCWNsYXNzRmlsZS5hZGRBYnN0cmFjdE1l
dGhvZChtZXRob2REZWNsLCBtZXRob2QpOworCQkJCQkJfSBlbHNlIHsKKwkJCQkJCQljbGFzc0Zp
bGUuYWRkUHJvYmxlbU1ldGhvZChtZXRob2REZWNsLCBtZXRob2QsIHByb2JsZW1zQ29weSk7CisJ
CQkJCQl9CisJCQkJCX0KIAkJCQl9CiAJCQl9IGVsc2UgewogCQkJCWZvciAoaW50IGkgPSAwLCBs
ZW5ndGggPSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogCQkJCQlBYnN0
cmFjdE1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2wgPSBtZXRob2REZWNsc1tpXTsKIAkJCQkJ
TWV0aG9kQmluZGluZyBtZXRob2QgPSBtZXRob2REZWNsLmJpbmRpbmc7CmRpZmYgLS1naXQgYS9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvbG9va3VwL01ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kQmlu
ZGluZy5qYXZhCmluZGV4IGM4M2MxYjMuLjcwMDAzZDQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29r
dXAvTWV0aG9kQmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kQmluZGluZy5q
YXZhCkBAIC01OTgsMTEgKzU5OCwxMSBAQAogCXNpZy5nZXRDaGFycygwLCBzaWdMZW5ndGgsIGdl
bmVyaWNTaWduYXR1cmUsIDApOwogCXJldHVybiBnZW5lcmljU2lnbmF0dXJlOwogfQogCiBwdWJs
aWMgZmluYWwgaW50IGdldEFjY2Vzc0ZsYWdzKCkgewotCXJldHVybiB0aGlzLm1vZGlmaWVycyAm
IEV4dHJhQ29tcGlsZXJNb2RpZmllcnMuQWNjSnVzdEZsYWc7CisJcmV0dXJuIHRoaXMubW9kaWZp
ZXJzICYgKEV4dHJhQ29tcGlsZXJNb2RpZmllcnMuQWNjSnVzdEZsYWcgfCBFeHRyYUNvbXBpbGVy
TW9kaWZpZXJzLkFjY0RlZmF1bHRNZXRob2QpOwogfQogCiBwdWJsaWMgQW5ub3RhdGlvbkJpbmRp
bmdbXSBnZXRBbm5vdGF0aW9ucygpIHsKIAlNZXRob2RCaW5kaW5nIG9yaWdpbmFsTWV0aG9kID0g
b3JpZ2luYWwoKTsKIAlyZXR1cm4gb3JpZ2luYWxNZXRob2QuZGVjbGFyaW5nQ2xhc3MucmV0cmll
dmVBbm5vdGF0aW9ucyhvcmlnaW5hbE1ldGhvZCk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9kb20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL01ldGhvZEJpbmRpbmcuamF2YSBi
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9k
QmluZGluZy5qYXZhCmluZGV4IGVkMWY1NTUuLjM3NTNlNjMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9kQmluZGluZy5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9k
b20vTWV0aG9kQmluZGluZy5qYXZhCkBAIC0xLDExICsxLDE1IEBACiAvKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElCTSBDb3Jwb3JhdGlvbiBhbmQg
b3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQg
b3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNj
b21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmll
cyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5l
Y2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKKyAqCisgKiBUaGlzIGlzIGFuIGltcGxlbWVu
dGF0aW9uIG9mIGFuIGVhcmx5LWRyYWZ0IHNwZWNpZmljYXRpb24gZGV2ZWxvcGVkIHVuZGVyIHRo
ZSBKYXZhCisgKiBDb21tdW5pdHkgUHJvY2VzcyAoSkNQKSBhbmQgaXMgbWFkZSBhdmFpbGFibGUg
Zm9yIHRlc3RpbmcgYW5kIGV2YWx1YXRpb24gcHVycG9zZXMKKyAqIG9ubHkuIFRoZSBjb2RlIGlz
IG5vdCBjb21wYXRpYmxlIHdpdGggYW55IHNwZWNpZmljYXRpb24gb2YgdGhlIEpDUC4KICAqCiAg
KiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5k
IGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIApAQCAtMjksMTEgKzMz
LDExIEBACiAgKi8KIGNsYXNzIE1ldGhvZEJpbmRpbmcgaW1wbGVtZW50cyBJTWV0aG9kQmluZGlu
ZyB7CiAKIAlwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgVkFMSURfTU9ESUZJRVJTID0gTW9kaWZp
ZXIuUFVCTElDIHwgTW9kaWZpZXIuUFJPVEVDVEVEIHwgTW9kaWZpZXIuUFJJVkFURSB8CiAJCU1v
ZGlmaWVyLkFCU1RSQUNUIHwgTW9kaWZpZXIuU1RBVElDIHwgTW9kaWZpZXIuRklOQUwgfCBNb2Rp
Zmllci5TWU5DSFJPTklaRUQgfCBNb2RpZmllci5OQVRJVkUgfAotCQlNb2RpZmllci5TVFJJQ1RG
UDsKKwkJTW9kaWZpZXIuU1RSSUNURlAgfCBNb2RpZmllci5ERUZBVUxUOwogCXByaXZhdGUgc3Rh
dGljIGZpbmFsIElUeXBlQmluZGluZ1tdIE5PX1RZUEVfQklORElOR1MgPSBuZXcgSVR5cGVCaW5k
aW5nWzBdOwogCXByaXZhdGUgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1
cC5NZXRob2RCaW5kaW5nIGJpbmRpbmc7CiAJcHJpdmF0ZSBCaW5kaW5nUmVzb2x2ZXIgcmVzb2x2
ZXI7CiAJcHJpdmF0ZSBJVHlwZUJpbmRpbmdbXSBwYXJhbWV0ZXJUeXBlczsKIAlwcml2YXRlIElU
eXBlQmluZGluZ1tdIGV4Y2VwdGlvblR5cGVzOw==
</data>
<flag name="review"
          id="59887"
          type_id="6"
          status="?"
          setter="anchakrk"
    />
          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>237254</attachid>
            <date>2013-11-07 00:58:00 -0500</date>
            <delta_ts>2013-11-07 00:58:11 -0500</delta_ts>
            <desc>Alternate patch</desc>
            <filename>blah.patch</filename>
            <type>text/plain</type>
            <size>9854</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE4VGVzdC5qYXZhCmluZGV4IGQyZDdkNWUuLjVkZmI0NDQgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMThUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxOFRlc3QuamF2YQpAQCAtMzM3NSw0ICszMzc1LDI2IEBACiAJCWNoZWNr
U291cmNlUmFuZ2UoY2FzdFR5cGUsICJATWFya2VyIFc8U3RyaW5nPiIsIGNvbnRlbnRzKTsKIAkJ
Y2hlY2tTb3VyY2VSYW5nZSh0eXBlLCAiQE1hcmtlciBXIiwgY29udGVudHMpOwogCX0KKworCS8v
IEJ1ZyA0MTQxMTMgLSBbMS44XSBNZXRob2QgQmluZGluZyBmb3IgZGVmYXVsdCBtZXRob2QgaGFz
IGFic3RyYWN0IG1vZGlmaWVyIGluc3RlYWQgb2YgZGVmYXVsdAorCS8vIGh0dHBzOi8vYnVncy5l
Y2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD00MTQxMTMKKwlwdWJsaWMgdm9pZCB0ZXN0
QnVnNDE0MTEzKCkgdGhyb3dzIEphdmFNb2RlbEV4Y2VwdGlvbiB7CisJCVN0cmluZyBjb250ZW50
cyA9CisJCQkicHVibGljIGludGVyZmFjZSBYIHtcbiIgKworCQkJIglpbnQgaSA9IGZvbygpO1xu
IiArCisJCQkiCWRlZmF1bHQgaW50IGZvb19kZWZhdWx0KCkgeyByZXR1cm4gMTt9XG4iICsKKwkJ
CSIJc3RhdGljIGludCBmb29fc3RhdGljKCkgeyByZXR1cm4gMTt9XG4iICsKKwkJCSJ9XG4iOwor
CQl0aGlzLndvcmtpbmdDb3B5ID0gZ2V0V29ya2luZ0NvcHkoIi9Db252ZXJ0ZXIxOC9zcmMvWC5q
YXZhIiwgdHJ1ZSk7CisJCUFTVE5vZGUgbm9kZSA9IGJ1aWxkQVNUKGNvbnRlbnRzLCB0aGlzLndv
cmtpbmdDb3B5LCBmYWxzZSk7CisJCWFzc2VydEVxdWFscygiTm90IGEgY29tcGlsYXRpb24gdW5p
dCIsIEFTVE5vZGUuQ09NUElMQVRJT05fVU5JVCwgbm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJQ29t
cGlsYXRpb25Vbml0IHVuaXQgPSAoQ29tcGlsYXRpb25Vbml0KSBub2RlOworCQlUeXBlRGVjbGFy
YXRpb24gdHlwZSA9ICAoVHlwZURlY2xhcmF0aW9uKSB1bml0LnR5cGVzKCkuZ2V0KDApOworCQlN
ZXRob2REZWNsYXJhdGlvbiBtZXRob2QgPSAoTWV0aG9kRGVjbGFyYXRpb24pIHR5cGUuYm9keURl
Y2xhcmF0aW9ucygpLmdldCgxKTsKKwkJSU1ldGhvZEJpbmRpbmcgYmluZGluZyA9ICBtZXRob2Qu
cmVzb2x2ZUJpbmRpbmcoKTsKKwkJYXNzZXJ0VHJ1ZSgiYmluZGluZyBpcyBkZWZhdWx0IiwgKGJp
bmRpbmcuZ2V0TW9kaWZpZXJzKCkgJiBNb2RpZmllci5ERUZBVUxUKSAhPSAwKTsKKwkJbWV0aG9k
ID0gKE1ldGhvZERlY2xhcmF0aW9uKSB0eXBlLmJvZHlEZWNsYXJhdGlvbnMoKS5nZXQoMik7CisJ
CWJpbmRpbmcgPSAgbWV0aG9kLnJlc29sdmVCaW5kaW5nKCk7CisJCWFzc2VydFRydWUoImJpbmRp
bmcgaXMgc3RhdGljIiwgKGJpbmRpbmcuZ2V0TW9kaWZpZXJzKCkgJiBNb2RpZmllci5TVEFUSUMp
ICE9IDApOworCX0KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9DbGFzc0ZpbGUuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9DbGFzc0ZpbGUuamF2YQppbmRleCA4ZmM1OGExLi5mOGE4ZDhhIDEwMDY0NAotLS0gYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvQ2xhc3NGaWxlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL0NsYXNzRmlsZS5qYXZhCkBAIC0yMTAsMzAg
KzIxMCwyOCBAQAogCQlTeXN0ZW0uYXJyYXljb3B5KHByb2JsZW1zLCAwLCBwcm9ibGVtc0NvcHks
IDAsIHByb2JsZW1zTGVuZ3RoKTsKIAogCQlBYnN0cmFjdE1ldGhvZERlY2xhcmF0aW9uW10gbWV0
aG9kRGVjbHMgPSB0eXBlRGVjbGFyYXRpb24ubWV0aG9kczsKKwkJYm9vbGVhbiBhYnN0cmFjdE1l
dGhvZHNPbmx5ID0gZmFsc2U7CiAJCWlmIChtZXRob2REZWNscyAhPSBudWxsKSB7CiAJCQlpZiAo
dHlwZUJpbmRpbmcuaXNJbnRlcmZhY2UoKSkgewotCQkJCS8vIHdlIGNhbm5vdCBjcmVhdGUgcHJv
YmxlbSBtZXRob2RzIGZvciBhbiBpbnRlcmZhY2UuIFNvIHdlIGhhdmUgdG8gZ2VuZXJhdGUgYSBj
bGluaXQKLQkJCQkvLyB3aGljaCBzaG91bGQgY29udGFpbiBhbGwgdGhlIHByb2JsZW0KKwkJCQlp
ZiAodHlwZUJpbmRpbmcuc2NvcGUuY29tcGlsZXJPcHRpb25zKCkuc291cmNlTGV2ZWwgPCBDbGFz
c0ZpbGVDb25zdGFudHMuSkRLMV84KQorCQkJCQlhYnN0cmFjdE1ldGhvZHNPbmx5ID0gdHJ1ZTsK
KwkJCQkvLyBXZSBnZW5lcmF0ZSBhIGNsaW5pdCB3aGljaCBjb250YWlucyBhbGwgdGhlIHByb2Js
ZW1zLCBzaW5jZSB3ZSBtYXkgbm90IGJlIGFibGUgdG8gZ2VuZXJhdGUgcHJvYmxlbSBtZXRob2Rz
ICg8IDEuOCkgYW5kIHByb2JsZW0gY29uc3RydWN0b3JzIChhbGwgbGV2ZWxzKS4KIAkJCQljbGFz
c0ZpbGUuYWRkUHJvYmxlbUNsaW5pdChwcm9ibGVtc0NvcHkpOwotCQkJCWZvciAoaW50IGkgPSAw
LCBsZW5ndGggPSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewotCQkJCQlB
YnN0cmFjdE1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2wgPSBtZXRob2REZWNsc1tpXTsKLQkJ
CQkJTWV0aG9kQmluZGluZyBtZXRob2QgPSBtZXRob2REZWNsLmJpbmRpbmc7Ci0JCQkJCWlmICht
ZXRob2QgPT0gbnVsbCB8fCBtZXRob2QuaXNDb25zdHJ1Y3RvcigpKSBjb250aW51ZTsKKwkJCX0K
KwkJCWZvciAoaW50IGkgPSAwLCBsZW5ndGggPSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBsZW5n
dGg7IGkrKykgeworCQkJCUFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbCA9IG1l
dGhvZERlY2xzW2ldOworCQkJCU1ldGhvZEJpbmRpbmcgbWV0aG9kID0gbWV0aG9kRGVjbC5iaW5k
aW5nOworCQkJCWlmIChtZXRob2QgPT0gbnVsbCkgY29udGludWU7CisJCQkJaWYgKGFic3RyYWN0
TWV0aG9kc09ubHkpIHsKIAkJCQkJbWV0aG9kLm1vZGlmaWVycyA9IENsYXNzRmlsZUNvbnN0YW50
cy5BY2NQdWJsaWMgfCBDbGFzc0ZpbGVDb25zdGFudHMuQWNjQWJzdHJhY3Q7Ci0JCQkJCWNsYXNz
RmlsZS5hZGRBYnN0cmFjdE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOwogCQkJCX0KLQkJCX0g
ZWxzZSB7Ci0JCQkJZm9yIChpbnQgaSA9IDAsIGxlbmd0aCA9IG1ldGhvZERlY2xzLmxlbmd0aDsg
aSA8IGxlbmd0aDsgaSsrKSB7Ci0JCQkJCUFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9k
RGVjbCA9IG1ldGhvZERlY2xzW2ldOwotCQkJCQlNZXRob2RCaW5kaW5nIG1ldGhvZCA9IG1ldGhv
ZERlY2wuYmluZGluZzsKLQkJCQkJaWYgKG1ldGhvZCA9PSBudWxsKSBjb250aW51ZTsKLQkJCQkJ
aWYgKG1ldGhvZC5pc0NvbnN0cnVjdG9yKCkpIHsKLQkJCQkJCWNsYXNzRmlsZS5hZGRQcm9ibGVt
Q29uc3RydWN0b3IobWV0aG9kRGVjbCwgbWV0aG9kLCBwcm9ibGVtc0NvcHkpOwotCQkJCQl9IGVs
c2UgaWYgKG1ldGhvZC5pc0Fic3RyYWN0KCkpIHsKLQkJCQkJCWNsYXNzRmlsZS5hZGRBYnN0cmFj
dE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOwotCQkJCQl9IGVsc2UgewotCQkJCQkJY2xhc3NG
aWxlLmFkZFByb2JsZW1NZXRob2QobWV0aG9kRGVjbCwgbWV0aG9kLCBwcm9ibGVtc0NvcHkpOwot
CQkJCQl9CisJCQkJaWYgKG1ldGhvZC5pc0NvbnN0cnVjdG9yKCkpIHsKKwkJCQkJaWYgKHR5cGVC
aW5kaW5nLmlzSW50ZXJmYWNlKCkpIGNvbnRpbnVlOworCQkJCQljbGFzc0ZpbGUuYWRkUHJvYmxl
bUNvbnN0cnVjdG9yKG1ldGhvZERlY2wsIG1ldGhvZCwgcHJvYmxlbXNDb3B5KTsKKwkJCQl9IGVs
c2UgaWYgKG1ldGhvZC5pc0Fic3RyYWN0KCkpIHsKKwkJCQkJY2xhc3NGaWxlLmFkZEFic3RyYWN0
TWV0aG9kKG1ldGhvZERlY2wsIG1ldGhvZCk7CisJCQkJfSBlbHNlIHsKKwkJCQkJY2xhc3NGaWxl
LmFkZFByb2JsZW1NZXRob2QobWV0aG9kRGVjbCwgbWV0aG9kLCBwcm9ibGVtc0NvcHkpOwogCQkJ
CX0KIAkJCX0KIAkJCS8vIGFkZCBhYnN0cmFjdCBtZXRob2RzCkBAIC02ODYsNiArNjg0LDEwIEBA
CiAJCUFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kLAogCQlNZXRob2RCaW5kaW5nIG1l
dGhvZEJpbmRpbmcsCiAJCUNhdGVnb3JpemVkUHJvYmxlbVtdIHByb2JsZW1zKSB7CisJCQorCQlp
ZiAobWV0aG9kQmluZGluZy5kZWNsYXJpbmdDbGFzcy5pc0ludGVyZmFjZSgpKSB7CisJCQltZXRo
b2QuYWJvcnQoUHJvYmxlbVNldmVyaXRpZXMuQWJvcnRUeXBlLCBudWxsKTsKKwkJfQogCiAJCS8v
IGFsd2F5cyBjbGVhciB0aGUgc3RyaWN0ZnAvbmF0aXZlL2Fic3RyYWN0IGJpdCBmb3IgYSBwcm9i
bGVtIG1ldGhvZAogCQlnZW5lcmF0ZU1ldGhvZEluZm9IZWFkZXIobWV0aG9kQmluZGluZywgbWV0
aG9kQmluZGluZy5tb2RpZmllcnMgJiB+KENsYXNzRmlsZUNvbnN0YW50cy5BY2NTdHJpY3RmcCB8
IENsYXNzRmlsZUNvbnN0YW50cy5BY2NOYXRpdmUgfCBDbGFzc0ZpbGVDb25zdGFudHMuQWNjQWJz
dHJhY3QpKTsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kQmluZGluZy5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9NZXRob2RCaW5kaW5nLmphdmEKaW5kZXggYzgzYzFiMy4uNzAwMDNkNCAx
MDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9NZXRob2RCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9NZXRob2RCaW5kaW5nLmphdmEKQEAgLTYwMCw3ICs2MDAsNyBAQAogfQogCiBwdWJs
aWMgZmluYWwgaW50IGdldEFjY2Vzc0ZsYWdzKCkgewotCXJldHVybiB0aGlzLm1vZGlmaWVycyAm
IEV4dHJhQ29tcGlsZXJNb2RpZmllcnMuQWNjSnVzdEZsYWc7CisJcmV0dXJuIHRoaXMubW9kaWZp
ZXJzICYgKEV4dHJhQ29tcGlsZXJNb2RpZmllcnMuQWNjSnVzdEZsYWcgfCBFeHRyYUNvbXBpbGVy
TW9kaWZpZXJzLkFjY0RlZmF1bHRNZXRob2QpOwogfQogCiBwdWJsaWMgQW5ub3RhdGlvbkJpbmRp
bmdbXSBnZXRBbm5vdGF0aW9ucygpIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2RvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vTWV0aG9kQmluZGluZy5qYXZhIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9NZXRob2RCaW5kaW5n
LmphdmEKaW5kZXggZWQxZjU1NS4uMzc1M2U2MyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9NZXRob2RCaW5kaW5nLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9NZXRo
b2RCaW5kaW5nLmphdmEKQEAgLTEsOSArMSwxMyBAQAogLyoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioK
LSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4K
KyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4K
ICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWlu
ZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhl
IEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBk
aXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKICAqIGh0dHA6Ly93d3cuZWNsaXBzZS5v
cmcvbGVnYWwvZXBsLXYxMC5odG1sCisgKgorICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBv
ZiBhbiBlYXJseS1kcmFmdCBzcGVjaWZpY2F0aW9uIGRldmVsb3BlZCB1bmRlciB0aGUgSmF2YQor
ICogQ29tbXVuaXR5IFByb2Nlc3MgKEpDUCkgYW5kIGlzIG1hZGUgYXZhaWxhYmxlIGZvciB0ZXN0
aW5nIGFuZCBldmFsdWF0aW9uIHB1cnBvc2VzCisgKiBvbmx5LiBUaGUgY29kZSBpcyBub3QgY29t
cGF0aWJsZSB3aXRoIGFueSBzcGVjaWZpY2F0aW9uIG9mIHRoZSBKQ1AuCiAgKgogICogQ29udHJp
YnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1l
bnRhdGlvbgpAQCAtMzEsNyArMzUsNyBAQAogCiAJcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IFZB
TElEX01PRElGSUVSUyA9IE1vZGlmaWVyLlBVQkxJQyB8IE1vZGlmaWVyLlBST1RFQ1RFRCB8IE1v
ZGlmaWVyLlBSSVZBVEUgfAogCQlNb2RpZmllci5BQlNUUkFDVCB8IE1vZGlmaWVyLlNUQVRJQyB8
IE1vZGlmaWVyLkZJTkFMIHwgTW9kaWZpZXIuU1lOQ0hST05JWkVEIHwgTW9kaWZpZXIuTkFUSVZF
IHwKLQkJTW9kaWZpZXIuU1RSSUNURlA7CisJCU1vZGlmaWVyLlNUUklDVEZQIHwgTW9kaWZpZXIu
REVGQVVMVDsKIAlwcml2YXRlIHN0YXRpYyBmaW5hbCBJVHlwZUJpbmRpbmdbXSBOT19UWVBFX0JJ
TkRJTkdTID0gbmV3IElUeXBlQmluZGluZ1swXTsKIAlwcml2YXRlIG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5sb29rdXAuTWV0aG9kQmluZGluZyBiaW5kaW5nOwogCXByaXZhdGUg
QmluZGluZ1Jlc29sdmVyIHJlc29sdmVyOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvZXZhbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvZXZhbC9Db2RlU25pcHBldENsYXNzRmls
ZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvZXZhbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvZXZhbC9Db2RlU25pcHBldENsYXNzRmlsZS5qYXZhCmluZGV4IDU2YTBhZGUuLjRjNmFiNTYg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2V2YWwvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2V2YWwvQ29kZVNuaXBwZXRDbGFzc0ZpbGUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9ldmFsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9ldmFsL0NvZGVTbmlwcGV0Q2xh
c3NGaWxlLmphdmEKQEAgLTE5MywzMCArMTkzLDI4IEBACiAJQ2F0ZWdvcml6ZWRQcm9ibGVtW10g
cHJvYmxlbXNDb3B5ID0gbmV3IENhdGVnb3JpemVkUHJvYmxlbVtwcm9ibGVtc0xlbmd0aCA9IHBy
b2JsZW1zLmxlbmd0aF07CiAJU3lzdGVtLmFycmF5Y29weShwcm9ibGVtcywgMCwgcHJvYmxlbXND
b3B5LCAwLCBwcm9ibGVtc0xlbmd0aCk7CiAJQWJzdHJhY3RNZXRob2REZWNsYXJhdGlvbltdIG1l
dGhvZERlY2xzID0gdHlwZURlY2xhcmF0aW9uLm1ldGhvZHM7CisJYm9vbGVhbiBhYnN0cmFjdE1l
dGhvZHNPbmx5ID0gZmFsc2U7CiAJaWYgKG1ldGhvZERlY2xzICE9IG51bGwpIHsKIAkJaWYgKHR5
cGVCaW5kaW5nLmlzSW50ZXJmYWNlKCkpIHsKLQkJCS8vIHdlIGNhbm5vdCBjcmVhdGUgcHJvYmxl
bSBtZXRob2RzIGZvciBhbiBpbnRlcmZhY2UuIFNvIHdlIGhhdmUgdG8gZ2VuZXJhdGUgYSBjbGlu
aXQKLQkJCS8vIHdoaWNoIHNob3VsZCBjb250YWluIGFsbCB0aGUgcHJvYmxlbQorCQkJaWYgKHR5
cGVCaW5kaW5nLnNjb3BlLmNvbXBpbGVyT3B0aW9ucygpLnNvdXJjZUxldmVsIDwgQ2xhc3NGaWxl
Q29uc3RhbnRzLkpESzFfOCkKKwkJCQlhYnN0cmFjdE1ldGhvZHNPbmx5ID0gdHJ1ZTsKKwkJCS8v
IFdlIGdlbmVyYXRlIGEgY2xpbml0IHdoaWNoIGNvbnRhaW5zIGFsbCB0aGUgcHJvYmxlbXMsIHNp
bmNlIHdlIG1heSBub3QgYmUgYWJsZSB0byBnZW5lcmF0ZSBwcm9ibGVtIG1ldGhvZHMgKDwgMS44
KSBhbmQgcHJvYmxlbSBjb25zdHJ1Y3RvcnMgKGFsbCBsZXZlbHMpLgogCQkJY2xhc3NGaWxlLmFk
ZFByb2JsZW1DbGluaXQocHJvYmxlbXNDb3B5KTsKLQkJCWZvciAoaW50IGkgPSAwLCBsZW5ndGgg
PSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewotCQkJCUFic3RyYWN0TWV0
aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbCA9IG1ldGhvZERlY2xzW2ldOwotCQkJCU1ldGhvZEJp
bmRpbmcgbWV0aG9kID0gbWV0aG9kRGVjbC5iaW5kaW5nOwotCQkJCWlmIChtZXRob2QgPT0gbnVs
bCB8fCBtZXRob2QuaXNDb25zdHJ1Y3RvcigpKSBjb250aW51ZTsKKwkJfQorCQlmb3IgKGludCBp
ID0gMCwgbGVuZ3RoID0gbWV0aG9kRGVjbHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKKwkJ
CUFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbCA9IG1ldGhvZERlY2xzW2ldOwor
CQkJTWV0aG9kQmluZGluZyBtZXRob2QgPSBtZXRob2REZWNsLmJpbmRpbmc7CisJCQlpZiAobWV0
aG9kID09IG51bGwpIGNvbnRpbnVlOworCQkJaWYgKGFic3RyYWN0TWV0aG9kc09ubHkpIHsKIAkJ
CQltZXRob2QubW9kaWZpZXJzID0gQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1B1YmxpYyB8IENsYXNz
RmlsZUNvbnN0YW50cy5BY2NBYnN0cmFjdDsKLQkJCQljbGFzc0ZpbGUuYWRkQWJzdHJhY3RNZXRo
b2QobWV0aG9kRGVjbCwgbWV0aG9kKTsKIAkJCX0KLQkJfSBlbHNlIHsKLQkJCWZvciAoaW50IGkg
PSAwLCBsZW5ndGggPSBtZXRob2REZWNscy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewotCQkJ
CUFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbCA9IG1ldGhvZERlY2xzW2ldOwot
CQkJCU1ldGhvZEJpbmRpbmcgbWV0aG9kID0gbWV0aG9kRGVjbC5iaW5kaW5nOwotCQkJCWlmICht
ZXRob2QgPT0gbnVsbCkgY29udGludWU7Ci0JCQkJaWYgKG1ldGhvZC5pc0NvbnN0cnVjdG9yKCkp
IHsKLQkJCQkJY2xhc3NGaWxlLmFkZFByb2JsZW1Db25zdHJ1Y3RvcihtZXRob2REZWNsLCBtZXRo
b2QsIHByb2JsZW1zQ29weSk7Ci0JCQkJfSBlbHNlIGlmIChtZXRob2QuaXNBYnN0cmFjdCgpKSB7
Ci0JCQkJCWNsYXNzRmlsZS5hZGRBYnN0cmFjdE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOwot
CQkJCX0gZWxzZSB7Ci0JCQkJCWNsYXNzRmlsZS5hZGRQcm9ibGVtTWV0aG9kKG1ldGhvZERlY2ws
IG1ldGhvZCwgcHJvYmxlbXNDb3B5KTsKLQkJCQl9CisJCQlpZiAobWV0aG9kLmlzQ29uc3RydWN0
b3IoKSkgeworCQkJCWlmICh0eXBlQmluZGluZy5pc0ludGVyZmFjZSgpKSBjb250aW51ZTsKKwkJ
CQljbGFzc0ZpbGUuYWRkUHJvYmxlbUNvbnN0cnVjdG9yKG1ldGhvZERlY2wsIG1ldGhvZCwgcHJv
YmxlbXNDb3B5KTsKKwkJCX0gZWxzZSBpZiAobWV0aG9kLmlzQWJzdHJhY3QoKSkgeworCQkJCWNs
YXNzRmlsZS5hZGRBYnN0cmFjdE1ldGhvZChtZXRob2REZWNsLCBtZXRob2QpOworCQkJfSBlbHNl
IHsKKwkJCQljbGFzc0ZpbGUuYWRkUHJvYmxlbU1ldGhvZChtZXRob2REZWNsLCBtZXRob2QsIHBy
b2JsZW1zQ29weSk7CiAJCQl9CiAJCX0KIAkJLy8gYWRkIGFic3RyYWN0IG1ldGhvZHM=
</data>

          </attachment>
      

    </bug>

</bugzilla>