<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>429958</bug_id>
          
          <creation_ts>2014-03-09 08:38:00 -0400</creation_ts>
          <short_desc>[1.8][null] evaluate new DefaultLocation attribute of @NonNullByDefault</short_desc>
          <delta_ts>2014-04-29 08:33:08 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>4.4 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          <cc>jarthana</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2373491</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-09 08:38:34 -0400</bug_when>
    <thetext>With bug 392245 being resolved for BETA_JAVA8, we still need to evaluate the new annotation attribute of type DefaultLocation. While an implementation under test exists, this is too big a change for BETA_JAVA8 at this point. Hence separating this implementation from the API release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373531</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-09 15:58:49 -0400</bug_when>
    <thetext>While running final tests, I&apos;ll document the upcoming patch (which has reached considerable size):


Decoding @NonNullByDefault with attribute values:
--------------------------------------------------
Annotation.detectStandardAnnotation decodes the given member value pairs or retrieves the default from the the annotation method (getDefaultValue()).
BinaryTypeBinding.scanTypeForNullDefaultAnnotation does the same for the binary case.

To store the detailed defaults, the following classes now have a field &apos;int defaultNullness&apos;: MethodBinding, SourceTypeBinding, BinaryTypeBinding. Also the corresponding field in PackageBinding uses the new bit encoding if in 1.8 mode.


Applying defaults to type details:
----------------------------------
Extended TypeReference.resolveType method family and TypeReference.resolveAnnotations with parameter &apos;int location&apos;, using a vector of bits declared in Binding.NullnessDefaultMASK etc.
Provided new query Scope.hasDefaultNullnessFor(int location).
When resolving the annotations for any type reference, we pass the current location into resolveType and finally into resolveAnnotations. If no null-annotation was found locally, and if a matching default was found in the scope, add the annotation right during construction of the type binding.
This is effective for TYPE_ARGUMENT and TYPE_BOUND.

Marking nonnullness of type variables happens after the fact, because when type variables are created we don&apos;t yet have the necessary information. Instead, a new method maybeMarkTypeParametersNonNull() is hooked into STB.evaluateNullAnnotations().

For the binary case we leverage our little machinery of TypeAnnotationWalkers, using a subclass that is capable of supplying missing annotations per location (given a bitvector of locations). This mechanism is used for TYPE_ARGUMENT, TYPE_BOUND and TYPE_PARAMETER.



For obvious reasons the following warning is no longer issued :)
&quot;Arguments controling the details of the nullness default are not yet evaluated by the analysis&quot;


More lazy resolve of binary types:
----------------------------------
Some necessary reordering inside BinaryTypeBinding.cachePartsFrom made a unhappy recursive resolve attempt re-surface (see bug 415850 comment 2). I solved this by allowing lazy resolve of references from ElementValuePair to enum constants. See new nested class ElementValuePair.UnresolvedEnumConstant. This should be better than prolonged search for the optimal processing order in cachePartsFrom.


Additionally, the patch fixes a bug in NullAnnotationMatching, where nullness information from a type annotation was not available in downstream flow analysis.


The size of this patch is mostly owed to the refactorings of introducing additional parameters in widely used (and overridden) methods, notable TypeReference.resolveType(). Other methods have an additional parameter isJdk18, to switch between the two encodings of null defaults.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373533</commentid>
    <comment_count>2</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-09 16:02:33 -0400</bug_when>
    <thetext>Not yet covered by the patch-under-test:

ARRAY_CONTENTS is left out of the current solution, because in signatures like
   void main(@Nullable String[] args)
when evaluating the type reference, we don&apos;t yet have the explicit annotation, because the parser stores these as declaration annotations. We&apos;d think that &apos;String&apos; has no type annotation and happily apply the default @NonNull.

More work needed here at a later point in time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373534</commentid>
    <comment_count>3</comment_count>
      <attachid>240698</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-09 16:07:31 -0400</bug_when>
    <thetext>Created attachment 240698
pending patch

This patch matches the description above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2376185</commentid>
    <comment_count>4</comment_count>
      <attachid>240919</attachid>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-14 14:29:24 -0400</bug_when>
    <thetext>Created attachment 240919
updated patch

Patch updated for current head of BETA_JAVA8_LUNA.

RunJDTCoreTests is green.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2378911</commentid>
    <comment_count>5</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2014-03-23 18:53:16 -0400</bug_when>
    <thetext>Released for 4.4 M7 via http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=43cdae5117454d896e9e9cf435f63b0b509e3a4c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2394654</commentid>
    <comment_count>6</comment_count>
    <who name="Sasikanth Bharadwaj">saammana</who>
    <bug_when>2014-04-29 08:07:26 -0400</bug_when>
    <thetext>Verified for 4.4 M7 using I20140428-2000 build</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>240698</attachid>
            <date>2014-03-09 16:07:00 -0400</date>
            <delta_ts>2014-03-14 14:29:24 -0400</delta_ts>
            <desc>pending patch</desc>
            <filename>Bug-429958--18null-evaluate-new-DefaultLocation-attr.patch</filename>
            <type>text/plain</type>
            <size>152660</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxBbm5vdGF0aW9u
VGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbEFubm90YXRpb25U
ZXN0LmphdmEKaW5kZXggYmExMzViNy4uZmQ1MzMzNSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Nv
bXBpbGVyL3JlZ3Jlc3Npb24vTnVsbEFubm90YXRpb25UZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbEFubm90YXRpb25UZXN0LmphdmEKQEAgLTI0ODEsNiAr
MjQ4MSw2OCBAQAogCQltaXNtYXRjaF9Ob25OdWxsX051bGxhYmxlKCJPYmplY3QiKSArCiAJCSIt
LS0tLS0tLS0tXG4iKTsKIH0KKy8vIHBhY2thZ2UgbGV2ZWwgZGVmYXVsdCBpcyBjb25zdW1lZCBm
cm9tIHBhY2thZ2UtaW5mby5jbGFzcywgc2ltaWxhcmx5IGZvciB0eXBlIGxldmVsIGRlZmF1bHQg
LSBmaW5lIHR1bmVkIGRlZmF1bHQKK3B1YmxpYyB2b2lkIHRlc3RfZGVmYXVsdF9udWxsbmVzc18w
MDNjKCkgeworCWlmICh0aGlzLmNvbXBsaWFuY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0YW50cy5K
REsxXzgpIHJldHVybjsgLy8gdXNlcyB2ZXJzaW9uIDIuMCBvZiBATm9uTnVsbEJ5RGVmYXVsdAor
CU1hcCBjdXN0b21PcHRpb25zID0gZ2V0Q29tcGlsZXJPcHRpb25zKCk7CisJcnVuQ29uZm9ybVRl
c3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkicDEvWC5qYXZhIiwKKwkJCSJwYWNrYWdl
IHAxO1xuIiArCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsK
KwkJCSJATm9uTnVsbEJ5RGVmYXVsdFxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJ
CQkiICAgIHByb3RlY3RlZCBPYmplY3QgZ2V0T2JqZWN0KEBOdWxsYWJsZSBPYmplY3Qgbykge1xu
IiArCisJCQkiICAgICAgICByZXR1cm4gbmV3IE9iamVjdCgpO1xuIiArCisJCQkiICAgIH1cbiIg
KworCQkJIgkgcHJvdGVjdGVkIHZvaWQgYmFyKE9iamVjdCBvMikgeyB9XG4iICsgLy8gcGFyYW1l
dGVyIGlzIG5vbm51bGwgcGVyIHR5cGUgZGVmYXVsdAorCQkJIn1cbiIsCisJInAyL3BhY2thZ2Ut
aW5mby5qYXZhIiwKKwkJCSJAb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uTm9uTnVsbEJ5RGVm
YXVsdCh7b3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uRGVmYXVsdExvY2F0aW9uLlBBUkFNRVRF
Un0pXG4iICsKKwkJCSJwYWNrYWdlIHAyO1xuIiwKKwkJCX0sCisJCQljdXN0b21PcHRpb25zLAor
CQkJIiIpOworCS8vIGNoZWNrIGlmIGRlZmF1bHQgaXMgdmlzaWJsZSBmcm9tIHBhY2thZ2UtaW5m
by5jbGFzcy4KKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJZmFsc2UsIC8vIGRvbid0IGZs
dXNoCisJCW5ldyBTdHJpbmdbXSB7CisJInAyL1kuamF2YSIsCisJCQkicGFja2FnZSBwMjtcbiIg
KworCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkicHVi
bGljIGNsYXNzIFkgZXh0ZW5kcyBwMS5YIHtcbiIgKworCQkJIiAgICBAT3ZlcnJpZGVcbiIgKwor
CQkJIiAgICBwcm90ZWN0ZWQgQE51bGxhYmxlIE9iamVjdCBnZXRPYmplY3QoQE51bGxhYmxlIE9i
amVjdCBvKSB7XG4iICsgLy8gY2FuJ3Qgb3ZlcnJpZGUgaW5oZXJpdGVkIGRlZmF1bHQgbm9ubnVs
bAorCQkJIiAgICAgICAgYmFyKG8pO1xuIiArIC8vIHBhcmFtZXRlciBpcyBub25udWxsIGluIHN1
cGVyIGNsYXNzJ3MgLmNsYXNzIGZpbGUKKwkJCSIgICAgICAgIEBOb25OdWxsIE9iamVjdCBubm8g
PSBhY2NlcHQobyk7IC8vIDJ4RVJSXG4iICsKKwkJCSIgICAgICAgIHJldHVybiBvO1xuIiArCisJ
CQkiICAgIH1cbiIgKworCQkJIiAgICBPYmplY3QgYWNjZXB0KE9iamVjdCBhKSB7IHJldHVybiBh
OyB9XG4iICsgLy8gZ292ZXJuZWQgYnkgcGFja2FnZSBsZXZlbCBkZWZhdWx0IChvbmx5IHRoZSBw
YXJhbWV0ZXIhKQorCQkJIn1cbiIKKwkJfSwKKwkJY3VzdG9tT3B0aW9ucywKKwkJIi0tLS0tLS0t
LS1cbiIgKworCQkiMS4gRVJST1IgaW4gcDJcXFkuamF2YSAoYXQgbGluZSA1KVxuIiArIAorCQki
CXByb3RlY3RlZCBATnVsbGFibGUgT2JqZWN0IGdldE9iamVjdChATnVsbGFibGUgT2JqZWN0IG8p
IHtcbiIgKyAKKwkJIgkgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkiVGhlIHJl
dHVybiB0eXBlIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBATm9uTnVsbCByZXR1cm4gZnJvbSBY
LmdldE9iamVjdChPYmplY3QpXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBFUlJP
UiBpbiBwMlxcWS5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCSIJYmFyKG8pO1xuIiArIAorCQki
CSAgICBeXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2ggKHR5cGUgYW5ub3RhdGlvbnMpOiBy
ZXF1aXJlZCBcJ0BOb25OdWxsIE9iamVjdFwnIGJ1dCB0aGlzIGV4cHJlc3Npb24gaGFzIHR5cGUg
XCdATnVsbGFibGUgT2JqZWN0XCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjMuIFdB
Uk5JTkcgaW4gcDJcXFkuamF2YSAoYXQgbGluZSA3KVxuIiArIAorCQkiCUBOb25OdWxsIE9iamVj
dCBubm8gPSBhY2NlcHQobyk7IC8vIDJ4RVJSXG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAg
ICAgIF5eXl5eXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIHNhZmV0eSAodHlwZSBhbm5vdGF0aW9u
cyk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgXCdPYmplY3RcJyBuZWVkcyB1bmNoZWNrZWQgY29u
dmVyc2lvbiB0byBjb25mb3JtIHRvIFwnQE5vbk51bGwgT2JqZWN0XCdcbiIgKyAKKwkJIi0tLS0t
LS0tLS1cbiIgKyAKKwkJIjQuIEVSUk9SIGluIHAyXFxZLmphdmEgKGF0IGxpbmUgNylcbiIgKyAK
KwkJIglATm9uTnVsbCBPYmplY3Qgbm5vID0gYWNjZXB0KG8pOyAvLyAyeEVSUlxuIiArIAorCQki
CSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21h
dGNoICh0eXBlIGFubm90YXRpb25zKTogcmVxdWlyZWQgXCdATm9uTnVsbCBPYmplY3RcJyBidXQg
dGhpcyBleHByZXNzaW9uIGhhcyB0eXBlIFwnQE51bGxhYmxlIE9iamVjdFwnXG4iICsgCisJCSIt
LS0tLS0tLS0tXG4iKTsKK30KIC8vIGRvbid0IGFwcGx5IHR5cGUtbGV2ZWwgZGVmYXVsdCB0byBu
b24tcmVmZXJlbmNlIHR5cGUKIHB1YmxpYyB2b2lkIHRlc3RfZGVmYXVsdF9udWxsbmVzc18wMDQo
KSB7CiAJTWFwIGN1c3RvbU9wdGlvbnMgPSBnZXRDb21waWxlck9wdGlvbnMoKTsKQEAgLTU5OTEs
NyArNjA1Myw3IEBACiAJCQkicGFja2FnZSBjdGVzdDtcbiIgKwogCQkJImltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCiAJCQkiQE5vbk51bGxCeURlZmF1bHRcbiIgKwot
CQkJInB1YmxpYyBjbGFzcyBDdGVzdCBpbXBsZW1lbnRzIGkyLklJIHtcbiIgKworCQkJInB1Ymxp
YyBjbGFzcyBDdGVzdCBpbXBsZW1lbnRzIGkyLklJIHtcbiIgKyAvLyBub3RlOiBpMi5JSS5tMShP
YmplY3QsT2JqZWN0KSBhY3R1YWxseSBoYXMgYSBidWcgaXRzZWxmOiBjb25mbGljdGluZyBkZWZh
dWx0ICYgaW5oZXJpdGVkIGFubm90YXRpb25zCiAJCQkiICAgIHB1YmxpYyBPYmplY3QgbTEoQE51
bGxhYmxlIE9iamVjdCBhMSkgeyAvLyBzaWxlbnQ6IGNvbmZsaWN0IGF0IGExIGF2b2lkZWRcbiIg
KyAKIAkJCSIJCXJldHVybiBuZXcgT2JqZWN0KCk7XG4iICsgCiAJCQkiICAgIH1cbiIgKyAKQEAg
LTYzMjEsNyArNjM4MywxMCBAQAogCQluZXcgU3RyaW5nW10gewogCQkJIkZvb0ltcGwuamF2YSIs
CiAJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKLQkJCSJATm9u
TnVsbEJ5RGVmYXVsdFxuIiArIAorCQkJKHRoaXMuY29tcGxpYW5jZUxldmVsIDwgQ2xhc3NGaWxl
Q29uc3RhbnRzLkpESzFfOAorCQkJPyAiQE5vbk51bGxCeURlZmF1bHRcbiIKKwkJCTogIkBOb25O
dWxsQnlEZWZhdWx0KHtEZWZhdWx0TG9jYXRpb24uUEFSQU1FVEVSLERlZmF1bHRMb2NhdGlvbi5S
RVRVUk5fVFlQRX0pXG4iIC8vIGF2b2lkIEBOb25OdWxsIG9uIHR5cGUgYXJndW1lbnQgPFN0cmlu
Zz4KKwkJCSkgKyAKIAkJCSJwdWJsaWMgY2xhc3MgRm9vSW1wbCBpbXBsZW1lbnRzIEZvbzxTdHJp
bmc+IHtcbiIgKyAKIAkJCSIgIHB1YmxpYyBTdHJpbmcgYmFyKGZpbmFsIFN0cmluZy4uLiB2YWx1
ZXMpIHtcbiIgKyAKIAkJCSIgICAgcmV0dXJuIChcIlwiKTtcbiIgKyAKQEAgLTY3MTQsOSArNjc3
OSw5IEBACiAJCSItLS0tLS0tLS0tXG4iKTsKIH0KIHB1YmxpYyB2b2lkIHRlc3RCdWc0MTgyMzUo
KSB7Ci0gICAgcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJU3RyaW5nW10gdGVzdEZpbGVzID0g
CiAgICAgICAgICAgICBuZXcgU3RyaW5nW10gewotICAgICAgICAgICAgICAgICAgICAiR2VuZXJp
Y0ludGVyZmFjZS5qYXZhIiwKKyAgICAgICAgICAgICAgICAgICAgIkdlbmVyaWNJbnRlcmZhY2Uu
amF2YSIsIAogICAgICAgICAgICAgICAgICAgICAicHVibGljIGludGVyZmFjZSBHZW5lcmljSW50
ZXJmYWNlPFQ+IHtcbiIgKyAKICAgICAgICAgICAgICAgICAgICAgIiAgICAgICBUIGRvU29tZXRo
aW5nR2VuZXJpYyhUIG8pO1xuIiArIAogICAgICAgICAgICAgICAgICAgICAifSIsCkBAIC02NzMw
LDEzICs2Nzk1LDQ4IEBACiAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICByZXR1
cm4gbztcbiIgKyAKICAgICAgICAgICAgICAgICAgICAgIiAgICAgICB9XG4iICsgCiAgICAgICAg
ICAgICAgICAgICAgICJ9XG4iCi0gICAgICAgICAgICB9LAotICAgICAgICAgICAgIi0tLS0tLS0t
LS1cbiIgKyAKLSAgICAgICAgICAgICIxLiBFUlJPUiBpbiBJbXBsZW1lbnRhdGlvbi5qYXZhIChh
dCBsaW5lIDYpXG4iICsgCi0gICAgCQkiCXB1YmxpYyBPYmplY3QgZG9Tb21ldGhpbmdHZW5lcmlj
KE9iamVjdCBvKSB7XG4iICsgCi0gICAgCQkiCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIF5eXl5eXlxuIiArIAotICAgICAgICAgICAgIklsbGVnYWwgcmVkZWZpbml0aW9uIG9mIHBh
cmFtZXRlciBvLCBpbmhlcml0ZWQgbWV0aG9kIGZyb20gR2VuZXJpY0ludGVyZmFjZTxPYmplY3Q+
IGRvZXMgbm90IGNvbnN0cmFpbiB0aGlzIHBhcmFtZXRlclxuIiArIAotICAgICAgICAgICAgIi0t
LS0tLS0tLS1cbiIpOworCQkJfTsKKwlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0Zp
bGVDb25zdGFudHMuSkRLMV84KSB7CisJICAgIHJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCSAg
ICAgICAgICAgIHRlc3RGaWxlcywKKwkgICAgICAgICAgICAiLS0tLS0tLS0tLVxuIiArIAorCSAg
ICAgICAgICAgICIxLiBFUlJPUiBpbiBJbXBsZW1lbnRhdGlvbi5qYXZhIChhdCBsaW5lIDYpXG4i
ICsgCisJICAgIAkJIglwdWJsaWMgT2JqZWN0IGRvU29tZXRoaW5nR2VuZXJpYyhPYmplY3Qgbykg
e1xuIiArIAorCSAgICAJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5e
XG4iICsgCisJICAgICAgICAgICAgIklsbGVnYWwgcmVkZWZpbml0aW9uIG9mIHBhcmFtZXRlciBv
LCBpbmhlcml0ZWQgbWV0aG9kIGZyb20gR2VuZXJpY0ludGVyZmFjZTxPYmplY3Q+IGRvZXMgbm90
IGNvbnN0cmFpbiB0aGlzIHBhcmFtZXRlclxuIiArIAorCSAgICAgICAgICAgICItLS0tLS0tLS0t
XG4iKTsKKwl9IGVsc2UgeworCQkvLyBpbiAxLjggdGhlIG51bGxuZXNzIGRlZmF1bHQgYWxzbyBh
ZmZlY3RzIHRoZSB0eXBlIGFyZ3VtZW50IDxPYmplY3Q+IGZyb20gd2hpY2ggVCBpcyBpbnN0YW50
aWF0ZWQgdG8gJ0BOb25OdWxsIE9iamVjdCcKKwkJcnVuQ29uZm9ybVRlc3RXaXRoTGlicygKKwkJ
CQl0ZXN0RmlsZXMsIGdldENvbXBpbGVyT3B0aW9ucygpLCAiIik7CisJfQorfQorcHVibGljIHZv
aWQgdGVzdEJ1ZzQxODIzNWIoKSB7CisJaWYgKHRoaXMuY29tcGxpYW5jZUxldmVsIDwgQ2xhc3NG
aWxlQ29uc3RhbnRzLkpESzFfOCkKKwkJcmV0dXJuOworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJz
KAorCSAgICAgICAgbmV3IFN0cmluZ1tdIHsKKwkJCSAgICAiR2VuZXJpY0ludGVyZmFjZS5qYXZh
IiwgCisJCQkgICAgInB1YmxpYyBpbnRlcmZhY2UgR2VuZXJpY0ludGVyZmFjZTxUPiB7XG4iICsg
CisJCQkJIiAgICAgICBUIGRvU29tZXRoaW5nR2VuZXJpYyhUIG8pO1xuIiArIAorCQkJCSJ9IiwK
KwkJCSAgICAiSW1wbGVtZW50YXRpb24uamF2YSIsCisJCQkgICAgImltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArIAorCQkJCSJATm9uTnVsbEJ5RGVmYXVsdCh7RGVmYXVs
dExvY2F0aW9uLlBBUkFNRVRFUixEZWZhdWx0TG9jYXRpb24uUkVUVVJOX1RZUEV9KVxuIiArIAor
CQkJCSJwdWJsaWMgY2xhc3MgSW1wbGVtZW50YXRpb24gaW1wbGVtZW50cyBHZW5lcmljSW50ZXJm
YWNlPE9iamVjdD4ge1xuIiArIAorCQkJCSJcbiIgKyAKKwkJCQkiICAgICAgQE92ZXJyaWRlXG4i
ICsKKwkJCQkiICAgICAgIHB1YmxpYyBPYmplY3QgZG9Tb21ldGhpbmdHZW5lcmljKE9iamVjdCBv
KSB7XG4iICsgCisJCQkJIiAgICAgICAgICAgICAgIHJldHVybiBvO1xuIiArIAorCQkJCSIgICAg
ICAgfVxuIiArIAorCQkJCSJ9XG4iCisJCQl9LAorCSAgICAgICAgIi0tLS0tLS0tLS1cbiIgKyAK
KwkgICAgICAgICIxLiBFUlJPUiBpbiBJbXBsZW1lbnRhdGlvbi5qYXZhIChhdCBsaW5lIDYpXG4i
ICsgCisJCQkiCXB1YmxpYyBPYmplY3QgZG9Tb21ldGhpbmdHZW5lcmljKE9iamVjdCBvKSB7XG4i
ICsgCisJCQkiCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXlxuIiArIAor
CSAgICAgICAgIklsbGVnYWwgcmVkZWZpbml0aW9uIG9mIHBhcmFtZXRlciBvLCBpbmhlcml0ZWQg
bWV0aG9kIGZyb20gR2VuZXJpY0ludGVyZmFjZTxPYmplY3Q+IGRvZXMgbm90IGNvbnN0cmFpbiB0
aGlzIHBhcmFtZXRlclxuIiArIAorCSAgICAgICAgIi0tLS0tLS0tLS1cbiIpOwogfQogCiBwdWJs
aWMgdm9pZCB0ZXN0VHlwZUFubm90YXRpb25Qcm9ibGVtTm90SW4xNygpIHsKZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5ub3RhdGlvblRlc3QuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5ub3RhdGlvblRlc3Qu
amF2YQppbmRleCAyMTNjYmFiLi43MjU2ZjVhIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGls
ZXIvcmVncmVzc2lvbi9OdWxsVHlwZUFubm90YXRpb25UZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbFR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCkBAIC00MzAz
LDMxICs0MzAzLDYgQEAKIAkJIkludFN0cmVhbXkgY2Fubm90IGJlIHJlc29sdmVkXG4iICsgCiAJ
CSItLS0tLS0tLS0tXG4iKTsKIH0KLXB1YmxpYyB2b2lkIHRlc3RCdWczOTIyNDVfdG1wX3dhcm5p
bmcoKSB7Ci0JcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCi0JCW5ldyBTdHJpbmdbXSB7Ci0JCQki
WC5qYXZhIiwKLQkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKwot
CQkJIkBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5UWVBFX0FSR1VNRU5UKVxuIiAr
Ci0JCQkicHVibGljIGNsYXNzIFgge1xuIiArCi0JCQkiCXZvaWQgbShPYmplY3Qgbykge31cbiIg
KwotCQkJIgl2b2lkIHRlc3QoKSB7XG4iICsKLQkJCSIJCW0obnVsbCk7IC8vIEVSUlxuIiArIC8v
IHNpbmNlIEBOb25OdWxsQnlEZWZhdWx0IGlzIHN0aWxsIGludGVycHJldGVkIGFzIGFsbCBvciBu
b3RoaW5nCi0JCQkiCX1cbiIgKwotCQkJIn1cbiIKLQkJfSwKLQkJIi0tLS0tLS0tLS1cbiIgKyAK
LQkJIjEuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDIpXG4iICsgCi0JCSIJQE5vbk51bGxC
eURlZmF1bHQoRGVmYXVsdExvY2F0aW9uLlRZUEVfQVJHVU1FTlQpXG4iICsgCi0JCSIJICAgICAg
ICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKLQkJIkFyZ3Vt
ZW50cyBjb250cm9saW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBudWxsbmVzcyBkZWZhdWx0IGFyZSBu
b3QgeWV0IGV2YWx1YXRlZCBieSB0aGUgYW5hbHlzaXMuXG4iICsgCi0JCSItLS0tLS0tLS0tXG4i
ICsgCi0JCSIyLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNilcbiIgKyAKLQkJIgltKG51bGwp
OyAvLyBFUlJcbiIgKyAKLQkJIgkgIF5eXl5cbiIgKyAKLQkJIk51bGwgdHlwZSBtaXNtYXRjaDog
cmVxdWlyZWQgXCdATm9uTnVsbCBPYmplY3RcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51
bGxcbiIgKyAKLQkJIi0tLS0tLS0tLS1cbiIpOwotfQogcHVibGljIHZvaWQgdGVzdEJ1ZzQyOTQw
MygpIHsKIAlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKIAkJbmV3IFN0cmluZ1tdIHsKQEAgLTQz
NDYsNCArNDMyMSw0OTcgQEAKIAkJIk51bGwgdHlwZSBtaXNtYXRjaCAodHlwZSBhbm5vdGF0aW9u
cyk6IHJlcXVpcmVkIFwnTGlzdDxATm9uTnVsbCBQZXJzb24+XCcgYnV0IHRoaXMgZXhwcmVzc2lv
biBoYXMgdHlwZSBcJ0FycmF5TGlzdDxATnVsbGFibGUgUGVyc29uPlwnLCBjb3JyZXNwb25kaW5n
IHN1cGVydHlwZSBpcyBcJ0xpc3Q8QE51bGxhYmxlIFBlcnNvbj5cJ1xuIiArIAogCQkiLS0tLS0t
LS0tLVxuIik7CiB9CisKKy8vIGFwcGx5IG51bGwgZGVmYXVsdCB0byB0eXBlIGFyZ3VtZW50czoK
K3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDEoKSB7CisJcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMo
CisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmFubm90YXRpb24uKjtcbiIgKworCQkJImltcG9ydCBqYXZhLnV0aWwuKjtcbiIgKworCQkJ
IkBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5UWVBFX0FSR1VNRU5UKVxuIiArCisJ
CQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiCUxpc3Q8TnVtYmVyPiB0ZXN0MShMaXN0PE51
bWJlcj4gaW4pIHtcbiIgKworCQkJIgkJaW4uYWRkKG51bGwpOyAvLyBFUlJcbiIgKworCQkJIgkJ
cmV0dXJuIG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIE51bWJlcj4oKTsgLy8gRVJSXG4iICsKKwkJ
CSIJfVxuIiArCisJCQkiCWphdmEudXRpbC5MaXN0PGphdmEubGFuZy5OdW1iZXI+IHRlc3QyKGph
dmEudXRpbC5MaXN0PGphdmEubGFuZy5OdW1iZXI+IGluKSB7XG4iICsKKwkJCSIJCWluLmFkZChu
dWxsKTsgLy8gRVJSXG4iICsKKwkJCSIJCXJldHVybiBuZXcgQXJyYXlMaXN0PGphdmEubGFuZy5A
TnVsbGFibGUgTnVtYmVyPigpOyAvLyBFUlJcbiIgKworCQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJ
CX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4g
RVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCSIJaW4uYWRkKG51bGwpOyAvLyBF
UlJcbiIgKyAKKwkJIgkgICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21hdGNoOiBy
ZXF1aXJlZCBcJ0BOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgbnVs
bFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBs
aW5lIDcpXG4iICsgCisJCSIJcmV0dXJuIG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIE51bWJlcj4o
KTsgLy8gRVJSXG4iICsgCisJCSIJICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
Xl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21hdGNoICh0eXBlIGFubm90YXRpb25zKTogcmVx
dWlyZWQgXCdMaXN0PEBOb25OdWxsIE51bWJlcj5cJyBidXQgdGhpcyBleHByZXNzaW9uIGhhcyB0
eXBlIFwnQXJyYXlMaXN0PEBOdWxsYWJsZSBOdW1iZXI+XCcsIGNvcnJlc3BvbmRpbmcgc3VwZXJ0
eXBlIGlzIFwnTGlzdDxATnVsbGFibGUgTnVtYmVyPlwnXG4iICsgCisJCSItLS0tLS0tLS0tXG4i
ICsgCisJCSIzLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMTApXG4iICsgCisJCSIJaW4uYWRk
KG51bGwpOyAvLyBFUlJcbiIgKyAKKwkJIgkgICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBl
IG1pc21hdGNoOiByZXF1aXJlZCBcJ0BOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQg
dmFsdWUgaXMgbnVsbFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiNC4gRVJST1IgaW4g
WC5qYXZhIChhdCBsaW5lIDExKVxuIiArIAorCQkiCXJldHVybiBuZXcgQXJyYXlMaXN0PGphdmEu
bGFuZy5ATnVsbGFibGUgTnVtYmVyPigpOyAvLyBFUlJcbiIgKyAKKwkJIgkgICAgICAgXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkiTnVsbCB0eXBl
IG1pc21hdGNoICh0eXBlIGFubm90YXRpb25zKTogcmVxdWlyZWQgXCdMaXN0PEBOb25OdWxsIE51
bWJlcj5cJyBidXQgdGhpcyBleHByZXNzaW9uIGhhcyB0eXBlIFwnQXJyYXlMaXN0PEBOdWxsYWJs
ZSBOdW1iZXI+XCcsIGNvcnJlc3BvbmRpbmcgc3VwZXJ0eXBlIGlzIFwnTGlzdDxATnVsbGFibGUg
TnVtYmVyPlwnXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKworLy8gYXBwbHkgbnVsbCBk
ZWZhdWx0IHRvIHR5cGUgYXJndW1lbnRzIC0gbm8gZWZmZWN0IG9uIHR5cGUgdmFyaWFibGUgb3Ig
d2lsZGNhcmQ6CitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDAxYigpIHsKKwlydW5Db25mb3JtVGVz
dFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkiaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJpbXBvcnQgamF2YS51dGlsLio7
XG4iICsKKwkJCSJATm9uTnVsbEJ5RGVmYXVsdChEZWZhdWx0TG9jYXRpb24uVFlQRV9BUkdVTUVO
VClcbiIgKworCQkJInB1YmxpYyBjbGFzcyBYPFQ+IHtcbiIgKworCQkJIglMaXN0PFQ+IHRlc3Qo
TGlzdDw/IGV4dGVuZHMgTnVtYmVyPiBpbikge1xuIiArCisJCQkiCQlpbi5hZGQobnVsbCk7IC8v
IE9LXG4iICsKKwkJCSIJCXJldHVybiBuZXcgQXJyYXlMaXN0PEBOdWxsYWJsZSBUPigpO1xuIiAr
IC8vIFRPRE86IHVuYW5ub3RhdGVkIHR5cGUgdmFyaWFibGUgc2hvdWxkIGJlIHJlZ2FyZGVkIGFz
ICdjb3VsZCBiZSBlaXRoZXInCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29t
cGlsZXJPcHRpb25zKCksCisJCSIiKTsKK30KKworLy8gYXBwbHkgbnVsbCBkZWZhdWx0IHRvIHBh
cmFtZXRlcnM6CitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDAyKCkgeworCXJ1bk5lZ2F0aXZlVGVz
dFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkiaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJATm9uTnVsbEJ5RGVmYXVsdChE
ZWZhdWx0TG9jYXRpb24uUEFSQU1FVEVSKVxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiAr
CisJCQkiCU51bWJlciB0ZXN0MShOdW1iZXIgaW4pIHtcbiIgKworCQkJIgkJU3lzdGVtLm91dC5w
cmludChpbi5pbnRWYWx1ZSgpKTsgLy8gT0tcbiIgKworCQkJIgkJdGVzdDEobnVsbCk7IC8vIEVS
UlxuIiArCisJCQkiCQlyZXR1cm4gbnVsbDsgLy8gT0tcbiIgKworCQkJIgl9XG4iICsKKwkJCSIJ
amF2YS5sYW5nLk51bWJlciB0ZXN0MihqYXZhLmxhbmcuTnVtYmVyIGluKSB7XG4iICsKKwkJCSIJ
CVN5c3RlbS5vdXQucHJpbnQoaW4uaW50VmFsdWUoKSk7IC8vIE9LXG4iICsKKwkJCSIJCXRlc3Qy
KG51bGwpOyAvLyBFUlJcbiIgKworCQkJIgkJcmV0dXJuIG51bGw7IC8vIE9LXG4iICsKKwkJCSIJ
fVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0tLS0t
LS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA2KVxuIiArIAorCQki
CXRlc3QxKG51bGwpOyAvLyBFUlJcbiIgKyAKKwkJIgkgICAgICBeXl5eXG4iICsgCisJCSJOdWxs
IHR5cGUgbWlzbWF0Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRoZSBwcm92
aWRlZCB2YWx1ZSBpcyBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBFUlJP
UiBpbiBYLmphdmEgKGF0IGxpbmUgMTEpXG4iICsgCisJCSIJdGVzdDIobnVsbCk7IC8vIEVSUlxu
IiArIAorCQkiCSAgICAgIF5eXl5cbiIgKyAKKwkJIk51bGwgdHlwZSBtaXNtYXRjaDogcmVxdWly
ZWQgXCdATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51bGxcbiIg
KyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorCisvLyBhcHBseSBudWxsIGRlZmF1bHQgdG8gcmV0
dXJuIHR5cGUgLSBhbm5vdGF0aW9uIGF0IG1ldGhvZDoKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0
MDMoKSB7CisJcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQki
WC5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKwor
CQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglATm9uTnVsbEJ5RGVmYXVsdChEZWZhdWx0
TG9jYXRpb24uUkVUVVJOX1RZUEUpXG4iICsKKwkJCSIJTnVtYmVyIHRlc3QoTnVtYmVyIGluKSB7
XG4iICsKKwkJCSIJCVN5c3RlbS5vdXQucHJpbnQoaW4uaW50VmFsdWUoKSk7XG4iICsKKwkJCSIJ
CXRlc3QobnVsbCk7IC8vIE9LXG4iICsKKwkJCSIJCXJldHVybiBudWxsOyAvLyBFUlJcbiIgKwor
CQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQki
LS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDcpXG4iICsg
CisJCSIJcmV0dXJuIG51bGw7IC8vIEVSUlxuIiArIAorCQkiCSAgICAgICBeXl5eXG4iICsgCisJ
CSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRo
ZSBwcm92aWRlZCB2YWx1ZSBpcyBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKwor
Ly8gYXBwbHkgbnVsbCBkZWZhdWx0IHRvIGZpZWxkCitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDA0
KCkgeworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlgu
amF2YSIsCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJ
CSJATm9uTnVsbEJ5RGVmYXVsdChEZWZhdWx0TG9jYXRpb24uRklFTEQpXG4iICsKKwkJCSJwdWJs
aWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJTnVtYmVyIGZpZWxkOyAvLyBFUlIgc2luY2UgdW5pbml0
aWFsaXplZFxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJ
Ii0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA0KVxuIiAr
IAorCQkiCU51bWJlciBmaWVsZDsgLy8gRVJSIHNpbmNlIHVuaW5pdGlhbGl6ZWRcbiIgKyAKKwkJ
IgkgICAgICAgXl5eXl5cbiIgKyAKKwkJIlRoZSBATm9uTnVsbCBmaWVsZCBmaWVsZCBtYXkgbm90
IGhhdmUgYmVlbiBpbml0aWFsaXplZFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7Cit9CisKKy8v
IGRlZmF1bHQgZGVmYXVsdAorcHVibGljIHZvaWQgdGVzdERlZmF1bHQwNSgpIHsKKwlydW5OZWdh
dGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEiLAorCQkJImlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkiQE5vbk51bGxCeURl
ZmF1bHRcbiIgKworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglOdW1iZXIgZmllbGQ7
IC8vIEVSUiBzaW5jZSB1bmluaXRpYWxpemVkXG4iICsKKwkJCSIJdm9pZCB0ZXN0MShOdW1iZXJb
XSBucykge1xuIiArCisJCQkiCQluc1swXSA9IG51bGw7IC8vIE9LIHNpbmNlIG5vdCBhZmZlY3Rl
ZCBieSBkZWZhdWx0XG4iICsKKwkJCSIJfVxuIiArCisJCQkiCXZvaWQgdGVzdDIoamF2YS5sYW5n
Lk51bWJlcltdIG5zKSB7XG4iICsKKwkJCSIJCW5zWzBdID0gbnVsbDsgLy8gT0sgc2luY2Ugbm90
IGFmZmVjdGVkIGJ5IGRlZmF1bHRcbiIgKworCQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJ
CWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1Ig
aW4gWC5qYXZhIChhdCBsaW5lIDQpXG4iICsgCisJCSIJTnVtYmVyIGZpZWxkOyAvLyBFUlIgc2lu
Y2UgdW5pbml0aWFsaXplZFxuIiArIAorCQkiCSAgICAgICBeXl5eXlxuIiArIAorCQkiVGhlIEBO
b25OdWxsIGZpZWxkIGZpZWxkIG1heSBub3QgaGF2ZSBiZWVuIGluaXRpYWxpemVkXG4iICsgCisJ
CSItLS0tLS0tLS0tXG4iKTsKK30KKworLy8gYXBwbHkgZGVmYXVsdCB0byB0eXBlIHBhcmFtZXRl
ciAtIGlubmVyIGNsYXNzCitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDA2KCkgeworCXJ1bk5lZ2F0
aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkiaW1w
b3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJATm9uTnVsbEJ5RGVm
YXVsdChEZWZhdWx0TG9jYXRpb24uVFlQRV9QQVJBTUVURVIpXG4iICsKKwkJCSJwdWJsaWMgY2xh
c3MgWCB7XG4iICsKKwkJCSIJY2xhc3MgSW5uZXI8VD4ge1xuIiArCisJCQkiCQlUIHByb2Nlc3Mo
VCB0KSB7XG4iICsKKwkJCSIJCQlATm9uTnVsbCBUIHQyID0gdDsgLy8gT0tcbiIgKworCQkJIgkJ
CXJldHVybiBudWxsOyAvLyBFUlJcbiIgKworCQkJIiAJCX1cbiIgKworCQkJIgl9XG4iICsKKwkJ
CSIJdm9pZCB0ZXN0KElubmVyPE51bWJlcj4gaW51bSkge1xuIiArCisJCQkiCQlATm9uTnVsbCBO
dW1iZXIgbm5uID0gaW51bS5wcm9jZXNzKG51bGwpOyAvLyBFUlIgb24gYXJndW1lbnRcbiIgKwor
CQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQki
LS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDcpXG4iICsg
CisJCSIJcmV0dXJuIG51bGw7IC8vIEVSUlxuIiArIAorCQkiCSAgICAgICBeXl5eXG4iICsgCisJ
CSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwgVFwnIGJ1dCB0aGUgcHJv
dmlkZWQgdmFsdWUgaXMgbnVsbFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMi4gRVJS
T1IgaW4gWC5qYXZhIChhdCBsaW5lIDExKVxuIiArIAorCQkiCUBOb25OdWxsIE51bWJlciBubm4g
PSBpbnVtLnByb2Nlc3MobnVsbCk7IC8vIEVSUiBvbiBhcmd1bWVudFxuIiArIAorCQkiCSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1p
c21hdGNoOiByZXF1aXJlZCBcJ0BOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQgdmFs
dWUgaXMgbnVsbFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7Cit9CisKKy8vIGFwcGx5IGRlZmF1
bHQgdG8gdHlwZSBib3VuZCAtIG1ldGhvZCBpbiBpbm5lciBjbGFzcworcHVibGljIHZvaWQgdGVz
dERlZmF1bHQwNygpIHsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1td
IHsKKwkJCSJYLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4q
O1xuIiArCisJCQkiaW1wb3J0IGphdmEudXRpbC4qO1xuIiArCisJCQkiQE5vbk51bGxCeURlZmF1
bHQoRGVmYXVsdExvY2F0aW9uLlRZUEVfQk9VTkQpXG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7
XG4iICsKKwkJCSIJY2xhc3MgSW5uZXIge1xuIiArCisJCQkiCQk8VCBleHRlbmRzIE51bWJlcj4g
VCBwcm9jZXNzKFQgdCwgTGlzdDw/IGV4dGVuZHMgTnVtYmVyPiBsKSB7XG4iICsKKwkJCSIJCQlA
Tm9uTnVsbCBUIHQyID0gdDsgLy8gT0tcbiIgKworCQkJIgkJCUBOb25OdWxsIE51bWJlciBuID0g
bC5nZXQoMCk7IC8vIE9LXG4iICsKKwkJCSIJCQlyZXR1cm4gbnVsbDsgLy8gRVJSXG4iICsKKwkJ
CSIgCQl9XG4iICsKKwkJCSIJfVxuIiArCisJCQkiCXZvaWQgdGVzdChJbm5lciBpbm5lcikge1xu
IiArCisJCQkiCQlATm9uTnVsbCBOdW1iZXIgbm5uID0gaW5uZXIucHJvY2VzcyhJbnRlZ2VyLk1B
WF9WQUxVRSwgbmV3IEFycmF5TGlzdDxATnVsbGFibGUgSW50ZWdlcj4oKSk7IC8vIFdBUk4gb24g
MS4gYXJnOyBFUlIgb24gMi4gYXJnXG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9LAor
CQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9S
IGluIFguamF2YSAoYXQgbGluZSA5KVxuIiArIAorCQkiCXJldHVybiBudWxsOyAvLyBFUlJcbiIg
KyAKKwkJIgkgICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21hdGNoOiByZXF1aXJl
ZCBcJ1QgZXh0ZW5kcyBATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlz
IG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjIuIFdBUk5JTkcgaW4gWC5qYXZh
IChhdCBsaW5lIDEzKVxuIiArIAorCQkiCUBOb25OdWxsIE51bWJlciBubm4gPSBpbm5lci5wcm9j
ZXNzKEludGVnZXIuTUFYX1ZBTFVFLCBuZXcgQXJyYXlMaXN0PEBOdWxsYWJsZSBJbnRlZ2VyPigp
KTsgLy8gV0FSTiBvbiAxLiBhcmc7IEVSUiBvbiAyLiBhcmdcbiIgKyAKKwkJIgkgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkiTnVs
bCB0eXBlIHNhZmV0eSAodHlwZSBhbm5vdGF0aW9ucyk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUg
XCdpbnRcJyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFwnQE5vbk51
bGwgSW50ZWdlclwnXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIzLiBFUlJPUiBpbiBY
LmphdmEgKGF0IGxpbmUgMTMpXG4iICsgCisJCSIJQE5vbk51bGwgTnVtYmVyIG5ubiA9IGlubmVy
LnByb2Nlc3MoSW50ZWdlci5NQVhfVkFMVUUsIG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIEludGVn
ZXI+KCkpOyAvLyBXQVJOIG9uIDEuIGFyZzsgRVJSIG9uIDIuIGFyZ1xuIiArIAorCQkiCSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2gg
KHR5cGUgYW5ub3RhdGlvbnMpOiByZXF1aXJlZCBcJ0xpc3Q8PyBleHRlbmRzIEBOb25OdWxsIE51
bWJlcj5cJyBidXQgdGhpcyBleHByZXNzaW9uIGhhcyB0eXBlIFwnQXJyYXlMaXN0PEBOdWxsYWJs
ZSBJbnRlZ2VyPlwnLCBjb3JyZXNwb25kaW5nIHN1cGVydHlwZSBpcyBcJ0xpc3Q8QE51bGxhYmxl
IEludGVnZXI+XCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorCisvL2FwcGx5IG51bGwg
ZGVmYXVsdCB0byB0eXBlIGFyZ3VtZW50czoKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDFfYmlu
KCkgeworCXJ1bkNvbmZvcm1UZXN0V2l0aExpYnMoCisJCQluZXcgU3RyaW5nW10geworCQkJCSJY
LmphdmEiLAorCQkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKwor
CQkJCSJpbXBvcnQgamF2YS51dGlsLio7XG4iICsKKwkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5v
dGF0aW9uLio7XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiQFRhcmdldChFbGVtZW50VHlwZS5UWVBF
X1VTRSkgQFJldGVudGlvbihSZXRlbnRpb25Qb2xpY3kuQ0xBU1MpIEBpbnRlcmZhY2UgSW1wb3J0
YW50IHt9XG4iICsKKwkJCQkiXG4iICsKKwkJCQkiQE5vbk51bGxCeURlZmF1bHQoRGVmYXVsdExv
Y2F0aW9uLlRZUEVfQVJHVU1FTlQpXG4iICsKKwkJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJ
CQkJIglMaXN0PE51bWJlcj4gdGVzdDEoTGlzdDxASW1wb3J0YW50IE51bWJlcj4gaW4pIHtcbiIg
KworCQkJCSIJCXJldHVybiBuZXcgQXJyYXlMaXN0PEBOb25OdWxsIE51bWJlcj4oKTtcbiIgKwor
CQkJCSIJfVxuIiArCisJCQkJIn1cbiIKKwkJCX0sCisJCQlnZXRDb21waWxlck9wdGlvbnMoKSwK
KwkJCSIiKTsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJ
CSJZLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiAr
CisJCQkiaW1wb3J0IGphdmEudXRpbC4qO1xuIiArCisJCQkicHVibGljIGNsYXNzIFkge1xuIiAr
CisJCQkiCXZvaWQgdGVzdChMaXN0PE51bWJlcj4gaW4sIFggeCkge1xuIiArCisJCQkiCQl4LnRl
c3QxKG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIE51bWJlcj4oKSkgLy8gRVJSIGF0IGFyZ1xuIiAr
CisJCQkiCQkJLmFkZChudWxsKTsgLy8gRVJSXG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgor
CQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEu
IEVSUk9SIGluIFkuamF2YSAoYXQgbGluZSA1KVxuIiArIAorCQkiCXgudGVzdDEobmV3IEFycmF5
TGlzdDxATnVsbGFibGUgTnVtYmVyPigpKSAvLyBFUlIgYXQgYXJnXG4iICsgCisJCSIJICAgICAg
ICBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJIk51bGwgdHlwZSBt
aXNtYXRjaCAodHlwZSBhbm5vdGF0aW9ucyk6IHJlcXVpcmVkIFwnTGlzdDxATm9uTnVsbCBOdW1i
ZXI+XCcgYnV0IHRoaXMgZXhwcmVzc2lvbiBoYXMgdHlwZSBcJ0FycmF5TGlzdDxATnVsbGFibGUg
TnVtYmVyPlwnLCBjb3JyZXNwb25kaW5nIHN1cGVydHlwZSBpcyBcJ0xpc3Q8QE51bGxhYmxlIE51
bWJlcj5cJ1xuIiArIAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMi4gRVJST1IgaW4gWS5qYXZh
IChhdCBsaW5lIDYpXG4iICsgCisJCSIJLmFkZChudWxsKTsgLy8gRVJSXG4iICsgCisJCSIJICAg
ICBeXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwg
TnVtYmVyXCcgYnV0IHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBudWxsXG4iICsgCisJCSItLS0tLS0t
LS0tXG4iKTsKK30KKworLy9hcHBseSBudWxsIGRlZmF1bHQgdG8gcGFyYW1ldGVyczoKK3B1Ymxp
YyB2b2lkIHRlc3REZWZhdWx0MDJfYmluKCkgeworCXJ1bkNvbmZvcm1UZXN0V2l0aExpYnMoCisJ
CW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlv
bi5QQVJBTUVURVIpXG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJTnVtYmVy
IHRlc3QxKE51bWJlciBpbikge1xuIiArCisJCQkiCQlyZXR1cm4gbnVsbDsgLy8gT0tcbiIgKwor
CQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQki
Iik7CisJcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWS5q
YXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJ
InB1YmxpYyBjbGFzcyBZIHtcbiIgKworCQkJIglATm9uTnVsbCBOdW1iZXIgdGVzdChYIHgpIHtc
biIgKworCQkJIgkJcmV0dXJuIHgudGVzdDEobnVsbCk7IC8vIGVycm9yIGF0IGFyZywgdW5jaGVj
a2VkIGF0IHJldHVyblxuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29t
cGlsZXJPcHRpb25zKCksCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIxLiBXQVJOSU5HIGluIFku
amF2YSAoYXQgbGluZSA0KVxuIiArIAorCQkiCXJldHVybiB4LnRlc3QxKG51bGwpOyAvLyBlcnJv
ciBhdCBhcmcsIHVuY2hlY2tlZCBhdCByZXR1cm5cbiIgKyAKKwkJIgkgICAgICAgXl5eXl5eXl5e
Xl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIHNhZmV0eSAodHlwZSBhbm5vdGF0aW9ucyk6IFRoZSBl
eHByZXNzaW9uIG9mIHR5cGUgXCdOdW1iZXJcJyBuZWVkcyB1bmNoZWNrZWQgY29udmVyc2lvbiB0
byBjb25mb3JtIHRvIFwnQE5vbk51bGwgTnVtYmVyXCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIg
KyAKKwkJIjIuIEVSUk9SIGluIFkuamF2YSAoYXQgbGluZSA0KVxuIiArIAorCQkiCXJldHVybiB4
LnRlc3QxKG51bGwpOyAvLyBlcnJvciBhdCBhcmcsIHVuY2hlY2tlZCBhdCByZXR1cm5cbiIgKyAK
KwkJIgkgICAgICAgICAgICAgICBeXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJl
cXVpcmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBudWxs
XG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKworLy9hcHBseSBudWxsIGRlZmF1bHQgdG8g
cmV0dXJuIHR5cGUgLSBhbm5vdGF0aW9uIGF0IG1ldGhvZDoKK3B1YmxpYyB2b2lkIHRlc3REZWZh
dWx0MDNfYmluKCkgeworCXJ1bkNvbmZvcm1UZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7
CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtc
biIgKworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglATm9uTnVsbEJ5RGVmYXVsdChE
ZWZhdWx0TG9jYXRpb24uUkVUVVJOX1RZUEUpXG4iICsKKwkJCSIJTnVtYmVyIHRlc3QoTnVtYmVy
IGluKSB7XG4iICsKKwkJCSIJCXJldHVybiBuZXcgSW50ZWdlcigxMyk7XG4iICsKKwkJCSIJfVxu
IiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIiIpOworCXJ1
bkNvbmZvcm1UZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWS5qYXZhIiwKKwkJ
CSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJInB1YmxpYyBj
bGFzcyBZIHtcbiIgKworCQkJIglATm9uTnVsbCBOdW1iZXIgdGVzdChYIHgpIHtcbiIgKworCQkJ
IgkJcmV0dXJuIHgudGVzdChudWxsKTsgLy8gYm90aCBPS1xuIiArCisJCQkiCX1cbiIgKworCQkJ
In1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSIiKTsKK30KKworLy8gYXBw
bHkgbnVsbCBkZWZhdWx0IHRvIGZpZWxkIC0gYWxzbyB0ZXN0IG1peGluZyBvZiBleHBsaWNpdCBh
bm5vdGF0aW9uIHdpdGggZGVmYXVsdCBATm9uTnVsbCAob3RoZXIgYW5ub3QgaXMgbm90IHJlbmRl
cmVkIGluIGVycm9yKQorcHVibGljIHZvaWQgdGVzdERlZmF1bHQwNF9iaW4oKSB7CisJcnVuQ29u
Zm9ybVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEiLAorCQkJImlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkiaW1wb3J0IGphdmEu
bGFuZy5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJAVGFyZ2V0KEVsZW1lbnRUeXBlLlRZUEVfVVNF
KSBAUmV0ZW50aW9uKFJldGVudGlvblBvbGljeS5DTEFTUykgQGludGVyZmFjZSBJbXBvcnRhbnQg
e31cbiIgKworCQkJIkBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5GSUVMRClcbiIg
KworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglASW1wb3J0YW50IE51bWJlciBmaWVs
ZCA9IG5ldyBEb3VibGUoMS4xZCk7XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVy
T3B0aW9ucygpLAorCQkiIik7CisJcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJCW5ldyBTdHJp
bmdbXSB7CisJCQkiWS5qYXZhIiwKKwkJCSJwdWJsaWMgY2xhc3MgWSB7XG4iICsKKwkJCSIJdm9p
ZCB0ZXN0KFggeCkge1xuIiArCisJCQkiCQl4LmZpZWxkID0gbnVsbDsgLy8gRVJSXG4iICsKKwkJ
CSIJfVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0t
LS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9SIGluIFkuamF2YSAoYXQgbGluZSAzKVxuIiArIAor
CQkiCXguZmllbGQgPSBudWxsOyAvLyBFUlJcbiIgKyAKKwkJIgkgICAgICAgICAgXl5eXlxuIiAr
IAorCQkiTnVsbCB0eXBlIG1pc21hdGNoOiByZXF1aXJlZCBcJ0BOb25OdWxsIE51bWJlclwnIGJ1
dCB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgbnVsbFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7fQor
CisvLyBkZWZhdWx0IGRlZmF1bHQKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDVfYmluKCkgewor
CXJ1bkNvbmZvcm1UZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwK
KwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBOb25O
dWxsQnlEZWZhdWx0XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJTnVtYmVy
IGZpZWxkID0gbmV3IExvbmcoMTMpO1xuIiArCisJCQkiCXZvaWQgdGVzdDEoTnVtYmVyW10gbnMp
IHtcbiIgKworCQkJIgkJbnNbMF0gPSBudWxsOyAvLyBPSyBzaW5jZSBub3QgYWZmZWN0ZWQgYnkg
ZGVmYXVsdFxuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJP
cHRpb25zKCksCisJCSIiKTsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmlu
Z1tdIHsKKwkJCSJZLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlv
bi4qO1xuIiArCisJCQkicHVibGljIGNsYXNzIFkge1xuIiArCisJCQkiCXZvaWQgdGVzdChYIHgs
IEBOdWxsYWJsZSBOdW1iZXIgQE5vbk51bGxbXSBucykge1xuIiArCisJCQkiCQl4LnRlc3QxKG5z
KTsgLy8gT0sgc2luY2Ugbm90IGFmZmVjdGVkIGJ5IGRlZmF1bHRcbiIgKworCQkJIgkJeC5maWVs
ZCA9IG51bGw7IC8vIEVSUlxuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0
Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIxLiBFUlJPUiBpbiBZ
LmphdmEgKGF0IGxpbmUgNSlcbiIgKyAKKwkJIgl4LmZpZWxkID0gbnVsbDsgLy8gRVJSXG4iICsg
CisJCSIJICAgICAgICAgIF5eXl5cbiIgKyAKKwkJIk51bGwgdHlwZSBtaXNtYXRjaDogcmVxdWly
ZWQgXCdATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51bGxcbiIg
KyAKKwkJIi0tLS0tLS0tLS1cbiIpO30KKworLy8gYXBwbHkgZGVmYXVsdCB0byB0eXBlIHBhcmFt
ZXRlciAtIGlubmVyIGNsYXNzCitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDA2X2JpbigpIHsKKwly
dW5Db25mb3JtVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJ
CQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJATm9uTnVs
bEJ5RGVmYXVsdChEZWZhdWx0TG9jYXRpb24uVFlQRV9QQVJBTUVURVIpXG4iICsKKwkJCSJwdWJs
aWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJc3RhdGljIGNsYXNzIElubmVyPFQ+IHtcbiIgKworCQkJ
IgkJVCBwcm9jZXNzKFQgdCkge1xuIiArCisJCQkiCQkJcmV0dXJuIHQ7XG4iICsKKwkJCSIgCQl9
XG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMo
KSwKKwkJIiIpOworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10gewor
CQkJIlkuamF2YSIsCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4i
ICsKKwkJCSJwdWJsaWMgY2xhc3MgWSB7XG4iICsKKwkJCSIJdm9pZCB0ZXN0KFguSW5uZXI8TnVt
YmVyPiBpbnVtKSB7XG4iICsKKwkJCSIJCUBOb25OdWxsIE51bWJlciBubm4gPSBpbnVtLnByb2Nl
c3MobnVsbCk7IC8vIEVSUiBvbiBhcmd1bWVudFxuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIK
KwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIx
LiBFUlJPUiBpbiBZLmphdmEgKGF0IGxpbmUgNClcbiIgKyAKKwkJIglATm9uTnVsbCBOdW1iZXIg
bm5uID0gaW51bS5wcm9jZXNzKG51bGwpOyAvLyBFUlIgb24gYXJndW1lbnRcbiIgKyAKKwkJIgkg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5cbiIgKyAKKwkJIk51bGwgdHlw
ZSBtaXNtYXRjaDogcmVxdWlyZWQgXCdATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHByb3ZpZGVk
IHZhbHVlIGlzIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpO30KKworLy8gYXBwbHkgZGVm
YXVsdCB0byB0eXBlIGJvdW5kIC0gbWV0aG9kIGluIGlubmVyIGNsYXNzCitwdWJsaWMgdm9pZCB0
ZXN0RGVmYXVsdDA3X2JpbigpIHsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0
cmluZ1tdIHsKKwkJCSJYLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3Rh
dGlvbi4qO1xuIiArCisJCQkiaW1wb3J0IGphdmEudXRpbC4qO1xuIiArCisJCQkiQE5vbk51bGxC
eURlZmF1bHQoRGVmYXVsdExvY2F0aW9uLlRZUEVfQk9VTkQpXG4iICsKKwkJCSJwdWJsaWMgY2xh
c3MgWCB7XG4iICsKKwkJCSIJc3RhdGljIGNsYXNzIElubmVyIHtcbiIgKworCQkJIgkJPFQgZXh0
ZW5kcyBOdW1iZXI+IFQgcHJvY2VzcyhUIHQsIExpc3Q8PyBleHRlbmRzIE51bWJlcj4gbCkge1xu
IiArCisJCQkiCQkJcmV0dXJuIHQ7XG4iICsKKwkJCSIgCQl9XG4iICsKKwkJCSIJfVxuIiArCisJ
CQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIiIpOworCXJ1bk5lZ2F0
aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlkuamF2YSIsCisJCQkiaW1w
b3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJpbXBvcnQgamF2YS51
dGlsLio7XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWSB7XG4iICsKKwkJCSIJdm9pZCB0ZXN0KFgu
SW5uZXIgaW5uZXIpIHtcbiIgKworCQkJIgkJQE5vbk51bGwgTnVtYmVyIG5ubiA9IGlubmVyLnBy
b2Nlc3MoSW50ZWdlci5NQVhfVkFMVUUsIG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIEludGVnZXI+
KCkpOyAvLyBXQVJOIG9uIDEuIGFyZzsgRVJSIG9uIDIuIGFyZ1xuIiArCisJCQkiCX1cbiIgKwor
CQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0tLS0tLS0tXG4i
ICsgIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBub3QgYmUgYSB3YXJuaW5nLCBhIGNhc2Ugb2YgdW5y
ZWNvZ25pemVkIGJveGluZworCQkiMS4gV0FSTklORyBpbiBZLmphdmEgKGF0IGxpbmUgNSlcbiIg
KyAKKwkJIglATm9uTnVsbCBOdW1iZXIgbm5uID0gaW5uZXIucHJvY2VzcyhJbnRlZ2VyLk1BWF9W
QUxVRSwgbmV3IEFycmF5TGlzdDxATnVsbGFibGUgSW50ZWdlcj4oKSk7IC8vIFdBUk4gb24gMS4g
YXJnOyBFUlIgb24gMi4gYXJnXG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJIk51bGwgdHlwZSBzYWZldHkgKHR5
cGUgYW5ub3RhdGlvbnMpOiBUaGUgZXhwcmVzc2lvbiBvZiB0eXBlIFwnaW50XCcgbmVlZHMgdW5j
aGVja2VkIGNvbnZlcnNpb24gdG8gY29uZm9ybSB0byBcJ0BOb25OdWxsIEludGVnZXJcJ1xuIiAr
IAorCQkiLS0tLS0tLS0tLVxuIik7Cit9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNzaXN0L2NvbXBs
ZXRlL0NvbXBsZXRpb25PblBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb2RlYXNzaXN0L2NvbXBsZXRlL0NvbXBsZXRpb25PblBhcmFtZXRlcml6ZWRRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLmphdmEKaW5kZXggNDg3ODEzYy4uN2E5ZjY2ZSAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29k
ZWFzc2lzdC9jb21wbGV0ZS9Db21wbGV0aW9uT25QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvZGVhc3Npc3Qvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3QvY29tcGxldGUvQ29tcGxldGlvbk9uUGFyYW1l
dGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDQsIDIwMDkgSUJNIENvcnBv
cmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDQsIDIwMTQgSUJNIENvcnBv
cmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0g
YW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5k
ZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNo
IGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC03
LDYgKzcsOCBAQAogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24g
LSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqICAgICBTdGVwaGFuIEhlcnJtYW5u
IC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBl
dmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVs
dAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb2RlYXNzaXN0LmNvbXBsZXRlOwogCkBAIC03NiwxMyArNzgsMTMgQEAKIAkJcmV0dXJu
IHRoaXMua2luZCA9PSBLX0NMQVNTIHx8IHRoaXMua2luZCA9PSBLX0lOVEVSRkFDRTsKIAl9CiAK
LQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVh
biBjaGVja0JvdW5kcykgewotCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMp
OworCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9ja1Njb3BlIHNjb3BlLCBib29s
ZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9jYXRpb24pIHsKKwkJc3VwZXIucmVzb2x2ZVR5cGUoc2Nv
cGUsIGNoZWNrQm91bmRzLCBsb2NhdGlvbik7CiAJCXRocm93IG5ldyBDb21wbGV0aW9uTm9kZUZv
dW5kKHRoaXMsIHRoaXMucmVzb2x2ZWRUeXBlLCBzY29wZSk7CiAJfQogCi0JcHVibGljIFR5cGVC
aW5kaW5nIHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUpIHsKLQkJc3VwZXIucmVzb2x2ZVR5
cGUoc2NvcGUpOworCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNj
b3BlLCBpbnQgbG9jYXRpb24pIHsKKwkJc3VwZXIucmVzb2x2ZVR5cGUoc2NvcGUsIGxvY2F0aW9u
KTsKIAkJdGhyb3cgbmV3IENvbXBsZXRpb25Ob2RlRm91bmQodGhpcywgdGhpcy5yZXNvbHZlZFR5
cGUsIHNjb3BlKTsKIAl9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvZGVh
c3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3Qvc2VsZWN0L1NlbGVjdGlv
bk9uUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3Qv
c2VsZWN0L1NlbGVjdGlvbk9uUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2
YQppbmRleCBmYTI2MTYxLi5mZmU5Yjk5IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNzaXN0L3NlbGVjdC9T
ZWxlY3Rpb25PblBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29kZWFzc2lzdC9zZWxlY3QvU2VsZWN0aW9uT25QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZS5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAq
IENvcHlyaWdodCAoYykgMjAwMCwgMjAwOSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAq
IENvcHlyaWdodCAoYykgMjAwMCwgMjAxNCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAq
IEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBt
YXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVj
bGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0
cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTcsNiArNyw4IEBACiAgKgogICogQ29u
dHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBs
ZW1lbnRhdGlvbgorICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCisg
KgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9j
YXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvZGVhc3Npc3Quc2VsZWN0
OwogCkBAIC0yOSw4ICszMSw4IEBACiAJCXRoaXMudHlwZUFyZ3VtZW50c1tsZW5ndGhdID0gYXNz
aXN0VHlwZUFyZ3VtZW50czsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUo
QmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5kcykgewotCQlzdXBlci5yZXNvbHZl
VHlwZShzY29wZSwgY2hlY2tCb3VuZHMpOworCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlw
ZShCbG9ja1Njb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9jYXRpb24pIHsK
KwkJc3VwZXIucmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzLCBsb2NhdGlvbik7CiAJCS8v
Ly8gcmVtb3ZlZCB1bm5lY2Vzc2FyeSBjb2RlIHRvIHNvbHZlIGJ1ZyA5NDY1MwogCQkvL2lmKHRo
aXMucmVzb2x2ZWRUeXBlICE9IG51bGwgJiYgdGhpcy5yZXNvbHZlZFR5cGUuaXNSYXdUeXBlKCkp
IHsKIAkJLy8JUGFyYW1ldGVyaXplZFR5cGVCaW5kaW5nIHBhcmFtZXRlcml6ZWRUeXBlQmluZGlu
ZyA9IHNjb3BlLmNyZWF0ZVBhcmFtZXRlcml6ZWRUeXBlKCgoUmF3VHlwZUJpbmRpbmcpdGhpcy5y
ZXNvbHZlZFR5cGUpLnR5cGUsIG5ldyBUeXBlQmluZGluZ1swXSwgdGhpcy5yZXNvbHZlZFR5cGUu
ZW5jbG9zaW5nVHlwZSgpKTsKQEAgLTM5LDggKzQxLDggQEAKIAkJdGhyb3cgbmV3IFNlbGVjdGlv
bk5vZGVGb3VuZCh0aGlzLnJlc29sdmVkVHlwZSk7CiAJfQogCi0JcHVibGljIFR5cGVCaW5kaW5n
IHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUpIHsKLQkJc3VwZXIucmVzb2x2ZVR5cGUoc2Nv
cGUpOworCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3BlLCBp
bnQgbG9jYXRpb24pIHsKKwkJc3VwZXIucmVzb2x2ZVR5cGUoc2NvcGUsIGxvY2F0aW9uKTsKIAkJ
Ly8vLyByZW1vdmVkIHVubmVjZXNzYXJ5IGNvZGUgdG8gc29sdmUgYnVnIDk0NjUzCiAJCS8vaWYo
dGhpcy5yZXNvbHZlZFR5cGUgIT0gbnVsbCAmJiB0aGlzLnJlc29sdmVkVHlwZS5pc1Jhd1R5cGUo
KSkgewogCQkvLwlQYXJhbWV0ZXJpemVkVHlwZUJpbmRpbmcgcGFyYW1ldGVyaXplZFR5cGVCaW5k
aW5nID0gc2NvcGUuY3JlYXRlUGFyYW1ldGVyaXplZFR5cGUoKChSYXdUeXBlQmluZGluZyl0aGlz
LnJlc29sdmVkVHlwZSkudHlwZSwgbmV3IFR5cGVCaW5kaW5nWzBdLCB0aGlzLnJlc29sdmVkVHlw
ZS5lbmNsb3NpbmdUeXBlKCkpOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29k
ZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9zZWxlY3QvU2VsZWN0
aW9uT25QYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9z
ZWxlY3QvU2VsZWN0aW9uT25QYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhCmlu
ZGV4IDU3Zjc0OWEuLjdiZTBkN2EgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
ZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3Qvc2VsZWN0L1NlbGVj
dGlvbk9uUGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNz
aXN0L3NlbGVjdC9TZWxlY3Rpb25PblBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmph
dmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0
IChjKSAyMDAwLCAyMDA5IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0
IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0
cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwog
ICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJs
aWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwg
YW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNyw2ICs3LDggQEAKICAqCiAgKiBDb250cmlidXRvcnM6
CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9u
CisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IKKyAqCQkJCQkJCQlC
dWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRy
aWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFj
a2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29kZWFzc2lzdC5zZWxlY3Q7CiAKQEAgLTIx
LDEzICsyMywxMyBAQAogCQlzdXBlcihuYW1lLCB0eXBlQXJndW1lbnRzLCAwLCBwb3MpOwogCX0K
IAotCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9ja1Njb3BlIHNjb3BlLCBib29s
ZWFuIGNoZWNrQm91bmRzKSB7Ci0JCXN1cGVyLnJlc29sdmVUeXBlKHNjb3BlLCBjaGVja0JvdW5k
cyk7CisJcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJv
b2xlYW4gY2hlY2tCb3VuZHMsIGludCBsb2NhdGlvbikgeworCQlzdXBlci5yZXNvbHZlVHlwZShz
Y29wZSwgY2hlY2tCb3VuZHMsIGxvY2F0aW9uKTsKIAkJdGhyb3cgbmV3IFNlbGVjdGlvbk5vZGVG
b3VuZCh0aGlzLnJlc29sdmVkVHlwZSk7CiAJfQogCi0JcHVibGljIFR5cGVCaW5kaW5nIHJlc29s
dmVUeXBlKENsYXNzU2NvcGUgc2NvcGUpIHsKLQkJc3VwZXIucmVzb2x2ZVR5cGUoc2NvcGUpOwor
CXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3BlLCBpbnQgbG9j
YXRpb24pIHsKKwkJc3VwZXIucmVzb2x2ZVR5cGUoc2NvcGUsIGxvY2F0aW9uKTsKIAkJdGhyb3cg
bmV3IFNlbGVjdGlvbk5vZGVGb3VuZCh0aGlzLnJlc29sdmVkVHlwZSk7CiAJfQogCmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvY29yZS9j
b21waWxlci9JUHJvYmxlbS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2NvcmUvY29tcGlsZXIvSVByb2JsZW0uamF2YQppbmRleCA1ZjJkOWIzLi42
MTU2ZjI4IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvY29yZS9jb21waWxlci9JUHJvYmxlbS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9jb3JlL2NvbXBpbGVyL0lQcm9ibGVtLmph
dmEKQEAgLTE3ODEsNyArMTc4MSw3IEBACiAJLyoqIEBzaW5jZSAzLjkgQkVUQV9KQVZBOCAqLwog
CWludCBVbnNhZmVOdWxsbmVzc0Nhc3QgPSBJbnRlcm5hbCArIDk2NzsKIAkvKiogQHNpbmNlIDMu
OSBCRVRBX0pBVkE4ICovCi0JaW50IE5vbk51bGxEZWZhdWx0RGV0YWlsSXNOb3RFdmFsdWF0ZWQg
PSA5Njg7CisJaW50IE5vbk51bGxEZWZhdWx0RGV0YWlsSXNOb3RFdmFsdWF0ZWQgPSA5Njg7IC8v
IG5vIGxvbmdlciByZXBvcnRlZAogCiAJLy8gSmF2YSA4IHdvcmsKIAkvKiogQHNpbmNlIDMuOSBC
RVRBX0pBVkE4ICovCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fubm90YXRpb24uamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9hc3QvQW5ub3RhdGlvbi5qYXZhCmluZGV4IDc5NDA1YzEuLjQ3ZjE1YjIgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9hc3QvQW5ub3RhdGlvbi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvQW5ub3RhdGlv
bi5qYXZhCkBAIC0yMiw2ICsyMiw3IEBACiAgKgkJCQkJCQkJQnVnIDQxNzI5NSAtIFsxLjhbW251
bGxdIE1hc3NhZ2UgdHlwZSBhbm5vdGF0ZWQgbnVsbCBhbmFseXNpcyB0byBnZWwgd2VsbCB3aXRo
IGRlZXAgZW5jb2RlZCB0eXBlIGJpbmRpbmdzLgogICoJCQkJCQkJCUJ1ZyA0MjQ3MjggLSBbMS44
XVtudWxsXSBVbmV4cGVjdGVkIGVycm9yOiBUaGUgbnVsbG5lc3MgYW5ub3RhdGlvbiAnWFhYWCcg
aXMgbm90IGFwcGxpY2FibGUgYXQgdGhpcyBsb2NhdGlvbgogICoJCQkJCQkJCUJ1ZyAzOTIyNDUg
LSBbMS44XVtjb21waWxlcl1bbnVsbF0gRGVmaW5lIHdoZXRoZXIgLyBob3cgQE5vbk51bGxCeURl
ZmF1bHQgYXBwbGllcyB0byBUWVBFX1VTRSBsb2NhdGlvbnMKKyAqCQkJCQkJCQlCdWcgNDI5OTU4
IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2Yg
QE5vbk51bGxCeURlZmF1bHQKICAqICAgICAgICBBbmR5IENsZW1lbnQgKEdvUGl2b3RhbCwgSW5j
KSBhY2xlbWVudEBnb3Bpdm90YWwuY29tIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqICAgICAgICAg
ICAgICAgICAgICAgICAgICBCdWcgMzgzNjI0IC0gWzEuOF1bY29tcGlsZXJdIFJldml2ZSBjb2Rl
IGdlbmVyYXRpb24gc3VwcG9ydCBmb3IgdHlwZSBhbm5vdGF0aW9ucyAoZnJvbSBPbGl2aWVyJ3Mg
d29yaykKICAqICAgICAgICAgICAgICAgICAgICAgICAgICBCdWcgNDA5NTE3IC0gWzEuOF1bY29t
cGlsZXJdIFR5cGUgYW5ub3RhdGlvbiBwcm9ibGVtcyBvbiBtb3JlIGVsYWJvcmF0ZSBhcnJheSBy
ZWZlcmVuY2VzCkBAIC00MCw2ICs0MSw3IEBACiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUu
Y29tcGlsZXIuQ2hhck9wZXJhdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIuQVNUVmlzaXRvcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29t
cGlsZXIuY2xhc3NmbXQuQ2xhc3NGaWxlQ29uc3RhbnRzOworaW1wb3J0IG9yZy5lY2xpcHNlLmpk
dC5pbnRlcm5hbC5jb21waWxlci5lbnYuRW51bUNvbnN0YW50U2lnbmF0dXJlOwogaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5pbXBsLkNvbXBpbGVyT3B0aW9uczsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5Db25zdGFudDsKIGlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5JcnJpdGFudFNldDsK
QEAgLTMwOCw3ICszMTAsOCBAQAogCX0KIAogCS8qKgotCSAqIENvbXB1dGUgdGhlIGJpdCBwYXR0
ZXJuIGZvciByZWNvZ25pemVkIHN0YW5kYXJkIGFubm90YXRpb25zIHRoZSBjb21waWxlciBtYXkg
bmVlZCB0byBhY3QgdXBvbgorCSAqIENvbXB1dGUgdGhlIGJpdCBwYXR0ZXJuIGZvciByZWNvZ25p
emVkIHN0YW5kYXJkIGFubm90YXRpb25zIHRoZSBjb21waWxlciBtYXkgbmVlZCB0byBhY3QgdXBv
bi4KKwkgKiBUaGUgbG93ZXIgYml0cyAoQmluZGluZy5OdWxsbmVzc0RlZmF1bHRNQVNLKSBkbyBu
b3QgYmVsb25nIGluIHRhZ0JpdHMsIGJ1dCBpbiBkZWZhdWx0TnVsbG5lc3MuCiAJICovCiAJcHJp
dmF0ZSBsb25nIGRldGVjdFN0YW5kYXJkQW5ub3RhdGlvbihTY29wZSBzY29wZSwgUmVmZXJlbmNl
QmluZGluZyBhbm5vdGF0aW9uVHlwZSwgTWVtYmVyVmFsdWVQYWlyIHZhbHVlQXR0cmlidXRlKSB7
CiAJCWxvbmcgdGFnQml0cyA9IDA7CkBAIC0zOTIsMjggKzM5NSw5OCBAQAogCQkJCXRhZ0JpdHMg
fD0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbDsKIAkJCQlicmVhazsKIAkJCWNhc2UgVHlwZUlk
cy5UX0NvbmZpZ3VyZWRBbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdCA6CisJCQkJLy8gc2VlaW5n
IHRoaXMgaWQgaW1wbGllcyB0aGF0IG51bGwgYW5ub3RhdGlvbiBhbmFseXNpcyBpcyBlbmFibGVk
CisJCQkJT2JqZWN0IHZhbHVlID0gbnVsbDsKIAkJCQlpZiAodmFsdWVBdHRyaWJ1dGUgIT0gbnVs
bCkgewogCQkJCQlpZiAodmFsdWVBdHRyaWJ1dGUudmFsdWUgaW5zdGFuY2VvZiBGYWxzZUxpdGVy
YWwpIHsKIAkJCQkJCS8vIHBhcmFtZXRlciAnZmFsc2UnIG1lYW5zOiB0aGlzIGFubm90YXRpb24g
Y2FuY2VscyBhbnkgZGVmYXVsdHMKIAkJCQkJCXRhZ0JpdHMgfD0gVGFnQml0cy5Bbm5vdGF0aW9u
TnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0OwogCQkJCQkJYnJlYWs7CiAJCQkJCX0gZWxzZSBpZiAo
dmFsdWVBdHRyaWJ1dGUuY29tcGlsZXJFbGVtZW50UGFpciAhPSBudWxsKSB7Ci0JCQkJCQlPYmpl
Y3QgdmFsdWUgPSB2YWx1ZUF0dHJpYnV0ZS5jb21waWxlckVsZW1lbnRQYWlyLnZhbHVlOwotCQkJ
CQkJaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0W10gJiYgKChPYmplY3RbXSl2YWx1ZSkubGVu
Z3RoID09IDApIHsKLQkJCQkJCQkvLyBlbXB0eSBwYXJhbWV0ZXIgbWVhbnM6IHRoaXMgYW5ub3Rh
dGlvbiBjYW5jZWxzIGFueSBkZWZhdWx0cwotCQkJCQkJCXRhZ0JpdHMgfD0gVGFnQml0cy5Bbm5v
dGF0aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0OwotCQkJCQkJCWJyZWFrOwotCQkJCQkJfSBl
bHNlIHsKLQkJCQkJCQlzY29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5ub25OdWxsRGVmYXVsdERldGFp
bE5vdEV2YWx1YXRlZCh2YWx1ZUF0dHJpYnV0ZSk7Ci0JCQkJCQl9CisJCQkJCQl2YWx1ZSA9IHZh
bHVlQXR0cmlidXRlLmNvbXBpbGVyRWxlbWVudFBhaXIudmFsdWU7CisJCQkJCX0KKwkJCQl9IGVs
c2UgaWYgKHNjb3BlLmNvbXBpbGVyT3B0aW9ucygpLnNvdXJjZUxldmVsID49IENsYXNzRmlsZUNv
bnN0YW50cy5KREsxXzgpIHsgLy8gZmV0Y2ggZGVmYXVsdCB2YWx1ZSAgLSBUT0RPOiBjYWNoZSBp
dD8KKwkJCQkJTWV0aG9kQmluZGluZ1tdIG1ldGhvZHMgPSBhbm5vdGF0aW9uVHlwZS5tZXRob2Rz
KCk7CisJCQkJCWlmIChtZXRob2RzICE9IG51bGwgJiYgbWV0aG9kcy5sZW5ndGggPT0gMSkgewor
CQkJCQkJT2JqZWN0IGRlZmF1bHRWYWx1ZSA9IG1ldGhvZHNbMF0uZ2V0RGVmYXVsdFZhbHVlKCk7
CisJCQkJCQlpZiAoZGVmYXVsdFZhbHVlIGluc3RhbmNlb2YgT2JqZWN0W10pCisJCQkJCQkJdmFs
dWUgPSBkZWZhdWx0VmFsdWU7CiAJCQkJCX0KIAkJCQl9Ci0JCQkJdGFnQml0cyB8PSBUYWdCaXRz
LkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0OworCQkJCWlmICh2YWx1ZSAhPSBudWxsKSB7CisJ
CQkJCXRhZ0JpdHMgfD0gbnVsbFRhZ0JpdHNGcm9tQW5ub3RhdGlvblZhbHVlKHZhbHVlKTsKKwkJ
CQl9IGVsc2UgeworCQkJCQkvLyBuZWl0aGVyIGV4cGxpY2l0IHZhbHVlLCBub3IgZGVmYXVsdCB2
YWx1ZSBmcm9tIERlZmF1bHRMb2NhdGlvbiAoMS44KQorCQkJCQl0YWdCaXRzIHw9IFRhZ0JpdHMu
QW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQ7CisJCQkJfQogCQkJCWJyZWFrOwogCQl9CiAJCXJl
dHVybiB0YWdCaXRzOwogCX0KIAorCS8qKgorCSAqIENvbnZlcnQgdGhlIHZhbHVlKCkgYXR0cmli
dXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0IGludG8gYSBiaXR2ZWN0b3IgYSBsYSB7QGxpbmsgQmlu
ZGluZyNOdWxsbmVzc0RlZmF1bHRNQVNLfS4KKwkgKiBUaGlzIG1ldGhvZCB1bmRlcnN0YW5kcyB2
YWx1ZSBlbmNvZGluZ3MgZnJvbSBzb3VyY2UgYW5kIGJpbmFyeSB0eXBlcy4KKwkgKiAKKwkgKiA8
Yj5wcmU6PC9iPiBudWxsIGFubm90YXRpb24gYW5hbHlzaXMgaXMgZW5hYmxlZAorCSAqLworCXB1
YmxpYyBzdGF0aWMgaW50IG51bGxUYWdCaXRzRnJvbUFubm90YXRpb25WYWx1ZShPYmplY3QgdmFs
dWUpIHsKKwkJaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0W10pIHsKKwkJCWlmICgoKE9iamVj
dFtdKSB2YWx1ZSkubGVuZ3RoID09IDApIHsKKwkJCQlyZXR1cm4gQmluZGluZy5OVUxMX1VOU1BF
Q0lGSUVEX0JZX0RFRkFVTFQ7CisJCQl9IGVsc2UgeworCQkJCWludCBiaXRzID0gMDsKKwkJCQlm
b3IgKE9iamVjdCBzaW5nbGUgOiAoT2JqZWN0W10pdmFsdWUpCisJCQkJCWJpdHMgfD0gZXZhbHVh
dGVEZWZhdWx0TnVsbG5lc3NMb2NhdGlvbihzaW5nbGUpOworCQkJCXJldHVybiBiaXRzOworCQkJ
fQorCQl9IGVsc2UgeworCQkJcmV0dXJuIGV2YWx1YXRlRGVmYXVsdE51bGxuZXNzTG9jYXRpb24o
dmFsdWUpOworCQl9CisJfQorCisJcHJpdmF0ZSBzdGF0aWMgaW50IGV2YWx1YXRlRGVmYXVsdE51
bGxuZXNzTG9jYXRpb24oT2JqZWN0IHZhbHVlKSB7CisJCWNoYXJbXSBuYW1lID0gbnVsbDsKKwkJ
aWYgKHZhbHVlIGluc3RhbmNlb2YgRmllbGRCaW5kaW5nKSB7CisJCQluYW1lID0gKChGaWVsZEJp
bmRpbmcpIHZhbHVlKS5uYW1lOworCQl9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRW51bUNv
bnN0YW50U2lnbmF0dXJlKSB7CisJCQluYW1lID0gKChFbnVtQ29uc3RhbnRTaWduYXR1cmUpIHZh
bHVlKS5nZXRFbnVtQ29uc3RhbnROYW1lKCk7CisJCX0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2Vv
ZiBFbGVtZW50VmFsdWVQYWlyLlVucmVzb2x2ZWRFbnVtQ29uc3RhbnQpIHsKKwkJCW5hbWUgPSAo
KEVsZW1lbnRWYWx1ZVBhaXIuVW5yZXNvbHZlZEVudW1Db25zdGFudCkgdmFsdWUpLmdldEVudW1D
b25zdGFudE5hbWUoKTsKKwkJfQorCQlpZiAobmFtZSAhPSBudWxsKSB7CisJCQlzd2l0Y2ggKG5h
bWUubGVuZ3RoKSB7CisJCQkJY2FzZSA1OgorCQkJCQlpZiAoQ2hhck9wZXJhdGlvbi5lcXVhbHMo
bmFtZSwgVHlwZUNvbnN0YW50cy5ERUZBVUxUX0xPQ0FUSU9OX19GSUVMRCkpCisJCQkJCQlyZXR1
cm4gQmluZGluZy5EZWZhdWx0TG9jYXRpb25GaWVsZDsKKwkJCQkJYnJlYWs7CisJCQkJY2FzZSA5
OgorCQkJCQlpZiAoQ2hhck9wZXJhdGlvbi5lcXVhbHMobmFtZSwgVHlwZUNvbnN0YW50cy5ERUZB
VUxUX0xPQ0FUSU9OX19QQVJBTUVURVIpKQorCQkJCQkJcmV0dXJuIEJpbmRpbmcuRGVmYXVsdExv
Y2F0aW9uUGFyYW1ldGVyOworCQkJCQlicmVhazsKKwkJCQljYXNlIDEwOgorCQkJCQlpZiAoQ2hh
ck9wZXJhdGlvbi5lcXVhbHMobmFtZSwgVHlwZUNvbnN0YW50cy5ERUZBVUxUX0xPQ0FUSU9OX19U
WVBFX0JPVU5EKSkKKwkJCQkJCXJldHVybiBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVCb3Vu
ZDsKKwkJCQkJYnJlYWs7CisJCQkJY2FzZSAxMToKKwkJCQkJaWYgKENoYXJPcGVyYXRpb24uZXF1
YWxzKG5hbWUsIFR5cGVDb25zdGFudHMuREVGQVVMVF9MT0NBVElPTl9fUkVUVVJOX1RZUEUpKQor
CQkJCQkJcmV0dXJuIEJpbmRpbmcuRGVmYXVsdExvY2F0aW9uUmV0dXJuVHlwZTsKKwkJCQkJYnJl
YWs7CisJCQkJY2FzZSAxMyA6CisJCQkJCWlmIChDaGFyT3BlcmF0aW9uLmVxdWFscyhuYW1lLCBU
eXBlQ29uc3RhbnRzLkRFRkFVTFRfTE9DQVRJT05fX1RZUEVfQVJHVU1FTlQpKQorCQkJCQkJcmV0
dXJuIEJpbmRpbmcuRGVmYXVsdExvY2F0aW9uVHlwZUFyZ3VtZW50OworCQkJCQlicmVhazsKKwkJ
CQljYXNlIDE0IDoKKwkJCQkJaWYgKENoYXJPcGVyYXRpb24uZXF1YWxzKG5hbWUsIFR5cGVDb25z
dGFudHMuREVGQVVMVF9MT0NBVElPTl9fVFlQRV9QQVJBTUVURVIpKQorCQkJCQkJcmV0dXJuIEJp
bmRpbmcuRGVmYXVsdExvY2F0aW9uVHlwZVBhcmFtZXRlcjsKKwkJCQkJaWYgKENoYXJPcGVyYXRp
b24uZXF1YWxzKG5hbWUsIFR5cGVDb25zdGFudHMuREVGQVVMVF9MT0NBVElPTl9fQVJSQVlfQ09O
VEVOVFMpKQorCQkJCQkJcmV0dXJuIEJpbmRpbmcuRGVmYXVsdExvY2F0aW9uQXJyYXlDb250ZW50
czsKKwkJCQkJYnJlYWs7CisJCQl9CisJCX0KKwkJcmV0dXJuIDA7CisJfQorCQogCXN0YXRpYyBT
dHJpbmcgZ2V0UmV0ZW50aW9uTmFtZShsb25nIHRhZ0JpdHMpIHsKIAkJaWYgKCh0YWdCaXRzICYg
VGFnQml0cy5Bbm5vdGF0aW9uUnVudGltZVJldGVudGlvbikgPT0gVGFnQml0cy5Bbm5vdGF0aW9u
UnVudGltZVJldGVudGlvbikgewogCQkJLy8gVGFnQml0cy5Bbm5vdGF0aW9uUnVudGltZVJldGVu
dGlvbiBjb21iaW5lcyBib3RoIFRhZ0JpdHMuQW5ub3RhdGlvbkNsYXNzUmV0ZW50aW9uICYgVGFn
Qml0cy5Bbm5vdGF0aW9uU291cmNlUmV0ZW50aW9uCkBAIC03OTUsMTIgKzg2OCwxNCBAQAogCQl0
aGlzLmNvbXBpbGVyQW5ub3RhdGlvbiA9IHNjb3BlLmVudmlyb25tZW50KCkuY3JlYXRlQW5ub3Rh
dGlvbigoUmVmZXJlbmNlQmluZGluZykgdGhpcy5yZXNvbHZlZFR5cGUsIGNvbXB1dGVFbGVtZW50
VmFsdWVQYWlycygpKTsKIAkJLy8gcmVjb2duaXplIHN0YW5kYXJkIGFubm90YXRpb25zID8KIAkJ
bG9uZyB0YWdCaXRzID0gZGV0ZWN0U3RhbmRhcmRBbm5vdGF0aW9uKHNjb3BlLCBhbm5vdGF0aW9u
VHlwZSwgdmFsdWVBdHRyaWJ1dGUpOworCQlpbnQgZGVmYXVsdE51bGxuZXNzID0gKGludCkodGFn
Qml0cyAmIEJpbmRpbmcuTnVsbG5lc3NEZWZhdWx0TUFTSyk7CisJCXRhZ0JpdHMgJj0gfkJpbmRp
bmcuTnVsbG5lc3NEZWZhdWx0TUFTSzsKIAogCQkvLyByZWNvcmQgYW5ub3RhdGlvbiBwb3NpdGlv
bnMgaW4gdGhlIGNvbXBpbGF0aW9uIHJlc3VsdAogCQlzY29wZS5yZWZlcmVuY2VDb21waWxhdGlv
blVuaXQoKS5yZWNvcmRTdXBwcmVzc1dhcm5pbmdzKElycml0YW50U2V0Lk5MUywgbnVsbCwgdGhp
cy5zb3VyY2VTdGFydCwgdGhpcy5kZWNsYXJhdGlvblNvdXJjZUVuZCk7CiAJCWlmICh0aGlzLnJl
Y2lwaWVudCAhPSBudWxsKSB7CiAJCQlpbnQga2luZCA9IHRoaXMucmVjaXBpZW50LmtpbmQoKTsK
LQkJCWlmICh0YWdCaXRzICE9IDApIHsKKwkJCWlmICh0YWdCaXRzICE9IDAgfHwgZGVmYXVsdE51
bGxuZXNzICE9IDApIHsKIAkJCQkvLyB0YWcgYml0cyBvbnRvIHJlY2lwaWVudAogCQkJCXN3aXRj
aCAoa2luZCkgewogCQkJCQljYXNlIEJpbmRpbmcuUEFDS0FHRSA6CkBAIC04MjEsNiArODk2LDcg
QEAKIAkJCQkJCQl9CiAJCQkJCQkJcmVjb3JkU3VwcHJlc3NXYXJuaW5ncyhzY29wZSwgc3RhcnQs
IHR5cGVEZWNsYXJhdGlvbi5kZWNsYXJhdGlvblNvdXJjZUVuZCwgc2NvcGUuY29tcGlsZXJPcHRp
b25zKCkuc3VwcHJlc3NXYXJuaW5ncyk7CiAJCQkJCQl9CisJCQkJCQlzb3VyY2VUeXBlLmRlZmF1
bHROdWxsbmVzcyB8PSBkZWZhdWx0TnVsbG5lc3M7CiAJCQkJCQlicmVhazsKIAkJCQkJY2FzZSBC
aW5kaW5nLk1FVEhPRCA6CiAJCQkJCQlNZXRob2RCaW5kaW5nIHNvdXJjZU1ldGhvZCA9IChNZXRo
b2RCaW5kaW5nKSB0aGlzLnJlY2lwaWVudDsKQEAgLTg0MSw2ICs5MTcsNyBAQAogCQkJCQkJCS8v
IGZvciBkZWNsYXJhdGlvbiBhbm5vdGF0aW9ucyB0aGUgaW5hcHBsaWNhYmlsaXR5IHdpbGwgYmUg
cmVwb3J0ZWQgYmVsb3cKIAkJCQkJCQlzb3VyY2VNZXRob2QudGFnQml0cyAmPSB+VGFnQml0cy5B
bm5vdGF0aW9uTnVsbE1BU0s7CiAJCQkJCQl9CisJCQkJCQlzb3VyY2VNZXRob2QuZGVmYXVsdE51
bGxuZXNzIHw9IGRlZmF1bHROdWxsbmVzczsKIAkJCQkJCWJyZWFrOwogCQkJCQljYXNlIEJpbmRp
bmcuRklFTEQgOgogCQkJCQkJRmllbGRCaW5kaW5nIHNvdXJjZUZpZWxkID0gKEZpZWxkQmluZGlu
ZykgdGhpcy5yZWNpcGllbnQ7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0FycmF5UXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9BcnJheVF1YWxpZmllZFR5cGVSZWZlcmVu
Y2UuamF2YQppbmRleCA1YzZmNGU3Li45YmNkOTQ0IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvQXJyYXlRdWFs
aWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKQEAgLTExLDYgKzExLDggQEAKICAqIAogICogQ29udHJp
YnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1l
bnRhdGlvbgorICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCisgKgkJ
CQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRp
b24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ki8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdDsKIApAQCAt
MTA1LDggKzEwNyw4IEBACiAJCX0KIAl9CiAKLQlwcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJu
YWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSkgewotCQlUeXBlQmluZGluZyBpbnRlcm5hbFJlc29s
dmVUeXBlID0gc3VwZXIuaW50ZXJuYWxSZXNvbHZlVHlwZShzY29wZSk7CisJcHJvdGVjdGVkIFR5
cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2NvcGUsIGludCBsb2NhdGlvbikg
eworCQlUeXBlQmluZGluZyBpbnRlcm5hbFJlc29sdmVUeXBlID0gc3VwZXIuaW50ZXJuYWxSZXNv
bHZlVHlwZShzY29wZSwgbG9jYXRpb24pOwogCQlyZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZTsK
IAl9CiAKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvQXJyYXlUeXBlUmVmZXJlbmNlLmphdmEgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvYXN0L0FycmF5VHlwZVJlZmVyZW5jZS5qYXZhCmluZGV4IGViNWRmODQuLjlmNjE0NmIg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9hc3QvQXJyYXlUeXBlUmVmZXJlbmNlLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9BcnJheVR5cGVSZWZlcmVuY2UuamF2YQpAQCAtMTEsNiArMTEsOCBAQAogICogCiAg
KiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5k
IGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBm
b3IKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1
bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0
OwogCkBAIC0xNzcsOCArMTc5LDggQEAKIAkJdmlzaXRvci5lbmRWaXNpdCh0aGlzLCBzY29wZSk7
CiAJfQogCi0JcHJvdGVjdGVkIFR5cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUg
c2NvcGUpIHsKLQkJVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZSA9IHN1cGVyLmludGVy
bmFsUmVzb2x2ZVR5cGUoc2NvcGUpOworCXByb3RlY3RlZCBUeXBlQmluZGluZyBpbnRlcm5hbFJl
c29sdmVUeXBlKFNjb3BlIHNjb3BlLCBpbnQgbG9jYXRpb24pIHsKKwkJVHlwZUJpbmRpbmcgaW50
ZXJuYWxSZXNvbHZlVHlwZSA9IHN1cGVyLmludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUsIGxvY2F0
aW9uKTsKIAkJcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGU7CiAJfQogfQpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2FzdC9JbnRlcnNlY3Rpb25DYXN0VHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2Fz
dC9JbnRlcnNlY3Rpb25DYXN0VHlwZVJlZmVyZW5jZS5qYXZhCmluZGV4IDgzMTI0MjkuLjIwN2Jk
M2QgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvSW50ZXJzZWN0aW9uQ2FzdFR5cGVSZWZlcmVuY2Uu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L0ludGVyc2VjdGlvbkNhc3RUeXBlUmVmZXJlbmNlLmphdmEK
QEAgLTExLDYgKzExLDggQEAKICAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jw
b3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICogICAgIFN0ZXBoYW4g
SGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCisgKgkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1b
bnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxC
eURlZmF1bHQKICAqICAgICAgICBBbmR5IENsZW1lbnQgKEdvUGl2b3RhbCwgSW5jKSBhY2xlbWVu
dEBnb3Bpdm90YWwuY29tIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqICAgICAgICAgICAgICAgICAg
ICAgICAgICBCdWcgNDA5MjM2IC0gWzEuOF1bY29tcGlsZXJdIFR5cGUgYW5ub3RhdGlvbnMgb24g
aW50ZXJzZWN0aW9uIGNhc3QgdHlwZXMgZHJvcHBlZCBieSBjb2RlIGdlbmVyYXRvcgogICoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKiovCkBAIC03MCw3ICs3Miw3IEBACiAJLyogKG5vbi1KYXZhZG9jKQog
CSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5UeXBlUmVmZXJl
bmNlI2dldFR5cGVCaW5kaW5nKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29r
dXAuU2NvcGUpCiAJICovCi0JcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2NrU2Nv
cGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMpIHsKKwlwdWJsaWMgVHlwZUJpbmRpbmcgcmVz
b2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5kcywgaW50IGxvY2F0
aW9uKSB7CiAKIAkJaW50IGxlbmd0aCA9IHRoaXMudHlwZVJlZmVyZW5jZXMubGVuZ3RoOwogCQlS
ZWZlcmVuY2VCaW5kaW5nW10gaW50ZXJzZWN0aW5nVHlwZXMgPSBuZXcgUmVmZXJlbmNlQmluZGlu
Z1tsZW5ndGhdOwpAQCAtODAsNyArODIsNyBAQAogCQluZXh0VHlwZToKIAkJZm9yIChpbnQgaSA9
IDA7IGkgPCBsZW5ndGg7IGkrKykgewogCQkJZmluYWwgVHlwZVJlZmVyZW5jZSB0eXBlUmVmZXJl
bmNlID0gdGhpcy50eXBlUmVmZXJlbmNlc1tpXTsKLQkJCVR5cGVCaW5kaW5nIHR5cGUgPSB0eXBl
UmVmZXJlbmNlLnJlc29sdmVUeXBlKHNjb3BlLCBjaGVja0JvdW5kcyk7CisJCQlUeXBlQmluZGlu
ZyB0eXBlID0gdHlwZVJlZmVyZW5jZS5yZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMsIGxv
Y2F0aW9uKTsKIAkJCWlmICh0eXBlID09IG51bGwgfHwgKCh0eXBlLnRhZ0JpdHMgJiBUYWdCaXRz
Lkhhc01pc3NpbmdUeXBlKSAhPSAwKSkgewogCQkJCWhhc0Vycm9yID0gdHJ1ZTsKIAkJCQljb250
aW51ZTsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvSmF2YWRvYy5qYXZhIGIvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9K
YXZhZG9jLmphdmEKaW5kZXggZjdjN2I3Mi4uMjZmNDI2ZiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2Fz
dC9KYXZhZG9jLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jLmphdmEKQEAgLTEsNSArMSw1
IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEz
IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0
IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhp
cyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZh
aWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4w
CiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJs
ZSBhdApAQCAtMTMsNiArMTMsNyBAQAogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwg
QVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmli
dXRpb24gZm9yCiAgKgkJCQkJCQkJQnVnIDQwMDg3NCAtIFsxLjhdW2NvbXBpbGVyXSBJbmZlcmVu
Y2UgaW5mcmFzdHJ1Y3R1cmUgc2hvdWxkIGV2b2x2ZSB0byBtZWV0IEpMUzggMTgueCAoUGFydCBH
IG9mIEpTUjMzNSBzcGVjKQorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFs
dWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAog
ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5hc3Q7CiAKQEAgLTYxNCw3ICs2MTUsNyBAQAogCQkJCS8vIFNjYW4gYWxsIEBw
YXJhbSB0YWdzCiAJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBwYXJhbVR5cGVQYXJhbUxlbmd0aDsg
aSsrKSB7CiAJCQkJCUphdmFkb2NTaW5nbGVUeXBlUmVmZXJlbmNlIHBhcmFtID0gdGhpcy5wYXJh
bVR5cGVQYXJhbWV0ZXJzW2ldOwotCQkJCQlUeXBlQmluZGluZyBwYXJhbUJpbmRpbmQgPSBwYXJh
bS5pbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlKTsKKwkJCQkJVHlwZUJpbmRpbmcgcGFyYW1CaW5k
aW5kID0gcGFyYW0uaW50ZXJuYWxSZXNvbHZlVHlwZShzY29wZSwgMCk7CiAJCQkJCWlmIChwYXJh
bUJpbmRpbmQgIT0gbnVsbCAmJiBwYXJhbUJpbmRpbmQuaXNWYWxpZEJpbmRpbmcoKSkgewogCQkJ
CQkJaWYgKHBhcmFtQmluZGluZC5pc1R5cGVWYXJpYWJsZSgpKSB7CiAJCQkJCQkJLy8gaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5Nzg4OApkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9KYXZhZG9jSW1wbGljaXRUeXBlUmVmZXJlbmNlLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
YXN0L0phdmFkb2NJbXBsaWNpdFR5cGVSZWZlcmVuY2UuamF2YQppbmRleCBjZmIxMzljLi5mMWFk
ODE4IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0phdmFkb2NJbXBsaWNpdFR5cGVSZWZlcmVuY2Uu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L0phdmFkb2NJbXBsaWNpdFR5cGVSZWZlcmVuY2UuamF2YQpA
QCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTIgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJl
c2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBh
cmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBM
aWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQg
aXMgYXZhaWxhYmxlIGF0CkBAIC0xMSw2ICsxMSw4IEBACiAgKiAKICAqIENvbnRyaWJ1dG9yczoK
ICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24K
KyAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJCQkJCUJ1
ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJp
YnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNr
YWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3Q7CiAKQEAgLTYzLDcgKzY1
LDcgQEAKIAkgKiBSZXNvbHZlcyB0eXBlIG9uIGEgQmxvY2ssIENsYXNzIG9yIENvbXBpbGF0aW9u
VW5pdCBzY29wZS4KIAkgKiBXZSBuZWVkIHRvIG1vZGlmeSByZXNvbGluZyBiZWhhdmlvciB0byBh
dm9pZCByYXcgdHlwZSBjcmVhdGlvbi4KIAkgKi8KLQlwcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50
ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSkgeworCXByb3RlY3RlZCBUeXBlQmluZGluZyBp
bnRlcm5hbFJlc29sdmVUeXBlKFNjb3BlIHNjb3BlLCBpbnQgbG9jYXRpb24pIHsKIAkJLy8gaGFu
ZGxlIHRoZSBlcnJvciBoZXJlCiAJCXRoaXMuY29uc3RhbnQgPSBDb25zdGFudC5Ob3RBQ29uc3Rh
bnQ7CiAJCWlmICh0aGlzLnJlc29sdmVkVHlwZSAhPSBudWxsKSB7IC8vIGlzIGEgc2hhcmVkIHR5
cGUgcmVmZXJlbmNlIHdoaWNoIHdhcyBhbHJlYWR5IHJlc29sdmVkCmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvYXN0L0phdmFkb2NRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0ph
dmFkb2NRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKaW5kZXggZWU3ZGY4OC4uNDMxZWExZSAx
MDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZh
CisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9hc3QvSmF2YWRvY1F1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQpAQCAt
MSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTAgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIw
MDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2Vy
dmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUg
bWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNl
bnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMg
YXZhaWxhYmxlIGF0CkBAIC03LDYgKzcsOCBAQAogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAg
ICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqICAg
ICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJCQkJCUJ1ZyA0Mjk5
NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBv
ZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3Q7CiAKQEAgLTc0LDExICs3NiwxMSBA
QAogCXByb3RlY3RlZCB2b2lkIHJlcG9ydEludmFsaWRUeXBlKFNjb3BlIHNjb3BlKSB7CiAJCXNj
b3BlLnByb2JsZW1SZXBvcnRlcigpLmphdmFkb2NJbnZhbGlkVHlwZSh0aGlzLCB0aGlzLnJlc29s
dmVkVHlwZSwgc2NvcGUuZ2V0RGVjbGFyYXRpb25Nb2RpZmllcnMoKSk7CiAJfQotCXB1YmxpYyBU
eXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9ja1Njb3BlIGJsb2NrU2NvcGUsIGJvb2xlYW4gY2hl
Y2tCb3VuZHMpIHsKKwlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBi
bG9ja1Njb3BlLCBib29sZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9jYXRpb24pIHsKIAkJcmV0dXJu
IGludGVybmFsUmVzb2x2ZVR5cGUoYmxvY2tTY29wZSwgY2hlY2tCb3VuZHMpOwogCX0KIAotCXB1
YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIGNsYXNzU2NvcGUpIHsKKwlw
dWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQ2xhc3NTY29wZSBjbGFzc1Njb3BlLCBpbnQg
bG9jYXRpb24pIHsKIAkJcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoY2xhc3NTY29wZSwgZmFs
c2UpOwogCX0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jU2luZ2xlVHlwZVJlZmVy
ZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhCmlu
ZGV4IDE5YWVkMDguLjJmMDNhOGIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvSmF2YWRvY1Npbmds
ZVR5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0phdmFkb2NTaW5nbGVUeXBlUmVm
ZXJlbmNlLmphdmEKQEAgLTEsMTIgKzEsMTggQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0g
KiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMDkgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisg
KiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAg
KiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcg
bWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBF
Y2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlz
dHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3Jn
L2xlZ2FsL2VwbC12MTAuaHRtbAogICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2Yg
YW4gZWFybHktZHJhZnQgc3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAq
IENvbW11bml0eSBQcm9jZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGlu
ZyBhbmQgZXZhbHVhdGlvbiBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBh
dGlibGUgd2l0aCBhbnkgc3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgorICoKICAqIENvbnRyaWJ1
dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50
YXRpb24KKyAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJ
CQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9u
IGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiov
CiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3Q7CiAKQEAgLTM2
LDcgKzQyLDcgQEAKIAkvKgogCSAqIFdlIG5lZWQgdG8gbW9kaWZ5IHJlc29sdmluZyBiZWhhdmlv
ciB0byBoYW5kbGUgcGFja2FnZSByZWZlcmVuY2VzCiAJICovCi0JcHJvdGVjdGVkIFR5cGVCaW5k
aW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2NvcGUpIHsKKwlwcm90ZWN0ZWQgVHlwZUJp
bmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSwgaW50IGxvY2F0aW9uKSB7CiAJ
CS8vIGhhbmRsZSB0aGUgZXJyb3IgaGVyZQogCQl0aGlzLmNvbnN0YW50ID0gQ29uc3RhbnQuTm90
QUNvbnN0YW50OwogCQlpZiAodGhpcy5yZXNvbHZlZFR5cGUgIT0gbnVsbCkgeyAvLyBpcyBhIHNo
YXJlZCB0eXBlIHJlZmVyZW5jZSB3aGljaCB3YXMgYWxyZWFkeSByZXNvbHZlZApkaWZmIC0tZ2l0
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9OdWxsQW5ub3RhdGlvbk1hdGNoaW5nLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L051
bGxBbm5vdGF0aW9uTWF0Y2hpbmcuamF2YQppbmRleCA2Mjk0Y2VkLi4wNDFhMmQ0IDEwMDY0NAot
LS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvYXN0L051bGxBbm5vdGF0aW9uTWF0Y2hpbmcuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
YXN0L051bGxBbm5vdGF0aW9uTWF0Y2hpbmcuamF2YQpAQCAtNDQsMTkgKzQ0LDIyIEBACiAgKi8K
IHB1YmxpYyBjbGFzcyBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nIHsKIAkKLQlwdWJsaWMgc3RhdGlj
IGZpbmFsIE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcgTlVMTF9BTk5PVEFUSU9OU19PSyA9IG5ldyBO
dWxsQW5ub3RhdGlvbk1hdGNoaW5nKDAsIG51bGwpOwotCXB1YmxpYyBzdGF0aWMgZmluYWwgTnVs
bEFubm90YXRpb25NYXRjaGluZyBOVUxMX0FOTk9UQVRJT05TX1VOQ0hFQ0tFRCA9IG5ldyBOdWxs
QW5ub3RhdGlvbk1hdGNoaW5nKDEsIG51bGwpOwotCXB1YmxpYyBzdGF0aWMgZmluYWwgTnVsbEFu
bm90YXRpb25NYXRjaGluZyBOVUxMX0FOTk9UQVRJT05TX01JU01BVENIID0gbmV3IE51bGxBbm5v
dGF0aW9uTWF0Y2hpbmcoMiwgbnVsbCk7CisJcHVibGljIHN0YXRpYyBmaW5hbCBOdWxsQW5ub3Rh
dGlvbk1hdGNoaW5nIE5VTExfQU5OT1RBVElPTlNfT0sgPSBuZXcgTnVsbEFubm90YXRpb25NYXRj
aGluZygwLCBGbG93SW5mby5VTktOT1dOLCBudWxsKTsKKwlwdWJsaWMgc3RhdGljIGZpbmFsIE51
bGxBbm5vdGF0aW9uTWF0Y2hpbmcgTlVMTF9BTk5PVEFUSU9OU19PS19OT05OVUxMID0gbmV3IE51
bGxBbm5vdGF0aW9uTWF0Y2hpbmcoMCwgRmxvd0luZm8uTk9OX05VTEwsIG51bGwpOworCXB1Ymxp
YyBzdGF0aWMgZmluYWwgTnVsbEFubm90YXRpb25NYXRjaGluZyBOVUxMX0FOTk9UQVRJT05TX1VO
Q0hFQ0tFRCA9IG5ldyBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nKDEsIEZsb3dJbmZvLlVOS05PV04s
IG51bGwpOworCXB1YmxpYyBzdGF0aWMgZmluYWwgTnVsbEFubm90YXRpb25NYXRjaGluZyBOVUxM
X0FOTk9UQVRJT05TX01JU01BVENIID0gbmV3IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcoMiwgRmxv
d0luZm8uVU5LTk9XTiwgbnVsbCk7CiAKIAkvKiogMCA9IE9LLCAxID0gdW5jaGVja2VkLCAyID0g
ZGVmaW5pdGUgbWlzbWF0Y2ggKi8KIAlwdWJsaWMgZmluYWwgaW50IHNldmVyaXR5OwogCQogCS8q
KiBJZiBub24tbnVsbCB0aGlzIGZpZWxkIGhvbGRzIHRoZSBzdXBlcnR5cGUgb2YgdGhlIHByb3Zp
ZGVkIHR5cGUgd2hpY2ggd2FzIHVzZWQgZm9yIGRpcmVjdCBtYXRjaGluZy4gKi8KIAlwdWJsaWMg
ZmluYWwgVHlwZUJpbmRpbmcgc3VwZXJUeXBlSGludDsKKwlwdWJsaWMgZmluYWwgaW50IG51bGxT
dGF0dXM7CiAJCi0JcHVibGljIE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcoaW50IHNldmVyaXR5LCBU
eXBlQmluZGluZyBzdXBlclR5cGVIaW50KSB7CisJcHVibGljIE51bGxBbm5vdGF0aW9uTWF0Y2hp
bmcoaW50IHNldmVyaXR5LCBpbnQgbnVsbFN0YXR1cywgVHlwZUJpbmRpbmcgc3VwZXJUeXBlSGlu
dCkgewogCQl0aGlzLnNldmVyaXR5ID0gc2V2ZXJpdHk7CiAJCXRoaXMuc3VwZXJUeXBlSGludCA9
IHN1cGVyVHlwZUhpbnQ7CisJCXRoaXMubnVsbFN0YXR1cyA9IG51bGxTdGF0dXM7CiAJfQogCiAJ
cHVibGljIGJvb2xlYW4gaXNBbnlNaXNtYXRjaCgpICAgICAgeyByZXR1cm4gdGhpcy5zZXZlcml0
eSAhPSAwOyB9CkBAIC05Myw2ICs5Niw4IEBACiAJCQl9IGVsc2UgaWYgKGFubm90YXRpb25TdGF0
dXMuaXNVbmNoZWNrZWQoKSkgewogCQkJCWZsb3dDb250ZXh0LnJlY29yZE51bGxpdHlNaXNtYXRj
aChjdXJyZW50U2NvcGUsIGV4cHJlc3Npb24sIHByb3ZpZGVkVHlwZSwgdmFyLnR5cGUsIG51bGxT
dGF0dXMpOwogCQkJCWhhc1JlcG9ydGVkID0gdHJ1ZTsKKwkJCX0gZWxzZSBpZiAoYW5ub3RhdGlv
blN0YXR1cy5udWxsU3RhdHVzICE9IEZsb3dJbmZvLlVOS05PV04pIHsKKwkJCQlyZXR1cm4gYW5u
b3RhdGlvblN0YXR1cy5udWxsU3RhdHVzOwogCQkJfQogCQl9CiAJCWlmIChsaHNUYWdCaXRzID09
IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGwgJiYgbnVsbFN0YXR1cyAhPSBGbG93SW5mby5OT05f
TlVMTCkgewpAQCAtMTE5LDYgKzEyNCw3IEBACiAJcHVibGljIHN0YXRpYyBOdWxsQW5ub3RhdGlv
bk1hdGNoaW5nIGFuYWx5c2UoVHlwZUJpbmRpbmcgcmVxdWlyZWRUeXBlLCBUeXBlQmluZGluZyBw
cm92aWRlZFR5cGUsIGludCBudWxsU3RhdHVzLCBib29sZWFuIHN0cmljdCkgewogCQlpbnQgc2V2
ZXJpdHkgPSAwOwogCQlUeXBlQmluZGluZyBzdXBlclR5cGVIaW50ID0gbnVsbDsKKwkJTnVsbEFu
bm90YXRpb25NYXRjaGluZyBva1N0YXR1cyA9IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcuTlVMTF9B
Tk5PVEFUSU9OU19PSzsKIAkJaWYgKHJlcXVpcmVkVHlwZSBpbnN0YW5jZW9mIEFycmF5QmluZGlu
ZykgewogCQkJbG9uZ1tdIHJlcXVpcmVkRGltc1RhZ0JpdHMgPSAoKEFycmF5QmluZGluZylyZXF1
aXJlZFR5cGUpLm51bGxUYWdCaXRzUGVyRGltZW5zaW9uOwogCQkJaWYgKHJlcXVpcmVkRGltc1Rh
Z0JpdHMgIT0gbnVsbCkgewpAQCAtMTUwLDYgKzE1Niw4IEBACiAJCQl7CiAJCQkJbG9uZyBwcm92
aWRlZEJpdHMgPSBwcm92aWRlZE51bGxUYWdCaXRzKHByb3ZpZGVkVHlwZSk7CiAJCQkJc2V2ZXJp
dHkgPSBjb21wdXRlTnVsbFByb2JsZW1TZXZlcml0eShyZXF1aXJlZEJpdHMsIHByb3ZpZGVkQml0
cywgbnVsbFN0YXR1cywgc3RyaWN0ICYmIG51bGxTdGF0dXMgPT0gLTEpOworCQkJCWlmIChzZXZl
cml0eSA9PSAwICYmIChwcm92aWRlZEJpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsKSAh
PSAwKQorCQkJCQlva1N0YXR1cyA9IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcuTlVMTF9BTk5PVEFU
SU9OU19PS19OT05OVUxMOwogCQkJfQogCQkJaWYgKHNldmVyaXR5IDwgMikgewogCQkJCVR5cGVC
aW5kaW5nIHByb3ZpZGVkU3VwZXIgPSBwcm92aWRlZFR5cGUuZmluZFN1cGVyVHlwZU9yaWdpbmF0
aW5nRnJvbShyZXF1aXJlZFR5cGUpOwpAQCAtMTYzLDcgKzE3MSw3IEBACiAJCQkJCQkJTnVsbEFu
bm90YXRpb25NYXRjaGluZyBzdGF0dXMgPSBhbmFseXNlKHJlcXVpcmVkQXJndW1lbnRzW2ldLCBw
cm92aWRlZEFyZ3VtZW50c1tpXSwgLTEsIHN0cmljdCk7CiAJCQkJCQkJc2V2ZXJpdHkgPSBNYXRo
Lm1heChzZXZlcml0eSwgc3RhdHVzLnNldmVyaXR5KTsKIAkJCQkJCQlpZiAoc2V2ZXJpdHkgPT0g
MikKLQkJCQkJCQkJcmV0dXJuIG5ldyBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nKHNldmVyaXR5LCBz
dXBlclR5cGVIaW50KTsKKwkJCQkJCQkJcmV0dXJuIG5ldyBOdWxsQW5ub3RhdGlvbk1hdGNoaW5n
KHNldmVyaXR5LCBudWxsU3RhdHVzLCBzdXBlclR5cGVIaW50KTsKIAkJCQkJCX0KIAkJCQkJfQog
CQkJCX0KQEAgLTE3Niw4ICsxODQsOCBAQAogCQkJfQogCQl9CiAJCWlmIChzZXZlcml0eSA9PSAw
KQotCQkJcmV0dXJuIE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcuTlVMTF9BTk5PVEFUSU9OU19PSzsK
LQkJcmV0dXJuIG5ldyBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nKHNldmVyaXR5LCBzdXBlclR5cGVI
aW50KTsKKwkJCXJldHVybiBva1N0YXR1czsKKwkJcmV0dXJuIG5ldyBOdWxsQW5ub3RhdGlvbk1h
dGNoaW5nKHNldmVyaXR5LCBudWxsU3RhdHVzLCBzdXBlclR5cGVIaW50KTsKIAl9CiAKIAkvLyBp
bnRlcnByZXRpbmcgJ3R5cGUnIGFzIGEgcmVxdWlyZWQgdHlwZSwgY29tcHV0ZSB0aGUgcmVxdWly
ZWQgbnVsbCBiaXRzCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1BhcmFtZXRlcml6ZWRRdWFsaWZp
ZWRUeXBlUmVmZXJlbmNlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1BhcmFtZXRlcml6ZWRRdWFsaWZpZWRU
eXBlUmVmZXJlbmNlLmphdmEKaW5kZXggMmYzZmM4YS4uZDdkZWE4NyAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9hc3QvUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQpAQCAtMSw1
ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAs
IDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAs
IDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVk
LiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFk
ZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNl
IHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZh
aWxhYmxlIGF0CkBAIC0xNiw2ICsxNiw3IEBACiAgKgkJCQkJCQkJYnVnIDM5MjA5OSAtIFsxLjhd
W2NvbXBpbGVyXVtudWxsXSBBcHBseSBudWxsIGFubm90YXRpb24gb24gdHlwZXMgZm9yIG51bGwg
YW5hbHlzaXMKICAqCQkJCQkJCQlCdWcgNDE1MDQzIC0gWzEuOF1bbnVsbF0gRm9sbG93LXVwIHJl
IG51bGwgdHlwZSBhbm5vdGF0aW9ucyBhZnRlciBidWcgMzkyMDk5CiAgKgkJCQkJCQkJQnVnIDQx
NjE4MSDigJMgWzEuOF1bY29tcGlsZXJdW251bGxdIEludmFsaWQgYXNzaWdubWVudCBpcyBub3Qg
cmVqZWN0ZWQgYnkgdGhlIGNvbXBpbGVyCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251
bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlE
ZWZhdWx0CiAgKiAgICAgICAgQW5keSBDbGVtZW50IC0gQ29udHJpYnV0aW9ucyBmb3IKICAqICAg
ICAgICAgICAgICAgICAgICAgICAgICBCdWcgMzgzNjI0IC0gWzEuOF1bY29tcGlsZXJdIFJldml2
ZSBjb2RlIGdlbmVyYXRpb24gc3VwcG9ydCBmb3IgdHlwZSBhbm5vdGF0aW9ucyAoZnJvbSBPbGl2
aWVyJ3Mgd29yaykKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpAQCAtMTUwLDcgKzE1MSw3IEBA
CiAgICAgLyoKICAgICAgKiBObyBuZWVkIHRvIGNoZWNrIGZvciByZWZlcmVuY2UgdG8gcmF3IHR5
cGUgcGVyIGNvbnN0cnVjdGlvbgogICAgICAqLwotCXByaXZhdGUgVHlwZUJpbmRpbmcgaW50ZXJu
YWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5kcykgeworCXByaXZh
dGUgVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSwgYm9vbGVhbiBj
aGVja0JvdW5kcywgaW50IGxvY2F0aW9uKSB7CiAJCS8vIGhhbmRsZSB0aGUgZXJyb3IgaGVyZQog
CQl0aGlzLmNvbnN0YW50ID0gQ29uc3RhbnQuTm90QUNvbnN0YW50OwogCQlpZiAoKHRoaXMuYml0
cyAmIEFTVE5vZGUuRGlkUmVzb2x2ZSkgIT0gMCkgeyAvLyBpcyBhIHNoYXJlZCB0eXBlIHJlZmVy
ZW5jZSB3aGljaCB3YXMgYWxyZWFkeSByZXNvbHZlZApAQCAtMTczLDcgKzE3NCw3IEBACiAJCXRo
aXMuYml0cyB8PSBBU1ROb2RlLkRpZFJlc29sdmU7CiAJCVR5cGVCaW5kaW5nIHR5cGUgPSBpbnRl
cm5hbFJlc29sdmVMZWFmVHlwZShzY29wZSwgY2hlY2tCb3VuZHMpOwogCQljcmVhdGVBcnJheVR5
cGUoc2NvcGUpOwotCQlyZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUpOworCQlyZXNvbHZlQW5ub3Rh
dGlvbnMoc2NvcGUsIGxvY2F0aW9uKTsKIAkJaWYgKHRoaXMudHlwZUFyZ3VtZW50cyAhPSBudWxs
KQogCQkJLy8gcmVsZXZhbnQgbnVsbCBhbm5vdGF0aW9ucyBhcmUgb24gdGhlIGlubmVyIG1vc3Qg
dHlwZToKIAkJCWNoZWNrTnVsbENvbnN0cmFpbnRzKHNjb3BlLCB0aGlzLnR5cGVBcmd1bWVudHNb
dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aC0xXSk7IApAQCAtNDIzLDExICs0MjQsMTEgQEAKIAkJ
cmV0dXJuIG91dHB1dDsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxv
Y2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5kcykgewotCSAgICByZXR1cm4gaW50ZXJu
YWxSZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMpOworCXB1YmxpYyBUeXBlQmluZGluZyBy
ZXNvbHZlVHlwZShCbG9ja1Njb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9j
YXRpb24pIHsKKwkgICAgcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91
bmRzLCBsb2NhdGlvbik7CiAJfQotCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFz
c1Njb3BlIHNjb3BlKSB7Ci0JICAgIHJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBm
YWxzZSk7CisJcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUs
IGludCBsb2NhdGlvbikgeworCSAgICByZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZShzY29wZSwg
ZmFsc2UsIGxvY2F0aW9uKTsKIAl9CiAJcHVibGljIHZvaWQgdHJhdmVyc2UoQVNUVmlzaXRvciB2
aXNpdG9yLCBCbG9ja1Njb3BlIHNjb3BlKSB7CiAJCWlmICh2aXNpdG9yLnZpc2l0KHRoaXMsIHNj
b3BlKSkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9QYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJl
ZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9QYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5j
ZS5qYXZhCmluZGV4IDNjNTA1MzUuLmNjYTNmNWUgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUGFy
YW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1BhcmFt
ZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmphdmEKQEAgLTE2LDYgKzE2LDcgQEAKICAqCQkJ
CQkJCQlCdWcgNDIwODk0IC0gQ2xhc3NDYXN0RXhjZXB0aW9uIGluIERlZmF1bHRCaW5kaW5nUmVz
b2x2ZXIucmVzb2x2ZVR5cGUoVHlwZSkKICAqCQkJCQkJCQlidWcgMzkyMDk5IC0gWzEuOF1bY29t
cGlsZXJdW251bGxdIEFwcGx5IG51bGwgYW5ub3RhdGlvbiBvbiB0eXBlcyBmb3IgbnVsbCBhbmFs
eXNpcwogICoJCQkJCQkJCUJ1ZyA0MTUwNDMgLSBbMS44XVtudWxsXSBGb2xsb3ctdXAgcmUgbnVs
bCB0eXBlIGFubm90YXRpb25zIGFmdGVyIGJ1ZyAzOTIwOTkKKyAqCQkJCQkJCQlCdWcgNDI5OTU4
IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2Yg
QE5vbk51bGxCeURlZmF1bHQKICAqICAgICAgICBBbmR5IENsZW1lbnQgLSBDb250cmlidXRpb25z
IGZvcgogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyAzODM2MjQgLSBbMS44XVtjb21w
aWxlcl0gUmV2aXZlIGNvZGUgZ2VuZXJhdGlvbiBzdXBwb3J0IGZvciB0eXBlIGFubm90YXRpb25z
IChmcm9tIE9saXZpZXIncyB3b3JrKQogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCkBAIC0xMjMs
NyArMTI0LDcgQEAKICAgICAvKgogICAgICAqIE5vIG5lZWQgdG8gY2hlY2sgZm9yIHJlZmVyZW5j
ZSB0byByYXcgdHlwZSBwZXIgY29uc3RydWN0aW9uCiAgICAgICovCi0JcHJpdmF0ZSBUeXBlQmlu
ZGluZyBpbnRlcm5hbFJlc29sdmVUeXBlKFNjb3BlIHNjb3BlLCBSZWZlcmVuY2VCaW5kaW5nIGVu
Y2xvc2luZ1R5cGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMpIHsKKwlwcml2YXRlIFR5cGVCaW5kaW5n
IGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2NvcGUsIFJlZmVyZW5jZUJpbmRpbmcgZW5jbG9z
aW5nVHlwZSwgYm9vbGVhbiBjaGVja0JvdW5kcywgaW50IGxvY2F0aW9uKSB7CiAJCS8vIGhhbmRs
ZSB0aGUgZXJyb3IgaGVyZQogCQl0aGlzLmNvbnN0YW50ID0gQ29uc3RhbnQuTm90QUNvbnN0YW50
OwogCQlpZiAoKHRoaXMuYml0cyAmIEFTVE5vZGUuRGlkUmVzb2x2ZSkgIT0gMCkgeyAvLyBpcyBh
IHNoYXJlZCB0eXBlIHJlZmVyZW5jZSB3aGljaCB3YXMgYWxyZWFkeSByZXNvbHZlZApAQCAtMTQ5
LDE4ICsxNTAsMTggQEAKIAkJLy8gaGFuZGxlIHRocmVlIGRpZmZlcmVudCBvdXRjb21lczoKIAkJ
aWYgKHR5cGUgPT0gbnVsbCkgewogCQkJdGhpcy5yZXNvbHZlZFR5cGUgPSBjcmVhdGVBcnJheVR5
cGUoc2NvcGUsIHRoaXMucmVzb2x2ZWRUeXBlKTsKLQkJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29w
ZSk7CisJCQlyZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUsIDApOyAvLyBubyBkZWZhdWx0TnVsbG5l
c3MgZm9yIGJ1Z2d5IHR5cGUKIAkJCWNoZWNrTnVsbENvbnN0cmFpbnRzKHNjb3BlLCB0aGlzLnR5
cGVBcmd1bWVudHMpOwotCQkJcmV0dXJuIG51bGw7CQkJCQkJCS8vIG5vIHVzZWZ1bCB0eXBlLCBi
dXQgc3RpbGwgY2FwdHVyZWQgZGltZW5zaW9ucyBpbnRvIHRoaXMucmVzb2x2ZWRUeXBlCisJCQly
ZXR1cm4gbnVsbDsJCQkJCQkJLy8gKDEpIG5vIHVzZWZ1bCB0eXBlLCBidXQgc3RpbGwgY2FwdHVy
ZWQgZGltZW5zaW9ucyBpbnRvIHRoaXMucmVzb2x2ZWRUeXBlCiAJCX0gZWxzZSB7CiAJCQl0eXBl
ID0gY3JlYXRlQXJyYXlUeXBlKHNjb3BlLCB0eXBlKTsKIAkJCWlmICghdGhpcy5yZXNvbHZlZFR5
cGUuaXNWYWxpZEJpbmRpbmcoKSAmJiB0aGlzLnJlc29sdmVkVHlwZS5kaW1lbnNpb25zKCkgPT0g
dHlwZS5kaW1lbnNpb25zKCkpIHsKLQkJCQlyZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUpOworCQkJ
CXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSwgMCk7IC8vIG5vIGRlZmF1bHROdWxsbmVzcyBmb3Ig
YnVnZ3kgdHlwZQogCQkJCWNoZWNrTnVsbENvbnN0cmFpbnRzKHNjb3BlLCB0aGlzLnR5cGVBcmd1
bWVudHMpOwotCQkJCXJldHVybiB0eXBlOwkJCQkJCS8vIGZvdW5kIHNvbWUgZXJyb3IsIGJ1dCBj
b3VsZCByZWNvdmVyIHVzZWZ1bCB0eXBlIChsaWtlIGNsb3Nlc3RNYXRjaCkKKwkJCQlyZXR1cm4g
dHlwZTsJCQkJCQkvLyAoMikgZm91bmQgc29tZSBlcnJvciwgYnV0IGNvdWxkIHJlY292ZXIgdXNl
ZnVsIHR5cGUgKGxpa2UgY2xvc2VzdE1hdGNoKQogCQkJfSBlbHNlIHsKLQkJCQl0aGlzLnJlc29s
dmVkVHlwZSA9IHR5cGU7IAkvLyBubyBjb21wbGFpbnQsIGtlZXAgZnVsbHkgcmVzb2x2ZWQgdHlw
ZSAoaW5jbC4gZGltZW5zaW9ucykKLQkJCQlyZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUpOworCQkJ
CXRoaXMucmVzb2x2ZWRUeXBlID0gdHlwZTsgCQkJLy8gKDMpIG5vIGNvbXBsYWludCwga2VlcCBm
dWxseSByZXNvbHZlZCB0eXBlIChpbmNsLiBkaW1lbnNpb25zKQorCQkJCXJlc29sdmVBbm5vdGF0
aW9ucyhzY29wZSwgbG9jYXRpb24pOwogCQkJCWNoZWNrTnVsbENvbnN0cmFpbnRzKHNjb3BlLCB0
aGlzLnR5cGVBcmd1bWVudHMpOwogCQkJCXJldHVybiB0aGlzLnJlc29sdmVkVHlwZTsgLy8gcGlj
ayB1cCBhbnkgYW5ub3RhdGVkIHR5cGUuCiAJCQl9CkBAIC0zNTUsMTYgKzM1NiwxNiBAQAogCQly
ZXR1cm4gb3V0cHV0OwogCX0KIAotCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9j
a1Njb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzKSB7Ci0JICAgIHJldHVybiBpbnRlcm5h
bFJlc29sdmVUeXBlKHNjb3BlLCBudWxsLCBjaGVja0JvdW5kcyk7CisJcHVibGljIFR5cGVCaW5k
aW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMsIGlu
dCBsb2NhdGlvbikgeworCSAgICByZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZShzY29wZSwgbnVs
bCwgY2hlY2tCb3VuZHMsIGxvY2F0aW9uKTsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVz
b2x2ZVR5cGUoQ2xhc3NTY29wZSBzY29wZSkgewotCSAgICByZXR1cm4gaW50ZXJuYWxSZXNvbHZl
VHlwZShzY29wZSwgbnVsbCwgZmFsc2UgLypubyBib3VuZHMgY2hlY2sgaW4gY2xhc3NTY29wZSov
KTsKKwlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQ2xhc3NTY29wZSBzY29wZSwgaW50
IGxvY2F0aW9uKSB7CisJICAgIHJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBudWxs
LCBmYWxzZSAvKm5vIGJvdW5kcyBjaGVjayBpbiBjbGFzc1Njb3BlKi8sIGxvY2F0aW9uKTsKIAl9
CiAKIAlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGVFbmNsb3NpbmcoQmxvY2tTY29wZSBz
Y29wZSwgUmVmZXJlbmNlQmluZGluZyBlbmNsb3NpbmdUeXBlKSB7Ci0JICAgIHJldHVybiBpbnRl
cm5hbFJlc29sdmVUeXBlKHNjb3BlLCBlbmNsb3NpbmdUeXBlLCB0cnVlLypjaGVjayBib3VuZHMq
Lyk7CisJICAgIHJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBlbmNsb3NpbmdUeXBl
LCB0cnVlLypjaGVjayBib3VuZHMqLywgMCk7CiAJfQogCiAJcHVibGljIHZvaWQgdHJhdmVyc2Uo
QVNUVmlzaXRvciB2aXNpdG9yLCBCbG9ja1Njb3BlIHNjb3BlKSB7CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvYXN0L1NpbmdsZVR5cGVSZWZlcmVuY2UuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvU2luZ2xlVHlwZVJl
ZmVyZW5jZS5qYXZhCmluZGV4IDViMzM2MGIuLjliNzY0NWQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9h
c3QvU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvU2luZ2xlVHlwZVJl
ZmVyZW5jZS5qYXZhCkBAIC0xMyw2ICsxMyw3IEBACiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0g
aW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAgU3RlcGhhbiBIZXJybWFubiAt
IENvbnRyaWJ1dGlvbiBmb3IKICAqCQkJCQkJCQlCdWcgMzkyMjM4IC0gWzEuOF1bY29tcGlsZXJd
W251bGxdIERldGVjdCBzZW1hbnRpY2FsbHkgaW52YWxpZCBudWxsIHR5cGUgYW5ub3RhdGlvbnMK
KyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRM
b2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0Owog
CkBAIC04Miw3ICs4Myw3IEBACiAJCXRoaXMucmVzb2x2ZWRUeXBlID0gc2NvcGUuZ2V0TWVtYmVy
VHlwZSh0aGlzLnRva2VuLCBlbmNsb3NpbmdUeXBlKTsKIAkJYm9vbGVhbiBoYXNFcnJvciA9IGZh
bHNlOwogCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9
MzkxNTAwCi0JCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSk7CisJCXJlc29sdmVBbm5vdGF0aW9u
cyhzY29wZSwgMCk7IC8vIGRlZmF1bHROdWxsbmVzcyBub3QgcmVsZXZhbnQsIHRoZSBvbmx5IGNh
bGxlciB3aXRoaW4gdGhlIGNvbXBpbGVyOiBRQUUKIAkJVHlwZUJpbmRpbmcgbWVtYmVyVHlwZSA9
IHRoaXMucmVzb2x2ZWRUeXBlOyAvLyBsb2FkIGFmdGVyIHBvc3NpYmxlIHVwZGF0ZSBpbiByZXNv
bHZlQW5ub3RhdGlvbnMoKQogCQlpZiAoIW1lbWJlclR5cGUuaXNWYWxpZEJpbmRpbmcoKSkgewog
CQkJaGFzRXJyb3IgPSB0cnVlOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9UeXBlUmVmZXJlbmNl
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQppbmRleCA4YmExYjQwLi4zMjNh
MmNmIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQpAQCAtMTksNiArMTksNyBAQAogICoJCQkJCQkJCUJ1
ZyA0MTU4NTAgLSBbMS44XSBFbnN1cmUgUnVuSkRUQ29yZVRlc3RzIGNhbiBjb3BlIHdpdGggbnVs
bCBhbm5vdGF0aW9ucyBlbmFibGVkCiAgKgkJCQkJCQkJQnVnIDQxNzI5NSAtIFsxLjhbW251bGxd
IE1hc3NhZ2UgdHlwZSBhbm5vdGF0ZWQgbnVsbCBhbmFseXNpcyB0byBnZWwgd2VsbCB3aXRoIGRl
ZXAgZW5jb2RlZCB0eXBlIGJpbmRpbmdzLgogICoJCQkJCQkJCUJ1ZyA0MjcxNjMgLSBbMS44XVtu
dWxsXSBib2d1cyBlcnJvciAiQ29udHJhZGljdG9yeSBudWxsIHNwZWNpZmljYXRpb24iIG9uIHZh
cmFncworICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVm
YXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgICAgIEFu
ZHkgQ2xlbWVudCAoR29QaXZvdGFsLCBJbmMpIGFjbGVtZW50QGdvcGl2b3RhbC5jb20gLSBDb250
cmlidXRpb25zIGZvcgogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyAzODM2MjQgLSBb
MS44XVtjb21waWxlcl0gUmV2aXZlIGNvZGUgZ2VuZXJhdGlvbiBzdXBwb3J0IGZvciB0eXBlIGFu
bm90YXRpb25zIChmcm9tIE9saXZpZXIncyB3b3JrKQogICogICAgICAgICAgICAgICAgICAgICAg
ICAgIEJ1ZyA0MDkyMzYgLSBbMS44XVtjb21waWxlcl0gVHlwZSBhbm5vdGF0aW9ucyBvbiBpbnRl
cnNlY3Rpb24gY2FzdCB0eXBlcyBkcm9wcGVkIGJ5IGNvZGUgZ2VuZXJhdG9yCkBAIC0zNywxMCAr
MzgsMTMgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuZmxvdy5G
bG93SW5mbzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5D
b21waWxlck9wdGlvbnM7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmltcGwuQ29uc3RhbnQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
Lmxvb2t1cC5Bbm5vdGF0aW9uQmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIubG9va3VwLkFycmF5QmluZGluZzsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQu
aW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0
LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5CbG9ja1Njb3BlOwogaW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuQ2xhc3NTY29wZTsKIGltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkxvY2FsVmFyaWFibGVCaW5kaW5nOwor
aW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuTG9va3VwRW52
aXJvbm1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1
cC5Qcm9ibGVtUmVhc29uczsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGls
ZXIubG9va3VwLlByb2JsZW1SZWZlcmVuY2VCaW5kaW5nOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpk
dC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuUmVmZXJlbmNlQmluZGluZzsKQEAgLTQ0Niw3ICs0
NTAsNyBAQAogICovCiBwdWJsaWMgYWJzdHJhY3QgY2hhciBbXVtdIGdldFR5cGVOYW1lKCkgOwog
Ci1wcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSkg
eworcHJvdGVjdGVkIFR5cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2NvcGUs
IGludCBsb2NhdGlvbikgewogCS8vIGhhbmRsZSB0aGUgZXJyb3IgaGVyZQogCXRoaXMuY29uc3Rh
bnQgPSBDb25zdGFudC5Ob3RBQ29uc3RhbnQ7CiAJaWYgKHRoaXMucmVzb2x2ZWRUeXBlICE9IG51
bGwpIHsgLy8gaXMgYSBzaGFyZWQgdHlwZSByZWZlcmVuY2Ugd2hpY2ggd2FzIGFscmVhZHkgcmVz
b2x2ZWQKQEAgLTQ5NywxMiArNTAxLDEyIEBACiAJCXNjb3BlLnByb2JsZW1SZXBvcnRlcigpLnJh
d1R5cGVSZWZlcmVuY2UodGhpcywgdHlwZSk7CiAJfQogCWlmIChoYXNFcnJvcikgewotCQlyZXNv
bHZlQW5ub3RhdGlvbnMoc2NvcGUpOwkJCisJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSwgMCk7
IC8vIGRvbid0IGFwcGx5IG51bGwgZGVmYXVsdHMgdG8gYnVnZ3kgdHlwZQogCQlyZXR1cm4gdHlw
ZTsKIAl9IGVsc2UgewogCQkvLyBzdG9yZSB0aGUgY29tcHV0ZWQgdHlwZSBvbmx5IGlmIG5vIGVy
cm9yLCBvdGhlcndpc2Uga2VlcCB0aGUgcHJvYmxlbSB0eXBlIGluc3RlYWQKIAkJdGhpcy5yZXNv
bHZlZFR5cGUgPSB0eXBlOwotCQlyZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUpOworCQlyZXNvbHZl
QW5ub3RhdGlvbnMoc2NvcGUsIGxvY2F0aW9uKTsKIAkJcmV0dXJuIHRoaXMucmVzb2x2ZWRUeXBl
OyAvLyBwaWNrIHVwIHZhbHVlIHRoYXQgbWF5IGhhdmUgYmVlbiBjaGFuZ2VkIGluIHJlc29sdmVB
bm5vdGF0aW9ucyguLikKIAl9CiB9CkBAIC01NTMsMTUgKzU1NywyMyBAQAogfQogCiBwdWJsaWMg
VHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0Jv
dW5kcykgewotCXJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlKTsKKwlyZXR1cm4gcmVz
b2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzLCAwKTsKK30KKworcHVibGljIFR5cGVCaW5kaW5n
IHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMsIGludCBs
b2NhdGlvbikgeworCXJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBsb2NhdGlvbik7
CiB9CiAKIHB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3BlKSB7
Ci0JcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUpOworCXJldHVybiByZXNvbHZlVHlw
ZShzY29wZSwgMCk7Cit9CisKK3B1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Nj
b3BlIHNjb3BlLCBpbnQgbG9jYXRpb24pIHsKKwlyZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZShz
Y29wZSwgbG9jYXRpb24pOwogfQogCiBwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGVBcmd1
bWVudChCbG9ja1Njb3BlIGJsb2NrU2NvcGUsIFJlZmVyZW5jZUJpbmRpbmcgZ2VuZXJpY1R5cGUs
IGludCByYW5rKSB7Ci0gICAgcmV0dXJuIHJlc29sdmVUeXBlKGJsb2NrU2NvcGUsIHRydWUgLyog
Y2hlY2sgYm91bmRzKi8pOworICAgIHJldHVybiByZXNvbHZlVHlwZShibG9ja1Njb3BlLCB0cnVl
IC8qIGNoZWNrIGJvdW5kcyovLCBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVBcmd1bWVudCk7
CiB9CiAKIHB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZUFyZ3VtZW50KENsYXNzU2NvcGUg
Y2xhc3NTY29wZSwgUmVmZXJlbmNlQmluZGluZyBnZW5lcmljVHlwZSwgaW50IHJhbmspIHsKQEAg
LTU3NSw3ICs1ODcsNyBAQAogCQkJcmVmLnRhZ0JpdHMgfD0gVGFnQml0cy5QYXVzZUhpZXJhcmNo
eUNoZWNrOwogCQkJcGF1c2VIaWVyYXJjaHlDaGVjayA9IHRydWU7CiAJCX0KLQkgICAgcmV0dXJu
IHJlc29sdmVUeXBlKGNsYXNzU2NvcGUpOworCSAgICByZXR1cm4gcmVzb2x2ZVR5cGUoY2xhc3NT
Y29wZSwgQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlQXJndW1lbnQpOwogCX0gZmluYWxseSB7
CiAJCWlmIChwYXVzZUhpZXJhcmNoeUNoZWNrKSB7CiAJCQlyZWYudGFnQml0cyAmPSB+VGFnQml0
cy5QYXVzZUhpZXJhcmNoeUNoZWNrOwpAQCAtNTg3LDcgKzU5OSw3IEBACiAKIHB1YmxpYyBhYnN0
cmFjdCB2b2lkIHRyYXZlcnNlKEFTVFZpc2l0b3IgdmlzaXRvciwgQ2xhc3NTY29wZSBzY29wZSk7
CiAKLXByb3RlY3RlZCB2b2lkIHJlc29sdmVBbm5vdGF0aW9ucyhTY29wZSBzY29wZSkgeworcHJv
dGVjdGVkIHZvaWQgcmVzb2x2ZUFubm90YXRpb25zKFNjb3BlIHNjb3BlLCBpbnQgbG9jYXRpb24p
IHsKIAlBbm5vdGF0aW9uW11bXSBhbm5vdGF0aW9uc09uRGltZW5zaW9ucyA9IGdldEFubm90YXRp
b25zT25EaW1lbnNpb25zKCk7CiAJaWYgKHRoaXMuYW5ub3RhdGlvbnMgIT0gbnVsbCB8fCBhbm5v
dGF0aW9uc09uRGltZW5zaW9ucyAhPSBudWxsKSB7CiAJCUJsb2NrU2NvcGUgcmVzb2x1dGlvblNj
b3BlID0gU2NvcGUudHlwZUFubm90YXRpb25zUmVzb2x1dGlvblNjb3BlKHNjb3BlKTsKQEAgLTYx
NSw2ICs2MjcsMTcgQEAKIAkJCX0KIAkJfQogCX0KKwlpZiAodGhpcy5yZXNvbHZlZFR5cGUgIT0g
bnVsbAorCQkJJiYgKHRoaXMucmVzb2x2ZWRUeXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRp
b25OdWxsTUFTSykgPT0gMAorCQkJJiYgIXRoaXMucmVzb2x2ZWRUeXBlLmlzVHlwZVZhcmlhYmxl
KCkKKwkJCSYmICF0aGlzLnJlc29sdmVkVHlwZS5pc1dpbGRjYXJkKCkKKwkJCSYmIGxvY2F0aW9u
ICE9IDAgCisJCQkmJiBzY29wZS5oYXNEZWZhdWx0TnVsbG5lc3NGb3IobG9jYXRpb24pKSAKKwl7
CisJCUxvb2t1cEVudmlyb25tZW50IGVudmlyb25tZW50ID0gc2NvcGUuZW52aXJvbm1lbnQoKTsK
KwkJQW5ub3RhdGlvbkJpbmRpbmdbXSBhbm5vdHMgPSBuZXcgQW5ub3RhdGlvbkJpbmRpbmdbXXtl
bnZpcm9ubWVudC5nZXROb25OdWxsQW5ub3RhdGlvbigpfTsKKwkJdGhpcy5yZXNvbHZlZFR5cGUg
PSBlbnZpcm9ubWVudC5jcmVhdGVBbm5vdGF0ZWRUeXBlKHRoaXMucmVzb2x2ZWRUeXBlLCBhbm5v
dHMpOworCX0KIH0KIHB1YmxpYyBpbnQgZ2V0QW5ub3RhdGFibGVMZXZlbHMoKSB7CiAJcmV0dXJu
IDE7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1VuaW9uVHlwZVJlZmVyZW5jZS5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9VbmlvblR5cGVSZWZlcmVuY2UuamF2YQppbmRleCA5NDVkNTUzLi4yMmQ0ZDgwIDEw
MDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L1VuaW9uVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9hc3QvVW5pb25UeXBlUmVmZXJlbmNlLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDExLCAyMDEyIElCTSBDb3Jwb3JhdGlv
biBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDExLCAyMDE0IElCTSBDb3Jwb3JhdGlv
biBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0
aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRo
ZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2Nv
bXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMTEsNiAr
MTEsOCBAQAogICogCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0g
aW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAt
IENvbnRyaWJ1dGlvbiBmb3IKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZh
bHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQK
ICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0OwogCkBAIC01MCwxMyArNTIsMTMgQEAKIAkvKiAobm9uLUphdmFkb2Mp
CiAJICogQHNlZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlR5cGVSZWZl
cmVuY2UjZ2V0VHlwZUJpbmRpbmcob3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxv
b2t1cC5TY29wZSkKIAkgKi8KLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tT
Y29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5kcykgeworCXB1YmxpYyBUeXBlQmluZGluZyBy
ZXNvbHZlVHlwZShCbG9ja1Njb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9j
YXRpb24pIHsKIAkJLy8gcmV0dXJuIHRoZSBsdWIgKGxlYXN0IHVwcGVyIGJvdW5kIG9mIGFsbCB0
eXBlIGJpbmRpbmcpIAogCQlpbnQgbGVuZ3RoID0gdGhpcy50eXBlUmVmZXJlbmNlcy5sZW5ndGg7
CiAJCVR5cGVCaW5kaW5nW10gYWxsRXhjZXB0aW9uVHlwZXMgPSBuZXcgVHlwZUJpbmRpbmdbbGVu
Z3RoXTsKIAkJYm9vbGVhbiBoYXNFcnJvciA9IGZhbHNlOwogCQlmb3IgKGludCBpID0gMDsgaSA8
IGxlbmd0aDsgaSsrKSB7Ci0JCQlUeXBlQmluZGluZyBleGNlcHRpb25UeXBlID0gdGhpcy50eXBl
UmVmZXJlbmNlc1tpXS5yZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMpOworCQkJVHlwZUJp
bmRpbmcgZXhjZXB0aW9uVHlwZSA9IHRoaXMudHlwZVJlZmVyZW5jZXNbaV0ucmVzb2x2ZVR5cGUo
c2NvcGUsIGNoZWNrQm91bmRzLCBsb2NhdGlvbik7CiAJCQlpZiAoZXhjZXB0aW9uVHlwZSA9PSBu
dWxsKSB7CiAJCQkJcmV0dXJuIG51bGw7CiAJCQl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1dp
bGRjYXJkLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1dpbGRjYXJkLmphdmEKaW5kZXggNGJmMDZkMS4uZjA1
ZjU3NCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9XaWxkY2FyZC5qYXZhCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9h
c3QvV2lsZGNhcmQuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ci0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMu
CisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMu
CiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlp
bmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRo
ZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMg
ZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xNiw2ICsxNiw3IEBACiAgKiAg
ICAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IKICAqCQkJCQkJCUJ1ZyA0
MTUwNDMgLSBbMS44XVtudWxsXSBGb2xsb3ctdXAgcmUgbnVsbCB0eXBlIGFubm90YXRpb25zIGFm
dGVyIGJ1ZyAzOTIwOTkKICAqCQkJCQkJCUJ1ZyA0MTcyOTUgLSBbMS44W1tudWxsXSBNYXNzYWdl
IHR5cGUgYW5ub3RhdGVkIG51bGwgYW5hbHlzaXMgdG8gZ2VsIHdlbGwgd2l0aCBkZWVwIGVuY29k
ZWQgdHlwZSBiaW5kaW5ncy4KKyAqCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFs
dWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAog
ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5hc3Q7CiAKQEAgLTY2LDE1ICs2NywxNSBAQAogCQlUeXBlQmluZGluZyBib3Vu
ZFR5cGUgPSBudWxsOwogCQlpZiAodGhpcy5ib3VuZCAhPSBudWxsKSB7CiAJCQlib3VuZFR5cGUg
PSBzY29wZS5raW5kID09IFNjb3BlLkNMQVNTX1NDT1BFCi0JCQkJCT8gdGhpcy5ib3VuZC5yZXNv
bHZlVHlwZSgoQ2xhc3NTY29wZSlzY29wZSkKLQkJCQkJOiB0aGlzLmJvdW5kLnJlc29sdmVUeXBl
KChCbG9ja1Njb3BlKXNjb3BlLCB0cnVlIC8qIGNoZWNrIGJvdW5kcyovKTsKKwkJCQkJPyB0aGlz
LmJvdW5kLnJlc29sdmVUeXBlKChDbGFzc1Njb3BlKXNjb3BlLCBCaW5kaW5nLkRlZmF1bHRMb2Nh
dGlvblR5cGVCb3VuZCkKKwkJCQkJOiB0aGlzLmJvdW5kLnJlc29sdmVUeXBlKChCbG9ja1Njb3Bl
KXNjb3BlLCB0cnVlIC8qIGNoZWNrIGJvdW5kcyovLCBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5
cGVCb3VuZCk7CiAJCQl0aGlzLmJpdHMgfD0gKHRoaXMuYm91bmQuYml0cyAmIEFTVE5vZGUuSGFz
VHlwZUFubm90YXRpb25zKTsKIAkJCWlmIChib3VuZFR5cGUgPT0gbnVsbCkgewogCQkJCXJldHVy
biBudWxsOwogCQkJfQogCQl9CiAJCXRoaXMucmVzb2x2ZWRUeXBlID0gc2NvcGUuZW52aXJvbm1l
bnQoKS5jcmVhdGVXaWxkY2FyZChnZW5lcmljVHlwZSwgcmFuaywgYm91bmRUeXBlLCBudWxsIC8q
bm8gZXh0cmEgYm91bmQqLywgdGhpcy5raW5kKTsKLQkJcmVzb2x2ZUFubm90YXRpb25zKHNjb3Bl
KTsKKwkJcmVzb2x2ZUFubm90YXRpb25zKHNjb3BlLCAwKTsgLy8gbm8gZGVmYXVsdE51bGxuZXNz
IGZvciB3aWxkY2FyZHMKIAkJaWYgKGJvdW5kVHlwZSAhPSBudWxsICYmIGJvdW5kVHlwZS5oYXNO
dWxsVHlwZUFubm90YXRpb25zKCkgJiYgdGhpcy5yZXNvbHZlZFR5cGUuaGFzTnVsbFR5cGVBbm5v
dGF0aW9ucygpKSB7CiAJCQlpZiAoKChib3VuZFR5cGUudGFnQml0cyB8IHRoaXMucmVzb2x2ZWRU
eXBlLnRhZ0JpdHMpICYgVGFnQml0cy5Bbm5vdGF0aW9uTnVsbE1BU0spID09IFRhZ0JpdHMuQW5u
b3RhdGlvbk51bGxNQVNLKSB7IC8vIGFyZSBib3RoIHNldD8KIAkJCQlBbm5vdGF0aW9uIGFubm90
YXRpb24gPSB0aGlzLmJvdW5kLmZpbmRBbm5vdGF0aW9uKGJvdW5kVHlwZS50YWdCaXRzICYgVGFn
Qml0cy5Bbm5vdGF0aW9uTnVsbE1BU0spOwpAQCAtMTA2LDI3ICsxMDcsMjcgQEAKIAl9CiAKIAkv
LyBvbmx5IGludm9rZWQgZm9yIGltcHJvdmluZyByZXNpbGllbmNlIHdoZW4gdW5hYmxlIHRvIGJp
bmQgZ2VuZXJpYyB0eXBlIGZyb20gcGFyYW1ldGVyaXplZCByZWZlcmVuY2UKLQlwdWJsaWMgVHlw
ZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5k
cykgeworCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9ja1Njb3BlIHNjb3BlLCBi
b29sZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9jYXRpb24pIHsKIAkJaWYgKHRoaXMuYm91bmQgIT0g
bnVsbCkgewotCQkJdGhpcy5ib3VuZC5yZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMpOwor
CQkJdGhpcy5ib3VuZC5yZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMsIEJpbmRpbmcuRGVm
YXVsdExvY2F0aW9uVHlwZUJvdW5kKTsKIAkJCXRoaXMuYml0cyB8PSAodGhpcy5ib3VuZC5iaXRz
ICYgQVNUTm9kZS5IYXNUeXBlQW5ub3RhdGlvbnMpOwogCQl9CiAJCXJldHVybiBudWxsOwogCX0K
IAkvLyBvbmx5IGludm9rZWQgZm9yIGltcHJvdmluZyByZXNpbGllbmNlIHdoZW4gdW5hYmxlIHRv
IGJpbmQgZ2VuZXJpYyB0eXBlIGZyb20gcGFyYW1ldGVyaXplZCByZWZlcmVuY2UKLQlwdWJsaWMg
VHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQ2xhc3NTY29wZSBzY29wZSkgeworCXB1YmxpYyBUeXBl
QmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3BlLCBpbnQgbG9jYXRpb24pIHsKIAkJ
aWYgKHRoaXMuYm91bmQgIT0gbnVsbCkgewotCQkJdGhpcy5ib3VuZC5yZXNvbHZlVHlwZShzY29w
ZSk7CisJCQl0aGlzLmJvdW5kLnJlc29sdmVUeXBlKHNjb3BlLCBCaW5kaW5nLkRlZmF1bHRMb2Nh
dGlvblR5cGVCb3VuZCk7CiAJCQl0aGlzLmJpdHMgfD0gKHRoaXMuYm91bmQuYml0cyAmIEFTVE5v
ZGUuSGFzVHlwZUFubm90YXRpb25zKTsKIAkJfQogCQlyZXR1cm4gbnVsbDsKIAl9CiAJcHVibGlj
IFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlQXJndW1lbnQoQmxvY2tTY29wZSBibG9ja1Njb3BlLCBS
ZWZlcmVuY2VCaW5kaW5nIGdlbmVyaWNUeXBlLCBpbnQgcmFuaykgewotCSAgICByZXR1cm4gaW50
ZXJuYWxSZXNvbHZlVHlwZShibG9ja1Njb3BlLCBnZW5lcmljVHlwZSwgcmFuayk7CisJICAgIHJl
dHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKGJsb2NrU2NvcGUsIGdlbmVyaWNUeXBlLCByYW5rKTsg
Ly8gbm8gZGVmYXVsdE51bGxuZXNzIGZvciB3aWxkY2FyZHMKIAl9CiAKIAlwdWJsaWMgVHlwZUJp
bmRpbmcgcmVzb2x2ZVR5cGVBcmd1bWVudChDbGFzc1Njb3BlIGNsYXNzU2NvcGUsIFJlZmVyZW5j
ZUJpbmRpbmcgZ2VuZXJpY1R5cGUsIGludCByYW5rKSB7Ci0JICAgIHJldHVybiBpbnRlcm5hbFJl
c29sdmVUeXBlKGNsYXNzU2NvcGUsIGdlbmVyaWNUeXBlLCByYW5rKTsKKwkgICAgcmV0dXJuIGlu
dGVybmFsUmVzb2x2ZVR5cGUoY2xhc3NTY29wZSwgZ2VuZXJpY1R5cGUsIHJhbmspOyAvLyBubyBk
ZWZhdWx0TnVsbG5lc3MgZm9yIHdpbGRjYXJkcwogCX0KIAogCXB1YmxpYyB2b2lkIHRyYXZlcnNl
KEFTVFZpc2l0b3IgdmlzaXRvciwgQmxvY2tTY29wZSBzY29wZSkgewpkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2NsYXNzZm10L05vbk51bGxEZWZhdWx0QXdhcmVUeXBlQW5ub3RhdGlvbldhbGtlci5qYXZh
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2NsYXNzZm10L05vbk51bGxEZWZhdWx0QXdhcmVUeXBlQW5ub3RhdGlvbldhbGtl
ci5qYXZhCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjZhODkwMmYKLS0tIC9k
ZXYvbnVsbAorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvY2xhc3NmbXQvTm9uTnVsbERlZmF1bHRBd2FyZVR5cGVBbm5v
dGF0aW9uV2Fsa2VyLmphdmEKQEAgLTAsMCArMSwxNTUgQEAKKy8qKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqCisgKiBDb3B5cmlnaHQgKGMpIDIwMTQgR0sgU29mdHdhcmUgQUcuCisgKiBBbGwgcmlnaHRz
IHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCisg
KiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1Ymxp
YyBMaWNlbnNlIHYxLjAKKyAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBh
bmQgaXMgYXZhaWxhYmxlIGF0CisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12
MTAuaHRtbAorICoKKyAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYW4gZWFybHktZHJh
ZnQgc3BlY2lmaWNhdGlvbiBkZXZlbG9wZWQgdW5kZXIgdGhlIEphdmEKKyAqIENvbW11bml0eSBQ
cm9jZXNzIChKQ1ApIGFuZCBpcyBtYWRlIGF2YWlsYWJsZSBmb3IgdGVzdGluZyBhbmQgZXZhbHVh
dGlvbiBwdXJwb3NlcworICogb25seS4gVGhlIGNvZGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBh
bnkgc3BlY2lmaWNhdGlvbiBvZiB0aGUgSkNQLgorICogCisgKiBDb250cmlidXRvcnM6CisgKiAg
ICAgU3RlcGhhbiBIZXJybWFubiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKiovCitwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5jbGFzc2ZtdDsKKworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmNvbXBpbGVy
LkNoYXJPcGVyYXRpb247CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmVudi5JQmluYXJ5QW5ub3RhdGlvbjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIuZW52LklCaW5hcnlFbGVtZW50VmFsdWVQYWlyOworaW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5lbnYuSUJpbmFyeVR5cGVBbm5vdGF0aW9uOworaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuQmluZGluZzsKK2ltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkxvb2t1cEVudmlyb25t
ZW50OworCisvKioKKyAqIEEgdHlwZSBhbm5vdGF0aW9uIHdhbGtlciB0aGF0IGFkZHMgbWlzc2lu
ZyBOb25OdWxsIGFubm90YXRpb25zIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBkZWZhdWx0Lgor
ICovCitwdWJsaWMgY2xhc3MgTm9uTnVsbERlZmF1bHRBd2FyZVR5cGVBbm5vdGF0aW9uV2Fsa2Vy
IGV4dGVuZHMgVHlwZUFubm90YXRpb25XYWxrZXIgeworCisJcHJpdmF0ZSBpbnQgZGVmYXVsdE51
bGxuZXNzOworCXByaXZhdGUgYm9vbGVhbiBhdERlZmF1bHRMb2NhdGlvbjsKKwlwcml2YXRlIGJv
b2xlYW4gbmV4dElzRGVmYXVsdExvY2F0aW9uOworCXByaXZhdGUgYm9vbGVhbiBpc0VtcHR5Owor
CUlCaW5hcnlBbm5vdGF0aW9uIG5vbk51bGxBbm5vdGF0aW9uOworCisJLyoqIENyZWF0ZSBpbml0
aWFsIHdhbGtlciB3aXRoIG5vbi1lbXB0eSB0eXBlIGFubm90YXRpb25zLiAqLworCXB1YmxpYyBO
b25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0
aW9uW10gdHlwZUFubm90YXRpb25zLAorCQkJCQkJaW50IGRlZmF1bHROdWxsbmVzcywgTG9va3Vw
RW52aXJvbm1lbnQgZW52aXJvbm1lbnQpIHsKKwkJc3VwZXIodHlwZUFubm90YXRpb25zKTsKKwkJ
dGhpcy5ub25OdWxsQW5ub3RhdGlvbiA9IGdldE5vbk51bGxBbm5vdGF0aW9uKGVudmlyb25tZW50
KTsKKwkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBkZWZhdWx0TnVsbG5lc3M7CisJfQorCQorCS8q
KiBDcmVhdGUgYW4gaW5pdGlhbCB3YWxrZXIgd2l0aG91dCAncmVhbCcgdHlwZSBhbm5vdGF0aW9u
cywgYnV0IHdpdGggYSBub25udWxsIGRlZmF1bHQuICovCisJcHVibGljIE5vbk51bGxEZWZhdWx0
QXdhcmVUeXBlQW5ub3RhdGlvbldhbGtlcihpbnQgZGVmYXVsdE51bGxuZXNzLCBMb29rdXBFbnZp
cm9ubWVudCBlbnZpcm9ubWVudCkgeworCQl0aGlzKGRlZmF1bHROdWxsbmVzcywgZ2V0Tm9uTnVs
bEFubm90YXRpb24oZW52aXJvbm1lbnQpLCBmYWxzZSk7CisJfQorCisJLyoqIEdldCByZXN0cmlj
dGVkIHdhbGtlciwgc3RpbGwgd2l0aCBub24tZW1wdHkgdHlwZSBhbm5vdGF0aW9ucy4gKi8KKwlO
b25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0
aW9uW10gdHlwZUFubm90YXRpb25zLCBsb25nIG5ld01hdGNoZXMsIGludCBuZXdQYXRoUHRyLAor
CQkJCQkJaW50IGRlZmF1bHROdWxsbmVzcywgSUJpbmFyeUFubm90YXRpb24gbm9uTnVsbEFubm90
YXRpb24sIGJvb2xlYW4gYXREZWZhdWx0TG9jYXRpb24pIHsKKwkJc3VwZXIodHlwZUFubm90YXRp
b25zLCBuZXdNYXRjaGVzLCBuZXdQYXRoUHRyKTsKKwkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBk
ZWZhdWx0TnVsbG5lc3M7CisJCXRoaXMubm9uTnVsbEFubm90YXRpb24gPSBub25OdWxsQW5ub3Rh
dGlvbjsKKwkJdGhpcy5hdERlZmF1bHRMb2NhdGlvbiA9IGF0RGVmYXVsdExvY2F0aW9uOworCX0K
KworCS8qKiBDcmVhdGUgYSByZXN0cmljdGVkIHdhbGtlciB3aXRob3V0ICdyZWFsJyB0eXBlIGFu
bm90YXRpb25zLCBidXQgd2l0aCBhIG5vbm51bGwgZGVmYXVsdC4gKi8KKwlOb25OdWxsRGVmYXVs
dEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXIoaW50IGRlZmF1bHROdWxsbmVzcywgSUJpbmFyeUFu
bm90YXRpb24gbm9uTnVsbEFubm90YXRpb24sIGJvb2xlYW4gYXREZWZhdWx0TG9jYXRpb24pIHsK
KwkJc3VwZXIobnVsbCwgMCwgMCk7CisJCXRoaXMubm9uTnVsbEFubm90YXRpb24gPSBub25OdWxs
QW5ub3RhdGlvbjsKKwkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBkZWZhdWx0TnVsbG5lc3M7CisJ
CXRoaXMuYXREZWZhdWx0TG9jYXRpb24gPSBhdERlZmF1bHRMb2NhdGlvbjsKKwkJdGhpcy5pc0Vt
cHR5ID0gdHJ1ZTsKKwl9CisJCisJcHJpdmF0ZSBzdGF0aWMgSUJpbmFyeUFubm90YXRpb24gZ2V0
Tm9uTnVsbEFubm90YXRpb24oTG9va3VwRW52aXJvbm1lbnQgZW52aXJvbm1lbnQpIHsKKwkJZmlu
YWwgY2hhcltdIG5vbk51bGxBbm5vdGF0aW9uTmFtZSA9IENoYXJPcGVyYXRpb24uY29uY2F0KAor
CQkJCQkJJ0wnLCBDaGFyT3BlcmF0aW9uLmNvbmNhdFdpdGgoZW52aXJvbm1lbnQuZ2V0Tm9uTnVs
bEFubm90YXRpb25OYW1lKCksICcvJyksICc7Jyk7CisJCS8vIGNyZWF0ZSB0aGUgc3ludGhldGlj
IGFubm90YXRpb246CisJCXJldHVybiBuZXcgSUJpbmFyeUFubm90YXRpb24oKSB7CisJCQlAT3Zl
cnJpZGUKKwkJCXB1YmxpYyBjaGFyW10gZ2V0VHlwZU5hbWUoKSB7CisJCQkJcmV0dXJuIG5vbk51
bGxBbm5vdGF0aW9uTmFtZTsKKwkJCX0KKwkJCUBPdmVycmlkZQorCQkJcHVibGljIElCaW5hcnlF
bGVtZW50VmFsdWVQYWlyW10gZ2V0RWxlbWVudFZhbHVlUGFpcnMoKSB7CisJCQkJcmV0dXJuIG51
bGw7CisJCQl9CisJCX07CisJfQorCisJcHJvdGVjdGVkIFR5cGVBbm5vdGF0aW9uV2Fsa2VyIHJl
c3RyaWN0KGxvbmcgbmV3TWF0Y2hlcywgaW50IG5ld1BhdGhQdHIpIHsKKwkJLy8gY29uc2lkZXJz
IG5leHRJc0RlZmF1bHRMb2NhdGlvbiBhcyB0aGUgbmV3IGF0RGVmYXVsdExvY2F0aW9uCisJCXRy
eSB7CisJCQkvLyBkbyB3ZSBoYXZlIGFueSBjaGFuZ2UgYXQgYWxsPworCQkJaWYgKHRoaXMubWF0
Y2hlcyA9PSBuZXdNYXRjaGVzICYmIHRoaXMucGF0aFB0ciA9PSBuZXdQYXRoUHRyICYmIHRoaXMu
YXREZWZhdWx0TG9jYXRpb24gPT0gdGhpcy5uZXh0SXNEZWZhdWx0TG9jYXRpb24pCisJCQkJcmV0
dXJuIHRoaXM7CisJCQkvLyBhcmUgd2UgcnVubmluZyBvdXQgb2YgcmVhbCB0eXBlIGFubm90YXRp
b25zPworCQkJaWYgKG5ld01hdGNoZXMgPT0gMCB8fCB0aGlzLnR5cGVBbm5vdGF0aW9ucyA9PSBu
dWxsIHx8IHRoaXMudHlwZUFubm90YXRpb25zLmxlbmd0aCA9PSAwKQorCQkJCXJldHVybiBuZXcg
Tm9uTnVsbERlZmF1bHRBd2FyZVR5cGVBbm5vdGF0aW9uV2Fsa2VyKHRoaXMuZGVmYXVsdE51bGxu
ZXNzLCB0aGlzLm5vbk51bGxBbm5vdGF0aW9uLCB0aGlzLm5leHRJc0RlZmF1bHRMb2NhdGlvbik7
CisJCQkvLyBwcm9jZWVkIGFzIG5vcm1hbCwgYnV0IHBhc3Mgb24gb3VyIHNwZWNpZmljIGZpZWxk
cywgdG9vOgorCQkJcmV0dXJuIG5ldyBOb25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25X
YWxrZXIodGhpcy50eXBlQW5ub3RhdGlvbnMsIG5ld01hdGNoZXMsIG5ld1BhdGhQdHIsCisJCQkJ
CQkJCQkJCQkJCQkJdGhpcy5kZWZhdWx0TnVsbG5lc3MsIHRoaXMubm9uTnVsbEFubm90YXRpb24s
IHRoaXMubmV4dElzRGVmYXVsdExvY2F0aW9uKTsKKwkJfSBmaW5hbGx5IHsKKwkJCXRoaXMubmV4
dElzRGVmYXVsdExvY2F0aW9uID0gZmFsc2U7IC8vIGV4cGlyZQorCQl9CisJfQorCQorCUBPdmVy
cmlkZQorCXB1YmxpYyBUeXBlQW5ub3RhdGlvbldhbGtlciB0b01ldGhvZFBhcmFtZXRlcihzaG9y
dCBpbmRleCkgeworCQkvLyBkb24ndCBzZXQgbmV4dElzRGVmYXVsdExvY2F0aW9uLCBiZWNhdXNl
IHNpZ25hdHVyZS1sZXZlbCBudWxsbmVzcyBpcyBoYW5kbGVkIGJ5IEltcGxpY2l0TnVsbEFubm90
YXRpb25WZXJpZmllcgorCQlpZiAodGhpcy5pc0VtcHR5KSByZXR1cm4gcmVzdHJpY3QodGhpcy5t
YXRjaGVzLCB0aGlzLnBhdGhQdHIpOworCQlyZXR1cm4gc3VwZXIudG9NZXRob2RQYXJhbWV0ZXIo
aW5kZXgpOworCX0KKworCUBPdmVycmlkZQorCXB1YmxpYyBUeXBlQW5ub3RhdGlvbldhbGtlciB0
b01ldGhvZFJldHVybigpIHsKKwkJLy8gZG9uJ3Qgc2V0IG5leHRJc0RlZmF1bHRMb2NhdGlvbiwg
YmVjYXVzZSBzaWduYXR1cmUtbGV2ZWwgbnVsbG5lc3MgaXMgaGFuZGxlZCBieSBJbXBsaWNpdE51
bGxBbm5vdGF0aW9uVmVyaWZpZXIKKwkJaWYgKHRoaXMuaXNFbXB0eSkgcmV0dXJuIHJlc3RyaWN0
KHRoaXMubWF0Y2hlcywgdGhpcy5wYXRoUHRyKTsKKwkJcmV0dXJuIHN1cGVyLnRvTWV0aG9kUmV0
dXJuKCk7CisJfQorCisJQE92ZXJyaWRlCisJcHVibGljIFR5cGVBbm5vdGF0aW9uV2Fsa2VyIHRv
VHlwZUJvdW5kKHNob3J0IGJvdW5kSW5kZXgpIHsKKwkJdGhpcy5uZXh0SXNEZWZhdWx0TG9jYXRp
b24gPSAodGhpcy5kZWZhdWx0TnVsbG5lc3MgJiBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVC
b3VuZCkgIT0gMDsKKwkJaWYgKHRoaXMuaXNFbXB0eSkgcmV0dXJuIHJlc3RyaWN0KHRoaXMubWF0
Y2hlcywgdGhpcy5wYXRoUHRyKTsKKwkJcmV0dXJuIHN1cGVyLnRvVHlwZUJvdW5kKGJvdW5kSW5k
ZXgpOworCX0KKworCUBPdmVycmlkZQorCXB1YmxpYyBUeXBlQW5ub3RhdGlvbldhbGtlciB0b1R5
cGVQYXJhbWV0ZXJCb3VuZHMoYm9vbGVhbiBpc0NsYXNzVHlwZVBhcmFtZXRlciwgaW50IHBhcmFt
ZXRlclJhbmspIHsKKwkJdGhpcy5uZXh0SXNEZWZhdWx0TG9jYXRpb24gPSAodGhpcy5kZWZhdWx0
TnVsbG5lc3MgJiBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVCb3VuZCkgIT0gMDsKKwkJaWYg
KHRoaXMuaXNFbXB0eSkgcmV0dXJuIHJlc3RyaWN0KHRoaXMubWF0Y2hlcywgdGhpcy5wYXRoUHRy
KTsKKwkJcmV0dXJuIHN1cGVyLnRvVHlwZVBhcmFtZXRlckJvdW5kcyhpc0NsYXNzVHlwZVBhcmFt
ZXRlciwgcGFyYW1ldGVyUmFuayk7CisJfQorCisJQE92ZXJyaWRlCisJcHVibGljIFR5cGVBbm5v
dGF0aW9uV2Fsa2VyIHRvVHlwZUFyZ3VtZW50KGludCByYW5rKSB7CisJCXRoaXMubmV4dElzRGVm
YXVsdExvY2F0aW9uID0gKHRoaXMuZGVmYXVsdE51bGxuZXNzICYgQmluZGluZy5EZWZhdWx0TG9j
YXRpb25UeXBlQXJndW1lbnQpICE9IDA7CisJCWlmICh0aGlzLmlzRW1wdHkpIHJldHVybiByZXN0
cmljdCh0aGlzLm1hdGNoZXMsIHRoaXMucGF0aFB0cik7CisJCXJldHVybiBzdXBlci50b1R5cGVB
cmd1bWVudChyYW5rKTsKKwl9CisKKwlAT3ZlcnJpZGUKKwlwdWJsaWMgVHlwZUFubm90YXRpb25X
YWxrZXIgdG9UeXBlUGFyYW1ldGVyKGJvb2xlYW4gaXNDbGFzc1R5cGVQYXJhbWV0ZXIsIGludCBy
YW5rKSB7CisJCXRoaXMubmV4dElzRGVmYXVsdExvY2F0aW9uID0gKHRoaXMuZGVmYXVsdE51bGxu
ZXNzICYgQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlUGFyYW1ldGVyKSAhPSAwOworCQlpZiAo
dGhpcy5pc0VtcHR5KSByZXR1cm4gcmVzdHJpY3QodGhpcy5tYXRjaGVzLCB0aGlzLnBhdGhQdHIp
OworCQlyZXR1cm4gc3VwZXIudG9UeXBlUGFyYW1ldGVyKGlzQ2xhc3NUeXBlUGFyYW1ldGVyLCBy
YW5rKTsKKwl9CisKKwlAT3ZlcnJpZGUKKwlwdWJsaWMgSUJpbmFyeUFubm90YXRpb25bXSBnZXRB
bm5vdGF0aW9uc0F0Q3Vyc29yKCkgeworCQlJQmluYXJ5QW5ub3RhdGlvbltdIG5vcm1hbEFubm90
YXRpb25zID0gdGhpcy5pc0VtcHR5ID8gbnVsbCA6IHN1cGVyLmdldEFubm90YXRpb25zQXRDdXJz
b3IoKTsKKwkJaWYgKHRoaXMuYXREZWZhdWx0TG9jYXRpb24pIHsKKwkJCWlmIChub3JtYWxBbm5v
dGF0aW9ucyA9PSBudWxsIHx8IG5vcm1hbEFubm90YXRpb25zLmxlbmd0aCA9PSAwKQorCQkJCXJl
dHVybiBuZXcgSUJpbmFyeUFubm90YXRpb25bXSB7IHRoaXMubm9uTnVsbEFubm90YXRpb24gfTsK
KwkJCWludCBsZW4gPSBub3JtYWxBbm5vdGF0aW9ucy5sZW5ndGg7CisJCQlJQmluYXJ5QW5ub3Rh
dGlvbltdIG5ld0Fubm90cyA9IG5ldyBJQmluYXJ5QW5ub3RhdGlvbltsZW4rMV07CisJCQlTeXN0
ZW0uYXJyYXljb3B5KG5vcm1hbEFubm90YXRpb25zLCAwLCBuZXdBbm5vdHMsIDAsIGxlbik7CisJ
CQluZXdBbm5vdHNbbGVuXSA9IHRoaXMubm9uTnVsbEFubm90YXRpb247CisJCQlyZXR1cm4gbmV3
QW5ub3RzOworCQl9CisJCXJldHVybiBub3JtYWxBbm5vdGF0aW9uczsKKwl9Cit9CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvY2xhc3NmbXQvVHlwZUFubm90YXRpb25XYWxrZXIuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9j
bGFzc2ZtdC9UeXBlQW5ub3RhdGlvbldhbGtlci5qYXZhCmluZGV4IGI3OTZkOTkuLjgxYmRiNzYg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9jbGFzc2ZtdC9UeXBlQW5ub3RhdGlvbldhbGtlci5qYXZhCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9jbGFzc2ZtdC9UeXBlQW5ub3RhdGlvbldhbGtlci5qYXZhCkBAIC0xLDUgKzEs
NSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAxMyBHSyBT
b2Z0d2FyZSBBRy4KKyAqIENvcHlyaWdodCAoYykgMjAxMywgMjAxNCBHSyBTb2Z0d2FyZSBBRy4K
ICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWlu
ZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhl
IEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBk
aXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTQ4LDkgKzQ4LDkgQEAKIAkJcHVi
bGljIElCaW5hcnlBbm5vdGF0aW9uW10gZ2V0QW5ub3RhdGlvbnNBdEN1cnNvcigpIHsgcmV0dXJu
IE5PX0FOTk9UQVRJT05TOyB9CiAJfTsKIAkKLQlmaW5hbCBwcml2YXRlIElCaW5hcnlUeXBlQW5u
b3RhdGlvbltdIHR5cGVBbm5vdGF0aW9uczsJLy8gdGhlIGFjdHVhbCBtYXRlcmlhbCB3ZSdyZSBt
YW5hZ2luZyBoZXJlCi0JZmluYWwgcHJpdmF0ZSBsb25nIG1hdGNoZXM7CQkJCQkJCS8vIGJpdCBt
YXNrIG9mIGluZGljZXMgaW50byB0eXBlQW5ub3RhdGlvbnMsIDEgbWVhbnMgYWN0aXZlLCAwIGlz
IGZpbHRlcmVkIGR1cmluZyB0aGUgd2FsawotCWZpbmFsIHByaXZhdGUgaW50IHBhdGhQdHI7CQkJ
CQkJCS8vIHBvaW50ZXIgaW50byB0aGUgdHlwZVBhdGgKKwlmaW5hbCBwcm90ZWN0ZWQgSUJpbmFy
eVR5cGVBbm5vdGF0aW9uW10gdHlwZUFubm90YXRpb25zOwkvLyB0aGUgYWN0dWFsIG1hdGVyaWFs
IHdlJ3JlIG1hbmFnaW5nIGhlcmUKKwlmaW5hbCBwcm90ZWN0ZWQgbG9uZyBtYXRjaGVzOwkJCQkJ
CQkJLy8gYml0IG1hc2sgb2YgaW5kaWNlcyBpbnRvIHR5cGVBbm5vdGF0aW9ucywgMSBtZWFucyBh
Y3RpdmUsIDAgaXMgZmlsdGVyZWQgZHVyaW5nIHRoZSB3YWxrCisJZmluYWwgcHJvdGVjdGVkIGlu
dCBwYXRoUHRyOwkJCQkJCQkJLy8gcG9pbnRlciBpbnRvIHRoZSB0eXBlUGF0aAogCiAJLy8gcHJl
Y29uZGl0aW9uOiBub3QtZW1wdHkgdHlwZUFubm90YXRpb25zCiAJcHVibGljIFR5cGVBbm5vdGF0
aW9uV2Fsa2VyKElCaW5hcnlUeXBlQW5ub3RhdGlvbltdIHR5cGVBbm5vdGF0aW9ucykgewpAQCAt
NTksMTMgKzU5LDEzIEBACiAJVHlwZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0
aW9uW10gdHlwZUFubm90YXRpb25zLCBsb25nIG1hdGNoQml0cykgewogCQl0aGlzKHR5cGVBbm5v
dGF0aW9ucywgbWF0Y2hCaXRzLCAwKTsKIAl9Ci0JcHJpdmF0ZSBUeXBlQW5ub3RhdGlvbldhbGtl
cihJQmluYXJ5VHlwZUFubm90YXRpb25bXSB0eXBlQW5ub3RhdGlvbnMsIGxvbmcgbWF0Y2hCaXRz
LCBpbnQgcGF0aFB0cikgeworCXByb3RlY3RlZCBUeXBlQW5ub3RhdGlvbldhbGtlcihJQmluYXJ5
VHlwZUFubm90YXRpb25bXSB0eXBlQW5ub3RhdGlvbnMsIGxvbmcgbWF0Y2hCaXRzLCBpbnQgcGF0
aFB0cikgewogCQl0aGlzLnR5cGVBbm5vdGF0aW9ucyA9IHR5cGVBbm5vdGF0aW9uczsKIAkJdGhp
cy5tYXRjaGVzID0gbWF0Y2hCaXRzOwogCQl0aGlzLnBhdGhQdHIgPSBwYXRoUHRyOwogCX0KIAot
CXByaXZhdGUgVHlwZUFubm90YXRpb25XYWxrZXIgcmVzdHJpY3QobG9uZyBuZXdNYXRjaGVzLCBp
bnQgbmV3UGF0aFB0cikgeworCXByb3RlY3RlZCBUeXBlQW5ub3RhdGlvbldhbGtlciByZXN0cmlj
dChsb25nIG5ld01hdGNoZXMsIGludCBuZXdQYXRoUHRyKSB7CiAJCWlmICh0aGlzLm1hdGNoZXMg
PT0gbmV3TWF0Y2hlcyAmJiB0aGlzLnBhdGhQdHIgPT0gbmV3UGF0aFB0cikgcmV0dXJuIHRoaXM7
CiAJCWlmIChuZXdNYXRjaGVzID09IDAgfHwgdGhpcy50eXBlQW5ub3RhdGlvbnMgPT0gbnVsbCB8
fCB0aGlzLnR5cGVBbm5vdGF0aW9ucy5sZW5ndGggPT0gMCkKIAkJCXJldHVybiBFTVBUWV9BTk5P
VEFUSU9OX1dBTEtFUjsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmluYXJ5VHlwZUJpbmRp
bmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9sb29rdXAvQmluYXJ5VHlwZUJpbmRpbmcuamF2YQppbmRleCAzZWVm
MDE3Li44MzQwYTQzIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0JpbmFyeVR5cGVCaW5kaW5n
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CaW5hcnlUeXBlQmluZGluZy5qYXZhCkBAIC0yOCw2
ICsyOCw3IEBACiAgKgkJCQkJCQkJQnVnIDQxNzI5NSAtIFsxLjhbW251bGxdIE1hc3NhZ2UgdHlw
ZSBhbm5vdGF0ZWQgbnVsbCBhbmFseXNpcyB0byBnZWwgd2VsbCB3aXRoIGRlZXAgZW5jb2RlZCB0
eXBlIGJpbmRpbmdzLgogICoJCQkJCQkJCUJ1ZyA0MjcxOTkgLSBbMS44XVtyZXNvdXJjZV0gYXZv
aWQgcmVzb3VyY2UgbGVhayB3YXJuaW5ncyBvbiBTdHJlYW1zIHRoYXQgaGF2ZSBubyByZXNvdXJj
ZQogICoJCQkJCQkJCUJ1ZyAzOTIyNDUgLSBbMS44XVtjb21waWxlcl1bbnVsbF0gRGVmaW5lIHdo
ZXRoZXIgLyBob3cgQE5vbk51bGxCeURlZmF1bHQgYXBwbGllcyB0byBUWVBFX1VTRSBsb2NhdGlv
bnMKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1
bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgIEplc3BlciBT
dGVlbiBNb2xsZXIgLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJCUJ1ZyA0MTIxNTAgWzEu
OF0gW2NvbXBpbGVyXSBFbmFibGUgcmVmbGVjdGVkIHBhcmFtZXRlciBuYW1lcyBkdXJpbmcgYW5u
b3RhdGlvbiBwcm9jZXNzaW5nCiAgKgkJCQkJCQkJQnVnIDQxMjE1MyAtIFsxLjhdW2NvbXBpbGVy
XSBDaGVjayB2YWxpZGl0eSBvZiBhbm5vdGF0aW9ucyB3aGljaCBtYXkgYmUgcmVwZWF0YWJsZQpA
QCAtMzcsNyArMzgsOSBAQAogaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CiAKIGltcG9ydCBv
cmcuZWNsaXBzZS5qZHQuY29yZS5jb21waWxlci5DaGFyT3BlcmF0aW9uOworaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5hc3QuQW5ub3RhdGlvbjsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuY2xhc3NmbXQuQ2xhc3NGaWxlQ29uc3RhbnRz
OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jbGFzc2ZtdC5Ob25O
dWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmNsYXNzZm10LlR5cGVBbm5vdGF0aW9uV2Fsa2VyOwogaW1w
b3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jb2RlZ2VuLkNvbnN0YW50UG9v
bDsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuZW52Lio7CkBAIC04
MCw4ICs4Myw5IEBACiAJcHJvdGVjdGVkIFNpbXBsZUxvb2t1cFRhYmxlIHN0b3JlZEFubm90YXRp
b25zID0gbnVsbDsgLy8ga2V5cyBhcmUgdGhpcyBSZWZlcmVuY2VCaW5kaW5nICYgaXRzIGZpZWxk
cyBhbmQgbWV0aG9kcywgdmFsdWUgaXMgYW4gQW5ub3RhdGlvbkhvbGRlcgogCiAJcHJpdmF0ZSBS
ZWZlcmVuY2VCaW5kaW5nIGNvbnRhaW5lckFubm90YXRpb25UeXBlOworCWludCBkZWZhdWx0TnVs
bG5lc3MgPSAwOwogCi1zdGF0aWMgT2JqZWN0IGNvbnZlcnRNZW1iZXJWYWx1ZShPYmplY3QgYmlu
YXJ5VmFsdWUsIExvb2t1cEVudmlyb25tZW50IGVudiwgY2hhcltdW11bXSBtaXNzaW5nVHlwZU5h
bWVzKSB7CitzdGF0aWMgT2JqZWN0IGNvbnZlcnRNZW1iZXJWYWx1ZShPYmplY3QgYmluYXJ5VmFs
dWUsIExvb2t1cEVudmlyb25tZW50IGVudiwgY2hhcltdW11bXSBtaXNzaW5nVHlwZU5hbWVzLCBi
b29sZWFuIHJlc29sdmVFbnVtQ29uc3RhbnRzKSB7CiAJaWYgKGJpbmFyeVZhbHVlID09IG51bGwp
IHJldHVybiBudWxsOwogCWlmIChiaW5hcnlWYWx1ZSBpbnN0YW5jZW9mIENvbnN0YW50KQogCQly
ZXR1cm4gYmluYXJ5VmFsdWU7CkBAIC05Miw2ICs5Niw4IEBACiAJaWYgKGJpbmFyeVZhbHVlIGlu
c3RhbmNlb2YgRW51bUNvbnN0YW50U2lnbmF0dXJlKSB7CiAJCUVudW1Db25zdGFudFNpZ25hdHVy
ZSByZWYgPSAoRW51bUNvbnN0YW50U2lnbmF0dXJlKSBiaW5hcnlWYWx1ZTsKIAkJUmVmZXJlbmNl
QmluZGluZyBlbnVtVHlwZSA9IChSZWZlcmVuY2VCaW5kaW5nKSBlbnYuZ2V0VHlwZUZyb21TaWdu
YXR1cmUocmVmLmdldFR5cGVOYW1lKCksIDAsIC0xLCBmYWxzZSwgbnVsbCwgbWlzc2luZ1R5cGVO
YW1lcywgVHlwZUFubm90YXRpb25XYWxrZXIuRU1QVFlfQU5OT1RBVElPTl9XQUxLRVIpOworCQlp
ZiAoZW51bVR5cGUuaXNVbnJlc29sdmVkVHlwZSgpICYmICFyZXNvbHZlRW51bUNvbnN0YW50cykK
KwkJCXJldHVybiBuZXcgRWxlbWVudFZhbHVlUGFpci5VbnJlc29sdmVkRW51bUNvbnN0YW50KGVu
dW1UeXBlLCBlbnYsIHJlZi5nZXRFbnVtQ29uc3RhbnROYW1lKCkpOwogCQllbnVtVHlwZSA9IChS
ZWZlcmVuY2VCaW5kaW5nKSByZXNvbHZlVHlwZShlbnVtVHlwZSwgZW52LCBmYWxzZSAvKiBubyBy
YXcgY29udmVyc2lvbiAqLyk7CiAJCXJldHVybiBlbnVtVHlwZS5nZXRGaWVsZChyZWYuZ2V0RW51
bUNvbnN0YW50TmFtZSgpLCBmYWxzZSk7CiAJfQpAQCAtMTAxLDcgKzEwNyw3IEBACiAJCWlmIChs
ZW5ndGggPT0gMCkgcmV0dXJuIG9iamVjdHM7CiAJCU9iamVjdFtdIHZhbHVlcyA9IG5ldyBPYmpl
Y3RbbGVuZ3RoXTsKIAkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykKLQkJCXZhbHVl
c1tpXSA9IGNvbnZlcnRNZW1iZXJWYWx1ZShvYmplY3RzW2ldLCBlbnYsIG1pc3NpbmdUeXBlTmFt
ZXMpOworCQkJdmFsdWVzW2ldID0gY29udmVydE1lbWJlclZhbHVlKG9iamVjdHNbaV0sIGVudiwg
bWlzc2luZ1R5cGVOYW1lcywgcmVzb2x2ZUVudW1Db25zdGFudHMpOwogCQlyZXR1cm4gdmFsdWVz
OwogCX0KIApAQCAtMTMzLDcgKzEzOSw3IEBACiAJaW50IGxlbmd0aCA9IGJpbmFyeVBhaXJzID09
IG51bGwgPyAwIDogYmluYXJ5UGFpcnMubGVuZ3RoOwogCUVsZW1lbnRWYWx1ZVBhaXJbXSBwYWly
cyA9IGxlbmd0aCA9PSAwID8gQmluZGluZy5OT19FTEVNRU5UX1ZBTFVFX1BBSVJTIDogbmV3IEVs
ZW1lbnRWYWx1ZVBhaXJbbGVuZ3RoXTsKIAlmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsr
KQotCQlwYWlyc1tpXSA9IG5ldyBFbGVtZW50VmFsdWVQYWlyKGJpbmFyeVBhaXJzW2ldLmdldE5h
bWUoKSwgY29udmVydE1lbWJlclZhbHVlKGJpbmFyeVBhaXJzW2ldLmdldFZhbHVlKCksIGVudiwg
bWlzc2luZ1R5cGVOYW1lcyksIG51bGwpOworCQlwYWlyc1tpXSA9IG5ldyBFbGVtZW50VmFsdWVQ
YWlyKGJpbmFyeVBhaXJzW2ldLmdldE5hbWUoKSwgY29udmVydE1lbWJlclZhbHVlKGJpbmFyeVBh
aXJzW2ldLmdldFZhbHVlKCksIGVudiwgbWlzc2luZ1R5cGVOYW1lcywgZmFsc2UpLCBudWxsKTsK
IAogCWNoYXJbXSB0eXBlTmFtZSA9IGFubm90YXRpb25JbmZvLmdldFR5cGVOYW1lKCk7CiAJUmVm
ZXJlbmNlQmluZGluZyBhbm5vdGF0aW9uVHlwZSA9IGVudi5nZXRUeXBlRnJvbUNvbnN0YW50UG9v
bE5hbWUodHlwZU5hbWUsIDEsIHR5cGVOYW1lLmxlbmd0aCAtIDEsIGZhbHNlLCBtaXNzaW5nVHlw
ZU5hbWVzKTsKQEAgLTM5Myw2ICszOTksMTAgQEAKIAkJICAgYW5kL29yIHN1cGVyIGludGVyZmFj
ZXMgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBkZXRlY3Qgb3ZlcnJpZGluZyBpbiB0aGUgcHJlc2Vu
Y2UKIAkJICAgb2YgZ2VuZXJpY3MuCiAJCSAqLworCQlpZiAodGhpcy5lbnZpcm9ubWVudC5nbG9i
YWxPcHRpb25zLmlzQW5ub3RhdGlvbkJhc2VkTnVsbEFuYWx5c2lzRW5hYmxlZCkgeworCQkJLy8g
bmVlZCBhbm5vdGF0aW9ucyBvbiB0aGUgdHlwZSBiZWZvcmUgcHJvY2Vzc2luZyBudWxsIGFubm90
YXRpb25zIG9uIG1lbWJlcnMgcmVzcGVjdGluZyBhbnkgQE5vbk51bGxCeURlZmF1bHQ6CisJCQlz
Y2FuVHlwZUZvck51bGxEZWZhdWx0QW5ub3RhdGlvbihiaW5hcnlUeXBlLCB0aGlzLmZQYWNrYWdl
LCB0aGlzKTsKKwkJfQogCQlUeXBlQW5ub3RhdGlvbldhbGtlciB3YWxrZXIgPSBnZXRUeXBlQW5u
b3RhdGlvbldhbGtlcihiaW5hcnlUeXBlLmdldFR5cGVBbm5vdGF0aW9ucygpKTsKIAkJY2hhcltd
IHR5cGVTaWduYXR1cmUgPSBiaW5hcnlUeXBlLmdldEdlbmVyaWNTaWduYXR1cmUoKTsgLy8gdXNl
IGdlbmVyaWMgc2lnbmF0dXJlIGV2ZW4gaW4gMS40CiAJCXRoaXMudGFnQml0cyB8PSBiaW5hcnlU
eXBlLmdldFRhZ0JpdHMoKTsKQEAgLTQ4MCw5ICs0OTAsNiBAQAogCQkJCX0KIAkJCX0KIAkJCWlm
ICh0aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuaXNBbm5vdGF0aW9uQmFzZWROdWxsQW5h
bHlzaXNFbmFibGVkKSB7Ci0JCQkJLy8gbmVlZCBhbm5vdGF0aW9ucyBvbiB0aGUgdHlwZSBiZWZv
cmUgcHJvY2Vzc2luZyBudWxsIGFubm90YXRpb25zIG9uIG1lbWJlcnMgcmVzcGVjdGluZyBhbnkg
QE5vbk51bGxCeURlZmF1bHQ6Ci0JCQkJc2NhblR5cGVGb3JOdWxsRGVmYXVsdEFubm90YXRpb24o
YmluYXJ5VHlwZSwgdGhpcy5mUGFja2FnZSwgdGhpcyk7Ci0KIAkJCQlpZiAoaUZpZWxkcyAhPSBu
dWxsKSB7CiAJCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgaUZpZWxkcy5sZW5ndGg7IGkrKykKIAkJ
CQkJCXNjYW5GaWVsZEZvck51bGxBbm5vdGF0aW9uKGlGaWVsZHNbaV0sIHRoaXMuZmllbGRzW2ld
LCB0aGlzLmlzRW51bSgpKTsKQEAgLTUwOCwxMCArNTE1LDIwIEBACiAKIHByaXZhdGUgVHlwZUFu
bm90YXRpb25XYWxrZXIgZ2V0VHlwZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0
aW9uW10gYW5ub3RhdGlvbnMpIHsKIAlpZiAoIWlzUHJvdG90eXBlKCkpIHRocm93IG5ldyBJbGxl
Z2FsU3RhdGVFeGNlcHRpb24oKTsKLQlpZiAoYW5ub3RhdGlvbnMgPT0gbnVsbCB8fCBhbm5vdGF0
aW9ucy5sZW5ndGggPT0gMCkKKwlpZiAoYW5ub3RhdGlvbnMgPT0gbnVsbCB8fCBhbm5vdGF0aW9u
cy5sZW5ndGggPT0gMCB8fCAhdGhpcy5lbnZpcm9ubWVudC51c2VzQW5ub3RhdGVkVHlwZVN5c3Rl
bSgpKSB7CisJCWlmICh0aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuaXNBbm5vdGF0aW9u
QmFzZWROdWxsQW5hbHlzaXNFbmFibGVkKSB7CisJCQlpbnQgbnVsbG5lc3MgPSBnZXROdWxsRGVm
YXVsdCgpOworCQkJaWYgKG51bGxuZXNzID4gQmluZGluZy5OVUxMX1VOU1BFQ0lGSUVEX0JZX0RF
RkFVTFQpCisJCQkJcmV0dXJuIG5ldyBOb25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25X
YWxrZXIobnVsbG5lc3MsIHRoaXMuZW52aXJvbm1lbnQpOworCQl9CiAJCXJldHVybiBUeXBlQW5u
b3RhdGlvbldhbGtlci5FTVBUWV9BTk5PVEFUSU9OX1dBTEtFUjsKLQkKLQlyZXR1cm4gdGhpcy5l
bnZpcm9ubWVudC51c2VzQW5ub3RhdGVkVHlwZVN5c3RlbSgpID8gbmV3IFR5cGVBbm5vdGF0aW9u
V2Fsa2VyKGFubm90YXRpb25zKSA6IFR5cGVBbm5vdGF0aW9uV2Fsa2VyLkVNUFRZX0FOTk9UQVRJ
T05fV0FMS0VSOworCX0KKwlpZiAodGhpcy5lbnZpcm9ubWVudC5nbG9iYWxPcHRpb25zLmlzQW5u
b3RhdGlvbkJhc2VkTnVsbEFuYWx5c2lzRW5hYmxlZCkgeworCQlpbnQgbnVsbG5lc3MgPSBnZXRO
dWxsRGVmYXVsdCgpOworCQlpZiAobnVsbG5lc3MgPiBCaW5kaW5nLk5VTExfVU5TUEVDSUZJRURf
QllfREVGQVVMVCkKKwkJCXJldHVybiBuZXcgTm9uTnVsbERlZmF1bHRBd2FyZVR5cGVBbm5vdGF0
aW9uV2Fsa2VyKGFubm90YXRpb25zLCBudWxsbmVzcywgdGhpcy5lbnZpcm9ubWVudCk7CisJfQor
CXJldHVybiBuZXcgVHlwZUFubm90YXRpb25XYWxrZXIoYW5ub3RhdGlvbnMpOwogfQogCiBwcml2
YXRlIHZvaWQgY3JlYXRlRmllbGRzKElCaW5hcnlGaWVsZFtdIGlGaWVsZHMsIGxvbmcgc291cmNl
TGV2ZWwsIGNoYXJbXVtdW10gbWlzc2luZ1R5cGVOYW1lcykgewpAQCAtNzQ1LDcgKzc2Miw3IEBA
CiAJCXJlc3VsdC5zZXRBbm5vdGF0aW9ucygKIAkJCWNyZWF0ZUFubm90YXRpb25zKGFubm90YXRp
b25zLCB0aGlzLmVudmlyb25tZW50LCBtaXNzaW5nVHlwZU5hbWVzKSwKIAkJCXBhcmFtQW5ub3Rh
dGlvbnMsCi0JCQlpc0Fubm90YXRpb25UeXBlKCkgPyBjb252ZXJ0TWVtYmVyVmFsdWUobWV0aG9k
LmdldERlZmF1bHRWYWx1ZSgpLCB0aGlzLmVudmlyb25tZW50LCBtaXNzaW5nVHlwZU5hbWVzKSA6
IG51bGwsCisJCQlpc0Fubm90YXRpb25UeXBlKCkgPyBjb252ZXJ0TWVtYmVyVmFsdWUobWV0aG9k
LmdldERlZmF1bHRWYWx1ZSgpLCB0aGlzLmVudmlyb25tZW50LCBtaXNzaW5nVHlwZU5hbWVzLCB0
cnVlKSA6IG51bGwsCiAJCQl0aGlzLmVudmlyb25tZW50KTsKIAl9CiAKQEAgLTE0NTIsNiArMTQ2
OSw3IEBACiAJcmV0dXJuIHRoaXMuc3RvcmVkQW5ub3RhdGlvbnM7CiB9CiAKKy8vcHJlOiBudWxs
IGFubm90YXRpb24gYW5hbHlzaXMgaXMgZW5hYmxlZAogcHJpdmF0ZSB2b2lkIHNjYW5GaWVsZEZv
ck51bGxBbm5vdGF0aW9uKElCaW5hcnlGaWVsZCBmaWVsZCwgRmllbGRCaW5kaW5nIGZpZWxkQmlu
ZGluZywgYm9vbGVhbiBpc0VudW0pIHsKIAlpZiAoIWlzUHJvdG90eXBlKCkpIHRocm93IG5ldyBJ
bGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKIAlpZiAodGhpcy5lbnZpcm9ubWVudC5nbG9iYWxPcHRp
b25zLnNvdXJjZUxldmVsID49IENsYXNzRmlsZUNvbnN0YW50cy5KREsxXzgpIHsKQEAgLTE0NTks
NyArMTQ3Nyw3IEBACiAJCWlmIChmaWVsZFR5cGUgIT0gbnVsbAogCQkJCSYmICFmaWVsZFR5cGUu
aXNCYXNlVHlwZSgpCiAJCQkJJiYgKGZpZWxkVHlwZS50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0
aW9uTnVsbE1BU0spID09IDAKLQkJCQkmJiAodGhpcy50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0
aW9uTm9uTnVsbEJ5RGVmYXVsdCkgIT0gMCkgeworCQkJCSYmIGhhc05vbk51bGxEZWZhdWx0Rm9y
KERlZmF1bHRMb2NhdGlvbkZpZWxkLCB0cnVlKSkgewogCQkJZmllbGRCaW5kaW5nLnR5cGUgPSB0
aGlzLmVudmlyb25tZW50LmNyZWF0ZUFubm90YXRlZFR5cGUoZmllbGRUeXBlLCBuZXcgQW5ub3Rh
dGlvbkJpbmRpbmdbXXt0aGlzLmVudmlyb25tZW50LmdldE5vbk51bGxBbm5vdGF0aW9uKCl9KTsK
IAkJfQogCQlyZXR1cm47IC8vIG5vdCB1c2luZyBmaWVsZEJpbmRpbmcudGFnQml0cyB3aGVuIHdl
IGhhdmUgdHlwZSBhbm5vdGF0aW9ucy4KQEAgLTE1MjcsNiArMTU0NSw4IEBACiAJCQljaGFyW11b
XSB0eXBlTmFtZSA9IENoYXJPcGVyYXRpb24uc3BsaXRPbignLycsIGFubm90YXRpb25UeXBlTmFt
ZSwgMSwgYW5ub3RhdGlvblR5cGVOYW1lLmxlbmd0aC0xKTsgLy8gY3V0IG9mIGxlYWRpbmcgJ0wn
IGFuZCB0cmFpbGluZyAnOycKIAkJCWlmIChDaGFyT3BlcmF0aW9uLmVxdWFscyh0eXBlTmFtZSwg
bm9uTnVsbEJ5RGVmYXVsdEFubm90YXRpb25OYW1lKSkgewogCQkJCW1ldGhvZEJpbmRpbmcudGFn
Qml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0OworCQkJCWlmICh1c2VU
eXBlQW5ub3RhdGlvbnMpCisJCQkJCW1ldGhvZEJpbmRpbmcuZGVmYXVsdE51bGxuZXNzID0gZ2V0
Tm9uTnVsbEJ5RGVmYXVsdFZhbHVlKGFubm90YXRpb25zW2ldKTsKIAkJCX0KIAkJCWlmICghdXNl
VHlwZUFubm90YXRpb25zICYmICFleHBsaWNpdE51bGxuZXNzKSB7CiAJCQkJaWYgKENoYXJPcGVy
YXRpb24uZXF1YWxzKHR5cGVOYW1lLCBub25OdWxsQW5ub3RhdGlvbk5hbWUpKSB7CkBAIC0xNTc1
LDYgKzE1OTUsNyBAQAogCQl9CiAJfQogfQorLy8gcHJlOiBudWxsIGFubm90YXRpb24gYW5hbHlz
aXMgaXMgZW5hYmxlZAogcHJpdmF0ZSB2b2lkIHNjYW5UeXBlRm9yTnVsbERlZmF1bHRBbm5vdGF0
aW9uKElCaW5hcnlUeXBlIGJpbmFyeVR5cGUsIFBhY2thZ2VCaW5kaW5nIHBhY2thZ2VCaW5kaW5n
LCBCaW5hcnlUeXBlQmluZGluZyBiaW5hcnlCaW5kaW5nKSB7CiAJaWYgKCFpc1Byb3RvdHlwZSgp
KSB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAJY2hhcltdW10gbm9uTnVsbEJ5
RGVmYXVsdEFubm90YXRpb25OYW1lID0gdGhpcy5lbnZpcm9ubWVudC5nZXROb25OdWxsQnlEZWZh
dWx0QW5ub3RhdGlvbk5hbWUoKTsKQEAgLTE1ODMsNiArMTYwNCw3IEBACiAKIAlJQmluYXJ5QW5u
b3RhdGlvbltdIGFubm90YXRpb25zID0gYmluYXJ5VHlwZS5nZXRBbm5vdGF0aW9ucygpOwogCWJv
b2xlYW4gaXNQYWNrYWdlSW5mbyA9IENoYXJPcGVyYXRpb24uZXF1YWxzKGJpbmFyeUJpbmRpbmcu
c291cmNlTmFtZSgpLCBUeXBlQ29uc3RhbnRzLlBBQ0tBR0VfSU5GT19OQU1FKTsKKwlib29sZWFu
IHVzZVR5cGVBbm5vdGF0aW9ucyA9IHRoaXMuZW52aXJvbm1lbnQuZ2xvYmFsT3B0aW9ucy5zb3Vy
Y2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRLMV84OwogCWlmIChhbm5vdGF0aW9ucyAh
PSBudWxsKSB7CiAJCWxvbmcgYW5ub3RhdGlvbkJpdCA9IDBMOwogCQlpbnQgbnVsbG5lc3MgPSBO
T19OVUxMX0RFRkFVTFQ7CkBAIC0xNTk0LDIxICsxNjE2LDI4IEBACiAJCQljaGFyW11bXSB0eXBl
TmFtZSA9IENoYXJPcGVyYXRpb24uc3BsaXRPbignLycsIGFubm90YXRpb25UeXBlTmFtZSwgMSwg
YW5ub3RhdGlvblR5cGVOYW1lLmxlbmd0aC0xKTsgLy8gY3V0IG9mIGxlYWRpbmcgJ0wnIGFuZCB0
cmFpbGluZyAnOycKIAkJCWlmIChDaGFyT3BlcmF0aW9uLmVxdWFscyh0eXBlTmFtZSwgbm9uTnVs
bEJ5RGVmYXVsdEFubm90YXRpb25OYW1lKSkgewogCQkJCUlCaW5hcnlFbGVtZW50VmFsdWVQYWly
W10gZWxlbWVudFZhbHVlUGFpcnMgPSBhbm5vdGF0aW9uc1tpXS5nZXRFbGVtZW50VmFsdWVQYWly
cygpOwotCQkJCWlmIChlbGVtZW50VmFsdWVQYWlycyAhPSBudWxsICYmIGVsZW1lbnRWYWx1ZVBh
aXJzLmxlbmd0aCA9PSAxKSB7Ci0JCQkJCU9iamVjdCB2YWx1ZSA9IGVsZW1lbnRWYWx1ZVBhaXJz
WzBdLmdldFZhbHVlKCk7Ci0JCQkJCWlmICh2YWx1ZSBpbnN0YW5jZW9mIEJvb2xlYW5Db25zdGFu
dAotCQkJCQkJJiYgISgoQm9vbGVhbkNvbnN0YW50KXZhbHVlKS5ib29sZWFuVmFsdWUoKSkKLQkJ
CQkJewotCQkJCQkJLy8gcGFyYW1ldGVyIGlzICdmYWxzZSc6IHRoaXMgbWVhbnMgd2UgY2FuY2Vs
IGRlZmF1bHRzIGZyb20gb3V0ZXIgc2NvcGVzOgotCQkJCQkJYW5ub3RhdGlvbkJpdCA9IFRhZ0Jp
dHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdDsKLQkJCQkJCW51bGxuZXNzID0g
TlVMTF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUOwotCQkJCQkJYnJlYWs7Ci0JCQkJCX0gZWxzZSBp
ZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3RbXSAmJiAoKE9iamVjdFtdKXZhbHVlKS5sZW5ndGgg
PT0gMCkgewotCQkJCQkJLy8gcGFyYW1ldGVyIGlzICd7fSc6IHRoaXMgbWVhbnMgd2UgY2FuY2Vs
IGRlZmF1bHRzIGZyb20gb3V0ZXIgc2NvcGVzOgotCQkJCQkJYW5ub3RhdGlvbkJpdCA9IFRhZ0Jp
dHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdDsKLQkJCQkJCW51bGxuZXNzID0g
TlVMTF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUOwotCQkJCQkJYnJlYWs7CisJCQkJaWYgKCF1c2VU
eXBlQW5ub3RhdGlvbnMpIHsKKwkJCQkJaWYgKGVsZW1lbnRWYWx1ZVBhaXJzICE9IG51bGwgJiYg
ZWxlbWVudFZhbHVlUGFpcnMubGVuZ3RoID09IDEpIHsKKwkJCQkJCU9iamVjdCB2YWx1ZSA9IGVs
ZW1lbnRWYWx1ZVBhaXJzWzBdLmdldFZhbHVlKCk7CisJCQkJCQlpZiAodmFsdWUgaW5zdGFuY2Vv
ZiBCb29sZWFuQ29uc3RhbnQKKwkJCQkJCQkmJiAhKChCb29sZWFuQ29uc3RhbnQpdmFsdWUpLmJv
b2xlYW5WYWx1ZSgpKQorCQkJCQkJeworCQkJCQkJCS8vIHBhcmFtZXRlciBpcyAnZmFsc2UnOiB0
aGlzIG1lYW5zIHdlIGNhbmNlbCBkZWZhdWx0cyBmcm9tIG91dGVyIHNjb3BlczoKKwkJCQkJCQlh
bm5vdGF0aW9uQml0ID0gVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0
OworCQkJCQkJCW51bGxuZXNzID0gTlVMTF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUOworCQkJCQkJ
CWJyZWFrOworCQkJCQkJfQogCQkJCQl9CisJCQkJfSBlbHNlIHsKKwkJCQkJLy8gdXNpbmcgTm9u
TnVsbEJ5RGVmYXVsdCB3ZSBuZWVkIHRvIGluc3BlY3QgdGhlIGRldGFpbHMgb2YgdGhlIHZhbHVl
KCkgYXR0cmlidXRlOgorCQkJCQludWxsbmVzcyA9IGdldE5vbk51bGxCeURlZmF1bHRWYWx1ZShh
bm5vdGF0aW9uc1tpXSk7CisJCQkJCWlmIChudWxsbmVzcyA9PSBOVUxMX1VOU1BFQ0lGSUVEX0JZ
X0RFRkFVTFQpIHsKKwkJCQkJCWFubm90YXRpb25CaXQgPSBUYWdCaXRzLkFubm90YXRpb25OdWxs
VW5zcGVjaWZpZWRCeURlZmF1bHQ7CisJCQkJCX0gZWxzZSBpZiAobnVsbG5lc3MgIT0gMCkgewor
CQkJCQkJYW5ub3RhdGlvbkJpdCA9IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQ7
CisJCQkJCX0JCisJCQkJCXRoaXMuZGVmYXVsdE51bGxuZXNzID0gbnVsbG5lc3M7CisJCQkJCWJy
ZWFrOwogCQkJCX0KIAkJCQlhbm5vdGF0aW9uQml0ID0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVs
bEJ5RGVmYXVsdDsKIAkJCQludWxsbmVzcyA9IE5PTk5VTExfQllfREVGQVVMVDsKQEAgLTE2Mjks
MTIgKzE2NTgsMTkgQEAKIAl9CiAJUmVmZXJlbmNlQmluZGluZyBlbmNsb3NpbmdUeXBlQmluZGlu
ZyA9IGJpbmFyeUJpbmRpbmcuZW5jbG9zaW5nVHlwZTsKIAlpZiAoZW5jbG9zaW5nVHlwZUJpbmRp
bmcgIT0gbnVsbCkgewotCQlpZiAoKGVuY2xvc2luZ1R5cGVCaW5kaW5nLnRhZ0JpdHMgJiBUYWdC
aXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKSB7Ci0JCQliaW5hcnlCaW5kaW5n
LnRhZ0JpdHMgfD0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdDsKLQkJCXJldHVy
bjsKLQkJfSBlbHNlIGlmICgoZW5jbG9zaW5nVHlwZUJpbmRpbmcudGFnQml0cyAmIFRhZ0JpdHMu
QW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCkgIT0gMCkgewotCQkJYmluYXJ5Qmlu
ZGluZy50YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVs
dDsKLQkJCXJldHVybjsKKwkJaWYgKHVzZVR5cGVBbm5vdGF0aW9ucykgeworCQkJYmluYXJ5Qmlu
ZGluZy5kZWZhdWx0TnVsbG5lc3MgPSBlbmNsb3NpbmdUeXBlQmluZGluZy5nZXROdWxsRGVmYXVs
dCgpOworCQkJaWYgKGJpbmFyeUJpbmRpbmcuZGVmYXVsdE51bGxuZXNzICE9IDApIHsKKwkJCQly
ZXR1cm47CisJCQl9CisJCX0gZWxzZSB7CisJCQlpZiAoKGVuY2xvc2luZ1R5cGVCaW5kaW5nLnRh
Z0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKSB7CisJCQkJ
YmluYXJ5QmluZGluZy50YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1
bHQ7CisJCQkJcmV0dXJuOworCQkJfSBlbHNlIGlmICgoZW5jbG9zaW5nVHlwZUJpbmRpbmcudGFn
Qml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCkgIT0gMCkg
eworCQkJCWJpbmFyeUJpbmRpbmcudGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5z
cGVjaWZpZWRCeURlZmF1bHQ7CisJCQkJcmV0dXJuOworCQkJfQogCQl9CiAJfQogCS8vIG5vIGFu
bm90YXRpb24gZm91bmQgb24gdGhlIHR5cGUgb3IgaXRzIGVuY2xvc2luZyB0eXBlcwpAQCAtMTY0
NywxNiArMTY4Myw1NSBAQAogCQl9CiAJfQogCS8vIG5vIEBOb25OdWxsQnlEZWZhdWx0IGF0IHR5
cGUgbGV2ZWwsIGNoZWNrIGNvbnRhaW5pbmcgcGFja2FnZToKLQlzd2l0Y2ggKHBhY2thZ2VCaW5k
aW5nLmRlZmF1bHROdWxsbmVzcykgewotCQljYXNlIEJpbmRpbmcuTk9OTlVMTF9CWV9ERUZBVUxU
IDogCi0JCQliaW5hcnlCaW5kaW5nLnRhZ0JpdHMgfD0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVs
bEJ5RGVmYXVsdDsKLQkJCWJyZWFrOwotCQljYXNlIEJpbmRpbmcuTlVMTF9VTlNQRUNJRklFRF9C
WV9ERUZBVUxUIDoKLQkJCWJpbmFyeUJpbmRpbmcudGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRp
b25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQ7Ci0JCQlicmVhazsKKwlpZiAodXNlVHlwZUFubm90
YXRpb25zKSB7CisJCWJpbmFyeUJpbmRpbmcuZGVmYXVsdE51bGxuZXNzID0gcGFja2FnZUJpbmRp
bmcuZGVmYXVsdE51bGxuZXNzOworCX0gZWxzZSB7CisJCXN3aXRjaCAocGFja2FnZUJpbmRpbmcu
ZGVmYXVsdE51bGxuZXNzKSB7CisJCQljYXNlIEJpbmRpbmcuTk9OTlVMTF9CWV9ERUZBVUxUIDog
CisJCQkJYmluYXJ5QmluZGluZy50YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxC
eURlZmF1bHQ7CisJCQkJYnJlYWs7CisJCQljYXNlIEJpbmRpbmcuTlVMTF9VTlNQRUNJRklFRF9C
WV9ERUZBVUxUIDoKKwkJCQliaW5hcnlCaW5kaW5nLnRhZ0JpdHMgfD0gVGFnQml0cy5Bbm5vdGF0
aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0OworCQkJCWJyZWFrOworCQl9CiAJfQogfQogCisv
KiogZ2l2ZW4gYW4gYXBwbGljYXRpb24gb2YgQE5vbk51bGxCeURlZmF1bHQgY29udmVydCB0aGUg
YW5ub3RhdGlvbiBhcmd1bWVudCAoaWYgYW55KSBpbnRvIGEgYml0dmVjdG9yIGEgbGEge0BsaW5r
IEJpbmRpbmcjTnVsbG5lc3NEZWZhdWx0TUFTS30gKi8KKy8vIHByZTogbnVsbCBhbm5vdGF0aW9u
IGFuYWx5c2lzIGlzIGVuYWJsZWQKK2ludCBnZXROb25OdWxsQnlEZWZhdWx0VmFsdWUoSUJpbmFy
eUFubm90YXRpb24gYW5ub3RhdGlvbikgeworCWNoYXJbXSBhbm5vdGF0aW9uVHlwZU5hbWUgPSBh
bm5vdGF0aW9uLmdldFR5cGVOYW1lKCk7CisJY2hhcltdW10gdHlwZU5hbWUgPSBDaGFyT3BlcmF0
aW9uLnNwbGl0T24oJy8nLCBhbm5vdGF0aW9uVHlwZU5hbWUsIDEsIGFubm90YXRpb25UeXBlTmFt
ZS5sZW5ndGgtMSk7IC8vIGN1dCBvZiBsZWFkaW5nICdMJyBhbmQgdHJhaWxpbmcgJzsnCisJSUJp
bmFyeUVsZW1lbnRWYWx1ZVBhaXJbXSBlbGVtZW50VmFsdWVQYWlycyA9IGFubm90YXRpb24uZ2V0
RWxlbWVudFZhbHVlUGFpcnMoKTsKKwlpZiAoZWxlbWVudFZhbHVlUGFpcnMgPT0gbnVsbCB8fCBl
bGVtZW50VmFsdWVQYWlycy5sZW5ndGggPT0gMCApIHsKKwkJLy8gbm8gYXJndW1lbnQ6IGFwcGx5
IGRlZmF1bHQgZGVmYXVsdAorCQlSZWZlcmVuY2VCaW5kaW5nIGFubm90YXRpb25UeXBlID0gdGhp
cy5lbnZpcm9ubWVudC5nZXRUeXBlKHR5cGVOYW1lKTsKKwkJaWYgKGFubm90YXRpb25UeXBlID09
IG51bGwpIHJldHVybiAwOworCQlpZiAoYW5ub3RhdGlvblR5cGUuaXNVbnJlc29sdmVkVHlwZSgp
KQorCQkJYW5ub3RhdGlvblR5cGUgPSAoKFVucmVzb2x2ZWRSZWZlcmVuY2VCaW5kaW5nKSBhbm5v
dGF0aW9uVHlwZSkucmVzb2x2ZSh0aGlzLmVudmlyb25tZW50LCBmYWxzZSk7CisJCU1ldGhvZEJp
bmRpbmdbXSBhbm5vdGF0aW9uTWV0aG9kcyA9IGFubm90YXRpb25UeXBlLm1ldGhvZHMoKTsKKwkJ
aWYgKGFubm90YXRpb25NZXRob2RzICE9IG51bGwgJiYgYW5ub3RhdGlvbk1ldGhvZHMubGVuZ3Ro
ID09IDEpIHsKKwkJCU9iamVjdCB2YWx1ZSA9IGFubm90YXRpb25NZXRob2RzWzBdLmdldERlZmF1
bHRWYWx1ZSgpOworCQkJcmV0dXJuIEFubm90YXRpb24ubnVsbFRhZ0JpdHNGcm9tQW5ub3RhdGlv
blZhbHVlKHZhbHVlKTsKKwkJfQorCX0gZWxzZSBpZiAoZWxlbWVudFZhbHVlUGFpcnMubGVuZ3Ro
ID4gMCkgeworCQkvLyBldmFsdWF0ZSB0aGUgY29udGFpbmVkIEVudW1Db25zdGFudFNpZ25hdHVy
ZXM6CisJCWludCBudWxsbmVzcyA9IDA7CisJCWZvciAoaW50IGkgPSAwOyBpIDwgZWxlbWVudFZh
bHVlUGFpcnMubGVuZ3RoOyBpKyspCisJCQludWxsbmVzcyB8PSBBbm5vdGF0aW9uLm51bGxUYWdC
aXRzRnJvbUFubm90YXRpb25WYWx1ZShlbGVtZW50VmFsdWVQYWlyc1tpXS5nZXRWYWx1ZSgpKTsK
KwkJcmV0dXJuIG51bGxuZXNzOworCX0gZWxzZSB7CisJCS8vIGVtcHR5IGFyZ3VtZW50OiBjYW5j
ZWwgYWxsIGRlZmF1bHRzIGZyb20gZW5jbG9zaW5nIHNjb3BlcworCQlyZXR1cm4gTlVMTF9VTlNQ
RUNJRklFRF9CWV9ERUZBVUxUOworCX0KKwlyZXR1cm4gMDsKK30KKworQE92ZXJyaWRlCitpbnQg
Z2V0TnVsbERlZmF1bHQoKSB7CisJcmV0dXJuIHRoaXMuZGVmYXVsdE51bGxuZXNzOworfQorCiBw
cml2YXRlIHZvaWQgc2NhblR5cGVGb3JDb250YWluZXJBbm5vdGF0aW9uKElCaW5hcnlUeXBlIGJp
bmFyeVR5cGUsIGNoYXJbXVtdW10gbWlzc2luZ1R5cGVOYW1lcykgewogCWlmICghaXNQcm90b3R5
cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogCUlCaW5hcnlBbm5vdGF0
aW9uW10gYW5ub3RhdGlvbnMgPSBiaW5hcnlUeXBlLmdldEFubm90YXRpb25zKCk7CmRpZmYgLS1n
aXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvbG9va3VwL0JpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmluZGluZy5q
YXZhCmluZGV4IDc1NGZiMzguLjhiMmIyYjggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmlu
ZGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmluZGluZy5qYXZhCkBAIC0xLDUgKzEsNSBA
QAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxMyBJ
Qk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAxNCBJ
Qk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMg
cHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWls
YWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAog
ICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUg
YXQKQEAgLTE0LDYgKzE0LDcgQEAKICAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0
aW9uIGZvcgogICoJCQkJCQkJCWJ1ZyAzNjU1MzEgLSBbY29tcGlsZXJdW251bGxdIGludmVzdGln
YXRlIGFsdGVybmF0aXZlIHN0cmF0ZWd5IGZvciBpbnRlcm5hbGx5IGVuY29kaW5nIG51bGxuZXNz
IGRlZmF1bHRzCiAgKgkJCQkJCQkJQnVnIDQwMDg3NCAtIFsxLjhdW2NvbXBpbGVyXSBJbmZlcmVu
Y2UgaW5mcmFzdHJ1Y3R1cmUgc2hvdWxkIGV2b2x2ZSB0byBtZWV0IEpMUzggMTgueCAoUGFydCBH
IG9mIEpTUjMzNSBzcGVjKQorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFs
dWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAog
ICogICAgIEplc3BlciBTdGVlbiBNb2xsZXIgLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJ
CUJ1ZyA0MTIxNTAgWzEuOF0gW2NvbXBpbGVyXSBFbmFibGUgcmVmbGVjdGVkIHBhcmFtZXRlciBu
YW1lcyBkdXJpbmcgYW5ub3RhdGlvbiBwcm9jZXNzaW5nCiAgKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
Ki8KQEAgLTcwLDggKzcxLDQ0IEBACiAKIAkvLyBOdWxsbmVzcyBkZWZhdWx0czoKIAlwdWJsaWMg
c3RhdGljIGZpbmFsIGludCBOT19OVUxMX0RFRkFVTFQgPSAwOwotCXB1YmxpYyBzdGF0aWMgZmlu
YWwgaW50IE5VTExfVU5TUEVDSUZJRURfQllfREVGQVVMVCA9IDE7Ci0JcHVibGljIHN0YXRpYyBm
aW5hbCBpbnQgTk9OTlVMTF9CWV9ERUZBVUxUID0gMjsKKwkvLyBTRTUgc3R5bGU6CisJcHVibGlj
IHN0YXRpYyBmaW5hbCBpbnQgTk9OTlVMTF9CWV9ERUZBVUxUID0gMTsKKwlwdWJsaWMgc3RhdGlj
IGZpbmFsIGludCBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQgPSAyOworCS8vIEpTUjMwOCBz
dHlsZToKKwkvKioKKwkgKiBCaXQgaW4gZGVmYXVsdE51bGxuZXNzIGJpdCB2ZWN0b3JzLCByZXBy
ZXNlbnRpbmcgdGhlIGVudW0gY29uc3RhbnQgRGVmYXVsdExvY2F0aW9uI1BBUkFNRVRFUgorCSAq
LworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IERlZmF1bHRMb2NhdGlvblBhcmFtZXRlciA9IEFT
VE5vZGUuQml0NDsKKwkvKioKKwkgKiBCaXQgaW4gZGVmYXVsdE51bGxuZXNzIGJpdCB2ZWN0b3Jz
LCByZXByZXNlbnRpbmcgdGhlIGVudW0gY29uc3RhbnQgRGVmYXVsdExvY2F0aW9uI1JFVFVSTl9U
WVBFCisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRGVmYXVsdExvY2F0aW9uUmV0dXJu
VHlwZSA9IEFTVE5vZGUuQml0NTsKKwkvKioKKwkgKiBCaXQgaW4gZGVmYXVsdE51bGxuZXNzIGJp
dCB2ZWN0b3JzLCByZXByZXNlbnRpbmcgdGhlIGVudW0gY29uc3RhbnQgRGVmYXVsdExvY2F0aW9u
I0ZJRUxECisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRGVmYXVsdExvY2F0aW9uRmll
bGQgPSBBU1ROb2RlLkJpdDY7CisJLyoqCisJICogQml0IGluIGRlZmF1bHROdWxsbmVzcyBiaXQg
dmVjdG9ycywgcmVwcmVzZW50aW5nIHRoZSBlbnVtIGNvbnN0YW50IERlZmF1bHRMb2NhdGlvbiNU
WVBFX0FSR1VNRU5UCisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRGVmYXVsdExvY2F0
aW9uVHlwZUFyZ3VtZW50ID0gQVNUTm9kZS5CaXQ3OworCS8qKgorCSAqIEJpdCBpbiBkZWZhdWx0
TnVsbG5lc3MgYml0IHZlY3RvcnMsIHJlcHJlc2VudGluZyB0aGUgZW51bSBjb25zdGFudCBEZWZh
dWx0TG9jYXRpb24jVFlQRV9QQVJBTUVURVIKKwkgKi8KKwlwdWJsaWMgc3RhdGljIGZpbmFsIGlu
dCBEZWZhdWx0TG9jYXRpb25UeXBlUGFyYW1ldGVyID0gQVNUTm9kZS5CaXQ4OworCS8qKgorCSAq
IEJpdCBpbiBkZWZhdWx0TnVsbG5lc3MgYml0IHZlY3RvcnMsIHJlcHJlc2VudGluZyB0aGUgZW51
bSBjb25zdGFudCBEZWZhdWx0TG9jYXRpb24jVFlQRV9CT1VORAorCSAqLworCXB1YmxpYyBzdGF0
aWMgZmluYWwgaW50IERlZmF1bHRMb2NhdGlvblR5cGVCb3VuZCA9IEFTVE5vZGUuQml0OTsKKwkv
KioKKwkgKiBCaXQgaW4gZGVmYXVsdE51bGxuZXNzIGJpdCB2ZWN0b3JzLCByZXByZXNlbnRpbmcg
dGhlIGVudW0gY29uc3RhbnQgRGVmYXVsdExvY2F0aW9uI0FSUkFZX0NPTlRFTlRTCisJICogVE9E
TzogdGhpcyBjb25zdGFudCBpcyBub3QgeWV0IHVzZWQsIGR1ZSB0byBkaWZmaWN1bHR5IHRvIGRp
c2Nlcm4gdGhlc2UgYW5ub3RhdGlvbnMgYmV0d2VlbiBTRTUgLyBTRTgKKwkgKi8KKwlwdWJsaWMg
c3RhdGljIGZpbmFsIGludCBEZWZhdWx0TG9jYXRpb25BcnJheUNvbnRlbnRzID0gQVNUTm9kZS5C
aXQxMDsKKworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IE51bGxuZXNzRGVmYXVsdE1BU0sgPSAK
KwkJCU5VTExfVU5TUEVDSUZJRURfQllfREVGQVVMVCB8IC8vIGluY2x1ZGVkIHRvIHRlcm1pbmF0
ZSBzZWFyY2ggdXAgdGhlIHBhcmVudCBjaGFpbgorCQkJRGVmYXVsdExvY2F0aW9uUGFyYW1ldGVy
IHwgRGVmYXVsdExvY2F0aW9uUmV0dXJuVHlwZSB8IERlZmF1bHRMb2NhdGlvbkZpZWxkIHwKKwkJ
CURlZmF1bHRMb2NhdGlvblR5cGVBcmd1bWVudCB8IERlZmF1bHRMb2NhdGlvblR5cGVQYXJhbWV0
ZXIgfCBEZWZhdWx0TG9jYXRpb25UeXBlQm91bmQgfCBEZWZhdWx0TG9jYXRpb25BcnJheUNvbnRl
bnRzOwogCiAJLyoKIAkqIEFuc3dlciB0aGUgcmVjZWl2ZXIncyBiaW5kaW5nIHR5cGUgZnJvbSBC
aW5kaW5nLkJpbmRpbmdJRC4KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBp
bGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmxvY2tTY29wZS5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9CbG9ja1Njb3BlLmphdmEKaW5kZXggODIxMWFhNy4uNzQ4NmM3
NiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CbG9ja1Njb3BlLmphdmEKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9CbG9ja1Njb3BlLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQg
b3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQg
b3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNj
b21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmll
cyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMjEsNiArMjEsNyBA
QAogICoJCQkJCQkJCWJ1ZyAzNzk3ODQgLSBbY29tcGlsZXJdICJNZXRob2QgY2FuIGJlIHN0YXRp
YyIgaXMgbm90IGdldHRpbmcgcmVwb3J0ZWQKICAqCQkJCQkJCQlidWcgMzk0NzY4IC0gW2NvbXBp
bGVyXVtyZXNvdXJjZV0gSW5jb3JyZWN0IHJlc291cmNlIGxlYWsgd2FybmluZyB3aGVuIGNyZWF0
aW5nIHN0cmVhbSBpbiBjb25kaXRpb25hbAogICoJCQkJCQkJCWJ1ZyA0MDQ2NDkgLSBbMS44XVtj
b21waWxlcl0gZGV0ZWN0IGlsbGVnYWwgcmVmZXJlbmNlIHRvIGluZGlyZWN0IG9yIHJlZHVuZGFu
dCBzdXBlcgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcg
RGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgIEpl
c3BlciBTIE1vbGxlciA8amVzcGVyQHNlbHNrYWJldC5vcmc+IC0gQ29udHJpYnV0aW9ucyBmb3IK
ICAqCQkJCQkJCQlidWcgMzc4Njc0IC0gIlRoZSBtZXRob2QgY2FuIGJlIGRlY2xhcmVkIGFzIHN0
YXRpYyIgaXMgd3JvbmcKICAqICAgICBLZWlnbyBJbWFpIC0gQ29udHJpYnV0aW9uIGZvciAgYnVn
IDM4ODkwMyAtIENhbm5vdCBleHRlbmQgaW5uZXIgY2xhc3MgYXMgYW4gYW5vbnltb3VzIGNsYXNz
IHdoZW4gaXQgZXh0ZW5kcyB0aGUgb3V0ZXIgY2xhc3MKQEAgLTEyMzIsNCArMTIzMyw4IEBACiAJ
fQogCXJldHVybiB0cnVlOwogfQorQE92ZXJyaWRlCitwdWJsaWMgYm9vbGVhbiBoYXNEZWZhdWx0
TnVsbG5lc3NGb3IoaW50IGxvY2F0aW9uKSB7CisJcmV0dXJuIHRoaXMucGFyZW50Lmhhc0RlZmF1
bHROdWxsbmVzc0Zvcihsb2NhdGlvbik7Cit9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3Vw
L0NsYXNzU2NvcGUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ2xhc3NTY29wZS5qYXZhCmluZGV4IDVk
ZDBiYzAuLmYxODQ0YTggMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ2xhc3NTY29wZS5qYXZh
CisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9sb29rdXAvQ2xhc3NTY29wZS5qYXZhCkBAIC0yMSw2ICsyMSw3IEBACiAg
KgkJCQkJCQlCdWcgMzk1MDAyIC0gU2VsZiBib3VuZCBnZW5lcmljIGNsYXNzIGRvZXNuJ3QgcmVz
b2x2ZSBib3VuZHMgcHJvcGVybHkgZm9yIHdpbGRjYXJkcyBmb3IgY2VydGFpbiBwYXJhbWV0cmlz
YXRpb24uCiAgKgkJCQkJCQlCdWcgNDE2MTc2IC0gWzEuOF1bY29tcGlsZXJdW251bGxdIG51bGwg
dHlwZSBhbm5vdGF0aW9ucyBjYXVzZSBncmllZiBvbiB0eXBlIHZhcmlhYmxlcwogICoJCQkJCQkJ
QnVnIDQyNzE5OSAtIFsxLjhdW3Jlc291cmNlXSBhdm9pZCByZXNvdXJjZSBsZWFrIHdhcm5pbmdz
IG9uIFN0cmVhbXMgdGhhdCBoYXZlIG5vIHJlc291cmNlCisgKgkJCQkJCQlCdWcgNDI5OTU4IC0g
WzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5v
bk51bGxCeURlZmF1bHQKICAqICAgICAgICBBbmR5IENsZW1lbnQgKEdvUGl2b3RhbCwgSW5jKSBh
Y2xlbWVudEBnb3Bpdm90YWwuY29tIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqICAgICAgICAgICAg
ICAgICAgICAgICAgICBCdWcgNDE1ODIxIC0gWzEuOF1bY29tcGlsZXJdIENMQVNTX0VYVEVORFMg
dGFyZ2V0IHR5cGUgYW5ub3RhdGlvbiBtaXNzaW5nIGZvciBhbm9ueW1vdXMgY2xhc3NlcwogICoq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKiovCkBAIC0xMzA0LDYgKzEzMDUsMTcgQEAKIAkJcmV0dXJuIHRo
aXMucmVmZXJlbmNlQ29udGV4dDsKIAl9CiAKKwlAT3ZlcnJpZGUKKwlwdWJsaWMgYm9vbGVhbiBo
YXNEZWZhdWx0TnVsbG5lc3NGb3IoaW50IGxvY2F0aW9uKSB7CisJCVNvdXJjZVR5cGVCaW5kaW5n
IGJpbmRpbmcgPSB0aGlzLnJlZmVyZW5jZUNvbnRleHQuYmluZGluZzsKKwkJaWYgKGJpbmRpbmcg
IT0gbnVsbCkgeworCQkJaW50IG51bGxEZWZhdWx0ID0gYmluZGluZy5nZXROdWxsRGVmYXVsdCgp
OworCQkJaWYgKG51bGxEZWZhdWx0ICE9IDApCisJCQkJcmV0dXJuIChudWxsRGVmYXVsdCAmIGxv
Y2F0aW9uKSAhPSAwOworCQl9CisJCXJldHVybiB0aGlzLnBhcmVudC5oYXNEZWZhdWx0TnVsbG5l
c3NGb3IobG9jYXRpb24pOworCX0KKwogCXB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAJCWlm
ICh0aGlzLnJlZmVyZW5jZUNvbnRleHQgIT0gbnVsbCkKIAkJCXJldHVybiAiLS0tIENsYXNzIFNj
b3BlIC0tLVxuXG4iICAvLyROT04tTkxTLTEkCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0Nv
bXBpbGF0aW9uVW5pdFNjb3BlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0NvbXBpbGF0aW9uVW5pdFNj
b3BlLmphdmEKaW5kZXggZTQwNTIyMS4uNDEwOWIzZiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1
cC9Db21waWxhdGlvblVuaXRTY29wZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29tcGlsYXRp
b25Vbml0U2NvcGUuamF2YQpAQCAtMTIsNiArMTIsOCBAQAogICogQ29udHJpYnV0b3JzOgogICog
ICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICog
ICAgIEVybGluZyBFbGxpbmdzZW4gLSAgcGF0Y2ggZm9yIGJ1ZyAxMjU1NzAKKyAqICAgICBTdGVw
aGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBb
MS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9u
TnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xp
cHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXA7CiAKQEAgLTk0Myw0ICs5NDUsMTAgQEAK
IAl9CiAJcmV0dXJuIHRoaXMuaW1wb3J0UHRyOwogfQorQE92ZXJyaWRlCitwdWJsaWMgYm9vbGVh
biBoYXNEZWZhdWx0TnVsbG5lc3NGb3IoaW50IGxvY2F0aW9uKSB7CisJaWYgKHRoaXMuZlBhY2th
Z2UgIT0gbnVsbCkKKwkJcmV0dXJuICh0aGlzLmZQYWNrYWdlLmRlZmF1bHROdWxsbmVzcyAmIGxv
Y2F0aW9uKSAhPSAwOworCXJldHVybiBmYWxzZTsKK30KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvRWxlbWVudFZhbHVlUGFpci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9FbGVtZW50VmFsdWVQ
YWlyLmphdmEKaW5kZXggNWE0NjlkNi4uYTIyOTdhYiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1
cC9FbGVtZW50VmFsdWVQYWlyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9FbGVtZW50VmFsdWVQ
YWlyLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29w
eXJpZ2h0IChjKSAyMDAwLCAyMDA4IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29w
eXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBz
ZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1
dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNyw2ICs3LDggQEAKICAqCiAgKiBDb250cmli
dXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVu
dGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IKKyAqCQkJ
CQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlv
biBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
LwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwOwogCkBA
IC0xOCw2ICsyMCwzMCBAQAogCWNoYXJbXSBuYW1lOwogCXB1YmxpYyBPYmplY3QgdmFsdWU7CiAJ
cHVibGljIE1ldGhvZEJpbmRpbmcgYmluZGluZzsKKwkKKwkvKioKKwkgKiBXZSB3YW50IHRvIGF2
b2lkIGVhZ2VybHkgcmVzb2x2aW5nIG9mIGFsbCBlbnVtcyB0aGF0IGFyZSB1c2VkIGluIGFubm90
YXRpb25zLgorCSAqIFRoaXMgY2xhc3MgZW5jYXBzdWxhdGVzIGFuIHVucmVzb2x2ZWQgZW51bSBj
b25zdGFudCBhcyByZWZlcmVuY2VkIGluIGFuIEVsZW1lbnRWYWx1ZVBhaXIuCisJICogVGhlIGVu
dW0gY29uc3RhbnQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIGFza2luZyBnZXRWYWx1ZSgpCisJICov
CisJcHVibGljIHN0YXRpYyBjbGFzcyBVbnJlc29sdmVkRW51bUNvbnN0YW50IHsKKwkJUmVmZXJl
bmNlQmluZGluZyBlbnVtVHlwZTsKKwkJTG9va3VwRW52aXJvbm1lbnQgZW52aXJvbm1lbnQ7CisJ
CWNoYXJbXSBlbnVtQ29uc3RhbnROYW1lOworCQlVbnJlc29sdmVkRW51bUNvbnN0YW50KFJlZmVy
ZW5jZUJpbmRpbmcgZW51bVR5cGUsIExvb2t1cEVudmlyb25tZW50IGVudmlyb25tZW50LCBjaGFy
W10gZW51bUNvbnN0YW50TmFtZSkgeworCQkJdGhpcy5lbnVtVHlwZSA9IGVudW1UeXBlOworCQkJ
dGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50OworCQkJdGhpcy5lbnVtQ29uc3RhbnROYW1l
ID0gZW51bUNvbnN0YW50TmFtZTsKKwkJfQorCQlGaWVsZEJpbmRpbmcgZ2V0UmVzb2x2ZWQoKSB7
CisJCQlpZiAodGhpcy5lbnVtVHlwZS5pc1VucmVzb2x2ZWRUeXBlKCkpCisJCQkJdGhpcy5lbnVt
VHlwZSA9IChSZWZlcmVuY2VCaW5kaW5nKSBCaW5hcnlUeXBlQmluZGluZy5yZXNvbHZlVHlwZSh0
aGlzLmVudW1UeXBlLCB0aGlzLmVudmlyb25tZW50LCBmYWxzZSAvKiBubyByYXcgY29udmVyc2lv
biAqLyk7CisJCQlyZXR1cm4gdGhpcy5lbnVtVHlwZS5nZXRGaWVsZCh0aGlzLmVudW1Db25zdGFu
dE5hbWUsIGZhbHNlKTsKKwkJfQorCQlwdWJsaWMgY2hhcltdIGdldEVudW1Db25zdGFudE5hbWUo
KSB7CisJCQlyZXR1cm4gdGhpcy5lbnVtQ29uc3RhbnROYW1lOworCQl9CisJfQogCiBwdWJsaWMg
c3RhdGljIE9iamVjdCBnZXRWYWx1ZShFeHByZXNzaW9uIGV4cHJlc3Npb24pIHsKIAlpZiAoZXhw
cmVzc2lvbiA9PSBudWxsKQpAQCAtODgsNiArMTE0LDggQEAKICAqIEByZXR1cm4gdGhlIHZhbHVl
IG9mIHRoaXMgbWVtYmVyIHZhbHVlIHBhaXIgb3IgbnVsbCBpZiB0aGUgdmFsdWUgaXMgbWlzc2lu
ZyBvciBpcyBub3QgYSBjb21waWxlLXRpbWUgY29uc3RhbnQKICAqLwogcHVibGljIE9iamVjdCBn
ZXRWYWx1ZSgpIHsKKwlpZiAodGhpcy52YWx1ZSBpbnN0YW5jZW9mIFVucmVzb2x2ZWRFbnVtQ29u
c3RhbnQpCisJCXRoaXMudmFsdWUgPSAoKFVucmVzb2x2ZWRFbnVtQ29uc3RhbnQpdGhpcy52YWx1
ZSkuZ2V0UmVzb2x2ZWQoKTsKIAlyZXR1cm4gdGhpcy52YWx1ZTsKIH0KIApkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9JbXBsaWNpdE51bGxBbm5vdGF0aW9uVmVyaWZpZXIuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9sb29rdXAvSW1wbGljaXROdWxsQW5ub3RhdGlvblZlcmlmaWVyLmphdmEKaW5kZXggNTIxNWVh
Yi4uZmQzOGExOSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9JbXBsaWNpdE51bGxBbm5vdGF0
aW9uVmVyaWZpZXIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0ltcGxpY2l0TnVsbEFubm90YXRp
b25WZXJpZmllci5qYXZhCkBAIC03OCw3ICs3OCw5IEBACiAJCQlpZiAoY3VycmVudFR5cGUuaWQg
PT0gVHlwZUlkcy5UX0phdmFMYW5nT2JqZWN0KSB7CiAJCQkJcmV0dXJuOwogCQkJfQotCQkJYm9v
bGVhbiBuZWVkVG9BcHBseU5vbk51bGxEZWZhdWx0ID0gY3VycmVudE1ldGhvZC5oYXNOb25OdWxs
RGVmYXVsdCgpOworCQkJbG9uZyBzb3VyY2VMZXZlbCA9IHNjb3BlLmNvbXBpbGVyT3B0aW9ucygp
LnNvdXJjZUxldmVsOworCQkJYm9vbGVhbiBuZWVkVG9BcHBseU5vbk51bGxEZWZhdWx0ID0gY3Vy
cmVudE1ldGhvZC5oYXNOb25OdWxsRGVmYXVsdEZvcihCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblBh
cmFtZXRlcnxCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblJldHVyblR5cGUsCisJCQkJCQkJCQkJCQkJ
CQkJCQkJCQlzb3VyY2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRLMV84KTsKIAkJCS8v
IGNvbXBhdGliaWxpdHkgJiBpbmhlcml0YW5jZSBkbyBub3QgY29uc2lkZXIgY29uc3RydWN0b3Jz
IC8gc3RhdGljIG1ldGhvZHM6CiAJCQlib29sZWFuIGlzSW5zdGFuY2VNZXRob2QgPSAhY3VycmVu
dE1ldGhvZC5pc0NvbnN0cnVjdG9yKCkgJiYgIWN1cnJlbnRNZXRob2QuaXNTdGF0aWMoKTsKIAkJ
CWNvbXBsYWluICY9IGlzSW5zdGFuY2VNZXRob2Q7CkBAIC0xMTQsNyArMTE2LDYgQEAKIAkJCQkJ
Y2hlY2tOdWxsU3BlY0luaGVyaXRhbmNlKGN1cnJlbnRNZXRob2QsIHNyY01ldGhvZCwgbmVlZFRv
QXBwbHlOb25OdWxsRGVmYXVsdCwgY29tcGxhaW4sIGN1cnJlbnRTdXBlciwgc2NvcGUsIGluaGVy
aXRlZE5vbk51bGxuZXNzSW5mb3MpOwogCQkJCQluZWVkVG9BcHBseU5vbk51bGxEZWZhdWx0ID0g
ZmFsc2U7CiAJCQkJfQotCQkJCWxvbmcgc291cmNlTGV2ZWwgPSBzY29wZS5jb21waWxlck9wdGlv
bnMoKS5zb3VyY2VMZXZlbDsKIAkJCQkKIAkJCQkvLyB0cmFuc2ZlciBjb2xsZWN0ZWQgaW5mb3Jt
YXRpb24gaW50byBjdXJyZW50TWV0aG9kOgogCQkJCUluaGVyaXRlZE5vbk51bGxuZXNzSW5mbyBp
bmZvID0gaW5oZXJpdGVkTm9uTnVsbG5lc3NJbmZvc1swXTsKZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvTG9jYWxUeXBlQmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Mb2NhbFR5cGVCaW5k
aW5nLmphdmEKaW5kZXggMTBlZGQwNS4uYzZmZDE3ZCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1
cC9Mb2NhbFR5cGVCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Mb2NhbFR5cGVCaW5k
aW5nLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29w
eXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29w
eXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBz
ZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1
dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMTMsNyArMTMsOCBAQAogICogICAgIElCTSBD
b3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICogICAgIFN0ZXBo
YW4gSGVycm1hbm4gLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJCWJ1ZyAzNjU2NjIgLSBb
Y29tcGlsZXJdW251bGxdIHdhcm4gb24gY29udHJhZGljdG9yeSBhbmQgcmVkdW5kYW50IG51bGwg
YW5ub3RhdGlvbnMKLSAqCQkJCQkJCQlidWcgNDAxMDMwIC0gWzEuOF1bbnVsbF0gTnVsbCBhbmFs
eXNpcyBzdXBwb3J0IGZvciBsYW1iZGEgbWV0aG9kcy4gCisgKgkJCQkJCQkJYnVnIDQwMTAzMCAt
IFsxLjhdW251bGxdIE51bGwgYW5hbHlzaXMgc3VwcG9ydCBmb3IgbGFtYmRhIG1ldGhvZHMuCisg
KgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9j
YXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cDsK
IApAQCAtMTAzLDE4ICsxMDQsMjMgQEAKIAlyZXR1cm4gdGhpcy5zdXBlcmNsYXNzOyAvLyBkZWZh
dWx0IGFuc3dlcgogfQogCi1wcm90ZWN0ZWQgdm9pZCBjaGVja1JlZHVuZGFudE51bGxuZXNzRGVm
YXVsdFJlY3Vyc2UoQVNUTm9kZSBsb2NhdGlvbiwgQW5ub3RhdGlvbltdIGFubm90YXRpb25zLCBs
b25nIGFubm90YXRpb25UYWdCaXRzKSB7Citwcm90ZWN0ZWQgdm9pZCBjaGVja1JlZHVuZGFudE51
bGxuZXNzRGVmYXVsdFJlY3Vyc2UoQVNUTm9kZSBsb2NhdGlvbiwgQW5ub3RhdGlvbltdIGFubm90
YXRpb25zLCBsb25nIG51bGxCaXRzLCBib29sZWFuIGlzSmRrMTgpIHsKIAkKIAlpZiAoIWlzUHJv
dG90eXBlKCkpIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKIAkKLQlsb25nIG91
dGVyRGVmYXVsdCA9IHRoaXMuZW5jbG9zaW5nTWV0aG9kICE9IG51bGwgPyB0aGlzLmVuY2xvc2lu
Z01ldGhvZC50YWdCaXRzICYgKChUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0fFRh
Z0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCkpIDogMDsKKwlsb25nIG91
dGVyRGVmYXVsdCA9IDA7CisJaWYgKHRoaXMuZW5jbG9zaW5nTWV0aG9kICE9IG51bGwpIHsKKwkJ
b3V0ZXJEZWZhdWx0ID0gaXNKZGsxOCAKKwkJCQk/IHRoaXMuZW5jbG9zaW5nTWV0aG9kLmRlZmF1
bHROdWxsbmVzcyAKKwkJCQk6IHRoaXMuZW5jbG9zaW5nTWV0aG9kLnRhZ0JpdHMgJiAoVGFnQml0
cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdHxUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVj
aWZpZWRCeURlZmF1bHQpOworCX0KIAlpZiAob3V0ZXJEZWZhdWx0ICE9IDApIHsKLQkJaWYgKG91
dGVyRGVmYXVsdCA9PSBhbm5vdGF0aW9uVGFnQml0cykgeworCQlpZiAob3V0ZXJEZWZhdWx0ID09
IG51bGxCaXRzKSB7CiAJCQl0aGlzLnNjb3BlLnByb2JsZW1SZXBvcnRlcigpLm51bGxEZWZhdWx0
QW5ub3RhdGlvbklzUmVkdW5kYW50KGxvY2F0aW9uLCBhbm5vdGF0aW9ucywgdGhpcy5lbmNsb3Np
bmdNZXRob2QpOwogCQl9CiAJCXJldHVybjsKIAl9Ci0Jc3VwZXIuY2hlY2tSZWR1bmRhbnROdWxs
bmVzc0RlZmF1bHRSZWN1cnNlKGxvY2F0aW9uLCBhbm5vdGF0aW9ucywgYW5ub3RhdGlvblRhZ0Jp
dHMpOworCXN1cGVyLmNoZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0UmVjdXJzZShsb2NhdGlv
biwgYW5ub3RhdGlvbnMsIG51bGxCaXRzLCBpc0pkazE4KTsKIH0KIAogcHVibGljIGNoYXJbXSBj
b21wdXRlVW5pcXVlS2V5KGJvb2xlYW4gaXNMZWFmKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9v
a3VwL01ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kQmluZGluZy5qYXZh
CmluZGV4IDRjMmQ0ZDguLmJkZjVlMTAgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9k
QmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kQmluZGluZy5qYXZhCkBAIC0y
Myw2ICsyMyw3IEBACiAgKgkJCQkJCQkJQnVnIDQwMDg3NCAtIFsxLjhdW2NvbXBpbGVyXSBJbmZl
cmVuY2UgaW5mcmFzdHJ1Y3R1cmUgc2hvdWxkIGV2b2x2ZSB0byBtZWV0IEpMUzggMTgueCAoUGFy
dCBHIG9mIEpTUjMzNSBzcGVjKQogICoJCQkJCQkJCUJ1ZyA0MjUxNTIgLSBbMS44XSBbY29tcGls
ZXJdIExhbWJkYSBFeHByZXNzaW9uIG5vdCByZXNvbHZlZCBidXQgZmxvdyBhbmFseXplZCBsZWFk
aW5nIHRvIE5QRS4KICAqCQkJCQkJCQlCdWcgNDIzNTA1IC0gWzEuOF0gSW1wbGVtZW50ICIxOC41
LjQgTW9yZSBTcGVjaWZpYyBNZXRob2QgSW5mZXJlbmNlIgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTgg
LSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBA
Tm9uTnVsbEJ5RGVmYXVsdAogICogICAgIEplc3BlciBTdGVlbiBNb2xsZXIgLSBDb250cmlidXRp
b25zIGZvcgogICoJCQkJCQkJCUJ1ZyA0MTIxNTAgWzEuOF0gW2NvbXBpbGVyXSBFbmFibGUgcmVm
bGVjdGVkIHBhcmFtZXRlciBuYW1lcyBkdXJpbmcgYW5ub3RhdGlvbiBwcm9jZXNzaW5nCiAgKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKi8KQEAgLTM5LDYgKzQwLDcgQEAKIGltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LlR5cGVEZWNsYXJhdGlvbjsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuY2xhc3NmbXQuQ2xhc3NGaWxlQ29uc3RhbnRz
OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jb2RlZ2VuLkNvbnN0
YW50UG9vbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5D
b21waWxlck9wdGlvbnM7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LnV0aWwuVXRpbDsKIAogQFN1cHByZXNzV2FybmluZ3MoInJhd3R5cGVzIikKQEAgLTU3LDYgKzU5
LDcgQEAKIAogCS8qKiBTdG9yZSBudWxsbmVzcyBpbmZvcm1hdGlvbiBmcm9tIGFubm90YXRpb24g
KGluY2wuIGFwcGxpY2FibGUgZGVmYXVsdCkuICovCiAJcHVibGljIEJvb2xlYW5bXSBwYXJhbWV0
ZXJOb25OdWxsbmVzczsgIC8vIFRSVUUgbWVhbnMgQE5vbk51bGwgZGVjbGFyZWQsIEZBTFNFIG1l
YW5zIEBOdWxsYWJsZSBkZWNsYXJlZCwgbnVsbCBtZWFucyBub3RoaW5nIGRlY2xhcmVkCisJcHVi
bGljIGludCBkZWZhdWx0TnVsbG5lc3M7IC8vIGZvciBudWxsICp0eXBlKiBhbm5vdGF0aW9ucwog
CiAJLyoqIFN0b3JlIHBhcmFtZXRlciBuYW1lcyBmcm9tIE1ldGhvZFBhcmFtZXRlcnMgYXR0cmli
dXRlIChpbmNsLiBhcHBsaWNhYmxlIGRlZmF1bHQpLiAqLwogCXB1YmxpYyBjaGFyW11bXSBwYXJh
bWV0ZXJOYW1lcyA9IEJpbmRpbmcuTk9fUEFSQU1FVEVSX05BTUVTOwpAQCAtNTEwLDM0ICs1MTMs
MzkgQEAKIAl9CiB9CiAKKy8vcHJlOiBudWxsIGFubm90YXRpb24gYW5hbHlzaXMgaXMgZW5hYmxl
ZAogcHJvdGVjdGVkIHZvaWQgZmlsbEluRGVmYXVsdE5vbk51bGxuZXNzMTgoQWJzdHJhY3RNZXRo
b2REZWNsYXJhdGlvbiBzb3VyY2VNZXRob2QsIExvb2t1cEVudmlyb25tZW50IGVudikgewotCWJv
b2xlYW4gYWRkZWQgPSBmYWxzZTsKLQlpbnQgbGVuZ3RoID0gdGhpcy5wYXJhbWV0ZXJzLmxlbmd0
aDsKLQlmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7Ci0JCVR5cGVCaW5kaW5nIHBh
cmFtZXRlciA9IHRoaXMucGFyYW1ldGVyc1tpXTsKLQkJaWYgKHBhcmFtZXRlci5pc0Jhc2VUeXBl
KCkpCi0JCQljb250aW51ZTsKLQkJbG9uZyBleGlzdGluZyA9IHBhcmFtZXRlci50YWdCaXRzICYg
VGFnQml0cy5Bbm5vdGF0aW9uTnVsbE1BU0s7Ci0JCWlmIChleGlzdGluZyA9PSAwTCkgewotCQkJ
YWRkZWQgPSB0cnVlOwotCQkJaWYgKCFwYXJhbWV0ZXIuaXNCYXNlVHlwZSgpKSB7Ci0JCQkJdGhp
cy5wYXJhbWV0ZXJzW2ldID0gZW52LmNyZWF0ZUFubm90YXRlZFR5cGUocGFyYW1ldGVyLCBuZXcg
QW5ub3RhdGlvbkJpbmRpbmdbXXtlbnYuZ2V0Tm9uTnVsbEFubm90YXRpb24oKX0pOwotCQkJCWlm
IChzb3VyY2VNZXRob2QgIT0gbnVsbCkKLQkJCQkJc291cmNlTWV0aG9kLmFyZ3VtZW50c1tpXS5i
aW5kaW5nLnR5cGUgPSB0aGlzLnBhcmFtZXRlcnNbaV07CisJaWYgKGhhc05vbk51bGxEZWZhdWx0
Rm9yKERlZmF1bHRMb2NhdGlvblBhcmFtZXRlciwgdHJ1ZSkpIHsKKwkJYm9vbGVhbiBhZGRlZCA9
IGZhbHNlOworCQlpbnQgbGVuZ3RoID0gdGhpcy5wYXJhbWV0ZXJzLmxlbmd0aDsKKwkJZm9yIChp
bnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeworCQkJVHlwZUJpbmRpbmcgcGFyYW1ldGVyID0g
dGhpcy5wYXJhbWV0ZXJzW2ldOworCQkJaWYgKHBhcmFtZXRlci5pc0Jhc2VUeXBlKCkpCisJCQkJ
Y29udGludWU7CisJCQlsb25nIGV4aXN0aW5nID0gcGFyYW1ldGVyLnRhZ0JpdHMgJiBUYWdCaXRz
LkFubm90YXRpb25OdWxsTUFTSzsKKwkJCWlmIChleGlzdGluZyA9PSAwTCkgeworCQkJCWFkZGVk
ID0gdHJ1ZTsKKwkJCQlpZiAoIXBhcmFtZXRlci5pc0Jhc2VUeXBlKCkpIHsKKwkJCQkJdGhpcy5w
YXJhbWV0ZXJzW2ldID0gZW52LmNyZWF0ZUFubm90YXRlZFR5cGUocGFyYW1ldGVyLCBuZXcgQW5u
b3RhdGlvbkJpbmRpbmdbXXtlbnYuZ2V0Tm9uTnVsbEFubm90YXRpb24oKX0pOworCQkJCQlpZiAo
c291cmNlTWV0aG9kICE9IG51bGwpCisJCQkJCQlzb3VyY2VNZXRob2QuYXJndW1lbnRzW2ldLmJp
bmRpbmcudHlwZSA9IHRoaXMucGFyYW1ldGVyc1tpXTsKKwkJCQl9CisJCQl9IGVsc2UgaWYgKHNv
dXJjZU1ldGhvZCAhPSBudWxsICYmIChwYXJhbWV0ZXIudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3Rh
dGlvbk5vbk51bGwpICE9IDApIHsKKwkJCQlzb3VyY2VNZXRob2Quc2NvcGUucHJvYmxlbVJlcG9y
dGVyKCkubnVsbEFubm90YXRpb25Jc1JlZHVuZGFudChzb3VyY2VNZXRob2QsIGkpOwogCQkJfQot
CQl9IGVsc2UgaWYgKHNvdXJjZU1ldGhvZCAhPSBudWxsICYmIChwYXJhbWV0ZXIudGFnQml0cyAm
IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGwpICE9IDApIHsKLQkJCXNvdXJjZU1ldGhvZC5zY29w
ZS5wcm9ibGVtUmVwb3J0ZXIoKS5udWxsQW5ub3RhdGlvbklzUmVkdW5kYW50KHNvdXJjZU1ldGhv
ZCwgaSk7CiAJCX0KKwkJaWYgKGFkZGVkKQorCQkJdGhpcy50YWdCaXRzIHw9IFRhZ0JpdHMuSGFz
UGFyYW1ldGVyQW5ub3RhdGlvbnM7CiAJfQotCWlmIChhZGRlZCkKLQkJdGhpcy50YWdCaXRzIHw9
IFRhZ0JpdHMuSGFzUGFyYW1ldGVyQW5ub3RhdGlvbnM7Ci0JaWYgKCAgIHRoaXMucmV0dXJuVHlw
ZSAhPSBudWxsCi0JCSYmICF0aGlzLnJldHVyblR5cGUuaXNCYXNlVHlwZSgpCi0JCSYmICh0aGlz
LnJldHVyblR5cGUudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxNQVNLKSA9PSAwKQot
CXsKLQkJdGhpcy5yZXR1cm5UeXBlID0gZW52LmNyZWF0ZUFubm90YXRlZFR5cGUodGhpcy5yZXR1
cm5UeXBlLCBuZXcgQW5ub3RhdGlvbkJpbmRpbmdbXXtlbnYuZ2V0Tm9uTnVsbEFubm90YXRpb24o
KX0pOwotCX0gZWxzZSBpZiAoc291cmNlTWV0aG9kICE9IG51bGwgJiYgKHRoaXMucmV0dXJuVHlw
ZS50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbCkgIT0gMCkgewotCQlzb3VyY2VN
ZXRob2Quc2NvcGUucHJvYmxlbVJlcG9ydGVyKCkubnVsbEFubm90YXRpb25Jc1JlZHVuZGFudChz
b3VyY2VNZXRob2QsIC0xLypzaWduaWZpZXMgbWV0aG9kIHJldHVybiovKTsKKwlpZiAoaGFzTm9u
TnVsbERlZmF1bHRGb3IoRGVmYXVsdExvY2F0aW9uUmV0dXJuVHlwZSwgdHJ1ZSkpIHsKKwkJaWYg
KCAgIHRoaXMucmV0dXJuVHlwZSAhPSBudWxsCisJCQkmJiAhdGhpcy5yZXR1cm5UeXBlLmlzQmFz
ZVR5cGUoKQorCQkJJiYgKHRoaXMucmV0dXJuVHlwZS50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0
aW9uTnVsbE1BU0spID09IDApCisJCXsKKwkJCXRoaXMucmV0dXJuVHlwZSA9IGVudi5jcmVhdGVB
bm5vdGF0ZWRUeXBlKHRoaXMucmV0dXJuVHlwZSwgbmV3IEFubm90YXRpb25CaW5kaW5nW117ZW52
LmdldE5vbk51bGxBbm5vdGF0aW9uKCl9KTsKKwkJfSBlbHNlIGlmIChzb3VyY2VNZXRob2QgIT0g
bnVsbCAmJiAodGhpcy5yZXR1cm5UeXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25O
dWxsKSAhPSAwKSB7CisJCQlzb3VyY2VNZXRob2Quc2NvcGUucHJvYmxlbVJlcG9ydGVyKCkubnVs
bEFubm90YXRpb25Jc1JlZHVuZGFudChzb3VyY2VNZXRob2QsIC0xLypzaWduaWZpZXMgbWV0aG9k
IHJldHVybiovKTsKKwkJfQogCX0KIH0KIApAQCAtNjI2LDExICs2MzQsMTYgQEAKIAkJCUFic3Ry
YWN0TWV0aG9kRGVjbGFyYXRpb24gbWV0aG9kRGVjbCA9IHR5cGVEZWNsLmRlY2xhcmF0aW9uT2Yo
b3JpZ2luYWxNZXRob2QpOwogCQkJaWYgKG1ldGhvZERlY2wgIT0gbnVsbCkKIAkJCQlBU1ROb2Rl
LnJlc29sdmVBbm5vdGF0aW9ucyhtZXRob2REZWNsLnNjb3BlLCBtZXRob2REZWNsLmFubm90YXRp
b25zLCBvcmlnaW5hbE1ldGhvZCk7Ci0JCQlsb25nIG51bGxEZWZhdWx0Qml0cyA9IHRoaXMudGFn
Qml0cyAmIChUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0fFRhZ0JpdHMuQW5ub3Rh
dGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCk7Ci0JCQlpZiAobnVsbERlZmF1bHRCaXRzICE9
IDAgJiYgdGhpcy5kZWNsYXJpbmdDbGFzcyBpbnN0YW5jZW9mIFNvdXJjZVR5cGVCaW5kaW5nKSB7
Ci0JCQkJU291cmNlVHlwZUJpbmRpbmcgZGVjbGFyaW5nU291cmNlVHlwZSA9IChTb3VyY2VUeXBl
QmluZGluZykgdGhpcy5kZWNsYXJpbmdDbGFzczsKLQkJCQlpZiAoZGVjbGFyaW5nU291cmNlVHlw
ZS5jaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdE9uZShtZXRob2REZWNsLCBtZXRob2REZWNs
LmFubm90YXRpb25zLCBudWxsRGVmYXVsdEJpdHMpKSB7Ci0JCQkJCWRlY2xhcmluZ1NvdXJjZVR5
cGUuY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRSZWN1cnNlKG1ldGhvZERlY2wsIG1ldGhv
ZERlY2wuYW5ub3RhdGlvbnMsIG51bGxEZWZhdWx0Qml0cyk7CisJCQlDb21waWxlck9wdGlvbnMg
b3B0aW9ucyA9IHNjb3BlLmNvbXBpbGVyT3B0aW9ucygpOworCQkJaWYgKG9wdGlvbnMuaXNBbm5v
dGF0aW9uQmFzZWROdWxsQW5hbHlzaXNFbmFibGVkKSB7CisJCQkJYm9vbGVhbiBpc0pkazE4ID0g
b3B0aW9ucy5zb3VyY2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRLMV84OworCQkJCWxv
bmcgbnVsbERlZmF1bHRCaXRzID0gaXNKZGsxOCA/IHRoaXMuZGVmYXVsdE51bGxuZXNzCisJCQkJ
CQk6IHRoaXMudGFnQml0cyAmIChUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0fFRh
Z0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCk7CisJCQkJaWYgKG51bGxE
ZWZhdWx0Qml0cyAhPSAwICYmIHRoaXMuZGVjbGFyaW5nQ2xhc3MgaW5zdGFuY2VvZiBTb3VyY2VU
eXBlQmluZGluZykgeworCQkJCQlTb3VyY2VUeXBlQmluZGluZyBkZWNsYXJpbmdTb3VyY2VUeXBl
ID0gKFNvdXJjZVR5cGVCaW5kaW5nKSB0aGlzLmRlY2xhcmluZ0NsYXNzOworCQkJCQlpZiAoZGVj
bGFyaW5nU291cmNlVHlwZS5jaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdE9uZShtZXRob2RE
ZWNsLCBtZXRob2REZWNsLmFubm90YXRpb25zLCBudWxsRGVmYXVsdEJpdHMsIGlzSmRrMTgpKSB7
CisJCQkJCQlkZWNsYXJpbmdTb3VyY2VUeXBlLmNoZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0
UmVjdXJzZShtZXRob2REZWNsLCBtZXRob2REZWNsLmFubm90YXRpb25zLCBudWxsRGVmYXVsdEJp
dHMsIGlzSmRrMTgpOworCQkJCQl9CiAJCQkJfQogCQkJfQogCQl9CkBAIC0xMjQ5LDEyICsxMjYy
LDE4IEBACiBwdWJsaWMgVHlwZVZhcmlhYmxlQmluZGluZ1tdIHR5cGVWYXJpYWJsZXMoKSB7CiAJ
cmV0dXJuIHRoaXMudHlwZVZhcmlhYmxlczsKIH0KLXB1YmxpYyBib29sZWFuIGhhc05vbk51bGxE
ZWZhdWx0KCkgewotCWlmICgodGhpcy50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVs
bEJ5RGVmYXVsdCkgIT0gMCkKLQkJcmV0dXJuIHRydWU7Ci0JaWYgKCh0aGlzLnRhZ0JpdHMgJiBU
YWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQpICE9IDApCi0JCXJldHVy
biBmYWxzZTsKLQlyZXR1cm4gdGhpcy5kZWNsYXJpbmdDbGFzcy5oYXNOb25OdWxsRGVmYXVsdCgp
OworLy9wcmU6IG51bGwgYW5ub3RhdGlvbiBhbmFseXNpcyBpcyBlbmFibGVkCitwdWJsaWMgYm9v
bGVhbiBoYXNOb25OdWxsRGVmYXVsdEZvcihpbnQgbG9jYXRpb24sIGJvb2xlYW4gdXNlVHlwZUFu
bm90YXRpb25zKSB7CisJaWYgKHVzZVR5cGVBbm5vdGF0aW9ucykgeworCQlpZiAodGhpcy5kZWZh
dWx0TnVsbG5lc3MgIT0gMCkKKwkJCXJldHVybiAodGhpcy5kZWZhdWx0TnVsbG5lc3MgJiBsb2Nh
dGlvbikgIT0gMDsKKwl9IGVsc2UgeworCQlpZiAoKHRoaXMudGFnQml0cyAmIFRhZ0JpdHMuQW5u
b3RhdGlvbk5vbk51bGxCeURlZmF1bHQpICE9IDApCisJCQlyZXR1cm4gdHJ1ZTsKKwkJaWYgKCh0
aGlzLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQp
ICE9IDApCisJCQlyZXR1cm4gZmFsc2U7CisJfQorCXJldHVybiB0aGlzLmRlY2xhcmluZ0NsYXNz
Lmhhc05vbk51bGxEZWZhdWx0Rm9yKGxvY2F0aW9uLCB1c2VUeXBlQW5ub3RhdGlvbnMpOwogfQog
CiBwdWJsaWMgYm9vbGVhbiByZWRlY2xhcmVzUHVibGljT2JqZWN0TWV0aG9kKFNjb3BlIHNjb3Bl
KSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL01ldGhvZFNjb3BlLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL01ldGhvZFNjb3BlLmphdmEKaW5kZXggY2NlODQ3My4uYTllMjIwMiAxMDA2NDQKLS0t
IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2xvb2t1cC9NZXRob2RTY29wZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0
aG9kU2NvcGUuamF2YQpAQCAtMTgsNiArMTgsNyBAQAogICoJCQkJCQkJCWJ1ZyAzODIzNTQgLSBb
MS44XVtjb21waWxlcl0gQ29tcGlsZXIgc2lsZW50IG9uIGNvbmZsaWN0aW5nIG1vZGlmaWVyCiAg
KgkJCQkJCQkJYnVnIDQwMTAzMCAtIFsxLjhdW251bGxdIE51bGwgYW5hbHlzaXMgc3VwcG9ydCBm
b3IgbGFtYmRhIG1ldGhvZHMuCiAgKgkJCQkJCQkJQnVnIDQxNjE3NiAtIFsxLjhdW2NvbXBpbGVy
XVtudWxsXSBudWxsIHR5cGUgYW5ub3RhdGlvbnMgY2F1c2UgZ3JpZWYgb24gdHlwZSB2YXJpYWJs
ZXMKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1
bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgICBKZXNwZXIg
UyBNb2xsZXIgLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJYnVnIDM4MjcwMSAtIFsxLjhd
W2NvbXBpbGVyXSBJbXBsZW1lbnQgc2VtYW50aWMgYW5hbHlzaXMgb2YgTGFtYmRhIGV4cHJlc3Np
b25zICYgUmVmZXJlbmNlIGV4cHJlc3Npb24KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpAQCAt
NTY4LDQgKzU2OSwxMyBAQAogdm9pZCByZXNvbHZlVHlwZVBhcmFtZXRlcihUeXBlUGFyYW1ldGVy
IHR5cGVQYXJhbWV0ZXIpIHsKIAl0eXBlUGFyYW1ldGVyLnJlc29sdmUodGhpcyk7CiB9CitAT3Zl
cnJpZGUKK3B1YmxpYyBib29sZWFuIGhhc0RlZmF1bHROdWxsbmVzc0ZvcihpbnQgbG9jYXRpb24p
IHsKKwlpZiAodGhpcy5yZWZlcmVuY2VDb250ZXh0IGluc3RhbmNlb2YgQWJzdHJhY3RNZXRob2RE
ZWNsYXJhdGlvbikgeworCQlNZXRob2RCaW5kaW5nIGJpbmRpbmcgPSAoKEFic3RyYWN0TWV0aG9k
RGVjbGFyYXRpb24pIHRoaXMucmVmZXJlbmNlQ29udGV4dCkuYmluZGluZzsKKwkJaWYgKGJpbmRp
bmcgIT0gbnVsbCAmJiBiaW5kaW5nLmRlZmF1bHROdWxsbmVzcyAhPSAwKQorCQkJcmV0dXJuIChi
aW5kaW5nLmRlZmF1bHROdWxsbmVzcyAmIGxvY2F0aW9uKSAhPSAwOworCX0KKwlyZXR1cm4gdGhp
cy5wYXJlbnQuaGFzRGVmYXVsdE51bGxuZXNzRm9yKGxvY2F0aW9uKTsKK30KIH0KZGlmZiAtLWdp
dCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9sb29rdXAvTWV0aG9kVmVyaWZpZXIxNS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9N
ZXRob2RWZXJpZmllcjE1LmphdmEKaW5kZXggMzNmMGFmZC4uYmFmMjA3MyAxMDA2NDQKLS0tIGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9NZXRob2RWZXJpZmllcjE1LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9N
ZXRob2RWZXJpZmllcjE1LmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21w
YW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0
aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMjgsNiArMjgsNyBAQAog
ICoJCQkJCQkJCUJ1ZyA0MjAwODAgLSBbMS44XSBPdmVycmlkZGVuIERlZmF1bHQgbWV0aG9kIGlz
IHJlcG9ydGVkIGFzIGR1cGxpY2F0ZWQKICAqCQkJCQkJCQlCdWcgNDA0NjkwIC0gWzEuOF1bY29t
cGlsZXJdIHJldmlzaXQgYnJpZGdlIGdlbmVyYXRpb24gYWZ0ZXIgVk0gYnVnIGlzIGZpeGVkCiAg
KgkJCQkJCQkJQnVnIDQxMDMyNSAtIFsxLjddW2NvbXBpbGVyXSBHZW5lcmlmaWVkIG1ldGhvZCBv
dmVycmlkZSBkaWZmZXJlbnQgYmV0d2VlbiBqYXZhYyBhbmQgZWNsaXBzZSBjb21waWxlcgorICoJ
CQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0
aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXA7CiAK
QEAgLTc4LDcgKzc5LDkgQEAKIAlBYnN0cmFjdE1ldGhvZERlY2xhcmF0aW9uIHNyY01ldGhvZCA9
IG51bGw7CiAJaWYgKGFuYWx5c2VOdWxsQW5ub3RhdGlvbnMgJiYgdGhpcy50eXBlLmVxdWFscyhj
b25jcmV0ZU1ldGhvZC5kZWNsYXJpbmdDbGFzcykpIC8vIGlzIGN1cnJlbnRNZXRob2QgZnJvbSB0
aGUgY3VycmVudCB0eXBlPwogCQlzcmNNZXRob2QgPSBjb25jcmV0ZU1ldGhvZC5zb3VyY2VNZXRo
b2QoKTsKLQlib29sZWFuIGhhc05vbk51bGxEZWZhdWx0ID0gY29uY3JldGVNZXRob2QuaGFzTm9u
TnVsbERlZmF1bHQoKTsKKwlib29sZWFuIHVzZVR5cGVBbm5vdGF0aW9ucyA9IHRoaXMuZW52aXJv
bm1lbnQuZ2xvYmFsT3B0aW9ucy5zb3VyY2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRL
MV84OworCWJvb2xlYW4gaGFzTm9uTnVsbERlZmF1bHQgPSBhbmFseXNlTnVsbEFubm90YXRpb25z
ICYmCisJCQljb25jcmV0ZU1ldGhvZC5oYXNOb25OdWxsRGVmYXVsdEZvcihCaW5kaW5nLkRlZmF1
bHRMb2NhdGlvblBhcmFtZXRlcnxCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblJldHVyblR5cGUsIHVz
ZVR5cGVBbm5vdGF0aW9ucyk7CiAJZm9yIChpbnQgaSA9IDAsIGwgPSBhYnN0cmFjdE1ldGhvZHMu
bGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAJCU1ldGhvZEJpbmRpbmcgYWJzdHJhY3RNZXRob2QgPSBh
YnN0cmFjdE1ldGhvZHNbaV07CiAJCWlmIChjb25jcmV0ZU1ldGhvZC5pc1ZhcmFyZ3MoKSAhPSBh
YnN0cmFjdE1ldGhvZC5pc1ZhcmFyZ3MoKSkKQEAgLTM5MSw3ICszOTQsOCBAQAogCQlBYnN0cmFj
dE1ldGhvZERlY2xhcmF0aW9uIHNyY01ldGhvZCA9IG51bGw7CiAJCWlmICh0aGlzLnR5cGUuZXF1
YWxzKGN1cnJlbnRNZXRob2QuZGVjbGFyaW5nQ2xhc3MpKSAvLyBpcyBjdXJyZW50TWV0aG9kIGZy
b20gdGhlIGN1cnJlbnQgdHlwZT8KIAkJCXNyY01ldGhvZCA9IGN1cnJlbnRNZXRob2Quc291cmNl
TWV0aG9kKCk7Ci0JCWJvb2xlYW4gaGFzTm9uTnVsbERlZmF1bHQgPSBjdXJyZW50TWV0aG9kLmhh
c05vbk51bGxEZWZhdWx0KCk7CisJCWJvb2xlYW4gdXNlVHlwZUFubm90YXRpb25zID0gb3B0aW9u
cy5zb3VyY2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRLMV84OworCQlib29sZWFuIGhh
c05vbk51bGxEZWZhdWx0ID0gY3VycmVudE1ldGhvZC5oYXNOb25OdWxsRGVmYXVsdEZvcihCaW5k
aW5nLkRlZmF1bHRMb2NhdGlvblBhcmFtZXRlcnxCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblJldHVy
blR5cGUsIHVzZVR5cGVBbm5vdGF0aW9ucyk7CiAJCWZvciAoaW50IGkgPSBsZW5ndGg7IC0taSA+
PSAwOykKIAkJCWlmICghY3VycmVudE1ldGhvZC5pc1N0YXRpYygpICYmICFtZXRob2RzW2ldLmlz
U3RhdGljKCkpCiAJCQkJY2hlY2tOdWxsU3BlY0luaGVyaXRhbmNlKGN1cnJlbnRNZXRob2QsIHNy
Y01ldGhvZCwgaGFzTm9uTnVsbERlZmF1bHQsIHRydWUsIG1ldGhvZHNbaV0sIHRoaXMudHlwZS5z
Y29wZSwgbnVsbCk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL01vc3RTcGVjaWZpY0V4Y2Vw
dGlvbk1ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTW9zdFNwZWNpZmljRXhjZXB0
aW9uTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IDM3ZDA1MzYuLmJmYjFmMGQgMTAwNjQ0Ci0tLSBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9sb29rdXAvTW9zdFNwZWNpZmljRXhjZXB0aW9uTWV0aG9kQmluZGluZy5qYXZhCisr
KyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9sb29rdXAvTW9zdFNwZWNpZmljRXhjZXB0aW9uTWV0aG9kQmluZGluZy5qYXZh
CkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAo
YykgMjAwMCwgMjAxMSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAo
YykgMjAwMCwgMjAxNCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMg
cmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAq
IGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGlj
IExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFu
ZCBpcyBhdmFpbGFibGUgYXQKQEAgLTcsNyArNyw5IEBACiAgKgogICogQ29udHJpYnV0b3JzOgog
ICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgot
ICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yIGJ1ZyAxODYzNDIgLSBb
Y29tcGlsZXJdW251bGxdIFVzaW5nIGFubm90YXRpb25zIGZvciBudWxsIGNoZWNraW5nCisgKiAg
ICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbnMgZm9yCisgKgkJCQkJCQkJQnVnIDE4
NjM0MiAtIFtjb21waWxlcl1bbnVsbF0gVXNpbmcgYW5ub3RhdGlvbnMgZm9yIG51bGwgY2hlY2tp
bmcKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1
bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9v
a3VwOwogCkBAIC0yOSw2ICszMSw3IEBACiAJCQkJb3JpZ2luYWxNZXRob2QuZGVjbGFyaW5nQ2xh
c3MpOwogCQl0aGlzLm9yaWdpbmFsTWV0aG9kID0gb3JpZ2luYWxNZXRob2Q7CiAJCXRoaXMucGFy
YW1ldGVyTm9uTnVsbG5lc3MgPSBvcmlnaW5hbE1ldGhvZC5wYXJhbWV0ZXJOb25OdWxsbmVzczsK
KwkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBvcmlnaW5hbE1ldGhvZC5kZWZhdWx0TnVsbG5lc3M7
CiAJfQogCQogCXB1YmxpYyBNZXRob2RCaW5kaW5nIG9yaWdpbmFsKCkgewpkaWZmIC0tZ2l0IGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9OZXN0ZWRUeXBlQmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9OZXN0
ZWRUeXBlQmluZGluZy5qYXZhCmluZGV4IDk3MzU4MjcuLmRjNWQ2NmYgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9sb29rdXAvTmVzdGVkVHlwZUJpbmRpbmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL05l
c3RlZFR5cGVCaW5kaW5nLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21w
YW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0
aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMTEsNyArMTEsOSBAQAog
ICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQ
SSBhbmQgaW1wbGVtZW50YXRpb24KLSAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0
aW9uIGZvciAgYnVnIDM2NTY2MiAtIFtjb21waWxlcl1bbnVsbF0gd2FybiBvbiBjb250cmFkaWN0
b3J5IGFuZCByZWR1bmRhbnQgbnVsbCBhbm5vdGF0aW9ucworICogICAgIFN0ZXBoYW4gSGVycm1h
bm4gLSBDb250cmlidXRpb25zIGZvcgorICoJCQkJCQkJCUJ1ZyAzNjU2NjIgLSBbY29tcGlsZXJd
W251bGxdIHdhcm4gb24gY29udHJhZGljdG9yeSBhbmQgcmVkdW5kYW50IG51bGwgYW5ub3RhdGlv
bnMKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1
bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgICBLZWlnbyBJ
bWFpIC0gQ29udHJpYnV0aW9uIGZvciAgYnVnIDM4ODkwMyAtIENhbm5vdCBleHRlbmQgaW5uZXIg
Y2xhc3MgYXMgYW4gYW5vbnltb3VzIGNsYXNzIHdoZW4gaXQgZXh0ZW5kcyB0aGUgb3V0ZXIgY2xh
c3MKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIubG9va3VwOwpAQCAtMTI3LDE2ICsxMjksMTYgQEAKIAlyZXR1cm4gc3lu
dGhMb2NhbDsKIH0KIAotcHJvdGVjdGVkIHZvaWQgY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1
bHRSZWN1cnNlKEFTVE5vZGUgbG9jYXRpb24sIEFubm90YXRpb25bXSBhbm5vdGF0aW9ucywgbG9u
ZyBhbm5vdGF0aW9uVGFnQml0cykgeworcHJvdGVjdGVkIHZvaWQgY2hlY2tSZWR1bmRhbnROdWxs
bmVzc0RlZmF1bHRSZWN1cnNlKEFTVE5vZGUgbG9jYXRpb24sIEFubm90YXRpb25bXSBhbm5vdGF0
aW9ucywgbG9uZyBudWxsQml0cywgYm9vbGVhbiBpc0pkazE4KSB7CiAJaWYgKCFpc1Byb3RvdHlw
ZSgpKSB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAJUmVmZXJlbmNlQmluZGlu
ZyBjdXJyZW50VHlwZSA9IHRoaXMuZW5jbG9zaW5nVHlwZTsKIAlkbyB7Ci0JCWlmICghKChTb3Vy
Y2VUeXBlQmluZGluZyljdXJyZW50VHlwZSkuY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRP
bmUobG9jYXRpb24sIGFubm90YXRpb25zLCBhbm5vdGF0aW9uVGFnQml0cykpIHsKKwkJaWYgKCEo
KFNvdXJjZVR5cGVCaW5kaW5nKWN1cnJlbnRUeXBlKS5jaGVja1JlZHVuZGFudE51bGxuZXNzRGVm
YXVsdE9uZShsb2NhdGlvbiwgYW5ub3RhdGlvbnMsIG51bGxCaXRzLCBpc0pkazE4KSkgewogCQkJ
cmV0dXJuOwogCQl9CiAJCWN1cnJlbnRUeXBlID0gY3VycmVudFR5cGUuZW5jbG9zaW5nVHlwZSgp
OwogCX0gd2hpbGUgKGN1cnJlbnRUeXBlIGluc3RhbmNlb2YgU291cmNlVHlwZUJpbmRpbmcpOwot
CXN1cGVyLmNoZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0UmVjdXJzZShsb2NhdGlvbiwgYW5u
b3RhdGlvbnMsIGFubm90YXRpb25UYWdCaXRzKTsKKwlzdXBlci5jaGVja1JlZHVuZGFudE51bGxu
ZXNzRGVmYXVsdFJlY3Vyc2UobG9jYXRpb24sIGFubm90YXRpb25zLCBudWxsQml0cywgaXNKZGsx
OCk7CiB9CiAKIC8qIEFuc3dlciB0aGUgcmVjZWl2ZXIncyBlbmNsb3NpbmcgdHlwZS4uLiBudWxs
IGlmIHRoZSByZWNlaXZlciBpcyBhIHRvcCBsZXZlbCB0eXBlLgpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9QYXJhbWV0ZXJpemVkR2VuZXJpY01ldGhvZEJpbmRpbmcuamF2YSBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvUGFyYW1ldGVyaXplZEdlbmVyaWNNZXRob2RCaW5kaW5nLmphdmEKaW5kZXggZWVmOTNh
Yi4uNzE5ZTY2NSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVkR2VuZXJp
Y01ldGhvZEJpbmRpbmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRHZW5l
cmljTWV0aG9kQmluZGluZy5qYXZhCkBAIC0yMiw2ICsyMiw3IEBACiAgKgkJCQkJCQkJQnVnIDQy
NzQzOCAtIFsxLjhdW2NvbXBpbGVyXSBOUEUgYXQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLmFzdC5Db25kaXRpb25hbEV4cHJlc3Npb24uZ2VuZXJhdGVDb2RlKENvbmRpdGlvbmFs
RXhwcmVzc2lvbi5qYXZhOjI4MCkKICAqCQkJCQkJCQlCdWcgNDE4NzQzIC0gWzEuOF1bbnVsbF0g
Y29udHJhZGljdG9yeSBhbm5vdGF0aW9ucyBvbiBpbnZvY2F0aW9uIG9mIGdlbmVyaWMgbWV0aG9k
IG5vdCByZXBvcnRlZAogICoJCQkJCQkJCUJ1ZyA0MTYxODIgLSBbMS44XVtjb21waWxlcl1bbnVs
bF0gQ29udHJhZGljdG9yeSBudWxsIGFubm90YXRpb25zIG5vdCByZWplY3RlZAorICoJCQkJCQkJ
CUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0
dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBw
YWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXA7CiAKQEAgLTQ4
NCw2ICs0ODUsNyBAQAogCSAgICAJCQkJCQkJCQk6IFNjb3BlLnN1YnN0aXR1dGUocmF3VHlwZSwg
b3JpZ2luYWxNZXRob2QucmV0dXJuVHlwZSkpOwogCSAgICB0aGlzLndhc0luZmVycmVkID0gZmFs
c2U7IC8vIG5vdCByZXN1bHRpbmcgZnJvbSBtZXRob2QgaW52b2NhdGlvbiBpbmZlcnJlbmNlCiAJ
ICAgIHRoaXMucGFyYW1ldGVyTm9uTnVsbG5lc3MgPSBvcmlnaW5hbE1ldGhvZC5wYXJhbWV0ZXJO
b25OdWxsbmVzczsKKwkgICAgdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBvcmlnaW5hbE1ldGhvZC5k
ZWZhdWx0TnVsbG5lc3M7CiAJfQogCiAgICAgLyoqCkBAIC01MjYsNiArNTI4LDcgQEAKIAkJfQog
CSAgICB0aGlzLndhc0luZmVycmVkID0gdHJ1ZTsvLyByZXN1bHRpbmcgZnJvbSBtZXRob2QgaW52
b2NhdGlvbiBpbmZlcnJlbmNlCiAJICAgIHRoaXMucGFyYW1ldGVyTm9uTnVsbG5lc3MgPSBvcmln
aW5hbE1ldGhvZC5wYXJhbWV0ZXJOb25OdWxsbmVzczsKKwkgICAgdGhpcy5kZWZhdWx0TnVsbG5l
c3MgPSBvcmlnaW5hbE1ldGhvZC5kZWZhdWx0TnVsbG5lc3M7CiAJICAgIC8vIHNwZWNpYWwgY2Fz
ZTogQE5vbk51bGwgZm9yIGEgcGFyYW1ldGVyIHRoYXQgaXMgaW5mZXJyZWQgdG8gJ251bGwnIGlz
IGVuY29kZWQgdGhlIG9sZCB3YXkKIAkgICAgLy8gYmVjYXVzZSB3ZSBjYW5ub3QgKGFuZCBkb24n
dCB3YW50IHRvKSBhZGQgdHlwZSBhbm5vdGF0aW9ucyB0byBOdWxsVHlwZUJpbmRpbmcuCiAJICAg
IGludCBsZW4gPSB0aGlzLnBhcmFtZXRlcnMubGVuZ3RoOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xv
b2t1cC9QYXJhbWV0ZXJpemVkTWV0aG9kQmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJh
bWV0ZXJpemVkTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IDQ0YjNhMDAuLjFkZDM5ZTEgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1ldGVyaXplZE1ldGhvZEJpbmRpbmcuamF2YQorKysg
Yi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRNZXRob2RCaW5kaW5nLmphdmEKQEAgLTE4LDYg
KzE4LDcgQEAKICAqCQkJCQkJCQlCdWcgNDE1MDQzIC0gWzEuOF1bbnVsbF0gRm9sbG93LXVwIHJl
IG51bGwgdHlwZSBhbm5vdGF0aW9ucyBhZnRlciBidWcgMzkyMDk5CiAgKgkJCQkJCQkJQnVnIDQx
NzI5NSAtIFsxLjhbW251bGxdIE1hc3NhZ2UgdHlwZSBhbm5vdGF0ZWQgbnVsbCBhbmFseXNpcyB0
byBnZWwgd2VsbCB3aXRoIGRlZXAgZW5jb2RlZCB0eXBlIGJpbmRpbmdzLgogICoJCQkJCQkJCUJ1
ZyA0MjUxNTIgLSBbMS44XSBbY29tcGlsZXJdIExhbWJkYSBFeHByZXNzaW9uIG5vdCByZXNvbHZl
ZCBidXQgZmxvdyBhbmFseXplZCBsZWFkaW5nIHRvIE5QRS4KKyAqCQkJCQkJCQlCdWcgNDI5OTU4
IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2Yg
QE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwOwogCkBAIC01MSw2ICs1Miw3IEBA
CiAJCSAqLwogCQl0aGlzLnRhZ0JpdHMgPSBvcmlnaW5hbE1ldGhvZC50YWdCaXRzICYgflRhZ0Jp
dHMuSGFzTWlzc2luZ1R5cGU7CiAJCXRoaXMucGFyYW1ldGVyTm9uTnVsbG5lc3MgPSBvcmlnaW5h
bE1ldGhvZC5wYXJhbWV0ZXJOb25OdWxsbmVzczsKKwkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBv
cmlnaW5hbE1ldGhvZC5kZWZhdWx0TnVsbG5lc3M7CiAKIAkJZmluYWwgVHlwZVZhcmlhYmxlQmlu
ZGluZ1tdIG9yaWdpbmFsVmFyaWFibGVzID0gb3JpZ2luYWxNZXRob2QudHlwZVZhcmlhYmxlczsK
IAkJU3Vic3RpdHV0aW9uIHN1YnN0aXR1dGlvbiA9IG51bGw7CkBAIC0xODYsNiArMTg4LDcgQEAK
IAkJICovCiAJCXRoaXMudGFnQml0cyA9IG9yaWdpbmFsTWV0aG9kLnRhZ0JpdHMgJiB+VGFnQml0
cy5IYXNNaXNzaW5nVHlwZTsKIAkJdGhpcy5wYXJhbWV0ZXJOb25OdWxsbmVzcyA9IG9yaWdpbmFs
TWV0aG9kLnBhcmFtZXRlck5vbk51bGxuZXNzOworCQl0aGlzLmRlZmF1bHROdWxsbmVzcyA9IG9y
aWdpbmFsTWV0aG9kLmRlZmF1bHROdWxsbmVzczsKIAogCQlmaW5hbCBUeXBlVmFyaWFibGVCaW5k
aW5nW10gb3JpZ2luYWxWYXJpYWJsZXMgPSBvcmlnaW5hbE1ldGhvZC50eXBlVmFyaWFibGVzOwog
CQlTdWJzdGl0dXRpb24gc3Vic3RpdHV0aW9uID0gbnVsbDsKZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvUmVmZXJlbmNlQmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9SZWZlcmVuY2VCaW5k
aW5nLmphdmEKaW5kZXggMzkxMzdhMi4uNzY1MGIyMyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1
cC9SZWZlcmVuY2VCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9SZWZlcmVuY2VCaW5k
aW5nLmphdmEKQEAgLTMzLDYgKzMzLDcgQEAKICAqCQkJCQkJCQlCdWcgNDI4MDE5IC0gWzEuOF1b
Y29tcGlsZXJdIFR5cGUgaW5mZXJlbmNlIGZhaWx1cmUgd2l0aCBuZXN0ZWQgZ2VuZXJpYyBpbnZv
Y2F0aW9uLgogICoJCQkJCQkJCUJ1ZyA0MjcxOTkgLSBbMS44XVtyZXNvdXJjZV0gYXZvaWQgcmVz
b3VyY2UgbGVhayB3YXJuaW5ncyBvbiBTdHJlYW1zIHRoYXQgaGF2ZSBubyByZXNvdXJjZQogICoJ
CQkJCQkJCUJ1ZyA0MTg3NDMgLSBbMS44XVtudWxsXSBjb250cmFkaWN0b3J5IGFubm90YXRpb25z
IG9uIGludm9jYXRpb24gb2YgZ2VuZXJpYyBtZXRob2Qgbm90IHJlcG9ydGVkCisgKgkJCQkJCQkJ
QnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0
cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKiAgICAgIEplc3BlciBTIE1vbGxlciAtIENv
bnRyaWJ1dGlvbnMgZm9yCiAgKgkJCQkJCQkJYnVnIDM4MjcwMSAtIFsxLjhdW2NvbXBpbGVyXSBJ
bXBsZW1lbnQgc2VtYW50aWMgYW5hbHlzaXMgb2YgTGFtYmRhIGV4cHJlc3Npb25zICYgUmVmZXJl
bmNlIGV4cHJlc3Npb24KICAqCQkJCQkJCQlidWcgNDEyMTUzIC0gWzEuOF1bY29tcGlsZXJdIENo
ZWNrIHZhbGlkaXR5IG9mIGFubm90YXRpb25zIHdoaWNoIG1heSBiZSByZXBlYXRhYmxlCkBAIC0x
MDk0LDIwICsxMDk1LDM1IEBACiB9CiAKIC8qKgotICogQW5zd2VyIHdoZXRoZXIgYSBATm9uTnVs
bEJ5RGVmYXVsdCBpcyBhcHBsaWNhYmxlIGF0IHRoZSBnaXZlbiBtZXRob2QgYmluZGluZy4KKyAq
IEFuc3dlciB3aGV0aGVyIGEgQE5vbk51bGxCeURlZmF1bHQgaXMgYXBwbGljYWJsZSBhdCB0aGUg
cmVmZXJlbmNlIGJpbmRpbmcsCisgKiBmb3IgMS44IGNoZWNrIGlmIHRoZSBkZWZhdWx0IGlzIGFw
cGxpY2FibGUgdG8gdGhlIGdpdmVuIGtpbmQgb2YgbG9jYXRpb24uCiAgKi8KLWJvb2xlYW4gaGFz
Tm9uTnVsbERlZmF1bHQoKSB7CisvLyBwcmU6IG51bGwgYW5ub3RhdGlvbiBhbmFseXNpcyBpcyBl
bmFibGVkCitib29sZWFuIGhhc05vbk51bGxEZWZhdWx0Rm9yKGludCBsb2NhdGlvbiwgYm9vbGVh
biB1c2VUeXBlQW5ub3RhdGlvbnMpIHsKIAkvLyBOb3RlLCBTVEIgb3ZlcnJpZGVzIGZvciBjb3Jy
ZWN0bHkgaGFuZGxpbmcgbG9jYWwgdHlwZXMKIAlSZWZlcmVuY2VCaW5kaW5nIGN1cnJlbnRUeXBl
ID0gdGhpczsKIAl3aGlsZSAoY3VycmVudFR5cGUgIT0gbnVsbCkgewotCQlpZiAoKGN1cnJlbnRU
eXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKQot
CQkJcmV0dXJuIHRydWU7Ci0JCWlmICgoY3VycmVudFR5cGUudGFnQml0cyAmIFRhZ0JpdHMuQW5u
b3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCkgIT0gMCkKLQkJCXJldHVybiBmYWxzZTsK
KwkJaWYgKHVzZVR5cGVBbm5vdGF0aW9ucykgeworCQkJaW50IG51bGxEZWZhdWx0ID0gKChSZWZl
cmVuY2VCaW5kaW5nKWN1cnJlbnRUeXBlLm9yaWdpbmFsKCkpLmdldE51bGxEZWZhdWx0KCk7CisJ
CQlpZiAobnVsbERlZmF1bHQgIT0gMCkKKwkJCQlyZXR1cm4gKG51bGxEZWZhdWx0ICYgbG9jYXRp
b24pICE9IDA7CisJCX0gZWxzZSB7CisJCQlpZiAoKGN1cnJlbnRUeXBlLnRhZ0JpdHMgJiBUYWdC
aXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKQorCQkJCXJldHVybiB0cnVlOwor
CQkJaWYgKChjdXJyZW50VHlwZS50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3Bl
Y2lmaWVkQnlEZWZhdWx0KSAhPSAwKQorCQkJCXJldHVybiBmYWxzZTsKKwkJfQogCQljdXJyZW50
VHlwZSA9IGN1cnJlbnRUeXBlLmVuY2xvc2luZ1R5cGUoKTsKIAl9CiAJLy8gcGFja2FnZQotCXJl
dHVybiB0aGlzLmdldFBhY2thZ2UoKS5kZWZhdWx0TnVsbG5lc3MgPT0gTk9OTlVMTF9CWV9ERUZB
VUxUOworCWlmICh1c2VUeXBlQW5ub3RhdGlvbnMpCisJCXJldHVybiAodGhpcy5nZXRQYWNrYWdl
KCkuZGVmYXVsdE51bGxuZXNzICYgbG9jYXRpb24pICE9IDA7CisJZWxzZQorCQlyZXR1cm4gdGhp
cy5nZXRQYWNrYWdlKCkuZGVmYXVsdE51bGxuZXNzID09IE5PTk5VTExfQllfREVGQVVMVDsKK30K
KworaW50IGdldE51bGxEZWZhdWx0KCkgeworCXJldHVybiAwOwogfQogCiBwdWJsaWMgZmluYWwg
Ym9vbGVhbiBoYXNSZXN0cmljdGVkQWNjZXNzKCkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1
cC9TY29wZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9TY29wZS5qYXZhCmluZGV4IDM4ODY4ZGQuLjYw
NjE3MmYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvU2NvcGUuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL1Njb3BlLmphdmEKQEAgLTQ1LDYgKzQ1LDcgQEAKICAqCQkJCQkJCQlCdWcgNDI0NzI4
IC0gWzEuOF1bbnVsbF0gVW5leHBlY3RlZCBlcnJvcjogVGhlIG51bGxuZXNzIGFubm90YXRpb24g
J1hYWFgnIGlzIG5vdCBhcHBsaWNhYmxlIGF0IHRoaXMgbG9jYXRpb24gCiAgKgkJCQkJCQkJQnVn
IDQyODgxMSAtIFsxLjhdW2NvbXBpbGVyXSBUeXBlIHdpdG5lc3MgdW5uZWNlc3NhcmlseSByZXF1
aXJlZAogICoJCQkJCQkJCUJ1ZyA0Mjk0MjQgLSBbMS44XVtpbmZlcmVuY2VdIFByb2JsZW0gaW5m
ZXJyaW5nIHR5cGUgb2YgbWV0aG9kJ3MgcGFyYW1ldGVyCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAt
IFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBO
b25OdWxsQnlEZWZhdWx0CiAgKiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9ucyBm
b3IKICAqCQkJCQkJCQlCdWcgMzc4Njc0IC0gIlRoZSBtZXRob2QgY2FuIGJlIGRlY2xhcmVkIGFz
IHN0YXRpYyIgaXMgd3JvbmcKICAqICAJCQkJCQkJQnVnIDQwNTA2NiAtIFsxLjhdW2NvbXBpbGVy
XVtjb2RlZ2VuXSBJbXBsZW1lbnQgY29kZSBnZW5lcmF0aW9uIGluZnJhc3RydWN0dXJlIGZvciBK
U1IzMzUKQEAgLTk0Nyw4ICs5NDgsOCBAQAogCQkJCWNvbnRpbnVlIG5leHRWYXJpYWJsZTsKIAkJ
CWJvb2xlYW4gaXNGaXJzdEJvdW5kVHlwZVZhcmlhYmxlID0gZmFsc2U7CiAJCQlUeXBlQmluZGlu
ZyBzdXBlclR5cGUgPSB0aGlzLmtpbmQgPT0gTUVUSE9EX1NDT1BFCi0JCQkJPyB0eXBlUmVmLnJl
c29sdmVUeXBlKChCbG9ja1Njb3BlKXRoaXMsIGZhbHNlLypubyBib3VuZCBjaGVjayovKQotCQkJ
CTogdHlwZVJlZi5yZXNvbHZlVHlwZSgoQ2xhc3NTY29wZSl0aGlzKTsKKwkJCQk/IHR5cGVSZWYu
cmVzb2x2ZVR5cGUoKEJsb2NrU2NvcGUpdGhpcywgZmFsc2UvKm5vIGJvdW5kIGNoZWNrKi8sIEJp
bmRpbmcuRGVmYXVsdExvY2F0aW9uVHlwZUJvdW5kKQorCQkJCTogdHlwZVJlZi5yZXNvbHZlVHlw
ZSgoQ2xhc3NTY29wZSl0aGlzLCBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVCb3VuZCk7CiAJ
CQlpZiAoc3VwZXJUeXBlID09IG51bGwpIHsKIAkJCQl0eXBlVmFyaWFibGUudGFnQml0cyB8PSBU
YWdCaXRzLkhpZXJhcmNoeUhhc1Byb2JsZW1zOwogCQkJfSBlbHNlIHsKQEAgLTUwNzAsNiArNTA3
MSwxMCBAQAogCQl9CiAJCXJldHVybiB0cnVlOwogCX0KKwkKKwkvKiogQW5zd2VyIGEgZGVmYXVs
dE51bGxuZXNzIGRlZmluZWQgZm9yIHRoZSBjbG9zZXN0IGVuY2xvc2luZyBzY29wZSwgdXNpbmcg
Yml0cyBmcm9tIEJpbmRpbmcuTnVsbG5lc3NEZWZhdWx0TUFTSy4gKi8KKwlwdWJsaWMgYWJzdHJh
Y3QgYm9vbGVhbiBoYXNEZWZhdWx0TnVsbG5lc3NGb3IoaW50IGxvY2F0aW9uKTsKKwogCXB1Ymxp
YyBzdGF0aWMgQmxvY2tTY29wZSB0eXBlQW5ub3RhdGlvbnNSZXNvbHV0aW9uU2NvcGUoU2NvcGUg
c2NvcGUpIHsKIAkJQmxvY2tTY29wZSByZXNvbHV0aW9uU2NvcGUgPSBudWxsOwogCQlzd2l0Y2go
c2NvcGUua2luZCkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Tb3VyY2VUeXBlQmluZGlu
Zy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Tb3VyY2VUeXBlQmluZGluZy5qYXZhCmluZGV4IDgzYmUy
NTEuLmE5ZWM2NTMgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvU291cmNlVHlwZUJpbmRpbmcu
amF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1NvdXJjZVR5cGVCaW5kaW5nLmphdmEKQEAgLTM0LDYg
KzM0LDcgQEAKICAqCQkJCQkJCQlCdWcgNDE3Mjk1IC0gWzEuOFtbbnVsbF0gTWFzc2FnZSB0eXBl
IGFubm90YXRlZCBudWxsIGFuYWx5c2lzIHRvIGdlbCB3ZWxsIHdpdGggZGVlcCBlbmNvZGVkIHR5
cGUgYmluZGluZ3MuCiAgKgkJCQkJCQkJQnVnIDQyNjA0OCAtIFsxLjhdIE5QRSBpbiBUeXBlVmFy
aWFibGVCaW5kaW5nLmludGVybmFsQm91bmRDaGVjayB3aGVuIHBhcmVudGhlc2VzIGFyZSBub3Qg
YmFsYW5jZWQKICAqCQkJCQkJCQlCdWcgMzkyMjM4IC0gWzEuOF1bY29tcGlsZXJdW251bGxdIERl
dGVjdCBzZW1hbnRpY2FsbHkgaW52YWxpZCBudWxsIHR5cGUgYW5ub3RhdGlvbnMKKyAqCQkJCQkJ
CQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBh
dHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgICAgSmVzcGVyIFMgTW9sbGVyIDxq
ZXNwZXJAc2Vsc2thYmV0Lm9yZz4gLSAgQ29udHJpYnV0aW9ucyBmb3IKICAqCQkJCQkJCQlCdWcg
NDEyMTUzIC0gWzEuOF1bY29tcGlsZXJdIENoZWNrIHZhbGlkaXR5IG9mIGFubm90YXRpb25zIHdo
aWNoIG1heSBiZSByZXBlYXRhYmxlCiAgKiAgICAgIFRpbGwgQnJ5Y2hjeSAtIENvbnRyaWJ1dGlv
bnMgZm9yCkBAIC05MSw3ICs5Miw3IEBACiAKIAlwcml2YXRlIFNpbXBsZUxvb2t1cFRhYmxlIHN0
b3JlZEFubm90YXRpb25zID0gbnVsbDsgLy8ga2V5cyBhcmUgdGhpcyBSZWZlcmVuY2VCaW5kaW5n
ICYgaXRzIGZpZWxkcyBhbmQgbWV0aG9kcywgdmFsdWUgaXMgYW4gQW5ub3RhdGlvbkhvbGRlcgog
Ci0JcHJpdmF0ZSBpbnQgZGVmYXVsdE51bGxuZXNzOworCXB1YmxpYyBpbnQgZGVmYXVsdE51bGxu
ZXNzOwogCXByaXZhdGUgaW50IG51bGxuZXNzRGVmYXVsdEluaXRpYWxpemVkID0gMDsgLy8gMDog
bm90aGluZzsgMTogdHlwZTsgMjogcGFja2FnZQogCXByaXZhdGUgaW50IGxhbWJkYU9yZGluYWwg
PSAwOwogCXByaXZhdGUgUmVmZXJlbmNlQmluZGluZyBjb250YWluZXJBbm5vdGF0aW9uVHlwZSA9
IG51bGw7CkBAIC0xMzIyLDcgKzEzMjMsNyBAQAogCXRoaXMuc2NvcGUuYnVpbGRNZXRob2RzKCk7
CiB9CiAKLXByaXZhdGUgaW50IGdldE51bGxEZWZhdWx0KCkgeworaW50IGdldE51bGxEZWZhdWx0
KCkgewogCQogCWlmICghaXNQcm90b3R5cGUoKSkgewogCQlyZXR1cm4gdGhpcy5wcm90b3R5cGUu
Z2V0TnVsbERlZmF1bHQoKTsKQEAgLTE3NDQsNyArMTc0NSw3IEBACiAJCQkJCS8vIGVudW0gY29u
c3RhbnRzIG5laXRoZXIgaGF2ZSBhIHR5cGUgZGVjbGFyYXRpb24gbm9yIGNhbiB0aGV5IGJlIG51
bGwKIAkJCQkJZmllbGQudGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsOwogCQkJ
CX0gZWxzZSB7Ci0JCQkJCWlmIChoYXNOb25OdWxsRGVmYXVsdCgpKSB7CisJCQkJCWlmIChoYXNO
b25OdWxsRGVmYXVsdEZvcihEZWZhdWx0TG9jYXRpb25GaWVsZCwgc291cmNlTGV2ZWwgPj0gQ2xh
c3NGaWxlQ29uc3RhbnRzLkpESzFfOCkpIHsKIAkJCQkJCWZpZWxkLmZpbGxJbkRlZmF1bHROb25O
dWxsbmVzcyhmaWVsZERlY2wsIGluaXRpYWxpemF0aW9uU2NvcGUpOwogCQkJCQl9CiAJCQkJCS8v
IHZhbGlkYXRlIG51bGwgYW5ub3RhdGlvbjoKQEAgLTIwMzMsMzUgKzIwMzQsNzggQEAKIAkJfQog
CX0KIAl0aGlzLm51bGxuZXNzRGVmYXVsdEluaXRpYWxpemVkID0gMTsKLQkvLyB0cmFuc2ZlciBu
dWxsbmVzcyBpbmZvIGZyb20gdGFnQml0cyB0byB0aGlzLm51bGxuZXNzRGVmYXVsdEFubm90YXRp
b24KLQlpbnQgbmV3RGVmYXVsdE51bGxuZXNzID0gTk9fTlVMTF9ERUZBVUxUOwotCWlmICgoYW5u
b3RhdGlvblRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1
bHQpICE9IDApCi0JCW5ld0RlZmF1bHROdWxsbmVzcyA9IE5VTExfVU5TUEVDSUZJRURfQllfREVG
QVVMVDsKLQllbHNlIGlmICgoYW5ub3RhdGlvblRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25O
b25OdWxsQnlEZWZhdWx0KSAhPSAwKQotCQluZXdEZWZhdWx0TnVsbG5lc3MgPSBOT05OVUxMX0JZ
X0RFRkFVTFQ7Ci0JaWYgKG5ld0RlZmF1bHROdWxsbmVzcyAhPSBOT19OVUxMX0RFRkFVTFQpIHsK
LQkJaWYgKGlzUGFja2FnZUluZm8pIHsKLQkJCXBrZy5kZWZhdWx0TnVsbG5lc3MgPSBuZXdEZWZh
dWx0TnVsbG5lc3M7Ci0JCX0gZWxzZSB7Ci0JCQl0aGlzLmRlZmF1bHROdWxsbmVzcyA9IG5ld0Rl
ZmF1bHROdWxsbmVzczsKLQkJCVR5cGVEZWNsYXJhdGlvbiB0eXBlRGVjbCA9IHRoaXMuc2NvcGUu
cmVmZXJlbmNlQ29udGV4dDsKLQkJCWxvbmcgbnVsbERlZmF1bHRCaXRzID0gYW5ub3RhdGlvblRh
Z0JpdHMgJiAoVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0fFRhZ0Jp
dHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQpOwotCQkJY2hlY2tSZWR1bmRhbnROdWxsbmVz
c0RlZmF1bHRSZWN1cnNlKHR5cGVEZWNsLCB0eXBlRGVjbC5hbm5vdGF0aW9ucywgbnVsbERlZmF1
bHRCaXRzKTsKKwlib29sZWFuIGlzSmRrMTggPSB0aGlzLnNjb3BlLmNvbXBpbGVyT3B0aW9ucygp
LnNvdXJjZUxldmVsID49IENsYXNzRmlsZUNvbnN0YW50cy5KREsxXzg7CisJaWYgKGlzSmRrMTgp
IHsKKwkJaWYgKHRoaXMuZGVmYXVsdE51bGxuZXNzICE9IDApIHsKKwkJCWlmIChpc1BhY2thZ2VJ
bmZvKSB7CisJCQkJcGtnLmRlZmF1bHROdWxsbmVzcyA9IHRoaXMuZGVmYXVsdE51bGxuZXNzOwor
CQkJfSBlbHNlIHsKKwkJCQlUeXBlRGVjbGFyYXRpb24gdHlwZURlY2wgPSB0aGlzLnNjb3BlLnJl
ZmVyZW5jZUNvbnRleHQ7CisJCQkJY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRSZWN1cnNl
KHR5cGVEZWNsLCB0eXBlRGVjbC5hbm5vdGF0aW9ucywgdGhpcy5kZWZhdWx0TnVsbG5lc3MsIGlz
SmRrMTgpOworCQkJfQorCQl9IGVsc2UgaWYgKGlzUGFja2FnZUluZm8gfHwgKGlzSW5EZWZhdWx0
UGtnICYmICEodGhpcyBpbnN0YW5jZW9mIE5lc3RlZFR5cGVCaW5kaW5nKSkpIHsKKwkJCXRoaXMu
c2NvcGUucHJvYmxlbVJlcG9ydGVyKCkubWlzc2luZ05vbk51bGxCeURlZmF1bHRBbm5vdGF0aW9u
KHRoaXMuc2NvcGUucmVmZXJlbmNlQ29udGV4dCk7CisJCQlpZiAoIWlzSW5EZWZhdWx0UGtnKQor
CQkJCXBrZy5kZWZhdWx0TnVsbG5lc3MgPSBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQ7CiAJ
CX0KLQl9IGVsc2UgaWYgKGlzUGFja2FnZUluZm8gfHwgKGlzSW5EZWZhdWx0UGtnICYmICEodGhp
cyBpbnN0YW5jZW9mIE5lc3RlZFR5cGVCaW5kaW5nKSkpIHsKLQkJdGhpcy5zY29wZS5wcm9ibGVt
UmVwb3J0ZXIoKS5taXNzaW5nTm9uTnVsbEJ5RGVmYXVsdEFubm90YXRpb24odGhpcy5zY29wZS5y
ZWZlcmVuY2VDb250ZXh0KTsKLQkJaWYgKCFpc0luRGVmYXVsdFBrZykKLQkJCXBrZy5kZWZhdWx0
TnVsbG5lc3MgPSBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQ7CisJfSBlbHNlIHsKKwkJLy8g
dHJhbnNmZXIgbnVsbG5lc3MgaW5mbyBmcm9tIHRhZ0JpdHMgdG8gdGhpcy5udWxsbmVzc0RlZmF1
bHRBbm5vdGF0aW9uCisJCWludCBuZXdEZWZhdWx0TnVsbG5lc3MgPSBOT19OVUxMX0RFRkFVTFQ7
CisJCWlmICgoYW5ub3RhdGlvblRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVj
aWZpZWRCeURlZmF1bHQpICE9IDApCisJCQluZXdEZWZhdWx0TnVsbG5lc3MgPSBOVUxMX1VOU1BF
Q0lGSUVEX0JZX0RFRkFVTFQ7CisJCWVsc2UgaWYgKChhbm5vdGF0aW9uVGFnQml0cyAmIFRhZ0Jp
dHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQpICE9IDApCisJCQluZXdEZWZhdWx0TnVsbG5l
c3MgPSBOT05OVUxMX0JZX0RFRkFVTFQ7CisJCWlmIChuZXdEZWZhdWx0TnVsbG5lc3MgIT0gTk9f
TlVMTF9ERUZBVUxUKSB7CisJCQlpZiAoaXNQYWNrYWdlSW5mbykgeworCQkJCXBrZy5kZWZhdWx0
TnVsbG5lc3MgPSBuZXdEZWZhdWx0TnVsbG5lc3M7CisJCQl9IGVsc2UgeworCQkJCXRoaXMuZGVm
YXVsdE51bGxuZXNzID0gbmV3RGVmYXVsdE51bGxuZXNzOworCQkJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlRGVjbCA9IHRoaXMuc2NvcGUucmVmZXJlbmNlQ29udGV4dDsKKwkJCQlsb25nIG51bGxEZWZh
dWx0Qml0cyA9IGFubm90YXRpb25UYWdCaXRzICYgKFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNw
ZWNpZmllZEJ5RGVmYXVsdHxUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KTsKKwkJ
CQljaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UodHlwZURlY2wsIHR5cGVEZWNs
LmFubm90YXRpb25zLCBudWxsRGVmYXVsdEJpdHMsIGZhbHNlKTsKKwkJCX0KKwkJfSBlbHNlIGlm
IChpc1BhY2thZ2VJbmZvIHx8IChpc0luRGVmYXVsdFBrZyAmJiAhKHRoaXMgaW5zdGFuY2VvZiBO
ZXN0ZWRUeXBlQmluZGluZykpKSB7CisJCQl0aGlzLnNjb3BlLnByb2JsZW1SZXBvcnRlcigpLm1p
c3NpbmdOb25OdWxsQnlEZWZhdWx0QW5ub3RhdGlvbih0aGlzLnNjb3BlLnJlZmVyZW5jZUNvbnRl
eHQpOworCQkJaWYgKCFpc0luRGVmYXVsdFBrZykKKwkJCQlwa2cuZGVmYXVsdE51bGxuZXNzID0g
TlVMTF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUOworCQl9CisJfQorCW1heWJlTWFya1R5cGVQYXJh
bWV0ZXJzTm9uTnVsbCgpOworfQorCitwcml2YXRlIHZvaWQgbWF5YmVNYXJrVHlwZVBhcmFtZXRl
cnNOb25OdWxsKCkgeworCS8vIHdoZW4gY3JlYXRpbmcgdHlwZSB2YXJpYWJsZXMgd2UgZGlkbid0
IHlldCBoYXZlIHRoZSBkZWZhdWx0TnVsbG5lc3MsIGZpbGwgaXQgaW4gbm93OgorCWlmICh0aGlz
LnNjb3BlID09IG51bGwgfHwgIXRoaXMuc2NvcGUuaGFzRGVmYXVsdE51bGxuZXNzRm9yKERlZmF1
bHRMb2NhdGlvblR5cGVQYXJhbWV0ZXIpKQorCQlyZXR1cm47CisJaWYgKHRoaXMudHlwZVZhcmlh
YmxlcyAhPSBudWxsICYmIHRoaXMudHlwZVZhcmlhYmxlcy5sZW5ndGggPiAwKSB7CisJCUFubm90
YXRpb25CaW5kaW5nW10gYW5ub3RzID0gbmV3IEFubm90YXRpb25CaW5kaW5nW117IHRoaXMuZW52
aXJvbm1lbnQuZ2V0Tm9uTnVsbEFubm90YXRpb24oKSB9OworCQlmb3IgKGludCBpID0gMDsgaSA8
IHRoaXMudHlwZVZhcmlhYmxlcy5sZW5ndGg7IGkrKykgeworCQkJVHlwZVZhcmlhYmxlQmluZGlu
ZyB0dmIgPSB0aGlzLnR5cGVWYXJpYWJsZXNbaV07CisJCQlpZiAoKHR2Yi50YWdCaXRzICYgVGFn
Qml0cy5Bbm5vdGF0aW9uTnVsbE1BU0spID09IDApCisJCQkJdGhpcy50eXBlVmFyaWFibGVzW2ld
ID0gKFR5cGVWYXJpYWJsZUJpbmRpbmcpIHRoaXMuZW52aXJvbm1lbnQuY3JlYXRlQW5ub3RhdGVk
VHlwZSh0dmIsIGFubm90cyk7CisJCX0KIAl9CiB9CiAKLXByb3RlY3RlZCB2b2lkIGNoZWNrUmVk
dW5kYW50TnVsbG5lc3NEZWZhdWx0UmVjdXJzZShBU1ROb2RlIGxvY2F0aW9uLCBBbm5vdGF0aW9u
W10gYW5ub3RhdGlvbnMsIGxvbmcgYW5ub3RhdGlvblRhZ0JpdHMpIHsKKy8qKgorICogUmVjdXJz
aXZlbHkgY2hlY2sgaWYgdGhlIGdpdmVuIGFubm90YXRpb25zIGFyZSByZWR1bmRhbnQgd2l0aCBl
cXVhbCBhbm5vdGF0aW9ucyBhdCBhbiBlbmNsb3NpbmcgbGV2ZWwuCisgKiBAcGFyYW0gbG9jYXRp
b24gZmFsbGJhY2sgbG9jYXRpb24gdG8gcmVwb3J0IHRoZSB3YXJuaW5nIGFnYWluc3QgKGlmIHdl
IGNhbid0IGJsYW1lIGEgc3BlY2lmaWMgYW5ub3RhdGlvbikKKyAqIEBwYXJhbSBhbm5vdGF0aW9u
cyBzZWFyY2ggdGhlc2UgZm9yIHRoZSBhbm5vdGF0aW9uIHRoYXQgc2hvdWxkIGJlIGJsYW1lZCBp
biB3YXJuaW5nIG1lc3NhZ2VzCisgKiBAcGFyYW0gbnVsbEJpdHMgaW4gMS43LSB0aW1lcyB0aGVz
ZSBhcmUgdGhlIGFubm90YXRpb25UYWdCaXRzLCBpbiAxLjgrIHRoZSBiaXR2ZWN0b3IgZnJvbSB7
QGxpbmsgQmluZGluZyNOdWxsbmVzc0RlZmF1bHRNQVNLfQorICogQHBhcmFtIGlzSmRrMTggdG9n
Z2xlcyB0aGUgaW50ZXJwcmV0YXRpb24gb2YgJ251bGxCaXRzJworICogCisgKiBAcHJlIG51bGwg
YW5ub3RhdGlvbiBhbmFseXNpcyBpcyBlbmFibGVkCisgKi8KK3Byb3RlY3RlZCB2b2lkIGNoZWNr
UmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0UmVjdXJzZShBU1ROb2RlIGxvY2F0aW9uLCBBbm5vdGF0
aW9uW10gYW5ub3RhdGlvbnMsIGxvbmcgbnVsbEJpdHMsIGJvb2xlYW4gaXNKZGsxOCkgewogCQog
CWlmICghaXNQcm90b3R5cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwog
CQogCWlmICh0aGlzLmZQYWNrYWdlLmRlZmF1bHROdWxsbmVzcyAhPSBOT19OVUxMX0RFRkFVTFQp
IHsKLQkJaWYgKCh0aGlzLmZQYWNrYWdlLmRlZmF1bHROdWxsbmVzcyA9PSBOT05OVUxMX0JZX0RF
RkFVTFQKLQkJCQkmJiAoKGFubm90YXRpb25UYWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTm9u
TnVsbEJ5RGVmYXVsdCkgIT0gMCkpKSB7CisJCWJvb2xlYW4gaXNSZWR1bmRhbnQgPSBpc0pkazE4
CisJCQkJPyB0aGlzLmZQYWNrYWdlLmRlZmF1bHROdWxsbmVzcyA9PSBudWxsQml0cworCQkJCTog
KHRoaXMuZlBhY2thZ2UuZGVmYXVsdE51bGxuZXNzID09IE5PTk5VTExfQllfREVGQVVMVAorCQkJ
CQkJJiYgKChudWxsQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQpICE9
IDApKTsKKwkJaWYgKGlzUmVkdW5kYW50KSB7CiAJCQl0aGlzLnNjb3BlLnByb2JsZW1SZXBvcnRl
cigpLm51bGxEZWZhdWx0QW5ub3RhdGlvbklzUmVkdW5kYW50KGxvY2F0aW9uLCBhbm5vdGF0aW9u
cywgdGhpcy5mUGFja2FnZSk7CiAJCX0KIAkJcmV0dXJuOwpAQCAtMjA2OSwxMyArMjExMywxNiBA
QAogfQogCiAvLyByZXR1cm46IHNob3VsZCBjYWxsZXIgY29udGludWUgc2VhcmNoaW5nPwotcHJv
dGVjdGVkIGJvb2xlYW4gY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRPbmUoQVNUTm9kZSBs
b2NhdGlvbiwgQW5ub3RhdGlvbltdIGFubm90YXRpb25zLCBsb25nIGFubm90YXRpb25UYWdCaXRz
KSB7Citwcm90ZWN0ZWQgYm9vbGVhbiBjaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdE9uZShB
U1ROb2RlIGxvY2F0aW9uLCBBbm5vdGF0aW9uW10gYW5ub3RhdGlvbnMsIGxvbmcgbnVsbEJpdHMs
IGJvb2xlYW4gaXNKZGsxOCkgewogCQogCWlmICghaXNQcm90b3R5cGUoKSkgdGhyb3cgbmV3IEls
bGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogCQogCWludCB0aGlzRGVmYXVsdCA9IGdldE51bGxEZWZh
dWx0KCk7Ci0JaWYgKHRoaXNEZWZhdWx0ID09IE5PTk5VTExfQllfREVGQVVMVCkgewotCQlpZiAo
KGFubm90YXRpb25UYWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdCkg
IT0gMCkgeworCWlmICh0aGlzRGVmYXVsdCAhPSBOT19OVUxMX0RFRkFVTFQpIHsKKwkJYm9vbGVh
biBpc1JlZHVuZGFudCA9IGlzSmRrMTgKKwkJCQk/IHRoaXNEZWZhdWx0ID09IG51bGxCaXRzCisJ
CQkJOiAobnVsbEJpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAw
OworCQlpZiAoaXNSZWR1bmRhbnQpIHsKIAkJCXRoaXMuc2NvcGUucHJvYmxlbVJlcG9ydGVyKCku
bnVsbERlZmF1bHRBbm5vdGF0aW9uSXNSZWR1bmRhbnQobG9jYXRpb24sIGFubm90YXRpb25zLCB0
aGlzKTsKIAkJfQogCQlyZXR1cm4gZmFsc2U7IC8vIGRpZmZlcmVudCBkZWZhdWx0IG1lYW5zIGlu
bmVyIGRlZmF1bHQgaXMgbm90IHJlZHVuZGFudCAtPiB3ZSdyZSBkb25lCkBAIC0yMDgzLDEwICsy
MTMwLDE4IEBACiAJcmV0dXJuIHRydWU7CiB9CiAKLWJvb2xlYW4gaGFzTm9uTnVsbERlZmF1bHQo
KSB7Citib29sZWFuIGhhc05vbk51bGxEZWZhdWx0Rm9yKGludCBsb2NhdGlvbiwgYm9vbGVhbiB1
c2VUeXBlQW5ub3RhdGlvbnMpIHsKIAkKIAlpZiAoIWlzUHJvdG90eXBlKCkpIHRocm93IG5ldyBJ
bGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKIAkKKwkvLyAxLjg6CisJaWYgKHVzZVR5cGVBbm5vdGF0
aW9ucykgeworCQlpZiAodGhpcy5zY29wZSA9PSBudWxsKSB7CisJCQlyZXR1cm4gKHRoaXMuZGVm
YXVsdE51bGxuZXNzICYgbG9jYXRpb24pICE9IDA7CisJCX0KKwkJcmV0dXJuIHRoaXMuc2NvcGUu
aGFzRGVmYXVsdE51bGxuZXNzRm9yKGxvY2F0aW9uKTsKKwl9CisKIAkvLyBmaW5kIHRoZSBhcHBs
aWNhYmxlIGRlZmF1bHQgaW5zaWRlLT5vdXQ6CiAKIAlTb3VyY2VUeXBlQmluZGluZyBjdXJyZW50
VHlwZSA9IG51bGw7CkBAIC0yMTA3LDYgKzIxNjIsOSBAQAogCQkJCWN1cnJlbnRUeXBlID0gKChD
bGFzc1Njb3BlKWN1cnJlbnRTY29wZSkucmVmZXJlbmNlQ29udGV4dC5iaW5kaW5nOwogCQkJCWlm
IChjdXJyZW50VHlwZSAhPSBudWxsKSB7CiAJCQkJCWludCBmb3VuZERlZmF1bHROdWxsbmVzcyA9
IGN1cnJlbnRUeXBlLmdldE51bGxEZWZhdWx0KCk7CisJCQkJCWlmICgoZm91bmREZWZhdWx0TnVs
bG5lc3MgJiBOdWxsbmVzc0RlZmF1bHRNQVNLKSA+IE5VTExfVU5TUEVDSUZJRURfQllfREVGQVVM
VCkgeworCQkJCQkJcmV0dXJuIHRydWU7CisJCQkJCX0KIAkJCQkJaWYgKGZvdW5kRGVmYXVsdE51
bGxuZXNzICE9IE5PX05VTExfREVGQVVMVCkgewogCQkJCQkJcmV0dXJuIGZvdW5kRGVmYXVsdE51
bGxuZXNzID09IE5PTk5VTExfQllfREVGQVVMVDsKIAkJCQkJfQpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9UeXBlQ29uc3RhbnRzLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1R5cGVDb25zdGFudHMu
amF2YQppbmRleCBhNDU1MWFjLi5iMzVjMTNlIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1R5
cGVDb25zdGFudHMuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1R5cGVDb25zdGFudHMuamF2YQpA
QCAtMjAsNiArMjAsNyBAQAogICoJCQkJCQkJCUJ1ZyA0MDU1NjkgLSBSZXNvdXJjZSBsZWFrIGNo
ZWNrIGZhbHNlIHBvc2l0aXZlIHdoZW4gdXNpbmcgRGJVdGlscy5jbG9zZVF1aWV0bHkKICAqCQkJ
CQkJCQlCdWcgNDI3MTk5IC0gWzEuOF1bcmVzb3VyY2VdIGF2b2lkIHJlc291cmNlIGxlYWsgd2Fy
bmluZ3Mgb24gU3RyZWFtcyB0aGF0IGhhdmUgbm8gcmVzb3VyY2UKICAqCQkJCQkJCQlCdWcgNDI1
MTgzIC0gWzEuOF1baW5mZXJlbmNlXSBtYWtlIENhcHR1cmVCaW5kaW5nMTggc2FmZQorICoJCQkJ
CQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9u
IGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgSmVzcGVyIFMgTW9sbGVyIC0g
Q29udHJpYnV0aW9ucyBmb3IKICAqCQkJCQkJCQlCdWcgNDA1MDY2IC0gWzEuOF1bY29tcGlsZXJd
W2NvZGVnZW5dIEltcGxlbWVudCBjb2RlIGdlbmVyYXRpb24gaW5mcmFzdHJ1Y3R1cmUgZm9yIEpT
UjMzNQogICoJCQkJCQkJCUJ1ZyA0MTIxNTMgLSBbMS44XVtjb21waWxlcl0gQ2hlY2sgdmFsaWRp
dHkgb2YgYW5ub3RhdGlvbnMgd2hpY2ggbWF5IGJlIHJlcGVhdGFibGUKQEAgLTM1NSw2ICszNTYs
MTYgQEAKIAljaGFyW10gU1lOVEhFVElDX0VOVU1fQ09OU1RBTlRfSU5JVElBTElaQVRJT05fTUVU
SE9EX1BSRUZJWCA9ICAiIGVudW0gY29uc3RhbnQgaW5pdGlhbGl6YXRpb24kIi50b0NoYXJBcnJh
eSgpOyAvLyROT04tTkxTLTEkCiAJY2hhcltdIFNZTlRIRVRJQ19TVEFUSUNfRkFDVE9SWSA9ICAi
PGZhY3Rvcnk+Ii50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCiAKKwkvLyBjb25zdGFudHMg
aW4gZW51bSBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi5EZWZhdWx0TG9jYXRpb246CisJY2hh
cltdIERFRkFVTFRfTE9DQVRJT05fX1BBUkFNRVRFUiA9ICJQQVJBTUVURVIiLnRvQ2hhckFycmF5
KCk7IC8vJE5PTi1OTFMtMSQKKwljaGFyW10gREVGQVVMVF9MT0NBVElPTl9fUkVUVVJOX1RZUEUg
PSAiUkVUVVJOX1RZUEUiLnRvQ2hhckFycmF5KCk7IC8vJE5PTi1OTFMtMSQKKwljaGFyW10gREVG
QVVMVF9MT0NBVElPTl9fRklFTEQgPSAiRklFTEQiLnRvQ2hhckFycmF5KCk7IC8vJE5PTi1OTFMt
MSQKKwljaGFyW10gREVGQVVMVF9MT0NBVElPTl9fVFlQRV9BUkdVTUVOVCA9ICJUWVBFX0FSR1VN
RU5UIi50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCisJY2hhcltdIERFRkFVTFRfTE9DQVRJ
T05fX1RZUEVfUEFSQU1FVEVSID0gIlRZUEVfUEFSQU1FVEVSIi50b0NoYXJBcnJheSgpOyAvLyRO
T04tTkxTLTEkCisJY2hhcltdIERFRkFVTFRfTE9DQVRJT05fX1RZUEVfQk9VTkQgPSAiVFlQRV9C
T1VORCIudG9DaGFyQXJyYXkoKTsgLy8kTk9OLU5MUy0xJAorCWNoYXJbXSBERUZBVUxUX0xPQ0FU
SU9OX19BUlJBWV9DT05URU5UUyA9ICJBUlJBWV9DT05URU5UUyIudG9DaGFyQXJyYXkoKTsgLy8k
Tk9OLU5MUy0xJAorCisKIAkvLyBzeW50aGV0aWMgcGFja2FnZS1pbmZvIG5hbWUKIAlwdWJsaWMg
c3RhdGljIGZpbmFsIGNoYXJbXSBQQUNLQUdFX0lORk9fTkFNRSA9ICJwYWNrYWdlLWluZm8iLnRv
Q2hhckFycmF5KCk7IC8vJE5PTi1OTFMtMSQKIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9wcm9ibGVt
L1Byb2JsZW1SZXBvcnRlci5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vUHJvYmxlbVJlcG9ydGVyLmph
dmEKaW5kZXggYTgyN2VkZC4uNzg0MDNmYSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vUHJv
YmxlbVJlcG9ydGVyLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vUHJvYmxlbVJlcG9ydGVyLmph
dmEKQEAgLTk0NDQsMTAgKzk0NDQsNiBAQAogCXRoaXMuaGFuZGxlKHByb2JsZW1JZCwgYXJncywg
c2hvcnRBcmdzLCBzdGFydCwgZW5kKTsKIH0KIAotcHVibGljIHZvaWQgbm9uTnVsbERlZmF1bHRE
ZXRhaWxOb3RFdmFsdWF0ZWQoQVNUTm9kZSBsb2NhdGlvbikgewotCXRoaXMuaGFuZGxlKElQcm9i
bGVtLk5vbk51bGxEZWZhdWx0RGV0YWlsSXNOb3RFdmFsdWF0ZWQsIE5vQXJndW1lbnQsIE5vQXJn
dW1lbnQsIFByb2JsZW1TZXZlcml0aWVzLldhcm5pbmcsIGxvY2F0aW9uLnNvdXJjZVN0YXJ0LCBs
b2NhdGlvbi5zb3VyY2VFbmQpOwotfQotCiBwdWJsaWMgdm9pZCBjb250cmFkaWN0b3J5TnVsbEFu
bm90YXRpb25zKEFubm90YXRpb24gYW5ub3RhdGlvbikgewogCWNvbnRyYWRpY3RvcnlOdWxsQW5u
b3RhdGlvbnMoYW5ub3RhdGlvbi5zb3VyY2VTdGFydCwgYW5ub3RhdGlvbi5zb3VyY2VFbmQpOwog
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vbWVzc2FnZXMucHJvcGVydGllcyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9wcm9ibGVtL21lc3NhZ2VzLnByb3BlcnRpZXMKaW5kZXggYjkzODJjMC4uODM2NzZmOCAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vbWVzc2FnZXMucHJvcGVydGllcworKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
cHJvYmxlbS9tZXNzYWdlcy5wcm9wZXJ0aWVzCkBAIC04MjAsNyArODIwLDcgQEAKIDk2NSA9IFRo
aXMgbnVsbG5lc3MgYW5ub3RhdGlvbiBjb25mbGljdHMgd2l0aCBhICcnQHswfScnIGFubm90YXRp
b24gd2hpY2ggaXMgZWZmZWN0aXZlIG9uIHRoZSBzYW1lIHR5cGUgcGFyYW1ldGVyIAogOTY2ID0g
Q29udHJhZGljdG9yeSBudWxsIGFubm90YXRpb25zOiBtZXRob2Qgd2FzIGluZmVycmVkIGFzICcn
ezJ9IHszfSh7NH0pJycsIGJ1dCBvbmx5IG9uZSBvZiAnJ0B7MH0nJyBhbmQgJydAezF9JycgY2Fu
IGJlIGVmZmVjdGl2ZSBhdCBhbnkgbG9jYXRpb24KIDk2NyA9IE51bGwgdHlwZSBzYWZldHk6IFVu
Y2hlY2tlZCBjYXN0IGZyb20gezB9IHRvIHsxfQotOTY4ID0gQXJndW1lbnRzIGNvbnRyb2xpbmcg
dGhlIGRldGFpbHMgb2YgdGhlIG51bGxuZXNzIGRlZmF1bHQgYXJlIG5vdCB5ZXQgZXZhbHVhdGVk
IGJ5IHRoZSBhbmFseXNpcy4KKyM5NjggdGVtcG9yYXJ5IHdhcm5pbmcgaGFzIGJlZW4gcmVtb3Zl
ZAogCiAjIEphdmEgOAogMTAwMSA9IFN5bnRheCBlcnJvciwgbW9kaWZpZXJzIGFuZCBhbm5vdGF0
aW9ucyBhcmUgbm90IGFsbG93ZWQgZm9yIHRoZSBsYW1iZGEgcGFyYW1ldGVyIHswfSBhcyBpdHMg
dHlwZSBpcyBlbGlkZWQ=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>240919</attachid>
            <date>2014-03-14 14:29:00 -0400</date>
            <delta_ts>2014-03-14 14:29:24 -0400</delta_ts>
            <desc>updated patch</desc>
            <filename>Bug-429958--18null-evaluate-new-DefaultLocation-attr.patch</filename>
            <type>text/plain</type>
            <size>151486</size>
            <attacher name="Stephan Herrmann">stephan.herrmann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxBbm5vdGF0aW9u
VGVzdC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbEFubm90YXRpb25U
ZXN0LmphdmEKaW5kZXggODliMWI0NC4uZmZlOTk3YiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Nv
bXBpbGVyL3JlZ3Jlc3Npb24vTnVsbEFubm90YXRpb25UZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbEFubm90YXRpb25UZXN0LmphdmEKQEAgLTI0NzcsNiAr
MjQ3Nyw2OCBAQAogCQltaXNtYXRjaF9Ob25OdWxsX051bGxhYmxlKCJPYmplY3QiKSArCiAJCSIt
LS0tLS0tLS0tXG4iKTsKIH0KKy8vIHBhY2thZ2UgbGV2ZWwgZGVmYXVsdCBpcyBjb25zdW1lZCBm
cm9tIHBhY2thZ2UtaW5mby5jbGFzcywgc2ltaWxhcmx5IGZvciB0eXBlIGxldmVsIGRlZmF1bHQg
LSBmaW5lIHR1bmVkIGRlZmF1bHQKK3B1YmxpYyB2b2lkIHRlc3RfZGVmYXVsdF9udWxsbmVzc18w
MDNjKCkgeworCWlmICh0aGlzLmNvbXBsaWFuY2VMZXZlbCA8IENsYXNzRmlsZUNvbnN0YW50cy5K
REsxXzgpIHJldHVybjsgLy8gdXNlcyB2ZXJzaW9uIDIuMCBvZiBATm9uTnVsbEJ5RGVmYXVsdAor
CU1hcCBjdXN0b21PcHRpb25zID0gZ2V0Q29tcGlsZXJPcHRpb25zKCk7CisJcnVuQ29uZm9ybVRl
c3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkicDEvWC5qYXZhIiwKKwkJCSJwYWNrYWdl
IHAxO1xuIiArCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsK
KwkJCSJATm9uTnVsbEJ5RGVmYXVsdFxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJ
CQkiICAgIHByb3RlY3RlZCBPYmplY3QgZ2V0T2JqZWN0KEBOdWxsYWJsZSBPYmplY3Qgbykge1xu
IiArCisJCQkiICAgICAgICByZXR1cm4gbmV3IE9iamVjdCgpO1xuIiArCisJCQkiICAgIH1cbiIg
KworCQkJIgkgcHJvdGVjdGVkIHZvaWQgYmFyKE9iamVjdCBvMikgeyB9XG4iICsgLy8gcGFyYW1l
dGVyIGlzIG5vbm51bGwgcGVyIHR5cGUgZGVmYXVsdAorCQkJIn1cbiIsCisJInAyL3BhY2thZ2Ut
aW5mby5qYXZhIiwKKwkJCSJAb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uTm9uTnVsbEJ5RGVm
YXVsdCh7b3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uRGVmYXVsdExvY2F0aW9uLlBBUkFNRVRF
Un0pXG4iICsKKwkJCSJwYWNrYWdlIHAyO1xuIiwKKwkJCX0sCisJCQljdXN0b21PcHRpb25zLAor
CQkJIiIpOworCS8vIGNoZWNrIGlmIGRlZmF1bHQgaXMgdmlzaWJsZSBmcm9tIHBhY2thZ2UtaW5m
by5jbGFzcy4KKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJZmFsc2UsIC8vIGRvbid0IGZs
dXNoCisJCW5ldyBTdHJpbmdbXSB7CisJInAyL1kuamF2YSIsCisJCQkicGFja2FnZSBwMjtcbiIg
KworCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkicHVi
bGljIGNsYXNzIFkgZXh0ZW5kcyBwMS5YIHtcbiIgKworCQkJIiAgICBAT3ZlcnJpZGVcbiIgKwor
CQkJIiAgICBwcm90ZWN0ZWQgQE51bGxhYmxlIE9iamVjdCBnZXRPYmplY3QoQE51bGxhYmxlIE9i
amVjdCBvKSB7XG4iICsgLy8gY2FuJ3Qgb3ZlcnJpZGUgaW5oZXJpdGVkIGRlZmF1bHQgbm9ubnVs
bAorCQkJIiAgICAgICAgYmFyKG8pO1xuIiArIC8vIHBhcmFtZXRlciBpcyBub25udWxsIGluIHN1
cGVyIGNsYXNzJ3MgLmNsYXNzIGZpbGUKKwkJCSIgICAgICAgIEBOb25OdWxsIE9iamVjdCBubm8g
PSBhY2NlcHQobyk7IC8vIDJ4RVJSXG4iICsKKwkJCSIgICAgICAgIHJldHVybiBvO1xuIiArCisJ
CQkiICAgIH1cbiIgKworCQkJIiAgICBPYmplY3QgYWNjZXB0KE9iamVjdCBhKSB7IHJldHVybiBh
OyB9XG4iICsgLy8gZ292ZXJuZWQgYnkgcGFja2FnZSBsZXZlbCBkZWZhdWx0IChvbmx5IHRoZSBw
YXJhbWV0ZXIhKQorCQkJIn1cbiIKKwkJfSwKKwkJY3VzdG9tT3B0aW9ucywKKwkJIi0tLS0tLS0t
LS1cbiIgKworCQkiMS4gRVJST1IgaW4gcDJcXFkuamF2YSAoYXQgbGluZSA1KVxuIiArIAorCQki
CXByb3RlY3RlZCBATnVsbGFibGUgT2JqZWN0IGdldE9iamVjdChATnVsbGFibGUgT2JqZWN0IG8p
IHtcbiIgKyAKKwkJIgkgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkiVGhlIHJl
dHVybiB0eXBlIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBATm9uTnVsbCByZXR1cm4gZnJvbSBY
LmdldE9iamVjdChPYmplY3QpXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBFUlJP
UiBpbiBwMlxcWS5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCSIJYmFyKG8pO1xuIiArIAorCQki
CSAgICBeXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2ggKHR5cGUgYW5ub3RhdGlvbnMpOiBy
ZXF1aXJlZCBcJ0BOb25OdWxsIE9iamVjdFwnIGJ1dCB0aGlzIGV4cHJlc3Npb24gaGFzIHR5cGUg
XCdATnVsbGFibGUgT2JqZWN0XCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjMuIFdB
Uk5JTkcgaW4gcDJcXFkuamF2YSAoYXQgbGluZSA3KVxuIiArIAorCQkiCUBOb25OdWxsIE9iamVj
dCBubm8gPSBhY2NlcHQobyk7IC8vIDJ4RVJSXG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAg
ICAgIF5eXl5eXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIHNhZmV0eSAodHlwZSBhbm5vdGF0aW9u
cyk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgXCdPYmplY3RcJyBuZWVkcyB1bmNoZWNrZWQgY29u
dmVyc2lvbiB0byBjb25mb3JtIHRvIFwnQE5vbk51bGwgT2JqZWN0XCdcbiIgKyAKKwkJIi0tLS0t
LS0tLS1cbiIgKyAKKwkJIjQuIEVSUk9SIGluIHAyXFxZLmphdmEgKGF0IGxpbmUgNylcbiIgKyAK
KwkJIglATm9uTnVsbCBPYmplY3Qgbm5vID0gYWNjZXB0KG8pOyAvLyAyeEVSUlxuIiArIAorCQki
CSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21h
dGNoICh0eXBlIGFubm90YXRpb25zKTogcmVxdWlyZWQgXCdATm9uTnVsbCBPYmplY3RcJyBidXQg
dGhpcyBleHByZXNzaW9uIGhhcyB0eXBlIFwnQE51bGxhYmxlIE9iamVjdFwnXG4iICsgCisJCSIt
LS0tLS0tLS0tXG4iKTsKK30KIC8vIGRvbid0IGFwcGx5IHR5cGUtbGV2ZWwgZGVmYXVsdCB0byBu
b24tcmVmZXJlbmNlIHR5cGUKIHB1YmxpYyB2b2lkIHRlc3RfZGVmYXVsdF9udWxsbmVzc18wMDQo
KSB7CiAJTWFwIGN1c3RvbU9wdGlvbnMgPSBnZXRDb21waWxlck9wdGlvbnMoKTsKQEAgLTU5ODcs
NyArNjA0OSw3IEBACiAJCQkicGFja2FnZSBjdGVzdDtcbiIgKwogCQkJImltcG9ydCBvcmcuZWNs
aXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCiAJCQkiQE5vbk51bGxCeURlZmF1bHRcbiIgKwot
CQkJInB1YmxpYyBjbGFzcyBDdGVzdCBpbXBsZW1lbnRzIGkyLklJIHtcbiIgKworCQkJInB1Ymxp
YyBjbGFzcyBDdGVzdCBpbXBsZW1lbnRzIGkyLklJIHtcbiIgKyAvLyBub3RlOiBpMi5JSS5tMShP
YmplY3QsT2JqZWN0KSBhY3R1YWxseSBoYXMgYSBidWcgaXRzZWxmOiBjb25mbGljdGluZyBkZWZh
dWx0ICYgaW5oZXJpdGVkIGFubm90YXRpb25zCiAJCQkiICAgIHB1YmxpYyBPYmplY3QgbTEoQE51
bGxhYmxlIE9iamVjdCBhMSkgeyAvLyBzaWxlbnQ6IGNvbmZsaWN0IGF0IGExIGF2b2lkZWRcbiIg
KyAKIAkJCSIJCXJldHVybiBuZXcgT2JqZWN0KCk7XG4iICsgCiAJCQkiICAgIH1cbiIgKyAKQEAg
LTYzMTcsNyArNjM3OSwxMCBAQAogCQluZXcgU3RyaW5nW10gewogCQkJIkZvb0ltcGwuamF2YSIs
CiAJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKLQkJCSJATm9u
TnVsbEJ5RGVmYXVsdFxuIiArIAorCQkJKHRoaXMuY29tcGxpYW5jZUxldmVsIDwgQ2xhc3NGaWxl
Q29uc3RhbnRzLkpESzFfOAorCQkJPyAiQE5vbk51bGxCeURlZmF1bHRcbiIKKwkJCTogIkBOb25O
dWxsQnlEZWZhdWx0KHtEZWZhdWx0TG9jYXRpb24uUEFSQU1FVEVSLERlZmF1bHRMb2NhdGlvbi5S
RVRVUk5fVFlQRX0pXG4iIC8vIGF2b2lkIEBOb25OdWxsIG9uIHR5cGUgYXJndW1lbnQgPFN0cmlu
Zz4KKwkJCSkgKyAKIAkJCSJwdWJsaWMgY2xhc3MgRm9vSW1wbCBpbXBsZW1lbnRzIEZvbzxTdHJp
bmc+IHtcbiIgKyAKIAkJCSIgIHB1YmxpYyBTdHJpbmcgYmFyKGZpbmFsIFN0cmluZy4uLiB2YWx1
ZXMpIHtcbiIgKyAKIAkJCSIgICAgcmV0dXJuIChcIlwiKTtcbiIgKyAKQEAgLTY3MTAsOSArNjc3
NSw5IEBACiAJCSItLS0tLS0tLS0tXG4iKTsKIH0KIHB1YmxpYyB2b2lkIHRlc3RCdWc0MTgyMzUo
KSB7Ci0gICAgcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJU3RyaW5nW10gdGVzdEZpbGVzID0g
CiAgICAgICAgICAgICBuZXcgU3RyaW5nW10gewotICAgICAgICAgICAgICAgICAgICAiR2VuZXJp
Y0ludGVyZmFjZS5qYXZhIiwKKyAgICAgICAgICAgICAgICAgICAgIkdlbmVyaWNJbnRlcmZhY2Uu
amF2YSIsIAogICAgICAgICAgICAgICAgICAgICAicHVibGljIGludGVyZmFjZSBHZW5lcmljSW50
ZXJmYWNlPFQ+IHtcbiIgKyAKICAgICAgICAgICAgICAgICAgICAgIiAgICAgICBUIGRvU29tZXRo
aW5nR2VuZXJpYyhUIG8pO1xuIiArIAogICAgICAgICAgICAgICAgICAgICAifSIsCkBAIC02NzI2
LDEzICs2NzkxLDQ4IEBACiAgICAgICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICByZXR1
cm4gbztcbiIgKyAKICAgICAgICAgICAgICAgICAgICAgIiAgICAgICB9XG4iICsgCiAgICAgICAg
ICAgICAgICAgICAgICJ9XG4iCi0gICAgICAgICAgICB9LAotICAgICAgICAgICAgIi0tLS0tLS0t
LS1cbiIgKyAKLSAgICAgICAgICAgICIxLiBFUlJPUiBpbiBJbXBsZW1lbnRhdGlvbi5qYXZhIChh
dCBsaW5lIDYpXG4iICsgCi0gICAgCQkiCXB1YmxpYyBPYmplY3QgZG9Tb21ldGhpbmdHZW5lcmlj
KE9iamVjdCBvKSB7XG4iICsgCi0gICAgCQkiCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIF5eXl5eXlxuIiArIAotICAgICAgICAgICAgIklsbGVnYWwgcmVkZWZpbml0aW9uIG9mIHBh
cmFtZXRlciBvLCBpbmhlcml0ZWQgbWV0aG9kIGZyb20gR2VuZXJpY0ludGVyZmFjZTxPYmplY3Q+
IGRvZXMgbm90IGNvbnN0cmFpbiB0aGlzIHBhcmFtZXRlclxuIiArIAotICAgICAgICAgICAgIi0t
LS0tLS0tLS1cbiIpOworCQkJfTsKKwlpZiAodGhpcy5jb21wbGlhbmNlTGV2ZWwgPCBDbGFzc0Zp
bGVDb25zdGFudHMuSkRLMV84KSB7CisJICAgIHJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCSAg
ICAgICAgICAgIHRlc3RGaWxlcywKKwkgICAgICAgICAgICAiLS0tLS0tLS0tLVxuIiArIAorCSAg
ICAgICAgICAgICIxLiBFUlJPUiBpbiBJbXBsZW1lbnRhdGlvbi5qYXZhIChhdCBsaW5lIDYpXG4i
ICsgCisJICAgIAkJIglwdWJsaWMgT2JqZWN0IGRvU29tZXRoaW5nR2VuZXJpYyhPYmplY3Qgbykg
e1xuIiArIAorCSAgICAJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5e
XG4iICsgCisJICAgICAgICAgICAgIklsbGVnYWwgcmVkZWZpbml0aW9uIG9mIHBhcmFtZXRlciBv
LCBpbmhlcml0ZWQgbWV0aG9kIGZyb20gR2VuZXJpY0ludGVyZmFjZTxPYmplY3Q+IGRvZXMgbm90
IGNvbnN0cmFpbiB0aGlzIHBhcmFtZXRlclxuIiArIAorCSAgICAgICAgICAgICItLS0tLS0tLS0t
XG4iKTsKKwl9IGVsc2UgeworCQkvLyBpbiAxLjggdGhlIG51bGxuZXNzIGRlZmF1bHQgYWxzbyBh
ZmZlY3RzIHRoZSB0eXBlIGFyZ3VtZW50IDxPYmplY3Q+IGZyb20gd2hpY2ggVCBpcyBpbnN0YW50
aWF0ZWQgdG8gJ0BOb25OdWxsIE9iamVjdCcKKwkJcnVuQ29uZm9ybVRlc3RXaXRoTGlicygKKwkJ
CQl0ZXN0RmlsZXMsIGdldENvbXBpbGVyT3B0aW9ucygpLCAiIik7CisJfQorfQorcHVibGljIHZv
aWQgdGVzdEJ1ZzQxODIzNWIoKSB7CisJaWYgKHRoaXMuY29tcGxpYW5jZUxldmVsIDwgQ2xhc3NG
aWxlQ29uc3RhbnRzLkpESzFfOCkKKwkJcmV0dXJuOworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJz
KAorCSAgICAgICAgbmV3IFN0cmluZ1tdIHsKKwkJCSAgICAiR2VuZXJpY0ludGVyZmFjZS5qYXZh
IiwgCisJCQkgICAgInB1YmxpYyBpbnRlcmZhY2UgR2VuZXJpY0ludGVyZmFjZTxUPiB7XG4iICsg
CisJCQkJIiAgICAgICBUIGRvU29tZXRoaW5nR2VuZXJpYyhUIG8pO1xuIiArIAorCQkJCSJ9IiwK
KwkJCSAgICAiSW1wbGVtZW50YXRpb24uamF2YSIsCisJCQkgICAgImltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArIAorCQkJCSJATm9uTnVsbEJ5RGVmYXVsdCh7RGVmYXVs
dExvY2F0aW9uLlBBUkFNRVRFUixEZWZhdWx0TG9jYXRpb24uUkVUVVJOX1RZUEV9KVxuIiArIAor
CQkJCSJwdWJsaWMgY2xhc3MgSW1wbGVtZW50YXRpb24gaW1wbGVtZW50cyBHZW5lcmljSW50ZXJm
YWNlPE9iamVjdD4ge1xuIiArIAorCQkJCSJcbiIgKyAKKwkJCQkiICAgICAgQE92ZXJyaWRlXG4i
ICsKKwkJCQkiICAgICAgIHB1YmxpYyBPYmplY3QgZG9Tb21ldGhpbmdHZW5lcmljKE9iamVjdCBv
KSB7XG4iICsgCisJCQkJIiAgICAgICAgICAgICAgIHJldHVybiBvO1xuIiArIAorCQkJCSIgICAg
ICAgfVxuIiArIAorCQkJCSJ9XG4iCisJCQl9LAorCSAgICAgICAgIi0tLS0tLS0tLS1cbiIgKyAK
KwkgICAgICAgICIxLiBFUlJPUiBpbiBJbXBsZW1lbnRhdGlvbi5qYXZhIChhdCBsaW5lIDYpXG4i
ICsgCisJCQkiCXB1YmxpYyBPYmplY3QgZG9Tb21ldGhpbmdHZW5lcmljKE9iamVjdCBvKSB7XG4i
ICsgCisJCQkiCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXlxuIiArIAor
CSAgICAgICAgIklsbGVnYWwgcmVkZWZpbml0aW9uIG9mIHBhcmFtZXRlciBvLCBpbmhlcml0ZWQg
bWV0aG9kIGZyb20gR2VuZXJpY0ludGVyZmFjZTxPYmplY3Q+IGRvZXMgbm90IGNvbnN0cmFpbiB0
aGlzIHBhcmFtZXRlclxuIiArIAorCSAgICAgICAgIi0tLS0tLS0tLS1cbiIpOwogfQogCiBwdWJs
aWMgdm9pZCB0ZXN0VHlwZUFubm90YXRpb25Qcm9ibGVtTm90SW4xNygpIHsKZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQv
Y29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5ub3RhdGlvblRlc3QuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL051bGxUeXBlQW5ub3RhdGlvblRlc3Qu
amF2YQppbmRleCA4NWI4MTgwLi45NTYxMzc2IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS50ZXN0cy5jb21waWxlci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGls
ZXIvcmVncmVzc2lvbi9OdWxsVHlwZUFubm90YXRpb25UZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L2NvbXBpbGVyL3JlZ3Jlc3Npb24vTnVsbFR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCkBAIC00MzAw
LDMxICs0MzAwLDYgQEAKIAkJIkludFN0cmVhbXkgY2Fubm90IGJlIHJlc29sdmVkXG4iICsgCiAJ
CSItLS0tLS0tLS0tXG4iKTsKIH0KLXB1YmxpYyB2b2lkIHRlc3RCdWczOTIyNDVfdG1wX3dhcm5p
bmcoKSB7Ci0JcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCi0JCW5ldyBTdHJpbmdbXSB7Ci0JCQki
WC5qYXZhIiwKLQkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKwot
CQkJIkBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5UWVBFX0FSR1VNRU5UKVxuIiAr
Ci0JCQkicHVibGljIGNsYXNzIFgge1xuIiArCi0JCQkiCXZvaWQgbShPYmplY3Qgbykge31cbiIg
KwotCQkJIgl2b2lkIHRlc3QoKSB7XG4iICsKLQkJCSIJCW0obnVsbCk7IC8vIEVSUlxuIiArIC8v
IHNpbmNlIEBOb25OdWxsQnlEZWZhdWx0IGlzIHN0aWxsIGludGVycHJldGVkIGFzIGFsbCBvciBu
b3RoaW5nCi0JCQkiCX1cbiIgKwotCQkJIn1cbiIKLQkJfSwKLQkJIi0tLS0tLS0tLS1cbiIgKyAK
LQkJIjEuIFdBUk5JTkcgaW4gWC5qYXZhIChhdCBsaW5lIDIpXG4iICsgCi0JCSIJQE5vbk51bGxC
eURlZmF1bHQoRGVmYXVsdExvY2F0aW9uLlRZUEVfQVJHVU1FTlQpXG4iICsgCi0JCSIJICAgICAg
ICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKLQkJIkFyZ3Vt
ZW50cyBjb250cm9saW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBudWxsbmVzcyBkZWZhdWx0IGFyZSBu
b3QgeWV0IGV2YWx1YXRlZCBieSB0aGUgYW5hbHlzaXMuXG4iICsgCi0JCSItLS0tLS0tLS0tXG4i
ICsgCi0JCSIyLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNilcbiIgKyAKLQkJIgltKG51bGwp
OyAvLyBFUlJcbiIgKyAKLQkJIgkgIF5eXl5cbiIgKyAKLQkJIk51bGwgdHlwZSBtaXNtYXRjaDog
cmVxdWlyZWQgXCdATm9uTnVsbCBPYmplY3RcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51
bGxcbiIgKyAKLQkJIi0tLS0tLS0tLS1cbiIpOwotfQogcHVibGljIHZvaWQgdGVzdEJ1ZzQyOTQw
MygpIHsKIAlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKIAkJbmV3IFN0cmluZ1tdIHsKQEAgLTQz
NzUsNCArNDM1MCw0OTcgQEAKICAgICAgICAgZ2V0Q29tcGlsZXJPcHRpb25zKCksCiAgICAgICAg
ICIiKTsKIH0KKworLy8gYXBwbHkgbnVsbCBkZWZhdWx0IHRvIHR5cGUgYXJndW1lbnRzOgorcHVi
bGljIHZvaWQgdGVzdERlZmF1bHQwMSgpIHsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJ
bmV3IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQu
YW5ub3RhdGlvbi4qO1xuIiArCisJCQkiaW1wb3J0IGphdmEudXRpbC4qO1xuIiArCisJCQkiQE5v
bk51bGxCeURlZmF1bHQoRGVmYXVsdExvY2F0aW9uLlRZUEVfQVJHVU1FTlQpXG4iICsKKwkJCSJw
dWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCSIJTGlzdDxOdW1iZXI+IHRlc3QxKExpc3Q8TnVtYmVy
PiBpbikge1xuIiArCisJCQkiCQlpbi5hZGQobnVsbCk7IC8vIEVSUlxuIiArCisJCQkiCQlyZXR1
cm4gbmV3IEFycmF5TGlzdDxATnVsbGFibGUgTnVtYmVyPigpOyAvLyBFUlJcbiIgKworCQkJIgl9
XG4iICsKKwkJCSIJamF2YS51dGlsLkxpc3Q8amF2YS5sYW5nLk51bWJlcj4gdGVzdDIoamF2YS51
dGlsLkxpc3Q8amF2YS5sYW5nLk51bWJlcj4gaW4pIHtcbiIgKworCQkJIgkJaW4uYWRkKG51bGwp
OyAvLyBFUlJcbiIgKworCQkJIgkJcmV0dXJuIG5ldyBBcnJheUxpc3Q8amF2YS5sYW5nLkBOdWxs
YWJsZSBOdW1iZXI+KCk7IC8vIEVSUlxuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwK
KwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIxLiBFUlJP
UiBpbiBYLmphdmEgKGF0IGxpbmUgNilcbiIgKyAKKwkJIglpbi5hZGQobnVsbCk7IC8vIEVSUlxu
IiArIAorCQkiCSAgICAgICBeXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJlcXVp
cmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBudWxsXG4i
ICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUg
NylcbiIgKyAKKwkJIglyZXR1cm4gbmV3IEFycmF5TGlzdDxATnVsbGFibGUgTnVtYmVyPigpOyAv
LyBFUlJcbiIgKyAKKwkJIgkgICAgICAgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5e
XG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2ggKHR5cGUgYW5ub3RhdGlvbnMpOiByZXF1aXJl
ZCBcJ0xpc3Q8QE5vbk51bGwgTnVtYmVyPlwnIGJ1dCB0aGlzIGV4cHJlc3Npb24gaGFzIHR5cGUg
XCdBcnJheUxpc3Q8QE51bGxhYmxlIE51bWJlcj5cJywgY29ycmVzcG9uZGluZyBzdXBlcnR5cGUg
aXMgXCdMaXN0PEBOdWxsYWJsZSBOdW1iZXI+XCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAK
KwkJIjMuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAxMClcbiIgKyAKKwkJIglpbi5hZGQobnVs
bCk7IC8vIEVSUlxuIiArIAorCQkiCSAgICAgICBeXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlz
bWF0Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRoZSBwcm92aWRlZCB2YWx1
ZSBpcyBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSI0LiBFUlJPUiBpbiBYLmph
dmEgKGF0IGxpbmUgMTEpXG4iICsgCisJCSIJcmV0dXJuIG5ldyBBcnJheUxpc3Q8amF2YS5sYW5n
LkBOdWxsYWJsZSBOdW1iZXI+KCk7IC8vIEVSUlxuIiArIAorCQkiCSAgICAgICBeXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlz
bWF0Y2ggKHR5cGUgYW5ub3RhdGlvbnMpOiByZXF1aXJlZCBcJ0xpc3Q8QE5vbk51bGwgTnVtYmVy
PlwnIGJ1dCB0aGlzIGV4cHJlc3Npb24gaGFzIHR5cGUgXCdBcnJheUxpc3Q8QE51bGxhYmxlIE51
bWJlcj5cJywgY29ycmVzcG9uZGluZyBzdXBlcnR5cGUgaXMgXCdMaXN0PEBOdWxsYWJsZSBOdW1i
ZXI+XCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorCisvLyBhcHBseSBudWxsIGRlZmF1
bHQgdG8gdHlwZSBhcmd1bWVudHMgLSBubyBlZmZlY3Qgb24gdHlwZSB2YXJpYWJsZSBvciB3aWxk
Y2FyZDoKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDFiKCkgeworCXJ1bkNvbmZvcm1UZXN0V2l0
aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJImltcG9ydCBqYXZhLnV0aWwuKjtcbiIg
KworCQkJIkBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5UWVBFX0FSR1VNRU5UKVxu
IiArCisJCQkicHVibGljIGNsYXNzIFg8VD4ge1xuIiArCisJCQkiCUxpc3Q8VD4gdGVzdChMaXN0
PD8gZXh0ZW5kcyBOdW1iZXI+IGluKSB7XG4iICsKKwkJCSIJCWluLmFkZChudWxsKTsgLy8gT0tc
biIgKworCQkJIgkJcmV0dXJuIG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIFQ+KCk7XG4iICsgLy8g
VE9ETzogdW5hbm5vdGF0ZWQgdHlwZSB2YXJpYWJsZSBzaG91bGQgYmUgcmVnYXJkZWQgYXMgJ2Nv
dWxkIGJlIGVpdGhlcicKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxl
ck9wdGlvbnMoKSwKKwkJIiIpOworfQorCisvLyBhcHBseSBudWxsIGRlZmF1bHQgdG8gcGFyYW1l
dGVyczoKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDIoKSB7CisJcnVuTmVnYXRpdmVUZXN0V2l0
aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBOb25OdWxsQnlEZWZhdWx0KERlZmF1
bHRMb2NhdGlvbi5QQVJBTUVURVIpXG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJ
CSIJTnVtYmVyIHRlc3QxKE51bWJlciBpbikge1xuIiArCisJCQkiCQlTeXN0ZW0ub3V0LnByaW50
KGluLmludFZhbHVlKCkpOyAvLyBPS1xuIiArCisJCQkiCQl0ZXN0MShudWxsKTsgLy8gRVJSXG4i
ICsKKwkJCSIJCXJldHVybiBudWxsOyAvLyBPS1xuIiArCisJCQkiCX1cbiIgKworCQkJIglqYXZh
LmxhbmcuTnVtYmVyIHRlc3QyKGphdmEubGFuZy5OdW1iZXIgaW4pIHtcbiIgKworCQkJIgkJU3lz
dGVtLm91dC5wcmludChpbi5pbnRWYWx1ZSgpKTsgLy8gT0tcbiIgKworCQkJIgkJdGVzdDIobnVs
bCk7IC8vIEVSUlxuIiArCisJCQkiCQlyZXR1cm4gbnVsbDsgLy8gT0tcbiIgKworCQkJIgl9XG4i
ICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgCisJCSIJdGVz
dDEobnVsbCk7IC8vIEVSUlxuIiArIAorCQkiCSAgICAgIF5eXl5cbiIgKyAKKwkJIk51bGwgdHlw
ZSBtaXNtYXRjaDogcmVxdWlyZWQgXCdATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHByb3ZpZGVk
IHZhbHVlIGlzIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjIuIEVSUk9SIGlu
IFguamF2YSAoYXQgbGluZSAxMSlcbiIgKyAKKwkJIgl0ZXN0MihudWxsKTsgLy8gRVJSXG4iICsg
CisJCSIJICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21hdGNoOiByZXF1aXJlZCBc
J0BOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgbnVsbFxuIiArIAor
CQkiLS0tLS0tLS0tLVxuIik7Cit9CisKKy8vIGFwcGx5IG51bGwgZGVmYXVsdCB0byByZXR1cm4g
dHlwZSAtIGFubm90YXRpb24gYXQgbWV0aG9kOgorcHVibGljIHZvaWQgdGVzdERlZmF1bHQwMygp
IHsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJYLmph
dmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQki
cHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiCUBOb25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2Nh
dGlvbi5SRVRVUk5fVFlQRSlcbiIgKworCQkJIglOdW1iZXIgdGVzdChOdW1iZXIgaW4pIHtcbiIg
KworCQkJIgkJU3lzdGVtLm91dC5wcmludChpbi5pbnRWYWx1ZSgpKTtcbiIgKworCQkJIgkJdGVz
dChudWxsKTsgLy8gT0tcbiIgKworCQkJIgkJcmV0dXJuIG51bGw7IC8vIEVSUlxuIiArCisJCQki
CX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0t
LS0tLS0tXG4iICsgCisJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNylcbiIgKyAKKwkJ
IglyZXR1cm4gbnVsbDsgLy8gRVJSXG4iICsgCisJCSIJICAgICAgIF5eXl5cbiIgKyAKKwkJIk51
bGwgdHlwZSBtaXNtYXRjaDogcmVxdWlyZWQgXCdATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHBy
b3ZpZGVkIHZhbHVlIGlzIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorCisvLyBh
cHBseSBudWxsIGRlZmF1bHQgdG8gZmllbGQKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDQoKSB7
CisJcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZh
IiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBO
b25OdWxsQnlEZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5GSUVMRClcbiIgKworCQkJInB1YmxpYyBj
bGFzcyBYIHtcbiIgKworCQkJIglOdW1iZXIgZmllbGQ7IC8vIEVSUiBzaW5jZSB1bmluaXRpYWxp
emVkXG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0t
LS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDQpXG4iICsgCisJ
CSIJTnVtYmVyIGZpZWxkOyAvLyBFUlIgc2luY2UgdW5pbml0aWFsaXplZFxuIiArIAorCQkiCSAg
ICAgICBeXl5eXlxuIiArIAorCQkiVGhlIEBOb25OdWxsIGZpZWxkIGZpZWxkIG1heSBub3QgaGF2
ZSBiZWVuIGluaXRpYWxpemVkXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKworLy8gZGVm
YXVsdCBkZWZhdWx0CitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDA1KCkgeworCXJ1bk5lZ2F0aXZl
VGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkiaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJATm9uTnVsbEJ5RGVmYXVs
dFxuIiArCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiCU51bWJlciBmaWVsZDsgLy8g
RVJSIHNpbmNlIHVuaW5pdGlhbGl6ZWRcbiIgKworCQkJIgl2b2lkIHRlc3QxKE51bWJlcltdIG5z
KSB7XG4iICsKKwkJCSIJCW5zWzBdID0gbnVsbDsgLy8gT0sgc2luY2Ugbm90IGFmZmVjdGVkIGJ5
IGRlZmF1bHRcbiIgKworCQkJIgl9XG4iICsKKwkJCSIJdm9pZCB0ZXN0MihqYXZhLmxhbmcuTnVt
YmVyW10gbnMpIHtcbiIgKworCQkJIgkJbnNbMF0gPSBudWxsOyAvLyBPSyBzaW5jZSBub3QgYWZm
ZWN0ZWQgYnkgZGVmYXVsdFxuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0
Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIxLiBFUlJPUiBpbiBY
LmphdmEgKGF0IGxpbmUgNClcbiIgKyAKKwkJIglOdW1iZXIgZmllbGQ7IC8vIEVSUiBzaW5jZSB1
bmluaXRpYWxpemVkXG4iICsgCisJCSIJICAgICAgIF5eXl5eXG4iICsgCisJCSJUaGUgQE5vbk51
bGwgZmllbGQgZmllbGQgbWF5IG5vdCBoYXZlIGJlZW4gaW5pdGlhbGl6ZWRcbiIgKyAKKwkJIi0t
LS0tLS0tLS1cbiIpOworfQorCisvLyBhcHBseSBkZWZhdWx0IHRvIHR5cGUgcGFyYW1ldGVyIC0g
aW5uZXIgY2xhc3MKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDYoKSB7CisJcnVuTmVnYXRpdmVU
ZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJpbXBvcnQg
b3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBOb25OdWxsQnlEZWZhdWx0
KERlZmF1bHRMb2NhdGlvbi5UWVBFX1BBUkFNRVRFUilcbiIgKworCQkJInB1YmxpYyBjbGFzcyBY
IHtcbiIgKworCQkJIgljbGFzcyBJbm5lcjxUPiB7XG4iICsKKwkJCSIJCVQgcHJvY2VzcyhUIHQp
IHtcbiIgKworCQkJIgkJCUBOb25OdWxsIFQgdDIgPSB0OyAvLyBPS1xuIiArCisJCQkiCQkJcmV0
dXJuIG51bGw7IC8vIEVSUlxuIiArCisJCQkiIAkJfVxuIiArCisJCQkiCX1cbiIgKworCQkJIgl2
b2lkIHRlc3QoSW5uZXI8TnVtYmVyPiBpbnVtKSB7XG4iICsKKwkJCSIJCUBOb25OdWxsIE51bWJl
ciBubm4gPSBpbnVtLnByb2Nlc3MobnVsbCk7IC8vIEVSUiBvbiBhcmd1bWVudFxuIiArCisJCQki
CX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSItLS0t
LS0tLS0tXG4iICsgCisJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNylcbiIgKyAKKwkJ
IglyZXR1cm4gbnVsbDsgLy8gRVJSXG4iICsgCisJCSIJICAgICAgIF5eXl5cbiIgKyAKKwkJIk51
bGwgdHlwZSBtaXNtYXRjaDogcmVxdWlyZWQgXCdATm9uTnVsbCBUXCcgYnV0IHRoZSBwcm92aWRl
ZCB2YWx1ZSBpcyBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBFUlJPUiBp
biBYLmphdmEgKGF0IGxpbmUgMTEpXG4iICsgCisJCSIJQE5vbk51bGwgTnVtYmVyIG5ubiA9IGlu
dW0ucHJvY2VzcyhudWxsKTsgLy8gRVJSIG9uIGFyZ3VtZW50XG4iICsgCisJCSIJICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0
Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRoZSBwcm92aWRlZCB2YWx1ZSBp
cyBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTsKK30KKworLy8gYXBwbHkgZGVmYXVsdCB0
byB0eXBlIGJvdW5kIC0gbWV0aG9kIGluIGlubmVyIGNsYXNzCitwdWJsaWMgdm9pZCB0ZXN0RGVm
YXVsdDA3KCkgeworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10gewor
CQkJIlguamF2YSIsCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4i
ICsKKwkJCSJpbXBvcnQgamF2YS51dGlsLio7XG4iICsKKwkJCSJATm9uTnVsbEJ5RGVmYXVsdChE
ZWZhdWx0TG9jYXRpb24uVFlQRV9CT1VORClcbiIgKworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIg
KworCQkJIgljbGFzcyBJbm5lciB7XG4iICsKKwkJCSIJCTxUIGV4dGVuZHMgTnVtYmVyPiBUIHBy
b2Nlc3MoVCB0LCBMaXN0PD8gZXh0ZW5kcyBOdW1iZXI+IGwpIHtcbiIgKworCQkJIgkJCUBOb25O
dWxsIFQgdDIgPSB0OyAvLyBPS1xuIiArCisJCQkiCQkJQE5vbk51bGwgTnVtYmVyIG4gPSBsLmdl
dCgwKTsgLy8gT0tcbiIgKworCQkJIgkJCXJldHVybiBudWxsOyAvLyBFUlJcbiIgKworCQkJIiAJ
CX1cbiIgKworCQkJIgl9XG4iICsKKwkJCSIJdm9pZCB0ZXN0KElubmVyIGlubmVyKSB7XG4iICsK
KwkJCSIJCUBOb25OdWxsIE51bWJlciBubm4gPSBpbm5lci5wcm9jZXNzKEludGVnZXIuTUFYX1ZB
TFVFLCBuZXcgQXJyYXlMaXN0PEBOdWxsYWJsZSBJbnRlZ2VyPigpKTsgLy8gV0FSTiBvbiAxLiBh
cmc7IEVSUiBvbiAyLiBhcmdcbiIgKworCQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdl
dENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJST1IgaW4g
WC5qYXZhIChhdCBsaW5lIDkpXG4iICsgCisJCSIJcmV0dXJuIG51bGw7IC8vIEVSUlxuIiArIAor
CQkiCSAgICAgICBeXl5eXG4iICsgCisJCSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJlcXVpcmVkIFwn
VCBleHRlbmRzIEBOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgbnVs
bFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMi4gV0FSTklORyBpbiBYLmphdmEgKGF0
IGxpbmUgMTMpXG4iICsgCisJCSIJQE5vbk51bGwgTnVtYmVyIG5ubiA9IGlubmVyLnByb2Nlc3Mo
SW50ZWdlci5NQVhfVkFMVUUsIG5ldyBBcnJheUxpc3Q8QE51bGxhYmxlIEludGVnZXI+KCkpOyAv
LyBXQVJOIG9uIDEuIGFyZzsgRVJSIG9uIDIuIGFyZ1xuIiArIAorCQkiCSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXG4iICsgCisJCSJOdWxsIHR5
cGUgc2FmZXR5ICh0eXBlIGFubm90YXRpb25zKTogVGhlIGV4cHJlc3Npb24gb2YgdHlwZSBcJ2lu
dFwnIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRvIGNvbmZvcm0gdG8gXCdATm9uTnVsbCBJ
bnRlZ2VyXCdcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjMuIEVSUk9SIGluIFguamF2
YSAoYXQgbGluZSAxMylcbiIgKyAKKwkJIglATm9uTnVsbCBOdW1iZXIgbm5uID0gaW5uZXIucHJv
Y2VzcyhJbnRlZ2VyLk1BWF9WQUxVRSwgbmV3IEFycmF5TGlzdDxATnVsbGFibGUgSW50ZWdlcj4o
KSk7IC8vIFdBUk4gb24gMS4gYXJnOyBFUlIgb24gMi4gYXJnXG4iICsgCisJCSIJICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJIk51bGwgdHlwZSBtaXNtYXRjaCAodHlw
ZSBhbm5vdGF0aW9ucyk6IHJlcXVpcmVkIFwnTGlzdDw/IGV4dGVuZHMgQE5vbk51bGwgTnVtYmVy
PlwnIGJ1dCB0aGlzIGV4cHJlc3Npb24gaGFzIHR5cGUgXCdBcnJheUxpc3Q8QE51bGxhYmxlIElu
dGVnZXI+XCcsIGNvcnJlc3BvbmRpbmcgc3VwZXJ0eXBlIGlzIFwnTGlzdDxATnVsbGFibGUgSW50
ZWdlcj5cJ1xuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7Cit9CisKKy8vYXBwbHkgbnVsbCBkZWZh
dWx0IHRvIHR5cGUgYXJndW1lbnRzOgorcHVibGljIHZvaWQgdGVzdERlZmF1bHQwMV9iaW4oKSB7
CisJcnVuQ29uZm9ybVRlc3RXaXRoTGlicygKKwkJCW5ldyBTdHJpbmdbXSB7CisJCQkJIlguamF2
YSIsCisJCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkJ
ImltcG9ydCBqYXZhLnV0aWwuKjtcbiIgKworCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRp
b24uKjtcbiIgKworCQkJCSJcbiIgKworCQkJCSJAVGFyZ2V0KEVsZW1lbnRUeXBlLlRZUEVfVVNF
KSBAUmV0ZW50aW9uKFJldGVudGlvblBvbGljeS5DTEFTUykgQGludGVyZmFjZSBJbXBvcnRhbnQg
e31cbiIgKworCQkJCSJcbiIgKworCQkJCSJATm9uTnVsbEJ5RGVmYXVsdChEZWZhdWx0TG9jYXRp
b24uVFlQRV9BUkdVTUVOVClcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgWCB7XG4iICsKKwkJCQki
CUxpc3Q8TnVtYmVyPiB0ZXN0MShMaXN0PEBJbXBvcnRhbnQgTnVtYmVyPiBpbikge1xuIiArCisJ
CQkJIgkJcmV0dXJuIG5ldyBBcnJheUxpc3Q8QE5vbk51bGwgTnVtYmVyPigpO1xuIiArCisJCQkJ
Igl9XG4iICsKKwkJCQkifVxuIgorCQkJfSwKKwkJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkJ
IiIpOworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlku
amF2YSIsCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJ
CSJpbXBvcnQgamF2YS51dGlsLio7XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWSB7XG4iICsKKwkJ
CSIJdm9pZCB0ZXN0KExpc3Q8TnVtYmVyPiBpbiwgWCB4KSB7XG4iICsKKwkJCSIJCXgudGVzdDEo
bmV3IEFycmF5TGlzdDxATnVsbGFibGUgTnVtYmVyPigpKSAvLyBFUlIgYXQgYXJnXG4iICsKKwkJ
CSIJCQkuYWRkKG51bGwpOyAvLyBFUlJcbiIgKworCQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0s
CisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0tLS0tLVxuIiArIAorCQkiMS4gRVJS
T1IgaW4gWS5qYXZhIChhdCBsaW5lIDUpXG4iICsgCisJCSIJeC50ZXN0MShuZXcgQXJyYXlMaXN0
PEBOdWxsYWJsZSBOdW1iZXI+KCkpIC8vIEVSUiBhdCBhcmdcbiIgKyAKKwkJIgkgICAgICAgIF5e
Xl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21h
dGNoICh0eXBlIGFubm90YXRpb25zKTogcmVxdWlyZWQgXCdMaXN0PEBOb25OdWxsIE51bWJlcj5c
JyBidXQgdGhpcyBleHByZXNzaW9uIGhhcyB0eXBlIFwnQXJyYXlMaXN0PEBOdWxsYWJsZSBOdW1i
ZXI+XCcsIGNvcnJlc3BvbmRpbmcgc3VwZXJ0eXBlIGlzIFwnTGlzdDxATnVsbGFibGUgTnVtYmVy
PlwnXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBFUlJPUiBpbiBZLmphdmEgKGF0
IGxpbmUgNilcbiIgKyAKKwkJIgkuYWRkKG51bGwpOyAvLyBFUlJcbiIgKyAKKwkJIgkgICAgIF5e
Xl5cbiIgKyAKKwkJIk51bGwgdHlwZSBtaXNtYXRjaDogcmVxdWlyZWQgXCdATm9uTnVsbCBOdW1i
ZXJcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51bGxcbiIgKyAKKwkJIi0tLS0tLS0tLS1c
biIpOworfQorCisvL2FwcGx5IG51bGwgZGVmYXVsdCB0byBwYXJhbWV0ZXJzOgorcHVibGljIHZv
aWQgdGVzdERlZmF1bHQwMl9iaW4oKSB7CisJcnVuQ29uZm9ybVRlc3RXaXRoTGlicygKKwkJbmV3
IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5u
b3RhdGlvbi4qO1xuIiArCisJCQkiQE5vbk51bGxCeURlZmF1bHQoRGVmYXVsdExvY2F0aW9uLlBB
UkFNRVRFUilcbiIgKworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglOdW1iZXIgdGVz
dDEoTnVtYmVyIGluKSB7XG4iICsKKwkJCSIJCXJldHVybiBudWxsOyAvLyBPS1xuIiArCisJCQki
CX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRpb25zKCksCisJCSIiKTsK
KwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJZLmphdmEi
LAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkicHVi
bGljIGNsYXNzIFkge1xuIiArCisJCQkiCUBOb25OdWxsIE51bWJlciB0ZXN0KFggeCkge1xuIiAr
CisJCQkiCQlyZXR1cm4geC50ZXN0MShudWxsKTsgLy8gZXJyb3IgYXQgYXJnLCB1bmNoZWNrZWQg
YXQgcmV0dXJuXG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxl
ck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIFdBUk5JTkcgaW4gWS5qYXZh
IChhdCBsaW5lIDQpXG4iICsgCisJCSIJcmV0dXJuIHgudGVzdDEobnVsbCk7IC8vIGVycm9yIGF0
IGFyZywgdW5jaGVja2VkIGF0IHJldHVyblxuIiArIAorCQkiCSAgICAgICBeXl5eXl5eXl5eXl5e
XG4iICsgCisJCSJOdWxsIHR5cGUgc2FmZXR5ICh0eXBlIGFubm90YXRpb25zKTogVGhlIGV4cHJl
c3Npb24gb2YgdHlwZSBcJ051bWJlclwnIG5lZWRzIHVuY2hlY2tlZCBjb252ZXJzaW9uIHRvIGNv
bmZvcm0gdG8gXCdATm9uTnVsbCBOdW1iZXJcJ1xuIiArIAorCQkiLS0tLS0tLS0tLVxuIiArIAor
CQkiMi4gRVJST1IgaW4gWS5qYXZhIChhdCBsaW5lIDQpXG4iICsgCisJCSIJcmV0dXJuIHgudGVz
dDEobnVsbCk7IC8vIGVycm9yIGF0IGFyZywgdW5jaGVja2VkIGF0IHJldHVyblxuIiArIAorCQki
CSAgICAgICAgICAgICAgIF5eXl5cbiIgKyAKKwkJIk51bGwgdHlwZSBtaXNtYXRjaDogcmVxdWly
ZWQgXCdATm9uTnVsbCBOdW1iZXJcJyBidXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51bGxcbiIg
KyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQorCisvL2FwcGx5IG51bGwgZGVmYXVsdCB0byByZXR1
cm4gdHlwZSAtIGFubm90YXRpb24gYXQgbWV0aG9kOgorcHVibGljIHZvaWQgdGVzdERlZmF1bHQw
M19iaW4oKSB7CisJcnVuQ29uZm9ybVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJ
CSJYLmphdmEiLAorCQkJImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiAr
CisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiCUBOb25OdWxsQnlEZWZhdWx0KERlZmF1
bHRMb2NhdGlvbi5SRVRVUk5fVFlQRSlcbiIgKworCQkJIglOdW1iZXIgdGVzdChOdW1iZXIgaW4p
IHtcbiIgKworCQkJIgkJcmV0dXJuIG5ldyBJbnRlZ2VyKDEzKTtcbiIgKworCQkJIgl9XG4iICsK
KwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiIik7CisJcnVuQ29u
Zm9ybVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJZLmphdmEiLAorCQkJImlt
cG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkicHVibGljIGNsYXNz
IFkge1xuIiArCisJCQkiCUBOb25OdWxsIE51bWJlciB0ZXN0KFggeCkge1xuIiArCisJCQkiCQly
ZXR1cm4geC50ZXN0KG51bGwpOyAvLyBib3RoIE9LXG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxu
IgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIiIpOworfQorCisvLyBhcHBseSBu
dWxsIGRlZmF1bHQgdG8gZmllbGQgLSBhbHNvIHRlc3QgbWl4aW5nIG9mIGV4cGxpY2l0IGFubm90
YXRpb24gd2l0aCBkZWZhdWx0IEBOb25OdWxsIChvdGhlciBhbm5vdCBpcyBub3QgcmVuZGVyZWQg
aW4gZXJyb3IpCitwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdDA0X2JpbigpIHsKKwlydW5Db25mb3Jt
VGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkiaW1wb3J0
IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7XG4iICsKKwkJCSJpbXBvcnQgamF2YS5sYW5n
LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBUYXJnZXQoRWxlbWVudFR5cGUuVFlQRV9VU0UpIEBS
ZXRlbnRpb24oUmV0ZW50aW9uUG9saWN5LkNMQVNTKSBAaW50ZXJmYWNlIEltcG9ydGFudCB7fVxu
IiArCisJCQkiQE5vbk51bGxCeURlZmF1bHQoRGVmYXVsdExvY2F0aW9uLkZJRUxEKVxuIiArCisJ
CQkicHVibGljIGNsYXNzIFgge1xuIiArCisJCQkiCUBJbXBvcnRhbnQgTnVtYmVyIGZpZWxkID0g
bmV3IERvdWJsZSgxLjFkKTtcbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJZ2V0Q29tcGlsZXJPcHRp
b25zKCksCisJCSIiKTsKKwlydW5OZWdhdGl2ZVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1td
IHsKKwkJCSJZLmphdmEiLAorCQkJInB1YmxpYyBjbGFzcyBZIHtcbiIgKworCQkJIgl2b2lkIHRl
c3QoWCB4KSB7XG4iICsKKwkJCSIJCXguZmllbGQgPSBudWxsOyAvLyBFUlJcbiIgKworCQkJIgl9
XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiLS0tLS0t
LS0tLVxuIiArIAorCQkiMS4gRVJST1IgaW4gWS5qYXZhIChhdCBsaW5lIDMpXG4iICsgCisJCSIJ
eC5maWVsZCA9IG51bGw7IC8vIEVSUlxuIiArIAorCQkiCSAgICAgICAgICBeXl5eXG4iICsgCisJ
CSJOdWxsIHR5cGUgbWlzbWF0Y2g6IHJlcXVpcmVkIFwnQE5vbk51bGwgTnVtYmVyXCcgYnV0IHRo
ZSBwcm92aWRlZCB2YWx1ZSBpcyBudWxsXG4iICsgCisJCSItLS0tLS0tLS0tXG4iKTt9CisKKy8v
IGRlZmF1bHQgZGVmYXVsdAorcHVibGljIHZvaWQgdGVzdERlZmF1bHQwNV9iaW4oKSB7CisJcnVu
Q29uZm9ybVRlc3RXaXRoTGlicygKKwkJbmV3IFN0cmluZ1tdIHsKKwkJCSJYLmphdmEiLAorCQkJ
ImltcG9ydCBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlvbi4qO1xuIiArCisJCQkiQE5vbk51bGxC
eURlZmF1bHRcbiIgKworCQkJInB1YmxpYyBjbGFzcyBYIHtcbiIgKworCQkJIglOdW1iZXIgZmll
bGQgPSBuZXcgTG9uZygxMyk7XG4iICsKKwkJCSIJdm9pZCB0ZXN0MShOdW1iZXJbXSBucykge1xu
IiArCisJCQkiCQluc1swXSA9IG51bGw7IC8vIE9LIHNpbmNlIG5vdCBhZmZlY3RlZCBieSBkZWZh
dWx0XG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlv
bnMoKSwKKwkJIiIpOworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5nW10g
eworCQkJIlkuamF2YSIsCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9uLio7
XG4iICsKKwkJCSJwdWJsaWMgY2xhc3MgWSB7XG4iICsKKwkJCSIJdm9pZCB0ZXN0KFggeCwgQE51
bGxhYmxlIE51bWJlciBATm9uTnVsbFtdIG5zKSB7XG4iICsKKwkJCSIJCXgudGVzdDEobnMpOyAv
LyBPSyBzaW5jZSBub3QgYWZmZWN0ZWQgYnkgZGVmYXVsdFxuIiArCisJCQkiCQl4LmZpZWxkID0g
bnVsbDsgLy8gRVJSXG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9LAorCQlnZXRDb21w
aWxlck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9SIGluIFkuamF2
YSAoYXQgbGluZSA1KVxuIiArIAorCQkiCXguZmllbGQgPSBudWxsOyAvLyBFUlJcbiIgKyAKKwkJ
IgkgICAgICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1pc21hdGNoOiByZXF1aXJlZCBc
J0BOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgbnVsbFxuIiArIAor
CQkiLS0tLS0tLS0tLVxuIik7fQorCisvLyBhcHBseSBkZWZhdWx0IHRvIHR5cGUgcGFyYW1ldGVy
IC0gaW5uZXIgY2xhc3MKK3B1YmxpYyB2b2lkIHRlc3REZWZhdWx0MDZfYmluKCkgeworCXJ1bkNv
bmZvcm1UZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWC5qYXZhIiwKKwkJCSJp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJIkBOb25OdWxsQnlE
ZWZhdWx0KERlZmF1bHRMb2NhdGlvbi5UWVBFX1BBUkFNRVRFUilcbiIgKworCQkJInB1YmxpYyBj
bGFzcyBYIHtcbiIgKworCQkJIglzdGF0aWMgY2xhc3MgSW5uZXI8VD4ge1xuIiArCisJCQkiCQlU
IHByb2Nlc3MoVCB0KSB7XG4iICsKKwkJCSIJCQlyZXR1cm4gdDtcbiIgKworCQkJIiAJCX1cbiIg
KworCQkJIgl9XG4iICsKKwkJCSJ9XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAor
CQkiIik7CisJcnVuTmVnYXRpdmVUZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQki
WS5qYXZhIiwKKwkJCSJpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKwor
CQkJInB1YmxpYyBjbGFzcyBZIHtcbiIgKworCQkJIgl2b2lkIHRlc3QoWC5Jbm5lcjxOdW1iZXI+
IGludW0pIHtcbiIgKworCQkJIgkJQE5vbk51bGwgTnVtYmVyIG5ubiA9IGludW0ucHJvY2Vzcyhu
dWxsKTsgLy8gRVJSIG9uIGFyZ3VtZW50XG4iICsKKwkJCSIJfVxuIiArCisJCQkifVxuIgorCQl9
LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVS
Uk9SIGluIFkuamF2YSAoYXQgbGluZSA0KVxuIiArIAorCQkiCUBOb25OdWxsIE51bWJlciBubm4g
PSBpbnVtLnByb2Nlc3MobnVsbCk7IC8vIEVSUiBvbiBhcmd1bWVudFxuIiArIAorCQkiCSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIG1p
c21hdGNoOiByZXF1aXJlZCBcJ0BOb25OdWxsIE51bWJlclwnIGJ1dCB0aGUgcHJvdmlkZWQgdmFs
dWUgaXMgbnVsbFxuIiArIAorCQkiLS0tLS0tLS0tLVxuIik7fQorCisvLyBhcHBseSBkZWZhdWx0
IHRvIHR5cGUgYm91bmQgLSBtZXRob2QgaW4gaW5uZXIgY2xhc3MKK3B1YmxpYyB2b2lkIHRlc3RE
ZWZhdWx0MDdfYmluKCkgeworCXJ1bk5lZ2F0aXZlVGVzdFdpdGhMaWJzKAorCQluZXcgU3RyaW5n
W10geworCQkJIlguamF2YSIsCisJCQkiaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9u
Lio7XG4iICsKKwkJCSJpbXBvcnQgamF2YS51dGlsLio7XG4iICsKKwkJCSJATm9uTnVsbEJ5RGVm
YXVsdChEZWZhdWx0TG9jYXRpb24uVFlQRV9CT1VORClcbiIgKworCQkJInB1YmxpYyBjbGFzcyBY
IHtcbiIgKworCQkJIglzdGF0aWMgY2xhc3MgSW5uZXIge1xuIiArCisJCQkiCQk8VCBleHRlbmRz
IE51bWJlcj4gVCBwcm9jZXNzKFQgdCwgTGlzdDw/IGV4dGVuZHMgTnVtYmVyPiBsKSB7XG4iICsK
KwkJCSIJCQlyZXR1cm4gdDtcbiIgKworCQkJIiAJCX1cbiIgKworCQkJIgl9XG4iICsKKwkJCSJ9
XG4iCisJCX0sCisJCWdldENvbXBpbGVyT3B0aW9ucygpLAorCQkiIik7CisJcnVuTmVnYXRpdmVU
ZXN0V2l0aExpYnMoCisJCW5ldyBTdHJpbmdbXSB7CisJCQkiWS5qYXZhIiwKKwkJCSJpbXBvcnQg
b3JnLmVjbGlwc2UuamR0LmFubm90YXRpb24uKjtcbiIgKworCQkJImltcG9ydCBqYXZhLnV0aWwu
KjtcbiIgKworCQkJInB1YmxpYyBjbGFzcyBZIHtcbiIgKworCQkJIgl2b2lkIHRlc3QoWC5Jbm5l
ciBpbm5lcikge1xuIiArCisJCQkiCQlATm9uTnVsbCBOdW1iZXIgbm5uID0gaW5uZXIucHJvY2Vz
cyhJbnRlZ2VyLk1BWF9WQUxVRSwgbmV3IEFycmF5TGlzdDxATnVsbGFibGUgSW50ZWdlcj4oKSk7
IC8vIFdBUk4gb24gMS4gYXJnOyBFUlIgb24gMi4gYXJnXG4iICsKKwkJCSIJfVxuIiArCisJCQki
fVxuIgorCQl9LAorCQlnZXRDb21waWxlck9wdGlvbnMoKSwKKwkJIi0tLS0tLS0tLS1cbiIgKyAg
Ly8gRklYTUU6IHRoaXMgc2hvdWxkIG5vdCBiZSBhIHdhcm5pbmcsIGEgY2FzZSBvZiB1bnJlY29n
bml6ZWQgYm94aW5nCisJCSIxLiBXQVJOSU5HIGluIFkuamF2YSAoYXQgbGluZSA1KVxuIiArIAor
CQkiCUBOb25OdWxsIE51bWJlciBubm4gPSBpbm5lci5wcm9jZXNzKEludGVnZXIuTUFYX1ZBTFVF
LCBuZXcgQXJyYXlMaXN0PEBOdWxsYWJsZSBJbnRlZ2VyPigpKTsgLy8gV0FSTiBvbiAxLiBhcmc7
IEVSUiBvbiAyLiBhcmdcbiIgKyAKKwkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXl5eXl5eXl5eXl5eXlxuIiArIAorCQkiTnVsbCB0eXBlIHNhZmV0eSAodHlwZSBh
bm5vdGF0aW9ucyk6IFRoZSBleHByZXNzaW9uIG9mIHR5cGUgXCdpbnRcJyBuZWVkcyB1bmNoZWNr
ZWQgY29udmVyc2lvbiB0byBjb25mb3JtIHRvIFwnQE5vbk51bGwgSW50ZWdlclwnXG4iICsgCisJ
CSItLS0tLS0tLS0tXG4iKTsKK30KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3QvY29tcGxldGUv
Q29tcGxldGlvbk9uUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
ZGVhc3Npc3QvY29tcGxldGUvQ29tcGxldGlvbk9uUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVS
ZWZlcmVuY2UuamF2YQppbmRleCA0ODc4MTNjLi43YTlmNjZlIDEwMDY0NAotLS0gYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNz
aXN0L2NvbXBsZXRlL0NvbXBsZXRpb25PblBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9jb21wbGV0ZS9Db21wbGV0aW9uT25QYXJhbWV0ZXJp
emVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwNCwgMjAwOSBJQk0gQ29ycG9yYXRp
b24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwNCwgMjAxNCBJQk0gQ29ycG9yYXRp
b24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQg
dGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMAogICogd2hpY2ggYWNj
b21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQKQEAgLTcsNiAr
Nyw4IEBACiAgKgogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGlu
aXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBD
b250cmlidXRpb24gZm9yCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1
YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAg
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFs
LmNvZGVhc3Npc3QuY29tcGxldGU7CiAKQEAgLTc2LDEzICs3OCwxMyBAQAogCQlyZXR1cm4gdGhp
cy5raW5kID09IEtfQ0xBU1MgfHwgdGhpcy5raW5kID09IEtfSU5URVJGQUNFOwogCX0KIAotCXB1
YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9ja1Njb3BlIHNjb3BlLCBib29sZWFuIGNo
ZWNrQm91bmRzKSB7Ci0JCXN1cGVyLnJlc29sdmVUeXBlKHNjb3BlLCBjaGVja0JvdW5kcyk7CisJ
cHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4g
Y2hlY2tCb3VuZHMsIGludCBsb2NhdGlvbikgeworCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSwg
Y2hlY2tCb3VuZHMsIGxvY2F0aW9uKTsKIAkJdGhyb3cgbmV3IENvbXBsZXRpb25Ob2RlRm91bmQo
dGhpcywgdGhpcy5yZXNvbHZlZFR5cGUsIHNjb3BlKTsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRp
bmcgcmVzb2x2ZVR5cGUoQ2xhc3NTY29wZSBzY29wZSkgewotCQlzdXBlci5yZXNvbHZlVHlwZShz
Y29wZSk7CisJcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUs
IGludCBsb2NhdGlvbikgeworCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSwgbG9jYXRpb24pOwog
CQl0aHJvdyBuZXcgQ29tcGxldGlvbk5vZGVGb3VuZCh0aGlzLCB0aGlzLnJlc29sdmVkVHlwZSwg
c2NvcGUpOwogCX0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFzc2lz
dC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9zZWxlY3QvU2VsZWN0aW9uT25Q
YXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29kZWFzc2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9zZWxl
Y3QvU2VsZWN0aW9uT25QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCmlu
ZGV4IGZhMjYxNjEuLmZmZTliOTkgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
ZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3Qvc2VsZWN0L1NlbGVj
dGlvbk9uUGFyYW1ldGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2Rl
YXNzaXN0L3NlbGVjdC9TZWxlY3Rpb25PblBhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJl
bmNlLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29w
eXJpZ2h0IChjKSAyMDAwLCAyMDA5IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29w
eXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxs
IHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVy
aWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBz
ZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1
dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNyw2ICs3LDggQEAKICAqCiAgKiBDb250cmli
dXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVu
dGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IKKyAqCQkJ
CQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlv
biBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
LwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29kZWFzc2lzdC5zZWxlY3Q7CiAK
QEAgLTI5LDggKzMxLDggQEAKIAkJdGhpcy50eXBlQXJndW1lbnRzW2xlbmd0aF0gPSBhc3Npc3RU
eXBlQXJndW1lbnRzOwogCX0KIAotCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShCbG9j
a1Njb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzKSB7Ci0JCXN1cGVyLnJlc29sdmVUeXBl
KHNjb3BlLCBjaGVja0JvdW5kcyk7CisJcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJs
b2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMsIGludCBsb2NhdGlvbikgeworCQlz
dXBlci5yZXNvbHZlVHlwZShzY29wZSwgY2hlY2tCb3VuZHMsIGxvY2F0aW9uKTsKIAkJLy8vLyBy
ZW1vdmVkIHVubmVjZXNzYXJ5IGNvZGUgdG8gc29sdmUgYnVnIDk0NjUzCiAJCS8vaWYodGhpcy5y
ZXNvbHZlZFR5cGUgIT0gbnVsbCAmJiB0aGlzLnJlc29sdmVkVHlwZS5pc1Jhd1R5cGUoKSkgewog
CQkvLwlQYXJhbWV0ZXJpemVkVHlwZUJpbmRpbmcgcGFyYW1ldGVyaXplZFR5cGVCaW5kaW5nID0g
c2NvcGUuY3JlYXRlUGFyYW1ldGVyaXplZFR5cGUoKChSYXdUeXBlQmluZGluZyl0aGlzLnJlc29s
dmVkVHlwZSkudHlwZSwgbmV3IFR5cGVCaW5kaW5nWzBdLCB0aGlzLnJlc29sdmVkVHlwZS5lbmNs
b3NpbmdUeXBlKCkpOwpAQCAtMzksOCArNDEsOCBAQAogCQl0aHJvdyBuZXcgU2VsZWN0aW9uTm9k
ZUZvdW5kKHRoaXMucmVzb2x2ZWRUeXBlKTsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVz
b2x2ZVR5cGUoQ2xhc3NTY29wZSBzY29wZSkgewotCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSk7
CisJcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUsIGludCBs
b2NhdGlvbikgeworCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSwgbG9jYXRpb24pOwogCQkvLy8v
IHJlbW92ZWQgdW5uZWNlc3NhcnkgY29kZSB0byBzb2x2ZSBidWcgOTQ2NTMKIAkJLy9pZih0aGlz
LnJlc29sdmVkVHlwZSAhPSBudWxsICYmIHRoaXMucmVzb2x2ZWRUeXBlLmlzUmF3VHlwZSgpKSB7
CiAJCS8vCVBhcmFtZXRlcml6ZWRUeXBlQmluZGluZyBwYXJhbWV0ZXJpemVkVHlwZUJpbmRpbmcg
PSBzY29wZS5jcmVhdGVQYXJhbWV0ZXJpemVkVHlwZSgoKFJhd1R5cGVCaW5kaW5nKXRoaXMucmVz
b2x2ZWRUeXBlKS50eXBlLCBuZXcgVHlwZUJpbmRpbmdbMF0sIHRoaXMucmVzb2x2ZWRUeXBlLmVu
Y2xvc2luZ1R5cGUoKSk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb2RlYXNz
aXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNzaXN0L3NlbGVjdC9TZWxlY3Rpb25P
blBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb2RlYXNzaXN0L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb2RlYXNzaXN0L3NlbGVj
dC9TZWxlY3Rpb25PblBhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVmZXJlbmNlLmphdmEKaW5kZXgg
NTdmNzQ5YS4uN2JlMGQ3YSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29kZWFz
c2lzdC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29kZWFzc2lzdC9zZWxlY3QvU2VsZWN0aW9u
T25QYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvZGVhc3Npc3Qvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvZGVhc3Npc3Qv
c2VsZWN0L1NlbGVjdGlvbk9uUGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuamF2YQpA
QCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMDkgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMp
IDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJl
c2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBh
cmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBM
aWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQg
aXMgYXZhaWxhYmxlIGF0CkBAIC03LDYgKzcsOCBAQAogICoKICAqIENvbnRyaWJ1dG9yczoKICAq
ICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAq
ICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJCQkJCUJ1ZyA0
Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0
ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdl
IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb2RlYXNzaXN0LnNlbGVjdDsKIApAQCAtMjEsMTMg
KzIzLDEzIEBACiAJCXN1cGVyKG5hbWUsIHR5cGVBcmd1bWVudHMsIDAsIHBvcyk7CiAJfQogCi0J
cHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4g
Y2hlY2tCb3VuZHMpIHsKLQkJc3VwZXIucmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzKTsK
KwlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVh
biBjaGVja0JvdW5kcywgaW50IGxvY2F0aW9uKSB7CisJCXN1cGVyLnJlc29sdmVUeXBlKHNjb3Bl
LCBjaGVja0JvdW5kcywgbG9jYXRpb24pOwogCQl0aHJvdyBuZXcgU2VsZWN0aW9uTm9kZUZvdW5k
KHRoaXMucmVzb2x2ZWRUeXBlKTsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5
cGUoQ2xhc3NTY29wZSBzY29wZSkgewotCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSk7CisJcHVi
bGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUsIGludCBsb2NhdGlv
bikgeworCQlzdXBlci5yZXNvbHZlVHlwZShzY29wZSwgbG9jYXRpb24pOwogCQl0aHJvdyBuZXcg
U2VsZWN0aW9uTm9kZUZvdW5kKHRoaXMucmVzb2x2ZWRUeXBlKTsKIAl9CiAKZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9jb3JlL2NvbXBp
bGVyL0lQcm9ibGVtLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvY29yZS9jb21waWxlci9JUHJvYmxlbS5qYXZhCmluZGV4IGE1OTU5ZGQuLmI2NmQ0
MjIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9jb3JlL2NvbXBpbGVyL0lQcm9ibGVtLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2NvcmUvY29tcGlsZXIvSVByb2JsZW0uamF2YQpA
QCAtMTc3Nyw3ICsxNzc3LDcgQEAKIAkvKiogQHNpbmNlIDMuMTAgKi8KIAlpbnQgVW5zYWZlTnVs
bG5lc3NDYXN0ID0gSW50ZXJuYWwgKyA5Njc7CiAJLyoqIEBzaW5jZSAzLjEwICovCi0JaW50IE5v
bk51bGxEZWZhdWx0RGV0YWlsSXNOb3RFdmFsdWF0ZWQgPSA5Njg7CisJaW50IE5vbk51bGxEZWZh
dWx0RGV0YWlsSXNOb3RFdmFsdWF0ZWQgPSA5Njg7IC8vIG5vIGxvbmdlciByZXBvcnRlZAogCiAJ
Ly8gSmF2YSA4IHdvcmsKIAkvKiogQHNpbmNlIDMuMTAgKi8KZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9h
c3QvQW5ub3RhdGlvbi5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Bbm5vdGF0aW9uLmphdmEKaW5kZXggN2Mz
OGE5OC4uYjIwODc3YyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9Bbm5vdGF0aW9uLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9Bbm5vdGF0aW9uLmphdmEKQEAgLTE4LDYgKzE4LDcgQEAKICAqCQkJCQkJ
CQlCdWcgNDE3Mjk1IC0gWzEuOFtbbnVsbF0gTWFzc2FnZSB0eXBlIGFubm90YXRlZCBudWxsIGFu
YWx5c2lzIHRvIGdlbCB3ZWxsIHdpdGggZGVlcCBlbmNvZGVkIHR5cGUgYmluZGluZ3MuCiAgKgkJ
CQkJCQkJQnVnIDQyNDcyOCAtIFsxLjhdW251bGxdIFVuZXhwZWN0ZWQgZXJyb3I6IFRoZSBudWxs
bmVzcyBhbm5vdGF0aW9uICdYWFhYJyBpcyBub3QgYXBwbGljYWJsZSBhdCB0aGlzIGxvY2F0aW9u
CiAgKgkJCQkJCQkJQnVnIDM5MjI0NSAtIFsxLjhdW2NvbXBpbGVyXVtudWxsXSBEZWZpbmUgd2hl
dGhlciAvIGhvdyBATm9uTnVsbEJ5RGVmYXVsdCBhcHBsaWVzIHRvIFRZUEVfVVNFIGxvY2F0aW9u
cworICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVs
dExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgICAgIEFuZHkg
Q2xlbWVudCAoR29QaXZvdGFsLCBJbmMpIGFjbGVtZW50QGdvcGl2b3RhbC5jb20gLSBDb250cmli
dXRpb25zIGZvcgogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyAzODM2MjQgLSBbMS44
XVtjb21waWxlcl0gUmV2aXZlIGNvZGUgZ2VuZXJhdGlvbiBzdXBwb3J0IGZvciB0eXBlIGFubm90
YXRpb25zIChmcm9tIE9saXZpZXIncyB3b3JrKQogICogICAgICAgICAgICAgICAgICAgICAgICAg
IEJ1ZyA0MDk1MTcgLSBbMS44XVtjb21waWxlcl0gVHlwZSBhbm5vdGF0aW9uIHByb2JsZW1zIG9u
IG1vcmUgZWxhYm9yYXRlIGFycmF5IHJlZmVyZW5jZXMKQEAgLTM2LDYgKzM3LDcgQEAKIGltcG9y
dCBvcmcuZWNsaXBzZS5qZHQuY29yZS5jb21waWxlci5DaGFyT3BlcmF0aW9uOwogaW1wb3J0IG9y
Zy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5BU1RWaXNpdG9yOwogaW1wb3J0IG9yZy5l
Y2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jbGFzc2ZtdC5DbGFzc0ZpbGVDb25zdGFudHM7
CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmVudi5FbnVtQ29uc3Rh
bnRTaWduYXR1cmU7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmlt
cGwuQ29tcGlsZXJPcHRpb25zOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5pbXBsLkNvbnN0YW50OwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21w
aWxlci5pbXBsLklycml0YW50U2V0OwpAQCAtMzA0LDcgKzMwNiw4IEBACiAJfQogCiAJLyoqCi0J
ICogQ29tcHV0ZSB0aGUgYml0IHBhdHRlcm4gZm9yIHJlY29nbml6ZWQgc3RhbmRhcmQgYW5ub3Rh
dGlvbnMgdGhlIGNvbXBpbGVyIG1heSBuZWVkIHRvIGFjdCB1cG9uCisJICogQ29tcHV0ZSB0aGUg
Yml0IHBhdHRlcm4gZm9yIHJlY29nbml6ZWQgc3RhbmRhcmQgYW5ub3RhdGlvbnMgdGhlIGNvbXBp
bGVyIG1heSBuZWVkIHRvIGFjdCB1cG9uLgorCSAqIFRoZSBsb3dlciBiaXRzIChCaW5kaW5nLk51
bGxuZXNzRGVmYXVsdE1BU0spIGRvIG5vdCBiZWxvbmcgaW4gdGFnQml0cywgYnV0IGluIGRlZmF1
bHROdWxsbmVzcy4KIAkgKi8KIAlwcml2YXRlIGxvbmcgZGV0ZWN0U3RhbmRhcmRBbm5vdGF0aW9u
KFNjb3BlIHNjb3BlLCBSZWZlcmVuY2VCaW5kaW5nIGFubm90YXRpb25UeXBlLCBNZW1iZXJWYWx1
ZVBhaXIgdmFsdWVBdHRyaWJ1dGUpIHsKIAkJbG9uZyB0YWdCaXRzID0gMDsKQEAgLTM4OCwyOCAr
MzkxLDk4IEBACiAJCQkJdGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsOwogCQkJ
CWJyZWFrOwogCQkJY2FzZSBUeXBlSWRzLlRfQ29uZmlndXJlZEFubm90YXRpb25Ob25OdWxsQnlE
ZWZhdWx0IDoKKwkJCQkvLyBzZWVpbmcgdGhpcyBpZCBpbXBsaWVzIHRoYXQgbnVsbCBhbm5vdGF0
aW9uIGFuYWx5c2lzIGlzIGVuYWJsZWQKKwkJCQlPYmplY3QgdmFsdWUgPSBudWxsOwogCQkJCWlm
ICh2YWx1ZUF0dHJpYnV0ZSAhPSBudWxsKSB7CiAJCQkJCWlmICh2YWx1ZUF0dHJpYnV0ZS52YWx1
ZSBpbnN0YW5jZW9mIEZhbHNlTGl0ZXJhbCkgewogCQkJCQkJLy8gcGFyYW1ldGVyICdmYWxzZScg
bWVhbnM6IHRoaXMgYW5ub3RhdGlvbiBjYW5jZWxzIGFueSBkZWZhdWx0cwogCQkJCQkJdGFnQml0
cyB8PSBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQ7CiAJCQkJCQli
cmVhazsKIAkJCQkJfSBlbHNlIGlmICh2YWx1ZUF0dHJpYnV0ZS5jb21waWxlckVsZW1lbnRQYWly
ICE9IG51bGwpIHsKLQkJCQkJCU9iamVjdCB2YWx1ZSA9IHZhbHVlQXR0cmlidXRlLmNvbXBpbGVy
RWxlbWVudFBhaXIudmFsdWU7Ci0JCQkJCQlpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3RbXSAm
JiAoKE9iamVjdFtdKXZhbHVlKS5sZW5ndGggPT0gMCkgewotCQkJCQkJCS8vIGVtcHR5IHBhcmFt
ZXRlciBtZWFuczogdGhpcyBhbm5vdGF0aW9uIGNhbmNlbHMgYW55IGRlZmF1bHRzCi0JCQkJCQkJ
dGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQ7Ci0J
CQkJCQkJYnJlYWs7Ci0JCQkJCQl9IGVsc2UgewotCQkJCQkJCXNjb3BlLnByb2JsZW1SZXBvcnRl
cigpLm5vbk51bGxEZWZhdWx0RGV0YWlsTm90RXZhbHVhdGVkKHZhbHVlQXR0cmlidXRlKTsKLQkJ
CQkJCX0KKwkJCQkJCXZhbHVlID0gdmFsdWVBdHRyaWJ1dGUuY29tcGlsZXJFbGVtZW50UGFpci52
YWx1ZTsKKwkJCQkJfQorCQkJCX0gZWxzZSBpZiAoc2NvcGUuY29tcGlsZXJPcHRpb25zKCkuc291
cmNlTGV2ZWwgPj0gQ2xhc3NGaWxlQ29uc3RhbnRzLkpESzFfOCkgeyAvLyBmZXRjaCBkZWZhdWx0
IHZhbHVlICAtIFRPRE86IGNhY2hlIGl0PworCQkJCQlNZXRob2RCaW5kaW5nW10gbWV0aG9kcyA9
IGFubm90YXRpb25UeXBlLm1ldGhvZHMoKTsKKwkJCQkJaWYgKG1ldGhvZHMgIT0gbnVsbCAmJiBt
ZXRob2RzLmxlbmd0aCA9PSAxKSB7CisJCQkJCQlPYmplY3QgZGVmYXVsdFZhbHVlID0gbWV0aG9k
c1swXS5nZXREZWZhdWx0VmFsdWUoKTsKKwkJCQkJCWlmIChkZWZhdWx0VmFsdWUgaW5zdGFuY2Vv
ZiBPYmplY3RbXSkKKwkJCQkJCQl2YWx1ZSA9IGRlZmF1bHRWYWx1ZTsKIAkJCQkJfQogCQkJCX0K
LQkJCQl0YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQ7CisJCQkJ
aWYgKHZhbHVlICE9IG51bGwpIHsKKwkJCQkJdGFnQml0cyB8PSBudWxsVGFnQml0c0Zyb21Bbm5v
dGF0aW9uVmFsdWUodmFsdWUpOworCQkJCX0gZWxzZSB7CisJCQkJCS8vIG5laXRoZXIgZXhwbGlj
aXQgdmFsdWUsIG5vciBkZWZhdWx0IHZhbHVlIGZyb20gRGVmYXVsdExvY2F0aW9uICgxLjgpCisJ
CQkJCXRhZ0JpdHMgfD0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdDsKKwkJCQl9
CiAJCQkJYnJlYWs7CiAJCX0KIAkJcmV0dXJuIHRhZ0JpdHM7CiAJfQogCisJLyoqCisJICogQ29u
dmVydCB0aGUgdmFsdWUoKSBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQgaW50byBhIGJp
dHZlY3RvciBhIGxhIHtAbGluayBCaW5kaW5nI051bGxuZXNzRGVmYXVsdE1BU0t9LgorCSAqIFRo
aXMgbWV0aG9kIHVuZGVyc3RhbmRzIHZhbHVlIGVuY29kaW5ncyBmcm9tIHNvdXJjZSBhbmQgYmlu
YXJ5IHR5cGVzLgorCSAqIAorCSAqIDxiPnByZTo8L2I+IG51bGwgYW5ub3RhdGlvbiBhbmFseXNp
cyBpcyBlbmFibGVkCisJICovCisJcHVibGljIHN0YXRpYyBpbnQgbnVsbFRhZ0JpdHNGcm9tQW5u
b3RhdGlvblZhbHVlKE9iamVjdCB2YWx1ZSkgeworCQlpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmpl
Y3RbXSkgeworCQkJaWYgKCgoT2JqZWN0W10pIHZhbHVlKS5sZW5ndGggPT0gMCkgeworCQkJCXJl
dHVybiBCaW5kaW5nLk5VTExfVU5TUEVDSUZJRURfQllfREVGQVVMVDsKKwkJCX0gZWxzZSB7CisJ
CQkJaW50IGJpdHMgPSAwOworCQkJCWZvciAoT2JqZWN0IHNpbmdsZSA6IChPYmplY3RbXSl2YWx1
ZSkKKwkJCQkJYml0cyB8PSBldmFsdWF0ZURlZmF1bHROdWxsbmVzc0xvY2F0aW9uKHNpbmdsZSk7
CisJCQkJcmV0dXJuIGJpdHM7CisJCQl9CisJCX0gZWxzZSB7CisJCQlyZXR1cm4gZXZhbHVhdGVE
ZWZhdWx0TnVsbG5lc3NMb2NhdGlvbih2YWx1ZSk7CisJCX0KKwl9CisKKwlwcml2YXRlIHN0YXRp
YyBpbnQgZXZhbHVhdGVEZWZhdWx0TnVsbG5lc3NMb2NhdGlvbihPYmplY3QgdmFsdWUpIHsKKwkJ
Y2hhcltdIG5hbWUgPSBudWxsOworCQlpZiAodmFsdWUgaW5zdGFuY2VvZiBGaWVsZEJpbmRpbmcp
IHsKKwkJCW5hbWUgPSAoKEZpZWxkQmluZGluZykgdmFsdWUpLm5hbWU7CisJCX0gZWxzZSBpZiAo
dmFsdWUgaW5zdGFuY2VvZiBFbnVtQ29uc3RhbnRTaWduYXR1cmUpIHsKKwkJCW5hbWUgPSAoKEVu
dW1Db25zdGFudFNpZ25hdHVyZSkgdmFsdWUpLmdldEVudW1Db25zdGFudE5hbWUoKTsKKwkJfSBl
bHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVsZW1lbnRWYWx1ZVBhaXIuVW5yZXNvbHZlZEVudW1D
b25zdGFudCkgeworCQkJbmFtZSA9ICgoRWxlbWVudFZhbHVlUGFpci5VbnJlc29sdmVkRW51bUNv
bnN0YW50KSB2YWx1ZSkuZ2V0RW51bUNvbnN0YW50TmFtZSgpOworCQl9CisJCWlmIChuYW1lICE9
IG51bGwpIHsKKwkJCXN3aXRjaCAobmFtZS5sZW5ndGgpIHsKKwkJCQljYXNlIDU6CisJCQkJCWlm
IChDaGFyT3BlcmF0aW9uLmVxdWFscyhuYW1lLCBUeXBlQ29uc3RhbnRzLkRFRkFVTFRfTE9DQVRJ
T05fX0ZJRUxEKSkKKwkJCQkJCXJldHVybiBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvbkZpZWxkOwor
CQkJCQlicmVhazsKKwkJCQljYXNlIDk6CisJCQkJCWlmIChDaGFyT3BlcmF0aW9uLmVxdWFscyhu
YW1lLCBUeXBlQ29uc3RhbnRzLkRFRkFVTFRfTE9DQVRJT05fX1BBUkFNRVRFUikpCisJCQkJCQly
ZXR1cm4gQmluZGluZy5EZWZhdWx0TG9jYXRpb25QYXJhbWV0ZXI7CisJCQkJCWJyZWFrOworCQkJ
CWNhc2UgMTA6CisJCQkJCWlmIChDaGFyT3BlcmF0aW9uLmVxdWFscyhuYW1lLCBUeXBlQ29uc3Rh
bnRzLkRFRkFVTFRfTE9DQVRJT05fX1RZUEVfQk9VTkQpKQorCQkJCQkJcmV0dXJuIEJpbmRpbmcu
RGVmYXVsdExvY2F0aW9uVHlwZUJvdW5kOworCQkJCQlicmVhazsKKwkJCQljYXNlIDExOgorCQkJ
CQlpZiAoQ2hhck9wZXJhdGlvbi5lcXVhbHMobmFtZSwgVHlwZUNvbnN0YW50cy5ERUZBVUxUX0xP
Q0FUSU9OX19SRVRVUk5fVFlQRSkpCisJCQkJCQlyZXR1cm4gQmluZGluZy5EZWZhdWx0TG9jYXRp
b25SZXR1cm5UeXBlOworCQkJCQlicmVhazsKKwkJCQljYXNlIDEzIDoKKwkJCQkJaWYgKENoYXJP
cGVyYXRpb24uZXF1YWxzKG5hbWUsIFR5cGVDb25zdGFudHMuREVGQVVMVF9MT0NBVElPTl9fVFlQ
RV9BUkdVTUVOVCkpCisJCQkJCQlyZXR1cm4gQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlQXJn
dW1lbnQ7CisJCQkJCWJyZWFrOworCQkJCWNhc2UgMTQgOgorCQkJCQlpZiAoQ2hhck9wZXJhdGlv
bi5lcXVhbHMobmFtZSwgVHlwZUNvbnN0YW50cy5ERUZBVUxUX0xPQ0FUSU9OX19UWVBFX1BBUkFN
RVRFUikpCisJCQkJCQlyZXR1cm4gQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlUGFyYW1ldGVy
OworCQkJCQlpZiAoQ2hhck9wZXJhdGlvbi5lcXVhbHMobmFtZSwgVHlwZUNvbnN0YW50cy5ERUZB
VUxUX0xPQ0FUSU9OX19BUlJBWV9DT05URU5UUykpCisJCQkJCQlyZXR1cm4gQmluZGluZy5EZWZh
dWx0TG9jYXRpb25BcnJheUNvbnRlbnRzOworCQkJCQlicmVhazsKKwkJCX0KKwkJfQorCQlyZXR1
cm4gMDsKKwl9CisJCiAJc3RhdGljIFN0cmluZyBnZXRSZXRlbnRpb25OYW1lKGxvbmcgdGFnQml0
cykgewogCQlpZiAoKHRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25SdW50aW1lUmV0ZW50aW9u
KSA9PSBUYWdCaXRzLkFubm90YXRpb25SdW50aW1lUmV0ZW50aW9uKSB7CiAJCQkvLyBUYWdCaXRz
LkFubm90YXRpb25SdW50aW1lUmV0ZW50aW9uIGNvbWJpbmVzIGJvdGggVGFnQml0cy5Bbm5vdGF0
aW9uQ2xhc3NSZXRlbnRpb24gJiBUYWdCaXRzLkFubm90YXRpb25Tb3VyY2VSZXRlbnRpb24KQEAg
LTc5MSwxMiArODY0LDE0IEBACiAJCXRoaXMuY29tcGlsZXJBbm5vdGF0aW9uID0gc2NvcGUuZW52
aXJvbm1lbnQoKS5jcmVhdGVBbm5vdGF0aW9uKChSZWZlcmVuY2VCaW5kaW5nKSB0aGlzLnJlc29s
dmVkVHlwZSwgY29tcHV0ZUVsZW1lbnRWYWx1ZVBhaXJzKCkpOwogCQkvLyByZWNvZ25pemUgc3Rh
bmRhcmQgYW5ub3RhdGlvbnMgPwogCQlsb25nIHRhZ0JpdHMgPSBkZXRlY3RTdGFuZGFyZEFubm90
YXRpb24oc2NvcGUsIGFubm90YXRpb25UeXBlLCB2YWx1ZUF0dHJpYnV0ZSk7CisJCWludCBkZWZh
dWx0TnVsbG5lc3MgPSAoaW50KSh0YWdCaXRzICYgQmluZGluZy5OdWxsbmVzc0RlZmF1bHRNQVNL
KTsKKwkJdGFnQml0cyAmPSB+QmluZGluZy5OdWxsbmVzc0RlZmF1bHRNQVNLOwogCiAJCS8vIHJl
Y29yZCBhbm5vdGF0aW9uIHBvc2l0aW9ucyBpbiB0aGUgY29tcGlsYXRpb24gcmVzdWx0CiAJCXNj
b3BlLnJlZmVyZW5jZUNvbXBpbGF0aW9uVW5pdCgpLnJlY29yZFN1cHByZXNzV2FybmluZ3MoSXJy
aXRhbnRTZXQuTkxTLCBudWxsLCB0aGlzLnNvdXJjZVN0YXJ0LCB0aGlzLmRlY2xhcmF0aW9uU291
cmNlRW5kKTsKIAkJaWYgKHRoaXMucmVjaXBpZW50ICE9IG51bGwpIHsKIAkJCWludCBraW5kID0g
dGhpcy5yZWNpcGllbnQua2luZCgpOwotCQkJaWYgKHRhZ0JpdHMgIT0gMCkgeworCQkJaWYgKHRh
Z0JpdHMgIT0gMCB8fCBkZWZhdWx0TnVsbG5lc3MgIT0gMCkgewogCQkJCS8vIHRhZyBiaXRzIG9u
dG8gcmVjaXBpZW50CiAJCQkJc3dpdGNoIChraW5kKSB7CiAJCQkJCWNhc2UgQmluZGluZy5QQUNL
QUdFIDoKQEAgLTgxNyw2ICs4OTIsNyBAQAogCQkJCQkJCX0KIAkJCQkJCQlyZWNvcmRTdXBwcmVz
c1dhcm5pbmdzKHNjb3BlLCBzdGFydCwgdHlwZURlY2xhcmF0aW9uLmRlY2xhcmF0aW9uU291cmNl
RW5kLCBzY29wZS5jb21waWxlck9wdGlvbnMoKS5zdXBwcmVzc1dhcm5pbmdzKTsKIAkJCQkJCX0K
KwkJCQkJCXNvdXJjZVR5cGUuZGVmYXVsdE51bGxuZXNzIHw9IGRlZmF1bHROdWxsbmVzczsKIAkJ
CQkJCWJyZWFrOwogCQkJCQljYXNlIEJpbmRpbmcuTUVUSE9EIDoKIAkJCQkJCU1ldGhvZEJpbmRp
bmcgc291cmNlTWV0aG9kID0gKE1ldGhvZEJpbmRpbmcpIHRoaXMucmVjaXBpZW50OwpAQCAtODM3
LDYgKzkxMyw3IEBACiAJCQkJCQkJLy8gZm9yIGRlY2xhcmF0aW9uIGFubm90YXRpb25zIHRoZSBp
bmFwcGxpY2FiaWxpdHkgd2lsbCBiZSByZXBvcnRlZCBiZWxvdwogCQkJCQkJCXNvdXJjZU1ldGhv
ZC50YWdCaXRzICY9IH5UYWdCaXRzLkFubm90YXRpb25OdWxsTUFTSzsKIAkJCQkJCX0KKwkJCQkJ
CXNvdXJjZU1ldGhvZC5kZWZhdWx0TnVsbG5lc3MgfD0gZGVmYXVsdE51bGxuZXNzOwogCQkJCQkJ
YnJlYWs7CiAJCQkJCWNhc2UgQmluZGluZy5GSUVMRCA6CiAJCQkJCQlGaWVsZEJpbmRpbmcgc291
cmNlRmllbGQgPSAoRmllbGRCaW5kaW5nKSB0aGlzLnJlY2lwaWVudDsKZGlmZiAtLWdpdCBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9hc3QvQXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0Fy
cmF5UXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCmluZGV4IDQ0MGQ0MWMuLjgxNzY5NjMgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9hc3QvQXJyYXlRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9BcnJheVF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQpAQCAtNyw2ICs3
LDggQEAKICAqCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5p
dGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENv
bnRyaWJ1dGlvbiBmb3IKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVh
dGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIuYXN0OwogCkBAIC0xMDEsOCArMTAzLDggQEAKIAkJfQogCX0KIAotCXByb3RlY3Rl
ZCBUeXBlQmluZGluZyBpbnRlcm5hbFJlc29sdmVUeXBlKFNjb3BlIHNjb3BlKSB7Ci0JCVR5cGVC
aW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUgPSBzdXBlci5pbnRlcm5hbFJlc29sdmVUeXBlKHNj
b3BlKTsKKwlwcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBz
Y29wZSwgaW50IGxvY2F0aW9uKSB7CisJCVR5cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUg
PSBzdXBlci5pbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBsb2NhdGlvbik7CiAJCXJldHVybiBp
bnRlcm5hbFJlc29sdmVUeXBlOwogCX0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9BcnJheVR5
cGVSZWZlcmVuY2UuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvQXJyYXlUeXBlUmVmZXJlbmNlLmphdmEKaW5k
ZXggMGIzMmZmZC4uMDUxMzYyNSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9BcnJheVR5cGVSZWZl
cmVuY2UuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0FycmF5VHlwZVJlZmVyZW5jZS5qYXZhCkBAIC03
LDYgKzcsOCBAQAogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24g
LSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqICAgICBTdGVwaGFuIEhlcnJtYW5u
IC0gQ29udHJpYnV0aW9uIGZvcgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBl
dmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVs
dAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb21waWxlci5hc3Q7CiAKQEAgLTE3Myw4ICsxNzUsOCBAQAogCQl2aXNpdG9yLmVuZFZp
c2l0KHRoaXMsIHNjb3BlKTsKIAl9CiAKLQlwcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJuYWxS
ZXNvbHZlVHlwZShTY29wZSBzY29wZSkgewotCQlUeXBlQmluZGluZyBpbnRlcm5hbFJlc29sdmVU
eXBlID0gc3VwZXIuaW50ZXJuYWxSZXNvbHZlVHlwZShzY29wZSk7CisJcHJvdGVjdGVkIFR5cGVC
aW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2NvcGUsIGludCBsb2NhdGlvbikgewor
CQlUeXBlQmluZGluZyBpbnRlcm5hbFJlc29sdmVUeXBlID0gc3VwZXIuaW50ZXJuYWxSZXNvbHZl
VHlwZShzY29wZSwgbG9jYXRpb24pOwogCQlyZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZTsKIAl9
CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0ludGVyc2VjdGlvbkNhc3RUeXBlUmVmZXJlbmNl
LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29tcGlsZXIvYXN0L0ludGVyc2VjdGlvbkNhc3RUeXBlUmVmZXJlbmNlLmphdmEKaW5k
ZXggODc4MmI1YS4uM2FlNzk1MiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9JbnRlcnNlY3Rpb25D
YXN0VHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvSW50ZXJzZWN0aW9uQ2FzdFR5
cGVSZWZlcmVuY2UuamF2YQpAQCAtNyw2ICs3LDggQEAKICAqIAogICogQ29udHJpYnV0b3JzOgog
ICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgor
ICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCisgKgkJCQkJCQlCdWcg
NDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1
dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgICAgICBBbmR5IENsZW1lbnQgKEdvUGl2b3Rh
bCwgSW5jKSBhY2xlbWVudEBnb3Bpdm90YWwuY29tIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqICAg
ICAgICAgICAgICAgICAgICAgICAgICBCdWcgNDA5MjM2IC0gWzEuOF1bY29tcGlsZXJdIFR5cGUg
YW5ub3RhdGlvbnMgb24gaW50ZXJzZWN0aW9uIGNhc3QgdHlwZXMgZHJvcHBlZCBieSBjb2RlIGdl
bmVyYXRvcgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCkBAIC02Niw3ICs2OCw3IEBACiAJLyog
KG5vbi1KYXZhZG9jKQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmFzdC5UeXBlUmVmZXJlbmNlI2dldFR5cGVCaW5kaW5nKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5h
bC5jb21waWxlci5sb29rdXAuU2NvcGUpCiAJICovCi0JcHVibGljIFR5cGVCaW5kaW5nIHJlc29s
dmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMpIHsKKwlwdWJsaWMg
VHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0Jv
dW5kcywgaW50IGxvY2F0aW9uKSB7CiAKIAkJaW50IGxlbmd0aCA9IHRoaXMudHlwZVJlZmVyZW5j
ZXMubGVuZ3RoOwogCQlSZWZlcmVuY2VCaW5kaW5nW10gaW50ZXJzZWN0aW5nVHlwZXMgPSBuZXcg
UmVmZXJlbmNlQmluZGluZ1tsZW5ndGhdOwpAQCAtNzYsNyArNzgsNyBAQAogCQluZXh0VHlwZToK
IAkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogCQkJZmluYWwgVHlwZVJlZmVy
ZW5jZSB0eXBlUmVmZXJlbmNlID0gdGhpcy50eXBlUmVmZXJlbmNlc1tpXTsKLQkJCVR5cGVCaW5k
aW5nIHR5cGUgPSB0eXBlUmVmZXJlbmNlLnJlc29sdmVUeXBlKHNjb3BlLCBjaGVja0JvdW5kcyk7
CisJCQlUeXBlQmluZGluZyB0eXBlID0gdHlwZVJlZmVyZW5jZS5yZXNvbHZlVHlwZShzY29wZSwg
Y2hlY2tCb3VuZHMsIGxvY2F0aW9uKTsKIAkJCWlmICh0eXBlID09IG51bGwgfHwgKCh0eXBlLnRh
Z0JpdHMgJiBUYWdCaXRzLkhhc01pc3NpbmdUeXBlKSAhPSAwKSkgewogCQkJCWhhc0Vycm9yID0g
dHJ1ZTsKIAkJCQljb250aW51ZTsKQEAgLTE5Niw0ICsxOTgsNCBAQAogCQl9CiAJCXJldHVybiBv
dXRwdXQ7CiAJfQotfQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKK30KZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9hc3QvSmF2YWRvYy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIv
b3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jLmphdmEKaW5kZXgg
ZmRlZDAxMi4uMjUxYTdhMiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9KYXZhZG9jLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBh
bmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBh
bmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUg
YWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBh
bmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtOSw2ICs5LDcg
QEAKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRp
b24KICAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9uIGZvcgogICoJCQkJCQkJ
CUJ1ZyA0MDA4NzQgLSBbMS44XVtjb21waWxlcl0gSW5mZXJlbmNlIGluZnJhc3RydWN0dXJlIHNo
b3VsZCBldm9sdmUgdG8gbWVldCBKTFM4IDE4LnggKFBhcnQgRyBvZiBKU1IzMzUgc3BlYykKKyAq
CQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2Nh
dGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0OwogCkBA
IC02MTAsNyArNjExLDcgQEAKIAkJCQkvLyBTY2FuIGFsbCBAcGFyYW0gdGFncwogCQkJCWZvciAo
aW50IGkgPSAwOyBpIDwgcGFyYW1UeXBlUGFyYW1MZW5ndGg7IGkrKykgewogCQkJCQlKYXZhZG9j
U2luZ2xlVHlwZVJlZmVyZW5jZSBwYXJhbSA9IHRoaXMucGFyYW1UeXBlUGFyYW1ldGVyc1tpXTsK
LQkJCQkJVHlwZUJpbmRpbmcgcGFyYW1CaW5kaW5kID0gcGFyYW0uaW50ZXJuYWxSZXNvbHZlVHlw
ZShzY29wZSk7CisJCQkJCVR5cGVCaW5kaW5nIHBhcmFtQmluZGluZCA9IHBhcmFtLmludGVybmFs
UmVzb2x2ZVR5cGUoc2NvcGUsIDApOwogCQkJCQlpZiAocGFyYW1CaW5kaW5kICE9IG51bGwgJiYg
cGFyYW1CaW5kaW5kLmlzVmFsaWRCaW5kaW5nKCkpIHsKIAkJCQkJCWlmIChwYXJhbUJpbmRpbmQu
aXNUeXBlVmFyaWFibGUoKSkgewogCQkJCQkJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9i
dWdzL3Nob3dfYnVnLmNnaT9pZD0zOTc4ODgKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvSmF2YWRv
Y0ltcGxpY2l0VHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jSW1wbGljaXRU
eXBlUmVmZXJlbmNlLmphdmEKaW5kZXggNjRjOTU0Ny4uYzE4ZGQyOSAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9KYXZhZG9jSW1wbGljaXRUeXBlUmVmZXJlbmNlLmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2Fz
dC9KYXZhZG9jSW1wbGljaXRUeXBlUmVmZXJlbmNlLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEyIElCTSBDb3Jw
b3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jw
b3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFt
IGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVu
ZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGlj
aCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAt
Nyw2ICs3LDggQEAKICAqCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9u
IC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFu
biAtIENvbnRyaWJ1dGlvbiBmb3IKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0g
ZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1
bHQKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIuYXN0OwogCkBAIC01OSw3ICs2MSw3IEBACiAJICogUmVzb2x2ZXMgdHlw
ZSBvbiBhIEJsb2NrLCBDbGFzcyBvciBDb21waWxhdGlvblVuaXQgc2NvcGUuCiAJICogV2UgbmVl
ZCB0byBtb2RpZnkgcmVzb2xpbmcgYmVoYXZpb3IgdG8gYXZvaWQgcmF3IHR5cGUgY3JlYXRpb24u
CiAJICovCi0JcHJvdGVjdGVkIFR5cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUg
c2NvcGUpIHsKKwlwcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29w
ZSBzY29wZSwgaW50IGxvY2F0aW9uKSB7CiAJCS8vIGhhbmRsZSB0aGUgZXJyb3IgaGVyZQogCQl0
aGlzLmNvbnN0YW50ID0gQ29uc3RhbnQuTm90QUNvbnN0YW50OwogCQlpZiAodGhpcy5yZXNvbHZl
ZFR5cGUgIT0gbnVsbCkgeyAvLyBpcyBhIHNoYXJlZCB0eXBlIHJlZmVyZW5jZSB3aGljaCB3YXMg
YWxyZWFkeSByZXNvbHZlZApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9KYXZhZG9jUXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZS5qYXZhCmluZGV4IGVlN2RmODguLjQzMWVhMWUgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3Qv
SmF2YWRvY1F1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0phdmFk
b2NRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEwIElCTSBDb3Jwb3JhdGlv
biBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlv
biBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0
aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRo
ZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2Nv
bXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNyw2ICs3
LDggQEAKICAqCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBvcmF0aW9uIC0gaW5p
dGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENv
bnRyaWJ1dGlvbiBmb3IKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVh
dGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIuYXN0OwogCkBAIC03NCwxMSArNzYsMTEgQEAKIAlwcm90ZWN0ZWQgdm9pZCByZXBv
cnRJbnZhbGlkVHlwZShTY29wZSBzY29wZSkgewogCQlzY29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5q
YXZhZG9jSW52YWxpZFR5cGUodGhpcywgdGhpcy5yZXNvbHZlZFR5cGUsIHNjb3BlLmdldERlY2xh
cmF0aW9uTW9kaWZpZXJzKCkpOwogCX0KLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUo
QmxvY2tTY29wZSBibG9ja1Njb3BlLCBib29sZWFuIGNoZWNrQm91bmRzKSB7CisJcHVibGljIFR5
cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgYmxvY2tTY29wZSwgYm9vbGVhbiBjaGVj
a0JvdW5kcywgaW50IGxvY2F0aW9uKSB7CiAJCXJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKGJs
b2NrU2NvcGUsIGNoZWNrQm91bmRzKTsKIAl9CiAKLQlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2
ZVR5cGUoQ2xhc3NTY29wZSBjbGFzc1Njb3BlKSB7CisJcHVibGljIFR5cGVCaW5kaW5nIHJlc29s
dmVUeXBlKENsYXNzU2NvcGUgY2xhc3NTY29wZSwgaW50IGxvY2F0aW9uKSB7CiAJCXJldHVybiBp
bnRlcm5hbFJlc29sdmVUeXBlKGNsYXNzU2NvcGUsIGZhbHNlKTsKIAl9CiAKZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9hc3QvSmF2YWRvY1NpbmdsZVR5cGVSZWZlcmVuY2UuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3Qv
SmF2YWRvY1NpbmdsZVR5cGVSZWZlcmVuY2UuamF2YQppbmRleCAxOWFlZDA4Li4xYzY2Nzg0IDEw
MDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L0phdmFkb2NTaW5nbGVUeXBlUmVmZXJlbmNlLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9KYXZhZG9jU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhCkBAIC0xLDUgKzEs
NSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAw
OSBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
NCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRo
aXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2
YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEu
MAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFi
bGUgYXQKQEAgLTcsNiArNyw4IEBACiAgKgogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBD
b3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICogICAgIFN0ZXBo
YW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsx
LjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25O
dWxsQnlEZWZhdWx0CiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlw
c2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdDsKIApAQCAtMzYsNyArMzgsNyBAQAogCS8qCiAJ
ICogV2UgbmVlZCB0byBtb2RpZnkgcmVzb2x2aW5nIGJlaGF2aW9yIHRvIGhhbmRsZSBwYWNrYWdl
IHJlZmVyZW5jZXMKIAkgKi8KLQlwcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZl
VHlwZShTY29wZSBzY29wZSkgeworCXByb3RlY3RlZCBUeXBlQmluZGluZyBpbnRlcm5hbFJlc29s
dmVUeXBlKFNjb3BlIHNjb3BlLCBpbnQgbG9jYXRpb24pIHsKIAkJLy8gaGFuZGxlIHRoZSBlcnJv
ciBoZXJlCiAJCXRoaXMuY29uc3RhbnQgPSBDb25zdGFudC5Ob3RBQ29uc3RhbnQ7CiAJCWlmICh0
aGlzLnJlc29sdmVkVHlwZSAhPSBudWxsKSB7IC8vIGlzIGEgc2hhcmVkIHR5cGUgcmVmZXJlbmNl
IHdoaWNoIHdhcyBhbHJlYWR5IHJlc29sdmVkCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L051bGxB
bm5vdGF0aW9uTWF0Y2hpbmcuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvTnVsbEFubm90YXRpb25NYXRjaGlu
Zy5qYXZhCmluZGV4IGRiMDMyMjMuLjczZTYwYTQgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvTnVs
bEFubm90YXRpb25NYXRjaGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBp
bGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvTnVsbEFubm90YXRpb25N
YXRjaGluZy5qYXZhCkBAIC00MCwxOSArNDAsMjIgQEAKICAqLwogcHVibGljIGNsYXNzIE51bGxB
bm5vdGF0aW9uTWF0Y2hpbmcgewogCQotCXB1YmxpYyBzdGF0aWMgZmluYWwgTnVsbEFubm90YXRp
b25NYXRjaGluZyBOVUxMX0FOTk9UQVRJT05TX09LID0gbmV3IE51bGxBbm5vdGF0aW9uTWF0Y2hp
bmcoMCwgbnVsbCk7Ci0JcHVibGljIHN0YXRpYyBmaW5hbCBOdWxsQW5ub3RhdGlvbk1hdGNoaW5n
IE5VTExfQU5OT1RBVElPTlNfVU5DSEVDS0VEID0gbmV3IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmco
MSwgbnVsbCk7Ci0JcHVibGljIHN0YXRpYyBmaW5hbCBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nIE5V
TExfQU5OT1RBVElPTlNfTUlTTUFUQ0ggPSBuZXcgTnVsbEFubm90YXRpb25NYXRjaGluZygyLCBu
dWxsKTsKKwlwdWJsaWMgc3RhdGljIGZpbmFsIE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcgTlVMTF9B
Tk5PVEFUSU9OU19PSyA9IG5ldyBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nKDAsIEZsb3dJbmZvLlVO
S05PV04sIG51bGwpOworCXB1YmxpYyBzdGF0aWMgZmluYWwgTnVsbEFubm90YXRpb25NYXRjaGlu
ZyBOVUxMX0FOTk9UQVRJT05TX09LX05PTk5VTEwgPSBuZXcgTnVsbEFubm90YXRpb25NYXRjaGlu
ZygwLCBGbG93SW5mby5OT05fTlVMTCwgbnVsbCk7CisJcHVibGljIHN0YXRpYyBmaW5hbCBOdWxs
QW5ub3RhdGlvbk1hdGNoaW5nIE5VTExfQU5OT1RBVElPTlNfVU5DSEVDS0VEID0gbmV3IE51bGxB
bm5vdGF0aW9uTWF0Y2hpbmcoMSwgRmxvd0luZm8uVU5LTk9XTiwgbnVsbCk7CisJcHVibGljIHN0
YXRpYyBmaW5hbCBOdWxsQW5ub3RhdGlvbk1hdGNoaW5nIE5VTExfQU5OT1RBVElPTlNfTUlTTUFU
Q0ggPSBuZXcgTnVsbEFubm90YXRpb25NYXRjaGluZygyLCBGbG93SW5mby5VTktOT1dOLCBudWxs
KTsKIAogCS8qKiAwID0gT0ssIDEgPSB1bmNoZWNrZWQsIDIgPSBkZWZpbml0ZSBtaXNtYXRjaCAq
LwogCXB1YmxpYyBmaW5hbCBpbnQgc2V2ZXJpdHk7CiAJCiAJLyoqIElmIG5vbi1udWxsIHRoaXMg
ZmllbGQgaG9sZHMgdGhlIHN1cGVydHlwZSBvZiB0aGUgcHJvdmlkZWQgdHlwZSB3aGljaCB3YXMg
dXNlZCBmb3IgZGlyZWN0IG1hdGNoaW5nLiAqLwogCXB1YmxpYyBmaW5hbCBUeXBlQmluZGluZyBz
dXBlclR5cGVIaW50OworCXB1YmxpYyBmaW5hbCBpbnQgbnVsbFN0YXR1czsKIAkKLQlwdWJsaWMg
TnVsbEFubm90YXRpb25NYXRjaGluZyhpbnQgc2V2ZXJpdHksIFR5cGVCaW5kaW5nIHN1cGVyVHlw
ZUhpbnQpIHsKKwlwdWJsaWMgTnVsbEFubm90YXRpb25NYXRjaGluZyhpbnQgc2V2ZXJpdHksIGlu
dCBudWxsU3RhdHVzLCBUeXBlQmluZGluZyBzdXBlclR5cGVIaW50KSB7CiAJCXRoaXMuc2V2ZXJp
dHkgPSBzZXZlcml0eTsKIAkJdGhpcy5zdXBlclR5cGVIaW50ID0gc3VwZXJUeXBlSGludDsKKwkJ
dGhpcy5udWxsU3RhdHVzID0gbnVsbFN0YXR1czsKIAl9CiAKIAlwdWJsaWMgYm9vbGVhbiBpc0Fu
eU1pc21hdGNoKCkgICAgICB7IHJldHVybiB0aGlzLnNldmVyaXR5ICE9IDA7IH0KQEAgLTg5LDYg
KzkyLDggQEAKIAkJCX0gZWxzZSBpZiAoYW5ub3RhdGlvblN0YXR1cy5pc1VuY2hlY2tlZCgpKSB7
CiAJCQkJZmxvd0NvbnRleHQucmVjb3JkTnVsbGl0eU1pc21hdGNoKGN1cnJlbnRTY29wZSwgZXhw
cmVzc2lvbiwgcHJvdmlkZWRUeXBlLCB2YXIudHlwZSwgbnVsbFN0YXR1cyk7CiAJCQkJaGFzUmVw
b3J0ZWQgPSB0cnVlOworCQkJfSBlbHNlIGlmIChhbm5vdGF0aW9uU3RhdHVzLm51bGxTdGF0dXMg
IT0gRmxvd0luZm8uVU5LTk9XTikgeworCQkJCXJldHVybiBhbm5vdGF0aW9uU3RhdHVzLm51bGxT
dGF0dXM7CiAJCQl9CiAJCX0KIAkJaWYgKGxoc1RhZ0JpdHMgPT0gVGFnQml0cy5Bbm5vdGF0aW9u
Tm9uTnVsbCAmJiBudWxsU3RhdHVzICE9IEZsb3dJbmZvLk5PTl9OVUxMKSB7CkBAIC0xMTUsNiAr
MTIwLDcgQEAKIAlwdWJsaWMgc3RhdGljIE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcgYW5hbHlzZShU
eXBlQmluZGluZyByZXF1aXJlZFR5cGUsIFR5cGVCaW5kaW5nIHByb3ZpZGVkVHlwZSwgaW50IG51
bGxTdGF0dXMsIGJvb2xlYW4gc3RyaWN0KSB7CiAJCWludCBzZXZlcml0eSA9IDA7CiAJCVR5cGVC
aW5kaW5nIHN1cGVyVHlwZUhpbnQgPSBudWxsOworCQlOdWxsQW5ub3RhdGlvbk1hdGNoaW5nIG9r
U3RhdHVzID0gTnVsbEFubm90YXRpb25NYXRjaGluZy5OVUxMX0FOTk9UQVRJT05TX09LOwogCQlp
ZiAocmVxdWlyZWRUeXBlIGluc3RhbmNlb2YgQXJyYXlCaW5kaW5nKSB7CiAJCQlsb25nW10gcmVx
dWlyZWREaW1zVGFnQml0cyA9ICgoQXJyYXlCaW5kaW5nKXJlcXVpcmVkVHlwZSkubnVsbFRhZ0Jp
dHNQZXJEaW1lbnNpb247CiAJCQlpZiAocmVxdWlyZWREaW1zVGFnQml0cyAhPSBudWxsKSB7CkBA
IC0xNDYsNiArMTUyLDggQEAKIAkJCXsKIAkJCQlsb25nIHByb3ZpZGVkQml0cyA9IHByb3ZpZGVk
TnVsbFRhZ0JpdHMocHJvdmlkZWRUeXBlKTsKIAkJCQlzZXZlcml0eSA9IGNvbXB1dGVOdWxsUHJv
YmxlbVNldmVyaXR5KHJlcXVpcmVkQml0cywgcHJvdmlkZWRCaXRzLCBudWxsU3RhdHVzLCBzdHJp
Y3QgJiYgbnVsbFN0YXR1cyA9PSAtMSk7CisJCQkJaWYgKHNldmVyaXR5ID09IDAgJiYgKHByb3Zp
ZGVkQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGwpICE9IDApCisJCQkJCW9rU3RhdHVz
ID0gTnVsbEFubm90YXRpb25NYXRjaGluZy5OVUxMX0FOTk9UQVRJT05TX09LX05PTk5VTEw7CiAJ
CQl9CiAJCQlpZiAoc2V2ZXJpdHkgPCAyKSB7CiAJCQkJVHlwZUJpbmRpbmcgcHJvdmlkZWRTdXBl
ciA9IHByb3ZpZGVkVHlwZS5maW5kU3VwZXJUeXBlT3JpZ2luYXRpbmdGcm9tKHJlcXVpcmVkVHlw
ZSk7CkBAIC0xNTksNyArMTY3LDcgQEAKIAkJCQkJCQlOdWxsQW5ub3RhdGlvbk1hdGNoaW5nIHN0
YXR1cyA9IGFuYWx5c2UocmVxdWlyZWRBcmd1bWVudHNbaV0sIHByb3ZpZGVkQXJndW1lbnRzW2ld
LCAtMSwgc3RyaWN0KTsKIAkJCQkJCQlzZXZlcml0eSA9IE1hdGgubWF4KHNldmVyaXR5LCBzdGF0
dXMuc2V2ZXJpdHkpOwogCQkJCQkJCWlmIChzZXZlcml0eSA9PSAyKQotCQkJCQkJCQlyZXR1cm4g
bmV3IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcoc2V2ZXJpdHksIHN1cGVyVHlwZUhpbnQpOworCQkJ
CQkJCQlyZXR1cm4gbmV3IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcoc2V2ZXJpdHksIG51bGxTdGF0
dXMsIHN1cGVyVHlwZUhpbnQpOwogCQkJCQkJfQogCQkJCQl9CiAJCQkJfQpAQCAtMTcyLDggKzE4
MCw4IEBACiAJCQl9CiAJCX0KIAkJaWYgKHNldmVyaXR5ID09IDApCi0JCQlyZXR1cm4gTnVsbEFu
bm90YXRpb25NYXRjaGluZy5OVUxMX0FOTk9UQVRJT05TX09LOwotCQlyZXR1cm4gbmV3IE51bGxB
bm5vdGF0aW9uTWF0Y2hpbmcoc2V2ZXJpdHksIHN1cGVyVHlwZUhpbnQpOworCQkJcmV0dXJuIG9r
U3RhdHVzOworCQlyZXR1cm4gbmV3IE51bGxBbm5vdGF0aW9uTWF0Y2hpbmcoc2V2ZXJpdHksIG51
bGxTdGF0dXMsIHN1cGVyVHlwZUhpbnQpOwogCX0KIAogCS8vIGludGVycHJldGluZyAndHlwZScg
YXMgYSByZXF1aXJlZCB0eXBlLCBjb21wdXRlIHRoZSByZXF1aXJlZCBudWxsIGJpdHMKQEAgLTM3
NSw0ICszODMsNCBAQAogCQl9CiAJCXJldHVybiBtZXRob2Q7CiAJfQotfQpcIE5vIG5ld2xpbmUg
YXQgZW5kIG9mIGZpbGUKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBp
bGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUGFyYW1ldGVyaXplZFF1
YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUGFyYW1ldGVyaXplZFF1YWxp
ZmllZFR5cGVSZWZlcmVuY2UuamF2YQppbmRleCAwYTNlNGNmLi4xZmIwOGMzIDEwMDY0NAotLS0g
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwv
Y29tcGlsZXIvYXN0L1BhcmFtZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKKysr
IGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFs
L2NvbXBpbGVyL2FzdC9QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCkBA
IC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykg
MjAwMCwgMjAxMyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykg
MjAwMCwgMjAxNCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVz
ZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFy
ZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExp
Y2Vuc2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBp
cyBhdmFpbGFibGUgYXQKQEAgLTEyLDYgKzEyLDcgQEAKICAqCQkJCQkJCQlidWcgMzkyMDk5IC0g
WzEuOF1bY29tcGlsZXJdW251bGxdIEFwcGx5IG51bGwgYW5ub3RhdGlvbiBvbiB0eXBlcyBmb3Ig
bnVsbCBhbmFseXNpcwogICoJCQkJCQkJCUJ1ZyA0MTUwNDMgLSBbMS44XVtudWxsXSBGb2xsb3ct
dXAgcmUgbnVsbCB0eXBlIGFubm90YXRpb25zIGFmdGVyIGJ1ZyAzOTIwOTkKICAqCQkJCQkJCQlC
dWcgNDE2MTgxIOKAkyBbMS44XVtjb21waWxlcl1bbnVsbF0gSW52YWxpZCBhc3NpZ25tZW50IGlz
IG5vdCByZWplY3RlZCBieSB0aGUgY29tcGlsZXIKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEu
OF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51
bGxCeURlZmF1bHQKICAqICAgICAgICBBbmR5IENsZW1lbnQgLSBDb250cmlidXRpb25zIGZvcgog
ICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyAzODM2MjQgLSBbMS44XVtjb21waWxlcl0g
UmV2aXZlIGNvZGUgZ2VuZXJhdGlvbiBzdXBwb3J0IGZvciB0eXBlIGFubm90YXRpb25zIChmcm9t
IE9saXZpZXIncyB3b3JrKQogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCkBAIC0xNDYsNyArMTQ3
LDcgQEAKICAgICAvKgogICAgICAqIE5vIG5lZWQgdG8gY2hlY2sgZm9yIHJlZmVyZW5jZSB0byBy
YXcgdHlwZSBwZXIgY29uc3RydWN0aW9uCiAgICAgICovCi0JcHJpdmF0ZSBUeXBlQmluZGluZyBp
bnRlcm5hbFJlc29sdmVUeXBlKFNjb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzKSB7CisJ
cHJpdmF0ZSBUeXBlQmluZGluZyBpbnRlcm5hbFJlc29sdmVUeXBlKFNjb3BlIHNjb3BlLCBib29s
ZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9jYXRpb24pIHsKIAkJLy8gaGFuZGxlIHRoZSBlcnJvciBo
ZXJlCiAJCXRoaXMuY29uc3RhbnQgPSBDb25zdGFudC5Ob3RBQ29uc3RhbnQ7CiAJCWlmICgodGhp
cy5iaXRzICYgQVNUTm9kZS5EaWRSZXNvbHZlKSAhPSAwKSB7IC8vIGlzIGEgc2hhcmVkIHR5cGUg
cmVmZXJlbmNlIHdoaWNoIHdhcyBhbHJlYWR5IHJlc29sdmVkCkBAIC0xNjksNyArMTcwLDcgQEAK
IAkJdGhpcy5iaXRzIHw9IEFTVE5vZGUuRGlkUmVzb2x2ZTsKIAkJVHlwZUJpbmRpbmcgdHlwZSA9
IGludGVybmFsUmVzb2x2ZUxlYWZUeXBlKHNjb3BlLCBjaGVja0JvdW5kcyk7CiAJCWNyZWF0ZUFy
cmF5VHlwZShzY29wZSk7Ci0JCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSk7CisJCXJlc29sdmVB
bm5vdGF0aW9ucyhzY29wZSwgbG9jYXRpb24pOwogCQlpZiAodGhpcy50eXBlQXJndW1lbnRzICE9
IG51bGwpCiAJCQkvLyByZWxldmFudCBudWxsIGFubm90YXRpb25zIGFyZSBvbiB0aGUgaW5uZXIg
bW9zdCB0eXBlOgogCQkJY2hlY2tOdWxsQ29uc3RyYWludHMoc2NvcGUsIHRoaXMudHlwZUFyZ3Vt
ZW50c1t0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoLTFdKTsgCkBAIC00MTksMTEgKzQyMCwxMSBA
QAogCQlyZXR1cm4gb3V0cHV0OwogCX0KIAotCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlw
ZShCbG9ja1Njb3BlIHNjb3BlLCBib29sZWFuIGNoZWNrQm91bmRzKSB7Ci0JICAgIHJldHVybiBp
bnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBjaGVja0JvdW5kcyk7CisJcHVibGljIFR5cGVCaW5k
aW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMsIGlu
dCBsb2NhdGlvbikgeworCSAgICByZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZShzY29wZSwgY2hl
Y2tCb3VuZHMsIGxvY2F0aW9uKTsKIAl9Ci0JcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBl
KENsYXNzU2NvcGUgc2NvcGUpIHsKLQkgICAgcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoc2Nv
cGUsIGZhbHNlKTsKKwlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQ2xhc3NTY29wZSBz
Y29wZSwgaW50IGxvY2F0aW9uKSB7CisJICAgIHJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNj
b3BlLCBmYWxzZSwgbG9jYXRpb24pOwogCX0KIAlwdWJsaWMgdm9pZCB0cmF2ZXJzZShBU1RWaXNp
dG9yIHZpc2l0b3IsIEJsb2NrU2NvcGUgc2NvcGUpIHsKIAkJaWYgKHZpc2l0b3IudmlzaXQodGhp
cywgc2NvcGUpKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1BhcmFtZXRlcml6ZWRTaW5nbGVU
eXBlUmVmZXJlbmNlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1BhcmFtZXRlcml6ZWRTaW5nbGVUeXBlUmVm
ZXJlbmNlLmphdmEKaW5kZXggZWEyYzUxZi4uMjkxOWIzMyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2Fz
dC9QYXJhbWV0ZXJpemVkU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3Qv
UGFyYW1ldGVyaXplZFNpbmdsZVR5cGVSZWZlcmVuY2UuamF2YQpAQCAtMTIsNiArMTIsNyBAQAog
ICoJCQkJCQkJCUJ1ZyA0MjA4OTQgLSBDbGFzc0Nhc3RFeGNlcHRpb24gaW4gRGVmYXVsdEJpbmRp
bmdSZXNvbHZlci5yZXNvbHZlVHlwZShUeXBlKQogICoJCQkJCQkJCWJ1ZyAzOTIwOTkgLSBbMS44
XVtjb21waWxlcl1bbnVsbF0gQXBwbHkgbnVsbCBhbm5vdGF0aW9uIG9uIHR5cGVzIGZvciBudWxs
IGFuYWx5c2lzCiAgKgkJCQkJCQkJQnVnIDQxNTA0MyAtIFsxLjhdW251bGxdIEZvbGxvdy11cCBy
ZSBudWxsIHR5cGUgYW5ub3RhdGlvbnMgYWZ0ZXIgYnVnIDM5MjA5OQorICoJCQkJCQkJCUJ1ZyA0
Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0
ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgICAgIEFuZHkgQ2xlbWVudCAtIENvbnRyaWJ1
dGlvbnMgZm9yCiAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgQnVnIDM4MzYyNCAtIFsxLjhd
W2NvbXBpbGVyXSBSZXZpdmUgY29kZSBnZW5lcmF0aW9uIHN1cHBvcnQgZm9yIHR5cGUgYW5ub3Rh
dGlvbnMgKGZyb20gT2xpdmllcidzIHdvcmspCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KQEAg
LTExOSw3ICsxMjAsNyBAQAogICAgIC8qCiAgICAgICogTm8gbmVlZCB0byBjaGVjayBmb3IgcmVm
ZXJlbmNlIHRvIHJhdyB0eXBlIHBlciBjb25zdHJ1Y3Rpb24KICAgICAgKi8KLQlwcml2YXRlIFR5
cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2NvcGUsIFJlZmVyZW5jZUJpbmRp
bmcgZW5jbG9zaW5nVHlwZSwgYm9vbGVhbiBjaGVja0JvdW5kcykgeworCXByaXZhdGUgVHlwZUJp
bmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBzY29wZSwgUmVmZXJlbmNlQmluZGluZyBl
bmNsb3NpbmdUeXBlLCBib29sZWFuIGNoZWNrQm91bmRzLCBpbnQgbG9jYXRpb24pIHsKIAkJLy8g
aGFuZGxlIHRoZSBlcnJvciBoZXJlCiAJCXRoaXMuY29uc3RhbnQgPSBDb25zdGFudC5Ob3RBQ29u
c3RhbnQ7CiAJCWlmICgodGhpcy5iaXRzICYgQVNUTm9kZS5EaWRSZXNvbHZlKSAhPSAwKSB7IC8v
IGlzIGEgc2hhcmVkIHR5cGUgcmVmZXJlbmNlIHdoaWNoIHdhcyBhbHJlYWR5IHJlc29sdmVkCkBA
IC0xNDUsMTggKzE0NiwxOCBAQAogCQkvLyBoYW5kbGUgdGhyZWUgZGlmZmVyZW50IG91dGNvbWVz
OgogCQlpZiAodHlwZSA9PSBudWxsKSB7CiAJCQl0aGlzLnJlc29sdmVkVHlwZSA9IGNyZWF0ZUFy
cmF5VHlwZShzY29wZSwgdGhpcy5yZXNvbHZlZFR5cGUpOwotCQkJcmVzb2x2ZUFubm90YXRpb25z
KHNjb3BlKTsKKwkJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSwgMCk7IC8vIG5vIGRlZmF1bHRO
dWxsbmVzcyBmb3IgYnVnZ3kgdHlwZQogCQkJY2hlY2tOdWxsQ29uc3RyYWludHMoc2NvcGUsIHRo
aXMudHlwZUFyZ3VtZW50cyk7Ci0JCQlyZXR1cm4gbnVsbDsJCQkJCQkJLy8gbm8gdXNlZnVsIHR5
cGUsIGJ1dCBzdGlsbCBjYXB0dXJlZCBkaW1lbnNpb25zIGludG8gdGhpcy5yZXNvbHZlZFR5cGUK
KwkJCXJldHVybiBudWxsOwkJCQkJCQkvLyAoMSkgbm8gdXNlZnVsIHR5cGUsIGJ1dCBzdGlsbCBj
YXB0dXJlZCBkaW1lbnNpb25zIGludG8gdGhpcy5yZXNvbHZlZFR5cGUKIAkJfSBlbHNlIHsKIAkJ
CXR5cGUgPSBjcmVhdGVBcnJheVR5cGUoc2NvcGUsIHR5cGUpOwogCQkJaWYgKCF0aGlzLnJlc29s
dmVkVHlwZS5pc1ZhbGlkQmluZGluZygpICYmIHRoaXMucmVzb2x2ZWRUeXBlLmRpbWVuc2lvbnMo
KSA9PSB0eXBlLmRpbWVuc2lvbnMoKSkgewotCQkJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSk7
CisJCQkJcmVzb2x2ZUFubm90YXRpb25zKHNjb3BlLCAwKTsgLy8gbm8gZGVmYXVsdE51bGxuZXNz
IGZvciBidWdneSB0eXBlCiAJCQkJY2hlY2tOdWxsQ29uc3RyYWludHMoc2NvcGUsIHRoaXMudHlw
ZUFyZ3VtZW50cyk7Ci0JCQkJcmV0dXJuIHR5cGU7CQkJCQkJLy8gZm91bmQgc29tZSBlcnJvciwg
YnV0IGNvdWxkIHJlY292ZXIgdXNlZnVsIHR5cGUgKGxpa2UgY2xvc2VzdE1hdGNoKQorCQkJCXJl
dHVybiB0eXBlOwkJCQkJCS8vICgyKSBmb3VuZCBzb21lIGVycm9yLCBidXQgY291bGQgcmVjb3Zl
ciB1c2VmdWwgdHlwZSAobGlrZSBjbG9zZXN0TWF0Y2gpCiAJCQl9IGVsc2UgewotCQkJCXRoaXMu
cmVzb2x2ZWRUeXBlID0gdHlwZTsgCS8vIG5vIGNvbXBsYWludCwga2VlcCBmdWxseSByZXNvbHZl
ZCB0eXBlIChpbmNsLiBkaW1lbnNpb25zKQotCQkJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSk7
CisJCQkJdGhpcy5yZXNvbHZlZFR5cGUgPSB0eXBlOyAJCQkvLyAoMykgbm8gY29tcGxhaW50LCBr
ZWVwIGZ1bGx5IHJlc29sdmVkIHR5cGUgKGluY2wuIGRpbWVuc2lvbnMpCisJCQkJcmVzb2x2ZUFu
bm90YXRpb25zKHNjb3BlLCBsb2NhdGlvbik7CiAJCQkJY2hlY2tOdWxsQ29uc3RyYWludHMoc2Nv
cGUsIHRoaXMudHlwZUFyZ3VtZW50cyk7CiAJCQkJcmV0dXJuIHRoaXMucmVzb2x2ZWRUeXBlOyAv
LyBwaWNrIHVwIGFueSBhbm5vdGF0ZWQgdHlwZS4KIAkJCX0KQEAgLTM1MSwxNiArMzUyLDE2IEBA
CiAJCXJldHVybiBvdXRwdXQ7CiAJfQogCi0JcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBl
KEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMpIHsKLQkgICAgcmV0dXJuIGlu
dGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUsIG51bGwsIGNoZWNrQm91bmRzKTsKKwlwdWJsaWMgVHlw
ZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5k
cywgaW50IGxvY2F0aW9uKSB7CisJICAgIHJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3Bl
LCBudWxsLCBjaGVja0JvdW5kcywgbG9jYXRpb24pOwogCX0KIAotCXB1YmxpYyBUeXBlQmluZGlu
ZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3BlKSB7Ci0JICAgIHJldHVybiBpbnRlcm5hbFJl
c29sdmVUeXBlKHNjb3BlLCBudWxsLCBmYWxzZSAvKm5vIGJvdW5kcyBjaGVjayBpbiBjbGFzc1Nj
b3BlKi8pOworCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3Bl
LCBpbnQgbG9jYXRpb24pIHsKKwkgICAgcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUs
IG51bGwsIGZhbHNlIC8qbm8gYm91bmRzIGNoZWNrIGluIGNsYXNzU2NvcGUqLywgbG9jYXRpb24p
OwogCX0KIAogCXB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZUVuY2xvc2luZyhCbG9ja1Nj
b3BlIHNjb3BlLCBSZWZlcmVuY2VCaW5kaW5nIGVuY2xvc2luZ1R5cGUpIHsKLQkgICAgcmV0dXJu
IGludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUsIGVuY2xvc2luZ1R5cGUsIHRydWUvKmNoZWNrIGJv
dW5kcyovKTsKKwkgICAgcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUsIGVuY2xvc2lu
Z1R5cGUsIHRydWUvKmNoZWNrIGJvdW5kcyovLCAwKTsKIAl9CiAKIAlwdWJsaWMgdm9pZCB0cmF2
ZXJzZShBU1RWaXNpdG9yIHZpc2l0b3IsIEJsb2NrU2NvcGUgc2NvcGUpIHsKZGlmZiAtLWdpdCBh
L29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9j
b21waWxlci9hc3QvU2luZ2xlVHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9TaW5nbGVU
eXBlUmVmZXJlbmNlLmphdmEKaW5kZXggMDJjMDI3My4uNmI1ODYzNiAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9TaW5nbGVUeXBlUmVmZXJlbmNlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNv
cmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9TaW5nbGVU
eXBlUmVmZXJlbmNlLmphdmEKQEAgLTksNiArOSw3IEBACiAgKiAgICAgSUJNIENvcnBvcmF0aW9u
IC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKiAgICAgU3RlcGhhbiBIZXJybWFu
biAtIENvbnRyaWJ1dGlvbiBmb3IKICAqCQkJCQkJCQlCdWcgMzkyMjM4IC0gWzEuOF1bY29tcGls
ZXJdW251bGxdIERldGVjdCBzZW1hbnRpY2FsbHkgaW52YWxpZCBudWxsIHR5cGUgYW5ub3RhdGlv
bnMKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1
bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0
OwogCkBAIC03OCw3ICs3OSw3IEBACiAJCXRoaXMucmVzb2x2ZWRUeXBlID0gc2NvcGUuZ2V0TWVt
YmVyVHlwZSh0aGlzLnRva2VuLCBlbmNsb3NpbmdUeXBlKTsKIAkJYm9vbGVhbiBoYXNFcnJvciA9
IGZhbHNlOwogCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/
aWQ9MzkxNTAwCi0JCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSk7CisJCXJlc29sdmVBbm5vdGF0
aW9ucyhzY29wZSwgMCk7IC8vIGRlZmF1bHROdWxsbmVzcyBub3QgcmVsZXZhbnQsIHRoZSBvbmx5
IGNhbGxlciB3aXRoaW4gdGhlIGNvbXBpbGVyOiBRQUUKIAkJVHlwZUJpbmRpbmcgbWVtYmVyVHlw
ZSA9IHRoaXMucmVzb2x2ZWRUeXBlOyAvLyBsb2FkIGFmdGVyIHBvc3NpYmxlIHVwZGF0ZSBpbiBy
ZXNvbHZlQW5ub3RhdGlvbnMoKQogCQlpZiAoIW1lbWJlclR5cGUuaXNWYWxpZEJpbmRpbmcoKSkg
ewogCQkJaGFzRXJyb3IgPSB0cnVlOwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUv
Y29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9UeXBlUmVmZXJl
bmNlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQppbmRleCBkNGVlMTdkLi5l
YjQyYjg5IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQorKysgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvYXN0L1R5cGVSZWZlcmVuY2UuamF2YQpAQCAtMTUsNiArMTUsNyBAQAogICoJCQkJCQkJ
CUJ1ZyA0MTU4NTAgLSBbMS44XSBFbnN1cmUgUnVuSkRUQ29yZVRlc3RzIGNhbiBjb3BlIHdpdGgg
bnVsbCBhbm5vdGF0aW9ucyBlbmFibGVkCiAgKgkJCQkJCQkJQnVnIDQxNzI5NSAtIFsxLjhbW251
bGxdIE1hc3NhZ2UgdHlwZSBhbm5vdGF0ZWQgbnVsbCBhbmFseXNpcyB0byBnZWwgd2VsbCB3aXRo
IGRlZXAgZW5jb2RlZCB0eXBlIGJpbmRpbmdzLgogICoJCQkJCQkJCUJ1ZyA0MjcxNjMgLSBbMS44
XVtudWxsXSBib2d1cyBlcnJvciAiQ29udHJhZGljdG9yeSBudWxsIHNwZWNpZmljYXRpb24iIG9u
IHZhcmFncworICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcg
RGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgICAg
IEFuZHkgQ2xlbWVudCAoR29QaXZvdGFsLCBJbmMpIGFjbGVtZW50QGdvcGl2b3RhbC5jb20gLSBD
b250cmlidXRpb25zIGZvcgogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyAzODM2MjQg
LSBbMS44XVtjb21waWxlcl0gUmV2aXZlIGNvZGUgZ2VuZXJhdGlvbiBzdXBwb3J0IGZvciB0eXBl
IGFubm90YXRpb25zIChmcm9tIE9saXZpZXIncyB3b3JrKQogICogICAgICAgICAgICAgICAgICAg
ICAgICAgIEJ1ZyA0MDkyMzYgLSBbMS44XVtjb21waWxlcl0gVHlwZSBhbm5vdGF0aW9ucyBvbiBp
bnRlcnNlY3Rpb24gY2FzdCB0eXBlcyBkcm9wcGVkIGJ5IGNvZGUgZ2VuZXJhdG9yCkBAIC0zMywx
MCArMzQsMTMgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuZmxv
dy5GbG93SW5mbzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1w
bC5Db21waWxlck9wdGlvbnM7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmltcGwuQ29uc3RhbnQ7CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBp
bGVyLmxvb2t1cC5Bbm5vdGF0aW9uQmluZGluZzsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIubG9va3VwLkFycmF5QmluZGluZzsKK2ltcG9ydCBvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkJpbmRpbmc7CiBpbXBvcnQgb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cC5CbG9ja1Njb3BlOwogaW1wb3J0IG9yZy5lY2xp
cHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuQ2xhc3NTY29wZTsKIGltcG9ydCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwLkxvY2FsVmFyaWFibGVCaW5kaW5n
OworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuTG9va3Vw
RW52aXJvbm1lbnQ7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmxv
b2t1cC5Qcm9ibGVtUmVhc29uczsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29t
cGlsZXIubG9va3VwLlByb2JsZW1SZWZlcmVuY2VCaW5kaW5nOwogaW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXAuUmVmZXJlbmNlQmluZGluZzsKQEAgLTQ0Miw3
ICs0NDYsNyBAQAogICovCiBwdWJsaWMgYWJzdHJhY3QgY2hhciBbXVtdIGdldFR5cGVOYW1lKCkg
OwogCi1wcm90ZWN0ZWQgVHlwZUJpbmRpbmcgaW50ZXJuYWxSZXNvbHZlVHlwZShTY29wZSBzY29w
ZSkgeworcHJvdGVjdGVkIFR5cGVCaW5kaW5nIGludGVybmFsUmVzb2x2ZVR5cGUoU2NvcGUgc2Nv
cGUsIGludCBsb2NhdGlvbikgewogCS8vIGhhbmRsZSB0aGUgZXJyb3IgaGVyZQogCXRoaXMuY29u
c3RhbnQgPSBDb25zdGFudC5Ob3RBQ29uc3RhbnQ7CiAJaWYgKHRoaXMucmVzb2x2ZWRUeXBlICE9
IG51bGwpIHsgLy8gaXMgYSBzaGFyZWQgdHlwZSByZWZlcmVuY2Ugd2hpY2ggd2FzIGFscmVhZHkg
cmVzb2x2ZWQKQEAgLTQ5MywxMiArNDk3LDEyIEBACiAJCXNjb3BlLnByb2JsZW1SZXBvcnRlcigp
LnJhd1R5cGVSZWZlcmVuY2UodGhpcywgdHlwZSk7CiAJfQogCWlmIChoYXNFcnJvcikgewotCQly
ZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUpOwkJCisJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSwg
MCk7IC8vIGRvbid0IGFwcGx5IG51bGwgZGVmYXVsdHMgdG8gYnVnZ3kgdHlwZQogCQlyZXR1cm4g
dHlwZTsKIAl9IGVsc2UgewogCQkvLyBzdG9yZSB0aGUgY29tcHV0ZWQgdHlwZSBvbmx5IGlmIG5v
IGVycm9yLCBvdGhlcndpc2Uga2VlcCB0aGUgcHJvYmxlbSB0eXBlIGluc3RlYWQKIAkJdGhpcy5y
ZXNvbHZlZFR5cGUgPSB0eXBlOwotCQlyZXNvbHZlQW5ub3RhdGlvbnMoc2NvcGUpOworCQlyZXNv
bHZlQW5ub3RhdGlvbnMoc2NvcGUsIGxvY2F0aW9uKTsKIAkJcmV0dXJuIHRoaXMucmVzb2x2ZWRU
eXBlOyAvLyBwaWNrIHVwIHZhbHVlIHRoYXQgbWF5IGhhdmUgYmVlbiBjaGFuZ2VkIGluIHJlc29s
dmVBbm5vdGF0aW9ucyguLikKIAl9CiB9CkBAIC01NDksMTUgKzU1MywyMyBAQAogfQogCiBwdWJs
aWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVj
a0JvdW5kcykgewotCXJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlKTsKKwlyZXR1cm4g
cmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzLCAwKTsKK30KKworcHVibGljIFR5cGVCaW5k
aW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMsIGlu
dCBsb2NhdGlvbikgeworCXJldHVybiBpbnRlcm5hbFJlc29sdmVUeXBlKHNjb3BlLCBsb2NhdGlv
bik7CiB9CiAKIHB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFzc1Njb3BlIHNjb3Bl
KSB7Ci0JcmV0dXJuIGludGVybmFsUmVzb2x2ZVR5cGUoc2NvcGUpOworCXJldHVybiByZXNvbHZl
VHlwZShzY29wZSwgMCk7Cit9CisKK3B1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZShDbGFz
c1Njb3BlIHNjb3BlLCBpbnQgbG9jYXRpb24pIHsKKwlyZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlw
ZShzY29wZSwgbG9jYXRpb24pOwogfQogCiBwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGVB
cmd1bWVudChCbG9ja1Njb3BlIGJsb2NrU2NvcGUsIFJlZmVyZW5jZUJpbmRpbmcgZ2VuZXJpY1R5
cGUsIGludCByYW5rKSB7Ci0gICAgcmV0dXJuIHJlc29sdmVUeXBlKGJsb2NrU2NvcGUsIHRydWUg
LyogY2hlY2sgYm91bmRzKi8pOworICAgIHJldHVybiByZXNvbHZlVHlwZShibG9ja1Njb3BlLCB0
cnVlIC8qIGNoZWNrIGJvdW5kcyovLCBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVBcmd1bWVu
dCk7CiB9CiAKIHB1YmxpYyBUeXBlQmluZGluZyByZXNvbHZlVHlwZUFyZ3VtZW50KENsYXNzU2Nv
cGUgY2xhc3NTY29wZSwgUmVmZXJlbmNlQmluZGluZyBnZW5lcmljVHlwZSwgaW50IHJhbmspIHsK
QEAgLTU3MSw3ICs1ODMsNyBAQAogCQkJcmVmLnRhZ0JpdHMgfD0gVGFnQml0cy5QYXVzZUhpZXJh
cmNoeUNoZWNrOwogCQkJcGF1c2VIaWVyYXJjaHlDaGVjayA9IHRydWU7CiAJCX0KLQkgICAgcmV0
dXJuIHJlc29sdmVUeXBlKGNsYXNzU2NvcGUpOworCSAgICByZXR1cm4gcmVzb2x2ZVR5cGUoY2xh
c3NTY29wZSwgQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlQXJndW1lbnQpOwogCX0gZmluYWxs
eSB7CiAJCWlmIChwYXVzZUhpZXJhcmNoeUNoZWNrKSB7CiAJCQlyZWYudGFnQml0cyAmPSB+VGFn
Qml0cy5QYXVzZUhpZXJhcmNoeUNoZWNrOwpAQCAtNTgzLDcgKzU5NSw3IEBACiAKIHB1YmxpYyBh
YnN0cmFjdCB2b2lkIHRyYXZlcnNlKEFTVFZpc2l0b3IgdmlzaXRvciwgQ2xhc3NTY29wZSBzY29w
ZSk7CiAKLXByb3RlY3RlZCB2b2lkIHJlc29sdmVBbm5vdGF0aW9ucyhTY29wZSBzY29wZSkgewor
cHJvdGVjdGVkIHZvaWQgcmVzb2x2ZUFubm90YXRpb25zKFNjb3BlIHNjb3BlLCBpbnQgbG9jYXRp
b24pIHsKIAlBbm5vdGF0aW9uW11bXSBhbm5vdGF0aW9uc09uRGltZW5zaW9ucyA9IGdldEFubm90
YXRpb25zT25EaW1lbnNpb25zKCk7CiAJaWYgKHRoaXMuYW5ub3RhdGlvbnMgIT0gbnVsbCB8fCBh
bm5vdGF0aW9uc09uRGltZW5zaW9ucyAhPSBudWxsKSB7CiAJCUJsb2NrU2NvcGUgcmVzb2x1dGlv
blNjb3BlID0gU2NvcGUudHlwZUFubm90YXRpb25zUmVzb2x1dGlvblNjb3BlKHNjb3BlKTsKQEAg
LTYxMSw2ICs2MjMsMTcgQEAKIAkJCX0KIAkJfQogCX0KKwlpZiAodGhpcy5yZXNvbHZlZFR5cGUg
IT0gbnVsbAorCQkJJiYgKHRoaXMucmVzb2x2ZWRUeXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90
YXRpb25OdWxsTUFTSykgPT0gMAorCQkJJiYgIXRoaXMucmVzb2x2ZWRUeXBlLmlzVHlwZVZhcmlh
YmxlKCkKKwkJCSYmICF0aGlzLnJlc29sdmVkVHlwZS5pc1dpbGRjYXJkKCkKKwkJCSYmIGxvY2F0
aW9uICE9IDAgCisJCQkmJiBzY29wZS5oYXNEZWZhdWx0TnVsbG5lc3NGb3IobG9jYXRpb24pKSAK
Kwl7CisJCUxvb2t1cEVudmlyb25tZW50IGVudmlyb25tZW50ID0gc2NvcGUuZW52aXJvbm1lbnQo
KTsKKwkJQW5ub3RhdGlvbkJpbmRpbmdbXSBhbm5vdHMgPSBuZXcgQW5ub3RhdGlvbkJpbmRpbmdb
XXtlbnZpcm9ubWVudC5nZXROb25OdWxsQW5ub3RhdGlvbigpfTsKKwkJdGhpcy5yZXNvbHZlZFR5
cGUgPSBlbnZpcm9ubWVudC5jcmVhdGVBbm5vdGF0ZWRUeXBlKHRoaXMucmVzb2x2ZWRUeXBlLCBh
bm5vdHMpOworCX0KIH0KIHB1YmxpYyBpbnQgZ2V0QW5ub3RhdGFibGVMZXZlbHMoKSB7CiAJcmV0
dXJuIDE7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1VuaW9uVHlwZVJlZmVyZW5jZS5qYXZhIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2FzdC9VbmlvblR5cGVSZWZlcmVuY2UuamF2YQppbmRleCAzZWVlNjk3Li4xY2M3ZDhh
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1VuaW9uVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9hc3QvVW5pb25UeXBlUmVmZXJlbmNlLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDExLCAyMDEyIElCTSBDb3Jwb3Jh
dGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDExLCAyMDE0IElCTSBDb3Jwb3Jh
dGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFu
ZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVy
IHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBh
Y2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtNyw2
ICs3LDggQEAKICAqIAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAt
IGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICogICAgIFN0ZXBoYW4gSGVycm1hbm4g
LSBDb250cmlidXRpb24gZm9yCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2
YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0
CiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVy
bmFsLmNvbXBpbGVyLmFzdDsKIApAQCAtNDYsMTMgKzQ4LDEzIEBACiAJLyogKG5vbi1KYXZhZG9j
KQogCSAqIEBzZWUgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmFzdC5UeXBlUmVm
ZXJlbmNlI2dldFR5cGVCaW5kaW5nKG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5s
b29rdXAuU2NvcGUpCiAJICovCi0JcHVibGljIFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2Nr
U2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3VuZHMpIHsKKwlwdWJsaWMgVHlwZUJpbmRpbmcg
cmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwgYm9vbGVhbiBjaGVja0JvdW5kcywgaW50IGxv
Y2F0aW9uKSB7CiAJCS8vIHJldHVybiB0aGUgbHViIChsZWFzdCB1cHBlciBib3VuZCBvZiBhbGwg
dHlwZSBiaW5kaW5nKSAKIAkJaW50IGxlbmd0aCA9IHRoaXMudHlwZVJlZmVyZW5jZXMubGVuZ3Ro
OwogCQlUeXBlQmluZGluZ1tdIGFsbEV4Y2VwdGlvblR5cGVzID0gbmV3IFR5cGVCaW5kaW5nW2xl
bmd0aF07CiAJCWJvb2xlYW4gaGFzRXJyb3IgPSBmYWxzZTsKIAkJZm9yIChpbnQgaSA9IDA7IGkg
PCBsZW5ndGg7IGkrKykgewotCQkJVHlwZUJpbmRpbmcgZXhjZXB0aW9uVHlwZSA9IHRoaXMudHlw
ZVJlZmVyZW5jZXNbaV0ucmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzKTsKKwkJCVR5cGVC
aW5kaW5nIGV4Y2VwdGlvblR5cGUgPSB0aGlzLnR5cGVSZWZlcmVuY2VzW2ldLnJlc29sdmVUeXBl
KHNjb3BlLCBjaGVja0JvdW5kcywgbG9jYXRpb24pOwogCQkJaWYgKGV4Y2VwdGlvblR5cGUgPT0g
bnVsbCkgewogCQkJCXJldHVybiBudWxsOwogCQkJfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2Uu
amR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9X
aWxkY2FyZC5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9XaWxkY2FyZC5qYXZhCmluZGV4IDIyZTZhNWMuLjdm
OTA4Y2MgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvV2lsZGNhcmQuamF2YQorKysgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
YXN0L1dpbGRjYXJkLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
LgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
LgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55
aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0
aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlz
IGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMTIsNiArMTIsNyBAQAogICog
ICAgICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCiAgKgkJCQkJCQlCdWcg
NDE1MDQzIC0gWzEuOF1bbnVsbF0gRm9sbG93LXVwIHJlIG51bGwgdHlwZSBhbm5vdGF0aW9ucyBh
ZnRlciBidWcgMzkyMDk5CiAgKgkJCQkJCQlCdWcgNDE3Mjk1IC0gWzEuOFtbbnVsbF0gTWFzc2Fn
ZSB0eXBlIGFubm90YXRlZCBudWxsIGFuYWx5c2lzIHRvIGdlbCB3ZWxsIHdpdGggZGVlcCBlbmNv
ZGVkIHR5cGUgYmluZGluZ3MuCisgKgkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZh
bHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQK
ICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50ZXJu
YWwuY29tcGlsZXIuYXN0OwogCkBAIC02MiwxNSArNjMsMTUgQEAKIAkJVHlwZUJpbmRpbmcgYm91
bmRUeXBlID0gbnVsbDsKIAkJaWYgKHRoaXMuYm91bmQgIT0gbnVsbCkgewogCQkJYm91bmRUeXBl
ID0gc2NvcGUua2luZCA9PSBTY29wZS5DTEFTU19TQ09QRQotCQkJCQk/IHRoaXMuYm91bmQucmVz
b2x2ZVR5cGUoKENsYXNzU2NvcGUpc2NvcGUpCi0JCQkJCTogdGhpcy5ib3VuZC5yZXNvbHZlVHlw
ZSgoQmxvY2tTY29wZSlzY29wZSwgdHJ1ZSAvKiBjaGVjayBib3VuZHMqLyk7CisJCQkJCT8gdGhp
cy5ib3VuZC5yZXNvbHZlVHlwZSgoQ2xhc3NTY29wZSlzY29wZSwgQmluZGluZy5EZWZhdWx0TG9j
YXRpb25UeXBlQm91bmQpCisJCQkJCTogdGhpcy5ib3VuZC5yZXNvbHZlVHlwZSgoQmxvY2tTY29w
ZSlzY29wZSwgdHJ1ZSAvKiBjaGVjayBib3VuZHMqLywgQmluZGluZy5EZWZhdWx0TG9jYXRpb25U
eXBlQm91bmQpOwogCQkJdGhpcy5iaXRzIHw9ICh0aGlzLmJvdW5kLmJpdHMgJiBBU1ROb2RlLkhh
c1R5cGVBbm5vdGF0aW9ucyk7CiAJCQlpZiAoYm91bmRUeXBlID09IG51bGwpIHsKIAkJCQlyZXR1
cm4gbnVsbDsKIAkJCX0KIAkJfQogCQl0aGlzLnJlc29sdmVkVHlwZSA9IHNjb3BlLmVudmlyb25t
ZW50KCkuY3JlYXRlV2lsZGNhcmQoZ2VuZXJpY1R5cGUsIHJhbmssIGJvdW5kVHlwZSwgbnVsbCAv
Km5vIGV4dHJhIGJvdW5kKi8sIHRoaXMua2luZCk7Ci0JCXJlc29sdmVBbm5vdGF0aW9ucyhzY29w
ZSk7CisJCXJlc29sdmVBbm5vdGF0aW9ucyhzY29wZSwgMCk7IC8vIG5vIGRlZmF1bHROdWxsbmVz
cyBmb3Igd2lsZGNhcmRzCiAJCWlmIChib3VuZFR5cGUgIT0gbnVsbCAmJiBib3VuZFR5cGUuaGFz
TnVsbFR5cGVBbm5vdGF0aW9ucygpICYmIHRoaXMucmVzb2x2ZWRUeXBlLmhhc051bGxUeXBlQW5u
b3RhdGlvbnMoKSkgewogCQkJaWYgKCgoYm91bmRUeXBlLnRhZ0JpdHMgfCB0aGlzLnJlc29sdmVk
VHlwZS50YWdCaXRzKSAmIFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxNQVNLKSA9PSBUYWdCaXRzLkFu
bm90YXRpb25OdWxsTUFTSykgeyAvLyBhcmUgYm90aCBzZXQ/CiAJCQkJQW5ub3RhdGlvbiBhbm5v
dGF0aW9uID0gdGhpcy5ib3VuZC5maW5kQW5ub3RhdGlvbihib3VuZFR5cGUudGFnQml0cyAmIFRh
Z0JpdHMuQW5ub3RhdGlvbk51bGxNQVNLKTsKQEAgLTEwMiwyNyArMTAzLDI3IEBACiAJfQogCiAJ
Ly8gb25seSBpbnZva2VkIGZvciBpbXByb3ZpbmcgcmVzaWxpZW5jZSB3aGVuIHVuYWJsZSB0byBi
aW5kIGdlbmVyaWMgdHlwZSBmcm9tIHBhcmFtZXRlcml6ZWQgcmVmZXJlbmNlCi0JcHVibGljIFR5
cGVCaW5kaW5nIHJlc29sdmVUeXBlKEJsb2NrU2NvcGUgc2NvcGUsIGJvb2xlYW4gY2hlY2tCb3Vu
ZHMpIHsKKwlwdWJsaWMgVHlwZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQmxvY2tTY29wZSBzY29wZSwg
Ym9vbGVhbiBjaGVja0JvdW5kcywgaW50IGxvY2F0aW9uKSB7CiAJCWlmICh0aGlzLmJvdW5kICE9
IG51bGwpIHsKLQkJCXRoaXMuYm91bmQucmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzKTsK
KwkJCXRoaXMuYm91bmQucmVzb2x2ZVR5cGUoc2NvcGUsIGNoZWNrQm91bmRzLCBCaW5kaW5nLkRl
ZmF1bHRMb2NhdGlvblR5cGVCb3VuZCk7CiAJCQl0aGlzLmJpdHMgfD0gKHRoaXMuYm91bmQuYml0
cyAmIEFTVE5vZGUuSGFzVHlwZUFubm90YXRpb25zKTsKIAkJfQogCQlyZXR1cm4gbnVsbDsKIAl9
CiAJLy8gb25seSBpbnZva2VkIGZvciBpbXByb3ZpbmcgcmVzaWxpZW5jZSB3aGVuIHVuYWJsZSB0
byBiaW5kIGdlbmVyaWMgdHlwZSBmcm9tIHBhcmFtZXRlcml6ZWQgcmVmZXJlbmNlCi0JcHVibGlj
IFR5cGVCaW5kaW5nIHJlc29sdmVUeXBlKENsYXNzU2NvcGUgc2NvcGUpIHsKKwlwdWJsaWMgVHlw
ZUJpbmRpbmcgcmVzb2x2ZVR5cGUoQ2xhc3NTY29wZSBzY29wZSwgaW50IGxvY2F0aW9uKSB7CiAJ
CWlmICh0aGlzLmJvdW5kICE9IG51bGwpIHsKLQkJCXRoaXMuYm91bmQucmVzb2x2ZVR5cGUoc2Nv
cGUpOworCQkJdGhpcy5ib3VuZC5yZXNvbHZlVHlwZShzY29wZSwgQmluZGluZy5EZWZhdWx0TG9j
YXRpb25UeXBlQm91bmQpOwogCQkJdGhpcy5iaXRzIHw9ICh0aGlzLmJvdW5kLmJpdHMgJiBBU1RO
b2RlLkhhc1R5cGVBbm5vdGF0aW9ucyk7CiAJCX0KIAkJcmV0dXJuIG51bGw7CiAJfQogCXB1Ymxp
YyBUeXBlQmluZGluZyByZXNvbHZlVHlwZUFyZ3VtZW50KEJsb2NrU2NvcGUgYmxvY2tTY29wZSwg
UmVmZXJlbmNlQmluZGluZyBnZW5lcmljVHlwZSwgaW50IHJhbmspIHsKLQkgICAgcmV0dXJuIGlu
dGVybmFsUmVzb2x2ZVR5cGUoYmxvY2tTY29wZSwgZ2VuZXJpY1R5cGUsIHJhbmspOworCSAgICBy
ZXR1cm4gaW50ZXJuYWxSZXNvbHZlVHlwZShibG9ja1Njb3BlLCBnZW5lcmljVHlwZSwgcmFuayk7
IC8vIG5vIGRlZmF1bHROdWxsbmVzcyBmb3Igd2lsZGNhcmRzCiAJfQogCiAJcHVibGljIFR5cGVC
aW5kaW5nIHJlc29sdmVUeXBlQXJndW1lbnQoQ2xhc3NTY29wZSBjbGFzc1Njb3BlLCBSZWZlcmVu
Y2VCaW5kaW5nIGdlbmVyaWNUeXBlLCBpbnQgcmFuaykgewotCSAgICByZXR1cm4gaW50ZXJuYWxS
ZXNvbHZlVHlwZShjbGFzc1Njb3BlLCBnZW5lcmljVHlwZSwgcmFuayk7CisJICAgIHJldHVybiBp
bnRlcm5hbFJlc29sdmVUeXBlKGNsYXNzU2NvcGUsIGdlbmVyaWNUeXBlLCByYW5rKTsgLy8gbm8g
ZGVmYXVsdE51bGxuZXNzIGZvciB3aWxkY2FyZHMKIAl9CiAKIAlwdWJsaWMgdm9pZCB0cmF2ZXJz
ZShBU1RWaXNpdG9yIHZpc2l0b3IsIEJsb2NrU2NvcGUgc2NvcGUpIHsKZGlmZiAtLWdpdCBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9jbGFzc2ZtdC9Ob25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXIuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9jbGFzc2ZtdC9Ob25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxr
ZXIuamF2YQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi5mZDgxMDViCi0tLSAv
ZGV2L251bGwKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2NsYXNzZm10L05vbk51bGxEZWZhdWx0QXdhcmVUeXBlQW5u
b3RhdGlvbldhbGtlci5qYXZhCkBAIC0wLDAgKzEsMTUxIEBACisvKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKgorICogQ29weXJpZ2h0IChjKSAyMDE0IEdLIFNvZnR3YXJlIEFHLgorICogQWxsIHJpZ2h0
cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwor
ICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJs
aWMgTGljZW5zZSB2MS4wCisgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwg
YW5kIGlzIGF2YWlsYWJsZSBhdAorICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwt
djEwLmh0bWwKKyAqCisgKiBDb250cmlidXRvcnM6CisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAt
IGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgorICoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiov
CitwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5jbGFzc2ZtdDsKKwor
aW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5jb3JlLmNvbXBpbGVyLkNoYXJPcGVyYXRpb247CitpbXBv
cnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmVudi5JQmluYXJ5QW5ub3RhdGlv
bjsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuZW52LklCaW5hcnlF
bGVtZW50VmFsdWVQYWlyOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5lbnYuSUJpbmFyeVR5cGVBbm5vdGF0aW9uOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRl
cm5hbC5jb21waWxlci5sb29rdXAuQmluZGluZzsKK2ltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIubG9va3VwLkxvb2t1cEVudmlyb25tZW50OworCisvKioKKyAqIEEgdHlw
ZSBhbm5vdGF0aW9uIHdhbGtlciB0aGF0IGFkZHMgbWlzc2luZyBOb25OdWxsIGFubm90YXRpb25z
IGFjY29yZGluZyB0byB0aGUgY3VycmVudCBkZWZhdWx0LgorICovCitwdWJsaWMgY2xhc3MgTm9u
TnVsbERlZmF1bHRBd2FyZVR5cGVBbm5vdGF0aW9uV2Fsa2VyIGV4dGVuZHMgVHlwZUFubm90YXRp
b25XYWxrZXIgeworCisJcHJpdmF0ZSBpbnQgZGVmYXVsdE51bGxuZXNzOworCXByaXZhdGUgYm9v
bGVhbiBhdERlZmF1bHRMb2NhdGlvbjsKKwlwcml2YXRlIGJvb2xlYW4gbmV4dElzRGVmYXVsdExv
Y2F0aW9uOworCXByaXZhdGUgYm9vbGVhbiBpc0VtcHR5OworCUlCaW5hcnlBbm5vdGF0aW9uIG5v
bk51bGxBbm5vdGF0aW9uOworCisJLyoqIENyZWF0ZSBpbml0aWFsIHdhbGtlciB3aXRoIG5vbi1l
bXB0eSB0eXBlIGFubm90YXRpb25zLiAqLworCXB1YmxpYyBOb25OdWxsRGVmYXVsdEF3YXJlVHlw
ZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0aW9uW10gdHlwZUFubm90YXRpb25z
LAorCQkJCQkJaW50IGRlZmF1bHROdWxsbmVzcywgTG9va3VwRW52aXJvbm1lbnQgZW52aXJvbm1l
bnQpIHsKKwkJc3VwZXIodHlwZUFubm90YXRpb25zKTsKKwkJdGhpcy5ub25OdWxsQW5ub3RhdGlv
biA9IGdldE5vbk51bGxBbm5vdGF0aW9uKGVudmlyb25tZW50KTsKKwkJdGhpcy5kZWZhdWx0TnVs
bG5lc3MgPSBkZWZhdWx0TnVsbG5lc3M7CisJfQorCQorCS8qKiBDcmVhdGUgYW4gaW5pdGlhbCB3
YWxrZXIgd2l0aG91dCAncmVhbCcgdHlwZSBhbm5vdGF0aW9ucywgYnV0IHdpdGggYSBub25udWxs
IGRlZmF1bHQuICovCisJcHVibGljIE5vbk51bGxEZWZhdWx0QXdhcmVUeXBlQW5ub3RhdGlvbldh
bGtlcihpbnQgZGVmYXVsdE51bGxuZXNzLCBMb29rdXBFbnZpcm9ubWVudCBlbnZpcm9ubWVudCkg
eworCQl0aGlzKGRlZmF1bHROdWxsbmVzcywgZ2V0Tm9uTnVsbEFubm90YXRpb24oZW52aXJvbm1l
bnQpLCBmYWxzZSk7CisJfQorCisJLyoqIEdldCByZXN0cmljdGVkIHdhbGtlciwgc3RpbGwgd2l0
aCBub24tZW1wdHkgdHlwZSBhbm5vdGF0aW9ucy4gKi8KKwlOb25OdWxsRGVmYXVsdEF3YXJlVHlw
ZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0aW9uW10gdHlwZUFubm90YXRpb25z
LCBsb25nIG5ld01hdGNoZXMsIGludCBuZXdQYXRoUHRyLAorCQkJCQkJaW50IGRlZmF1bHROdWxs
bmVzcywgSUJpbmFyeUFubm90YXRpb24gbm9uTnVsbEFubm90YXRpb24sIGJvb2xlYW4gYXREZWZh
dWx0TG9jYXRpb24pIHsKKwkJc3VwZXIodHlwZUFubm90YXRpb25zLCBuZXdNYXRjaGVzLCBuZXdQ
YXRoUHRyKTsKKwkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBkZWZhdWx0TnVsbG5lc3M7CisJCXRo
aXMubm9uTnVsbEFubm90YXRpb24gPSBub25OdWxsQW5ub3RhdGlvbjsKKwkJdGhpcy5hdERlZmF1
bHRMb2NhdGlvbiA9IGF0RGVmYXVsdExvY2F0aW9uOworCX0KKworCS8qKiBDcmVhdGUgYSByZXN0
cmljdGVkIHdhbGtlciB3aXRob3V0ICdyZWFsJyB0eXBlIGFubm90YXRpb25zLCBidXQgd2l0aCBh
IG5vbm51bGwgZGVmYXVsdC4gKi8KKwlOb25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25X
YWxrZXIoaW50IGRlZmF1bHROdWxsbmVzcywgSUJpbmFyeUFubm90YXRpb24gbm9uTnVsbEFubm90
YXRpb24sIGJvb2xlYW4gYXREZWZhdWx0TG9jYXRpb24pIHsKKwkJc3VwZXIobnVsbCwgMCwgMCk7
CisJCXRoaXMubm9uTnVsbEFubm90YXRpb24gPSBub25OdWxsQW5ub3RhdGlvbjsKKwkJdGhpcy5k
ZWZhdWx0TnVsbG5lc3MgPSBkZWZhdWx0TnVsbG5lc3M7CisJCXRoaXMuYXREZWZhdWx0TG9jYXRp
b24gPSBhdERlZmF1bHRMb2NhdGlvbjsKKwkJdGhpcy5pc0VtcHR5ID0gdHJ1ZTsKKwl9CisJCisJ
cHJpdmF0ZSBzdGF0aWMgSUJpbmFyeUFubm90YXRpb24gZ2V0Tm9uTnVsbEFubm90YXRpb24oTG9v
a3VwRW52aXJvbm1lbnQgZW52aXJvbm1lbnQpIHsKKwkJZmluYWwgY2hhcltdIG5vbk51bGxBbm5v
dGF0aW9uTmFtZSA9IENoYXJPcGVyYXRpb24uY29uY2F0KAorCQkJCQkJJ0wnLCBDaGFyT3BlcmF0
aW9uLmNvbmNhdFdpdGgoZW52aXJvbm1lbnQuZ2V0Tm9uTnVsbEFubm90YXRpb25OYW1lKCksICcv
JyksICc7Jyk7CisJCS8vIGNyZWF0ZSB0aGUgc3ludGhldGljIGFubm90YXRpb246CisJCXJldHVy
biBuZXcgSUJpbmFyeUFubm90YXRpb24oKSB7CisJCQlAT3ZlcnJpZGUKKwkJCXB1YmxpYyBjaGFy
W10gZ2V0VHlwZU5hbWUoKSB7CisJCQkJcmV0dXJuIG5vbk51bGxBbm5vdGF0aW9uTmFtZTsKKwkJ
CX0KKwkJCUBPdmVycmlkZQorCQkJcHVibGljIElCaW5hcnlFbGVtZW50VmFsdWVQYWlyW10gZ2V0
RWxlbWVudFZhbHVlUGFpcnMoKSB7CisJCQkJcmV0dXJuIG51bGw7CisJCQl9CisJCX07CisJfQor
CisJcHJvdGVjdGVkIFR5cGVBbm5vdGF0aW9uV2Fsa2VyIHJlc3RyaWN0KGxvbmcgbmV3TWF0Y2hl
cywgaW50IG5ld1BhdGhQdHIpIHsKKwkJLy8gY29uc2lkZXJzIG5leHRJc0RlZmF1bHRMb2NhdGlv
biBhcyB0aGUgbmV3IGF0RGVmYXVsdExvY2F0aW9uCisJCXRyeSB7CisJCQkvLyBkbyB3ZSBoYXZl
IGFueSBjaGFuZ2UgYXQgYWxsPworCQkJaWYgKHRoaXMubWF0Y2hlcyA9PSBuZXdNYXRjaGVzICYm
IHRoaXMucGF0aFB0ciA9PSBuZXdQYXRoUHRyICYmIHRoaXMuYXREZWZhdWx0TG9jYXRpb24gPT0g
dGhpcy5uZXh0SXNEZWZhdWx0TG9jYXRpb24pCisJCQkJcmV0dXJuIHRoaXM7CisJCQkvLyBhcmUg
d2UgcnVubmluZyBvdXQgb2YgcmVhbCB0eXBlIGFubm90YXRpb25zPworCQkJaWYgKG5ld01hdGNo
ZXMgPT0gMCB8fCB0aGlzLnR5cGVBbm5vdGF0aW9ucyA9PSBudWxsIHx8IHRoaXMudHlwZUFubm90
YXRpb25zLmxlbmd0aCA9PSAwKQorCQkJCXJldHVybiBuZXcgTm9uTnVsbERlZmF1bHRBd2FyZVR5
cGVBbm5vdGF0aW9uV2Fsa2VyKHRoaXMuZGVmYXVsdE51bGxuZXNzLCB0aGlzLm5vbk51bGxBbm5v
dGF0aW9uLCB0aGlzLm5leHRJc0RlZmF1bHRMb2NhdGlvbik7CisJCQkvLyBwcm9jZWVkIGFzIG5v
cm1hbCwgYnV0IHBhc3Mgb24gb3VyIHNwZWNpZmljIGZpZWxkcywgdG9vOgorCQkJcmV0dXJuIG5l
dyBOb25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXIodGhpcy50eXBlQW5ub3Rh
dGlvbnMsIG5ld01hdGNoZXMsIG5ld1BhdGhQdHIsCisJCQkJCQkJCQkJCQkJCQkJdGhpcy5kZWZh
dWx0TnVsbG5lc3MsIHRoaXMubm9uTnVsbEFubm90YXRpb24sIHRoaXMubmV4dElzRGVmYXVsdExv
Y2F0aW9uKTsKKwkJfSBmaW5hbGx5IHsKKwkJCXRoaXMubmV4dElzRGVmYXVsdExvY2F0aW9uID0g
ZmFsc2U7IC8vIGV4cGlyZQorCQl9CisJfQorCQorCUBPdmVycmlkZQorCXB1YmxpYyBUeXBlQW5u
b3RhdGlvbldhbGtlciB0b01ldGhvZFBhcmFtZXRlcihzaG9ydCBpbmRleCkgeworCQkvLyBkb24n
dCBzZXQgbmV4dElzRGVmYXVsdExvY2F0aW9uLCBiZWNhdXNlIHNpZ25hdHVyZS1sZXZlbCBudWxs
bmVzcyBpcyBoYW5kbGVkIGJ5IEltcGxpY2l0TnVsbEFubm90YXRpb25WZXJpZmllcgorCQlpZiAo
dGhpcy5pc0VtcHR5KSByZXR1cm4gcmVzdHJpY3QodGhpcy5tYXRjaGVzLCB0aGlzLnBhdGhQdHIp
OworCQlyZXR1cm4gc3VwZXIudG9NZXRob2RQYXJhbWV0ZXIoaW5kZXgpOworCX0KKworCUBPdmVy
cmlkZQorCXB1YmxpYyBUeXBlQW5ub3RhdGlvbldhbGtlciB0b01ldGhvZFJldHVybigpIHsKKwkJ
Ly8gZG9uJ3Qgc2V0IG5leHRJc0RlZmF1bHRMb2NhdGlvbiwgYmVjYXVzZSBzaWduYXR1cmUtbGV2
ZWwgbnVsbG5lc3MgaXMgaGFuZGxlZCBieSBJbXBsaWNpdE51bGxBbm5vdGF0aW9uVmVyaWZpZXIK
KwkJaWYgKHRoaXMuaXNFbXB0eSkgcmV0dXJuIHJlc3RyaWN0KHRoaXMubWF0Y2hlcywgdGhpcy5w
YXRoUHRyKTsKKwkJcmV0dXJuIHN1cGVyLnRvTWV0aG9kUmV0dXJuKCk7CisJfQorCisJQE92ZXJy
aWRlCisJcHVibGljIFR5cGVBbm5vdGF0aW9uV2Fsa2VyIHRvVHlwZUJvdW5kKHNob3J0IGJvdW5k
SW5kZXgpIHsKKwkJdGhpcy5uZXh0SXNEZWZhdWx0TG9jYXRpb24gPSAodGhpcy5kZWZhdWx0TnVs
bG5lc3MgJiBCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblR5cGVCb3VuZCkgIT0gMDsKKwkJaWYgKHRo
aXMuaXNFbXB0eSkgcmV0dXJuIHJlc3RyaWN0KHRoaXMubWF0Y2hlcywgdGhpcy5wYXRoUHRyKTsK
KwkJcmV0dXJuIHN1cGVyLnRvVHlwZUJvdW5kKGJvdW5kSW5kZXgpOworCX0KKworCUBPdmVycmlk
ZQorCXB1YmxpYyBUeXBlQW5ub3RhdGlvbldhbGtlciB0b1R5cGVQYXJhbWV0ZXJCb3VuZHMoYm9v
bGVhbiBpc0NsYXNzVHlwZVBhcmFtZXRlciwgaW50IHBhcmFtZXRlclJhbmspIHsKKwkJdGhpcy5u
ZXh0SXNEZWZhdWx0TG9jYXRpb24gPSAodGhpcy5kZWZhdWx0TnVsbG5lc3MgJiBCaW5kaW5nLkRl
ZmF1bHRMb2NhdGlvblR5cGVCb3VuZCkgIT0gMDsKKwkJaWYgKHRoaXMuaXNFbXB0eSkgcmV0dXJu
IHJlc3RyaWN0KHRoaXMubWF0Y2hlcywgdGhpcy5wYXRoUHRyKTsKKwkJcmV0dXJuIHN1cGVyLnRv
VHlwZVBhcmFtZXRlckJvdW5kcyhpc0NsYXNzVHlwZVBhcmFtZXRlciwgcGFyYW1ldGVyUmFuayk7
CisJfQorCisJQE92ZXJyaWRlCisJcHVibGljIFR5cGVBbm5vdGF0aW9uV2Fsa2VyIHRvVHlwZUFy
Z3VtZW50KGludCByYW5rKSB7CisJCXRoaXMubmV4dElzRGVmYXVsdExvY2F0aW9uID0gKHRoaXMu
ZGVmYXVsdE51bGxuZXNzICYgQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlQXJndW1lbnQpICE9
IDA7CisJCWlmICh0aGlzLmlzRW1wdHkpIHJldHVybiByZXN0cmljdCh0aGlzLm1hdGNoZXMsIHRo
aXMucGF0aFB0cik7CisJCXJldHVybiBzdXBlci50b1R5cGVBcmd1bWVudChyYW5rKTsKKwl9CisK
KwlAT3ZlcnJpZGUKKwlwdWJsaWMgVHlwZUFubm90YXRpb25XYWxrZXIgdG9UeXBlUGFyYW1ldGVy
KGJvb2xlYW4gaXNDbGFzc1R5cGVQYXJhbWV0ZXIsIGludCByYW5rKSB7CisJCXRoaXMubmV4dElz
RGVmYXVsdExvY2F0aW9uID0gKHRoaXMuZGVmYXVsdE51bGxuZXNzICYgQmluZGluZy5EZWZhdWx0
TG9jYXRpb25UeXBlUGFyYW1ldGVyKSAhPSAwOworCQlpZiAodGhpcy5pc0VtcHR5KSByZXR1cm4g
cmVzdHJpY3QodGhpcy5tYXRjaGVzLCB0aGlzLnBhdGhQdHIpOworCQlyZXR1cm4gc3VwZXIudG9U
eXBlUGFyYW1ldGVyKGlzQ2xhc3NUeXBlUGFyYW1ldGVyLCByYW5rKTsKKwl9CisKKwlAT3ZlcnJp
ZGUKKwlwdWJsaWMgSUJpbmFyeUFubm90YXRpb25bXSBnZXRBbm5vdGF0aW9uc0F0Q3Vyc29yKCkg
eworCQlJQmluYXJ5QW5ub3RhdGlvbltdIG5vcm1hbEFubm90YXRpb25zID0gdGhpcy5pc0VtcHR5
ID8gbnVsbCA6IHN1cGVyLmdldEFubm90YXRpb25zQXRDdXJzb3IoKTsKKwkJaWYgKHRoaXMuYXRE
ZWZhdWx0TG9jYXRpb24pIHsKKwkJCWlmIChub3JtYWxBbm5vdGF0aW9ucyA9PSBudWxsIHx8IG5v
cm1hbEFubm90YXRpb25zLmxlbmd0aCA9PSAwKQorCQkJCXJldHVybiBuZXcgSUJpbmFyeUFubm90
YXRpb25bXSB7IHRoaXMubm9uTnVsbEFubm90YXRpb24gfTsKKwkJCWludCBsZW4gPSBub3JtYWxB
bm5vdGF0aW9ucy5sZW5ndGg7CisJCQlJQmluYXJ5QW5ub3RhdGlvbltdIG5ld0Fubm90cyA9IG5l
dyBJQmluYXJ5QW5ub3RhdGlvbltsZW4rMV07CisJCQlTeXN0ZW0uYXJyYXljb3B5KG5vcm1hbEFu
bm90YXRpb25zLCAwLCBuZXdBbm5vdHMsIDAsIGxlbik7CisJCQluZXdBbm5vdHNbbGVuXSA9IHRo
aXMubm9uTnVsbEFubm90YXRpb247CisJCQlyZXR1cm4gbmV3QW5ub3RzOworCQl9CisJCXJldHVy
biBub3JtYWxBbm5vdGF0aW9uczsKKwl9Cit9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvY2xhc3NmbXQv
VHlwZUFubm90YXRpb25XYWxrZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9jbGFzc2ZtdC9UeXBlQW5ub3RhdGlv
bldhbGtlci5qYXZhCmluZGV4IGU3MjdlODAuLjlmMTg5YjcgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9j
bGFzc2ZtdC9UeXBlQW5ub3RhdGlvbldhbGtlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9jbGFzc2ZtdC9U
eXBlQW5ub3RhdGlvbldhbGtlci5qYXZhCkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAxMyBHSyBTb2Z0d2FyZSBBRy4KKyAqIENvcHly
aWdodCAoYykgMjAxMywgMjAxNCBHSyBTb2Z0d2FyZSBBRy4KICAqIEFsbCByaWdodHMgcmVzZXJ2
ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBt
YWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vu
c2UgdjEuMAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBh
dmFpbGFibGUgYXQKQEAgLTQ0LDkgKzQ0LDkgQEAKIAkJcHVibGljIElCaW5hcnlBbm5vdGF0aW9u
W10gZ2V0QW5ub3RhdGlvbnNBdEN1cnNvcigpIHsgcmV0dXJuIE5PX0FOTk9UQVRJT05TOyB9CiAJ
fTsKIAkKLQlmaW5hbCBwcml2YXRlIElCaW5hcnlUeXBlQW5ub3RhdGlvbltdIHR5cGVBbm5vdGF0
aW9uczsJLy8gdGhlIGFjdHVhbCBtYXRlcmlhbCB3ZSdyZSBtYW5hZ2luZyBoZXJlCi0JZmluYWwg
cHJpdmF0ZSBsb25nIG1hdGNoZXM7CQkJCQkJCS8vIGJpdCBtYXNrIG9mIGluZGljZXMgaW50byB0
eXBlQW5ub3RhdGlvbnMsIDEgbWVhbnMgYWN0aXZlLCAwIGlzIGZpbHRlcmVkIGR1cmluZyB0aGUg
d2FsawotCWZpbmFsIHByaXZhdGUgaW50IHBhdGhQdHI7CQkJCQkJCS8vIHBvaW50ZXIgaW50byB0
aGUgdHlwZVBhdGgKKwlmaW5hbCBwcm90ZWN0ZWQgSUJpbmFyeVR5cGVBbm5vdGF0aW9uW10gdHlw
ZUFubm90YXRpb25zOwkvLyB0aGUgYWN0dWFsIG1hdGVyaWFsIHdlJ3JlIG1hbmFnaW5nIGhlcmUK
KwlmaW5hbCBwcm90ZWN0ZWQgbG9uZyBtYXRjaGVzOwkJCQkJCQkJLy8gYml0IG1hc2sgb2YgaW5k
aWNlcyBpbnRvIHR5cGVBbm5vdGF0aW9ucywgMSBtZWFucyBhY3RpdmUsIDAgaXMgZmlsdGVyZWQg
ZHVyaW5nIHRoZSB3YWxrCisJZmluYWwgcHJvdGVjdGVkIGludCBwYXRoUHRyOwkJCQkJCQkJLy8g
cG9pbnRlciBpbnRvIHRoZSB0eXBlUGF0aAogCiAJLy8gcHJlY29uZGl0aW9uOiBub3QtZW1wdHkg
dHlwZUFubm90YXRpb25zCiAJcHVibGljIFR5cGVBbm5vdGF0aW9uV2Fsa2VyKElCaW5hcnlUeXBl
QW5ub3RhdGlvbltdIHR5cGVBbm5vdGF0aW9ucykgewpAQCAtNTUsMTMgKzU1LDEzIEBACiAJVHlw
ZUFubm90YXRpb25XYWxrZXIoSUJpbmFyeVR5cGVBbm5vdGF0aW9uW10gdHlwZUFubm90YXRpb25z
LCBsb25nIG1hdGNoQml0cykgewogCQl0aGlzKHR5cGVBbm5vdGF0aW9ucywgbWF0Y2hCaXRzLCAw
KTsKIAl9Ci0JcHJpdmF0ZSBUeXBlQW5ub3RhdGlvbldhbGtlcihJQmluYXJ5VHlwZUFubm90YXRp
b25bXSB0eXBlQW5ub3RhdGlvbnMsIGxvbmcgbWF0Y2hCaXRzLCBpbnQgcGF0aFB0cikgeworCXBy
b3RlY3RlZCBUeXBlQW5ub3RhdGlvbldhbGtlcihJQmluYXJ5VHlwZUFubm90YXRpb25bXSB0eXBl
QW5ub3RhdGlvbnMsIGxvbmcgbWF0Y2hCaXRzLCBpbnQgcGF0aFB0cikgewogCQl0aGlzLnR5cGVB
bm5vdGF0aW9ucyA9IHR5cGVBbm5vdGF0aW9uczsKIAkJdGhpcy5tYXRjaGVzID0gbWF0Y2hCaXRz
OwogCQl0aGlzLnBhdGhQdHIgPSBwYXRoUHRyOwogCX0KIAotCXByaXZhdGUgVHlwZUFubm90YXRp
b25XYWxrZXIgcmVzdHJpY3QobG9uZyBuZXdNYXRjaGVzLCBpbnQgbmV3UGF0aFB0cikgeworCXBy
b3RlY3RlZCBUeXBlQW5ub3RhdGlvbldhbGtlciByZXN0cmljdChsb25nIG5ld01hdGNoZXMsIGlu
dCBuZXdQYXRoUHRyKSB7CiAJCWlmICh0aGlzLm1hdGNoZXMgPT0gbmV3TWF0Y2hlcyAmJiB0aGlz
LnBhdGhQdHIgPT0gbmV3UGF0aFB0cikgcmV0dXJuIHRoaXM7CiAJCWlmIChuZXdNYXRjaGVzID09
IDAgfHwgdGhpcy50eXBlQW5ub3RhdGlvbnMgPT0gbnVsbCB8fCB0aGlzLnR5cGVBbm5vdGF0aW9u
cy5sZW5ndGggPT0gMCkKIAkJCXJldHVybiBFTVBUWV9BTk5PVEFUSU9OX1dBTEtFUjsKZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9sb29rdXAvQmluYXJ5VHlwZUJpbmRpbmcuamF2YSBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29r
dXAvQmluYXJ5VHlwZUJpbmRpbmcuamF2YQppbmRleCA2OTdlMzE5Li4xZjBkODY5IDEwMDY0NAot
LS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvbG9va3VwL0JpbmFyeVR5cGVCaW5kaW5nLmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xv
b2t1cC9CaW5hcnlUeXBlQmluZGluZy5qYXZhCkBAIC0yNCw2ICsyNCw3IEBACiAgKgkJCQkJCQkJ
QnVnIDQxNzI5NSAtIFsxLjhbW251bGxdIE1hc3NhZ2UgdHlwZSBhbm5vdGF0ZWQgbnVsbCBhbmFs
eXNpcyB0byBnZWwgd2VsbCB3aXRoIGRlZXAgZW5jb2RlZCB0eXBlIGJpbmRpbmdzLgogICoJCQkJ
CQkJCUJ1ZyA0MjcxOTkgLSBbMS44XVtyZXNvdXJjZV0gYXZvaWQgcmVzb3VyY2UgbGVhayB3YXJu
aW5ncyBvbiBTdHJlYW1zIHRoYXQgaGF2ZSBubyByZXNvdXJjZQogICoJCQkJCQkJCUJ1ZyAzOTIy
NDUgLSBbMS44XVtjb21waWxlcl1bbnVsbF0gRGVmaW5lIHdoZXRoZXIgLyBob3cgQE5vbk51bGxC
eURlZmF1bHQgYXBwbGllcyB0byBUWVBFX1VTRSBsb2NhdGlvbnMKKyAqCQkJCQkJCQlCdWcgNDI5
OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUg
b2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgIEplc3BlciBTdGVlbiBNb2xsZXIgLSBDb250cmli
dXRpb25zIGZvcgogICoJCQkJCQkJCUJ1ZyA0MTIxNTAgWzEuOF0gW2NvbXBpbGVyXSBFbmFibGUg
cmVmbGVjdGVkIHBhcmFtZXRlciBuYW1lcyBkdXJpbmcgYW5ub3RhdGlvbiBwcm9jZXNzaW5nCiAg
KgkJCQkJCQkJQnVnIDQxMjE1MyAtIFsxLjhdW2NvbXBpbGVyXSBDaGVjayB2YWxpZGl0eSBvZiBh
bm5vdGF0aW9ucyB3aGljaCBtYXkgYmUgcmVwZWF0YWJsZQpAQCAtMzMsNyArMzQsOSBAQAogaW1w
b3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CiAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5j
b21waWxlci5DaGFyT3BlcmF0aW9uOworaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5j
b21waWxlci5hc3QuQW5ub3RhdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwu
Y29tcGlsZXIuY2xhc3NmbXQuQ2xhc3NGaWxlQ29uc3RhbnRzOworaW1wb3J0IG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5jbGFzc2ZtdC5Ob25OdWxsRGVmYXVsdEF3YXJlVHlwZUFu
bm90YXRpb25XYWxrZXI7CiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVy
LmNsYXNzZm10LlR5cGVBbm5vdGF0aW9uV2Fsa2VyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5jb2RlZ2VuLkNvbnN0YW50UG9vbDsKIGltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuZW52Lio7CkBAIC03Niw4ICs3OSw5IEBACiAJcHJvdGVj
dGVkIFNpbXBsZUxvb2t1cFRhYmxlIHN0b3JlZEFubm90YXRpb25zID0gbnVsbDsgLy8ga2V5cyBh
cmUgdGhpcyBSZWZlcmVuY2VCaW5kaW5nICYgaXRzIGZpZWxkcyBhbmQgbWV0aG9kcywgdmFsdWUg
aXMgYW4gQW5ub3RhdGlvbkhvbGRlcgogCiAJcHJpdmF0ZSBSZWZlcmVuY2VCaW5kaW5nIGNvbnRh
aW5lckFubm90YXRpb25UeXBlOworCWludCBkZWZhdWx0TnVsbG5lc3MgPSAwOwogCi1zdGF0aWMg
T2JqZWN0IGNvbnZlcnRNZW1iZXJWYWx1ZShPYmplY3QgYmluYXJ5VmFsdWUsIExvb2t1cEVudmly
b25tZW50IGVudiwgY2hhcltdW11bXSBtaXNzaW5nVHlwZU5hbWVzKSB7CitzdGF0aWMgT2JqZWN0
IGNvbnZlcnRNZW1iZXJWYWx1ZShPYmplY3QgYmluYXJ5VmFsdWUsIExvb2t1cEVudmlyb25tZW50
IGVudiwgY2hhcltdW11bXSBtaXNzaW5nVHlwZU5hbWVzLCBib29sZWFuIHJlc29sdmVFbnVtQ29u
c3RhbnRzKSB7CiAJaWYgKGJpbmFyeVZhbHVlID09IG51bGwpIHJldHVybiBudWxsOwogCWlmIChi
aW5hcnlWYWx1ZSBpbnN0YW5jZW9mIENvbnN0YW50KQogCQlyZXR1cm4gYmluYXJ5VmFsdWU7CkBA
IC04OCw2ICs5Miw4IEBACiAJaWYgKGJpbmFyeVZhbHVlIGluc3RhbmNlb2YgRW51bUNvbnN0YW50
U2lnbmF0dXJlKSB7CiAJCUVudW1Db25zdGFudFNpZ25hdHVyZSByZWYgPSAoRW51bUNvbnN0YW50
U2lnbmF0dXJlKSBiaW5hcnlWYWx1ZTsKIAkJUmVmZXJlbmNlQmluZGluZyBlbnVtVHlwZSA9IChS
ZWZlcmVuY2VCaW5kaW5nKSBlbnYuZ2V0VHlwZUZyb21TaWduYXR1cmUocmVmLmdldFR5cGVOYW1l
KCksIDAsIC0xLCBmYWxzZSwgbnVsbCwgbWlzc2luZ1R5cGVOYW1lcywgVHlwZUFubm90YXRpb25X
YWxrZXIuRU1QVFlfQU5OT1RBVElPTl9XQUxLRVIpOworCQlpZiAoZW51bVR5cGUuaXNVbnJlc29s
dmVkVHlwZSgpICYmICFyZXNvbHZlRW51bUNvbnN0YW50cykKKwkJCXJldHVybiBuZXcgRWxlbWVu
dFZhbHVlUGFpci5VbnJlc29sdmVkRW51bUNvbnN0YW50KGVudW1UeXBlLCBlbnYsIHJlZi5nZXRF
bnVtQ29uc3RhbnROYW1lKCkpOwogCQllbnVtVHlwZSA9IChSZWZlcmVuY2VCaW5kaW5nKSByZXNv
bHZlVHlwZShlbnVtVHlwZSwgZW52LCBmYWxzZSAvKiBubyByYXcgY29udmVyc2lvbiAqLyk7CiAJ
CXJldHVybiBlbnVtVHlwZS5nZXRGaWVsZChyZWYuZ2V0RW51bUNvbnN0YW50TmFtZSgpLCBmYWxz
ZSk7CiAJfQpAQCAtOTcsNyArMTAzLDcgQEAKIAkJaWYgKGxlbmd0aCA9PSAwKSByZXR1cm4gb2Jq
ZWN0czsKIAkJT2JqZWN0W10gdmFsdWVzID0gbmV3IE9iamVjdFtsZW5ndGhdOwogCQlmb3IgKGlu
dCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKQotCQkJdmFsdWVzW2ldID0gY29udmVydE1lbWJlclZh
bHVlKG9iamVjdHNbaV0sIGVudiwgbWlzc2luZ1R5cGVOYW1lcyk7CisJCQl2YWx1ZXNbaV0gPSBj
b252ZXJ0TWVtYmVyVmFsdWUob2JqZWN0c1tpXSwgZW52LCBtaXNzaW5nVHlwZU5hbWVzLCByZXNv
bHZlRW51bUNvbnN0YW50cyk7CiAJCXJldHVybiB2YWx1ZXM7CiAJfQogCkBAIC0xMjksNyArMTM1
LDcgQEAKIAlpbnQgbGVuZ3RoID0gYmluYXJ5UGFpcnMgPT0gbnVsbCA/IDAgOiBiaW5hcnlQYWly
cy5sZW5ndGg7CiAJRWxlbWVudFZhbHVlUGFpcltdIHBhaXJzID0gbGVuZ3RoID09IDAgPyBCaW5k
aW5nLk5PX0VMRU1FTlRfVkFMVUVfUEFJUlMgOiBuZXcgRWxlbWVudFZhbHVlUGFpcltsZW5ndGhd
OwogCWZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspCi0JCXBhaXJzW2ldID0gbmV3IEVs
ZW1lbnRWYWx1ZVBhaXIoYmluYXJ5UGFpcnNbaV0uZ2V0TmFtZSgpLCBjb252ZXJ0TWVtYmVyVmFs
dWUoYmluYXJ5UGFpcnNbaV0uZ2V0VmFsdWUoKSwgZW52LCBtaXNzaW5nVHlwZU5hbWVzKSwgbnVs
bCk7CisJCXBhaXJzW2ldID0gbmV3IEVsZW1lbnRWYWx1ZVBhaXIoYmluYXJ5UGFpcnNbaV0uZ2V0
TmFtZSgpLCBjb252ZXJ0TWVtYmVyVmFsdWUoYmluYXJ5UGFpcnNbaV0uZ2V0VmFsdWUoKSwgZW52
LCBtaXNzaW5nVHlwZU5hbWVzLCBmYWxzZSksIG51bGwpOwogCiAJY2hhcltdIHR5cGVOYW1lID0g
YW5ub3RhdGlvbkluZm8uZ2V0VHlwZU5hbWUoKTsKIAlSZWZlcmVuY2VCaW5kaW5nIGFubm90YXRp
b25UeXBlID0gZW52LmdldFR5cGVGcm9tQ29uc3RhbnRQb29sTmFtZSh0eXBlTmFtZSwgMSwgdHlw
ZU5hbWUubGVuZ3RoIC0gMSwgZmFsc2UsIG1pc3NpbmdUeXBlTmFtZXMpOwpAQCAtMzg5LDYgKzM5
NSwxMCBAQAogCQkgICBhbmQvb3Igc3VwZXIgaW50ZXJmYWNlcyBpbiBvcmRlciB0byBiZSBhYmxl
IHRvIGRldGVjdCBvdmVycmlkaW5nIGluIHRoZSBwcmVzZW5jZQogCQkgICBvZiBnZW5lcmljcy4K
IAkJICovCisJCWlmICh0aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuaXNBbm5vdGF0aW9u
QmFzZWROdWxsQW5hbHlzaXNFbmFibGVkKSB7CisJCQkvLyBuZWVkIGFubm90YXRpb25zIG9uIHRo
ZSB0eXBlIGJlZm9yZSBwcm9jZXNzaW5nIG51bGwgYW5ub3RhdGlvbnMgb24gbWVtYmVycyByZXNw
ZWN0aW5nIGFueSBATm9uTnVsbEJ5RGVmYXVsdDoKKwkJCXNjYW5UeXBlRm9yTnVsbERlZmF1bHRB
bm5vdGF0aW9uKGJpbmFyeVR5cGUsIHRoaXMuZlBhY2thZ2UsIHRoaXMpOworCQl9CiAJCVR5cGVB
bm5vdGF0aW9uV2Fsa2VyIHdhbGtlciA9IGdldFR5cGVBbm5vdGF0aW9uV2Fsa2VyKGJpbmFyeVR5
cGUuZ2V0VHlwZUFubm90YXRpb25zKCkpOwogCQljaGFyW10gdHlwZVNpZ25hdHVyZSA9IGJpbmFy
eVR5cGUuZ2V0R2VuZXJpY1NpZ25hdHVyZSgpOyAvLyB1c2UgZ2VuZXJpYyBzaWduYXR1cmUgZXZl
biBpbiAxLjQKIAkJdGhpcy50YWdCaXRzIHw9IGJpbmFyeVR5cGUuZ2V0VGFnQml0cygpOwpAQCAt
NDc2LDkgKzQ4Niw2IEBACiAJCQkJfQogCQkJfQogCQkJaWYgKHRoaXMuZW52aXJvbm1lbnQuZ2xv
YmFsT3B0aW9ucy5pc0Fubm90YXRpb25CYXNlZE51bGxBbmFseXNpc0VuYWJsZWQpIHsKLQkJCQkv
LyBuZWVkIGFubm90YXRpb25zIG9uIHRoZSB0eXBlIGJlZm9yZSBwcm9jZXNzaW5nIG51bGwgYW5u
b3RhdGlvbnMgb24gbWVtYmVycyByZXNwZWN0aW5nIGFueSBATm9uTnVsbEJ5RGVmYXVsdDoKLQkJ
CQlzY2FuVHlwZUZvck51bGxEZWZhdWx0QW5ub3RhdGlvbihiaW5hcnlUeXBlLCB0aGlzLmZQYWNr
YWdlLCB0aGlzKTsKLQogCQkJCWlmIChpRmllbGRzICE9IG51bGwpIHsKIAkJCQkJZm9yIChpbnQg
aSA9IDA7IGkgPCBpRmllbGRzLmxlbmd0aDsgaSsrKQogCQkJCQkJc2NhbkZpZWxkRm9yTnVsbEFu
bm90YXRpb24oaUZpZWxkc1tpXSwgdGhpcy5maWVsZHNbaV0sIHRoaXMuaXNFbnVtKCkpOwpAQCAt
NTA0LDEwICs1MTEsMjAgQEAKIAogcHJpdmF0ZSBUeXBlQW5ub3RhdGlvbldhbGtlciBnZXRUeXBl
QW5ub3RhdGlvbldhbGtlcihJQmluYXJ5VHlwZUFubm90YXRpb25bXSBhbm5vdGF0aW9ucykgewog
CWlmICghaXNQcm90b3R5cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwot
CWlmIChhbm5vdGF0aW9ucyA9PSBudWxsIHx8IGFubm90YXRpb25zLmxlbmd0aCA9PSAwKQorCWlm
IChhbm5vdGF0aW9ucyA9PSBudWxsIHx8IGFubm90YXRpb25zLmxlbmd0aCA9PSAwIHx8ICF0aGlz
LmVudmlyb25tZW50LnVzZXNBbm5vdGF0ZWRUeXBlU3lzdGVtKCkpIHsKKwkJaWYgKHRoaXMuZW52
aXJvbm1lbnQuZ2xvYmFsT3B0aW9ucy5pc0Fubm90YXRpb25CYXNlZE51bGxBbmFseXNpc0VuYWJs
ZWQpIHsKKwkJCWludCBudWxsbmVzcyA9IGdldE51bGxEZWZhdWx0KCk7CisJCQlpZiAobnVsbG5l
c3MgPiBCaW5kaW5nLk5VTExfVU5TUEVDSUZJRURfQllfREVGQVVMVCkKKwkJCQlyZXR1cm4gbmV3
IE5vbk51bGxEZWZhdWx0QXdhcmVUeXBlQW5ub3RhdGlvbldhbGtlcihudWxsbmVzcywgdGhpcy5l
bnZpcm9ubWVudCk7CisJCX0KIAkJcmV0dXJuIFR5cGVBbm5vdGF0aW9uV2Fsa2VyLkVNUFRZX0FO
Tk9UQVRJT05fV0FMS0VSOwotCQotCXJldHVybiB0aGlzLmVudmlyb25tZW50LnVzZXNBbm5vdGF0
ZWRUeXBlU3lzdGVtKCkgPyBuZXcgVHlwZUFubm90YXRpb25XYWxrZXIoYW5ub3RhdGlvbnMpIDog
VHlwZUFubm90YXRpb25XYWxrZXIuRU1QVFlfQU5OT1RBVElPTl9XQUxLRVI7CisJfQorCWlmICh0
aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuaXNBbm5vdGF0aW9uQmFzZWROdWxsQW5hbHlz
aXNFbmFibGVkKSB7CisJCWludCBudWxsbmVzcyA9IGdldE51bGxEZWZhdWx0KCk7CisJCWlmIChu
dWxsbmVzcyA+IEJpbmRpbmcuTlVMTF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUKQorCQkJcmV0dXJu
IG5ldyBOb25OdWxsRGVmYXVsdEF3YXJlVHlwZUFubm90YXRpb25XYWxrZXIoYW5ub3RhdGlvbnMs
IG51bGxuZXNzLCB0aGlzLmVudmlyb25tZW50KTsKKwl9CisJcmV0dXJuIG5ldyBUeXBlQW5ub3Rh
dGlvbldhbGtlcihhbm5vdGF0aW9ucyk7CiB9CiAKIHByaXZhdGUgdm9pZCBjcmVhdGVGaWVsZHMo
SUJpbmFyeUZpZWxkW10gaUZpZWxkcywgbG9uZyBzb3VyY2VMZXZlbCwgY2hhcltdW11bXSBtaXNz
aW5nVHlwZU5hbWVzKSB7CkBAIC03NDEsNyArNzU4LDcgQEAKIAkJcmVzdWx0LnNldEFubm90YXRp
b25zKAogCQkJY3JlYXRlQW5ub3RhdGlvbnMoYW5ub3RhdGlvbnMsIHRoaXMuZW52aXJvbm1lbnQs
IG1pc3NpbmdUeXBlTmFtZXMpLAogCQkJcGFyYW1Bbm5vdGF0aW9ucywKLQkJCWlzQW5ub3RhdGlv
blR5cGUoKSA/IGNvbnZlcnRNZW1iZXJWYWx1ZShtZXRob2QuZ2V0RGVmYXVsdFZhbHVlKCksIHRo
aXMuZW52aXJvbm1lbnQsIG1pc3NpbmdUeXBlTmFtZXMpIDogbnVsbCwKKwkJCWlzQW5ub3RhdGlv
blR5cGUoKSA/IGNvbnZlcnRNZW1iZXJWYWx1ZShtZXRob2QuZ2V0RGVmYXVsdFZhbHVlKCksIHRo
aXMuZW52aXJvbm1lbnQsIG1pc3NpbmdUeXBlTmFtZXMsIHRydWUpIDogbnVsbCwKIAkJCXRoaXMu
ZW52aXJvbm1lbnQpOwogCX0KIApAQCAtMTQ0OCw2ICsxNDY1LDcgQEAKIAlyZXR1cm4gdGhpcy5z
dG9yZWRBbm5vdGF0aW9uczsKIH0KIAorLy9wcmU6IG51bGwgYW5ub3RhdGlvbiBhbmFseXNpcyBp
cyBlbmFibGVkCiBwcml2YXRlIHZvaWQgc2NhbkZpZWxkRm9yTnVsbEFubm90YXRpb24oSUJpbmFy
eUZpZWxkIGZpZWxkLCBGaWVsZEJpbmRpbmcgZmllbGRCaW5kaW5nLCBib29sZWFuIGlzRW51bSkg
ewogCWlmICghaXNQcm90b3R5cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigp
OwogCWlmICh0aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuc291cmNlTGV2ZWwgPj0gQ2xh
c3NGaWxlQ29uc3RhbnRzLkpESzFfOCkgewpAQCAtMTQ1NSw3ICsxNDczLDcgQEAKIAkJaWYgKGZp
ZWxkVHlwZSAhPSBudWxsCiAJCQkJJiYgIWZpZWxkVHlwZS5pc0Jhc2VUeXBlKCkKIAkJCQkmJiAo
ZmllbGRUeXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsTUFTSykgPT0gMAotCQkJ
CSYmICh0aGlzLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAh
PSAwKSB7CisJCQkJJiYgaGFzTm9uTnVsbERlZmF1bHRGb3IoRGVmYXVsdExvY2F0aW9uRmllbGQs
IHRydWUpKSB7CiAJCQlmaWVsZEJpbmRpbmcudHlwZSA9IHRoaXMuZW52aXJvbm1lbnQuY3JlYXRl
QW5ub3RhdGVkVHlwZShmaWVsZFR5cGUsIG5ldyBBbm5vdGF0aW9uQmluZGluZ1tde3RoaXMuZW52
aXJvbm1lbnQuZ2V0Tm9uTnVsbEFubm90YXRpb24oKX0pOwogCQl9CiAJCXJldHVybjsgLy8gbm90
IHVzaW5nIGZpZWxkQmluZGluZy50YWdCaXRzIHdoZW4gd2UgaGF2ZSB0eXBlIGFubm90YXRpb25z
LgpAQCAtMTUyMyw2ICsxNTQxLDggQEAKIAkJCWNoYXJbXVtdIHR5cGVOYW1lID0gQ2hhck9wZXJh
dGlvbi5zcGxpdE9uKCcvJywgYW5ub3RhdGlvblR5cGVOYW1lLCAxLCBhbm5vdGF0aW9uVHlwZU5h
bWUubGVuZ3RoLTEpOyAvLyBjdXQgb2YgbGVhZGluZyAnTCcgYW5kIHRyYWlsaW5nICc7JwogCQkJ
aWYgKENoYXJPcGVyYXRpb24uZXF1YWxzKHR5cGVOYW1lLCBub25OdWxsQnlEZWZhdWx0QW5ub3Rh
dGlvbk5hbWUpKSB7CiAJCQkJbWV0aG9kQmluZGluZy50YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3Rh
dGlvbk5vbk51bGxCeURlZmF1bHQ7CisJCQkJaWYgKHVzZVR5cGVBbm5vdGF0aW9ucykKKwkJCQkJ
bWV0aG9kQmluZGluZy5kZWZhdWx0TnVsbG5lc3MgPSBnZXROb25OdWxsQnlEZWZhdWx0VmFsdWUo
YW5ub3RhdGlvbnNbaV0pOwogCQkJfQogCQkJaWYgKCF1c2VUeXBlQW5ub3RhdGlvbnMgJiYgIWV4
cGxpY2l0TnVsbG5lc3MpIHsKIAkJCQlpZiAoQ2hhck9wZXJhdGlvbi5lcXVhbHModHlwZU5hbWUs
IG5vbk51bGxBbm5vdGF0aW9uTmFtZSkpIHsKQEAgLTE1NzEsNiArMTU5MSw3IEBACiAJCX0KIAl9
CiB9CisvLyBwcmU6IG51bGwgYW5ub3RhdGlvbiBhbmFseXNpcyBpcyBlbmFibGVkCiBwcml2YXRl
IHZvaWQgc2NhblR5cGVGb3JOdWxsRGVmYXVsdEFubm90YXRpb24oSUJpbmFyeVR5cGUgYmluYXJ5
VHlwZSwgUGFja2FnZUJpbmRpbmcgcGFja2FnZUJpbmRpbmcsIEJpbmFyeVR5cGVCaW5kaW5nIGJp
bmFyeUJpbmRpbmcpIHsKIAlpZiAoIWlzUHJvdG90eXBlKCkpIHRocm93IG5ldyBJbGxlZ2FsU3Rh
dGVFeGNlcHRpb24oKTsKIAljaGFyW11bXSBub25OdWxsQnlEZWZhdWx0QW5ub3RhdGlvbk5hbWUg
PSB0aGlzLmVudmlyb25tZW50LmdldE5vbk51bGxCeURlZmF1bHRBbm5vdGF0aW9uTmFtZSgpOwpA
QCAtMTU3OSw2ICsxNjAwLDcgQEAKIAogCUlCaW5hcnlBbm5vdGF0aW9uW10gYW5ub3RhdGlvbnMg
PSBiaW5hcnlUeXBlLmdldEFubm90YXRpb25zKCk7CiAJYm9vbGVhbiBpc1BhY2thZ2VJbmZvID0g
Q2hhck9wZXJhdGlvbi5lcXVhbHMoYmluYXJ5QmluZGluZy5zb3VyY2VOYW1lKCksIFR5cGVDb25z
dGFudHMuUEFDS0FHRV9JTkZPX05BTUUpOworCWJvb2xlYW4gdXNlVHlwZUFubm90YXRpb25zID0g
dGhpcy5lbnZpcm9ubWVudC5nbG9iYWxPcHRpb25zLnNvdXJjZUxldmVsID49IENsYXNzRmlsZUNv
bnN0YW50cy5KREsxXzg7CiAJaWYgKGFubm90YXRpb25zICE9IG51bGwpIHsKIAkJbG9uZyBhbm5v
dGF0aW9uQml0ID0gMEw7CiAJCWludCBudWxsbmVzcyA9IE5PX05VTExfREVGQVVMVDsKQEAgLTE1
OTAsMjEgKzE2MTIsMjggQEAKIAkJCWNoYXJbXVtdIHR5cGVOYW1lID0gQ2hhck9wZXJhdGlvbi5z
cGxpdE9uKCcvJywgYW5ub3RhdGlvblR5cGVOYW1lLCAxLCBhbm5vdGF0aW9uVHlwZU5hbWUubGVu
Z3RoLTEpOyAvLyBjdXQgb2YgbGVhZGluZyAnTCcgYW5kIHRyYWlsaW5nICc7JwogCQkJaWYgKENo
YXJPcGVyYXRpb24uZXF1YWxzKHR5cGVOYW1lLCBub25OdWxsQnlEZWZhdWx0QW5ub3RhdGlvbk5h
bWUpKSB7CiAJCQkJSUJpbmFyeUVsZW1lbnRWYWx1ZVBhaXJbXSBlbGVtZW50VmFsdWVQYWlycyA9
IGFubm90YXRpb25zW2ldLmdldEVsZW1lbnRWYWx1ZVBhaXJzKCk7Ci0JCQkJaWYgKGVsZW1lbnRW
YWx1ZVBhaXJzICE9IG51bGwgJiYgZWxlbWVudFZhbHVlUGFpcnMubGVuZ3RoID09IDEpIHsKLQkJ
CQkJT2JqZWN0IHZhbHVlID0gZWxlbWVudFZhbHVlUGFpcnNbMF0uZ2V0VmFsdWUoKTsKLQkJCQkJ
aWYgKHZhbHVlIGluc3RhbmNlb2YgQm9vbGVhbkNvbnN0YW50Ci0JCQkJCQkmJiAhKChCb29sZWFu
Q29uc3RhbnQpdmFsdWUpLmJvb2xlYW5WYWx1ZSgpKQotCQkJCQl7Ci0JCQkJCQkvLyBwYXJhbWV0
ZXIgaXMgJ2ZhbHNlJzogdGhpcyBtZWFucyB3ZSBjYW5jZWwgZGVmYXVsdHMgZnJvbSBvdXRlciBz
Y29wZXM6Ci0JCQkJCQlhbm5vdGF0aW9uQml0ID0gVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3Bl
Y2lmaWVkQnlEZWZhdWx0OwotCQkJCQkJbnVsbG5lc3MgPSBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RF
RkFVTFQ7Ci0JCQkJCQlicmVhazsKLQkJCQkJfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9i
amVjdFtdICYmICgoT2JqZWN0W10pdmFsdWUpLmxlbmd0aCA9PSAwKSB7Ci0JCQkJCQkvLyBwYXJh
bWV0ZXIgaXMgJ3t9JzogdGhpcyBtZWFucyB3ZSBjYW5jZWwgZGVmYXVsdHMgZnJvbSBvdXRlciBz
Y29wZXM6Ci0JCQkJCQlhbm5vdGF0aW9uQml0ID0gVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3Bl
Y2lmaWVkQnlEZWZhdWx0OwotCQkJCQkJbnVsbG5lc3MgPSBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RF
RkFVTFQ7Ci0JCQkJCQlicmVhazsKKwkJCQlpZiAoIXVzZVR5cGVBbm5vdGF0aW9ucykgeworCQkJ
CQlpZiAoZWxlbWVudFZhbHVlUGFpcnMgIT0gbnVsbCAmJiBlbGVtZW50VmFsdWVQYWlycy5sZW5n
dGggPT0gMSkgeworCQkJCQkJT2JqZWN0IHZhbHVlID0gZWxlbWVudFZhbHVlUGFpcnNbMF0uZ2V0
VmFsdWUoKTsKKwkJCQkJCWlmICh2YWx1ZSBpbnN0YW5jZW9mIEJvb2xlYW5Db25zdGFudAorCQkJ
CQkJCSYmICEoKEJvb2xlYW5Db25zdGFudCl2YWx1ZSkuYm9vbGVhblZhbHVlKCkpCisJCQkJCQl7
CisJCQkJCQkJLy8gcGFyYW1ldGVyIGlzICdmYWxzZSc6IHRoaXMgbWVhbnMgd2UgY2FuY2VsIGRl
ZmF1bHRzIGZyb20gb3V0ZXIgc2NvcGVzOgorCQkJCQkJCWFubm90YXRpb25CaXQgPSBUYWdCaXRz
LkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQ7CisJCQkJCQkJbnVsbG5lc3MgPSBO
VUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQ7CisJCQkJCQkJYnJlYWs7CisJCQkJCQl9CiAJCQkJ
CX0KKwkJCQl9IGVsc2UgeworCQkJCQkvLyB1c2luZyBOb25OdWxsQnlEZWZhdWx0IHdlIG5lZWQg
dG8gaW5zcGVjdCB0aGUgZGV0YWlscyBvZiB0aGUgdmFsdWUoKSBhdHRyaWJ1dGU6CisJCQkJCW51
bGxuZXNzID0gZ2V0Tm9uTnVsbEJ5RGVmYXVsdFZhbHVlKGFubm90YXRpb25zW2ldKTsKKwkJCQkJ
aWYgKG51bGxuZXNzID09IE5VTExfVU5TUEVDSUZJRURfQllfREVGQVVMVCkgeworCQkJCQkJYW5u
b3RhdGlvbkJpdCA9IFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdDsK
KwkJCQkJfSBlbHNlIGlmIChudWxsbmVzcyAhPSAwKSB7CisJCQkJCQlhbm5vdGF0aW9uQml0ID0g
VGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdDsKKwkJCQkJfQkKKwkJCQkJdGhpcy5k
ZWZhdWx0TnVsbG5lc3MgPSBudWxsbmVzczsKKwkJCQkJYnJlYWs7CiAJCQkJfQogCQkJCWFubm90
YXRpb25CaXQgPSBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0OwogCQkJCW51bGxu
ZXNzID0gTk9OTlVMTF9CWV9ERUZBVUxUOwpAQCAtMTYyNSwxMiArMTY1NCwxOSBAQAogCX0KIAlS
ZWZlcmVuY2VCaW5kaW5nIGVuY2xvc2luZ1R5cGVCaW5kaW5nID0gYmluYXJ5QmluZGluZy5lbmNs
b3NpbmdUeXBlOwogCWlmIChlbmNsb3NpbmdUeXBlQmluZGluZyAhPSBudWxsKSB7Ci0JCWlmICgo
ZW5jbG9zaW5nVHlwZUJpbmRpbmcudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxC
eURlZmF1bHQpICE9IDApIHsKLQkJCWJpbmFyeUJpbmRpbmcudGFnQml0cyB8PSBUYWdCaXRzLkFu
bm90YXRpb25Ob25OdWxsQnlEZWZhdWx0OwotCQkJcmV0dXJuOwotCQl9IGVsc2UgaWYgKChlbmNs
b3NpbmdUeXBlQmluZGluZy50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lm
aWVkQnlEZWZhdWx0KSAhPSAwKSB7Ci0JCQliaW5hcnlCaW5kaW5nLnRhZ0JpdHMgfD0gVGFnQml0
cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0OwotCQkJcmV0dXJuOworCQlpZiAo
dXNlVHlwZUFubm90YXRpb25zKSB7CisJCQliaW5hcnlCaW5kaW5nLmRlZmF1bHROdWxsbmVzcyA9
IGVuY2xvc2luZ1R5cGVCaW5kaW5nLmdldE51bGxEZWZhdWx0KCk7CisJCQlpZiAoYmluYXJ5Qmlu
ZGluZy5kZWZhdWx0TnVsbG5lc3MgIT0gMCkgeworCQkJCXJldHVybjsKKwkJCX0KKwkJfSBlbHNl
IHsKKwkJCWlmICgoZW5jbG9zaW5nVHlwZUJpbmRpbmcudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3Rh
dGlvbk5vbk51bGxCeURlZmF1bHQpICE9IDApIHsKKwkJCQliaW5hcnlCaW5kaW5nLnRhZ0JpdHMg
fD0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdDsKKwkJCQlyZXR1cm47CisJCQl9
IGVsc2UgaWYgKChlbmNsb3NpbmdUeXBlQmluZGluZy50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0
aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0KSAhPSAwKSB7CisJCQkJYmluYXJ5QmluZGluZy50
YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdDsKKwkJ
CQlyZXR1cm47CisJCQl9CiAJCX0KIAl9CiAJLy8gbm8gYW5ub3RhdGlvbiBmb3VuZCBvbiB0aGUg
dHlwZSBvciBpdHMgZW5jbG9zaW5nIHR5cGVzCkBAIC0xNjQzLDE2ICsxNjc5LDU1IEBACiAJCX0K
IAl9CiAJLy8gbm8gQE5vbk51bGxCeURlZmF1bHQgYXQgdHlwZSBsZXZlbCwgY2hlY2sgY29udGFp
bmluZyBwYWNrYWdlOgotCXN3aXRjaCAocGFja2FnZUJpbmRpbmcuZGVmYXVsdE51bGxuZXNzKSB7
Ci0JCWNhc2UgQmluZGluZy5OT05OVUxMX0JZX0RFRkFVTFQgOiAKLQkJCWJpbmFyeUJpbmRpbmcu
dGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0OwotCQkJYnJlYWs7
Ci0JCWNhc2UgQmluZGluZy5OVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQgOgotCQkJYmluYXJ5
QmluZGluZy50YWdCaXRzIHw9IFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVm
YXVsdDsKLQkJCWJyZWFrOworCWlmICh1c2VUeXBlQW5ub3RhdGlvbnMpIHsKKwkJYmluYXJ5Qmlu
ZGluZy5kZWZhdWx0TnVsbG5lc3MgPSBwYWNrYWdlQmluZGluZy5kZWZhdWx0TnVsbG5lc3M7CisJ
fSBlbHNlIHsKKwkJc3dpdGNoIChwYWNrYWdlQmluZGluZy5kZWZhdWx0TnVsbG5lc3MpIHsKKwkJ
CWNhc2UgQmluZGluZy5OT05OVUxMX0JZX0RFRkFVTFQgOiAKKwkJCQliaW5hcnlCaW5kaW5nLnRh
Z0JpdHMgfD0gVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdDsKKwkJCQlicmVhazsK
KwkJCWNhc2UgQmluZGluZy5OVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQgOgorCQkJCWJpbmFy
eUJpbmRpbmcudGFnQml0cyB8PSBUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURl
ZmF1bHQ7CisJCQkJYnJlYWs7CisJCX0KIAl9CiB9CiAKKy8qKiBnaXZlbiBhbiBhcHBsaWNhdGlv
biBvZiBATm9uTnVsbEJ5RGVmYXVsdCBjb252ZXJ0IHRoZSBhbm5vdGF0aW9uIGFyZ3VtZW50IChp
ZiBhbnkpIGludG8gYSBiaXR2ZWN0b3IgYSBsYSB7QGxpbmsgQmluZGluZyNOdWxsbmVzc0RlZmF1
bHRNQVNLfSAqLworLy8gcHJlOiBudWxsIGFubm90YXRpb24gYW5hbHlzaXMgaXMgZW5hYmxlZAor
aW50IGdldE5vbk51bGxCeURlZmF1bHRWYWx1ZShJQmluYXJ5QW5ub3RhdGlvbiBhbm5vdGF0aW9u
KSB7CisJY2hhcltdIGFubm90YXRpb25UeXBlTmFtZSA9IGFubm90YXRpb24uZ2V0VHlwZU5hbWUo
KTsKKwljaGFyW11bXSB0eXBlTmFtZSA9IENoYXJPcGVyYXRpb24uc3BsaXRPbignLycsIGFubm90
YXRpb25UeXBlTmFtZSwgMSwgYW5ub3RhdGlvblR5cGVOYW1lLmxlbmd0aC0xKTsgLy8gY3V0IG9m
IGxlYWRpbmcgJ0wnIGFuZCB0cmFpbGluZyAnOycKKwlJQmluYXJ5RWxlbWVudFZhbHVlUGFpcltd
IGVsZW1lbnRWYWx1ZVBhaXJzID0gYW5ub3RhdGlvbi5nZXRFbGVtZW50VmFsdWVQYWlycygpOwor
CWlmIChlbGVtZW50VmFsdWVQYWlycyA9PSBudWxsIHx8IGVsZW1lbnRWYWx1ZVBhaXJzLmxlbmd0
aCA9PSAwICkgeworCQkvLyBubyBhcmd1bWVudDogYXBwbHkgZGVmYXVsdCBkZWZhdWx0CisJCVJl
ZmVyZW5jZUJpbmRpbmcgYW5ub3RhdGlvblR5cGUgPSB0aGlzLmVudmlyb25tZW50LmdldFR5cGUo
dHlwZU5hbWUpOworCQlpZiAoYW5ub3RhdGlvblR5cGUgPT0gbnVsbCkgcmV0dXJuIDA7CisJCWlm
IChhbm5vdGF0aW9uVHlwZS5pc1VucmVzb2x2ZWRUeXBlKCkpCisJCQlhbm5vdGF0aW9uVHlwZSA9
ICgoVW5yZXNvbHZlZFJlZmVyZW5jZUJpbmRpbmcpIGFubm90YXRpb25UeXBlKS5yZXNvbHZlKHRo
aXMuZW52aXJvbm1lbnQsIGZhbHNlKTsKKwkJTWV0aG9kQmluZGluZ1tdIGFubm90YXRpb25NZXRo
b2RzID0gYW5ub3RhdGlvblR5cGUubWV0aG9kcygpOworCQlpZiAoYW5ub3RhdGlvbk1ldGhvZHMg
IT0gbnVsbCAmJiBhbm5vdGF0aW9uTWV0aG9kcy5sZW5ndGggPT0gMSkgeworCQkJT2JqZWN0IHZh
bHVlID0gYW5ub3RhdGlvbk1ldGhvZHNbMF0uZ2V0RGVmYXVsdFZhbHVlKCk7CisJCQlyZXR1cm4g
QW5ub3RhdGlvbi5udWxsVGFnQml0c0Zyb21Bbm5vdGF0aW9uVmFsdWUodmFsdWUpOworCQl9CisJ
fSBlbHNlIGlmIChlbGVtZW50VmFsdWVQYWlycy5sZW5ndGggPiAwKSB7CisJCS8vIGV2YWx1YXRl
IHRoZSBjb250YWluZWQgRW51bUNvbnN0YW50U2lnbmF0dXJlczoKKwkJaW50IG51bGxuZXNzID0g
MDsKKwkJZm9yIChpbnQgaSA9IDA7IGkgPCBlbGVtZW50VmFsdWVQYWlycy5sZW5ndGg7IGkrKykK
KwkJCW51bGxuZXNzIHw9IEFubm90YXRpb24ubnVsbFRhZ0JpdHNGcm9tQW5ub3RhdGlvblZhbHVl
KGVsZW1lbnRWYWx1ZVBhaXJzW2ldLmdldFZhbHVlKCkpOworCQlyZXR1cm4gbnVsbG5lc3M7CisJ
fSBlbHNlIHsKKwkJLy8gZW1wdHkgYXJndW1lbnQ6IGNhbmNlbCBhbGwgZGVmYXVsdHMgZnJvbSBl
bmNsb3Npbmcgc2NvcGVzCisJCXJldHVybiBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQ7CisJ
fQorCXJldHVybiAwOworfQorCitAT3ZlcnJpZGUKK2ludCBnZXROdWxsRGVmYXVsdCgpIHsKKwly
ZXR1cm4gdGhpcy5kZWZhdWx0TnVsbG5lc3M7Cit9CisKIHByaXZhdGUgdm9pZCBzY2FuVHlwZUZv
ckNvbnRhaW5lckFubm90YXRpb24oSUJpbmFyeVR5cGUgYmluYXJ5VHlwZSwgY2hhcltdW11bXSBt
aXNzaW5nVHlwZU5hbWVzKSB7CiAJaWYgKCFpc1Byb3RvdHlwZSgpKSB0aHJvdyBuZXcgSWxsZWdh
bFN0YXRlRXhjZXB0aW9uKCk7CiAJSUJpbmFyeUFubm90YXRpb25bXSBhbm5vdGF0aW9ucyA9IGJp
bmFyeVR5cGUuZ2V0QW5ub3RhdGlvbnMoKTsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQmlu
ZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CaW5kaW5nLmphdmEKaW5kZXggNGQzOTVmYy4uMDhh
YmMzZSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CaW5kaW5nLmphdmEKKysrIGIvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9CaW5kaW5nLmphdmEKQEAgLTEsNSArMSw1IEBACiAvKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3Ro
ZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21w
YW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBv
ZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0
aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdApAQCAtMTAsNiArMTAsNyBAQAog
ICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yCiAgKgkJCQkJCQkJYnVn
IDM2NTUzMSAtIFtjb21waWxlcl1bbnVsbF0gaW52ZXN0aWdhdGUgYWx0ZXJuYXRpdmUgc3RyYXRl
Z3kgZm9yIGludGVybmFsbHkgZW5jb2RpbmcgbnVsbG5lc3MgZGVmYXVsdHMKICAqCQkJCQkJCQlC
dWcgNDAwODc0IC0gWzEuOF1bY29tcGlsZXJdIEluZmVyZW5jZSBpbmZyYXN0cnVjdHVyZSBzaG91
bGQgZXZvbHZlIHRvIG1lZXQgSkxTOCAxOC54IChQYXJ0IEcgb2YgSlNSMzM1IHNwZWMpCisgKgkJ
CQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRp
b24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKiAgICAgSmVzcGVyIFN0ZWVuIE1v
bGxlciAtIENvbnRyaWJ1dGlvbnMgZm9yCiAgKgkJCQkJCQkJQnVnIDQxMjE1MCBbMS44XSBbY29t
cGlsZXJdIEVuYWJsZSByZWZsZWN0ZWQgcGFyYW1ldGVyIG5hbWVzIGR1cmluZyBhbm5vdGF0aW9u
IHByb2Nlc3NpbmcKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpAQCAtNjYsOCArNjcsNDQgQEAK
IAogCS8vIE51bGxuZXNzIGRlZmF1bHRzOgogCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IE5PX05V
TExfREVGQVVMVCA9IDA7Ci0JcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgTlVMTF9VTlNQRUNJRklF
RF9CWV9ERUZBVUxUID0gMTsKLQlwdWJsaWMgc3RhdGljIGZpbmFsIGludCBOT05OVUxMX0JZX0RF
RkFVTFQgPSAyOworCS8vIFNFNSBzdHlsZToKKwlwdWJsaWMgc3RhdGljIGZpbmFsIGludCBOT05O
VUxMX0JZX0RFRkFVTFQgPSAxOworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IE5VTExfVU5TUEVD
SUZJRURfQllfREVGQVVMVCA9IDI7CisJLy8gSlNSMzA4IHN0eWxlOgorCS8qKgorCSAqIEJpdCBp
biBkZWZhdWx0TnVsbG5lc3MgYml0IHZlY3RvcnMsIHJlcHJlc2VudGluZyB0aGUgZW51bSBjb25z
dGFudCBEZWZhdWx0TG9jYXRpb24jUEFSQU1FVEVSCisJICovCisJcHVibGljIHN0YXRpYyBmaW5h
bCBpbnQgRGVmYXVsdExvY2F0aW9uUGFyYW1ldGVyID0gQVNUTm9kZS5CaXQ0OworCS8qKgorCSAq
IEJpdCBpbiBkZWZhdWx0TnVsbG5lc3MgYml0IHZlY3RvcnMsIHJlcHJlc2VudGluZyB0aGUgZW51
bSBjb25zdGFudCBEZWZhdWx0TG9jYXRpb24jUkVUVVJOX1RZUEUKKwkgKi8KKwlwdWJsaWMgc3Rh
dGljIGZpbmFsIGludCBEZWZhdWx0TG9jYXRpb25SZXR1cm5UeXBlID0gQVNUTm9kZS5CaXQ1Owor
CS8qKgorCSAqIEJpdCBpbiBkZWZhdWx0TnVsbG5lc3MgYml0IHZlY3RvcnMsIHJlcHJlc2VudGlu
ZyB0aGUgZW51bSBjb25zdGFudCBEZWZhdWx0TG9jYXRpb24jRklFTEQKKwkgKi8KKwlwdWJsaWMg
c3RhdGljIGZpbmFsIGludCBEZWZhdWx0TG9jYXRpb25GaWVsZCA9IEFTVE5vZGUuQml0NjsKKwkv
KioKKwkgKiBCaXQgaW4gZGVmYXVsdE51bGxuZXNzIGJpdCB2ZWN0b3JzLCByZXByZXNlbnRpbmcg
dGhlIGVudW0gY29uc3RhbnQgRGVmYXVsdExvY2F0aW9uI1RZUEVfQVJHVU1FTlQKKwkgKi8KKwlw
dWJsaWMgc3RhdGljIGZpbmFsIGludCBEZWZhdWx0TG9jYXRpb25UeXBlQXJndW1lbnQgPSBBU1RO
b2RlLkJpdDc7CisJLyoqCisJICogQml0IGluIGRlZmF1bHROdWxsbmVzcyBiaXQgdmVjdG9ycywg
cmVwcmVzZW50aW5nIHRoZSBlbnVtIGNvbnN0YW50IERlZmF1bHRMb2NhdGlvbiNUWVBFX1BBUkFN
RVRFUgorCSAqLworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IERlZmF1bHRMb2NhdGlvblR5cGVQ
YXJhbWV0ZXIgPSBBU1ROb2RlLkJpdDg7CisJLyoqCisJICogQml0IGluIGRlZmF1bHROdWxsbmVz
cyBiaXQgdmVjdG9ycywgcmVwcmVzZW50aW5nIHRoZSBlbnVtIGNvbnN0YW50IERlZmF1bHRMb2Nh
dGlvbiNUWVBFX0JPVU5ECisJICovCisJcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRGVmYXVsdExv
Y2F0aW9uVHlwZUJvdW5kID0gQVNUTm9kZS5CaXQ5OworCS8qKgorCSAqIEJpdCBpbiBkZWZhdWx0
TnVsbG5lc3MgYml0IHZlY3RvcnMsIHJlcHJlc2VudGluZyB0aGUgZW51bSBjb25zdGFudCBEZWZh
dWx0TG9jYXRpb24jQVJSQVlfQ09OVEVOVFMKKwkgKiBUT0RPOiB0aGlzIGNvbnN0YW50IGlzIG5v
dCB5ZXQgdXNlZCwgZHVlIHRvIGRpZmZpY3VsdHkgdG8gZGlzY2VybiB0aGVzZSBhbm5vdGF0aW9u
cyBiZXR3ZWVuIFNFNSAvIFNFOAorCSAqLworCXB1YmxpYyBzdGF0aWMgZmluYWwgaW50IERlZmF1
bHRMb2NhdGlvbkFycmF5Q29udGVudHMgPSBBU1ROb2RlLkJpdDEwOworCisJcHVibGljIHN0YXRp
YyBmaW5hbCBpbnQgTnVsbG5lc3NEZWZhdWx0TUFTSyA9IAorCQkJTlVMTF9VTlNQRUNJRklFRF9C
WV9ERUZBVUxUIHwgLy8gaW5jbHVkZWQgdG8gdGVybWluYXRlIHNlYXJjaCB1cCB0aGUgcGFyZW50
IGNoYWluCisJCQlEZWZhdWx0TG9jYXRpb25QYXJhbWV0ZXIgfCBEZWZhdWx0TG9jYXRpb25SZXR1
cm5UeXBlIHwgRGVmYXVsdExvY2F0aW9uRmllbGQgfAorCQkJRGVmYXVsdExvY2F0aW9uVHlwZUFy
Z3VtZW50IHwgRGVmYXVsdExvY2F0aW9uVHlwZVBhcmFtZXRlciB8IERlZmF1bHRMb2NhdGlvblR5
cGVCb3VuZCB8IERlZmF1bHRMb2NhdGlvbkFycmF5Q29udGVudHM7CiAKIAkvKgogCSogQW5zd2Vy
IHRoZSByZWNlaXZlcidzIGJpbmRpbmcgdHlwZSBmcm9tIEJpbmRpbmcuQmluZGluZ0lELgpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2xvb2t1cC9CbG9ja1Njb3BlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0Js
b2NrU2NvcGUuamF2YQppbmRleCBlMTBlZjAyLi5kN2FiZDQwIDEwMDY0NAotLS0gYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL0Jsb2NrU2NvcGUuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0Jsb2NrU2NvcGUuamF2
YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQg
KGMpIDIwMDAsIDIwMTMgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQg
KGMpIDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRz
IHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAg
KiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1Ymxp
YyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBh
bmQgaXMgYXZhaWxhYmxlIGF0CkBAIC0xNyw2ICsxNyw3IEBACiAgKgkJCQkJCQkJYnVnIDM3OTc4
NCAtIFtjb21waWxlcl0gIk1ldGhvZCBjYW4gYmUgc3RhdGljIiBpcyBub3QgZ2V0dGluZyByZXBv
cnRlZAogICoJCQkJCQkJCWJ1ZyAzOTQ3NjggLSBbY29tcGlsZXJdW3Jlc291cmNlXSBJbmNvcnJl
Y3QgcmVzb3VyY2UgbGVhayB3YXJuaW5nIHdoZW4gY3JlYXRpbmcgc3RyZWFtIGluIGNvbmRpdGlv
bmFsCiAgKgkJCQkJCQkJYnVnIDQwNDY0OSAtIFsxLjhdW2NvbXBpbGVyXSBkZXRlY3QgaWxsZWdh
bCByZWZlcmVuY2UgdG8gaW5kaXJlY3Qgb3IgcmVkdW5kYW50IHN1cGVyCisgKgkJCQkJCQkJQnVn
IDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmli
dXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKiAgICAgSmVzcGVyIFMgTW9sbGVyIDxqZXNwZXJA
c2Vsc2thYmV0Lm9yZz4gLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJCWJ1ZyAzNzg2NzQg
LSAiVGhlIG1ldGhvZCBjYW4gYmUgZGVjbGFyZWQgYXMgc3RhdGljIiBpcyB3cm9uZwogICogICAg
IEtlaWdvIEltYWkgLSBDb250cmlidXRpb24gZm9yICBidWcgMzg4OTAzIC0gQ2Fubm90IGV4dGVu
ZCBpbm5lciBjbGFzcyBhcyBhbiBhbm9ueW1vdXMgY2xhc3Mgd2hlbiBpdCBleHRlbmRzIHRoZSBv
dXRlciBjbGFzcwpAQCAtMTIyOCw0ICsxMjI5LDggQEAKIAl9CiAJcmV0dXJuIHRydWU7CiB9CitA
T3ZlcnJpZGUKK3B1YmxpYyBib29sZWFuIGhhc0RlZmF1bHROdWxsbmVzc0ZvcihpbnQgbG9jYXRp
b24pIHsKKwlyZXR1cm4gdGhpcy5wYXJlbnQuaGFzRGVmYXVsdE51bGxuZXNzRm9yKGxvY2F0aW9u
KTsKK30KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9l
Y2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ2xhc3NTY29wZS5qYXZhIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2xvb2t1cC9DbGFzc1Njb3BlLmphdmEKaW5kZXggMGYyY2Y1Ni4uN2U0MTc2YSAxMDA2NDQK
LS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9DbGFzc1Njb3BlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9D
bGFzc1Njb3BlLmphdmEKQEAgLTE3LDYgKzE3LDcgQEAKICAqCQkJCQkJCUJ1ZyAzOTUwMDIgLSBT
ZWxmIGJvdW5kIGdlbmVyaWMgY2xhc3MgZG9lc24ndCByZXNvbHZlIGJvdW5kcyBwcm9wZXJseSBm
b3Igd2lsZGNhcmRzIGZvciBjZXJ0YWluIHBhcmFtZXRyaXNhdGlvbi4KICAqCQkJCQkJCUJ1ZyA0
MTYxNzYgLSBbMS44XVtjb21waWxlcl1bbnVsbF0gbnVsbCB0eXBlIGFubm90YXRpb25zIGNhdXNl
IGdyaWVmIG9uIHR5cGUgdmFyaWFibGVzCiAgKgkJCQkJCQlCdWcgNDI3MTk5IC0gWzEuOF1bcmVz
b3VyY2VdIGF2b2lkIHJlc291cmNlIGxlYWsgd2FybmluZ3Mgb24gU3RyZWFtcyB0aGF0IGhhdmUg
bm8gcmVzb3VyY2UKKyAqCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBu
ZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAg
ICAgIEFuZHkgQ2xlbWVudCAoR29QaXZvdGFsLCBJbmMpIGFjbGVtZW50QGdvcGl2b3RhbC5jb20g
LSBDb250cmlidXRpb25zIGZvcgogICogICAgICAgICAgICAgICAgICAgICAgICAgIEJ1ZyA0MTU4
MjEgLSBbMS44XVtjb21waWxlcl0gQ0xBU1NfRVhURU5EUyB0YXJnZXQgdHlwZSBhbm5vdGF0aW9u
IG1pc3NpbmcgZm9yIGFub255bW91cyBjbGFzc2VzCiAgKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8K
QEAgLTEzMDAsNiArMTMwMSwxNyBAQAogCQlyZXR1cm4gdGhpcy5yZWZlcmVuY2VDb250ZXh0Owog
CX0KIAorCUBPdmVycmlkZQorCXB1YmxpYyBib29sZWFuIGhhc0RlZmF1bHROdWxsbmVzc0Zvcihp
bnQgbG9jYXRpb24pIHsKKwkJU291cmNlVHlwZUJpbmRpbmcgYmluZGluZyA9IHRoaXMucmVmZXJl
bmNlQ29udGV4dC5iaW5kaW5nOworCQlpZiAoYmluZGluZyAhPSBudWxsKSB7CisJCQlpbnQgbnVs
bERlZmF1bHQgPSBiaW5kaW5nLmdldE51bGxEZWZhdWx0KCk7CisJCQlpZiAobnVsbERlZmF1bHQg
IT0gMCkKKwkJCQlyZXR1cm4gKG51bGxEZWZhdWx0ICYgbG9jYXRpb24pICE9IDA7CisJCX0KKwkJ
cmV0dXJuIHRoaXMucGFyZW50Lmhhc0RlZmF1bHROdWxsbmVzc0Zvcihsb2NhdGlvbik7CisJfQor
CiAJcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsKIAkJaWYgKHRoaXMucmVmZXJlbmNlQ29udGV4
dCAhPSBudWxsKQogCQkJcmV0dXJuICItLS0gQ2xhc3MgU2NvcGUgLS0tXG5cbiIgIC8vJE5PTi1O
TFMtMSQKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xp
cHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvQ29tcGlsYXRpb25Vbml0U2NvcGUuamF2
YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5h
bC9jb21waWxlci9sb29rdXAvQ29tcGlsYXRpb25Vbml0U2NvcGUuamF2YQppbmRleCBlNjA1OGQz
Li4wZWEwNGM0IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL0NvbXBpbGF0aW9uVW5pdFNjb3Bl
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Db21waWxhdGlvblVuaXRTY29wZS5qYXZhCkBAIC04
LDYgKzgsOCBAQAogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBDb3Jwb3JhdGlvbiAtIGlu
aXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICogICAgIEVybGluZyBFbGxpbmdzZW4gLSAg
cGF0Y2ggZm9yIGJ1ZyAxMjU1NzAKKyAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0
aW9uIGZvcgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcg
RGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5sb29rdXA7CiAKQEAgLTkzOSw0ICs5NDEsMTAgQEAKIAl9CiAJcmV0dXJuIHRoaXMuaW1wb3J0
UHRyOwogfQorQE92ZXJyaWRlCitwdWJsaWMgYm9vbGVhbiBoYXNEZWZhdWx0TnVsbG5lc3NGb3Io
aW50IGxvY2F0aW9uKSB7CisJaWYgKHRoaXMuZlBhY2thZ2UgIT0gbnVsbCkKKwkJcmV0dXJuICh0
aGlzLmZQYWNrYWdlLmRlZmF1bHROdWxsbmVzcyAmIGxvY2F0aW9uKSAhPSAwOworCXJldHVybiBm
YWxzZTsKK30KIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvRWxlbWVudFZhbHVlUGFpci5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9FbGVtZW50VmFsdWVQYWlyLmphdmEKaW5kZXggNWE0NjlkNi4u
YTIyOTdhYiAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9FbGVtZW50VmFsdWVQYWlyLmphdmEK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9FbGVtZW50VmFsdWVQYWlyLmphdmEKQEAgLTEsNSArMSw1IEBA
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDA4IElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBw
cm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAg
KiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBh
dApAQCAtNyw2ICs3LDggQEAKICAqCiAgKiBDb250cmlidXRvcnM6CiAgKiAgICAgSUJNIENvcnBv
cmF0aW9uIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCisgKiAgICAgU3RlcGhhbiBI
ZXJybWFubiAtIENvbnRyaWJ1dGlvbiBmb3IKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1b
bnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxC
eURlZmF1bHQKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5q
ZHQuaW50ZXJuYWwuY29tcGlsZXIubG9va3VwOwogCkBAIC0xOCw2ICsyMCwzMCBAQAogCWNoYXJb
XSBuYW1lOwogCXB1YmxpYyBPYmplY3QgdmFsdWU7CiAJcHVibGljIE1ldGhvZEJpbmRpbmcgYmlu
ZGluZzsKKwkKKwkvKioKKwkgKiBXZSB3YW50IHRvIGF2b2lkIGVhZ2VybHkgcmVzb2x2aW5nIG9m
IGFsbCBlbnVtcyB0aGF0IGFyZSB1c2VkIGluIGFubm90YXRpb25zLgorCSAqIFRoaXMgY2xhc3Mg
ZW5jYXBzdWxhdGVzIGFuIHVucmVzb2x2ZWQgZW51bSBjb25zdGFudCBhcyByZWZlcmVuY2VkIGlu
IGFuIEVsZW1lbnRWYWx1ZVBhaXIuCisJICogVGhlIGVudW0gY29uc3RhbnQgd2lsbCBiZSByZXNv
bHZlZCB3aGVuIGFza2luZyBnZXRWYWx1ZSgpCisJICovCisJcHVibGljIHN0YXRpYyBjbGFzcyBV
bnJlc29sdmVkRW51bUNvbnN0YW50IHsKKwkJUmVmZXJlbmNlQmluZGluZyBlbnVtVHlwZTsKKwkJ
TG9va3VwRW52aXJvbm1lbnQgZW52aXJvbm1lbnQ7CisJCWNoYXJbXSBlbnVtQ29uc3RhbnROYW1l
OworCQlVbnJlc29sdmVkRW51bUNvbnN0YW50KFJlZmVyZW5jZUJpbmRpbmcgZW51bVR5cGUsIExv
b2t1cEVudmlyb25tZW50IGVudmlyb25tZW50LCBjaGFyW10gZW51bUNvbnN0YW50TmFtZSkgewor
CQkJdGhpcy5lbnVtVHlwZSA9IGVudW1UeXBlOworCQkJdGhpcy5lbnZpcm9ubWVudCA9IGVudmly
b25tZW50OworCQkJdGhpcy5lbnVtQ29uc3RhbnROYW1lID0gZW51bUNvbnN0YW50TmFtZTsKKwkJ
fQorCQlGaWVsZEJpbmRpbmcgZ2V0UmVzb2x2ZWQoKSB7CisJCQlpZiAodGhpcy5lbnVtVHlwZS5p
c1VucmVzb2x2ZWRUeXBlKCkpCisJCQkJdGhpcy5lbnVtVHlwZSA9IChSZWZlcmVuY2VCaW5kaW5n
KSBCaW5hcnlUeXBlQmluZGluZy5yZXNvbHZlVHlwZSh0aGlzLmVudW1UeXBlLCB0aGlzLmVudmly
b25tZW50LCBmYWxzZSAvKiBubyByYXcgY29udmVyc2lvbiAqLyk7CisJCQlyZXR1cm4gdGhpcy5l
bnVtVHlwZS5nZXRGaWVsZCh0aGlzLmVudW1Db25zdGFudE5hbWUsIGZhbHNlKTsKKwkJfQorCQlw
dWJsaWMgY2hhcltdIGdldEVudW1Db25zdGFudE5hbWUoKSB7CisJCQlyZXR1cm4gdGhpcy5lbnVt
Q29uc3RhbnROYW1lOworCQl9CisJfQogCiBwdWJsaWMgc3RhdGljIE9iamVjdCBnZXRWYWx1ZShF
eHByZXNzaW9uIGV4cHJlc3Npb24pIHsKIAlpZiAoZXhwcmVzc2lvbiA9PSBudWxsKQpAQCAtODgs
NiArMTE0LDggQEAKICAqIEByZXR1cm4gdGhlIHZhbHVlIG9mIHRoaXMgbWVtYmVyIHZhbHVlIHBh
aXIgb3IgbnVsbCBpZiB0aGUgdmFsdWUgaXMgbWlzc2luZyBvciBpcyBub3QgYSBjb21waWxlLXRp
bWUgY29uc3RhbnQKICAqLwogcHVibGljIE9iamVjdCBnZXRWYWx1ZSgpIHsKKwlpZiAodGhpcy52
YWx1ZSBpbnN0YW5jZW9mIFVucmVzb2x2ZWRFbnVtQ29uc3RhbnQpCisJCXRoaXMudmFsdWUgPSAo
KFVucmVzb2x2ZWRFbnVtQ29uc3RhbnQpdGhpcy52YWx1ZSkuZ2V0UmVzb2x2ZWQoKTsKIAlyZXR1
cm4gdGhpcy52YWx1ZTsKIH0KIApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9JbXBsaWNpdE51
bGxBbm5vdGF0aW9uVmVyaWZpZXIuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvSW1wbGljaXROdWxsQW5u
b3RhdGlvblZlcmlmaWVyLmphdmEKaW5kZXggMzQ4NTYyMS4uMzRiOWZkNCAxMDA2NDQKLS0tIGEv
b3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2xvb2t1cC9JbXBsaWNpdE51bGxBbm5vdGF0aW9uVmVyaWZpZXIuamF2YQorKysgYi9v
cmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29t
cGlsZXIvbG9va3VwL0ltcGxpY2l0TnVsbEFubm90YXRpb25WZXJpZmllci5qYXZhCkBAIC03NCw3
ICs3NCw5IEBACiAJCQlpZiAoY3VycmVudFR5cGUuaWQgPT0gVHlwZUlkcy5UX0phdmFMYW5nT2Jq
ZWN0KSB7CiAJCQkJcmV0dXJuOwogCQkJfQotCQkJYm9vbGVhbiBuZWVkVG9BcHBseU5vbk51bGxE
ZWZhdWx0ID0gY3VycmVudE1ldGhvZC5oYXNOb25OdWxsRGVmYXVsdCgpOworCQkJbG9uZyBzb3Vy
Y2VMZXZlbCA9IHNjb3BlLmNvbXBpbGVyT3B0aW9ucygpLnNvdXJjZUxldmVsOworCQkJYm9vbGVh
biBuZWVkVG9BcHBseU5vbk51bGxEZWZhdWx0ID0gY3VycmVudE1ldGhvZC5oYXNOb25OdWxsRGVm
YXVsdEZvcihCaW5kaW5nLkRlZmF1bHRMb2NhdGlvblBhcmFtZXRlcnxCaW5kaW5nLkRlZmF1bHRM
b2NhdGlvblJldHVyblR5cGUsCisJCQkJCQkJCQkJCQkJCQkJCQkJCQlzb3VyY2VMZXZlbCA+PSBD
bGFzc0ZpbGVDb25zdGFudHMuSkRLMV84KTsKIAkJCS8vIGNvbXBhdGliaWxpdHkgJiBpbmhlcml0
YW5jZSBkbyBub3QgY29uc2lkZXIgY29uc3RydWN0b3JzIC8gc3RhdGljIG1ldGhvZHM6CiAJCQli
b29sZWFuIGlzSW5zdGFuY2VNZXRob2QgPSAhY3VycmVudE1ldGhvZC5pc0NvbnN0cnVjdG9yKCkg
JiYgIWN1cnJlbnRNZXRob2QuaXNTdGF0aWMoKTsKIAkJCWNvbXBsYWluICY9IGlzSW5zdGFuY2VN
ZXRob2Q7CkBAIC0xMTAsNyArMTEyLDYgQEAKIAkJCQkJY2hlY2tOdWxsU3BlY0luaGVyaXRhbmNl
KGN1cnJlbnRNZXRob2QsIHNyY01ldGhvZCwgbmVlZFRvQXBwbHlOb25OdWxsRGVmYXVsdCwgY29t
cGxhaW4sIGN1cnJlbnRTdXBlciwgc2NvcGUsIGluaGVyaXRlZE5vbk51bGxuZXNzSW5mb3MpOwog
CQkJCQluZWVkVG9BcHBseU5vbk51bGxEZWZhdWx0ID0gZmFsc2U7CiAJCQkJfQotCQkJCWxvbmcg
c291cmNlTGV2ZWwgPSBzY29wZS5jb21waWxlck9wdGlvbnMoKS5zb3VyY2VMZXZlbDsKIAkJCQkK
IAkJCQkvLyB0cmFuc2ZlciBjb2xsZWN0ZWQgaW5mb3JtYXRpb24gaW50byBjdXJyZW50TWV0aG9k
OgogCQkJCUluaGVyaXRlZE5vbk51bGxuZXNzSW5mbyBpbmZvID0gaW5oZXJpdGVkTm9uTnVsbG5l
c3NJbmZvc1swXTsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTG9jYWxUeXBlQmluZGluZy5q
YXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9Mb2NhbFR5cGVCaW5kaW5nLmphdmEKaW5kZXggOTlhZWNiNy4u
NzYzMzQ3MyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9Mb2NhbFR5cGVCaW5kaW5nLmphdmEK
KysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVy
bmFsL2NvbXBpbGVyL2xvb2t1cC9Mb2NhbFR5cGVCaW5kaW5nLmphdmEKQEAgLTEsNSArMSw1IEBA
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDEzIElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDE0IElC
TSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgogICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBw
cm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscwogICogYXJlIG1hZGUgYXZhaWxh
YmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCiAg
KiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBh
dApAQCAtOSw3ICs5LDggQEAKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFsIEFQSSBh
bmQgaW1wbGVtZW50YXRpb24KICAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJpYnV0aW9u
cyBmb3IKICAqCQkJCQkJCQlidWcgMzY1NjYyIC0gW2NvbXBpbGVyXVtudWxsXSB3YXJuIG9uIGNv
bnRyYWRpY3RvcnkgYW5kIHJlZHVuZGFudCBudWxsIGFubm90YXRpb25zCi0gKgkJCQkJCQkJYnVn
IDQwMTAzMCAtIFsxLjhdW251bGxdIE51bGwgYW5hbHlzaXMgc3VwcG9ydCBmb3IgbGFtYmRhIG1l
dGhvZHMuIAorICoJCQkJCQkJCWJ1ZyA0MDEwMzAgLSBbMS44XVtudWxsXSBOdWxsIGFuYWx5c2lz
IHN1cHBvcnQgZm9yIGxhbWJkYSBtZXRob2RzLgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44
XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVs
bEJ5RGVmYXVsdAogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNl
LmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXA7CiAKQEAgLTk5LDE4ICsxMDAsMjMgQEAKIAly
ZXR1cm4gdGhpcy5zdXBlcmNsYXNzOyAvLyBkZWZhdWx0IGFuc3dlcgogfQogCi1wcm90ZWN0ZWQg
dm9pZCBjaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UoQVNUTm9kZSBsb2NhdGlv
biwgQW5ub3RhdGlvbltdIGFubm90YXRpb25zLCBsb25nIGFubm90YXRpb25UYWdCaXRzKSB7Citw
cm90ZWN0ZWQgdm9pZCBjaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UoQVNUTm9k
ZSBsb2NhdGlvbiwgQW5ub3RhdGlvbltdIGFubm90YXRpb25zLCBsb25nIG51bGxCaXRzLCBib29s
ZWFuIGlzSmRrMTgpIHsKIAkKIAlpZiAoIWlzUHJvdG90eXBlKCkpIHRocm93IG5ldyBJbGxlZ2Fs
U3RhdGVFeGNlcHRpb24oKTsKIAkKLQlsb25nIG91dGVyRGVmYXVsdCA9IHRoaXMuZW5jbG9zaW5n
TWV0aG9kICE9IG51bGwgPyB0aGlzLmVuY2xvc2luZ01ldGhvZC50YWdCaXRzICYgKChUYWdCaXRz
LkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0fFRhZ0JpdHMuQW5ub3RhdGlvbk51bGxVbnNwZWNp
ZmllZEJ5RGVmYXVsdCkpIDogMDsKKwlsb25nIG91dGVyRGVmYXVsdCA9IDA7CisJaWYgKHRoaXMu
ZW5jbG9zaW5nTWV0aG9kICE9IG51bGwpIHsKKwkJb3V0ZXJEZWZhdWx0ID0gaXNKZGsxOCAKKwkJ
CQk/IHRoaXMuZW5jbG9zaW5nTWV0aG9kLmRlZmF1bHROdWxsbmVzcyAKKwkJCQk6IHRoaXMuZW5j
bG9zaW5nTWV0aG9kLnRhZ0JpdHMgJiAoVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVs
dHxUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQpOworCX0KIAlpZiAo
b3V0ZXJEZWZhdWx0ICE9IDApIHsKLQkJaWYgKG91dGVyRGVmYXVsdCA9PSBhbm5vdGF0aW9uVGFn
Qml0cykgeworCQlpZiAob3V0ZXJEZWZhdWx0ID09IG51bGxCaXRzKSB7CiAJCQl0aGlzLnNjb3Bl
LnByb2JsZW1SZXBvcnRlcigpLm51bGxEZWZhdWx0QW5ub3RhdGlvbklzUmVkdW5kYW50KGxvY2F0
aW9uLCBhbm5vdGF0aW9ucywgdGhpcy5lbmNsb3NpbmdNZXRob2QpOwogCQl9CiAJCXJldHVybjsK
IAl9Ci0Jc3VwZXIuY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRSZWN1cnNlKGxvY2F0aW9u
LCBhbm5vdGF0aW9ucywgYW5ub3RhdGlvblRhZ0JpdHMpOworCXN1cGVyLmNoZWNrUmVkdW5kYW50
TnVsbG5lc3NEZWZhdWx0UmVjdXJzZShsb2NhdGlvbiwgYW5ub3RhdGlvbnMsIG51bGxCaXRzLCBp
c0pkazE4KTsKIH0KIAogcHVibGljIGNoYXJbXSBjb21wdXRlVW5pcXVlS2V5KGJvb2xlYW4gaXNM
ZWFmKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNs
aXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL01ldGhvZEJpbmRpbmcuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9sb29rdXAvTWV0aG9kQmluZGluZy5qYXZhCmluZGV4IDE5NzM3NTguLjYxMTUzOTIgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kQmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvTWV0aG9kQmluZGluZy5qYXZhCkBAIC0xOSw2ICsxOSw3IEBACiAgKgkJCQkJCQkJQnVn
IDQwMDg3NCAtIFsxLjhdW2NvbXBpbGVyXSBJbmZlcmVuY2UgaW5mcmFzdHJ1Y3R1cmUgc2hvdWxk
IGV2b2x2ZSB0byBtZWV0IEpMUzggMTgueCAoUGFydCBHIG9mIEpTUjMzNSBzcGVjKQogICoJCQkJ
CQkJCUJ1ZyA0MjUxNTIgLSBbMS44XSBbY29tcGlsZXJdIExhbWJkYSBFeHByZXNzaW9uIG5vdCBy
ZXNvbHZlZCBidXQgZmxvdyBhbmFseXplZCBsZWFkaW5nIHRvIE5QRS4KICAqCQkJCQkJCQlCdWcg
NDIzNTA1IC0gWzEuOF0gSW1wbGVtZW50ICIxOC41LjQgTW9yZSBTcGVjaWZpYyBNZXRob2QgSW5m
ZXJlbmNlIgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcg
RGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICogICAgIEpl
c3BlciBTdGVlbiBNb2xsZXIgLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJCUJ1ZyA0MTIx
NTAgWzEuOF0gW2NvbXBpbGVyXSBFbmFibGUgcmVmbGVjdGVkIHBhcmFtZXRlciBuYW1lcyBkdXJp
bmcgYW5ub3RhdGlvbiBwcm9jZXNzaW5nCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KQEAgLTM1
LDYgKzM2LDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0
LlR5cGVEZWNsYXJhdGlvbjsKIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGls
ZXIuY2xhc3NmbXQuQ2xhc3NGaWxlQ29uc3RhbnRzOwogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5p
bnRlcm5hbC5jb21waWxlci5jb2RlZ2VuLkNvbnN0YW50UG9vbDsKK2ltcG9ydCBvcmcuZWNsaXBz
ZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuaW1wbC5Db21waWxlck9wdGlvbnM7CiBpbXBvcnQgb3Jn
LmVjbGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLnV0aWwuVXRpbDsKIAogQFN1cHByZXNzV2Fy
bmluZ3MoInJhd3R5cGVzIikKQEAgLTUzLDYgKzU1LDcgQEAKIAogCS8qKiBTdG9yZSBudWxsbmVz
cyBpbmZvcm1hdGlvbiBmcm9tIGFubm90YXRpb24gKGluY2wuIGFwcGxpY2FibGUgZGVmYXVsdCku
ICovCiAJcHVibGljIEJvb2xlYW5bXSBwYXJhbWV0ZXJOb25OdWxsbmVzczsgIC8vIFRSVUUgbWVh
bnMgQE5vbk51bGwgZGVjbGFyZWQsIEZBTFNFIG1lYW5zIEBOdWxsYWJsZSBkZWNsYXJlZCwgbnVs
bCBtZWFucyBub3RoaW5nIGRlY2xhcmVkCisJcHVibGljIGludCBkZWZhdWx0TnVsbG5lc3M7IC8v
IGZvciBudWxsICp0eXBlKiBhbm5vdGF0aW9ucwogCiAJLyoqIFN0b3JlIHBhcmFtZXRlciBuYW1l
cyBmcm9tIE1ldGhvZFBhcmFtZXRlcnMgYXR0cmlidXRlIChpbmNsLiBhcHBsaWNhYmxlIGRlZmF1
bHQpLiAqLwogCXB1YmxpYyBjaGFyW11bXSBwYXJhbWV0ZXJOYW1lcyA9IEJpbmRpbmcuTk9fUEFS
QU1FVEVSX05BTUVTOwpAQCAtNTA2LDI4ICs1MDksMzEgQEAKIAl9CiB9CiAKKy8vcHJlOiBudWxs
IGFubm90YXRpb24gYW5hbHlzaXMgaXMgZW5hYmxlZAogcHJvdGVjdGVkIHZvaWQgZmlsbEluRGVm
YXVsdE5vbk51bGxuZXNzMTgoQWJzdHJhY3RNZXRob2REZWNsYXJhdGlvbiBzb3VyY2VNZXRob2Qs
IExvb2t1cEVudmlyb25tZW50IGVudikgewotCWJvb2xlYW4gYWRkZWQgPSBmYWxzZTsKLQlpbnQg
bGVuZ3RoID0gdGhpcy5wYXJhbWV0ZXJzLmxlbmd0aDsKLQlmb3IgKGludCBpID0gMDsgaSA8IGxl
bmd0aDsgaSsrKSB7Ci0JCVR5cGVCaW5kaW5nIHBhcmFtZXRlciA9IHRoaXMucGFyYW1ldGVyc1tp
XTsKLQkJaWYgKHBhcmFtZXRlci5pc0Jhc2VUeXBlKCkpCi0JCQljb250aW51ZTsKLQkJbG9uZyBl
eGlzdGluZyA9IHBhcmFtZXRlci50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTnVsbE1BU0s7
Ci0JCWlmIChleGlzdGluZyA9PSAwTCkgewotCQkJYWRkZWQgPSB0cnVlOwotCQkJaWYgKCFwYXJh
bWV0ZXIuaXNCYXNlVHlwZSgpKSB7Ci0JCQkJdGhpcy5wYXJhbWV0ZXJzW2ldID0gZW52LmNyZWF0
ZUFubm90YXRlZFR5cGUocGFyYW1ldGVyLCBuZXcgQW5ub3RhdGlvbkJpbmRpbmdbXXtlbnYuZ2V0
Tm9uTnVsbEFubm90YXRpb24oKX0pOwotCQkJCWlmIChzb3VyY2VNZXRob2QgIT0gbnVsbCkKLQkJ
CQkJc291cmNlTWV0aG9kLmFyZ3VtZW50c1tpXS5iaW5kaW5nLnR5cGUgPSB0aGlzLnBhcmFtZXRl
cnNbaV07CisJaWYgKGhhc05vbk51bGxEZWZhdWx0Rm9yKERlZmF1bHRMb2NhdGlvblBhcmFtZXRl
ciwgdHJ1ZSkpIHsKKwkJYm9vbGVhbiBhZGRlZCA9IGZhbHNlOworCQlpbnQgbGVuZ3RoID0gdGhp
cy5wYXJhbWV0ZXJzLmxlbmd0aDsKKwkJZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykg
eworCQkJVHlwZUJpbmRpbmcgcGFyYW1ldGVyID0gdGhpcy5wYXJhbWV0ZXJzW2ldOworCQkJaWYg
KHBhcmFtZXRlci5pc0Jhc2VUeXBlKCkpCisJCQkJY29udGludWU7CisJCQlsb25nIGV4aXN0aW5n
ID0gcGFyYW1ldGVyLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsTUFTSzsKKwkJCWlm
IChleGlzdGluZyA9PSAwTCkgeworCQkJCWFkZGVkID0gdHJ1ZTsKKwkJCQlpZiAoIXBhcmFtZXRl
ci5pc0Jhc2VUeXBlKCkpIHsKKwkJCQkJdGhpcy5wYXJhbWV0ZXJzW2ldID0gZW52LmNyZWF0ZUFu
bm90YXRlZFR5cGUocGFyYW1ldGVyLCBuZXcgQW5ub3RhdGlvbkJpbmRpbmdbXXtlbnYuZ2V0Tm9u
TnVsbEFubm90YXRpb24oKX0pOworCQkJCQlpZiAoc291cmNlTWV0aG9kICE9IG51bGwpCisJCQkJ
CQlzb3VyY2VNZXRob2QuYXJndW1lbnRzW2ldLmJpbmRpbmcudHlwZSA9IHRoaXMucGFyYW1ldGVy
c1tpXTsKKwkJCQl9CisJCQl9IGVsc2UgaWYgKHNvdXJjZU1ldGhvZCAhPSBudWxsICYmIChwYXJh
bWV0ZXIudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGwpICE9IDApIHsKKwkJCQlz
b3VyY2VNZXRob2Quc2NvcGUucHJvYmxlbVJlcG9ydGVyKCkubnVsbEFubm90YXRpb25Jc1JlZHVu
ZGFudChzb3VyY2VNZXRob2QsIGkpOwogCQkJfQotCQl9IGVsc2UgaWYgKHNvdXJjZU1ldGhvZCAh
PSBudWxsICYmIChwYXJhbWV0ZXIudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGwp
ICE9IDApIHsKLQkJCXNvdXJjZU1ldGhvZC5zY29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5udWxsQW5u
b3RhdGlvbklzUmVkdW5kYW50KHNvdXJjZU1ldGhvZCwgaSk7CiAJCX0KKwkJaWYgKGFkZGVkKQor
CQkJdGhpcy50YWdCaXRzIHw9IFRhZ0JpdHMuSGFzUGFyYW1ldGVyQW5ub3RhdGlvbnM7CiAJfQot
CWlmIChhZGRlZCkKLQkJdGhpcy50YWdCaXRzIHw9IFRhZ0JpdHMuSGFzUGFyYW1ldGVyQW5ub3Rh
dGlvbnM7Ci0JaWYgKHRoaXMucmV0dXJuVHlwZSAhPSBudWxsKSB7CisJaWYgKHRoaXMucmV0dXJu
VHlwZSAhPSBudWxsICYmIGhhc05vbk51bGxEZWZhdWx0Rm9yKERlZmF1bHRMb2NhdGlvblJldHVy
blR5cGUsIHRydWUpKSB7CiAJCWlmICghdGhpcy5yZXR1cm5UeXBlLmlzQmFzZVR5cGUoKSAmJiAo
dGhpcy5yZXR1cm5UeXBlLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsTUFTSykgPT0g
MCkgewogCQkJdGhpcy5yZXR1cm5UeXBlID0gZW52LmNyZWF0ZUFubm90YXRlZFR5cGUodGhpcy5y
ZXR1cm5UeXBlLCBuZXcgQW5ub3RhdGlvbkJpbmRpbmdbXXtlbnYuZ2V0Tm9uTnVsbEFubm90YXRp
b24oKX0pOwogCQl9IGVsc2UgaWYgKHNvdXJjZU1ldGhvZCAhPSBudWxsICYmICh0aGlzLnJldHVy
blR5cGUudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGwpICE9IDApIHsKQEAgLTYy
MSwxMSArNjI3LDE2IEBACiAJCQlBYnN0cmFjdE1ldGhvZERlY2xhcmF0aW9uIG1ldGhvZERlY2wg
PSB0eXBlRGVjbC5kZWNsYXJhdGlvbk9mKG9yaWdpbmFsTWV0aG9kKTsKIAkJCWlmIChtZXRob2RE
ZWNsICE9IG51bGwpCiAJCQkJQVNUTm9kZS5yZXNvbHZlQW5ub3RhdGlvbnMobWV0aG9kRGVjbC5z
Y29wZSwgbWV0aG9kRGVjbC5hbm5vdGF0aW9ucywgb3JpZ2luYWxNZXRob2QpOwotCQkJbG9uZyBu
dWxsRGVmYXVsdEJpdHMgPSB0aGlzLnRhZ0JpdHMgJiAoVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVs
bEJ5RGVmYXVsdHxUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQpOwot
CQkJaWYgKG51bGxEZWZhdWx0Qml0cyAhPSAwICYmIHRoaXMuZGVjbGFyaW5nQ2xhc3MgaW5zdGFu
Y2VvZiBTb3VyY2VUeXBlQmluZGluZykgewotCQkJCVNvdXJjZVR5cGVCaW5kaW5nIGRlY2xhcmlu
Z1NvdXJjZVR5cGUgPSAoU291cmNlVHlwZUJpbmRpbmcpIHRoaXMuZGVjbGFyaW5nQ2xhc3M7Ci0J
CQkJaWYgKGRlY2xhcmluZ1NvdXJjZVR5cGUuY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRP
bmUobWV0aG9kRGVjbCwgbWV0aG9kRGVjbC5hbm5vdGF0aW9ucywgbnVsbERlZmF1bHRCaXRzKSkg
ewotCQkJCQlkZWNsYXJpbmdTb3VyY2VUeXBlLmNoZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0
UmVjdXJzZShtZXRob2REZWNsLCBtZXRob2REZWNsLmFubm90YXRpb25zLCBudWxsRGVmYXVsdEJp
dHMpOworCQkJQ29tcGlsZXJPcHRpb25zIG9wdGlvbnMgPSBzY29wZS5jb21waWxlck9wdGlvbnMo
KTsKKwkJCWlmIChvcHRpb25zLmlzQW5ub3RhdGlvbkJhc2VkTnVsbEFuYWx5c2lzRW5hYmxlZCkg
eworCQkJCWJvb2xlYW4gaXNKZGsxOCA9IG9wdGlvbnMuc291cmNlTGV2ZWwgPj0gQ2xhc3NGaWxl
Q29uc3RhbnRzLkpESzFfODsKKwkJCQlsb25nIG51bGxEZWZhdWx0Qml0cyA9IGlzSmRrMTggPyB0
aGlzLmRlZmF1bHROdWxsbmVzcworCQkJCQkJOiB0aGlzLnRhZ0JpdHMgJiAoVGFnQml0cy5Bbm5v
dGF0aW9uTm9uTnVsbEJ5RGVmYXVsdHxUYWdCaXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRC
eURlZmF1bHQpOworCQkJCWlmIChudWxsRGVmYXVsdEJpdHMgIT0gMCAmJiB0aGlzLmRlY2xhcmlu
Z0NsYXNzIGluc3RhbmNlb2YgU291cmNlVHlwZUJpbmRpbmcpIHsKKwkJCQkJU291cmNlVHlwZUJp
bmRpbmcgZGVjbGFyaW5nU291cmNlVHlwZSA9IChTb3VyY2VUeXBlQmluZGluZykgdGhpcy5kZWNs
YXJpbmdDbGFzczsKKwkJCQkJaWYgKGRlY2xhcmluZ1NvdXJjZVR5cGUuY2hlY2tSZWR1bmRhbnRO
dWxsbmVzc0RlZmF1bHRPbmUobWV0aG9kRGVjbCwgbWV0aG9kRGVjbC5hbm5vdGF0aW9ucywgbnVs
bERlZmF1bHRCaXRzLCBpc0pkazE4KSkgeworCQkJCQkJZGVjbGFyaW5nU291cmNlVHlwZS5jaGVj
a1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UobWV0aG9kRGVjbCwgbWV0aG9kRGVjbC5h
bm5vdGF0aW9ucywgbnVsbERlZmF1bHRCaXRzLCBpc0pkazE4KTsKKwkJCQkJfQogCQkJCX0KIAkJ
CX0KIAkJfQpAQCAtMTI0NCwxMiArMTI1NSwxOCBAQAogcHVibGljIFR5cGVWYXJpYWJsZUJpbmRp
bmdbXSB0eXBlVmFyaWFibGVzKCkgewogCXJldHVybiB0aGlzLnR5cGVWYXJpYWJsZXM7CiB9Ci1w
dWJsaWMgYm9vbGVhbiBoYXNOb25OdWxsRGVmYXVsdCgpIHsKLQlpZiAoKHRoaXMudGFnQml0cyAm
IFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQpICE9IDApCi0JCXJldHVybiB0cnVl
OwotCWlmICgodGhpcy50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lmaWVk
QnlEZWZhdWx0KSAhPSAwKQotCQlyZXR1cm4gZmFsc2U7Ci0JcmV0dXJuIHRoaXMuZGVjbGFyaW5n
Q2xhc3MuaGFzTm9uTnVsbERlZmF1bHQoKTsKKy8vcHJlOiBudWxsIGFubm90YXRpb24gYW5hbHlz
aXMgaXMgZW5hYmxlZAorcHVibGljIGJvb2xlYW4gaGFzTm9uTnVsbERlZmF1bHRGb3IoaW50IGxv
Y2F0aW9uLCBib29sZWFuIHVzZVR5cGVBbm5vdGF0aW9ucykgeworCWlmICh1c2VUeXBlQW5ub3Rh
dGlvbnMpIHsKKwkJaWYgKHRoaXMuZGVmYXVsdE51bGxuZXNzICE9IDApCisJCQlyZXR1cm4gKHRo
aXMuZGVmYXVsdE51bGxuZXNzICYgbG9jYXRpb24pICE9IDA7CisJfSBlbHNlIHsKKwkJaWYgKCh0
aGlzLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKQor
CQkJcmV0dXJuIHRydWU7CisJCWlmICgodGhpcy50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9u
TnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0KSAhPSAwKQorCQkJcmV0dXJuIGZhbHNlOworCX0KKwly
ZXR1cm4gdGhpcy5kZWNsYXJpbmdDbGFzcy5oYXNOb25OdWxsRGVmYXVsdEZvcihsb2NhdGlvbiwg
dXNlVHlwZUFubm90YXRpb25zKTsKIH0KIAogcHVibGljIGJvb2xlYW4gcmVkZWNsYXJlc1B1Ymxp
Y09iamVjdE1ldGhvZChTY29wZSBzY29wZSkgewpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9N
ZXRob2RTY29wZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9NZXRob2RTY29wZS5qYXZhCmluZGV4IGJi
NmYwNTkuLmFkMDA1ZDIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kU2NvcGUuamF2
YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50
ZXJuYWwvY29tcGlsZXIvbG9va3VwL01ldGhvZFNjb3BlLmphdmEKQEAgLTE0LDYgKzE0LDcgQEAK
ICAqCQkJCQkJCQlidWcgMzgyMzU0IC0gWzEuOF1bY29tcGlsZXJdIENvbXBpbGVyIHNpbGVudCBv
biBjb25mbGljdGluZyBtb2RpZmllcgogICoJCQkJCQkJCWJ1ZyA0MDEwMzAgLSBbMS44XVtudWxs
XSBOdWxsIGFuYWx5c2lzIHN1cHBvcnQgZm9yIGxhbWJkYSBtZXRob2RzLgogICoJCQkJCQkJCUJ1
ZyA0MTYxNzYgLSBbMS44XVtjb21waWxlcl1bbnVsbF0gbnVsbCB0eXBlIGFubm90YXRpb25zIGNh
dXNlIGdyaWVmIG9uIHR5cGUgdmFyaWFibGVzCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhd
W251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxs
QnlEZWZhdWx0CiAgKiAgICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9ucyBmb3IKICAq
CQkJCQkJCWJ1ZyAzODI3MDEgLSBbMS44XVtjb21waWxlcl0gSW1wbGVtZW50IHNlbWFudGljIGFu
YWx5c2lzIG9mIExhbWJkYSBleHByZXNzaW9ucyAmIFJlZmVyZW5jZSBleHByZXNzaW9uCiAgKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKi8KQEAgLTU2NCw0ICs1NjUsMTMgQEAKIHZvaWQgcmVzb2x2ZVR5
cGVQYXJhbWV0ZXIoVHlwZVBhcmFtZXRlciB0eXBlUGFyYW1ldGVyKSB7CiAJdHlwZVBhcmFtZXRl
ci5yZXNvbHZlKHRoaXMpOwogfQorQE92ZXJyaWRlCitwdWJsaWMgYm9vbGVhbiBoYXNEZWZhdWx0
TnVsbG5lc3NGb3IoaW50IGxvY2F0aW9uKSB7CisJaWYgKHRoaXMucmVmZXJlbmNlQ29udGV4dCBp
bnN0YW5jZW9mIEFic3RyYWN0TWV0aG9kRGVjbGFyYXRpb24pIHsKKwkJTWV0aG9kQmluZGluZyBi
aW5kaW5nID0gKChBYnN0cmFjdE1ldGhvZERlY2xhcmF0aW9uKSB0aGlzLnJlZmVyZW5jZUNvbnRl
eHQpLmJpbmRpbmc7CisJCWlmIChiaW5kaW5nICE9IG51bGwgJiYgYmluZGluZy5kZWZhdWx0TnVs
bG5lc3MgIT0gMCkKKwkJCXJldHVybiAoYmluZGluZy5kZWZhdWx0TnVsbG5lc3MgJiBsb2NhdGlv
bikgIT0gMDsKKwl9CisJcmV0dXJuIHRoaXMucGFyZW50Lmhhc0RlZmF1bHROdWxsbmVzc0Zvcihs
b2NhdGlvbik7Cit9CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL01ldGhvZFZlcmlmaWVy
MTUuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kVmVyaWZpZXIxNS5qYXZhCmluZGV4IDkxMzVj
MDUuLmRlZTQwODkgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kVmVyaWZpZXIxNS5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9sb29rdXAvTWV0aG9kVmVyaWZpZXIxNS5qYXZhCkBAIC0xLDUgKzEs
NSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
MyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
NCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRo
aXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2
YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEu
MAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFi
bGUgYXQKQEAgLTI0LDYgKzI0LDcgQEAKICAqCQkJCQkJCQlCdWcgNDIwMDgwIC0gWzEuOF0gT3Zl
cnJpZGRlbiBEZWZhdWx0IG1ldGhvZCBpcyByZXBvcnRlZCBhcyBkdXBsaWNhdGVkCiAgKgkJCQkJ
CQkJQnVnIDQwNDY5MCAtIFsxLjhdW2NvbXBpbGVyXSByZXZpc2l0IGJyaWRnZSBnZW5lcmF0aW9u
IGFmdGVyIFZNIGJ1ZyBpcyBmaXhlZAogICoJCQkJCQkJCUJ1ZyA0MTAzMjUgLSBbMS43XVtjb21w
aWxlcl0gR2VuZXJpZmllZCBtZXRob2Qgb3ZlcnJpZGUgZGlmZmVyZW50IGJldHdlZW4gamF2YWMg
YW5kIGVjbGlwc2UgY29tcGlsZXIKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0g
ZXZhbHVhdGUgbmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1
bHQKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNsaXBzZS5qZHQuaW50
ZXJuYWwuY29tcGlsZXIubG9va3VwOwogCkBAIC03NCw3ICs3NSw5IEBACiAJQWJzdHJhY3RNZXRo
b2REZWNsYXJhdGlvbiBzcmNNZXRob2QgPSBudWxsOwogCWlmIChhbmFseXNlTnVsbEFubm90YXRp
b25zICYmIHRoaXMudHlwZS5lcXVhbHMoY29uY3JldGVNZXRob2QuZGVjbGFyaW5nQ2xhc3MpKSAv
LyBpcyBjdXJyZW50TWV0aG9kIGZyb20gdGhlIGN1cnJlbnQgdHlwZT8KIAkJc3JjTWV0aG9kID0g
Y29uY3JldGVNZXRob2Quc291cmNlTWV0aG9kKCk7Ci0JYm9vbGVhbiBoYXNOb25OdWxsRGVmYXVs
dCA9IGNvbmNyZXRlTWV0aG9kLmhhc05vbk51bGxEZWZhdWx0KCk7CisJYm9vbGVhbiB1c2VUeXBl
QW5ub3RhdGlvbnMgPSB0aGlzLmVudmlyb25tZW50Lmdsb2JhbE9wdGlvbnMuc291cmNlTGV2ZWwg
Pj0gQ2xhc3NGaWxlQ29uc3RhbnRzLkpESzFfODsKKwlib29sZWFuIGhhc05vbk51bGxEZWZhdWx0
ID0gYW5hbHlzZU51bGxBbm5vdGF0aW9ucyAmJgorCQkJY29uY3JldGVNZXRob2QuaGFzTm9uTnVs
bERlZmF1bHRGb3IoQmluZGluZy5EZWZhdWx0TG9jYXRpb25QYXJhbWV0ZXJ8QmluZGluZy5EZWZh
dWx0TG9jYXRpb25SZXR1cm5UeXBlLCB1c2VUeXBlQW5ub3RhdGlvbnMpOwogCWZvciAoaW50IGkg
PSAwLCBsID0gYWJzdHJhY3RNZXRob2RzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogCQlNZXRob2RC
aW5kaW5nIGFic3RyYWN0TWV0aG9kID0gYWJzdHJhY3RNZXRob2RzW2ldOwogCQlpZiAoY29uY3Jl
dGVNZXRob2QuaXNWYXJhcmdzKCkgIT0gYWJzdHJhY3RNZXRob2QuaXNWYXJhcmdzKCkpCkBAIC0z
ODcsNyArMzkwLDggQEAKIAkJQWJzdHJhY3RNZXRob2REZWNsYXJhdGlvbiBzcmNNZXRob2QgPSBu
dWxsOwogCQlpZiAodGhpcy50eXBlLmVxdWFscyhjdXJyZW50TWV0aG9kLmRlY2xhcmluZ0NsYXNz
KSkgLy8gaXMgY3VycmVudE1ldGhvZCBmcm9tIHRoZSBjdXJyZW50IHR5cGU/CiAJCQlzcmNNZXRo
b2QgPSBjdXJyZW50TWV0aG9kLnNvdXJjZU1ldGhvZCgpOwotCQlib29sZWFuIGhhc05vbk51bGxE
ZWZhdWx0ID0gY3VycmVudE1ldGhvZC5oYXNOb25OdWxsRGVmYXVsdCgpOworCQlib29sZWFuIHVz
ZVR5cGVBbm5vdGF0aW9ucyA9IG9wdGlvbnMuc291cmNlTGV2ZWwgPj0gQ2xhc3NGaWxlQ29uc3Rh
bnRzLkpESzFfODsKKwkJYm9vbGVhbiBoYXNOb25OdWxsRGVmYXVsdCA9IGN1cnJlbnRNZXRob2Qu
aGFzTm9uTnVsbERlZmF1bHRGb3IoQmluZGluZy5EZWZhdWx0TG9jYXRpb25QYXJhbWV0ZXJ8Qmlu
ZGluZy5EZWZhdWx0TG9jYXRpb25SZXR1cm5UeXBlLCB1c2VUeXBlQW5ub3RhdGlvbnMpOwogCQlm
b3IgKGludCBpID0gbGVuZ3RoOyAtLWkgPj0gMDspCiAJCQlpZiAoIWN1cnJlbnRNZXRob2QuaXNT
dGF0aWMoKSAmJiAhbWV0aG9kc1tpXS5pc1N0YXRpYygpKQogCQkJCWNoZWNrTnVsbFNwZWNJbmhl
cml0YW5jZShjdXJyZW50TWV0aG9kLCBzcmNNZXRob2QsIGhhc05vbk51bGxEZWZhdWx0LCB0cnVl
LCBtZXRob2RzW2ldLCB0aGlzLnR5cGUuc2NvcGUsIG51bGwpOwpkaWZmIC0tZ2l0IGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVy
L2xvb2t1cC9Nb3N0U3BlY2lmaWNFeGNlcHRpb25NZXRob2RCaW5kaW5nLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL01vc3RTcGVjaWZpY0V4Y2VwdGlvbk1ldGhvZEJpbmRpbmcuamF2YQppbmRleCAzN2Qw
NTM2Li5iZmIxZjBkIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL01vc3RTcGVjaWZpY0V4Y2Vw
dGlvbk1ldGhvZEJpbmRpbmcuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxl
ci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL01vc3RTcGVjaWZpY0V4
Y2VwdGlvbk1ldGhvZEJpbmRpbmcuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTEgSUJNIENvcnBvcmF0aW9uIGFu
ZCBvdGhlcnMuCisgKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTQgSUJNIENvcnBvcmF0aW9uIGFu
ZCBvdGhlcnMuCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBh
Y2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRl
cm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAKICAqIHdoaWNoIGFjY29tcGFu
aWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CkBAIC03LDcgKzcsOSBA
QAogICoKICAqIENvbnRyaWJ1dG9yczoKICAqICAgICBJQk0gQ29ycG9yYXRpb24gLSBpbml0aWFs
IEFQSSBhbmQgaW1wbGVtZW50YXRpb24KLSAqICAgICBTdGVwaGFuIEhlcnJtYW5uIC0gQ29udHJp
YnV0aW9uIGZvciBidWcgMTg2MzQyIC0gW2NvbXBpbGVyXVtudWxsXSBVc2luZyBhbm5vdGF0aW9u
cyBmb3IgbnVsbCBjaGVja2luZworICogICAgIFN0ZXBoYW4gSGVycm1hbm4gLSBDb250cmlidXRp
b25zIGZvcgorICoJCQkJCQkJCUJ1ZyAxODYzNDIgLSBbY29tcGlsZXJdW251bGxdIFVzaW5nIGFu
bm90YXRpb25zIGZvciBudWxsIGNoZWNraW5nCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhd
W251bGxdIGV2YWx1YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxs
QnlEZWZhdWx0CiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2Uu
amR0LmludGVybmFsLmNvbXBpbGVyLmxvb2t1cDsKIApAQCAtMjksNiArMzEsNyBAQAogCQkJCW9y
aWdpbmFsTWV0aG9kLmRlY2xhcmluZ0NsYXNzKTsKIAkJdGhpcy5vcmlnaW5hbE1ldGhvZCA9IG9y
aWdpbmFsTWV0aG9kOwogCQl0aGlzLnBhcmFtZXRlck5vbk51bGxuZXNzID0gb3JpZ2luYWxNZXRo
b2QucGFyYW1ldGVyTm9uTnVsbG5lc3M7CisJCXRoaXMuZGVmYXVsdE51bGxuZXNzID0gb3JpZ2lu
YWxNZXRob2QuZGVmYXVsdE51bGxuZXNzOwogCX0KIAkKIAlwdWJsaWMgTWV0aG9kQmluZGluZyBv
cmlnaW5hbCgpIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvTmVzdGVkVHlwZUJpbmRpbmcu
amF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9sb29rdXAvTmVzdGVkVHlwZUJpbmRpbmcuamF2YQppbmRleCA5NTQ5MzM0
Li5lYzRlZjZjIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcv
ZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL05lc3RlZFR5cGVCaW5kaW5nLmph
dmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2xvb2t1cC9OZXN0ZWRUeXBlQmluZGluZy5qYXZhCkBAIC0xLDUgKzEs
NSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
MyBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdodCAoYykgMjAwMCwgMjAx
NCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRo
aXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAqIGFyZSBtYWRlIGF2
YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEu
MAogICogd2hpY2ggYWNjb21wYW5pZXMgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFi
bGUgYXQKQEAgLTcsNyArNyw5IEBACiAgKgogICogQ29udHJpYnV0b3JzOgogICogICAgIElCTSBD
b3Jwb3JhdGlvbiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgotICogICAgIFN0ZXBo
YW4gSGVycm1hbm4gLSBDb250cmlidXRpb24gZm9yICBidWcgMzY1NjYyIC0gW2NvbXBpbGVyXVtu
dWxsXSB3YXJuIG9uIGNvbnRyYWRpY3RvcnkgYW5kIHJlZHVuZGFudCBudWxsIGFubm90YXRpb25z
CisgKiAgICAgU3RlcGhhbiBIZXJybWFubiAtIENvbnRyaWJ1dGlvbnMgZm9yCisgKgkJCQkJCQkJ
QnVnIDM2NTY2MiAtIFtjb21waWxlcl1bbnVsbF0gd2FybiBvbiBjb250cmFkaWN0b3J5IGFuZCBy
ZWR1bmRhbnQgbnVsbCBhbm5vdGF0aW9ucworICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtu
dWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5
RGVmYXVsdAogICogICAgIEtlaWdvIEltYWkgLSBDb250cmlidXRpb24gZm9yICBidWcgMzg4OTAz
IC0gQ2Fubm90IGV4dGVuZCBpbm5lciBjbGFzcyBhcyBhbiBhbm9ueW1vdXMgY2xhc3Mgd2hlbiBp
dCBleHRlbmRzIHRoZSBvdXRlciBjbGFzcwogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNr
YWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29rdXA7CkBAIC0xMjMsMTYg
KzEyNSwxNiBAQAogCXJldHVybiBzeW50aExvY2FsOwogfQogCi1wcm90ZWN0ZWQgdm9pZCBjaGVj
a1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UoQVNUTm9kZSBsb2NhdGlvbiwgQW5ub3Rh
dGlvbltdIGFubm90YXRpb25zLCBsb25nIGFubm90YXRpb25UYWdCaXRzKSB7Citwcm90ZWN0ZWQg
dm9pZCBjaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UoQVNUTm9kZSBsb2NhdGlv
biwgQW5ub3RhdGlvbltdIGFubm90YXRpb25zLCBsb25nIG51bGxCaXRzLCBib29sZWFuIGlzSmRr
MTgpIHsKIAlpZiAoIWlzUHJvdG90eXBlKCkpIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRp
b24oKTsKIAlSZWZlcmVuY2VCaW5kaW5nIGN1cnJlbnRUeXBlID0gdGhpcy5lbmNsb3NpbmdUeXBl
OwogCWRvIHsKLQkJaWYgKCEoKFNvdXJjZVR5cGVCaW5kaW5nKWN1cnJlbnRUeXBlKS5jaGVja1Jl
ZHVuZGFudE51bGxuZXNzRGVmYXVsdE9uZShsb2NhdGlvbiwgYW5ub3RhdGlvbnMsIGFubm90YXRp
b25UYWdCaXRzKSkgeworCQlpZiAoISgoU291cmNlVHlwZUJpbmRpbmcpY3VycmVudFR5cGUpLmNo
ZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0T25lKGxvY2F0aW9uLCBhbm5vdGF0aW9ucywgbnVs
bEJpdHMsIGlzSmRrMTgpKSB7CiAJCQlyZXR1cm47CiAJCX0KIAkJY3VycmVudFR5cGUgPSBjdXJy
ZW50VHlwZS5lbmNsb3NpbmdUeXBlKCk7CiAJfSB3aGlsZSAoY3VycmVudFR5cGUgaW5zdGFuY2Vv
ZiBTb3VyY2VUeXBlQmluZGluZyk7Ci0Jc3VwZXIuY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1
bHRSZWN1cnNlKGxvY2F0aW9uLCBhbm5vdGF0aW9ucywgYW5ub3RhdGlvblRhZ0JpdHMpOworCXN1
cGVyLmNoZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0UmVjdXJzZShsb2NhdGlvbiwgYW5ub3Rh
dGlvbnMsIG51bGxCaXRzLCBpc0pkazE4KTsKIH0KIAogLyogQW5zd2VyIHRoZSByZWNlaXZlcidz
IGVuY2xvc2luZyB0eXBlLi4uIG51bGwgaWYgdGhlIHJlY2VpdmVyIGlzIGEgdG9wIGxldmVsIHR5
cGUuCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRHZW5lcmljTWV0aG9k
QmluZGluZy5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVkR2VuZXJpY01ldGhvZEJp
bmRpbmcuamF2YQppbmRleCAzZTE2ZDU1Li5mYjVjYmIzIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9v
a3VwL1BhcmFtZXRlcml6ZWRHZW5lcmljTWV0aG9kQmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9s
b29rdXAvUGFyYW1ldGVyaXplZEdlbmVyaWNNZXRob2RCaW5kaW5nLmphdmEKQEAgLTE4LDYgKzE4
LDcgQEAKICAqCQkJCQkJCQlCdWcgNDI3NDM4IC0gWzEuOF1bY29tcGlsZXJdIE5QRSBhdCBvcmcu
ZWNsaXBzZS5qZHQuaW50ZXJuYWwuY29tcGlsZXIuYXN0LkNvbmRpdGlvbmFsRXhwcmVzc2lvbi5n
ZW5lcmF0ZUNvZGUoQ29uZGl0aW9uYWxFeHByZXNzaW9uLmphdmE6MjgwKQogICoJCQkJCQkJCUJ1
ZyA0MTg3NDMgLSBbMS44XVtudWxsXSBjb250cmFkaWN0b3J5IGFubm90YXRpb25zIG9uIGludm9j
YXRpb24gb2YgZ2VuZXJpYyBtZXRob2Qgbm90IHJlcG9ydGVkCiAgKgkJCQkJCQkJQnVnIDQxNjE4
MiAtIFsxLjhdW2NvbXBpbGVyXVtudWxsXSBDb250cmFkaWN0b3J5IG51bGwgYW5ub3RhdGlvbnMg
bm90IHJlamVjdGVkCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1YXRl
IG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAgKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKi8KIHBhY2thZ2Ugb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLmxvb2t1cDsKIApAQCAtNDgwLDYgKzQ4MSw3IEBACiAJICAgIAkJCQkJCQkJCTogU2Nv
cGUuc3Vic3RpdHV0ZShyYXdUeXBlLCBvcmlnaW5hbE1ldGhvZC5yZXR1cm5UeXBlKSk7CiAJICAg
IHRoaXMud2FzSW5mZXJyZWQgPSBmYWxzZTsgLy8gbm90IHJlc3VsdGluZyBmcm9tIG1ldGhvZCBp
bnZvY2F0aW9uIGluZmVycmVuY2UKIAkgICAgdGhpcy5wYXJhbWV0ZXJOb25OdWxsbmVzcyA9IG9y
aWdpbmFsTWV0aG9kLnBhcmFtZXRlck5vbk51bGxuZXNzOworCSAgICB0aGlzLmRlZmF1bHROdWxs
bmVzcyA9IG9yaWdpbmFsTWV0aG9kLmRlZmF1bHROdWxsbmVzczsKIAl9CiAKICAgICAvKioKQEAg
LTUyMiw2ICs1MjQsNyBAQAogCQl9CiAJICAgIHRoaXMud2FzSW5mZXJyZWQgPSB0cnVlOy8vIHJl
c3VsdGluZyBmcm9tIG1ldGhvZCBpbnZvY2F0aW9uIGluZmVycmVuY2UKIAkgICAgdGhpcy5wYXJh
bWV0ZXJOb25OdWxsbmVzcyA9IG9yaWdpbmFsTWV0aG9kLnBhcmFtZXRlck5vbk51bGxuZXNzOwor
CSAgICB0aGlzLmRlZmF1bHROdWxsbmVzcyA9IG9yaWdpbmFsTWV0aG9kLmRlZmF1bHROdWxsbmVz
czsKIAkgICAgLy8gc3BlY2lhbCBjYXNlOiBATm9uTnVsbCBmb3IgYSBwYXJhbWV0ZXIgdGhhdCBp
cyBpbmZlcnJlZCB0byAnbnVsbCcgaXMgZW5jb2RlZCB0aGUgb2xkIHdheQogCSAgICAvLyBiZWNh
dXNlIHdlIGNhbm5vdCAoYW5kIGRvbid0IHdhbnQgdG8pIGFkZCB0eXBlIGFubm90YXRpb25zIHRv
IE51bGxUeXBlQmluZGluZy4KIAkgICAgaW50IGxlbiA9IHRoaXMucGFyYW1ldGVycy5sZW5ndGg7
CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRNZXRob2RCaW5kaW5nLmph
dmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvbG9va3VwL1BhcmFtZXRlcml6ZWRNZXRob2RCaW5kaW5nLmphdmEKaW5kZXgg
ZmU3MjJlNi4uOWIzZjY4ZSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGls
ZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9QYXJhbWV0ZXJpemVk
TWV0aG9kQmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvUGFyYW1ldGVyaXplZE1ldGhv
ZEJpbmRpbmcuamF2YQpAQCAtMTQsNiArMTQsNyBAQAogICoJCQkJCQkJCUJ1ZyA0MTUwNDMgLSBb
MS44XVtudWxsXSBGb2xsb3ctdXAgcmUgbnVsbCB0eXBlIGFubm90YXRpb25zIGFmdGVyIGJ1ZyAz
OTIwOTkKICAqCQkJCQkJCQlCdWcgNDE3Mjk1IC0gWzEuOFtbbnVsbF0gTWFzc2FnZSB0eXBlIGFu
bm90YXRlZCBudWxsIGFuYWx5c2lzIHRvIGdlbCB3ZWxsIHdpdGggZGVlcCBlbmNvZGVkIHR5cGUg
YmluZGluZ3MuCiAgKgkJCQkJCQkJQnVnIDQyNTE1MiAtIFsxLjhdIFtjb21waWxlcl0gTGFtYmRh
IEV4cHJlc3Npb24gbm90IHJlc29sdmVkIGJ1dCBmbG93IGFuYWx5emVkIGxlYWRpbmcgdG8gTlBF
LgorICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0ZSBuZXcgRGVmYXVs
dExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5sb29r
dXA7CiAKQEAgLTQ3LDYgKzQ4LDcgQEAKIAkJICovCiAJCXRoaXMudGFnQml0cyA9IG9yaWdpbmFs
TWV0aG9kLnRhZ0JpdHMgJiB+VGFnQml0cy5IYXNNaXNzaW5nVHlwZTsKIAkJdGhpcy5wYXJhbWV0
ZXJOb25OdWxsbmVzcyA9IG9yaWdpbmFsTWV0aG9kLnBhcmFtZXRlck5vbk51bGxuZXNzOworCQl0
aGlzLmRlZmF1bHROdWxsbmVzcyA9IG9yaWdpbmFsTWV0aG9kLmRlZmF1bHROdWxsbmVzczsKIAog
CQlmaW5hbCBUeXBlVmFyaWFibGVCaW5kaW5nW10gb3JpZ2luYWxWYXJpYWJsZXMgPSBvcmlnaW5h
bE1ldGhvZC50eXBlVmFyaWFibGVzOwogCQlTdWJzdGl0dXRpb24gc3Vic3RpdHV0aW9uID0gbnVs
bDsKQEAgLTE4Miw2ICsxODQsNyBAQAogCQkgKi8KIAkJdGhpcy50YWdCaXRzID0gb3JpZ2luYWxN
ZXRob2QudGFnQml0cyAmIH5UYWdCaXRzLkhhc01pc3NpbmdUeXBlOwogCQl0aGlzLnBhcmFtZXRl
ck5vbk51bGxuZXNzID0gb3JpZ2luYWxNZXRob2QucGFyYW1ldGVyTm9uTnVsbG5lc3M7CisJCXRo
aXMuZGVmYXVsdE51bGxuZXNzID0gb3JpZ2luYWxNZXRob2QuZGVmYXVsdE51bGxuZXNzOwogCiAJ
CWZpbmFsIFR5cGVWYXJpYWJsZUJpbmRpbmdbXSBvcmlnaW5hbFZhcmlhYmxlcyA9IG9yaWdpbmFs
TWV0aG9kLnR5cGVWYXJpYWJsZXM7CiAJCVN1YnN0aXR1dGlvbiBzdWJzdGl0dXRpb24gPSBudWxs
OwpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9SZWZlcmVuY2VCaW5kaW5nLmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvbG9va3VwL1JlZmVyZW5jZUJpbmRpbmcuamF2YQppbmRleCBmZTVjMmI0Li4zYTYxZWY3IDEw
MDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1JlZmVyZW5jZUJpbmRpbmcuamF2YQorKysgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvbG9va3VwL1JlZmVyZW5jZUJpbmRpbmcuamF2YQpAQCAtMjksNiArMjksNyBAQAogICoJCQkJ
CQkJCUJ1ZyA0MjgwMTkgLSBbMS44XVtjb21waWxlcl0gVHlwZSBpbmZlcmVuY2UgZmFpbHVyZSB3
aXRoIG5lc3RlZCBnZW5lcmljIGludm9jYXRpb24uCiAgKgkJCQkJCQkJQnVnIDQyNzE5OSAtIFsx
LjhdW3Jlc291cmNlXSBhdm9pZCByZXNvdXJjZSBsZWFrIHdhcm5pbmdzIG9uIFN0cmVhbXMgdGhh
dCBoYXZlIG5vIHJlc291cmNlCiAgKgkJCQkJCQkJQnVnIDQxODc0MyAtIFsxLjhdW251bGxdIGNv
bnRyYWRpY3RvcnkgYW5ub3RhdGlvbnMgb24gaW52b2NhdGlvbiBvZiBnZW5lcmljIG1ldGhvZCBu
b3QgcmVwb3J0ZWQKKyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUg
bmV3IERlZmF1bHRMb2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAg
ICAgSmVzcGVyIFMgTW9sbGVyIC0gQ29udHJpYnV0aW9ucyBmb3IKICAqCQkJCQkJCQlidWcgMzgy
NzAxIC0gWzEuOF1bY29tcGlsZXJdIEltcGxlbWVudCBzZW1hbnRpYyBhbmFseXNpcyBvZiBMYW1i
ZGEgZXhwcmVzc2lvbnMgJiBSZWZlcmVuY2UgZXhwcmVzc2lvbgogICoJCQkJCQkJCWJ1ZyA0MTIx
NTMgLSBbMS44XVtjb21waWxlcl0gQ2hlY2sgdmFsaWRpdHkgb2YgYW5ub3RhdGlvbnMgd2hpY2gg
bWF5IGJlIHJlcGVhdGFibGUKQEAgLTEwOTAsMjAgKzEwOTEsMzUgQEAKIH0KIAogLyoqCi0gKiBB
bnN3ZXIgd2hldGhlciBhIEBOb25OdWxsQnlEZWZhdWx0IGlzIGFwcGxpY2FibGUgYXQgdGhlIGdp
dmVuIG1ldGhvZCBiaW5kaW5nLgorICogQW5zd2VyIHdoZXRoZXIgYSBATm9uTnVsbEJ5RGVmYXVs
dCBpcyBhcHBsaWNhYmxlIGF0IHRoZSByZWZlcmVuY2UgYmluZGluZywKKyAqIGZvciAxLjggY2hl
Y2sgaWYgdGhlIGRlZmF1bHQgaXMgYXBwbGljYWJsZSB0byB0aGUgZ2l2ZW4ga2luZCBvZiBsb2Nh
dGlvbi4KICAqLwotYm9vbGVhbiBoYXNOb25OdWxsRGVmYXVsdCgpIHsKKy8vIHByZTogbnVsbCBh
bm5vdGF0aW9uIGFuYWx5c2lzIGlzIGVuYWJsZWQKK2Jvb2xlYW4gaGFzTm9uTnVsbERlZmF1bHRG
b3IoaW50IGxvY2F0aW9uLCBib29sZWFuIHVzZVR5cGVBbm5vdGF0aW9ucykgewogCS8vIE5vdGUs
IFNUQiBvdmVycmlkZXMgZm9yIGNvcnJlY3RseSBoYW5kbGluZyBsb2NhbCB0eXBlcwogCVJlZmVy
ZW5jZUJpbmRpbmcgY3VycmVudFR5cGUgPSB0aGlzOwogCXdoaWxlIChjdXJyZW50VHlwZSAhPSBu
dWxsKSB7Ci0JCWlmICgoY3VycmVudFR5cGUudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5v
bk51bGxCeURlZmF1bHQpICE9IDApCi0JCQlyZXR1cm4gdHJ1ZTsKLQkJaWYgKChjdXJyZW50VHlw
ZS50YWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0KSAh
PSAwKQotCQkJcmV0dXJuIGZhbHNlOworCQlpZiAodXNlVHlwZUFubm90YXRpb25zKSB7CisJCQlp
bnQgbnVsbERlZmF1bHQgPSAoKFJlZmVyZW5jZUJpbmRpbmcpY3VycmVudFR5cGUub3JpZ2luYWwo
KSkuZ2V0TnVsbERlZmF1bHQoKTsKKwkJCWlmIChudWxsRGVmYXVsdCAhPSAwKQorCQkJCXJldHVy
biAobnVsbERlZmF1bHQgJiBsb2NhdGlvbikgIT0gMDsKKwkJfSBlbHNlIHsKKwkJCWlmICgoY3Vy
cmVudFR5cGUudGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQpICE9
IDApCisJCQkJcmV0dXJuIHRydWU7CisJCQlpZiAoKGN1cnJlbnRUeXBlLnRhZ0JpdHMgJiBUYWdC
aXRzLkFubm90YXRpb25OdWxsVW5zcGVjaWZpZWRCeURlZmF1bHQpICE9IDApCisJCQkJcmV0dXJu
IGZhbHNlOworCQl9CiAJCWN1cnJlbnRUeXBlID0gY3VycmVudFR5cGUuZW5jbG9zaW5nVHlwZSgp
OwogCX0KIAkvLyBwYWNrYWdlCi0JcmV0dXJuIHRoaXMuZ2V0UGFja2FnZSgpLmRlZmF1bHROdWxs
bmVzcyA9PSBOT05OVUxMX0JZX0RFRkFVTFQ7CisJaWYgKHVzZVR5cGVBbm5vdGF0aW9ucykKKwkJ
cmV0dXJuICh0aGlzLmdldFBhY2thZ2UoKS5kZWZhdWx0TnVsbG5lc3MgJiBsb2NhdGlvbikgIT0g
MDsKKwllbHNlCisJCXJldHVybiB0aGlzLmdldFBhY2thZ2UoKS5kZWZhdWx0TnVsbG5lc3MgPT0g
Tk9OTlVMTF9CWV9ERUZBVUxUOworfQorCitpbnQgZ2V0TnVsbERlZmF1bHQoKSB7CisJcmV0dXJu
IDA7CiB9CiAKIHB1YmxpYyBmaW5hbCBib29sZWFuIGhhc1Jlc3RyaWN0ZWRBY2Nlc3MoKSB7CmRp
ZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQv
aW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1Njb3BlLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1Njb3Bl
LmphdmEKaW5kZXggY2UxYzdjYi4uMWU1MTllMyAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0
LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xvb2t1cC9T
Y29wZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvU2NvcGUuamF2YQpAQCAtNDEsNiArNDEsNyBA
QAogICoJCQkJCQkJCUJ1ZyA0MjQ3MjggLSBbMS44XVtudWxsXSBVbmV4cGVjdGVkIGVycm9yOiBU
aGUgbnVsbG5lc3MgYW5ub3RhdGlvbiAnWFhYWCcgaXMgbm90IGFwcGxpY2FibGUgYXQgdGhpcyBs
b2NhdGlvbiAKICAqCQkJCQkJCQlCdWcgNDI4ODExIC0gWzEuOF1bY29tcGlsZXJdIFR5cGUgd2l0
bmVzcyB1bm5lY2Vzc2FyaWx5IHJlcXVpcmVkCiAgKgkJCQkJCQkJQnVnIDQyOTQyNCAtIFsxLjhd
W2luZmVyZW5jZV0gUHJvYmxlbSBpbmZlcnJpbmcgdHlwZSBvZiBtZXRob2QncyBwYXJhbWV0ZXIK
KyAqCQkJCQkJCQlCdWcgNDI5OTU4IC0gWzEuOF1bbnVsbF0gZXZhbHVhdGUgbmV3IERlZmF1bHRM
b2NhdGlvbiBhdHRyaWJ1dGUgb2YgQE5vbk51bGxCeURlZmF1bHQKICAqICAgICBKZXNwZXIgUyBN
b2xsZXIgLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJCUJ1ZyAzNzg2NzQgLSAiVGhlIG1l
dGhvZCBjYW4gYmUgZGVjbGFyZWQgYXMgc3RhdGljIiBpcyB3cm9uZwogICogIAkJCQkJCQlCdWcg
NDA1MDY2IC0gWzEuOF1bY29tcGlsZXJdW2NvZGVnZW5dIEltcGxlbWVudCBjb2RlIGdlbmVyYXRp
b24gaW5mcmFzdHJ1Y3R1cmUgZm9yIEpTUjMzNQpAQCAtOTQzLDggKzk0NCw4IEBACiAJCQkJY29u
dGludWUgbmV4dFZhcmlhYmxlOwogCQkJYm9vbGVhbiBpc0ZpcnN0Qm91bmRUeXBlVmFyaWFibGUg
PSBmYWxzZTsKIAkJCVR5cGVCaW5kaW5nIHN1cGVyVHlwZSA9IHRoaXMua2luZCA9PSBNRVRIT0Rf
U0NPUEUKLQkJCQk/IHR5cGVSZWYucmVzb2x2ZVR5cGUoKEJsb2NrU2NvcGUpdGhpcywgZmFsc2Uv
Km5vIGJvdW5kIGNoZWNrKi8pCi0JCQkJOiB0eXBlUmVmLnJlc29sdmVUeXBlKChDbGFzc1Njb3Bl
KXRoaXMpOworCQkJCT8gdHlwZVJlZi5yZXNvbHZlVHlwZSgoQmxvY2tTY29wZSl0aGlzLCBmYWxz
ZS8qbm8gYm91bmQgY2hlY2sqLywgQmluZGluZy5EZWZhdWx0TG9jYXRpb25UeXBlQm91bmQpCisJ
CQkJOiB0eXBlUmVmLnJlc29sdmVUeXBlKChDbGFzc1Njb3BlKXRoaXMsIEJpbmRpbmcuRGVmYXVs
dExvY2F0aW9uVHlwZUJvdW5kKTsKIAkJCWlmIChzdXBlclR5cGUgPT0gbnVsbCkgewogCQkJCXR5
cGVWYXJpYWJsZS50YWdCaXRzIHw9IFRhZ0JpdHMuSGllcmFyY2h5SGFzUHJvYmxlbXM7CiAJCQl9
IGVsc2UgewpAQCAtNTA2Niw2ICs1MDY3LDEwIEBACiAJCX0KIAkJcmV0dXJuIHRydWU7CiAJfQor
CQorCS8qKiBBbnN3ZXIgYSBkZWZhdWx0TnVsbG5lc3MgZGVmaW5lZCBmb3IgdGhlIGNsb3Nlc3Qg
ZW5jbG9zaW5nIHNjb3BlLCB1c2luZyBiaXRzIGZyb20gQmluZGluZy5OdWxsbmVzc0RlZmF1bHRN
QVNLLiAqLworCXB1YmxpYyBhYnN0cmFjdCBib29sZWFuIGhhc0RlZmF1bHROdWxsbmVzc0Zvcihp
bnQgbG9jYXRpb24pOworCiAJcHVibGljIHN0YXRpYyBCbG9ja1Njb3BlIHR5cGVBbm5vdGF0aW9u
c1Jlc29sdXRpb25TY29wZShTY29wZSBzY29wZSkgewogCQlCbG9ja1Njb3BlIHJlc29sdXRpb25T
Y29wZSA9IG51bGw7CiAJCXN3aXRjaChzY29wZS5raW5kKSB7CmRpZmYgLS1naXQgYS9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
bG9va3VwL1NvdXJjZVR5cGVCaW5kaW5nLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1NvdXJjZVR5cGVC
aW5kaW5nLmphdmEKaW5kZXggZDI3OWQzYy4uN2JiOTdkNCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2xv
b2t1cC9Tb3VyY2VUeXBlQmluZGluZy5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2Nv
bXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29rdXAvU291cmNlVHlw
ZUJpbmRpbmcuamF2YQpAQCAtMzAsNiArMzAsNyBAQAogICoJCQkJCQkJCUJ1ZyA0MTcyOTUgLSBb
MS44W1tudWxsXSBNYXNzYWdlIHR5cGUgYW5ub3RhdGVkIG51bGwgYW5hbHlzaXMgdG8gZ2VsIHdl
bGwgd2l0aCBkZWVwIGVuY29kZWQgdHlwZSBiaW5kaW5ncy4KICAqCQkJCQkJCQlCdWcgNDI2MDQ4
IC0gWzEuOF0gTlBFIGluIFR5cGVWYXJpYWJsZUJpbmRpbmcuaW50ZXJuYWxCb3VuZENoZWNrIHdo
ZW4gcGFyZW50aGVzZXMgYXJlIG5vdCBiYWxhbmNlZAogICoJCQkJCQkJCUJ1ZyAzOTIyMzggLSBb
MS44XVtjb21waWxlcl1bbnVsbF0gRGV0ZWN0IHNlbWFudGljYWxseSBpbnZhbGlkIG51bGwgdHlw
ZSBhbm5vdGF0aW9ucworICoJCQkJCQkJCUJ1ZyA0Mjk5NTggLSBbMS44XVtudWxsXSBldmFsdWF0
ZSBuZXcgRGVmYXVsdExvY2F0aW9uIGF0dHJpYnV0ZSBvZiBATm9uTnVsbEJ5RGVmYXVsdAogICog
ICAgICBKZXNwZXIgUyBNb2xsZXIgPGplc3BlckBzZWxza2FiZXQub3JnPiAtICBDb250cmlidXRp
b25zIGZvcgogICoJCQkJCQkJCUJ1ZyA0MTIxNTMgLSBbMS44XVtjb21waWxlcl0gQ2hlY2sgdmFs
aWRpdHkgb2YgYW5ub3RhdGlvbnMgd2hpY2ggbWF5IGJlIHJlcGVhdGFibGUKICAqICAgICAgVGls
bCBCcnljaGN5IC0gQ29udHJpYnV0aW9ucyBmb3IKQEAgLTg3LDcgKzg4LDcgQEAKIAogCXByaXZh
dGUgU2ltcGxlTG9va3VwVGFibGUgc3RvcmVkQW5ub3RhdGlvbnMgPSBudWxsOyAvLyBrZXlzIGFy
ZSB0aGlzIFJlZmVyZW5jZUJpbmRpbmcgJiBpdHMgZmllbGRzIGFuZCBtZXRob2RzLCB2YWx1ZSBp
cyBhbiBBbm5vdGF0aW9uSG9sZGVyCiAKLQlwcml2YXRlIGludCBkZWZhdWx0TnVsbG5lc3M7CisJ
cHVibGljIGludCBkZWZhdWx0TnVsbG5lc3M7CiAJcHJpdmF0ZSBpbnQgbnVsbG5lc3NEZWZhdWx0
SW5pdGlhbGl6ZWQgPSAwOyAvLyAwOiBub3RoaW5nOyAxOiB0eXBlOyAyOiBwYWNrYWdlCiAJcHJp
dmF0ZSBpbnQgbGFtYmRhT3JkaW5hbCA9IDA7CiAJcHJpdmF0ZSBSZWZlcmVuY2VCaW5kaW5nIGNv
bnRhaW5lckFubm90YXRpb25UeXBlID0gbnVsbDsKQEAgLTEzMTgsNyArMTMxOSw3IEBACiAJdGhp
cy5zY29wZS5idWlsZE1ldGhvZHMoKTsKIH0KIAotcHJpdmF0ZSBpbnQgZ2V0TnVsbERlZmF1bHQo
KSB7CitpbnQgZ2V0TnVsbERlZmF1bHQoKSB7CiAJCiAJaWYgKCFpc1Byb3RvdHlwZSgpKSB7CiAJ
CXJldHVybiB0aGlzLnByb3RvdHlwZS5nZXROdWxsRGVmYXVsdCgpOwpAQCAtMTc0MCw3ICsxNzQx
LDcgQEAKIAkJCQkJLy8gZW51bSBjb25zdGFudHMgbmVpdGhlciBoYXZlIGEgdHlwZSBkZWNsYXJh
dGlvbiBub3IgY2FuIHRoZXkgYmUgbnVsbAogCQkJCQlmaWVsZC50YWdCaXRzIHw9IFRhZ0JpdHMu
QW5ub3RhdGlvbk5vbk51bGw7CiAJCQkJfSBlbHNlIHsKLQkJCQkJaWYgKGhhc05vbk51bGxEZWZh
dWx0KCkpIHsKKwkJCQkJaWYgKGhhc05vbk51bGxEZWZhdWx0Rm9yKERlZmF1bHRMb2NhdGlvbkZp
ZWxkLCBzb3VyY2VMZXZlbCA+PSBDbGFzc0ZpbGVDb25zdGFudHMuSkRLMV84KSkgewogCQkJCQkJ
ZmllbGQuZmlsbEluRGVmYXVsdE5vbk51bGxuZXNzKGZpZWxkRGVjbCwgaW5pdGlhbGl6YXRpb25T
Y29wZSk7CiAJCQkJCX0KIAkJCQkJLy8gdmFsaWRhdGUgbnVsbCBhbm5vdGF0aW9uOgpAQCAtMjAy
OSwzNSArMjAzMCw3OCBAQAogCQl9CiAJfQogCXRoaXMubnVsbG5lc3NEZWZhdWx0SW5pdGlhbGl6
ZWQgPSAxOwotCS8vIHRyYW5zZmVyIG51bGxuZXNzIGluZm8gZnJvbSB0YWdCaXRzIHRvIHRoaXMu
bnVsbG5lc3NEZWZhdWx0QW5ub3RhdGlvbgotCWludCBuZXdEZWZhdWx0TnVsbG5lc3MgPSBOT19O
VUxMX0RFRkFVTFQ7Ci0JaWYgKChhbm5vdGF0aW9uVGFnQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlv
bk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCkgIT0gMCkKLQkJbmV3RGVmYXVsdE51bGxuZXNzID0g
TlVMTF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUOwotCWVsc2UgaWYgKChhbm5vdGF0aW9uVGFnQml0
cyAmIFRhZ0JpdHMuQW5ub3RhdGlvbk5vbk51bGxCeURlZmF1bHQpICE9IDApCi0JCW5ld0RlZmF1
bHROdWxsbmVzcyA9IE5PTk5VTExfQllfREVGQVVMVDsKLQlpZiAobmV3RGVmYXVsdE51bGxuZXNz
ICE9IE5PX05VTExfREVGQVVMVCkgewotCQlpZiAoaXNQYWNrYWdlSW5mbykgewotCQkJcGtnLmRl
ZmF1bHROdWxsbmVzcyA9IG5ld0RlZmF1bHROdWxsbmVzczsKLQkJfSBlbHNlIHsKLQkJCXRoaXMu
ZGVmYXVsdE51bGxuZXNzID0gbmV3RGVmYXVsdE51bGxuZXNzOwotCQkJVHlwZURlY2xhcmF0aW9u
IHR5cGVEZWNsID0gdGhpcy5zY29wZS5yZWZlcmVuY2VDb250ZXh0OwotCQkJbG9uZyBudWxsRGVm
YXVsdEJpdHMgPSBhbm5vdGF0aW9uVGFnQml0cyAmIChUYWdCaXRzLkFubm90YXRpb25OdWxsVW5z
cGVjaWZpZWRCeURlZmF1bHR8VGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdCk7Ci0J
CQljaGVja1JlZHVuZGFudE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UodHlwZURlY2wsIHR5cGVEZWNs
LmFubm90YXRpb25zLCBudWxsRGVmYXVsdEJpdHMpOworCWJvb2xlYW4gaXNKZGsxOCA9IHRoaXMu
c2NvcGUuY29tcGlsZXJPcHRpb25zKCkuc291cmNlTGV2ZWwgPj0gQ2xhc3NGaWxlQ29uc3RhbnRz
LkpESzFfODsKKwlpZiAoaXNKZGsxOCkgeworCQlpZiAodGhpcy5kZWZhdWx0TnVsbG5lc3MgIT0g
MCkgeworCQkJaWYgKGlzUGFja2FnZUluZm8pIHsKKwkJCQlwa2cuZGVmYXVsdE51bGxuZXNzID0g
dGhpcy5kZWZhdWx0TnVsbG5lc3M7CisJCQl9IGVsc2UgeworCQkJCVR5cGVEZWNsYXJhdGlvbiB0
eXBlRGVjbCA9IHRoaXMuc2NvcGUucmVmZXJlbmNlQ29udGV4dDsKKwkJCQljaGVja1JlZHVuZGFu
dE51bGxuZXNzRGVmYXVsdFJlY3Vyc2UodHlwZURlY2wsIHR5cGVEZWNsLmFubm90YXRpb25zLCB0
aGlzLmRlZmF1bHROdWxsbmVzcywgaXNKZGsxOCk7CisJCQl9CisJCX0gZWxzZSBpZiAoaXNQYWNr
YWdlSW5mbyB8fCAoaXNJbkRlZmF1bHRQa2cgJiYgISh0aGlzIGluc3RhbmNlb2YgTmVzdGVkVHlw
ZUJpbmRpbmcpKSkgeworCQkJdGhpcy5zY29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5taXNzaW5nTm9u
TnVsbEJ5RGVmYXVsdEFubm90YXRpb24odGhpcy5zY29wZS5yZWZlcmVuY2VDb250ZXh0KTsKKwkJ
CWlmICghaXNJbkRlZmF1bHRQa2cpCisJCQkJcGtnLmRlZmF1bHROdWxsbmVzcyA9IE5VTExfVU5T
UEVDSUZJRURfQllfREVGQVVMVDsKIAkJfQotCX0gZWxzZSBpZiAoaXNQYWNrYWdlSW5mbyB8fCAo
aXNJbkRlZmF1bHRQa2cgJiYgISh0aGlzIGluc3RhbmNlb2YgTmVzdGVkVHlwZUJpbmRpbmcpKSkg
ewotCQl0aGlzLnNjb3BlLnByb2JsZW1SZXBvcnRlcigpLm1pc3NpbmdOb25OdWxsQnlEZWZhdWx0
QW5ub3RhdGlvbih0aGlzLnNjb3BlLnJlZmVyZW5jZUNvbnRleHQpOwotCQlpZiAoIWlzSW5EZWZh
dWx0UGtnKQotCQkJcGtnLmRlZmF1bHROdWxsbmVzcyA9IE5VTExfVU5TUEVDSUZJRURfQllfREVG
QVVMVDsKKwl9IGVsc2UgeworCQkvLyB0cmFuc2ZlciBudWxsbmVzcyBpbmZvIGZyb20gdGFnQml0
cyB0byB0aGlzLm51bGxuZXNzRGVmYXVsdEFubm90YXRpb24KKwkJaW50IG5ld0RlZmF1bHROdWxs
bmVzcyA9IE5PX05VTExfREVGQVVMVDsKKwkJaWYgKChhbm5vdGF0aW9uVGFnQml0cyAmIFRhZ0Jp
dHMuQW5ub3RhdGlvbk51bGxVbnNwZWNpZmllZEJ5RGVmYXVsdCkgIT0gMCkKKwkJCW5ld0RlZmF1
bHROdWxsbmVzcyA9IE5VTExfVU5TUEVDSUZJRURfQllfREVGQVVMVDsKKwkJZWxzZSBpZiAoKGFu
bm90YXRpb25UYWdCaXRzICYgVGFnQml0cy5Bbm5vdGF0aW9uTm9uTnVsbEJ5RGVmYXVsdCkgIT0g
MCkKKwkJCW5ld0RlZmF1bHROdWxsbmVzcyA9IE5PTk5VTExfQllfREVGQVVMVDsKKwkJaWYgKG5l
d0RlZmF1bHROdWxsbmVzcyAhPSBOT19OVUxMX0RFRkFVTFQpIHsKKwkJCWlmIChpc1BhY2thZ2VJ
bmZvKSB7CisJCQkJcGtnLmRlZmF1bHROdWxsbmVzcyA9IG5ld0RlZmF1bHROdWxsbmVzczsKKwkJ
CX0gZWxzZSB7CisJCQkJdGhpcy5kZWZhdWx0TnVsbG5lc3MgPSBuZXdEZWZhdWx0TnVsbG5lc3M7
CisJCQkJVHlwZURlY2xhcmF0aW9uIHR5cGVEZWNsID0gdGhpcy5zY29wZS5yZWZlcmVuY2VDb250
ZXh0OworCQkJCWxvbmcgbnVsbERlZmF1bHRCaXRzID0gYW5ub3RhdGlvblRhZ0JpdHMgJiAoVGFn
Qml0cy5Bbm5vdGF0aW9uTnVsbFVuc3BlY2lmaWVkQnlEZWZhdWx0fFRhZ0JpdHMuQW5ub3RhdGlv
bk5vbk51bGxCeURlZmF1bHQpOworCQkJCWNoZWNrUmVkdW5kYW50TnVsbG5lc3NEZWZhdWx0UmVj
dXJzZSh0eXBlRGVjbCwgdHlwZURlY2wuYW5ub3RhdGlvbnMsIG51bGxEZWZhdWx0Qml0cywgZmFs
c2UpOworCQkJfQorCQl9IGVsc2UgaWYgKGlzUGFja2FnZUluZm8gfHwgKGlzSW5EZWZhdWx0UGtn
ICYmICEodGhpcyBpbnN0YW5jZW9mIE5lc3RlZFR5cGVCaW5kaW5nKSkpIHsKKwkJCXRoaXMuc2Nv
cGUucHJvYmxlbVJlcG9ydGVyKCkubWlzc2luZ05vbk51bGxCeURlZmF1bHRBbm5vdGF0aW9uKHRo
aXMuc2NvcGUucmVmZXJlbmNlQ29udGV4dCk7CisJCQlpZiAoIWlzSW5EZWZhdWx0UGtnKQorCQkJ
CXBrZy5kZWZhdWx0TnVsbG5lc3MgPSBOVUxMX1VOU1BFQ0lGSUVEX0JZX0RFRkFVTFQ7CisJCX0K
Kwl9CisJbWF5YmVNYXJrVHlwZVBhcmFtZXRlcnNOb25OdWxsKCk7Cit9CisKK3ByaXZhdGUgdm9p
ZCBtYXliZU1hcmtUeXBlUGFyYW1ldGVyc05vbk51bGwoKSB7CisJLy8gd2hlbiBjcmVhdGluZyB0
eXBlIHZhcmlhYmxlcyB3ZSBkaWRuJ3QgeWV0IGhhdmUgdGhlIGRlZmF1bHROdWxsbmVzcywgZmls
bCBpdCBpbiBub3c6CisJaWYgKHRoaXMuc2NvcGUgPT0gbnVsbCB8fCAhdGhpcy5zY29wZS5oYXNE
ZWZhdWx0TnVsbG5lc3NGb3IoRGVmYXVsdExvY2F0aW9uVHlwZVBhcmFtZXRlcikpCisJCXJldHVy
bjsKKwlpZiAodGhpcy50eXBlVmFyaWFibGVzICE9IG51bGwgJiYgdGhpcy50eXBlVmFyaWFibGVz
Lmxlbmd0aCA+IDApIHsKKwkJQW5ub3RhdGlvbkJpbmRpbmdbXSBhbm5vdHMgPSBuZXcgQW5ub3Rh
dGlvbkJpbmRpbmdbXXsgdGhpcy5lbnZpcm9ubWVudC5nZXROb25OdWxsQW5ub3RhdGlvbigpIH07
CisJCWZvciAoaW50IGkgPSAwOyBpIDwgdGhpcy50eXBlVmFyaWFibGVzLmxlbmd0aDsgaSsrKSB7
CisJCQlUeXBlVmFyaWFibGVCaW5kaW5nIHR2YiA9IHRoaXMudHlwZVZhcmlhYmxlc1tpXTsKKwkJ
CWlmICgodHZiLnRhZ0JpdHMgJiBUYWdCaXRzLkFubm90YXRpb25OdWxsTUFTSykgPT0gMCkKKwkJ
CQl0aGlzLnR5cGVWYXJpYWJsZXNbaV0gPSAoVHlwZVZhcmlhYmxlQmluZGluZykgdGhpcy5lbnZp
cm9ubWVudC5jcmVhdGVBbm5vdGF0ZWRUeXBlKHR2YiwgYW5ub3RzKTsKKwkJfQogCX0KIH0KIAot
cHJvdGVjdGVkIHZvaWQgY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRSZWN1cnNlKEFTVE5v
ZGUgbG9jYXRpb24sIEFubm90YXRpb25bXSBhbm5vdGF0aW9ucywgbG9uZyBhbm5vdGF0aW9uVGFn
Qml0cykgeworLyoqCisgKiBSZWN1cnNpdmVseSBjaGVjayBpZiB0aGUgZ2l2ZW4gYW5ub3RhdGlv
bnMgYXJlIHJlZHVuZGFudCB3aXRoIGVxdWFsIGFubm90YXRpb25zIGF0IGFuIGVuY2xvc2luZyBs
ZXZlbC4KKyAqIEBwYXJhbSBsb2NhdGlvbiBmYWxsYmFjayBsb2NhdGlvbiB0byByZXBvcnQgdGhl
IHdhcm5pbmcgYWdhaW5zdCAoaWYgd2UgY2FuJ3QgYmxhbWUgYSBzcGVjaWZpYyBhbm5vdGF0aW9u
KQorICogQHBhcmFtIGFubm90YXRpb25zIHNlYXJjaCB0aGVzZSBmb3IgdGhlIGFubm90YXRpb24g
dGhhdCBzaG91bGQgYmUgYmxhbWVkIGluIHdhcm5pbmcgbWVzc2FnZXMKKyAqIEBwYXJhbSBudWxs
Qml0cyBpbiAxLjctIHRpbWVzIHRoZXNlIGFyZSB0aGUgYW5ub3RhdGlvblRhZ0JpdHMsIGluIDEu
OCsgdGhlIGJpdHZlY3RvciBmcm9tIHtAbGluayBCaW5kaW5nI051bGxuZXNzRGVmYXVsdE1BU0t9
CisgKiBAcGFyYW0gaXNKZGsxOCB0b2dnbGVzIHRoZSBpbnRlcnByZXRhdGlvbiBvZiAnbnVsbEJp
dHMnCisgKiAKKyAqIEBwcmUgbnVsbCBhbm5vdGF0aW9uIGFuYWx5c2lzIGlzIGVuYWJsZWQKKyAq
LworcHJvdGVjdGVkIHZvaWQgY2hlY2tSZWR1bmRhbnROdWxsbmVzc0RlZmF1bHRSZWN1cnNlKEFT
VE5vZGUgbG9jYXRpb24sIEFubm90YXRpb25bXSBhbm5vdGF0aW9ucywgbG9uZyBudWxsQml0cywg
Ym9vbGVhbiBpc0pkazE4KSB7CiAJCiAJaWYgKCFpc1Byb3RvdHlwZSgpKSB0aHJvdyBuZXcgSWxs
ZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAJCiAJaWYgKHRoaXMuZlBhY2thZ2UuZGVmYXVsdE51bGxu
ZXNzICE9IE5PX05VTExfREVGQVVMVCkgewotCQlpZiAoKHRoaXMuZlBhY2thZ2UuZGVmYXVsdE51
bGxuZXNzID09IE5PTk5VTExfQllfREVGQVVMVAotCQkJCSYmICgoYW5ub3RhdGlvblRhZ0JpdHMg
JiBUYWdCaXRzLkFubm90YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKSkpIHsKKwkJYm9vbGVh
biBpc1JlZHVuZGFudCA9IGlzSmRrMTgKKwkJCQk/IHRoaXMuZlBhY2thZ2UuZGVmYXVsdE51bGxu
ZXNzID09IG51bGxCaXRzCisJCQkJOiAodGhpcy5mUGFja2FnZS5kZWZhdWx0TnVsbG5lc3MgPT0g
Tk9OTlVMTF9CWV9ERUZBVUxUCisJCQkJCQkmJiAoKG51bGxCaXRzICYgVGFnQml0cy5Bbm5vdGF0
aW9uTm9uTnVsbEJ5RGVmYXVsdCkgIT0gMCkpOworCQlpZiAoaXNSZWR1bmRhbnQpIHsKIAkJCXRo
aXMuc2NvcGUucHJvYmxlbVJlcG9ydGVyKCkubnVsbERlZmF1bHRBbm5vdGF0aW9uSXNSZWR1bmRh
bnQobG9jYXRpb24sIGFubm90YXRpb25zLCB0aGlzLmZQYWNrYWdlKTsKIAkJfQogCQlyZXR1cm47
CkBAIC0yMDY1LDEzICsyMTA5LDE2IEBACiB9CiAKIC8vIHJldHVybjogc2hvdWxkIGNhbGxlciBj
b250aW51ZSBzZWFyY2hpbmc/Ci1wcm90ZWN0ZWQgYm9vbGVhbiBjaGVja1JlZHVuZGFudE51bGxu
ZXNzRGVmYXVsdE9uZShBU1ROb2RlIGxvY2F0aW9uLCBBbm5vdGF0aW9uW10gYW5ub3RhdGlvbnMs
IGxvbmcgYW5ub3RhdGlvblRhZ0JpdHMpIHsKK3Byb3RlY3RlZCBib29sZWFuIGNoZWNrUmVkdW5k
YW50TnVsbG5lc3NEZWZhdWx0T25lKEFTVE5vZGUgbG9jYXRpb24sIEFubm90YXRpb25bXSBhbm5v
dGF0aW9ucywgbG9uZyBudWxsQml0cywgYm9vbGVhbiBpc0pkazE4KSB7CiAJCiAJaWYgKCFpc1By
b3RvdHlwZSgpKSB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAJCiAJaW50IHRo
aXNEZWZhdWx0ID0gZ2V0TnVsbERlZmF1bHQoKTsKLQlpZiAodGhpc0RlZmF1bHQgPT0gTk9OTlVM
TF9CWV9ERUZBVUxUKSB7Ci0JCWlmICgoYW5ub3RhdGlvblRhZ0JpdHMgJiBUYWdCaXRzLkFubm90
YXRpb25Ob25OdWxsQnlEZWZhdWx0KSAhPSAwKSB7CisJaWYgKHRoaXNEZWZhdWx0ICE9IE5PX05V
TExfREVGQVVMVCkgeworCQlib29sZWFuIGlzUmVkdW5kYW50ID0gaXNKZGsxOAorCQkJCT8gdGhp
c0RlZmF1bHQgPT0gbnVsbEJpdHMKKwkJCQk6IChudWxsQml0cyAmIFRhZ0JpdHMuQW5ub3RhdGlv
bk5vbk51bGxCeURlZmF1bHQpICE9IDA7CisJCWlmIChpc1JlZHVuZGFudCkgewogCQkJdGhpcy5z
Y29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5udWxsRGVmYXVsdEFubm90YXRpb25Jc1JlZHVuZGFudChs
b2NhdGlvbiwgYW5ub3RhdGlvbnMsIHRoaXMpOwogCQl9CiAJCXJldHVybiBmYWxzZTsgLy8gZGlm
ZmVyZW50IGRlZmF1bHQgbWVhbnMgaW5uZXIgZGVmYXVsdCBpcyBub3QgcmVkdW5kYW50IC0+IHdl
J3JlIGRvbmUKQEAgLTIwNzksMTAgKzIxMjYsMTggQEAKIAlyZXR1cm4gdHJ1ZTsKIH0KIAotYm9v
bGVhbiBoYXNOb25OdWxsRGVmYXVsdCgpIHsKK2Jvb2xlYW4gaGFzTm9uTnVsbERlZmF1bHRGb3Io
aW50IGxvY2F0aW9uLCBib29sZWFuIHVzZVR5cGVBbm5vdGF0aW9ucykgewogCQogCWlmICghaXNQ
cm90b3R5cGUoKSkgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogCQorCS8vIDEu
ODoKKwlpZiAodXNlVHlwZUFubm90YXRpb25zKSB7CisJCWlmICh0aGlzLnNjb3BlID09IG51bGwp
IHsKKwkJCXJldHVybiAodGhpcy5kZWZhdWx0TnVsbG5lc3MgJiBsb2NhdGlvbikgIT0gMDsKKwkJ
fQorCQlyZXR1cm4gdGhpcy5zY29wZS5oYXNEZWZhdWx0TnVsbG5lc3NGb3IobG9jYXRpb24pOwor
CX0KKwogCS8vIGZpbmQgdGhlIGFwcGxpY2FibGUgZGVmYXVsdCBpbnNpZGUtPm91dDoKIAogCVNv
dXJjZVR5cGVCaW5kaW5nIGN1cnJlbnRUeXBlID0gbnVsbDsKQEAgLTIxMDMsNiArMjE1OCw5IEBA
CiAJCQkJY3VycmVudFR5cGUgPSAoKENsYXNzU2NvcGUpY3VycmVudFNjb3BlKS5yZWZlcmVuY2VD
b250ZXh0LmJpbmRpbmc7CiAJCQkJaWYgKGN1cnJlbnRUeXBlICE9IG51bGwpIHsKIAkJCQkJaW50
IGZvdW5kRGVmYXVsdE51bGxuZXNzID0gY3VycmVudFR5cGUuZ2V0TnVsbERlZmF1bHQoKTsKKwkJ
CQkJaWYgKChmb3VuZERlZmF1bHROdWxsbmVzcyAmIE51bGxuZXNzRGVmYXVsdE1BU0spID4gTlVM
TF9VTlNQRUNJRklFRF9CWV9ERUZBVUxUKSB7CisJCQkJCQlyZXR1cm4gdHJ1ZTsKKwkJCQkJfQog
CQkJCQlpZiAoZm91bmREZWZhdWx0TnVsbG5lc3MgIT0gTk9fTlVMTF9ERUZBVUxUKSB7CiAJCQkJ
CQlyZXR1cm4gZm91bmREZWZhdWx0TnVsbG5lc3MgPT0gTk9OTlVMTF9CWV9ERUZBVUxUOwogCQkJ
CQl9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBz
ZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvbG9va3VwL1R5cGVDb25zdGFudHMuamF2YSBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxl
ci9sb29rdXAvVHlwZUNvbnN0YW50cy5qYXZhCmluZGV4IDVhMjM4ZTEuLjgxYmE4NDcgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9sb29rdXAvVHlwZUNvbnN0YW50cy5qYXZhCisrKyBiL29yZy5lY2xpcHNl
LmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9sb29r
dXAvVHlwZUNvbnN0YW50cy5qYXZhCkBAIC0xNiw2ICsxNiw3IEBACiAgKgkJCQkJCQkJQnVnIDQw
NTU2OSAtIFJlc291cmNlIGxlYWsgY2hlY2sgZmFsc2UgcG9zaXRpdmUgd2hlbiB1c2luZyBEYlV0
aWxzLmNsb3NlUXVpZXRseQogICoJCQkJCQkJCUJ1ZyA0MjcxOTkgLSBbMS44XVtyZXNvdXJjZV0g
YXZvaWQgcmVzb3VyY2UgbGVhayB3YXJuaW5ncyBvbiBTdHJlYW1zIHRoYXQgaGF2ZSBubyByZXNv
dXJjZQogICoJCQkJCQkJCUJ1ZyA0MjUxODMgLSBbMS44XVtpbmZlcmVuY2VdIG1ha2UgQ2FwdHVy
ZUJpbmRpbmcxOCBzYWZlCisgKgkJCQkJCQkJQnVnIDQyOTk1OCAtIFsxLjhdW251bGxdIGV2YWx1
YXRlIG5ldyBEZWZhdWx0TG9jYXRpb24gYXR0cmlidXRlIG9mIEBOb25OdWxsQnlEZWZhdWx0CiAg
KiAgICBKZXNwZXIgUyBNb2xsZXIgLSBDb250cmlidXRpb25zIGZvcgogICoJCQkJCQkJCUJ1ZyA0
MDUwNjYgLSBbMS44XVtjb21waWxlcl1bY29kZWdlbl0gSW1wbGVtZW50IGNvZGUgZ2VuZXJhdGlv
biBpbmZyYXN0cnVjdHVyZSBmb3IgSlNSMzM1CiAgKgkJCQkJCQkJQnVnIDQxMjE1MyAtIFsxLjhd
W2NvbXBpbGVyXSBDaGVjayB2YWxpZGl0eSBvZiBhbm5vdGF0aW9ucyB3aGljaCBtYXkgYmUgcmVw
ZWF0YWJsZQpAQCAtMzUxLDYgKzM1MiwxNiBAQAogCWNoYXJbXSBTWU5USEVUSUNfRU5VTV9DT05T
VEFOVF9JTklUSUFMSVpBVElPTl9NRVRIT0RfUFJFRklYID0gICIgZW51bSBjb25zdGFudCBpbml0
aWFsaXphdGlvbiQiLnRvQ2hhckFycmF5KCk7IC8vJE5PTi1OTFMtMSQKIAljaGFyW10gU1lOVEhF
VElDX1NUQVRJQ19GQUNUT1JZID0gICI8ZmFjdG9yeT4iLnRvQ2hhckFycmF5KCk7IC8vJE5PTi1O
TFMtMSQKIAorCS8vIGNvbnN0YW50cyBpbiBlbnVtIG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9u
LkRlZmF1bHRMb2NhdGlvbjoKKwljaGFyW10gREVGQVVMVF9MT0NBVElPTl9fUEFSQU1FVEVSID0g
IlBBUkFNRVRFUiIudG9DaGFyQXJyYXkoKTsgLy8kTk9OLU5MUy0xJAorCWNoYXJbXSBERUZBVUxU
X0xPQ0FUSU9OX19SRVRVUk5fVFlQRSA9ICJSRVRVUk5fVFlQRSIudG9DaGFyQXJyYXkoKTsgLy8k
Tk9OLU5MUy0xJAorCWNoYXJbXSBERUZBVUxUX0xPQ0FUSU9OX19GSUVMRCA9ICJGSUVMRCIudG9D
aGFyQXJyYXkoKTsgLy8kTk9OLU5MUy0xJAorCWNoYXJbXSBERUZBVUxUX0xPQ0FUSU9OX19UWVBF
X0FSR1VNRU5UID0gIlRZUEVfQVJHVU1FTlQiLnRvQ2hhckFycmF5KCk7IC8vJE5PTi1OTFMtMSQK
KwljaGFyW10gREVGQVVMVF9MT0NBVElPTl9fVFlQRV9QQVJBTUVURVIgPSAiVFlQRV9QQVJBTUVU
RVIiLnRvQ2hhckFycmF5KCk7IC8vJE5PTi1OTFMtMSQKKwljaGFyW10gREVGQVVMVF9MT0NBVElP
Tl9fVFlQRV9CT1VORCA9ICJUWVBFX0JPVU5EIi50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEk
CisJY2hhcltdIERFRkFVTFRfTE9DQVRJT05fX0FSUkFZX0NPTlRFTlRTID0gIkFSUkFZX0NPTlRF
TlRTIi50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCisKKwogCS8vIHN5bnRoZXRpYyBwYWNr
YWdlLWluZm8gbmFtZQogCXB1YmxpYyBzdGF0aWMgZmluYWwgY2hhcltdIFBBQ0tBR0VfSU5GT19O
QU1FID0gInBhY2thZ2UtaW5mbyIudG9DaGFyQXJyYXkoKTsgLy8kTk9OLU5MUy0xJAogfQpkaWZm
IC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vUHJvYmxlbVJlcG9ydGVyLmphdmEgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcHJv
YmxlbS9Qcm9ibGVtUmVwb3J0ZXIuamF2YQppbmRleCA1MDhiMzI5Li43YTNhZTllIDEwMDY0NAot
LS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvcHJvYmxlbS9Qcm9ibGVtUmVwb3J0ZXIuamF2YQorKysgYi9vcmcuZWNsaXBz
ZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcHJv
YmxlbS9Qcm9ibGVtUmVwb3J0ZXIuamF2YQpAQCAtOTQ0MCwxMCArOTQ0MCw2IEBACiAJdGhpcy5o
YW5kbGUocHJvYmxlbUlkLCBhcmdzLCBzaG9ydEFyZ3MsIHN0YXJ0LCBlbmQpOwogfQogCi1wdWJs
aWMgdm9pZCBub25OdWxsRGVmYXVsdERldGFpbE5vdEV2YWx1YXRlZChBU1ROb2RlIGxvY2F0aW9u
KSB7Ci0JdGhpcy5oYW5kbGUoSVByb2JsZW0uTm9uTnVsbERlZmF1bHREZXRhaWxJc05vdEV2YWx1
YXRlZCwgTm9Bcmd1bWVudCwgTm9Bcmd1bWVudCwgUHJvYmxlbVNldmVyaXRpZXMuV2FybmluZywg
bG9jYXRpb24uc291cmNlU3RhcnQsIGxvY2F0aW9uLnNvdXJjZUVuZCk7Ci19Ci0KIHB1YmxpYyB2
b2lkIGNvbnRyYWRpY3RvcnlOdWxsQW5ub3RhdGlvbnMoQW5ub3RhdGlvbiBhbm5vdGF0aW9uKSB7
CiAJY29udHJhZGljdG9yeU51bGxBbm5vdGF0aW9ucyhhbm5vdGF0aW9uLnNvdXJjZVN0YXJ0LCBh
bm5vdGF0aW9uLnNvdXJjZUVuZCk7CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcHJvYmxlbS9tZXNz
YWdlcy5wcm9wZXJ0aWVzIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlw
c2UvamR0L2ludGVybmFsL2NvbXBpbGVyL3Byb2JsZW0vbWVzc2FnZXMucHJvcGVydGllcwppbmRl
eCBmZGVjZmRmLi41YTI2ODI4IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21w
aWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvcHJvYmxlbS9tZXNzYWdlcy5w
cm9wZXJ0aWVzCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9wcm9ibGVtL21lc3NhZ2VzLnByb3BlcnRpZXMKQEAgLTgx
Niw3ICs4MTYsNyBAQAogOTY1ID0gVGhpcyBudWxsbmVzcyBhbm5vdGF0aW9uIGNvbmZsaWN0cyB3
aXRoIGEgJydAezB9JycgYW5ub3RhdGlvbiB3aGljaCBpcyBlZmZlY3RpdmUgb24gdGhlIHNhbWUg
dHlwZSBwYXJhbWV0ZXIgCiA5NjYgPSBDb250cmFkaWN0b3J5IG51bGwgYW5ub3RhdGlvbnM6IG1l
dGhvZCB3YXMgaW5mZXJyZWQgYXMgJyd7Mn0gezN9KHs0fSknJywgYnV0IG9ubHkgb25lIG9mICcn
QHswfScnIGFuZCAnJ0B7MX0nJyBjYW4gYmUgZWZmZWN0aXZlIGF0IGFueSBsb2NhdGlvbgogOTY3
ID0gTnVsbCB0eXBlIHNhZmV0eTogVW5jaGVja2VkIGNhc3QgZnJvbSB7MH0gdG8gezF9Ci05Njgg
PSBBcmd1bWVudHMgY29udHJvbGluZyB0aGUgZGV0YWlscyBvZiB0aGUgbnVsbG5lc3MgZGVmYXVs
dCBhcmUgbm90IHlldCBldmFsdWF0ZWQgYnkgdGhlIGFuYWx5c2lzLgorIzk2OCB0ZW1wb3Jhcnkg
d2FybmluZyBoYXMgYmVlbiByZW1vdmVkCiAKICMgSmF2YSA4CiAxMDAxID0gU3ludGF4IGVycm9y
LCBtb2RpZmllcnMgYW5kIGFubm90YXRpb25zIGFyZSBub3QgYWxsb3dlZCBmb3IgdGhlIGxhbWJk
YSBwYXJhbWV0ZXIgezB9IGFzIGl0cyB0eXBlIGlzIGVsaWRlZA==
</data>

          </attachment>
      

    </bug>

</bugzilla>