<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>416586</bug_id>
          
          <creation_ts>2013-09-04 22:13:00 -0400</creation_ts>
          <short_desc>The doc for TagElement#fragments is confusing</short_desc>
          <delta_ts>2014-09-16 13:10:09 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.5 M2</target_milestone>
          
          <blocked>421101</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Rennie">Michael_Rennie</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>markus_keller</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2302984</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Rennie">Michael_Rennie</who>
    <bug_when>2013-09-04 22:13:35 -0400</bug_when>
    <thetext>While generifying API tools I came across some use of TagElement#fragments and while trying to update our code I realized IDocElement is not an API (or even visible) class - which is mentioned in the API docs as the list type:

* @return the live list of doc elements in this tag element
* (element type: {@link IDocElement})
*/
public List fragments() {
...
}

The doc does mention what kinds of nodes (implementations of IDocElement) can appear in the list, but it does not make sense to mention a private class in the API docs. 

Consumers basically have to do the following:

List&lt;ASTNode&gt; fragments = tagelement.fragments();

when they are expecting to be able to do (according to the docs):

List&lt;IDocElement&gt; fragments = tagelement.fragments();</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2308129</commentid>
    <comment_count>1</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-09-18 00:15:29 -0400</bug_when>
    <thetext>It looks like the IDocElement made into the component.xml during the first draft way before TagElement started to refer to IDocElement. Perhaps the restriction should have been removed later, but wasn&apos;t. Unfortunately I don&apos;t know the history and reasoning behind this. Anyway,I will take a closer look at this little later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2326867</commentid>
    <comment_count>2</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2013-11-05 12:50:41 -0500</bug_when>
    <thetext>I think Jeem tried to keep IDocElement internal initially, but the masquerade collapsed when property descriptors were introduced: The IDocElement interface is also visible via TagElement.FRAGMENTS_PROPERTY.getElementType().

I think IDocElement should become a proper API interface like IExtendedModifier.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2388574</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-04-14 03:47:30 -0400</bug_when>
    <thetext>Sorry, very busy with Java 8 bug fixes, besides too late for making API changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2446356</commentid>
    <comment_count>4</comment_count>
      <attachid>246615</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-09-02 08:09:31 -0400</bug_when>
    <thetext>Created attachment 246615
API changes + doc update

Patch to include IDocElement as an API + document changes. 

Markus, I don&apos;t know if this has been encountered before. What happens to the @since? Also, comment if you have anything on the doc changes. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2448535</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-09-07 23:41:44 -0400</bug_when>
    <thetext>Released the changes here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=84b1be426f22cf0fce1e09b3e0b5d99ba1b5eaca</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2448671</commentid>
    <comment_count>6</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-09-08 07:11:19 -0400</bug_when>
    <thetext>Looks like the API Tools error was scary enough to keep you from actually adding the &apos;public&apos; keyword ;-)

Fixed that, added the necessary @no* API restrictions (also for IExtendedModifier) and changed the @since tag to:

 * @since 3.11, internal interface since 3.0

The @since tag always has to start with the version where it effectively became API. The API Tools process that first part, but skip any comments after that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2448672</commentid>
    <comment_count>7</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-09-08 07:11:38 -0400</bug_when>
    <thetext>http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/commit/?id=fea19d22050275d4b6c4f9116a11537adeb627a9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452622</commentid>
    <comment_count>8</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2014-09-16 12:49:17 -0400</bug_when>
    <thetext>(In reply to Markus Keller from comment #7)
The right link to the fix is http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=fea19d22050275d4b6c4f9116a11537adeb627a9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2452630</commentid>
    <comment_count>9</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2014-09-16 13:10:09 -0400</bug_when>
    <thetext>Verified for Eclipse Mars 4.5 M2 Build id: I20140915-2000</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>246615</attachid>
            <date>2014-09-02 08:09:00 -0400</date>
            <delta_ts>2014-09-02 08:09:31 -0400</delta_ts>
            <desc>API changes + doc update</desc>
            <filename>Fixed-Bug-416586.patch</filename>
            <type>text/plain</type>
            <size>1903</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMAojUCBvcmcuZWNsaXBzZS5qZHQuY29yZQpk
aWZmIC0tZ2l0IGNvbXBvbmVudC54bWwgY29tcG9uZW50LnhtbAppbmRleCA2MTk5NDUyLi42YWM3
MWUwIDEwMDY0NAotLS0gY29tcG9uZW50LnhtbAorKysgY29tcG9uZW50LnhtbApAQCAtMSw1ICsx
LDUgQEAKIDw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+CiA8IS0tCi0gICAg
Q29weXJpZ2h0IChjKSAyMDA1LCAyMDA5IElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLgorICAg
IENvcHlyaWdodCAoYykgMjAwNSwgMjAxNCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAg
ICBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcg
bWF0ZXJpYWxzCiAgICAgYXJlIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wCkBAIC0xNTMsNSArMTUzLDUgQEAKICAgIDx0eXBl
IG5hbWU9IklBbm5vdGF0aW9uQmluZGluZyIgaW5zdGFudGlhdGU9ImZhbHNlIiBpbXBsZW1lbnQ9
ImZhbHNlIi8+CiAgICA8dHlwZSBuYW1lPSJJQmluZGluZyIgaW5zdGFudGlhdGU9ImZhbHNlIiBp
bXBsZW1lbnQ9ImZhbHNlIi8+Ci0gICA8dHlwZSBuYW1lPSJJRG9jRWxlbWVudCIgcmVmZXJlbmNl
PSJmYWxzZSIvPgorICAgPHR5cGUgbmFtZT0iSURvY0VsZW1lbnQiIGluc3RhbnRpYXRlPSJmYWxz
ZSIvPgogICAgPHR5cGUgbmFtZT0iSUV4dGVuZGVkTW9kaWZpZXIiIGluc3RhbnRpYXRlPSJmYWxz
ZSIvPgogICAgPHR5cGUgbmFtZT0iSWZTdGF0ZW1lbnQiIGluc3RhbnRpYXRlPSJmYWxzZSIvPgpk
aWZmIC0tZ2l0IGRvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vSURvY0VsZW1lbnQuamF2YSBk
b20vb3JnL2VjbGlwc2UvamR0L2NvcmUvZG9tL0lEb2NFbGVtZW50LmphdmEKaW5kZXggZDQ5MmE5
MC4uMTg0OWUxZCAxMDA2NDQKLS0tIGRvbS9vcmcvZWNsaXBzZS9qZHQvY29yZS9kb20vSURvY0Vs
ZW1lbnQuamF2YQorKysgZG9tL29yZy9lY2xpcHNlL2pkdC9jb3JlL2RvbS9JRG9jRWxlbWVudC5q
YXZhCkBAIC0xLDQgKzEsNCBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdo
dCAoYykgMjAwNCwgMjAwNiBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KKyAqIENvcHlyaWdo
dCAoYykgMjAwNCwgMjAxNCBJQk0gQ29ycG9yYXRpb24gYW5kIG90aGVycy4KICAqIEFsbCByaWdo
dHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMK
ICAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVi
bGljIExpY2Vuc2UgdjEuMApAQCAtMTMsOCArMTMsOSBAQAogCiAvKioKLSAqIEludGVybmFsIG1h
cmtlci10eXBlIGludGVyZmFjZSB1c2VkIHRvIHRhZyBub2RlIHR5cGVzIHRoYXQgY2FuIGxlZ2l0
aW1hdGVseQotICogYmUgaW5jbHVkZWQgaW4ge0BsaW5rIFRhZ0VsZW1lbnQjZnJhZ21lbnRzKCkg
VGFnRWxlbWVudC5mcmFnbWVudHMoKX0uCisgKiBDb21tb24gbWFya2VyIGludGVyZmFjZSBmb3Ig
QVNUIG5vZGVzIHRoYXQgcmVwcmVzZW50IGZyYWdtZW50cyBpbiBkb2MgZWxlbWVudHMuIAorICog
VGhlc2UgYXJlIG5vZGUgdHlwZXMgdGhhdCBjYW4gbGVnaXRpbWF0ZWx5IGJlIGluY2x1ZGVkIGlu
IHtAbGluayBUYWdFbGVtZW50I2ZyYWdtZW50cygpIFRhZ0VsZW1lbnQuZnJhZ21lbnRzKCl9Lgog
ICoKICAqIEBzaW5jZSAzLjAKKyAqIEBzZWUgVGFnRWxlbWVudCNmcmFnbWVudHMoKQogICovCiBp
bnRlcmZhY2UgSURvY0VsZW1lbnQgew==
</data>

          </attachment>
      

    </bug>

</bugzilla>