<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>374063</bug_id>
          
          <creation_ts>2012-03-13 08:43:00 -0400</creation_ts>
          <short_desc>[builder][regression] bug 372012 causes regular problems to be reported against the package</short_desc>
          <delta_ts>2012-03-14 04:54:18 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.8 M6</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephan Herrmann">stephan.herrmann</reporter>
          <assigned_to name="Ayushman Jain">amj87.iitr</assigned_to>
          <cc>jarthana</cc>
    
    <cc>satyam.kandula</cc>
    
    <cc>srikanth_sankaran</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="49122"
          type_id="1"
          status="+"
          setter="satyam.kandula"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2079394</commentid>
    <comment_count>0</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2012-03-13 08:43:37 -0400</bug_when>
    <thetext>When the new option from bug 372012 is enabled, regular problems are reported with incorrect resource and path attributes:

The resource column lists the package and the path shows the containing source folder.

This breaks double-click behavior in the Problems view.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079396</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2012-03-13 08:44:59 -0400</bug_when>
    <thetext>This is a regression and should be fixed for M6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079405</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-13 08:50:05 -0400</bug_when>
    <thetext>Ayush, please follow up for M6.

Satyam, please review when a patch becomes available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079421</commentid>
    <comment_count>3</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-03-13 09:06:09 -0400</bug_when>
    <thetext>I don&apos;t understand whats the bug. Double click is not supposed to work on the new warning which is on the package. Where should the double click lead to?

(In reply to comment #0)
&gt; The resource column lists the package and the path shows the containing source
&gt; folder.
This is correct, no? If you put a type in a default package and dont put a default annotation on it, the resource is the type.java and the path is the source folder.

What should I fix here?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079554</commentid>
    <comment_count>4</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-03-13 10:44:51 -0400</bug_when>
    <thetext>Ok I think I know the problem. When the builder creates the marker on the package for the first time, inside org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.storeProblemsFor(SourceFile, CategorizedProblem[]), the resource is changed to point to the package resource for the &quot;missing default annotation&quot; problem. For subsequent problems the resource should be reset back to the source file&apos;s resource. Right now, they also get created on the package</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079574</commentid>
    <comment_count>5</comment_count>
      <attachid>212558</attachid>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-03-13 10:58:24 -0400</bug_when>
    <thetext>Created attachment 212558
proposed fix v1.0 + regression tests

Please verify that this fix works. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079577</commentid>
    <comment_count>6</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-13 11:00:12 -0400</bug_when>
    <thetext>Jay, this need to go in for M6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079666</commentid>
    <comment_count>7</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2012-03-13 12:05:52 -0400</bug_when>
    <thetext>Change look good to me.
Minor comments:
- Move the declaration of &apos;IResource resource&apos; also into the loop
- Please also add a comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079758</commentid>
    <comment_count>8</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2012-03-13 13:39:37 -0400</bug_when>
    <thetext>Taken care of the above comments and released in master via commit 6479fe9ab023669252a13ee797dc53bcddb718f9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2080148</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-03-14 04:54:18 -0400</bug_when>
    <thetext>Verified for 3.8 M6 using Build id: I20120313-2000</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>212558</attachid>
            <date>2012-03-13 10:58:00 -0400</date>
            <delta_ts>2012-03-13 10:58:24 -0400</delta_ts>
            <desc>proposed fix v1.0 + regression tests</desc>
            <filename>Fixed-bug-374063-builderregression-bug-372012-causes.patch</filename>
            <type>text/plain</type>
            <size>4865</size>
            <attacher name="Ayushman Jain">amj87.iitr</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2J1aWxkZXIvUGFja2FnZUluZm9UZXN0LmphdmEgYi9vcmcu
ZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5idWlsZGVyL3NyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90
ZXN0cy9idWlsZGVyL1BhY2thZ2VJbmZvVGVzdC5qYXZhCmluZGV4IGY2ZmNkZjYuLjgwNTc1NDAg
MTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmJ1aWxkZXIvc3JjL29yZy9l
Y2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2J1aWxkZXIvUGFja2FnZUluZm9UZXN0LmphdmEKKysrIGIv
b3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuYnVpbGRlci9zcmMvb3JnL2VjbGlwc2UvamR0L2Nv
cmUvdGVzdHMvYnVpbGRlci9QYWNrYWdlSW5mb1Rlc3QuamF2YQpAQCAtMzgsNyArMzgsNyBAQAog
Ly8gU3RhdGljIGluaXRpYWxpemVyIHRvIHNwZWNpZnkgdGVzdHMgc3Vic2V0IHVzaW5nIFRFU1RT
Xyogc3RhdGljIHZhcmlhYmxlcwogLy8gQWxsIHNwZWNpZmllZCB0ZXN0cyB3aGljaCBkb2VzIG5v
dCBiZWxvbmcgdG8gdGhlIGNsYXNzIGFyZSBza2lwcGVkLi4uCiBzdGF0aWMgewotLy8JVEVTVFNf
TkFNRVMgPSBuZXcgU3RyaW5nW10geyAidGVzdEJ1ZzM3MjAxMiIgfTsKKy8vCVRFU1RTX05BTUVT
ID0gbmV3IFN0cmluZ1tdIHsgInRlc3RCdWczNzQwNjMiIH07CiAvLwlURVNUU19OVU1CRVJTID0g
bmV3IGludFtdIHsgMyB9OwogLy8JVEVTVFNfUkFOR0UgPSBuZXcgaW50W10geyAyMSwgNTAgfTsK
IH0KQEAgLTUzNiw2ICs1MzYsNTIgQEAKIAlleHBlY3RpbmdPbmx5U3BlY2lmaWNQcm9ibGVtRm9y
KGJQYXRoLAogCQluZXcgUHJvYmxlbSgiIiwgIlRoZSBkZWNsYXJlZCBwYWNrYWdlIFwiXCIgZG9l
cyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHBhY2thZ2UgXCJwXCIiLCBiUGF0aCwgMCwgMCwgQ2F0
ZWdvcml6ZWRQcm9ibGVtLkNBVF9JTlRFUk5BTCwgSU1hcmtlci5TRVZFUklUWV9FUlJPUikpOyAv
LyROT04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIH0KKy8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9y
Zy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zNzQwNjMKKy8vIHZlcmlmeSB0aGF0IG1hcmtlcnMgYXJl
IGNyZWF0ZWQgb24gdGhlIGNvcnJlY3QgcmVzb3VyY2UKK3B1YmxpYyB2b2lkIHRlc3RCdWczNzQw
NjMoKSB0aHJvd3MgSmF2YU1vZGVsRXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7CisJCisJSVBhdGgg
cHJvamVjdFBhdGggPSBlbnYuYWRkUHJvamVjdCgiUHJvamVjdCIsICIxLjUiKTsgCisJZW52LmFk
ZEV4dGVybmFsSmFycyhwcm9qZWN0UGF0aCwgVXRpbC5nZXRKYXZhQ2xhc3NMaWJzKCkpOworCWZ1
bGxCdWlsZChwcm9qZWN0UGF0aCk7CisKKwkvLyByZW1vdmUgb2xkIHBhY2thZ2UgZnJhZ21lbnQg
cm9vdCBzbyB0aGF0IG5hbWVzIGRvbid0IGNvbGxpZGUKKwllbnYucmVtb3ZlUGFja2FnZUZyYWdt
ZW50Um9vdChwcm9qZWN0UGF0aCwgIiIpOyAKKworCUlQYXRoIHNyY1Jvb3QgPSBlbnYuYWRkUGFj
a2FnZUZyYWdtZW50Um9vdChwcm9qZWN0UGF0aCwgInNyYyIpOworCWVudi5zZXRPdXRwdXRGb2xk
ZXIocHJvamVjdFBhdGgsICJiaW4iKTsgCisJLy8gcHJlcGFyZSB0aGUgcHJvamVjdDoKKwlzZXR1
cFByb2plY3RGb3JOdWxsQW5ub3RhdGlvbnMocHJvamVjdFBhdGgpOworCWVudi5nZXRKYXZhUHJv
amVjdChwcm9qZWN0UGF0aCkuc2V0T3B0aW9uKEphdmFDb3JlLkNPTVBJTEVSX1BCX01JU1NJTkdf
Tk9OTlVMTF9CWV9ERUZBVUxUX0FOTk9UQVRJT04sIEphdmFDb3JlLkVSUk9SKTsKKwllbnYuZ2V0
SmF2YVByb2plY3QocHJvamVjdFBhdGgpLnNldE9wdGlvbihKYXZhQ29yZS5DT01QSUxFUl9QQl9S
RURVTkRBTlRfTlVMTF9BTk5PVEFUSU9OLCBKYXZhQ29yZS5FUlJPUik7CisJU3RyaW5nIHRlc3Qx
Q29kZSA9ICJwYWNrYWdlIHAxO1xuIgkrCisJCSJwdWJsaWMgY2xhc3MgVGVzdDEge1xuIiArCisJ
CSIgICAgcHVibGljIFN0cmluZyBvdXRwdXQoTGlzdDxJbnRlZ2VyPiBpbnRlZ2Vycykge1xuIiAr
CisJCSIgICAgICAgIHJldHVybiBcIlwiO1xuIiArCisJCSIgICAgfVxuIiArCisJCSIJIHB1Ymxp
YyB2b2lkIG91dHB1dChMaXN0PERvdWJsZT4gZG91Ymxlcykge31cbiIgKworCQkifSI7CisKKwll
bnYuYWRkQ2xhc3Moc3JjUm9vdCwgInAxIiwgIlRlc3QxIiwgdGVzdDFDb2RlKTsKKwkKKwlmdWxs
QnVpbGQocHJvamVjdFBhdGgpOworCS8vIHJlc291cmNlIGZvciBjb21waWxlIGVycm9ycyBzaG91
bGQgYmUgVGVzdDEgYW5kIG5vdCBwMQorCWV4cGVjdGluZ1Byb2JsZW1zRm9yKHByb2plY3RQYXRo
LCAKKwkJCSJQcm9ibGVtIDogQSBkZWZhdWx0IG51bGxuZXNzIGFubm90YXRpb24gaGFzIG5vdCBi
ZWVuIHNwZWNpZmllZCBmb3IgdGhlIHBhY2thZ2UgcDEgWyByZXNvdXJjZSA6IDwvUHJvamVjdC9z
cmMvcDE+IHJhbmdlIDogPDgsMTA+IGNhdGVnb3J5IDogPDkwPiBzZXZlcml0eSA6IDwyPl1cbiIg
KyAKKwkJCSJQcm9ibGVtIDogTGlzdCBjYW5ub3QgYmUgcmVzb2x2ZWQgdG8gYSB0eXBlIFsgcmVz
b3VyY2UgOiA8L1Byb2plY3Qvc3JjL3AxL1Rlc3QxLmphdmE+IHJhbmdlIDogPDEzMCwxMzQ+IGNh
dGVnb3J5IDogPDQwPiBzZXZlcml0eSA6IDwyPl1cbiIgKyAKKwkJCSJQcm9ibGVtIDogTGlzdCBj
YW5ub3QgYmUgcmVzb2x2ZWQgdG8gYSB0eXBlIFsgcmVzb3VyY2UgOiA8L1Byb2plY3Qvc3JjL3Ax
L1Rlc3QxLmphdmE+IHJhbmdlIDogPDU4LDYyPiBjYXRlZ29yeSA6IDw0MD4gc2V2ZXJpdHkgOiA8
Mj5dIik7CisKKwkvLyBhZGQgcGFja2FnZS1pbmZvLmphdmEgd2l0aCBkZWZhdWx0IGFubm90YXRp
b24KKwlTdHJpbmcgcGFja2FnZUluZm9Db2RlID0gIkBvcmcuZWNsaXBzZS5qZHQuYW5ub3RhdGlv
bi5Ob25OdWxsQnlEZWZhdWx0XG4iICsKKwkJInBhY2thZ2UgcDE7XG4iOworCWVudi5hZGRDbGFz
cyhzcmNSb290LCAicDEiLCAicGFja2FnZS1pbmZvIiwgcGFja2FnZUluZm9Db2RlKTsKKwlpbmNy
ZW1lbnRhbEJ1aWxkKHByb2plY3RQYXRoKTsKKwlleHBlY3RpbmdQcm9ibGVtc0Zvcihwcm9qZWN0
UGF0aCwKKwkJCSJQcm9ibGVtIDogTGlzdCBjYW5ub3QgYmUgcmVzb2x2ZWQgdG8gYSB0eXBlIFsg
cmVzb3VyY2UgOiA8L1Byb2plY3Qvc3JjL3AxL1Rlc3QxLmphdmE+IHJhbmdlIDogPDEzMCwxMzQ+
IGNhdGVnb3J5IDogPDQwPiBzZXZlcml0eSA6IDwyPl1cbiIgKyAKKwkJCSJQcm9ibGVtIDogTGlz
dCBjYW5ub3QgYmUgcmVzb2x2ZWQgdG8gYSB0eXBlIFsgcmVzb3VyY2UgOiA8L1Byb2plY3Qvc3Jj
L3AxL1Rlc3QxLmphdmE+IHJhbmdlIDogPDU4LDYyPiBjYXRlZ29yeSA6IDw0MD4gc2V2ZXJpdHkg
OiA8Mj5dIik7CisKKwkvLyB2ZXJpZnkgdGhhdCBhbGwgcGFja2FnZSBDVSdzIHdlcmUgcmVjb21w
aWxlZAorCWV4cGVjdGluZ1VuaXF1ZUNvbXBpbGVkQ2xhc3NlcyhuZXcgU3RyaW5nW10geyAicDEu
VGVzdDEiLCAicDEucGFja2FnZS1pbmZvIiB9KTsKK30KIAogdm9pZCBzZXR1cFByb2plY3RGb3JO
dWxsQW5ub3RhdGlvbnMoSVBhdGggcHJvamVjdFBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiwgSmF2
YU1vZGVsRXhjZXB0aW9uIHsKIAkvLyBhZGQgdGhlIG9yZy5lY2xpcHNlLmpkdC5hbm5vdGF0aW9u
IGxpYnJhcnkgKGJpbi8gZm9sZGVyIG9yIGphcikgdG8gdGhlIHByb2plY3Q6CmRpZmYgLS1naXQg
YS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29y
ZS9idWlsZGVyL0Fic3RyYWN0SW1hZ2VCdWlsZGVyLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29y
ZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9idWlsZGVyL0Fic3RyYWN0SW1h
Z2VCdWlsZGVyLmphdmEKaW5kZXggZDc2OTcwOS4uMzdkZWI2NSAxMDA2NDQKLS0tIGEvb3JnLmVj
bGlwc2UuamR0LmNvcmUvbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvYnVpbGRl
ci9BYnN0cmFjdEltYWdlQnVpbGRlci5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21v
ZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL2J1aWxkZXIvQWJzdHJhY3RJbWFnZUJ1
aWxkZXIuamF2YQpAQCAtNjcyLDEyICs2NzIsMTMgQEAKIAkvLyBidXQgc3RpbGwgdHJ5IHRvIGNv
bXBpbGUgYXMgbWFueSBzb3VyY2UgZmlsZXMgYXMgcG9zc2libGUgdG8gaGVscCB0aGUgY2FzZSB3
aGVuIHRoZSBiYXNlIGxpYnJhcmllcyBhcmUgaW4gc291cmNlCiAJaWYgKCF0aGlzLmtlZXBTdG9y
aW5nUHJvYmxlbU1hcmtlcnMpIHJldHVybjsgLy8gb25seSB3YW50IHRoZSBvbmUgZXJyb3IgcmVj
b3JkZWQgb24gdGhpcyBzb3VyY2UgZmlsZQogCi0JSVJlc291cmNlIHJlc291cmNlID0gc291cmNl
RmlsZS5yZXNvdXJjZTsKKwlJUmVzb3VyY2UgcmVzb3VyY2U7CiAJSGFzaFNldCBtYW5hZ2VkTWFy
a2VyVHlwZXMgPSBKYXZhTW9kZWxNYW5hZ2VyLmdldEphdmFNb2RlbE1hbmFnZXIoKS5jb21waWxh
dGlvblBhcnRpY2lwYW50cy5tYW5hZ2VkTWFya2VyVHlwZXMoKTsKIAlwcm9ibGVtczogZm9yIChp
bnQgaSA9IDAsIGwgPSBwcm9ibGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKIAkJQ2F0ZWdvcml6
ZWRQcm9ibGVtIHByb2JsZW0gPSBwcm9ibGVtc1tpXTsKIAkJaW50IGlkID0gcHJvYmxlbS5nZXRJ
RCgpOwotCisJCXJlc291cmNlID0gc291cmNlRmlsZS5yZXNvdXJjZTsKKwkJCiAJCS8vIGhhbmRs
ZSBtaXNzaW5nIGNsYXNzZmlsZSBzaXR1YXRpb24KIAkJaWYgKGlkID09IElQcm9ibGVtLklzQ2xh
c3NQYXRoQ29ycmVjdCkgewogCQkJU3RyaW5nIG1pc3NpbmdDbGFzc2ZpbGVOYW1lID0gcHJvYmxl
bS5nZXRBcmd1bWVudHMoKVswXTs=
</data>

          </attachment>
      

    </bug>

</bugzilla>