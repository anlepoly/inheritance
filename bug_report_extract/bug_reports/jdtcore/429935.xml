<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>429935</bug_id>
          
          <creation_ts>2014-03-08 09:20:00 -0500</creation_ts>
          <short_desc>[1.8][compiler] NPE with reference to missing functional interface type</short_desc>
          <delta_ts>2014-03-08 22:14:44 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.4</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>jarthana</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="61847"
          type_id="1"
          status="+"
          setter="jarthana"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2373364</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-03-08 09:20:12 -0500</bug_when>
    <thetext>This is a recent regression: 

// --
public class X {
	public static void main(String[] args) {
		I i = (I s) -&gt; s; 
	} 
}

results in

java.lang.NullPointerException
	at org.eclipse.jdt.internal.compiler.lookup.MethodBinding.collectMissingTypes(MethodBinding.java:378)
	at org.eclipse.jdt.internal.compiler.problem.ProblemReporter.missingTypeInLambda(ProblemReporter.java:6190)
	at org.eclipse.jdt.internal.compiler.ast.LambdaExpression.resolveType(LambdaExpression.java:425)
	at org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.resolve(LocalDeclaration.java:251)
	at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:623)
	at org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:303)
	at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:533)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1211)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1321)
	at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:591)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373365</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-03-08 09:20:30 -0500</bug_when>
    <thetext>I&apos;ll follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373378</commentid>
    <comment_count>2</comment_count>
      <attachid>240685</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-03-08 10:54:32 -0500</bug_when>
    <thetext>Created attachment 240685
Proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373429</commentid>
    <comment_count>3</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2014-03-08 22:03:45 -0500</bug_when>
    <thetext>+1 for the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373432</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-03-08 22:14:12 -0500</bug_when>
    <thetext>Thanks Jay, fix and tests released here: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=6a8cde4bbd78102c9fde9da52bc2f1bf76963958</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2373433</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2014-03-08 22:14:44 -0500</bug_when>
    <thetext>Resolved.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>240685</attachid>
            <date>2014-03-08 10:54:00 -0500</date>
            <delta_ts>2014-03-08 10:54:32 -0500</delta_ts>
            <desc>Proposed patch</desc>
            <filename>Fixed-Bug-429935--18compiler-NPE-with-reference-to-m.patch</filename>
            <type>text/plain</type>
            <size>4959</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlTGFtYmRh
RXhwcmVzc2lvbnNUZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxl
ci9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdh
dGl2ZUxhbWJkYUV4cHJlc3Npb25zVGVzdC5qYXZhCmluZGV4IGUzYjEzN2UuLmY5YzI2MmQgMTAw
NjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlTGFtYmRhRXhw
cmVzc2lvbnNUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGls
ZXIvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVn
YXRpdmVMYW1iZGFFeHByZXNzaW9uc1Rlc3QuamF2YQpAQCAtODg0OSw2ICs4ODQ5LDYwIEBACiAJ
CSJUaGlzIGxhbWJkYSBleHByZXNzaW9uIHJlZmVycyB0byB0aGUgbWlzc2luZyB0eXBlIFN0cmlu
XG4iICsgCiAJCSItLS0tLS0tLS0tXG4iKTsKIH0KKy8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9y
Zy9idWdzL3Nob3dfYnVnLmNnaT9pZD00Mjk5MzQsIC0gWzEuOF1bc2VhcmNoXSBmb3IgcmVmZXJl
bmNlcyB0byB0eXBlIG9mIGxhbWJkYSB3aXRoICd0aGlzJyBwYXJhbWV0ZXIgdGhyb3dzIEFJSU9C
RS9OUEUKK3B1YmxpYyB2b2lkIHRlc3Q0Mjk5MzQoKSB7CisJcnVuTmVnYXRpdmVUZXN0KAorCQlu
ZXcgU3RyaW5nW10geworCQkJIlguamF2YSIsCisJCQkicHVibGljIGNsYXNzIFgge1xuIiArCisJ
CQkiCXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiIgKworCQkJIgkJ
RnVuY3Rpb248U3RyaW5nLCBTdHJpbmc+IGYxPSAoU3RyaW5nIHMsIEZ1bmN0aW9uIHRoaXMpIC0+
IHM7XG4iICsKKwkJCSIJCUZ1bmN0aW9uPFN0cmluZywgU3RyaW5nPiBmMj0gKEZ1bmN0aW9uIHRo
aXMsIFN0cmluZyBzKSAtPiBzO1xuIiArCisJCQkiCX1cbiIgKworCQkJIn1cbiIKKwkJfSwKKwkJ
Ii0tLS0tLS0tLS1cbiIgKyAKKwkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSAzKVxuIiAr
IAorCQkiCUZ1bmN0aW9uPFN0cmluZywgU3RyaW5nPiBmMT0gKFN0cmluZyBzLCBGdW5jdGlvbiB0
aGlzKSAtPiBzO1xuIiArIAorCQkiCV5eXl5eXl5eXG4iICsgCisJCSJGdW5jdGlvbiBjYW5ub3Qg
YmUgcmVzb2x2ZWQgdG8gYSB0eXBlXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSIyLiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgMylcbiIgKyAKKwkJIglGdW5jdGlvbjxTdHJpbmcsIFN0
cmluZz4gZjE9IChTdHJpbmcgcywgRnVuY3Rpb24gdGhpcykgLT4gcztcbiIgKyAKKwkJIgkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxu
IiArIAorCQkiVGhlIHRhcmdldCB0eXBlIG9mIHRoaXMgZXhwcmVzc2lvbiBtdXN0IGJlIGEgZnVu
Y3Rpb25hbCBpbnRlcmZhY2VcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIgKyAKKwkJIjMuIEVSUk9S
IGluIFguamF2YSAoYXQgbGluZSAzKVxuIiArIAorCQkiCUZ1bmN0aW9uPFN0cmluZywgU3RyaW5n
PiBmMT0gKFN0cmluZyBzLCBGdW5jdGlvbiB0aGlzKSAtPiBzO1xuIiArIAorCQkiCSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXlxuIiArIAorCQkiRnVuY3Rp
b24gY2Fubm90IGJlIHJlc29sdmVkIHRvIGEgdHlwZVxuIiArIAorCQkiLS0tLS0tLS0tLVxuIiAr
IAorCQkiNC4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDMpXG4iICsgCisJCSIJRnVuY3Rpb248
U3RyaW5nLCBTdHJpbmc+IGYxPSAoU3RyaW5nIHMsIEZ1bmN0aW9uIHRoaXMpIC0+IHM7XG4iICsg
CisJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF5e
Xl5cbiIgKyAKKwkJIkxhbWJkYSBleHByZXNzaW9ucyBjYW5ub3QgZGVjbGFyZSBhIHRoaXMgcGFy
YW1ldGVyXG4iICsgCisJCSItLS0tLS0tLS0tXG4iICsgCisJCSI1LiBFUlJPUiBpbiBYLmphdmEg
KGF0IGxpbmUgNClcbiIgKyAKKwkJIglGdW5jdGlvbjxTdHJpbmcsIFN0cmluZz4gZjI9IChGdW5j
dGlvbiB0aGlzLCBTdHJpbmcgcykgLT4gcztcbiIgKyAKKwkJIgleXl5eXl5eXlxuIiArIAorCQki
RnVuY3Rpb24gY2Fubm90IGJlIHJlc29sdmVkIHRvIGEgdHlwZVxuIiArIAorCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkiNi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDQpXG4iICsgCisJCSIJRnVu
Y3Rpb248U3RyaW5nLCBTdHJpbmc+IGYyPSAoRnVuY3Rpb24gdGhpcywgU3RyaW5nIHMpIC0+IHM7
XG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5eXl5e
Xl5eXl5eXl5eXl5eXl5cbiIgKyAKKwkJIlRoZSB0YXJnZXQgdHlwZSBvZiB0aGlzIGV4cHJlc3Np
b24gbXVzdCBiZSBhIGZ1bmN0aW9uYWwgaW50ZXJmYWNlXG4iICsgCisJCSItLS0tLS0tLS0tXG4i
ICsgCisJCSI3LiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNClcbiIgKyAKKwkJIglGdW5jdGlv
bjxTdHJpbmcsIFN0cmluZz4gZjI9IChGdW5jdGlvbiB0aGlzLCBTdHJpbmcgcykgLT4gcztcbiIg
KyAKKwkJIgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXlxuIiArIAorCQki
RnVuY3Rpb24gY2Fubm90IGJlIHJlc29sdmVkIHRvIGEgdHlwZVxuIiArIAorCQkiLS0tLS0tLS0t
LVxuIiArIAorCQkiOC4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDQpXG4iICsgCisJCSIJRnVu
Y3Rpb248U3RyaW5nLCBTdHJpbmc+IGYyPSAoRnVuY3Rpb24gdGhpcywgU3RyaW5nIHMpIC0+IHM7
XG4iICsgCisJCSIJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXlxu
IiArIAorCQkiTGFtYmRhIGV4cHJlc3Npb25zIGNhbm5vdCBkZWNsYXJlIGEgdGhpcyBwYXJhbWV0
ZXJcbiIgKyAKKwkJIi0tLS0tLS0tLS1cbiIpOworfQogcHVibGljIHN0YXRpYyBDbGFzcyB0ZXN0
Q2xhc3MoKSB7CiAJcmV0dXJuIE5lZ2F0aXZlTGFtYmRhRXhwcmVzc2lvbnNUZXN0LmNsYXNzOwog
fQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9MYW1iZGFFeHByZXNzaW9uLmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIv
YXN0L0xhbWJkYUV4cHJlc3Npb24uamF2YQppbmRleCA2ZTE0ZGJiLi5lZjM3MDkyIDEwMDY0NAot
LS0gYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29tcGlsZXIvYXN0L0xhbWJkYUV4cHJlc3Npb24uamF2YQorKysgYi9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0xh
bWJkYUV4cHJlc3Npb24uamF2YQpAQCAtMjQzLDI0ICsyNDMsMTIgQEAKIAkJCiAJCWZpbmFsIGJv
b2xlYW4gaGF2ZURlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3IgIT0gbnVsbDsKIAkJCi0JCWlm
IChoYXZlRGVzY3JpcHRvciAmJiB0aGlzLmRlc2NyaXB0b3IudHlwZVZhcmlhYmxlcyAhPSBCaW5k
aW5nLk5PX1RZUEVfVkFSSUFCTEVTKSAvLyBhbHJlYWR5IGNvbXBsYWluZWQgaW4ga29zaGVyKgot
CQkJcmV0dXJuIG51bGw7Ci0JCQotCQlpZiAoIWhhdmVEZXNjcmlwdG9yKSB7Ci0JCQlpZiAoYXJn
dW1lbnRzVHlwZUVsaWRlZCkgewotCQkJCWlmICghdGhpcy5hc3Npc3ROb2RlKQotCQkJCQlyZXR1
cm4gbnVsbDsgLy8gRlVCQVIsIGJhaWwgb3V0Li4uCi0JCQkJLy8gZm9yIGNvZGUgYXNzaXN0IE9O
TFksIGtlZXAgdGhlIHNsdWljZSBnYXRlIHNodXQgb24gYm9ndXMgZXJyb3JzIG90aGVyd2lzZS4K
LQkJCQlhcmd1bWVudHNUeXBlRWxpZGVkID0gZmFsc2U7Ci0JCQkJZm9yIChpbnQgaSA9IDA7IGkg
PCBsZW5ndGg7IGkrKykgewotCQkJCQl0aGlzLmFyZ3VtZW50c1tpXS50eXBlID0gbmV3IFNpbmds
ZVR5cGVSZWZlcmVuY2UoVHlwZUNvbnN0YW50cy5PQkpFQ1QsIDApOwotCQkJCX0KLQkJCX0KLQkJ
fQorCQlpZiAoIWhhdmVEZXNjcmlwdG9yIHx8IHRoaXMuZGVzY3JpcHRvci50eXBlVmFyaWFibGVz
ICE9IEJpbmRpbmcuTk9fVFlQRV9WQVJJQUJMRVMpIC8vIGFscmVhZHkgY29tcGxhaW5lZCBpbiBr
b3NoZXIqCisJCQlyZXR1cm4gdGhpcy5yZXNvbHZlZFR5cGUgPSBudWxsOwogCQkKIAkJdGhpcy5i
aW5kaW5nID0gbmV3IE1ldGhvZEJpbmRpbmcoQ2xhc3NGaWxlQ29uc3RhbnRzLkFjY1ByaXZhdGUg
fCBDbGFzc0ZpbGVDb25zdGFudHMuQWNjU3ludGhldGljIHwgRXh0cmFDb21waWxlck1vZGlmaWVy
cy5BY2NVbnJlc29sdmVkLAogCQkJCQkJCUNoYXJPcGVyYXRpb24uY29uY2F0KFR5cGVDb25zdGFu
dHMuQU5PTllNT1VTX01FVEhPRCwgSW50ZWdlci50b1N0cmluZyh0aGlzLm9yZGluYWwpLnRvQ2hh
ckFycmF5KCkpLCAvLyB3aWxsIGJlIGZpeGVkIHVwIGxhdGVyLgotCQkJCQkJCWhhdmVEZXNjcmlw
dG9yID8gdGhpcy5kZXNjcmlwdG9yLnJldHVyblR5cGUgOiBudWxsLCAKKwkJCQkJCQloYXZlRGVz
Y3JpcHRvciA/IHRoaXMuZGVzY3JpcHRvci5yZXR1cm5UeXBlIDogVHlwZUJpbmRpbmcuVk9JRCwg
CiAJCQkJCQkJQmluZGluZy5OT19QQVJBTUVURVJTLCAvLyBmb3Igbm93LiAKIAkJCQkJCQloYXZl
RGVzY3JpcHRvciA/IHRoaXMuZGVzY3JpcHRvci50aHJvd25FeGNlcHRpb25zIDogQmluZGluZy5O
T19FWENFUFRJT05TLCAKIAkJCQkJCQlibG9ja1Njb3BlLmVuY2xvc2luZ1NvdXJjZVR5cGUoKSk7
</data>

          </attachment>
      

    </bug>

</bugzilla>