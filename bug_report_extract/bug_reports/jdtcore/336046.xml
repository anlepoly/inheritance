<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>336046</bug_id>
          
          <creation_ts>2011-02-02 04:54:00 -0500</creation_ts>
          <short_desc>Source attachment not recovered when importing Projects</short_desc>
          <delta_ts>2011-03-08 08:21:20 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.7 M6</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jonas Pommerening">jonas.pommerening</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>daniel_megert</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>satyam.kandula</cc>
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="39119"
          type_id="1"
          status="+"
          setter="amj87.iitr"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1876903</commentid>
    <comment_count>0</comment_count>
    <who name="Jonas Pommerening">jonas.pommerening</who>
    <bug_when>2011-02-02 04:54:59 -0500</bug_when>
    <thetext>Build Identifier: M20110119-0834

The source attachment feature does not work properly, when importing Projects with source attachments into an empty workspace.

After importing a project with source attachments, the referenced JARs display the correct source attachment path but the internal project &quot;.org.eclipse.jdt.core.external.folders&quot; does not contain the external folder.

On previous Helios builds this resulted in an NPE during &quot;Refreshing external folders&quot; (see #321358) The latest build shows no indication of any problems, the source-attachment just does not work. After manually editing the path using the project preferences and clicking &quot;OK&quot; the source attachment displays correctly.

After that the source attachment is available in *all* projects that use the external JAR. (And the link is added to the external folders project.)

Reproducible: Always

Steps to Reproduce:
1. Create a two new projects.
2. Add the same external JAR with source attachment to both projects.
3. Close Eclipse, remove workspace, create a new workspace.
4. Import both projects.

- Source attachments are not accessible when navigating the external JAR file -

5. Open the properties of the external JAR in any of both projects.

- Source attachment path is displayed correctly and seems reasonable -

6. Use the file dialog to select the same directory again.
7. Click &quot;OK&quot;

- Source attachments magically work in *both* projects</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1876905</commentid>
    <comment_count>1</comment_count>
    <who name="Jonas Pommerening">jonas.pommerening</who>
    <bug_when>2011-02-02 04:57:58 -0500</bug_when>
    <thetext>After having a look at the source code I could suggest a hack:

In ..
org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/ClasspathEntry.java

Use the ExternalFoldersManager singleton to add sourceAttachments if neccessary. (Maybe already in the ClasspathEntry constructor?)

I think this step happens somewhere in the UI part but is not executed when the classpath entry is decoded from XML.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877029</commentid>
    <comment_count>2</comment_count>
      <attachid>188142</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-02 09:20:08 -0500</bug_when>
    <thetext>Created attachment 188142
Proposed patch

A better solution would be to add the external folders used as source attachments while resolving project classpaths.

Would you be able to confirm if the fix works for you?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877042</commentid>
    <comment_count>3</comment_count>
    <who name="Jonas Pommerening">jonas.pommerening</who>
    <bug_when>2011-02-02 09:38:37 -0500</bug_when>
    <thetext>Thanks for the fast reply!
I will try this fix first thing tomorrow. Give me some time though, I have zero experience building Eclipse. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877710</commentid>
    <comment_count>4</comment_count>
    <who name="Jonas Pommerening">jonas.pommerening</who>
    <bug_when>2011-02-03 07:51:19 -0500</bug_when>
    <thetext>Works like a charm! :D

Will this fix find it&apos;s way into Helios SR2?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877720</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-03 08:18:52 -0500</bug_when>
    <thetext>(In reply to comment #4)
&gt; Works like a charm! :D
&gt; 
&gt; Will this fix find it&apos;s way into Helios SR2?

I don&apos;t have a test yet for this and don&apos;t expect to be able to add one soon enough.

Olivier, what do you say?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877721</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-03 08:19:18 -0500</bug_when>
    <thetext>All existing tests pass, though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877743</commentid>
    <comment_count>7</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-02-03 08:53:39 -0500</bug_when>
    <thetext>(In reply to comment #5)
&gt; Olivier, what do you say?
Jay, please check if this is a regression over 3.6 or 3.5.2 and report back.
If not, then it is too late for 3.6.2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877749</commentid>
    <comment_count>8</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-03 09:09:31 -0500</bug_when>
    <thetext>(In reply to comment #7)
&gt; (In reply to comment #5)
&gt; &gt; Olivier, what do you say?
&gt; Jay, please check if this is a regression over 3.6 or 3.5.2 and report back.
&gt; If not, then it is too late for 3.6.2.

This must have always been there. The removal of the null-check as part of fix to 313153 exposed the bug in the form of bug 321358 and it&apos;s duplicates. But with the NPE symptom, we never got around to find the cause of that NPE, until this bug was reported. So, in a nutshell, this is not a regression.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877753</commentid>
    <comment_count>9</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-02-03 09:14:42 -0500</bug_when>
    <thetext>(In reply to comment #8)
&gt; This must have always been there. The removal of the null-check as part of fix
&gt; to 313153 exposed the bug in the form of bug 321358 and it&apos;s duplicates. But
&gt; with the NPE symptom, we never got around to find the cause of that NPE, until
&gt; this bug was reported. So, in a nutshell, this is not a regression.
Then this should be fixed for Indigo only considering that we are already in RC3 for 3.6.2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877756</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-03 09:20:49 -0500</bug_when>
    <thetext>Besides we have a workaround as mentioned in comment #0 (step 5,6 and 7)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1877898</commentid>
    <comment_count>11</comment_count>
    <who name="Jonas Pommerening">jonas.pommerening</who>
    <bug_when>2011-02-03 11:20:32 -0500</bug_when>
    <thetext>(In reply to comment #9)
&gt; Then this should be fixed for Indigo only considering that we are already in
&gt; RC3 for 3.6.2.

Okay, it&apos;s not that far away and I have a working patch. Thanks to both of you for your fast support!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1879008</commentid>
    <comment_count>12</comment_count>
      <attachid>188419</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-07 00:28:29 -0500</bug_when>
    <thetext>Created attachment 188419
Patch with test

Same patch with tests added in org.eclipse.jdt.core.tests.model.AttachSourceTests#testBug336046()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1879009</commentid>
    <comment_count>13</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-07 00:29:15 -0500</bug_when>
    <thetext>Ayush, can you review this please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1880480</commentid>
    <comment_count>14</comment_count>
      <attachid>188591</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-09 09:50:56 -0500</bug_when>
    <thetext>Created attachment 188591
Test projects

These tests are required to be able to run the regression tests and to be extracted here: 
\org.eclipse.jdt.core.tests.model\workspace\AttachSourceTests\</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1884685</commentid>
    <comment_count>15</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-17 01:47:59 -0500</bug_when>
    <thetext>Ayush is not able to reproduce this bug and surprisingly neither can I! I know something must have changed in the test environment. But I can&apos;t figure out what. 

These are the steps I have tried several times.

1. Create a new workspace (workspace1), create two new projects, add the same external JAR to both projects.
2. Set the same external folder as source attachment for both folders.
3. Now close workspace1.
4. Delete the workspace1\.metadata folder just to be sure.
5. Create a new workspace, workspace2.
6. Turn off auto build (I don&apos;t think this step has any impact now and I didn&apos;t have to bother about this earlier when I was able to reproduce)
7. Menu -&gt; import... -&gt; Existing projects into Workspace
8. Select root directory (workspace1)
9. Select the check box &quot;Copy projects into workspace&quot; (I don&apos; think I had to do this earlier too)
10. After getting the projects imported, navigate and expand the external library and try to open any of the class files. This always fetches the source.

Jonas, do you find anything amiss here?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1884695</commentid>
    <comment_count>16</comment_count>
    <who name="Jonas Pommerening">jonas.pommerening</who>
    <bug_when>2011-02-17 02:38:26 -0500</bug_when>
    <thetext>(In reply to comment #15)
&gt; Jonas, do you find anything amiss here?

I&apos;m not exactly sure if it does matter: We usually keep our projects (physically) outside the Eclipse workspace. So we usually never &quot;Copy projects into workspace&quot;. That way the workspace folder only contains meta data. We delete the whole folder, when starting from scratch.

Also, did you restart Eclipse between your test-runs? The ExternalFoldersManager seems to be a singleton so it probably cached the external directory entries.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1884872</commentid>
    <comment_count>17</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-17 09:02:08 -0500</bug_when>
    <thetext>(In reply to comment #16)
&gt; (In reply to comment #15)
&gt; &gt; Jonas, do you find anything amiss here?
&gt; 
&gt; I&apos;m not exactly sure if it does matter: We usually keep our projects
&gt; (physically) outside the Eclipse workspace. So we usually never &quot;Copy projects
&gt; into workspace&quot;. That way the workspace folder only contains meta data. We
&gt; delete the whole folder, when starting from scratch.
&gt; 
&gt; Also, did you restart Eclipse between your test-runs? The
&gt; ExternalFoldersManager seems to be a singleton so it probably cached the
&gt; external directory entries.

No luck with those either. Thanks for the suggestions, though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1884875</commentid>
    <comment_count>18</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-17 09:03:14 -0500</bug_when>
    <thetext>Olivier, what do you think? Can I go ahead and release the patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1884884</commentid>
    <comment_count>19</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-02-17 09:07:48 -0500</bug_when>
    <thetext>(In reply to comment #18)
&gt; Olivier, what do you think? Can I go ahead and release the patch?
The patch doesn&apos;t seem to hurt anyway and the reporter confirmed it fixed the issue.
Once Ayushman approved it, you can release it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1884914</commentid>
    <comment_count>20</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-02-17 09:47:49 -0500</bug_when>
    <thetext>Jay, the attached projects for the regression test to run have been mis-attached as a patch. I&apos;m guessing you intended to provide a zip file or jar file? Can you please re-attach? Thanks!

Otherwise, the patch looks good, though I don&apos;t how it works.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1885338</commentid>
    <comment_count>21</comment_count>
      <attachid>188591</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-18 01:51:11 -0500</bug_when>
    <thetext>Comment on attachment 188591
Test projects

Sorry, the attachment is a ZIP and not a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1885388</commentid>
    <comment_count>22</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-02-18 03:47:24 -0500</bug_when>
    <thetext>Looks good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1885436</commentid>
    <comment_count>23</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-02-18 05:40:43 -0500</bug_when>
    <thetext>Released in HEAD for 3.7M6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1894911</commentid>
    <comment_count>24</comment_count>
    <who name="Satyam Kandula">satyam.kandula</who>
    <bug_when>2011-03-08 08:21:20 -0500</bug_when>
    <thetext>I couldn&apos;t reproduce it either. However, as it works for the bug submitter and not able to reproduce the problem with 3.7M6, am marking it verified. 
Verified for 3.7M6 using build I20110307-0800</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>188142</attachid>
            <date>2011-02-02 09:20:00 -0500</date>
            <delta_ts>2011-02-07 00:28:29 -0500</delta_ts>
            <desc>Proposed patch</desc>
            <filename>bug_336046.txt</filename>
            <type>text/plain</type>
            <size>1158</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBtb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhUHJvamVjdC5q
YXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhUHJvamVjdC5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS40NDENCmRpZmYgLXUgLXIxLjQ0MSBKYXZhUHJv
amVjdC5qYXZhDQotLS0gbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvSmF2YVBy
b2plY3QuamF2YQkyMiBEZWMgMjAxMCAwNTo1Njo1NSAtMDAwMAkxLjQ0MQ0KKysrIG1vZGVsL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0phdmFQcm9qZWN0LmphdmEJMiBGZWIgMjAxMSAx
NDoxNzo0OSAtMDAwMA0KQEAgLTI3NDQsNiArMjc0NCwxMCBAQA0KIAkJaWYgKHJlc29sdmVkRW50
cnkuZ2V0RW50cnlLaW5kKCkgPT0gSUNsYXNzcGF0aEVudHJ5LkNQRV9MSUJSQVJZICYmIEV4dGVy
bmFsRm9sZGVyc01hbmFnZXIuaXNFeHRlcm5hbEZvbGRlclBhdGgocmVzb2x2ZWRQYXRoKSkgew0K
IAkJCWV4dGVybmFsRm9sZGVyc01hbmFnZXIuYWRkRm9sZGVyKHJlc29sdmVkUGF0aCwgdHJ1ZS8q
c2NoZWR1bGVGb3JDcmVhdGlvbiovKTsgLy8gbm8tb3AgaWYgbm90IGFuIGV4dGVybmFsIGZvbGRl
ciBvciBpZiBhbHJlYWR5IHJlZ2lzdGVyZWQNCiAJCX0NCisJCUlQYXRoIHNvdXJjZVBhdGggPSBy
ZXNvbHZlZEVudHJ5LmdldFNvdXJjZUF0dGFjaG1lbnRQYXRoKCk7DQorCQlpZiAoc291cmNlUGF0
aCAhPSBudWxsICYmIEV4dGVybmFsRm9sZGVyc01hbmFnZXIuaXNFeHRlcm5hbEZvbGRlclBhdGgo
c291cmNlUGF0aCkgKSB7DQorCQkJZXh0ZXJuYWxGb2xkZXJzTWFuYWdlci5hZGRGb2xkZXIoc291
cmNlUGF0aCwgdHJ1ZSk7DQorCQl9DQogCX0NCiANCiAJcHJpdmF0ZSB2b2lkIGNvcHlGcm9tT2xk
Q2hhaW5lZEVudHJ5KENsYXNzcGF0aEVudHJ5IHJlc29sdmVkRW50cnksIENsYXNzcGF0aEVudHJ5
IGNoYWluZWRFbnRyeSkgew0K
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>188419</attachid>
            <date>2011-02-07 00:28:00 -0500</date>
            <delta_ts>2011-02-07 00:28:29 -0500</delta_ts>
            <desc>Patch with test</desc>
            <filename>bug_336046.txt</filename>
            <type>text/plain</type>
            <size>7393</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBtb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhUHJvamVjdC5q
YXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNsaXBzZS5q
ZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9KYXZhUHJvamVjdC5q
YXZhLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS40NDENCmRpZmYgLXUgLXIxLjQ0MSBKYXZhUHJv
amVjdC5qYXZhDQotLS0gbW9kZWwvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvSmF2YVBy
b2plY3QuamF2YQkyMiBEZWMgMjAxMCAwNTo1Njo1NSAtMDAwMAkxLjQ0MQ0KKysrIG1vZGVsL29y
Zy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0phdmFQcm9qZWN0LmphdmEJNyBGZWIgMjAxMSAw
NToyNzowOSAtMDAwMA0KQEAgLTEsNSArMSw1IEBADQogLyoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioN
Ci0gKiBDb3B5cmlnaHQgKGMpIDIwMDAsIDIwMTAgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMu
DQorICogQ29weXJpZ2h0IChjKSAyMDAwLCAyMDExIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJz
Lg0KICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFu
eWluZyBtYXRlcmlhbHMNCiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9m
IHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjANCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0
aGlzIGRpc3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdA0KQEAgLTI3NDQsNiArMjc0NCwx
MiBAQA0KIAkJaWYgKHJlc29sdmVkRW50cnkuZ2V0RW50cnlLaW5kKCkgPT0gSUNsYXNzcGF0aEVu
dHJ5LkNQRV9MSUJSQVJZICYmIEV4dGVybmFsRm9sZGVyc01hbmFnZXIuaXNFeHRlcm5hbEZvbGRl
clBhdGgocmVzb2x2ZWRQYXRoKSkgew0KIAkJCWV4dGVybmFsRm9sZGVyc01hbmFnZXIuYWRkRm9s
ZGVyKHJlc29sdmVkUGF0aCwgdHJ1ZS8qc2NoZWR1bGVGb3JDcmVhdGlvbiovKTsgLy8gbm8tb3Ag
aWYgbm90IGFuIGV4dGVybmFsIGZvbGRlciBvciBpZiBhbHJlYWR5IHJlZ2lzdGVyZWQNCiAJCX0N
CisJCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVnLmNnaT9pZD0zMzYz
NzYNCisJCS8vIFRoZSBzb3VyY2UgYXR0YWNobWVudCBwYXRoIGNvdWxkIGJlIGV4dGVybmFsIHRv
byBhbmQgaW4gd2hpY2ggY2FzZSwgbXVzdCBiZSBhZGRlZC4NCisJCUlQYXRoIHNvdXJjZVBhdGgg
PSByZXNvbHZlZEVudHJ5LmdldFNvdXJjZUF0dGFjaG1lbnRQYXRoKCk7DQorCQlpZiAoc291cmNl
UGF0aCAhPSBudWxsICYmIEV4dGVybmFsRm9sZGVyc01hbmFnZXIuaXNFeHRlcm5hbEZvbGRlclBh
dGgoc291cmNlUGF0aCkpIHsNCisJCQlleHRlcm5hbEZvbGRlcnNNYW5hZ2VyLmFkZEZvbGRlcihz
b3VyY2VQYXRoLCB0cnVlKTsNCisJCX0NCiAJfQ0KIA0KIAlwcml2YXRlIHZvaWQgY29weUZyb21P
bGRDaGFpbmVkRW50cnkoQ2xhc3NwYXRoRW50cnkgcmVzb2x2ZWRFbnRyeSwgQ2xhc3NwYXRoRW50
cnkgY2hhaW5lZEVudHJ5KSB7DQojUCBvcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbA0K
SW5kZXg6IHNyYy9vcmcvZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9tb2RlbC9BdHRhY2hTb3VyY2VU
ZXN0cy5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3QvZWNsaXBzZS9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
bW9kZWwvQXR0YWNoU291cmNlVGVzdHMuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNjcN
CmRpZmYgLXUgLXIxLjY3IEF0dGFjaFNvdXJjZVRlc3RzLmphdmENCi0tLSBzcmMvb3JnL2VjbGlw
c2UvamR0L2NvcmUvdGVzdHMvbW9kZWwvQXR0YWNoU291cmNlVGVzdHMuamF2YQkyNSBPY3QgMjAx
MCAxMDozMDowNyAtMDAwMAkxLjY3DQorKysgc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3Rz
L21vZGVsL0F0dGFjaFNvdXJjZVRlc3RzLmphdmEJNyBGZWIgMjAxMSAwNToyNzoxMSAtMDAwMA0K
QEAgLTEsNSArMSw1IEBADQogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi0gKiBDb3B5cmlnaHQg
KGMpIDIwMDAsIDIwMTAgSUJNIENvcnBvcmF0aW9uIGFuZCBvdGhlcnMuDQorICogQ29weXJpZ2h0
IChjKSAyMDAwLCAyMDExIElCTSBDb3Jwb3JhdGlvbiBhbmQgb3RoZXJzLg0KICAqIEFsbCByaWdo
dHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMN
CiAgKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1
YmxpYyBMaWNlbnNlIHYxLjANCiAgKiB3aGljaCBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlv
biwgYW5kIGlzIGF2YWlsYWJsZSBhdA0KQEAgLTExLDE1ICsxMSwyMiBAQA0KIHBhY2thZ2Ugb3Jn
LmVjbGlwc2UuamR0LmNvcmUudGVzdHMubW9kZWw7DQogDQogaW1wb3J0IGphdmEuaW8uRmlsZTsN
CitpbXBvcnQgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtOw0KIGltcG9ydCBqYXZhLmlvLklPRXhj
ZXB0aW9uOw0KK2ltcG9ydCBqYXZhLm5ldC5VUkk7DQoraW1wb3J0IGphdmEudXRpbC5IYXNodGFi
bGU7DQogDQogaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Ow0KIA0KK2ltcG9ydCBvcmcuZWNs
aXBzZS5jb3JlLmZpbGVzeXN0ZW0uVVJJVXRpbDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5y
ZXNvdXJjZXMuSUZpbGU7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucmVzb3VyY2VzLklGb2xk
ZXI7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucmVzb3VyY2VzLklQcm9qZWN0Ow0KK2ltcG9y
dCBvcmcuZWNsaXBzZS5jb3JlLnJlc291cmNlcy5JUHJvamVjdERlc2NyaXB0aW9uOw0KIGltcG9y
dCBvcmcuZWNsaXBzZS5jb3JlLnJlc291cmNlcy5JUmVzb3VyY2U7DQoraW1wb3J0IG9yZy5lY2xp
cHNlLmNvcmUucmVzb3VyY2VzLklXb3Jrc3BhY2U7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUu
cmVzb3VyY2VzLkluY3JlbWVudGFsUHJvamVjdEJ1aWxkZXI7DQoraW1wb3J0IG9yZy5lY2xpcHNl
LmNvcmUucmVzb3VyY2VzLlJlc291cmNlc1BsdWdpbjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29y
ZS5ydW50aW1lLkNvcmVFeGNlcHRpb247DQogaW1wb3J0IG9yZy5lY2xpcHNlLmNvcmUucnVudGlt
ZS5JUGF0aDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuY29yZS5ydW50aW1lLlBhdGg7DQpAQCAtNDAs
NiArNDcsNyBAQA0KIGltcG9ydCBvcmcuZWNsaXBzZS5qZHQuY29yZS5kb20uQVNUTm9kZTsNCiBp
bXBvcnQgb3JnLmVjbGlwc2UuamR0LmNvcmUuZG9tLkFTVFBhcnNlcjsNCiBpbXBvcnQgb3JnLmVj
bGlwc2UuamR0LmludGVybmFsLmNvbXBpbGVyLmNsYXNzZm10LkNsYXNzRmlsZUNvbnN0YW50czsN
CitpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUuRXh0ZXJuYWxGb2xkZXJzTWFu
YWdlcjsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUuSmFyUGFja2FnZUZy
YWdtZW50Um9vdDsNCiBpbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNvcmUuSmF2YVBy
b2plY3Q7DQogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb3JlLnV0aWwuVXRpbDsN
CkBAIC0xNTYxLDQgKzE1NjksNzMgQEANCiAJYXR0YWNoU291cmNlKHJvb3QsIG51bGwsIG51bGwp
OyAvLyBkZXRhY2ggc291cmNlDQogCXJvb3QuY2xvc2UoKTsNCiB9DQorLyoqDQorICogaHR0cHM6
Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTMzNjM3Ng0KKyAqLw0KK3B1
YmxpYyB2b2lkIHRlc3RCdWczMzYwNDYoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCisJU3RyaW5nIGV4
dGVybmFsU291cmNlTG9jYXRpb24gPSBnZXRFeHRlcm5hbEZvbGRlcigpICsgRmlsZS5zZXBhcmF0
b3IgKyAiMzM2MDQ2c3JjIjsNCisJSUphdmFQcm9qZWN0IHByb2plY3QgPSB0aGlzLmdldEphdmFQ
cm9qZWN0KCIvQXR0YWNoU291cmNlVGVzdHMiKTsNCisJSGFzaHRhYmxlIGphdmFDb3JlT3B0aW9u
cyA9IEphdmFDb3JlLmdldE9wdGlvbnMoKTsNCisJSUphdmFQcm9qZWN0IGltcG9ydGVkUHJvamVj
dCA9IG51bGw7DQorCXRyeSB7DQorCQkNCisJCVN0cmluZyBjbGFzc3BhdGhDb250ZW50ID0gIjw/
eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuIiArDQorCQkiPGNsYXNz
cGF0aD5cbiIgKw0KKwkJIiAgICA8Y2xhc3NwYXRoZW50cnkga2luZD1cImxpYlwiIHBhdGg9XCJh
dHRhY2guamFyXCIvPlxuIiArDQorCQkiICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPVwibGliXCIg
cGF0aD1cImF0dGFjaDIuamFyXCIvPlxuIiArDQorCQkiICAgIDxjbGFzc3BhdGhlbnRyeSBraW5k
PVwibGliXCIgcGF0aD1cInRlc3QuamFyXCIvPlxuIiArIA0KKwkJIiAgICA8Y2xhc3NwYXRoZW50
cnkga2luZD1cImxpYlwiIHBhdGg9XCJ1cGRhdGUuamFyXCIvPlxuIiArICAgDQorCQkiICAgIDxj
bGFzc3BhdGhlbnRyeSBraW5kPVwibGliXCIgcGF0aD1cImZ1bGwuamFyXCIvPlxuIiArDQorCQki
ICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPVwibGliXCIgcGF0aD1cInRlc3QyLmphclwiLz5cbiIg
KyAgDQorCQkiICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPVwibGliXCIgcGF0aD1cInRlc3Q0Lmph
clwiLz4gIFxuIiArICANCisJCSIgICAgPGNsYXNzcGF0aGVudHJ5IGtpbmQ9XCJsaWJcIiBwYXRo
PVwidGVzdDUuamFyXCIvPiAgXG4iICsgIA0KKwkJIiAgICA8Y2xhc3NwYXRoZW50cnkga2luZD1c
ImxpYlwiIHBhdGg9XCJ0ZXN0Ni5qYXJcIi8+XG4iICsNCisJCSIgICAgPGNsYXNzcGF0aGVudHJ5
IGtpbmQ9XCJsaWJcIiBwYXRoPVwidGVzdDcuamFyXCIvPlxuIiArDQorCQkiICAgIDxjbGFzc3Bh
dGhlbnRyeSBraW5kPVwibGliXCIgcGF0aD1cIjI2NzA0Ni5qYXJcIi8+XG4iICsNCisJCSIgICAg
PGNsYXNzcGF0aGVudHJ5IGtpbmQ9XCJsaWJcIiBwYXRoPVwiYnVnMzM2MDQ2LmphclwiIHNvdXJj
ZXBhdGg9XCIiICsgZXh0ZXJuYWxTb3VyY2VMb2NhdGlvbiArICJcIi8+XG4iICsNCisJCSIgICAg
PGNsYXNzcGF0aGVudHJ5IGtpbmQ9XCJsaWJcIiBwYXRoPVwibGliXCIvPlxuIiArDQorCQkiICAg
IDxjbGFzc3BhdGhlbnRyeSBraW5kPVwic3JjXCIgcGF0aD1cInNyY1wiIG91dHB1dD1cInNyY1wi
Lz5cbiIgKw0KKwkJIiAgICA8Y2xhc3NwYXRoZW50cnkga2luZD1cInZhclwiIHBhdGg9XCJKQ0xf
TElCXCIvPlxuIiArDQorCQkiICAgIDxjbGFzc3BhdGhlbnRyeSBraW5kPVwib3V0cHV0XCIgcGF0
aD1cImJpblwiLz5cbiIgKw0KKwkJIjwvY2xhc3NwYXRoPiI7DQorCQlJV29ya3NwYWNlIHdvcmtz
cGFjZSA9IFJlc291cmNlc1BsdWdpbi5nZXRXb3Jrc3BhY2UoKTsNCisJCQ0KKwkJSVBhdGggc291
cmNlTG9jYXRpb24gPSBwcm9qZWN0LmdldFByb2plY3QoKS5nZXRMb2NhdGlvbigpOw0KKwkJSVBh
dGggZGVzdGluYXRpb24gPSBuZXcgUGF0aChnZXRFeHRlcm5hbEZvbGRlcigpKS5hcHBlbmQoIklt
cG9ydGVkUHJvamVjdCIpOw0KKwkJU3RyaW5nIGNsYXNzcGF0aExvY2F0aW9uID0gZGVzdGluYXRp
b24uYXBwZW5kKCIuY2xhc3NwYXRoIikudG9TdHJpbmcoKTsNCisJCUZpbGUgc3JjRm9sZGVyID0g
ZGVzdGluYXRpb24uYXBwZW5kKCIzMzYwNDZzcmMiKS50b0ZpbGUoKTsNCisJCWNvcHlEaXJlY3Rv
cnkobmV3IEZpbGUoc291cmNlTG9jYXRpb24udG9TdHJpbmcoKSksIG5ldyBGaWxlKGRlc3RpbmF0
aW9uLnRvU3RyaW5nKCkpKTsNCisJDQorCQlwcm9qZWN0LmdldFByb2plY3QoKS5jbG9zZShudWxs
KTsNCisNCisJCVN5c3RlbS5vdXQucHJpbnRsbigiY2xhc3NwYXRoTG9jYXRpb246ICIrIGNsYXNz
cGF0aExvY2F0aW9uKTsNCisJCVN5c3RlbS5vdXQucHJpbnRsbigicHJvamVjdCBsb2NhdGlvbjoi
ICsgc291cmNlTG9jYXRpb24pOw0KKwkJRmlsZU91dHB1dFN0cmVhbSBmb3MgPSBuZXcgRmlsZU91
dHB1dFN0cmVhbShjbGFzc3BhdGhMb2NhdGlvbik7DQorCQlmb3Mud3JpdGUoY2xhc3NwYXRoQ29u
dGVudC5nZXRCeXRlcygpKTsNCisJCWFzc2VydFRydWUoc3JjRm9sZGVyLnJlbmFtZVRvKG5ldyBG
aWxlKGdldEV4dGVybmFsRm9sZGVyKCkgKyBGaWxlLnNlcGFyYXRvciArICIzMzYwNDZzcmMiKSkp
Ow0KKwkJZm9zLmNsb3NlKCk7DQorDQorCQkNCisJCUlQcm9qZWN0IG5ld1Byb2plY3QgPSB3b3Jr
c3BhY2UuZ2V0Um9vdCgpLmdldFByb2plY3QoIkltcG9ydGVkUHJvamVjdCIpOw0KKwkJVVJJIHVy
aT0gIFVSSVV0aWwudG9VUkkoZGVzdGluYXRpb24pOw0KKwkJSVByb2plY3REZXNjcmlwdGlvbiBk
ZXNjID0gd29ya3NwYWNlLm5ld1Byb2plY3REZXNjcmlwdGlvbihuZXdQcm9qZWN0LmdldE5hbWUo
KSk7DQorCQlkZXNjLnNldExvY2F0aW9uVVJJKHVyaSk7DQorCQluZXdQcm9qZWN0LmNyZWF0ZShk
ZXNjLCBudWxsKTsNCisJCWlmICghbmV3UHJvamVjdC5pc09wZW4oKSkgew0KKwkJCW5ld1Byb2pl
Y3Qub3BlbihudWxsKTsNCisJCX0NCisJCWltcG9ydGVkUHJvamVjdCA9IEphdmFDb3JlLmNyZWF0
ZShuZXdQcm9qZWN0KTsNCisJCWltcG9ydGVkUHJvamVjdC5zZXRPcHRpb25zKHByb2plY3QuZ2V0
T3B0aW9ucyhmYWxzZSkpOw0KKw0KKwkJKChKYXZhUHJvamVjdClpbXBvcnRlZFByb2plY3QpLnJl
c29sdmVDbGFzc3BhdGgoaW1wb3J0ZWRQcm9qZWN0LmdldFJhd0NsYXNzcGF0aCgpKTsNCisJCUlG
b2xkZXIgbGlua2VkRm9sZGVyID0gRXh0ZXJuYWxGb2xkZXJzTWFuYWdlci5nZXRFeHRlcm5hbEZv
bGRlcnNNYW5hZ2VyKCkuZ2V0Rm9sZGVyKG5ldyBQYXRoKGdldEV4dGVybmFsRm9sZGVyKCkgKyBG
aWxlLnNlcGFyYXRvciArICIzMzYwNDZzcmMiKSk7DQorCQlhc3NlcnROb3ROdWxsKGxpbmtlZEZv
bGRlcik7DQorCX0NCisJZmluYWxseSB7DQorCQlpZiAoaW1wb3J0ZWRQcm9qZWN0ICE9IG51bGwp
DQorCQkJaW1wb3J0ZWRQcm9qZWN0LmdldFByb2plY3QoKS5kZWxldGUodHJ1ZSwgdHJ1ZSwgbnVs
bCk7DQorCQlwcm9qZWN0LmdldFByb2plY3QoKS5vcGVuKG51bGwpOw0KKwkJSmF2YUNvcmUuc2V0
T3B0aW9ucyhqYXZhQ29yZU9wdGlvbnMpOw0KKwl9DQorfQ0KIH0NCg==
</data>
<flag name="review"
          id="39118"
          type_id="6"
          status="?"
          setter="jarthana"
    />
          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>188591</attachid>
            <date>2011-02-09 09:50:00 -0500</date>
            <delta_ts>2011-02-18 01:51:11 -0500</delta_ts>
            <desc>Test projects</desc>
            <filename>336046src.zip</filename>
            <type>application/octet-stream</type>
            <size>899</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">UEsDBAoAAAAAAG9WRD4AAAAAAAAAAAAAAAAMAAAAMzM2MDQ2c3JjL3AvUEsDBBQAAAAIAIRsQz66
lG5OOgAAAD8AAAAaAAAAMzM2MDQ2c3JjL3AvQnVnMzM2MDQ2LmphdmErSEzOTkxPVSiw5uUqKE3K
yUxWSM5JLC5WcCpNNzY2MzAxU6jm5eKESpXlZ6YopOXna2hW1/JyAREAUEsDBBQAAAAIALtsQz6e
Wuuw6QEAAPoCAAANAAAAYnVnMzM2MDQ2LmphcgvwZmYRYeAAwl05znYMSICTgYXB1zXEUdfTz03/
3ykGBmaGAG92DpAUE1RJAE7NIkAM1+zr6Ofp5hocoufr9tn3zGkfb129i7zeulrnzpzfHGRwxfjB
0yI9L18dT9+LpatYOGe8lNTIqLD6qWXxXFz0ibjqNAbRrE9FH4sYwdbvU7bebws03A5qPRfYuko0
60EOLNBHOK8ZTV4QLO9Umm5sbGZgYqaXnJNYXGz9Nf+6HRsbmzKbYxmbmhvbO6ba5ZdKkpONmYWN
y9jE3Nga1xzZ5PJ3zpE9JbX/l6y58kTIjc1s9pk9Z4Ss3djSeM8auLGJPf8zJUSPLY3NT44tjM3M
ja1u/pk9Ifsv3VlyZdGEI0vmhLixKc7/8+TInA1HFvkIyGudCJo0MfLMiQOvm1OWml64sOVPjRvb
ugd/Li16ErLdZ4KX3Y49cidMebp4HFJ5FA6wpDC+ZZn0xmGe3YQ0lktrom5LWpg1Ld3ZoCIdMaGz
Udrjk4MIQ2acAq+J1LpI6TPsSSW9ZzykJB9K/Ty4igUcdmLuIrfuAn1uzwgKO0YmEQbUyINFKyjm
UQFKOkDXihwlIijabBmwpwKQCVwMuKMOAfYwQCISYSMoKpE9Ioii/g4DlogN8GZlA0myAOEbIP2D
EaQHAFBLAQIUCwoAAAAAAG9WRD4AAAAAAAAAAAAAAAAMAAAAAAAAAAAAEAAAAAAAAAAzMzYwNDZz
cmMvcC9QSwECFAsUAAAACACEbEM+upRuTjoAAAA/AAAAGgAAAAAAAAABACAAAAAqAAAAMzM2MDQ2
c3JjL3AvQnVnMzM2MDQ2LmphdmFQSwECFAsUAAAACAC7bEM+nlrrsOkBAAD6AgAADQAAAAAAAAAA
ACAAAACcAAAAYnVnMzM2MDQ2LmphclBLBQYAAAAAAwADAL0AAACwAgAAAAA=
</data>

          </attachment>
      

    </bug>

</bugzilla>