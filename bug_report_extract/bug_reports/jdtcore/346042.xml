<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>346042</bug_id>
          
          <creation_ts>2011-05-17 03:44:00 -0400</creation_ts>
          <short_desc>[1.5][compiler] ecj compiles code rejected by javac for varargs parameters of inaccessible type</short_desc>
          <delta_ts>2011-12-06 06:18:19 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.8 M4</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ayushman Jain">amj87.iitr</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>jarthana</cc>
    
    <cc>Olivier_Thomann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1931442</commentid>
    <comment_count>0</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-05-17 03:44:07 -0400</bug_when>
    <thetext>Eclipse(I20110514-0800) compiles the following code fine, but generates invalid bytecode which fails at runtime with a java.lang.IllegalAccessError.

A.java
----------
package p1;

class A {
  A() {
  }
}
------------

B.java
------------
package p1;
import java.io.*;
public class B extends A {
 public B() {}

 public void foo(A... args) {
  System.out.println(args);
 }
}
-----------

C.java
----------
package p2;
import p1.B;
public class C {

 public static final void main(String[] args) {
   (new B()).foo(new B(), new B());
 }
}

javac7b138 correctly complains at compile time
C:\Documents and Settings\Administrator\Desktop\Eclipse builds\eclipse-SDK-I2011
0514-0800-win32\eclipse\workspace\A\src\p2\C.java:6: error: method foo in class
B cannot be applied to given types;
   (new B()).foo(new B(), new B());
            ^
  required: A[]
  found: B,B
  reason: formal varargs element type A is not accessible from class C
1 error
--------------------------------------------------------------------

This was a javac bug which is fixed with http://bugs.sun.com/view_bug.do?bug_id=6313164</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1931650</commentid>
    <comment_count>1</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2011-05-17 08:43:00 -0400</bug_when>
    <thetext>I would target 3.7.1 to match the Java 7 behavior when the Java 7 support is released.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1973955</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-08-04 00:24:13 -0400</bug_when>
    <thetext>Don&apos;t expect to get to this before 3.8. Retargetting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2025677</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-11-13 23:58:28 -0500</bug_when>
    <thetext>Released fix for 3.8 M4 via commit b8b8ddf64dedf8c9c31f5a6a372768428e737f63.
We now issue a near identical message as javac. For the case in comment#0
we report

&quot;The method foo(A...) of type B is not applicable as the formal varargs element type A is not accessible here&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2036242</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-12-06 06:18:19 -0500</bug_when>
    <thetext>Verified for 3.8M4 with build I20111204-2000.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>