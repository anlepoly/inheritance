<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>398520</bug_id>
          
          <creation_ts>2013-01-18 11:56:00 -0500</creation_ts>
          <short_desc>[bindings][annotations] Annotations in binary constructor do not match the source code</short_desc>
          <delta_ts>2013-03-12 06:19:49 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Mac OS X</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>4.3 M6</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sebastian Zarnekow">Sebastian.Zarnekow</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          <cc>jarthana</cc>
    
    <cc>manpalat</cc>
    
    <cc>Olivier_Thomann</cc>
    
    <cc>stephan.herrmann</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2204866</commentid>
    <comment_count>0</comment_count>
    <who name="Sebastian Zarnekow">Sebastian.Zarnekow</who>
    <bug_when>2013-01-18 11:56:16 -0500</bug_when>
    <thetext>Test case:

package pack;
import java.util.*
public abstract class T&lt;K, V&gt; {
	public abstract class C extends AbstractCollection&lt;V&gt; {
		public abstract class Iter implements Iterator&lt;V&gt; {
			Iter() {}
			Iter(@Annot String s, int i, @Annot Iterator&lt;V&gt; iterator) {
			}
			Iter(int i, @Annot String s, int j, @Annot String s2) {
			}
		}
	}
	@interface Annot {}
}

Note that everything is ok when working with sources and in the class file when working with java.lang.reflect - the misbehavior can only be observed with binary methods:
I put the compiled class into a jar and put that one onto the classpath of a new project. In that project, I do something along these lines:

IMethodBinding method = // .. points to the constructor Iter(@Annot String s, int i, @Annot Iterator&lt;V&gt; iterator)
ITypeBinding[] parameterTypes = method.getParameterTypes();
for (int i = 0; i &lt; parameterTypes.length; i++) {
  IAnnotationBinding[] parameterAnnotations = method.getParameterAnnotations(i);
  System.out.println(parameterAnnotations.length);
}


This prints 0, 1, 0 to the console which indicates that the annotations of the synthetic constructor param at index 0 will be returned by method.getParameterAnnotations(i) instead of the real annotations of the constructor param at index 1.

Is there any internal means available in pre 3.9 that allows to fix this on our side? Any workaround / hack that allows to retrieve the right information?

AFAIK org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.retrieveAnnotationHolder(Binding, boolean) already returns the wrong sub-array of the actual annotations so currently I don&apos;t see a way to work around this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2204870</commentid>
    <comment_count>1</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2013-01-18 12:08:22 -0500</bug_when>
    <thetext>I guess you expect 1, 0, 1?
If method.getParameterTypes(); doesn&apos;t expose the synthetic arguments, method.getParameterAnnotations(..) should not do it as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2204872</commentid>
    <comment_count>2</comment_count>
    <who name="Sebastian Zarnekow">Sebastian.Zarnekow</who>
    <bug_when>2013-01-18 12:10:36 -0500</bug_when>
    <thetext>(In reply to comment #1)
&gt; I guess you expect 1, 0, 1?

Yes

&gt; If method.getParameterTypes(); doesn&apos;t expose the synthetic arguments,
&gt; method.getParameterAnnotations(..) should not do it as well.

That would be helpful. It&apos;s unfortunately not possible to simply query for the annotation at index 3 since the underlying impl uses an array with only three entries so I end up with an AIOOBE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2204877</commentid>
    <comment_count>3</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2013-01-18 12:17:08 -0500</bug_when>
    <thetext>If I get some time today, I&apos;ll take a quick look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2204966</commentid>
    <comment_count>4</comment_count>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2013-01-18 15:06:51 -0500</bug_when>
    <thetext>The problem was introduced with the fix for bug 342757.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2205304</commentid>
    <comment_count>5</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-21 00:53:29 -0500</bug_when>
    <thetext>(In reply to comment #3)
&gt; If I get some time today, I&apos;ll take a quick look.

Thanks for looking into this, Olivier!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2205626</commentid>
    <comment_count>6</comment_count>
      <attachid>225905</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2013-01-21 13:57:32 -0500</bug_when>
    <thetext>Created attachment 225905
Proposed fix

Patch to be reviewed. More tests need to be added for annotations on member types constructors.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2205627</commentid>
    <comment_count>7</comment_count>
      <attachid>225906</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2013-01-21 13:57:51 -0500</bug_when>
    <thetext>Created attachment 225906
Regression test

Regression test for this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2205628</commentid>
    <comment_count>8</comment_count>
      <attachid>225907</attachid>
    <who name="Olivier Thomann">Olivier_Thomann</who>
    <bug_when>2013-01-21 13:58:39 -0500</bug_when>
    <thetext>Created attachment 225907
New binary file to add into org.eclipse.jdt.core.tests.model\workspace\Converter15\bins</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2210281</commentid>
    <comment_count>9</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-01-31 02:42:49 -0500</bug_when>
    <thetext>Patch looks good. Will release it for 4.3 M6.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2222205</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2013-02-26 13:00:52 -0500</bug_when>
    <thetext>Fix and test released in master:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=c9c1b68cd405343068c14dea9372b8ba805495d7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2229393</commentid>
    <comment_count>11</comment_count>
    <who name="Manoj Palat Away Until May 11 2015">manpalat</who>
    <bug_when>2013-03-12 05:54:44 -0400</bug_when>
    <thetext>Verified for 4.3 M6 for build id I20130310-2000 

(Note: verified by debug/code inspection)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225905</attachid>
            <date>2013-01-21 13:57:00 -0500</date>
            <delta_ts>2013-01-21 13:57:32 -0500</delta_ts>
            <desc>Proposed fix</desc>
            <filename>patch_398520.txt</filename>
            <type>text/plain</type>
            <size>4745</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9jbGFzc2ZtdC9NZXRob2RJbmZvV2l0aFBhcmFtZXRlckFubm90
YXRpb25zLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9q
ZHQvaW50ZXJuYWwvY29tcGlsZXIvY2xhc3NmbXQvTWV0aG9kSW5mb1dpdGhQYXJhbWV0ZXJBbm5v
dGF0aW9ucy5qYXZhCmluZGV4IDhmMzFiM2UuLjQwN2U1YTYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xp
cHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9j
bGFzc2ZtdC9NZXRob2RJbmZvV2l0aFBhcmFtZXRlckFubm90YXRpb25zLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2NsYXNzZm10L01ldGhvZEluZm9XaXRoUGFyYW1ldGVyQW5ub3RhdGlvbnMuamF2YQpAQCAt
MTMsMjcgKzEzLDE0IEBACiBwYWNrYWdlIG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxl
ci5jbGFzc2ZtdDsKIAogaW1wb3J0IG9yZy5lY2xpcHNlLmpkdC5pbnRlcm5hbC5jb21waWxlci5l
bnYuSUJpbmFyeUFubm90YXRpb247Ci1pbXBvcnQgb3JnLmVjbGlwc2UuamR0LmludGVybmFsLmNv
bXBpbGVyLnV0aWwuVXRpbDsKIAogY2xhc3MgTWV0aG9kSW5mb1dpdGhQYXJhbWV0ZXJBbm5vdGF0
aW9ucyBleHRlbmRzIE1ldGhvZEluZm9XaXRoQW5ub3RhdGlvbnMgewogCXByaXZhdGUgQW5ub3Rh
dGlvbkluZm9bXVtdIHBhcmFtZXRlckFubm90YXRpb25zOwogCiBNZXRob2RJbmZvV2l0aFBhcmFt
ZXRlckFubm90YXRpb25zKE1ldGhvZEluZm8gbWV0aG9kSW5mbywgQW5ub3RhdGlvbkluZm9bXSBh
bm5vdGF0aW9ucywgQW5ub3RhdGlvbkluZm9bXVtdIHBhcmFtZXRlckFubm90YXRpb25zKSB7CiAJ
c3VwZXIobWV0aG9kSW5mbywgYW5ub3RhdGlvbnMpOwotCWlmIChtZXRob2RJbmZvLmlzQ29uc3Ry
dWN0b3IoKSkgewotCQlpbnQgcGFyYW1ldGVyc0NvdW50ID0gVXRpbC5nZXRQYXJhbWV0ZXJDb3Vu
dChtZXRob2RJbmZvLmdldE1ldGhvZERlc2NyaXB0b3IoKSk7Ci0JCWlmIChwYXJhbWV0ZXJBbm5v
dGF0aW9ucy5sZW5ndGggPCBwYXJhbWV0ZXJzQ291bnQpIHsKLQkJCUFubm90YXRpb25JbmZvW11b
XSB0ZW1wID0gbmV3IEFubm90YXRpb25JbmZvW3BhcmFtZXRlcnNDb3VudF1bXTsKLQkJCVN5c3Rl
bS5hcnJheWNvcHkocGFyYW1ldGVyQW5ub3RhdGlvbnMsIDAsIHRlbXAsIDEsIHBhcmFtZXRlckFu
bm90YXRpb25zLmxlbmd0aCk7Ci0JCQl0aGlzLnBhcmFtZXRlckFubm90YXRpb25zID0gdGVtcDsK
LQkJfSBlbHNlIHsKLQkJCXRoaXMucGFyYW1ldGVyQW5ub3RhdGlvbnMgPSBwYXJhbWV0ZXJBbm5v
dGF0aW9uczsKLQkJfQotCX0gZWxzZSB7Ci0JCXRoaXMucGFyYW1ldGVyQW5ub3RhdGlvbnMgPSBw
YXJhbWV0ZXJBbm5vdGF0aW9uczsKLQl9CisJdGhpcy5wYXJhbWV0ZXJBbm5vdGF0aW9ucyA9IHBh
cmFtZXRlckFubm90YXRpb25zOwogfQotCiBwdWJsaWMgSUJpbmFyeUFubm90YXRpb25bXSBnZXRQ
YXJhbWV0ZXJBbm5vdGF0aW9ucyhpbnQgaW5kZXgpIHsKIAlyZXR1cm4gdGhpcy5wYXJhbWV0ZXJB
bm5vdGF0aW9uc1tpbmRleF07CiB9CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9t
b2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9CaW5hcnlNZXRob2QuamF2YSBiL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0Jp
bmFyeU1ldGhvZC5qYXZhCmluZGV4IDFkMWZkMjkuLjA5ZTY3ZmQgMTAwNjQ0Ci0tLSBhL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0JpbmFy
eU1ldGhvZC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb3JlL0JpbmFyeU1ldGhvZC5qYXZhCkBAIC04NCwyMSArODQsNTEgQEAK
IAkJCWFyZ3VtZW50TmFtZXNbal0gPSAoImFyZyIgKyBqKS50b0NoYXJBcnJheSgpOyAvLyROT04t
TkxTLTEkCiAJCX0KIAl9CisJaW50IHN0YXJ0SW5kZXggPSAwOworCXRyeSB7CisJCWlmIChpc0Nv
bnN0cnVjdG9yKCkpIHsKKwkJCUlUeXBlIGRlY2xhcmluZ1R5cGUgPSB0aGlzLmdldERlY2xhcmlu
Z1R5cGUoKTsKKwkJCWlmIChkZWNsYXJpbmdUeXBlLmlzRW51bSgpKSB7CisJCQkJc3RhcnRJbmRl
eCA9IDI7CisJCQl9IGVsc2UgaWYgKGRlY2xhcmluZ1R5cGUuaXNNZW1iZXIoKQorCQkJCQkmJiAh
RmxhZ3MuaXNTdGF0aWMoZGVjbGFyaW5nVHlwZS5nZXRGbGFncygpKSkgeworCQkJCXN0YXJ0SW5k
ZXggPSAxOworCQkJfQorCQl9CisJfSBjYXRjaChKYXZhTW9kZWxFeGNlcHRpb24gZSkgeworCQkv
LyBpZ25vcmUKKwl9CiAJZm9yIChpbnQgaT0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7Ci0JCUxvY2Fs
VmFyaWFibGUgbG9jYWxWYXJpYWJsZSA9IG5ldyBMb2NhbFZhcmlhYmxlKAotCQkJCXRoaXMsCi0J
CQkJbmV3IFN0cmluZyhhcmd1bWVudE5hbWVzW2ldKSwKLQkJCQkwLAotCQkJCS0xLAotCQkJCTAs
Ci0JCQkJLTEsCi0JCQkJdGhpcy5wYXJhbWV0ZXJUeXBlc1tpXSwKLQkJCQludWxsLAotCQkJCS0x
LAotCQkJCXRydWUpOwotCQlsb2NhbFZhcmlhYmxlc1tpXSA9IGxvY2FsVmFyaWFibGU7Ci0JCUlB
bm5vdGF0aW9uW10gYW5ub3RhdGlvbnMgPSBnZXRBbm5vdGF0aW9ucyhsb2NhbFZhcmlhYmxlLCBp
bmZvLmdldFBhcmFtZXRlckFubm90YXRpb25zKGkpKTsKLQkJbG9jYWxWYXJpYWJsZS5hbm5vdGF0
aW9ucyA9IGFubm90YXRpb25zOworCQlpZiAoaSA8IHN0YXJ0SW5kZXgpIHsKKwkJCUxvY2FsVmFy
aWFibGUgbG9jYWxWYXJpYWJsZSA9IG5ldyBMb2NhbFZhcmlhYmxlKAorCQkJCQl0aGlzLAorCQkJ
CQluZXcgU3RyaW5nKGFyZ3VtZW50TmFtZXNbaV0pLAorCQkJCQkwLAorCQkJCQktMSwKKwkJCQkJ
MCwKKwkJCQkJLTEsCisJCQkJCXRoaXMucGFyYW1ldGVyVHlwZXNbaV0sCisJCQkJCW51bGwsCisJ
CQkJCS0xLAorCQkJCQl0cnVlKTsKKwkJCWxvY2FsVmFyaWFibGVzW2ldID0gbG9jYWxWYXJpYWJs
ZTsKKwkJCWxvY2FsVmFyaWFibGUuYW5ub3RhdGlvbnMgPSBBbm5vdGF0aW9uLk5PX0FOTk9UQVRJ
T05TOworCQl9IGVsc2UgeworCQkJTG9jYWxWYXJpYWJsZSBsb2NhbFZhcmlhYmxlID0gbmV3IExv
Y2FsVmFyaWFibGUoCisJCQkJCXRoaXMsCisJCQkJCW5ldyBTdHJpbmcoYXJndW1lbnROYW1lc1tp
XSksCisJCQkJCTAsCisJCQkJCS0xLAorCQkJCQkwLAorCQkJCQktMSwKKwkJCQkJdGhpcy5wYXJh
bWV0ZXJUeXBlc1tpXSwKKwkJCQkJbnVsbCwKKwkJCQkJLTEsCisJCQkJCXRydWUpOworCQkJbG9j
YWxWYXJpYWJsZXNbaV0gPSBsb2NhbFZhcmlhYmxlOworCQkJSUFubm90YXRpb25bXSBhbm5vdGF0
aW9ucyA9IGdldEFubm90YXRpb25zKGxvY2FsVmFyaWFibGUsIGluZm8uZ2V0UGFyYW1ldGVyQW5u
b3RhdGlvbnMoaSAtIHN0YXJ0SW5kZXgpKTsKKwkJCWxvY2FsVmFyaWFibGUuYW5ub3RhdGlvbnMg
PSBhbm5vdGF0aW9uczsKKwkJfQogCX0KIAlyZXR1cm4gbG9jYWxWYXJpYWJsZXM7CiB9CmRpZmYg
LS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9vcmcvZWNsaXBzZS9qZHQvaW50ZXJu
YWwvY29yZS9DbGFzc0ZpbGVJbmZvLmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS9tb2RlbC9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29yZS9DbGFzc0ZpbGVJbmZvLmphdmEKaW5kZXggZTE3
MTRhMC4uZDUxZDQwNCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvbW9kZWwvb3Jn
L2VjbGlwc2UvamR0L2ludGVybmFsL2NvcmUvQ2xhc3NGaWxlSW5mby5qYXZhCisrKyBiL29yZy5l
Y2xpcHNlLmpkdC5jb3JlL21vZGVsL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb3JlL0NsYXNz
RmlsZUluZm8uamF2YQpAQCAtMzE0LDggKzMxNCwyMSBAQAogCQkJCWFyZ3VtZW50TmFtZXNbal0g
PSAoImFyZyIgKyBqKS50b0NoYXJBcnJheSgpOyAvLyROT04tTkxTLTEkCiAJCQl9CiAJCX0KLQkJ
Zm9yIChpbnQgaiA9IDA7IGogPCBtYXg7IGorKykgewotCQkJSUJpbmFyeUFubm90YXRpb25bXSBw
YXJhbWV0ZXJBbm5vdGF0aW9ucyA9IG1ldGhvZEluZm8uZ2V0UGFyYW1ldGVyQW5ub3RhdGlvbnMo
aik7CisJCWludCBzdGFydEluZGV4ID0gMDsKKwkJdHJ5IHsKKwkJCWlmIChpc0NvbnN0cnVjdG9y
KSB7CisJCQkJaWYgKHR5cGUuaXNFbnVtKCkpIHsKKwkJCQkJc3RhcnRJbmRleCA9IDI7CisJCQkJ
fSBlbHNlIGlmICh0eXBlLmlzTWVtYmVyKCkKKwkJCQkJCSYmICFGbGFncy5pc1N0YXRpYyh0eXBl
LmdldEZsYWdzKCkpKSB7CisJCQkJCXN0YXJ0SW5kZXggPSAxOworCQkJCX0KKwkJCX0KKwkJfSBj
YXRjaChKYXZhTW9kZWxFeGNlcHRpb24gZSkgeworCQkJLy8gaWdub3JlCisJCX0KKwkJZm9yIChp
bnQgaiA9IHN0YXJ0SW5kZXg7IGogPCBtYXg7IGorKykgeworCQkJSUJpbmFyeUFubm90YXRpb25b
XSBwYXJhbWV0ZXJBbm5vdGF0aW9ucyA9IG1ldGhvZEluZm8uZ2V0UGFyYW1ldGVyQW5ub3RhdGlv
bnMoaiAtIHN0YXJ0SW5kZXgpOwogCQkJaWYgKHBhcmFtZXRlckFubm90YXRpb25zICE9IG51bGwp
IHsKIAkJCQlMb2NhbFZhcmlhYmxlIGxvY2FsVmFyaWFibGUgPSBuZXcgTG9jYWxWYXJpYWJsZSgK
IAkJCQkJCW1ldGhvZCw=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>225906</attachid>
            <date>2013-01-21 13:57:00 -0500</date>
            <delta_ts>2013-01-21 13:57:51 -0500</delta_ts>
            <desc>Regression test</desc>
            <filename>patch_398520_tests.txt</filename>
            <type>text/plain</type>
            <size>3025</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNs
aXBzZS9qZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMTVUZXN0LmphdmEgYi9vcmcuZWNs
aXBzZS5qZHQuY29yZS50ZXN0cy5tb2RlbC9zcmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMv
ZG9tL0FTVENvbnZlcnRlcjE1VGVzdC5qYXZhCmluZGV4IGU2NzM2N2QuLjI4MTY1OWUgMTAwNjQ0
Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLm1vZGVsL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9kb20vQVNUQ29udmVydGVyMTVUZXN0LmphdmEKKysrIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUudGVzdHMubW9kZWwvc3JjL29yZy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2Rv
bS9BU1RDb252ZXJ0ZXIxNVRlc3QuamF2YQpAQCAtNTMsNyArNTMsNyBAQAogCXN0YXRpYyB7CiAv
LwkJVEVTVFNfTlVNQkVSUyA9IG5ldyBpbnRbXSB7IDM1MyB9OwogLy8JCVRFU1RTX1JBTkdFID0g
bmV3IGludFtdIHsgMzI1LCAtMSB9OwotLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsi
dGVzdEJ1ZzM1MzQ3NCJ9OworLy8JCVRFU1RTX05BTUVTID0gbmV3IFN0cmluZ1tdIHsidGVzdEJ1
ZzM5ODUyMCJ9OwogCX0KIAlwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7CiAJCXJldHVybiBi
dWlsZE1vZGVsVGVzdFN1aXRlKEFTVENvbnZlcnRlcjE1VGVzdC5jbGFzcyk7CkBAIC0xMTQ1Myw0
ICsxMTQ1Myw1MyBAQAogCQl9CiAJfQogCisJLyoKKwkgKiBodHRwczovL2J1Z3MuZWNsaXBzZS5v
cmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzk4NTIwCisJICovCisJcHVibGljIHZvaWQgdGVzdEJ1
ZzM5ODUyMCgpIHRocm93cyBDb3JlRXhjZXB0aW9uIHsKKwkJU3RyaW5nIGphckxvY2F0aW9uID0g
Z2V0V29ya3NwYWNlUGF0aCgpKyJDb252ZXJ0ZXIxNS9iaW5zL2J1ZzM5ODUyMC5qYXIiOworCQlJ
SmF2YVByb2plY3QganAgPSBjcmVhdGVKYXZhUHJvamVjdCgiQnVnMzk4NTIwIiwgbmV3IFN0cmlu
Z1tdeyJzcmMifSwgbmV3IFN0cmluZ1tdeyJDT05WRVJURVJfSkNMMTVfTElCIiwgamFyTG9jYXRp
b259LCAiYmluIiwgIjEuNSIpOworCQl0cnkgeworCQkJdGhpcy53b3JraW5nQ29weSA9IGdldFdv
cmtpbmdDb3B5KCIvQnVnMzk4NTIwL3NyYy90ZXN0QnVnMzk4NTIwL0MuamF2YSIsIHRydWUvKnJl
c29sdmUqLyk7CisJCQlTdHJpbmcgY29udGVudHMgPQorCQkJCSJwYWNrYWdlIHRlc3RCdWczOTg1
MjA7XG4iICsKKwkJCQkiaW1wb3J0IHBhY2suKjtcbiIgKworCQkJCSJwdWJsaWMgY2xhc3MgQyB7
XG4iICsKKwkJCQkiCSBwdWJsaWMgT2JqZWN0IGZvbygpIHtcbiIgKworCQkJCSIgICAgICAgIHJl
dHVybiBuZXcgVDxTdHJpbmcsIFN0cmluZz4oKS5uZXcgQygpLm5ldyBJdGVyKFwiXCIsIDAsIG51
bGwpO1xuIiArCisJCQkJIiAgICB9XG4iICsKKwkJCQkifVxuIjsKKwkJCUFTVE5vZGUgbm9kZSA9
IGJ1aWxkQVNUKAorCQkJCQljb250ZW50cywKKwkJCQkJdGhpcy53b3JraW5nQ29weSwKKwkJCQkJ
dHJ1ZSk7CisJCQlhc3NlcnROb3ROdWxsKCJObyBub2RlIiwgbm9kZSk7CisJCQlhc3NlcnRFcXVh
bHMoIk5vdCBhIGNvbXBpbGF0aW9uIHVuaXQiLCBBU1ROb2RlLkNPTVBJTEFUSU9OX1VOSVQsIG5v
ZGUuZ2V0Tm9kZVR5cGUoKSk7CisJCQlDb21waWxhdGlvblVuaXQgY29tcGlsYXRpb25Vbml0ID0g
KENvbXBpbGF0aW9uVW5pdCkgbm9kZTsKKwkJCWFzc2VydEVxdWFscygiR290IHByb2JsZW1zIiwg
MCwgY29tcGlsYXRpb25Vbml0LmdldFByb2JsZW1zKCkubGVuZ3RoKTsKKwkJCUFTVE5vZGUgYXN0
Tm9kZSA9IGdldEFTVE5vZGUoY29tcGlsYXRpb25Vbml0LCAwLCAwLCAwKTsKKwkJCWFzc2VydEVx
dWFscygiTm90IGEgcmV0dXJuIHN0YXRlbWVudCIsIEFTVE5vZGUuUkVUVVJOX1NUQVRFTUVOVCwg
YXN0Tm9kZS5nZXROb2RlVHlwZSgpKTsKKwkJCVJldHVyblN0YXRlbWVudCBzdGF0ZW1lbnQgPSAo
UmV0dXJuU3RhdGVtZW50KSBhc3ROb2RlOworCQkJRXhwcmVzc2lvbiBleHByZXNzaW9uID0gc3Rh
dGVtZW50LmdldEV4cHJlc3Npb24oKTsKKwkJCUNsYXNzSW5zdGFuY2VDcmVhdGlvbiBjcmVhdGlv
biA9IChDbGFzc0luc3RhbmNlQ3JlYXRpb24pIGV4cHJlc3Npb247CisJCQlJTWV0aG9kQmluZGlu
ZyBtZXRob2RCaW5kaW5nID0gY3JlYXRpb24ucmVzb2x2ZUNvbnN0cnVjdG9yQmluZGluZygpOwor
CQkJaW50W10gZXhwZWN0ZWRBbm5vdGF0aW9uc1NpemUgPSBuZXcgaW50W10geyAxLCAwLCAxfTsK
KwkJCWludFtdIGFjdHVhbEFubm90YXRpb25zU2l6ZSA9IG5ldyBpbnRbXSB7CisJCQkJCW1ldGhv
ZEJpbmRpbmcuZ2V0UGFyYW1ldGVyQW5ub3RhdGlvbnMoMCkubGVuZ3RoLAorCQkJCQltZXRob2RC
aW5kaW5nLmdldFBhcmFtZXRlckFubm90YXRpb25zKDEpLmxlbmd0aCwKKwkJCQkJbWV0aG9kQmlu
ZGluZy5nZXRQYXJhbWV0ZXJBbm5vdGF0aW9ucygyKS5sZW5ndGgKKwkJCX07CisJCQlhc3NlcnRB
cnJheUVxdWFscyhleHBlY3RlZEFubm90YXRpb25zU2l6ZSwgYWN0dWFsQW5ub3RhdGlvbnNTaXpl
KTsKKwkJfSBmaW5hbGx5IHsKKwkJCWRlbGV0ZVByb2plY3QoanApOworCQl9CisJfQorCisJcHJp
dmF0ZSB2b2lkIGFzc2VydEFycmF5RXF1YWxzKGludFtdIGV4cGVjdGVkQW5ub3RhdGlvbnNTaXpl
LAorCQkJaW50W10gYWN0dWFsQW5ub3RhdGlvbnNTaXplKSB7CisJCWFzc2VydEVxdWFscygid3Jv
bmcgYXJyYXkgc2l6ZSIsIGV4cGVjdGVkQW5ub3RhdGlvbnNTaXplLmxlbmd0aCwgYWN0dWFsQW5u
b3RhdGlvbnNTaXplLmxlbmd0aCk7CisJCWZvciAoaW50IGkgPSAwLCBtYXggPSBleHBlY3RlZEFu
bm90YXRpb25zU2l6ZS5sZW5ndGg7IGkgPCBtYXg7IGkrKykgeworCQkJYXNzZXJ0RXF1YWxzKCJX
cm9uZyBlbGVtZW50IGF0ICIgKyBpLCBleHBlY3RlZEFubm90YXRpb25zU2l6ZVtpXSwgYWN0dWFs
QW5ub3RhdGlvbnNTaXplW2ldKTsKKwkJfQorCX0KIH0KXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBm
aWxlCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>225907</attachid>
            <date>2013-01-21 13:58:00 -0500</date>
            <delta_ts>2013-01-21 13:58:39 -0500</delta_ts>
            <desc>New binary file to add into org.eclipse.jdt.core.tests.model\workspace\Converter15\bins</desc>
            <filename>bug398520.jar</filename>
            <type>application/octet-stream</type>
            <size>2039</size>
            <attacher name="Olivier Thomann">Olivier_Thomann</attacher>
            
              <data encoding="base64">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
</data>

          </attachment>
      

    </bug>

</bugzilla>