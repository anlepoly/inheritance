<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>403867</bug_id>
          
          <creation_ts>2013-03-20 04:31:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Suspect error about duplicate default methods</short_desc>
          <delta_ts>2013-03-26 12:35:50 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>4.3</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>380501</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Stephan Herrmann">stephan.herrmann</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2234074</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-20 04:31:34 -0400</bug_when>
    <thetext>As part of the work for upgrading our test infrastructure to use 8b81,
I had to modify org.eclipse.jdt.core.tests.compiler.regression.InterfaceMethodsTest.testSuperCall2
to be:

// ---
import java.util.*;
import java.util.stream.Stream;
public abstract class X&lt;E&gt; implements OrderedSet&lt;E&gt; {
	@Override
	public Stream&lt;E&gt; stream() {
		return List.super.stream(); // List is not a direct super interface
	}
	@Override
	public Stream&lt;E&gt; parallelStream() { return OrderedSet.super.parallelStream();}
   class Inner {
		public Stream&lt;E&gt; stream() {
			return OrderedSet.super.stream(); // not a super interface of the direct enclosing class
		}
	}
	@Override
	public boolean add(E o) {
		OrderedSet.super.add(o); // target not a default method
	}
	X() {
		OrderedSet.super(); // not applicable for super ctor call
	}
}
interface OrderedSet&lt;E&gt; extends List&lt;E&gt;, Set&lt;E&gt; {
	@Override
	boolean add(E o);
	@Override
   default Spliterator&lt;E&gt; spliterator() { return List.super.spliterator(); }
}
// --

This program generates 4 errors when compiled with javac 8b81.
Eclipse reports the same 4 errors, but in addition also reports againt
class X an error about there being unrelated default methods spliterator().

This is suspect since OrderedSet&apos;s implementation has replaced List and Set&apos;s
versions and these should be out of reckoning altogether.

See that there is no error reported against OrderedSet itself regarding
duplicate unrelated defaults.

Strangely, the unmodified method must have had the same issue - but we never
reported an error earlier.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234075</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-20 04:32:03 -0400</bug_when>
    <thetext>Stephan, thanks for following up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234129</commentid>
    <comment_count>2</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2013-03-20 06:25:59 -0400</bug_when>
    <thetext>(In reply to comment #0)
&gt; As part of the work for upgrading our test infrastructure to use 8b81,
&gt; I had to modify
&gt; org.eclipse.jdt.core.tests.compiler.regression.InterfaceMethodsTest.
&gt; testSuperCall2

This test is disabled now - please reenable after investigation/fix. TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2234258</commentid>
    <comment_count>3</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-03-20 10:38:22 -0400</bug_when>
    <thetext>Ack</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2236806</commentid>
    <comment_count>4</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-03-26 12:33:35 -0400</bug_when>
    <thetext>MethodVerifier15 was being over-eager, ignoring that we already knew isOverridden[idx].
Fix is by better respecting that bit of information in two locations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2236808</commentid>
    <comment_count>5</comment_count>
    <who name="Stephan Herrmann">stephan.herrmann</who>
    <bug_when>2013-03-26 12:35:50 -0400</bug_when>
    <thetext>Fix has been released for BETA_JAVA8 via commit 11ebb7eac78033ed4b8b7f8bf2dae372f511166c</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>