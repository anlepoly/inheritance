<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>390882</bug_id>
          
          <creation_ts>2012-10-01 22:09:00 -0400</creation_ts>
          <short_desc>[1.8][compiler] Compiler should reject type annotations on nested package names and qualified top level types</short_desc>
          <delta_ts>2012-10-05 12:03:23 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>BETA J8</target_milestone>
          
          <blocked>287648</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Srikanth Sankaran">srikanth_sankaran</reporter>
          <assigned_to name="Jay Arthanareeswaran">jarthana</assigned_to>
          
          
          <votes>0</votes>

      

      

      <flag name="review"
          id="53716"
          type_id="1"
          status="+"
          setter="srikanth_sankaran"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2166453</commentid>
    <comment_count>0</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-01 22:09:05 -0400</bug_when>
    <thetext>BETA_JAVA8:

This program compiles without any errors when built against 308 enabled
8b56:

// -----------
import java.lang.annotation.Target;
import static java.lang.annotation.ElementType.*;

public class X {
    Object o1 = (@Marker java.lang.Integer) null;   // 1. Right.
    Object o2 = (java. @Marker lang.Integer) null;  // 2. Wrong.
    Object o3 = (java.lang. @Marker Integer) null;  // 3. Wrong.
}

@Target(TYPE_USE)
@interface Marker {
	
}
// ----------------------------------

2 is annotating a nested package name - 308 does not allow this.
3 is annotating a top level type - the proper way to this is to
use 1 style prefix annotations.

Note that 8b50 javac crashes on this test case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2166454</commentid>
    <comment_count>1</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-01 22:09:35 -0400</bug_when>
    <thetext>Jay, please take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2166864</commentid>
    <comment_count>2</comment_count>
      <attachid>221787</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-02 12:20:17 -0400</bug_when>
    <thetext>Created attachment 221787
Proposed fix

Fix + test for the test case in comment #0. The tests probably adjusted for the time being so that it will pass with a JDK without JSR 308 support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2167340</commentid>
    <comment_count>3</comment_count>
      <attachid>221834</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-03 09:58:38 -0400</bug_when>
    <thetext>Created attachment 221834
Updated patch

Some minor changes to the previous patch. Test has been updated as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2167403</commentid>
    <comment_count>4</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-03 11:15:54 -0400</bug_when>
    <thetext>Patch looks good. I recommend that you add two more tests: (a) one with more
than one illegal annotation to make sure the source range reported is
correct (b) another with just a package name like @Marker java.@lang lang.

Just looking at the code, I expected to see an AIOOB for (b), but it is
handled well before package binding comes out as null - anyways a test 
is welcome - it will be missing the new errors, but that is probably ok
as it will be a secondary error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2167662</commentid>
    <comment_count>5</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-04 00:48:00 -0400</bug_when>
    <thetext>I think the patch is good - but we should consider emitting more 
specific messages than syntax errors. It can be argued these are
not syntax errors at all. Jay, what do you think ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2167672</commentid>
    <comment_count>6</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-04 01:40:19 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; I think the patch is good - but we should consider emitting more 
&gt; specific messages than syntax errors. It can be argued these are
&gt; not syntax errors at all. Jay, what do you think ?

Yes, it can be argued. However, I think the spec only talks about type qualifier and not qualifiers in general. In that sense, we can call it a syntax error also, can&apos;t we?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168306</commentid>
    <comment_count>7</comment_count>
      <attachid>221938</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-05 01:52:43 -0400</bug_when>
    <thetext>Created attachment 221938
Same fix with more tests

Patch is same as previous, but includes the two new tests Srikanth suggested. Note that I intend to release with the tests disabled until we get a JDK with both 308 and Lambda support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168308</commentid>
    <comment_count>8</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-05 02:08:08 -0400</bug_when>
    <thetext>(In reply to comment #7)

&gt; suggested. Note that I intend to release with the tests disabled until we
&gt; get a JDK with both 308 and Lambda support.

Please update the list at bug 383608 - we want one list of all disabled
tests (i.e not scattered across multiple comments that would need to be 
scanned) - TIA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168309</commentid>
    <comment_count>9</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-05 02:09:40 -0400</bug_when>
    <thetext>Please also fold the entry at https://bugs.eclipse.org/bugs/show_bug.cgi?id=383608#c5 into the master list currently at https://bugs.eclipse.org/bugs/show_bug.cgi?id=383608#c6. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168352</commentid>
    <comment_count>10</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-05 04:35:41 -0400</bug_when>
    <thetext>The latest patch fails for qualified generic type references and array of qualified types. Here is the new list of tests including the one mentioned in comment #4.

Object o1 = (@Marker java.lang.Integer) null;   	// 1. Right.
Object o2 = (java. @Marker lang.Integer) null;  	// 2. Wrong.
Object o3 = (java.@Marker lang) null;  			// 3. Wrong.
Object o4 = (java.util.@Marker List&lt;String&gt;) null; 	// 4. Wrong.
Object o5 = (java.lang.@Marker Integer[]) null;		// 5. Wrong.
Object o6 = (java.util.@Marker List&lt;String&gt;[]) null;	// 6. Wrong.
Object o7 = (java.lang.Integer @Marker []) null;	// 7. Right.

I will post an updated patch to handle the new cases.(In reply to comment #8)


&gt; (In reply to comment #7)
&gt; Please update the list at bug 383608 - we want one list of all disabled
&gt; tests (i.e not scattered across multiple comments that would need to be 
&gt; scanned) - TIA.

Sure, I was planning to do that after I release the change. At this point, we are still looking at adding more tests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168354</commentid>
    <comment_count>11</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-05 04:41:12 -0400</bug_when>
    <thetext>(In reply to comment #10)
&gt; The latest patch fails for qualified generic type references and array of
&gt; qualified types. Here is the new list of tests including the one mentioned
&gt; in comment #4.

Please also tweak these tests, so there is an error reported for annotating
at the inner package level.

i.e 

   java.@Marker util.@Marker List&lt;String&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168379</commentid>
    <comment_count>12</comment_count>
      <attachid>221943</attachid>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-05 05:41:34 -0400</bug_when>
    <thetext>Created attachment 221943
Updated patch

This patch addresses the test cases that were failing later.

I thought I should make the other sub classes (SelectionOnQualifiedTypeReference and such) to use the new code to report the problems. But looks like the selection parser doesn&apos;t (yet) care about type annotations - the annotations instance variable is null.

Srikanth, should we file a new bug to make the selection parser to include the annotations?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168416</commentid>
    <comment_count>13</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-05 06:54:36 -0400</bug_when>
    <thetext>(In reply to comment #12)

&gt; Srikanth, should we file a new bug to make the selection parser to include
&gt; the annotations?

Done: bug 391214.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168445</commentid>
    <comment_count>14</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-05 07:38:17 -0400</bug_when>
    <thetext>Patch looks good. Two small suggestions: reportAnnotationsOnPackageQualifiers
is better named rejectAnnotationsOnPackageQualifiers (2) Please eliminate the second diff in both ParameterizedQualifiedTypeReference and QualifiedTypeReference. It needlessly leaks the variable i to outside the
for loop and is not relevant to the fix any more

It is enough to run just RunAllJava8Tests with these changes and release it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168506</commentid>
    <comment_count>15</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-05 10:12:12 -0400</bug_when>
    <thetext>Released the fix in BETA_JAVA8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168508</commentid>
    <comment_count>16</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-05 10:13:59 -0400</bug_when>
    <thetext>The commit is here:

http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?h=BETA_JAVA8&amp;id=62bc9b56e24288d1e73ff2195f3d44dd920a1f52</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168537</commentid>
    <comment_count>17</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2012-10-05 11:07:18 -0400</bug_when>
    <thetext>(In reply to comment #14)
&gt; (2) Please eliminate
&gt; the second diff in both ParameterizedQualifiedTypeReference and
&gt; QualifiedTypeReference. It needlessly leaks the variable i to outside the
&gt; for loop and is not relevant to the fix any more

Only one of these seem to fixed. In QualifiedTypeReference, the variable is
still leaking outside of the for loop :-(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2168576</commentid>
    <comment_count>18</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2012-10-05 12:03:23 -0400</bug_when>
    <thetext>(In reply to comment #17)
&gt; Only one of these seem to fixed. In QualifiedTypeReference, the variable is
&gt; still leaking outside of the for loop :-(

Oops, looks like I amended the commit with some changes still unstaged :(  I have fixed it now.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>221787</attachid>
            <date>2012-10-02 12:20:00 -0400</date>
            <delta_ts>2012-10-03 09:58:38 -0400</delta_ts>
            <desc>Proposed fix</desc>
            <filename>Fix-for-bug-390882.patch</filename>
            <type>text/plain</type>
            <size>3001</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFu
bm90YXRpb25UZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZVR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCmluZGV4IGI5ZTVlOGUuLmE0YWYwNmUgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFubm90YXRpb25U
ZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVUeXBl
QW5ub3RhdGlvblRlc3QuamF2YQpAQCAtMjIyOCwzICsyMjI4LDI5IEBACiAJCQkJIi0tLS0tLS0t
LS1cbiIpOw0KIAl9DQorCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3dfYnVn
LmNnaT9pZD0zOTA4ODINCisJcHVibGljIHZvaWQgdGVzdDA2OSgpIHsNCisJCXRoaXMucnVuTmVn
YXRpdmVUZXN0KA0KKwkJCQluZXcgU3RyaW5nW10gew0KKwkJCQkJIlguamF2YSIsDQorCQkJCQki
aW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtcbiIgKw0KKwkJCQkJImltcG9ydCBz
dGF0aWMgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuKjtcbiIgKw0KKwkJCQkJInB1
YmxpYyBjbGFzcyBYIHsgICAgIiArDQorCQkJCQkiCU9iamVjdCBvMSA9IChATWFya2VyIGphdmEu
bGFuZy5JbnRlZ2VyKSBudWxsOyAgIC8vIDEuIFJpZ2h0LlxuIiArDQorCQkJCQkiCU9iamVjdCBv
MiA9IChqYXZhLiBATWFya2VyIGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdyb25nLlxuIiAr
DQorCQkJCQkiCU9iamVjdCBvMyA9IChqYXZhLmxhbmcuIEBNYXJrZXIgSW50ZWdlcikgbnVsbDsg
IC8vIDMuIFdyb25nLlxuIiArDQorCQkJCQkifVxuIiArDQorCQkJCQkiQFRhcmdldChUWVBFX1VT
RSlAaW50ZXJmYWNlIE1hcmtlciB7fVxuIg0KKwkJCQl9LCANCisJCQkJIi0tLS0tLS0tLS1cbiIg
KyANCisJCQkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA0KVxuIiArIA0KKwkJCQkiCU9i
amVjdCBvMiA9IChqYXZhLiBATWFya2VyIGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdyb25n
LlxuIiArIA0KKwkJCQkiCSAgICAgICAgICAgICAgICAgICBeXl5eXl5eXG4iICsgDQorCQkJCSJT
eW50YXggZXJyb3IsIHR5cGUgYW5ub3RhdGlvbnMgYXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJ
CQkiLS0tLS0tLS0tLVxuIiArIA0KKwkJCQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDUp
XG4iICsgDQorCQkJCSIJT2JqZWN0IG8zID0gKGphdmEubGFuZy4gQE1hcmtlciBJbnRlZ2VyKSBu
dWxsOyAgLy8gMy4gV3JvbmcuXG4iICsgDQorCQkJCSIJICAgICAgICAgICAgICAgICAgICAgICAg
Xl5eXl5eXlxuIiArIA0KKwkJCQkiU3ludGF4IGVycm9yLCB0eXBlIGFubm90YXRpb25zIGFyZSBp
bGxlZ2FsIGhlcmVcbiIgKyANCisJCQkJIi0tLS0tLS0tLS1cbiIpOw0KKwl9DQogfQ0KZGlmZiAt
LWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRl
cm5hbC9jb21waWxlci9hc3QvUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlw
c2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2Fz
dC9RdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKaW5kZXggYWVhODhjMC4uNGM0ZWNmYyAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2FzdC9RdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9RdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKQEAgLTk0LDUgKzk0LDE0IEBACiAJ
ICAgIGJvb2xlYW4gaXNDbGFzc1Njb3BlID0gc2NvcGUua2luZCA9PSBTY29wZS5DTEFTU19TQ09Q
RTsKIAkgICAgUmVmZXJlbmNlQmluZGluZyBxdWFsaWZpZWRUeXBlID0gbnVsbDsKLQkJZm9yIChp
bnQgaSA9IHBhY2thZ2VCaW5kaW5nID09IG51bGwgPyAwIDogcGFja2FnZUJpbmRpbmcuY29tcG91
bmROYW1lLmxlbmd0aCwgbWF4ID0gdGhpcy50b2tlbnMubGVuZ3RoLCBsYXN0ID0gbWF4LTE7IGkg
PCBtYXg7IGkrKykgeworCSAgICBpbnQgaSA9IHBhY2thZ2VCaW5kaW5nID09IG51bGwgPyAwIDog
cGFja2FnZUJpbmRpbmcuY29tcG91bmROYW1lLmxlbmd0aDsKKwkJaWYgKHBhY2thZ2VCaW5kaW5n
ICE9IG51bGwgJiYgdGhpcy5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQlmb3IgKGludCBqID0g
aTsgaiA+IDA7IGotLSkgeworCQkJCUFubm90YXRpb25bXSBxdWFsaWZpZXJBbm5vdCA9IHRoaXMu
YW5ub3RhdGlvbnNbal07CisJCQkJaWYgKHF1YWxpZmllckFubm90ICE9IG51bGwgJiYgcXVhbGlm
aWVyQW5ub3QubGVuZ3RoID4gMCkgeworCQkJCQlzY29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5taXNw
bGFjZWRUeXBlQW5ub3RhdGlvbnMocXVhbGlmaWVyQW5ub3RbMF0sIHF1YWxpZmllckFubm90W3F1
YWxpZmllckFubm90Lmxlbmd0aCAtIDFdKTsKKwkJCQl9CisJCQl9CisJCX0KKwkJZm9yIChpbnQg
bWF4ID0gdGhpcy50b2tlbnMubGVuZ3RoLCBsYXN0ID0gbWF4LTE7IGkgPCBtYXg7IGkrKykgewog
CQkJZmluZE5leHRUeXBlQmluZGluZyhpLCBzY29wZSwgcGFja2FnZUJpbmRpbmcpOwogCQkJaWYg
KCF0aGlzLnJlc29sdmVkVHlwZS5pc1ZhbGlkQmluZGluZygpKQ==
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>221834</attachid>
            <date>2012-10-03 09:58:00 -0400</date>
            <delta_ts>2012-10-05 01:52:43 -0400</delta_ts>
            <desc>Updated patch</desc>
            <filename>Fix-for-bug-390882.patch</filename>
            <type>text/plain</type>
            <size>3894</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFu
bm90YXRpb25UZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZVR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCmluZGV4IDZhZDBiYTUuLjFmZTM3OGIgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFubm90YXRpb25U
ZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVUeXBl
QW5ub3RhdGlvblRlc3QuamF2YQpAQCAtMjMyOSw0ICsyMzI5LDQzIEBACiAJCQkJCQkiLS0tLS0t
LS0tLVxuIik7DQogCX0NCi0NCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hv
d19idWcuY2dpP2lkPTM5MDg4Mg0KKwlwdWJsaWMgdm9pZCB0ZXN0MDM5MDg4MigpIHsNCisJCXRo
aXMucnVuTmVnYXRpdmVUZXN0KA0KKwkJCQluZXcgU3RyaW5nW10gew0KKwkJCQkJIlguamF2YSIs
DQorCQkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtcbiIgKw0KKwkJCQkJ
ImltcG9ydCBzdGF0aWMgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuKjtcbiIgKw0K
KwkJCQkJInB1YmxpYyBjbGFzcyBYIHsgICAgXG4gIiArDQorCQkJCQkiCU9iamVjdCBvMSA9IChA
TWFya2VyIGphdmEubGFuZy5JbnRlZ2VyKSBudWxsOyAgIC8vIDEuIFJpZ2h0LlxuIiArDQorCQkJ
CQkiCU9iamVjdCBvMiA9IChqYXZhLiBATWFya2VyIGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIu
IFdyb25nLlxuIiArDQorCQkJCQkiCU9iamVjdCBvMyA9IChqYXZhLmxhbmcuIEBNYXJrZXIgSW50
ZWdlcikgbnVsbDsgIC8vIDMuIFdyb25nLlxuIiArDQorCQkJCQkiCXB1YmxpYyB2b2lkIGZvbyhq
YXZhLiBATWFya2VyIGxhbmcuSW50ZWdlciBhcmcpIHt9XG4iICsNCisJCQkJCSIJcHVibGljIHZv
aWQgYmFyKGphdmEubGFuZy4gQE1hcmtlciBJbnRlZ2VyIGFyZykge31cbiIgKw0KKwkJCQkJIglw
dWJsaWMgdm9pZCBmb29iYXIoQE1hcmtlciBqYXZhLmxhbmcuSW50ZWdlciBhcmcpIHt9XG4iICsN
CisJCQkJCSJ9XG4iICsNCisJCQkJCSJAVGFyZ2V0KFRZUEVfVVNFKVxuIiArDQorCQkJCQkiQGlu
dGVyZmFjZSBNYXJrZXIge31cbiINCisJCQkJfSwNCisJCQkJIi0tLS0tLS0tLS1cbiIgKyANCisJ
CQkJIjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA1KVxuIiArIA0KKwkJCQkiCU9iamVjdCBv
MiA9IChqYXZhLiBATWFya2VyIGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdyb25nLlxuIiAr
IA0KKwkJCQkiCSAgICAgICAgICAgICAgICAgICBeXl5eXl5eXG4iICsgDQorCQkJCSJTeW50YXgg
ZXJyb3IsIHR5cGUgYW5ub3RhdGlvbnMgYXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJCQkiLS0t
LS0tLS0tLVxuIiArIA0KKwkJCQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsg
DQorCQkJCSIJT2JqZWN0IG8zID0gKGphdmEubGFuZy4gQE1hcmtlciBJbnRlZ2VyKSBudWxsOyAg
Ly8gMy4gV3JvbmcuXG4iICsgDQorCQkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5e
XlxuIiArIA0KKwkJCQkiU3ludGF4IGVycm9yLCB0eXBlIGFubm90YXRpb25zIGFyZSBpbGxlZ2Fs
IGhlcmVcbiIgKyANCisJCQkJIi0tLS0tLS0tLS1cbiIgKyANCisJCQkJIjMuIEVSUk9SIGluIFgu
amF2YSAoYXQgbGluZSA3KVxuIiArIA0KKwkJCQkiCXB1YmxpYyB2b2lkIGZvbyhqYXZhLiBATWFy
a2VyIGxhbmcuSW50ZWdlciBhcmcpIHt9XG4iICsgDQorCQkJCSIJICAgICAgICAgICAgICAgICAg
ICAgIF5eXl5eXl5cbiIgKyANCisJCQkJIlN5bnRheCBlcnJvciwgdHlwZSBhbm5vdGF0aW9ucyBh
cmUgaWxsZWdhbCBoZXJlXG4iICsgDQorCQkJCSItLS0tLS0tLS0tXG4iICsgDQorCQkJCSI0LiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyANCisJCQkJIglwdWJsaWMgdm9pZCBiYXIo
amF2YS5sYW5nLiBATWFya2VyIEludGVnZXIgYXJnKSB7fVxuIiArIA0KKwkJCQkiCSAgICAgICAg
ICAgICAgICAgICAgICAgICAgIF5eXl5eXl5cbiIgKyANCisJCQkJIlN5bnRheCBlcnJvciwgdHlw
ZSBhbm5vdGF0aW9ucyBhcmUgaWxsZWdhbCBoZXJlXG4iICsgDQorCQkJCSItLS0tLS0tLS0tXG4i
KTsNCisJfQ0KIH0NCmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9v
cmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1F1YWxpZmllZFR5cGVSZWZlcmVu
Y2UuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9p
bnRlcm5hbC9jb21waWxlci9hc3QvUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCmluZGV4IGFl
YTg4YzAuLmQxZTJlYWYgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVy
L29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUXVhbGlmaWVkVHlwZVJlZmVy
ZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNl
L2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCkBA
IC05Miw3ICs5MiwxOCBAQAogCQl9CiAJICAgIFBhY2thZ2VCaW5kaW5nIHBhY2thZ2VCaW5kaW5n
ID0gYmluZGluZyA9PSBudWxsID8gbnVsbCA6IChQYWNrYWdlQmluZGluZykgYmluZGluZzsKKwkg
ICAgLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MDg4
MgorCSAgICBpbnQgaSA9IHBhY2thZ2VCaW5kaW5nID09IG51bGwgPyAwIDogcGFja2FnZUJpbmRp
bmcuY29tcG91bmROYW1lLmxlbmd0aDsKKwkJaWYgKHBhY2thZ2VCaW5kaW5nICE9IG51bGwgJiYg
dGhpcy5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJCQlmb3IgKGludCBqID0gaTsgaiA+IDA7IGot
LSkgeworCQkJCUFubm90YXRpb25bXSBxdWFsaWZpZXJBbm5vdCA9IHRoaXMuYW5ub3RhdGlvbnNb
al07CisJCQkJaWYgKHF1YWxpZmllckFubm90ICE9IG51bGwgJiYgcXVhbGlmaWVyQW5ub3QubGVu
Z3RoID4gMCkgeworCQkJCQlzY29wZS5wcm9ibGVtUmVwb3J0ZXIoKS5taXNwbGFjZWRUeXBlQW5u
b3RhdGlvbnMocXVhbGlmaWVyQW5ub3RbMF0sIHF1YWxpZmllckFubm90W3F1YWxpZmllckFubm90
Lmxlbmd0aCAtIDFdKTsKKwkJCQkJdGhpcy5hbm5vdGF0aW9uc1tqXSA9IG51bGw7CisJCQkJfQor
CQkJfQorCQl9CiAJICAgIGJvb2xlYW4gaXNDbGFzc1Njb3BlID0gc2NvcGUua2luZCA9PSBTY29w
ZS5DTEFTU19TQ09QRTsKIAkgICAgUmVmZXJlbmNlQmluZGluZyBxdWFsaWZpZWRUeXBlID0gbnVs
bDsKLQkJZm9yIChpbnQgaSA9IHBhY2thZ2VCaW5kaW5nID09IG51bGwgPyAwIDogcGFja2FnZUJp
bmRpbmcuY29tcG91bmROYW1lLmxlbmd0aCwgbWF4ID0gdGhpcy50b2tlbnMubGVuZ3RoLCBsYXN0
ID0gbWF4LTE7IGkgPCBtYXg7IGkrKykgeworCQlmb3IgKGludCBtYXggPSB0aGlzLnRva2Vucy5s
ZW5ndGgsIGxhc3QgPSBtYXgtMTsgaSA8IG1heDsgaSsrKSB7CiAJCQlmaW5kTmV4dFR5cGVCaW5k
aW5nKGksIHNjb3BlLCBwYWNrYWdlQmluZGluZyk7CiAJCQlpZiAoIXRoaXMucmVzb2x2ZWRUeXBl
LmlzVmFsaWRCaW5kaW5nKCkp
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>221938</attachid>
            <date>2012-10-05 01:52:00 -0400</date>
            <delta_ts>2012-10-05 05:41:34 -0400</delta_ts>
            <desc>Same fix with more tests</desc>
            <filename>Fix-for-bug-390882.patch</filename>
            <type>text/plain</type>
            <size>5289</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFu
bm90YXRpb25UZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZVR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCmluZGV4IGQzOTI5ODEuLjlhNjRjNmMgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFubm90YXRpb25U
ZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVUeXBl
QW5ub3RhdGlvblRlc3QuamF2YQpAQCAtMjM1NCwzICsyMzU0LDc2IEBACiAJCQkJCQkiLS0tLS0t
LS0tLVxuIik7DQogCX0NCisJLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3JnL2J1Z3Mvc2hvd19i
dWcuY2dpP2lkPTM5MDg4Mg0KKwlwdWJsaWMgdm9pZCB0ZXN0MDM5MDg4MigpIHsNCisJCXRoaXMu
cnVuTmVnYXRpdmVUZXN0KA0KKwkJCQluZXcgU3RyaW5nW10gew0KKwkJCQkJIlguamF2YSIsDQor
CQkJCQkiaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLlRhcmdldDtcbiIgKw0KKwkJCQkJImlt
cG9ydCBzdGF0aWMgamF2YS5sYW5nLmFubm90YXRpb24uRWxlbWVudFR5cGUuKjtcbiIgKw0KKwkJ
CQkJInB1YmxpYyBjbGFzcyBYIHsgICAgXG4gIiArDQorCQkJCQkiCU9iamVjdCBvMSA9IChATWFy
a2VyIGphdmEubGFuZy5JbnRlZ2VyKSBudWxsOyAgIC8vIDEuIFJpZ2h0LlxuIiArDQorCQkJCQki
CU9iamVjdCBvMiA9IChqYXZhLiBATWFya2VyIGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdy
b25nLlxuIiArDQorCQkJCQkiCU9iamVjdCBvMyA9IChqYXZhLmxhbmcuIEBNYXJrZXIgSW50ZWdl
cikgbnVsbDsgIC8vIDMuIFdyb25nLlxuIiArDQorCQkJCQkiCXB1YmxpYyB2b2lkIGZvbyhqYXZh
LiBATWFya2VyIGxhbmcuSW50ZWdlciBhcmcpIHt9XG4iICsNCisJCQkJCSIJcHVibGljIHZvaWQg
YmFyKGphdmEubGFuZy4gQE1hcmtlciBJbnRlZ2VyIGFyZykge31cbiIgKw0KKwkJCQkJIglwdWJs
aWMgdm9pZCBmb29iYXIoQE1hcmtlciBqYXZhLmxhbmcuSW50ZWdlciBhcmcpIHt9XG4iICsNCisJ
CQkJCSJ9XG4iICsNCisJCQkJCSJAVGFyZ2V0KFRZUEVfVVNFKVxuIiArDQorCQkJCQkiQGludGVy
ZmFjZSBNYXJrZXIge31cbiINCisJCQkJfSwNCisJCQkJIi0tLS0tLS0tLS1cbiIgKyANCisJCQkJ
IjEuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA1KVxuIiArIA0KKwkJCQkiCU9iamVjdCBvMiA9
IChqYXZhLiBATWFya2VyIGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdyb25nLlxuIiArIA0K
KwkJCQkiCSAgICAgICAgICAgICAgICAgICBeXl5eXl5eXG4iICsgDQorCQkJCSJTeW50YXggZXJy
b3IsIHR5cGUgYW5ub3RhdGlvbnMgYXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJCQkiLS0tLS0t
LS0tLVxuIiArIA0KKwkJCQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDYpXG4iICsgDQor
CQkJCSIJT2JqZWN0IG8zID0gKGphdmEubGFuZy4gQE1hcmtlciBJbnRlZ2VyKSBudWxsOyAgLy8g
My4gV3JvbmcuXG4iICsgDQorCQkJCSIJICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXlxu
IiArIA0KKwkJCQkiU3ludGF4IGVycm9yLCB0eXBlIGFubm90YXRpb25zIGFyZSBpbGxlZ2FsIGhl
cmVcbiIgKyANCisJCQkJIi0tLS0tLS0tLS1cbiIgKyANCisJCQkJIjMuIEVSUk9SIGluIFguamF2
YSAoYXQgbGluZSA3KVxuIiArIA0KKwkJCQkiCXB1YmxpYyB2b2lkIGZvbyhqYXZhLiBATWFya2Vy
IGxhbmcuSW50ZWdlciBhcmcpIHt9XG4iICsgDQorCQkJCSIJICAgICAgICAgICAgICAgICAgICAg
IF5eXl5eXl5cbiIgKyANCisJCQkJIlN5bnRheCBlcnJvciwgdHlwZSBhbm5vdGF0aW9ucyBhcmUg
aWxsZWdhbCBoZXJlXG4iICsgDQorCQkJCSItLS0tLS0tLS0tXG4iICsgDQorCQkJCSI0LiBFUlJP
UiBpbiBYLmphdmEgKGF0IGxpbmUgOClcbiIgKyANCisJCQkJIglwdWJsaWMgdm9pZCBiYXIoamF2
YS5sYW5nLiBATWFya2VyIEludGVnZXIgYXJnKSB7fVxuIiArIA0KKwkJCQkiCSAgICAgICAgICAg
ICAgICAgICAgICAgICAgIF5eXl5eXl5cbiIgKyANCisJCQkJIlN5bnRheCBlcnJvciwgdHlwZSBh
bm5vdGF0aW9ucyBhcmUgaWxsZWdhbCBoZXJlXG4iICsgDQorCQkJCSItLS0tLS0tLS0tXG4iKTsN
CisJfQ0KKwlwdWJsaWMgdm9pZCB0ZXN0MDM5MDg4MmEoKSB7DQorCQl0aGlzLnJ1bk5lZ2F0aXZl
VGVzdCgNCisJCQkJbmV3IFN0cmluZ1tdIHsNCisJCQkJCSJYLmphdmEiLA0KKwkJCQkJImltcG9y
dCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQ7XG4iICsNCisJCQkJCSJpbXBvcnQgc3RhdGlj
IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLio7XG4iICsNCisJCQkJCSJwdWJsaWMg
Y2xhc3MgWCB7ICAgIFxuICIgKw0KKwkJCQkJIglPYmplY3QgbzEgPSAoamF2YS4gQE1hcmtlciBA
QW5ub3QgbGFuZy5JbnRlZ2VyKSBudWxsOyAgLy8gMi4gV3JvbmcuXG4iICsNCisJCQkJCSIJT2Jq
ZWN0IG8yID0gKGphdmEubGFuZy4gQE1hcmtlciBAQW5ub3QgSW50ZWdlcikgbnVsbDsgIC8vIDMu
IFdyb25nLlxuIiArDQorCQkJCQkiCU9iamVjdCBvMyA9IChqYXZhLkBsYW5nIGxhbmcpIG51bGw7
ICAvLyAzLiBXcm9uZy5cbiIgKw0KKwkJCQkJIn1cbiIgKw0KKwkJCQkJIkBUYXJnZXQoVFlQRV9V
U0UpXG4iICsNCisJCQkJCSJAaW50ZXJmYWNlIE1hcmtlciB7fVxuIiArDQorCQkJCQkiQFRhcmdl
dChUWVBFX1VTRSlcbiIgKw0KKwkJCQkJIkBpbnRlcmZhY2UgQW5ub3Qge30iDQorCQkJCX0sDQor
CQkJCSItLS0tLS0tLS0tXG4iICsgDQorCQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUg
NClcbiIgKyANCisJCQkJIglPYmplY3QgbzEgPSAoamF2YS4gQE1hcmtlciBAQW5ub3QgbGFuZy5J
bnRlZ2VyKSBudWxsOyAgLy8gMi4gV3JvbmcuXG4iICsgDQorCQkJCSIJICAgICAgICAgICAgICAg
ICAgIF5eXl5eXl5eXl5eXl5eXG4iICsgDQorCQkJCSJTeW50YXggZXJyb3IsIHR5cGUgYW5ub3Rh
dGlvbnMgYXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJCQkiLS0tLS0tLS0tLVxuIiArIA0KKwkJ
CQkiMi4gRVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDUpXG4iICsgDQorCQkJCSIJT2JqZWN0IG8y
ID0gKGphdmEubGFuZy4gQE1hcmtlciBAQW5ub3QgSW50ZWdlcikgbnVsbDsgIC8vIDMuIFdyb25n
LlxuIiArIA0KKwkJCQkiCSAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXl5eXl5eXl5eXG4i
ICsgDQorCQkJCSJTeW50YXggZXJyb3IsIHR5cGUgYW5ub3RhdGlvbnMgYXJlIGlsbGVnYWwgaGVy
ZVxuIiArIA0KKwkJCQkiLS0tLS0tLS0tLVxuIiArIA0KKwkJCQkiMy4gRVJST1IgaW4gWC5qYXZh
IChhdCBsaW5lIDYpXG4iICsgDQorCQkJCSIJT2JqZWN0IG8zID0gKGphdmEuQGxhbmcgbGFuZykg
bnVsbDsgIC8vIDMuIFdyb25nLlxuIiArIA0KKwkJCQkiCSAgICAgICAgICAgICBeXl5eXl5eXl5e
Xl5eXl5cbiIgKyANCisJCQkJImphdmEubGFuZyBjYW5ub3QgYmUgcmVzb2x2ZWQgdG8gYSB0eXBl
XG4iICsgDQorCQkJCSItLS0tLS0tLS0tXG4iKTsNCisJfQ0KIH0NCmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5qZHQuY29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGls
ZXIvYXN0L1F1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YSBiL29yZy5lY2xpcHNlLmpkdC5jb3Jl
L2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUXVhbGlmaWVk
VHlwZVJlZmVyZW5jZS5qYXZhCmluZGV4IGFlYTg4YzAuLmQxZTJlYWYgMTAwNjQ0Ci0tLSBhL29y
Zy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21w
aWxlci9hc3QvUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCisrKyBiL29yZy5lY2xpcHNlLmpk
dC5jb3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUXVh
bGlmaWVkVHlwZVJlZmVyZW5jZS5qYXZhCkBAIC05Miw3ICs5MiwxOCBAQAogCQl9CiAJICAgIFBh
Y2thZ2VCaW5kaW5nIHBhY2thZ2VCaW5kaW5nID0gYmluZGluZyA9PSBudWxsID8gbnVsbCA6IChQ
YWNrYWdlQmluZGluZykgYmluZGluZzsKKwkgICAgLy8gaHR0cHM6Ly9idWdzLmVjbGlwc2Uub3Jn
L2J1Z3Mvc2hvd19idWcuY2dpP2lkPTM5MDg4MgorCSAgICBpbnQgaSA9IHBhY2thZ2VCaW5kaW5n
ID09IG51bGwgPyAwIDogcGFja2FnZUJpbmRpbmcuY29tcG91bmROYW1lLmxlbmd0aDsKKwkJaWYg
KHBhY2thZ2VCaW5kaW5nICE9IG51bGwgJiYgdGhpcy5hbm5vdGF0aW9ucyAhPSBudWxsKSB7CisJ
CQlmb3IgKGludCBqID0gaTsgaiA+IDA7IGotLSkgeworCQkJCUFubm90YXRpb25bXSBxdWFsaWZp
ZXJBbm5vdCA9IHRoaXMuYW5ub3RhdGlvbnNbal07CisJCQkJaWYgKHF1YWxpZmllckFubm90ICE9
IG51bGwgJiYgcXVhbGlmaWVyQW5ub3QubGVuZ3RoID4gMCkgeworCQkJCQlzY29wZS5wcm9ibGVt
UmVwb3J0ZXIoKS5taXNwbGFjZWRUeXBlQW5ub3RhdGlvbnMocXVhbGlmaWVyQW5ub3RbMF0sIHF1
YWxpZmllckFubm90W3F1YWxpZmllckFubm90Lmxlbmd0aCAtIDFdKTsKKwkJCQkJdGhpcy5hbm5v
dGF0aW9uc1tqXSA9IG51bGw7CisJCQkJfQorCQkJfQorCQl9CiAJICAgIGJvb2xlYW4gaXNDbGFz
c1Njb3BlID0gc2NvcGUua2luZCA9PSBTY29wZS5DTEFTU19TQ09QRTsKIAkgICAgUmVmZXJlbmNl
QmluZGluZyBxdWFsaWZpZWRUeXBlID0gbnVsbDsKLQkJZm9yIChpbnQgaSA9IHBhY2thZ2VCaW5k
aW5nID09IG51bGwgPyAwIDogcGFja2FnZUJpbmRpbmcuY29tcG91bmROYW1lLmxlbmd0aCwgbWF4
ID0gdGhpcy50b2tlbnMubGVuZ3RoLCBsYXN0ID0gbWF4LTE7IGkgPCBtYXg7IGkrKykgeworCQlm
b3IgKGludCBtYXggPSB0aGlzLnRva2Vucy5sZW5ndGgsIGxhc3QgPSBtYXgtMTsgaSA8IG1heDsg
aSsrKSB7CiAJCQlmaW5kTmV4dFR5cGVCaW5kaW5nKGksIHNjb3BlLCBwYWNrYWdlQmluZGluZyk7
CiAJCQlpZiAoIXRoaXMucmVzb2x2ZWRUeXBlLmlzVmFsaWRCaW5kaW5nKCkp
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>221943</attachid>
            <date>2012-10-05 05:41:00 -0400</date>
            <delta_ts>2012-10-05 05:41:34 -0400</delta_ts>
            <desc>Updated patch</desc>
            <filename>Fix-or-bug-390882.patch</filename>
            <type>text/plain</type>
            <size>8293</size>
            <attacher name="Jay Arthanareeswaran">jarthana</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcv
ZWNsaXBzZS9qZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFu
bm90YXRpb25UZXN0LmphdmEgYi9vcmcuZWNsaXBzZS5qZHQuY29yZS50ZXN0cy5jb21waWxlci9z
cmMvb3JnL2VjbGlwc2UvamR0L2NvcmUvdGVzdHMvY29tcGlsZXIvcmVncmVzc2lvbi9OZWdhdGl2
ZVR5cGVBbm5vdGF0aW9uVGVzdC5qYXZhCmluZGV4IDZhZDBiYTUuLjYxZjBhZTcgMTAwNjQ0Ci0t
LSBhL29yZy5lY2xpcHNlLmpkdC5jb3JlLnRlc3RzLmNvbXBpbGVyL3NyYy9vcmcvZWNsaXBzZS9q
ZHQvY29yZS90ZXN0cy9jb21waWxlci9yZWdyZXNzaW9uL05lZ2F0aXZlVHlwZUFubm90YXRpb25U
ZXN0LmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUudGVzdHMuY29tcGlsZXIvc3JjL29y
Zy9lY2xpcHNlL2pkdC9jb3JlL3Rlc3RzL2NvbXBpbGVyL3JlZ3Jlc3Npb24vTmVnYXRpdmVUeXBl
QW5ub3RhdGlvblRlc3QuamF2YQpAQCAtMjMyOSw0ICsyMzI5LDExMCBAQAogCQkJCQkJIi0tLS0t
LS0tLS1cbiIpOw0KIAl9DQotDQorCS8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3No
b3dfYnVnLmNnaT9pZD0zOTA4ODINCisJcHVibGljIHZvaWQgdGVzdDAzOTA4ODIoKSB7DQorCQl0
aGlzLnJ1bk5lZ2F0aXZlVGVzdCgNCisJCQkJbmV3IFN0cmluZ1tdIHsNCisJCQkJCSJYLmphdmEi
LA0KKwkJCQkJImltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5UYXJnZXQ7XG4iICsNCisJCQkJ
CSJpbXBvcnQgc3RhdGljIGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlLio7XG4iICsN
CisJCQkJCSJwdWJsaWMgY2xhc3MgWCB7ICAgIFxuICIgKw0KKwkJCQkJIglPYmplY3QgbzEgPSAo
QE1hcmtlciBqYXZhLmxhbmcuSW50ZWdlcikgbnVsbDsgICAvLyAxLiBSaWdodC5cbiIgKw0KKwkJ
CQkJIglPYmplY3QgbzIgPSAoamF2YS4gQE1hcmtlciBsYW5nLkludGVnZXIpIG51bGw7ICAvLyAy
LiBXcm9uZy5cbiIgKw0KKwkJCQkJIglPYmplY3QgbzMgPSAoamF2YS5sYW5nLiBATWFya2VyIElu
dGVnZXIpIG51bGw7ICAvLyAzLiBXcm9uZy5cbiIgKw0KKwkJCQkJIglwdWJsaWMgdm9pZCBmb28o
amF2YS4gQE1hcmtlciBsYW5nLkludGVnZXIgYXJnKSB7fVxuIiArDQorCQkJCQkiCXB1YmxpYyB2
b2lkIGJhcihqYXZhLmxhbmcuIEBNYXJrZXIgSW50ZWdlciBhcmcpIHt9XG4iICsNCisJCQkJCSIJ
cHVibGljIHZvaWQgZm9vYmFyKEBNYXJrZXIgamF2YS5sYW5nLkludGVnZXIgYXJnKSB7fVxuIiAr
DQorCQkJCQkifVxuIiArDQorCQkJCQkiQFRhcmdldChUWVBFX1VTRSlcbiIgKw0KKwkJCQkJIkBp
bnRlcmZhY2UgTWFya2VyIHt9XG4iDQorCQkJCX0sDQorCQkJCSItLS0tLS0tLS0tXG4iICsgDQor
CQkJCSIxLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNSlcbiIgKyANCisJCQkJIglPYmplY3Qg
bzIgPSAoamF2YS4gQE1hcmtlciBsYW5nLkludGVnZXIpIG51bGw7ICAvLyAyLiBXcm9uZy5cbiIg
KyANCisJCQkJIgkgICAgICAgICAgICAgICAgICAgXl5eXl5eXlxuIiArIA0KKwkJCQkiU3ludGF4
IGVycm9yLCB0eXBlIGFubm90YXRpb25zIGFyZSBpbGxlZ2FsIGhlcmVcbiIgKyANCisJCQkJIi0t
LS0tLS0tLS1cbiIgKyANCisJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA2KVxuIiAr
IA0KKwkJCQkiCU9iamVjdCBvMyA9IChqYXZhLmxhbmcuIEBNYXJrZXIgSW50ZWdlcikgbnVsbDsg
IC8vIDMuIFdyb25nLlxuIiArIA0KKwkJCQkiCSAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5e
Xl5cbiIgKyANCisJCQkJIlN5bnRheCBlcnJvciwgdHlwZSBhbm5vdGF0aW9ucyBhcmUgaWxsZWdh
bCBoZXJlXG4iICsgDQorCQkJCSItLS0tLS0tLS0tXG4iICsgDQorCQkJCSIzLiBFUlJPUiBpbiBY
LmphdmEgKGF0IGxpbmUgNylcbiIgKyANCisJCQkJIglwdWJsaWMgdm9pZCBmb28oamF2YS4gQE1h
cmtlciBsYW5nLkludGVnZXIgYXJnKSB7fVxuIiArIA0KKwkJCQkiCSAgICAgICAgICAgICAgICAg
ICAgICBeXl5eXl5eXG4iICsgDQorCQkJCSJTeW50YXggZXJyb3IsIHR5cGUgYW5ub3RhdGlvbnMg
YXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJCQkiLS0tLS0tLS0tLVxuIiArIA0KKwkJCQkiNC4g
RVJST1IgaW4gWC5qYXZhIChhdCBsaW5lIDgpXG4iICsgDQorCQkJCSIJcHVibGljIHZvaWQgYmFy
KGphdmEubGFuZy4gQE1hcmtlciBJbnRlZ2VyIGFyZykge31cbiIgKyANCisJCQkJIgkgICAgICAg
ICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXG4iICsgDQorCQkJCSJTeW50YXggZXJyb3IsIHR5
cGUgYW5ub3RhdGlvbnMgYXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJCQkiLS0tLS0tLS0tLVxu
Iik7DQorCX0NCisJcHVibGljIHZvaWQgdGVzdDAzOTA4ODJhKCkgew0KKwkJdGhpcy5ydW5OZWdh
dGl2ZVRlc3QoDQorCQkJCW5ldyBTdHJpbmdbXSB7DQorCQkJCQkiWC5qYXZhIiwNCisJCQkJCSJp
bXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uVGFyZ2V0O1xuIiArDQorCQkJCQkiaW1wb3J0IHN0
YXRpYyBqYXZhLmxhbmcuYW5ub3RhdGlvbi5FbGVtZW50VHlwZS4qO1xuIiArDQorCQkJCQkicHVi
bGljIGNsYXNzIFggeyAgICBcbiAiICsNCisJCQkJCSIJT2JqZWN0IG8xID0gKGphdmEuIEBNYXJr
ZXIgQEFubm90IGxhbmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdyb25nLlxuIiArDQorCQkJCQki
CU9iamVjdCBvMiA9IChqYXZhLmxhbmcuIEBNYXJrZXIgQEFubm90IEludGVnZXIpIG51bGw7ICAv
LyAzLiBXcm9uZy5cbiIgKw0KKwkJCQkJIglPYmplY3QgbzMgPSAoamF2YS5AbGFuZyBsYW5nKSBu
dWxsOyAgLy8gMy4gV3JvbmcuXG4iICsNCisJCQkJCSJ9XG4iICsNCisJCQkJCSJAVGFyZ2V0KFRZ
UEVfVVNFKVxuIiArDQorCQkJCQkiQGludGVyZmFjZSBNYXJrZXIge31cbiIgKw0KKwkJCQkJIkBU
YXJnZXQoVFlQRV9VU0UpXG4iICsNCisJCQkJCSJAaW50ZXJmYWNlIEFubm90IHt9Ig0KKwkJCQl9
LA0KKwkJCQkiLS0tLS0tLS0tLVxuIiArIA0KKwkJCQkiMS4gRVJST1IgaW4gWC5qYXZhIChhdCBs
aW5lIDQpXG4iICsgDQorCQkJCSIJT2JqZWN0IG8xID0gKGphdmEuIEBNYXJrZXIgQEFubm90IGxh
bmcuSW50ZWdlcikgbnVsbDsgIC8vIDIuIFdyb25nLlxuIiArIA0KKwkJCQkiCSAgICAgICAgICAg
ICAgICAgICBeXl5eXl5eXl5eXl5eXlxuIiArIA0KKwkJCQkiU3ludGF4IGVycm9yLCB0eXBlIGFu
bm90YXRpb25zIGFyZSBpbGxlZ2FsIGhlcmVcbiIgKyANCisJCQkJIi0tLS0tLS0tLS1cbiIgKyAN
CisJCQkJIjIuIEVSUk9SIGluIFguamF2YSAoYXQgbGluZSA1KVxuIiArIA0KKwkJCQkiCU9iamVj
dCBvMiA9IChqYXZhLmxhbmcuIEBNYXJrZXIgQEFubm90IEludGVnZXIpIG51bGw7ICAvLyAzLiBX
cm9uZy5cbiIgKyANCisJCQkJIgkgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eXl5eXl5e
XlxuIiArIA0KKwkJCQkiU3ludGF4IGVycm9yLCB0eXBlIGFubm90YXRpb25zIGFyZSBpbGxlZ2Fs
IGhlcmVcbiIgKyANCisJCQkJIi0tLS0tLS0tLS1cbiIgKyANCisJCQkJIjMuIEVSUk9SIGluIFgu
amF2YSAoYXQgbGluZSA2KVxuIiArIA0KKwkJCQkiCU9iamVjdCBvMyA9IChqYXZhLkBsYW5nIGxh
bmcpIG51bGw7ICAvLyAzLiBXcm9uZy5cbiIgKyANCisJCQkJIgkgICAgICAgICAgICAgXl5eXl5e
Xl5eXl5eXl5eXG4iICsgDQorCQkJCSJqYXZhLmxhbmcgY2Fubm90IGJlIHJlc29sdmVkIHRvIGEg
dHlwZVxuIiArIA0KKwkJCQkiLS0tLS0tLS0tLVxuIik7DQorCX0NCisJcHVibGljIHZvaWQgdGVz
dDAzOTA4ODJiKCkgew0KKwkJdGhpcy5ydW5OZWdhdGl2ZVRlc3QoDQorCQkJCW5ldyBTdHJpbmdb
XSB7DQorCQkJCQkiWC5qYXZhIiwNCisJCQkJCSJpbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24u
VGFyZ2V0O1xuIiArDQorCQkJCQkiaW1wb3J0IHN0YXRpYyBqYXZhLmxhbmcuYW5ub3RhdGlvbi5F
bGVtZW50VHlwZS4qO1xuIiArDQorCQkJCQkicHVibGljIGNsYXNzIFggeyAgICBcbiAiICsNCisJ
CQkJCSIJT2JqZWN0IG8xID0gKGphdmEudXRpbC5ATWFya2VyIEBBbm5vdCBMaXN0PFN0cmluZz4p
IG51bGw7IAkvLyAxLiBXcm9uZy5cbiIgKw0KKwkJCQkJIglPYmplY3QgbzIgPSAoamF2YS5sYW5n
LkBNYXJrZXIgQEFubm90IEludGVnZXJbXSkgbnVsbDsJCS8vIDIuIFdyb25nLlxuIiArDQorCQkJ
CQkiCU9iamVjdCBvMyA9IChqYXZhLnV0aWwuQE1hcmtlciBAQW5ub3QgTGlzdDxTdHJpbmc+W10p
IG51bGw7IC8vIDMuIFdyb25nLlxuIiArDQorCQkJCQkiCU9iamVjdCBvNCA9IChqYXZhLmxhbmcu
SW50ZWdlciBATWFya2VyIFtdKSBudWxsOwkvLyA0LiBSaWdodC5cbiIgKw0KKwkJCQkJIn1cbiIg
Kw0KKwkJCQkJIkBUYXJnZXQoVFlQRV9VU0UpXG4iICsNCisJCQkJCSJAaW50ZXJmYWNlIE1hcmtl
ciB7fVxuIiArDQorCQkJCQkiQFRhcmdldChUWVBFX1VTRSlcbiIgKw0KKwkJCQkJIkBpbnRlcmZh
Y2UgQW5ub3Qge30iDQorCQkJCX0sDQorCQkJCSItLS0tLS0tLS0tXG4iICsgDQorCQkJCSIxLiBF
UlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNClcbiIgKyANCisJCQkJIglPYmplY3QgbzEgPSAoamF2
YS51dGlsLkBNYXJrZXIgQEFubm90IExpc3Q8U3RyaW5nPikgbnVsbDsgCS8vIDEuIFdyb25nLlxu
IiArIA0KKwkJCQkiCSAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5cbiIgKyAN
CisJCQkJIlN5bnRheCBlcnJvciwgdHlwZSBhbm5vdGF0aW9ucyBhcmUgaWxsZWdhbCBoZXJlXG4i
ICsgDQorCQkJCSItLS0tLS0tLS0tXG4iICsgDQorCQkJCSIyLiBFUlJPUiBpbiBYLmphdmEgKGF0
IGxpbmUgNSlcbiIgKyANCisJCQkJIglPYmplY3QgbzIgPSAoamF2YS5sYW5nLkBNYXJrZXIgQEFu
bm90IEludGVnZXJbXSkgbnVsbDsJCS8vIDIuIFdyb25nLlxuIiArIA0KKwkJCQkiCSAgICAgICAg
ICAgICAgICAgICAgICAgXl5eXl5eXl5eXl5eXl5cbiIgKyANCisJCQkJIlN5bnRheCBlcnJvciwg
dHlwZSBhbm5vdGF0aW9ucyBhcmUgaWxsZWdhbCBoZXJlXG4iICsgDQorCQkJCSItLS0tLS0tLS0t
XG4iICsgDQorCQkJCSIzLiBFUlJPUiBpbiBYLmphdmEgKGF0IGxpbmUgNilcbiIgKyANCisJCQkJ
IglPYmplY3QgbzMgPSAoamF2YS51dGlsLkBNYXJrZXIgQEFubm90IExpc3Q8U3RyaW5nPltdKSBu
dWxsOyAvLyAzLiBXcm9uZy5cbiIgKyANCisJCQkJIgkgICAgICAgICAgICAgICAgICAgICAgIF5e
Xl5eXl5eXl5eXl5eXG4iICsgDQorCQkJCSJTeW50YXggZXJyb3IsIHR5cGUgYW5ub3RhdGlvbnMg
YXJlIGlsbGVnYWwgaGVyZVxuIiArIA0KKwkJCQkiLS0tLS0tLS0tLVxuIik7DQorCX0NCiB9DQpk
aWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0
L2ludGVybmFsL2NvbXBpbGVyL2FzdC9QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5j
ZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2lu
dGVybmFsL2NvbXBpbGVyL2FzdC9QYXJhbWV0ZXJpemVkUXVhbGlmaWVkVHlwZVJlZmVyZW5jZS5q
YXZhCmluZGV4IGViZTZlYjcuLmYzYTU5YTIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLmpkdC5j
b3JlL2NvbXBpbGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUGFyYW1l
dGVyaXplZFF1YWxpZmllZFR5cGVSZWZlcmVuY2UuamF2YQorKysgYi9vcmcuZWNsaXBzZS5qZHQu
Y29yZS9jb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L1BhcmFt
ZXRlcml6ZWRRdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKQEAgLTE4OSw3ICsxODksMTAgQEAK
IAogCQlQYWNrYWdlQmluZGluZyBwYWNrYWdlQmluZGluZyA9IGJpbmRpbmcgPT0gbnVsbCA/IG51
bGwgOiAoUGFja2FnZUJpbmRpbmcpIGJpbmRpbmc7CisJCXJlcG9ydEFubm90YXRpb25zT25QYWNr
YWdlUXVhbGlmaWVycyhzY29wZSwgcGFja2FnZUJpbmRpbmcpOworCQkKIAkJYm9vbGVhbiB0eXBl
SXNDb25zaXN0ZW50ID0gdHJ1ZTsKIAkJUmVmZXJlbmNlQmluZGluZyBxdWFsaWZ5aW5nVHlwZSA9
IG51bGw7Ci0JCWZvciAoaW50IGkgPSBwYWNrYWdlQmluZGluZyA9PSBudWxsID8gMCA6IHBhY2th
Z2VCaW5kaW5nLmNvbXBvdW5kTmFtZS5sZW5ndGgsIG1heCA9IHRoaXMudG9rZW5zLmxlbmd0aDsg
aSA8IG1heDsgaSsrKSB7CisJCWludCBpID0gcGFja2FnZUJpbmRpbmcgPT0gbnVsbCA/IDAgOiBw
YWNrYWdlQmluZGluZy5jb21wb3VuZE5hbWUubGVuZ3RoOworCQlmb3IgKGludCBtYXggPSB0aGlz
LnRva2Vucy5sZW5ndGg7IGkgPCBtYXg7IGkrKykgewogCQkJZmluZE5leHRUeXBlQmluZGluZyhp
LCBzY29wZSwgcGFja2FnZUJpbmRpbmcpOwogCQkJaWYgKCEodGhpcy5yZXNvbHZlZFR5cGUuaXNW
YWxpZEJpbmRpbmcoKSkpIHsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLmpkdC5jb3JlL2NvbXBp
bGVyL29yZy9lY2xpcHNlL2pkdC9pbnRlcm5hbC9jb21waWxlci9hc3QvUXVhbGlmaWVkVHlwZVJl
ZmVyZW5jZS5qYXZhIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2Uv
amR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9RdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmphdmEKaW5k
ZXggYWVhODhjMC4uZmZhYThiZSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29t
cGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9RdWFsaWZpZWRUeXBl
UmVmZXJlbmNlLmphdmEKKysrIGIvb3JnLmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2Vj
bGlwc2UvamR0L2ludGVybmFsL2NvbXBpbGVyL2FzdC9RdWFsaWZpZWRUeXBlUmVmZXJlbmNlLmph
dmEKQEAgLTc3LDQgKzc3LDE5IEBACiAJCXJldHVybiB0aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5s
ZW5ndGgtMV07CiAJfQorCisJcHJvdGVjdGVkIHZvaWQgcmVwb3J0QW5ub3RhdGlvbnNPblBhY2th
Z2VRdWFsaWZpZXJzKFNjb3BlIHNjb3BlLCBQYWNrYWdlQmluZGluZyBwYWNrYWdlQmluZGluZykg
eworCQkvLyBodHRwczovL2J1Z3MuZWNsaXBzZS5vcmcvYnVncy9zaG93X2J1Zy5jZ2k/aWQ9Mzkw
ODgyCisJCWlmIChwYWNrYWdlQmluZGluZyA9PSBudWxsIHx8IHRoaXMuYW5ub3RhdGlvbnMgPT0g
bnVsbCkgcmV0dXJuOworCisJCWludCBpID0gcGFja2FnZUJpbmRpbmcuY29tcG91bmROYW1lLmxl
bmd0aDsKKwkJZm9yIChpbnQgaiA9IGk7IGogPiAwOyBqLS0pIHsKKwkJCUFubm90YXRpb25bXSBx
dWFsaWZpZXJBbm5vdCA9IHRoaXMuYW5ub3RhdGlvbnNbal07CisJCQlpZiAocXVhbGlmaWVyQW5u
b3QgIT0gbnVsbCAmJiBxdWFsaWZpZXJBbm5vdC5sZW5ndGggPiAwKSB7CisJCQkJc2NvcGUucHJv
YmxlbVJlcG9ydGVyKCkubWlzcGxhY2VkVHlwZUFubm90YXRpb25zKHF1YWxpZmllckFubm90WzBd
LCBxdWFsaWZpZXJBbm5vdFtxdWFsaWZpZXJBbm5vdC5sZW5ndGggLSAxXSk7CisJCQkJdGhpcy5h
bm5vdGF0aW9uc1tqXSA9IG51bGw7CisJCQl9CisJCX0KKwl9CisKIAlwcm90ZWN0ZWQgVHlwZUJp
bmRpbmcgZ2V0VHlwZUJpbmRpbmcoU2NvcGUgc2NvcGUpIHsKIApAQCAtOTIsNyArMTA3LDEwIEBA
CiAJCX0KIAkgICAgUGFja2FnZUJpbmRpbmcgcGFja2FnZUJpbmRpbmcgPSBiaW5kaW5nID09IG51
bGwgPyBudWxsIDogKFBhY2thZ2VCaW5kaW5nKSBiaW5kaW5nOworCSAgICByZXBvcnRBbm5vdGF0
aW9uc09uUGFja2FnZVF1YWxpZmllcnMoc2NvcGUsIHBhY2thZ2VCaW5kaW5nKTsKKwkgICAgCisJ
ICAgIGludCBpID0gcGFja2FnZUJpbmRpbmcgPT0gbnVsbCA/IDAgOiBwYWNrYWdlQmluZGluZy5j
b21wb3VuZE5hbWUubGVuZ3RoOwogCSAgICBib29sZWFuIGlzQ2xhc3NTY29wZSA9IHNjb3BlLmtp
bmQgPT0gU2NvcGUuQ0xBU1NfU0NPUEU7CiAJICAgIFJlZmVyZW5jZUJpbmRpbmcgcXVhbGlmaWVk
VHlwZSA9IG51bGw7Ci0JCWZvciAoaW50IGkgPSBwYWNrYWdlQmluZGluZyA9PSBudWxsID8gMCA6
IHBhY2thZ2VCaW5kaW5nLmNvbXBvdW5kTmFtZS5sZW5ndGgsIG1heCA9IHRoaXMudG9rZW5zLmxl
bmd0aCwgbGFzdCA9IG1heC0xOyBpIDwgbWF4OyBpKyspIHsKKwkJZm9yIChpbnQgbWF4ID0gdGhp
cy50b2tlbnMubGVuZ3RoLCBsYXN0ID0gbWF4LTE7IGkgPCBtYXg7IGkrKykgewogCQkJZmluZE5l
eHRUeXBlQmluZGluZyhpLCBzY29wZSwgcGFja2FnZUJpbmRpbmcpOwogCQkJaWYgKCF0aGlzLnJl
c29sdmVkVHlwZS5pc1ZhbGlkQmluZGluZygpKQ==
</data>
<flag name="review"
          id="53759"
          type_id="6"
          status="?"
          setter="jarthana"
    />
          </attachment>
      

    </bug>

</bugzilla>