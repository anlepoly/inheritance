<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>337751</bug_id>
          
          <creation_ts>2011-02-21 13:44:00 -0500</creation_ts>
          <short_desc>COMPILER_PB_UNAVOIDABLE_GENERIC_TYPE_PROBLEMS misses references in conditional expression</short_desc>
          <delta_ts>2011-05-03 06:07:00 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>JDT</product>
          <component>Core</component>
          <version>3.7</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.7 M7</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Markus Keller">markus_keller</reporter>
          <assigned_to name="Srikanth Sankaran">srikanth_sankaran</assigned_to>
          <cc>amj87.iitr</cc>
    
    <cc>jarthana</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1886573</commentid>
    <comment_count>0</comment_count>
    <who name="Markus Keller">markus_keller</who>
    <bug_when>2011-02-21 13:44:52 -0500</bug_when>
    <thetext>HEAD, follow-up to bug 322817

The JavaCore.COMPILER_PB_UNAVOIDABLE_GENERIC_TYPE_PROBLEMS option misses references in conditional expressions.

In the example below, generifying Project#getOptions() gets rid of the type safety warning, and the compiler option should also hide it.


package problems;
import java.util.Map;

public class Project {
    //raw return type (assume in 1.4 code)
    public Map/*&lt;String, String&gt;*/ getOptions(boolean b) {
        return null;
    }
}

package problems;
import java.util.Map;

public class GenericConditional {
    void foo(Project project) {
        // Bad warning: &quot;Type safety: The expression of type Map needs
        //    unchecked conversion to conform to Map&lt;String,String&gt;&quot;
        Map&lt;String, String&gt; options=
                        project != null ? project.getOptions(true) : null;
        System.out.println(options);
    }
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1886600</commentid>
    <comment_count>1</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-02-21 14:34:06 -0500</bug_when>
    <thetext>Srikanth, please investigate. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1898370</commentid>
    <comment_count>2</comment_count>
      <attachid>191125</attachid>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-03-14 10:58:35 -0400</bug_when>
    <thetext>Created attachment 191125
Patch under consideration</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1898786</commentid>
    <comment_count>3</comment_count>
    <who name="Srikanth Sankaran">srikanth_sankaran</who>
    <bug_when>2011-03-15 01:46:39 -0400</bug_when>
    <thetext>Added regression tests
org.eclipse.jdt.core.tests.compiler.regression.GenericsRegressionTest.test337751
org.eclipse.jdt.core.tests.compiler.regression.GenericsRegressionTest.test337751a

Released in HEAD for 3.7 M7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1918302</commentid>
    <comment_count>4</comment_count>
    <who name="Jay Arthanareeswaran">jarthana</who>
    <bug_when>2011-04-25 04:56:52 -0400</bug_when>
    <thetext>Verified for 3.7M7 using build I20110421-1800</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1922758</commentid>
    <comment_count>5</comment_count>
    <who name="Ayushman Jain">amj87.iitr</who>
    <bug_when>2011-05-03 06:07:00 -0400</bug_when>
    <thetext>Verified for 3.7RC0 using I20110428-0845</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>191125</attachid>
            <date>2011-03-14 10:58:00 -0400</date>
            <delta_ts>2011-03-14 10:58:35 -0400</delta_ts>
            <desc>Patch under consideration</desc>
            <filename>patch.txt</filename>
            <type>text/plain</type>
            <size>1052</size>
            <attacher name="Srikanth Sankaran">srikanth_sankaran</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UuamR0LmNvcmUN
CkluZGV4OiBjb21waWxlci9vcmcvZWNsaXBzZS9qZHQvaW50ZXJuYWwvY29tcGlsZXIvYXN0L0V4
cHJlc3Npb24uamF2YQ0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnNyb290L2VjbGlwc2Uvb3Jn
LmVjbGlwc2UuamR0LmNvcmUvY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2NvbXBp
bGVyL2FzdC9FeHByZXNzaW9uLmphdmEsdg0KcmV0cmlldmluZyByZXZpc2lvbiAxLjEzMw0KZGlm
ZiAtdSAtcjEuMTMzIEV4cHJlc3Npb24uamF2YQ0KLS0tIGNvbXBpbGVyL29yZy9lY2xpcHNlL2pk
dC9pbnRlcm5hbC9jb21waWxlci9hc3QvRXhwcmVzc2lvbi5qYXZhCTE3IEphbiAyMDExIDA4OjA1
OjAxIC0wMDAwCTEuMTMzDQorKysgY29tcGlsZXIvb3JnL2VjbGlwc2UvamR0L2ludGVybmFsL2Nv
bXBpbGVyL2FzdC9FeHByZXNzaW9uLmphdmEJMTQgTWFyIDIwMTEgMTQ6NTc6NTcgLTAwMDANCkBA
IC05ODYsNiArOTg2LDExIEBADQogCQkJCXJlZmVyZW5jZUNvbnRleHQuY29tcGlsYXRpb25SZXN1
bHQoKS5nZXRGaWxlTmFtZSgpKSkgeyAvLyBwcm9ibGVtIGlzIHJvb3RlZCBlbHNld2hlcmUNCiAJ
CQlyZXR1cm4gdHJ1ZTsNCiAJCX0NCisJfSBlbHNlIGlmICh0aGlzIGluc3RhbmNlb2YgQ29uZGl0
aW9uYWxFeHByZXNzaW9uKSB7IC8vIGh0dHBzOi8vYnVncy5lY2xpcHNlLm9yZy9idWdzL3Nob3df
YnVnLmNnaT9pZD0zMzc3NTENCisJCUNvbmRpdGlvbmFsRXhwcmVzc2lvbiB0ZXJuYXJ5ID0gKENv
bmRpdGlvbmFsRXhwcmVzc2lvbikgdGhpczsNCisJCWlmICh0ZXJuYXJ5LnZhbHVlSWZUcnVlLmZv
cmNlZFRvQmVSYXcocmVmZXJlbmNlQ29udGV4dCkgfHwgdGVybmFyeS52YWx1ZUlmRmFsc2UuZm9y
Y2VkVG9CZVJhdyhyZWZlcmVuY2VDb250ZXh0KSkgew0KKwkJCXJldHVybiB0cnVlOw0KKwkJfQ0K
IAl9DQogCXJldHVybiBmYWxzZTsNCiB9DQo=
</data>

          </attachment>
      

    </bug>

</bugzilla>