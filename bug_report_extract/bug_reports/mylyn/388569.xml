<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>388569</bug_id>
          
          <creation_ts>2012-08-31 13:40:00 -0400</creation_ts>
          <short_desc>upgrade test servers to Bugzilla 4.2.3, 4.0.8, and 3.6.11</short_desc>
          <delta_ts>2012-09-18 07:01:15 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Bugzilla</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>3.8.2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Frank Becker">eclipse</reporter>
          <assigned_to name="Frank Becker">eclipse</assigned_to>
          <cc>LpSolit</cc>
    
    <cc>steffen.pingel</cc>
          <qa_contact name="Frank Becker">eclipse</qa_contact>
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2154967</commentid>
    <comment_count>0</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-08-31 13:40:45 -0400</bug_when>
    <thetext>Bugzilla 4.2.3, 4.0.8, and 3.6.11 are out: http://www.bugzilla.org/news/#release423/. Test servers should be upgraded accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155055</commentid>
    <comment_count>1</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-08-31 17:01:00 -0400</bug_when>
    <thetext>Bugzilla 4.2.3, 4.0.8, and 3.6.11 are now installed but bugzilla-head is not working anymore. Hope that I can fix this soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155105</commentid>
    <comment_count>2</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-01 03:00:45 -0400</bug_when>
    <thetext>Steffen,

bugshead is only working when I &quot;use bzr update -r bugzilla-4.3.2&quot;
with &quot;bzr update -r bugzilla-4.3.3&quot; I get an &quot;500 Internal Server Error&quot;

the normal command for bugshead is &quot;bzr update&quot; (this is OK in my local environment; bugzilla version 4.5)

For 4.5 we need Perl 5.10.1 but not for 4.3.3

Thoughts?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155209</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-09-01 21:13:13 -0400</bug_when>
    <thetext>Is Bugzilla 4.4 already relased or did they start of the 4.5 branch in parallel? Not sure how to deal with the Perl requirements. Do the old Bugzilla versions still work with the newer Perl version?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155225</commentid>
    <comment_count>4</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-02 02:34:51 -0400</bug_when>
    <thetext>Here is the plan for Bugzilla 4.4: http://www.bugzilla.org/releases/4.4/

Actual we hare reached the Feature Freeze the final release is planed for later this year.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155249</commentid>
    <comment_count>5</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-02 12:05:00 -0400</bug_when>
    <thetext>Steffen,

I now know that when we use
    bzr update -r 8359
we are OK.

But when we use
    bzr update -r 8360
we get the error.

http://bzr.mozilla.org/bugzilla/4.4/revision/8360 show what get changed in this commit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155263</commentid>
    <comment_count>6</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-02 14:06:07 -0400</bug_when>
    <thetext>Steffen,

now I have a fix!

we need to change the .htaccess file and remove the line 

Options -Indexes

can you check if we have an index.cgi option for bugzilla-head dir.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2155580</commentid>
    <comment_count>7</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-09-03 23:59:12 -0400</bug_when>
    <thetext>This is what we use in /etc/apache2/conf.d/bugzilla.conf:

Alias /bugshead /home/tools/bugzilla/bugzilla-head
&lt;Directory /home/tools/bugzilla/bugzilla-head&gt;
    AddHandler cgi-script .cgi
    Options +Indexes +ExecCGI
    DirectoryIndex index.cgi
    AllowOverride Limit
    Order allow,deny
    Allow from all
&lt;/Directory&gt;

Let me know if I should change it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2156633</commentid>
    <comment_count>8</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-09-05 23:30:36 -0400</bug_when>
    <thetext>Frank, I see a number of test failures now (since the test server isn&apos;t using the latest master). I thought we had changed the code that it didn&apos;t require updates any longer when Bugzilla versions were updated?

junit.framework.ComparisonFailure: expected:&lt;3.6.1[0]&gt; but was:&lt;3.6.1[1]&gt;
	at junit.framework.Assert.assertEquals(Assert.java:85)
	at junit.framework.Assert.assertEquals(Assert.java:91)
	at org.eclipse.mylyn.bugzilla.tests.core.BugzillaClientTest.testRDFProductConfig(BugzillaClientTest.java:67)
	
We basically need to change tests to only look for &quot;3.6&quot; instead of the exact &quot;3.6.11&quot; version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157591</commentid>
    <comment_count>9</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-07 16:07:20 -0400</bug_when>
    <thetext>Steffen,

we now use BugzillaVersion.compareMajorMinorOnly().

The only problem now is that we fail when the HEAD revision change the  MajorMinor version like from 4.3 to 4.5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157603</commentid>
    <comment_count>10</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-09-07 16:27:22 -0400</bug_when>
    <thetext>(In reply to comment #9)
&gt; The only problem now is that we fail when the HEAD revision change the
&gt; MajorMinor version like from 4.3 to 4.5.

That&apos;s fine. Since we only support released Bugzilla versions we can simply exclude the head tests for maintenance streams.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157614</commentid>
    <comment_count>11</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-09-07 17:10:58 -0400</bug_when>
    <thetext>Thanks. I have backported the changes to the 3.8.x branch. Anything left to do here?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157714</commentid>
    <comment_count>12</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-09 02:26:17 -0400</bug_when>
    <thetext>(In reply to comment #11)
&gt; Thanks. I have backported the changes to the 3.8.x branch. Anything left to
&gt; do here?

No, we have done everything.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157715</commentid>
    <comment_count>13</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-09-09 02:46:15 -0400</bug_when>
    <thetext>Steffen can we pass the following option the the test when we are not in head revision?

-Dmylyn.test.exclude=http://mylyn.dyndns.org/bugshead

So we can make sure that the actual mylyn version run with the next bugzilla version ?

Thoughts?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2157787</commentid>
    <comment_count>14</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-09-09 19:37:31 -0400</bug_when>
    <thetext>We should have all versions that we are testing against on the mylyn.org test server. Please open a new task if there are still problems provisioning the head version of Bugzilla and we can iterate on fixing the test environment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2161188</commentid>
    <comment_count>15</comment_count>
    <who name="Frdric Buclin">LpSolit</who>
    <bug_when>2012-09-18 07:01:15 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; Is Bugzilla 4.4 already relased or did they start of the 4.5 branch in
&gt; parallel? Not sure how to deal with the Perl requirements. Do the old
&gt; Bugzilla versions still work with the newer Perl version?

We branched for 4.4 to stabilize the code for 4.4rc1 and to not block development for 4.5. So we have both in parallel. We plan to release 4.4rc1 next month.

All supported versions of Bugzilla work fine with Perl 5.8/5.10/5.12/5.14. If you want to use Perl 5.16, you need Bugzilla 4.2.3 or newer.


(In reply to comment #6)
&gt; we need to change the .htaccess file and remove the line 
&gt; 
&gt; Options -Indexes

Instead of doing this, you should fix your bugzilla.conf file:

  AllowOverride Limit

should be:

  AllowOverride Limit FileInfo Indexes Options

See http://www.bugzilla.org/docs/tip/en/html/configuration.html#http</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>