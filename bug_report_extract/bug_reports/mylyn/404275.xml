<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>404275</bug_id>
          
          <creation_ts>2013-03-25 11:17:00 -0400</creation_ts>
          <short_desc>support Hudson 3.0.1 (was: NPE when reading job)</short_desc>
          <delta_ts>2013-04-18 08:58:19 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Builds</product>
          <component>Hudson Connector</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>plan</keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>1.1</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Hartmann">mail</reporter>
          <assigned_to name="Steffen Pingel">steffen.pingel</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2236256</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Hartmann">mail</who>
    <bug_when>2013-03-25 11:17:06 -0400</bug_when>
    <thetext>The following NPE occured while reading a successful job from Hudson 3.0.1:

java.lang.NullPointerException
	at org.eclipse.mylyn.internal.hudson.core.HudsonServerBehaviour.updateStateAndStatus(HudsonServerBehaviour.java:844)
	at org.eclipse.mylyn.internal.hudson.core.HudsonServerBehaviour.parseJob(HudsonServerBehaviour.java:574)
	at org.eclipse.mylyn.internal.hudson.core.HudsonServerBehaviour.getPlans(HudsonServerBehaviour.java:246)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession$4.run(RefreshSession.java:175)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession$4.run(RefreshSession.java:1)
	at org.eclipse.mylyn.builds.internal.core.util.BuildRunner.run(BuildRunner.java:72)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession.refreshPlans(RefreshSession.java:171)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession.refresh(RefreshSession.java:89)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshOperation$RefreshJob.doExecute(RefreshOperation.java:74)
	at org.eclipse.mylyn.builds.internal.core.operations.BuildJob.run(BuildJob.java:79)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)


Line 844: if (job.getColor().equals(HudsonModelBallColor.BLUE)) {

job.getColor() returns null. When manually calling the REST service you can see that Hudson returns &quot;&lt;color&gt;green&lt;/color&gt;&quot; (Hudson&apos;s new system config flag green/blue in 3.0.1 doesn&apos;t matter)

I think that the generated Mylyn class HudsonModelBallColor and the color-mapping in HudsonServerBehaviour.updateStateAndStatus() need to be updated to the changes (successful = green) introduced with Hudson 3.0.1 (see http://git.eclipse.org/c/hudson/org.eclipse.hudson.core.git/commit/hudson-core/src/main/java/hudson/model?id=961404fc4f7dfb4aa83c71bad4e813b88d32b5b0).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2238184</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-03-31 13:39:05 -0400</bug_when>
    <thetext>Thanks for the report. We should update tests to include Hudson 3.0.1 and make the changes suggested.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2244553</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-16 19:48:00 -0400</bug_when>
    <thetext>I proposed a change here that adds support of the green ball: https://git.eclipse.org/r/#/c/11959/ . A test environment is available here: http://mylyn.org/hudson-3.0.1/ .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2244555</commentid>
    <comment_count>3</comment_count>
      <attachid>229783</attachid>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-16 19:50:15 -0400</bug_when>
    <thetext>Created attachment 229783
mylyn/context/zip</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2244939</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-17 12:26:44 -0400</bug_when>
    <thetext>The fix has been merged. The test server is up and running and all tests appear to be passing. Support for Hudson 3.0.1 will be available in the next weekly build: https://hudson.eclipse.org/hudson/job/mylyn-3.9.x-release/4/console

Christian, please reopen if you notice any other problems when connecting to 3.0.1 using the latest weekly build (once available).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2245390</commentid>
    <comment_count>5</comment_count>
    <who name="Christian Hartmann">mail</who>
    <bug_when>2013-04-18 08:58:19 -0400</bug_when>
    <thetext>I&apos;ve tested this build https://hudson.eclipse.org/hudson/job/mylyn-3.9.x-release/5/ and could connect to our Hudson 3.0.1 instance. Thanks! :-)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>229783</attachid>
            <date>2013-04-16 19:50:00 -0400</date>
            <delta_ts>2013-04-16 19:50:15 -0400</delta_ts>
            <desc>mylyn/context/zip</desc>
            <filename>mylyn-context.zip</filename>
            <type>application/octet-stream</type>
            <size>3324</size>
            <attacher name="Steffen Pingel">steffen.pingel</attacher>
            
              <data encoding="base64">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
AAAAAAEAAQBeAAAAiAwAAAAA
</data>

          </attachment>
      

    </bug>

</bugzilla>