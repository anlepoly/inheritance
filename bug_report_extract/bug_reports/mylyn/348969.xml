<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>348969</bug_id>
          
          <creation_ts>2011-06-09 17:28:00 -0400</creation_ts>
          <short_desc>TaskDataModelListener not removed when attributes section not expanded</short_desc>
          <delta_ts>2011-08-27 17:06:19 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Framework</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>contributed</keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.6.2</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sam Davis">sam.davis</reporter>
          <assigned_to name="Sam Davis">sam.davis</assigned_to>
          <cc>steffen.pingel</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1947965</commentid>
    <comment_count>0</comment_count>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2011-06-09 17:28:49 -0400</bug_when>
    <thetext>When AbstractAttributeEditor is created, it adds a TaskDataModelListener to the TaskDataModel, and this listener is removed when the editor&apos;s control is disposed. However, if the attributes section is not expanded, the control is never created, and thus not diposed, so the model listener is never removed. This means that if you open a task editor without expanding the attributes section and repeatedly refresh it, you will add another model listener with every refresh.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1947966</commentid>
    <comment_count>1</comment_count>
      <attachid>197745</attachid>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2011-06-09 17:29:41 -0400</bug_when>
    <thetext>Created attachment 197745
add listener only when the setControl is called</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1947968</commentid>
    <comment_count>2</comment_count>
      <attachid>197746</attachid>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2011-06-09 17:33:11 -0400</bug_when>
    <thetext>Created attachment 197746
add listener only when the setControl is called</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1948024</commentid>
    <comment_count>3</comment_count>
      <attachid>197748</attachid>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2011-06-09 21:16:38 -0400</bug_when>
    <thetext>Created attachment 197748
RichTextAttributeEditor patch

When RichTextAttributeEditor is created, it calls RichTextEditor.setText() with the current value of its attribute. However, with the change above, if the attribute value changes before the control is created, this change will not be reflected in the control. This patch will call setText again when creating the control.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1985056</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-08-26 13:24:57 -0400</bug_when>
    <thetext>Thanks Sam. Committed as 44ccf7a03a524bbe5f42214f127d9880b4d6b0a7 to e_3_7_m_3_6_x branch and master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1985306</commentid>
    <comment_count>5</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-08-27 17:06:19 -0400</bug_when>
    <thetext>Committed 995030b13e81646276a539a7c90d3077e9d1bd73 to address rendering problem with WikiText (e.g. bug 348237). The original patch did not have this problem, it was caused by me when reordering the refresh call.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>197745</attachid>
            <date>2011-06-09 17:29:00 -0400</date>
            <delta_ts>2011-06-09 17:32:44 -0400</delta_ts>
            <desc>add listener only when the setControl is called</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>1138</size>
            <attacher name="Sam Davis">sam.davis</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UubXlseW4udGFz
a3MudWkNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFza3MvdWkvZWRpdG9ycy9BYnN0
cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qv
bXlseW4vb3JnLmVjbGlwc2UubXlseW4udGFza3Mvb3JnLmVjbGlwc2UubXlseW4udGFza3MudWkv
c3JjL29yZy9lY2xpcHNlL215bHluL3Rhc2tzL3VpL2VkaXRvcnMvQWJzdHJhY3RBdHRyaWJ1dGVF
ZGl0b3IuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMjENCmRpZmYgLXUgLXIxLjIxIEFi
c3RyYWN0QXR0cmlidXRlRWRpdG9yLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFz
a3MvdWkvZWRpdG9ycy9BYnN0cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhCTE3IE1heSAyMDExIDIz
OjQwOjE1IC0wMDAwCTEuMjENCisrKyBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFza3MvdWkvZWRp
dG9ycy9BYnN0cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhCTkgSnVuIDIwMTEgMjE6Mjg6MzkgLTAw
MDANCkBAIC04OSw3ICs4OSw2IEBADQogCQlzZXREZWNvcmF0aW9uRW5hYmxlZCh0cnVlKTsNCiAJ
CXNldFJlYWRPbmx5KHRhc2tBdHRyaWJ1dGUuZ2V0TWV0YURhdGEoKS5pc1JlYWRPbmx5KCkpOw0K
IAkJc2V0RGVzY3JpcHRpb24odGFza0F0dHJpYnV0ZS5nZXRNZXRhRGF0YSgpLmdldFZhbHVlKFRh
c2tBdHRyaWJ1dGUuTUVUQV9ERVNDUklQVElPTikpOw0KLQkJZ2V0TW9kZWwoKS5hZGRNb2RlbExp
c3RlbmVyKG1vZGVsTGlzdGVuZXIpOw0KIAl9DQogDQogCS8qKg0KQEAgLTE5NCw2ICsxOTMsNyBA
QA0KIAkJfQ0KIAkJdGhpcy5jb250cm9sID0gY29udHJvbDsNCiAJCWlmIChjb250cm9sICE9IG51
bGwpIHsNCisJCQlnZXRNb2RlbCgpLmFkZE1vZGVsTGlzdGVuZXIobW9kZWxMaXN0ZW5lcik7DQog
CQkJY29udHJvbC5zZXREYXRhKEtFWV9UQVNLX0FUVFJJQlVURSwgdGFza0F0dHJpYnV0ZSk7DQog
CQkJY29udHJvbC5hZGREaXNwb3NlTGlzdGVuZXIoZGlzcG9zZUxpc3RlbmVyKTsNCiAJCX0NCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>197746</attachid>
            <date>2011-06-09 17:33:00 -0400</date>
            <delta_ts>2011-06-09 17:33:11 -0400</delta_ts>
            <desc>add listener only when the setControl is called</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>1231</size>
            <attacher name="Sam Davis">sam.davis</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UubXlseW4udGFz
a3MudWkNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFza3MvdWkvZWRpdG9ycy9BYnN0
cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qv
bXlseW4vb3JnLmVjbGlwc2UubXlseW4udGFza3Mvb3JnLmVjbGlwc2UubXlseW4udGFza3MudWkv
c3JjL29yZy9lY2xpcHNlL215bHluL3Rhc2tzL3VpL2VkaXRvcnMvQWJzdHJhY3RBdHRyaWJ1dGVF
ZGl0b3IuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMjENCmRpZmYgLXUgLXIxLjIxIEFi
c3RyYWN0QXR0cmlidXRlRWRpdG9yLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFz
a3MvdWkvZWRpdG9ycy9BYnN0cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhCTE3IE1heSAyMDExIDIz
OjQwOjE1IC0wMDAwCTEuMjENCisrKyBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFza3MvdWkvZWRp
dG9ycy9BYnN0cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhCTkgSnVuIDIwMTEgMjE6MzI6MDMgLTAw
MDANCkBAIC04OSw3ICs4OSw2IEBADQogCQlzZXREZWNvcmF0aW9uRW5hYmxlZCh0cnVlKTsNCiAJ
CXNldFJlYWRPbmx5KHRhc2tBdHRyaWJ1dGUuZ2V0TWV0YURhdGEoKS5pc1JlYWRPbmx5KCkpOw0K
IAkJc2V0RGVzY3JpcHRpb24odGFza0F0dHJpYnV0ZS5nZXRNZXRhRGF0YSgpLmdldFZhbHVlKFRh
c2tBdHRyaWJ1dGUuTUVUQV9ERVNDUklQVElPTikpOw0KLQkJZ2V0TW9kZWwoKS5hZGRNb2RlbExp
c3RlbmVyKG1vZGVsTGlzdGVuZXIpOw0KIAl9DQogDQogCS8qKg0KQEAgLTE5NCw2ICsxOTMsOCBA
QA0KIAkJfQ0KIAkJdGhpcy5jb250cm9sID0gY29udHJvbDsNCiAJCWlmIChjb250cm9sICE9IG51
bGwpIHsNCisJCQlnZXRNb2RlbCgpLnJlbW92ZU1vZGVsTGlzdGVuZXIobW9kZWxMaXN0ZW5lcik7
Ly8gZW5zdXJlIHRoZSBsaXN0ZW5lciBpcyBvbmx5IGFkZGVkIG9uY2UNCisJCQlnZXRNb2RlbCgp
LmFkZE1vZGVsTGlzdGVuZXIobW9kZWxMaXN0ZW5lcik7DQogCQkJY29udHJvbC5zZXREYXRhKEtF
WV9UQVNLX0FUVFJJQlVURSwgdGFza0F0dHJpYnV0ZSk7DQogCQkJY29udHJvbC5hZGREaXNwb3Nl
TGlzdGVuZXIoZGlzcG9zZUxpc3RlbmVyKTsNCiAJCX0NCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>197748</attachid>
            <date>2011-06-09 21:16:00 -0400</date>
            <delta_ts>2011-06-09 21:16:38 -0400</delta_ts>
            <desc>RichTextAttributeEditor patch</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>924</size>
            <attacher name="Sam Davis">sam.davis</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UubXlseW4udGFz
a3MudWkNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvbXlseW4vaW50ZXJuYWwvdGFza3MvdWkvZWRp
dG9ycy9SaWNoVGV4dEF0dHJpYnV0ZUVkaXRvci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTog
L2N2c3Jvb3QvbXlseW4vb3JnLmVjbGlwc2UubXlseW4udGFza3Mvb3JnLmVjbGlwc2UubXlseW4u
dGFza3MudWkvc3JjL29yZy9lY2xpcHNlL215bHluL2ludGVybmFsL3Rhc2tzL3VpL2VkaXRvcnMv
UmljaFRleHRBdHRyaWJ1dGVFZGl0b3IuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNDkN
CmRpZmYgLXUgLXIxLjQ5IFJpY2hUZXh0QXR0cmlidXRlRWRpdG9yLmphdmENCi0tLSBzcmMvb3Jn
L2VjbGlwc2UvbXlseW4vaW50ZXJuYWwvdGFza3MvdWkvZWRpdG9ycy9SaWNoVGV4dEF0dHJpYnV0
ZUVkaXRvci5qYXZhCTE3IE1heSAyMDExIDIzOjQwOjE1IC0wMDAwCTEuNDkNCisrKyBzcmMvb3Jn
L2VjbGlwc2UvbXlseW4vaW50ZXJuYWwvdGFza3MvdWkvZWRpdG9ycy9SaWNoVGV4dEF0dHJpYnV0
ZUVkaXRvci5qYXZhCTEwIEp1biAyMDExIDAxOjEzOjU5IC0wMDAwDQpAQCAtODAsNiArODAsNyBA
QA0KIA0KIAlAT3ZlcnJpZGUNCiAJcHVibGljIHZvaWQgY3JlYXRlQ29udHJvbChDb21wb3NpdGUg
cGFyZW50LCBGb3JtVG9vbGtpdCB0b29sa2l0KSB7DQorCQllZGl0b3Iuc2V0VGV4dChnZXRWYWx1
ZSgpKTsNCiAJCWVkaXRvci5jcmVhdGVDb250cm9sKHBhcmVudCwgdG9vbGtpdCk7DQogCQllZGl0
b3IuZ2V0Vmlld2VyKCkuZ2V0VGV4dFdpZGdldCgpLnNldFRvb2xUaXBUZXh0KGdldERlc2NyaXB0
aW9uKCkpOw0KIA0K
</data>

          </attachment>
      

    </bug>

</bugzilla>