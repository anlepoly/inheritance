<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>369805</bug_id>
          
          <creation_ts>2012-01-26 09:16:00 -0500</creation_ts>
          <short_desc>[upstream] certificate authentication with custom keystore fails behind proxy</short_desc>
          <delta_ts>2012-02-09 16:31:07 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Commons</product>
          <component>Network</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="Project Inbox">mylyn-triaged</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2056537</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-26 09:16:02 -0500</bug_when>
    <thetext>If certificate authentication is used behind a proxy the keystore information is not available when the socket factory is created hence authentication fails. When HttpClient establishes the connection to the host PollingSslProtocolSocketFactory.createLayeredSocket() is invoked which does not receive an instance of HttpParams.

The work around is to configure the default keystore using system properties.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2056552</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-26 09:31:33 -0500</bug_when>
    <thetext>I have filed an upstream bug here to clarify if an HttpParams parameter could be added: https://issues.apache.org/jira/browse/HTTPCLIENT-1160. 

I&apos;ll set the default keystore in the test environment for now to make tests on the Eclipse.org Hudson pass.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2056901</commentid>
    <comment_count>2</comment_count>
      <attachid>210159</attachid>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-26 18:22:58 -0500</bug_when>
    <thetext>Created attachment 210159
mylyn/context/zip</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2063774</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-02-09 16:31:07 -0500</bug_when>
    <thetext>This will be fixed in HttpClient 4.2. We&apos;ll need to wait for the upstream fix in order to address this.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>210159</attachid>
            <date>2012-01-26 18:22:00 -0500</date>
            <delta_ts>2012-01-26 18:22:58 -0500</delta_ts>
            <desc>mylyn/context/zip</desc>
            <filename>mylyn-context.zip</filename>
            <type>application/octet-stream</type>
            <size>1965</size>
            <attacher name="Steffen Pingel">steffen.pingel</attacher>
            
              <data encoding="base64">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
NS54bWxQSwUGAAAAAAEAAQBeAAAAOQcAAAAA
</data>

          </attachment>
      

    </bug>

</bugzilla>