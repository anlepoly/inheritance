<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>406848</bug_id>
          
          <creation_ts>2013-04-29 18:34:00 -0400</creation_ts>
          <short_desc>make sure that compatibility feature only installs on 3.8 and later</short_desc>
          <delta_ts>2013-05-02 08:10:13 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn</product>
          <component>Releng</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>3.9</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="Steffen Pingel">steffen.pingel</assigned_to>
          <cc>anb0s</cc>
    
    <cc>shawn.minto</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2250144</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-29 18:34:29 -0400</bug_when>
    <thetext>The compatibility feature provides the authentication bundle for Eclipse 3.8 and later. If installed on 3.7 it breaks the keystore. The feature should define a version constraint to ensure that it can not be installed on Eclipse 3.7 or earlier.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250148</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-29 18:47:10 -0400</bug_when>
    <thetext>I wonder if something like this would work as a p2.inf that is included in the feature:

pre. 
requires.0.namespace = org.eclipse.core.runtime
requires.0.range = 3.8.0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250151</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-29 18:50:09 -0400</bug_when>
    <thetext>pre. 
requires.0.namespace = osgi.bundle
requires.0.name = org.eclipse.core.runtime
requires.0.range = 3.8.0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250154</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-29 18:55:20 -0400</bug_when>
    <thetext>This may be the better alternative:

metaRequirements - these are capabilities that the IU puts on the profile that must already be installed before this IU can be installed.

http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_customizing_metadata.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250156</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-29 18:57:59 -0400</bug_when>
    <thetext>From Shawn:

* Mark the bundle dependencies in the manifest as non greedy
* Add the feature as an optional included feature of tasks
* Add the p2.inf metaRequirements to prevent installation on older Eclipse versions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2250704</commentid>
    <comment_count>5</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-30 13:35:12 -0400</bug_when>
    <thetext>Pushed a review here: https://git.eclipse.org/r/#/c/12395/. My thinking is that users have to explicitly install the feature in order to migrate credentials and I don&apos;t want to put it on the Kepler site any longer:

* Users on &lt;= Eclipse 3.8 are okay anyways
* Users on &gt;= Eclipse 4.2 upgrading already have the compatibility bundle if they are using Mylyn and that should work for migrating credentials as long as they are upgrading
* Users doing an install of Eclipse &gt;= 4.2 with a fresh workspace will not require migration

* Users doing an install of Eclipse &gt;= 4.2 with an existing workspace will need to install the compatibility feature in order to migrate</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2251418</commentid>
    <comment_count>6</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-05-02 06:33:47 -0400</bug_when>
    <thetext>I have verified that installation fails on Eclipse 3.7 or earlier.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2251458</commentid>
    <comment_count>7</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-05-02 08:10:13 -0400</bug_when>
    <thetext>*** Bug 390175 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>