<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>409087</bug_id>
          
          <creation_ts>2013-05-26 12:26:00 -0400</creation_ts>
          <short_desc>Update Bugzilla Test instances to 4.4 final and 4.2.6</short_desc>
          <delta_ts>2013-06-07 09:59:11 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Bugzilla</component>
          <version>3.8</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>3.9</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Frank Becker">eclipse</reporter>
          <assigned_to name="Frank Becker">eclipse</assigned_to>
          <cc>steffen.pingel</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2263197</commentid>
    <comment_count>0</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2013-05-26 12:26:02 -0400</bug_when>
    <thetext>We need to do the following:
1) Update Bugzilla Test instances to 4.4 final and 4.2.6
2) clear Bugzilla Database is now controlled by /etc/bugzilla_clear_mode

With 2) we can control the database drop and recreate by the content of the file and have no longer to change the puppet file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2263966</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-05-27 19:05:38 -0400</bug_when>
    <thetext>Would be great to get this in for 3.9!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2264760</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-05-29 03:14:34 -0400</bug_when>
    <thetext>Looks like this was done in dd372b0ff771b60311a739f7c260dc8d0000619a. Frank, anything else left to do here?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2264761</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-05-29 03:16:37 -0400</bug_when>
    <thetext>Just noticed that there were some failure in the latest test run: http://ci.mylyn.org/job/mylyn-3.9.x/57/TARGET=juno/testReport/junit/org.eclipse.mylyn.bugzilla.tests.core/BugzillaRepositoryConnectorStandaloneTest/testPerformQuery_4_2_Use_Bugaliases/. It looks like the test is taking too long:

Thread[main,6,main]
  sun.misc.Unsafe.park(Native Method)
  java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
  java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1033)
  java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1326)
  java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:257)
  java.util.concurrent.FutureTask.get(FutureTask.java:119)
  org.eclipse.mylyn.commons.net.WebUtil.execute(WebUtil.java:368)
  org.eclipse.mylyn.commons.net.WebUtil.executeInternal(WebUtil.java:382)
  org.eclipse.mylyn.commons.net.WebUtil.execute(WebUtil.java:336)
  org.eclipse.mylyn.commons.net.WebUtil.execute(WebUtil.java:310)
  org.eclipse.mylyn.internal.bugzilla.core.BugzillaClient.postFormData(BugzillaClient.java:1045)
  org.eclipse.mylyn.internal.bugzilla.core.BugzillaClient.getSearchHits(BugzillaClient.java:618)
  org.eclipse.mylyn.internal.bugzilla.core.BugzillaRepositoryConnector.performQuery(BugzillaRepositoryConnector.java:394)
  org.eclipse.mylyn.bugzilla.tests.core.BugzillaRepositoryConnectorStandaloneTest.testPerformQuery(BugzillaRepositoryConnectorStandaloneTest.java:255)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2265809</commentid>
    <comment_count>4</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2013-05-30 16:22:02 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; Just noticed that there were some failure in the latest test run:
&gt; http://ci.mylyn.org/job/mylyn-3.9.x/57/TARGET=juno/testReport/junit/org.
&gt; eclipse.mylyn.bugzilla.tests.core/BugzillaRepositoryConnectorStandaloneTest/
&gt; testPerformQuery_4_2_Use_Bugaliases/. It looks like the test is taking too
&gt; long:
&gt; 
Sorry,

I can not reproduce this from my environment.

Should we revert to 4.2.5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2266982</commentid>
    <comment_count>5</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-06-03 09:29:31 -0400</bug_when>
    <thetext>Let&apos;s do another test run on the server. I would guess it&apos;s related to the number of bugs in the repository. Can we scope down the query to retrieve very few tasks only, e.g. by filtering based on a unique summary as we done for other queries?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2268954</commentid>
    <comment_count>6</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2013-06-05 22:36:41 -0400</bug_when>
    <thetext>(In reply to comment #5)
&gt; Let&apos;s do another test run on the server. I would guess it&apos;s related to the
&gt; number of bugs in the repository. Can we scope down the query to retrieve
&gt; very few tasks only, e.g. by filtering based on a unique summary as we done
&gt; for other queries?

Actual we have 6772 bugs in the database and the query return 63 (http://mylyn.org/bugzilla-4.2.6/buglist.cgi?priority=Highest&amp;emailassigned_to1=1&amp;query_format=advanced&amp;emailreporter1=1&amp;field0-0-0=bug_status&amp;bug_severity=trivial&amp;bug_status=UNCONFIRMED&amp;bug_status=CONFIRMED&amp;type0-0-1=equals&amp;value0-0-1=tests%40mylyn.eclipse.org&amp;email1=tests%40mylyn.eclipse.org&amp;type0-0-0=notequals&amp;field0-0-1=reporter&amp;value0-0-0=UNCONFIRMED&amp;emailtype1=exact) so I think we must have an other problem here.

I have changed the file /etc/bugzilla_clear_mode so the next time we run job mylyn-puppet-bugzilla we clear all databases.

Maybe we should run mylyn-puppet-bugzilla every week and clear the database.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2269862</commentid>
    <comment_count>7</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-06-07 09:59:11 -0400</bug_when>
    <thetext>I have re-run the provisioning script. Let&apos;s see how that goes. I&apos;d prefer if tests worked against Bugzilla instances with many files (e.g. by scoping down queries) rather than requiring regular clearing of the database.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>