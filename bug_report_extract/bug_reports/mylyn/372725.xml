<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>372725</bug_id>
          
          <creation_ts>2012-02-28 07:25:00 -0500</creation_ts>
          <short_desc>handle changes to task data directory</short_desc>
          <delta_ts>2012-03-02 19:04:00 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Framework</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows XP</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>3.7</target_milestone>
          
          <blocked>191522</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="David Green">david.green</assigned_to>
          <cc>david.green</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2072035</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-02-28 07:25:43 -0500</bug_when>
    <thetext>From bug 191522 comment 35:

Index entries are identified by the task handle identifier, which is built from the task repository URL. Presumably if repository URLs are changed, events will be fired for each task affected. These tasks will be added to the index however the old version of the task with the old URL will remain in the index.

In this case the index should behave in the same was as described above (an out of date index) with possible false matches. The solution would be to reindex the task list. An IRepositoryListener needs to be registered to handle this.

Also the case needs to be handled when the task data directory changes (see TasksUiPlugin.reloadDataDirectory()).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2072137</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-02-28 10:10:47 -0500</bug_when>
    <thetext>Looks like changes to task handles are already managed. Hence only handling code for location changes of the task data directory need to be added.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2074253</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-02 06:56:05 -0500</bug_when>
    <thetext>I have proposed a fix here: http://review.mylyn.org/#change,348.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2074580</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-02 13:35:28 -0500</bug_when>
    <thetext>David, please make the required fixes that you identified in the review and push the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2074755</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-02 18:06:07 -0500</bug_when>
    <thetext>Great! Thanks very much for addressing this. I have pushed the latest patch set.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2074769</commentid>
    <comment_count>5</comment_count>
    <who name="David Green">david.green</who>
    <bug_when>2012-03-02 19:04:00 -0500</bug_when>
    <thetext>Thanks Steffen.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>