<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>362712</bug_id>
          
          <creation_ts>2011-11-02 14:37:00 -0400</creation_ts>
          <short_desc>error parsing response from xmlrpc.cgi</short_desc>
          <delta_ts>2011-11-05 05:39:23 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Bugzilla</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>3.6.4</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Paul Collins">paul.collins.iii</reporter>
          <assigned_to name="Frank Becker">eclipse</assigned_to>
          <cc>eclipse</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2020333</commentid>
    <comment_count>0</comment_count>
    <who name="Paul Collins">paul.collins.iii</who>
    <bug_when>2011-11-02 14:37:22 -0400</bug_when>
    <thetext>For Bugzilla 4.0.2, using the xmlrpc.cgi interface for a custom workflow I get a &quot;java.lang.Double cannot be cast to java.lang.String&quot; when updating the repository config.
If uncheck the &quot;Use xmlrpc.cgi&quot; setting and update the repository config it works fine (but is obviously missing my customized workflow).

The related line that&apos;s causing the crash appears to be related to the defaultMilestone, which is disabled on my bugzilla server. Enabling &quot;usetargetmilestone&quot; in Bugzilla did not resolve the issue for Mylyn.


-- Config Details for Mylyn --
org.eclipse.mylyn_feature (3.7.0.I20111101-0551) &quot;Mylyn&quot;
org.eclipse.mylyn.bugzilla_feature (3.7.0.I20111101-0551) &quot;Mylyn&quot;
org.eclipse.mylyn.context_feature (3.7.0.I20111101-0551) &quot;Mylyn&quot;
org.eclipse.mylyn.ide_feature (3.7.0.I20111101-0551) &quot;Mylyn&quot;
org.eclipse.mylyn.java_feature (3.7.0.I20111101-0551) &quot;Mylyn&quot;
org.eclipse.mylyn.team_feature (3.7.0.I20111101-0551) &quot;Mylyn&quot;
org.eclipse.mylyn.wikitext_feature (1.6.0.I20111101-0551) &quot;Mylyn&quot;

-- Error Details --
Date: Wed Nov 02 11:01:43 PDT 2011
Message: An internal error occurred during: &quot;Updating repository configuration for [hidden bugzilla link]&quot;.
Severity: Error
Product: Eclipse 1.4.1.20110909-0613 (org.eclipse.epp.package.java.product)
Plugin: org.eclipse.core.jobs
Session Data:
eclipse.buildId=M20110909-1335
java.version=1.6.0_22
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os linux -ws gtk -arch x86_64 -product org.eclipse.epp.package.java.product

Exception Stack Trace:
java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.String
	at org.eclipse.mylyn.internal.bugzilla.core.service.BugzillaXmlRpcClient.updateProductInfo(BugzillaXmlRpcClient.java:400)
	at org.eclipse.mylyn.internal.bugzilla.core.service.BugzillaXmlRpcClient.updateConfiguration(BugzillaXmlRpcClient.java:382)
	at org.eclipse.mylyn.internal.bugzilla.core.BugzillaClient.getRepositoryConfiguration(BugzillaClient.java:766)
	at org.eclipse.mylyn.internal.bugzilla.core.BugzillaRepositoryConnector.getRepositoryConfiguration(BugzillaRepositoryConnector.java:753)
	at org.eclipse.mylyn.internal.bugzilla.core.BugzillaRepositoryConnector.updateRepositoryConfiguration(BugzillaRepositoryConnector.java:468)
	at org.eclipse.mylyn.internal.bugzilla.ui.tasklist.BugzillaRepositorySettingsPage.performUpdate(BugzillaRepositorySettingsPage.java:600)
	at org.eclipse.mylyn.internal.bugzilla.ui.tasklist.BugzillaRepositorySettingsPage$5.run(BugzillaRepositorySettingsPage.java:569)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2020439</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-11-02 19:00:39 -0400</bug_when>
    <thetext>Frank, I think you had a fix for this already?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2020545</commentid>
    <comment_count>2</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2011-11-03 01:48:49 -0400</bug_when>
    <thetext>Yes I know this problem this is part of an other patch.

You get this if you have an milestone like 1.0 with the xmlrpc this is returned as an double and Not as an string

Try to extract this later today from the other patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2020592</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-11-03 04:14:08 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; Try to extract this later today from the other patch

Great! We should backport this fix for 3.6.4.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2020876</commentid>
    <comment_count>4</comment_count>
    <who name="Paul Collins">paul.collins.iii</who>
    <bug_when>2011-11-03 12:03:18 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; You get this if you have an milestone like 1.0 with the xmlrpc this is returned
&gt; as an double and Not as an string

Ah! So the quick workaround for now is just to take any milestone like that and convert it to something that doesn&apos;t look like a double. I updated my bugzilla settings refreshed mylyn with the xmlrpc.cgi enabled and I have my custom workflows now! Glad there&apos;s a patch for it but thanks for the workaround :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2021579</commentid>
    <comment_count>5</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2011-11-04 15:06:53 -0400</bug_when>
    <thetext>Steffen,

I have patch in HEAD (id=c32f9d0154bdcb82f70615c15638e2ec56dcf0f1) can you do the backport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2021682</commentid>
    <comment_count>6</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-11-05 05:39:10 -0400</bug_when>
    <thetext>Looks like this was backported. Thanks!</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>