<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>373327</bug_id>
          
          <creation_ts>2012-03-06 03:31:00 -0500</creation_ts>
          <short_desc>[epub] It should be possible to load an already unpacked EPUB</short_desc>
          <delta_ts>2012-07-23 16:14:39 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Docs</product>
          <component>EPUB</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>1.7.0</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Torkild Resheim">torkildr</reporter>
          <assigned_to name="Torkild Resheim">torkildr</assigned_to>
          
          <qa_contact name="David Green">david.green</qa_contact>
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2075688</commentid>
    <comment_count>0</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-03-06 03:31:21 -0500</bug_when>
    <thetext>The API has a mechanism for unpacking an EPUB and load it&apos;s contents into the data model. It would be useful if the unpack step was omitted and allow loading of an already unpacked EPUB.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2075750</commentid>
    <comment_count>1</comment_count>
      <attachid>212123</attachid>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-03-06 05:29:11 -0500</bug_when>
    <thetext>Created attachment 212123
Patch to resolve the issue

Will not unpack the EPUB if the destination folder already exists. Sets the modification date of the destination folder to the date of the EPUB file so that one could verify whether or not the EPUB is newer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2075783</commentid>
    <comment_count>2</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-03-06 06:13:30 -0500</bug_when>
    <thetext>(In reply to comment #1)
&gt; Created attachment 212123
&gt; Patch to resolve the issue
&gt; 
&gt; Will not unpack the EPUB if the destination folder already exists. Sets the
&gt; modification date of the destination folder to the date of the EPUB file so that
&gt; one could verify whether or not the EPUB is newer.
To be precise: The EPUB will not be unpacked, but the existing content in the destination folder will be read in and used to populate the data model.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2075811</commentid>
    <comment_count>3</comment_count>
      <attachid>212128</attachid>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-03-06 07:14:21 -0500</bug_when>
    <thetext>Created attachment 212128
Also overwrite existing folder if it exists but is empty.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2093683</commentid>
    <comment_count>4</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-04-15 05:58:34 -0400</bug_when>
    <thetext>Fixed in http://git.eclipse.org/c/mylyn/org.eclipse.mylyn.docs.git/commit/?id=55f3da4247c3fb5f3c56d6560f8abd96e86e8a0d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2106346</commentid>
    <comment_count>5</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-05-11 03:12:30 -0400</bug_when>
    <thetext>Moving to new EPUB component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2140440</commentid>
    <comment_count>6</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-07-23 16:14:39 -0400</bug_when>
    <thetext>Closing resolved issues in released product.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>212123</attachid>
            <date>2012-03-06 05:29:00 -0500</date>
            <delta_ts>2012-03-06 07:14:32 -0500</delta_ts>
            <desc>Patch to resolve the issue</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>10247</size>
            <attacher name="Torkild Resheim">torkildr</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNs
aXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9FUFVCLmphdmEgYi9vcmcuZWNsaXBzZS5teWx5bi5k
b2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvRVBVQi5q
YXZhCmluZGV4IGI1YTViNTEuLmMxMmYxNGEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLm15bHlu
LmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9FUFVC
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3JjL29yZy9lY2xp
cHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL0VQVUIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMTEgVG9ya2lsZCBVLiBSZXNo
ZWltLgorICogQ29weXJpZ2h0IChjKSAyMDExLDIwMTIgVG9ya2lsZCBVLiBSZXNoZWltLgogICog
CiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlp
bmcgbWF0ZXJpYWxzIGFyZSBtYWRlCiAgKiBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRo
ZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hpY2gKQEAgLTY1LDcgKzY1LDcgQEAKIAkv
KiogVmVyc2lvbiBvZiB0aGUgT0NGIHNwZWNpZmljYXRpb24gdXNlZCAqLwogCXByaXZhdGUgc3Rh
dGljIGZpbmFsIFN0cmluZyBPQ0ZfVkVSU0lPTiA9ICIyLjAiOwogCi0JLyoqIE9FQlBTIChPUFMr
T1BGKSBtaW1ldHlwZSAqLworCS8qKiBPRUJQUyAoT1BTK09QRikgTUlNRSB0eXBlICovCiAJcHJp
dmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIE1JTUVUWVBFX09FQlBTID0gImFwcGxpY2F0aW9uL29l
YnBzLXBhY2thZ2UreG1sIjsKIAogCS8qKiBTdWZmaXggZm9yIE9DRiBmaWxlcyAqLwpAQCAtMTgz
LDIyICsxODMsMjIgQEAKIAkgKiAKIAkgKiBAcGFyYW0gZXB1YkZpbGUKIAkgKiAgICAgICAgICAg
IHRoZSB0YXJnZXQgRVBVQiBmaWxlCi0JICogQHBhcmFtIHdvcmtpbmdGb2xkZXIKLQkgKiAgICAg
ICAgICAgIHRoZSB3b3JraW5nIGZvbGRlcgorCSAqIEBwYXJhbSByb290Rm9sZGVyCisJICogICAg
ICAgICAgICB0aGUgcm9vdCBmb2xkZXIgaG9sZGluZyBhbGwgdGhlIEVQVUIgY29udGVudHMKIAkg
KiBAdGhyb3dzIEV4Y2VwdGlvbgogCSAqIEBzZWUge0BsaW5rICNwYWNrKEZpbGUpfQogCSAqLwot
CXB1YmxpYyB2b2lkIHBhY2soRmlsZSBlcHViRmlsZSwgRmlsZSB3b3JraW5nRm9sZGVyKSB0aHJv
d3MgRXhjZXB0aW9uIHsKKwlwdWJsaWMgdm9pZCBwYWNrKEZpbGUgZXB1YkZpbGUsIEZpbGUgcm9v
dEZvbGRlcikgdGhyb3dzIEV4Y2VwdGlvbiB7CiAJCWlmIChvY2ZDb250YWluZXIuZ2V0Um9vdGZp
bGVzKCkuZ2V0Um9vdGZpbGVzKCkuaXNFbXB0eSgpKSB7CiAJCQl0aHJvdyBuZXcgSWxsZWdhbEFy
Z3VtZW50RXhjZXB0aW9uKCJFUFVCIGRvZXMgbm90IGNvbnRhaW4gYW55IHB1YmxpY2F0aW9ucyIp
OwogCQl9Ci0JCXdvcmtpbmdGb2xkZXIubWtkaXJzKCk7Ci0JCWlmICh3b3JraW5nRm9sZGVyLmlz
RGlyZWN0b3J5KCkgfHwgd29ya2luZ0ZvbGRlci5ta2RpcnMoKSkgewotCQkJd3JpdGVPQ0Yod29y
a2luZ0ZvbGRlcik7CisJCXJvb3RGb2xkZXIubWtkaXJzKCk7CisJCWlmIChyb290Rm9sZGVyLmlz
RGlyZWN0b3J5KCkgfHwgcm9vdEZvbGRlci5ta2RpcnMoKSkgeworCQkJd3JpdGVPQ0Yocm9vdEZv
bGRlcik7CiAJCQlFTGlzdDxSb290RmlsZT4gcHVibGljYXRpb25zID0gb2NmQ29udGFpbmVyLmdl
dFJvb3RmaWxlcygpLmdldFJvb3RmaWxlcygpOwogCQkJZm9yIChSb290RmlsZSByb290RmlsZSA6
IHB1YmxpY2F0aW9ucykgewogCQkJCU9iamVjdCBwdWJsaWNhdGlvbiA9IHJvb3RGaWxlLmdldFB1
YmxpY2F0aW9uKCk7Ci0JCQkJRmlsZSByb290ID0gbmV3IEZpbGUod29ya2luZ0ZvbGRlci5nZXRB
YnNvbHV0ZVBhdGgoKSArIEZpbGUuc2VwYXJhdG9yICsgcm9vdEZpbGUuZ2V0RnVsbFBhdGgoKSk7
CisJCQkJRmlsZSByb290ID0gbmV3IEZpbGUocm9vdEZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSAr
IEZpbGUuc2VwYXJhdG9yICsgcm9vdEZpbGUuZ2V0RnVsbFBhdGgoKSk7CiAJCQkJaWYgKHB1Ymxp
Y2F0aW9uIGluc3RhbmNlb2YgT1BTUHVibGljYXRpb24pIHsKIAkJCQkJKChPUFNQdWJsaWNhdGlv
bikgcHVibGljYXRpb24pLnBhY2socm9vdCk7CiAJCQkJfSBlbHNlIHsKQEAgLTIwOSw5ICsyMDks
OSBAQAogCQkJCQl9CiAJCQkJfQogCQkJfQotCQkJRVBVQkZpbGVVdGlsLnppcChlcHViRmlsZSwg
d29ya2luZ0ZvbGRlcik7CisJCQlFUFVCRmlsZVV0aWwuemlwKGVwdWJGaWxlLCByb290Rm9sZGVy
KTsKIAkJfSBlbHNlIHsKLQkJCXRocm93IG5ldyBJT0V4Y2VwdGlvbigiQ291bGQgbm90IGNyZWF0
ZSB3b3JraW5nIGZvbGRlciBpbiAiICsgd29ya2luZ0ZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSk7
CisJCQl0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkNvdWxkIG5vdCBjcmVhdGUgd29ya2luZyBmb2xk
ZXIgaW4gIiArIHJvb3RGb2xkZXIuZ2V0QWJzb2x1dGVQYXRoKCkpOwogCQl9CiAJfQogCkBAIC0y
MjAsMTYgKzIyMCwxNiBAQAogCSAqIG9mIHRoaXMgRVBVQi4gVGhlIHJlc3VsdCBvZiB0aGlzIG9w
ZXJhdGlvbiBpcyBwbGFjZWQgaW4gdGhlCiAJICoge0BsaW5rICNvY2ZDb250YWluZXJ9IGluc3Rh
bmNlLgogCSAqIAotCSAqIEBwYXJhbSB3b3JraW5nRm9sZGVyCisJICogQHBhcmFtIHJvb3RGb2xk
ZXIKIAkgKiAgICAgICAgICAgIHRoZSBmb2xkZXIgd2hlcmUgdGhlIEVQVUIgd2FzIHVucGFja2Vk
CiAJICogQHRocm93cyBJT0V4Y2VwdGlvbgogCSAqIEBzZWUge0BsaW5rICN1bnBhY2soRmlsZSl9
CiAJICogQHNlZSB7QGxpbmsgI3VucGFjayhGaWxlLCBGaWxlKX0KIAkgKi8KLQlwcm90ZWN0ZWQg
dm9pZCByZWFkT0NGKEZpbGUgd29ya2luZ0ZvbGRlcikgdGhyb3dzIElPRXhjZXB0aW9uIHsKKwlw
cm90ZWN0ZWQgdm9pZCByZWFkT0NGKEZpbGUgcm9vdEZvbGRlcikgdGhyb3dzIElPRXhjZXB0aW9u
IHsKIAkJLy8gVGhlc2UgZmlsZSBuYW1lcyBhcmUgbGlzdGVkIGluIHRoZSBPQ0Ygc3BlY2lmaWNh
dGlvbiBhbmQgbXVzdCBub3QgYmUKIAkJLy8gY2hhbmdlZC4KLQkJRmlsZSBtZXRhRm9sZGVyID0g
bmV3IEZpbGUod29ya2luZ0ZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSArIEZpbGUuc2VwYXJhdG9y
ICsgIk1FVEEtSU5GIik7CisJCUZpbGUgbWV0YUZvbGRlciA9IG5ldyBGaWxlKHJvb3RGb2xkZXIu
Z2V0QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJNRVRBLUlORiIpOwogCQlGaWxl
IGNvbnRhaW5lckZpbGUgPSBuZXcgRmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsg
RmlsZS5zZXBhcmF0b3IgKyAiY29udGFpbmVyLnhtbCIpOwogCQlSZXNvdXJjZVNldCByZXNvdXJj
ZVNldCA9IG5ldyBSZXNvdXJjZVNldEltcGwoKTsKIAkJVVJJIGZpbGVVUkkgPSBVUkkuY3JlYXRl
RmlsZVVSSShjb250YWluZXJGaWxlLmdldEFic29sdXRlUGF0aCgpKTsKQEAgLTMwMCwyNCArMzAw
LDQ1IEBACiAKIAkvKioKIAkgKiBVbnBhY2tzIHRoZSBnaXZlbiBFUFVCIGZpbGUgaW50byB0aGUg
c3BlY2lmaWVkIGRlc3RpbmF0aW9uIGFuZCBwb3B1bGF0ZXMKLQkgKiB0aGUgZGF0YSBtb2RlbCB3
aXRoIHRoZSBjb250ZW50LgorCSAqIHRoZSBkYXRhIG1vZGVsIHdpdGggdGhlIGNvbnRlbnQuIE5v
dGUgdGhhdCB3aGVuIHRoZSBkZXN0aW5hdGlvbiBmb2xkZXIKKwkgKiBhbHJlYWR5IGV4aXN0cyB0
aGUgZmlsZSBFUFVCIHdpbGwgbm90IGJlIHVucGFja2VkIG9yIHZlcmlmaWVkLCBidXQgdGhlCisJ
ICogY29udGVudHMgb2YgdGhlIGRlc3RpbmF0aW9uIHdpbGwgYmUgdHJlYXRlZCBhcyBhbiBhbHJl
YWR5IHVucGFja2VkIEVQVUIuCisJICogSWYgdGhpcyBiZWhhdmlvdXIgaXMgbm90IGRlc2lyZWQg
b25lIHNob3VsZCB0YWtlIHN0ZXBzIHRvIGRlbGV0ZSB0aGUKKwkgKiBmb2xkZXIgcHJpb3IgdG8g
dW5wYWNraW5nLgorCSAqIDxwPgorCSAqIFdoZW4gcGVyZm9ybWluZyB0aGUgdW5wYWNraW5nLCB0
aGUgbW9kaWZpY2F0aW9uIGRhdGUgb2YgdGhlIGRlc3RpbmF0aW9uCisJICogZm9sZGVyIHdpbGwg
YmUgc2V0IHRvIHRoZSBtb2RpZmljYXRpb24gZGF0ZSBvZiB0aGUgc291cmNlIEVQVUIuCisJICog
QWRkaXRpb25hbGx5IHRoZSBjb250ZW50cyBvZiB0aGUgRVBVQiB3aWxsIHJldGFpbiB0aGUgb3Jp
Z2luYWwKKwkgKiBtb2RpZmljYXRpb24gZGF0ZSBpZiBzZXQuCisJICogPC9wPgorCSAqIDxwPgor
CSAqIE11bHRpcGxlIE9QUyByb290IGZpbGVzIGluIHRoZSBwdWJsaWNhdGlvbiB3aWxsIHBvcHVs
YXRlIHRoZSBPQ0YKKwkgKiBjb250YWluZXIgaW5zdGFuY2Ugd2l0aCBvbmUge0BsaW5rIE9QU1B1
YmxpY2F0aW9ufSBmb3IgZWFjaCBhcyBleHBlY3RlZC4KKwkgKiBUaGUgY29udGVudHMgb2YgdGhl
IGRhdGEgbW9kZWwgc3RhcnRpbmcgd2l0aCB0aGUgT0NGIGNvbnRhaW5lciB3aWxsIGJlCisJICog
cmVwbGFjZWQuCisJICogPC9wPgogCSAqIAogCSAqIEBwYXJhbSBlcHViRmlsZQogCSAqICAgICAg
ICAgICAgdGhlIEVQVUIgZmlsZSB0byB1bnBhY2sKLQkgKiBAcGFyYW0gZGVzdGluYXRpb24KKwkg
KiBAcGFyYW0gcm9vdEZvbGRlcgogCSAqICAgICAgICAgICAgdGhlIGRlc3RpbmF0aW9uIGZvbGRl
cgogCSAqIEB0aHJvd3MgRXhjZXB0aW9uCiAJICogQHNlZSB7QGxpbmsgI3VucGFjayhGaWxlKX0g
d2hlbiBkZXN0aW5hdGlvbiBpcyBub3QgaW50ZXJlc3RpbmcKKwkgKiBAc2VlIHtAbGluayAjZ2V0
Q29udGFpbmVyKCl9IHRvIG9idGFpbiB0aGUgY29udGFpbmVyIGluc3RhbmNlCisJICogQHNlZSB7
QGxpbmsgI2dldE9QU1B1YmxpY2F0aW9ucygpfSB0byBnZXQgYSBsaXN0IG9mIGFsbCBjb250YWlu
ZWQgT1BTCisJICogICAgICBwdWJsaWNhdGlvbnMKIAkgKi8KLQlwdWJsaWMgdm9pZCB1bnBhY2so
RmlsZSBlcHViRmlsZSwgRmlsZSBkZXN0aW5hdGlvbikgdGhyb3dzIEV4Y2VwdGlvbiB7Ci0JCUVQ
VUJGaWxlVXRpbC51bnppcChlcHViRmlsZSwgZGVzdGluYXRpb24pOwotCQlyZWFkT0NGKGRlc3Rp
bmF0aW9uKTsKKwlwdWJsaWMgdm9pZCB1bnBhY2soRmlsZSBlcHViRmlsZSwgRmlsZSByb290Rm9s
ZGVyKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJaWYgKCFyb290Rm9sZGVyLmV4aXN0cygpKSB7CisJ
CQlFUFVCRmlsZVV0aWwudW56aXAoZXB1YkZpbGUsIHJvb3RGb2xkZXIpOworCQl9CisJCXJlYWRP
Q0Yocm9vdEZvbGRlcik7CiAJCUVMaXN0PFJvb3RGaWxlPiByb290RmlsZXMgPSBvY2ZDb250YWlu
ZXIuZ2V0Um9vdGZpbGVzKCkuZ2V0Um9vdGZpbGVzKCk7CiAJCWZvciAoUm9vdEZpbGUgcm9vdEZp
bGUgOiByb290RmlsZXMpIHsKIAkJCWlmIChyb290RmlsZS5nZXRNZWRpYVR5cGUoKS5lcXVhbHMo
TUlNRVRZUEVfT0VCUFMpKSB7CiAJCQkJLy8gWFhYOiBIYW5kbGUgdGhpcyBiZXR0ZXIgd2hlbiBh
ZGRpbmcgc3VwcG9ydCBmb3IgRVBVQiAzCiAJCQkJT1BTUHVibGljYXRpb24gb3BzID0gT1BTUHVi
bGljYXRpb24uZ2V0VmVyc2lvbjJJbnN0YW5jZSgpOwotCQkJCUZpbGUgcm9vdCA9IG5ldyBGaWxl
KGRlc3RpbmF0aW9uLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyByb290Rmls
ZS5nZXRGdWxsUGF0aCgpKTsKKwkJCQlGaWxlIHJvb3QgPSBuZXcgRmlsZShyb290Rm9sZGVyLmdl
dEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyByb290RmlsZS5nZXRGdWxsUGF0aCgp
KTsKIAkJCQlvcHMudW5wYWNrKHJvb3QpOwogCQkJCXJvb3RGaWxlLnNldFB1YmxpY2F0aW9uKG9w
cyk7CiAJCQl9CkBAIC0zMjksMTEgKzM1MCwxMSBAQAogCSAqIE9QUyBzcGVjaWZpY2F0aW9uKSA8
Yj5jb250YWluZXIueG1sPC9iPiBpbiB0aGF0IGZvbGRlci4gVGhpcyBpcyBwYXJ0IG9mCiAJICog
dGhlIHBhY2tpbmcgcHJvY2VkdXJlLgogCSAqIAotCSAqIEBwYXJhbSB3b3JraW5nRm9sZGVyCisJ
ICogQHBhcmFtIHJvb3RGb2xkZXIKIAkgKiAgICAgICAgICAgIHRoZSByb290IGZvbGRlcgogCSAq
LwotCXByaXZhdGUgdm9pZCB3cml0ZU9DRihGaWxlIHdvcmtpbmdGb2xkZXIpIHRocm93cyBJT0V4
Y2VwdGlvbiB7Ci0JCUZpbGUgbWV0YUZvbGRlciA9IG5ldyBGaWxlKHdvcmtpbmdGb2xkZXIuZ2V0
QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJNRVRBLUlORiIpOworCXByaXZhdGUg
dm9pZCB3cml0ZU9DRihGaWxlIHJvb3RGb2xkZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CisJCUZp
bGUgbWV0YUZvbGRlciA9IG5ldyBGaWxlKHJvb3RGb2xkZXIuZ2V0QWJzb2x1dGVQYXRoKCkgKyBG
aWxlLnNlcGFyYXRvciArICJNRVRBLUlORiIpOwogCQlpZiAobWV0YUZvbGRlci5ta2RpcigpKSB7
CiAJCQlGaWxlIGNvbnRhaW5lckZpbGUgPSBuZXcgRmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRl
UGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyAiY29udGFpbmVyLnhtbCIpOwogCQkJUmVzb3VyY2VT
ZXQgcmVzb3VyY2VTZXQgPSBuZXcgUmVzb3VyY2VTZXRJbXBsKCk7CmRpZmYgLS1naXQgYS9vcmcu
ZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9l
cHViL2NvcmUvT1BTUHVibGljYXRpb24uamF2YSBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1
Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9PUFNQdWJsaWNhdGlv
bi5qYXZhCmluZGV4IDZiNjY5MTYuLjFmYWVkZTIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLm15
bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9P
UFNQdWJsaWNhdGlvbi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3Jl
L3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9PUFNQdWJsaWNhdGlvbi5qYXZh
CkBAIC0xLDUgKzEsNSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAo
YykgMjAxMSBUb3JraWxkIFUuIFJlc2hlaW0uCisgKiBDb3B5cmlnaHQgKGMpIDIwMTEsMjAxMiBU
b3JraWxkIFUuIFJlc2hlaW0uCiAgKiAKICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJv
Z3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMgYXJlIG1hZGUKICAqIGF2YWlsYWJs
ZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMCB3aGlj
aApAQCAtMTAzMywxNSArMTAzMywxMyBAQAogCS8qKgogCSAqIFBvcHVsYXRlcyB0aGUgZGF0YSBt
b2RlbCB3aXRoIHRoZSBjb250ZW50IGZyb20gYW4gdW5wYWNrZWQgRVBVQi4KIAkgKiAKLQkgKiBA
cGFyYW0gZXB1YkZpbGUKLQkgKiAgICAgICAgICAgIHRoZSBFUFVCIGZpbGUgdG8gdW5wYWNrCi0J
ICogQHBhcmFtIGRlc3RpbmF0aW9uCi0JICogICAgICAgICAgICB0aGUgZGVzdGluYXRpb24gZm9s
ZGVyCisJICogQHBhcmFtIG9wZkZpbGUKKwkgKiAgICAgICAgICAgIHRoZSAoT1BTKSByb290IGZp
bGUKIAkgKiBAdGhyb3dzIEV4Y2VwdGlvbgogCSAqLwotCXZvaWQgdW5wYWNrKEZpbGUgcm9vdEZp
bGUpIHRocm93cyBFeGNlcHRpb24gewotCQlyZWFkT1BGKHJvb3RGaWxlKTsKLQkJcm9vdEZvbGRl
ciA9IHJvb3RGaWxlLmdldEFic29sdXRlRmlsZSgpLmdldFBhcmVudEZpbGUoKTsKKwl2b2lkIHVu
cGFjayhGaWxlIG9wZkZpbGUpIHRocm93cyBFeGNlcHRpb24geworCQlyZWFkT1BGKG9wZkZpbGUp
OworCQlyb290Rm9sZGVyID0gb3BmRmlsZS5nZXRBYnNvbHV0ZUZpbGUoKS5nZXRQYXJlbnRGaWxl
KCk7CiAJCVN0cmluZyB0b2NJZCA9IG9wZlBhY2thZ2UuZ2V0U3BpbmUoKS5nZXRUb2MoKTsKIAkJ
SXRlbSB0b2NJdGVtID0gZ2V0SXRlbUJ5SWQodG9jSWQpOwogCQlGaWxlIHRvY0ZpbGUgPSBuZXcg
RmlsZShyb290Rm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyB0b2NJ
dGVtLmdldEhyZWYoKSk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIu
Y29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vaW50ZXJuYWwvZG9jcy9lcHViL2NvcmUvRVBVQkZp
bGVVdGlsLmphdmEgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2Vj
bGlwc2UvbXlseW4vaW50ZXJuYWwvZG9jcy9lcHViL2NvcmUvRVBVQkZpbGVVdGlsLmphdmEKaW5k
ZXggNDE0MzE1Ny4uNDgwZjZhYSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5l
cHViLmNvcmUvc3JjL29yZy9lY2xpcHNlL215bHluL2ludGVybmFsL2RvY3MvZXB1Yi9jb3JlL0VQ
VUJGaWxlVXRpbC5qYXZhCisrKyBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3Ny
Yy9vcmcvZWNsaXBzZS9teWx5bi9pbnRlcm5hbC9kb2NzL2VwdWIvY29yZS9FUFVCRmlsZVV0aWwu
amF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmln
aHQgKGMpIDIwMTEgVG9ya2lsZCBVLiBSZXNoZWltLgorICogQ29weXJpZ2h0IChjKSAyMDExLDIw
MTIgVG9ya2lsZCBVLiBSZXNoZWltLgogICogCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlz
IHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzIGFyZSBtYWRlCiAgKiBhdmFp
bGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAg
d2hpY2gKQEAgLTE3Nyw2ICsxNzcsMTEgQEAKIAkgKiBVbnBhY2tzIHRoZSBnaXZlbiA8aT5lcHVi
ZmlsZTwvaT4gdG8gdGhlIDxpPmRlc3RpbmF0aW9uPC9pPiBkaXJlY3RvcnkuCiAJICogVGhpcyBt
ZXRob2Qgd2lsbCBhbHNvIHZhbGlkYXRlIHRoZSBmaXJzdCBpdGVtIGNvbnRhaW5lZCBpbiB0aGUg
RVBVQiAoc2VlCiAJICoge0BsaW5rICN3cml0ZUVQVUJIZWFkZXIoWmlwT3V0cHV0U3RyZWFtKX0p
LgorCSAqIDxwPgorCSAqIElmIHRoZSBkZXN0aW5hdGlvbiBmb2xkZXIgZG9lcyBub3QgYWxyZWFk
eSBleGlzdCBpdCB3aWxsIGJlIGNyZWF0ZWQuCisJICogQWRkaXRpb25hbGx5IHRoZSBtb2RpZmlj
YXRpb24gdGltZXN0YW1wIG9mIHRoaXMgZm9sZGVyIHdpbGwgYmUgc2V0IHRvIHRoZQorCSAqIHNh
bWUgYXMgdGhlIG9yaWdpbmF0aW5nIEVQVUIgZmlsZS4KKwkgKiA8L3A+CiAJICogCiAJICogQHBh
cmFtIGVwdWJmaWxlCiAJICogICAgICAgICAgICB0aGUgRVBVQiBmaWxlCkBAIC0yMDEsNiArMjA2
LDkgQEAKIAkJCUZpbGUgbmV3RmlsZSA9IG5ldyBGaWxlKGRlc3RpbmF0aW9uLmdldEFic29sdXRl
UGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyBlbnRyeU5hbWUpOwogCQkJaWYgKGVudHJ5LmlzRGly
ZWN0b3J5KCkpIHsKIAkJCQluZXdGaWxlLm1rZGlycygpOworCQkJCWlmIChlbnRyeS5nZXRUaW1l
KCkgPiAwKSB7CisJCQkJCW5ld0ZpbGUuc2V0TGFzdE1vZGlmaWVkKGVudHJ5LmdldFRpbWUoKSk7
CisJCQkJfQogCQkJCWNvbnRpbnVlOwogCQkJfSBlbHNlIHsKIAkJCQluZXdGaWxlLmdldFBhcmVu
dEZpbGUoKS5ta2RpcnMoKTsKQEAgLTIxMiw2ICsyMjAsMTAgQEAKIAkJCX0KIAkJCWZpbGVvdXRw
dXRzdHJlYW0uY2xvc2UoKTsKIAkJCWluLmNsb3NlRW50cnkoKTsKKwkJCS8vIFVwZGF0ZSB0aGUg
ZmlsZSBtb2RpZmljYXRpb24gdGltZQorCQkJaWYgKGVudHJ5LmdldFRpbWUoKSA+IDApIHsKKwkJ
CQluZXdGaWxlLnNldExhc3RNb2RpZmllZChlbnRyeS5nZXRUaW1lKCkpOworCQkJfQogCQkJaWYg
KGNoZWNrRmlyc3RJdGVtKSB7CiAJCQkJaWYgKCFlbnRyeU5hbWUuZXF1YWxzKCJtaW1ldHlwZSIp
KSB7CiAJCQkJCXRocm93IG5ldyBJT0V4Y2VwdGlvbigiSW52YWxpZCBFUFVCIGZpbGUuIEZpcnN0
IGl0ZW0gbXVzdCBiZSBcIm1pbWV0eXBlXCIiKTsKQEAgLTIyMyw2ICsyMzUsNyBAQAogCQkJCWNo
ZWNrRmlyc3RJdGVtID0gZmFsc2U7CiAJCQl9CiAJCX0KKwkJZGVzdGluYXRpb24uc2V0TGFzdE1v
ZGlmaWVkKGVwdWJmaWxlLmxhc3RNb2RpZmllZCgpKTsKIAl9CiAKIAkvKio=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>212128</attachid>
            <date>2012-03-06 07:14:00 -0500</date>
            <delta_ts>2012-03-06 07:14:21 -0500</delta_ts>
            <desc>Also overwrite existing folder if it exists but is empty.</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>10292</size>
            <attacher name="Torkild Resheim">torkildr</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNs
aXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9FUFVCLmphdmEgYi9vcmcuZWNsaXBzZS5teWx5bi5k
b2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvRVBVQi5q
YXZhCmluZGV4IGI1YTViNTEuLmE3ODgyNDEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLm15bHlu
LmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9FUFVC
LmphdmEKKysrIGIvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3JjL29yZy9lY2xp
cHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL0VQVUIuamF2YQpAQCAtMSw1ICsxLDUgQEAKIC8qKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMTEgVG9ya2lsZCBVLiBSZXNo
ZWltLgorICogQ29weXJpZ2h0IChjKSAyMDExLDIwMTIgVG9ya2lsZCBVLiBSZXNoZWltLgogICog
CiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlp
bmcgbWF0ZXJpYWxzIGFyZSBtYWRlCiAgKiBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRo
ZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hpY2gKQEAgLTY1LDcgKzY1LDcgQEAKIAkv
KiogVmVyc2lvbiBvZiB0aGUgT0NGIHNwZWNpZmljYXRpb24gdXNlZCAqLwogCXByaXZhdGUgc3Rh
dGljIGZpbmFsIFN0cmluZyBPQ0ZfVkVSU0lPTiA9ICIyLjAiOwogCi0JLyoqIE9FQlBTIChPUFMr
T1BGKSBtaW1ldHlwZSAqLworCS8qKiBPRUJQUyAoT1BTK09QRikgTUlNRSB0eXBlICovCiAJcHJp
dmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIE1JTUVUWVBFX09FQlBTID0gImFwcGxpY2F0aW9uL29l
YnBzLXBhY2thZ2UreG1sIjsKIAogCS8qKiBTdWZmaXggZm9yIE9DRiBmaWxlcyAqLwpAQCAtMTgz
LDIyICsxODMsMjIgQEAKIAkgKiAKIAkgKiBAcGFyYW0gZXB1YkZpbGUKIAkgKiAgICAgICAgICAg
IHRoZSB0YXJnZXQgRVBVQiBmaWxlCi0JICogQHBhcmFtIHdvcmtpbmdGb2xkZXIKLQkgKiAgICAg
ICAgICAgIHRoZSB3b3JraW5nIGZvbGRlcgorCSAqIEBwYXJhbSByb290Rm9sZGVyCisJICogICAg
ICAgICAgICB0aGUgcm9vdCBmb2xkZXIgaG9sZGluZyBhbGwgdGhlIEVQVUIgY29udGVudHMKIAkg
KiBAdGhyb3dzIEV4Y2VwdGlvbgogCSAqIEBzZWUge0BsaW5rICNwYWNrKEZpbGUpfQogCSAqLwot
CXB1YmxpYyB2b2lkIHBhY2soRmlsZSBlcHViRmlsZSwgRmlsZSB3b3JraW5nRm9sZGVyKSB0aHJv
d3MgRXhjZXB0aW9uIHsKKwlwdWJsaWMgdm9pZCBwYWNrKEZpbGUgZXB1YkZpbGUsIEZpbGUgcm9v
dEZvbGRlcikgdGhyb3dzIEV4Y2VwdGlvbiB7CiAJCWlmIChvY2ZDb250YWluZXIuZ2V0Um9vdGZp
bGVzKCkuZ2V0Um9vdGZpbGVzKCkuaXNFbXB0eSgpKSB7CiAJCQl0aHJvdyBuZXcgSWxsZWdhbEFy
Z3VtZW50RXhjZXB0aW9uKCJFUFVCIGRvZXMgbm90IGNvbnRhaW4gYW55IHB1YmxpY2F0aW9ucyIp
OwogCQl9Ci0JCXdvcmtpbmdGb2xkZXIubWtkaXJzKCk7Ci0JCWlmICh3b3JraW5nRm9sZGVyLmlz
RGlyZWN0b3J5KCkgfHwgd29ya2luZ0ZvbGRlci5ta2RpcnMoKSkgewotCQkJd3JpdGVPQ0Yod29y
a2luZ0ZvbGRlcik7CisJCXJvb3RGb2xkZXIubWtkaXJzKCk7CisJCWlmIChyb290Rm9sZGVyLmlz
RGlyZWN0b3J5KCkgfHwgcm9vdEZvbGRlci5ta2RpcnMoKSkgeworCQkJd3JpdGVPQ0Yocm9vdEZv
bGRlcik7CiAJCQlFTGlzdDxSb290RmlsZT4gcHVibGljYXRpb25zID0gb2NmQ29udGFpbmVyLmdl
dFJvb3RmaWxlcygpLmdldFJvb3RmaWxlcygpOwogCQkJZm9yIChSb290RmlsZSByb290RmlsZSA6
IHB1YmxpY2F0aW9ucykgewogCQkJCU9iamVjdCBwdWJsaWNhdGlvbiA9IHJvb3RGaWxlLmdldFB1
YmxpY2F0aW9uKCk7Ci0JCQkJRmlsZSByb290ID0gbmV3IEZpbGUod29ya2luZ0ZvbGRlci5nZXRB
YnNvbHV0ZVBhdGgoKSArIEZpbGUuc2VwYXJhdG9yICsgcm9vdEZpbGUuZ2V0RnVsbFBhdGgoKSk7
CisJCQkJRmlsZSByb290ID0gbmV3IEZpbGUocm9vdEZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSAr
IEZpbGUuc2VwYXJhdG9yICsgcm9vdEZpbGUuZ2V0RnVsbFBhdGgoKSk7CiAJCQkJaWYgKHB1Ymxp
Y2F0aW9uIGluc3RhbmNlb2YgT1BTUHVibGljYXRpb24pIHsKIAkJCQkJKChPUFNQdWJsaWNhdGlv
bikgcHVibGljYXRpb24pLnBhY2socm9vdCk7CiAJCQkJfSBlbHNlIHsKQEAgLTIwOSw5ICsyMDks
OSBAQAogCQkJCQl9CiAJCQkJfQogCQkJfQotCQkJRVBVQkZpbGVVdGlsLnppcChlcHViRmlsZSwg
d29ya2luZ0ZvbGRlcik7CisJCQlFUFVCRmlsZVV0aWwuemlwKGVwdWJGaWxlLCByb290Rm9sZGVy
KTsKIAkJfSBlbHNlIHsKLQkJCXRocm93IG5ldyBJT0V4Y2VwdGlvbigiQ291bGQgbm90IGNyZWF0
ZSB3b3JraW5nIGZvbGRlciBpbiAiICsgd29ya2luZ0ZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSk7
CisJCQl0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkNvdWxkIG5vdCBjcmVhdGUgd29ya2luZyBmb2xk
ZXIgaW4gIiArIHJvb3RGb2xkZXIuZ2V0QWJzb2x1dGVQYXRoKCkpOwogCQl9CiAJfQogCkBAIC0y
MjAsMTYgKzIyMCwxNiBAQAogCSAqIG9mIHRoaXMgRVBVQi4gVGhlIHJlc3VsdCBvZiB0aGlzIG9w
ZXJhdGlvbiBpcyBwbGFjZWQgaW4gdGhlCiAJICoge0BsaW5rICNvY2ZDb250YWluZXJ9IGluc3Rh
bmNlLgogCSAqIAotCSAqIEBwYXJhbSB3b3JraW5nRm9sZGVyCisJICogQHBhcmFtIHJvb3RGb2xk
ZXIKIAkgKiAgICAgICAgICAgIHRoZSBmb2xkZXIgd2hlcmUgdGhlIEVQVUIgd2FzIHVucGFja2Vk
CiAJICogQHRocm93cyBJT0V4Y2VwdGlvbgogCSAqIEBzZWUge0BsaW5rICN1bnBhY2soRmlsZSl9
CiAJICogQHNlZSB7QGxpbmsgI3VucGFjayhGaWxlLCBGaWxlKX0KIAkgKi8KLQlwcm90ZWN0ZWQg
dm9pZCByZWFkT0NGKEZpbGUgd29ya2luZ0ZvbGRlcikgdGhyb3dzIElPRXhjZXB0aW9uIHsKKwlw
cm90ZWN0ZWQgdm9pZCByZWFkT0NGKEZpbGUgcm9vdEZvbGRlcikgdGhyb3dzIElPRXhjZXB0aW9u
IHsKIAkJLy8gVGhlc2UgZmlsZSBuYW1lcyBhcmUgbGlzdGVkIGluIHRoZSBPQ0Ygc3BlY2lmaWNh
dGlvbiBhbmQgbXVzdCBub3QgYmUKIAkJLy8gY2hhbmdlZC4KLQkJRmlsZSBtZXRhRm9sZGVyID0g
bmV3IEZpbGUod29ya2luZ0ZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSArIEZpbGUuc2VwYXJhdG9y
ICsgIk1FVEEtSU5GIik7CisJCUZpbGUgbWV0YUZvbGRlciA9IG5ldyBGaWxlKHJvb3RGb2xkZXIu
Z2V0QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJNRVRBLUlORiIpOwogCQlGaWxl
IGNvbnRhaW5lckZpbGUgPSBuZXcgRmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsg
RmlsZS5zZXBhcmF0b3IgKyAiY29udGFpbmVyLnhtbCIpOwogCQlSZXNvdXJjZVNldCByZXNvdXJj
ZVNldCA9IG5ldyBSZXNvdXJjZVNldEltcGwoKTsKIAkJVVJJIGZpbGVVUkkgPSBVUkkuY3JlYXRl
RmlsZVVSSShjb250YWluZXJGaWxlLmdldEFic29sdXRlUGF0aCgpKTsKQEAgLTMwMCwyNCArMzAw
LDQ1IEBACiAKIAkvKioKIAkgKiBVbnBhY2tzIHRoZSBnaXZlbiBFUFVCIGZpbGUgaW50byB0aGUg
c3BlY2lmaWVkIGRlc3RpbmF0aW9uIGFuZCBwb3B1bGF0ZXMKLQkgKiB0aGUgZGF0YSBtb2RlbCB3
aXRoIHRoZSBjb250ZW50LgorCSAqIHRoZSBkYXRhIG1vZGVsIHdpdGggdGhlIGNvbnRlbnQuIE5v
dGUgdGhhdCB3aGVuIHRoZSBkZXN0aW5hdGlvbiBmb2xkZXIKKwkgKiBhbHJlYWR5IGV4aXN0cyBv
ciBpcyBlbXB0eSB0aGUgZmlsZSBFUFVCIHdpbGwgbm90IGJlIHVucGFja2VkIG9yCisJICogdmVy
aWZpZWQsIGJ1dCB0aGUgY29udGVudHMgb2YgdGhlIGRlc3RpbmF0aW9uIHdpbGwgYmUgdHJlYXRl
ZCBhcyBhbgorCSAqIGFscmVhZHkgdW5wYWNrZWQgRVBVQi4gSWYgdGhpcyBiZWhhdmlvdXIgaXMg
bm90IGRlc2lyZWQgb25lIHNob3VsZCB0YWtlCisJICogc3RlcHMgdG8gZGVsZXRlIHRoZSBmb2xk
ZXIgcHJpb3IgdG8gdW5wYWNraW5nLgorCSAqIDxwPgorCSAqIFdoZW4gcGVyZm9ybWluZyB0aGUg
dW5wYWNraW5nLCB0aGUgbW9kaWZpY2F0aW9uIGRhdGUgb2YgdGhlIGRlc3RpbmF0aW9uCisJICog
Zm9sZGVyIHdpbGwgYmUgc2V0IHRvIHRoZSBtb2RpZmljYXRpb24gZGF0ZSBvZiB0aGUgc291cmNl
IEVQVUIuCisJICogQWRkaXRpb25hbGx5IHRoZSBjb250ZW50cyBvZiB0aGUgRVBVQiB3aWxsIHJl
dGFpbiB0aGUgb3JpZ2luYWwKKwkgKiBtb2RpZmljYXRpb24gZGF0ZSBpZiBzZXQuCisJICogPC9w
PgorCSAqIDxwPgorCSAqIE11bHRpcGxlIE9QUyByb290IGZpbGVzIGluIHRoZSBwdWJsaWNhdGlv
biB3aWxsIHBvcHVsYXRlIHRoZSBPQ0YKKwkgKiBjb250YWluZXIgaW5zdGFuY2Ugd2l0aCBvbmUg
e0BsaW5rIE9QU1B1YmxpY2F0aW9ufSBmb3IgZWFjaCBhcyBleHBlY3RlZC4KKwkgKiBUaGUgY29u
dGVudHMgb2YgdGhlIGRhdGEgbW9kZWwgc3RhcnRpbmcgd2l0aCB0aGUgT0NGIGNvbnRhaW5lciB3
aWxsIGJlCisJICogcmVwbGFjZWQuCisJICogPC9wPgogCSAqIAogCSAqIEBwYXJhbSBlcHViRmls
ZQogCSAqICAgICAgICAgICAgdGhlIEVQVUIgZmlsZSB0byB1bnBhY2sKLQkgKiBAcGFyYW0gZGVz
dGluYXRpb24KKwkgKiBAcGFyYW0gcm9vdEZvbGRlcgogCSAqICAgICAgICAgICAgdGhlIGRlc3Rp
bmF0aW9uIGZvbGRlcgogCSAqIEB0aHJvd3MgRXhjZXB0aW9uCiAJICogQHNlZSB7QGxpbmsgI3Vu
cGFjayhGaWxlKX0gd2hlbiBkZXN0aW5hdGlvbiBpcyBub3QgaW50ZXJlc3RpbmcKKwkgKiBAc2Vl
IHtAbGluayAjZ2V0Q29udGFpbmVyKCl9IHRvIG9idGFpbiB0aGUgY29udGFpbmVyIGluc3RhbmNl
CisJICogQHNlZSB7QGxpbmsgI2dldE9QU1B1YmxpY2F0aW9ucygpfSB0byBnZXQgYSBsaXN0IG9m
IGFsbCBjb250YWluZWQgT1BTCisJICogICAgICBwdWJsaWNhdGlvbnMKIAkgKi8KLQlwdWJsaWMg
dm9pZCB1bnBhY2soRmlsZSBlcHViRmlsZSwgRmlsZSBkZXN0aW5hdGlvbikgdGhyb3dzIEV4Y2Vw
dGlvbiB7Ci0JCUVQVUJGaWxlVXRpbC51bnppcChlcHViRmlsZSwgZGVzdGluYXRpb24pOwotCQly
ZWFkT0NGKGRlc3RpbmF0aW9uKTsKKwlwdWJsaWMgdm9pZCB1bnBhY2soRmlsZSBlcHViRmlsZSwg
RmlsZSByb290Rm9sZGVyKSB0aHJvd3MgRXhjZXB0aW9uIHsKKwkJaWYgKCFyb290Rm9sZGVyLmV4
aXN0cygpIHx8IHJvb3RGb2xkZXIubGlzdCgpLmxlbmd0aCA9PSAwKSB7CisJCQlFUFVCRmlsZVV0
aWwudW56aXAoZXB1YkZpbGUsIHJvb3RGb2xkZXIpOworCQl9CisJCXJlYWRPQ0Yocm9vdEZvbGRl
cik7CiAJCUVMaXN0PFJvb3RGaWxlPiByb290RmlsZXMgPSBvY2ZDb250YWluZXIuZ2V0Um9vdGZp
bGVzKCkuZ2V0Um9vdGZpbGVzKCk7CiAJCWZvciAoUm9vdEZpbGUgcm9vdEZpbGUgOiByb290Rmls
ZXMpIHsKIAkJCWlmIChyb290RmlsZS5nZXRNZWRpYVR5cGUoKS5lcXVhbHMoTUlNRVRZUEVfT0VC
UFMpKSB7CiAJCQkJLy8gWFhYOiBIYW5kbGUgdGhpcyBiZXR0ZXIgd2hlbiBhZGRpbmcgc3VwcG9y
dCBmb3IgRVBVQiAzCiAJCQkJT1BTUHVibGljYXRpb24gb3BzID0gT1BTUHVibGljYXRpb24uZ2V0
VmVyc2lvbjJJbnN0YW5jZSgpOwotCQkJCUZpbGUgcm9vdCA9IG5ldyBGaWxlKGRlc3RpbmF0aW9u
LmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyByb290RmlsZS5nZXRGdWxsUGF0
aCgpKTsKKwkJCQlGaWxlIHJvb3QgPSBuZXcgRmlsZShyb290Rm9sZGVyLmdldEFic29sdXRlUGF0
aCgpICsgRmlsZS5zZXBhcmF0b3IgKyByb290RmlsZS5nZXRGdWxsUGF0aCgpKTsKIAkJCQlvcHMu
dW5wYWNrKHJvb3QpOwogCQkJCXJvb3RGaWxlLnNldFB1YmxpY2F0aW9uKG9wcyk7CiAJCQl9CkBA
IC0zMjksMTEgKzM1MCwxMSBAQAogCSAqIE9QUyBzcGVjaWZpY2F0aW9uKSA8Yj5jb250YWluZXIu
eG1sPC9iPiBpbiB0aGF0IGZvbGRlci4gVGhpcyBpcyBwYXJ0IG9mCiAJICogdGhlIHBhY2tpbmcg
cHJvY2VkdXJlLgogCSAqIAotCSAqIEBwYXJhbSB3b3JraW5nRm9sZGVyCisJICogQHBhcmFtIHJv
b3RGb2xkZXIKIAkgKiAgICAgICAgICAgIHRoZSByb290IGZvbGRlcgogCSAqLwotCXByaXZhdGUg
dm9pZCB3cml0ZU9DRihGaWxlIHdvcmtpbmdGb2xkZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7Ci0J
CUZpbGUgbWV0YUZvbGRlciA9IG5ldyBGaWxlKHdvcmtpbmdGb2xkZXIuZ2V0QWJzb2x1dGVQYXRo
KCkgKyBGaWxlLnNlcGFyYXRvciArICJNRVRBLUlORiIpOworCXByaXZhdGUgdm9pZCB3cml0ZU9D
RihGaWxlIHJvb3RGb2xkZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CisJCUZpbGUgbWV0YUZvbGRl
ciA9IG5ldyBGaWxlKHJvb3RGb2xkZXIuZ2V0QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRv
ciArICJNRVRBLUlORiIpOwogCQlpZiAobWV0YUZvbGRlci5ta2RpcigpKSB7CiAJCQlGaWxlIGNv
bnRhaW5lckZpbGUgPSBuZXcgRmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmls
ZS5zZXBhcmF0b3IgKyAiY29udGFpbmVyLnhtbCIpOwogCQkJUmVzb3VyY2VTZXQgcmVzb3VyY2VT
ZXQgPSBuZXcgUmVzb3VyY2VTZXRJbXBsKCk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5teWx5
bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvT1BT
UHVibGljYXRpb24uamF2YSBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9v
cmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9PUFNQdWJsaWNhdGlvbi5qYXZhCmluZGV4
IDZiNjY5MTYuLjFmYWVkZTIgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1
Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9PUFNQdWJsaWNhdGlv
bi5qYXZhCisrKyBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNs
aXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9PUFNQdWJsaWNhdGlvbi5qYXZhCkBAIC0xLDUgKzEs
NSBAQAogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLSAqIENvcHlyaWdodCAoYykgMjAxMSBUb3Jr
aWxkIFUuIFJlc2hlaW0uCisgKiBDb3B5cmlnaHQgKGMpIDIwMTEsMjAxMiBUb3JraWxkIFUuIFJl
c2hlaW0uCiAgKiAKICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhl
IGFjY29tcGFueWluZyBtYXRlcmlhbHMgYXJlIG1hZGUKICAqIGF2YWlsYWJsZSB1bmRlciB0aGUg
dGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMCB3aGljaApAQCAtMTAzMywx
NSArMTAzMywxMyBAQAogCS8qKgogCSAqIFBvcHVsYXRlcyB0aGUgZGF0YSBtb2RlbCB3aXRoIHRo
ZSBjb250ZW50IGZyb20gYW4gdW5wYWNrZWQgRVBVQi4KIAkgKiAKLQkgKiBAcGFyYW0gZXB1YkZp
bGUKLQkgKiAgICAgICAgICAgIHRoZSBFUFVCIGZpbGUgdG8gdW5wYWNrCi0JICogQHBhcmFtIGRl
c3RpbmF0aW9uCi0JICogICAgICAgICAgICB0aGUgZGVzdGluYXRpb24gZm9sZGVyCisJICogQHBh
cmFtIG9wZkZpbGUKKwkgKiAgICAgICAgICAgIHRoZSAoT1BTKSByb290IGZpbGUKIAkgKiBAdGhy
b3dzIEV4Y2VwdGlvbgogCSAqLwotCXZvaWQgdW5wYWNrKEZpbGUgcm9vdEZpbGUpIHRocm93cyBF
eGNlcHRpb24gewotCQlyZWFkT1BGKHJvb3RGaWxlKTsKLQkJcm9vdEZvbGRlciA9IHJvb3RGaWxl
LmdldEFic29sdXRlRmlsZSgpLmdldFBhcmVudEZpbGUoKTsKKwl2b2lkIHVucGFjayhGaWxlIG9w
ZkZpbGUpIHRocm93cyBFeGNlcHRpb24geworCQlyZWFkT1BGKG9wZkZpbGUpOworCQlyb290Rm9s
ZGVyID0gb3BmRmlsZS5nZXRBYnNvbHV0ZUZpbGUoKS5nZXRQYXJlbnRGaWxlKCk7CiAJCVN0cmlu
ZyB0b2NJZCA9IG9wZlBhY2thZ2UuZ2V0U3BpbmUoKS5nZXRUb2MoKTsKIAkJSXRlbSB0b2NJdGVt
ID0gZ2V0SXRlbUJ5SWQodG9jSWQpOwogCQlGaWxlIHRvY0ZpbGUgPSBuZXcgRmlsZShyb290Rm9s
ZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyB0b2NJdGVtLmdldEhyZWYo
KSk7CmRpZmYgLS1naXQgYS9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3Jn
L2VjbGlwc2UvbXlseW4vaW50ZXJuYWwvZG9jcy9lcHViL2NvcmUvRVBVQkZpbGVVdGlsLmphdmEg
Yi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4v
aW50ZXJuYWwvZG9jcy9lcHViL2NvcmUvRVBVQkZpbGVVdGlsLmphdmEKaW5kZXggNDE0MzE1Ny4u
NDgwZjZhYSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3Jj
L29yZy9lY2xpcHNlL215bHluL2ludGVybmFsL2RvY3MvZXB1Yi9jb3JlL0VQVUJGaWxlVXRpbC5q
YXZhCisrKyBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBz
ZS9teWx5bi9pbnRlcm5hbC9kb2NzL2VwdWIvY29yZS9FUFVCRmlsZVV0aWwuamF2YQpAQCAtMSw1
ICsxLDUgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQgKGMpIDIwMTEg
VG9ya2lsZCBVLiBSZXNoZWltLgorICogQ29weXJpZ2h0IChjKSAyMDExLDIwMTIgVG9ya2lsZCBV
LiBSZXNoZWltLgogICogCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5k
IHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzIGFyZSBtYWRlCiAgKiBhdmFpbGFibGUgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hpY2gKQEAgLTE3
Nyw2ICsxNzcsMTEgQEAKIAkgKiBVbnBhY2tzIHRoZSBnaXZlbiA8aT5lcHViZmlsZTwvaT4gdG8g
dGhlIDxpPmRlc3RpbmF0aW9uPC9pPiBkaXJlY3RvcnkuCiAJICogVGhpcyBtZXRob2Qgd2lsbCBh
bHNvIHZhbGlkYXRlIHRoZSBmaXJzdCBpdGVtIGNvbnRhaW5lZCBpbiB0aGUgRVBVQiAoc2VlCiAJ
ICoge0BsaW5rICN3cml0ZUVQVUJIZWFkZXIoWmlwT3V0cHV0U3RyZWFtKX0pLgorCSAqIDxwPgor
CSAqIElmIHRoZSBkZXN0aW5hdGlvbiBmb2xkZXIgZG9lcyBub3QgYWxyZWFkeSBleGlzdCBpdCB3
aWxsIGJlIGNyZWF0ZWQuCisJICogQWRkaXRpb25hbGx5IHRoZSBtb2RpZmljYXRpb24gdGltZXN0
YW1wIG9mIHRoaXMgZm9sZGVyIHdpbGwgYmUgc2V0IHRvIHRoZQorCSAqIHNhbWUgYXMgdGhlIG9y
aWdpbmF0aW5nIEVQVUIgZmlsZS4KKwkgKiA8L3A+CiAJICogCiAJICogQHBhcmFtIGVwdWJmaWxl
CiAJICogICAgICAgICAgICB0aGUgRVBVQiBmaWxlCkBAIC0yMDEsNiArMjA2LDkgQEAKIAkJCUZp
bGUgbmV3RmlsZSA9IG5ldyBGaWxlKGRlc3RpbmF0aW9uLmdldEFic29sdXRlUGF0aCgpICsgRmls
ZS5zZXBhcmF0b3IgKyBlbnRyeU5hbWUpOwogCQkJaWYgKGVudHJ5LmlzRGlyZWN0b3J5KCkpIHsK
IAkJCQluZXdGaWxlLm1rZGlycygpOworCQkJCWlmIChlbnRyeS5nZXRUaW1lKCkgPiAwKSB7CisJ
CQkJCW5ld0ZpbGUuc2V0TGFzdE1vZGlmaWVkKGVudHJ5LmdldFRpbWUoKSk7CisJCQkJfQogCQkJ
CWNvbnRpbnVlOwogCQkJfSBlbHNlIHsKIAkJCQluZXdGaWxlLmdldFBhcmVudEZpbGUoKS5ta2Rp
cnMoKTsKQEAgLTIxMiw2ICsyMjAsMTAgQEAKIAkJCX0KIAkJCWZpbGVvdXRwdXRzdHJlYW0uY2xv
c2UoKTsKIAkJCWluLmNsb3NlRW50cnkoKTsKKwkJCS8vIFVwZGF0ZSB0aGUgZmlsZSBtb2RpZmlj
YXRpb24gdGltZQorCQkJaWYgKGVudHJ5LmdldFRpbWUoKSA+IDApIHsKKwkJCQluZXdGaWxlLnNl
dExhc3RNb2RpZmllZChlbnRyeS5nZXRUaW1lKCkpOworCQkJfQogCQkJaWYgKGNoZWNrRmlyc3RJ
dGVtKSB7CiAJCQkJaWYgKCFlbnRyeU5hbWUuZXF1YWxzKCJtaW1ldHlwZSIpKSB7CiAJCQkJCXRo
cm93IG5ldyBJT0V4Y2VwdGlvbigiSW52YWxpZCBFUFVCIGZpbGUuIEZpcnN0IGl0ZW0gbXVzdCBi
ZSBcIm1pbWV0eXBlXCIiKTsKQEAgLTIyMyw2ICsyMzUsNyBAQAogCQkJCWNoZWNrRmlyc3RJdGVt
ID0gZmFsc2U7CiAJCQl9CiAJCX0KKwkJZGVzdGluYXRpb24uc2V0TGFzdE1vZGlmaWVkKGVwdWJm
aWxlLmxhc3RNb2RpZmllZCgpKTsKIAl9CiAKIAkvKio=
</data>

          </attachment>
      

    </bug>

</bugzilla>