<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>380584</bug_id>
          
          <creation_ts>2012-05-24 16:13:00 -0400</creation_ts>
          <short_desc>[api] provide an api for lazy fetching of changes in ChangeSet</short_desc>
          <delta_ts>2013-06-24 12:59:02 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Versions</product>
          <component>Framework</component>
          <version>1.0</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>plan</keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>1.1</target_milestone>
          
          <blocked>378097</blocked>
    
    <blocked>381373</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Kilian Matt">kilian.matt</reporter>
          <assigned_to name="Kilian Matt">kilian.matt</assigned_to>
          <cc>achmetow84</cc>
    
    <cc>lmcbout</cc>
    
    <cc>sebastien.dubois</cc>
    
    <cc>steffen.pingel</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2113882</commentid>
    <comment_count>0</comment_count>
    <who name="Kilian Matt">kilian.matt</who>
    <bug_when>2012-05-24 16:13:16 -0400</bug_when>
    <thetext>The class org.eclipse.mylyn.versions.core.ChangeSet requires the a list of changes in the constructor. When retrieving larger list of changesets, the eager initialization of the changes might not be feasible.
A workaround would be to proxy the list of changes, in order to initialize the data lazily on access. Since the caller might not expect a longer waiting time for accessing the changes this might be not a good idea.

A better approach would be to modify the existing api to provide a method for retrieving the changes lazily.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2115113</commentid>
    <comment_count>1</comment_count>
    <who name="Timur Achmetow">achmetow84</who>
    <bug_when>2012-05-28 16:37:17 -0400</bug_when>
    <thetext>(In reply to comment #0)
&gt; The class org.eclipse.mylyn.versions.core.ChangeSet requires the a list of
&gt; changes in the constructor. When retrieving larger list of changesets, the
&gt; eager initialization of the changes might not be feasible.
&gt; A workaround would be to proxy the list of changes, in order to initialize the
&gt; data lazily on access. Since the caller might not expect a longer waiting time
&gt; for accessing the changes this might be not a good idea.
&gt; 
&gt; A better approach would be to modify the existing api to provide a method for
&gt; retrieving the changes lazily.

Very nice! I have tested your changes and it works fine. 
Now I get the whole Changesets and can use it. 

But the operation is very long, at the moment I need 660 seconds for the data operation. Can we optimize it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2115131</commentid>
    <comment_count>2</comment_count>
    <who name="Kilian Matt">kilian.matt</who>
    <bug_when>2012-05-28 17:14:59 -0400</bug_when>
    <thetext>Yes it&apos;s currently only quite usable with a distributed version control system. 
The whole history is still parsed.

I&apos;ve been planning to implement an index similar to that of the task list (see bug 380843), but that will take some time I guess.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2130397</commentid>
    <comment_count>3</comment_count>
    <who name="Alvaro Sanchez-Leon">alvsan09</who>
    <bug_when>2012-06-28 09:15:42 -0400</bug_when>
    <thetext>if the main issue is the impractical fetch of the whole list of ChangeSet(s) in the repository, 
would not the following api be useful ?

I have used it on the SubclipseConnector.java with very nice performance improvements 

354670: [api] getChangeSets Iterator
https://bugs.eclipse.org/bugs/show_bug.cgi?id=354670</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2145545</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-08-07 08:11:48 -0400</bug_when>
    <thetext>Kilian, the com.google.guava bundle also needs to be added to the o.e.gm.versions.sdk feature to ensure that it&apos;s available from the update site.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2162166</commentid>
    <comment_count>5</comment_count>
    <who name="Kilian Matt">kilian.matt</who>
    <bug_when>2012-09-20 05:05:28 -0400</bug_when>
    <thetext>Through the implementation of Changeset, the Lazy initialized list gets initialized in the constructor.  The better approach is to implement a lazy iterator, which converts the egit/jgit specific classes to versions api classes on demand.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>