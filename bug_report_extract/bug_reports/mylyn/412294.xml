<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>412294</bug_id>
          
          <creation_ts>2013-07-04 07:00:00 -0400</creation_ts>
          <short_desc>NullPointerException on disabled builds / new builds</short_desc>
          <delta_ts>2013-08-18 17:18:05 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Builds</product>
          <component>Hudson Connector</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>sprint=6;</status_whiteboard>
          <keywords>contributed</keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>1.1.1</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Martin Skorsky">martin.skorsky</reporter>
          <assigned_to name="Tomasz Zarna">tomasz.zarna</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2280596</commentid>
    <comment_count>0</comment_count>
    <who name="Martin Skorsky">martin.skorsky</who>
    <bug_when>2013-07-04 07:00:12 -0400</bug_when>
    <thetext>I refresh in the Mylyn Builds view a Jenkins server, where one of the jobs is disabled.
This NPE also happens when I refresh only the disabled job. This job is not only disabled, it is in addition new (no builds ran).
org.eclipse.core.runtime.CoreException: Unexpected error during invocation of operation
	at org.eclipse.mylyn.builds.internal.core.util.BuildRunner.handleException(BuildRunner.java:52)
	at org.eclipse.mylyn.builds.internal.core.util.BuildRunner.run(BuildRunner.java:74)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession.refreshPlans(RefreshSession.java:171)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession.refresh(RefreshSession.java:89)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshOperation$RefreshJob.doExecute(RefreshOperation.java:75)
	at org.eclipse.mylyn.builds.internal.core.operations.BuildJob.run(BuildJob.java:80)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.lang.NullPointerException
	at org.eclipse.mylyn.internal.hudson.core.HudsonServerBehaviour.updateStateAndStatus(HudsonServerBehaviour.java:844)
	at org.eclipse.mylyn.internal.hudson.core.HudsonServerBehaviour.parseJob(HudsonServerBehaviour.java:574)
	at org.eclipse.mylyn.internal.hudson.core.HudsonServerBehaviour.getPlans(HudsonServerBehaviour.java:246)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession$4.run(RefreshSession.java:175)
	at org.eclipse.mylyn.builds.internal.core.operations.RefreshSession$4.run(RefreshSession.java:1)
	at org.eclipse.mylyn.builds.internal.core.util.BuildRunner.run(BuildRunner.java:72)
	... 5 more

Mylyn 3.9.0.v20130612-0100
Mylyn Builds 1.1.0.v20130612-0100</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2286495</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-07-19 17:31:19 -0400</bug_when>
    <thetext>Which version of Hudson or Jenkins are you using? What is the color of the ball in the web UI for the disabled job? It looks like the code isn&apos;t properly deserializing the XML in this case which leads to the NPE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2286776</commentid>
    <comment_count>2</comment_count>
    <who name="Martin Skorsky">martin.skorsky</who>
    <bug_when>2013-07-22 07:40:50 -0400</bug_when>
    <thetext>the Jenkins version is 1.522.
The color in the UI is gray.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2294808</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-08-14 11:42:08 -0400</bug_when>
    <thetext>Tomek, a fix might be as simple as inverting the equals checks. It would be great if you could quickly look into this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2294827</commentid>
    <comment_count>4</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-08-14 12:16:39 -0400</bug_when>
    <thetext>Sure, I&apos;m on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2294839</commentid>
    <comment_count>5</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-08-14 12:35:41 -0400</bug_when>
    <thetext>This should prevent NPEs from happening: https://git.eclipse.org/r/#/c/15481/

I haven&apos;t done any testing tbh, but can do some on Friday, I&apos;m off tmr.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2296018</commentid>
    <comment_count>6</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-08-18 17:18:05 -0400</bug_when>
    <thetext>I merged the fix. Thanks very much!</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>