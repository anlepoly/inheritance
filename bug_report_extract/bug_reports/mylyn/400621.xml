<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>400621</bug_id>
          
          <creation_ts>2013-02-12 14:53:00 -0500</creation_ts>
          <short_desc>add explicit dependencies on o.e.core.resources and o.e.debug.core (was: all elements in the package explorer are hidden)</short_desc>
          <delta_ts>2013-04-27 19:59:07 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Context</product>
          <component>PDE</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>3.9</target_milestone>
          <dependson>156134</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Lars Vogel">lars.vogel</reporter>
          <assigned_to name="Steffen Pingel">steffen.pingel</assigned_to>
          <cc>daniel_megert</cc>
    
    <cc>lars.vogel</cc>
    
    <cc>Michael_Rennie</cc>
    
    <cc>pwebster</cc>
    
    <cc>steffen.pingel</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2215717</commentid>
    <comment_count>0</comment_count>
    <who name="Lars Vogel">lars.vogel</who>
    <bug_when>2013-02-12 14:53:55 -0500</bug_when>
    <thetext>As of Build id: N20130211-2000 Mylyn hides all elements in the Package Explorer. I can use the same Mylyn build in a few days older build and it filtered correct.

See the attached screenshot. Several XML files are open but the Package Explorer does not show anything.

Not sure if that is related to Bug 156134 as Bug 400538 was.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215723</commentid>
    <comment_count>1</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2013-02-12 15:08:37 -0500</bug_when>
    <thetext>What&apos;s in the log?

PW</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215724</commentid>
    <comment_count>2</comment_count>
    <who name="Lars Vogel">lars.vogel</who>
    <bug_when>2013-02-12 15:11:39 -0500</bug_when>
    <thetext>Ah, sorry forgot to attach this. Looks like Mylyn also needs to add the dependency to the resource plug-in as described in Bug 156134

java.lang.NoClassDefFoundError: org/eclipse/core/internal/resources/File
	at org.eclipse.mylyn.internal.pde.ui.PdeStructureBridge.acceptsObject(PdeStructureBridge.java:270)
	at org.eclipse.mylyn.internal.context.core.ContextCorePlugin.getStructureBridge(ContextCorePlugin.java:309)
	at org.eclipse.mylyn.context.core.ContextCore.getStructureBridge(ContextCore.java:42)
	at org.eclipse.mylyn.context.ui.InterestFilter.select(InterestFilter.java:86)
	at org.eclipse.jdt.internal.ui.viewsupport.ProblemTreeViewer.isFiltered(ProblemTreeViewer.java:321)
	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$PackageExplorerProblemTreeViewer.isFiltered(PackageExplorerPart.java:279)
	at org.eclipse.jdt.internal.ui.viewsupport.ProblemTreeViewer.filter(ProblemTreeViewer.java:285)
	at org.eclipse.jdt.internal.ui.viewsupport.ProblemTreeViewer.getFilteredChildren(ProblemTreeViewer.java:274)
	at org.eclipse.jface.viewers.AbstractTreeViewer.getSortedChildren(AbstractTreeViewer.java:620)
	at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:820)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
	at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:797)
	at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:644)
	at org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractTreeViewer.java:1770)
	at org.eclipse.jface.viewers.AbstractTreeViewer.expandToLevel(AbstractTreeViewer.java:1075)
	at org.eclipse.jface.viewers.AbstractTreeViewer.expandToLevel(AbstractTreeViewer.java:1056)
	at org.eclipse.jface.viewers.AbstractTreeViewer.expandAll(AbstractTreeViewer.java:1045)
	at org.eclipse.mylyn.context.ui.AbstractFocusViewAction.installInterestFilter(AbstractFocusViewAction.java:500)
	at org.eclipse.mylyn.context.ui.AbstractFocusViewAction.updateInterestFilter(AbstractFocusViewAction.java:418)
	at org.eclipse.mylyn.context.ui.AbstractFocusViewAction.valueChanged(AbstractFocusViewAction.java:302)
	at org.eclipse.mylyn.context.ui.AbstractFocusViewAction.run(AbstractFocusViewAction.java:254)
	at org.eclipse.mylyn.context.ui.AbstractFocusViewAction.runWithEvent(AbstractFocusViewAction.java:259)
	at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:241)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
	at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
	at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:452)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1392)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3719)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3340)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1057)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:941)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:99)
	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:600)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:555)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1450)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1426)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215728</commentid>
    <comment_count>3</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2013-02-12 15:15:44 -0500</bug_when>
    <thetext>(In reply to comment #2)
&gt; Ah, sorry forgot to attach this. Looks like Mylyn also needs to add the
&gt; dependency to the resource plug-in as described in Bug 156134

So not a Platform UI issue then :-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215741</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-02-12 15:31:31 -0500</bug_when>
    <thetext>Thanks for the report, Lars. We&apos;ll take a look.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215844</commentid>
    <comment_count>5</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-02-12 19:33:43 -0500</bug_when>
    <thetext>This doesn&apos;t appear to affect Kepler M5. Sam, can you take a look before M6? The fix should be as trivial as adding org.eclipse.core.resources to the manifest but we need to verify against the latest platform nightly..</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215923</commentid>
    <comment_count>6</comment_count>
    <who name="Lars Vogel">lars.vogel</who>
    <bug_when>2013-02-13 02:59:03 -0500</bug_when>
    <thetext>Yes, this change happen only in the current integration build. If you add the resource bundle to Mylyn, I&apos;m happy to test this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215959</commentid>
    <comment_count>7</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-13 04:12:41 -0500</bug_when>
    <thetext>I&apos;ve added the re-export back, but it&apos;s still good to require the directly used bundle(s) in your manifest.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215960</commentid>
    <comment_count>8</comment_count>
    <who name="Lars Vogel">lars.vogel</who>
    <bug_when>2013-02-13 04:14:04 -0500</bug_when>
    <thetext>@Dani, shame, I think M6 is a good time for these cleanup changes. Also the fix for other plug-ins is trivial.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2215967</commentid>
    <comment_count>9</comment_count>
    <who name="Dani Megert">daniel_megert</who>
    <bug_when>2013-02-13 04:16:46 -0500</bug_when>
    <thetext>(In reply to comment #8)
&gt; @Dani, shame, I think M6 is a good time for these cleanup changes. Also the
&gt; fix for other plug-ins is trivial.

No, it is never a good time to break binary/runtime compatibility. Bundles which run fine on 3.8/4.2 and do not plan to change their code can be broken and that&apos;s not acceptable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2216194</commentid>
    <comment_count>10</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-02-13 10:21:05 -0500</bug_when>
    <thetext>From Michael Rennie Michael_Rennie@ca.ibm.com to cross-project-development:

In our failed attempt to fix bug 156134 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=156134), I thought I would send this note out to anyone using org.eclipse.core.resource via org.eclipse.debug.core, to remind them that they should have a direct dependency on core.resources and not rely on the re-exported dependency from debug.core.

The same holds true for using org.eclipse.debug.core via org.eclipse.debug.ui, you should have direct dependencies on both bundles if needed, do not rely on the re-exported dependency via debug.ui to use debug.core&apos;s API.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217140</commentid>
    <comment_count>11</comment_count>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2013-02-14 19:54:57 -0500</bug_when>
    <thetext>Steffen, is there anything to do here now? If so, when does it need to be done?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217175</commentid>
    <comment_count>12</comment_count>
    <who name="Lars Vogel">lars.vogel</who>
    <bug_when>2013-02-15 00:46:58 -0500</bug_when>
    <thetext>The right thing would be to add explicit dependencies on o.e.core.resources and o.e.debug.core even though JDT exports them again, you should explicitly mark your dependencies. Any time would be good IMHO, as this can&apos;t break anything, I think. ;-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2217313</commentid>
    <comment_count>13</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-02-15 07:24:34 -0500</bug_when>
    <thetext>It&apos;s lower priority since there is no breakage but we should do what Lars suggests in comment 12 sometime before 3.9.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2249461</commentid>
    <comment_count>14</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-27 19:47:27 -0400</bug_when>
    <thetext>Proposed change for Mylyn: https://git.eclipse.org/r/12295.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2249462</commentid>
    <comment_count>15</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-04-27 19:59:07 -0400</bug_when>
    <thetext>The change was submitted.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>