<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>374187</bug_id>
          
          <creation_ts>2012-03-14 05:55:00 -0400</creation_ts>
          <short_desc>[epub] The Ant task should be a bit more verbose</short_desc>
          <delta_ts>2012-07-23 16:14:37 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Docs</product>
          <component>EPUB</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>1.7.0</target_milestone>
          <dependson>372949</dependson>
    
    <dependson>375229</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Torkild Resheim">torkildr</reporter>
          <assigned_to name="Torkild Resheim">torkildr</assigned_to>
          
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2080194</commentid>
    <comment_count>0</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-03-14 05:55:43 -0400</bug_when>
    <thetext>Currently there is no output from the task unless there is an error. At a minimum the task should notify when the EPUB has been assembled. Using the Ant verbose more should result in even more details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2090906</commentid>
    <comment_count>1</comment_count>
      <attachid>213731</attachid>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-04-08 12:43:10 -0400</bug_when>
    <thetext>Created attachment 213731
Patch that adds more verbosity to the Ant task

* Log messages are output for various events taking place when assembling and building the EPUB
* Several log levels are used.
* Warnings and errors from the OPS2Validator is also output.
* The patch include changes from bug 372949 (removed unused dependencies).
* Changes from bug bug 375229 are also included in order to avoid confusion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2093692</commentid>
    <comment_count>2</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-04-15 08:46:55 -0400</bug_when>
    <thetext>Fixed in http://git.eclipse.org/c/mylyn/org.eclipse.mylyn.docs.git/commit/?id=c457a321ddbc2bf0847eb6747c1f89166a5a6f99</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2106341</commentid>
    <comment_count>3</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-05-11 03:12:27 -0400</bug_when>
    <thetext>Moving to new EPUB component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2140436</commentid>
    <comment_count>4</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-07-23 16:14:37 -0400</bug_when>
    <thetext>Closing resolved issues in released product.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>213731</attachid>
            <date>2012-04-08 12:43:00 -0400</date>
            <delta_ts>2012-04-08 12:43:10 -0400</delta_ts>
            <desc>Patch that adds more verbosity to the Ant task</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>76337</size>
            <attacher name="Torkild Resheim">torkildr</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5hbnQuY29yZS9zcmMvb3Jn
L2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2FudC9jb3JlL0FudExvZ2dlci5qYXZhIGIvb3JnLmVj
bGlwc2UubXlseW4uZG9jcy5lcHViLmFudC5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2Nz
L2VwdWIvYW50L2NvcmUvQW50TG9nZ2VyLmphdmEKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMC4uYmY2OWU2MgotLS0gL2Rldi9udWxsCisrKyBiL29yZy5lY2xpcHNlLm15bHluLmRv
Y3MuZXB1Yi5hbnQuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2FudC9jb3Jl
L0FudExvZ2dlci5qYXZhCkBAIC0wLDAgKzEsNTYgQEAKKy8qKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
CisgKiBDb3B5cmlnaHQgKGMpIDIwMTIgVG9ya2lsZCBVLiBSZXNoZWltLgorICogCisgKiBBbGwg
cmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJp
YWxzIGFyZSBtYWRlCisgKiBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNl
IFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hpY2gKKyAqIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0
aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2Fs
L2VwbC12MTAuaHRtbAorICogCisgKiBDb250cmlidXRvcnM6IAorICogICBUb3JraWxkIFUuIFJl
c2hlaW0gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuYW50LmNvcmU7CisK
K2ltcG9ydCBvcmcuYXBhY2hlLnRvb2xzLmFudC5Qcm9qZWN0OworaW1wb3J0IG9yZy5hcGFjaGUu
dG9vbHMuYW50LlRhc2s7CitpbXBvcnQgb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUu
SUxvZ2dlcjsKKworLyoqCisgKiAKKyAqIEBhdXRob3IgVG9ya2lsZCBVLiBSZXNoZWltCisgKi8K
K3B1YmxpYyBjbGFzcyBBbnRMb2dnZXIgaW1wbGVtZW50cyBJTG9nZ2VyIHsKKworCVRhc2sgdGFz
azsKKworCXB1YmxpYyBBbnRMb2dnZXIoVGFzayB0YXNrKSB7CisJCXRoaXMudGFzayA9IHRhc2s7
CisJfQorCisJcHVibGljIHZvaWQgbG9nKFN0cmluZyBtZXNzYWdlKSB7CisJCXRhc2subG9nKG1l
c3NhZ2UpOworCX0KKworCXB1YmxpYyB2b2lkIGxvZyhTdHJpbmcgbWVzc2FnZSwgU2V2ZXJpdHkg
c2V2ZXJpdHkpIHsKKwkJc3dpdGNoIChzZXZlcml0eSkgeworCQljYXNlIEVSUk9SOgorCQkJdGFz
ay5sb2cobWVzc2FnZSwgUHJvamVjdC5NU0dfRVJSKTsKKwkJCWJyZWFrOworCQljYXNlIFdBUk5J
Tkc6CisJCQl0YXNrLmxvZyhtZXNzYWdlLCBQcm9qZWN0Lk1TR19XQVJOKTsKKwkJCWJyZWFrOwor
CQljYXNlIElORk86CisJCQl0YXNrLmxvZyhtZXNzYWdlLCBQcm9qZWN0Lk1TR19JTkZPKTsKKwkJ
CWJyZWFrOworCQljYXNlIFZFUkJPU0U6CisJCQl0YXNrLmxvZyhtZXNzYWdlLCBQcm9qZWN0Lk1T
R19WRVJCT1NFKTsKKwkJCWJyZWFrOworCQljYXNlIERFQlVHOgorCQkJdGFzay5sb2cobWVzc2Fn
ZSwgUHJvamVjdC5NU0dfREVCVUcpOworCQkJYnJlYWs7CisJCWRlZmF1bHQ6CisJCQlicmVhazsK
KwkJfQorCX0KKworfQpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmFu
dC5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvYW50L2NvcmUvRXB1YlRhc2su
amF2YSBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5hbnQuY29yZS9zcmMvb3JnL2VjbGlw
c2UvbXlseW4vZG9jcy9lcHViL2FudC9jb3JlL0VwdWJUYXNrLmphdmEKaW5kZXggMTUyMjNmMy4u
NmE2NGIzNCAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmFudC5jb3Jl
L3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvYW50L2NvcmUvRXB1YlRhc2suamF2YQor
KysgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuYW50LmNvcmUvc3JjL29yZy9lY2xpcHNl
L215bHluL2RvY3MvZXB1Yi9hbnQvY29yZS9FcHViVGFzay5qYXZhCkBAIC00MiwxMSArNDIsMTQg
QEAKIAogCXByaXZhdGUgRmlsZSBlcHViRmlsZTsKIAorCXByaXZhdGUgQW50TG9nZ2VyIGxvZ2dl
cjsKKwogCXB1YmxpYyBFcHViVGFzaygpIHsKIAkJc3VwZXIoKTsKIAkJdHJ5IHsKLQkJb3BzID0g
bmV3IE9QUzJQdWJsaWNhdGlvbigpOwotCQlmaWxlc2V0cyA9IG5ldyBBcnJheUxpc3Q8RmlsZVNl
dFR5cGU+KCk7CisJCQlsb2dnZXIgPSBuZXcgQW50TG9nZ2VyKHRoaXMpOworCQkJb3BzID0gbmV3
IE9QUzJQdWJsaWNhdGlvbihsb2dnZXIpOworCQkJZmlsZXNldHMgPSBuZXcgQXJyYXlMaXN0PEZp
bGVTZXRUeXBlPigpOwogCQl9IGNhdGNoIChFeGNlcHRpb24gZSkgewogCQkJZS5wcmludFN0YWNr
VHJhY2UoKTsKIAkJfQpAQCAtNTYsNyArNTksOCBAQAogCQlpZiAoaXRlbS5yb2xlID09IG51bGwp
IHsKIAkJCW9wcy5hZGRDb250cmlidXRvcihpdGVtLmlkLCBpdGVtLmxhbmcsIGl0ZW0ubmFtZSwg
bnVsbCwgaXRlbS5maWxlQXMpOwogCQl9IGVsc2UgewotCQkJb3BzLmFkZENvbnRyaWJ1dG9yKGl0
ZW0uaWQsIGl0ZW0ubGFuZywgaXRlbS5uYW1lLCBSb2xlLmdldChpdGVtLnJvbGUpLCBpdGVtLmZp
bGVBcyk7CisJCQlvcHMuYWRkQ29udHJpYnV0b3IoaXRlbS5pZCwgaXRlbS5sYW5nLCBpdGVtLm5h
bWUsCisJCQkJCVJvbGUuZ2V0KGl0ZW0ucm9sZSksIGl0ZW0uZmlsZUFzKTsKIAkJfQogCX0KIApA
QCAtNzIsNyArNzYsOCBAQAogCQlpZiAoaXRlbS5yb2xlID09IG51bGwpIHsKIAkJCW9wcy5hZGRD
cmVhdG9yKGl0ZW0uaWQsIGl0ZW0ubGFuZywgaXRlbS5uYW1lLCBudWxsLCBpdGVtLmZpbGVBcyk7
CiAJCX0gZWxzZSB7Ci0JCQlvcHMuYWRkQ3JlYXRvcihpdGVtLmlkLCBpdGVtLmxhbmcsIGl0ZW0u
bmFtZSwgUm9sZS5nZXQoaXRlbS5yb2xlKSwgaXRlbS5maWxlQXMpOworCQkJb3BzLmFkZENyZWF0
b3IoaXRlbS5pZCwgaXRlbS5sYW5nLCBpdGVtLm5hbWUsIFJvbGUuZ2V0KGl0ZW0ucm9sZSksCisJ
CQkJCWl0ZW0uZmlsZUFzKTsKIAkJfQogCX0KIApAQCAtMTA2LDcgKzExMSw4IEBACiAJICogQGFu
dC5yZXF1aXJlZAogCSAqLwogCXB1YmxpYyB2b2lkIGFkZENvbmZpZ3VyZWRJdGVtKEl0ZW1UeXBl
IGl0ZW0pIHsKLQkJb3BzLmFkZEl0ZW0oaXRlbS5pZCwgaXRlbS5sYW5nLCBpdGVtLmZpbGUsIGl0
ZW0uZGVzdCwgaXRlbS50eXBlLCBpdGVtLnNwaW5lLCBpdGVtLmxpbmVhciwgaXRlbS5ub1RvYyk7
CisJCW9wcy5hZGRJdGVtKGl0ZW0uaWQsIGl0ZW0ubGFuZywgaXRlbS5maWxlLCBpdGVtLmRlc3Qs
IGl0ZW0udHlwZSwKKwkJCQlpdGVtLnNwaW5lLCBpdGVtLmxpbmVhciwgaXRlbS5ub1RvYyk7CiAJ
fQogCiAJLyoqCkBAIC0xNTcsMTIgKzE2MywxNCBAQAogCiAJcHVibGljIHZvaWQgYWRkQ29uZmln
dXJlZFRvYyhUb2NUeXBlIHRvYykgewogCQlpZiAodGhpcy50b2MgIT0gbnVsbCkgewotCQkJdGhy
b3cgbmV3IEJ1aWxkRXhjZXB0aW9uKCJPbmx5IG9uZSB0YWJsZSBvZiBjb250ZW50cyAodG9jKSBk
ZWNsYXJhdGlvbiBpcyBhbGxvd2VkLiIpOworCQkJdGhyb3cgbmV3IEJ1aWxkRXhjZXB0aW9uKAor
CQkJCQkiT25seSBvbmUgdGFibGUgb2YgY29udGVudHMgKHRvYykgZGVjbGFyYXRpb24gaXMgYWxs
b3dlZC4iKTsKIAkJfQogCQl0aGlzLnRvYyA9IHRvYzsKIAl9CiAKLQlwdWJsaWMgdm9pZCBhZGRD
b25maWd1cmVkVHlwZShvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuYW50LmNvcmUuVHlwZVR5
cGUgdHlwZSkgeworCXB1YmxpYyB2b2lkIGFkZENvbmZpZ3VyZWRUeXBlKAorCQkJb3JnLmVjbGlw
c2UubXlseW4uZG9jcy5lcHViLmFudC5jb3JlLlR5cGVUeXBlIHR5cGUpIHsKIAkJb3BzLmFkZFR5
cGUodHlwZS5pZCwgdHlwZS50ZXh0KTsKIAl9CiAKQEAgLTE3MCw3ICsxNzgsOCBAQAogCQlmb3Ig
KEZpbGVTZXRUeXBlIGZzIDogZmlsZXNldHMpIHsKIAkJCWZpbmFsIEZpbGUgZnNEaXIgPSBmcy5n
ZXREaXIoZ2V0UHJvamVjdCgpKTsKIAkJCWlmIChmc0RpciA9PSBudWxsKSB7Ci0JCQkJdGhyb3cg
bmV3IEJ1aWxkRXhjZXB0aW9uKCJGaWxlIG9yIFJlc291cmNlIHdpdGhvdXQgZGlyZWN0b3J5IG9y
IGZpbGUgc3BlY2lmaWVkIik7CisJCQkJdGhyb3cgbmV3IEJ1aWxkRXhjZXB0aW9uKAorCQkJCQkJ
IkZpbGUgb3IgUmVzb3VyY2Ugd2l0aG91dCBkaXJlY3Rvcnkgb3IgZmlsZSBzcGVjaWZpZWQiKTsK
IAkJCX0gZWxzZSBpZiAoIWZzRGlyLmlzRGlyZWN0b3J5KCkpIHsKIAkJCQl0aHJvdyBuZXcgQnVp
bGRFeGNlcHRpb24oIkRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdDoiICsgZnNEaXIpOwogCQkJfQpA
QCAtMTgxLDcgKzE5MCw4IEBACiAJCQkJZmlsZW5hbWUgPSBmaWxlbmFtZS5zdWJzdHJpbmcoZmls
ZW5hbWUubGFzdEluZGV4T2YoIi8iKSArIDEpOwogCQkJCUZpbGUgYmFzZSA9IGRzLmdldEJhc2Vk
aXIoKTsKIAkJCQlGaWxlIGZvdW5kID0gbmV3IEZpbGUoYmFzZSwgaW5jbHVkZWRGaWxlc1tpXSk7
Ci0JCQkJb3BzLmFkZEl0ZW0obnVsbCwgZnMubGFuZywgZm91bmQsIGZzLmRlc3QsIG51bGwsIGZh
bHNlLCB0cnVlLCBmYWxzZSk7CisJCQkJb3BzLmFkZEl0ZW0obnVsbCwgZnMubGFuZywgZm91bmQs
IGZzLmRlc3QsIG51bGwsIGZhbHNlLCB0cnVlLAorCQkJCQkJZmFsc2UpOwogCQkJfQogCiAJCX0K
QEAgLTE5MCw3ICsyMDAsNiBAQAogCiAJQE92ZXJyaWRlCiAJcHVibGljIHZvaWQgZXhlY3V0ZSgp
IHRocm93cyBCdWlsZEV4Y2VwdGlvbiB7Ci0KIAkJLy8gV2hlbiBydW5uaW5nIGZyb20gd2l0aGlu
IEVjbGlwc2UsIHRoZSBwcm9qZWN0IG1heSBub3QgaGF2ZSBiZWVuIHNldAogCQlpZiAoZ2V0UHJv
amVjdCgpID09IG51bGwpIHsKIAkJCVByb2plY3QgcHJvamVjdCA9IG5ldyBQcm9qZWN0KCk7CkBA
IC0yMDcsNyArMjE2LDcgQEAKIAkJCX0KIAkJfQogCQl0cnkgewotCQkJRVBVQiBlcHViID0gbmV3
IEVQVUIoKTsKKwkJCUVQVUIgZXB1YiA9IG5ldyBFUFVCKGxvZ2dlcik7CiAJCQllcHViLmFkZChv
cHMpOwogCQkJaWYgKHdvcmtpbmdGb2xkZXIgPT0gbnVsbCkgewogCQkJCWVwdWIucGFjayhlcHVi
RmlsZSk7CkBAIC0yNDcsNCArMjU2LDUgQEAKIAlwcml2YXRlIHZvaWQgdmFsaWRhdGUoKSB7CiAJ
fQogCisKIH0KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL01F
VEEtSU5GL01BTklGRVNULk1GIGIvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvTUVU
QS1JTkYvTUFOSUZFU1QuTUYKaW5kZXggODg5MTQ2Mi4uNjhlMWUxNSAxMDA2NDQKLS0tIGEvb3Jn
LmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvTUVUQS1JTkYvTUFOSUZFU1QuTUYKKysrIGIv
b3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvTUVUQS1JTkYvTUFOSUZFU1QuTUYKQEAg
LTUsMTAgKzUsMTAgQEAKIEJ1bmRsZS1WZXJzaW9uOiAwLjguMC5xdWFsaWZpZXIKIEJ1bmRsZS1W
ZW5kb3I6ICVCdW5kbGUtVmVuZG9yCiBCdW5kbGUtUmVxdWlyZWRFeGVjdXRpb25FbnZpcm9ubWVu
dDogSjJTRS0xLjUKLVJlcXVpcmUtQnVuZGxlOiBvcmcuZWNsaXBzZS5lbWYuZWNvcmUueG1pO2J1
bmRsZS12ZXJzaW9uPSJbMi41LjAsMy4wLjApIiwKLSBvcmcuZWNsaXBzZS5lbWYudmFsaWRhdGlv
bjtidW5kbGUtdmVyc2lvbj0iWzEuNC4wLDIuMC4wKSIsCi0gb3JnLmVjbGlwc2UubXlseW4ud2lr
aXRleHQuY29yZTtidW5kbGUtdmVyc2lvbj0iWzEuNC4wLDIuMC4wKSIsCi0gb3JnLmVjbGlwc2Uu
ZW1mLm1hcHBpbmcuZWNvcmUyeG1sO2J1bmRsZS12ZXJzaW9uPSJbMi43LjAsMy4wLjApIgorUmVx
dWlyZS1CdW5kbGU6IG9yZy5lY2xpcHNlLmVtZi5lY29yZTtidW5kbGUtdmVyc2lvbj0iMi41LjAi
LAorIG9yZy5lY2xpcHNlLmVtZi5jb21tb247YnVuZGxlLXZlcnNpb249IjIuNS4wIiwKKyBvcmcu
ZWNsaXBzZS5lbWYuZWNvcmUueG1pO2J1bmRsZS12ZXJzaW9uPSIyLjUuMCIsCisgb3JnLmVjbGlw
c2UubXlseW4ud2lraXRleHQuY29yZTtidW5kbGUtdmVyc2lvbj0iMS41LjAiCiBFeHBvcnQtUGFj
a2FnZTogb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmU7dXNlczo9Im9yZy5lY2xpcHNl
Lm15bHluLmRvY3MuZXB1Yi5kYyxvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIub3BmLG9yZy5l
Y2xpcHNlLm15bHluLmRvY3MuZXB1Yi5uY3giLAogIG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1
Yi5jb3JlLndpa2l0ZXh0LAogIG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5kYzt1c2VzOj0i
b3JnLmVjbGlwc2UuZW1mLmVjb3JlLnV0aWwsb3JnLmVjbGlwc2UuZW1mLmVjb3JlLG9yZy5lY2xp
cHNlLm15bHluLmRvY3MuZXB1Yi5vcGYiLApkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UubXlseW4u
ZG9jcy5lcHViLmNvcmUvc3JjL29yZy9lY2xpcHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL0VQVUIu
amF2YSBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9t
eWx5bi9kb2NzL2VwdWIvY29yZS9FUFVCLmphdmEKaW5kZXggYjVhNWI1MS4uZjJjOGQ5YiAxMDA2
NDQKLS0tIGEvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3JjL29yZy9lY2xpcHNl
L215bHluL2RvY3MvZXB1Yi9jb3JlL0VQVUIuamF2YQorKysgYi9vcmcuZWNsaXBzZS5teWx5bi5k
b2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvRVBVQi5q
YXZhCkBAIC02LDEyICs2LDE0IEBACiAgKiBhY2NvbXBhbmllcyB0aGlzIGRpc3RyaWJ1dGlvbiwg
YW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwt
djEwLmh0bWwKICAqIAotICogQ29udHJpYnV0b3JzOiBUb3JraWxkIFUuIFJlc2hlaW0gLSBpbml0
aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqIENvbnRyaWJ1dG9yczogCisgKiAgIFRvcmtp
bGQgVS4gUmVzaGVpbSAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgogICoqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3Jl
OwogCiBpbXBvcnQgamF2YS5pby5GaWxlOwogaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247Citp
bXBvcnQgamF2YS50ZXh0Lk1lc3NhZ2VGb3JtYXQ7CiBpbXBvcnQgamF2YS51dGlsLkFycmF5TGlz
dDsKIGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKIGltcG9ydCBqYXZhLnV0aWwuTGlzdDsKQEAg
LTI0LDYgKzI2LDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5lbWYuZWNvcmUucmVzb3VyY2UuaW1w
bC5SZXNvdXJjZVNldEltcGw7CiBpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmVjb3JlLnhtaS5YTUxS
ZXNvdXJjZTsKIGltcG9ydCBvcmcuZWNsaXBzZS5lbWYuZWNvcmUueG1pLmltcGwuWE1MUmVzb3Vy
Y2VGYWN0b3J5SW1wbDsKK2ltcG9ydCBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS5J
TG9nZ2VyLlNldmVyaXR5OwogaW1wb3J0IG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5vY2Yu
Q29udGFpbmVyOwogaW1wb3J0IG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5vY2YuT0NGRmFj
dG9yeTsKIGltcG9ydCBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIub2NmLk9DRlBhY2thZ2U7
CkBAIC0zMywxMSArMzYsMTAgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5teWx5bi5pbnRlcm5hbC5k
b2NzLmVwdWIuY29yZS5FUFVCRmlsZVV0aWw7CiAKIC8qKgotICogUmVwcmVzZW50cyBvbmUgRVBV
QiBmaWxlLiBDdXJyZW50bHkgPGI+b25seTwvYj4gdmVyc2lvbiAyLjAuMSBvZiB0aGUgRVBVQgot
ICogc3BlY2lmaWNhdGlvbiBpcyBzdXBwb3J0ZWQuIE9uZSBvciBtb3JlIHB1YmxpY2F0aW9ucyBj
YW4gYmUgYWRkZWQgYW5kIHdpbGwgYmUKLSAqIGEgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIHdo
ZW4gcGFja2VkLiBTZWUgdGhlIDxhCi0gKiBocmVmPSJodHRwOi8vaWRwZi5vcmcvZXB1Yi8yMC9z
cGVjL09QU18yLjAuMV9kcmFmdC5odG0jU2VjdGlvbjEuMiI+T1BTCi0gKiBzcGVjaWZpY2F0aW9u
PC9hPiBmb3IgZGVmaW5pdGlvbnMgb2Ygd29yZHMgYW5kIHRlcm1zLgorICogUmVwcmVzZW50cyBv
bmUgRVBVQiBmaWxlLiBDdXJyZW50bHkgPGI+b25seTwvYj4gdmVyc2lvbiAyLjAuMSBvZiB0aGUg
RVBVQiBzcGVjaWZpY2F0aW9uIGlzIHN1cHBvcnRlZC4gT25lIG9yIG1vcmUKKyAqIHB1YmxpY2F0
aW9ucyBjYW4gYmUgYWRkZWQgYW5kIHdpbGwgYmUgYSBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24g
d2hlbiBwYWNrZWQuIFNlZSB0aGUgPGEKKyAqIGhyZWY9Imh0dHA6Ly9pZHBmLm9yZy9lcHViLzIw
L3NwZWMvT1BTXzIuMC4xX2RyYWZ0Lmh0bSNTZWN0aW9uMS4yIj5PUFMgc3BlY2lmaWNhdGlvbjwv
YT4gZm9yIGRlZmluaXRpb25zIG9mIHdvcmRzIGFuZAorICogdGVybXMuCiAgKiA8cD4KICAqIFRo
ZSBzaW1wbGVzdCB1c2FnZSBvZiB0aGlzIEFQSSBtYXkgbG9vayBsaWtlIHRoZSBmb2xsb3dpbmc6
CiAgKiA8L3A+CkBAIC01MCwxMCArNTIsOCBAQAogICogZXB1Yi5wYWNrKG5ldyBGaWxlKCZxdW90
O2Jvb2suZXB1YiZxdW90OykpOwogICogPC9wcmU+CiAgKiA8cD4KLSAqIFRoaXMgd2lsbCBjcmVh
dGUgYSBuZXcgRVBVQiBpbnN0YW5jZSBhbmQgYW4gT1BTICh3aGljaCBpcyB0aGUgdHlwaWNhbCBj
b250ZW50Ci0gKiBvZiBhbiBFUFVCKSB3aXRoIG9uZSBjaGFwdGVyLiBUaGUgT1BTIHdpbGwgaGF2
ZSBvbmUgY2hhcHRlciB3aXRoIGNvbnRlbnRzCi0gKiBmcm9tIDxiPmNoYXB0ZXIueGh0bWw8L2I+
IGFuZCB0aGUgZmluYWwgcmVzdWx0IGlzIGFuIEVQVUIgbmFtZWQKLSAqIDxiPmJvb2suZXB1Yjwv
Yj4uCisgKiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IEVQVUIgaW5zdGFuY2UgYW5kIGFuIE9QUyAo
d2hpY2ggaXMgdGhlIHR5cGljYWwgY29udGVudCBvZiBhbiBFUFVCKSB3aXRoIG9uZSBjaGFwdGVy
LiBUaGUgT1BTCisgKiB3aWxsIGhhdmUgb25lIGNoYXB0ZXIgd2l0aCBjb250ZW50cyBmcm9tIDxi
PmNoYXB0ZXIueGh0bWw8L2I+IGFuZCB0aGUgZmluYWwgcmVzdWx0IGlzIGFuIEVQVUIgbmFtZWQg
PGI+Ym9vay5lcHViPC9iPi4KICAqIDwvcD4KICAqIAogICogQGF1dGhvciBUb3JraWxkIFUuIFJl
c2hlaW0KQEAgLTYzLDI0ICs2MywyNSBAQAogcHVibGljIGNsYXNzIEVQVUIgewogCiAJLyoqIFZl
cnNpb24gb2YgdGhlIE9DRiBzcGVjaWZpY2F0aW9uIHVzZWQgKi8KLQlwcml2YXRlIHN0YXRpYyBm
aW5hbCBTdHJpbmcgT0NGX1ZFUlNJT04gPSAiMi4wIjsKKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBT
dHJpbmcgT0NGX1ZFUlNJT04gPSAiMi4wIjsgLy8kTk9OLU5MUy0xJAogCi0JLyoqIE9FQlBTIChP
UFMrT1BGKSBtaW1ldHlwZSAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBNSU1FVFlQ
RV9PRUJQUyA9ICJhcHBsaWNhdGlvbi9vZWJwcy1wYWNrYWdlK3htbCI7CisJLyoqIE9FQlBTIChP
UFMrT1BGKSBNSU1FIHR5cGUgKi8KKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgTUlNRVRZ
UEVfT0VCUFMgPSAiYXBwbGljYXRpb24vb2VicHMtcGFja2FnZSt4bWwiOyAvLyROT04tTkxTLTEk
CiAKIAkvKiogU3VmZml4IGZvciBPQ0YgZmlsZXMgKi8KLQlwcml2YXRlIHN0YXRpYyBmaW5hbCBT
dHJpbmcgT0NGX0ZJTEVfU1VGRklYID0gInhtbCI7CisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3Ry
aW5nIE9DRl9GSUxFX1NVRkZJWCA9ICJ4bWwiOyAvLyROT04tTkxTLTEkCiAKIAkvKiogVGhlIGVu
Y29kaW5nIHRvIHVzZSBmb3IgdGhlIE9DRiAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmlu
ZyBPQ0ZfRklMRV9FTkNPRElORyA9ICJVVEYtOCI7CisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3Ry
aW5nIE9DRl9GSUxFX0VOQ09ESU5HID0gIlVURi04IjsgLy8kTk9OLU5MUy0xJAogCiAJLyoqIFRo
ZSBjb250YWluZXIgaG9sZGluZyBhbGwgdGhlIHB1YmxpY2F0aW9ucyAqLwogCXByaXZhdGUgQ29u
dGFpbmVyIG9jZkNvbnRhaW5lcjsKIAorCXByaXZhdGUgSUxvZ2dlciBsb2dnZXI7CisKIAkvKioK
LQkgKiBDcmVhdGVzIGEgbmV3IDxiPmVtcHR5PC9iPiBpbnN0YW5jZSBvZiBhbiBFUFVCLiBVc2UK
LQkgKiB7QGxpbmsgI2FkZChPUFNQdWJsaWNhdGlvbil9IGFuZCB7QGxpbmsgI3BhY2soRmlsZSl9
IHRvIGFkZCBwdWJsaWNhdGlvbnMKLQkgKiBhbmQgcmVhZHkgdGhlIEVQVUIgZm9yIGRpc3RyaWJ1
dGlvbi4KKwkgKiBDcmVhdGVzIGEgbmV3IDxiPmVtcHR5PC9iPiBpbnN0YW5jZSBvZiBhbiBFUFVC
LiBVc2Uge0BsaW5rICNhZGQoT1BTUHVibGljYXRpb24pfSBhbmQge0BsaW5rICNwYWNrKEZpbGUp
fSB0byBhZGQKKwkgKiBwdWJsaWNhdGlvbnMgYW5kIHJlYWR5IHRoZSBFUFVCIGZvciBkaXN0cmli
dXRpb24uCiAJICovCiAJcHVibGljIEVQVUIoKSB7CiAJCW9jZkNvbnRhaW5lciA9IE9DRkZhY3Rv
cnkuZUlOU1RBTkNFLmNyZWF0ZUNvbnRhaW5lcigpOwpAQCAtODgsNiArODksMTEgQEAKIAkJb2Nm
Q29udGFpbmVyLnNldFJvb3RmaWxlcyhyb290RmlsZXMpOwogCQlvY2ZDb250YWluZXIuc2V0VmVy
c2lvbihPQ0ZfVkVSU0lPTik7CiAJCXJlZ2lzdGVyT0NGUmVzb3VyY2VGYWN0b3J5KCk7CisJfQor
CisJcHVibGljIEVQVUIoSUxvZ2dlciBsb2dnZXIpIHsKKwkJdGhpcygpOworCQl0aGlzLmxvZ2dl
ciA9IGxvZ2dlcjsKIAl9CiAKIAkvKioKQEAgLTEwMCw4ICsxMDYsNyBAQAogCX0KIAogCS8qKgot
CSAqIEFkZHMgYSBuZXcgT0VCUFMgcHVibGljYXRpb24gdG8gdGhlIEVQVUIuIFVzZSB7QGxpbmsg
I2FkZChGaWxlLCBTdHJpbmcpfQotCSAqIHRvIGFkZCBvdGhlciB0eXBlcyBvZiBjb250ZW50Lgor
CSAqIEFkZHMgYSBuZXcgT0VCUFMgcHVibGljYXRpb24gdG8gdGhlIEVQVUIuIFVzZSB7QGxpbmsg
I2FkZChGaWxlLCBTdHJpbmcpfSB0byBhZGQgb3RoZXIgdHlwZXMgb2YgY29udGVudC4KIAkgKiAK
IAkgKiBAcGFyYW0gb2VicHMKIAkgKiAgICAgICAgICAgIHRoZSBwdWJsaWNhdGlvbiB0byBhZGQu
CkBAIC0xMDksMTggKzExNCwyMCBAQAogCXB1YmxpYyB2b2lkIGFkZChPUFNQdWJsaWNhdGlvbiBv
ZWJwcykgewogCQlSb290RmlsZXMgcm9vdEZpbGVzID0gb2NmQ29udGFpbmVyLmdldFJvb3RmaWxl
cygpOwogCQlpbnQgY291bnQgPSByb290RmlsZXMuZ2V0Um9vdGZpbGVzKCkuc2l6ZSgpOwotCQlT
dHJpbmcgcm9vdEZpbGVOYW1lID0gY291bnQgPiAwID8gIk9FQlBTXyIgKyBjb3VudCA6ICJPRUJQ
UyI7Ci0JCXJvb3RGaWxlTmFtZSArPSAiL2NvbnRlbnQub3BmIjsKKwkJU3RyaW5nIHJvb3RGaWxl
TmFtZSA9IGNvdW50ID4gMCA/ICJPRUJQU18iICsgY291bnQgOiAiT0VCUFMiOyAvLyROT04tTkxT
LTEkIC8vJE5PTi1OTFMtMiQKKwkJcm9vdEZpbGVOYW1lICs9ICIvY29udGVudC5vcGYiOyAvLyRO
T04tTkxTLTEkCiAJCVJvb3RGaWxlIHJvb3RGaWxlID0gT0NGRmFjdG9yeS5lSU5TVEFOQ0UuY3Jl
YXRlUm9vdEZpbGUoKTsKIAkJcm9vdEZpbGUuc2V0RnVsbFBhdGgocm9vdEZpbGVOYW1lKTsKIAkJ
cm9vdEZpbGUuc2V0TWVkaWFUeXBlKE1JTUVUWVBFX09FQlBTKTsKIAkJcm9vdEZpbGUuc2V0UHVi
bGljYXRpb24ob2VicHMpOwogCQlyb290RmlsZXMuZ2V0Um9vdGZpbGVzKCkuYWRkKHJvb3RGaWxl
KTsKKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgcm9vdCBmaWxlIFwiezB9XCIg
b2YgdHlwZSBcInsxfVwiIHRvIEVQVUIiLCByb290RmlsZS5nZXRGdWxsUGF0aCgpLAorCQkJCXJv
b3RGaWxlLmdldE1lZGlhVHlwZSgpKSwgU2V2ZXJpdHkuVkVSQk9TRSk7CiAJfQogCiAJLyoqCi0J
ICogQWRkcyBhIG5ldyBwdWJsaWNhdGlvbiAob3Igcm9vdCBmaWxlKSB0byB0aGUgRVBVQi4gVXNl
Ci0JICoge0BsaW5rICNhZGQoT1BTUHVibGljYXRpb24pfSB3aGVuIGFkZGluZyBhbiBPRUJQUyBw
dWJsaWNhdGlvbi4KKwkgKiBBZGRzIGEgbmV3IHB1YmxpY2F0aW9uIChvciByb290IGZpbGUpIHRv
IHRoZSBFUFVCLiBVc2Uge0BsaW5rICNhZGQoT1BTUHVibGljYXRpb24pfSB3aGVuIGFkZGluZyBh
biBPRUJQUworCSAqIHB1YmxpY2F0aW9uLgogCSAqIAogCSAqIEBwYXJhbSBmaWxlCiAJICogICAg
ICAgICAgICB0aGUgcHVibGljYXRpb24gdG8gYWRkCkBAIC0xMzIsMTMgKzEzOSwxNSBAQAogCQlT
dHJpbmcgbmFtZSA9IHR5cGUuc3Vic3RyaW5nKHR5cGUubGFzdEluZGV4T2YoJy8nKSArIDEsIHR5
cGUubGVuZ3RoKCkpLnRvVXBwZXJDYXNlKCk7CiAJCVJvb3RGaWxlcyByb290RmlsZXMgPSBvY2ZD
b250YWluZXIuZ2V0Um9vdGZpbGVzKCk7CiAJCWludCBjb3VudCA9IHJvb3RGaWxlcy5nZXRSb290
ZmlsZXMoKS5zaXplKCk7Ci0JCVN0cmluZyByb290RmlsZU5hbWUgPSBjb3VudCA+IDAgPyBuYW1l
ICsgIl8iICsgY291bnQgOiBuYW1lOworCQlTdHJpbmcgcm9vdEZpbGVOYW1lID0gY291bnQgPiAw
ID8gbmFtZSArICJfIiArIGNvdW50IDogbmFtZTsgLy8kTk9OLU5MUy0xJAogCQlyb290RmlsZU5h
bWUgKz0gRmlsZS5zZXBhcmF0b3IgKyBmaWxlLmdldE5hbWUoKTsKIAkJUm9vdEZpbGUgcm9vdEZp
bGUgPSBPQ0ZGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVSb290RmlsZSgpOwogCQlyb290RmlsZS5z
ZXRGdWxsUGF0aChyb290RmlsZU5hbWUpOwogCQlyb290RmlsZS5zZXRNZWRpYVR5cGUodHlwZSk7
CiAJCXJvb3RGaWxlLnNldFB1YmxpY2F0aW9uKGZpbGUpOwogCQlyb290RmlsZXMuZ2V0Um9vdGZp
bGVzKCkuYWRkKHJvb3RGaWxlKTsKKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcg
cm9vdCBmaWxlIFwiezB9XCIgb2YgdHlwZSBcInsxfVwiIHRvIEVQVUIiLCByb290RmlsZS5nZXRG
dWxsUGF0aCgpLAorCQkJCXJvb3RGaWxlLmdldE1lZGlhVHlwZSgpKSwgU2V2ZXJpdHkuVkVSQk9T
RSk7CiAJfQogCiAJLyoqCkBAIC0xNTgsMTYgKzE2NywxNSBAQAogCX0KIAogCS8qKgotCSAqIEFz
c2VtYmxlcyB0aGUgRVBVQiBmaWxlIHVzaW5nIGEgdGVtcG9yYXJ5IHdvcmtpbmcgZm9sZGVyLiBU
aGUgZm9sZGVyIHdpbGwKLQkgKiBiZSBkZWxldGVkIGFzIHNvb24gYXMgdGhlIGFzc2VtYmx5IGhh
cyBjb21wbGV0ZWQuCisJICogQXNzZW1ibGVzIHRoZSBFUFVCIGZpbGUgdXNpbmcgYSB0ZW1wb3Jh
cnkgd29ya2luZyBmb2xkZXIuIFRoZSBmb2xkZXIgd2lsbCBiZSBkZWxldGVkIGFzIHNvb24gYXMg
dGhlIGFzc2VtYmx5IGhhcworCSAqIGNvbXBsZXRlZC4KIAkgKiAKIAkgKiBAcGFyYW0gZXB1YkZp
bGUKIAkgKiAgICAgICAgICAgIHRoZSB0YXJnZXQgRVBVQiBmaWxlCi0JICogCiAJICogQHRocm93
cyBFeGNlcHRpb24KIAkgKi8KIAlwdWJsaWMgRmlsZSBwYWNrKEZpbGUgZXB1YkZpbGUpIHRocm93
cyBFeGNlcHRpb24gewotCQlGaWxlIHdvcmtpbmdGb2xkZXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxl
KCJlcHViXyIsIG51bGwpOworCQlGaWxlIHdvcmtpbmdGb2xkZXIgPSBGaWxlLmNyZWF0ZVRlbXBG
aWxlKCJlcHViXyIsIG51bGwpOyAvLyROT04tTkxTLTEkCiAJCWlmICh3b3JraW5nRm9sZGVyLmRl
bGV0ZSgpICYmIHdvcmtpbmdGb2xkZXIubWtkaXJzKCkpIHsKIAkJCXBhY2soZXB1YkZpbGUsIHdv
cmtpbmdGb2xkZXIpOwogCQl9CkBAIC0xNzUsMTEgKzE4MywxNiBAQAogCQlyZXR1cm4gd29ya2lu
Z0ZvbGRlcjsKIAl9CiAKKwlwcml2YXRlIHZvaWQgbG9nKFN0cmluZyBtZXNzYWdlLCBTZXZlcml0
eSBzZXZlcml0eSkgeworCQlpZiAobG9nZ2VyICE9IG51bGwpIHsKKwkJCWxvZ2dlci5sb2cobWVz
c2FnZSwgc2V2ZXJpdHkpOworCQl9CisJfQorCiAJLyoqCi0JICogQXNzZW1ibGVzIHRoZSBFUFVC
IGZpbGUgdXNpbmcgdGhlIHNwZWNpZmllZCB3b3JraW5nIGZvbGRlci4gVGhlIGNvbnRlbnRzCi0J
ICogb2YgdGhlIHdvcmtpbmcgZm9sZGVyIHdpbGwgPGI+bm90PC9iPiBiZSByZW1vdmVkIHdoZW4g
dGhlIG9wZXJhdGlvbiBoYXMKLQkgKiBjb21wbGV0ZWQuIElmIHRoZSB0ZW1wb3JhcnkgZGF0YSBp
cyBub3QgaW50ZXJlc3RpbmcsIHVzZQotCSAqIHtAbGluayAjcGFjayhGaWxlKX0gaW5zdGVhZC4K
KwkgKiBBc3NlbWJsZXMgdGhlIEVQVUIgZmlsZSB1c2luZyB0aGUgc3BlY2lmaWVkIHdvcmtpbmcg
Zm9sZGVyLiBUaGUgY29udGVudHMgb2YgdGhlIHdvcmtpbmcgZm9sZGVyIHdpbGwgPGI+bm90PC9i
PiBiZQorCSAqIHJlbW92ZWQgd2hlbiB0aGUgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuIElmIHRo
ZSB0ZW1wb3JhcnkgZGF0YSBpcyBub3QgaW50ZXJlc3RpbmcsIHVzZSB7QGxpbmsgI3BhY2soRmls
ZSl9CisJICogaW5zdGVhZC4KIAkgKiAKIAkgKiBAcGFyYW0gZXB1YkZpbGUKIAkgKiAgICAgICAg
ICAgIHRoZSB0YXJnZXQgRVBVQiBmaWxlCkBAIC0xOTAsNDcgKzIwMyw1MSBAQAogCSAqLwogCXB1
YmxpYyB2b2lkIHBhY2soRmlsZSBlcHViRmlsZSwgRmlsZSB3b3JraW5nRm9sZGVyKSB0aHJvd3Mg
RXhjZXB0aW9uIHsKIAkJaWYgKG9jZkNvbnRhaW5lci5nZXRSb290ZmlsZXMoKS5nZXRSb290Zmls
ZXMoKS5pc0VtcHR5KCkpIHsKLQkJCXRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24o
IkVQVUIgZG9lcyBub3QgY29udGFpbiBhbnkgcHVibGljYXRpb25zIik7CisJCQl0aHJvdyBuZXcg
SWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJFUFVCIGRvZXMgbm90IGNvbnRhaW4gYW55IHB1Ymxp
Y2F0aW9ucyIpOyAvLyROT04tTkxTLTEkCiAJCX0KIAkJd29ya2luZ0ZvbGRlci5ta2RpcnMoKTsK
IAkJaWYgKHdvcmtpbmdGb2xkZXIuaXNEaXJlY3RvcnkoKSB8fCB3b3JraW5nRm9sZGVyLm1rZGly
cygpKSB7CiAJCQl3cml0ZU9DRih3b3JraW5nRm9sZGVyKTsKIAkJCUVMaXN0PFJvb3RGaWxlPiBw
dWJsaWNhdGlvbnMgPSBvY2ZDb250YWluZXIuZ2V0Um9vdGZpbGVzKCkuZ2V0Um9vdGZpbGVzKCk7
CisJCQlsb2coTWVzc2FnZUZvcm1hdC5mb3JtYXQoIkFzc2VtYmxpbmcgRVBVQiBmaWxlIHRvIFwi
ezB9XCIiLCBlcHViRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSksIFNldmVyaXR5LklORk8pOwogCQkJ
Zm9yIChSb290RmlsZSByb290RmlsZSA6IHB1YmxpY2F0aW9ucykgewogCQkJCU9iamVjdCBwdWJs
aWNhdGlvbiA9IHJvb3RGaWxlLmdldFB1YmxpY2F0aW9uKCk7CiAJCQkJRmlsZSByb290ID0gbmV3
IEZpbGUod29ya2luZ0ZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSArIEZpbGUuc2VwYXJhdG9yICsg
cm9vdEZpbGUuZ2V0RnVsbFBhdGgoKSk7CiAJCQkJaWYgKHB1YmxpY2F0aW9uIGluc3RhbmNlb2Yg
T1BTUHVibGljYXRpb24pIHsKKwkJCQkJKChPUFNQdWJsaWNhdGlvbikgcHVibGljYXRpb24pLmFk
ZENvbXB1bHNvcnlEYXRhKCk7CiAJCQkJCSgoT1BTUHVibGljYXRpb24pIHB1YmxpY2F0aW9uKS5w
YWNrKHJvb3QpOwogCQkJCX0gZWxzZSB7CiAJCQkJCWlmIChyb290RmlsZS5nZXRQdWJsaWNhdGlv
bigpIGluc3RhbmNlb2YgRmlsZSkgewogCQkJCQkJRVBVQkZpbGVVdGlsLmNvcHkoKEZpbGUpIHJv
b3RGaWxlLmdldFB1YmxpY2F0aW9uKCksIHJvb3QpOwogCQkJCQl9IGVsc2UgewotCQkJCQkJdGhy
b3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiVW5rbm93biBwdWJsaWNhdGlvbiB0eXBl
Iik7CisJCQkJCQl0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJVbmtub3duIHB1
YmxpY2F0aW9uIHR5cGUiKTsgLy8kTk9OLU5MUy0xJAogCQkJCQl9CiAJCQkJfQogCQkJfQogCQkJ
RVBVQkZpbGVVdGlsLnppcChlcHViRmlsZSwgd29ya2luZ0ZvbGRlcik7CisJCQlsb2coTWVzc2Fn
ZUZvcm1hdC5mb3JtYXQoCisJCQkJCSJTdWNjZXNzZnVsbHkgY3JlYXRlZCBFUFVCIGNvbnRhaW5p
bmcgezAsY2hvaWNlLDAjbm8gcHVibGljYXRpb25zfDEjb25lIHB1YmxpY2F0aW9ufDE8ezAsbnVt
YmVyLGludGVnZXJ9IHB1YmxpY2F0aW9uc30iLAorCQkJCQlwdWJsaWNhdGlvbnMuc2l6ZSgpKSwg
U2V2ZXJpdHkuSU5GTyk7CiAJCX0gZWxzZSB7Ci0JCQl0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkNv
dWxkIG5vdCBjcmVhdGUgd29ya2luZyBmb2xkZXIgaW4gIiArIHdvcmtpbmdGb2xkZXIuZ2V0QWJz
b2x1dGVQYXRoKCkpOworCQkJdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJDb3VsZCBub3QgY3JlYXRl
IHdvcmtpbmcgZm9sZGVyIGluICIgKyB3b3JraW5nRm9sZGVyLmdldEFic29sdXRlUGF0aCgpKTsg
Ly8kTk9OLU5MUy0xJAogCQl9CiAJfQogCiAJLyoqCi0JICogUmVhZHMgdGhlIDxpPk9wZW4gQ29u
dGFpbmVyIEZvcm1hdCAoT0NGKTwvaT4gZm9ybWF0dGVkIGxpc3Qgb2YgY29udGVudHMKLQkgKiBv
ZiB0aGlzIEVQVUIuIFRoZSByZXN1bHQgb2YgdGhpcyBvcGVyYXRpb24gaXMgcGxhY2VkIGluIHRo
ZQotCSAqIHtAbGluayAjb2NmQ29udGFpbmVyfSBpbnN0YW5jZS4KKwkgKiBSZWFkcyB0aGUgPGk+
T3BlbiBDb250YWluZXIgRm9ybWF0IChPQ0YpPC9pPiBmb3JtYXR0ZWQgbGlzdCBvZiBjb250ZW50
cyBvZiB0aGlzIEVQVUIuIFRoZSByZXN1bHQgb2YgdGhpcworCSAqIG9wZXJhdGlvbiBpcyBwbGFj
ZWQgaW4gdGhlIHtAbGluayAjb2NmQ29udGFpbmVyfSBpbnN0YW5jZS4KIAkgKiAKLQkgKiBAcGFy
YW0gd29ya2luZ0ZvbGRlcgorCSAqIEBwYXJhbSByb290Rm9sZGVyCiAJICogICAgICAgICAgICB0
aGUgZm9sZGVyIHdoZXJlIHRoZSBFUFVCIHdhcyB1bnBhY2tlZAogCSAqIEB0aHJvd3MgSU9FeGNl
cHRpb24KIAkgKiBAc2VlIHtAbGluayAjdW5wYWNrKEZpbGUpfQogCSAqIEBzZWUge0BsaW5rICN1
bnBhY2soRmlsZSwgRmlsZSl9CiAJICovCi0JcHJvdGVjdGVkIHZvaWQgcmVhZE9DRihGaWxlIHdv
cmtpbmdGb2xkZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CisJcHJvdGVjdGVkIHZvaWQgcmVhZE9D
RihGaWxlIHJvb3RGb2xkZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAJCS8vIFRoZXNlIGZpbGUg
bmFtZXMgYXJlIGxpc3RlZCBpbiB0aGUgT0NGIHNwZWNpZmljYXRpb24gYW5kIG11c3Qgbm90IGJl
CiAJCS8vIGNoYW5nZWQuCi0JCUZpbGUgbWV0YUZvbGRlciA9IG5ldyBGaWxlKHdvcmtpbmdGb2xk
ZXIuZ2V0QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJNRVRBLUlORiIpOwotCQlG
aWxlIGNvbnRhaW5lckZpbGUgPSBuZXcgRmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRlUGF0aCgp
ICsgRmlsZS5zZXBhcmF0b3IgKyAiY29udGFpbmVyLnhtbCIpOworCQlGaWxlIG1ldGFGb2xkZXIg
PSBuZXcgRmlsZShyb290Rm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3Ig
KyAiTUVUQS1JTkYiKTsgLy8kTk9OLU5MUy0xJAorCQlGaWxlIGNvbnRhaW5lckZpbGUgPSBuZXcg
RmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyAiY29u
dGFpbmVyLnhtbCIpOyAvLyROT04tTkxTLTEkCiAJCVJlc291cmNlU2V0IHJlc291cmNlU2V0ID0g
bmV3IFJlc291cmNlU2V0SW1wbCgpOwogCQlVUkkgZmlsZVVSSSA9IFVSSS5jcmVhdGVGaWxlVVJJ
KGNvbnRhaW5lckZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpOwogCQlSZXNvdXJjZSByZXNvdXJjZSA9
IHJlc291cmNlU2V0LmNyZWF0ZVJlc291cmNlKGZpbGVVUkkpOwpAQCAtMjM5LDkgKzI1Niw4IEBA
CiAJfQogCiAJLyoqCi0JICogUmVnaXN0ZXJzIGEgbmV3IHJlc291cmNlIGZhY3RvcnkgZm9yIE9D
RiBkYXRhIHN0cnVjdHVyZXMuIFRoaXMgaXMKLQkgKiBub3JtYWxseSBkb25lIHRocm91Z2ggRWNs
aXBzZSBleHRlbnNpb24gcG9pbnRzIGJ1dCB3ZSBhbHNvIG5lZWQgdG8gYmUKLQkgKiBhYmxlIHRv
IGNyZWF0ZSB0aGlzIGZhY3Rvcnkgd2l0aG91dCB0aGUgRWNsaXBzZSBydW50aW1lLgorCSAqIFJl
Z2lzdGVycyBhIG5ldyByZXNvdXJjZSBmYWN0b3J5IGZvciBPQ0YgZGF0YSBzdHJ1Y3R1cmVzLiBU
aGlzIGlzIG5vcm1hbGx5IGRvbmUgdGhyb3VnaCBFY2xpcHNlIGV4dGVuc2lvbiBwb2ludHMKKwkg
KiBidXQgd2UgYWxzbyBuZWVkIHRvIGJlIGFibGUgdG8gY3JlYXRlIHRoaXMgZmFjdG9yeSB3aXRo
b3V0IHRoZSBFY2xpcHNlIHJ1bnRpbWUuCiAJICovCiAJcHJpdmF0ZSB2b2lkIHJlZ2lzdGVyT0NG
UmVzb3VyY2VGYWN0b3J5KCkgewogCQkvLyBSZWdpc3RlciBwYWNrYWdlIHNvIHRoYXQgaXQgaXMg
YXZhaWxhYmxlIGV2ZW4gd2l0aG91dCB0aGUgRWNsaXBzZQpAQCAtMjY5LDggKzI4NSw4IEBACiAJ
CQkJCQlzYXZlT3B0aW9ucy5wdXQoWE1MUmVzb3VyY2UuT1BUSU9OX0VOQ09ESU5HLCBPQ0ZfRklM
RV9FTkNPRElORyk7CiAJCQkJCQkvLyBEbyBub3QgZG93bmxvYWQgYW55IGV4dGVybmFsIERURHMu
CiAJCQkJCQlNYXA8U3RyaW5nLCBPYmplY3Q+IHBhcnNlckZlYXR1cmVzID0gbmV3IEhhc2hNYXA8
U3RyaW5nLCBPYmplY3Q+KCk7Ci0JCQkJCQlwYXJzZXJGZWF0dXJlcy5wdXQoImh0dHA6Ly94bWwu
b3JnL3NheC9mZWF0dXJlcy92YWxpZGF0aW9uIiwgQm9vbGVhbi5GQUxTRSk7Ci0JCQkJCQlwYXJz
ZXJGZWF0dXJlcy5wdXQoImh0dHA6Ly9hcGFjaGUub3JnL3htbC9mZWF0dXJlcy9ub252YWxpZGF0
aW5nL2xvYWQtZXh0ZXJuYWwtZHRkIiwKKwkJCQkJCXBhcnNlckZlYXR1cmVzLnB1dCgiaHR0cDov
L3htbC5vcmcvc2F4L2ZlYXR1cmVzL3ZhbGlkYXRpb24iLCBCb29sZWFuLkZBTFNFKTsgLy8kTk9O
LU5MUy0xJAorCQkJCQkJcGFyc2VyRmVhdHVyZXMucHV0KCJodHRwOi8vYXBhY2hlLm9yZy94bWwv
ZmVhdHVyZXMvbm9udmFsaWRhdGluZy9sb2FkLWV4dGVybmFsLWR0ZCIsIC8vJE5PTi1OTFMtMSQK
IAkJCQkJCQkJQm9vbGVhbi5GQUxTRSk7CiAJCQkJCQlsb2FkT3B0aW9ucy5wdXQoWE1MUmVzb3Vy
Y2UuT1BUSU9OX1BBUlNFUl9GRUFUVVJFUywgcGFyc2VyRmVhdHVyZXMpOwogCQkJCQkJcmV0dXJu
IHhtaVJlc291cmNlOwpAQCAtMjgwLDggKzI5Niw3IEBACiAJfQogCiAJLyoqCi0JICogVW5wYWNr
cyB0aGUgRVBVQiBmaWxlIHRvIGEgdGVtcG9yYXJ5IGxvY2F0aW9uIGFuZCBwb3B1bGF0ZXMgdGhl
IGRhdGEKLQkgKiBtb2RlbCB3aXRoIHRoZSBjb250ZW50LgorCSAqIFVucGFja3MgdGhlIEVQVUIg
ZmlsZSB0byBhIHRlbXBvcmFyeSBsb2NhdGlvbiBhbmQgcG9wdWxhdGVzIHRoZSBkYXRhIG1vZGVs
IHdpdGggdGhlIGNvbnRlbnQuCiAJICogCiAJICogQHBhcmFtIGVwdWJGaWxlCiAJICogICAgICAg
ICAgICB0aGUgRVBVQiBmaWxlIHRvIHVucGFjawpAQCAtMjkwLDcgKzMwNSw3IEBACiAJICogQHNl
ZSB7QGxpbmsgI3VucGFjayhGaWxlLCBGaWxlKX0KIAkgKi8KIAlwdWJsaWMgRmlsZSB1bnBhY2so
RmlsZSBlcHViRmlsZSkgdGhyb3dzIEV4Y2VwdGlvbiB7Ci0JCUZpbGUgd29ya2luZ0ZvbGRlciA9
IEZpbGUuY3JlYXRlVGVtcEZpbGUoImVwdWJfIiwgbnVsbCk7CisJCUZpbGUgd29ya2luZ0ZvbGRl
ciA9IEZpbGUuY3JlYXRlVGVtcEZpbGUoImVwdWJfIiwgbnVsbCk7IC8vJE5PTi1OTFMtMSQKIAkJ
d29ya2luZ0ZvbGRlci5kZWxldGVPbkV4aXQoKTsKIAkJaWYgKHdvcmtpbmdGb2xkZXIuZGVsZXRl
KCkgJiYgd29ya2luZ0ZvbGRlci5ta2RpcnMoKSkgewogCQkJdW5wYWNrKGVwdWJGaWxlLCB3b3Jr
aW5nRm9sZGVyKTsKQEAgLTI5OSw4ICszMTQsMTkgQEAKIAl9CiAKIAkvKioKLQkgKiBVbnBhY2tz
IHRoZSBnaXZlbiBFUFVCIGZpbGUgaW50byB0aGUgc3BlY2lmaWVkIGRlc3RpbmF0aW9uIGFuZCBw
b3B1bGF0ZXMKLQkgKiB0aGUgZGF0YSBtb2RlbCB3aXRoIHRoZSBjb250ZW50LgorCSAqIFVucGFj
a3MgdGhlIGdpdmVuIEVQVUIgZmlsZSBpbnRvIHRoZSBzcGVjaWZpZWQgZGVzdGluYXRpb24gYW5k
IHBvcHVsYXRlcyB0aGUgZGF0YSBtb2RlbCB3aXRoIHRoZSBjb250ZW50LiBOb3RlCisJICogdGhh
dCB3aGVuIHRoZSBkZXN0aW5hdGlvbiBmb2xkZXIgYWxyZWFkeSBleGlzdHMgb3IgaXMgZW1wdHkg
dGhlIGZpbGUgRVBVQiB3aWxsIG5vdCBiZSB1bnBhY2tlZCBvciB2ZXJpZmllZCwgYnV0CisJICog
dGhlIGNvbnRlbnRzIG9mIHRoZSBkZXN0aW5hdGlvbiB3aWxsIGJlIHRyZWF0ZWQgYXMgYW4gYWxy
ZWFkeSB1bnBhY2tlZCBFUFVCLiBJZiB0aGlzIGJlaGF2aW91ciBpcyBub3QgZGVzaXJlZCBvbmUK
KwkgKiBzaG91bGQgdGFrZSBzdGVwcyB0byBkZWxldGUgdGhlIGZvbGRlciBwcmlvciB0byB1bnBh
Y2tpbmcuCisJICogPHA+CisJICogV2hlbiBwZXJmb3JtaW5nIHRoZSB1bnBhY2tpbmcsIHRoZSBt
b2RpZmljYXRpb24gZGF0ZSBvZiB0aGUgZGVzdGluYXRpb24gZm9sZGVyIHdpbGwgYmUgc2V0IHRv
IHRoZSBtb2RpZmljYXRpb24KKwkgKiBkYXRlIG9mIHRoZSBzb3VyY2UgRVBVQi4gQWRkaXRpb25h
bGx5IHRoZSBjb250ZW50cyBvZiB0aGUgRVBVQiB3aWxsIHJldGFpbiB0aGUgb3JpZ2luYWwgbW9k
aWZpY2F0aW9uIGRhdGUgaWYgc2V0LgorCSAqIDwvcD4KKwkgKiA8cD4KKwkgKiBNdWx0aXBsZSBP
UFMgcm9vdCBmaWxlcyBpbiB0aGUgcHVibGljYXRpb24gd2lsbCBwb3B1bGF0ZSB0aGUgT0NGIGNv
bnRhaW5lciBpbnN0YW5jZSB3aXRoIG9uZQorCSAqIHtAbGluayBPUFNQdWJsaWNhdGlvbn0gZm9y
IGVhY2ggYXMgZXhwZWN0ZWQuIFRoZSBjb250ZW50cyBvZiB0aGUgZGF0YSBtb2RlbCBzdGFydGlu
ZyB3aXRoIHRoZSBPQ0YgY29udGFpbmVyIHdpbGwKKwkgKiBiZSByZXBsYWNlZC4KKwkgKiA8L3A+
CiAJICogCiAJICogQHBhcmFtIGVwdWJGaWxlCiAJICogICAgICAgICAgICB0aGUgRVBVQiBmaWxl
IHRvIHVucGFjawpAQCAtMzA4LDYgKzMzNCw4IEBACiAJICogICAgICAgICAgICB0aGUgZGVzdGlu
YXRpb24gZm9sZGVyCiAJICogQHRocm93cyBFeGNlcHRpb24KIAkgKiBAc2VlIHtAbGluayAjdW5w
YWNrKEZpbGUpfSB3aGVuIGRlc3RpbmF0aW9uIGlzIG5vdCBpbnRlcmVzdGluZworCSAqIEBzZWUg
e0BsaW5rICNnZXRDb250YWluZXIoKX0gdG8gb2J0YWluIHRoZSBjb250YWluZXIgaW5zdGFuY2UK
KwkgKiBAc2VlIHtAbGluayAjZ2V0T1BTUHVibGljYXRpb25zKCl9IHRvIGdldCBhIGxpc3Qgb2Yg
YWxsIGNvbnRhaW5lZCBPUFMgcHVibGljYXRpb25zCiAJICovCiAJcHVibGljIHZvaWQgdW5wYWNr
KEZpbGUgZXB1YkZpbGUsIEZpbGUgZGVzdGluYXRpb24pIHRocm93cyBFeGNlcHRpb24gewogCQlF
UFVCRmlsZVV0aWwudW56aXAoZXB1YkZpbGUsIGRlc3RpbmF0aW9uKTsKQEAgLTMyNSwxNyArMzUz
LDE2IEBACiAJfQogCiAJLyoqCi0JICogQ3JlYXRlcyBhIG5ldyBmb2xkZXIgbmFtZWQgTUVUQS1J
TkYgYW5kIHdyaXRlcyB0aGUgcmVxdWlyZWQgKGFzIHBlciB0aGUKLQkgKiBPUFMgc3BlY2lmaWNh
dGlvbikgPGI+Y29udGFpbmVyLnhtbDwvYj4gaW4gdGhhdCBmb2xkZXIuIFRoaXMgaXMgcGFydCBv
ZgotCSAqIHRoZSBwYWNraW5nIHByb2NlZHVyZS4KKwkgKiBDcmVhdGVzIGEgbmV3IGZvbGRlciBu
YW1lZCBNRVRBLUlORiBhbmQgd3JpdGVzIHRoZSByZXF1aXJlZCAoYXMgcGVyIHRoZSBPUFMgc3Bl
Y2lmaWNhdGlvbikgPGI+Y29udGFpbmVyLnhtbDwvYj4KKwkgKiBpbiB0aGF0IGZvbGRlci4gVGhp
cyBpcyBwYXJ0IG9mIHRoZSBwYWNraW5nIHByb2NlZHVyZS4KIAkgKiAKLQkgKiBAcGFyYW0gd29y
a2luZ0ZvbGRlcgorCSAqIEBwYXJhbSByb290Rm9sZGVyCiAJICogICAgICAgICAgICB0aGUgcm9v
dCBmb2xkZXIKIAkgKi8KLQlwcml2YXRlIHZvaWQgd3JpdGVPQ0YoRmlsZSB3b3JraW5nRm9sZGVy
KSB0aHJvd3MgSU9FeGNlcHRpb24gewotCQlGaWxlIG1ldGFGb2xkZXIgPSBuZXcgRmlsZSh3b3Jr
aW5nRm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyAiTUVUQS1JTkYi
KTsKKwlwcml2YXRlIHZvaWQgd3JpdGVPQ0YoRmlsZSByb290Rm9sZGVyKSB0aHJvd3MgSU9FeGNl
cHRpb24geworCQlGaWxlIG1ldGFGb2xkZXIgPSBuZXcgRmlsZShyb290Rm9sZGVyLmdldEFic29s
dXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyAiTUVUQS1JTkYiKTsgLy8kTk9OLU5MUy0xJAog
CQlpZiAobWV0YUZvbGRlci5ta2RpcigpKSB7Ci0JCQlGaWxlIGNvbnRhaW5lckZpbGUgPSBuZXcg
RmlsZShtZXRhRm9sZGVyLmdldEFic29sdXRlUGF0aCgpICsgRmlsZS5zZXBhcmF0b3IgKyAiY29u
dGFpbmVyLnhtbCIpOworCQkJRmlsZSBjb250YWluZXJGaWxlID0gbmV3IEZpbGUobWV0YUZvbGRl
ci5nZXRBYnNvbHV0ZVBhdGgoKSArIEZpbGUuc2VwYXJhdG9yICsgImNvbnRhaW5lci54bWwiKTsg
Ly8kTk9OLU5MUy0xJAogCQkJUmVzb3VyY2VTZXQgcmVzb3VyY2VTZXQgPSBuZXcgUmVzb3VyY2VT
ZXRJbXBsKCk7CiAJCQkvLyBSZWdpc3RlciB0aGUgcGFja2FnZXMgdG8gbWFrZSBpdCBhdmFpbGFi
bGUgZHVyaW5nIGxvYWRpbmcuCiAJCQlVUkkgZmlsZVVSSSA9IFVSSS5jcmVhdGVGaWxlVVJJKGNv
bnRhaW5lckZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpOwpAQCAtMzU0LDggKzM4MSw4IEBACiAJcHJp
dmF0ZSB2b2lkIGRlbGV0ZUZvbGRlcihGaWxlIGZvbGRlcikgewogCQlpZiAoZm9sZGVyLmlzRGly
ZWN0b3J5KCkpIHsKIAkJCVN0cmluZ1tdIGNoaWxkcmVuID0gZm9sZGVyLmxpc3QoKTsKLQkJCWZv
ciAoaW50IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKLQkJCQlkZWxldGVGb2xk
ZXIobmV3IEZpbGUoZm9sZGVyLCBjaGlsZHJlbltpXSkpOworCQkJZm9yIChTdHJpbmcgZWxlbWVu
dCA6IGNoaWxkcmVuKSB7CisJCQkJZGVsZXRlRm9sZGVyKG5ldyBGaWxlKGZvbGRlciwgZWxlbWVu
dCkpOwogCQkJfQogCQl9CiAJCWZvbGRlci5kZWxldGUoKTsKZGlmZiAtLWdpdCBhL29yZy5lY2xp
cHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIv
Y29yZS9JTG9nZ2VyLmphdmEgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMv
b3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvSUxvZ2dlci5qYXZhCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjQzM2NkM2EKLS0tIC9kZXYvbnVsbAorKysgYi9vcmcu
ZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9l
cHViL2NvcmUvSUxvZ2dlci5qYXZhCkBAIC0wLDAgKzEsNDIgQEAKKy8qKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqCisgKiBDb3B5cmlnaHQgKGMpIDIwMTIgVG9ya2lsZCBVLiBSZXNoZWltLgorICogCisg
KiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcg
bWF0ZXJpYWxzIGFyZSBtYWRlCisgKiBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBF
Y2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hpY2gKKyAqIGFjY29tcGFuaWVzIHRoaXMgZGlz
dHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0CisgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3Jn
L2xlZ2FsL2VwbC12MTAuaHRtbAorICogCisgKiBDb250cmlidXRvcnM6IAorICogICBUb3JraWxk
IFUuIFJlc2hlaW0gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqLworcGFja2FnZSBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZTsK
KworLyoqCisgKiBJbXBsZW1lbnQgdG8gcHJvdmlkZSBhIGxvZyBjb25zdW1lciBmb3IgdGhlIEVQ
VUIgdG9vbGluZy4KKyAqIAorICogQGF1dGhvciBUb3JraWxkIFUuIFJlc2hlaW0KKyAqLworcHVi
bGljIGludGVyZmFjZSBJTG9nZ2VyIHsKKwlwdWJsaWMgZW51bSBTZXZlcml0eSB7CisJCUVSUk9S
LCBXQVJOSU5HLCBJTkZPLCBWRVJCT1NFLCBERUJVRworCX0KKworCS8qKgorCSAqIExvZ3MgdGhl
IHNwZWNpZmllZCBtZXNzYWdlIHVzaW5nIHRoZSA8Yj5JTkZPPC9iPiBzZXZlcml0eS4KKwkgKiAK
KwkgKiBAcGFyYW0gbWVzc2FnZQorCSAqICAgICAgICAgICAgdGhlIG1lc3NhZ2UgdG8gbG9nCisJ
ICovCisJcHVibGljIHZvaWQgbG9nKFN0cmluZyBtZXNzYWdlKTsKKworCS8qKgorCSAqIExvZ3Mg
dGhlIHNwZWNpZmllZCBtZXNzYWdlIHVzaW5nIHRoZSBnaXZlbiBzZXZlcml0eS4KKwkgKiAKKwkg
KiBAcGFyYW0gbWVzc2FnZQorCSAqICAgICAgICAgICAgdGhlIG1lc3NhZ2UgdG8gbG9nCisJICog
QHBhcmFtIHNldmVyaXR5CisJICogICAgICAgICAgICB0aGUgc2V2ZXJpdHkgb2YgdGhlIGV2ZW50
CisJICovCisJcHVibGljIHZvaWQgbG9nKFN0cmluZyBtZXNzYWdlLCBTZXZlcml0eSBzZXZlcml0
eSk7CisKK30KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3Ny
Yy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS9PUFMyUHVibGljYXRpb24uamF2YSBi
L29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9k
b2NzL2VwdWIvY29yZS9PUFMyUHVibGljYXRpb24uamF2YQppbmRleCA5NmI2M2Y3Li4xNWE2NjA3
IDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2Vj
bGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvT1BTMlB1YmxpY2F0aW9uLmphdmEKKysrIGIvb3Jn
LmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3JjL29yZy9lY2xpcHNlL215bHluL2RvY3Mv
ZXB1Yi9jb3JlL09QUzJQdWJsaWNhdGlvbi5qYXZhCkBAIC0xLDEyICsxLDEzIEBACiAvKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKgotICogQ29weXJpZ2h0IChjKSAyMDExIFRvcmtpbGQgVS4gUmVzaGVp
bS4KKyAqIENvcHlyaWdodCAoYykgMjAxMSwyMDEyIFRvcmtpbGQgVS4gUmVzaGVpbS4KICAqIAog
ICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5n
IG1hdGVyaWFscyBhcmUgbWFkZQogICogYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUg
RWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2MS4wIHdoaWNoCiAgKiBhY2NvbXBhbmllcyB0aGlzIGRp
c3RyaWJ1dGlvbiwgYW5kIGlzIGF2YWlsYWJsZSBhdAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9y
Zy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqIAotICogQ29udHJpYnV0b3JzOiBUb3JraWxkIFUuIFJl
c2hlaW0gLSBpbml0aWFsIEFQSSBhbmQgaW1wbGVtZW50YXRpb24KKyAqIENvbnRyaWJ1dG9yczog
CisgKiAgIFRvcmtpbGQgVS4gUmVzaGVpbSAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlv
bgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKiovCiBwYWNrYWdlIG9yZy5lY2xpcHNlLm15bHluLmRv
Y3MuZXB1Yi5jb3JlOwogCkBAIC0xNCw2ICsxNSw3IEBACiBpbXBvcnQgamF2YS5pby5GaWxlSW5w
dXRTdHJlYW07CiBpbXBvcnQgamF2YS5pby5GaWxlUmVhZGVyOwogaW1wb3J0IGphdmEuaW8uSU9F
eGNlcHRpb247CitpbXBvcnQgamF2YS50ZXh0Lk1lc3NhZ2VGb3JtYXQ7CiBpbXBvcnQgamF2YS51
dGlsLkFycmF5TGlzdDsKIGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKIGltcG9ydCBqYXZhLnV0
aWwuTGlzdDsKQEAgLTI5LDYgKzMxLDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5lbWYuZWNvcmUu
dXRpbC5GZWF0dXJlTWFwVXRpbDsKIGltcG9ydCBvcmcuZWNsaXBzZS5lbWYuZWNvcmUueG1pLlhN
TEhlbHBlcjsKIGltcG9ydCBvcmcuZWNsaXBzZS5lbWYuZWNvcmUueG1pLlhNTFJlc291cmNlOwor
aW1wb3J0IG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5jb3JlLklMb2dnZXIuU2V2ZXJpdHk7
CiBpbXBvcnQgb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLm5jeC5Eb2NUaXRsZTsKIGltcG9y
dCBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIubmN4LkhlYWQ7CiBpbXBvcnQgb3JnLmVjbGlw
c2UubXlseW4uZG9jcy5lcHViLm5jeC5NZXRhOwpAQCAtNTMsMTIgKzU2LDEwIEBACiBpbXBvcnQg
b3JnLnhtbC5zYXguU0FYRXhjZXB0aW9uOwogCiAvKioKLSAqIFRoaXMgdHlwZSByZXByZXNlbnRz
IG9uZSBFUFVCIHJldmlzaW9uIDIuMC4xIGZvcm1hdHRlZCBwdWJsaWNhdGlvbi4gSXQKLSAqIG1h
aW50YWlucyBhIGRhdGEgc3RydWN0dXJlIHJlcHJlc2VudGluZyB0aGUgZW50aXJlIHB1YmxpY2F0
aW9uIGFuZCBBUEkgZm9yCi0gKiBidWlsZGluZyBpdC4KKyAqIFRoaXMgdHlwZSByZXByZXNlbnRz
IG9uZSBFUFVCIHJldmlzaW9uIDIuMC4xIGZvcm1hdHRlZCBwdWJsaWNhdGlvbi4gSXQgbWFpbnRh
aW5zIGEgZGF0YSBzdHJ1Y3R1cmUgcmVwcmVzZW50aW5nIHRoZQorICogZW50aXJlIHB1YmxpY2F0
aW9uIGFuZCBBUEkgZm9yIGJ1aWxkaW5nIGl0LgogICogPHA+Ci0gKiA8Yj5QbGVhc2Ugbm90ZSB0
aGF0IHRoaXMgQVBJIGlzIHByb3Zpc2lvbmFsIGFuZCBzaG91bGQgbm90IHlldCBiZSB1c2VkIHRv
Ci0gKiBidWlsZCBhcHBsaWNhdGlvbnMuPC9iPgorICogPGI+UGxlYXNlIG5vdGUgdGhhdCB0aGlz
IEFQSSBpcyBwcm92aXNpb25hbCBhbmQgc2hvdWxkIG5vdCB5ZXQgYmUgdXNlZCB0byBidWlsZCBh
cHBsaWNhdGlvbnMuPC9iPgogICogPC9wPgogICogCiAgKiBAYXV0aG9yIFRvcmtpbGQgVS4gUmVz
aGVpbQpAQCAtNjcsMTUgKzY4LDE1IEBACiBwdWJsaWMgY2xhc3MgT1BTMlB1YmxpY2F0aW9uIGV4
dGVuZHMgT1BTUHVibGljYXRpb24gewogCiAJLyoqIE1JTUUgdHlwZSBmb3IgTkNYIGRvY3VtZW50
cyAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBNSU1FVFlQRV9OQ1ggPSAiYXBwbGlj
YXRpb24veC1kdGJuY3greG1sIjsKKwlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgTUlNRVRZ
UEVfTkNYID0gImFwcGxpY2F0aW9uL3gtZHRibmN4K3htbCI7IC8vJE5PTi1OTFMtMSQKIAotCXBy
aXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBOQ1hfRklMRV9TVUZGSVggPSAibmN4IjsKKwlwcml2
YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgTkNYX0ZJTEVfU1VGRklYID0gIm5jeCI7IC8vJE5PTi1O
TFMtMSQKIAogCS8qKiBJZGVudGlmaWVyIG9mIHRoZSB0YWJsZSBvZiBjb250ZW50cyBmaWxlICov
Ci0JcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRBQkxFX09GX0NPTlRFTlRTX0lEID0gIm5j
eCI7CisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRBQkxFX09GX0NPTlRFTlRTX0lEID0g
Im5jeCI7IC8vJE5PTi1OTFMtMSQKIAogCS8qKiBEZWZhdWx0IG5hbWUgZm9yIHRoZSB0YWJsZSBv
ZiBjb250ZW50cyAqLwotCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBUT0NGSUxFX05BTUUg
PSAidG9jLm5jeCI7CisJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRPQ0ZJTEVfTkFNRSA9
ICJ0b2MubmN4IjsgLy8kTk9OLU5MUy0xJAogCiAJLyoqIFRoZSB0YWJsZSBvZiBjb250ZW50cyAq
LwogCXByaXZhdGUgTmN4IG5jeFRPQzsKQEAgLTg1LDI4ICs4NiwyMCBAQAogCSAqLwogCXB1Ymxp
YyBPUFMyUHVibGljYXRpb24oKSB7CiAJCXN1cGVyKCk7Ci0JCW9wZlBhY2thZ2Uuc2V0VmVyc2lv
bigiMi4wIik7Ci0JCW5jeFRPQyA9IE5DWEZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZU5jeCgpOwot
CQlNZXRhZGF0YSBvcGZNZXRhZGF0YSA9IE9QRkZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZU1ldGFk
YXRhKCk7Ci0JCW9wZlBhY2thZ2Uuc2V0TWV0YWRhdGEob3BmTWV0YWRhdGEpOwotCQlHdWlkZSBv
cGZHdWlkZSA9IE9QRkZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZUd1aWRlKCk7Ci0JCW9wZlBhY2th
Z2Uuc2V0R3VpZGUob3BmR3VpZGUpOwotCQlNYW5pZmVzdCBvcGZNYW5pZmVzdCA9IE9QRkZhY3Rv
cnkuZUlOU1RBTkNFLmNyZWF0ZU1hbmlmZXN0KCk7Ci0JCW9wZlBhY2thZ2Uuc2V0TWFuaWZlc3Qo
b3BmTWFuaWZlc3QpOwotCQkvLyBDcmVhdGUgdGhlIHNwaW5lIGFuZCBzZXQgYSByZWZlcmVuY2Ug
dG8gdGhlIHRhYmxlIG9mIGNvbnRlbnRzCi0JCS8vIGl0ZW0gd2hpY2ggd2lsbCBiZSBhZGRlZCB0
byB0aGUgbWFuaWZlc3Qgb24gYSBsYXRlciBzdGFnZS4KLQkJU3BpbmUgb3BmU3BpbmUgPSBPUEZG
YWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVTcGluZSgpOwotCQlvcGZTcGluZS5zZXRUb2MoVEFCTEVf
T0ZfQ09OVEVOVFNfSUQpOwotCQlvcGZQYWNrYWdlLnNldFNwaW5lKG9wZlNwaW5lKTsKLQotCQly
ZWdpc3Rlck5DWFJlc291cmNlRmFjdG9yeSgpOwotCQlvcGZQYWNrYWdlLnNldEdlbmVyYXRlVGFi
bGVPZkNvbnRlbnRzKHRydWUpOworCQlzZXR1cCgpOwogCX0KIAogCS8qKgotCSAqIFRoaXMgbWVj
aGFuaXNtIHdpbGwgdHJhdmVyc2UgdGhlIHNwaW5lIG9mIHRoZSBwdWJsaWNhdGlvbiAod2hpY2gg
aXMKLQkgKiByZXByZXNlbnRpbmcgdGhlIHJlYWRpbmcgb3JkZXIpIGFuZCBwYXJzZSBlYWNoIGZp
bGUgZm9yIGluZm9ybWF0aW9uIHRoYXQKLQkgKiBjYW4gYmUgdXNlZCB0byBhc3NlbWJsZSBhIHRh
YmxlIG9mIGNvbnRlbnRzLgorCSAqIENyZWF0ZXMgYSBuZXcgRVBVQiBsb2dnaW5nIGFsbCBldmVu
dCB0byB0aGUgc3BlY2lmaWVkIGxvZ2dlci4KKwkgKi8KKwlwdWJsaWMgT1BTMlB1YmxpY2F0aW9u
KElMb2dnZXIgbG9nZ2VyKSB7CisJCXN1cGVyKGxvZ2dlcik7CisJCXNldHVwKCk7CisJfQorCisJ
LyoqCisJICogVGhpcyBtZWNoYW5pc20gd2lsbCB0cmF2ZXJzZSB0aGUgc3BpbmUgb2YgdGhlIHB1
YmxpY2F0aW9uICh3aGljaCBpcyByZXByZXNlbnRpbmcgdGhlIHJlYWRpbmcgb3JkZXIpIGFuZCBw
YXJzZQorCSAqIGVhY2ggZmlsZSBmb3IgaW5mb3JtYXRpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBh
c3NlbWJsZSBhIHRhYmxlIG9mIGNvbnRlbnRzLgogCSAqIAogCSAqIEB0aHJvd3MgU0FYRXhjZXB0
aW9uCiAJICogQHRocm93cyBJT0V4Y2VwdGlvbgpAQCAtMTE0LDE5ICsxMDcsMjAgQEAKIAkgKi8K
IAlAT3ZlcnJpZGUKIAlwcm90ZWN0ZWQgdm9pZCBnZW5lcmF0ZVRhYmxlT2ZDb250ZW50cygpIHRo
cm93cyBFeGNlcHRpb24geworCQlsb2coIkdlbmVyYXRpbmcgdGFibGUgb2YgY29udGVudHMgZm9y
IE9QUyIsIFNldmVyaXR5LklORk8sIGluZGVudCsrKTsKIAkJTmF2TWFwIG5hdk1hcCA9IE5DWEZh
Y3RvcnkuZUlOU1RBTkNFLmNyZWF0ZU5hdk1hcCgpOwogCQluY3hUT0Muc2V0TmF2TWFwKG5hdk1h
cCk7Ci0JCW5jeFRPQy5zZXRWZXJzaW9uKCIyMDA1LTEiKTsKKwkJbmN4VE9DLnNldFZlcnNpb24o
IjIwMDUtMSIpOyAvLyROT04tTkxTLTEkCiAJCS8vIENyZWF0ZSB0aGUgcmVxdWlyZWQgaGVhZCBl
bGVtZW50CiAJCUhlYWQgaGVhZCA9IE5DWEZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZUhlYWQoKTsK
IAkJbmN4VE9DLnNldEhlYWQoaGVhZCk7CiAJCU1ldGEgbWV0YSA9IE5DWEZhY3RvcnkuZUlOU1RB
TkNFLmNyZWF0ZU1ldGEoKTsKLQkJbWV0YS5zZXROYW1lKCJkdGI6dWlkIik7CisJCW1ldGEuc2V0
TmFtZSgiZHRiOnVpZCIpOyAvLyROT04tTkxTLTEkCiAJCW1ldGEuc2V0Q29udGVudChnZXRJZGVu
dGlmaWVyKCkuZ2V0TWl4ZWQoKS5nZXRWYWx1ZSgwKS50b1N0cmluZygpKTsKIAkJaGVhZC5nZXRN
ZXRhcygpLmFkZChtZXRhKTsKIAkJRG9jVGl0bGUgZG9jVGl0bGUgPSBOQ1hGYWN0b3J5LmVJTlNU
QU5DRS5jcmVhdGVEb2NUaXRsZSgpOwogCQlUZXh0IHRleHQgPSBOQ1hGYWN0b3J5LmVJTlNUQU5D
RS5jcmVhdGVUZXh0KCk7Ci0JCUZlYXR1cmVNYXBVdGlsLmFkZFRleHQodGV4dC5nZXRNaXhlZCgp
LCAiVGFibGUgb2YgY29udGVudHMiKTsKKwkJRmVhdHVyZU1hcFV0aWwuYWRkVGV4dCh0ZXh0Lmdl
dE1peGVkKCksICJUYWJsZSBvZiBjb250ZW50cyIpOyAvLyROT04tTkxTLTEkCiAJCWRvY1RpdGxl
LnNldFRleHQodGV4dCk7CiAJCW5jeFRPQy5zZXREb2NUaXRsZShkb2NUaXRsZSk7CiAJCWludCBw
bGF5T3JkZXIgPSAwOwpAQCAtMTQ2LDE0ICsxNDAsMjEgQEAKIAkJCWlmIChyZWZlcmVuY2VkSXRl
bSAhPSBudWxsICYmICFyZWZlcmVuY2VkSXRlbS5pc05vVG9jKCkpIHsKIAkJCQlGaWxlIGZpbGUg
PSBuZXcgRmlsZShyZWZlcmVuY2VkSXRlbS5nZXRGaWxlKCkpOwogCQkJCUZpbGVJbnB1dFN0cmVh
bSBmaXMgPSBuZXcgRmlsZUlucHV0U3RyZWFtKGZpbGUpOworCQkJCWxvZyhNZXNzYWdlRm9ybWF0
LmZvcm1hdCgiUGFyc2luZyB7MH0iLCByZWZlcmVuY2VkSXRlbS5nZXRIcmVmKCkpLCBTZXZlcml0
eS5WRVJCT1NFLCBpbmRlbnQpOwogCQkJCXBsYXlPcmRlciA9IFRPQ0dlbmVyYXRvci5wYXJzZShu
ZXcgSW5wdXRTb3VyY2UoZmlzKSwgcmVmZXJlbmNlZEl0ZW0uZ2V0SHJlZigpLCBuY3hUT0MsIHBs
YXlPcmRlcik7CiAJCQl9CiAJCX0KKwkJaW5kZW50LS07CiAJfQogCiAJQE92ZXJyaWRlCiAJcHVi
bGljIE9iamVjdCBnZXRUYWJsZU9mQ29udGVudHMoKSB7CiAJCXJldHVybiBuY3hUT0M7CisJfQor
CisJQE92ZXJyaWRlCisJcHJvdGVjdGVkIFN0cmluZyBnZXRWZXJzaW9uKCkgeworCQlyZXR1cm4g
IjIuMCI7IC8vJE5PTi1OTFMtMSQKIAl9CiAKIAlAT3ZlcnJpZGUKQEAgLTE2NiwxMyArMTY3LDEx
IEBACiAJfQogCiAJLyoqCi0JICogUmVnaXN0ZXJzIGEgbmV3IHJlc291cmNlIGZhY3RvcnkgZm9y
IE5DWCBkYXRhIHN0cnVjdHVyZXMuIFRoaXMgaXMKLQkgKiBub3JtYWxseSBkb25lIHRocm91Z2gg
RWNsaXBzZSBleHRlbnNpb24gcG9pbnRzIGJ1dCB3ZSBhbHNvIG5lZWQgdG8gYmUKLQkgKiBhYmxl
IHRvIGNyZWF0ZSB0aGlzIGZhY3Rvcnkgd2l0aG91dCB0aGUgRWNsaXBzZSBydW50aW1lLgorCSAq
IFJlZ2lzdGVycyBhIG5ldyByZXNvdXJjZSBmYWN0b3J5IGZvciBOQ1ggZGF0YSBzdHJ1Y3R1cmVz
LiBUaGlzIGlzIG5vcm1hbGx5IGRvbmUgdGhyb3VnaCBFY2xpcHNlIGV4dGVuc2lvbiBwb2ludHMK
KwkgKiBidXQgd2UgYWxzbyBuZWVkIHRvIGJlIGFibGUgdG8gY3JlYXRlIHRoaXMgZmFjdG9yeSB3
aXRob3V0IHRoZSBFY2xpcHNlIHJ1bnRpbWUuCiAJICovCiAJcHJpdmF0ZSB2b2lkIHJlZ2lzdGVy
TkNYUmVzb3VyY2VGYWN0b3J5KCkgewotCQkvLyBSZWdpc3RlciBwYWNrYWdlIHNvIHRoYXQgaXQg
aXMgYXZhaWxhYmxlIGV2ZW4gd2l0aG91dCB0aGUgRWNsaXBzZQotCQkvLyBydW50aW1lCisJCS8v
IFJlZ2lzdGVyIHBhY2thZ2Ugc28gdGhhdCBpdCBpcyBhdmFpbGFibGUgZXZlbiB3aXRob3V0IHRo
ZSBFY2xpcHNlIHJ1bnRpbWUKIAkJQFN1cHByZXNzV2FybmluZ3MoInVudXNlZCIpCiAJCU5DWFBh
Y2thZ2UgcGFja2FnZUluc3RhbmNlID0gTkNYUGFja2FnZS5lSU5TVEFOQ0U7CiAKQEAgLTIwMiw4
ICsyMDEsOCBAQAogCQkJCQkJc2F2ZU9wdGlvbnMucHV0KFhNTFJlc291cmNlLk9QVElPTl9FTkNP
RElORywgWE1MX0VOQ09ESU5HKTsKIAkJCQkJCS8vIERvIG5vdCBkb3dubG9hZCBhbnkgZXh0ZXJu
YWwgRFREcy4KIAkJCQkJCU1hcDxTdHJpbmcsIE9iamVjdD4gcGFyc2VyRmVhdHVyZXMgPSBuZXcg
SGFzaE1hcDxTdHJpbmcsIE9iamVjdD4oKTsKLQkJCQkJCXBhcnNlckZlYXR1cmVzLnB1dCgiaHR0
cDovL3htbC5vcmcvc2F4L2ZlYXR1cmVzL3ZhbGlkYXRpb24iLCBCb29sZWFuLkZBTFNFKTsKLQkJ
CQkJCXBhcnNlckZlYXR1cmVzLnB1dCgiaHR0cDovL2FwYWNoZS5vcmcveG1sL2ZlYXR1cmVzL25v
bnZhbGlkYXRpbmcvbG9hZC1leHRlcm5hbC1kdGQiLAorCQkJCQkJcGFyc2VyRmVhdHVyZXMucHV0
KCJodHRwOi8veG1sLm9yZy9zYXgvZmVhdHVyZXMvdmFsaWRhdGlvbiIsIEJvb2xlYW4uRkFMU0Up
OyAvLyROT04tTkxTLTEkCisJCQkJCQlwYXJzZXJGZWF0dXJlcy5wdXQoImh0dHA6Ly9hcGFjaGUu
b3JnL3htbC9mZWF0dXJlcy9ub252YWxpZGF0aW5nL2xvYWQtZXh0ZXJuYWwtZHRkIiwgLy8kTk9O
LU5MUy0xJAogCQkJCQkJCQlCb29sZWFuLkZBTFNFKTsKIAkJCQkJCWxvYWRPcHRpb25zLnB1dChY
TUxSZXNvdXJjZS5PUFRJT05fUEFSU0VSX0ZFQVRVUkVTLCBwYXJzZXJGZWF0dXJlcyk7CiAJCQkJ
CQlyZXR1cm4geG1pUmVzb3VyY2U7CkBAIC0yMTksMTIgKzIxOCwzMSBAQAogCQlJdGVtIGl0ZW0g
PSBhZGRJdGVtKG9wZlBhY2thZ2UuZ2V0U3BpbmUoKS5nZXRUb2MoKSwgbnVsbCwgbmN4RmlsZSwg
bnVsbCwgTUlNRVRZUEVfTkNYLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsKIAkJLy8gVGhlIHRhYmxl
IG9mIGNvbnRlbnRzIGZpbGUgbXVzdCBiZSBmaXJzdC4KIAkJb3BmUGFja2FnZS5nZXRNYW5pZmVz
dCgpLmdldEl0ZW1zKCkubW92ZSgwLCBpdGVtKTsKKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0
KCJVc2luZyB0YWJsZSBvZiBjb250ZW50cyBmaWxlIHswfSBmb3IgT1BTIiwgbmV3IE9iamVjdFtd
IHsgbmN4RmlsZS5nZXROYW1lKCkgfSksIC8vJE5PTi1OTFMtMSQKKwkJCQlTZXZlcml0eS5WRVJC
T1NFLCBpbmRlbnQpOworCX0KIAorCXByaXZhdGUgdm9pZCBzZXR1cCgpIHsKKwkJb3BmUGFja2Fn
ZS5zZXRWZXJzaW9uKGdldFZlcnNpb24oKSk7CisJCW5jeFRPQyA9IE5DWEZhY3RvcnkuZUlOU1RB
TkNFLmNyZWF0ZU5jeCgpOworCQlNZXRhZGF0YSBvcGZNZXRhZGF0YSA9IE9QRkZhY3RvcnkuZUlO
U1RBTkNFLmNyZWF0ZU1ldGFkYXRhKCk7CisJCW9wZlBhY2thZ2Uuc2V0TWV0YWRhdGEob3BmTWV0
YWRhdGEpOworCQlHdWlkZSBvcGZHdWlkZSA9IE9QRkZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZUd1
aWRlKCk7CisJCW9wZlBhY2thZ2Uuc2V0R3VpZGUob3BmR3VpZGUpOworCQlNYW5pZmVzdCBvcGZN
YW5pZmVzdCA9IE9QRkZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZU1hbmlmZXN0KCk7CisJCW9wZlBh
Y2thZ2Uuc2V0TWFuaWZlc3Qob3BmTWFuaWZlc3QpOworCQkvLyBDcmVhdGUgdGhlIHNwaW5lIGFu
ZCBzZXQgYSByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIG9mIGNvbnRlbnRzCisJCS8vIGl0ZW0gd2hp
Y2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgbWFuaWZlc3Qgb24gYSBsYXRlciBzdGFnZS4KKwkJU3Bp
bmUgb3BmU3BpbmUgPSBPUEZGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVTcGluZSgpOworCQlvcGZT
cGluZS5zZXRUb2MoVEFCTEVfT0ZfQ09OVEVOVFNfSUQpOworCQlvcGZQYWNrYWdlLnNldFNwaW5l
KG9wZlNwaW5lKTsKKworCQlyZWdpc3Rlck5DWFJlc291cmNlRmFjdG9yeSgpOworCQlvcGZQYWNr
YWdlLnNldEdlbmVyYXRlVGFibGVPZkNvbnRlbnRzKHRydWUpOwogCX0KIAogCS8qKgotCSAqIFRo
aXMgbWV0aG9kIHdpbGwgb25seSB2YWxpZGF0ZSBpdGVtcyB0aGF0IGFyZSBpbiB0aGUgc3BpbmUs
IG9yIGluIHJlYWRpbmcKLQkgKiBvcmRlci4KKwkgKiBUaGlzIG1ldGhvZCB3aWxsIG9ubHkgdmFs
aWRhdGUgaXRlbXMgdGhhdCBhcmUgaW4gdGhlIHNwaW5lLCBvciBpbiByZWFkaW5nIG9yZGVyLgog
CSAqLwogCUBPdmVycmlkZQogCXByb3RlY3RlZCBMaXN0PFZhbGlkYXRpb25NZXNzYWdlPiB2YWxp
ZGF0ZUNvbnRlbnRzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CkBAIC0yNTEsMTEgKzI2OSwxMCBAQAog
CX0KIAogCS8qKgotCSAqIFdyaXRlcyB0aGUgdGFibGUgb2YgY29udGVudHMgZmlsZSBpbiB0aGUg
c3BlY2lmaWVkIGZvbGRlciB1c2luZyB0aGUgTkNYCi0JICogZm9ybWF0LiBJZiBhIHRhYmxlIG9m
IGNvbnRlbnRzIGZpbGUgaGFzIG5vdCBiZWVuIHNwZWNpZmllZCBhbiBlbXB0eSBvbmUKLQkgKiB3
aWxsIGJlIGNyZWF0ZWQgKHNpbmNlIGl0IGlzIHJlcXVpcmVkIHRvIGhhdmUgb25lKS4gSWYgaW4g
YWRkaXRpb24gaXQgaGFzCi0JICogYmVlbiBzcGVjaWZpZWQgdGhhdCB0aGUgdGFibGUgb2YgY29u
dGVudHMgc2hvdWxkIGJlIGNyZWF0ZWQsIHRoZSBjb250ZW50Ci0JICogZmlsZXMgd2lsbCBiZSBw
YXJzZWQgYW5kIGEgVE9DIHdpbGwgYmUgZ2VuZXJhdGVkLgorCSAqIFdyaXRlcyB0aGUgdGFibGUg
b2YgY29udGVudHMgZmlsZSBpbiB0aGUgc3BlY2lmaWVkIGZvbGRlciB1c2luZyB0aGUgTkNYIGZv
cm1hdC4gSWYgYSB0YWJsZSBvZiBjb250ZW50cyBmaWxlIGhhcworCSAqIG5vdCBiZWVuIHNwZWNp
ZmllZCBhbiBlbXB0eSBvbmUgd2lsbCBiZSBjcmVhdGVkIChzaW5jZSBpdCBpcyByZXF1aXJlZCB0
byBoYXZlIG9uZSkuIElmIGluIGFkZGl0aW9uIGl0IGhhcyBiZWVuCisJICogc3BlY2lmaWVkIHRo
YXQgdGhlIHRhYmxlIG9mIGNvbnRlbnRzIHNob3VsZCBiZSBjcmVhdGVkLCB0aGUgY29udGVudCBm
aWxlcyB3aWxsIGJlIHBhcnNlZCBhbmQgYSBUT0Mgd2lsbCBiZQorCSAqIGdlbmVyYXRlZC4KIAkg
KiAKIAkgKiBAcGFyYW0gb2VwYnNGb2xkZXIKIAkgKiAgICAgICAgICAgIHRoZSBmb2xkZXIgdG8g
Y3JlYXRlIHRoZSBOQ1ggZmlsZSBpbgpkaWZmIC0tZ2l0IGEvb3JnLmVjbGlwc2UubXlseW4uZG9j
cy5lcHViLmNvcmUvc3JjL29yZy9lY2xpcHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL09QU1B1Ymxp
Y2F0aW9uLmphdmEgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2Vj
bGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvT1BTUHVibGljYXRpb24uamF2YQppbmRleCA2YjY2
OTE2Li5hMjM4ZTMxIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29y
ZS9zcmMvb3JnL2VjbGlwc2UvbXlseW4vZG9jcy9lcHViL2NvcmUvT1BTUHVibGljYXRpb24uamF2
YQorKysgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3JnL2VjbGlwc2Uv
bXlseW4vZG9jcy9lcHViL2NvcmUvT1BTUHVibGljYXRpb24uamF2YQpAQCAtNywxMyArNywxNCBA
QAogICogaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWwKICAqIAogICog
Q29udHJpYnV0b3JzOiAKLSAqIFRvcmtpbGQgVS4gUmVzaGVpbSAtIGluaXRpYWwgQVBJIGFuZCBp
bXBsZW1lbnRhdGlvbgorICogICBUb3JraWxkIFUuIFJlc2hlaW0gLSBpbml0aWFsIEFQSSBhbmQg
aW1wbGVtZW50YXRpb24KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogcGFja2FnZSBvcmcuZWNs
aXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZTsKIAogaW1wb3J0IGphdmEuaW8uRmlsZTsKIGltcG9y
dCBqYXZhLmlvLkZpbGVXcml0ZXI7CiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKK2ltcG9y
dCBqYXZhLnRleHQuTWVzc2FnZUZvcm1hdDsKIGltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZv
cm1hdDsKIGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwogaW1wb3J0IGphdmEudXRpbC5IYXNo
TWFwOwpAQCAtNDAsNiArNDEsNyBAQAogaW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5lY29yZS54bWku
WE1MSGVscGVyOwogaW1wb3J0IG9yZy5lY2xpcHNlLmVtZi5lY29yZS54bWkuWE1MUmVzb3VyY2U7
CiBpbXBvcnQgb3JnLmVjbGlwc2UuZW1mLmVjb3JlLnhtaS5pbXBsLlhNTFJlc291cmNlRmFjdG9y
eUltcGw7CitpbXBvcnQgb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUuSUxvZ2dlci5T
ZXZlcml0eTsKIGltcG9ydCBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuZGMuQ29udHJpYnV0
b3I7CiBpbXBvcnQgb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmRjLkNvdmVyYWdlOwogaW1w
b3J0IG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5kYy5DcmVhdG9yOwpAQCAtNzMsMTIgKzc1
LDEwIEBACiBpbXBvcnQgb3JnLnhtbC5zYXguU0FYRXhjZXB0aW9uOwogCiAvKioKLSAqIFRoaXMg
dHlwZSByZXByZXNlbnRzIG9uZSA8aT5PUFMgcHVibGljYXRpb248L2k+LiBUaGlzIGluY2x1ZGVz
IHRoZSA8aT5PUEYKLSAqIHBhY2thZ2UgZG9jdW1lbnQ8L2k+IGFuZCA8aT5PUFMgY29udGVudCBk
b2N1bWVudHM8L2k+LiBJdCBtYWludGFpbnMgYSBkYXRhCi0gKiBzdHJ1Y3R1cmUgcmVwcmVzZW50
aW5nIHRoZSBlbnRpcmUgcHVibGljYXRpb24gYW5kIEFQSSBmb3IgYnVpbGRpbmcgaXQuCisgKiBU
aGlzIHR5cGUgcmVwcmVzZW50cyBvbmUgPGk+T1BTIHB1YmxpY2F0aW9uPC9pPi4gVGhpcyBpbmNs
dWRlcyB0aGUgPGk+T1BGIHBhY2thZ2UgZG9jdW1lbnQ8L2k+IGFuZCA8aT5PUFMgY29udGVudAor
ICogZG9jdW1lbnRzPC9pPi4gSXQgbWFpbnRhaW5zIGEgZGF0YSBzdHJ1Y3R1cmUgcmVwcmVzZW50
aW5nIHRoZSBlbnRpcmUgcHVibGljYXRpb24gYW5kIEFQSSBmb3IgYnVpbGRpbmcgaXQuCiAgKiA8
cD4KLSAqIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBBUEkgaXMgcHJvdmlzaW9uYWwgYW5kIHNob3Vs
ZCBub3QgeWV0IGJlIHVzZWQgdG8gYnVpbGQKLSAqIGFwcGxpY2F0aW9ucy4KKyAqIFBsZWFzZSBu
b3RlIHRoYXQgdGhpcyBBUEkgaXMgcHJvdmlzaW9uYWwgYW5kIHNob3VsZCBub3QgeWV0IGJlIHVz
ZWQgdG8gYnVpbGQgYXBwbGljYXRpb25zLgogICogPC9wPgogICogCiAgKiBAYXV0aG9yIFRvcmtp
bGQgVS4gUmVzaGVpbQpAQCAtODksMjUgKzg5LDMwIEBACiAJLy8gKiBEbyBub3QgYWN0dWFsbHkg
ZG8gYW55dGhpbmcgYmVmb3JlIHRoZSBmaW5hbCBhc3NlbWJsZQogCiAJLyoqIERlZmF1bHQgaWRl
bnRpZmllciBmb3IgdGhlIGNvdmVyIHBhZ2UgKi8KLQlwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJp
bmcgQ09WRVJfSUQgPSAiY292ZXIiOworCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBDT1ZF
Ul9JRCA9ICJjb3ZlciI7IC8vJE5PTi1OTFMtMSQKIAogCS8qKiBQdWJsaWNhdGlvbiBpZGVudGlm
aWVyIGZvciB0aGUgY292ZXIgaW1hZ2UgaXRlbSAqLwotCXB1YmxpYyBzdGF0aWMgZmluYWwgU3Ry
aW5nIENPVkVSX0lNQUdFX0lEID0gImNvdmVyLWltYWdlIjsKKwlwdWJsaWMgc3RhdGljIGZpbmFs
IFN0cmluZyBDT1ZFUl9JTUFHRV9JRCA9ICJjb3Zlci1pbWFnZSI7IC8vJE5PTi1OTFMtMSQKIAot
CXByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIENSRUFUSU9OX0RBVEVfSUQgPSAiY3JlYXRp
b24iOworCXByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIENSRUFUSU9OX0RBVEVfSUQgPSAi
Y3JlYXRpb24iOyAvLyROT04tTkxTLTEkCiAKLQlwdWJsaWMgZmluYWwgc3RhdGljIFN0cmluZyBN
SU1FVFlQRV9DU1MgPSAidGV4dC9jc3MiOworCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBF
TVBUWV9TVFJJTkcgPSAiIjsgLy8kTk9OLU5MUy0xJAogCi0JcHVibGljIHN0YXRpYyBmaW5hbCBT
dHJpbmcgTUlNRVRZUEVfRVBVQiA9ICJhcHBsaWNhdGlvbi9lcHViK3ppcCI7CisJcHVibGljIGZp
bmFsIHN0YXRpYyBTdHJpbmcgTUlNRVRZUEVfQ1NTID0gInRleHQvY3NzIjsgLy8kTk9OLU5MUy0x
JAogCi0JcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgTUlNRVRZUEVfWEhUTUwgPSAiYXBwbGlj
YXRpb24veGh0bWwreG1sIjsKKwlwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBNSU1FVFlQRV9F
UFVCID0gImFwcGxpY2F0aW9uL2VwdWIremlwIjsgLy8kTk9OLU5MUy0xJAogCi0JcHJpdmF0ZSBz
dGF0aWMgZmluYWwgU3RyaW5nIE9QRl9GSUxFX1NVRkZJWCA9ICJvcGYiOworCXB1YmxpYyBzdGF0
aWMgZmluYWwgU3RyaW5nIE1JTUVUWVBFX1hIVE1MID0gImFwcGxpY2F0aW9uL3hodG1sK3htbCI7
IC8vJE5PTi1OTFMtMSQKIAotCXByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIFVVSURfU0NI
RU1FID0gInV1aWQiOworCXByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBPUEZfRklMRV9TVUZG
SVggPSAib3BmIjsgLy8kTk9OLU5MUy0xJAorCisJcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJp
bmcgVVVJRF9TQ0hFTUUgPSAidXVpZCI7IC8vJE5PTi1OTFMtMSQKIAogCS8qKiBUaGUgZW5jb2Rp
bmcgdG8gdXNlIGluIFhNTCBmaWxlcyAqLwotCXByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5n
IFhNTF9FTkNPRElORyA9ICJVVEYtOCI7CisJcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcg
WE1MX0VOQ09ESU5HID0gIlVURi04IjsgLy8kTk9OLU5MUy0xJAorCisJLyoqIEluZGVudGF0aW9u
IGxldmVsIHVzZWQgd2hlbiBsb2dnaW5nICovCisJcHJvdGVjdGVkIGludCBpbmRlbnQgPSAwOwog
CiAJLyoqCiAJICogUmV0dXJucyBhbiBFUFVCIHZlcnNpb24gMi4wLjEgaW5zdGFuY2UuCkBAIC0x
MTcsNiArMTIyLDEyIEBACiAJcHVibGljIHN0YXRpYyBPUFNQdWJsaWNhdGlvbiBnZXRWZXJzaW9u
Mkluc3RhbmNlKCkgewogCQlyZXR1cm4gbmV3IE9QUzJQdWJsaWNhdGlvbigpOwogCX0KKworCXB1
YmxpYyBzdGF0aWMgT1BTUHVibGljYXRpb24gZ2V0VmVyc2lvbjJJbnN0YW5jZShJTG9nZ2VyIGxv
Z2dlcikgeworCQlyZXR1cm4gbmV3IE9QUzJQdWJsaWNhdGlvbihsb2dnZXIpOworCX0KKworCXBy
b3RlY3RlZCBJTG9nZ2VyIGxvZ2dlcjsKIAogCS8qKiBMaXN0IG9mIHZhbGlkYXRpb24gbWVzc2Fn
ZXMgKi8KIAlwdWJsaWMgTGlzdDxWYWxpZGF0aW9uTWVzc2FnZT4gbWVzc2FnZXM7CkBAIC0xMzIs
NiArMTQzLDEyIEBACiAJCXJlZ2lzdGVyT1BGUmVzb3VyY2VGYWN0b3J5KCk7CiAJfQogCisJcHJv
dGVjdGVkIE9QU1B1YmxpY2F0aW9uKElMb2dnZXIgbG9nZ2VyKSB7CisJCXRoaXMoKTsKKwkJdGhp
cy5sb2dnZXIgPSBsb2dnZXI7CisJCWxvZyhNZXNzYWdlRm9ybWF0LmZvcm1hdCgiQ29tcG9zaW5n
IGEgdmVyc2lvbiB7MH0gT1BTIiwgZ2V0VmVyc2lvbigpKSwgU2V2ZXJpdHkuSU5GTywgaW5kZW50
KyspOworCX0KKwogCS8qKgogCSAqIEFkZHMgZGF0YSB0byB0aGUgcHVibGljYXRpb24gdGhhdCB3
ZSBhbHdheXMgd2FudCB0byBiZSBwcmVzZW50LgogCSAqIDx1bD4KQEAgLTE0NCwxNCArMTYxLDE1
IEBACiAJICogPGxpPlRoZSBwdWJsaWNhdGlvbiBmb3JtYXQgaWYgbm9uZSBoYXMgYmVlbiBzcGVj
aWZpZWQuPC9saT4KIAkgKiA8L3VsPgogCSAqLwotCXByaXZhdGUgdm9pZCBhZGRDb21wdWxzb3J5
RGF0YSgpIHsKKwlwcm90ZWN0ZWQgdm9pZCBhZGRDb21wdWxzb3J5RGF0YSgpIHsKKwkJbG9nKE1l
c3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgY29tcHVsc29yeSBkYXRhIiwgZ2V0VmVyc2lvbigp
KSwgU2V2ZXJpdHkuVkVSQk9TRSwgaW5kZW50KyspOwogCQkvLyBDcmVhdGlvbiBkYXRlIGlzIGFs
d2F5cyB3aGVuIHdlIGJ1aWxkCiAJCWFkZERhdGUobnVsbCwgbmV3IGphdmEudXRpbC5EYXRlKFN5
c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKSwgQ1JFQVRJT05fREFURV9JRCk7CiAJCS8vIE1ha2Ug
aXQgY2xlYXIgd2hlcmUgdGhlIHRvb2xpbmcgY29tZXMgZnJvbQotCQlhZGRDb250cmlidXRvcihu
dWxsLCBudWxsLCAiRWNsaXBzZSBNeWx5biBEb2NzIHByb2plY3QiLCBSb2xlLlJFREFDVE9SLCBu
dWxsKTsKKwkJYWRkQ29udHJpYnV0b3IobnVsbCwgbnVsbCwgIkVjbGlwc2UgTXlseW4gRG9jcyBw
cm9qZWN0IiwgUm9sZS5SRURBQ1RPUiwgbnVsbCk7IC8vJE5PTi1OTFMtMSQKIAkJLy8gR2VuZXJh
dGUgYW4gdW5pcXVlIGlkZW50aWZpZXIKIAkJaWYgKGdldElkZW50aWZpZXIoKSA9PSBudWxsKSB7
Ci0JCQlhZGRJZGVudGlmaWVyKFVVSURfU0NIRU1FLCAidXVpZCIsICJ1cm46dXVpZCIgKyBVVUlE
LnJhbmRvbVVVSUQoKS50b1N0cmluZygpKTsKKwkJCWFkZElkZW50aWZpZXIoVVVJRF9TQ0hFTUUs
ICJ1dWlkIiwgInVybjp1dWlkIiArIFVVSUQucmFuZG9tVVVJRCgpLnRvU3RyaW5nKCkpOyAvLyRO
T04tTkxTLTEkIC8vJE5PTi1OTFMtMiQKIAkJCXNldElkZW50aWZpZXJJZChVVUlEX1NDSEVNRSk7
CiAJCX0KIAkJLy8gQWRkIGVtcHR5IHN1YmplY3QKQEAgLTE2NCwxMiArMTgyLDEzIEBACiAJCX0K
IAkJLy8gQWRkIGR1bW15IHRpdGxlCiAJCWlmIChvcGZQYWNrYWdlLmdldE1ldGFkYXRhKCkuZ2V0
VGl0bGVzKCkuaXNFbXB0eSgpKSB7Ci0JCQlhZGRUaXRsZShudWxsLCBudWxsLCAiTm8gdGl0bGUg
c3BlY2lmaWVkIik7CisJCQlhZGRUaXRsZShudWxsLCBudWxsLCAiTm8gdGl0bGUgc3BlY2lmaWVk
Iik7IC8vJE5PTi1OTFMtMSQKIAkJfQogCQkvLyBTZXQgdGhlIHB1YmxpY2F0aW9uIGZvcm1hdAog
CQlpZiAob3BmUGFja2FnZS5nZXRNZXRhZGF0YSgpLmdldEZvcm1hdHMoKS5pc0VtcHR5KCkpIHsK
IAkJCWFkZEZvcm1hdChudWxsLCBNSU1FVFlQRV9FUFVCKTsKIAkJfQorCQlpbmRlbnQtLTsKIAl9
CiAKIAkvKioKQEAgLTE4OCw2ICsyMDcsOCBAQAogCSAqIEByZXR1cm4gdGhlIG5ldyBjcmVhdG9y
CiAJICovCiAJcHVibGljIENvbnRyaWJ1dG9yIGFkZENvbnRyaWJ1dG9yKFN0cmluZyBpZCwgTG9j
YWxlIGxhbmcsIFN0cmluZyBuYW1lLCBSb2xlIHJvbGUsIFN0cmluZyBmaWxlQXMpIHsKKwkJbG9n
KE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgY29udHJpYnV0b3IgXCJ7MH1cIiBpbiByb2xl
IFwiezF9XCIgZm9yIHRoZSB7Mn0gbG9jYWxlIiwgbmFtZSwgcm9sZSwKKwkJCQlsYW5nID09IG51
bGwgPyAiZGVmYXVsdCIgOiBsYW5nLmdldERpc3BsYXlOYW1lKCkpLCBTZXZlcml0eS5WRVJCT1NF
LCBpbmRlbnQpOwogCQlDb250cmlidXRvciBkYyA9IERDRmFjdG9yeS5lSU5TVEFOQ0UuY3JlYXRl
Q29udHJpYnV0b3IoKTsKIAkJc2V0RGNMb2NhbGl6ZWQoZGMsIGlkLCBsYW5nLCBuYW1lKTsKIAkJ
aWYgKHJvbGUgIT0gbnVsbCkgewpAQCAtMjEzLDcgKzIzNCw3IEBACiAJICovCiAJcHVibGljIENv
dmVyYWdlIGFkZENvdmVyYWdlKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2YWx1ZSkg
ewogCQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4
Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IElsbGVn
YWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyROT04t
TkxTLTEkCiAJCX0KIAkJQ292ZXJhZ2UgZGMgPSBEQ0ZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZUNv
dmVyYWdlKCk7CiAJCXNldERjTG9jYWxpemVkKGRjLCBpZCwgbGFuZywgdmFsdWUpOwpAQCAtMjM3
LDYgKzI1OCw5IEBACiAJICogQHJldHVybiB0aGUgbmV3IGNyZWF0b3IKIAkgKi8KIAlwdWJsaWMg
Q3JlYXRvciBhZGRDcmVhdG9yKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyBuYW1lLCBS
b2xlIHJvbGUsIFN0cmluZyBmaWxlQXMpIHsKKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJB
ZGRpbmcgY3JlYXRvciBcInswfVwiIGluIHJvbGUgXCJ7MX1cIiBmb3IgdGhlIHsyfSBsb2NhbGUi
LCBuYW1lLCByb2xlLCBsYW5nID09IG51bGwKKwkJCQk/ICJkZWZhdWx0IgorCQkJCTogbGFuZy5n
ZXREaXNwbGF5TmFtZSgpKSwgU2V2ZXJpdHkuVkVSQk9TRSwgaW5kZW50KTsKIAkJQ3JlYXRvciBk
YyA9IERDRmFjdG9yeS5lSU5TVEFOQ0UuY3JlYXRlQ3JlYXRvcigpOwogCQlzZXREY0xvY2FsaXpl
ZChkYywgaWQsIGxhbmcsIG5hbWUpOwogCQlpZiAocm9sZSAhPSBudWxsKSB7CkBAIC0yNTAsOSAr
Mjc0LDggQEAKIAl9CiAKIAkvKioKLQkgKiBBZGRzIGEgbmV3IGRhdGUgdG8gdGhlIHB1YmxpY2F0
aW9uLiBUaGUgZ2l2ZW4gaW5zdGFuY2Ugd2lsbCBiZQotCSAqIHJlcHJlc2VudGVkIGluIGEgZm9y
bWF0IGRlZmluZWQgYnkgIkRhdGUgYW5kIFRpbWUgRm9ybWF0cyIgYXQKLQkgKiBodHRwOi8vd3d3
LnczLm9yZy9UUi9OT1RFLWRhdGV0aW1lIGFuZCBieSBJU08gODYwMSBvbiB3aGljaCBpdCBpcyBi
YXNlZC4KKwkgKiBBZGRzIGEgbmV3IGRhdGUgdG8gdGhlIHB1YmxpY2F0aW9uLiBUaGUgZ2l2ZW4g
aW5zdGFuY2Ugd2lsbCBiZSByZXByZXNlbnRlZCBpbiBhIGZvcm1hdCBkZWZpbmVkIGJ5CisJICog
IkRhdGUgYW5kIFRpbWUgRm9ybWF0cyIgYXQgaHR0cDovL3d3dy53My5vcmcvVFIvTk9URS1kYXRl
dGltZSBhbmQgYnkgSVNPIDg2MDEgb24gd2hpY2ggaXQgaXMgYmFzZWQuCiAJICogCiAJICogQHBh
cmFtIGlkCiAJICogICAgICAgICAgICBvcHRpb25hbCBpZGVudGlmaWVyCkBAIC0yNjQsOCArMjg3
LDggQEAKIAkgKiBAc2VlICNhZGREYXRlKFN0cmluZywgU3RyaW5nLCBTdHJpbmcpCiAJICovCiAJ
cHVibGljIERhdGUgYWRkRGF0ZShTdHJpbmcgaWQsIGphdmEudXRpbC5EYXRlIGRhdGUsIFN0cmlu
ZyBldmVudCkgewotCQlTaW1wbGVEYXRlRm9ybWF0IGRmID0gbmV3IFNpbXBsZURhdGVGb3JtYXQo
Inl5eXktTU0tZGQiKTsKLQkJVGltZVpvbmUgdHogPSBUaW1lWm9uZS5nZXRUaW1lWm9uZSgiVVRD
Iik7CisJCVNpbXBsZURhdGVGb3JtYXQgZGYgPSBuZXcgU2ltcGxlRGF0ZUZvcm1hdCgieXl5eS1N
TS1kZCIpOyAvLyROT04tTkxTLTEkCisJCVRpbWVab25lIHR6ID0gVGltZVpvbmUuZ2V0VGltZVpv
bmUoIlVUQyIpOyAvLyROT04tTkxTLTEkCiAJCWRmLnNldFRpbWVab25lKHR6KTsKIAkJRGF0ZSBk
YyA9IERDRmFjdG9yeS5lSU5TVEFOQ0UuY3JlYXRlRGF0ZSgpOwogCQlzZXREY0NvbW1vbihkYywg
aWQsIGRmLmZvcm1hdChkYXRlKSk7CkBAIC0yNzgsMTIgKzMwMSwxMCBAQAogCiAJLyoqCiAJICog
RGF0ZSBvZiBwdWJsaWNhdGlvbiwgaW4gdGhlIGZvcm1hdCBkZWZpbmVkIGJ5IHRoZSBXM0Mgc3Bl
Y2lmaWNhdGlvbgotCSAqICI8YSBocmVmPSJodHRwOi8vd3d3LnczLm9yZy9UUi9OT1RFLWRhdGV0
aW1lIj5EYXRlIGFuZCBUaW1lIEZvcm1hdHM8L2E+IgotCSAqIGFuZCBieSBJU08gODYwMS4gSW4g
cGFydGljdWxhciwgZGF0ZXMgd2l0aG91dCB0aW1lcyBtdXN0IGJlIHJlcHJlc2VudGVkCi0JICog
aW4gdGhlIGZvcm0gWVlZWVstTU1bLUREXV06IGEgcmVxdWlyZWQgNC1kaWdpdCB5ZWFyLCBhbiBv
cHRpb25hbCAyLWRpZ2l0Ci0JICogbW9udGgsIGFuZCBpZiB0aGUgbW9udGggaXMgZ2l2ZW4sIGFu
IG9wdGlvbmFsIDItZGlnaXQgZGF5IG9mIG1vbnRoLiBUaGUKLQkgKiBldmVudCBhdHRyaWJ1dGUg
aXMgb3B0aW9uYWwsIHBvc3NpYmxlIHZhbHVlcyBtYXkgaW5jbHVkZTogImNyZWF0aW9uIiwKLQkg
KiAicHVibGljYXRpb24iLCBhbmQgIm1vZGlmaWNhdGlvbiIuCisJICogIjxhIGhyZWY9Imh0dHA6
Ly93d3cudzMub3JnL1RSL05PVEUtZGF0ZXRpbWUiPkRhdGUgYW5kIFRpbWUgRm9ybWF0czwvYT4i
IGFuZCBieSBJU08gODYwMS4gSW4gcGFydGljdWxhciwgZGF0ZXMKKwkgKiB3aXRob3V0IHRpbWVz
IG11c3QgYmUgcmVwcmVzZW50ZWQgaW4gdGhlIGZvcm0gWVlZWVstTU1bLUREXV06IGEgcmVxdWly
ZWQgNC1kaWdpdCB5ZWFyLCBhbiBvcHRpb25hbCAyLWRpZ2l0IG1vbnRoLAorCSAqIGFuZCBpZiB0
aGUgbW9udGggaXMgZ2l2ZW4sIGFuIG9wdGlvbmFsIDItZGlnaXQgZGF5IG9mIG1vbnRoLiBUaGUg
ZXZlbnQgYXR0cmlidXRlIGlzIG9wdGlvbmFsLCBwb3NzaWJsZSB2YWx1ZXMgbWF5CisJICogaW5j
bHVkZTogImNyZWF0aW9uIiwgInB1YmxpY2F0aW9uIiwgYW5kICJtb2RpZmljYXRpb24iLgogCSAq
IAogCSAqIEBwYXJhbSB2YWx1ZQogCSAqICAgICAgICAgICAgdGhlIGRhdGUgc3RyaW5nCkBAIC0y
OTMsNyArMzE0LDcgQEAKIAkgKi8KIAlwdWJsaWMgRGF0ZSBhZGREYXRlKFN0cmluZyBpZCwgU3Ry
aW5nIHZhbHVlLCBTdHJpbmcgZXZlbnQpIHsKIAkJaWYgKHZhbHVlID09IG51bGwpIHsKLQkJCXRo
cm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkEgdmFsdWUgbXVzdCBiZSBzcGVjaWZp
ZWQiKTsKKwkJCXRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkEgdmFsdWUgbXVz
dCBiZSBzcGVjaWZpZWQiKTsgLy8kTk9OLU5MUy0xJAogCQl9CiAJCURhdGUgZGMgPSBEQ0ZhY3Rv
cnkuZUlOU1RBTkNFLmNyZWF0ZURhdGUoKTsKIAkJc2V0RGNDb21tb24oZGMsIGlkLCB2YWx1ZSk7
CkBAIC0zMTcsOCArMzM4LDEwIEBACiAJICovCiAJcHVibGljIERlc2NyaXB0aW9uIGFkZERlc2Ny
aXB0aW9uKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2YWx1ZSkgewogCQlpZiAodmFs
dWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2
YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4
Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyROT04tTkxTLTEkCiAJCX0K
KwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgZGVzY3JpcHRpb24gXCJ7MH1cIiBm
b3IgezF9IGxvY2FsZSIsIHZhbHVlLCBsYW5nID09IG51bGwgPyAiZGVmYXVsdCIgOiBsYW5nKSwK
KwkJCQlTZXZlcml0eS5WRVJCT1NFLCBpbmRlbnQpOwogCQlEZXNjcmlwdGlvbiBkYyA9IERDRmFj
dG9yeS5lSU5TVEFOQ0UuY3JlYXRlRGVzY3JpcHRpb24oKTsKIAkJc2V0RGNMb2NhbGl6ZWQoZGMs
IGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9wZlBhY2thZ2UuZ2V0TWV0YWRhdGEoKS5nZXREZXNjcmlw
dGlvbnMoKS5hZGQoZGMpOwpAQCAtMzU0LDcgKzM3Nyw3IEBACiAJICovCiAJcHVibGljIElkZW50
aWZpZXIgYWRkSWRlbnRpZmllcihTdHJpbmcgaWQsIFN0cmluZyBzY2hlbWUsIFN0cmluZyB2YWx1
ZSkgewogCQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVu
dEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IEls
bGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyRO
T04tTkxTLTEkCiAJCX0KIAkJSWRlbnRpZmllciBkYyA9IERDRmFjdG9yeS5lSU5TVEFOQ0UuY3Jl
YXRlSWRlbnRpZmllcigpOwogCQlkYy5zZXRJZChpZCk7CkBAIC0zNjUsOCArMzg4LDcgQEAKIAl9
CiAKIAkvKioKLQkgKiBBZGRzIGEgbmV3IGl0ZW0gdG8gdGhlIG1hbmlmZXN0IHVzaW5nIGRlZmF1
bHQgdmFsdWVzIGZvciBwcm9wZXJ0aWVzIG5vdAotCSAqIHNwZWNpZmllZC4gU2FtZSBhcworCSAq
IEFkZHMgYSBuZXcgaXRlbSB0byB0aGUgbWFuaWZlc3QgdXNpbmcgZGVmYXVsdCB2YWx1ZXMgZm9y
IHByb3BlcnRpZXMgbm90IHNwZWNpZmllZC4gU2FtZSBhcwogCSAqIDxjb2RlPmFkZEl0ZW0obnVs
bCwgbnVsbCwgZmlsZSwgbnVsbCwgbnVsbCwgdHJ1ZSwgZmFsc2UpOzwvY29kZT4uCiAJICogCiAJ
ICogQHBhcmFtIGZpbGUKQEAgLTM3NywxNSArMzk5LDEyIEBACiAJfQogCiAJLyoqCi0JICogQWRk
cyBhIG5ldyBpdGVtIHRvIHRoZSBtYW5pZmVzdC4gSWYgYW4gaWRlbnRpZmllciBpcyBub3Qgc3Bl
Y2lmaWVkIGl0Ci0JICogd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGFzc2lnbmVkLgotCSAqIAorCSAq
IEFkZHMgYSBuZXcgaXRlbSB0byB0aGUgbWFuaWZlc3QuIElmIGFuIGlkZW50aWZpZXIgaXMgbm90
IHNwZWNpZmllZCBpdCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgYXNzaWduZWQuCiAJICogPHA+Ci0J
ICogVGhlIDxpPnNwaW5lPC9pPiBkZWZpbmVzIHRoZSByZWFkaW5nIG9yZGVyLCBzbyB0aGUgb3Jk
ZXIgaXRlbXMgYXJlIGFkZGVkCi0JICogYW5kIHdoZXRoZXIgb3Igbm90IDxpPnNwaW5lPC9pPiBp
cyA8Y29kZT50cnVlPC9jb2RlPiBkb2VzIG1hdHRlci4gVW5sZXNzCi0JICogYSB0YWJsZSBvZiBj
b250ZW50cyBmaWxlIGhhcyBiZWVuIHNwZWNpZmllZCBpdCB3aWxsIGJlIGdlbmVyYXRlZC4gQWxs
Ci0JICogZmlsZXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIHNwaW5lIHdpbGwgYmUgZXhh
bWluZWQgdW5sZXNzIHRoZQotCSAqIDxpPm5vVG9jPC9pPiBhdHRyaWJ1dGUgaGFzIGJlZW4gc2V0
IHRvIDxjb2RlPnRydWU8L2NvZGU+LgorCSAqIFRoZSA8aT5zcGluZTwvaT4gZGVmaW5lcyB0aGUg
cmVhZGluZyBvcmRlciwgc28gdGhlIG9yZGVyIGl0ZW1zIGFyZSBhZGRlZCBhbmQgd2hldGhlciBv
ciBub3QgPGk+c3BpbmU8L2k+IGlzCisJICogPGNvZGU+dHJ1ZTwvY29kZT4gZG9lcyBtYXR0ZXIu
IFVubGVzcyBhIHRhYmxlIG9mIGNvbnRlbnRzIGZpbGUgaGFzIGJlZW4gc3BlY2lmaWVkIGl0IHdp
bGwgYmUgZ2VuZXJhdGVkLiBBbGwgZmlsZXMKKwkgKiB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byB0
aGUgc3BpbmUgd2lsbCBiZSBleGFtaW5lZCB1bmxlc3MgdGhlIDxpPm5vVG9jPC9pPiBhdHRyaWJ1
dGUgaGFzIGJlZW4gc2V0IHRvCisJICogPGNvZGU+dHJ1ZTwvY29kZT4uCiAJICogPC9wPgogCSAq
IAogCSAqIEBwYXJhbSBmaWxlCkBAIC00MDYsMjQgKzQyNSwyNyBAQAogCSAqLwogCXB1YmxpYyBJ
dGVtIGFkZEl0ZW0oU3RyaW5nIGlkLCBMb2NhbGUgbGFuZywgRmlsZSBmaWxlLCBTdHJpbmcgZGVz
dCwgU3RyaW5nIHR5cGUsIGJvb2xlYW4gc3BpbmUsIGJvb2xlYW4gbGluZWFyLAogCQkJYm9vbGVh
biBub1RvYykgewotCQlpZiAoZmlsZSA9PSBudWxsIHx8ICFmaWxlLmV4aXN0cygpKSB7Ci0JCQl0
aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJcImZpbGVcIiAiICsgZmlsZS5nZXRB
YnNvbHV0ZVBhdGgoKSArICIgbXVzdCBleGlzdC4iKTsKKwkJaWYgKGZpbGUgPT0gbnVsbCkgewor
CQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiXCJmaWxlXCIgbXVzdCBiZSBz
cGVjaWZpZWQiKTsgLy8kTk9OLU5MUy0xJAorCQl9CisJCWlmICghZmlsZS5leGlzdHMoKSkgewor
CQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiXCJmaWxlXCIgIiArIGZpbGUu
Z2V0QWJzb2x1dGVQYXRoKCkgKyAiIG11c3QgZXhpc3QuIik7IC8vJE5PTi1OTFMtMSQgLy8kTk9O
LU5MUy0yJAogCQl9CiAJCWlmIChmaWxlLmlzRGlyZWN0b3J5KCkpIHsKLQkJCXRocm93IG5ldyBJ
bGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIlwiZmlsZVwiICIgKyBmaWxlLmdldEFic29sdXRlUGF0
aCgpICsgIiBtdXN0IG5vdCBiZSBhIGRpcmVjdG9yeS4iKTsKKwkJCXRocm93IG5ldyBJbGxlZ2Fs
QXJndW1lbnRFeGNlcHRpb24oIlwiZmlsZVwiICIgKyBmaWxlLmdldEFic29sdXRlUGF0aCgpICsg
IiBtdXN0IG5vdCBiZSBhIGRpcmVjdG9yeS4iKTsgLy8kTk9OLU5MUy0xJCAvLyROT04tTkxTLTIk
CiAJCX0KIAkJSXRlbSBpdGVtID0gT1BGRmFjdG9yeS5lSU5TVEFOQ0UuY3JlYXRlSXRlbSgpOwog
CQlpZiAodHlwZSA9PSBudWxsKSB7CiAJCQl0eXBlID0gRVBVQkZpbGVVdGlsLmdldE1pbWVUeXBl
KGZpbGUpOwogCQkJaWYgKHR5cGUgPT0gbnVsbCkgewotCQkJCXRocm93IG5ldyBJbGxlZ2FsQXJn
dW1lbnRFeGNlcHRpb24oIkNvdWxkIG5vdCBhdXRvbWF0aWNhbGx5IGRldGVybWluZSBNSU1FIHR5
cGUgZm9yIGZpbGUgIiArIGZpbGUKLQkJCQkJCSsgIi4gUGxlYXNlIHNwZWNpZnkgdGhlIGNvcnJl
Y3QgdmFsdWUiKTsKKwkJCQl0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJDb3Vs
ZCBub3QgYXV0b21hdGljYWxseSBkZXRlcm1pbmUgTUlNRSB0eXBlIGZvciBmaWxlICIgKyBmaWxl
IC8vJE5PTi1OTFMtMSQKKwkJCQkJCSsgIi4gUGxlYXNlIHNwZWNpZnkgdGhlIGNvcnJlY3QgdmFs
dWUiKTsgLy8kTk9OLU5MUy0xJAogCQkJfQogCQl9CiAJCWlmIChpZCA9PSBudWxsKSB7CiAJCQlT
dHJpbmcgcHJlZml4ID0gIiI7CiAJCQlpZiAoIXR5cGUuZXF1YWxzKE1JTUVUWVBFX1hIVE1MKSkg
ewotCQkJCXByZWZpeCA9ICh0eXBlLmluZGV4T2YoJy8nKSkgPT0gLTEgPyB0eXBlIDogdHlwZS5z
dWJzdHJpbmcoMCwgdHlwZS5pbmRleE9mKCcvJykpICsgIi0iOworCQkJCXByZWZpeCA9ICh0eXBl
LmluZGV4T2YoJy8nKSkgPT0gLTEgPyB0eXBlIDogdHlwZS5zdWJzdHJpbmcoMCwgdHlwZS5pbmRl
eE9mKCcvJykpICsgJy0nOwogCQkJfQogCQkJaWQgPSBwcmVmaXggKyBmaWxlLmdldE5hbWUoKS5z
dWJzdHJpbmcoMCwgZmlsZS5nZXROYW1lKCkubGFzdEluZGV4T2YoJy4nKSk7CiAJCX0KQEAgLTQz
NiwxMSArNDU4LDEzIEBACiAJCWl0ZW0uc2V0Tm9Ub2Mobm9Ub2MpOwogCQlpdGVtLnNldE1lZGlh
X3R5cGUodHlwZSk7CiAJCWl0ZW0uc2V0RmlsZShmaWxlLmdldEFic29sdXRlUGF0aCgpKTsKKwkJ
bG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgZmlsZSBcInswfVwiIG9mIHR5cGUgXCJ7
MX1cIiIsIGl0ZW0uZ2V0SHJlZigpLCBpdGVtLmdldE1lZGlhX3R5cGUoKSksCisJCQkJU2V2ZXJp
dHkuVkVSQk9TRSwgaW5kZW50KTsKIAkJb3BmUGFja2FnZS5nZXRNYW5pZmVzdCgpLmdldEl0ZW1z
KCkuYWRkKGl0ZW0pOwogCQlpZiAoc3BpbmUpIHsKIAkJCUl0ZW1yZWYgcmVmID0gT1BGRmFjdG9y
eS5lSU5TVEFOQ0UuY3JlYXRlSXRlbXJlZigpOwogCQkJaWYgKCFsaW5lYXIpIHsKLQkJCQlyZWYu
c2V0TGluZWFyKCJubyIpOworCQkJCXJlZi5zZXRMaW5lYXIoIm5vIik7IC8vJE5PTi1OTFMtMSQK
IAkJCX0KIAkJCXJlZi5zZXRJZHJlZihpZCk7CiAJCQlnZXRTcGluZSgpLmdldFNwaW5lSXRlbXMo
KS5hZGQocmVmKTsKQEAgLTQ2MSw3ICs0ODUsNyBAQAogCSAqLwogCXB1YmxpYyBMYW5ndWFnZSBh
ZGRMYW5ndWFnZShTdHJpbmcgaWQsIFN0cmluZyB2YWx1ZSkgewogCQlpZiAodmFsdWUgPT0gbnVs
bCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0
IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigi
QSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyROT04tTkxTLTEkCiAJCX0KIAkJTGFuZ3Vh
Z2UgZGMgPSBEQ0ZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZUxhbmd1YWdlKCk7CiAJCXNldERjQ29t
bW9uKGRjLCBpZCwgdmFsdWUpOwpAQCAtNDgwLDEwICs1MDQsMTAgQEAKIAkgKi8KIAlwdWJsaWMg
b3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLm9wZi5NZXRhIGFkZE1ldGEoU3RyaW5nIG5hbWUs
IFN0cmluZyB2YWx1ZSkgewogCQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IEls
bGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJ
dGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNp
ZmllZCIpOyAvLyROT04tTkxTLTEkCiAJCX0KIAkJaWYgKG5hbWUgPT0gbnVsbCkgewotCQkJdGhy
b3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSBuYW1lIG11c3QgYmUgc3BlY2lmaWVk
Iik7CisJCQl0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJBIG5hbWUgbXVzdCBi
ZSBzcGVjaWZpZWQiKTsgLy8kTk9OLU5MUy0xJAogCQl9CiAJCW9yZy5lY2xpcHNlLm15bHluLmRv
Y3MuZXB1Yi5vcGYuTWV0YSBvcGYgPSBPUEZGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVNZXRhKCk7
CiAJCW9wZi5zZXROYW1lKG5hbWUpOwpAQCAtNTA1LDggKzUyOSwxMCBAQAogCSAqLwogCXB1Ymxp
YyBQdWJsaXNoZXIgYWRkUHVibGlzaGVyKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2
YWx1ZSkgewogCQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1
bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3
IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAv
LyROT04tTkxTLTEkCiAJCX0KKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgcHVi
bGlzaGVyIFwiezB9XCIgZm9yIHRoZSB7MX0gbG9jYWxlIiwgdmFsdWUsCisJCQkJbGFuZyA9PSBu
dWxsID8gImRlZmF1bHQiIDogbGFuZy5nZXREaXNwbGF5TmFtZSgpKSwgU2V2ZXJpdHkuVkVSQk9T
RSwgaW5kZW50KTsKIAkJUHVibGlzaGVyIGRjID0gRENGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVQ
dWJsaXNoZXIoKTsKIAkJc2V0RGNMb2NhbGl6ZWQoZGMsIGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9w
ZlBhY2thZ2UuZ2V0TWV0YWRhdGEoKS5nZXRQdWJsaXNoZXJzKCkuYWRkKGRjKTsKQEAgLTUxNCwx
MSArNTQwLDEwIEBACiAJfQogCiAJLyoqCi0JICogVGhlIHN0cnVjdHVyYWwgY29tcG9uZW50cyBv
ZiB0aGUgYm9va3MgYXJlIGxpc3RlZCBpbiByZWZlcmVuY2UgZWxlbWVudHMKLQkgKiBjb250YWlu
ZWQgd2l0aGluIHRoZSBndWlkZSBlbGVtZW50LiBUaGVzZSBjb21wb25lbnRzIGNvdWxkIHJlZmVy
IHRvIHRoZQotCSAqIHRhYmxlIG9mIGNvbnRlbnRzLCBsaXN0IG9mIGlsbHVzdHJhdGlvbnMsIGZv
cmV3b3JkLCBiaWJsaW9ncmFwaHksIGFuZAotCSAqIG1hbnkgb3RoZXIgc3RhbmRhcmQgcGFydHMg
b2YgdGhlIGJvb2suIFJlYWRpbmcgc3lzdGVtcyBhcmUgbm90IHJlcXVpcmVkCi0JICogdG8gdXNl
IHRoZSBndWlkZSBlbGVtZW50IGJ1dCBpdCBpcyBhIGdvb2QgaWRlYSB0byB1c2UgaXQuCisJICog
VGhlIHN0cnVjdHVyYWwgY29tcG9uZW50cyBvZiB0aGUgYm9va3MgYXJlIGxpc3RlZCBpbiByZWZl
cmVuY2UgZWxlbWVudHMgY29udGFpbmVkIHdpdGhpbiB0aGUgZ3VpZGUgZWxlbWVudC4gVGhlc2UK
KwkgKiBjb21wb25lbnRzIGNvdWxkIHJlZmVyIHRvIHRoZSB0YWJsZSBvZiBjb250ZW50cywgbGlz
dCBvZiBpbGx1c3RyYXRpb25zLCBmb3Jld29yZCwgYmlibGlvZ3JhcGh5LCBhbmQgbWFueSBvdGhl
cgorCSAqIHN0YW5kYXJkIHBhcnRzIG9mIHRoZSBib29rLiBSZWFkaW5nIHN5c3RlbXMgYXJlIG5v
dCByZXF1aXJlZCB0byB1c2UgdGhlIGd1aWRlIGVsZW1lbnQgYnV0IGl0IGlzIGEgZ29vZCBpZGVh
IHRvCisJICogdXNlIGl0LgogCSAqIAogCSAqIEBwYXJhbSBocmVmCiAJICogICAgICAgICAgICB0
aGUgaXRlbSByZWZlcmVuY2VkCkBAIC01MzAsMTQgKzU1NSwxNiBAQAogCSAqLwogCXB1YmxpYyBS
ZWZlcmVuY2UgYWRkUmVmZXJlbmNlKFN0cmluZyBocmVmLCBTdHJpbmcgdGl0bGUsIFR5cGUgdmFs
dWUpIHsKIAkJaWYgKHZhbHVlID09IG51bGwpIHsKLQkJCXRocm93IG5ldyBJbGxlZ2FsQXJndW1l
bnRFeGNlcHRpb24oIkEgdmFsdWUgbXVzdCBiZSBzcGVjaWZpZWQiKTsKKwkJCXRocm93IG5ldyBJ
bGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkEgdmFsdWUgbXVzdCBiZSBzcGVjaWZpZWQiKTsgLy8k
Tk9OLU5MUy0xJAogCQl9CiAJCWlmIChocmVmID09IG51bGwpIHsKLQkJCXRocm93IG5ldyBJbGxl
Z2FsQXJndW1lbnRFeGNlcHRpb24oIkEgaHJlZiBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhy
b3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSBocmVmIG11c3QgYmUgc3BlY2lmaWVk
Iik7IC8vJE5PTi1OTFMtMSQKIAkJfQogCQlpZiAodGl0bGUgPT0gbnVsbCkgewotCQkJdGhyb3cg
bmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB0aXRsZSBtdXN0IGJlIHNwZWNpZmllZCIp
OworCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB0aXRsZSBtdXN0IGJl
IHNwZWNpZmllZCIpOyAvLyROT04tTkxTLTEkCiAJCX0KKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9y
bWF0KCJBZGRpbmcgezB9IHJlZmVyZW5jZSBcInsxfVwiIHRvIFwiezJ9XCIiLCB2YWx1ZSwgdGl0
bGUsIGhyZWYpLCBTZXZlcml0eS5WRVJCT1NFLAorCQkJCWluZGVudCk7CiAJCVJlZmVyZW5jZSBy
ZWZlcmVuY2UgPSBPUEZGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVSZWZlcmVuY2UoKTsKIAkJcmVm
ZXJlbmNlLnNldEhyZWYoaHJlZik7CiAJCXJlZmVyZW5jZS5zZXRUaXRsZSh0aXRsZSk7CkBAIC01
NTksOCArNTg2LDEwIEBACiAJICovCiAJcHVibGljIFJlbGF0aW9uIGFkZFJlbGF0aW9uKFN0cmlu
ZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2YWx1ZSkgewogCQlpZiAodmFsdWUgPT0gbnVsbCkg
ewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJl
IHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2
YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyROT04tTkxTLTEkCiAJCX0KKwkJbG9nKE1lc3Nh
Z2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgcmVsYXRpb24gXCJ7MH1cIiBmb3IgdGhlIHsxfSBsb2Nh
bGUiLCB2YWx1ZSwKKwkJCQlsYW5nID09IG51bGwgPyAiZGVmYXVsdCIgOiBsYW5nLmdldERpc3Bs
YXlOYW1lKCkpLCBTZXZlcml0eS5WRVJCT1NFLCBpbmRlbnQpOwogCQlSZWxhdGlvbiBkYyA9IERD
RmFjdG9yeS5lSU5TVEFOQ0UuY3JlYXRlUmVsYXRpb24oKTsKIAkJc2V0RGNMb2NhbGl6ZWQoZGMs
IGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9wZlBhY2thZ2UuZ2V0TWV0YWRhdGEoKS5nZXRSZWxhdGlv
bnMoKS5hZGQoZGMpOwpAQCAtNTgwLDggKzYwOSwxMCBAQAogCSAqLwogCXB1YmxpYyBSaWdodHMg
YWRkUmlnaHRzKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2YWx1ZSkgewogCQlpZiAo
dmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigi
QSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVu
dEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyROT04tTkxTLTEkCiAJ
CX0KKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgcmlnaHRzIFwiezB9XCIgZm9y
IHRoZSB7MX0gbG9jYWxlIiwgdmFsdWUsCisJCQkJbGFuZyA9PSBudWxsID8gImRlZmF1bHQiIDog
bGFuZy5nZXREaXNwbGF5TmFtZSgpKSwgU2V2ZXJpdHkuVkVSQk9TRSwgaW5kZW50KTsKIAkJUmln
aHRzIGRjID0gRENGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVSaWdodHMoKTsKIAkJc2V0RGNMb2Nh
bGl6ZWQoZGMsIGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9wZlBhY2thZ2UuZ2V0TWV0YWRhdGEoKS5n
ZXRSaWdodHMoKS5hZGQoZGMpOwpAQCAtNjAxLDggKzYzMiwxMCBAQAogCSAqLwogCXB1YmxpYyBT
b3VyY2UgYWRkU291cmNlKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2YWx1ZSkgewog
CQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw
dGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3IElsbGVnYWxB
cmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAvLyROT04tTkxT
LTEkCiAJCX0KKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgc291cmNlIFwiezB9
XCIgZm9yIHRoZSB7MX0gbG9jYWxlIiwgdmFsdWUsCisJCQkJbGFuZyA9PSBudWxsID8gImRlZmF1
bHQiIDogbGFuZy5nZXREaXNwbGF5TmFtZSgpKSwgU2V2ZXJpdHkuVkVSQk9TRSwgaW5kZW50KTsK
IAkJU291cmNlIGRjID0gRENGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVTb3VyY2UoKTsKIAkJc2V0
RGNMb2NhbGl6ZWQoZGMsIGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9wZlBhY2thZ2UuZ2V0TWV0YWRh
dGEoKS5nZXRTb3VyY2VzKCkuYWRkKGRjKTsKQEAgLTYyMSw4ICs2NTQsMTAgQEAKIAkgKi8KIAlw
dWJsaWMgU3ViamVjdCBhZGRTdWJqZWN0KFN0cmluZyBpZCwgTG9jYWxlIGxhbmcsIFN0cmluZyB2
YWx1ZSkgewogCQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1
bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJdGhyb3cgbmV3
IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOyAv
LyROT04tTkxTLTEkCiAJCX0KKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJBZGRpbmcgc3Vi
amVjdCBcInswfVwiIGZvciB0aGUgezF9IGxvY2FsZSIsIHZhbHVlLAorCQkJCWxhbmcgPT0gbnVs
bCA/ICJkZWZhdWx0IiA6IGxhbmcuZ2V0RGlzcGxheU5hbWUoKSksIFNldmVyaXR5LlZFUkJPU0Us
IGluZGVudCk7CiAJCVN1YmplY3QgZGMgPSBEQ0ZhY3RvcnkuZUlOU1RBTkNFLmNyZWF0ZVN1Ympl
Y3QoKTsKIAkJc2V0RGNMb2NhbGl6ZWQoZGMsIGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9wZlBhY2th
Z2UuZ2V0TWV0YWRhdGEoKS5nZXRTdWJqZWN0cygpLmFkZChkYyk7CkBAIC02NDIsOCArNjc3LDEw
IEBACiAJICovCiAJcHVibGljIFRpdGxlIGFkZFRpdGxlKFN0cmluZyBpZCwgTG9jYWxlIGxhbmcs
IFN0cmluZyB2YWx1ZSkgewogCQlpZiAodmFsdWUgPT0gbnVsbCkgewotCQkJdGhyb3cgbmV3IEls
bGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNpZmllZCIpOworCQkJ
dGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQSB2YWx1ZSBtdXN0IGJlIHNwZWNp
ZmllZCIpOyAvLyROT04tTkxTLTEkCiAJCX0KKwkJbG9nKE1lc3NhZ2VGb3JtYXQuZm9ybWF0KCJB
ZGRpbmcgdGl0bGUgXCJ7MH1cIiBmb3IgdGhlIHsxfSBsb2NhbGUiLCB2YWx1ZSwKKwkJCQlsYW5n
ID09IG51bGwgPyAiZGVmYXVsdCIgOiBsYW5nLmdldERpc3BsYXlOYW1lKCkpLCBTZXZlcml0eS5W
RVJCT1NFLCBpbmRlbnQpOwogCQlUaXRsZSBkYyA9IERDRmFjdG9yeS5lSU5TVEFOQ0UuY3JlYXRl
VGl0bGUoKTsKIAkJc2V0RGNMb2NhbGl6ZWQoZGMsIGlkLCBsYW5nLCB2YWx1ZSk7CiAJCW9wZlBh
Y2thZ2UuZ2V0TWV0YWRhdGEoKS5nZXRUaXRsZXMoKS5hZGQoZGMpOwpAQCAtNjYxLDcgKzY5OCw3
IEBACiAJICovCiAJcHVibGljIG9yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5kYy5UeXBlIGFk
ZFR5cGUoU3RyaW5nIGlkLCBTdHJpbmcgdmFsdWUpIHsKIAkJaWYgKHZhbHVlID09IG51bGwpIHsK
LQkJCXRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkEgdmFsdWUgbXVzdCBiZSBz
cGVjaWZpZWQiKTsKKwkJCXRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkEgdmFs
dWUgbXVzdCBiZSBzcGVjaWZpZWQiKTsgLy8kTk9OLU5MUy0xJAogCQl9CiAJCW9yZy5lY2xpcHNl
Lm15bHluLmRvY3MuZXB1Yi5kYy5UeXBlIGRjID0gRENGYWN0b3J5LmVJTlNUQU5DRS5jcmVhdGVU
eXBlKCk7CiAJCXNldERjQ29tbW9uKGRjLCBpZCwgdmFsdWUpOwpAQCAtNjcwLDE0ICs3MDcsMTQg
QEAKIAl9CiAKIAkvKioKLQkgKiBDb3BpZXMgYWxsIGl0ZW1zIHBhcnQgb2YgdGhlIHB1YmxpY2F0
aW9uIGludG8gdGhlIE9FUEJTIGZvbGRlciB1bmxlc3MgdGhlCi0JICogaXRlbSBpbiBxdWVzdGlv
biB3aWxsIGJlIGdlbmVyYXRlZC4KKwkgKiBDb3BpZXMgYWxsIGl0ZW1zIHBhcnQgb2YgdGhlIHB1
YmxpY2F0aW9uIGludG8gdGhlIE9FUEJTIGZvbGRlciB1bmxlc3MgdGhlIGl0ZW0gaW4gcXVlc3Rp
b24gd2lsbCBiZSBnZW5lcmF0ZWQuCiAJICogCiAJICogQHBhcmFtIHJvb3RGb2xkZXIKIAkgKiAg
ICAgICAgICAgIHRoZSBmb2xkZXIgdG8gY29weSBpbnRvLgogCSAqIEB0aHJvd3MgSU9FeGNlcHRp
b24KIAkgKi8KIAlwcml2YXRlIHZvaWQgY29weUNvbnRlbnQoRmlsZSByb290Rm9sZGVyKSB0aHJv
d3MgSU9FeGNlcHRpb24geworCQlsb2coIkNvcHlpbmcgT1BTIGNvbnRlbnQgdG8gRVBVQiIsIFNl
dmVyaXR5LklORk8sIGluZGVudCk7CiAJCUVMaXN0PEl0ZW0+IGl0ZW1zID0gb3BmUGFja2FnZS5n
ZXRNYW5pZmVzdCgpLmdldEl0ZW1zKCk7CiAJCWZvciAoSXRlbSBpdGVtIDogaXRlbXMpIHsKIAkJ
CWlmICghaXRlbS5pc0dlbmVyYXRlZCgpKSB7CkBAIC02ODksMTYgKzcyNiwxNCBAQAogCX0KIAog
CS8qKgotCSAqIEltcGxlbWVudCB0byBoYW5kbGUgZ2VuZXJhdGlvbiBvZiB0YWJsZSBvZiBjb250
ZW50cyBmcm9tIHRoZSBpdGVtcyBhZGRlZAotCSAqIHRvIHRoZSA8aT5zcGluZTwvaT4uCisJICog
SW1wbGVtZW50IHRvIGhhbmRsZSBnZW5lcmF0aW9uIG9mIHRhYmxlIG9mIGNvbnRlbnRzIGZyb20g
dGhlIGl0ZW1zIGFkZGVkIHRvIHRoZSA8aT5zcGluZTwvaT4uCiAJICogCiAJICogQHRocm93cyBF
eGNlcHRpb24KIAkgKi8KIAlwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBnZW5lcmF0ZVRhYmxlT2ZD
b250ZW50cygpIHRocm93cyBFeGNlcHRpb247CiAKIAkvKioKLQkgKiBSZXR1cm5zIHRoZSBtYWlu
IGlkZW50aWZpZXIgb2YgdGhlIHB1YmxpY2F0aW9uIG9yIDxjb2RlPm51bGw8L2NvZGU+IGlmIGl0
Ci0JICogY291bGQgbm90IGJlIGRldGVybWluZWQuCisJICogUmV0dXJucyB0aGUgbWFpbiBpZGVu
dGlmaWVyIG9mIHRoZSBwdWJsaWNhdGlvbiBvciA8Y29kZT5udWxsPC9jb2RlPiBpZiBpdCBjb3Vs
ZCBub3QgYmUgZGV0ZXJtaW5lZC4KIAkgKiAKIAkgKiBAcmV0dXJuIHRoZSBtYWluIGlkZW50aWZp
ZXIgb3IgPGNvZGU+bnVsbDwvY29kZT4KIAkgKi8KQEAgLTcxMyw4ICs3NDgsNyBAQAogCX0KIAog
CS8qKgotCSAqIExvY2F0ZXMgYW5kIHJldHVybnMgYW4gaXRlbSBmcm9tIHRoZSBtYW5pZmVzdCBj
b3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbgotCSAqIGlkZW50aWZpZXIuCisJICogTG9jYXRlcyBh
bmQgcmV0dXJucyBhbiBpdGVtIGZyb20gdGhlIG1hbmlmZXN0IGNvcnJlc3BvbmRpbmcgdG8gdGhl
IGdpdmVuIGlkZW50aWZpZXIuCiAJICogCiAJICogQHBhcmFtIGlkCiAJICogICAgICAgICAgICB0
aGUgaWRlbnRpZmllcgpAQCAtNzUzLDkgKzc4Nyw4IEBACiAJfQogCiAJLyoqCi0JICogUmV0dXJu
cyB0aGUgcm9vdCBmb2xkZXIgb2YgdGhlIHB1YmxpY2F0aW9uLiBUaGlzIGlzIHRoZSBmb2xkZXIg
d2hlcmUgdGhlCi0JICogT1BGIGZpbGUgcmVzaWRlcy4gTm90ZSB0aGF0IHRoaXMgcHJvcGVydHkg
d2lsbCBvbmx5IGhhdmUgYSB2YWx1ZSBpZiB0aGlzCi0JICogaW5zdGFuY2UgaGFzIGJlZW4gcG9w
dWxhdGVkIHVzaW5nIGFuIGV4aXN0aW5nIHB1YmxpY2F0aW9uLCBzdWNoIGFzIHdoZW4KKwkgKiBS
ZXR1cm5zIHRoZSByb290IGZvbGRlciBvZiB0aGUgcHVibGljYXRpb24uIFRoaXMgaXMgdGhlIGZv
bGRlciB3aGVyZSB0aGUgT1BGIGZpbGUgcmVzaWRlcy4gTm90ZSB0aGF0IHRoaXMKKwkgKiBwcm9w
ZXJ0eSB3aWxsIG9ubHkgaGF2ZSBhIHZhbHVlIGlmIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gcG9w
dWxhdGVkIHVzaW5nIGFuIGV4aXN0aW5nIHB1YmxpY2F0aW9uLCBzdWNoIGFzIHdoZW4KIAkgKiB1
bnBhY2tpbmcgYW4gRVBVQiBmaWxlLgogCSAqIAogCSAqIEByZXR1cm4gdGhlIHJvb3QgZm9sZGVy
IG9yIDxjb2RlPm51bGw8L2NvZGU+CkBAIC03NzQsMTYgKzgwNywxNCBAQAogCX0KIAogCS8qKgot
CSAqIFJldHVybnMgdGhlIHRhYmxlIG9mIGNvbnRlbnRzIGZvciB0aGUgcHVibGljYXRpb24uIEFz
IHRoZSBhY3R1YWwKLQkgKiBpbXBsZW1lbnRhdGlvbiBtYXkgdmFyeSBkZXBlbmRpbmcgb24KKwkg
KiBSZXR1cm5zIHRoZSB0YWJsZSBvZiBjb250ZW50cyBmb3IgdGhlIHB1YmxpY2F0aW9uLiBBcyB0
aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uIG1heSB2YXJ5IGRlcGVuZGluZyBvbgogCSAqIAogCSAq
IEByZXR1cm4gdGhlIHRhYmxlIG9mIGNvbnRlbnRzCiAJICovCiAJcHVibGljIGFic3RyYWN0IE9i
amVjdCBnZXRUYWJsZU9mQ29udGVudHMoKTsKIAogCS8qKgotCSAqIFJldHVybnMgYSBsaXN0IG9m
IHZhbGlkYXRpb24gbWVzc2FnZXMuIFRoaXMgbGlzdCBpcyBvbmx5IHBvcHVsYXRlZCB3aGVuCi0J
ICoge0BsaW5rICNwYWNrKEZpbGUpfSBoYXMgdGFrZW4gcGxhY2UuCisJICogUmV0dXJucyBhIGxp
c3Qgb2YgdmFsaWRhdGlvbiBtZXNzYWdlcy4gVGhpcyBsaXN0IGlzIG9ubHkgcG9wdWxhdGVkIHdo
ZW4ge0BsaW5rICNwYWNrKEZpbGUpfSBoYXMgdGFrZW4gcGxhY2UuCiAJICogCiAJICogQHJldHVy
biBhIGxpc3Qgb2YgdmFsaWRhdGlvbiBtZXNzYWdlcwogCSAqLwpAQCAtNzkyLDE0ICs4MjMsMjIg
QEAKIAl9CiAKIAkvKioKLQkgKiBJdGVyYXRlcyBvdmVyIGFsbCBmaWxlcyBpbiB0aGUgbWFuaWZl
c3QgYXR0ZW1wdGluZyB0byBkZXRlcm1pbmUKLQkgKiByZWZlcmVuY2VkIHJlc291cmNlcyBzdWNo
IGFzIGltYWdlIGZpbGVzIGFuZCBhZGRzIHRoZXNlIHRvIHRoZSBtYW5pZmVzdC4KKwkgKiBSZXR1
cm5zIHRoZSBFUFVCIHZlcnNpb24gbnVtYmVyIG9mIHRoZSBwdWJsaWNhdGlvbi4KKwkgKiAKKwkg
KiBAcmV0dXJuIHRoZSB2ZXJzaW9uIG51bWJlcgorCSAqLworCXByb3RlY3RlZCBhYnN0cmFjdCBT
dHJpbmcgZ2V0VmVyc2lvbigpOworCisJLyoqCisJICogSXRlcmF0ZXMgb3ZlciBhbGwgZmlsZXMg
aW4gdGhlIG1hbmlmZXN0IGF0dGVtcHRpbmcgdG8gZGV0ZXJtaW5lIHJlZmVyZW5jZWQgcmVzb3Vy
Y2VzIHN1Y2ggYXMgaW1hZ2UgZmlsZXMgYW5kIGFkZHMKKwkgKiB0aGVzZSB0byB0aGUgbWFuaWZl
c3QuCiAJICogCiAJICogQHRocm93cyBQYXJzZXJDb25maWd1cmF0aW9uRXhjZXB0aW9uCiAJICog
QHRocm93cyBTQVhFeGNlcHRpb24KIAkgKiBAdGhyb3dzIElPRXhjZXB0aW9uCiAJICovCiAJcHJp
dmF0ZSB2b2lkIGluY2x1ZGVSZWZlcmVuY2VkUmVzb3VyY2VzKCkgdGhyb3dzIFBhcnNlckNvbmZp
Z3VyYXRpb25FeGNlcHRpb24sIFNBWEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24geworCQlsb2coIklu
Y2x1ZGluZyByZWZlcmVuY2VkIHJlc291cmNlcyIsIFNldmVyaXR5LlZFUkJPU0UsIGluZGVudCsr
KTsKIAkJRUxpc3Q8SXRlbT4gbWFuaWZlc3RJdGVtcyA9IG9wZlBhY2thZ2UuZ2V0TWFuaWZlc3Qo
KS5nZXRJdGVtcygpOwogCQkvLyBDb21wb3NlIGEgbGlzdCBvZiBmaWxlIHJlZmVyZW5jZXMKIAkJ
SGFzaE1hcDxGaWxlLCBMaXN0PEZpbGU+PiByZWZlcmVuY2VzID0gbmV3IEhhc2hNYXA8RmlsZSwg
TGlzdDxGaWxlPj4oKTsKQEAgLTgyMiw3ICs4NjEsMjEgQEAKIAkJCQlhZGRJdGVtKG51bGwsIG51
bGwsIGZpbGUsIHJlbGF0aXZlUGF0aC5nZXRQYXJlbnQoKSwgbnVsbCwgZmFsc2UsIGZhbHNlLCBm
YWxzZSk7CiAJCQl9CiAJCX0KKwkJaW5kZW50LS07CisJfQogCisJcHJvdGVjdGVkIHZvaWQgbG9n
KFN0cmluZyBtZXNzYWdlLCBTZXZlcml0eSBzZXZlcml0eSwgaW50IGluZGVudCkgeworCQlpZiAo
bG9nZ2VyICE9IG51bGwpIHsKKwkJCWlmIChpbmRlbnQgPT0gMCkgeworCQkJCWxvZ2dlci5sb2co
bWVzc2FnZSwgc2V2ZXJpdHkpOworCQkJfSBlbHNlIHsKKwkJCQlTdHJpbmdCdWlsZGVyIHNiID0g
bmV3IFN0cmluZ0J1aWxkZXIobWVzc2FnZSk7CisJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBpbmRl
bnQ7IGkrKykgeworCQkJCQlzYi5pbnNlcnQoMCwgIiAgIik7CisJCQkJfQorCQkJCWxvZ2dlci5s
b2coc2IudG9TdHJpbmcoKSwgc2V2ZXJpdHkpOworCQkJfQorCQl9CiAJfQogCiAJLyoqCkBAIC04
MzQsMTMgKzg4NywxMiBAQAogCSAqLwogCXZvaWQgcGFjayhGaWxlIHJvb3RGaWxlKSB0aHJvd3Mg
RXhjZXB0aW9uIHsKIAkJaWYgKG9wZlBhY2thZ2UuZ2V0U3BpbmUoKS5nZXRTcGluZUl0ZW1zKCku
aXNFbXB0eSgpKSB7Ci0JCQl0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJTcGlu
ZSBkb2VzIG5vdCBjb250YWluIGFueSBpdGVtcyIpOworCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1
bWVudEV4Y2VwdGlvbigiU3BpbmUgZG9lcyBub3QgY29udGFpbiBhbnkgaXRlbXMiKTsgLy8kTk9O
LU5MUy0xJAogCQl9CiAJCS8vIE5vdGUgdGhhdCBvcmRlciBpcyBpbXBvcnRhbnQgaGVyZS4gU29t
ZSBvZiB0aGUgc3RlcHMgZm9yIGFzc2VtYmxpbmcKIAkJLy8gdGhlIEVQVUIgbWF5IGluc2VydCBk
YXRhIGludG8gdGhlIEVQVUIgc3RydWN0dXJlLiBIZW5jZSB0aGUgT1BGIG11c3QKIAkJLy8gYmUg
d3JpdHRlbiBsYXN0LgogCQl0aGlzLnJvb3RGb2xkZXIgPSByb290RmlsZS5nZXRBYnNvbHV0ZUZp
bGUoKS5nZXRQYXJlbnRGaWxlKCk7Ci0JCWFkZENvbXB1bHNvcnlEYXRhKCk7CiAJCWlmIChyb290
Rm9sZGVyLmlzRGlyZWN0b3J5KCkgfHwgcm9vdEZvbGRlci5ta2RpcnMoKSkgewogCQkJaWYgKG9w
ZlBhY2thZ2UuaXNHZW5lcmF0ZUNvdmVySFRNTCgpKSB7CiAJCQkJd3JpdGVDb3ZlckhUTUwocm9v
dEZvbGRlcik7CkBAIC04NTAsMTAgKzkwMiwyNCBAQAogCQkJfQogCQkJY29weUNvbnRlbnQocm9v
dEZvbGRlcik7CiAJCQltZXNzYWdlcyA9IHZhbGlkYXRlQ29udGVudHMoKTsKKwkJCWlmIChsb2dn
ZXIgIT0gbnVsbCkgeworCQkJCWZvciAoVmFsaWRhdGlvbk1lc3NhZ2UgdmFsaWRhdGlvbiA6IG1l
c3NhZ2VzKSB7CisJCQkJCXN3aXRjaCAodmFsaWRhdGlvbi5nZXRTZXZlcml0eSgpKSB7CisJCQkJ
CWNhc2UgRVJST1I6CisJCQkJCQlsb2codmFsaWRhdGlvbi5nZXRNZXNzYWdlKCksIFNldmVyaXR5
LkVSUk9SLCBpbmRlbnQpOworCQkJCQkJYnJlYWs7CisJCQkJCWNhc2UgV0FSTklORzoKKwkJCQkJ
CWxvZyh2YWxpZGF0aW9uLmdldE1lc3NhZ2UoKSwgU2V2ZXJpdHkuV0FSTklORywgaW5kZW50KTsK
KwkJCQkJCWJyZWFrOworCQkJCQlkZWZhdWx0OgorCQkJCQkJYnJlYWs7CisJCQkJCX0KKwkJCQl9
CisJCQl9CiAJCQl3cml0ZVRhYmxlT2ZDb250ZW50cyhyb290Rm9sZGVyKTsKIAkJCXdyaXRlT1BG
KHJvb3RGaWxlKTsKIAkJfSBlbHNlIHsKLQkJCXRocm93IG5ldyBJT0V4Y2VwdGlvbigiQ291bGQg
bm90IGNyZWF0ZSBPRUJQUyBmb2xkZXIgaW4gIiArIHJvb3RGb2xkZXIuZ2V0QWJzb2x1dGVQYXRo
KCkpOworCQkJdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJDb3VsZCBub3QgY3JlYXRlIE9FQlBTIGZv
bGRlciBpbiAiICsgcm9vdEZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSk7IC8vJE5PTi1OTFMtMSQK
IAkJfQogCQl2YWxpZGF0ZU1ldGFkYXRhKCk7CiAJfQpAQCAtODc0LDggKzk0MCw3IEBACiAJfQog
CiAJLyoqCi0JICogSW1wbGVtZW50IHRvIHJlYWQgdGhlIHRhYmxlIG9mIGNvbnRlbnRzIGZvciB0
aGUgcGFydGljdWxhciBPRVBCUwotCSAqIGltcGxlbWVudGF0aW9uLgorCSAqIEltcGxlbWVudCB0
byByZWFkIHRoZSB0YWJsZSBvZiBjb250ZW50cyBmb3IgdGhlIHBhcnRpY3VsYXIgT0VQQlMgaW1w
bGVtZW50YXRpb24uCiAJICogCiAJICogQHBhcmFtIHRvY0ZpbGUKIAkgKiAgICAgICAgICAgIHRo
ZSB0YWJsZSBvZiBjb250ZW50cyBmaWxlCkBAIC04ODQsMTMgKzk0OSwxMSBAQAogCXByb3RlY3Rl
ZCBhYnN0cmFjdCB2b2lkIHJlYWRUYWJsZU9mQ29udGVudHMoRmlsZSB0b2NGaWxlKSB0aHJvd3Mg
SU9FeGNlcHRpb247CiAKIAkvKioKLQkgKiBSZWdpc3RlcnMgYSBuZXcgcmVzb3VyY2UgZmFjdG9y
eSBmb3IgT1BGIGRhdGEgc3RydWN0dXJlcy4gVGhpcyBpcwotCSAqIG5vcm1hbGx5IGRvbmUgdGhy
b3VnaCBFY2xpcHNlIGV4dGVuc2lvbiBwb2ludHMgYnV0IHdlIGFsc28gbmVlZCB0byBiZQotCSAq
IGFibGUgdG8gY3JlYXRlIHRoaXMgZmFjdG9yeSB3aXRob3V0IHRoZSBFY2xpcHNlIHJ1bnRpbWUu
CisJICogUmVnaXN0ZXJzIGEgbmV3IHJlc291cmNlIGZhY3RvcnkgZm9yIE9QRiBkYXRhIHN0cnVj
dHVyZXMuIFRoaXMgaXMgbm9ybWFsbHkgZG9uZSB0aHJvdWdoIEVjbGlwc2UgZXh0ZW5zaW9uIHBv
aW50cworCSAqIGJ1dCB3ZSBhbHNvIG5lZWQgdG8gYmUgYWJsZSB0byBjcmVhdGUgdGhpcyBmYWN0
b3J5IHdpdGhvdXQgdGhlIEVjbGlwc2UgcnVudGltZS4KIAkgKi8KIAlwcml2YXRlIHZvaWQgcmVn
aXN0ZXJPUEZSZXNvdXJjZUZhY3RvcnkoKSB7Ci0JCS8vIFJlZ2lzdGVyIHBhY2thZ2Ugc28gdGhh
dCBpdCBpcyBhdmFpbGFibGUgZXZlbiB3aXRob3V0IHRoZSBFY2xpcHNlCi0JCS8vIHJ1bnRpbWUK
KwkJLy8gUmVnaXN0ZXIgcGFja2FnZSBzbyB0aGF0IGl0IGlzIGF2YWlsYWJsZSBldmVuIHdpdGhv
dXQgdGhlIEVjbGlwc2UgcnVudGltZQogCQlAU3VwcHJlc3NXYXJuaW5ncygidW51c2VkIikKIAkJ
T1BGUGFja2FnZSBwYWNrYWdlSW5zdGFuY2UgPSBPUEZQYWNrYWdlLmVJTlNUQU5DRTsKIApAQCAt
OTIyLDggKzk4NSw4IEBACiAJCQkJCQlzYXZlT3B0aW9ucy5wdXQoWE1MUmVzb3VyY2UuT1BUSU9O
X0VOQ09ESU5HLCBYTUxfRU5DT0RJTkcpOwogCQkJCQkJLy8gRG8gbm90IGRvd25sb2FkIGFueSBl
eHRlcm5hbCBEVERzLgogCQkJCQkJTWFwPFN0cmluZywgT2JqZWN0PiBwYXJzZXJGZWF0dXJlcyA9
IG5ldyBIYXNoTWFwPFN0cmluZywgT2JqZWN0PigpOwotCQkJCQkJcGFyc2VyRmVhdHVyZXMucHV0
KCJodHRwOi8veG1sLm9yZy9zYXgvZmVhdHVyZXMvdmFsaWRhdGlvbiIsIEJvb2xlYW4uRkFMU0Up
OwotCQkJCQkJcGFyc2VyRmVhdHVyZXMucHV0KCJodHRwOi8vYXBhY2hlLm9yZy94bWwvZmVhdHVy
ZXMvbm9udmFsaWRhdGluZy9sb2FkLWV4dGVybmFsLWR0ZCIsCisJCQkJCQlwYXJzZXJGZWF0dXJl
cy5wdXQoImh0dHA6Ly94bWwub3JnL3NheC9mZWF0dXJlcy92YWxpZGF0aW9uIiwgQm9vbGVhbi5G
QUxTRSk7IC8vJE5PTi1OTFMtMSQKKwkJCQkJCXBhcnNlckZlYXR1cmVzLnB1dCgiaHR0cDovL2Fw
YWNoZS5vcmcveG1sL2ZlYXR1cmVzL25vbnZhbGlkYXRpbmcvbG9hZC1leHRlcm5hbC1kdGQiLCAv
LyROT04tTkxTLTEkCiAJCQkJCQkJCUJvb2xlYW4uRkFMU0UpOwogCQkJCQkJbG9hZE9wdGlvbnMu
cHV0KFhNTFJlc291cmNlLk9QVElPTl9QQVJTRVJfRkVBVFVSRVMsIHBhcnNlckZlYXR1cmVzKTsK
IAkJCQkJCXJldHVybiB4bWlSZXNvdXJjZTsKQEAgLTkzMyw5ICs5OTYsOCBAQAogCX0KIAogCS8q
KgotCSAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgYWRkaW5nIGEgY292ZXIgdG8gdGhlIHB1Ymxp
Y2F0aW9uLiBUaGlzIG1ldGhvZAotCSAqIHdpbGwgbWFrZSBzdXJlIHRoZSByZXF1aXJlZCBhY3Rp
b25zIGFyZSB0YWtlbiB0byBwcm92aWRlIGEgY292ZXIgcGFnZSBmb3IKLQkgKiBhbGwgcmVhZGlu
ZyBzeXN0ZW1zLiAKKwkgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIGFkZGluZyBhIGNvdmVyIHRv
IHRoZSBwdWJsaWNhdGlvbi4gVGhpcyBtZXRob2Qgd2lsbCBtYWtlIHN1cmUgdGhlIHJlcXVpcmVk
IGFjdGlvbnMgYXJlCisJICogdGFrZW4gdG8gcHJvdmlkZSBhIGNvdmVyIHBhZ2UgZm9yIGFsbCBy
ZWFkaW5nIHN5c3RlbXMuCiAJICogCiAJICogQHBhcmFtIGltYWdlCiAJICogICAgICAgICAgICB0
aGUgY292ZXIgaW1hZ2UgKGpwZWcsIHBuZywgc3ZnIG9yIGdpZikKQEAgLTk4OSw4ICsxMDUxLDgg
QEAKIAl9CiAKIAkvKioKLQkgKiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gYXV0b21hdGlj
YWxseSBnZW5lcmF0ZSB0YWJsZSBvZiBjb250ZW50cyBmcm9tCi0JICogdGhlIHB1YmxpY2F0aW9u
IGNvbnRlbnRzLiBUaGUgZGVmYXVsdCBpcyA8Y29kZT50cnVlPC9jb2RlPgorCSAqIFNwZWNpZmll
cyB3aGV0aGVyIG9yIG5vdCB0byBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIHRhYmxlIG9mIGNvbnRl
bnRzIGZyb20gdGhlIHB1YmxpY2F0aW9uIGNvbnRlbnRzLiBUaGUgZGVmYXVsdAorCSAqIGlzIDxj
b2RlPnRydWU8L2NvZGU+CiAJICogCiAJICogQHBhcmFtIGdlbmVyYXRlVG9jCiAJICogICAgICAg
ICAgICB3aGV0aGVyIG9yIG5vdCB0byBnZW5lcmF0ZSBhIHRhYmxlIG9mIGNvbnRlbnRzCkBAIC0x
MDExLDggKzEwNzMsOCBAQAogCX0KIAogCS8qKgotCSAqIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5v
dCB0byBhdXRvbWF0aWNhbGx5IGluY2x1ZGUgcmVzb3VyY2VzIChmaWxlcykgdGhhdAotCSAqIGFy
ZSByZWZlcmVuY2VkIGluIHRoZSBjb250ZW50cy4gVGhlIGRlZmF1bHQgaXMgPGNvZGU+ZmFsc2U8
L2NvZGU+LgorCSAqIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBhdXRvbWF0aWNhbGx5IGlu
Y2x1ZGUgcmVzb3VyY2VzIChmaWxlcykgdGhhdCBhcmUgcmVmZXJlbmNlZCBpbiB0aGUgY29udGVu
dHMuIFRoZQorCSAqIGRlZmF1bHQgaXMgPGNvZGU+ZmFsc2U8L2NvZGU+LgogCSAqIAogCSAqIEBw
YXJhbSBpbmNsdWRlCiAJICogICAgICAgICAgICB3aGV0aGVyIG9yIG5vdCBhdXRvbWF0aWNhbGx5
IGluY2x1ZGUgcmVzb3VyY2VzCkBAIC0xMDIyLDggKzEwODQsOCBAQAogCX0KIAogCS8qKgotCSAq
IFNwZWNpZmllcyBhIHRhcmdldCBvZiBjb250ZW50cyBmaWxlIGZvciB0aGUgcHVibGljYXRpb24u
IFRoaXMgaXMgYW4KLQkgKiBhbHRlcm5hdGl2ZSB0byB7QGxpbmsgI3NldEdlbmVyYXRlVG9jKGJv
b2xlYW4pfS4KKwkgKiBTcGVjaWZpZXMgYSB0YXJnZXQgb2YgY29udGVudHMgZmlsZSBmb3IgdGhl
IHB1YmxpY2F0aW9uLiBUaGlzIGlzIGFuIGFsdGVybmF0aXZlIHRvCisJICoge0BsaW5rICNzZXRH
ZW5lcmF0ZVRvYyhib29sZWFuKX0uCiAJICogCiAJICogQHBhcmFtIHRvY0ZpbGUKIAkgKiAgICAg
ICAgICAgIHRoZSB0YWJsZSBvZiBjb250ZW50cyBmaWxlCkBAIC0xMDcxLDUwICsxMTMzLDQ5IEBA
CiAJfQogCiAJLyoqCi0JICogV3JpdGVzIGEgWEhUTUwtZmlsZSBmb3IgdGhlIGNvdmVyIGltYWdl
LiBUaGlzIGlzIGFkZGVkIHRvIHRoZSBwdWJsaWNhdGlvbgotCSAqIGFuZCBhbGwgcmVxdWlyZWQg
cmVmZXJlbmNlcyBzZXQuCisJICogV3JpdGVzIGEgWEhUTUwtZmlsZSBmb3IgdGhlIGNvdmVyIGlt
YWdlLiBUaGlzIGlzIGFkZGVkIHRvIHRoZSBwdWJsaWNhdGlvbiBhbmQgYWxsIHJlcXVpcmVkIHJl
ZmVyZW5jZXMgc2V0LgogCSAqIAogCSAqIEBwYXJhbSByb290Rm9sZGVyCiAJICogICAgICAgICAg
ICB0aGUgcHVibGljYXRpb24gcm9vdCBmb2xkZXIKIAkgKiBAdGhyb3dzIElPRXhjZXB0aW9uCi0J
ICogCiAJICovCiAJcHJpdmF0ZSB2b2lkIHdyaXRlQ292ZXJIVE1MKEZpbGUgcm9vdEZvbGRlcikg
dGhyb3dzIElPRXhjZXB0aW9uIHsKIAkJSXRlbSBjb3ZlckltYWdlID0gZ2V0SXRlbUJ5SWQoQ09W
RVJfSU1BR0VfSUQpOwotCQlGaWxlIGNvdmVyRmlsZSA9IG5ldyBGaWxlKHJvb3RGb2xkZXIuZ2V0
QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJjb3Zlci1wYWdlLnhodG1sIik7CisJ
CUZpbGUgY292ZXJGaWxlID0gbmV3IEZpbGUocm9vdEZvbGRlci5nZXRBYnNvbHV0ZVBhdGgoKSAr
IEZpbGUuc2VwYXJhdG9yICsgImNvdmVyLXBhZ2UueGh0bWwiKTsgLy8kTk9OLU5MUy0xJAogCQlp
ZiAoIWNvdmVyRmlsZS5leGlzdHMoKSkgewotCiAJCQl0cnkgeworCQkJCWxvZyhNZXNzYWdlRm9y
bWF0LmZvcm1hdCgiR2VuZXJhdGluZyBjb3ZlciBwYWdlIGZvciBcInswfVwiIiwgY292ZXJJbWFn
ZS5nZXRIcmVmKCkpLCBTZXZlcml0eS5JTkZPLAorCQkJCQkJaW5kZW50KTsKIAkJCQlGaWxlV3Jp
dGVyIGZ3ID0gbmV3IEZpbGVXcml0ZXIoY292ZXJGaWxlKTsKLQkJCQlmdy5hcHBlbmQoIjw/eG1s
IHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cInV0Zi04XCIgc3RhbmRhbG9uZT1cIm5vXCI/Plxu
Iik7Ci0JCQkJZncuYXBwZW5kKCI8IURPQ1RZUEUgaHRtbCBQVUJMSUMgXCItLy9XM0MvL0RURCBY
SFRNTCAxLjEvL0VOXCIgXCJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDExL0RURC94aHRtbDEx
LmR0ZFwiPlxuIik7Ci0JCQkJZncuYXBwZW5kKCI8aHRtbCB4bWxucz1cImh0dHA6Ly93d3cudzMu
b3JnLzE5OTkveGh0bWxcIj5cbiIpOwotCQkJCWZ3LmFwcGVuZCgiICA8aGVhZD5cbiIpOwotCQkJ
CWZ3LmFwcGVuZCgiICAgIDx0aXRsZT4iICsgY292ZXJJbWFnZS5nZXRUaXRsZSgpICsgIjwvdGl0
bGU+XG4iKTsKLQkJCQlmdy5hcHBlbmQoIiAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+Iik7
Ci0JCQkJZncuYXBwZW5kKCIgICAgICAjY292ZXItYm9keSB7XG4iKTsKLQkJCQlmdy5hcHBlbmQo
IiAgICAgICAgbWFyZ2luOiAwcHg7XG4iKTsKLQkJCQlmdy5hcHBlbmQoIiAgICAgICAgdGV4dC1h
bGlnbjogY2VudGVyO1xuIik7Ci0JCQkJZncuYXBwZW5kKCIgICAgICAgIGJhY2tncm91bmQtY29s
b3I6ICMyMjIyMjI7XG4iKTsKLQkJCQlmdy5hcHBlbmQoIiAgICAgIH1cbiIpOwotCQkJCWZ3LmFw
cGVuZCgiICAgICAgI2NvdmVyLWJsb2NrIHtcbiIpOwotCQkJCWZ3LmFwcGVuZCgiICAgICAgICBo
ZWlnaHQ6IDEwMCU7XG4iKTsKLQkJCQlmdy5hcHBlbmQoIiAgICAgICAgbWFyZ2luLXRvcDogMDtc
biIpOwotCQkJCWZ3LmFwcGVuZCgiICAgICAgfVxuIik7Ci0JCQkJZncuYXBwZW5kKCIgICAgICAj
Y292ZXItaW1hZ2Uge1xuIik7Ci0JCQkJZncuYXBwZW5kKCIgICAgICAgIGhlaWdodDogMTAwJTtc
biIpOwotCQkJCWZ3LmFwcGVuZCgiICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4iKTsKLQkJ
CQlmdy5hcHBlbmQoIiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuIik7Ci0JCQkJZncuYXBwZW5k
KCIgICAgICB9XG4iKTsKLQkJCQlmdy5hcHBlbmQoIiAgICA8L3N0eWxlPlxuIik7Ci0JCQkJZncu
YXBwZW5kKCIgIDwvaGVhZD5cbiIpOwotCQkJCWZ3LmFwcGVuZCgiICA8Ym9keSBpZD1cImNvdmVy
LWJvZHlcIj5cbiIpOwotCQkJCWZ3LmFwcGVuZCgiICAgIDxkaXYgaWQ9XCJjb3Zlci1ibG9ja1wi
PlxuIik7Ci0JCQkJZncuYXBwZW5kKCIgICAgICA8aW1nIGlkPVwiY292ZXItaW1hZ2VcIiBzcmM9
XCIiICsgY292ZXJJbWFnZS5nZXRIcmVmKCkgKyAiXCIgYWx0PVwiIgotCQkJCQkJKyBjb3Zlcklt
YWdlLmdldFRpdGxlKCkgKyAiXCIvPlxuIik7Ci0JCQkJZncuYXBwZW5kKCIgICAgPC9kaXY+XG4i
KTsKLQkJCQlmdy5hcHBlbmQoIiAgPC9ib2R5PlxuIik7Ci0JCQkJZncuYXBwZW5kKCI8L2h0bWw+
XG4iKTsKKwkJCQlmdy5hcHBlbmQoIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cInV0
Zi04XCIgc3RhbmRhbG9uZT1cIm5vXCI/PlxuIik7IC8vJE5PTi1OTFMtMSQKKwkJCQlmdy5hcHBl
bmQoIjwhRE9DVFlQRSBodG1sIFBVQkxJQyBcIi0vL1czQy8vRFREIFhIVE1MIDEuMS8vRU5cIiBc
Imh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMTEvRFREL3hodG1sMTEuZHRkXCI+XG4iKTsgLy8k
Tk9OLU5MUy0xJAorCQkJCWZ3LmFwcGVuZCgiPGh0bWwgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9y
Zy8xOTk5L3hodG1sXCI+XG4iKTsgLy8kTk9OLU5MUy0xJAorCQkJCWZ3LmFwcGVuZCgiICA8aGVh
ZD5cbiIpOyAvLyROT04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCIgICAgPHRpdGxlPiIgKyBjb3Zl
ckltYWdlLmdldFRpdGxlKCkgKyAiPC90aXRsZT5cbiIpOyAvLyROT04tTkxTLTEkIC8vJE5PTi1O
TFMtMiQKKwkJCQlmdy5hcHBlbmQoIiAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+Iik7IC8v
JE5PTi1OTFMtMSQKKwkJCQlmdy5hcHBlbmQoIiAgICAgICNjb3Zlci1ib2R5IHtcbiIpOyAvLyRO
T04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCIgICAgICAgIG1hcmdpbjogMHB4O1xuIik7IC8vJE5P
Ti1OTFMtMSQKKwkJCQlmdy5hcHBlbmQoIiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuIik7
IC8vJE5PTi1OTFMtMSQKKwkJCQlmdy5hcHBlbmQoIiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjog
IzIyMjIyMjtcbiIpOyAvLyROT04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCIgICAgICB9XG4iKTsg
Ly8kTk9OLU5MUy0xJAorCQkJCWZ3LmFwcGVuZCgiICAgICAgI2NvdmVyLWJsb2NrIHtcbiIpOyAv
LyROT04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCIgICAgICAgIGhlaWdodDogMTAwJTtcbiIpOyAv
LyROT04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCIgICAgICAgIG1hcmdpbi10b3A6IDA7XG4iKTsg
Ly8kTk9OLU5MUy0xJAorCQkJCWZ3LmFwcGVuZCgiICAgICAgfVxuIik7IC8vJE5PTi1OTFMtMSQK
KwkJCQlmdy5hcHBlbmQoIiAgICAgICNjb3Zlci1pbWFnZSB7XG4iKTsgLy8kTk9OLU5MUy0xJAor
CQkJCWZ3LmFwcGVuZCgiICAgICAgICBoZWlnaHQ6IDEwMCU7XG4iKTsgLy8kTk9OLU5MUy0xJAor
CQkJCWZ3LmFwcGVuZCgiICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4iKTsgLy8kTk9OLU5M
Uy0xJAorCQkJCWZ3LmFwcGVuZCgiICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4iKTsgLy8kTk9O
LU5MUy0xJAorCQkJCWZ3LmFwcGVuZCgiICAgICAgfVxuIik7IC8vJE5PTi1OTFMtMSQKKwkJCQlm
dy5hcHBlbmQoIiAgICA8L3N0eWxlPlxuIik7IC8vJE5PTi1OTFMtMSQKKwkJCQlmdy5hcHBlbmQo
IiAgPC9oZWFkPlxuIik7IC8vJE5PTi1OTFMtMSQKKwkJCQlmdy5hcHBlbmQoIiAgPGJvZHkgaWQ9
XCJjb3Zlci1ib2R5XCI+XG4iKTsgLy8kTk9OLU5MUy0xJAorCQkJCWZ3LmFwcGVuZCgiICAgIDxk
aXYgaWQ9XCJjb3Zlci1ibG9ja1wiPlxuIik7IC8vJE5PTi1OTFMtMSQKKwkJCQlmdy5hcHBlbmQo
IiAgICAgIDxpbWcgaWQ9XCJjb3Zlci1pbWFnZVwiIHNyYz1cIiIgKyBjb3ZlckltYWdlLmdldEhy
ZWYoKSArICJcIiBhbHQ9XCIiIC8vJE5PTi1OTFMtMSQgLy8kTk9OLU5MUy0yJAorCQkJCQkJKyBj
b3ZlckltYWdlLmdldFRpdGxlKCkgKyAiXCIvPlxuIik7IC8vJE5PTi1OTFMtMSQKKwkJCQlmdy5h
cHBlbmQoIiAgICA8L2Rpdj5cbiIpOyAvLyROT04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCIgIDwv
Ym9keT5cbiIpOyAvLyROT04tTkxTLTEkCisJCQkJZncuYXBwZW5kKCI8L2h0bWw+XG4iKTsgLy8k
Tk9OLU5MUy0xJAogCQkJCWZ3LmNsb3NlKCk7CiAJCQl9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7
CiAJCQkJZS5wcmludFN0YWNrVHJhY2UoKTsKQEAgLTExNTQsOSArMTIxNSw4IEBACiAJfQogCiAJ
LyoqCi0JICogSW1wbGVtZW50IHRvIGhhbmRsZSB3cml0aW5nIG9mIHRoZSB0YWJsZSBvZiBjb250
ZW50cy4gTm90ZSB0aGF0IHRoaXMKLQkgKiBtZXRob2Qgc2hvdWxkIGRvIG5vdGhpbmcgaWYgdGhl
IHRhYmxlIG9mIGNvbnRlbnRzIGhhcyBhbHJlYWR5IGJlZW4KLQkgKiBzcGVjaWZpZWQgdXNpbmcg
e0BsaW5rICNzZXRUYWJsZU9mQ29udGVudHMoRmlsZSl9LgorCSAqIEltcGxlbWVudCB0byBoYW5k
bGUgd3JpdGluZyBvZiB0aGUgdGFibGUgb2YgY29udGVudHMuIE5vdGUgdGhhdCB0aGlzIG1ldGhv
ZCBzaG91bGQgZG8gbm90aGluZyBpZiB0aGUgdGFibGUgb2YKKwkgKiBjb250ZW50cyBoYXMgYWxy
ZWFkeSBiZWVuIHNwZWNpZmllZCB1c2luZyB7QGxpbmsgI3NldFRhYmxlT2ZDb250ZW50cyhGaWxl
KX0uCiAJICogCiAJICogQHBhcmFtIHJvb3RGb2xkZXIKIAkgKiAgICAgICAgICAgIHRoZSBmb2xk
ZXIgdG8gd3JpdGUgaW4KZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi5j
b3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9kb2NzL2VwdWIvY29yZS93aWtpdGV4dC9NYXJrdXBU
b09QUy5qYXZhIGIvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3JjL29yZy9lY2xp
cHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL3dpa2l0ZXh0L01hcmt1cFRvT1BTLmphdmEKaW5kZXgg
ZGIwOWE4YS4uMjFhN2NhOSAxMDA2NDQKLS0tIGEvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHVi
LmNvcmUvc3JjL29yZy9lY2xpcHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL3dpa2l0ZXh0L01hcmt1
cFRvT1BTLmphdmEKKysrIGIvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUvc3JjL29y
Zy9lY2xpcHNlL215bHluL2RvY3MvZXB1Yi9jb3JlL3dpa2l0ZXh0L01hcmt1cFRvT1BTLmphdmEK
QEAgLTEsMTIgKzEsMTMgQEAKIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi0gKiBDb3B5cmlnaHQg
KGMpIDIwMTEgVG9ya2lsZCBVLiBSZXNoZWltLgorICogQ29weXJpZ2h0IChjKSAyMDExLDIwMTIg
VG9ya2lsZCBVLiBSZXNoZWltLgogICogCiAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHBy
b2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzIGFyZSBtYWRlCiAgKiBhdmFpbGFi
bGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjAgd2hp
Y2gKICAqIGFjY29tcGFuaWVzIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0
CiAgKiBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbAogICogCi0gKiBD
b250cmlidXRvcnM6IFRvcmtpbGQgVS4gUmVzaGVpbSAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1l
bnRhdGlvbgorICogQ29udHJpYnV0b3JzOiAKKyAqICAgVG9ya2lsZCBVLiBSZXNoZWltIC0gaW5p
dGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIHBh
Y2thZ2Ugb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUud2lraXRleHQ7CiAKQEAgLTI3
LDggKzI4LDcgQEAKIGltcG9ydCBvcmcuZWNsaXBzZS5teWx5bi53aWtpdGV4dC5jb3JlLnV0aWwu
WG1sU3RyZWFtV3JpdGVyOwogCiAvKioKLSAqIFRoaXMgdHlwZSBjYW4gYmUgdXNlZCB0byBwb3B1
bGF0ZSBhbiBPUFMgcHVibGljYXRpb24gZGlyZWN0bHkgZnJvbSBXaWtpVGV4dAotICogbWFya3Vw
LgorICogVGhpcyB0eXBlIGNhbiBiZSB1c2VkIHRvIHBvcHVsYXRlIGFuIE9QUyBwdWJsaWNhdGlv
biBkaXJlY3RseSBmcm9tIFdpa2lUZXh0IG1hcmt1cC4KICAqIAogICogQGF1dGhvciBUb3JraWxk
IFUuIFJlc2hlaW0KICAqIEBzaW5jZSAxLjAKQEAgLTQ0LDcgKzQ0LDYgQEAKIAkgKiAgICAgICAg
ICAgIHRoZSBPUFMgcHVibGljYXRpb24gdGhlIGNvbnRlbnQgd2lsbCBiZSBhZGRlZCB0bwogCSAq
IEBwYXJhbSBtYXJrdXBGaWxlCiAJICogICAgICAgICAgICB0aGUgV2lraVRleHQgbWFya3VwIGZp
bGUKLQkgKiAKIAkgKiBAcmV0dXJuIHRoZSB0ZW1wb3JhcnkgZm9sZGVyIHVzZWQgZm9yIGdlbmVy
YXRpbmcgdGhlIEhUTUwgZnJvbSBtYXJrdXAKIAkgKi8KIAlwdWJsaWMgRmlsZSBwYXJzZShPUFNQ
dWJsaWNhdGlvbiBvcHMsIEZpbGUgbWFya3VwRmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uLCBGaWxl
Tm90Rm91bmRFeGNlcHRpb24gewpAQCAtNTIsOSArNTEsOSBAQAogCQkJdGhyb3cgbmV3IElsbGVn
YWxTdGF0ZUV4Y2VwdGlvbigibXVzdCBzZXQgbWFya3VwTGFuZ3VhZ2UiKTsgLy8kTk9OLU5MUy0x
JAogCQl9CiAJCS8vIENyZWF0ZSBhIHRlbXBvcmFyeSB3b3JraW5nIGZvbGRlcgotCQlGaWxlIHdv
cmtpbmdGb2xkZXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJ3aWtpdGV4dF8iLCBudWxsKTsKKwkJ
RmlsZSB3b3JraW5nRm9sZGVyID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgid2lraXRleHRfIiwgbnVs
bCk7IC8vJE5PTi1OTFMtMSQKIAkJaWYgKHdvcmtpbmdGb2xkZXIuZGVsZXRlKCkgJiYgd29ya2lu
Z0ZvbGRlci5ta2RpcnMoKSkgewotCQkJRmlsZSBodG1sRmlsZSA9IG5ldyBGaWxlKHdvcmtpbmdG
b2xkZXIuZ2V0QWJzb2x1dGVQYXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJtYXJrdXAuaHRtbCIp
OworCQkJRmlsZSBodG1sRmlsZSA9IG5ldyBGaWxlKHdvcmtpbmdGb2xkZXIuZ2V0QWJzb2x1dGVQ
YXRoKCkgKyBGaWxlLnNlcGFyYXRvciArICJtYXJrdXAuaHRtbCIpOyAvLyROT04tTkxTLTEkCiAJ
CQlGaWxlV3JpdGVyIG91dCA9IG5ldyBGaWxlV3JpdGVyKGh0bWxGaWxlKTsKIAkJCUh0bWxEb2N1
bWVudEJ1aWxkZXIgYnVpbGRlciA9IG5ldyBIdG1sRG9jdW1lbnRCdWlsZGVyKG91dCkgewogCQkJ
CUBPdmVycmlkZQpAQCAtNzEsNyArNzAsNyBAQAogCQkJfQogCQkJLy8gTWFrZSBzdXJlIHdlIGdl
dCB0aGUgY29ycmVjdCBYSFRNTCBoZWFkZXIKIAkJCWJ1aWxkZXIuc2V0RW1pdER0ZCh0cnVlKTsK
LQkJCWJ1aWxkZXIuc2V0SHRtbER0ZCgiPCFET0NUWVBFIGh0bWwgUFVCTElDIFwiLS8vVzNDLy9E
VEQgWEhUTUwgMS4xLy9FTlwiIFwiaHR0cDovL3d3dy53My5vcmcvVFIveGh0bWwxMS9EVEQveGh0
bWwxMS5kdGRcIj4iKTsKKwkJCWJ1aWxkZXIuc2V0SHRtbER0ZCgiPCFET0NUWVBFIGh0bWwgUFVC
TElDIFwiLS8vVzNDLy9EVEQgWEhUTUwgMS4xLy9FTlwiIFwiaHR0cDovL3d3dy53My5vcmcvVFIv
eGh0bWwxMS9EVEQveGh0bWwxMS5kdGRcIj4iKTsgLy8kTk9OLU5MUy0xJAogCQkJYnVpbGRlci5z
ZXRYaHRtbFN0cmljdCh0cnVlKTsKIAogCQkJTWFya3VwUGFyc2VyIG1hcmt1cFBhcnNlciA9IG5l
dyBNYXJrdXBQYXJzZXIoKTsKZGlmZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1
Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9pbnRlcm5hbC9kb2NzL2VwdWIvY29yZS9PUFMy
VmFsaWRhdG9yLmphdmEgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZS9zcmMvb3Jn
L2VjbGlwc2UvbXlseW4vaW50ZXJuYWwvZG9jcy9lcHViL2NvcmUvT1BTMlZhbGlkYXRvci5qYXZh
CmluZGV4IGIyZTEwYjMuLjgxN2FlY2IgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLm15bHluLmRv
Y3MuZXB1Yi5jb3JlL3NyYy9vcmcvZWNsaXBzZS9teWx5bi9pbnRlcm5hbC9kb2NzL2VwdWIvY29y
ZS9PUFMyVmFsaWRhdG9yLmphdmEKKysrIGIvb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNv
cmUvc3JjL29yZy9lY2xpcHNlL215bHluL2ludGVybmFsL2RvY3MvZXB1Yi9jb3JlL09QUzJWYWxp
ZGF0b3IuamF2YQpAQCAtMTYsMTAgKzE2LDkgQEAKIGltcG9ydCBvcmcueG1sLnNheC5oZWxwZXJz
LkRlZmF1bHRIYW5kbGVyOwogCiAvKioKLSAqIFRoaXMgdHlwZSBpcyBhIFNBWCBwYXJzZXIgdGhh
dCB3aWxsIHJlYWQgYSBYSFRNTCBmaWxlIGFuZCBwcm9kdWNlIGEgbmV3Ci0gKiB2ZXJzaW9uIHdo
ZXJlIGVsZW1lbnRzIGFuZCBhdHRyaWJ1dGVzIG5vdCBpbiB0aGUgRVBVQiAyLjAuMSA8Yj5wcmVm
ZXJyZWQ8L2I+Ci0gKiB2b2NhYnVsYXJ5IGFyZSBzdHJpcHBlZC4gQWx0ZXJuYXRpdmVseSB3YXJu
aW5ncyBjYW4gYmUgaXNzdWVkIHdoZW4gc3VjaAotICogZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXMg
YXJlIGZvdW5kLgorICogVGhpcyB0eXBlIGlzIGEgU0FYIHBhcnNlciB0aGF0IHdpbGwgcmVhZCBh
IFhIVE1MIGZpbGUgYW5kIHByb2R1Y2UgYSBuZXcgdmVyc2lvbiB3aGVyZSBlbGVtZW50cyBhbmQg
YXR0cmlidXRlcyBub3QgaW4KKyAqIHRoZSBFUFVCIDIuMC4xIDxiPnByZWZlcnJlZDwvYj4gdm9j
YWJ1bGFyeSBhcmUgc3RyaXBwZWQuIEFsdGVybmF0aXZlbHkgd2FybmluZ3MgY2FuIGJlIGlzc3Vl
ZCB3aGVuIHN1Y2ggZWxlbWVudHMgYW5kCisgKiBhdHRyaWJ1dGVzIGFyZSBmb3VuZC4KICAqIAog
ICogQGF1dGhvciBUb3JraWxkIFUuIFJlc2hlaW0KICAqIEBzZWUgaHR0cDovL2lkcGYub3JnL2Vw
dWIvMjAvc3BlYy9PUFNfMi4wLjFfZHJhZnQuaHRtCkBAIC00NSw4ICs0NCw3IEBACiAJCXJldHVy
biBtZXNzYWdlczsKIAl9CiAKLQlwdWJsaWMgc3RhdGljIExpc3Q8VmFsaWRhdGlvbk1lc3NhZ2U+
IHZhbGlkYXRlKElucHV0U291cmNlIGZpbGUsIFN0cmluZyBocmVmKQotCQkJdGhyb3dzIFBhcnNl
ckNvbmZpZ3VyYXRpb25FeGNlcHRpb24sCisJcHVibGljIHN0YXRpYyBMaXN0PFZhbGlkYXRpb25N
ZXNzYWdlPiB2YWxpZGF0ZShJbnB1dFNvdXJjZSBmaWxlLCBTdHJpbmcgaHJlZikgdGhyb3dzIFBh
cnNlckNvbmZpZ3VyYXRpb25FeGNlcHRpb24sCiAJCQlTQVhFeGNlcHRpb24sIElPRXhjZXB0aW9u
IHsKIAkJU0FYUGFyc2VyRmFjdG9yeSBmYWN0b3J5ID0gU0FYUGFyc2VyRmFjdG9yeS5uZXdJbnN0
YW5jZSgpOwogCQlmYWN0b3J5LnNldEZlYXR1cmUoImh0dHA6Ly94bWwub3JnL3NheC9mZWF0dXJl
cy92YWxpZGF0aW9uIiwgZmFsc2UpOwpAQCAtNzksNiArNzcsNyBAQAogCQl9CiAJCXJldHVybiBu
dWxsOwogCX0KKwogCXByaXZhdGUgU3RyaW5nQnVpbGRlciBidWZmZXIgPSBudWxsOwogCiAJcHJp
dmF0ZSBmaW5hbCBTdHJpbmdbXSBsZWdhbEF0dHJpYnV0ZXMgPSBuZXcgU3RyaW5nW10geyAiYWNj
ZXNza2V5IiwgImNoYXJzZXQiLCAiY2xhc3MiLCAiY29vcmRzIiwgImRpciIsICJocmVmIiwKZGlm
ZiAtLWdpdCBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi50ZXN0cy9NRVRBLUlORi9NQU5J
RkVTVC5NRiBiL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi50ZXN0cy9NRVRBLUlORi9NQU5J
RkVTVC5NRgppbmRleCAyYWU3MjJlLi5kNzgxYWJkIDEwMDY0NAotLS0gYS9vcmcuZWNsaXBzZS5t
eWx5bi5kb2NzLmVwdWIudGVzdHMvTUVUQS1JTkYvTUFOSUZFU1QuTUYKKysrIGIvb3JnLmVjbGlw
c2UubXlseW4uZG9jcy5lcHViLnRlc3RzL01FVEEtSU5GL01BTklGRVNULk1GCkBAIC01LDE3ICs1
LDExIEBACiBCdW5kbGUtVmVyc2lvbjogMC44LjAucXVhbGlmaWVyCiBCdW5kbGUtVmVuZG9yOiBU
b3JraWxkIFUuIFJlc2hlaW0KIEJ1bmRsZS1SZXF1aXJlZEV4ZWN1dGlvbkVudmlyb25tZW50OiBK
MlNFLTEuNQotUmVxdWlyZS1CdW5kbGU6IG9yZy5lY2xpcHNlLmVtZi5kYXRhYmluZGluZy5lZGl0
LAotIG9yZy5lY2xpcHNlLmVtZi5lY29yZS5jaGFuZ2UuZWRpdCwKLSBvcmcuZWNsaXBzZS5lbWYu
ZWNvcmUuZWRpdG9yLAotIG9yZy5lY2xpcHNlLmVtZi5leHBvcnRlciwKLSBvcmcuZWNsaXBzZS5l
bWYuaW1wb3J0ZXIsCi0gb3JnLmVjbGlwc2UuZW1mLm1hcHBpbmcuZWNvcmUyZWNvcmUuZWRpdG9y
LAotIG9yZy5lY2xpcHNlLmVtZi5tYXBwaW5nLmVjb3JlMnhtbC51aSwKLSBvcmcuanVuaXQsCitS
ZXF1aXJlLUJ1bmRsZTogb3JnLmp1bml0LAogIG9yZy5hcGFjaGUuYW50O2J1bmRsZS12ZXJzaW9u
PSIxLjguMiIsCi0gb3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmUsCi0gb3JnLmFwYWNo
ZS5hbnQuc291cmNlO2J1bmRsZS12ZXJzaW9uPSIxLjguMiIKKyBvcmcuYXBhY2hlLmFudC5zb3Vy
Y2U7YnVuZGxlLXZlcnNpb249IjEuOC4yIiwKKyBvcmcuZWNsaXBzZS5lbWYuZWNvcmU7YnVuZGxl
LXZlcnNpb249IjIuNS4wIiwKKyBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIuY29yZTtidW5k
bGUtdmVyc2lvbj0iMC44LjAiCiBCdW5kbGUtQ2xhc3NQYXRoOiAuLAogIGVwdWJjaGVjay9lcHVi
Y2hlY2stMS4yLmphciwKICBlcHViY2hlY2svbGliL2ppbmcuamFyLApkaWZmIC0tZ2l0IGEvb3Jn
LmVjbGlwc2UubXlseW4uZG9jcy5lcHViLnVpL01FVEEtSU5GL01BTklGRVNULk1GIGIvb3JnLmVj
bGlwc2UubXlseW4uZG9jcy5lcHViLnVpL01FVEEtSU5GL01BTklGRVNULk1GCmluZGV4IDc3NGY3
NGMuLjI0ZjczZGEgMTAwNjQ0Ci0tLSBhL29yZy5lY2xpcHNlLm15bHluLmRvY3MuZXB1Yi51aS9N
RVRBLUlORi9NQU5JRkVTVC5NRgorKysgYi9vcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVwdWIudWkv
TUVUQS1JTkYvTUFOSUZFU1QuTUYKQEAgLTUsMjIgKzUsMTYgQEAKIEJ1bmRsZS1WZXJzaW9uOiAw
LjguMC5xdWFsaWZpZXIKIEJ1bmRsZS1WZW5kb3I6ICVCdW5kbGUtVmVuZG9yCiBCdW5kbGUtUmVx
dWlyZWRFeGVjdXRpb25FbnZpcm9ubWVudDogSmF2YVNFLTEuNgotUmVxdWlyZS1CdW5kbGU6IG9y
Zy5lY2xpcHNlLmNvcmUucnVudGltZTtidW5kbGUtdmVyc2lvbj0iWzMuNi4wLDQuMC4wKSIsCi0g
b3JnLmVjbGlwc2UubXlseW4uZG9jcy5lcHViLmNvcmU7YnVuZGxlLXZlcnNpb249IlswLjguMCwx
LjAuMCkiLAotIG9yZy5lY2xpcHNlLm15bHluLndpa2l0ZXh0LnVpO2J1bmRsZS12ZXJzaW9uPSJb
MS41LjAsMi4wLjApIiwKLSBvcmcuZWNsaXBzZS5teWx5bi53aWtpdGV4dC5jb3JlO2J1bmRsZS12
ZXJzaW9uPSJbMS41LjAsMi4wLjApIiwKLSBvcmcuZWNsaXBzZS5jb3JlLnJlc291cmNlcztidW5k
bGUtdmVyc2lvbj0iWzMuNi4wLDQuMC4wKSIsCi0gb3JnLmVjbGlwc2UudWk7YnVuZGxlLXZlcnNp
b249IlszLjYuMCw0LjAuMCkiLAotIG9yZy5lY2xpcHNlLmNvcmUuZGF0YWJpbmRpbmcsCi0gb3Jn
LmVjbGlwc2UuY29yZS5kYXRhYmluZGluZy5iZWFucywKLSBvcmcuZWNsaXBzZS5jb3JlLmRhdGFi
aW5kaW5nLm9ic2VydmFibGUsCi0gb3JnLmVjbGlwc2UuY29yZS5kYXRhYmluZGluZy5wcm9wZXJ0
eSwKLSBvcmcuZWNsaXBzZS5qZmFjZS5kYXRhYmluZGluZywKLSBjb20uaWJtLmljdSwKLSBvcmcu
ZWNsaXBzZS5lbWYuZWNvcmU7YnVuZGxlLXZlcnNpb249IjIuNS4wIiwKLSBvcmcuZWNsaXBzZS5l
bWYuZGF0YWJpbmRpbmcsCi0gb3JnLmVjbGlwc2UuZW1mLnZhbGlkYXRpb24sCi0gb3JnLmVjbGlw
c2UuZW1mLnZhbGlkYXRpb24udWkKK1JlcXVpcmUtQnVuZGxlOiBvcmcuZWNsaXBzZS5jb3JlLnJ1
bnRpbWU7YnVuZGxlLXZlcnNpb249IjMuNS4wIiwKKyBvcmcuZWNsaXBzZS5teWx5bi5kb2NzLmVw
dWIuY29yZTtidW5kbGUtdmVyc2lvbj0iMC44LjAiLAorIG9yZy5lY2xpcHNlLm15bHluLndpa2l0
ZXh0LnVpO2J1bmRsZS12ZXJzaW9uPSIxLjUuMCIsCisgb3JnLmVjbGlwc2UubXlseW4ud2lraXRl
eHQuY29yZTtidW5kbGUtdmVyc2lvbj0iMS41LjAiLAorIG9yZy5lY2xpcHNlLmNvcmUucmVzb3Vy
Y2VzO2J1bmRsZS12ZXJzaW9uPSIzLjUuMCIsCisgb3JnLmVjbGlwc2UudWk7YnVuZGxlLXZlcnNp
b249IjMuNS4wIiwKKyBvcmcuZWNsaXBzZS5jb3JlLmRhdGFiaW5kaW5nO2J1bmRsZS12ZXJzaW9u
PSIxLjQuMCIsCisgb3JnLmVjbGlwc2UuY29yZS5kYXRhYmluZGluZy5iZWFucztidW5kbGUtdmVy
c2lvbj0iMS4yLjEwMCIsCisgb3JnLmVjbGlwc2UuamZhY2UuZGF0YWJpbmRpbmc7YnVuZGxlLXZl
cnNpb249IjEuNS4wIiwKKyBvcmcuZWNsaXBzZS5lbWYuZWNvcmU7YnVuZGxlLXZlcnNpb249IjIu
NS4wIgogQnVuZGxlLUNsYXNzUGF0aDogLgogQnVuZGxlLUFjdGl2YXRvcjogb3JnLmVjbGlwc2Uu
bXlseW4uaW50ZXJuYWwuZG9jcy5lcHViLnVpLkVQVUJVSVBsdWdpbgogQnVuZGxlLUFjdGl2YXRp
b25Qb2xpY3k6IGxhenk=
</data>

          </attachment>
      

    </bug>

</bugzilla>