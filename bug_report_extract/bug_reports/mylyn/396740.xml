<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>396740</bug_id>
          
          <creation_ts>2012-12-17 07:25:00 -0500</creation_ts>
          <short_desc>integration tests fails with EPUB compile error</short_desc>
          <delta_ts>2013-02-02 04:51:53 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Docs</product>
          <component>EPUB</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P2</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>1.8.0</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="Torkild Resheim">torkildr</assigned_to>
          <cc>torkildr</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2195200</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-12-17 07:25:27 -0500</bug_when>
    <thetext>https://hudson.eclipse.org/hudson/user/spingel/my-views/view/Mylyn/job/mylyn-integration/68/TARGET=helios,ppc64=hudson-slave7(ppc64)/console

[INFO] ------------------------------------------------------------------------
[INFO] o.h.m.e.h.MavenExecutionResultHandler - Build failed with exception(s)
[INFO] o.h.m.e.h.MavenExecutionResultHandler - [1] org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.eclipse.tycho:tycho-compiler-plugin:0.15.0:compile (default-compile) on project org.eclipse.mylyn.docs.epub.tests: Compilation failure
[DEBUG] Closing connection to remote
[ERROR] Failed to execute goal org.eclipse.tycho:tycho-compiler-plugin:0.15.0:compile (default-compile) on project org.eclipse.mylyn.docs.epub.tests: Compilation failure: Compilation failure:
[ERROR] /opt/users/hudsonbuild/hudson/workspace/mylyn-integration/TARGET/helios/ppc64/hudson-slave7(ppc64)/org.eclipse.mylyn.docs/org.eclipse.mylyn.docs.epub.tests/src/org/eclipse/mylyn/docs/epub/tests/ValidationReport.java:[16,0]
[ERROR] import com.adobe.epubcheck.api.Report;
[ERROR] ^^^^^^^^^


The mylyn-integration job runs against different branches, i.e. it may switch between master and the 3.8.x maintenance branch between builds. The previous maintenance build did not show that same problem: https://hudson.eclipse.org/hudson/user/spingel/my-views/view/Mylyn/job/mylyn-integration/67/.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2195207</commentid>
    <comment_count>1</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-12-17 07:35:10 -0500</bug_when>
    <thetext>Thanks, I&apos;ll have a look. At first sight this appears to be a case of the EPUB check libraries not being downloaded due to a network failure. I&apos;ll try to make this mechanism more robust.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2195898</commentid>
    <comment_count>2</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2012-12-18 14:33:08 -0500</bug_when>
    <thetext>According to the log a new version of epubcheck was downloaded, so that was not the problem. Anyway I made the script a bit more robust and added some logging.

You were right about the branch issue; it appears that the master was compiled on Hudson first then the older version. This lead to a mismatch in epubcheck version. Switching between the two branches appears to work nicely now.

However There is a number of minor improvements and fixes I&apos;ve made since the 3.8.0 release that has not been merged into the maintenance branch. I&apos;m wondering whether or not it would be OK to go ahead and merge these in.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2196063</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-12-19 04:01:58 -0500</bug_when>
    <thetext>(In reply to comment #2)
&gt; However There is a number of minor improvements and fixes I&apos;ve made since the
&gt; 3.8.0 release that has not been merged into the maintenance branch. I&apos;m
&gt; wondering whether or not it would be OK to go ahead and merge these in.

That&apos;s your call. Note that we can&apos;t add API in the 3.8.x branch but bug fixes are fine. If fixes are backported the corresponding Bugzilla bugs should be set to the appropriate 3.8.x milestone. The next planned release is 3.8.3 (bug 395565).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2198145</commentid>
    <comment_count>4</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2013-01-02 14:28:53 -0500</bug_when>
    <thetext>Thanks Steffen, the improvements include API changes so I&apos;l just leave it alone. Could you please start another build of the same target so that we can see whether or not the adjustments I made to fix this bug are good? I do not have access to do so.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2211000</commentid>
    <comment_count>5</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-02-01 05:17:47 -0500</bug_when>
    <thetext>The last build passed. Feel free to close this task. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2211350</commentid>
    <comment_count>6</comment_count>
    <who name="Torkild Resheim">torkildr</who>
    <bug_when>2013-02-02 04:51:53 -0500</bug_when>
    <thetext>Great! Thanks for following up on this one.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>