<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>352918</bug_id>
          
          <creation_ts>2011-07-22 17:43:00 -0400</creation_ts>
          <short_desc>attribute editors generate duplicate change event when task attribute changed</short_desc>
          <delta_ts>2011-07-28 14:33:04 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Framework</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>contributed</keywords>
          <priority>P3</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>3.6.1</target_milestone>
          
          <blocked>350561</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Sam Davis">sam.davis</reporter>
          <assigned_to name="Sam Davis">sam.davis</assigned_to>
          
          
          <votes>0</votes>

      

      

      <flag name="juno"
          id="44836"
          type_id="12"
          status="+"
          setter="steffen.pingel"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1969160</commentid>
    <comment_count>0</comment_count>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2011-07-22 17:43:36 -0400</bug_when>
    <thetext>When TextAttributeEditor or RichTextAttributeEditor are refresh()ed, they call attributeChanged. I&apos;m not sure if any other attribute editors have this problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1969161</commentid>
    <comment_count>1</comment_count>
      <attachid>200228</attachid>
    <who name="Sam Davis">sam.davis</who>
    <bug_when>2011-07-22 17:47:51 -0400</bug_when>
    <thetext>Created attachment 200228
fix

This should fix it, unless there are any attribute editors that have this problem and call attributeChanged directly on the model.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1971286</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-07-27 18:33:05 -0400</bug_when>
    <thetext>Thanks. We should fix this. Would you be able to include a test case?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1971743</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-07-28 13:31:21 -0400</bug_when>
    <thetext>Attribute editors should not be invoking attributeChanged() unless a user interaction happens. TextAttributeEditor or RichTextAttributeEditor guard against that but LongTextEditor does not which caused bug 350561.

To fix it I have applied the patch to the master and e_3_7_m_3_6_x branches: c68c0975a0b613575a96faceb94adc8fd26e5afd. 

Thanks for looking into this Sam. Apparently, the previous API contract was too brittle (considering that the framework did not observe it correctly) and your patch helps to make this more robust and simpler to implement for clients.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>1971785</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-07-28 14:33:04 -0400</bug_when>
    <thetext>Marking resolved.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>200228</attachid>
            <date>2011-07-22 17:47:00 -0400</date>
            <delta_ts>2011-07-22 17:47:51 -0400</delta_ts>
            <desc>fix</desc>
            <filename>clipboard.txt</filename>
            <type>text/plain</type>
            <size>1405</size>
            <attacher name="Sam Davis">sam.davis</attacher>
            
              <data encoding="base64">IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3JnLmVjbGlwc2UubXlseW4udGFz
a3MudWkNCkluZGV4OiBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFza3MvdWkvZWRpdG9ycy9BYnN0
cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2c3Jvb3Qv
bXlseW4vb3JnLmVjbGlwc2UubXlseW4udGFza3Mvb3JnLmVjbGlwc2UubXlseW4udGFza3MudWkv
c3JjL29yZy9lY2xpcHNlL215bHluL3Rhc2tzL3VpL2VkaXRvcnMvQWJzdHJhY3RBdHRyaWJ1dGVF
ZGl0b3IuamF2YSx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMjENCmRpZmYgLXUgLXIxLjIxIEFi
c3RyYWN0QXR0cmlidXRlRWRpdG9yLmphdmENCi0tLSBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFz
a3MvdWkvZWRpdG9ycy9BYnN0cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhCTE3IE1heSAyMDExIDIz
OjQwOjE1IC0wMDAwCTEuMjENCisrKyBzcmMvb3JnL2VjbGlwc2UvbXlseW4vdGFza3MvdWkvZWRp
dG9ycy9BYnN0cmFjdEF0dHJpYnV0ZUVkaXRvci5qYXZhCTIyIEp1bCAyMDExIDIxOjQ2OjM0IC0w
MDAwDQpAQCAtNjAsMTMgKzYwLDE4IEBADQogDQogCXByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9u
Ow0KIA0KKwlwcml2YXRlIGJvb2xlYW4gcmVmcmVzaEluUHJvZ3Jlc3M7DQorDQogCXByaXZhdGUg
ZmluYWwgVGFza0RhdGFNb2RlbExpc3RlbmVyIG1vZGVsTGlzdGVuZXIgPSBuZXcgVGFza0RhdGFN
b2RlbExpc3RlbmVyKCkgew0KIAkJQE92ZXJyaWRlDQogCQlwdWJsaWMgdm9pZCBhdHRyaWJ1dGVD
aGFuZ2VkKFRhc2tEYXRhTW9kZWxFdmVudCBldmVudCkgew0KIAkJCWlmIChzaG91bGRBdXRvUmVm
cmVzaCgpICYmIGdldFRhc2tBdHRyaWJ1dGUoKS5lcXVhbHMoZXZlbnQuZ2V0VGFza0F0dHJpYnV0
ZSgpKSkgew0KIAkJCQl0cnkgew0KKwkJCQkJcmVmcmVzaEluUHJvZ3Jlc3MgPSB0cnVlOw0KIAkJ
CQkJcmVmcmVzaCgpOw0KIAkJCQl9IGNhdGNoIChVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlv
biBlKSB7DQorCQkJCX0gZmluYWxseSB7DQorCQkJCQlyZWZyZXNoSW5Qcm9ncmVzcyA9IGZhbHNl
Ow0KIAkJCQl9DQogCQkJfQ0KIAkJfQ0KQEAgLTk2LDcgKzEwMSw5IEBADQogCSAqIEBzaW5jZSAz
LjANCiAJICovDQogCXByb3RlY3RlZCB2b2lkIGF0dHJpYnV0ZUNoYW5nZWQoKSB7DQotCQlnZXRN
b2RlbCgpLmF0dHJpYnV0ZUNoYW5nZWQoZ2V0VGFza0F0dHJpYnV0ZSgpKTsNCisJCWlmICghcmVm
cmVzaEluUHJvZ3Jlc3MpIHsNCisJCQlnZXRNb2RlbCgpLmF0dHJpYnV0ZUNoYW5nZWQoZ2V0VGFz
a0F0dHJpYnV0ZSgpKTsNCisJCX0NCiAJfQ0KIA0KIAkvKioNCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>