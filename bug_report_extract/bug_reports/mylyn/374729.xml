<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>374729</bug_id>
          
          <creation_ts>2012-03-20 04:06:00 -0400</creation_ts>
          <short_desc>update GSon library to latest version</short_desc>
          <delta_ts>2012-05-23 18:24:30 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Reviews</product>
          <component>Framework</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>1.0</target_milestone>
          <dependson>369920</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="Steffen Pingel">steffen.pingel</assigned_to>
          <cc>bhunt</cc>
    
    <cc>marc-andre.laperle</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2082983</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-20 04:06:58 -0400</bug_when>
    <thetext>Consume the latest version of the GSon library from Orbit. This may require code changes:

com.google.gson.JsonSyntaxException: Expecting character, got: MERGE_IF_NECESSARY
	at com.google.gson.internal.bind.TypeAdapters$12.read(TypeAdapters.java:322)
	at com.google.gson.internal.bind.TypeAdapters$12.read(TypeAdapters.java:313)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
	at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)
	at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:81)
	at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:60)
	at com.google.gson.Gson.fromJson(Gson.java:755)
	at com.google.gson.Gson.fromJson(Gson.java:819)
	at org.eclipse.mylyn.internal.gerrit.core.client.JSonSupport.parseResponse(JSonSupport.java:207)
	at org.eclipse.mylyn.internal.gerrit.core.client.GerritService.invoke(GerritService.java:106)
	at $Proxy4.visibleProjects(Unknown Source)
	at org.eclipse.mylyn.internal.gerrit.core.client.GerritClient$22.execute(GerritClient.java:802)
	at org.eclipse.mylyn.internal.gerrit.core.client.GerritClient.executeOnce(GerritClient.java:877)
	at org.eclipse.mylyn.internal.gerrit.core.client.GerritClient.execute(GerritClient.java:863)
	at org.eclipse.mylyn.internal.gerrit.core.client.GerritClient.getVisibleProjects(GerritClient.java:799)
	at org.eclipse.mylyn.internal.gerrit.core.client.GerritClient.refreshConfig(GerritClient.java:640)
	at org.eclipse.mylyn.gerrit.tests.core.client.GerritClientTest.testRefreshConfig(GerritClientTest.java:62)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2102024</commentid>
    <comment_count>1</comment_count>
    <who name="Marc-Andre Laperle">marc-andre.laperle</who>
    <bug_when>2012-05-02 23:43:59 -0400</bug_when>
    <thetext>Hi Steffen, one of my installations is Eclipse 3.8.0-I20120314-1800 and I&apos;m not sure how but I got a newish version of Gson (2.1.0.20120321). Unfortunately, I get this exception and can&apos;t connect to Gerrit. Does that mean M7 will have this problem? Or perhaps it is planned to be fixed by then? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2102167</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-05-03 06:14:24 -0400</bug_when>
    <thetext>If you update to the latest 3.7.1 release or integration build you should not get that error any longer. The Gerrit connector now sets proper version constraints for the consumed GSon library. Please let me know in case you still get the error with the latest.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2102630</commentid>
    <comment_count>3</comment_count>
    <who name="Marc-Andre Laperle">marc-andre.laperle</who>
    <bug_when>2012-05-04 01:19:20 -0400</bug_when>
    <thetext>It worked, thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2106243</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-05-10 19:39:29 -0400</bug_when>
    <thetext>There is still a problem when code recommenders is installed in the same runtime as the Gerrit connector. From bug 365594:

java.lang.LinkageError: loader constraint violation: loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) previously initiated loading for a different type with name &quot;com/google/gson/GsonBuilder&quot;
	at org.eclipse.mylyn.internal.gerrit.core.client.JSonSupport.&lt;init&gt;(JSonSupport.java:122)

osgi&gt; p com.google.gson
com.google.gson; version=&quot;1.6.0&quot;&lt;com.google.gson_1.6.0.v201101131530 [5]&gt;
  org.eclipse.mylyn.hudson.core_1.0.0.I20120509-1226 [269] imports
  org.eclipse.mylyn.gerrit.core_0.9.1.v20120425-0100 [413] imports
  org.eclipse.mylyn.gerrit.ui_0.9.1.v20120425-0100 [414] imports
com.google.gson; version=&quot;2.1.0&quot;&lt;com.google.gson_2.1.0.201204241625 [6]&gt;
  org.eclipse.recommenders.completion.rcp_0.5.2.v20120509-1951-b101 [308] imports
  org.eclipse.recommenders.completion.rcp.calls_0.5.2.v20120509-1951-b101 [309] imports
  org.eclipse.recommenders.completion.rcp.chain_0.5.2.v20120509-1951-b101 [310] imports
  org.eclipse.recommenders.completion.rcp.overrides_0.5.2.v20120509-1951-b101 [312] imports
  org.eclipse.recommenders.completion.rcp.subwords_0.5.2.v20120509-1951-b101 [313] imports
  org.eclipse.recommenders.completion.rcp.templates_0.5.2.v20120509-1951-b101 [314] imports
  org.eclipse.recommenders.extdoc_0.5.2.v20120509-1951-b101 [316] imports
  org.eclipse.recommenders.extdoc.rcp_0.5.2.v20120509-1951-b101 [317] imports
  org.eclipse.recommenders.jayes.serialization_0.5.2.v20120509-1951-b101 [320] imports
  org.eclipse.recommenders.rcp_0.5.2.v20120509-1951-b101 [321] imports
  org.eclipse.recommenders.utils_0.5.2.v20120509-1951-b101 [322] imports
  org.eclipse.recommenders.utils.rcp_0.5.2.v20120509-1951-b101 [323] imports
  org.eclipse.recommenders.webclient_0.5.2.v20120509-1951-b101 [324] imports
  com.google.gwtjsonrpc_1.2.5.v201112241444 [409] imports</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2108067</commentid>
    <comment_count>5</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-05-15 05:44:29 -0400</bug_when>
    <thetext>Apparently GSon 2.1 fails to deserialize the SubmitType enum. I tried registering a type adapter user ...registerTypeAdapter(SubmitType.class, new JsonDeserializer&lt;SubmitType&gt;()... in JSonSupport but that was never invoked. I pushed a change that ignores the field entirely instead since it&apos;s not used by the Gerrit connector.

The proposed change is here: https://git.eclipse.org/r/5985</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2109959</commentid>
    <comment_count>6</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-05-18 05:53:52 -0400</bug_when>
    <thetext>I have sumbitted the proposed change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2113263</commentid>
    <comment_count>7</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-05-23 18:24:30 -0400</bug_when>
    <thetext>*** Bug 380480 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>