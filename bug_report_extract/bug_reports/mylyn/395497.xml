<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>395497</bug_id>
          
          <creation_ts>2012-11-30 12:38:00 -0500</creation_ts>
          <short_desc>enable setting credentials on RepositoryLocation without saving credentials</short_desc>
          <delta_ts>2012-12-15 12:19:41 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Commons</product>
          <component>Network</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>3.9</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="David Green">david.green</reporter>
          <assigned_to name="David Green">david.green</assigned_to>
          <cc>steffen.pingel</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2189508</commentid>
    <comment_count>0</comment_count>
    <who name="David Green">david.green</who>
    <bug_when>2012-11-30 12:38:35 -0500</bug_when>
    <thetext>Currently the only way to set credentials on a @RepositoryLocation@  without causing those credentials to be saved to the credential store is to use the internal class @InMemoryCredentialsStore@.  

For example:

bc. RepositoryLocation location = new RepositoryLocation(taskRepository.getRepositoryUrl());
		location.setCredentialsStore(new InMemoryCredentialsStore()); // uses internals!
		location.setCredentials(...) // implementation calls credentials.store(credentialStore)

Setting credentials on a RepositoryLocation is a common operation needed by connectors that wish to use the new Mylyn transport layer, since @RepositoryLocation@ objects must be created from settigns on @TaskRepository@  objects.

Please provide public API for configuring a RepositoryLocation that does not interact with persistent the @ICredentialsStore@ .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2189513</commentid>
    <comment_count>1</comment_count>
    <who name="David Green">david.green</who>
    <bug_when>2012-11-30 12:56:43 -0500</bug_when>
    <thetext>pushed review: https://git.eclipse.org/r/#/c/8955/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2190029</commentid>
    <comment_count>2</comment_count>
    <who name="David Green">david.green</who>
    <bug_when>2012-12-03 12:57:34 -0500</bug_when>
    <thetext>Steffen, does @org.eclipse.mylyn.commons.repositories.core.auth.CredentialsStores@ need a @since tag?  For some reason I&apos;m not getting any errors/warnings on this class when building against the 3.8.0 API baseline.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2190033</commentid>
    <comment_count>3</comment_count>
    <who name="David Green">david.green</who>
    <bug_when>2012-12-03 13:01:58 -0500</bug_when>
    <thetext>Steffen, also this test is failing when run as a plug-in test, but not when run without a running platform.  The reason is that LocationService and UiLocationService behave differently when passed a null id (one accepts null, whereas the other does not).  Can you recommend how to proceed here?
  
org.eclipse.mylyn.commons.repositories.tests.core.CredentialsStoresTest.testGetDefaultCredentialsStoreNullID(CredentialsStoresTest.java:39)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2194913</commentid>
    <comment_count>4</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-12-15 12:19:41 -0500</bug_when>
    <thetext>(In reply to comment #2)
&gt; @org.eclipse.mylyn.commons.repositories.core.auth.CredentialsStores@ need a
&gt; @since tag?  For some reason I&apos;m not getting any errors/warnings on this class
&gt; when building against the 3.8.0 API baseline.

Packages are exported as x-internal and therefore you won&apos;t get any warnings.

(In reply to comment #3)
&gt; Steffen, also this test is failing when run as a plug-in test, but not when run
&gt; without a running platform.  The reason is that LocationService and
&gt; UiLocationService behave differently when passed a null id (one accepts null,
&gt; whereas the other does not).  Can you recommend how to proceed here?
&gt; 
&gt; org.eclipse.mylyn.commons.repositories.tests.core.CredentialsStoresTest.testGetDefaultCredentialsStoreNullID(CredentialsStoresTest.java:39)

Seems reasonable to me to not allow null.

I merged the change. Thanks!</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>