<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>355059</bug_id>
          
          <creation_ts>2011-08-18 07:23:00 -0400</creation_ts>
          <short_desc>[Compatibility] Mylyn&apos;s activate task trim is not shown</short_desc>
          <delta_ts>2012-08-30 11:45:56 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Eclipse</classification>
          <product>Platform</product>
          <component>UI</component>
          <version>4.2</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>4.2.1</target_milestone>
          
          <blocked>321278</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="Remy Suen">remy.suen</assigned_to>
          <cc>arunkumar.thondapu</cc>
    
    <cc>emoffatt</cc>
    
    <cc>pwebster</cc>
    
    <cc>remy.suen</cc>
          <qa_contact name="Remy Suen">remy.suen</qa_contact>
          <votes>1</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1980744</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2011-08-18 07:23:28 -0400</bug_when>
    <thetext>Steps:
1. Open Mylyn/Tasks preference page
2. Select Show active task on window trim

The trim is not being displayed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051226</commentid>
    <comment_count>1</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-01-16 16:09:45 -0500</bug_when>
    <thetext>How is this trim contribution created, Steffen?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051811</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-17 15:08:09 -0500</bug_when>
    <thetext>It&apos;s contributed through an extension point (see below). As far as I can tell an instance of TaskTrimWidget is never created and it doesn&apos;t show up on the workbench trim.

    &lt;extension point=&quot;org.eclipse.ui.menus&quot;&gt;
	    &lt;!-- menu for pulldown command --&gt;
	    &lt;menuContribution locationURI=&quot;menu:org.eclipse.mylyn.tasks.ui.trim&quot;&gt;
	      &lt;dynamic
	         class=&quot;org.eclipse.mylyn.internal.tasks.ui.TaskHistoryDropDown&quot;
	         id=&quot;org.eclipse.mylyn.tasks.ui.trim.dropdown&quot;/&gt;
	    &lt;/menuContribution&gt;
	
	    &lt;menuContribution locationURI=&quot;toolbar:org.eclipse.ui.trim.command2?after&quot;&gt;
	      &lt;toolbar id=&quot;org.eclipse.mylyn.tasks.ui.trim.container&quot;&gt;
	        &lt;command
	            id=&quot;org.eclipse.mylyn.tasks.ui.trim&quot;
	            commandId=&quot;org.eclipse.mylyn.tasks.ui.command.previousTask&quot;
	            label=&quot;Previous Task&quot;
	            icon=&quot;icons/etool16/navigate-previous.gif&quot;
	            style=&quot;pulldown&quot;&gt;
	        &lt;/command&gt;
	
	        &lt;control
	           class=&quot;org.eclipse.mylyn.internal.tasks.ui.TaskTrimWidget&quot;
	           id=&quot;org.eclipse.mylyn.tasks.ui.trim.control&quot;/&gt;
	      &lt;/toolbar&gt;
	    &lt;/menuContribution&gt;
	&lt;/extension&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051816</commentid>
    <comment_count>3</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-17 15:15:52 -0500</bug_when>
    <thetext>If I change the locationURI to toolbar:org.eclipse.ui.trim.status at least the Previous Task button shows in the bottom right corner. I can&apos;t move the trim though and the TaskTrimWidget contribution is not rendered.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051822</commentid>
    <comment_count>4</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2012-01-17 15:24:05 -0500</bug_when>
    <thetext>Eric,Remy, Did we enable trim widgets recently?

PW</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051855</commentid>
    <comment_count>5</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-01-17 16:07:12 -0500</bug_when>
    <thetext>Steffen, I turned it on in using the Indigo SR1 Java package on 3.7.1 but couldn&apos;t see anything in the trim. What could I be missing?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051870</commentid>
    <comment_count>6</comment_count>
      <attachid>209646</attachid>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-17 16:26:14 -0500</bug_when>
    <thetext>Created attachment 209646
trim on Indigo SR1/gtk/x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051871</commentid>
    <comment_count>7</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-17 16:27:29 -0500</bug_when>
    <thetext>If you enable it under Preferences &gt; Tasks &gt; Task Navigation it should show a button for navigating through the task history and a label that shows the summary of the active task or &quot;&lt;no task active&gt;&quot; (see screenshot).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2051876</commentid>
    <comment_count>8</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-01-17 16:34:08 -0500</bug_when>
    <thetext>(In reply to comment #6)
&gt; Created attachment 209646 [details]
&gt; trim on Indigo SR1/gtk/x86_64

Thanks, I see it now. I was just automatically in the mood of thinking that trim contributions only appeared at the bottom. I can see it in Indigo SR1 next to the perspective switcher.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2052206</commentid>
    <comment_count>9</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-01-18 08:37:57 -0500</bug_when>
    <thetext>(In reply to comment #4)
&gt; Eric,Remy, Did we enable trim widgets recently?

Not exactly. This problem seems to be related to toolbar:org.eclipse.ui.trim.command2, which has never worked on Eclipse 4 as far as I know.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2052318</commentid>
    <comment_count>10</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-01-18 11:06:27 -0500</bug_when>
    <thetext>(In reply to comment #3)
&gt; I can&apos;t move the trim
&gt; though and the TaskTrimWidget contribution is not rendered.

If I delete the setLayoutData(*) call in line 189 then it seems to work. Steffen, is this line actually necessary? It seems that Mylyn is making an assumption of what the parent&apos;s layout is and is setting a layout data on the child control based on this assumption.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2052506</commentid>
    <comment_count>11</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-01-18 16:23:41 -0500</bug_when>
    <thetext>Good find! Looks like that code is more than four years old and I don&apos;t see any difference on Eclipse 3.x when I remove that line. 

Unfortunately it doesn&apos;t make the trim visible for me. Is there anything else that I need to change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2052510</commentid>
    <comment_count>12</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-01-18 16:27:15 -0500</bug_when>
    <thetext>(In reply to comment #11)
&gt; Good find! Looks like that code is more than four years old and I don&apos;t see any
&gt; difference on Eclipse 3.x when I remove that line.

Great, thanks for checking this, Steffen!

&gt; Unfortunately it doesn&apos;t make the trim visible for me. Is there anything else
&gt; that I need to change?

I had changed the locationURI to toolbar:org.eclipse.ui.trim.status like you did in comment 3 for testing purposes. There is still work on our side that needs to be done to get a contribution pointing at toolbar:org.eclipse.ui.trim.command2 to work.

The ?after syntax that is being used right now is also incorrect but I&apos;ve added code to compensate for this. See bug 368968.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2070263</commentid>
    <comment_count>13</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-02-23 13:48:11 -0500</bug_when>
    <thetext>(In reply to comment #12)
&gt; There is still work on our side that
&gt; needs to be done to get a contribution pointing at
&gt; toolbar:org.eclipse.ui.trim.command2 to work.

I can convert this to toolbar:org.eclipse.ui.main.toolbar internally but it becomes difficult to place it at the end. &quot;endof&quot; could be used but that only works in the beginning. If you go &apos;Window &gt; New Window&apos; then it is placed at the end after all the tool items and before the perspective switcher when it should go after (based on 3.x behaviour).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2070302</commentid>
    <comment_count>14</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-02-23 14:38:24 -0500</bug_when>
    <thetext>Fix pushed to master. This should get toolbar:org.eclipse.ui.trim.command2 contributions up and running.
http://git.eclipse.org/c/platform/eclipse.platform.ui.git/commit/?id=8b1ee24eb1f00d59b30f75a1b15ce6cb619f1873

Thanks for the bug report, Steffen!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079374</commentid>
    <comment_count>15</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-03-13 08:18:26 -0400</bug_when>
    <thetext>Seems to have some erratic behaviour. For starters, the control is there even if the preference is off by default.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2079446</commentid>
    <comment_count>16</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-13 09:28:58 -0400</bug_when>
    <thetext>We manually hide the control through code due to this platform limitation:

 201589: [Contributions] visibleWhen has no effect on toolbar
 https://bugs.eclipse.org/bugs/show_bug.cgi?id=201589

Remy, let me know if we should change the implementation that controls visibility for e4 since we are essentially relying on internals to do that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2080628</commentid>
    <comment_count>17</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-03-14 13:09:34 -0400</bug_when>
    <thetext>(In reply to comment #16)
&gt; We manually hide the control through code due to this platform limitation

What does the code look like? I would&apos;ve thought it would be possible to programmatically make the control visible or not without using internals.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2080686</commentid>
    <comment_count>18</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-14 13:56:12 -0400</bug_when>
    <thetext>This is the relevant code:

public class TaskTrimWidget extends WorkbenchWindowControlContribution {

	private void setTrimVisible(boolean visible) {
		IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
		if (window instanceof WorkbenchWindow) {
			IWindowTrim trim = ((WorkbenchWindow) window).getTrimManager().getTrim(ID_CONTAINER);
			if (trim != null) {
				((WorkbenchWindow) window).getTrimManager().setTrimVisible(trim, visible);
				((WorkbenchWindow) window).getTrimManager().forceLayout();
			}
		}
	}

	protected Control createControl(Composite parent) {
		composite = new Composite(parent, SWT.NONE);
		...
		
		if (!shouldShowTrim()) {
			if (parent instanceof ToolBar) {
				// bug 201589: it&apos;s not possible to hide the contribution on startup, as a work-around the tool bar is hidden which avoids flickering of the layout
				parent.setVisible(false);
			}
			// needs to be invoked asynchronously since the trim contribution is just getting constructed when createControl() is invoked
			parent.getDisplay().asyncExec(new Runnable() {
				public void run() {
					setTrimVisible(shouldShowTrim());
				}
			});
		}

		return composite;
	}

	
TaskTrimWidget.setTrimVisible() is also invoked when the preference is toggled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081018</commentid>
    <comment_count>19</comment_count>
    <who name="Arun Thondapu">arunkumar.thondapu</who>
    <bug_when>2012-03-15 06:05:39 -0400</bug_when>
    <thetext>(In reply to comment #18)
&gt; 
&gt; TaskTrimWidget.setTrimVisible() is also invoked when the preference is toggled.

Toggling the preference doesn&apos;t seem to have any effect on the visibility, is there any workaround to hide the trim?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081080</commentid>
    <comment_count>20</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2012-03-15 07:14:52 -0400</bug_when>
    <thetext>(In reply to comment #16)
&gt; We manually hide the control through code due to this platform limitation:
&gt; 
&gt;  201589: [Contributions] visibleWhen has no effect on toolbar
&gt;  https://bugs.eclipse.org/bugs/show_bug.cgi?id=201589

While not ideal, you can get the same behaviour by putting the visibleWhen on the entries in the toolbar. In your case on the command and the control.

You can use org.eclipse.core.expressions.definitions to define the expression once and reuse it.

PW</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081502</commentid>
    <comment_count>21</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-03-15 16:24:14 -0400</bug_when>
    <thetext>This seems to work on 3.x but it assumes knowledge of the control hierarchy.

private void setTrimVisible(boolean visible) {
  if (composite != null &amp;&amp; !composite.isDisposed()) {
    composite.getParent().setVisible(visible);
    composite.getParent().getParent().layout(true, true);
  }
}

We need to fix bug 201589 and/or allow clients to toggle visibility by some protected API method defined by WorkbenchWindowControlContribution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081515</commentid>
    <comment_count>22</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-03-15 16:40:32 -0400</bug_when>
    <thetext>(In reply to comment #15)
&gt; Seems to have some erratic behaviour. For starters, the control is there even
&gt; if the preference is off by default.

I no longer see it with I20120314-2200. The code seems to be running so I&apos;ll need to do more digging...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081699</commentid>
    <comment_count>23</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2012-03-16 07:30:11 -0400</bug_when>
    <thetext>(In reply to comment #21)
&gt; 
&gt; We need to fix bug 201589 and/or allow clients to toggle visibility by some
&gt; protected API method defined by WorkbenchWindowControlContribution.

In 3.x it&apos;s accomplished by setting the visibleWhen on the contained items as opposed to the toolbar itself.  In 4.x it will work once bug 374326 is fixed.

PW</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081746</commentid>
    <comment_count>24</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-03-16 08:56:33 -0400</bug_when>
    <thetext>Got a layout conflict going on here. Mylyn sets a GridData to the child control but the parent composite we provide them uses FillLayout.

java.lang.ClassCastException: org.eclipse.swt.layout.GridData cannot be cast to org.eclipse.swt.layout.FillData
	at org.eclipse.swt.layout.FillLayout.computeChildSize(FillLayout.java:144)
	at org.eclipse.swt.layout.FillLayout.computeSize(FillLayout.java:122)
	at org.eclipse.swt.widgets.Composite.computeSize(Composite.java:233)
	at org.eclipse.jface.action.ControlContribution.computeWidth(ControlContribution.java:55)
	at org.eclipse.jface.action.ControlContribution.fill(ControlContribution.java:106)
	at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:353)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.processContents(ToolBarManagerRenderer.java:504)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer$5.handleEvent(ToolBarManagerRenderer.java:220)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4683)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:184)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
	at org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification(EcoreEList.java:249)
	at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:356)
	at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:339)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarContributionRecord.mergeIntoModel(ToolBarContributionRecord.java:169)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.processAddition(ToolBarManagerRenderer.java:368)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.generateContributions(ToolBarManagerRenderer.java:346)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.processContribution(ToolBarManagerRenderer.java:327)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.createWidget(ToolBarManagerRenderer.java:265)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:882)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:616)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$4.handleEvent(PartRenderingEngine.java:261)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4683)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:184)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
	at org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification(EcoreEList.java:249)
	at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:356)
	at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:339)
	at org.eclipse.e4.ui.internal.workbench.ContributionsAnalyzer.processAddition(ContributionsAnalyzer.java:354)
	at org.eclipse.e4.ui.workbench.renderers.swt.TrimBarRenderer.addTrimContributions(TrimBarRenderer.java:186)
	at org.eclipse.e4.ui.workbench.renderers.swt.TrimBarRenderer.processContents(TrimBarRenderer.java:163)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:505)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:490)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$3.handleEvent(PartRenderingEngine.java:217)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4683)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:184)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
	at org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification(EcoreEList.java:249)
	at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:294)
	at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:301)
	at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.getTrim(ModelServiceImpl.java:715)
	at org.eclipse.ui.internal.WorkbenchWindow.populateBottomTrimContributions(WorkbenchWindow.java:843)
	at org.eclipse.ui.internal.WorkbenchWindow.setup(WorkbenchWindow.java:547)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081849</commentid>
    <comment_count>25</comment_count>
    <who name="Remy Suen">remy.suen</who>
    <bug_when>2012-03-16 10:55:18 -0400</bug_when>
    <thetext>(In reply to comment #24)
&gt; Got a layout conflict going on here. Mylyn sets a GridData to the child control
&gt; but the parent composite we provide them uses FillLayout.

But Steffen should&apos;ve removed this per comment 11 so I&apos;m not sure what&apos;s going on.
http://git.eclipse.org/c/mylyn/org.eclipse.mylyn.tasks.git/commit/?id=77b27ed8d525c7f83677544a349bea967f5286bf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2081906</commentid>
    <comment_count>26</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-16 11:56:00 -0400</bug_when>
    <thetext>I&apos;m currently updating to the latest 4.2 I-build and will take a look in a bit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2082121</commentid>
    <comment_count>27</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-16 16:22:02 -0400</bug_when>
    <thetext>!ENTRY org.eclipse.equinox.event 4 0 2012-03-16 21:18:16.944
!MESSAGE Exception while dispatching event org.osgi.service.event.Event [topic=org/eclipse/e4/ui/model/ui/ElementContainer/children/ADD] to handler org.eclipse.e4.ui.services.internal.events.UIEventHandler@393f8181
!STACK 0
org.eclipse.swt.SWTException: Widget is disposed
	at org.eclipse.swt.SWT.error(SWT.java:4361)
	at org.eclipse.swt.SWT.error(SWT.java:4276)
	at org.eclipse.swt.SWT.error(SWT.java:4247)
	at org.eclipse.swt.widgets.Widget.error(Widget.java:479)
	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:416)
	at org.eclipse.swt.widgets.Widget.getData(Widget.java:505)
	at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:333)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.processContents(ToolBarManagerRenderer.java:504)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer$5.handleEvent(ToolBarManagerRenderer.java:220)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4290)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:184)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:380)
	at org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification(EcoreEList.java:255)
	at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:362)
	at org.eclipse.emf.common.util.AbstractEList.add(AbstractEList.java:345)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarContributionRecord.mergeIntoModel(ToolBarContributionRecord.java:169)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.processAddition(ToolBarManagerRenderer.java:368)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.generateContributions(ToolBarManagerRenderer.java:346)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.processContribution(ToolBarManagerRenderer.java:327)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer.createWidget(ToolBarManagerRenderer.java:265)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:882)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:616)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:505)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:490)
	at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.adjustTR(StackRenderer.java:620)
	at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1021)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:97)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:632)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveRenderer.processContents(PerspectiveRenderer.java:59)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.showTab(PerspectiveStackRenderer.java:103)
	at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:97)
	at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.postProcess(PerspectiveStackRenderer.java:77)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:632)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
	at org.eclipse.e4.ui.workbench.renderers.swt.WBWRenderer.processContents(WBWRenderer.java:626)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:628)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:718)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:689)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:683)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:668)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:954)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:909)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:85)
	at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:580)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:535)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.equinox.event 4 0 2012-03-16 21:19:21.770
!MESSAGE Exception while dispatching event org.osgi.service.event.Event [topic=org/eclipse/e4/ui/model/ui/UIElement/visible/SET] to handler org.eclipse.e4.ui.services.internal.events.UIEventHandler@94ed923
!STACK 0
org.eclipse.swt.SWTException: Widget is disposed
	at org.eclipse.swt.SWT.error(SWT.java:4361)
	at org.eclipse.swt.SWT.error(SWT.java:4276)
	at org.eclipse.swt.SWT.error(SWT.java:4247)
	at org.eclipse.swt.widgets.Widget.error(Widget.java:479)
	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:416)
	at org.eclipse.swt.widgets.Control.getParent(Control.java:2664)
	at org.eclipse.e4.ui.workbench.addons.cleanupaddon.CleanupAddon$2.handleEvent(CleanupAddon.java:205)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4290)
	at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:184)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
	at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
	at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
	at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
	at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
	at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
	at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
	at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
	at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
	at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
	at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:380)
	at org.eclipse.e4.ui.model.application.ui.impl.UIElementImpl.setVisible(UIElementImpl.java:332)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarContributionRecord.updateVisibility(ToolBarContributionRecord.java:71)
	at org.eclipse.e4.ui.workbench.renderers.swt.ToolBarManagerRenderer$6.changed(ToolBarManagerRenderer.java:382)
	at org.eclipse.e4.core.internal.contexts.TrackableComputationExt.update(TrackableComputationExt.java:109)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.processScheduled(EclipseContext.java:298)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.set(EclipseContext.java:312)
	at org.eclipse.e4.core.internal.contexts.EclipseContext.activate(EclipseContext.java:598)
	at org.eclipse.e4.ui.internal.workbench.swt.ShellActivationListener$3.run(ShellActivationListener.java:153)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.e4.ui.internal.workbench.swt.ShellActivationListener.deactivate(ShellActivationListener.java:145)
	at org.eclipse.e4.ui.internal.workbench.swt.ShellActivationListener.access$0(ShellActivationListener.java:131)
	at org.eclipse.e4.ui.internal.workbench.swt.ShellActivationListener$4.widgetDisposed(ShellActivationListener.java:197)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:123)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1271)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1295)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:1093)
	at org.eclipse.swt.widgets.Control.release(Control.java:3529)
	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:475)
	at org.eclipse.swt.widgets.Shell.dispose(Shell.java:2307)
	at org.eclipse.jface.window.Window.close(Window.java:335)
	at org.eclipse.jface.dialogs.Dialog.close(Dialog.java:979)
	at org.eclipse.jface.preference.PreferenceDialog.close(PreferenceDialog.java:318)
	at org.eclipse.ui.internal.dialogs.FilteredPreferenceDialog.close(FilteredPreferenceDialog.java:698)
	at org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.close(WorkbenchPreferenceDialog.java:147)
	at org.eclipse.jface.preference.PreferenceDialog$13.run(PreferenceDialog.java:987)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
	at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
	at org.eclipse.jface.preference.PreferenceDialog.okPressed(PreferenceDialog.java:945)
	at org.eclipse.ui.internal.dialogs.FilteredPreferenceDialog.okPressed(FilteredPreferenceDialog.java:448)
	at org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.okPressed(WorkbenchPreferenceDialog.java:171)
	at org.eclipse.jface.preference.PreferenceDialog.buttonPressed(PreferenceDialog.java:233)
	at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1271)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3553)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3178)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
	at org.eclipse.jface.window.Window.open(Window.java:801)
	at org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.open(WorkbenchPreferenceDialog.java:215)
	at org.eclipse.ui.internal.handlers.ShowPreferencePageHandler.execute(ShowPreferencePageHandler.java:58)
	at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
	at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
	at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:229)
	at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:210)
	at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:131)
	at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:161)
	at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.executeItem(HandledContributionItem.java:793)
	at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.handleWidgetSelection(HandledContributionItem.java:686)
	at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.access$6(HandledContributionItem.java:670)
	at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem$4.handleEvent(HandledContributionItem.java:616)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1271)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3553)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3178)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1015)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:909)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:85)
	at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:580)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:535)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1414)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2082130</commentid>
    <comment_count>28</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-16 16:27:08 -0400</bug_when>
    <thetext>Based on Paul&apos;s comments I tried hiding the contributions which seems to work for the command contribution but not the control contribution: http://review.mylyn.org/375 . With that change the control contribution doesn&apos;t show anymore and I get the errors from comment 27 but it sounds like that might be related to bug 374326.

Paul, does that look like the recommended approach that we should follow?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2082494</commentid>
    <comment_count>29</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2012-03-19 07:39:00 -0400</bug_when>
    <thetext>(In reply to comment #28)
&gt; 
&gt; Paul, does that look like the recommended approach that we should follow?

Yes, that&apos;s it.  But you&apos;re right, bug 374326 is 4.2 post-M6 (it&apos;ll be in this week&apos;s I build), so you probably want to hold off until you can take the I build/M7.

You can ask the property tester to re-evaluate at any time using org.eclipse.ui.services.IEvaluationService.requestEvaluation(String)

The only other thing to be careful about is the property tester has been added in your UI plugin.  forcePluginActivation will allow the UI framework to load any UI delegates it thinks it needs.

PW</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2082688</commentid>
    <comment_count>30</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2012-03-19 12:48:37 -0400</bug_when>
    <thetext>Thanks very much for the review! I have opened bug 374673 to track the required changes in Mylyn. I&apos;ll commit a fix shortly after M6 is out.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2126201</commentid>
    <comment_count>31</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2012-06-19 14:23:42 -0400</bug_when>
    <thetext>Steffen, please re-open if there&apos;s additional work here not covered by another bug.

PW</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2154369</commentid>
    <comment_count>32</comment_count>
    <who name="Paul Webster">pwebster</who>
    <bug_when>2012-08-30 11:45:56 -0400</bug_when>
    <thetext>in M20120829-1200
PW</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>209646</attachid>
            <date>2012-01-17 16:26:00 -0500</date>
            <delta_ts>2012-01-17 16:26:14 -0500</delta_ts>
            <desc>trim on Indigo SR1/gtk/x86_64</desc>
            <filename>clipboard.png</filename>
            <type>image/png</type>
            <size>3239</size>
            <attacher name="Steffen Pingel">steffen.pingel</attacher>
            
              <data encoding="base64">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
</data>

          </attachment>
      

    </bug>

</bugzilla>