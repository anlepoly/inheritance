<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>416743</bug_id>
          
          <creation_ts>2013-09-06 11:25:00 -0400</creation_ts>
          <short_desc>configure Hudson instance for Mylyn (HIPP)</short_desc>
          <delta_ts>2013-10-07 15:41:06 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn</product>
          <component>Releng</component>
          <version>unspecified</version>
          <rep_platform>Macintosh</rep_platform>
          <op_sys>Mac OS X</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>sprint=7;</status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>3.10</target_milestone>
          
          <blocked>413191</blocked>
    
    <blocked>417253</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Steffen Pingel">steffen.pingel</reporter>
          <assigned_to name="Steffen Pingel">steffen.pingel</assigned_to>
          <cc>tomasz.zarna</cc>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2303762</commentid>
    <comment_count>0</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-09-06 11:25:57 -0400</bug_when>
    <thetext>The sandbox Hudson instance is going away so we should request a Hudson instance for Mylyn to continue to run Gerrit trigger builds: https://bugs.eclipse.org/bugs/show_bug.cgi?id=403843.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2307305</commentid>
    <comment_count>1</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-09-16 10:04:41 -0400</bug_when>
    <thetext>Move the Gerrit trigger Hudson jobs from the sandbox to the new Hudson instance: https://hudson.eclipse.org/mylyn/.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314157</commentid>
    <comment_count>2</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-04 01:00:29 -0400</bug_when>
    <thetext>I created new jobs and configured them to listen to Gerrit events. If we don&apos;t run into problems we should remove the ones from the sandbox.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314243</commentid>
    <comment_count>3</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-04 06:01:54 -0400</bug_when>
    <thetext>Awesome, I&apos;ll keep an eye on them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314252</commentid>
    <comment_count>4</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-04 06:23:53 -0400</bug_when>
    <thetext>There is an issue with one test in the Commons build [1]:

javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
	at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
	at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
	at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1822)
	at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1004)
	at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:820)
	at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
	at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)
	at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:111)
	at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:264)
	at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:98)
	at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:252)
	at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:282)
	at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247)
	at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:216)
	at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298)
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
	at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:647)
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
	at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
	at org.eclipse.mylyn.commons.repositories.http.core.HttpUtil.execute(HttpUtil.java:194)
	at org.eclipse.mylyn.commons.repositories.http.core.CommonHttpClient.execute(CommonHttpClient.java:80)
	at org.eclipse.mylyn.commons.repositories.http.tests.CommonHttpClientTest.testCertificateAuthenticationCertificate(CommonHttpClientTest.java:74)
	...

[1] https://hudson.eclipse.org/mylyn/job/gerrit-mylyn-commons/1/testReport/org.eclipse.mylyn.commons.repositories.http.tests/CommonHttpClientTest/testCertificateAuthenticationCertificate/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314277</commentid>
    <comment_count>5</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-04 07:38:56 -0400</bug_when>
    <thetext>Hey Steffen, I don&apos;t see any job for Builds, and I don&apos;t think I&apos;m able to create one myself. I can only edit config for the template-gerrit job. I&apos;m not able to configure any other job and I don&apos;t see an option to create a new one either.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314474</commentid>
    <comment_count>6</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-04 12:51:53 -0400</bug_when>
    <thetext>It appears that I&apos;m the only one who can create jobs right now but I gave you and Sam full access to the existing ones. My sense is that we should leave existing jobs on https://hudson.eclipse.org/hudson/view/Mylyn/ since they promote to the download area and publish to Sonar. The HIPP instance would be for Gerrit trigger builds.

What other jobs did you have in mind?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314489</commentid>
    <comment_count>7</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-04 13:33:34 -0400</bug_when>
    <thetext>(In reply to Steffen Pingel from comment #6)
&gt; What other jobs did you have in mind?

I can reconfigure template-gerrit, but not gerrit-mylyn-commons, gerrit-mylyn-context, gerrit-mylyn-docs, gerrit-mylyn-incubator, gerrit-mylyn-releng, gerrit-mylyn-reviews, gerrit-mylyn-tasks, gerrit-mylyn-versions, template-snapshot. I&apos;m not saying there&apos;s something wrong with the current setup, I just don&apos;t see the option to configure the job.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314615</commentid>
    <comment_count>8</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-05 00:15:54 -0400</bug_when>
    <thetext>Are you logged in? I assigned you and Sam permission to configure the jobs, e.g.: https://hudson.eclipse.org/mylyn/job/gerrit-mylyn-commons/configure

I&apos;ll take this for now since we are almost done here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2314971</commentid>
    <comment_count>9</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-07 07:07:16 -0400</bug_when>
    <thetext>(In reply to Steffen Pingel from comment #8)
&gt; Are you logged in? 

I&apos;m pretty sure I was logged in. Today it looks all good now, thx.

I still don&apos;t see any job for Mylyn Builds.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315180</commentid>
    <comment_count>10</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-07 12:01:50 -0400</bug_when>
    <thetext>Ah, totally missed that! Didn&apos;t realize you were referring to Mylyn Builds :). Here we go: https://hudson.eclipse.org/mylyn/job/gerrit-mylyn-builds/ .

Did you see that Frank&apos;s patch magically fixes the certificate test? https://hudson.eclipse.org/mylyn/job/gerrit-mylyn-commons/11/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315191</commentid>
    <comment_count>11</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-07 12:25:10 -0400</bug_when>
    <thetext>(In reply to Steffen Pingel from comment #10)
&gt; Did you see that Frank&apos;s patch magically fixes the certificate test?
&gt; https://hudson.eclipse.org/mylyn/job/gerrit-mylyn-commons/11/

Hmm, that&apos;s cool, but I wouldn&apos;t expect it to present a different behavior when running on OSGi 3.9 or older. I will take a look at that change again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315251</commentid>
    <comment_count>12</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-07 14:26:35 -0400</bug_when>
    <thetext>It seems that the test is being skipped with the &quot;fix&quot; for CommonTestUtil.getFile():

Running org.eclipse.mylyn.commons.repositories.http.tests.CommonHttpClientTest
Skipped CommonHttpClientTest.testCertificateAuthenticationCertificateReset due to incompatible JVM
Skipped CommonHttpClientTest.testCertificateAuthenticationCertificate() due to missing credentials</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315280</commentid>
    <comment_count>13</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-07 15:14:51 -0400</bug_when>
    <thetext>I have disabled the failing test for now which is consistent with the previous behavior on Sandbox: https://git.eclipse.org/r/#/c/17127/.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315288</commentid>
    <comment_count>14</comment_count>
    <who name="Steffen Pingel">steffen.pingel</who>
    <bug_when>2013-10-07 15:31:35 -0400</bug_when>
    <thetext>All builds on the Mylyn instance are stable now. I have disabled Gerrit triggers on the sandbox.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2315291</commentid>
    <comment_count>15</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2013-10-07 15:41:06 -0400</bug_when>
    <thetext>Double thumbs up!</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>