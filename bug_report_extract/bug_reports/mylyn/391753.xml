<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugs.eclipse.org/bugs/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.7"
          urlbase="https://bugs.eclipse.org/bugs/"
          
          maintainer="webmaster@eclipse.org"
>

    <bug>
          <bug_id>391753</bug_id>
          
          <creation_ts>2012-10-12 06:00:00 -0400</creation_ts>
          <short_desc>NPE while refreshing a bugzilla query</short_desc>
          <delta_ts>2012-10-15 04:16:41 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>14</classification_id>
          <classification>Mylyn</classification>
          <product>Mylyn Tasks</product>
          <component>Bugzilla</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows 7</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tomasz Zarna">tomasz.zarna</reporter>
          <assigned_to name="Frank Becker">eclipse</assigned_to>
          
          <qa_contact name="Frank Becker">eclipse</qa_contact>
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2170972</commentid>
    <comment_count>0</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2012-10-12 06:00:07 -0400</bug_when>
    <thetext>Mylyn 3.9.0.I20120916_0751

Not sure if I selected a single task or a whole query, but after hitting F5 I got:

java.lang.NullPointerException
	at org.eclipse.mylyn.internal.tasks.ui.actions.SynchronizeSelectedAction.synchronizeSelected(SynchronizeSelectedAction.java:144)
	at org.eclipse.mylyn.internal.tasks.ui.actions.SynchronizeSelectedAction.run(SynchronizeSelectedAction.java:60)
	at org.eclipse.ui.actions.ActionDelegate.runWithEvent(ActionDelegate.java:70)
	at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:241)
	at org.eclipse.jface.commands.ActionHandler.execute(ActionHandler.java:119)
	at org.eclipse.core.commands.Command.executeWithChecks(Command.java:499)
	at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
	at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:468)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:786)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:885)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:567)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:508)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:123)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1052)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1104)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1100)
	at org.eclipse.swt.widgets.Widget.wmKeyDown(Widget.java:1823)
	at org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:4892)
	at org.eclipse.swt.widgets.Tree.WM_KEYDOWN(Tree.java:6090)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:4560)
	at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2546)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3756)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
	at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
	at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

Couldn&apos;t reproduce.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171300</commentid>
    <comment_count>1</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-10-12 15:04:50 -0400</bug_when>
    <thetext>I think the problem must be in your tasklist.xml.

Can you post me your .../.metadata/.mylyn/tasks.xml.zip so that I can verify this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171329</commentid>
    <comment_count>2</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2012-10-12 15:50:47 -0400</bug_when>
    <thetext>(In reply to comment #1)
&gt; Can you post me your .../.metadata/.mylyn/tasks.xml.zip so that I can verify
&gt; this.

I&apos;m afraid I can&apos;t. I&apos;ve got there queries from internal repos, which I don&apos;t think I&apos;m allowed to share. Is there any other way I can help you?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171414</commentid>
    <comment_count>3</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-10-13 03:52:04 -0400</bug_when>
    <thetext>(In reply to comment #2)
&gt; (In reply to comment #1)
&gt; &gt; Can you post me your .../.metadata/.mylyn/tasks.xml.zip so that I can verify
&gt; &gt; this.
&gt; 
&gt; I&apos;m afraid I can&apos;t. I&apos;ve got there queries from internal repos, which I
&gt; don&apos;t think I&apos;m allowed to share. Is there any other way I can help you?

If you are not allowed to mail me the file direct, you can look into the file and there you find the &lt;Query&gt; Tag. I want to know it the Attribute RepositoryUrl is correct because if I change this to an empty String I get exact your stack trace.

Here an part of the mylyn Bugzilla test repository (see the last line of the example)

ConnectorKind=&quot;bugzilla&quot; Handle=&quot;handle-6&quot; LastRefreshTimeStamp=&quot;Okt 12, 20:41:09&quot; Name=&quot;Mylyn.org 4.0 Product with Spaces&quot; QueryString=&quot;http://mylyn.org/bugs40/buglist.cgi?short_desc_type=allwordssubstr&amp;amp;short_desc=&amp;amp;product=Product+with+Spaces&amp;amp;long_desc_type=allwordssubstr&amp;amp;long_desc=&amp;amp;status_whiteboard_type=allwordssubstr&amp;amp;status_whiteboard=&amp;amp;order=Importance&quot; RepositoryUrl=&quot;http://mylyn.org/bugs40&quot;&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171416</commentid>
    <comment_count>4</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2012-10-13 04:59:46 -0400</bug_when>
    <thetext>(In reply to comment #3)
&gt; I want to know it the Attribute
&gt; RepositoryUrl is correct because if I change this to an empty String I get
&gt; exact your stack trace.

That might be it. Right now all my 19 queries seem to have valid RepositoryUrls, but I recall having a problem entering a url for one of my repos around that time. It is possible it stayed blank and resulted in what we see in comment 0. Then I either fixed the repo or got rid of it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171533</commentid>
    <comment_count>5</comment_count>
    <who name="Frank Becker">eclipse</who>
    <bug_when>2012-10-14 12:53:53 -0400</bug_when>
    <thetext>I add an test that the repository is not null and if so I log the Error to the console with the whole query URL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2171616</commentid>
    <comment_count>6</comment_count>
    <who name="Tomasz Zarna">tomasz.zarna</who>
    <bug_when>2012-10-15 04:16:41 -0400</bug_when>
    <thetext>Thanks Frank, that was lightning fast :)</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>